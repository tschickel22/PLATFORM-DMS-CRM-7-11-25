function HU(e,t){for(var n=0;n<t.length;n++){const a=t[n];if(typeof a!="string"&&!Array.isArray(a)){for(const s in a)if(s!=="default"&&!(s in e)){const i=Object.getOwnPropertyDescriptor(a,s);i&&Object.defineProperty(e,s,i.get?i:{enumerable:!0,get:()=>a[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))a(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&a(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function a(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();var fc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Er(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function GU(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function a(){return this instanceof a?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(a){var s=Object.getOwnPropertyDescriptor(e,a);Object.defineProperty(n,a,s.get?s:{enumerable:!0,get:function(){return e[a]}})}),n}var p6={exports:{}},Rb={},v6={exports:{}},tr={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jv=Symbol.for("react.element"),KU=Symbol.for("react.portal"),YU=Symbol.for("react.fragment"),XU=Symbol.for("react.strict_mode"),QU=Symbol.for("react.profiler"),JU=Symbol.for("react.provider"),ZU=Symbol.for("react.context"),eV=Symbol.for("react.forward_ref"),tV=Symbol.for("react.suspense"),rV=Symbol.for("react.memo"),nV=Symbol.for("react.lazy"),g3=Symbol.iterator;function aV(e){return e===null||typeof e!="object"?null:(e=g3&&e[g3]||e["@@iterator"],typeof e=="function"?e:null)}var x6={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g6=Object.assign,y6={};function km(e,t,n){this.props=e,this.context=t,this.refs=y6,this.updater=n||x6}km.prototype.isReactComponent={};km.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};km.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function b6(){}b6.prototype=km.prototype;function kC(e,t,n){this.props=e,this.context=t,this.refs=y6,this.updater=n||x6}var OC=kC.prototype=new b6;OC.constructor=kC;g6(OC,km.prototype);OC.isPureReactComponent=!0;var y3=Array.isArray,j6=Object.prototype.hasOwnProperty,_C={current:null},w6={key:!0,ref:!0,__self:!0,__source:!0};function N6(e,t,n){var a,s={},i=null,o=null;if(t!=null)for(a in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(i=""+t.key),t)j6.call(t,a)&&!w6.hasOwnProperty(a)&&(s[a]=t[a]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var c=Array(l),d=0;d<l;d++)c[d]=arguments[d+2];s.children=c}if(e&&e.defaultProps)for(a in l=e.defaultProps,l)s[a]===void 0&&(s[a]=l[a]);return{$$typeof:Jv,type:e,key:i,ref:o,props:s,_owner:_C.current}}function sV(e,t){return{$$typeof:Jv,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function LC(e){return typeof e=="object"&&e!==null&&e.$$typeof===Jv}function iV(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var b3=/\/+/g;function pw(e,t){return typeof e=="object"&&e!==null&&e.key!=null?iV(""+e.key):t.toString(36)}function y0(e,t,n,a,s){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case Jv:case KU:o=!0}}if(o)return o=e,s=s(o),e=a===""?"."+pw(o,0):a,y3(s)?(n="",e!=null&&(n=e.replace(b3,"$&/")+"/"),y0(s,t,n,"",function(d){return d})):s!=null&&(LC(s)&&(s=sV(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(b3,"$&/")+"/")+e)),t.push(s)),1;if(o=0,a=a===""?".":a+":",y3(e))for(var l=0;l<e.length;l++){i=e[l];var c=a+pw(i,l);o+=y0(i,t,n,c,s)}else if(c=aV(e),typeof c=="function")for(e=c.call(e),l=0;!(i=e.next()).done;)i=i.value,c=a+pw(i,l++),o+=y0(i,t,n,c,s);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function yg(e,t,n){if(e==null)return e;var a=[],s=0;return y0(e,a,"","",function(i){return t.call(n,i,s++)}),a}function oV(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Ya={current:null},b0={transition:null},lV={ReactCurrentDispatcher:Ya,ReactCurrentBatchConfig:b0,ReactCurrentOwner:_C};function S6(){throw Error("act(...) is not supported in production builds of React.")}tr.Children={map:yg,forEach:function(e,t,n){yg(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return yg(e,function(){t++}),t},toArray:function(e){return yg(e,function(t){return t})||[]},only:function(e){if(!LC(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};tr.Component=km;tr.Fragment=YU;tr.Profiler=QU;tr.PureComponent=kC;tr.StrictMode=XU;tr.Suspense=tV;tr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=lV;tr.act=S6;tr.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var a=g6({},e.props),s=e.key,i=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,o=_C.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)j6.call(t,c)&&!w6.hasOwnProperty(c)&&(a[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)a.children=n;else if(1<c){l=Array(c);for(var d=0;d<c;d++)l[d]=arguments[d+2];a.children=l}return{$$typeof:Jv,type:e.type,key:s,ref:i,props:a,_owner:o}};tr.createContext=function(e){return e={$$typeof:ZU,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:JU,_context:e},e.Consumer=e};tr.createElement=N6;tr.createFactory=function(e){var t=N6.bind(null,e);return t.type=e,t};tr.createRef=function(){return{current:null}};tr.forwardRef=function(e){return{$$typeof:eV,render:e}};tr.isValidElement=LC;tr.lazy=function(e){return{$$typeof:nV,_payload:{_status:-1,_result:e},_init:oV}};tr.memo=function(e,t){return{$$typeof:rV,type:e,compare:t===void 0?null:t}};tr.startTransition=function(e){var t=b0.transition;b0.transition={};try{e()}finally{b0.transition=t}};tr.unstable_act=S6;tr.useCallback=function(e,t){return Ya.current.useCallback(e,t)};tr.useContext=function(e){return Ya.current.useContext(e)};tr.useDebugValue=function(){};tr.useDeferredValue=function(e){return Ya.current.useDeferredValue(e)};tr.useEffect=function(e,t){return Ya.current.useEffect(e,t)};tr.useId=function(){return Ya.current.useId()};tr.useImperativeHandle=function(e,t,n){return Ya.current.useImperativeHandle(e,t,n)};tr.useInsertionEffect=function(e,t){return Ya.current.useInsertionEffect(e,t)};tr.useLayoutEffect=function(e,t){return Ya.current.useLayoutEffect(e,t)};tr.useMemo=function(e,t){return Ya.current.useMemo(e,t)};tr.useReducer=function(e,t,n){return Ya.current.useReducer(e,t,n)};tr.useRef=function(e){return Ya.current.useRef(e)};tr.useState=function(e){return Ya.current.useState(e)};tr.useSyncExternalStore=function(e,t,n){return Ya.current.useSyncExternalStore(e,t,n)};tr.useTransition=function(){return Ya.current.useTransition()};tr.version="18.3.1";v6.exports=tr;var w=v6.exports;const pe=Er(w),Mo=HU({__proto__:null,default:pe},[w]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cV=w,dV=Symbol.for("react.element"),uV=Symbol.for("react.fragment"),fV=Object.prototype.hasOwnProperty,mV=cV.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,hV={key:!0,ref:!0,__self:!0,__source:!0};function C6(e,t,n){var a,s={},i=null,o=null;n!==void 0&&(i=""+n),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(o=t.ref);for(a in t)fV.call(t,a)&&!hV.hasOwnProperty(a)&&(s[a]=t[a]);if(e&&e.defaultProps)for(a in t=e.defaultProps,t)s[a]===void 0&&(s[a]=t[a]);return{$$typeof:dV,type:e,key:i,ref:o,props:s,_owner:mV.current}}Rb.Fragment=uV;Rb.jsx=C6;Rb.jsxs=C6;p6.exports=Rb;var r=p6.exports,uN={},A6={exports:{}},Ms={},E6={exports:{}},P6={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(B,U){var W=B.length;B.push(U);e:for(;0<W;){var q=W-1>>>1,R=B[q];if(0<s(R,U))B[q]=U,B[W]=R,W=q;else break e}}function n(B){return B.length===0?null:B[0]}function a(B){if(B.length===0)return null;var U=B[0],W=B.pop();if(W!==U){B[0]=W;e:for(var q=0,R=B.length,V=R>>>1;q<V;){var G=2*(q+1)-1,ee=B[G],re=G+1,de=B[re];if(0>s(ee,W))re<R&&0>s(de,ee)?(B[q]=de,B[re]=W,q=re):(B[q]=ee,B[G]=W,q=G);else if(re<R&&0>s(de,W))B[q]=de,B[re]=W,q=re;else break e}}return U}function s(B,U){var W=B.sortIndex-U.sortIndex;return W!==0?W:B.id-U.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var c=[],d=[],f=1,u=null,m=3,h=!1,x=!1,g=!1,p=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(B){for(var U=n(d);U!==null;){if(U.callback===null)a(d);else if(U.startTime<=B)a(d),U.sortIndex=U.expirationTime,t(c,U);else break;U=n(d)}}function j(B){if(g=!1,b(B),!x)if(n(c)!==null)x=!0,$(C);else{var U=n(d);U!==null&&M(j,U.startTime-B)}}function C(B,U){x=!1,g&&(g=!1,v(N),N=-1),h=!0;var W=m;try{for(b(U),u=n(c);u!==null&&(!(u.expirationTime>U)||B&&!T());){var q=u.callback;if(typeof q=="function"){u.callback=null,m=u.priorityLevel;var R=q(u.expirationTime<=U);U=e.unstable_now(),typeof R=="function"?u.callback=R:u===n(c)&&a(c),b(U)}else a(c);u=n(c)}if(u!==null)var V=!0;else{var G=n(d);G!==null&&M(j,G.startTime-U),V=!1}return V}finally{u=null,m=W,h=!1}}var E=!1,S=null,N=-1,I=5,D=-1;function T(){return!(e.unstable_now()-D<I)}function A(){if(S!==null){var B=e.unstable_now();D=B;var U=!0;try{U=S(!0,B)}finally{U?_():(E=!1,S=null)}}else E=!1}var _;if(typeof y=="function")_=function(){y(A)};else if(typeof MessageChannel<"u"){var k=new MessageChannel,L=k.port2;k.port1.onmessage=A,_=function(){L.postMessage(null)}}else _=function(){p(A,0)};function $(B){S=B,E||(E=!0,_())}function M(B,U){N=p(function(){B(e.unstable_now())},U)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(B){B.callback=null},e.unstable_continueExecution=function(){x||h||(x=!0,$(C))},e.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<B?Math.floor(1e3/B):5},e.unstable_getCurrentPriorityLevel=function(){return m},e.unstable_getFirstCallbackNode=function(){return n(c)},e.unstable_next=function(B){switch(m){case 1:case 2:case 3:var U=3;break;default:U=m}var W=m;m=U;try{return B()}finally{m=W}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(B,U){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var W=m;m=B;try{return U()}finally{m=W}},e.unstable_scheduleCallback=function(B,U,W){var q=e.unstable_now();switch(typeof W=="object"&&W!==null?(W=W.delay,W=typeof W=="number"&&0<W?q+W:q):W=q,B){case 1:var R=-1;break;case 2:R=250;break;case 5:R=1073741823;break;case 4:R=1e4;break;default:R=5e3}return R=W+R,B={id:f++,callback:U,priorityLevel:B,startTime:W,expirationTime:R,sortIndex:-1},W>q?(B.sortIndex=W,t(d,B),n(c)===null&&B===n(d)&&(g?(v(N),N=-1):g=!0,M(j,W-q))):(B.sortIndex=R,t(c,B),x||h||(x=!0,$(C))),B},e.unstable_shouldYield=T,e.unstable_wrapCallback=function(B){var U=m;return function(){var W=m;m=U;try{return B.apply(this,arguments)}finally{m=W}}}})(P6);E6.exports=P6;var pV=E6.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vV=w,Rs=pV;function st(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var T6=new Set,Bp={};function uu(e,t){Wf(e,t),Wf(e+"Capture",t)}function Wf(e,t){for(Bp[e]=t,e=0;e<t.length;e++)T6.add(t[e])}var bl=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),fN=Object.prototype.hasOwnProperty,xV=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,j3={},w3={};function gV(e){return fN.call(w3,e)?!0:fN.call(j3,e)?!1:xV.test(e)?w3[e]=!0:(j3[e]=!0,!1)}function yV(e,t,n,a){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return a?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function bV(e,t,n,a){if(t===null||typeof t>"u"||yV(e,t,n,a))return!0;if(a)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Xa(e,t,n,a,s,i,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=a,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}var ja={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){ja[e]=new Xa(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];ja[t]=new Xa(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){ja[e]=new Xa(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){ja[e]=new Xa(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){ja[e]=new Xa(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){ja[e]=new Xa(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){ja[e]=new Xa(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){ja[e]=new Xa(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){ja[e]=new Xa(e,5,!1,e.toLowerCase(),null,!1,!1)});var RC=/[\-:]([a-z])/g;function FC(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(RC,FC);ja[t]=new Xa(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(RC,FC);ja[t]=new Xa(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(RC,FC);ja[t]=new Xa(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){ja[e]=new Xa(e,1,!1,e.toLowerCase(),null,!1,!1)});ja.xlinkHref=new Xa("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){ja[e]=new Xa(e,1,!1,e.toLowerCase(),null,!0,!0)});function MC(e,t,n,a){var s=ja.hasOwnProperty(t)?ja[t]:null;(s!==null?s.type!==0:a||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(bV(t,n,s,a)&&(n=null),a||s===null?gV(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=n===null?s.type===3?!1:"":n:(t=s.attributeName,a=s.attributeNamespace,n===null?e.removeAttribute(t):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,a?e.setAttributeNS(a,t,n):e.setAttribute(t,n))))}var kl=vV.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,bg=Symbol.for("react.element"),vf=Symbol.for("react.portal"),xf=Symbol.for("react.fragment"),$C=Symbol.for("react.strict_mode"),mN=Symbol.for("react.profiler"),I6=Symbol.for("react.provider"),D6=Symbol.for("react.context"),BC=Symbol.for("react.forward_ref"),hN=Symbol.for("react.suspense"),pN=Symbol.for("react.suspense_list"),zC=Symbol.for("react.memo"),sc=Symbol.for("react.lazy"),k6=Symbol.for("react.offscreen"),N3=Symbol.iterator;function Mh(e){return e===null||typeof e!="object"?null:(e=N3&&e[N3]||e["@@iterator"],typeof e=="function"?e:null)}var hn=Object.assign,vw;function fp(e){if(vw===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);vw=t&&t[1]||""}return`
`+vw+e}var xw=!1;function gw(e,t){if(!e||xw)return"";xw=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(d){var a=d}Reflect.construct(e,[],t)}else{try{t.call()}catch(d){a=d}e.call(t.prototype)}else{try{throw Error()}catch(d){a=d}e()}}catch(d){if(d&&a&&typeof d.stack=="string"){for(var s=d.stack.split(`
`),i=a.stack.split(`
`),o=s.length-1,l=i.length-1;1<=o&&0<=l&&s[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==i[l]){var c=`
`+s[o].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=o&&0<=l);break}}}finally{xw=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?fp(e):""}function jV(e){switch(e.tag){case 5:return fp(e.type);case 16:return fp("Lazy");case 13:return fp("Suspense");case 19:return fp("SuspenseList");case 0:case 2:case 15:return e=gw(e.type,!1),e;case 11:return e=gw(e.type.render,!1),e;case 1:return e=gw(e.type,!0),e;default:return""}}function vN(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case xf:return"Fragment";case vf:return"Portal";case mN:return"Profiler";case $C:return"StrictMode";case hN:return"Suspense";case pN:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case D6:return(e.displayName||"Context")+".Consumer";case I6:return(e._context.displayName||"Context")+".Provider";case BC:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case zC:return t=e.displayName||null,t!==null?t:vN(e.type)||"Memo";case sc:t=e._payload,e=e._init;try{return vN(e(t))}catch{}}return null}function wV(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return vN(t);case 8:return t===$C?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Rc(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function O6(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function NV(e){var t=O6(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),a=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(o){a=""+o,i.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return a},setValue:function(o){a=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function jg(e){e._valueTracker||(e._valueTracker=NV(e))}function _6(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),a="";return e&&(a=O6(e)?e.checked?"true":"false":e.value),e=a,e!==n?(t.setValue(e),!0):!1}function z0(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function xN(e,t){var n=t.checked;return hn({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function S3(e,t){var n=t.defaultValue==null?"":t.defaultValue,a=t.checked!=null?t.checked:t.defaultChecked;n=Rc(t.value!=null?t.value:n),e._wrapperState={initialChecked:a,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function L6(e,t){t=t.checked,t!=null&&MC(e,"checked",t,!1)}function gN(e,t){L6(e,t);var n=Rc(t.value),a=t.type;if(n!=null)a==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(a==="submit"||a==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?yN(e,t.type,n):t.hasOwnProperty("defaultValue")&&yN(e,t.type,Rc(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function C3(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var a=t.type;if(!(a!=="submit"&&a!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function yN(e,t,n){(t!=="number"||z0(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var mp=Array.isArray;function Df(e,t,n,a){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&a&&(e[n].defaultSelected=!0)}else{for(n=""+Rc(n),t=null,s=0;s<e.length;s++){if(e[s].value===n){e[s].selected=!0,a&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function bN(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(st(91));return hn({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function A3(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(st(92));if(mp(n)){if(1<n.length)throw Error(st(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Rc(n)}}function R6(e,t){var n=Rc(t.value),a=Rc(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),a!=null&&(e.defaultValue=""+a)}function E3(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function F6(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function jN(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?F6(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var wg,M6=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,a,s){MSApp.execUnsafeLocalFunction(function(){return e(t,n,a,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(wg=wg||document.createElement("div"),wg.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=wg.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function zp(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var gp={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},SV=["Webkit","ms","Moz","O"];Object.keys(gp).forEach(function(e){SV.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),gp[t]=gp[e]})});function $6(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||gp.hasOwnProperty(e)&&gp[e]?(""+t).trim():t+"px"}function B6(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var a=n.indexOf("--")===0,s=$6(n,t[n],a);n==="float"&&(n="cssFloat"),a?e.setProperty(n,s):e[n]=s}}var CV=hn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function wN(e,t){if(t){if(CV[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(st(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(st(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(st(61))}if(t.style!=null&&typeof t.style!="object")throw Error(st(62))}}function NN(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var SN=null;function UC(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var CN=null,kf=null,Of=null;function P3(e){if(e=tx(e)){if(typeof CN!="function")throw Error(st(280));var t=e.stateNode;t&&(t=zb(t),CN(e.stateNode,e.type,t))}}function z6(e){kf?Of?Of.push(e):Of=[e]:kf=e}function U6(){if(kf){var e=kf,t=Of;if(Of=kf=null,P3(e),t)for(e=0;e<t.length;e++)P3(t[e])}}function V6(e,t){return e(t)}function q6(){}var yw=!1;function W6(e,t,n){if(yw)return e(t,n);yw=!0;try{return V6(e,t,n)}finally{yw=!1,(kf!==null||Of!==null)&&(q6(),U6())}}function Up(e,t){var n=e.stateNode;if(n===null)return null;var a=zb(n);if(a===null)return null;n=a[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(e=e.type,a=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!a;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(st(231,t,typeof n));return n}var AN=!1;if(bl)try{var $h={};Object.defineProperty($h,"passive",{get:function(){AN=!0}}),window.addEventListener("test",$h,$h),window.removeEventListener("test",$h,$h)}catch{AN=!1}function AV(e,t,n,a,s,i,o,l,c){var d=Array.prototype.slice.call(arguments,3);try{t.apply(n,d)}catch(f){this.onError(f)}}var yp=!1,U0=null,V0=!1,EN=null,EV={onError:function(e){yp=!0,U0=e}};function PV(e,t,n,a,s,i,o,l,c){yp=!1,U0=null,AV.apply(EV,arguments)}function TV(e,t,n,a,s,i,o,l,c){if(PV.apply(this,arguments),yp){if(yp){var d=U0;yp=!1,U0=null}else throw Error(st(198));V0||(V0=!0,EN=d)}}function fu(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function H6(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function T3(e){if(fu(e)!==e)throw Error(st(188))}function IV(e){var t=e.alternate;if(!t){if(t=fu(e),t===null)throw Error(st(188));return t!==e?null:e}for(var n=e,a=t;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(a=s.return,a!==null){n=a;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return T3(s),e;if(i===a)return T3(s),t;i=i.sibling}throw Error(st(188))}if(n.return!==a.return)n=s,a=i;else{for(var o=!1,l=s.child;l;){if(l===n){o=!0,n=s,a=i;break}if(l===a){o=!0,a=s,n=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===n){o=!0,n=i,a=s;break}if(l===a){o=!0,a=i,n=s;break}l=l.sibling}if(!o)throw Error(st(189))}}if(n.alternate!==a)throw Error(st(190))}if(n.tag!==3)throw Error(st(188));return n.stateNode.current===n?e:t}function G6(e){return e=IV(e),e!==null?K6(e):null}function K6(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=K6(e);if(t!==null)return t;e=e.sibling}return null}var Y6=Rs.unstable_scheduleCallback,I3=Rs.unstable_cancelCallback,DV=Rs.unstable_shouldYield,kV=Rs.unstable_requestPaint,En=Rs.unstable_now,OV=Rs.unstable_getCurrentPriorityLevel,VC=Rs.unstable_ImmediatePriority,X6=Rs.unstable_UserBlockingPriority,q0=Rs.unstable_NormalPriority,_V=Rs.unstable_LowPriority,Q6=Rs.unstable_IdlePriority,Fb=null,Do=null;function LV(e){if(Do&&typeof Do.onCommitFiberRoot=="function")try{Do.onCommitFiberRoot(Fb,e,void 0,(e.current.flags&128)===128)}catch{}}var Ki=Math.clz32?Math.clz32:MV,RV=Math.log,FV=Math.LN2;function MV(e){return e>>>=0,e===0?32:31-(RV(e)/FV|0)|0}var Ng=64,Sg=4194304;function hp(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function W0(e,t){var n=e.pendingLanes;if(n===0)return 0;var a=0,s=e.suspendedLanes,i=e.pingedLanes,o=n&268435455;if(o!==0){var l=o&~s;l!==0?a=hp(l):(i&=o,i!==0&&(a=hp(i)))}else o=n&~s,o!==0?a=hp(o):i!==0&&(a=hp(i));if(a===0)return 0;if(t!==0&&t!==a&&!(t&s)&&(s=a&-a,i=t&-t,s>=i||s===16&&(i&4194240)!==0))return t;if(a&4&&(a|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=a;0<t;)n=31-Ki(t),s=1<<n,a|=e[n],t&=~s;return a}function $V(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function BV(e,t){for(var n=e.suspendedLanes,a=e.pingedLanes,s=e.expirationTimes,i=e.pendingLanes;0<i;){var o=31-Ki(i),l=1<<o,c=s[o];c===-1?(!(l&n)||l&a)&&(s[o]=$V(l,t)):c<=t&&(e.expiredLanes|=l),i&=~l}}function PN(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function J6(){var e=Ng;return Ng<<=1,!(Ng&4194240)&&(Ng=64),e}function bw(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Zv(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Ki(t),e[t]=n}function zV(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var a=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-Ki(n),i=1<<s;t[s]=0,a[s]=-1,e[s]=-1,n&=~i}}function qC(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var a=31-Ki(n),s=1<<a;s&t|e[a]&t&&(e[a]|=t),n&=~s}}var Ar=0;function Z6(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var eL,WC,tL,rL,nL,TN=!1,Cg=[],bc=null,jc=null,wc=null,Vp=new Map,qp=new Map,lc=[],UV="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function D3(e,t){switch(e){case"focusin":case"focusout":bc=null;break;case"dragenter":case"dragleave":jc=null;break;case"mouseover":case"mouseout":wc=null;break;case"pointerover":case"pointerout":Vp.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":qp.delete(t.pointerId)}}function Bh(e,t,n,a,s,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:a,nativeEvent:i,targetContainers:[s]},t!==null&&(t=tx(t),t!==null&&WC(t)),e):(e.eventSystemFlags|=a,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function VV(e,t,n,a,s){switch(t){case"focusin":return bc=Bh(bc,e,t,n,a,s),!0;case"dragenter":return jc=Bh(jc,e,t,n,a,s),!0;case"mouseover":return wc=Bh(wc,e,t,n,a,s),!0;case"pointerover":var i=s.pointerId;return Vp.set(i,Bh(Vp.get(i)||null,e,t,n,a,s)),!0;case"gotpointercapture":return i=s.pointerId,qp.set(i,Bh(qp.get(i)||null,e,t,n,a,s)),!0}return!1}function aL(e){var t=Ad(e.target);if(t!==null){var n=fu(t);if(n!==null){if(t=n.tag,t===13){if(t=H6(n),t!==null){e.blockedOn=t,nL(e.priority,function(){tL(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function j0(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=IN(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var a=new n.constructor(n.type,n);SN=a,n.target.dispatchEvent(a),SN=null}else return t=tx(n),t!==null&&WC(t),e.blockedOn=n,!1;t.shift()}return!0}function k3(e,t,n){j0(e)&&n.delete(t)}function qV(){TN=!1,bc!==null&&j0(bc)&&(bc=null),jc!==null&&j0(jc)&&(jc=null),wc!==null&&j0(wc)&&(wc=null),Vp.forEach(k3),qp.forEach(k3)}function zh(e,t){e.blockedOn===t&&(e.blockedOn=null,TN||(TN=!0,Rs.unstable_scheduleCallback(Rs.unstable_NormalPriority,qV)))}function Wp(e){function t(s){return zh(s,e)}if(0<Cg.length){zh(Cg[0],e);for(var n=1;n<Cg.length;n++){var a=Cg[n];a.blockedOn===e&&(a.blockedOn=null)}}for(bc!==null&&zh(bc,e),jc!==null&&zh(jc,e),wc!==null&&zh(wc,e),Vp.forEach(t),qp.forEach(t),n=0;n<lc.length;n++)a=lc[n],a.blockedOn===e&&(a.blockedOn=null);for(;0<lc.length&&(n=lc[0],n.blockedOn===null);)aL(n),n.blockedOn===null&&lc.shift()}var _f=kl.ReactCurrentBatchConfig,H0=!0;function WV(e,t,n,a){var s=Ar,i=_f.transition;_f.transition=null;try{Ar=1,HC(e,t,n,a)}finally{Ar=s,_f.transition=i}}function HV(e,t,n,a){var s=Ar,i=_f.transition;_f.transition=null;try{Ar=4,HC(e,t,n,a)}finally{Ar=s,_f.transition=i}}function HC(e,t,n,a){if(H0){var s=IN(e,t,n,a);if(s===null)Iw(e,t,a,G0,n),D3(e,a);else if(VV(s,e,t,n,a))a.stopPropagation();else if(D3(e,a),t&4&&-1<UV.indexOf(e)){for(;s!==null;){var i=tx(s);if(i!==null&&eL(i),i=IN(e,t,n,a),i===null&&Iw(e,t,a,G0,n),i===s)break;s=i}s!==null&&a.stopPropagation()}else Iw(e,t,a,null,n)}}var G0=null;function IN(e,t,n,a){if(G0=null,e=UC(a),e=Ad(e),e!==null)if(t=fu(e),t===null)e=null;else if(n=t.tag,n===13){if(e=H6(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return G0=e,null}function sL(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(OV()){case VC:return 1;case X6:return 4;case q0:case _V:return 16;case Q6:return 536870912;default:return 16}default:return 16}}var mc=null,GC=null,w0=null;function iL(){if(w0)return w0;var e,t=GC,n=t.length,a,s="value"in mc?mc.value:mc.textContent,i=s.length;for(e=0;e<n&&t[e]===s[e];e++);var o=n-e;for(a=1;a<=o&&t[n-a]===s[i-a];a++);return w0=s.slice(e,1<a?1-a:void 0)}function N0(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Ag(){return!0}function O3(){return!1}function $s(e){function t(n,a,s,i,o){this._reactName=n,this._targetInst=s,this.type=a,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(n=e[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Ag:O3,this.isPropagationStopped=O3,this}return hn(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Ag)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Ag)},persist:function(){},isPersistent:Ag}),t}var Om={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},KC=$s(Om),ex=hn({},Om,{view:0,detail:0}),GV=$s(ex),jw,ww,Uh,Mb=hn({},ex,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:YC,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Uh&&(Uh&&e.type==="mousemove"?(jw=e.screenX-Uh.screenX,ww=e.screenY-Uh.screenY):ww=jw=0,Uh=e),jw)},movementY:function(e){return"movementY"in e?e.movementY:ww}}),_3=$s(Mb),KV=hn({},Mb,{dataTransfer:0}),YV=$s(KV),XV=hn({},ex,{relatedTarget:0}),Nw=$s(XV),QV=hn({},Om,{animationName:0,elapsedTime:0,pseudoElement:0}),JV=$s(QV),ZV=hn({},Om,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),eq=$s(ZV),tq=hn({},Om,{data:0}),L3=$s(tq),rq={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},nq={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},aq={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function sq(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=aq[e])?!!t[e]:!1}function YC(){return sq}var iq=hn({},ex,{key:function(e){if(e.key){var t=rq[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=N0(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?nq[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:YC,charCode:function(e){return e.type==="keypress"?N0(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?N0(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),oq=$s(iq),lq=hn({},Mb,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),R3=$s(lq),cq=hn({},ex,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:YC}),dq=$s(cq),uq=hn({},Om,{propertyName:0,elapsedTime:0,pseudoElement:0}),fq=$s(uq),mq=hn({},Mb,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),hq=$s(mq),pq=[9,13,27,32],XC=bl&&"CompositionEvent"in window,bp=null;bl&&"documentMode"in document&&(bp=document.documentMode);var vq=bl&&"TextEvent"in window&&!bp,oL=bl&&(!XC||bp&&8<bp&&11>=bp),F3=String.fromCharCode(32),M3=!1;function lL(e,t){switch(e){case"keyup":return pq.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function cL(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var gf=!1;function xq(e,t){switch(e){case"compositionend":return cL(t);case"keypress":return t.which!==32?null:(M3=!0,F3);case"textInput":return e=t.data,e===F3&&M3?null:e;default:return null}}function gq(e,t){if(gf)return e==="compositionend"||!XC&&lL(e,t)?(e=iL(),w0=GC=mc=null,gf=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return oL&&t.locale!=="ko"?null:t.data;default:return null}}var yq={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function $3(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!yq[e.type]:t==="textarea"}function dL(e,t,n,a){z6(a),t=K0(t,"onChange"),0<t.length&&(n=new KC("onChange","change",null,n,a),e.push({event:n,listeners:t}))}var jp=null,Hp=null;function bq(e){jL(e,0)}function $b(e){var t=jf(e);if(_6(t))return e}function jq(e,t){if(e==="change")return t}var uL=!1;if(bl){var Sw;if(bl){var Cw="oninput"in document;if(!Cw){var B3=document.createElement("div");B3.setAttribute("oninput","return;"),Cw=typeof B3.oninput=="function"}Sw=Cw}else Sw=!1;uL=Sw&&(!document.documentMode||9<document.documentMode)}function z3(){jp&&(jp.detachEvent("onpropertychange",fL),Hp=jp=null)}function fL(e){if(e.propertyName==="value"&&$b(Hp)){var t=[];dL(t,Hp,e,UC(e)),W6(bq,t)}}function wq(e,t,n){e==="focusin"?(z3(),jp=t,Hp=n,jp.attachEvent("onpropertychange",fL)):e==="focusout"&&z3()}function Nq(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return $b(Hp)}function Sq(e,t){if(e==="click")return $b(t)}function Cq(e,t){if(e==="input"||e==="change")return $b(t)}function Aq(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Qi=typeof Object.is=="function"?Object.is:Aq;function Gp(e,t){if(Qi(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),a=Object.keys(t);if(n.length!==a.length)return!1;for(a=0;a<n.length;a++){var s=n[a];if(!fN.call(t,s)||!Qi(e[s],t[s]))return!1}return!0}function U3(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function V3(e,t){var n=U3(e);e=0;for(var a;n;){if(n.nodeType===3){if(a=e+n.textContent.length,e<=t&&a>=t)return{node:n,offset:t-e};e=a}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=U3(n)}}function mL(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?mL(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function hL(){for(var e=window,t=z0();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=z0(e.document)}return t}function QC(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Eq(e){var t=hL(),n=e.focusedElem,a=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&mL(n.ownerDocument.documentElement,n)){if(a!==null&&QC(n)){if(t=a.start,e=a.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=n.textContent.length,i=Math.min(a.start,s);a=a.end===void 0?i:Math.min(a.end,s),!e.extend&&i>a&&(s=a,a=i,i=s),s=V3(n,i);var o=V3(n,a);s&&o&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),i>a?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Pq=bl&&"documentMode"in document&&11>=document.documentMode,yf=null,DN=null,wp=null,kN=!1;function q3(e,t,n){var a=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;kN||yf==null||yf!==z0(a)||(a=yf,"selectionStart"in a&&QC(a)?a={start:a.selectionStart,end:a.selectionEnd}:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection(),a={anchorNode:a.anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset}),wp&&Gp(wp,a)||(wp=a,a=K0(DN,"onSelect"),0<a.length&&(t=new KC("onSelect","select",null,t,n),e.push({event:t,listeners:a}),t.target=yf)))}function Eg(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var bf={animationend:Eg("Animation","AnimationEnd"),animationiteration:Eg("Animation","AnimationIteration"),animationstart:Eg("Animation","AnimationStart"),transitionend:Eg("Transition","TransitionEnd")},Aw={},pL={};bl&&(pL=document.createElement("div").style,"AnimationEvent"in window||(delete bf.animationend.animation,delete bf.animationiteration.animation,delete bf.animationstart.animation),"TransitionEvent"in window||delete bf.transitionend.transition);function Bb(e){if(Aw[e])return Aw[e];if(!bf[e])return e;var t=bf[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in pL)return Aw[e]=t[n];return e}var vL=Bb("animationend"),xL=Bb("animationiteration"),gL=Bb("animationstart"),yL=Bb("transitionend"),bL=new Map,W3="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Hc(e,t){bL.set(e,t),uu(t,[e])}for(var Ew=0;Ew<W3.length;Ew++){var Pw=W3[Ew],Tq=Pw.toLowerCase(),Iq=Pw[0].toUpperCase()+Pw.slice(1);Hc(Tq,"on"+Iq)}Hc(vL,"onAnimationEnd");Hc(xL,"onAnimationIteration");Hc(gL,"onAnimationStart");Hc("dblclick","onDoubleClick");Hc("focusin","onFocus");Hc("focusout","onBlur");Hc(yL,"onTransitionEnd");Wf("onMouseEnter",["mouseout","mouseover"]);Wf("onMouseLeave",["mouseout","mouseover"]);Wf("onPointerEnter",["pointerout","pointerover"]);Wf("onPointerLeave",["pointerout","pointerover"]);uu("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));uu("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));uu("onBeforeInput",["compositionend","keypress","textInput","paste"]);uu("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));uu("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));uu("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var pp="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Dq=new Set("cancel close invalid load scroll toggle".split(" ").concat(pp));function H3(e,t,n){var a=e.type||"unknown-event";e.currentTarget=n,TV(a,t,void 0,e),e.currentTarget=null}function jL(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var a=e[n],s=a.event;a=a.listeners;e:{var i=void 0;if(t)for(var o=a.length-1;0<=o;o--){var l=a[o],c=l.instance,d=l.currentTarget;if(l=l.listener,c!==i&&s.isPropagationStopped())break e;H3(s,l,d),i=c}else for(o=0;o<a.length;o++){if(l=a[o],c=l.instance,d=l.currentTarget,l=l.listener,c!==i&&s.isPropagationStopped())break e;H3(s,l,d),i=c}}}if(V0)throw e=EN,V0=!1,EN=null,e}function Kr(e,t){var n=t[FN];n===void 0&&(n=t[FN]=new Set);var a=e+"__bubble";n.has(a)||(wL(t,e,2,!1),n.add(a))}function Tw(e,t,n){var a=0;t&&(a|=4),wL(n,e,a,t)}var Pg="_reactListening"+Math.random().toString(36).slice(2);function Kp(e){if(!e[Pg]){e[Pg]=!0,T6.forEach(function(n){n!=="selectionchange"&&(Dq.has(n)||Tw(n,!1,e),Tw(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Pg]||(t[Pg]=!0,Tw("selectionchange",!1,t))}}function wL(e,t,n,a){switch(sL(t)){case 1:var s=WV;break;case 4:s=HV;break;default:s=HC}n=s.bind(null,t,n,e),s=void 0,!AN||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),a?s!==void 0?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):s!==void 0?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function Iw(e,t,n,a,s){var i=a;if(!(t&1)&&!(t&2)&&a!==null)e:for(;;){if(a===null)return;var o=a.tag;if(o===3||o===4){var l=a.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=a.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;l!==null;){if(o=Ad(l),o===null)return;if(c=o.tag,c===5||c===6){a=i=o;continue e}l=l.parentNode}}a=a.return}W6(function(){var d=i,f=UC(n),u=[];e:{var m=bL.get(e);if(m!==void 0){var h=KC,x=e;switch(e){case"keypress":if(N0(n)===0)break e;case"keydown":case"keyup":h=oq;break;case"focusin":x="focus",h=Nw;break;case"focusout":x="blur",h=Nw;break;case"beforeblur":case"afterblur":h=Nw;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=_3;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=YV;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=dq;break;case vL:case xL:case gL:h=JV;break;case yL:h=fq;break;case"scroll":h=GV;break;case"wheel":h=hq;break;case"copy":case"cut":case"paste":h=eq;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=R3}var g=(t&4)!==0,p=!g&&e==="scroll",v=g?m!==null?m+"Capture":null:m;g=[];for(var y=d,b;y!==null;){b=y;var j=b.stateNode;if(b.tag===5&&j!==null&&(b=j,v!==null&&(j=Up(y,v),j!=null&&g.push(Yp(y,j,b)))),p)break;y=y.return}0<g.length&&(m=new h(m,x,null,n,f),u.push({event:m,listeners:g}))}}if(!(t&7)){e:{if(m=e==="mouseover"||e==="pointerover",h=e==="mouseout"||e==="pointerout",m&&n!==SN&&(x=n.relatedTarget||n.fromElement)&&(Ad(x)||x[jl]))break e;if((h||m)&&(m=f.window===f?f:(m=f.ownerDocument)?m.defaultView||m.parentWindow:window,h?(x=n.relatedTarget||n.toElement,h=d,x=x?Ad(x):null,x!==null&&(p=fu(x),x!==p||x.tag!==5&&x.tag!==6)&&(x=null)):(h=null,x=d),h!==x)){if(g=_3,j="onMouseLeave",v="onMouseEnter",y="mouse",(e==="pointerout"||e==="pointerover")&&(g=R3,j="onPointerLeave",v="onPointerEnter",y="pointer"),p=h==null?m:jf(h),b=x==null?m:jf(x),m=new g(j,y+"leave",h,n,f),m.target=p,m.relatedTarget=b,j=null,Ad(f)===d&&(g=new g(v,y+"enter",x,n,f),g.target=b,g.relatedTarget=p,j=g),p=j,h&&x)t:{for(g=h,v=x,y=0,b=g;b;b=rf(b))y++;for(b=0,j=v;j;j=rf(j))b++;for(;0<y-b;)g=rf(g),y--;for(;0<b-y;)v=rf(v),b--;for(;y--;){if(g===v||v!==null&&g===v.alternate)break t;g=rf(g),v=rf(v)}g=null}else g=null;h!==null&&G3(u,m,h,g,!1),x!==null&&p!==null&&G3(u,p,x,g,!0)}}e:{if(m=d?jf(d):window,h=m.nodeName&&m.nodeName.toLowerCase(),h==="select"||h==="input"&&m.type==="file")var C=jq;else if($3(m))if(uL)C=Cq;else{C=Nq;var E=wq}else(h=m.nodeName)&&h.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(C=Sq);if(C&&(C=C(e,d))){dL(u,C,n,f);break e}E&&E(e,m,d),e==="focusout"&&(E=m._wrapperState)&&E.controlled&&m.type==="number"&&yN(m,"number",m.value)}switch(E=d?jf(d):window,e){case"focusin":($3(E)||E.contentEditable==="true")&&(yf=E,DN=d,wp=null);break;case"focusout":wp=DN=yf=null;break;case"mousedown":kN=!0;break;case"contextmenu":case"mouseup":case"dragend":kN=!1,q3(u,n,f);break;case"selectionchange":if(Pq)break;case"keydown":case"keyup":q3(u,n,f)}var S;if(XC)e:{switch(e){case"compositionstart":var N="onCompositionStart";break e;case"compositionend":N="onCompositionEnd";break e;case"compositionupdate":N="onCompositionUpdate";break e}N=void 0}else gf?lL(e,n)&&(N="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(N="onCompositionStart");N&&(oL&&n.locale!=="ko"&&(gf||N!=="onCompositionStart"?N==="onCompositionEnd"&&gf&&(S=iL()):(mc=f,GC="value"in mc?mc.value:mc.textContent,gf=!0)),E=K0(d,N),0<E.length&&(N=new L3(N,e,null,n,f),u.push({event:N,listeners:E}),S?N.data=S:(S=cL(n),S!==null&&(N.data=S)))),(S=vq?xq(e,n):gq(e,n))&&(d=K0(d,"onBeforeInput"),0<d.length&&(f=new L3("onBeforeInput","beforeinput",null,n,f),u.push({event:f,listeners:d}),f.data=S))}jL(u,t)})}function Yp(e,t,n){return{instance:e,listener:t,currentTarget:n}}function K0(e,t){for(var n=t+"Capture",a=[];e!==null;){var s=e,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Up(e,n),i!=null&&a.unshift(Yp(e,i,s)),i=Up(e,t),i!=null&&a.push(Yp(e,i,s))),e=e.return}return a}function rf(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function G3(e,t,n,a,s){for(var i=t._reactName,o=[];n!==null&&n!==a;){var l=n,c=l.alternate,d=l.stateNode;if(c!==null&&c===a)break;l.tag===5&&d!==null&&(l=d,s?(c=Up(n,i),c!=null&&o.unshift(Yp(n,c,l))):s||(c=Up(n,i),c!=null&&o.push(Yp(n,c,l)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var kq=/\r\n?/g,Oq=/\u0000|\uFFFD/g;function K3(e){return(typeof e=="string"?e:""+e).replace(kq,`
`).replace(Oq,"")}function Tg(e,t,n){if(t=K3(t),K3(e)!==t&&n)throw Error(st(425))}function Y0(){}var ON=null,_N=null;function LN(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var RN=typeof setTimeout=="function"?setTimeout:void 0,_q=typeof clearTimeout=="function"?clearTimeout:void 0,Y3=typeof Promise=="function"?Promise:void 0,Lq=typeof queueMicrotask=="function"?queueMicrotask:typeof Y3<"u"?function(e){return Y3.resolve(null).then(e).catch(Rq)}:RN;function Rq(e){setTimeout(function(){throw e})}function Dw(e,t){var n=t,a=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(a===0){e.removeChild(s),Wp(t);return}a--}else n!=="$"&&n!=="$?"&&n!=="$!"||a++;n=s}while(n);Wp(t)}function Nc(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function X3(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var _m=Math.random().toString(36).slice(2),So="__reactFiber$"+_m,Xp="__reactProps$"+_m,jl="__reactContainer$"+_m,FN="__reactEvents$"+_m,Fq="__reactListeners$"+_m,Mq="__reactHandles$"+_m;function Ad(e){var t=e[So];if(t)return t;for(var n=e.parentNode;n;){if(t=n[jl]||n[So]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=X3(e);e!==null;){if(n=e[So])return n;e=X3(e)}return t}e=n,n=e.parentNode}return null}function tx(e){return e=e[So]||e[jl],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function jf(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(st(33))}function zb(e){return e[Xp]||null}var MN=[],wf=-1;function Gc(e){return{current:e}}function Zr(e){0>wf||(e.current=MN[wf],MN[wf]=null,wf--)}function Hr(e,t){wf++,MN[wf]=e.current,e.current=t}var Fc={},Fa=Gc(Fc),cs=Gc(!1),Jd=Fc;function Hf(e,t){var n=e.type.contextTypes;if(!n)return Fc;var a=e.stateNode;if(a&&a.__reactInternalMemoizedUnmaskedChildContext===t)return a.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=t[i];return a&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function ds(e){return e=e.childContextTypes,e!=null}function X0(){Zr(cs),Zr(Fa)}function Q3(e,t,n){if(Fa.current!==Fc)throw Error(st(168));Hr(Fa,t),Hr(cs,n)}function NL(e,t,n){var a=e.stateNode;if(t=t.childContextTypes,typeof a.getChildContext!="function")return n;a=a.getChildContext();for(var s in a)if(!(s in t))throw Error(st(108,wV(e)||"Unknown",s));return hn({},n,a)}function Q0(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Fc,Jd=Fa.current,Hr(Fa,e),Hr(cs,cs.current),!0}function J3(e,t,n){var a=e.stateNode;if(!a)throw Error(st(169));n?(e=NL(e,t,Jd),a.__reactInternalMemoizedMergedChildContext=e,Zr(cs),Zr(Fa),Hr(Fa,e)):Zr(cs),Hr(cs,n)}var ll=null,Ub=!1,kw=!1;function SL(e){ll===null?ll=[e]:ll.push(e)}function $q(e){Ub=!0,SL(e)}function Kc(){if(!kw&&ll!==null){kw=!0;var e=0,t=Ar;try{var n=ll;for(Ar=1;e<n.length;e++){var a=n[e];do a=a(!0);while(a!==null)}ll=null,Ub=!1}catch(s){throw ll!==null&&(ll=ll.slice(e+1)),Y6(VC,Kc),s}finally{Ar=t,kw=!1}}return null}var Nf=[],Sf=0,J0=null,Z0=0,ri=[],ni=0,Zd=null,cl=1,dl="";function xd(e,t){Nf[Sf++]=Z0,Nf[Sf++]=J0,J0=e,Z0=t}function CL(e,t,n){ri[ni++]=cl,ri[ni++]=dl,ri[ni++]=Zd,Zd=e;var a=cl;e=dl;var s=32-Ki(a)-1;a&=~(1<<s),n+=1;var i=32-Ki(t)+s;if(30<i){var o=s-s%5;i=(a&(1<<o)-1).toString(32),a>>=o,s-=o,cl=1<<32-Ki(t)+s|n<<s|a,dl=i+e}else cl=1<<i|n<<s|a,dl=e}function JC(e){e.return!==null&&(xd(e,1),CL(e,1,0))}function ZC(e){for(;e===J0;)J0=Nf[--Sf],Nf[Sf]=null,Z0=Nf[--Sf],Nf[Sf]=null;for(;e===Zd;)Zd=ri[--ni],ri[ni]=null,dl=ri[--ni],ri[ni]=null,cl=ri[--ni],ri[ni]=null}var ks=null,Ps=null,tn=!1,Ui=null;function AL(e,t){var n=ii(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Z3(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,ks=e,Ps=Nc(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,ks=e,Ps=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Zd!==null?{id:cl,overflow:dl}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=ii(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,ks=e,Ps=null,!0):!1;default:return!1}}function $N(e){return(e.mode&1)!==0&&(e.flags&128)===0}function BN(e){if(tn){var t=Ps;if(t){var n=t;if(!Z3(e,t)){if($N(e))throw Error(st(418));t=Nc(n.nextSibling);var a=ks;t&&Z3(e,t)?AL(a,n):(e.flags=e.flags&-4097|2,tn=!1,ks=e)}}else{if($N(e))throw Error(st(418));e.flags=e.flags&-4097|2,tn=!1,ks=e}}}function eP(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;ks=e}function Ig(e){if(e!==ks)return!1;if(!tn)return eP(e),tn=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!LN(e.type,e.memoizedProps)),t&&(t=Ps)){if($N(e))throw EL(),Error(st(418));for(;t;)AL(e,t),t=Nc(t.nextSibling)}if(eP(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(st(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Ps=Nc(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Ps=null}}else Ps=ks?Nc(e.stateNode.nextSibling):null;return!0}function EL(){for(var e=Ps;e;)e=Nc(e.nextSibling)}function Gf(){Ps=ks=null,tn=!1}function eA(e){Ui===null?Ui=[e]:Ui.push(e)}var Bq=kl.ReactCurrentBatchConfig;function Vh(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(st(309));var a=n.stateNode}if(!a)throw Error(st(147,e));var s=a,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(o){var l=s.refs;o===null?delete l[i]:l[i]=o},t._stringRef=i,t)}if(typeof e!="string")throw Error(st(284));if(!n._owner)throw Error(st(290,e))}return e}function Dg(e,t){throw e=Object.prototype.toString.call(t),Error(st(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function tP(e){var t=e._init;return t(e._payload)}function PL(e){function t(v,y){if(e){var b=v.deletions;b===null?(v.deletions=[y],v.flags|=16):b.push(y)}}function n(v,y){if(!e)return null;for(;y!==null;)t(v,y),y=y.sibling;return null}function a(v,y){for(v=new Map;y!==null;)y.key!==null?v.set(y.key,y):v.set(y.index,y),y=y.sibling;return v}function s(v,y){return v=Ec(v,y),v.index=0,v.sibling=null,v}function i(v,y,b){return v.index=b,e?(b=v.alternate,b!==null?(b=b.index,b<y?(v.flags|=2,y):b):(v.flags|=2,y)):(v.flags|=1048576,y)}function o(v){return e&&v.alternate===null&&(v.flags|=2),v}function l(v,y,b,j){return y===null||y.tag!==6?(y=$w(b,v.mode,j),y.return=v,y):(y=s(y,b),y.return=v,y)}function c(v,y,b,j){var C=b.type;return C===xf?f(v,y,b.props.children,j,b.key):y!==null&&(y.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===sc&&tP(C)===y.type)?(j=s(y,b.props),j.ref=Vh(v,y,b),j.return=v,j):(j=I0(b.type,b.key,b.props,null,v.mode,j),j.ref=Vh(v,y,b),j.return=v,j)}function d(v,y,b,j){return y===null||y.tag!==4||y.stateNode.containerInfo!==b.containerInfo||y.stateNode.implementation!==b.implementation?(y=Bw(b,v.mode,j),y.return=v,y):(y=s(y,b.children||[]),y.return=v,y)}function f(v,y,b,j,C){return y===null||y.tag!==7?(y=Ud(b,v.mode,j,C),y.return=v,y):(y=s(y,b),y.return=v,y)}function u(v,y,b){if(typeof y=="string"&&y!==""||typeof y=="number")return y=$w(""+y,v.mode,b),y.return=v,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case bg:return b=I0(y.type,y.key,y.props,null,v.mode,b),b.ref=Vh(v,null,y),b.return=v,b;case vf:return y=Bw(y,v.mode,b),y.return=v,y;case sc:var j=y._init;return u(v,j(y._payload),b)}if(mp(y)||Mh(y))return y=Ud(y,v.mode,b,null),y.return=v,y;Dg(v,y)}return null}function m(v,y,b,j){var C=y!==null?y.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return C!==null?null:l(v,y,""+b,j);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case bg:return b.key===C?c(v,y,b,j):null;case vf:return b.key===C?d(v,y,b,j):null;case sc:return C=b._init,m(v,y,C(b._payload),j)}if(mp(b)||Mh(b))return C!==null?null:f(v,y,b,j,null);Dg(v,b)}return null}function h(v,y,b,j,C){if(typeof j=="string"&&j!==""||typeof j=="number")return v=v.get(b)||null,l(y,v,""+j,C);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case bg:return v=v.get(j.key===null?b:j.key)||null,c(y,v,j,C);case vf:return v=v.get(j.key===null?b:j.key)||null,d(y,v,j,C);case sc:var E=j._init;return h(v,y,b,E(j._payload),C)}if(mp(j)||Mh(j))return v=v.get(b)||null,f(y,v,j,C,null);Dg(y,j)}return null}function x(v,y,b,j){for(var C=null,E=null,S=y,N=y=0,I=null;S!==null&&N<b.length;N++){S.index>N?(I=S,S=null):I=S.sibling;var D=m(v,S,b[N],j);if(D===null){S===null&&(S=I);break}e&&S&&D.alternate===null&&t(v,S),y=i(D,y,N),E===null?C=D:E.sibling=D,E=D,S=I}if(N===b.length)return n(v,S),tn&&xd(v,N),C;if(S===null){for(;N<b.length;N++)S=u(v,b[N],j),S!==null&&(y=i(S,y,N),E===null?C=S:E.sibling=S,E=S);return tn&&xd(v,N),C}for(S=a(v,S);N<b.length;N++)I=h(S,v,N,b[N],j),I!==null&&(e&&I.alternate!==null&&S.delete(I.key===null?N:I.key),y=i(I,y,N),E===null?C=I:E.sibling=I,E=I);return e&&S.forEach(function(T){return t(v,T)}),tn&&xd(v,N),C}function g(v,y,b,j){var C=Mh(b);if(typeof C!="function")throw Error(st(150));if(b=C.call(b),b==null)throw Error(st(151));for(var E=C=null,S=y,N=y=0,I=null,D=b.next();S!==null&&!D.done;N++,D=b.next()){S.index>N?(I=S,S=null):I=S.sibling;var T=m(v,S,D.value,j);if(T===null){S===null&&(S=I);break}e&&S&&T.alternate===null&&t(v,S),y=i(T,y,N),E===null?C=T:E.sibling=T,E=T,S=I}if(D.done)return n(v,S),tn&&xd(v,N),C;if(S===null){for(;!D.done;N++,D=b.next())D=u(v,D.value,j),D!==null&&(y=i(D,y,N),E===null?C=D:E.sibling=D,E=D);return tn&&xd(v,N),C}for(S=a(v,S);!D.done;N++,D=b.next())D=h(S,v,N,D.value,j),D!==null&&(e&&D.alternate!==null&&S.delete(D.key===null?N:D.key),y=i(D,y,N),E===null?C=D:E.sibling=D,E=D);return e&&S.forEach(function(A){return t(v,A)}),tn&&xd(v,N),C}function p(v,y,b,j){if(typeof b=="object"&&b!==null&&b.type===xf&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case bg:e:{for(var C=b.key,E=y;E!==null;){if(E.key===C){if(C=b.type,C===xf){if(E.tag===7){n(v,E.sibling),y=s(E,b.props.children),y.return=v,v=y;break e}}else if(E.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===sc&&tP(C)===E.type){n(v,E.sibling),y=s(E,b.props),y.ref=Vh(v,E,b),y.return=v,v=y;break e}n(v,E);break}else t(v,E);E=E.sibling}b.type===xf?(y=Ud(b.props.children,v.mode,j,b.key),y.return=v,v=y):(j=I0(b.type,b.key,b.props,null,v.mode,j),j.ref=Vh(v,y,b),j.return=v,v=j)}return o(v);case vf:e:{for(E=b.key;y!==null;){if(y.key===E)if(y.tag===4&&y.stateNode.containerInfo===b.containerInfo&&y.stateNode.implementation===b.implementation){n(v,y.sibling),y=s(y,b.children||[]),y.return=v,v=y;break e}else{n(v,y);break}else t(v,y);y=y.sibling}y=Bw(b,v.mode,j),y.return=v,v=y}return o(v);case sc:return E=b._init,p(v,y,E(b._payload),j)}if(mp(b))return x(v,y,b,j);if(Mh(b))return g(v,y,b,j);Dg(v,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,y!==null&&y.tag===6?(n(v,y.sibling),y=s(y,b),y.return=v,v=y):(n(v,y),y=$w(b,v.mode,j),y.return=v,v=y),o(v)):n(v,y)}return p}var Kf=PL(!0),TL=PL(!1),ey=Gc(null),ty=null,Cf=null,tA=null;function rA(){tA=Cf=ty=null}function nA(e){var t=ey.current;Zr(ey),e._currentValue=t}function zN(e,t,n){for(;e!==null;){var a=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,a!==null&&(a.childLanes|=t)):a!==null&&(a.childLanes&t)!==t&&(a.childLanes|=t),e===n)break;e=e.return}}function Lf(e,t){ty=e,tA=Cf=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(os=!0),e.firstContext=null)}function mi(e){var t=e._currentValue;if(tA!==e)if(e={context:e,memoizedValue:t,next:null},Cf===null){if(ty===null)throw Error(st(308));Cf=e,ty.dependencies={lanes:0,firstContext:e}}else Cf=Cf.next=e;return t}var Ed=null;function aA(e){Ed===null?Ed=[e]:Ed.push(e)}function IL(e,t,n,a){var s=t.interleaved;return s===null?(n.next=n,aA(t)):(n.next=s.next,s.next=n),t.interleaved=n,wl(e,a)}function wl(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var ic=!1;function sA(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function DL(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function hl(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Sc(e,t,n){var a=e.updateQueue;if(a===null)return null;if(a=a.shared,pr&2){var s=a.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),a.pending=t,wl(e,n)}return s=a.interleaved,s===null?(t.next=t,aA(a)):(t.next=s.next,s.next=t),a.interleaved=t,wl(e,n)}function S0(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var a=t.lanes;a&=e.pendingLanes,n|=a,t.lanes=n,qC(e,n)}}function rP(e,t){var n=e.updateQueue,a=e.alternate;if(a!==null&&(a=a.updateQueue,n===a)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=t:i=i.next=t}else s=i=t;n={baseState:a.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:a.shared,effects:a.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function ry(e,t,n,a){var s=e.updateQueue;ic=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,d=c.next;c.next=null,o===null?i=d:o.next=d,o=c;var f=e.alternate;f!==null&&(f=f.updateQueue,l=f.lastBaseUpdate,l!==o&&(l===null?f.firstBaseUpdate=d:l.next=d,f.lastBaseUpdate=c))}if(i!==null){var u=s.baseState;o=0,f=d=c=null,l=i;do{var m=l.lane,h=l.eventTime;if((a&m)===m){f!==null&&(f=f.next={eventTime:h,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var x=e,g=l;switch(m=t,h=n,g.tag){case 1:if(x=g.payload,typeof x=="function"){u=x.call(h,u,m);break e}u=x;break e;case 3:x.flags=x.flags&-65537|128;case 0:if(x=g.payload,m=typeof x=="function"?x.call(h,u,m):x,m==null)break e;u=hn({},u,m);break e;case 2:ic=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,m=s.effects,m===null?s.effects=[l]:m.push(l))}else h={eventTime:h,lane:m,tag:l.tag,payload:l.payload,callback:l.callback,next:null},f===null?(d=f=h,c=u):f=f.next=h,o|=m;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;m=l,l=m.next,m.next=null,s.lastBaseUpdate=m,s.shared.pending=null}}while(1);if(f===null&&(c=u),s.baseState=c,s.firstBaseUpdate=d,s.lastBaseUpdate=f,t=s.shared.interleaved,t!==null){s=t;do o|=s.lane,s=s.next;while(s!==t)}else i===null&&(s.shared.lanes=0);tu|=o,e.lanes=o,e.memoizedState=u}}function nP(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var a=e[t],s=a.callback;if(s!==null){if(a.callback=null,a=n,typeof s!="function")throw Error(st(191,s));s.call(a)}}}var rx={},ko=Gc(rx),Qp=Gc(rx),Jp=Gc(rx);function Pd(e){if(e===rx)throw Error(st(174));return e}function iA(e,t){switch(Hr(Jp,t),Hr(Qp,e),Hr(ko,rx),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:jN(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=jN(t,e)}Zr(ko),Hr(ko,t)}function Yf(){Zr(ko),Zr(Qp),Zr(Jp)}function kL(e){Pd(Jp.current);var t=Pd(ko.current),n=jN(t,e.type);t!==n&&(Hr(Qp,e),Hr(ko,n))}function oA(e){Qp.current===e&&(Zr(ko),Zr(Qp))}var dn=Gc(0);function ny(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Ow=[];function lA(){for(var e=0;e<Ow.length;e++)Ow[e]._workInProgressVersionPrimary=null;Ow.length=0}var C0=kl.ReactCurrentDispatcher,_w=kl.ReactCurrentBatchConfig,eu=0,mn=null,Gn=null,aa=null,ay=!1,Np=!1,Zp=0,zq=0;function Ca(){throw Error(st(321))}function cA(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Qi(e[n],t[n]))return!1;return!0}function dA(e,t,n,a,s,i){if(eu=i,mn=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,C0.current=e===null||e.memoizedState===null?Wq:Hq,e=n(a,s),Np){i=0;do{if(Np=!1,Zp=0,25<=i)throw Error(st(301));i+=1,aa=Gn=null,t.updateQueue=null,C0.current=Gq,e=n(a,s)}while(Np)}if(C0.current=sy,t=Gn!==null&&Gn.next!==null,eu=0,aa=Gn=mn=null,ay=!1,t)throw Error(st(300));return e}function uA(){var e=Zp!==0;return Zp=0,e}function bo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return aa===null?mn.memoizedState=aa=e:aa=aa.next=e,aa}function hi(){if(Gn===null){var e=mn.alternate;e=e!==null?e.memoizedState:null}else e=Gn.next;var t=aa===null?mn.memoizedState:aa.next;if(t!==null)aa=t,Gn=e;else{if(e===null)throw Error(st(310));Gn=e,e={memoizedState:Gn.memoizedState,baseState:Gn.baseState,baseQueue:Gn.baseQueue,queue:Gn.queue,next:null},aa===null?mn.memoizedState=aa=e:aa=aa.next=e}return aa}function ev(e,t){return typeof t=="function"?t(e):t}function Lw(e){var t=hi(),n=t.queue;if(n===null)throw Error(st(311));n.lastRenderedReducer=e;var a=Gn,s=a.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}a.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,a=a.baseState;var l=o=null,c=null,d=i;do{var f=d.lane;if((eu&f)===f)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),a=d.hasEagerState?d.eagerState:e(a,d.action);else{var u={lane:f,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(l=c=u,o=a):c=c.next=u,mn.lanes|=f,tu|=f}d=d.next}while(d!==null&&d!==i);c===null?o=a:c.next=l,Qi(a,t.memoizedState)||(os=!0),t.memoizedState=a,t.baseState=o,t.baseQueue=c,n.lastRenderedState=a}if(e=n.interleaved,e!==null){s=e;do i=s.lane,mn.lanes|=i,tu|=i,s=s.next;while(s!==e)}else s===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Rw(e){var t=hi(),n=t.queue;if(n===null)throw Error(st(311));n.lastRenderedReducer=e;var a=n.dispatch,s=n.pending,i=t.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=e(i,o.action),o=o.next;while(o!==s);Qi(i,t.memoizedState)||(os=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),n.lastRenderedState=i}return[i,a]}function OL(){}function _L(e,t){var n=mn,a=hi(),s=t(),i=!Qi(a.memoizedState,s);if(i&&(a.memoizedState=s,os=!0),a=a.queue,fA(FL.bind(null,n,a,e),[e]),a.getSnapshot!==t||i||aa!==null&&aa.memoizedState.tag&1){if(n.flags|=2048,tv(9,RL.bind(null,n,a,s,t),void 0,null),sa===null)throw Error(st(349));eu&30||LL(n,t,s)}return s}function LL(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=mn.updateQueue,t===null?(t={lastEffect:null,stores:null},mn.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function RL(e,t,n,a){t.value=n,t.getSnapshot=a,ML(t)&&$L(e)}function FL(e,t,n){return n(function(){ML(t)&&$L(e)})}function ML(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Qi(e,n)}catch{return!0}}function $L(e){var t=wl(e,1);t!==null&&Yi(t,e,1,-1)}function aP(e){var t=bo();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ev,lastRenderedState:e},t.queue=e,e=e.dispatch=qq.bind(null,mn,e),[t.memoizedState,e]}function tv(e,t,n,a){return e={tag:e,create:t,destroy:n,deps:a,next:null},t=mn.updateQueue,t===null?(t={lastEffect:null,stores:null},mn.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(a=n.next,n.next=e,e.next=a,t.lastEffect=e)),e}function BL(){return hi().memoizedState}function A0(e,t,n,a){var s=bo();mn.flags|=e,s.memoizedState=tv(1|t,n,void 0,a===void 0?null:a)}function Vb(e,t,n,a){var s=hi();a=a===void 0?null:a;var i=void 0;if(Gn!==null){var o=Gn.memoizedState;if(i=o.destroy,a!==null&&cA(a,o.deps)){s.memoizedState=tv(t,n,i,a);return}}mn.flags|=e,s.memoizedState=tv(1|t,n,i,a)}function sP(e,t){return A0(8390656,8,e,t)}function fA(e,t){return Vb(2048,8,e,t)}function zL(e,t){return Vb(4,2,e,t)}function UL(e,t){return Vb(4,4,e,t)}function VL(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function qL(e,t,n){return n=n!=null?n.concat([e]):null,Vb(4,4,VL.bind(null,t,e),n)}function mA(){}function WL(e,t){var n=hi();t=t===void 0?null:t;var a=n.memoizedState;return a!==null&&t!==null&&cA(t,a[1])?a[0]:(n.memoizedState=[e,t],e)}function HL(e,t){var n=hi();t=t===void 0?null:t;var a=n.memoizedState;return a!==null&&t!==null&&cA(t,a[1])?a[0]:(e=e(),n.memoizedState=[e,t],e)}function GL(e,t,n){return eu&21?(Qi(n,t)||(n=J6(),mn.lanes|=n,tu|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,os=!0),e.memoizedState=n)}function Uq(e,t){var n=Ar;Ar=n!==0&&4>n?n:4,e(!0);var a=_w.transition;_w.transition={};try{e(!1),t()}finally{Ar=n,_w.transition=a}}function KL(){return hi().memoizedState}function Vq(e,t,n){var a=Ac(e);if(n={lane:a,action:n,hasEagerState:!1,eagerState:null,next:null},YL(e))XL(t,n);else if(n=IL(e,t,n,a),n!==null){var s=Ha();Yi(n,e,a,s),QL(n,t,a)}}function qq(e,t,n){var a=Ac(e),s={lane:a,action:n,hasEagerState:!1,eagerState:null,next:null};if(YL(e))XL(t,s);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var o=t.lastRenderedState,l=i(o,n);if(s.hasEagerState=!0,s.eagerState=l,Qi(l,o)){var c=t.interleaved;c===null?(s.next=s,aA(t)):(s.next=c.next,c.next=s),t.interleaved=s;return}}catch{}finally{}n=IL(e,t,s,a),n!==null&&(s=Ha(),Yi(n,e,a,s),QL(n,t,a))}}function YL(e){var t=e.alternate;return e===mn||t!==null&&t===mn}function XL(e,t){Np=ay=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function QL(e,t,n){if(n&4194240){var a=t.lanes;a&=e.pendingLanes,n|=a,t.lanes=n,qC(e,n)}}var sy={readContext:mi,useCallback:Ca,useContext:Ca,useEffect:Ca,useImperativeHandle:Ca,useInsertionEffect:Ca,useLayoutEffect:Ca,useMemo:Ca,useReducer:Ca,useRef:Ca,useState:Ca,useDebugValue:Ca,useDeferredValue:Ca,useTransition:Ca,useMutableSource:Ca,useSyncExternalStore:Ca,useId:Ca,unstable_isNewReconciler:!1},Wq={readContext:mi,useCallback:function(e,t){return bo().memoizedState=[e,t===void 0?null:t],e},useContext:mi,useEffect:sP,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,A0(4194308,4,VL.bind(null,t,e),n)},useLayoutEffect:function(e,t){return A0(4194308,4,e,t)},useInsertionEffect:function(e,t){return A0(4,2,e,t)},useMemo:function(e,t){var n=bo();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var a=bo();return t=n!==void 0?n(t):t,a.memoizedState=a.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},a.queue=e,e=e.dispatch=Vq.bind(null,mn,e),[a.memoizedState,e]},useRef:function(e){var t=bo();return e={current:e},t.memoizedState=e},useState:aP,useDebugValue:mA,useDeferredValue:function(e){return bo().memoizedState=e},useTransition:function(){var e=aP(!1),t=e[0];return e=Uq.bind(null,e[1]),bo().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var a=mn,s=bo();if(tn){if(n===void 0)throw Error(st(407));n=n()}else{if(n=t(),sa===null)throw Error(st(349));eu&30||LL(a,t,n)}s.memoizedState=n;var i={value:n,getSnapshot:t};return s.queue=i,sP(FL.bind(null,a,i,e),[e]),a.flags|=2048,tv(9,RL.bind(null,a,i,n,t),void 0,null),n},useId:function(){var e=bo(),t=sa.identifierPrefix;if(tn){var n=dl,a=cl;n=(a&~(1<<32-Ki(a)-1)).toString(32)+n,t=":"+t+"R"+n,n=Zp++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=zq++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Hq={readContext:mi,useCallback:WL,useContext:mi,useEffect:fA,useImperativeHandle:qL,useInsertionEffect:zL,useLayoutEffect:UL,useMemo:HL,useReducer:Lw,useRef:BL,useState:function(){return Lw(ev)},useDebugValue:mA,useDeferredValue:function(e){var t=hi();return GL(t,Gn.memoizedState,e)},useTransition:function(){var e=Lw(ev)[0],t=hi().memoizedState;return[e,t]},useMutableSource:OL,useSyncExternalStore:_L,useId:KL,unstable_isNewReconciler:!1},Gq={readContext:mi,useCallback:WL,useContext:mi,useEffect:fA,useImperativeHandle:qL,useInsertionEffect:zL,useLayoutEffect:UL,useMemo:HL,useReducer:Rw,useRef:BL,useState:function(){return Rw(ev)},useDebugValue:mA,useDeferredValue:function(e){var t=hi();return Gn===null?t.memoizedState=e:GL(t,Gn.memoizedState,e)},useTransition:function(){var e=Rw(ev)[0],t=hi().memoizedState;return[e,t]},useMutableSource:OL,useSyncExternalStore:_L,useId:KL,unstable_isNewReconciler:!1};function Ri(e,t){if(e&&e.defaultProps){t=hn({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function UN(e,t,n,a){t=e.memoizedState,n=n(a,t),n=n==null?t:hn({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var qb={isMounted:function(e){return(e=e._reactInternals)?fu(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var a=Ha(),s=Ac(e),i=hl(a,s);i.payload=t,n!=null&&(i.callback=n),t=Sc(e,i,s),t!==null&&(Yi(t,e,s,a),S0(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var a=Ha(),s=Ac(e),i=hl(a,s);i.tag=1,i.payload=t,n!=null&&(i.callback=n),t=Sc(e,i,s),t!==null&&(Yi(t,e,s,a),S0(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Ha(),a=Ac(e),s=hl(n,a);s.tag=2,t!=null&&(s.callback=t),t=Sc(e,s,a),t!==null&&(Yi(t,e,a,n),S0(t,e,a))}};function iP(e,t,n,a,s,i,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(a,i,o):t.prototype&&t.prototype.isPureReactComponent?!Gp(n,a)||!Gp(s,i):!0}function JL(e,t,n){var a=!1,s=Fc,i=t.contextType;return typeof i=="object"&&i!==null?i=mi(i):(s=ds(t)?Jd:Fa.current,a=t.contextTypes,i=(a=a!=null)?Hf(e,s):Fc),t=new t(n,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=qb,e.stateNode=t,t._reactInternals=e,a&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=i),t}function oP(e,t,n,a){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,a),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,a),t.state!==e&&qb.enqueueReplaceState(t,t.state,null)}function VN(e,t,n,a){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs={},sA(e);var i=t.contextType;typeof i=="object"&&i!==null?s.context=mi(i):(i=ds(t)?Jd:Fa.current,s.context=Hf(e,i)),s.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(UN(e,t,i,n),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&qb.enqueueReplaceState(s,s.state,null),ry(e,n,s,a),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function Xf(e,t){try{var n="",a=t;do n+=jV(a),a=a.return;while(a);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:s,digest:null}}function Fw(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function qN(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var Kq=typeof WeakMap=="function"?WeakMap:Map;function ZL(e,t,n){n=hl(-1,n),n.tag=3,n.payload={element:null};var a=t.value;return n.callback=function(){oy||(oy=!0,e5=a),qN(e,t)},n}function eR(e,t,n){n=hl(-1,n),n.tag=3;var a=e.type.getDerivedStateFromError;if(typeof a=="function"){var s=t.value;n.payload=function(){return a(s)},n.callback=function(){qN(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){qN(e,t),typeof a!="function"&&(Cc===null?Cc=new Set([this]):Cc.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),n}function lP(e,t,n){var a=e.pingCache;if(a===null){a=e.pingCache=new Kq;var s=new Set;a.set(t,s)}else s=a.get(t),s===void 0&&(s=new Set,a.set(t,s));s.has(n)||(s.add(n),e=lW.bind(null,e,t,n),t.then(e,e))}function cP(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function dP(e,t,n,a,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=hl(-1,1),t.tag=2,Sc(n,t,1))),n.lanes|=1),e)}var Yq=kl.ReactCurrentOwner,os=!1;function Ua(e,t,n,a){t.child=e===null?TL(t,null,n,a):Kf(t,e.child,n,a)}function uP(e,t,n,a,s){n=n.render;var i=t.ref;return Lf(t,s),a=dA(e,t,n,a,i,s),n=uA(),e!==null&&!os?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Nl(e,t,s)):(tn&&n&&JC(t),t.flags|=1,Ua(e,t,a,s),t.child)}function fP(e,t,n,a,s){if(e===null){var i=n.type;return typeof i=="function"&&!jA(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=i,tR(e,t,i,a,s)):(e=I0(n.type,null,a,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:Gp,n(o,a)&&e.ref===t.ref)return Nl(e,t,s)}return t.flags|=1,e=Ec(i,a),e.ref=t.ref,e.return=t,t.child=e}function tR(e,t,n,a,s){if(e!==null){var i=e.memoizedProps;if(Gp(i,a)&&e.ref===t.ref)if(os=!1,t.pendingProps=a=i,(e.lanes&s)!==0)e.flags&131072&&(os=!0);else return t.lanes=e.lanes,Nl(e,t,s)}return WN(e,t,n,a,s)}function rR(e,t,n){var a=t.pendingProps,s=a.children,i=e!==null?e.memoizedState:null;if(a.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Hr(Ef,Ns),Ns|=n;else{if(!(n&1073741824))return e=i!==null?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Hr(Ef,Ns),Ns|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},a=i!==null?i.baseLanes:n,Hr(Ef,Ns),Ns|=a}else i!==null?(a=i.baseLanes|n,t.memoizedState=null):a=n,Hr(Ef,Ns),Ns|=a;return Ua(e,t,s,n),t.child}function nR(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function WN(e,t,n,a,s){var i=ds(n)?Jd:Fa.current;return i=Hf(t,i),Lf(t,s),n=dA(e,t,n,a,i,s),a=uA(),e!==null&&!os?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Nl(e,t,s)):(tn&&a&&JC(t),t.flags|=1,Ua(e,t,n,s),t.child)}function mP(e,t,n,a,s){if(ds(n)){var i=!0;Q0(t)}else i=!1;if(Lf(t,s),t.stateNode===null)E0(e,t),JL(t,n,a),VN(t,n,a,s),a=!0;else if(e===null){var o=t.stateNode,l=t.memoizedProps;o.props=l;var c=o.context,d=n.contextType;typeof d=="object"&&d!==null?d=mi(d):(d=ds(n)?Jd:Fa.current,d=Hf(t,d));var f=n.getDerivedStateFromProps,u=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function";u||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==a||c!==d)&&oP(t,o,a,d),ic=!1;var m=t.memoizedState;o.state=m,ry(t,a,o,s),c=t.memoizedState,l!==a||m!==c||cs.current||ic?(typeof f=="function"&&(UN(t,n,f,a),c=t.memoizedState),(l=ic||iP(t,n,l,a,m,c,d))?(u||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=a,t.memoizedState=c),o.props=a,o.state=c,o.context=d,a=l):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),a=!1)}else{o=t.stateNode,DL(e,t),l=t.memoizedProps,d=t.type===t.elementType?l:Ri(t.type,l),o.props=d,u=t.pendingProps,m=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=mi(c):(c=ds(n)?Jd:Fa.current,c=Hf(t,c));var h=n.getDerivedStateFromProps;(f=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==u||m!==c)&&oP(t,o,a,c),ic=!1,m=t.memoizedState,o.state=m,ry(t,a,o,s);var x=t.memoizedState;l!==u||m!==x||cs.current||ic?(typeof h=="function"&&(UN(t,n,h,a),x=t.memoizedState),(d=ic||iP(t,n,d,a,m,x,c)||!1)?(f||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(a,x,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(a,x,c)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),t.memoizedProps=a,t.memoizedState=x),o.props=a,o.state=x,o.context=c,a=d):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),a=!1)}return HN(e,t,n,a,i,s)}function HN(e,t,n,a,s,i){nR(e,t);var o=(t.flags&128)!==0;if(!a&&!o)return s&&J3(t,n,!1),Nl(e,t,i);a=t.stateNode,Yq.current=t;var l=o&&typeof n.getDerivedStateFromError!="function"?null:a.render();return t.flags|=1,e!==null&&o?(t.child=Kf(t,e.child,null,i),t.child=Kf(t,null,l,i)):Ua(e,t,l,i),t.memoizedState=a.state,s&&J3(t,n,!0),t.child}function aR(e){var t=e.stateNode;t.pendingContext?Q3(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Q3(e,t.context,!1),iA(e,t.containerInfo)}function hP(e,t,n,a,s){return Gf(),eA(s),t.flags|=256,Ua(e,t,n,a),t.child}var GN={dehydrated:null,treeContext:null,retryLane:0};function KN(e){return{baseLanes:e,cachePool:null,transitions:null}}function sR(e,t,n){var a=t.pendingProps,s=dn.current,i=!1,o=(t.flags&128)!==0,l;if((l=o)||(l=e!==null&&e.memoizedState===null?!1:(s&2)!==0),l?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),Hr(dn,s&1),e===null)return BN(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=a.children,e=a.fallback,i?(a=t.mode,i=t.child,o={mode:"hidden",children:o},!(a&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Gb(o,a,0,null),e=Ud(e,a,n,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=KN(n),t.memoizedState=GN,e):hA(t,o));if(s=e.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return Xq(e,t,o,a,l,s,n);if(i){i=a.fallback,o=t.mode,s=e.child,l=s.sibling;var c={mode:"hidden",children:a.children};return!(o&1)&&t.child!==s?(a=t.child,a.childLanes=0,a.pendingProps=c,t.deletions=null):(a=Ec(s,c),a.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=Ec(l,i):(i=Ud(i,o,n,null),i.flags|=2),i.return=t,a.return=t,a.sibling=i,t.child=a,a=i,i=t.child,o=e.child.memoizedState,o=o===null?KN(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=e.childLanes&~n,t.memoizedState=GN,a}return i=e.child,e=i.sibling,a=Ec(i,{mode:"visible",children:a.children}),!(t.mode&1)&&(a.lanes=n),a.return=t,a.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=a,t.memoizedState=null,a}function hA(e,t){return t=Gb({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function kg(e,t,n,a){return a!==null&&eA(a),Kf(t,e.child,null,n),e=hA(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Xq(e,t,n,a,s,i,o){if(n)return t.flags&256?(t.flags&=-257,a=Fw(Error(st(422))),kg(e,t,o,a)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=a.fallback,s=t.mode,a=Gb({mode:"visible",children:a.children},s,0,null),i=Ud(i,s,o,null),i.flags|=2,a.return=t,i.return=t,a.sibling=i,t.child=a,t.mode&1&&Kf(t,e.child,null,o),t.child.memoizedState=KN(o),t.memoizedState=GN,i);if(!(t.mode&1))return kg(e,t,o,null);if(s.data==="$!"){if(a=s.nextSibling&&s.nextSibling.dataset,a)var l=a.dgst;return a=l,i=Error(st(419)),a=Fw(i,a,void 0),kg(e,t,o,a)}if(l=(o&e.childLanes)!==0,os||l){if(a=sa,a!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(a.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,wl(e,s),Yi(a,e,s,-1))}return bA(),a=Fw(Error(st(421))),kg(e,t,o,a)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=cW.bind(null,e),s._reactRetry=t,null):(e=i.treeContext,Ps=Nc(s.nextSibling),ks=t,tn=!0,Ui=null,e!==null&&(ri[ni++]=cl,ri[ni++]=dl,ri[ni++]=Zd,cl=e.id,dl=e.overflow,Zd=t),t=hA(t,a.children),t.flags|=4096,t)}function pP(e,t,n){e.lanes|=t;var a=e.alternate;a!==null&&(a.lanes|=t),zN(e.return,t,n)}function Mw(e,t,n,a,s){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:a,tail:n,tailMode:s}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=a,i.tail=n,i.tailMode=s)}function iR(e,t,n){var a=t.pendingProps,s=a.revealOrder,i=a.tail;if(Ua(e,t,a.children,n),a=dn.current,a&2)a=a&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&pP(e,n,t);else if(e.tag===19)pP(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}a&=1}if(Hr(dn,a),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(n=t.child,s=null;n!==null;)e=n.alternate,e!==null&&ny(e)===null&&(s=n),n=n.sibling;n=s,n===null?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),Mw(t,!1,s,n,i);break;case"backwards":for(n=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&ny(e)===null){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}Mw(t,!0,n,null,i);break;case"together":Mw(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function E0(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Nl(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),tu|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(st(153));if(t.child!==null){for(e=t.child,n=Ec(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Ec(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function Qq(e,t,n){switch(t.tag){case 3:aR(t),Gf();break;case 5:kL(t);break;case 1:ds(t.type)&&Q0(t);break;case 4:iA(t,t.stateNode.containerInfo);break;case 10:var a=t.type._context,s=t.memoizedProps.value;Hr(ey,a._currentValue),a._currentValue=s;break;case 13:if(a=t.memoizedState,a!==null)return a.dehydrated!==null?(Hr(dn,dn.current&1),t.flags|=128,null):n&t.child.childLanes?sR(e,t,n):(Hr(dn,dn.current&1),e=Nl(e,t,n),e!==null?e.sibling:null);Hr(dn,dn.current&1);break;case 19:if(a=(n&t.childLanes)!==0,e.flags&128){if(a)return iR(e,t,n);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Hr(dn,dn.current),a)break;return null;case 22:case 23:return t.lanes=0,rR(e,t,n)}return Nl(e,t,n)}var oR,YN,lR,cR;oR=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};YN=function(){};lR=function(e,t,n,a){var s=e.memoizedProps;if(s!==a){e=t.stateNode,Pd(ko.current);var i=null;switch(n){case"input":s=xN(e,s),a=xN(e,a),i=[];break;case"select":s=hn({},s,{value:void 0}),a=hn({},a,{value:void 0}),i=[];break;case"textarea":s=bN(e,s),a=bN(e,a),i=[];break;default:typeof s.onClick!="function"&&typeof a.onClick=="function"&&(e.onclick=Y0)}wN(n,a);var o;n=null;for(d in s)if(!a.hasOwnProperty(d)&&s.hasOwnProperty(d)&&s[d]!=null)if(d==="style"){var l=s[d];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Bp.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in a){var c=a[d];if(l=s!=null?s[d]:void 0,a.hasOwnProperty(d)&&c!==l&&(c!=null||l!=null))if(d==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(i||(i=[]),i.push(d,n)),n=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(Bp.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&Kr("scroll",e),i||l===c||(i=[])):(i=i||[]).push(d,c))}n&&(i=i||[]).push("style",n);var d=i;(t.updateQueue=d)&&(t.flags|=4)}};cR=function(e,t,n,a){n!==a&&(t.flags|=4)};function qh(e,t){if(!tn)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var a=null;n!==null;)n.alternate!==null&&(a=n),n=n.sibling;a===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:a.sibling=null}}function Aa(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,a=0;if(t)for(var s=e.child;s!==null;)n|=s.lanes|s.childLanes,a|=s.subtreeFlags&14680064,a|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)n|=s.lanes|s.childLanes,a|=s.subtreeFlags,a|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=a,e.childLanes=n,t}function Jq(e,t,n){var a=t.pendingProps;switch(ZC(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Aa(t),null;case 1:return ds(t.type)&&X0(),Aa(t),null;case 3:return a=t.stateNode,Yf(),Zr(cs),Zr(Fa),lA(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(Ig(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Ui!==null&&(n5(Ui),Ui=null))),YN(e,t),Aa(t),null;case 5:oA(t);var s=Pd(Jp.current);if(n=t.type,e!==null&&t.stateNode!=null)lR(e,t,n,a,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!a){if(t.stateNode===null)throw Error(st(166));return Aa(t),null}if(e=Pd(ko.current),Ig(t)){a=t.stateNode,n=t.type;var i=t.memoizedProps;switch(a[So]=t,a[Xp]=i,e=(t.mode&1)!==0,n){case"dialog":Kr("cancel",a),Kr("close",a);break;case"iframe":case"object":case"embed":Kr("load",a);break;case"video":case"audio":for(s=0;s<pp.length;s++)Kr(pp[s],a);break;case"source":Kr("error",a);break;case"img":case"image":case"link":Kr("error",a),Kr("load",a);break;case"details":Kr("toggle",a);break;case"input":S3(a,i),Kr("invalid",a);break;case"select":a._wrapperState={wasMultiple:!!i.multiple},Kr("invalid",a);break;case"textarea":A3(a,i),Kr("invalid",a)}wN(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?a.textContent!==l&&(i.suppressHydrationWarning!==!0&&Tg(a.textContent,l,e),s=["children",l]):typeof l=="number"&&a.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&Tg(a.textContent,l,e),s=["children",""+l]):Bp.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&Kr("scroll",a)}switch(n){case"input":jg(a),C3(a,i,!0);break;case"textarea":jg(a),E3(a);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(a.onclick=Y0)}a=s,t.updateQueue=a,a!==null&&(t.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=F6(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof a.is=="string"?e=o.createElement(n,{is:a.is}):(e=o.createElement(n),n==="select"&&(o=e,a.multiple?o.multiple=!0:a.size&&(o.size=a.size))):e=o.createElementNS(e,n),e[So]=t,e[Xp]=a,oR(e,t,!1,!1),t.stateNode=e;e:{switch(o=NN(n,a),n){case"dialog":Kr("cancel",e),Kr("close",e),s=a;break;case"iframe":case"object":case"embed":Kr("load",e),s=a;break;case"video":case"audio":for(s=0;s<pp.length;s++)Kr(pp[s],e);s=a;break;case"source":Kr("error",e),s=a;break;case"img":case"image":case"link":Kr("error",e),Kr("load",e),s=a;break;case"details":Kr("toggle",e),s=a;break;case"input":S3(e,a),s=xN(e,a),Kr("invalid",e);break;case"option":s=a;break;case"select":e._wrapperState={wasMultiple:!!a.multiple},s=hn({},a,{value:void 0}),Kr("invalid",e);break;case"textarea":A3(e,a),s=bN(e,a),Kr("invalid",e);break;default:s=a}wN(n,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?B6(e,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&M6(e,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&zp(e,c):typeof c=="number"&&zp(e,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Bp.hasOwnProperty(i)?c!=null&&i==="onScroll"&&Kr("scroll",e):c!=null&&MC(e,i,c,o))}switch(n){case"input":jg(e),C3(e,a,!1);break;case"textarea":jg(e),E3(e);break;case"option":a.value!=null&&e.setAttribute("value",""+Rc(a.value));break;case"select":e.multiple=!!a.multiple,i=a.value,i!=null?Df(e,!!a.multiple,i,!1):a.defaultValue!=null&&Df(e,!!a.multiple,a.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=Y0)}switch(n){case"button":case"input":case"select":case"textarea":a=!!a.autoFocus;break e;case"img":a=!0;break e;default:a=!1}}a&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Aa(t),null;case 6:if(e&&t.stateNode!=null)cR(e,t,e.memoizedProps,a);else{if(typeof a!="string"&&t.stateNode===null)throw Error(st(166));if(n=Pd(Jp.current),Pd(ko.current),Ig(t)){if(a=t.stateNode,n=t.memoizedProps,a[So]=t,(i=a.nodeValue!==n)&&(e=ks,e!==null))switch(e.tag){case 3:Tg(a.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Tg(a.nodeValue,n,(e.mode&1)!==0)}i&&(t.flags|=4)}else a=(n.nodeType===9?n:n.ownerDocument).createTextNode(a),a[So]=t,t.stateNode=a}return Aa(t),null;case 13:if(Zr(dn),a=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(tn&&Ps!==null&&t.mode&1&&!(t.flags&128))EL(),Gf(),t.flags|=98560,i=!1;else if(i=Ig(t),a!==null&&a.dehydrated!==null){if(e===null){if(!i)throw Error(st(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(st(317));i[So]=t}else Gf(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Aa(t),i=!1}else Ui!==null&&(n5(Ui),Ui=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(a=a!==null,a!==(e!==null&&e.memoizedState!==null)&&a&&(t.child.flags|=8192,t.mode&1&&(e===null||dn.current&1?Xn===0&&(Xn=3):bA())),t.updateQueue!==null&&(t.flags|=4),Aa(t),null);case 4:return Yf(),YN(e,t),e===null&&Kp(t.stateNode.containerInfo),Aa(t),null;case 10:return nA(t.type._context),Aa(t),null;case 17:return ds(t.type)&&X0(),Aa(t),null;case 19:if(Zr(dn),i=t.memoizedState,i===null)return Aa(t),null;if(a=(t.flags&128)!==0,o=i.rendering,o===null)if(a)qh(i,!1);else{if(Xn!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=ny(e),o!==null){for(t.flags|=128,qh(i,!1),a=o.updateQueue,a!==null&&(t.updateQueue=a,t.flags|=4),t.subtreeFlags=0,a=n,n=t.child;n!==null;)i=n,e=a,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,e=o.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Hr(dn,dn.current&1|2),t.child}e=e.sibling}i.tail!==null&&En()>Qf&&(t.flags|=128,a=!0,qh(i,!1),t.lanes=4194304)}else{if(!a)if(e=ny(o),e!==null){if(t.flags|=128,a=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),qh(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!tn)return Aa(t),null}else 2*En()-i.renderingStartTime>Qf&&n!==1073741824&&(t.flags|=128,a=!0,qh(i,!1),t.lanes=4194304);i.isBackwards?(o.sibling=t.child,t.child=o):(n=i.last,n!==null?n.sibling=o:t.child=o,i.last=o)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=En(),t.sibling=null,n=dn.current,Hr(dn,a?n&1|2:n&1),t):(Aa(t),null);case 22:case 23:return yA(),a=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==a&&(t.flags|=8192),a&&t.mode&1?Ns&1073741824&&(Aa(t),t.subtreeFlags&6&&(t.flags|=8192)):Aa(t),null;case 24:return null;case 25:return null}throw Error(st(156,t.tag))}function Zq(e,t){switch(ZC(t),t.tag){case 1:return ds(t.type)&&X0(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Yf(),Zr(cs),Zr(Fa),lA(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return oA(t),null;case 13:if(Zr(dn),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(st(340));Gf()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Zr(dn),null;case 4:return Yf(),null;case 10:return nA(t.type._context),null;case 22:case 23:return yA(),null;case 24:return null;default:return null}}var Og=!1,ka=!1,eW=typeof WeakSet=="function"?WeakSet:Set,bt=null;function Af(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(a){bn(e,t,a)}else n.current=null}function XN(e,t,n){try{n()}catch(a){bn(e,t,a)}}var vP=!1;function tW(e,t){if(ON=H0,e=hL(),QC(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var a=n.getSelection&&n.getSelection();if(a&&a.rangeCount!==0){n=a.anchorNode;var s=a.anchorOffset,i=a.focusNode;a=a.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,l=-1,c=-1,d=0,f=0,u=e,m=null;t:for(;;){for(var h;u!==n||s!==0&&u.nodeType!==3||(l=o+s),u!==i||a!==0&&u.nodeType!==3||(c=o+a),u.nodeType===3&&(o+=u.nodeValue.length),(h=u.firstChild)!==null;)m=u,u=h;for(;;){if(u===e)break t;if(m===n&&++d===s&&(l=o),m===i&&++f===a&&(c=o),(h=u.nextSibling)!==null)break;u=m,m=u.parentNode}u=h}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(_N={focusedElem:e,selectionRange:n},H0=!1,bt=t;bt!==null;)if(t=bt,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,bt=e;else for(;bt!==null;){t=bt;try{var x=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(x!==null){var g=x.memoizedProps,p=x.memoizedState,v=t.stateNode,y=v.getSnapshotBeforeUpdate(t.elementType===t.type?g:Ri(t.type,g),p);v.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var b=t.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(st(163))}}catch(j){bn(t,t.return,j)}if(e=t.sibling,e!==null){e.return=t.return,bt=e;break}bt=t.return}return x=vP,vP=!1,x}function Sp(e,t,n){var a=t.updateQueue;if(a=a!==null?a.lastEffect:null,a!==null){var s=a=a.next;do{if((s.tag&e)===e){var i=s.destroy;s.destroy=void 0,i!==void 0&&XN(t,n,i)}s=s.next}while(s!==a)}}function Wb(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var a=n.create;n.destroy=a()}n=n.next}while(n!==t)}}function QN(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function dR(e){var t=e.alternate;t!==null&&(e.alternate=null,dR(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[So],delete t[Xp],delete t[FN],delete t[Fq],delete t[Mq])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function uR(e){return e.tag===5||e.tag===3||e.tag===4}function xP(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||uR(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function JN(e,t,n){var a=e.tag;if(a===5||a===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Y0));else if(a!==4&&(e=e.child,e!==null))for(JN(e,t,n),e=e.sibling;e!==null;)JN(e,t,n),e=e.sibling}function ZN(e,t,n){var a=e.tag;if(a===5||a===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(a!==4&&(e=e.child,e!==null))for(ZN(e,t,n),e=e.sibling;e!==null;)ZN(e,t,n),e=e.sibling}var va=null,$i=!1;function Ql(e,t,n){for(n=n.child;n!==null;)fR(e,t,n),n=n.sibling}function fR(e,t,n){if(Do&&typeof Do.onCommitFiberUnmount=="function")try{Do.onCommitFiberUnmount(Fb,n)}catch{}switch(n.tag){case 5:ka||Af(n,t);case 6:var a=va,s=$i;va=null,Ql(e,t,n),va=a,$i=s,va!==null&&($i?(e=va,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):va.removeChild(n.stateNode));break;case 18:va!==null&&($i?(e=va,n=n.stateNode,e.nodeType===8?Dw(e.parentNode,n):e.nodeType===1&&Dw(e,n),Wp(e)):Dw(va,n.stateNode));break;case 4:a=va,s=$i,va=n.stateNode.containerInfo,$i=!0,Ql(e,t,n),va=a,$i=s;break;case 0:case 11:case 14:case 15:if(!ka&&(a=n.updateQueue,a!==null&&(a=a.lastEffect,a!==null))){s=a=a.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&XN(n,t,o),s=s.next}while(s!==a)}Ql(e,t,n);break;case 1:if(!ka&&(Af(n,t),a=n.stateNode,typeof a.componentWillUnmount=="function"))try{a.props=n.memoizedProps,a.state=n.memoizedState,a.componentWillUnmount()}catch(l){bn(n,t,l)}Ql(e,t,n);break;case 21:Ql(e,t,n);break;case 22:n.mode&1?(ka=(a=ka)||n.memoizedState!==null,Ql(e,t,n),ka=a):Ql(e,t,n);break;default:Ql(e,t,n)}}function gP(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new eW),t.forEach(function(a){var s=dW.bind(null,e,a);n.has(a)||(n.add(a),a.then(s,s))})}}function Di(e,t){var n=t.deletions;if(n!==null)for(var a=0;a<n.length;a++){var s=n[a];try{var i=e,o=t,l=o;e:for(;l!==null;){switch(l.tag){case 5:va=l.stateNode,$i=!1;break e;case 3:va=l.stateNode.containerInfo,$i=!0;break e;case 4:va=l.stateNode.containerInfo,$i=!0;break e}l=l.return}if(va===null)throw Error(st(160));fR(i,o,s),va=null,$i=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(d){bn(s,t,d)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)mR(t,e),t=t.sibling}function mR(e,t){var n=e.alternate,a=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Di(t,e),xo(e),a&4){try{Sp(3,e,e.return),Wb(3,e)}catch(g){bn(e,e.return,g)}try{Sp(5,e,e.return)}catch(g){bn(e,e.return,g)}}break;case 1:Di(t,e),xo(e),a&512&&n!==null&&Af(n,n.return);break;case 5:if(Di(t,e),xo(e),a&512&&n!==null&&Af(n,n.return),e.flags&32){var s=e.stateNode;try{zp(s,"")}catch(g){bn(e,e.return,g)}}if(a&4&&(s=e.stateNode,s!=null)){var i=e.memoizedProps,o=n!==null?n.memoizedProps:i,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&L6(s,i),NN(l,o);var d=NN(l,i);for(o=0;o<c.length;o+=2){var f=c[o],u=c[o+1];f==="style"?B6(s,u):f==="dangerouslySetInnerHTML"?M6(s,u):f==="children"?zp(s,u):MC(s,f,u,d)}switch(l){case"input":gN(s,i);break;case"textarea":R6(s,i);break;case"select":var m=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var h=i.value;h!=null?Df(s,!!i.multiple,h,!1):m!==!!i.multiple&&(i.defaultValue!=null?Df(s,!!i.multiple,i.defaultValue,!0):Df(s,!!i.multiple,i.multiple?[]:"",!1))}s[Xp]=i}catch(g){bn(e,e.return,g)}}break;case 6:if(Di(t,e),xo(e),a&4){if(e.stateNode===null)throw Error(st(162));s=e.stateNode,i=e.memoizedProps;try{s.nodeValue=i}catch(g){bn(e,e.return,g)}}break;case 3:if(Di(t,e),xo(e),a&4&&n!==null&&n.memoizedState.isDehydrated)try{Wp(t.containerInfo)}catch(g){bn(e,e.return,g)}break;case 4:Di(t,e),xo(e);break;case 13:Di(t,e),xo(e),s=e.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(xA=En())),a&4&&gP(e);break;case 22:if(f=n!==null&&n.memoizedState!==null,e.mode&1?(ka=(d=ka)||f,Di(t,e),ka=d):Di(t,e),xo(e),a&8192){if(d=e.memoizedState!==null,(e.stateNode.isHidden=d)&&!f&&e.mode&1)for(bt=e,f=e.child;f!==null;){for(u=bt=f;bt!==null;){switch(m=bt,h=m.child,m.tag){case 0:case 11:case 14:case 15:Sp(4,m,m.return);break;case 1:Af(m,m.return);var x=m.stateNode;if(typeof x.componentWillUnmount=="function"){a=m,n=m.return;try{t=a,x.props=t.memoizedProps,x.state=t.memoizedState,x.componentWillUnmount()}catch(g){bn(a,n,g)}}break;case 5:Af(m,m.return);break;case 22:if(m.memoizedState!==null){bP(u);continue}}h!==null?(h.return=m,bt=h):bP(u)}f=f.sibling}e:for(f=null,u=e;;){if(u.tag===5){if(f===null){f=u;try{s=u.stateNode,d?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=u.stateNode,c=u.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=$6("display",o))}catch(g){bn(e,e.return,g)}}}else if(u.tag===6){if(f===null)try{u.stateNode.nodeValue=d?"":u.memoizedProps}catch(g){bn(e,e.return,g)}}else if((u.tag!==22&&u.tag!==23||u.memoizedState===null||u===e)&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===e)break e;for(;u.sibling===null;){if(u.return===null||u.return===e)break e;f===u&&(f=null),u=u.return}f===u&&(f=null),u.sibling.return=u.return,u=u.sibling}}break;case 19:Di(t,e),xo(e),a&4&&gP(e);break;case 21:break;default:Di(t,e),xo(e)}}function xo(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(uR(n)){var a=n;break e}n=n.return}throw Error(st(160))}switch(a.tag){case 5:var s=a.stateNode;a.flags&32&&(zp(s,""),a.flags&=-33);var i=xP(e);ZN(e,i,s);break;case 3:case 4:var o=a.stateNode.containerInfo,l=xP(e);JN(e,l,o);break;default:throw Error(st(161))}}catch(c){bn(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function rW(e,t,n){bt=e,hR(e)}function hR(e,t,n){for(var a=(e.mode&1)!==0;bt!==null;){var s=bt,i=s.child;if(s.tag===22&&a){var o=s.memoizedState!==null||Og;if(!o){var l=s.alternate,c=l!==null&&l.memoizedState!==null||ka;l=Og;var d=ka;if(Og=o,(ka=c)&&!d)for(bt=s;bt!==null;)o=bt,c=o.child,o.tag===22&&o.memoizedState!==null?jP(s):c!==null?(c.return=o,bt=c):jP(s);for(;i!==null;)bt=i,hR(i),i=i.sibling;bt=s,Og=l,ka=d}yP(e)}else s.subtreeFlags&8772&&i!==null?(i.return=s,bt=i):yP(e)}}function yP(e){for(;bt!==null;){var t=bt;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:ka||Wb(5,t);break;case 1:var a=t.stateNode;if(t.flags&4&&!ka)if(n===null)a.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:Ri(t.type,n.memoizedProps);a.componentDidUpdate(s,n.memoizedState,a.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&nP(t,i,a);break;case 3:var o=t.updateQueue;if(o!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}nP(t,o,n)}break;case 5:var l=t.stateNode;if(n===null&&t.flags&4){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var d=t.alternate;if(d!==null){var f=d.memoizedState;if(f!==null){var u=f.dehydrated;u!==null&&Wp(u)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(st(163))}ka||t.flags&512&&QN(t)}catch(m){bn(t,t.return,m)}}if(t===e){bt=null;break}if(n=t.sibling,n!==null){n.return=t.return,bt=n;break}bt=t.return}}function bP(e){for(;bt!==null;){var t=bt;if(t===e){bt=null;break}var n=t.sibling;if(n!==null){n.return=t.return,bt=n;break}bt=t.return}}function jP(e){for(;bt!==null;){var t=bt;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Wb(4,t)}catch(c){bn(t,n,c)}break;case 1:var a=t.stateNode;if(typeof a.componentDidMount=="function"){var s=t.return;try{a.componentDidMount()}catch(c){bn(t,s,c)}}var i=t.return;try{QN(t)}catch(c){bn(t,i,c)}break;case 5:var o=t.return;try{QN(t)}catch(c){bn(t,o,c)}}}catch(c){bn(t,t.return,c)}if(t===e){bt=null;break}var l=t.sibling;if(l!==null){l.return=t.return,bt=l;break}bt=t.return}}var nW=Math.ceil,iy=kl.ReactCurrentDispatcher,pA=kl.ReactCurrentOwner,ci=kl.ReactCurrentBatchConfig,pr=0,sa=null,Mn=null,ba=0,Ns=0,Ef=Gc(0),Xn=0,rv=null,tu=0,Hb=0,vA=0,Cp=null,ss=null,xA=0,Qf=1/0,il=null,oy=!1,e5=null,Cc=null,_g=!1,hc=null,ly=0,Ap=0,t5=null,P0=-1,T0=0;function Ha(){return pr&6?En():P0!==-1?P0:P0=En()}function Ac(e){return e.mode&1?pr&2&&ba!==0?ba&-ba:Bq.transition!==null?(T0===0&&(T0=J6()),T0):(e=Ar,e!==0||(e=window.event,e=e===void 0?16:sL(e.type)),e):1}function Yi(e,t,n,a){if(50<Ap)throw Ap=0,t5=null,Error(st(185));Zv(e,n,a),(!(pr&2)||e!==sa)&&(e===sa&&(!(pr&2)&&(Hb|=n),Xn===4&&cc(e,ba)),us(e,a),n===1&&pr===0&&!(t.mode&1)&&(Qf=En()+500,Ub&&Kc()))}function us(e,t){var n=e.callbackNode;BV(e,t);var a=W0(e,e===sa?ba:0);if(a===0)n!==null&&I3(n),e.callbackNode=null,e.callbackPriority=0;else if(t=a&-a,e.callbackPriority!==t){if(n!=null&&I3(n),t===1)e.tag===0?$q(wP.bind(null,e)):SL(wP.bind(null,e)),Lq(function(){!(pr&6)&&Kc()}),n=null;else{switch(Z6(a)){case 1:n=VC;break;case 4:n=X6;break;case 16:n=q0;break;case 536870912:n=Q6;break;default:n=q0}n=wR(n,pR.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function pR(e,t){if(P0=-1,T0=0,pr&6)throw Error(st(327));var n=e.callbackNode;if(Rf()&&e.callbackNode!==n)return null;var a=W0(e,e===sa?ba:0);if(a===0)return null;if(a&30||a&e.expiredLanes||t)t=cy(e,a);else{t=a;var s=pr;pr|=2;var i=xR();(sa!==e||ba!==t)&&(il=null,Qf=En()+500,zd(e,t));do try{iW();break}catch(l){vR(e,l)}while(1);rA(),iy.current=i,pr=s,Mn!==null?t=0:(sa=null,ba=0,t=Xn)}if(t!==0){if(t===2&&(s=PN(e),s!==0&&(a=s,t=r5(e,s))),t===1)throw n=rv,zd(e,0),cc(e,a),us(e,En()),n;if(t===6)cc(e,a);else{if(s=e.current.alternate,!(a&30)&&!aW(s)&&(t=cy(e,a),t===2&&(i=PN(e),i!==0&&(a=i,t=r5(e,i))),t===1))throw n=rv,zd(e,0),cc(e,a),us(e,En()),n;switch(e.finishedWork=s,e.finishedLanes=a,t){case 0:case 1:throw Error(st(345));case 2:gd(e,ss,il);break;case 3:if(cc(e,a),(a&130023424)===a&&(t=xA+500-En(),10<t)){if(W0(e,0)!==0)break;if(s=e.suspendedLanes,(s&a)!==a){Ha(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=RN(gd.bind(null,e,ss,il),t);break}gd(e,ss,il);break;case 4:if(cc(e,a),(a&4194240)===a)break;for(t=e.eventTimes,s=-1;0<a;){var o=31-Ki(a);i=1<<o,o=t[o],o>s&&(s=o),a&=~i}if(a=s,a=En()-a,a=(120>a?120:480>a?480:1080>a?1080:1920>a?1920:3e3>a?3e3:4320>a?4320:1960*nW(a/1960))-a,10<a){e.timeoutHandle=RN(gd.bind(null,e,ss,il),a);break}gd(e,ss,il);break;case 5:gd(e,ss,il);break;default:throw Error(st(329))}}}return us(e,En()),e.callbackNode===n?pR.bind(null,e):null}function r5(e,t){var n=Cp;return e.current.memoizedState.isDehydrated&&(zd(e,t).flags|=256),e=cy(e,t),e!==2&&(t=ss,ss=n,t!==null&&n5(t)),e}function n5(e){ss===null?ss=e:ss.push.apply(ss,e)}function aW(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var a=0;a<n.length;a++){var s=n[a],i=s.getSnapshot;s=s.value;try{if(!Qi(i(),s))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function cc(e,t){for(t&=~vA,t&=~Hb,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Ki(t),a=1<<n;e[n]=-1,t&=~a}}function wP(e){if(pr&6)throw Error(st(327));Rf();var t=W0(e,0);if(!(t&1))return us(e,En()),null;var n=cy(e,t);if(e.tag!==0&&n===2){var a=PN(e);a!==0&&(t=a,n=r5(e,a))}if(n===1)throw n=rv,zd(e,0),cc(e,t),us(e,En()),n;if(n===6)throw Error(st(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,gd(e,ss,il),us(e,En()),null}function gA(e,t){var n=pr;pr|=1;try{return e(t)}finally{pr=n,pr===0&&(Qf=En()+500,Ub&&Kc())}}function ru(e){hc!==null&&hc.tag===0&&!(pr&6)&&Rf();var t=pr;pr|=1;var n=ci.transition,a=Ar;try{if(ci.transition=null,Ar=1,e)return e()}finally{Ar=a,ci.transition=n,pr=t,!(pr&6)&&Kc()}}function yA(){Ns=Ef.current,Zr(Ef)}function zd(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,_q(n)),Mn!==null)for(n=Mn.return;n!==null;){var a=n;switch(ZC(a),a.tag){case 1:a=a.type.childContextTypes,a!=null&&X0();break;case 3:Yf(),Zr(cs),Zr(Fa),lA();break;case 5:oA(a);break;case 4:Yf();break;case 13:Zr(dn);break;case 19:Zr(dn);break;case 10:nA(a.type._context);break;case 22:case 23:yA()}n=n.return}if(sa=e,Mn=e=Ec(e.current,null),ba=Ns=t,Xn=0,rv=null,vA=Hb=tu=0,ss=Cp=null,Ed!==null){for(t=0;t<Ed.length;t++)if(n=Ed[t],a=n.interleaved,a!==null){n.interleaved=null;var s=a.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,a.next=o}n.pending=a}Ed=null}return e}function vR(e,t){do{var n=Mn;try{if(rA(),C0.current=sy,ay){for(var a=mn.memoizedState;a!==null;){var s=a.queue;s!==null&&(s.pending=null),a=a.next}ay=!1}if(eu=0,aa=Gn=mn=null,Np=!1,Zp=0,pA.current=null,n===null||n.return===null){Xn=1,rv=t,Mn=null;break}e:{var i=e,o=n.return,l=n,c=t;if(t=ba,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,f=l,u=f.tag;if(!(f.mode&1)&&(u===0||u===11||u===15)){var m=f.alternate;m?(f.updateQueue=m.updateQueue,f.memoizedState=m.memoizedState,f.lanes=m.lanes):(f.updateQueue=null,f.memoizedState=null)}var h=cP(o);if(h!==null){h.flags&=-257,dP(h,o,l,i,t),h.mode&1&&lP(i,d,t),t=h,c=d;var x=t.updateQueue;if(x===null){var g=new Set;g.add(c),t.updateQueue=g}else x.add(c);break e}else{if(!(t&1)){lP(i,d,t),bA();break e}c=Error(st(426))}}else if(tn&&l.mode&1){var p=cP(o);if(p!==null){!(p.flags&65536)&&(p.flags|=256),dP(p,o,l,i,t),eA(Xf(c,l));break e}}i=c=Xf(c,l),Xn!==4&&(Xn=2),Cp===null?Cp=[i]:Cp.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var v=ZL(i,c,t);rP(i,v);break e;case 1:l=c;var y=i.type,b=i.stateNode;if(!(i.flags&128)&&(typeof y.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(Cc===null||!Cc.has(b)))){i.flags|=65536,t&=-t,i.lanes|=t;var j=eR(i,l,t);rP(i,j);break e}}i=i.return}while(i!==null)}yR(n)}catch(C){t=C,Mn===n&&n!==null&&(Mn=n=n.return);continue}break}while(1)}function xR(){var e=iy.current;return iy.current=sy,e===null?sy:e}function bA(){(Xn===0||Xn===3||Xn===2)&&(Xn=4),sa===null||!(tu&268435455)&&!(Hb&268435455)||cc(sa,ba)}function cy(e,t){var n=pr;pr|=2;var a=xR();(sa!==e||ba!==t)&&(il=null,zd(e,t));do try{sW();break}catch(s){vR(e,s)}while(1);if(rA(),pr=n,iy.current=a,Mn!==null)throw Error(st(261));return sa=null,ba=0,Xn}function sW(){for(;Mn!==null;)gR(Mn)}function iW(){for(;Mn!==null&&!DV();)gR(Mn)}function gR(e){var t=jR(e.alternate,e,Ns);e.memoizedProps=e.pendingProps,t===null?yR(e):Mn=t,pA.current=null}function yR(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=Zq(n,t),n!==null){n.flags&=32767,Mn=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Xn=6,Mn=null;return}}else if(n=Jq(n,t,Ns),n!==null){Mn=n;return}if(t=t.sibling,t!==null){Mn=t;return}Mn=t=e}while(t!==null);Xn===0&&(Xn=5)}function gd(e,t,n){var a=Ar,s=ci.transition;try{ci.transition=null,Ar=1,oW(e,t,n,a)}finally{ci.transition=s,Ar=a}return null}function oW(e,t,n,a){do Rf();while(hc!==null);if(pr&6)throw Error(st(327));n=e.finishedWork;var s=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(st(177));e.callbackNode=null,e.callbackPriority=0;var i=n.lanes|n.childLanes;if(zV(e,i),e===sa&&(Mn=sa=null,ba=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||_g||(_g=!0,wR(q0,function(){return Rf(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=ci.transition,ci.transition=null;var o=Ar;Ar=1;var l=pr;pr|=4,pA.current=null,tW(e,n),mR(n,e),Eq(_N),H0=!!ON,_N=ON=null,e.current=n,rW(n),kV(),pr=l,Ar=o,ci.transition=i}else e.current=n;if(_g&&(_g=!1,hc=e,ly=s),i=e.pendingLanes,i===0&&(Cc=null),LV(n.stateNode),us(e,En()),t!==null)for(a=e.onRecoverableError,n=0;n<t.length;n++)s=t[n],a(s.value,{componentStack:s.stack,digest:s.digest});if(oy)throw oy=!1,e=e5,e5=null,e;return ly&1&&e.tag!==0&&Rf(),i=e.pendingLanes,i&1?e===t5?Ap++:(Ap=0,t5=e):Ap=0,Kc(),null}function Rf(){if(hc!==null){var e=Z6(ly),t=ci.transition,n=Ar;try{if(ci.transition=null,Ar=16>e?16:e,hc===null)var a=!1;else{if(e=hc,hc=null,ly=0,pr&6)throw Error(st(331));var s=pr;for(pr|=4,bt=e.current;bt!==null;){var i=bt,o=i.child;if(bt.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var d=l[c];for(bt=d;bt!==null;){var f=bt;switch(f.tag){case 0:case 11:case 15:Sp(8,f,i)}var u=f.child;if(u!==null)u.return=f,bt=u;else for(;bt!==null;){f=bt;var m=f.sibling,h=f.return;if(dR(f),f===d){bt=null;break}if(m!==null){m.return=h,bt=m;break}bt=h}}}var x=i.alternate;if(x!==null){var g=x.child;if(g!==null){x.child=null;do{var p=g.sibling;g.sibling=null,g=p}while(g!==null)}}bt=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,bt=o;else e:for(;bt!==null;){if(i=bt,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Sp(9,i,i.return)}var v=i.sibling;if(v!==null){v.return=i.return,bt=v;break e}bt=i.return}}var y=e.current;for(bt=y;bt!==null;){o=bt;var b=o.child;if(o.subtreeFlags&2064&&b!==null)b.return=o,bt=b;else e:for(o=y;bt!==null;){if(l=bt,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Wb(9,l)}}catch(C){bn(l,l.return,C)}if(l===o){bt=null;break e}var j=l.sibling;if(j!==null){j.return=l.return,bt=j;break e}bt=l.return}}if(pr=s,Kc(),Do&&typeof Do.onPostCommitFiberRoot=="function")try{Do.onPostCommitFiberRoot(Fb,e)}catch{}a=!0}return a}finally{Ar=n,ci.transition=t}}return!1}function NP(e,t,n){t=Xf(n,t),t=ZL(e,t,1),e=Sc(e,t,1),t=Ha(),e!==null&&(Zv(e,1,t),us(e,t))}function bn(e,t,n){if(e.tag===3)NP(e,e,n);else for(;t!==null;){if(t.tag===3){NP(t,e,n);break}else if(t.tag===1){var a=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof a.componentDidCatch=="function"&&(Cc===null||!Cc.has(a))){e=Xf(n,e),e=eR(t,e,1),t=Sc(t,e,1),e=Ha(),t!==null&&(Zv(t,1,e),us(t,e));break}}t=t.return}}function lW(e,t,n){var a=e.pingCache;a!==null&&a.delete(t),t=Ha(),e.pingedLanes|=e.suspendedLanes&n,sa===e&&(ba&n)===n&&(Xn===4||Xn===3&&(ba&130023424)===ba&&500>En()-xA?zd(e,0):vA|=n),us(e,t)}function bR(e,t){t===0&&(e.mode&1?(t=Sg,Sg<<=1,!(Sg&130023424)&&(Sg=4194304)):t=1);var n=Ha();e=wl(e,t),e!==null&&(Zv(e,t,n),us(e,n))}function cW(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),bR(e,n)}function dW(e,t){var n=0;switch(e.tag){case 13:var a=e.stateNode,s=e.memoizedState;s!==null&&(n=s.retryLane);break;case 19:a=e.stateNode;break;default:throw Error(st(314))}a!==null&&a.delete(t),bR(e,n)}var jR;jR=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||cs.current)os=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return os=!1,Qq(e,t,n);os=!!(e.flags&131072)}else os=!1,tn&&t.flags&1048576&&CL(t,Z0,t.index);switch(t.lanes=0,t.tag){case 2:var a=t.type;E0(e,t),e=t.pendingProps;var s=Hf(t,Fa.current);Lf(t,n),s=dA(null,t,a,e,s,n);var i=uA();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,ds(a)?(i=!0,Q0(t)):i=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,sA(t),s.updater=qb,t.stateNode=s,s._reactInternals=t,VN(t,a,e,n),t=HN(null,t,a,!0,i,n)):(t.tag=0,tn&&i&&JC(t),Ua(null,t,s,n),t=t.child),t;case 16:a=t.elementType;e:{switch(E0(e,t),e=t.pendingProps,s=a._init,a=s(a._payload),t.type=a,s=t.tag=fW(a),e=Ri(a,e),s){case 0:t=WN(null,t,a,e,n);break e;case 1:t=mP(null,t,a,e,n);break e;case 11:t=uP(null,t,a,e,n);break e;case 14:t=fP(null,t,a,Ri(a.type,e),n);break e}throw Error(st(306,a,""))}return t;case 0:return a=t.type,s=t.pendingProps,s=t.elementType===a?s:Ri(a,s),WN(e,t,a,s,n);case 1:return a=t.type,s=t.pendingProps,s=t.elementType===a?s:Ri(a,s),mP(e,t,a,s,n);case 3:e:{if(aR(t),e===null)throw Error(st(387));a=t.pendingProps,i=t.memoizedState,s=i.element,DL(e,t),ry(t,a,null,n);var o=t.memoizedState;if(a=o.element,i.isDehydrated)if(i={element:a,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){s=Xf(Error(st(423)),t),t=hP(e,t,a,n,s);break e}else if(a!==s){s=Xf(Error(st(424)),t),t=hP(e,t,a,n,s);break e}else for(Ps=Nc(t.stateNode.containerInfo.firstChild),ks=t,tn=!0,Ui=null,n=TL(t,null,a,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Gf(),a===s){t=Nl(e,t,n);break e}Ua(e,t,a,n)}t=t.child}return t;case 5:return kL(t),e===null&&BN(t),a=t.type,s=t.pendingProps,i=e!==null?e.memoizedProps:null,o=s.children,LN(a,s)?o=null:i!==null&&LN(a,i)&&(t.flags|=32),nR(e,t),Ua(e,t,o,n),t.child;case 6:return e===null&&BN(t),null;case 13:return sR(e,t,n);case 4:return iA(t,t.stateNode.containerInfo),a=t.pendingProps,e===null?t.child=Kf(t,null,a,n):Ua(e,t,a,n),t.child;case 11:return a=t.type,s=t.pendingProps,s=t.elementType===a?s:Ri(a,s),uP(e,t,a,s,n);case 7:return Ua(e,t,t.pendingProps,n),t.child;case 8:return Ua(e,t,t.pendingProps.children,n),t.child;case 12:return Ua(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(a=t.type._context,s=t.pendingProps,i=t.memoizedProps,o=s.value,Hr(ey,a._currentValue),a._currentValue=o,i!==null)if(Qi(i.value,o)){if(i.children===s.children&&!cs.current){t=Nl(e,t,n);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var c=l.firstContext;c!==null;){if(c.context===a){if(i.tag===1){c=hl(-1,n&-n),c.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var f=d.pending;f===null?c.next=c:(c.next=f.next,f.next=c),d.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),zN(i.return,n,t),l.lanes|=n;break}c=c.next}}else if(i.tag===10)o=i.type===t.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(st(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),zN(o,n,t),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===t){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Ua(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,a=t.pendingProps.children,Lf(t,n),s=mi(s),a=a(s),t.flags|=1,Ua(e,t,a,n),t.child;case 14:return a=t.type,s=Ri(a,t.pendingProps),s=Ri(a.type,s),fP(e,t,a,s,n);case 15:return tR(e,t,t.type,t.pendingProps,n);case 17:return a=t.type,s=t.pendingProps,s=t.elementType===a?s:Ri(a,s),E0(e,t),t.tag=1,ds(a)?(e=!0,Q0(t)):e=!1,Lf(t,n),JL(t,a,s),VN(t,a,s,n),HN(null,t,a,!0,e,n);case 19:return iR(e,t,n);case 22:return rR(e,t,n)}throw Error(st(156,t.tag))};function wR(e,t){return Y6(e,t)}function uW(e,t,n,a){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ii(e,t,n,a){return new uW(e,t,n,a)}function jA(e){return e=e.prototype,!(!e||!e.isReactComponent)}function fW(e){if(typeof e=="function")return jA(e)?1:0;if(e!=null){if(e=e.$$typeof,e===BC)return 11;if(e===zC)return 14}return 2}function Ec(e,t){var n=e.alternate;return n===null?(n=ii(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function I0(e,t,n,a,s,i){var o=2;if(a=e,typeof e=="function")jA(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case xf:return Ud(n.children,s,i,t);case $C:o=8,s|=8;break;case mN:return e=ii(12,n,t,s|2),e.elementType=mN,e.lanes=i,e;case hN:return e=ii(13,n,t,s),e.elementType=hN,e.lanes=i,e;case pN:return e=ii(19,n,t,s),e.elementType=pN,e.lanes=i,e;case k6:return Gb(n,s,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case I6:o=10;break e;case D6:o=9;break e;case BC:o=11;break e;case zC:o=14;break e;case sc:o=16,a=null;break e}throw Error(st(130,e==null?e:typeof e,""))}return t=ii(o,n,t,s),t.elementType=e,t.type=a,t.lanes=i,t}function Ud(e,t,n,a){return e=ii(7,e,a,t),e.lanes=n,e}function Gb(e,t,n,a){return e=ii(22,e,a,t),e.elementType=k6,e.lanes=n,e.stateNode={isHidden:!1},e}function $w(e,t,n){return e=ii(6,e,null,t),e.lanes=n,e}function Bw(e,t,n){return t=ii(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function mW(e,t,n,a,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=bw(0),this.expirationTimes=bw(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=bw(0),this.identifierPrefix=a,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function wA(e,t,n,a,s,i,o,l,c){return e=new mW(e,t,n,l,c),t===1?(t=1,i===!0&&(t|=8)):t=0,i=ii(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:a,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},sA(i),e}function hW(e,t,n){var a=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:vf,key:a==null?null:""+a,children:e,containerInfo:t,implementation:n}}function NR(e){if(!e)return Fc;e=e._reactInternals;e:{if(fu(e)!==e||e.tag!==1)throw Error(st(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(ds(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(st(171))}if(e.tag===1){var n=e.type;if(ds(n))return NL(e,n,t)}return t}function SR(e,t,n,a,s,i,o,l,c){return e=wA(n,a,!0,e,s,i,o,l,c),e.context=NR(null),n=e.current,a=Ha(),s=Ac(n),i=hl(a,s),i.callback=t??null,Sc(n,i,s),e.current.lanes=s,Zv(e,s,a),us(e,a),e}function Kb(e,t,n,a){var s=t.current,i=Ha(),o=Ac(s);return n=NR(n),t.context===null?t.context=n:t.pendingContext=n,t=hl(i,o),t.payload={element:e},a=a===void 0?null:a,a!==null&&(t.callback=a),e=Sc(s,t,o),e!==null&&(Yi(e,s,o,i),S0(e,s,o)),o}function dy(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function SP(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function NA(e,t){SP(e,t),(e=e.alternate)&&SP(e,t)}function pW(){return null}var CR=typeof reportError=="function"?reportError:function(e){console.error(e)};function SA(e){this._internalRoot=e}Yb.prototype.render=SA.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(st(409));Kb(e,t,null,null)};Yb.prototype.unmount=SA.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;ru(function(){Kb(null,e,null,null)}),t[jl]=null}};function Yb(e){this._internalRoot=e}Yb.prototype.unstable_scheduleHydration=function(e){if(e){var t=rL();e={blockedOn:null,target:e,priority:t};for(var n=0;n<lc.length&&t!==0&&t<lc[n].priority;n++);lc.splice(n,0,e),n===0&&aL(e)}};function CA(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Xb(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function CP(){}function vW(e,t,n,a,s){if(s){if(typeof a=="function"){var i=a;a=function(){var d=dy(o);i.call(d)}}var o=SR(t,a,e,0,null,!1,!1,"",CP);return e._reactRootContainer=o,e[jl]=o.current,Kp(e.nodeType===8?e.parentNode:e),ru(),o}for(;s=e.lastChild;)e.removeChild(s);if(typeof a=="function"){var l=a;a=function(){var d=dy(c);l.call(d)}}var c=wA(e,0,!1,null,null,!1,!1,"",CP);return e._reactRootContainer=c,e[jl]=c.current,Kp(e.nodeType===8?e.parentNode:e),ru(function(){Kb(t,c,n,a)}),c}function Qb(e,t,n,a,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var l=s;s=function(){var c=dy(o);l.call(c)}}Kb(t,o,e,s)}else o=vW(n,t,e,s,a);return dy(o)}eL=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=hp(t.pendingLanes);n!==0&&(qC(t,n|1),us(t,En()),!(pr&6)&&(Qf=En()+500,Kc()))}break;case 13:ru(function(){var a=wl(e,1);if(a!==null){var s=Ha();Yi(a,e,1,s)}}),NA(e,1)}};WC=function(e){if(e.tag===13){var t=wl(e,134217728);if(t!==null){var n=Ha();Yi(t,e,134217728,n)}NA(e,134217728)}};tL=function(e){if(e.tag===13){var t=Ac(e),n=wl(e,t);if(n!==null){var a=Ha();Yi(n,e,t,a)}NA(e,t)}};rL=function(){return Ar};nL=function(e,t){var n=Ar;try{return Ar=e,t()}finally{Ar=n}};CN=function(e,t,n){switch(t){case"input":if(gN(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var a=n[t];if(a!==e&&a.form===e.form){var s=zb(a);if(!s)throw Error(st(90));_6(a),gN(a,s)}}}break;case"textarea":R6(e,n);break;case"select":t=n.value,t!=null&&Df(e,!!n.multiple,t,!1)}};V6=gA;q6=ru;var xW={usingClientEntryPoint:!1,Events:[tx,jf,zb,z6,U6,gA]},Wh={findFiberByHostInstance:Ad,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},gW={bundleType:Wh.bundleType,version:Wh.version,rendererPackageName:Wh.rendererPackageName,rendererConfig:Wh.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:kl.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=G6(e),e===null?null:e.stateNode},findFiberByHostInstance:Wh.findFiberByHostInstance||pW,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Lg=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Lg.isDisabled&&Lg.supportsFiber)try{Fb=Lg.inject(gW),Do=Lg}catch{}}Ms.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=xW;Ms.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!CA(t))throw Error(st(200));return hW(e,t,null,n)};Ms.createRoot=function(e,t){if(!CA(e))throw Error(st(299));var n=!1,a="",s=CR;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(a=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=wA(e,1,!1,null,null,n,!1,a,s),e[jl]=t.current,Kp(e.nodeType===8?e.parentNode:e),new SA(t)};Ms.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(st(188)):(e=Object.keys(e).join(","),Error(st(268,e)));return e=G6(t),e=e===null?null:e.stateNode,e};Ms.flushSync=function(e){return ru(e)};Ms.hydrate=function(e,t,n){if(!Xb(t))throw Error(st(200));return Qb(null,e,t,!0,n)};Ms.hydrateRoot=function(e,t,n){if(!CA(e))throw Error(st(405));var a=n!=null&&n.hydratedSources||null,s=!1,i="",o=CR;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),t=SR(t,null,e,1,n??null,s,!1,i,o),e[jl]=t.current,Kp(e),a)for(e=0;e<a.length;e++)n=a[e],s=n._getVersion,s=s(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new Yb(t)};Ms.render=function(e,t,n){if(!Xb(t))throw Error(st(200));return Qb(null,e,t,!1,n)};Ms.unmountComponentAtNode=function(e){if(!Xb(e))throw Error(st(40));return e._reactRootContainer?(ru(function(){Qb(null,null,e,!1,function(){e._reactRootContainer=null,e[jl]=null})}),!0):!1};Ms.unstable_batchedUpdates=gA;Ms.unstable_renderSubtreeIntoContainer=function(e,t,n,a){if(!Xb(n))throw Error(st(200));if(e==null||e._reactInternals===void 0)throw Error(st(38));return Qb(e,t,n,!1,a)};Ms.version="18.3.1-next-f1338f8080-20240426";function AR(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(AR)}catch(e){console.error(e)}}AR(),A6.exports=Ms;var zo=A6.exports;const AA=Er(zo);var AP=zo;uN.createRoot=AP.createRoot,uN.hydrateRoot=AP.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function nv(){return nv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},nv.apply(this,arguments)}var pc;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(pc||(pc={}));const EP="popstate";function yW(e){e===void 0&&(e={});function t(a,s){let{pathname:i,search:o,hash:l}=a.location;return a5("",{pathname:i,search:o,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(a,s){return typeof s=="string"?s:uy(s)}return jW(t,n,null,e)}function kn(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function ER(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function bW(){return Math.random().toString(36).substr(2,8)}function PP(e,t){return{usr:e.state,key:e.key,idx:t}}function a5(e,t,n,a){return n===void 0&&(n=null),nv({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?Lm(t):t,{state:n,key:t&&t.key||a||bW()})}function uy(e){let{pathname:t="/",search:n="",hash:a=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),a&&a!=="#"&&(t+=a.charAt(0)==="#"?a:"#"+a),t}function Lm(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let a=e.indexOf("?");a>=0&&(t.search=e.substr(a),e=e.substr(0,a)),e&&(t.pathname=e)}return t}function jW(e,t,n,a){a===void 0&&(a={});let{window:s=document.defaultView,v5Compat:i=!1}=a,o=s.history,l=pc.Pop,c=null,d=f();d==null&&(d=0,o.replaceState(nv({},o.state,{idx:d}),""));function f(){return(o.state||{idx:null}).idx}function u(){l=pc.Pop;let p=f(),v=p==null?null:p-d;d=p,c&&c({action:l,location:g.location,delta:v})}function m(p,v){l=pc.Push;let y=a5(g.location,p,v);n&&n(y,p),d=f()+1;let b=PP(y,d),j=g.createHref(y);try{o.pushState(b,"",j)}catch(C){if(C instanceof DOMException&&C.name==="DataCloneError")throw C;s.location.assign(j)}i&&c&&c({action:l,location:g.location,delta:1})}function h(p,v){l=pc.Replace;let y=a5(g.location,p,v);n&&n(y,p),d=f();let b=PP(y,d),j=g.createHref(y);o.replaceState(b,"",j),i&&c&&c({action:l,location:g.location,delta:0})}function x(p){let v=s.location.origin!=="null"?s.location.origin:s.location.href,y=typeof p=="string"?p:uy(p);return y=y.replace(/ $/,"%20"),kn(v,"No window.location.(origin|href) available to create URL for href: "+y),new URL(y,v)}let g={get action(){return l},get location(){return e(s,o)},listen(p){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(EP,u),c=p,()=>{s.removeEventListener(EP,u),c=null}},createHref(p){return t(s,p)},createURL:x,encodeLocation(p){let v=x(p);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:m,replace:h,go(p){return o.go(p)}};return g}var TP;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(TP||(TP={}));function wW(e,t,n){return n===void 0&&(n="/"),NW(e,t,n,!1)}function NW(e,t,n,a){let s=typeof t=="string"?Lm(t):t,i=EA(s.pathname||"/",n);if(i==null)return null;let o=PR(e);SW(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let d=LW(i);l=OW(o[c],d,a)}return l}function PR(e,t,n,a){t===void 0&&(t=[]),n===void 0&&(n=[]),a===void 0&&(a="");let s=(i,o,l)=>{let c={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};c.relativePath.startsWith("/")&&(kn(c.relativePath.startsWith(a),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+a+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(a.length));let d=Pc([a,c.relativePath]),f=n.concat(c);i.children&&i.children.length>0&&(kn(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),PR(i.children,t,f,d)),!(i.path==null&&!i.index)&&t.push({path:d,score:DW(d,i.index),routesMeta:f})};return e.forEach((i,o)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))s(i,o);else for(let c of TR(i.path))s(i,o,c)}),t}function TR(e){let t=e.split("/");if(t.length===0)return[];let[n,...a]=t,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(a.length===0)return s?[i,""]:[i];let o=TR(a.join("/")),l=[];return l.push(...o.map(c=>c===""?i:[i,c].join("/"))),s&&l.push(...o),l.map(c=>e.startsWith("/")&&c===""?"/":c)}function SW(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:kW(t.routesMeta.map(a=>a.childrenIndex),n.routesMeta.map(a=>a.childrenIndex)))}const CW=/^:[\w-]+$/,AW=3,EW=2,PW=1,TW=10,IW=-2,IP=e=>e==="*";function DW(e,t){let n=e.split("/"),a=n.length;return n.some(IP)&&(a+=IW),t&&(a+=EW),n.filter(s=>!IP(s)).reduce((s,i)=>s+(CW.test(i)?AW:i===""?PW:TW),a)}function kW(e,t){return e.length===t.length&&e.slice(0,-1).every((a,s)=>a===t[s])?e[e.length-1]-t[t.length-1]:0}function OW(e,t,n){n===void 0&&(n=!1);let{routesMeta:a}=e,s={},i="/",o=[];for(let l=0;l<a.length;++l){let c=a[l],d=l===a.length-1,f=i==="/"?t:t.slice(i.length)||"/",u=DP({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},f),m=c.route;if(!u&&d&&n&&!a[a.length-1].route.index&&(u=DP({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},f)),!u)return null;Object.assign(s,u.params),o.push({params:s,pathname:Pc([i,u.pathname]),pathnameBase:$W(Pc([i,u.pathnameBase])),route:m}),u.pathnameBase!=="/"&&(i=Pc([i,u.pathnameBase]))}return o}function DP(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,a]=_W(e.path,e.caseSensitive,e.end),s=t.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:a.reduce((d,f,u)=>{let{paramName:m,isOptional:h}=f;if(m==="*"){let g=l[u]||"";o=i.slice(0,i.length-g.length).replace(/(.)\/+$/,"$1")}const x=l[u];return h&&!x?d[m]=void 0:d[m]=(x||"").replace(/%2F/g,"/"),d},{}),pathname:i,pathnameBase:o,pattern:e}}function _W(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),ER(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let a=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(a.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(a.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),a]}function LW(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return ER(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function EA(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,a=e.charAt(n);return a&&a!=="/"?null:e.slice(n)||"/"}function RW(e,t){t===void 0&&(t="/");let{pathname:n,search:a="",hash:s=""}=typeof e=="string"?Lm(e):e;return{pathname:n?n.startsWith("/")?n:FW(n,t):t,search:BW(a),hash:zW(s)}}function FW(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function zw(e,t,n,a){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(a)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function MW(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function PA(e,t){let n=MW(e);return t?n.map((a,s)=>s===n.length-1?a.pathname:a.pathnameBase):n.map(a=>a.pathnameBase)}function TA(e,t,n,a){a===void 0&&(a=!1);let s;typeof e=="string"?s=Lm(e):(s=nv({},e),kn(!s.pathname||!s.pathname.includes("?"),zw("?","pathname","search",s)),kn(!s.pathname||!s.pathname.includes("#"),zw("#","pathname","hash",s)),kn(!s.search||!s.search.includes("#"),zw("#","search","hash",s)));let i=e===""||s.pathname==="",o=i?"/":s.pathname,l;if(o==null)l=n;else{let u=t.length-1;if(!a&&o.startsWith("..")){let m=o.split("/");for(;m[0]==="..";)m.shift(),u-=1;s.pathname=m.join("/")}l=u>=0?t[u]:"/"}let c=RW(s,l),d=o&&o!=="/"&&o.endsWith("/"),f=(i||o===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(d||f)&&(c.pathname+="/"),c}const Pc=e=>e.join("/").replace(/\/\/+/g,"/"),$W=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),BW=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,zW=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function UW(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const IR=["post","put","patch","delete"];new Set(IR);const VW=["get",...IR];new Set(VW);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function av(){return av=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},av.apply(this,arguments)}const IA=w.createContext(null),qW=w.createContext(null),Yc=w.createContext(null),Jb=w.createContext(null),Xc=w.createContext({outlet:null,matches:[],isDataRoute:!1}),DR=w.createContext(null);function WW(e,t){let{relative:n}=t===void 0?{}:t;Rm()||kn(!1);let{basename:a,navigator:s}=w.useContext(Yc),{hash:i,pathname:o,search:l}=OR(e,{relative:n}),c=o;return a!=="/"&&(c=o==="/"?a:Pc([a,o])),s.createHref({pathname:c,search:l,hash:i})}function Rm(){return w.useContext(Jb)!=null}function Fm(){return Rm()||kn(!1),w.useContext(Jb).location}function kR(e){w.useContext(Yc).static||w.useLayoutEffect(e)}function DA(){let{isDataRoute:e}=w.useContext(Xc);return e?aH():HW()}function HW(){Rm()||kn(!1);let e=w.useContext(IA),{basename:t,future:n,navigator:a}=w.useContext(Yc),{matches:s}=w.useContext(Xc),{pathname:i}=Fm(),o=JSON.stringify(PA(s,n.v7_relativeSplatPath)),l=w.useRef(!1);return kR(()=>{l.current=!0}),w.useCallback(function(d,f){if(f===void 0&&(f={}),!l.current)return;if(typeof d=="number"){a.go(d);return}let u=TA(d,JSON.parse(o),i,f.relative==="path");e==null&&t!=="/"&&(u.pathname=u.pathname==="/"?t:Pc([t,u.pathname])),(f.replace?a.replace:a.push)(u,f.state,f)},[t,a,o,i,e])}function OR(e,t){let{relative:n}=t===void 0?{}:t,{future:a}=w.useContext(Yc),{matches:s}=w.useContext(Xc),{pathname:i}=Fm(),o=JSON.stringify(PA(s,a.v7_relativeSplatPath));return w.useMemo(()=>TA(e,JSON.parse(o),i,n==="path"),[e,o,i,n])}function GW(e,t){return KW(e,t)}function KW(e,t,n,a){Rm()||kn(!1);let{navigator:s}=w.useContext(Yc),{matches:i}=w.useContext(Xc),o=i[i.length-1],l=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let d=Fm(),f;if(t){var u;let p=typeof t=="string"?Lm(t):t;c==="/"||(u=p.pathname)!=null&&u.startsWith(c)||kn(!1),f=p}else f=d;let m=f.pathname||"/",h=m;if(c!=="/"){let p=c.replace(/^\//,"").split("/");h="/"+m.replace(/^\//,"").split("/").slice(p.length).join("/")}let x=wW(e,{pathname:h}),g=ZW(x&&x.map(p=>Object.assign({},p,{params:Object.assign({},l,p.params),pathname:Pc([c,s.encodeLocation?s.encodeLocation(p.pathname).pathname:p.pathname]),pathnameBase:p.pathnameBase==="/"?c:Pc([c,s.encodeLocation?s.encodeLocation(p.pathnameBase).pathname:p.pathnameBase])})),i,n,a);return t&&g?w.createElement(Jb.Provider,{value:{location:av({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:pc.Pop}},g):g}function YW(){let e=nH(),t=UW(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},i=null;return w.createElement(w.Fragment,null,w.createElement("h2",null,"Unexpected Application Error!"),w.createElement("h3",{style:{fontStyle:"italic"}},t),n?w.createElement("pre",{style:s},n):null,i)}const XW=w.createElement(YW,null);class QW extends w.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?w.createElement(Xc.Provider,{value:this.props.routeContext},w.createElement(DR.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function JW(e){let{routeContext:t,match:n,children:a}=e,s=w.useContext(IA);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),w.createElement(Xc.Provider,{value:t},a)}function ZW(e,t,n,a){var s;if(t===void 0&&(t=[]),n===void 0&&(n=null),a===void 0&&(a=null),e==null){var i;if(!n)return null;if(n.errors)e=n.matches;else if((i=a)!=null&&i.v7_partialHydration&&t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let o=e,l=(s=n)==null?void 0:s.errors;if(l!=null){let f=o.findIndex(u=>u.route.id&&(l==null?void 0:l[u.route.id])!==void 0);f>=0||kn(!1),o=o.slice(0,Math.min(o.length,f+1))}let c=!1,d=-1;if(n&&a&&a.v7_partialHydration)for(let f=0;f<o.length;f++){let u=o[f];if((u.route.HydrateFallback||u.route.hydrateFallbackElement)&&(d=f),u.route.id){let{loaderData:m,errors:h}=n,x=u.route.loader&&m[u.route.id]===void 0&&(!h||h[u.route.id]===void 0);if(u.route.lazy||x){c=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}return o.reduceRight((f,u,m)=>{let h,x=!1,g=null,p=null;n&&(h=l&&u.route.id?l[u.route.id]:void 0,g=u.route.errorElement||XW,c&&(d<0&&m===0?(sH("route-fallback",!1),x=!0,p=null):d===m&&(x=!0,p=u.route.hydrateFallbackElement||null)));let v=t.concat(o.slice(0,m+1)),y=()=>{let b;return h?b=g:x?b=p:u.route.Component?b=w.createElement(u.route.Component,null):u.route.element?b=u.route.element:b=f,w.createElement(JW,{match:u,routeContext:{outlet:f,matches:v,isDataRoute:n!=null},children:b})};return n&&(u.route.ErrorBoundary||u.route.errorElement||m===0)?w.createElement(QW,{location:n.location,revalidation:n.revalidation,component:g,error:h,children:y(),routeContext:{outlet:null,matches:v,isDataRoute:!0}}):y()},null)}var _R=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(_R||{}),fy=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(fy||{});function eH(e){let t=w.useContext(IA);return t||kn(!1),t}function tH(e){let t=w.useContext(qW);return t||kn(!1),t}function rH(e){let t=w.useContext(Xc);return t||kn(!1),t}function LR(e){let t=rH(),n=t.matches[t.matches.length-1];return n.route.id||kn(!1),n.route.id}function nH(){var e;let t=w.useContext(DR),n=tH(fy.UseRouteError),a=LR(fy.UseRouteError);return t!==void 0?t:(e=n.errors)==null?void 0:e[a]}function aH(){let{router:e}=eH(_R.UseNavigateStable),t=LR(fy.UseNavigateStable),n=w.useRef(!1);return kR(()=>{n.current=!0}),w.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?e.navigate(s):e.navigate(s,av({fromRouteId:t},i)))},[e,t])}const kP={};function sH(e,t,n){!t&&!kP[e]&&(kP[e]=!0)}function iH(e,t){e==null||e.v7_startTransition,(e==null?void 0:e.v7_relativeSplatPath)===void 0&&(!t||t.v7_relativeSplatPath),t&&(t.v7_fetcherPersist,t.v7_normalizeFormMethod,t.v7_partialHydration,t.v7_skipActionErrorRevalidation)}function oH(e){let{to:t,replace:n,state:a,relative:s}=e;Rm()||kn(!1);let{future:i,static:o}=w.useContext(Yc),{matches:l}=w.useContext(Xc),{pathname:c}=Fm(),d=DA(),f=TA(t,PA(l,i.v7_relativeSplatPath),c,s==="path"),u=JSON.stringify(f);return w.useEffect(()=>d(JSON.parse(u),{replace:n,state:a,relative:s}),[d,u,s,n,a]),null}function Vt(e){kn(!1)}function lH(e){let{basename:t="/",children:n=null,location:a,navigationType:s=pc.Pop,navigator:i,static:o=!1,future:l}=e;Rm()&&kn(!1);let c=t.replace(/^\/*/,"/"),d=w.useMemo(()=>({basename:c,navigator:i,static:o,future:av({v7_relativeSplatPath:!1},l)}),[c,l,i,o]);typeof a=="string"&&(a=Lm(a));let{pathname:f="/",search:u="",hash:m="",state:h=null,key:x="default"}=a,g=w.useMemo(()=>{let p=EA(f,c);return p==null?null:{location:{pathname:p,search:u,hash:m,state:h,key:x},navigationType:s}},[c,f,u,m,h,x,s]);return g==null?null:w.createElement(Yc.Provider,{value:d},w.createElement(Jb.Provider,{children:n,value:g}))}function Ka(e){let{children:t,location:n}=e;return GW(s5(t),n)}new Promise(()=>{});function s5(e,t){t===void 0&&(t=[]);let n=[];return w.Children.forEach(e,(a,s)=>{if(!w.isValidElement(a))return;let i=[...t,s];if(a.type===w.Fragment){n.push.apply(n,s5(a.props.children,i));return}a.type!==Vt&&kn(!1),!a.props.index||!a.props.children||kn(!1);let o={id:a.props.id||i.join("-"),caseSensitive:a.props.caseSensitive,element:a.props.element,Component:a.props.Component,index:a.props.index,path:a.props.path,loader:a.props.loader,action:a.props.action,errorElement:a.props.errorElement,ErrorBoundary:a.props.ErrorBoundary,hasErrorBoundary:a.props.ErrorBoundary!=null||a.props.errorElement!=null,shouldRevalidate:a.props.shouldRevalidate,handle:a.props.handle,lazy:a.props.lazy};a.props.children&&(o.children=s5(a.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function i5(){return i5=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},i5.apply(this,arguments)}function cH(e,t){if(e==null)return{};var n={},a=Object.keys(e),s,i;for(i=0;i<a.length;i++)s=a[i],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function dH(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function uH(e,t){return e.button===0&&(!t||t==="_self")&&!dH(e)}const fH=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],mH="6";try{window.__reactRouterVersion=mH}catch{}const hH="startTransition",OP=Mo[hH];function pH(e){let{basename:t,children:n,future:a,window:s}=e,i=w.useRef();i.current==null&&(i.current=yW({window:s,v5Compat:!0}));let o=i.current,[l,c]=w.useState({action:o.action,location:o.location}),{v7_startTransition:d}=a||{},f=w.useCallback(u=>{d&&OP?OP(()=>c(u)):c(u)},[c,d]);return w.useLayoutEffect(()=>o.listen(f),[o,f]),w.useEffect(()=>iH(a),[a]),w.createElement(lH,{basename:t,children:n,location:l.location,navigationType:l.action,navigator:o,future:a})}const vH=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",xH=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,_P=w.forwardRef(function(t,n){let{onClick:a,relative:s,reloadDocument:i,replace:o,state:l,target:c,to:d,preventScrollReset:f,viewTransition:u}=t,m=cH(t,fH),{basename:h}=w.useContext(Yc),x,g=!1;if(typeof d=="string"&&xH.test(d)&&(x=d,vH))try{let b=new URL(window.location.href),j=d.startsWith("//")?new URL(b.protocol+d):new URL(d),C=EA(j.pathname,h);j.origin===b.origin&&C!=null?d=C+j.search+j.hash:g=!0}catch{}let p=WW(d,{relative:s}),v=gH(d,{replace:o,state:l,target:c,preventScrollReset:f,relative:s,viewTransition:u});function y(b){a&&a(b),b.defaultPrevented||v(b)}return w.createElement("a",i5({},m,{href:x||p,onClick:g||i?a:y,ref:n,target:c}))});var LP;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(LP||(LP={}));var RP;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(RP||(RP={}));function gH(e,t){let{target:n,replace:a,state:s,preventScrollReset:i,relative:o,viewTransition:l}=t===void 0?{}:t,c=DA(),d=Fm(),f=OR(e,{relative:o});return w.useCallback(u=>{if(uH(u,n)){u.preventDefault();let m=a!==void 0?a:uy(d)===uy(f);c(e,{replace:m,state:s,preventScrollReset:i,relative:o,viewTransition:l})}},[d,c,f,a,s,n,e,i,o,l])}function rn(e,t,{checkForDefaultPrevented:n=!0}={}){return function(s){if(e==null||e(s),n===!1||!s.defaultPrevented)return t==null?void 0:t(s)}}function FP(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function RR(...e){return t=>{let n=!1;const a=e.map(s=>{const i=FP(s,t);return!n&&typeof i=="function"&&(n=!0),i});if(n)return()=>{for(let s=0;s<a.length;s++){const i=a[s];typeof i=="function"?i():FP(e[s],null)}}}}function pi(...e){return w.useCallback(RR(...e),e)}function mu(e,t=[]){let n=[];function a(i,o){const l=w.createContext(o),c=n.length;n=[...n,o];const d=u=>{var v;const{scope:m,children:h,...x}=u,g=((v=m==null?void 0:m[e])==null?void 0:v[c])||l,p=w.useMemo(()=>x,Object.values(x));return r.jsx(g.Provider,{value:p,children:h})};d.displayName=i+"Provider";function f(u,m){var g;const h=((g=m==null?void 0:m[e])==null?void 0:g[c])||l,x=w.useContext(h);if(x)return x;if(o!==void 0)return o;throw new Error(`\`${u}\` must be used within \`${i}\``)}return[d,f]}const s=()=>{const i=n.map(o=>w.createContext(o));return function(l){const c=(l==null?void 0:l[e])||i;return w.useMemo(()=>({[`__scope${e}`]:{...l,[e]:c}}),[l,c])}};return s.scopeName=e,[a,yH(s,...t)]}function yH(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const a=e.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const o=a.reduce((l,{useScope:c,scopeName:d})=>{const u=c(i)[`__scope${d}`];return{...l,...u}},{});return w.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return n.scopeName=t.scopeName,n}function Jf(e){const t=jH(e),n=w.forwardRef((a,s)=>{const{children:i,...o}=a,l=w.Children.toArray(i),c=l.find(NH);if(c){const d=c.props.children,f=l.map(u=>u===c?w.Children.count(d)>1?w.Children.only(null):w.isValidElement(d)?d.props.children:null:u);return r.jsx(t,{...o,ref:s,children:w.isValidElement(d)?w.cloneElement(d,void 0,f):null})}return r.jsx(t,{...o,ref:s,children:i})});return n.displayName=`${e}.Slot`,n}var bH=Jf("Slot");function jH(e){const t=w.forwardRef((n,a)=>{const{children:s,...i}=n;if(w.isValidElement(s)){const o=CH(s),l=SH(i,s.props);return s.type!==w.Fragment&&(l.ref=a?RR(a,o):o),w.cloneElement(s,l)}return w.Children.count(s)>1?w.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var wH=Symbol("radix.slottable");function NH(e){return w.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===wH}function SH(e,t){const n={...t};for(const a in t){const s=e[a],i=t[a];/^on[A-Z]/.test(a)?s&&i?n[a]=(...l)=>{const c=i(...l);return s(...l),c}:s&&(n[a]=s):a==="style"?n[a]={...s,...i}:a==="className"&&(n[a]=[s,i].filter(Boolean).join(" "))}return{...e,...n}}function CH(e){var a,s;let t=(a=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:a.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(s=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:s.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}function AH(e){const t=e+"CollectionProvider",[n,a]=mu(t),[s,i]=n(t,{collectionRef:{current:null},itemMap:new Map}),o=g=>{const{scope:p,children:v}=g,y=pe.useRef(null),b=pe.useRef(new Map).current;return r.jsx(s,{scope:p,itemMap:b,collectionRef:y,children:v})};o.displayName=t;const l=e+"CollectionSlot",c=Jf(l),d=pe.forwardRef((g,p)=>{const{scope:v,children:y}=g,b=i(l,v),j=pi(p,b.collectionRef);return r.jsx(c,{ref:j,children:y})});d.displayName=l;const f=e+"CollectionItemSlot",u="data-radix-collection-item",m=Jf(f),h=pe.forwardRef((g,p)=>{const{scope:v,children:y,...b}=g,j=pe.useRef(null),C=pi(p,j),E=i(f,v);return pe.useEffect(()=>(E.itemMap.set(j,{ref:j,...b}),()=>void E.itemMap.delete(j))),r.jsx(m,{[u]:"",ref:C,children:y})});h.displayName=f;function x(g){const p=i(e+"CollectionConsumer",g);return pe.useCallback(()=>{const y=p.collectionRef.current;if(!y)return[];const b=Array.from(y.querySelectorAll(`[${u}]`));return Array.from(p.itemMap.values()).sort((E,S)=>b.indexOf(E.ref.current)-b.indexOf(S.ref.current))},[p.collectionRef,p.itemMap])}return[{Provider:o,Slot:d,ItemSlot:h},x,a]}var EH=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Nn=EH.reduce((e,t)=>{const n=Jf(`Primitive.${t}`),a=w.forwardRef((s,i)=>{const{asChild:o,...l}=s,c=o?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),r.jsx(c,{...l,ref:i})});return a.displayName=`Primitive.${t}`,{...e,[t]:a}},{});function FR(e,t){e&&zo.flushSync(()=>e.dispatchEvent(t))}function nu(e){const t=w.useRef(e);return w.useEffect(()=>{t.current=e}),w.useMemo(()=>(...n)=>{var a;return(a=t.current)==null?void 0:a.call(t,...n)},[])}function PH(e,t=globalThis==null?void 0:globalThis.document){const n=nu(e);w.useEffect(()=>{const a=s=>{s.key==="Escape"&&n(s)};return t.addEventListener("keydown",a,{capture:!0}),()=>t.removeEventListener("keydown",a,{capture:!0})},[n,t])}var TH="DismissableLayer",o5="dismissableLayer.update",IH="dismissableLayer.pointerDownOutside",DH="dismissableLayer.focusOutside",MP,MR=w.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),$R=w.forwardRef((e,t)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:a,onPointerDownOutside:s,onFocusOutside:i,onInteractOutside:o,onDismiss:l,...c}=e,d=w.useContext(MR),[f,u]=w.useState(null),m=(f==null?void 0:f.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,h]=w.useState({}),x=pi(t,S=>u(S)),g=Array.from(d.layers),[p]=[...d.layersWithOutsidePointerEventsDisabled].slice(-1),v=g.indexOf(p),y=f?g.indexOf(f):-1,b=d.layersWithOutsidePointerEventsDisabled.size>0,j=y>=v,C=OH(S=>{const N=S.target,I=[...d.branches].some(D=>D.contains(N));!j||I||(s==null||s(S),o==null||o(S),S.defaultPrevented||l==null||l())},m),E=_H(S=>{const N=S.target;[...d.branches].some(D=>D.contains(N))||(i==null||i(S),o==null||o(S),S.defaultPrevented||l==null||l())},m);return PH(S=>{y===d.layers.size-1&&(a==null||a(S),!S.defaultPrevented&&l&&(S.preventDefault(),l()))},m),w.useEffect(()=>{if(f)return n&&(d.layersWithOutsidePointerEventsDisabled.size===0&&(MP=m.body.style.pointerEvents,m.body.style.pointerEvents="none"),d.layersWithOutsidePointerEventsDisabled.add(f)),d.layers.add(f),$P(),()=>{n&&d.layersWithOutsidePointerEventsDisabled.size===1&&(m.body.style.pointerEvents=MP)}},[f,m,n,d]),w.useEffect(()=>()=>{f&&(d.layers.delete(f),d.layersWithOutsidePointerEventsDisabled.delete(f),$P())},[f,d]),w.useEffect(()=>{const S=()=>h({});return document.addEventListener(o5,S),()=>document.removeEventListener(o5,S)},[]),r.jsx(Nn.div,{...c,ref:x,style:{pointerEvents:b?j?"auto":"none":void 0,...e.style},onFocusCapture:rn(e.onFocusCapture,E.onFocusCapture),onBlurCapture:rn(e.onBlurCapture,E.onBlurCapture),onPointerDownCapture:rn(e.onPointerDownCapture,C.onPointerDownCapture)})});$R.displayName=TH;var kH="DismissableLayerBranch",BR=w.forwardRef((e,t)=>{const n=w.useContext(MR),a=w.useRef(null),s=pi(t,a);return w.useEffect(()=>{const i=a.current;if(i)return n.branches.add(i),()=>{n.branches.delete(i)}},[n.branches]),r.jsx(Nn.div,{...e,ref:s})});BR.displayName=kH;function OH(e,t=globalThis==null?void 0:globalThis.document){const n=nu(e),a=w.useRef(!1),s=w.useRef(()=>{});return w.useEffect(()=>{const i=l=>{if(l.target&&!a.current){let c=function(){zR(IH,n,d,{discrete:!0})};const d={originalEvent:l};l.pointerType==="touch"?(t.removeEventListener("click",s.current),s.current=c,t.addEventListener("click",s.current,{once:!0})):c()}else t.removeEventListener("click",s.current);a.current=!1},o=window.setTimeout(()=>{t.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(o),t.removeEventListener("pointerdown",i),t.removeEventListener("click",s.current)}},[t,n]),{onPointerDownCapture:()=>a.current=!0}}function _H(e,t=globalThis==null?void 0:globalThis.document){const n=nu(e),a=w.useRef(!1);return w.useEffect(()=>{const s=i=>{i.target&&!a.current&&zR(DH,n,{originalEvent:i},{discrete:!1})};return t.addEventListener("focusin",s),()=>t.removeEventListener("focusin",s)},[t,n]),{onFocusCapture:()=>a.current=!0,onBlurCapture:()=>a.current=!1}}function $P(){const e=new CustomEvent(o5);document.dispatchEvent(e)}function zR(e,t,n,{discrete:a}){const s=n.originalEvent.target,i=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&s.addEventListener(e,t,{once:!0}),a?FR(s,i):s.dispatchEvent(i)}var LH=$R,RH=BR,Mc=globalThis!=null&&globalThis.document?w.useLayoutEffect:()=>{},FH="Portal",UR=w.forwardRef((e,t)=>{var l;const{container:n,...a}=e,[s,i]=w.useState(!1);Mc(()=>i(!0),[]);const o=n||s&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return o?AA.createPortal(r.jsx(Nn.div,{...a,ref:t}),o):null});UR.displayName=FH;function MH(e,t){return w.useReducer((n,a)=>t[n][a]??n,e)}var Zb=e=>{const{present:t,children:n}=e,a=$H(t),s=typeof n=="function"?n({present:a.isPresent}):w.Children.only(n),i=pi(a.ref,BH(s));return typeof n=="function"||a.isPresent?w.cloneElement(s,{ref:i}):null};Zb.displayName="Presence";function $H(e){const[t,n]=w.useState(),a=w.useRef(null),s=w.useRef(e),i=w.useRef("none"),o=e?"mounted":"unmounted",[l,c]=MH(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return w.useEffect(()=>{const d=Rg(a.current);i.current=l==="mounted"?d:"none"},[l]),Mc(()=>{const d=a.current,f=s.current;if(f!==e){const m=i.current,h=Rg(d);e?c("MOUNT"):h==="none"||(d==null?void 0:d.display)==="none"?c("UNMOUNT"):c(f&&m!==h?"ANIMATION_OUT":"UNMOUNT"),s.current=e}},[e,c]),Mc(()=>{if(t){let d;const f=t.ownerDocument.defaultView??window,u=h=>{const g=Rg(a.current).includes(h.animationName);if(h.target===t&&g&&(c("ANIMATION_END"),!s.current)){const p=t.style.animationFillMode;t.style.animationFillMode="forwards",d=f.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=p)})}},m=h=>{h.target===t&&(i.current=Rg(a.current))};return t.addEventListener("animationstart",m),t.addEventListener("animationcancel",u),t.addEventListener("animationend",u),()=>{f.clearTimeout(d),t.removeEventListener("animationstart",m),t.removeEventListener("animationcancel",u),t.removeEventListener("animationend",u)}}else c("ANIMATION_END")},[t,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:w.useCallback(d=>{a.current=d?getComputedStyle(d):null,n(d)},[])}}function Rg(e){return(e==null?void 0:e.animationName)||"none"}function BH(e){var a,s;let t=(a=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:a.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(s=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:s.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var zH=Mo[" useInsertionEffect ".trim().toString()]||Mc;function e1({prop:e,defaultProp:t,onChange:n=()=>{},caller:a}){const[s,i,o]=UH({defaultProp:t,onChange:n}),l=e!==void 0,c=l?e:s;{const f=w.useRef(e!==void 0);w.useEffect(()=>{const u=f.current;u!==l&&console.warn(`${a} is changing from ${u?"controlled":"uncontrolled"} to ${l?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),f.current=l},[l,a])}const d=w.useCallback(f=>{var u;if(l){const m=VH(f)?f(e):f;m!==e&&((u=o.current)==null||u.call(o,m))}else i(f)},[l,e,i,o]);return[c,d]}function UH({defaultProp:e,onChange:t}){const[n,a]=w.useState(e),s=w.useRef(n),i=w.useRef(t);return zH(()=>{i.current=t},[t]),w.useEffect(()=>{var o;s.current!==n&&((o=i.current)==null||o.call(i,n),s.current=n)},[n,s]),[n,a,i]}function VH(e){return typeof e=="function"}var qH=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),WH="VisuallyHidden",kA=w.forwardRef((e,t)=>r.jsx(Nn.span,{...e,ref:t,style:{...qH,...e.style}}));kA.displayName=WH;var OA="ToastProvider",[_A,HH,GH]=AH("Toast"),[VR,JDe]=mu("Toast",[GH]),[KH,t1]=VR(OA),qR=e=>{const{__scopeToast:t,label:n="Notification",duration:a=5e3,swipeDirection:s="right",swipeThreshold:i=50,children:o}=e,[l,c]=w.useState(null),[d,f]=w.useState(0),u=w.useRef(!1),m=w.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${OA}\`. Expected non-empty \`string\`.`),r.jsx(_A.Provider,{scope:t,children:r.jsx(KH,{scope:t,label:n,duration:a,swipeDirection:s,swipeThreshold:i,toastCount:d,viewport:l,onViewportChange:c,onToastAdd:w.useCallback(()=>f(h=>h+1),[]),onToastRemove:w.useCallback(()=>f(h=>h-1),[]),isFocusedToastEscapeKeyDownRef:u,isClosePausedRef:m,children:o})})};qR.displayName=OA;var WR="ToastViewport",YH=["F8"],l5="toast.viewportPause",c5="toast.viewportResume",HR=w.forwardRef((e,t)=>{const{__scopeToast:n,hotkey:a=YH,label:s="Notifications ({hotkey})",...i}=e,o=t1(WR,n),l=HH(n),c=w.useRef(null),d=w.useRef(null),f=w.useRef(null),u=w.useRef(null),m=pi(t,u,o.onViewportChange),h=a.join("+").replace(/Key/g,"").replace(/Digit/g,""),x=o.toastCount>0;w.useEffect(()=>{const p=v=>{var b;a.length!==0&&a.every(j=>v[j]||v.code===j)&&((b=u.current)==null||b.focus())};return document.addEventListener("keydown",p),()=>document.removeEventListener("keydown",p)},[a]),w.useEffect(()=>{const p=c.current,v=u.current;if(x&&p&&v){const y=()=>{if(!o.isClosePausedRef.current){const E=new CustomEvent(l5);v.dispatchEvent(E),o.isClosePausedRef.current=!0}},b=()=>{if(o.isClosePausedRef.current){const E=new CustomEvent(c5);v.dispatchEvent(E),o.isClosePausedRef.current=!1}},j=E=>{!p.contains(E.relatedTarget)&&b()},C=()=>{p.contains(document.activeElement)||b()};return p.addEventListener("focusin",y),p.addEventListener("focusout",j),p.addEventListener("pointermove",y),p.addEventListener("pointerleave",C),window.addEventListener("blur",y),window.addEventListener("focus",b),()=>{p.removeEventListener("focusin",y),p.removeEventListener("focusout",j),p.removeEventListener("pointermove",y),p.removeEventListener("pointerleave",C),window.removeEventListener("blur",y),window.removeEventListener("focus",b)}}},[x,o.isClosePausedRef]);const g=w.useCallback(({tabbingDirection:p})=>{const y=l().map(b=>{const j=b.ref.current,C=[j,...lG(j)];return p==="forwards"?C:C.reverse()});return(p==="forwards"?y.reverse():y).flat()},[l]);return w.useEffect(()=>{const p=u.current;if(p){const v=y=>{var C,E,S;const b=y.altKey||y.ctrlKey||y.metaKey;if(y.key==="Tab"&&!b){const N=document.activeElement,I=y.shiftKey;if(y.target===p&&I){(C=d.current)==null||C.focus();return}const A=g({tabbingDirection:I?"backwards":"forwards"}),_=A.findIndex(k=>k===N);Uw(A.slice(_+1))?y.preventDefault():I?(E=d.current)==null||E.focus():(S=f.current)==null||S.focus()}};return p.addEventListener("keydown",v),()=>p.removeEventListener("keydown",v)}},[l,g]),r.jsxs(RH,{ref:c,role:"region","aria-label":s.replace("{hotkey}",h),tabIndex:-1,style:{pointerEvents:x?void 0:"none"},children:[x&&r.jsx(d5,{ref:d,onFocusFromOutsideViewport:()=>{const p=g({tabbingDirection:"forwards"});Uw(p)}}),r.jsx(_A.Slot,{scope:n,children:r.jsx(Nn.ol,{tabIndex:-1,...i,ref:m})}),x&&r.jsx(d5,{ref:f,onFocusFromOutsideViewport:()=>{const p=g({tabbingDirection:"backwards"});Uw(p)}})]})});HR.displayName=WR;var GR="ToastFocusProxy",d5=w.forwardRef((e,t)=>{const{__scopeToast:n,onFocusFromOutsideViewport:a,...s}=e,i=t1(GR,n);return r.jsx(kA,{"aria-hidden":!0,tabIndex:0,...s,ref:t,style:{position:"fixed"},onFocus:o=>{var d;const l=o.relatedTarget;!((d=i.viewport)!=null&&d.contains(l))&&a()}})});d5.displayName=GR;var nx="Toast",XH="toast.swipeStart",QH="toast.swipeMove",JH="toast.swipeCancel",ZH="toast.swipeEnd",KR=w.forwardRef((e,t)=>{const{forceMount:n,open:a,defaultOpen:s,onOpenChange:i,...o}=e,[l,c]=e1({prop:a,defaultProp:s??!0,onChange:i,caller:nx});return r.jsx(Zb,{present:n||l,children:r.jsx(rG,{open:l,...o,ref:t,onClose:()=>c(!1),onPause:nu(e.onPause),onResume:nu(e.onResume),onSwipeStart:rn(e.onSwipeStart,d=>{d.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:rn(e.onSwipeMove,d=>{const{x:f,y:u}=d.detail.delta;d.currentTarget.setAttribute("data-swipe","move"),d.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${f}px`),d.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${u}px`)}),onSwipeCancel:rn(e.onSwipeCancel,d=>{d.currentTarget.setAttribute("data-swipe","cancel"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),d.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:rn(e.onSwipeEnd,d=>{const{x:f,y:u}=d.detail.delta;d.currentTarget.setAttribute("data-swipe","end"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),d.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${f}px`),d.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${u}px`),c(!1)})})})});KR.displayName=nx;var[eG,tG]=VR(nx,{onClose(){}}),rG=w.forwardRef((e,t)=>{const{__scopeToast:n,type:a="foreground",duration:s,open:i,onClose:o,onEscapeKeyDown:l,onPause:c,onResume:d,onSwipeStart:f,onSwipeMove:u,onSwipeCancel:m,onSwipeEnd:h,...x}=e,g=t1(nx,n),[p,v]=w.useState(null),y=pi(t,k=>v(k)),b=w.useRef(null),j=w.useRef(null),C=s||g.duration,E=w.useRef(0),S=w.useRef(C),N=w.useRef(0),{onToastAdd:I,onToastRemove:D}=g,T=nu(()=>{var L;(p==null?void 0:p.contains(document.activeElement))&&((L=g.viewport)==null||L.focus()),o()}),A=w.useCallback(k=>{!k||k===1/0||(window.clearTimeout(N.current),E.current=new Date().getTime(),N.current=window.setTimeout(T,k))},[T]);w.useEffect(()=>{const k=g.viewport;if(k){const L=()=>{A(S.current),d==null||d()},$=()=>{const M=new Date().getTime()-E.current;S.current=S.current-M,window.clearTimeout(N.current),c==null||c()};return k.addEventListener(l5,$),k.addEventListener(c5,L),()=>{k.removeEventListener(l5,$),k.removeEventListener(c5,L)}}},[g.viewport,C,c,d,A]),w.useEffect(()=>{i&&!g.isClosePausedRef.current&&A(C)},[i,C,g.isClosePausedRef,A]),w.useEffect(()=>(I(),()=>D()),[I,D]);const _=w.useMemo(()=>p?tF(p):null,[p]);return g.viewport?r.jsxs(r.Fragment,{children:[_&&r.jsx(nG,{__scopeToast:n,role:"status","aria-live":a==="foreground"?"assertive":"polite","aria-atomic":!0,children:_}),r.jsx(eG,{scope:n,onClose:T,children:zo.createPortal(r.jsx(_A.ItemSlot,{scope:n,children:r.jsx(LH,{asChild:!0,onEscapeKeyDown:rn(l,()=>{g.isFocusedToastEscapeKeyDownRef.current||T(),g.isFocusedToastEscapeKeyDownRef.current=!1}),children:r.jsx(Nn.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":i?"open":"closed","data-swipe-direction":g.swipeDirection,...x,ref:y,style:{userSelect:"none",touchAction:"none",...e.style},onKeyDown:rn(e.onKeyDown,k=>{k.key==="Escape"&&(l==null||l(k.nativeEvent),k.nativeEvent.defaultPrevented||(g.isFocusedToastEscapeKeyDownRef.current=!0,T()))}),onPointerDown:rn(e.onPointerDown,k=>{k.button===0&&(b.current={x:k.clientX,y:k.clientY})}),onPointerMove:rn(e.onPointerMove,k=>{if(!b.current)return;const L=k.clientX-b.current.x,$=k.clientY-b.current.y,M=!!j.current,B=["left","right"].includes(g.swipeDirection),U=["left","up"].includes(g.swipeDirection)?Math.min:Math.max,W=B?U(0,L):0,q=B?0:U(0,$),R=k.pointerType==="touch"?10:2,V={x:W,y:q},G={originalEvent:k,delta:V};M?(j.current=V,Fg(QH,u,G,{discrete:!1})):BP(V,g.swipeDirection,R)?(j.current=V,Fg(XH,f,G,{discrete:!1}),k.target.setPointerCapture(k.pointerId)):(Math.abs(L)>R||Math.abs($)>R)&&(b.current=null)}),onPointerUp:rn(e.onPointerUp,k=>{const L=j.current,$=k.target;if($.hasPointerCapture(k.pointerId)&&$.releasePointerCapture(k.pointerId),j.current=null,b.current=null,L){const M=k.currentTarget,B={originalEvent:k,delta:L};BP(L,g.swipeDirection,g.swipeThreshold)?Fg(ZH,h,B,{discrete:!0}):Fg(JH,m,B,{discrete:!0}),M.addEventListener("click",U=>U.preventDefault(),{once:!0})}})})})}),g.viewport)})]}):null}),nG=e=>{const{__scopeToast:t,children:n,...a}=e,s=t1(nx,t),[i,o]=w.useState(!1),[l,c]=w.useState(!1);return iG(()=>o(!0)),w.useEffect(()=>{const d=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(d)},[]),l?null:r.jsx(UR,{asChild:!0,children:r.jsx(kA,{...a,children:i&&r.jsxs(r.Fragment,{children:[s.label," ",n]})})})},aG="ToastTitle",YR=w.forwardRef((e,t)=>{const{__scopeToast:n,...a}=e;return r.jsx(Nn.div,{...a,ref:t})});YR.displayName=aG;var sG="ToastDescription",XR=w.forwardRef((e,t)=>{const{__scopeToast:n,...a}=e;return r.jsx(Nn.div,{...a,ref:t})});XR.displayName=sG;var QR="ToastAction",JR=w.forwardRef((e,t)=>{const{altText:n,...a}=e;return n.trim()?r.jsx(eF,{altText:n,asChild:!0,children:r.jsx(LA,{...a,ref:t})}):(console.error(`Invalid prop \`altText\` supplied to \`${QR}\`. Expected non-empty \`string\`.`),null)});JR.displayName=QR;var ZR="ToastClose",LA=w.forwardRef((e,t)=>{const{__scopeToast:n,...a}=e,s=tG(ZR,n);return r.jsx(eF,{asChild:!0,children:r.jsx(Nn.button,{type:"button",...a,ref:t,onClick:rn(e.onClick,s.onClose)})})});LA.displayName=ZR;var eF=w.forwardRef((e,t)=>{const{__scopeToast:n,altText:a,...s}=e;return r.jsx(Nn.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":a||void 0,...s,ref:t})});function tF(e){const t=[];return Array.from(e.childNodes).forEach(a=>{if(a.nodeType===a.TEXT_NODE&&a.textContent&&t.push(a.textContent),oG(a)){const s=a.ariaHidden||a.hidden||a.style.display==="none",i=a.dataset.radixToastAnnounceExclude==="";if(!s)if(i){const o=a.dataset.radixToastAnnounceAlt;o&&t.push(o)}else t.push(...tF(a))}}),t}function Fg(e,t,n,{discrete:a}){const s=n.originalEvent.currentTarget,i=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:n});t&&s.addEventListener(e,t,{once:!0}),a?FR(s,i):s.dispatchEvent(i)}var BP=(e,t,n=0)=>{const a=Math.abs(e.x),s=Math.abs(e.y),i=a>s;return t==="left"||t==="right"?i&&a>n:!i&&s>n};function iG(e=()=>{}){const t=nu(e);Mc(()=>{let n=0,a=0;return n=window.requestAnimationFrame(()=>a=window.requestAnimationFrame(t)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(a)}},[t])}function oG(e){return e.nodeType===e.ELEMENT_NODE}function lG(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:a=>{const s=a.tagName==="INPUT"&&a.type==="hidden";return a.disabled||a.hidden||s?NodeFilter.FILTER_SKIP:a.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function Uw(e){const t=document.activeElement;return e.some(n=>n===t?!0:(n.focus(),document.activeElement!==t))}var cG=qR,rF=HR,nF=KR,aF=YR,sF=XR,iF=JR,oF=LA;function lF(e){var t,n,a="";if(typeof e=="string"||typeof e=="number")a+=e;else if(typeof e=="object")if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=lF(e[t]))&&(a&&(a+=" "),a+=n);else for(t in e)e[t]&&(a&&(a+=" "),a+=t);return a}function cF(){for(var e,t,n=0,a="";n<arguments.length;)(e=arguments[n++])&&(t=lF(e))&&(a&&(a+=" "),a+=t);return a}const zP=e=>typeof e=="boolean"?"".concat(e):e===0?"0":e,UP=cF,r1=(e,t)=>n=>{var a;if((t==null?void 0:t.variants)==null)return UP(e,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:s,defaultVariants:i}=t,o=Object.keys(s).map(d=>{const f=n==null?void 0:n[d],u=i==null?void 0:i[d];if(f===null)return null;const m=zP(f)||zP(u);return s[d][m]}),l=n&&Object.entries(n).reduce((d,f)=>{let[u,m]=f;return m===void 0||(d[u]=m),d},{}),c=t==null||(a=t.compoundVariants)===null||a===void 0?void 0:a.reduce((d,f)=>{let{class:u,className:m,...h}=f;return Object.entries(h).every(x=>{let[g,p]=x;return Array.isArray(p)?p.includes({...i,...l}[g]):{...i,...l}[g]===p})?[...d,u,m]:d},[]);return UP(e,o,c,n==null?void 0:n.class,n==null?void 0:n.className)};var dG={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const uG=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),fG=(e,t)=>{const n=w.forwardRef(({color:a="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:o,children:l,...c},d)=>w.createElement("svg",{ref:d,...dG,width:s,height:s,stroke:a,strokeWidth:o?Number(i)*24/Number(s):i,className:`lucide lucide-${uG(e)}`,...c},[...t.map(([f,u])=>w.createElement(f,u)),...(Array.isArray(l)?l:[l])||[]]));return n.displayName=`${e}`,n};var ft=fG;const Td=ft("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]),Ff=ft("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),Ts=ft("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),jo=ft("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]),mG=ft("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),wo=ft("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]),Yn=ft("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]),dF=ft("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]),No=ft("Brain",[["path",{d:"M9.5 2A2.5 2.5 0 0 1 12 4.5v15a2.5 2.5 0 0 1-4.96.44 2.5 2.5 0 0 1-2.96-3.08 3 3 0 0 1-.34-5.58 2.5 2.5 0 0 1 1.32-4.24 2.5 2.5 0 0 1 1.98-3A2.5 2.5 0 0 1 9.5 2Z",key:"1mhkh5"}],["path",{d:"M14.5 2A2.5 2.5 0 0 0 12 4.5v15a2.5 2.5 0 0 0 4.96.44 2.5 2.5 0 0 0 2.96-3.08 3 3 0 0 0 .34-5.58 2.5 2.5 0 0 0-1.32-4.24 2.5 2.5 0 0 0-1.98-3A2.5 2.5 0 0 0 14.5 2Z",key:"1d6s00"}]]),my=ft("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]),au=ft("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]),Mr=ft("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]),ul=ft("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]),$r=ft("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["polyline",{points:"22 4 12 14.01 9 11.01",key:"6xbx8j"}]]),RA=ft("CheckSquare",[["polyline",{points:"9 11 12 14 22 4",key:"19ybtz"}],["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11",key:"1jnkn4"}]]),n1=ft("Check",[["polyline",{points:"20 6 9 17 4 12",key:"10jjfj"}]]),uF=ft("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),hG=ft("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]),su=ft("ClipboardCheck",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"m9 14 2 2 4-4",key:"df797q"}]]),u5=ft("Clipboard",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}]]),er=ft("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),pG=ft("Cog",[["path",{d:"M12 20a8 8 0 1 0 0-16 8 8 0 0 0 0 16Z",key:"sobvz5"}],["path",{d:"M12 14a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z",key:"11i496"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 22v-2",key:"1osdcq"}],["path",{d:"m17 20.66-1-1.73",key:"eq3orb"}],["path",{d:"M11 10.27 7 3.34",key:"16pf9h"}],["path",{d:"m20.66 17-1.73-1",key:"sg0v6f"}],["path",{d:"m3.34 7 1.73 1",key:"1ulond"}],["path",{d:"M14 12h8",key:"4f43i9"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"m20.66 7-1.73 1",key:"1ow05n"}],["path",{d:"m3.34 17 1.73-1",key:"nuk764"}],["path",{d:"m17 3.34-1 1.73",key:"2wel8s"}],["path",{d:"m11 13.73-4 6.93",key:"794ttg"}]]),FA=ft("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]),Ga=ft("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]),Mt=ft("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]),ms=ft("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),vG=ft("ExternalLink",[["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}],["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["line",{x1:"10",x2:"21",y1:"14",y2:"3",key:"18c3s4"}]]),Sl=ft("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),D0=ft("FileCheck",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]]),qa=ft("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]),hs=ft("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]),ax=ft("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"2",x2:"22",y1:"12",y2:"12",key:"1dnqot"}],["path",{d:"M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z",key:"nb9nel"}]]),xG=ft("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]),Vw=ft("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]),gG=ft("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]),Zf=ft("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]),yG=ft("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]),bG=ft("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),jG=ft("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),en=ft("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]),Cl=ft("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]),wG=ft("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]),nn=ft("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]),Ra=ft("Package",[["path",{d:"M16.5 9.4 7.55 4.24",key:"10qotr"}],["path",{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z",key:"yt0hxn"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["line",{x1:"12",x2:"12",y1:"22",y2:"12",key:"a4e8g8"}]]),fF=ft("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",key:"1xcu5"}],["circle",{cx:"17.5",cy:"10.5",r:".5",key:"736e4u"}],["circle",{cx:"8.5",cy:"7.5",r:".5",key:"clrty"}],["circle",{cx:"6.5",cy:"12.5",r:".5",key:"1s4xz9"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]),NG=ft("Pause",[["rect",{width:"4",height:"16",x:"6",y:"4",key:"iffhe4"}],["rect",{width:"4",height:"16",x:"14",y:"4",key:"sjin7j"}]]),Br=ft("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]),Mg=ft("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]),sv=ft("Percent",[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]]),Mm=ft("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]),qw=ft("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]),Nt=ft("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),hu=ft("Printer",[["polyline",{points:"6 9 6 2 18 2 18 9",key:"1306q4"}],["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["rect",{width:"12",height:"8",x:"6",y:"14",key:"5ipwut"}]]),mF=ft("QrCode",[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]]),Pn=ft("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1-2-1Z",key:"wqdwcb"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17V7",key:"pyj7ub"}]]),f5=ft("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),Pr=ft("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]),Jn=ft("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),Oo=ft("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]),sx=ft("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),MA=ft("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z",key:"3xmgem"}]]),$A=ft("Tag",[["path",{d:"M12 2H2v10l9.29 9.29c.94.94 2.48.94 3.42 0l6.58-6.58c.94-.94.94-2.48 0-3.42L12 2Z",key:"14b2ls"}],["path",{d:"M7 7h.01",key:"7u93v4"}]]),fs=ft("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]),SG=ft("ThumbsDown",[["path",{d:"M17 14V2",key:"8ymqnk"}],["path",{d:"M9 18.12 10 14H4.17a2 2 0 0 1-1.92-2.56l2.33-8A2 2 0 0 1 6.5 2H20a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-2.76a2 2 0 0 0-1.79 1.11L12 22h0a3.13 3.13 0 0 1-3-3.88Z",key:"s6e0r"}]]),CG=ft("ThumbsUp",[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2h0a3.13 3.13 0 0 1 3 3.88Z",key:"y3tblf"}]]),wn=ft("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),Mf=ft("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]),Ot=ft("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),is=ft("Truck",[["path",{d:"M10 17h4V5H2v12h3",key:"1jq12e"}],["path",{d:"M20 17h2v-3.34a4 4 0 0 0-1.17-2.83L19 9h-5",key:"1xb3ft"}],["path",{d:"M14 17h1",key:"nufu4t"}],["circle",{cx:"7.5",cy:"17.5",r:"2.5",key:"a7aife"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]]),BA=ft("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),wa=ft("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),$n=ft("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),hy=ft("Video",[["path",{d:"m22 8-6 4 6 4V8Z",key:"50v9me"}],["rect",{width:"14",height:"12",x:"2",y:"6",rx:"2",ry:"2",key:"1rqjg6"}]]),VP=ft("Webhook",[["path",{d:"M18 16.98h-5.99c-1.1 0-1.95.94-2.48 1.9A4 4 0 0 1 2 17c.01-.7.2-1.4.57-2",key:"q3hayz"}],["path",{d:"m6 17 3.13-5.78c.53-.97.1-2.18-.5-3.1a4 4 0 1 1 6.89-4.06",key:"1go1hn"}],["path",{d:"m12 6 3.13 5.73C15.66 12.7 16.9 13 18 13a4 4 0 0 1 0 8",key:"qlwsc0"}]]),Id=ft("Wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]]),di=ft("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),$t=ft("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),AG=ft("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]);function EG(){for(var e=0,t,n,a="";e<arguments.length;)(t=arguments[e++])&&(n=hF(t))&&(a&&(a+=" "),a+=n);return a}function hF(e){if(typeof e=="string")return e;for(var t,n="",a=0;a<e.length;a++)e[a]&&(t=hF(e[a]))&&(n&&(n+=" "),n+=t);return n}var zA="-";function PG(e){var t=IG(e),n=e.conflictingClassGroups,a=e.conflictingClassGroupModifiers,s=a===void 0?{}:a;function i(l){var c=l.split(zA);return c[0]===""&&c.length!==1&&c.shift(),pF(c,t)||TG(l)}function o(l,c){var d=n[l]||[];return c&&s[l]?[].concat(d,s[l]):d}return{getClassGroupId:i,getConflictingClassGroupIds:o}}function pF(e,t){var o;if(e.length===0)return t.classGroupId;var n=e[0],a=t.nextPart.get(n),s=a?pF(e.slice(1),a):void 0;if(s)return s;if(t.validators.length!==0){var i=e.join(zA);return(o=t.validators.find(function(l){var c=l.validator;return c(i)}))==null?void 0:o.classGroupId}}var qP=/^\[(.+)\]$/;function TG(e){if(qP.test(e)){var t=qP.exec(e)[1],n=t==null?void 0:t.substring(0,t.indexOf(":"));if(n)return"arbitrary.."+n}}function IG(e){var t=e.theme,n=e.prefix,a={nextPart:new Map,validators:[]},s=kG(Object.entries(e.classGroups),n);return s.forEach(function(i){var o=i[0],l=i[1];m5(l,a,o,t)}),a}function m5(e,t,n,a){e.forEach(function(s){if(typeof s=="string"){var i=s===""?t:WP(t,s);i.classGroupId=n;return}if(typeof s=="function"){if(DG(s)){m5(s(a),t,n,a);return}t.validators.push({validator:s,classGroupId:n});return}Object.entries(s).forEach(function(o){var l=o[0],c=o[1];m5(c,WP(t,l),n,a)})})}function WP(e,t){var n=e;return t.split(zA).forEach(function(a){n.nextPart.has(a)||n.nextPart.set(a,{nextPart:new Map,validators:[]}),n=n.nextPart.get(a)}),n}function DG(e){return e.isThemeGetter}function kG(e,t){return t?e.map(function(n){var a=n[0],s=n[1],i=s.map(function(o){return typeof o=="string"?t+o:typeof o=="object"?Object.fromEntries(Object.entries(o).map(function(l){var c=l[0],d=l[1];return[t+c,d]})):o});return[a,i]}):e}function OG(e){if(e<1)return{get:function(){},set:function(){}};var t=0,n=new Map,a=new Map;function s(i,o){n.set(i,o),t++,t>e&&(t=0,a=n,n=new Map)}return{get:function(o){var l=n.get(o);if(l!==void 0)return l;if((l=a.get(o))!==void 0)return s(o,l),l},set:function(o,l){n.has(o)?n.set(o,l):s(o,l)}}}var vF="!";function _G(e){var t=e.separator||":",n=t.length===1,a=t[0],s=t.length;return function(o){for(var l=[],c=0,d=0,f,u=0;u<o.length;u++){var m=o[u];if(c===0){if(m===a&&(n||o.slice(u,u+s)===t)){l.push(o.slice(d,u)),d=u+s;continue}if(m==="/"){f=u;continue}}m==="["?c++:m==="]"&&c--}var h=l.length===0?o:o.substring(d),x=h.startsWith(vF),g=x?h.substring(1):h,p=f&&f>d?f-d:void 0;return{modifiers:l,hasImportantModifier:x,baseClassName:g,maybePostfixModifierPosition:p}}}function LG(e){if(e.length<=1)return e;var t=[],n=[];return e.forEach(function(a){var s=a[0]==="[";s?(t.push.apply(t,n.sort().concat([a])),n=[]):n.push(a)}),t.push.apply(t,n.sort()),t}function RG(e){return{cache:OG(e.cacheSize),splitModifiers:_G(e),...PG(e)}}var FG=/\s+/;function MG(e,t){var n=t.splitModifiers,a=t.getClassGroupId,s=t.getConflictingClassGroupIds,i=new Set;return e.trim().split(FG).map(function(o){var l=n(o),c=l.modifiers,d=l.hasImportantModifier,f=l.baseClassName,u=l.maybePostfixModifierPosition,m=a(u?f.substring(0,u):f),h=!!u;if(!m){if(!u)return{isTailwindClass:!1,originalClassName:o};if(m=a(f),!m)return{isTailwindClass:!1,originalClassName:o};h=!1}var x=LG(c).join(":"),g=d?x+vF:x;return{isTailwindClass:!0,modifierId:g,classGroupId:m,originalClassName:o,hasPostfixModifier:h}}).reverse().filter(function(o){if(!o.isTailwindClass)return!0;var l=o.modifierId,c=o.classGroupId,d=o.hasPostfixModifier,f=l+c;return i.has(f)?!1:(i.add(f),s(c,d).forEach(function(u){return i.add(l+u)}),!0)}).reverse().map(function(o){return o.originalClassName}).join(" ")}function $G(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var a,s,i,o=l;function l(d){var f=t[0],u=t.slice(1),m=u.reduce(function(h,x){return x(h)},f());return a=RG(m),s=a.cache.get,i=a.cache.set,o=c,c(d)}function c(d){var f=s(d);if(f)return f;var u=MG(d,a);return i(d,u),u}return function(){return o(EG.apply(null,arguments))}}function Gr(e){var t=function(a){return a[e]||[]};return t.isThemeGetter=!0,t}var xF=/^\[(?:([a-z-]+):)?(.+)\]$/i,BG=/^\d+\/\d+$/,zG=new Set(["px","full","screen"]),UG=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,VG=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,qG=/^-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/;function ki(e){return Dd(e)||zG.has(e)||BG.test(e)||h5(e)}function h5(e){return pu(e,"length",XG)}function WG(e){return pu(e,"size",gF)}function HG(e){return pu(e,"position",gF)}function GG(e){return pu(e,"url",QG)}function $g(e){return pu(e,"number",Dd)}function Dd(e){return!Number.isNaN(Number(e))}function KG(e){return e.endsWith("%")&&Dd(e.slice(0,-1))}function Hh(e){return HP(e)||pu(e,"number",HP)}function nr(e){return xF.test(e)}function Gh(){return!0}function Jl(e){return UG.test(e)}function YG(e){return pu(e,"",JG)}function pu(e,t,n){var a=xF.exec(e);return a?a[1]?a[1]===t:n(a[2]):!1}function XG(e){return VG.test(e)}function gF(){return!1}function QG(e){return e.startsWith("url(")}function HP(e){return Number.isInteger(Number(e))}function JG(e){return qG.test(e)}function ZG(){var e=Gr("colors"),t=Gr("spacing"),n=Gr("blur"),a=Gr("brightness"),s=Gr("borderColor"),i=Gr("borderRadius"),o=Gr("borderSpacing"),l=Gr("borderWidth"),c=Gr("contrast"),d=Gr("grayscale"),f=Gr("hueRotate"),u=Gr("invert"),m=Gr("gap"),h=Gr("gradientColorStops"),x=Gr("gradientColorStopPositions"),g=Gr("inset"),p=Gr("margin"),v=Gr("opacity"),y=Gr("padding"),b=Gr("saturate"),j=Gr("scale"),C=Gr("sepia"),E=Gr("skew"),S=Gr("space"),N=Gr("translate"),I=function(){return["auto","contain","none"]},D=function(){return["auto","hidden","clip","visible","scroll"]},T=function(){return["auto",nr,t]},A=function(){return[nr,t]},_=function(){return["",ki]},k=function(){return["auto",Dd,nr]},L=function(){return["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"]},$=function(){return["solid","dashed","dotted","double","none"]},M=function(){return["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity","plus-lighter"]},B=function(){return["start","end","center","between","around","evenly","stretch"]},U=function(){return["","0",nr]},W=function(){return["auto","avoid","all","avoid-page","page","left","right","column"]},q=function(){return[Dd,$g]},R=function(){return[Dd,nr]};return{cacheSize:500,theme:{colors:[Gh],spacing:[ki],blur:["none","",Jl,nr],brightness:q(),borderColor:[e],borderRadius:["none","","full",Jl,nr],borderSpacing:A(),borderWidth:_(),contrast:q(),grayscale:U(),hueRotate:R(),invert:U(),gap:A(),gradientColorStops:[e],gradientColorStopPositions:[KG,h5],inset:T(),margin:T(),opacity:q(),padding:A(),saturate:q(),scale:q(),sepia:U(),skew:R(),space:A(),translate:A()},classGroups:{aspect:[{aspect:["auto","square","video",nr]}],container:["container"],columns:[{columns:[Jl]}],"break-after":[{"break-after":W()}],"break-before":[{"break-before":W()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none"]}],clear:[{clear:["left","right","both","none"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[].concat(L(),[nr])}],overflow:[{overflow:D()}],"overflow-x":[{"overflow-x":D()}],"overflow-y":[{"overflow-y":D()}],overscroll:[{overscroll:I()}],"overscroll-x":[{"overscroll-x":I()}],"overscroll-y":[{"overscroll-y":I()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[g]}],"inset-x":[{"inset-x":[g]}],"inset-y":[{"inset-y":[g]}],start:[{start:[g]}],end:[{end:[g]}],top:[{top:[g]}],right:[{right:[g]}],bottom:[{bottom:[g]}],left:[{left:[g]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Hh]}],basis:[{basis:T()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",nr]}],grow:[{grow:U()}],shrink:[{shrink:U()}],order:[{order:["first","last","none",Hh]}],"grid-cols":[{"grid-cols":[Gh]}],"col-start-end":[{col:["auto",{span:["full",Hh]},nr]}],"col-start":[{"col-start":k()}],"col-end":[{"col-end":k()}],"grid-rows":[{"grid-rows":[Gh]}],"row-start-end":[{row:["auto",{span:[Hh]},nr]}],"row-start":[{"row-start":k()}],"row-end":[{"row-end":k()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",nr]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",nr]}],gap:[{gap:[m]}],"gap-x":[{"gap-x":[m]}],"gap-y":[{"gap-y":[m]}],"justify-content":[{justify:["normal"].concat(B())}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal"].concat(B(),["baseline"])}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[].concat(B(),["baseline"])}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[y]}],px:[{px:[y]}],py:[{py:[y]}],ps:[{ps:[y]}],pe:[{pe:[y]}],pt:[{pt:[y]}],pr:[{pr:[y]}],pb:[{pb:[y]}],pl:[{pl:[y]}],m:[{m:[p]}],mx:[{mx:[p]}],my:[{my:[p]}],ms:[{ms:[p]}],me:[{me:[p]}],mt:[{mt:[p]}],mr:[{mr:[p]}],mb:[{mb:[p]}],ml:[{ml:[p]}],"space-x":[{"space-x":[S]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[S]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit",nr,t]}],"min-w":[{"min-w":["min","max","fit",nr,ki]}],"max-w":[{"max-w":["0","none","full","min","max","fit","prose",{screen:[Jl]},Jl,nr]}],h:[{h:[nr,t,"auto","min","max","fit"]}],"min-h":[{"min-h":["min","max","fit",nr,ki]}],"max-h":[{"max-h":[nr,t,"min","max","fit"]}],"font-size":[{text:["base",Jl,h5]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",$g]}],"font-family":[{font:[Gh]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",nr]}],"line-clamp":[{"line-clamp":["none",Dd,$g]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",nr,ki]}],"list-image":[{"list-image":["none",nr]}],"list-style-type":[{list:["none","disc","decimal",nr]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[v]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[v]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[].concat($(),["wavy"])}],"text-decoration-thickness":[{decoration:["auto","from-font",ki]}],"underline-offset":[{"underline-offset":["auto",nr,ki]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],indent:[{indent:A()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",nr]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",nr]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[v]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[].concat(L(),[HG])}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",WG]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},GG]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[x]}],"gradient-via-pos":[{via:[x]}],"gradient-to-pos":[{to:[x]}],"gradient-from":[{from:[h]}],"gradient-via":[{via:[h]}],"gradient-to":[{to:[h]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[v]}],"border-style":[{border:[].concat($(),["hidden"])}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[v]}],"divide-style":[{divide:$()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:[""].concat($())}],"outline-offset":[{"outline-offset":[nr,ki]}],"outline-w":[{outline:[ki]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:_()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[v]}],"ring-offset-w":[{"ring-offset":[ki]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",Jl,YG]}],"shadow-color":[{shadow:[Gh]}],opacity:[{opacity:[v]}],"mix-blend":[{"mix-blend":M()}],"bg-blend":[{"bg-blend":M()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[a]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",Jl,nr]}],grayscale:[{grayscale:[d]}],"hue-rotate":[{"hue-rotate":[f]}],invert:[{invert:[u]}],saturate:[{saturate:[b]}],sepia:[{sepia:[C]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[a]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[d]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[f]}],"backdrop-invert":[{"backdrop-invert":[u]}],"backdrop-opacity":[{"backdrop-opacity":[v]}],"backdrop-saturate":[{"backdrop-saturate":[b]}],"backdrop-sepia":[{"backdrop-sepia":[C]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",nr]}],duration:[{duration:R()}],ease:[{ease:["linear","in","out","in-out",nr]}],delay:[{delay:R()}],animate:[{animate:["none","spin","ping","pulse","bounce",nr]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[j]}],"scale-x":[{"scale-x":[j]}],"scale-y":[{"scale-y":[j]}],rotate:[{rotate:[Hh,nr]}],"translate-x":[{"translate-x":[N]}],"translate-y":[{"translate-y":[N]}],"skew-x":[{"skew-x":[E]}],"skew-y":[{"skew-y":[E]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",nr]}],accent:[{accent:["auto",e]}],appearance:["appearance-none"],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",nr]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":A()}],"scroll-mx":[{"scroll-mx":A()}],"scroll-my":[{"scroll-my":A()}],"scroll-ms":[{"scroll-ms":A()}],"scroll-me":[{"scroll-me":A()}],"scroll-mt":[{"scroll-mt":A()}],"scroll-mr":[{"scroll-mr":A()}],"scroll-mb":[{"scroll-mb":A()}],"scroll-ml":[{"scroll-ml":A()}],"scroll-p":[{"scroll-p":A()}],"scroll-px":[{"scroll-px":A()}],"scroll-py":[{"scroll-py":A()}],"scroll-ps":[{"scroll-ps":A()}],"scroll-pe":[{"scroll-pe":A()}],"scroll-pt":[{"scroll-pt":A()}],"scroll-pr":[{"scroll-pr":A()}],"scroll-pb":[{"scroll-pb":A()}],"scroll-pl":[{"scroll-pl":A()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","pinch-zoom","manipulation",{pan:["x","left","right","y","up","down"]}]}],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",nr]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[ki,$g]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}}var eK=$G(ZG);function He(...e){return eK(cF(e))}function De(e){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e)}function lt(e){return new Intl.DateTimeFormat("en-US",{year:"numeric",month:"short",day:"numeric"}).format(new Date(e))}function Wr(e,t){try{localStorage.setItem(e,JSON.stringify(t))}catch(n){console.error("Failed to save to localStorage:",n)}}function un(e,t){try{const n=localStorage.getItem(e);return n?JSON.parse(n):t}catch(n){return console.error("Failed to load from localStorage:",n),t}}function tK(e){try{localStorage.removeItem(e)}catch(t){console.error("Failed to remove from localStorage:",t)}}const rK=cG,yF=w.forwardRef(({className:e,...t},n)=>r.jsx(rF,{ref:n,className:He("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",e),...t}));yF.displayName=rF.displayName;const nK=r1("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),bF=w.forwardRef(({className:e,variant:t,...n},a)=>r.jsx(nF,{ref:a,className:He(nK({variant:t}),e),...n}));bF.displayName=nF.displayName;const aK=w.forwardRef(({className:e,...t},n)=>r.jsx(iF,{ref:n,className:He("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",e),...t}));aK.displayName=iF.displayName;const jF=w.forwardRef(({className:e,...t},n)=>r.jsx(oF,{ref:n,className:He("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",e),"toast-close":"",...t,children:r.jsx($t,{className:"h-4 w-4"})}));jF.displayName=oF.displayName;const wF=w.forwardRef(({className:e,...t},n)=>r.jsx(aF,{ref:n,className:He("text-sm font-semibold",e),...t}));wF.displayName=aF.displayName;const NF=w.forwardRef(({className:e,...t},n)=>r.jsx(sF,{ref:n,className:He("text-sm opacity-90",e),...t}));NF.displayName=sF.displayName;const sK=1,iK=1e6;let Ww=0;function oK(){return Ww=(Ww+1)%Number.MAX_SAFE_INTEGER,Ww.toString()}const Hw=new Map,GP=e=>{if(Hw.has(e))return;const t=setTimeout(()=>{Hw.delete(e),Ep({type:"REMOVE_TOAST",toastId:e})},iK);Hw.set(e,t)},lK=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,sK)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(n=>n.id===t.toast.id?{...n,...t.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=t;return n?GP(n):e.toasts.forEach(a=>{GP(a.id)}),{...e,toasts:e.toasts.map(a=>a.id===n||n===void 0?{...a,open:!1}:a)}}case"REMOVE_TOAST":return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(n=>n.id!==t.toastId)}}},k0=[];let O0={toasts:[]};function Ep(e){O0=lK(O0,e),k0.forEach(t=>{t(O0)})}function cK({...e}){const t=oK(),n=s=>Ep({type:"UPDATE_TOAST",toast:{...s,id:t}}),a=()=>Ep({type:"DISMISS_TOAST",toastId:t});return Ep({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:s=>{s||a()}}}),{id:t,dismiss:a,update:n}}function Ct(){const[e,t]=w.useState(O0);return w.useEffect(()=>(k0.push(t),()=>{const n=k0.indexOf(t);n>-1&&k0.splice(n,1)}),[e]),{...e,toast:cK,dismiss:n=>Ep({type:"DISMISS_TOAST",toastId:n})}}function dK(){const{toasts:e}=Ct();return r.jsxs(rK,{children:[e.map(function({id:t,title:n,description:a,action:s,...i}){return r.jsxs(bF,{...i,children:[r.jsxs("div",{className:"grid gap-1",children:[n&&r.jsx(wF,{children:n}),a&&r.jsx(NF,{children:a})]}),s,r.jsx(jF,{})]},t)}),r.jsx(yF,{})]})}var Vi=(e=>(e.ADMIN="admin",e.MANAGER="manager",e.SALES="sales",e.SERVICE="service",e.USER="user",e))(Vi||{}),ei=(e=>(e.TEXT="text",e.NUMBER="number",e.DATE="date",e.BOOLEAN="boolean",e.SELECT="select",e.MULTISELECT="multiselect",e))(ei||{}),ha=(e=>(e.NEW="new",e.CONTACTED="contacted",e.QUALIFIED="qualified",e.PROPOSAL="proposal",e.NEGOTIATION="negotiation",e.CLOSED_WON="closed_won",e.CLOSED_LOST="closed_lost",e))(ha||{}),vt=(e=>(e.RV="rv",e.MOTORHOME="motorhome",e.TRAVEL_TRAILER="travel_trailer",e.FIFTH_WHEEL="fifth_wheel",e.TOY_HAULER="toy_hauler",e.SINGLE_WIDE="single_wide",e.DOUBLE_WIDE="double_wide",e.TRIPLE_WIDE="triple_wide",e.PARK_MODEL="park_model",e.MODULAR_HOME="modular_home",e))(vt||{}),Yt=(e=>(e.AVAILABLE="available",e.RESERVED="reserved",e.SOLD="sold",e.SERVICE="service",e.DELIVERED="delivered",e))(Yt||{}),ti=(e=>(e.DRAFT="draft",e.SENT="sent",e.VIEWED="viewed",e.ACCEPTED="accepted",e.REJECTED="rejected",e.EXPIRED="expired",e))(ti||{}),kd=(e=>(e.PURCHASE="purchase",e.LEASE="lease",e.SERVICE="service",e.WARRANTY="warranty",e))(kd||{}),Fi=(e=>(e.DRAFT="draft",e.PENDING="pending",e.SIGNED="signed",e.ACTIVE="active",e.EXPIRED="expired",e.CANCELLED="cancelled",e))(Fi||{}),Qr=(e=>(e.LOW="low",e.MEDIUM="medium",e.HIGH="high",e.URGENT="urgent",e))(Qr||{}),ar=(e=>(e.OPEN="open",e.IN_PROGRESS="in_progress",e.WAITING_PARTS="waiting_parts",e.COMPLETED="completed",e.CANCELLED="cancelled",e))(ar||{}),Ut=(e=>(e.SCHEDULED="scheduled",e.IN_TRANSIT="in_transit",e.DELIVERED="delivered",e.CANCELLED="cancelled",e))(Ut||{}),mr=(e=>(e.FLAT="flat",e.PERCENTAGE="percentage",e.TIERED="tiered",e))(mr||{}),Rt=(e=>(e.PENDING="pending",e.APPROVED="approved",e.PAID="paid",e.CANCELLED="cancelled",e))(Rt||{}),Bt=(e=>(e.DRAFT="draft",e.SENT="sent",e.VIEWED="viewed",e.PAID="paid",e.OVERDUE="overdue",e.CANCELLED="cancelled",e))(Bt||{}),ai=(e=>(e.CASH="cash",e.CHECK="check",e.CREDIT_CARD="credit_card",e.BANK_TRANSFER="bank_transfer",e.FINANCING="financing",e))(ai||{}),Wi=(e=>(e.PENDING="pending",e.PROCESSING="processing",e.COMPLETED="completed",e.FAILED="failed",e.REFUNDED="refunded",e))(Wi||{}),Rr=(e=>(e.SALES="sales",e.INVENTORY="inventory",e.SERVICE="service",e.FINANCIAL="financial",e.CUSTOM="custom",e))(Rr||{});const SF=w.createContext(void 0);function $m(){const e=w.useContext(SF);if(e===void 0)throw new Error("useAuth must be used within an AuthProvider");return e}function uK({children:e}){const[t,n]=w.useState(null),[a,s]=w.useState(!0);w.useEffect(()=>{un("auth_token",null)&&n({id:"1",email:"admin@renterinsight.com",name:"Admin User",role:Vi.ADMIN,tenantId:"tenant-1",permissions:[{id:"1",name:"All Access",resource:"*",action:"*"}],createdAt:new Date,updatedAt:new Date}),s(!1)},[]);const d={user:t,login:async(f,u)=>{s(!0);try{if(await new Promise(m=>setTimeout(m,1e3)),f==="admin@renterinsight.com"&&u==="password"){const m={id:"1",email:f,name:"Admin User",role:Vi.ADMIN,tenantId:"tenant-1",permissions:[{id:"1",name:"All Access",resource:"*",action:"*"}],createdAt:new Date,updatedAt:new Date};n(m),Wr("auth_token","mock-token")}else throw new Error("Invalid credentials")}catch(m){throw console.error("Login error:",m),new Error("Login failed")}finally{s(!1)}},logout:()=>{n(null),tK("auth_token")},isLoading:a,hasPermission:(f,u)=>t?t.permissions.some(m=>(m.resource==="*"||m.resource===f)&&(m.action==="*"||m.action===u)):!1,hasRole:f=>t?t.role===f||t.role===Vi.ADMIN:!1};return r.jsx(SF.Provider,{value:d,children:e})}const CF=w.createContext(void 0);function vu(){const e=w.useContext(CF);if(e===void 0)throw new Error("useTenant must be used within a TenantProvider");return e}function fK({children:e}){const[t,n]=w.useState(null),[a,s]=w.useState([]);w.useEffect(()=>{const u={id:"tenant-1",name:"Demo RV Dealership",domain:"demo.renterinsight.com",settings:{timezone:"America/New_York",currency:"USD",dateFormat:"MM/dd/yyyy",businessHours:{monday:{open:"09:00",close:"18:00",closed:!1},tuesday:{open:"09:00",close:"18:00",closed:!1},wednesday:{open:"09:00",close:"18:00",closed:!1},thursday:{open:"09:00",close:"18:00",closed:!1},friday:{open:"09:00",close:"18:00",closed:!1},saturday:{open:"09:00",close:"17:00",closed:!1},sunday:{open:"12:00",close:"17:00",closed:!1}},features:{crm:!0,inventory:!0,quotes:!0,agreements:!0,service:!0,delivery:!0,commissions:!0,portal:!0,invoices:!0,reports:!0}},customFields:[],branding:{primaryColor:"#3b82f6",secondaryColor:"#64748b",fontFamily:"Inter"},createdAt:new Date,updatedAt:new Date};n(u),s(u.customFields)},[]);const f={tenant:t,customFields:a,getCustomFields:(u,m)=>a.filter(h=>h.module===u&&(m?h.section===m:!0)),updateTenantSettings:async u=>{if(!t)return;const m={...t,settings:{...t.settings,...u},updatedAt:new Date};n(m)},addCustomField:async u=>{const m={...u,id:Math.random().toString(36).substr(2,9)};s(h=>[...h,m])},updateCustomField:async(u,m)=>{s(h=>h.map(x=>x.id===u?{...x,...m}:x))},deleteCustomField:async u=>{s(m=>m.filter(h=>h.id!==u))}};return r.jsx(CF.Provider,{value:f,children:e})}const mK={theme:"system",setTheme:()=>null},hK=w.createContext(mK);function pK({children:e,defaultTheme:t="system",storageKey:n="vite-ui-theme",...a}){const[s,i]=w.useState(()=>localStorage.getItem(n)||t);w.useEffect(()=>{const l=window.document.documentElement;if(l.classList.remove("light","dark"),s==="system"){const c=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";l.classList.add(c);return}l.classList.add(s)},[s]);const o={theme:s,setTheme:l=>{localStorage.setItem(n,l),i(l)}};return r.jsx(hK.Provider,{...a,value:o,children:e})}var vK=Object.defineProperty,xK=(e,t,n)=>t in e?vK(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Gw=(e,t,n)=>(xK(e,typeof t!="symbol"?t+"":t,n),n);let gK=class{constructor(){Gw(this,"current",this.detect()),Gw(this,"handoffState","pending"),Gw(this,"currentId",0)}set(t){this.current!==t&&(this.handoffState="pending",this.currentId=0,this.current=t)}reset(){this.set(this.detect())}nextId(){return++this.currentId}get isServer(){return this.current==="server"}get isClient(){return this.current==="client"}detect(){return typeof window>"u"||typeof document>"u"?"server":"client"}handoff(){this.handoffState==="pending"&&(this.handoffState="complete")}get isHandoffComplete(){return this.handoffState==="complete"}},pl=new gK,vi=(e,t)=>{pl.isServer?w.useEffect(e,t):w.useLayoutEffect(e,t)};function vl(e){let t=w.useRef(e);return vi(()=>{t.current=e},[e]),t}let an=function(e){let t=vl(e);return pe.useCallback((...n)=>t.current(...n),[t])};function a1(e){typeof queueMicrotask=="function"?queueMicrotask(e):Promise.resolve().then(e).catch(t=>setTimeout(()=>{throw t}))}function xu(){let e=[],t={addEventListener(n,a,s,i){return n.addEventListener(a,s,i),t.add(()=>n.removeEventListener(a,s,i))},requestAnimationFrame(...n){let a=requestAnimationFrame(...n);return t.add(()=>cancelAnimationFrame(a))},nextFrame(...n){return t.requestAnimationFrame(()=>t.requestAnimationFrame(...n))},setTimeout(...n){let a=setTimeout(...n);return t.add(()=>clearTimeout(a))},microTask(...n){let a={current:!0};return a1(()=>{a.current&&n[0]()}),t.add(()=>{a.current=!1})},style(n,a,s){let i=n.style.getPropertyValue(a);return Object.assign(n.style,{[a]:s}),this.add(()=>{Object.assign(n.style,{[a]:i})})},group(n){let a=xu();return n(a),this.add(()=>a.dispose())},add(n){return e.push(n),()=>{let a=e.indexOf(n);if(a>=0)for(let s of e.splice(a,1))s()}},dispose(){for(let n of e.splice(0))n()}};return t}function UA(){let[e]=w.useState(xu);return w.useEffect(()=>()=>e.dispose(),[e]),e}function yK(){let e=typeof document>"u";return"useSyncExternalStore"in Mo?(t=>t.useSyncExternalStore)(Mo)(()=>()=>{},()=>!1,()=>!e):!1}function Bm(){let e=yK(),[t,n]=w.useState(pl.isHandoffComplete);return t&&pl.isHandoffComplete===!1&&n(!1),w.useEffect(()=>{t!==!0&&n(!0)},[t]),w.useEffect(()=>pl.handoff(),[]),e?!1:t}var KP;let zm=(KP=pe.useId)!=null?KP:function(){let e=Bm(),[t,n]=pe.useState(e?()=>pl.nextId():null);return vi(()=>{t===null&&n(pl.nextId())},[t]),t!=null?""+t:void 0};function La(e,t,...n){if(e in t){let s=t[e];return typeof s=="function"?s(...n):s}let a=new Error(`Tried to handle "${e}" but there is no handler defined. Only defined handlers are: ${Object.keys(t).map(s=>`"${s}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(a,La),a}function AF(e){return pl.isServer?null:e instanceof Node?e.ownerDocument:e!=null&&e.hasOwnProperty("current")&&e.current instanceof Node?e.current.ownerDocument:document}let p5=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].map(e=>`${e}:not([tabindex='-1'])`).join(",");var Sd=(e=>(e[e.First=1]="First",e[e.Previous=2]="Previous",e[e.Next=4]="Next",e[e.Last=8]="Last",e[e.WrapAround=16]="WrapAround",e[e.NoScroll=32]="NoScroll",e))(Sd||{}),EF=(e=>(e[e.Error=0]="Error",e[e.Overflow=1]="Overflow",e[e.Success=2]="Success",e[e.Underflow=3]="Underflow",e))(EF||{}),bK=(e=>(e[e.Previous=-1]="Previous",e[e.Next=1]="Next",e))(bK||{});function jK(e=document.body){return e==null?[]:Array.from(e.querySelectorAll(p5)).sort((t,n)=>Math.sign((t.tabIndex||Number.MAX_SAFE_INTEGER)-(n.tabIndex||Number.MAX_SAFE_INTEGER)))}var PF=(e=>(e[e.Strict=0]="Strict",e[e.Loose=1]="Loose",e))(PF||{});function wK(e,t=0){var n;return e===((n=AF(e))==null?void 0:n.body)?!1:La(t,{0(){return e.matches(p5)},1(){let a=e;for(;a!==null;){if(a.matches(p5))return!0;a=a.parentElement}return!1}})}var NK=(e=>(e[e.Keyboard=0]="Keyboard",e[e.Mouse=1]="Mouse",e))(NK||{});typeof window<"u"&&typeof document<"u"&&(document.addEventListener("keydown",e=>{e.metaKey||e.altKey||e.ctrlKey||(document.documentElement.dataset.headlessuiFocusVisible="")},!0),document.addEventListener("click",e=>{e.detail===1?delete document.documentElement.dataset.headlessuiFocusVisible:e.detail===0&&(document.documentElement.dataset.headlessuiFocusVisible="")},!0));function Vd(e){e==null||e.focus({preventScroll:!0})}let SK=["textarea","input"].join(",");function CK(e){var t,n;return(n=(t=e==null?void 0:e.matches)==null?void 0:t.call(e,SK))!=null?n:!1}function AK(e,t=n=>n){return e.slice().sort((n,a)=>{let s=t(n),i=t(a);if(s===null||i===null)return 0;let o=s.compareDocumentPosition(i);return o&Node.DOCUMENT_POSITION_FOLLOWING?-1:o&Node.DOCUMENT_POSITION_PRECEDING?1:0})}function _0(e,t,{sorted:n=!0,relativeTo:a=null,skipElements:s=[]}={}){let i=Array.isArray(e)?e.length>0?e[0].ownerDocument:document:e.ownerDocument,o=Array.isArray(e)?n?AK(e):e:jK(e);s.length>0&&o.length>1&&(o=o.filter(h=>!s.includes(h))),a=a??i.activeElement;let l=(()=>{if(t&5)return 1;if(t&10)return-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),c=(()=>{if(t&1)return 0;if(t&2)return Math.max(0,o.indexOf(a))-1;if(t&4)return Math.max(0,o.indexOf(a))+1;if(t&8)return o.length-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),d=t&32?{preventScroll:!0}:{},f=0,u=o.length,m;do{if(f>=u||f+u<=0)return 0;let h=c+f;if(t&16)h=(h+u)%u;else{if(h<0)return 3;if(h>=u)return 1}m=o[h],m==null||m.focus(d),f+=l}while(m!==i.activeElement);return t&6&&CK(m)&&m.select(),2}function TF(){return/iPhone/gi.test(window.navigator.platform)||/Mac/gi.test(window.navigator.platform)&&window.navigator.maxTouchPoints>0}function EK(){return/Android/gi.test(window.navigator.userAgent)}function PK(){return TF()||EK()}function Bg(e,t,n){let a=vl(t);w.useEffect(()=>{function s(i){a.current(i)}return document.addEventListener(e,s,n),()=>document.removeEventListener(e,s,n)},[e,n])}function IF(e,t,n){let a=vl(t);w.useEffect(()=>{function s(i){a.current(i)}return window.addEventListener(e,s,n),()=>window.removeEventListener(e,s,n)},[e,n])}function TK(e,t,n=!0){let a=w.useRef(!1);w.useEffect(()=>{requestAnimationFrame(()=>{a.current=n})},[n]);function s(o,l){if(!a.current||o.defaultPrevented)return;let c=l(o);if(c===null||!c.getRootNode().contains(c)||!c.isConnected)return;let d=function f(u){return typeof u=="function"?f(u()):Array.isArray(u)||u instanceof Set?u:[u]}(e);for(let f of d){if(f===null)continue;let u=f instanceof HTMLElement?f:f.current;if(u!=null&&u.contains(c)||o.composed&&o.composedPath().includes(u))return}return!wK(c,PF.Loose)&&c.tabIndex!==-1&&o.preventDefault(),t(o,c)}let i=w.useRef(null);Bg("pointerdown",o=>{var l,c;a.current&&(i.current=((c=(l=o.composedPath)==null?void 0:l.call(o))==null?void 0:c[0])||o.target)},!0),Bg("mousedown",o=>{var l,c;a.current&&(i.current=((c=(l=o.composedPath)==null?void 0:l.call(o))==null?void 0:c[0])||o.target)},!0),Bg("click",o=>{PK()||i.current&&(s(o,()=>i.current),i.current=null)},!0),Bg("touchend",o=>s(o,()=>o.target instanceof HTMLElement?o.target:null),!0),IF("blur",o=>s(o,()=>window.document.activeElement instanceof HTMLIFrameElement?window.document.activeElement:null),!0)}function ix(...e){return w.useMemo(()=>AF(...e),[...e])}let DF=Symbol();function IK(e,t=!0){return Object.assign(e,{[DF]:t})}function eo(...e){let t=w.useRef(e);w.useEffect(()=>{t.current=e},[e]);let n=an(a=>{for(let s of t.current)s!=null&&(typeof s=="function"?s(a):s.current=a)});return e.every(a=>a==null||(a==null?void 0:a[DF]))?void 0:n}function VA(e,t){let n=w.useRef([]),a=an(e);w.useEffect(()=>{let s=[...n.current];for(let[i,o]of t.entries())if(n.current[i]!==o){let l=a(t,s);return n.current=t,l}},[a,...t])}function py(...e){return Array.from(new Set(e.flatMap(t=>typeof t=="string"?t.split(" "):[]))).filter(Boolean).join(" ")}var vy=(e=>(e[e.None=0]="None",e[e.RenderStrategy=1]="RenderStrategy",e[e.Static=2]="Static",e))(vy||{}),vc=(e=>(e[e.Unmount=0]="Unmount",e[e.Hidden=1]="Hidden",e))(vc||{});function gi({ourProps:e,theirProps:t,slot:n,defaultTag:a,features:s,visible:i=!0,name:o,mergeRefs:l}){l=l??DK;let c=kF(t,e);if(i)return zg(c,n,a,o,l);let d=s??0;if(d&2){let{static:f=!1,...u}=c;if(f)return zg(u,n,a,o,l)}if(d&1){let{unmount:f=!0,...u}=c;return La(f?0:1,{0(){return null},1(){return zg({...u,hidden:!0,style:{display:"none"}},n,a,o,l)}})}return zg(c,n,a,o,l)}function zg(e,t={},n,a,s){let{as:i=n,children:o,refName:l="ref",...c}=Kw(e,["unmount","static"]),d=e.ref!==void 0?{[l]:e.ref}:{},f=typeof o=="function"?o(t):o;"className"in c&&c.className&&typeof c.className=="function"&&(c.className=c.className(t));let u={};if(t){let m=!1,h=[];for(let[x,g]of Object.entries(t))typeof g=="boolean"&&(m=!0),g===!0&&h.push(x);m&&(u["data-headlessui-state"]=h.join(" "))}if(i===w.Fragment&&Object.keys(YP(c)).length>0){if(!w.isValidElement(f)||Array.isArray(f)&&f.length>1)throw new Error(['Passing props on "Fragment"!',"",`The current component <${a} /> is rendering a "Fragment".`,"However we need to passthrough the following props:",Object.keys(c).map(g=>`  - ${g}`).join(`
`),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "Fragment".',"Render a single element as the child so that we can forward the props onto that element."].map(g=>`  - ${g}`).join(`
`)].join(`
`));let m=f.props,h=typeof(m==null?void 0:m.className)=="function"?(...g)=>py(m==null?void 0:m.className(...g),c.className):py(m==null?void 0:m.className,c.className),x=h?{className:h}:{};return w.cloneElement(f,Object.assign({},kF(f.props,YP(Kw(c,["ref"]))),u,d,{ref:s(f.ref,d.ref)},x))}return w.createElement(i,Object.assign({},Kw(c,["ref"]),i!==w.Fragment&&d,i!==w.Fragment&&u),f)}function DK(...e){return e.every(t=>t==null)?void 0:t=>{for(let n of e)n!=null&&(typeof n=="function"?n(t):n.current=t)}}function kF(...e){if(e.length===0)return{};if(e.length===1)return e[0];let t={},n={};for(let a of e)for(let s in a)s.startsWith("on")&&typeof a[s]=="function"?(n[s]!=null||(n[s]=[]),n[s].push(a[s])):t[s]=a[s];if(t.disabled||t["aria-disabled"])return Object.assign(t,Object.fromEntries(Object.keys(n).map(a=>[a,void 0])));for(let a in n)Object.assign(t,{[a](s,...i){let o=n[a];for(let l of o){if((s instanceof Event||(s==null?void 0:s.nativeEvent)instanceof Event)&&s.defaultPrevented)return;l(s,...i)}}});return t}function Bs(e){var t;return Object.assign(w.forwardRef(e),{displayName:(t=e.displayName)!=null?t:e.name})}function YP(e){let t=Object.assign({},e);for(let n in t)t[n]===void 0&&delete t[n];return t}function Kw(e,t=[]){let n=Object.assign({},e);for(let a of t)a in n&&delete n[a];return n}let kK="div";var xy=(e=>(e[e.None=1]="None",e[e.Focusable=2]="Focusable",e[e.Hidden=4]="Hidden",e))(xy||{});function OK(e,t){var n;let{features:a=1,...s}=e,i={ref:t,"aria-hidden":(a&2)===2?!0:(n=s["aria-hidden"])!=null?n:void 0,hidden:(a&4)===4?!0:void 0,style:{position:"fixed",top:1,left:1,width:1,height:0,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",...(a&4)===4&&(a&2)!==2&&{display:"none"}}};return gi({ourProps:i,theirProps:s,slot:{},defaultTag:kK,name:"Hidden"})}let v5=Bs(OK),qA=w.createContext(null);qA.displayName="OpenClosedContext";var Cs=(e=>(e[e.Open=1]="Open",e[e.Closed=2]="Closed",e[e.Closing=4]="Closing",e[e.Opening=8]="Opening",e))(Cs||{});function WA(){return w.useContext(qA)}function _K({value:e,children:t}){return pe.createElement(qA.Provider,{value:e},t)}function LK(e){function t(){document.readyState!=="loading"&&(e(),document.removeEventListener("DOMContentLoaded",t))}typeof window<"u"&&typeof document<"u"&&(document.addEventListener("DOMContentLoaded",t),t())}let dc=[];LK(()=>{function e(t){t.target instanceof HTMLElement&&t.target!==document.body&&dc[0]!==t.target&&(dc.unshift(t.target),dc=dc.filter(n=>n!=null&&n.isConnected),dc.splice(10))}window.addEventListener("click",e,{capture:!0}),window.addEventListener("mousedown",e,{capture:!0}),window.addEventListener("focus",e,{capture:!0}),document.body.addEventListener("click",e,{capture:!0}),document.body.addEventListener("mousedown",e,{capture:!0}),document.body.addEventListener("focus",e,{capture:!0})});function RK(e){let t=e.parentElement,n=null;for(;t&&!(t instanceof HTMLFieldSetElement);)t instanceof HTMLLegendElement&&(n=t),t=t.parentElement;let a=(t==null?void 0:t.getAttribute("disabled"))==="";return a&&FK(n)?!1:a}function FK(e){if(!e)return!1;let t=e.previousElementSibling;for(;t!==null;){if(t instanceof HTMLLegendElement)return!1;t=t.previousElementSibling}return!0}var OF=(e=>(e.Space=" ",e.Enter="Enter",e.Escape="Escape",e.Backspace="Backspace",e.Delete="Delete",e.ArrowLeft="ArrowLeft",e.ArrowUp="ArrowUp",e.ArrowRight="ArrowRight",e.ArrowDown="ArrowDown",e.Home="Home",e.End="End",e.PageUp="PageUp",e.PageDown="PageDown",e.Tab="Tab",e))(OF||{});function _F(e,t,n,a){let s=vl(n);w.useEffect(()=>{e=e??window;function i(o){s.current(o)}return e.addEventListener(t,i,a),()=>e.removeEventListener(t,i,a)},[e,t,a])}function ox(){let e=w.useRef(!1);return vi(()=>(e.current=!0,()=>{e.current=!1}),[]),e}function LF(e){let t=an(e),n=w.useRef(!1);w.useEffect(()=>(n.current=!1,()=>{n.current=!0,a1(()=>{n.current&&t()})}),[t])}var vp=(e=>(e[e.Forwards=0]="Forwards",e[e.Backwards=1]="Backwards",e))(vp||{});function MK(){let e=w.useRef(0);return IF("keydown",t=>{t.key==="Tab"&&(e.current=t.shiftKey?1:0)},!0),e}function RF(e){if(!e)return new Set;if(typeof e=="function")return new Set(e());let t=new Set;for(let n of e.current)n.current instanceof HTMLElement&&t.add(n.current);return t}let $K="div";var FF=(e=>(e[e.None=1]="None",e[e.InitialFocus=2]="InitialFocus",e[e.TabLock=4]="TabLock",e[e.FocusLock=8]="FocusLock",e[e.RestoreFocus=16]="RestoreFocus",e[e.All=30]="All",e))(FF||{});function BK(e,t){let n=w.useRef(null),a=eo(n,t),{initialFocus:s,containers:i,features:o=30,...l}=e;Bm()||(o=1);let c=ix(n);VK({ownerDocument:c},!!(o&16));let d=qK({ownerDocument:c,container:n,initialFocus:s},!!(o&2));WK({ownerDocument:c,container:n,containers:i,previousActiveElement:d},!!(o&8));let f=MK(),u=an(g=>{let p=n.current;p&&(v=>v())(()=>{La(f.current,{[vp.Forwards]:()=>{_0(p,Sd.First,{skipElements:[g.relatedTarget]})},[vp.Backwards]:()=>{_0(p,Sd.Last,{skipElements:[g.relatedTarget]})}})})}),m=UA(),h=w.useRef(!1),x={ref:a,onKeyDown(g){g.key=="Tab"&&(h.current=!0,m.requestAnimationFrame(()=>{h.current=!1}))},onBlur(g){let p=RF(i);n.current instanceof HTMLElement&&p.add(n.current);let v=g.relatedTarget;v instanceof HTMLElement&&v.dataset.headlessuiFocusGuard!=="true"&&(MF(p,v)||(h.current?_0(n.current,La(f.current,{[vp.Forwards]:()=>Sd.Next,[vp.Backwards]:()=>Sd.Previous})|Sd.WrapAround,{relativeTo:g.target}):g.target instanceof HTMLElement&&Vd(g.target)))}};return pe.createElement(pe.Fragment,null,!!(o&4)&&pe.createElement(v5,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:u,features:xy.Focusable}),gi({ourProps:x,theirProps:l,defaultTag:$K,name:"FocusTrap"}),!!(o&4)&&pe.createElement(v5,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:u,features:xy.Focusable}))}let zK=Bs(BK),Kh=Object.assign(zK,{features:FF});function UK(e=!0){let t=w.useRef(dc.slice());return VA(([n],[a])=>{a===!0&&n===!1&&a1(()=>{t.current.splice(0)}),a===!1&&n===!0&&(t.current=dc.slice())},[e,dc,t]),an(()=>{var n;return(n=t.current.find(a=>a!=null&&a.isConnected))!=null?n:null})}function VK({ownerDocument:e},t){let n=UK(t);VA(()=>{t||(e==null?void 0:e.activeElement)===(e==null?void 0:e.body)&&Vd(n())},[t]),LF(()=>{t&&Vd(n())})}function qK({ownerDocument:e,container:t,initialFocus:n},a){let s=w.useRef(null),i=ox();return VA(()=>{if(!a)return;let o=t.current;o&&a1(()=>{if(!i.current)return;let l=e==null?void 0:e.activeElement;if(n!=null&&n.current){if((n==null?void 0:n.current)===l){s.current=l;return}}else if(o.contains(l)){s.current=l;return}n!=null&&n.current?Vd(n.current):_0(o,Sd.First)===EF.Error&&console.warn("There are no focusable elements inside the <FocusTrap />"),s.current=e==null?void 0:e.activeElement})},[a]),s}function WK({ownerDocument:e,container:t,containers:n,previousActiveElement:a},s){let i=ox();_F(e==null?void 0:e.defaultView,"focus",o=>{if(!s||!i.current)return;let l=RF(n);t.current instanceof HTMLElement&&l.add(t.current);let c=a.current;if(!c)return;let d=o.target;d&&d instanceof HTMLElement?MF(l,d)?(a.current=d,Vd(d)):(o.preventDefault(),o.stopPropagation(),Vd(c)):Vd(a.current)},!0)}function MF(e,t){for(let n of e)if(n.contains(t))return!0;return!1}let $F=w.createContext(!1);function HK(){return w.useContext($F)}function x5(e){return pe.createElement($F.Provider,{value:e.force},e.children)}function GK(e){let t=HK(),n=w.useContext(BF),a=ix(e),[s,i]=w.useState(()=>{if(!t&&n!==null||pl.isServer)return null;let o=a==null?void 0:a.getElementById("headlessui-portal-root");if(o)return o;if(a===null)return null;let l=a.createElement("div");return l.setAttribute("id","headlessui-portal-root"),a.body.appendChild(l)});return w.useEffect(()=>{s!==null&&(a!=null&&a.body.contains(s)||a==null||a.body.appendChild(s))},[s,a]),w.useEffect(()=>{t||n!==null&&i(n.current)},[n,i,t]),s}let KK=w.Fragment;function YK(e,t){let n=e,a=w.useRef(null),s=eo(IK(f=>{a.current=f}),t),i=ix(a),o=GK(a),[l]=w.useState(()=>{var f;return pl.isServer?null:(f=i==null?void 0:i.createElement("div"))!=null?f:null}),c=w.useContext(g5),d=Bm();return vi(()=>{!o||!l||o.contains(l)||(l.setAttribute("data-headlessui-portal",""),o.appendChild(l))},[o,l]),vi(()=>{if(l&&c)return c.register(l)},[c,l]),LF(()=>{var f;!o||!l||(l instanceof Node&&o.contains(l)&&o.removeChild(l),o.childNodes.length<=0&&((f=o.parentElement)==null||f.removeChild(o)))}),d?!o||!l?null:zo.createPortal(gi({ourProps:{ref:s},theirProps:n,defaultTag:KK,name:"Portal"}),l):null}let XK=w.Fragment,BF=w.createContext(null);function QK(e,t){let{target:n,...a}=e,s={ref:eo(t)};return pe.createElement(BF.Provider,{value:n},gi({ourProps:s,theirProps:a,defaultTag:XK,name:"Popover.Group"}))}let g5=w.createContext(null);function JK(){let e=w.useContext(g5),t=w.useRef([]),n=an(i=>(t.current.push(i),e&&e.register(i),()=>a(i))),a=an(i=>{let o=t.current.indexOf(i);o!==-1&&t.current.splice(o,1),e&&e.unregister(i)}),s=w.useMemo(()=>({register:n,unregister:a,portals:t}),[n,a,t]);return[t,w.useMemo(()=>function({children:i}){return pe.createElement(g5.Provider,{value:s},i)},[s])]}let ZK=Bs(YK),eY=Bs(QK),y5=Object.assign(ZK,{Group:eY});function tY(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}const rY=typeof Object.is=="function"?Object.is:tY,{useState:nY,useEffect:aY,useLayoutEffect:sY,useDebugValue:iY}=Mo;function oY(e,t,n){const a=t(),[{inst:s},i]=nY({inst:{value:a,getSnapshot:t}});return sY(()=>{s.value=a,s.getSnapshot=t,Yw(s)&&i({inst:s})},[e,a,t]),aY(()=>(Yw(s)&&i({inst:s}),e(()=>{Yw(s)&&i({inst:s})})),[e]),iY(a),a}function Yw(e){const t=e.getSnapshot,n=e.value;try{const a=t();return!rY(n,a)}catch{return!0}}function lY(e,t,n){return t()}const cY=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",dY=!cY,uY=dY?lY:oY,fY="useSyncExternalStore"in Mo?(e=>e.useSyncExternalStore)(Mo):uY;function mY(e){return fY(e.subscribe,e.getSnapshot,e.getSnapshot)}function hY(e,t){let n=e(),a=new Set;return{getSnapshot(){return n},subscribe(s){return a.add(s),()=>a.delete(s)},dispatch(s,...i){let o=t[s].call(n,...i);o&&(n=o,a.forEach(l=>l()))}}}function pY(){let e;return{before({doc:t}){var n;let a=t.documentElement;e=((n=t.defaultView)!=null?n:window).innerWidth-a.clientWidth},after({doc:t,d:n}){let a=t.documentElement,s=a.clientWidth-a.offsetWidth,i=e-s;n.style(a,"paddingRight",`${i}px`)}}}function vY(){return TF()?{before({doc:e,d:t,meta:n}){function a(s){return n.containers.flatMap(i=>i()).some(i=>i.contains(s))}t.microTask(()=>{var s;if(window.getComputedStyle(e.documentElement).scrollBehavior!=="auto"){let l=xu();l.style(e.documentElement,"scrollBehavior","auto"),t.add(()=>t.microTask(()=>l.dispose()))}let i=(s=window.scrollY)!=null?s:window.pageYOffset,o=null;t.addEventListener(e,"click",l=>{if(l.target instanceof HTMLElement)try{let c=l.target.closest("a");if(!c)return;let{hash:d}=new URL(c.href),f=e.querySelector(d);f&&!a(f)&&(o=f)}catch{}},!0),t.addEventListener(e,"touchstart",l=>{if(l.target instanceof HTMLElement)if(a(l.target)){let c=l.target;for(;c.parentElement&&a(c.parentElement);)c=c.parentElement;t.style(c,"overscrollBehavior","contain")}else t.style(l.target,"touchAction","none")}),t.addEventListener(e,"touchmove",l=>{if(l.target instanceof HTMLElement)if(a(l.target)){let c=l.target;for(;c.parentElement&&c.dataset.headlessuiPortal!==""&&!(c.scrollHeight>c.clientHeight||c.scrollWidth>c.clientWidth);)c=c.parentElement;c.dataset.headlessuiPortal===""&&l.preventDefault()}else l.preventDefault()},{passive:!1}),t.add(()=>{var l;let c=(l=window.scrollY)!=null?l:window.pageYOffset;i!==c&&window.scrollTo(0,i),o&&o.isConnected&&(o.scrollIntoView({block:"nearest"}),o=null)})})}}:{}}function xY(){return{before({doc:e,d:t}){t.style(e.documentElement,"overflow","hidden")}}}function gY(e){let t={};for(let n of e)Object.assign(t,n(t));return t}let Od=hY(()=>new Map,{PUSH(e,t){var n;let a=(n=this.get(e))!=null?n:{doc:e,count:0,d:xu(),meta:new Set};return a.count++,a.meta.add(t),this.set(e,a),this},POP(e,t){let n=this.get(e);return n&&(n.count--,n.meta.delete(t)),this},SCROLL_PREVENT({doc:e,d:t,meta:n}){let a={doc:e,d:t,meta:gY(n)},s=[vY(),pY(),xY()];s.forEach(({before:i})=>i==null?void 0:i(a)),s.forEach(({after:i})=>i==null?void 0:i(a))},SCROLL_ALLOW({d:e}){e.dispose()},TEARDOWN({doc:e}){this.delete(e)}});Od.subscribe(()=>{let e=Od.getSnapshot(),t=new Map;for(let[n]of e)t.set(n,n.documentElement.style.overflow);for(let n of e.values()){let a=t.get(n.doc)==="hidden",s=n.count!==0;(s&&!a||!s&&a)&&Od.dispatch(n.count>0?"SCROLL_PREVENT":"SCROLL_ALLOW",n),n.count===0&&Od.dispatch("TEARDOWN",n)}});function yY(e,t,n){let a=mY(Od),s=e?a.get(e):void 0,i=s?s.count>0:!1;return vi(()=>{if(!(!e||!t))return Od.dispatch("PUSH",e,n),()=>Od.dispatch("POP",e,n)},[t,e]),i}let Xw=new Map,Yh=new Map;function XP(e,t=!0){vi(()=>{var n;if(!t)return;let a=typeof e=="function"?e():e.current;if(!a)return;function s(){var o;if(!a)return;let l=(o=Yh.get(a))!=null?o:1;if(l===1?Yh.delete(a):Yh.set(a,l-1),l!==1)return;let c=Xw.get(a);c&&(c["aria-hidden"]===null?a.removeAttribute("aria-hidden"):a.setAttribute("aria-hidden",c["aria-hidden"]),a.inert=c.inert,Xw.delete(a))}let i=(n=Yh.get(a))!=null?n:0;return Yh.set(a,i+1),i!==0||(Xw.set(a,{"aria-hidden":a.getAttribute("aria-hidden"),inert:a.inert}),a.setAttribute("aria-hidden","true"),a.inert=!0),s},[e,t])}function bY({defaultContainers:e=[],portals:t,mainTreeNodeRef:n}={}){var a;let s=w.useRef((a=n==null?void 0:n.current)!=null?a:null),i=ix(s),o=an(()=>{var l,c,d;let f=[];for(let u of e)u!==null&&(u instanceof HTMLElement?f.push(u):"current"in u&&u.current instanceof HTMLElement&&f.push(u.current));if(t!=null&&t.current)for(let u of t.current)f.push(u);for(let u of(l=i==null?void 0:i.querySelectorAll("html > *, body > *"))!=null?l:[])u!==document.body&&u!==document.head&&u instanceof HTMLElement&&u.id!=="headlessui-portal-root"&&(u.contains(s.current)||u.contains((d=(c=s.current)==null?void 0:c.getRootNode())==null?void 0:d.host)||f.some(m=>u.contains(m))||f.push(u));return f});return{resolveContainers:o,contains:an(l=>o().some(c=>c.contains(l))),mainTreeNodeRef:s,MainTreeNode:w.useMemo(()=>function(){return n!=null?null:pe.createElement(v5,{features:xy.Hidden,ref:s})},[s,n])}}let HA=w.createContext(()=>{});HA.displayName="StackContext";var b5=(e=>(e[e.Add=0]="Add",e[e.Remove=1]="Remove",e))(b5||{});function jY(){return w.useContext(HA)}function wY({children:e,onUpdate:t,type:n,element:a,enabled:s}){let i=jY(),o=an((...l)=>{t==null||t(...l),i(...l)});return vi(()=>{let l=s===void 0||s===!0;return l&&o(0,n,a),()=>{l&&o(1,n,a)}},[o,n,a,s]),pe.createElement(HA.Provider,{value:o},e)}let zF=w.createContext(null);function UF(){let e=w.useContext(zF);if(e===null){let t=new Error("You used a <Description /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(t,UF),t}return e}function NY(){let[e,t]=w.useState([]);return[e.length>0?e.join(" "):void 0,w.useMemo(()=>function(n){let a=an(i=>(t(o=>[...o,i]),()=>t(o=>{let l=o.slice(),c=l.indexOf(i);return c!==-1&&l.splice(c,1),l}))),s=w.useMemo(()=>({register:a,slot:n.slot,name:n.name,props:n.props}),[a,n.slot,n.name,n.props]);return pe.createElement(zF.Provider,{value:s},n.children)},[t])]}let SY="p";function CY(e,t){let n=zm(),{id:a=`headlessui-description-${n}`,...s}=e,i=UF(),o=eo(t);vi(()=>i.register(a),[a,i.register]);let l={ref:o,...i.props,id:a};return gi({ourProps:l,theirProps:s,slot:i.slot||{},defaultTag:SY,name:i.name||"Description"})}let AY=Bs(CY),EY=Object.assign(AY,{});var PY=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(PY||{}),TY=(e=>(e[e.SetTitleId=0]="SetTitleId",e))(TY||{});let IY={0(e,t){return e.titleId===t.id?e:{...e,titleId:t.id}}},gy=w.createContext(null);gy.displayName="DialogContext";function lx(e){let t=w.useContext(gy);if(t===null){let n=new Error(`<${e} /> is missing a parent <Dialog /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,lx),n}return t}function DY(e,t,n=()=>[document.body]){yY(e,t,a=>{var s;return{containers:[...(s=a.containers)!=null?s:[],n]}})}function kY(e,t){return La(t.type,IY,e,t)}let OY="div",_Y=vy.RenderStrategy|vy.Static;function LY(e,t){let n=zm(),{id:a=`headlessui-dialog-${n}`,open:s,onClose:i,initialFocus:o,role:l="dialog",__demoMode:c=!1,...d}=e,[f,u]=w.useState(0),m=w.useRef(!1);l=function(){return l==="dialog"||l==="alertdialog"?l:(m.current||(m.current=!0,console.warn(`Invalid role [${l}] passed to <Dialog />. Only \`dialog\` and and \`alertdialog\` are supported. Using \`dialog\` instead.`)),"dialog")}();let h=WA();s===void 0&&h!==null&&(s=(h&Cs.Open)===Cs.Open);let x=w.useRef(null),g=eo(x,t),p=ix(x),v=e.hasOwnProperty("open")||h!==null,y=e.hasOwnProperty("onClose");if(!v&&!y)throw new Error("You have to provide an `open` and an `onClose` prop to the `Dialog` component.");if(!v)throw new Error("You provided an `onClose` prop to the `Dialog`, but forgot an `open` prop.");if(!y)throw new Error("You provided an `open` prop to the `Dialog`, but forgot an `onClose` prop.");if(typeof s!="boolean")throw new Error(`You provided an \`open\` prop to the \`Dialog\`, but the value is not a boolean. Received: ${s}`);if(typeof i!="function")throw new Error(`You provided an \`onClose\` prop to the \`Dialog\`, but the value is not a function. Received: ${i}`);let b=s?0:1,[j,C]=w.useReducer(kY,{titleId:null,descriptionId:null,panelRef:w.createRef()}),E=an(()=>i(!1)),S=an(ve=>C({type:0,id:ve})),N=Bm()?c?!1:b===0:!1,I=f>1,D=w.useContext(gy)!==null,[T,A]=JK(),_={get current(){var ve;return(ve=j.panelRef.current)!=null?ve:x.current}},{resolveContainers:k,mainTreeNodeRef:L,MainTreeNode:$}=bY({portals:T,defaultContainers:[_]}),M=I?"parent":"leaf",B=h!==null?(h&Cs.Closing)===Cs.Closing:!1,U=(()=>D||B?!1:N)(),W=w.useCallback(()=>{var ve,xe;return(xe=Array.from((ve=p==null?void 0:p.querySelectorAll("body > *"))!=null?ve:[]).find(Oe=>Oe.id==="headlessui-portal-root"?!1:Oe.contains(L.current)&&Oe instanceof HTMLElement))!=null?xe:null},[L]);XP(W,U);let q=(()=>I?!0:N)(),R=w.useCallback(()=>{var ve,xe;return(xe=Array.from((ve=p==null?void 0:p.querySelectorAll("[data-headlessui-portal]"))!=null?ve:[]).find(Oe=>Oe.contains(L.current)&&Oe instanceof HTMLElement))!=null?xe:null},[L]);XP(R,q);let V=(()=>!(!N||I))();TK(k,ve=>{ve.preventDefault(),E()},V);let G=(()=>!(I||b!==0))();_F(p==null?void 0:p.defaultView,"keydown",ve=>{G&&(ve.defaultPrevented||ve.key===OF.Escape&&(ve.preventDefault(),ve.stopPropagation(),E()))});let ee=(()=>!(B||b!==0||D))();DY(p,ee,k),w.useEffect(()=>{if(b!==0||!x.current)return;let ve=new ResizeObserver(xe=>{for(let Oe of xe){let ye=Oe.target.getBoundingClientRect();ye.x===0&&ye.y===0&&ye.width===0&&ye.height===0&&E()}});return ve.observe(x.current),()=>ve.disconnect()},[b,x,E]);let[re,de]=NY(),ue=w.useMemo(()=>[{dialogState:b,close:E,setTitleId:S},j],[b,j,E,S]),oe=w.useMemo(()=>({open:b===0}),[b]),ge={ref:g,id:a,role:l,"aria-modal":b===0?!0:void 0,"aria-labelledby":j.titleId,"aria-describedby":re};return pe.createElement(wY,{type:"Dialog",enabled:b===0,element:x,onUpdate:an((ve,xe)=>{xe==="Dialog"&&La(ve,{[b5.Add]:()=>u(Oe=>Oe+1),[b5.Remove]:()=>u(Oe=>Oe-1)})})},pe.createElement(x5,{force:!0},pe.createElement(y5,null,pe.createElement(gy.Provider,{value:ue},pe.createElement(y5.Group,{target:x},pe.createElement(x5,{force:!1},pe.createElement(de,{slot:oe,name:"Dialog.Description"},pe.createElement(Kh,{initialFocus:o,containers:k,features:N?La(M,{parent:Kh.features.RestoreFocus,leaf:Kh.features.All&~Kh.features.FocusLock}):Kh.features.None},pe.createElement(A,null,gi({ourProps:ge,theirProps:d,slot:oe,defaultTag:OY,features:_Y,visible:b===0,name:"Dialog"}))))))))),pe.createElement($,null))}let RY="div";function FY(e,t){let n=zm(),{id:a=`headlessui-dialog-overlay-${n}`,...s}=e,[{dialogState:i,close:o}]=lx("Dialog.Overlay"),l=eo(t),c=an(f=>{if(f.target===f.currentTarget){if(RK(f.currentTarget))return f.preventDefault();f.preventDefault(),f.stopPropagation(),o()}}),d=w.useMemo(()=>({open:i===0}),[i]);return gi({ourProps:{ref:l,id:a,"aria-hidden":!0,onClick:c},theirProps:s,slot:d,defaultTag:RY,name:"Dialog.Overlay"})}let MY="div";function $Y(e,t){let n=zm(),{id:a=`headlessui-dialog-backdrop-${n}`,...s}=e,[{dialogState:i},o]=lx("Dialog.Backdrop"),l=eo(t);w.useEffect(()=>{if(o.panelRef.current===null)throw new Error("A <Dialog.Backdrop /> component is being used, but a <Dialog.Panel /> component is missing.")},[o.panelRef]);let c=w.useMemo(()=>({open:i===0}),[i]);return pe.createElement(x5,{force:!0},pe.createElement(y5,null,gi({ourProps:{ref:l,id:a,"aria-hidden":!0},theirProps:s,slot:c,defaultTag:MY,name:"Dialog.Backdrop"})))}let BY="div";function zY(e,t){let n=zm(),{id:a=`headlessui-dialog-panel-${n}`,...s}=e,[{dialogState:i},o]=lx("Dialog.Panel"),l=eo(t,o.panelRef),c=w.useMemo(()=>({open:i===0}),[i]),d=an(f=>{f.stopPropagation()});return gi({ourProps:{ref:l,id:a,onClick:d},theirProps:s,slot:c,defaultTag:BY,name:"Dialog.Panel"})}let UY="h2";function VY(e,t){let n=zm(),{id:a=`headlessui-dialog-title-${n}`,...s}=e,[{dialogState:i,setTitleId:o}]=lx("Dialog.Title"),l=eo(t);w.useEffect(()=>(o(a),()=>o(null)),[a,o]);let c=w.useMemo(()=>({open:i===0}),[i]);return gi({ourProps:{ref:l,id:a},theirProps:s,slot:c,defaultTag:UY,name:"Dialog.Title"})}let qY=Bs(LY),WY=Bs($Y),HY=Bs(zY),GY=Bs(FY),KY=Bs(VY),QP=Object.assign(qY,{Backdrop:WY,Panel:HY,Overlay:GY,Title:KY,Description:EY});function YY(e=0){let[t,n]=w.useState(e),a=ox(),s=w.useCallback(c=>{a.current&&n(d=>d|c)},[t,a]),i=w.useCallback(c=>!!(t&c),[t]),o=w.useCallback(c=>{a.current&&n(d=>d&~c)},[n,a]),l=w.useCallback(c=>{a.current&&n(d=>d^c)},[n]);return{flags:t,addFlag:s,hasFlag:i,removeFlag:o,toggleFlag:l}}function XY(e){let t={called:!1};return(...n)=>{if(!t.called)return t.called=!0,e(...n)}}function Qw(e,...t){e&&t.length>0&&e.classList.add(...t)}function Jw(e,...t){e&&t.length>0&&e.classList.remove(...t)}function QY(e,t){let n=xu();if(!e)return n.dispose;let{transitionDuration:a,transitionDelay:s}=getComputedStyle(e),[i,o]=[a,s].map(c=>{let[d=0]=c.split(",").filter(Boolean).map(f=>f.includes("ms")?parseFloat(f):parseFloat(f)*1e3).sort((f,u)=>u-f);return d}),l=i+o;if(l!==0){n.group(d=>{d.setTimeout(()=>{t(),d.dispose()},l),d.addEventListener(e,"transitionrun",f=>{f.target===f.currentTarget&&d.dispose()})});let c=n.addEventListener(e,"transitionend",d=>{d.target===d.currentTarget&&(t(),c())})}else t();return n.add(()=>t()),n.dispose}function JY(e,t,n,a){let s=n?"enter":"leave",i=xu(),o=a!==void 0?XY(a):()=>{};s==="enter"&&(e.removeAttribute("hidden"),e.style.display="");let l=La(s,{enter:()=>t.enter,leave:()=>t.leave}),c=La(s,{enter:()=>t.enterTo,leave:()=>t.leaveTo}),d=La(s,{enter:()=>t.enterFrom,leave:()=>t.leaveFrom});return Jw(e,...t.base,...t.enter,...t.enterTo,...t.enterFrom,...t.leave,...t.leaveFrom,...t.leaveTo,...t.entered),Qw(e,...t.base,...l,...d),i.nextFrame(()=>{Jw(e,...t.base,...l,...d),Qw(e,...t.base,...l,...c),QY(e,()=>(Jw(e,...t.base,...l),Qw(e,...t.base,...t.entered),o()))}),i.dispose}function ZY({immediate:e,container:t,direction:n,classes:a,onStart:s,onStop:i}){let o=ox(),l=UA(),c=vl(n);vi(()=>{e&&(c.current="enter")},[e]),vi(()=>{let d=xu();l.add(d.dispose);let f=t.current;if(f&&c.current!=="idle"&&o.current)return d.dispose(),s.current(c.current),d.add(JY(f,a.current,c.current==="enter",()=>{d.dispose(),i.current(c.current)})),d.dispose},[n])}function Zl(e=""){return e.split(/\s+/).filter(t=>t.length>1)}let s1=w.createContext(null);s1.displayName="TransitionContext";var eX=(e=>(e.Visible="visible",e.Hidden="hidden",e))(eX||{});function tX(){let e=w.useContext(s1);if(e===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}function rX(){let e=w.useContext(i1);if(e===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}let i1=w.createContext(null);i1.displayName="NestingContext";function o1(e){return"children"in e?o1(e.children):e.current.filter(({el:t})=>t.current!==null).filter(({state:t})=>t==="visible").length>0}function VF(e,t){let n=vl(e),a=w.useRef([]),s=ox(),i=UA(),o=an((h,x=vc.Hidden)=>{let g=a.current.findIndex(({el:p})=>p===h);g!==-1&&(La(x,{[vc.Unmount](){a.current.splice(g,1)},[vc.Hidden](){a.current[g].state="hidden"}}),i.microTask(()=>{var p;!o1(a)&&s.current&&((p=n.current)==null||p.call(n))}))}),l=an(h=>{let x=a.current.find(({el:g})=>g===h);return x?x.state!=="visible"&&(x.state="visible"):a.current.push({el:h,state:"visible"}),()=>o(h,vc.Unmount)}),c=w.useRef([]),d=w.useRef(Promise.resolve()),f=w.useRef({enter:[],leave:[],idle:[]}),u=an((h,x,g)=>{c.current.splice(0),t&&(t.chains.current[x]=t.chains.current[x].filter(([p])=>p!==h)),t==null||t.chains.current[x].push([h,new Promise(p=>{c.current.push(p)})]),t==null||t.chains.current[x].push([h,new Promise(p=>{Promise.all(f.current[x].map(([v,y])=>y)).then(()=>p())})]),x==="enter"?d.current=d.current.then(()=>t==null?void 0:t.wait.current).then(()=>g(x)):g(x)}),m=an((h,x,g)=>{Promise.all(f.current[x].splice(0).map(([p,v])=>v)).then(()=>{var p;(p=c.current.shift())==null||p()}).then(()=>g(x))});return w.useMemo(()=>({children:a,register:l,unregister:o,onStart:u,onStop:m,wait:d,chains:f}),[l,o,a,u,m,f,d])}function nX(){}let aX=["beforeEnter","afterEnter","beforeLeave","afterLeave"];function JP(e){var t;let n={};for(let a of aX)n[a]=(t=e[a])!=null?t:nX;return n}function sX(e){let t=w.useRef(JP(e));return w.useEffect(()=>{t.current=JP(e)},[e]),t}let iX="div",qF=vy.RenderStrategy;function oX(e,t){var n,a;let{beforeEnter:s,afterEnter:i,beforeLeave:o,afterLeave:l,enter:c,enterFrom:d,enterTo:f,entered:u,leave:m,leaveFrom:h,leaveTo:x,...g}=e,p=w.useRef(null),v=eo(p,t),y=(n=g.unmount)==null||n?vc.Unmount:vc.Hidden,{show:b,appear:j,initial:C}=tX(),[E,S]=w.useState(b?"visible":"hidden"),N=rX(),{register:I,unregister:D}=N;w.useEffect(()=>I(p),[I,p]),w.useEffect(()=>{if(y===vc.Hidden&&p.current){if(b&&E!=="visible"){S("visible");return}return La(E,{hidden:()=>D(p),visible:()=>I(p)})}},[E,p,I,D,b,y]);let T=vl({base:Zl(g.className),enter:Zl(c),enterFrom:Zl(d),enterTo:Zl(f),entered:Zl(u),leave:Zl(m),leaveFrom:Zl(h),leaveTo:Zl(x)}),A=sX({beforeEnter:s,afterEnter:i,beforeLeave:o,afterLeave:l}),_=Bm();w.useEffect(()=>{if(_&&E==="visible"&&p.current===null)throw new Error("Did you forget to passthrough the `ref` to the actual DOM node?")},[p,E,_]);let k=C&&!j,L=j&&b&&C,$=(()=>!_||k?"idle":b?"enter":"leave")(),M=YY(0),B=an(G=>La(G,{enter:()=>{M.addFlag(Cs.Opening),A.current.beforeEnter()},leave:()=>{M.addFlag(Cs.Closing),A.current.beforeLeave()},idle:()=>{}})),U=an(G=>La(G,{enter:()=>{M.removeFlag(Cs.Opening),A.current.afterEnter()},leave:()=>{M.removeFlag(Cs.Closing),A.current.afterLeave()},idle:()=>{}})),W=VF(()=>{S("hidden"),D(p)},N),q=w.useRef(!1);ZY({immediate:L,container:p,classes:T,direction:$,onStart:vl(G=>{q.current=!0,W.onStart(p,G,B)}),onStop:vl(G=>{q.current=!1,W.onStop(p,G,U),G==="leave"&&!o1(W)&&(S("hidden"),D(p))})});let R=g,V={ref:v};return L?R={...R,className:py(g.className,...T.current.enter,...T.current.enterFrom)}:q.current&&(R.className=py(g.className,(a=p.current)==null?void 0:a.className),R.className===""&&delete R.className),pe.createElement(i1.Provider,{value:W},pe.createElement(_K,{value:La(E,{visible:Cs.Open,hidden:Cs.Closed})|M.flags},gi({ourProps:V,theirProps:R,defaultTag:iX,features:qF,visible:E==="visible",name:"Transition.Child"})))}function lX(e,t){let{show:n,appear:a=!1,unmount:s=!0,...i}=e,o=w.useRef(null),l=eo(o,t);Bm();let c=WA();if(n===void 0&&c!==null&&(n=(c&Cs.Open)===Cs.Open),![!0,!1].includes(n))throw new Error("A <Transition /> is used but it is missing a `show={true | false}` prop.");let[d,f]=w.useState(n?"visible":"hidden"),u=VF(()=>{f("hidden")}),[m,h]=w.useState(!0),x=w.useRef([n]);vi(()=>{m!==!1&&x.current[x.current.length-1]!==n&&(x.current.push(n),h(!1))},[x,n]);let g=w.useMemo(()=>({show:n,appear:a,initial:m}),[n,a,m]);w.useEffect(()=>{if(n)f("visible");else if(!o1(u))f("hidden");else{let b=o.current;if(!b)return;let j=b.getBoundingClientRect();j.x===0&&j.y===0&&j.width===0&&j.height===0&&f("hidden")}},[n,u]);let p={unmount:s},v=an(()=>{var b;m&&h(!1),(b=e.beforeEnter)==null||b.call(e)}),y=an(()=>{var b;m&&h(!1),(b=e.beforeLeave)==null||b.call(e)});return pe.createElement(i1.Provider,{value:u},pe.createElement(s1.Provider,{value:g},gi({ourProps:{...p,as:w.Fragment,children:pe.createElement(WF,{ref:l,...p,...i,beforeEnter:v,beforeLeave:y})},theirProps:{},defaultTag:w.Fragment,features:qF,visible:d==="visible",name:"Transition"})))}function cX(e,t){let n=w.useContext(s1)!==null,a=WA()!==null;return pe.createElement(pe.Fragment,null,!n&&a?pe.createElement(j5,{ref:t,...e}):pe.createElement(WF,{ref:t,...e}))}let j5=Bs(lX),WF=Bs(oX),dX=Bs(cX),Ug=Object.assign(j5,{Child:dX,Root:j5});const ZP=[{name:"Dashboard",href:"/",icon:gG},{name:"CRM & Prospecting",href:"/crm",icon:$n},{name:"Inventory Management",href:"/inventory",icon:Ra},{name:"Sales Deals",href:"/deals",icon:fs},{name:"Finance",href:"/finance",icon:Mt},{name:"Quote Builder",href:"/quotes",icon:qa},{name:"Agreement Vault",href:"/agreements",icon:D0},{name:"PDI Checklist",href:"/pdi",icon:su},{name:"Service Operations",href:"/service",icon:Id},{name:"Delivery Tracker",href:"/delivery",icon:is},{name:"Commission Engine",href:"/commissions",icon:Mt},{name:"Client Portal",href:"/portal",icon:ax},{name:"Invoice & Payments",href:"/invoices",icon:Pn},{name:"Company Settings",href:"/settings",icon:sx},{name:"Platform Admin",href:"/admin",icon:MA},{name:"Platform Settings",href:"/admin/settings",icon:pG},{name:"Reporting Suite",href:"/reports",icon:Yn}];function uX({sidebarOpen:e,setSidebarOpen:t}){const n=Fm();return r.jsxs(r.Fragment,{children:[r.jsx(Ug.Root,{show:e,as:w.Fragment,children:r.jsxs(QP,{as:"div",className:"relative z-50 lg:hidden",onClose:t,children:[r.jsx(Ug.Child,{as:w.Fragment,enter:"transition-opacity ease-linear duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"transition-opacity ease-linear duration-300",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:r.jsx("div",{className:"fixed inset-0 bg-black/80"})}),r.jsx("div",{className:"fixed inset-0 flex",children:r.jsx(Ug.Child,{as:w.Fragment,enter:"transition ease-in-out duration-300 transform",enterFrom:"-translate-x-full",enterTo:"translate-x-0",leave:"transition ease-in-out duration-300 transform",leaveFrom:"translate-x-0",leaveTo:"-translate-x-full",children:r.jsxs(QP.Panel,{className:"relative mr-16 flex w-full max-w-xs flex-1",children:[r.jsx(Ug.Child,{as:w.Fragment,enter:"ease-in-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in-out duration-300",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:r.jsx("div",{className:"absolute left-full top-0 flex w-16 justify-center pt-5",children:r.jsxs("button",{type:"button",className:"-m-2.5 p-2.5",onClick:()=>t(!1),children:[r.jsx("span",{className:"sr-only",children:"Close sidebar"}),r.jsx($t,{className:"h-6 w-6 text-white","aria-hidden":"true"})]})})}),r.jsxs("div",{className:"flex grow flex-col gap-y-5 overflow-y-auto border-r border-border bg-card px-6 pb-4",children:[r.jsx("div",{className:"flex h-16 shrink-0 items-center",children:r.jsx("h1",{className:"text-xl font-bold text-primary",children:"Renter Insight"})}),r.jsx("nav",{className:"flex flex-1 flex-col",children:r.jsx("ul",{role:"list",className:"flex flex-1 flex-col gap-y-7",children:r.jsx("li",{children:r.jsx("ul",{role:"list",className:"-mx-2 space-y-1",children:ZP.map(a=>{const s=n.pathname===a.href||a.href!=="/"&&n.pathname.startsWith(a.href);return r.jsx("li",{children:r.jsxs(_P,{to:a.href,className:He("group flex gap-x-3 rounded-md p-2 text-sm leading-6 font-semibold transition-colors",s?"bg-primary text-primary-foreground":"text-muted-foreground hover:text-foreground hover:bg-accent"),onClick:()=>t(!1),children:[r.jsx(a.icon,{className:He("h-6 w-6 shrink-0",s?"text-primary-foreground":"text-muted-foreground group-hover:text-foreground"),"aria-hidden":"true"}),a.name]})},a.name)})})})})})]})]})})})]})}),r.jsx("div",{className:"hidden lg:fixed lg:inset-y-0 lg:z-50 lg:flex lg:w-64 lg:flex-col",children:r.jsxs("div",{className:"flex grow flex-col gap-y-5 overflow-y-auto border-r border-border bg-card px-6 pb-4",children:[r.jsx("div",{className:"flex h-16 shrink-0 items-center",children:r.jsx("h1",{className:"text-xl font-bold text-primary",children:"Renter Insight"})}),r.jsx("nav",{className:"flex flex-1 flex-col",children:r.jsx("ul",{role:"list",className:"flex flex-1 flex-col gap-y-7",children:r.jsx("li",{children:r.jsx("ul",{role:"list",className:"-mx-2 space-y-1",children:ZP.map(a=>{const s=n.pathname===a.href||a.href!=="/"&&n.pathname.startsWith(a.href);return r.jsx("li",{children:r.jsxs(_P,{to:a.href,className:He("group flex gap-x-3 rounded-md p-2 text-sm leading-6 font-semibold transition-colors",s?"bg-primary text-primary-foreground":"text-muted-foreground hover:text-foreground hover:bg-accent"),children:[r.jsx(a.icon,{className:He("h-6 w-6 shrink-0",s?"text-primary-foreground":"text-muted-foreground group-hover:text-foreground"),"aria-hidden":"true"}),a.name]})},a.name)})})})})})]})})]})}const fX=r1("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),J=w.forwardRef(({className:e,variant:t,size:n,asChild:a=!1,...s},i)=>{const o=a?bH:"button";return r.jsx(o,{className:He(fX({variant:t,size:n,className:e})),ref:i,...s})});J.displayName="Button";function mX({onMenuButtonClick:e}){const{user:t,logout:n}=$m(),{tenant:a}=vu();return r.jsxs("div",{className:"sticky top-0 z-40 flex h-16 shrink-0 items-center gap-x-4 border-b border-border bg-background px-4 shadow-sm sm:gap-x-6 sm:px-6 lg:px-8",children:[r.jsxs("button",{type:"button",className:"-m-2.5 p-2.5 text-muted-foreground lg:hidden",onClick:e,children:[r.jsx("span",{className:"sr-only",children:"Open sidebar"}),r.jsx(wG,{className:"h-6 w-6","aria-hidden":"true"})]}),r.jsxs("div",{className:"flex flex-1 gap-x-4 self-stretch lg:gap-x-6",children:[r.jsx("div",{className:"flex flex-1 items-center",children:r.jsx("h2",{className:"text-lg font-semibold text-foreground",children:(a==null?void 0:a.name)||"Renter Insight CRM/DMS"})}),r.jsxs("div",{className:"flex items-center gap-x-4 lg:gap-x-6",children:[r.jsxs("div",{className:"flex items-center gap-x-2",children:[r.jsx(wa,{className:"h-5 w-5 text-muted-foreground"}),r.jsx("span",{className:"text-sm font-medium text-foreground",children:t==null?void 0:t.name})]}),r.jsxs(J,{variant:"ghost",size:"sm",onClick:n,className:"flex items-center gap-x-2",children:[r.jsx(jG,{className:"h-4 w-4"}),"Logout"]})]})]})]})}function hX({children:e}){const[t,n]=w.useState(!1);return r.jsxs("div",{className:"min-h-screen bg-background",children:[r.jsx(uX,{sidebarOpen:t,setSidebarOpen:n}),r.jsxs("div",{className:"lg:pl-64",children:[r.jsx(mX,{onMenuButtonClick:()=>n(!0)}),r.jsx("main",{className:"py-6",children:r.jsx("div",{className:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8",children:e})})]})]})}const fe=w.forwardRef(({className:e,...t},n)=>r.jsx("div",{ref:n,className:He("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));fe.displayName="Card";const we=w.forwardRef(({className:e,...t},n)=>r.jsx("div",{ref:n,className:He("flex flex-col space-y-1.5 p-6",e),...t}));we.displayName="CardHeader";const Ne=w.forwardRef(({className:e,...t},n)=>r.jsx("h3",{ref:n,className:He("text-2xl font-semibold leading-none tracking-tight",e),...t}));Ne.displayName="CardTitle";const Ue=w.forwardRef(({className:e,...t},n)=>r.jsx("p",{ref:n,className:He("text-sm text-muted-foreground",e),...t}));Ue.displayName="CardDescription";const me=w.forwardRef(({className:e,...t},n)=>r.jsx("div",{ref:n,className:He("p-6 pt-0",e),...t}));me.displayName="CardContent";const pX=w.forwardRef(({className:e,...t},n)=>r.jsx("div",{ref:n,className:He("flex items-center p-6 pt-0",e),...t}));pX.displayName="CardFooter";const je=w.forwardRef(({className:e,type:t,...n},a)=>r.jsx("input",{type:t,className:He("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:a,...n}));je.displayName="Input";const Xt=w.forwardRef(({className:e,...t},n)=>r.jsx("textarea",{className:He("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:n,...t}));Xt.displayName="Textarea";function at(){return at=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},at.apply(null,arguments)}function eT(e,[t,n]){return Math.min(n,Math.max(t,e))}function Va(e,t,{checkForDefaultPrevented:n=!0}={}){return function(s){if(e==null||e(s),n===!1||!s.defaultPrevented)return t==null?void 0:t(s)}}function vX(e,t=[]){let n=[];function a(i,o){const l=w.createContext(o),c=n.length;n=[...n,o];function d(u){const{scope:m,children:h,...x}=u,g=(m==null?void 0:m[e][c])||l,p=w.useMemo(()=>x,Object.values(x));return w.createElement(g.Provider,{value:p},h)}function f(u,m){const h=(m==null?void 0:m[e][c])||l,x=w.useContext(h);if(x)return x;if(o!==void 0)return o;throw new Error(`\`${u}\` must be used within \`${i}\``)}return d.displayName=i+"Provider",[d,f]}const s=()=>{const i=n.map(o=>w.createContext(o));return function(l){const c=(l==null?void 0:l[e])||i;return w.useMemo(()=>({[`__scope${e}`]:{...l,[e]:c}}),[l,c])}};return s.scopeName=e,[a,xX(s,...t)]}function xX(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const a=e.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const o=a.reduce((l,{useScope:c,scopeName:d})=>{const u=c(i)[`__scope${d}`];return{...l,...u}},{});return w.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return n.scopeName=t.scopeName,n}function gX(e,t){typeof e=="function"?e(t):e!=null&&(e.current=t)}function HF(...e){return t=>e.forEach(n=>gX(n,t))}function tT(...e){return w.useCallback(HF(...e),e)}const w5=w.forwardRef((e,t)=>{const{children:n,...a}=e,s=w.Children.toArray(n),i=s.find(bX);if(i){const o=i.props.children,l=s.map(c=>c===i?w.Children.count(o)>1?w.Children.only(null):w.isValidElement(o)?o.props.children:null:c);return w.createElement(N5,at({},a,{ref:t}),w.isValidElement(o)?w.cloneElement(o,void 0,l):null)}return w.createElement(N5,at({},a,{ref:t}),n)});w5.displayName="Slot";const N5=w.forwardRef((e,t)=>{const{children:n,...a}=e;return w.isValidElement(n)?w.cloneElement(n,{...jX(a,n.props),ref:t?HF(t,n.ref):n.ref}):w.Children.count(n)>1?w.Children.only(null):null});N5.displayName="SlotClone";const yX=({children:e})=>w.createElement(w.Fragment,null,e);function bX(e){return w.isValidElement(e)&&e.type===yX}function jX(e,t){const n={...t};for(const a in t){const s=e[a],i=t[a];/^on[A-Z]/.test(a)?s&&i?n[a]=(...l)=>{i(...l),s(...l)}:s&&(n[a]=s):a==="style"?n[a]={...s,...i}:a==="className"&&(n[a]=[s,i].filter(Boolean).join(" "))}return{...e,...n}}function wX(e){const t=e+"CollectionProvider",[n,a]=vX(t),[s,i]=n(t,{collectionRef:{current:null},itemMap:new Map}),o=h=>{const{scope:x,children:g}=h,p=pe.useRef(null),v=pe.useRef(new Map).current;return pe.createElement(s,{scope:x,itemMap:v,collectionRef:p},g)},l=e+"CollectionSlot",c=pe.forwardRef((h,x)=>{const{scope:g,children:p}=h,v=i(l,g),y=tT(x,v.collectionRef);return pe.createElement(w5,{ref:y},p)}),d=e+"CollectionItemSlot",f="data-radix-collection-item",u=pe.forwardRef((h,x)=>{const{scope:g,children:p,...v}=h,y=pe.useRef(null),b=tT(x,y),j=i(d,g);return pe.useEffect(()=>(j.itemMap.set(y,{ref:y,...v}),()=>void j.itemMap.delete(y))),pe.createElement(w5,{[f]:"",ref:b},p)});function m(h){const x=i(e+"CollectionConsumer",h);return pe.useCallback(()=>{const p=x.collectionRef.current;if(!p)return[];const v=Array.from(p.querySelectorAll(`[${f}]`));return Array.from(x.itemMap.values()).sort((j,C)=>v.indexOf(j.ref.current)-v.indexOf(C.ref.current))},[x.collectionRef,x.itemMap])}return[{Provider:o,Slot:c,ItemSlot:u},m,a]}function NX(e,t){typeof e=="function"?e(t):e!=null&&(e.current=t)}function GF(...e){return t=>e.forEach(n=>NX(n,t))}function Uo(...e){return w.useCallback(GF(...e),e)}function SX(e,t=[]){let n=[];function a(i,o){const l=w.createContext(o),c=n.length;n=[...n,o];function d(u){const{scope:m,children:h,...x}=u,g=(m==null?void 0:m[e][c])||l,p=w.useMemo(()=>x,Object.values(x));return w.createElement(g.Provider,{value:p},h)}function f(u,m){const h=(m==null?void 0:m[e][c])||l,x=w.useContext(h);if(x)return x;if(o!==void 0)return o;throw new Error(`\`${u}\` must be used within \`${i}\``)}return d.displayName=i+"Provider",[d,f]}const s=()=>{const i=n.map(o=>w.createContext(o));return function(l){const c=(l==null?void 0:l[e])||i;return w.useMemo(()=>({[`__scope${e}`]:{...l,[e]:c}}),[l,c])}};return s.scopeName=e,[a,CX(s,...t)]}function CX(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const a=e.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const o=a.reduce((l,{useScope:c,scopeName:d})=>{const u=c(i)[`__scope${d}`];return{...l,...u}},{});return w.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return n.scopeName=t.scopeName,n}const AX=w.createContext(void 0);function EX(e){const t=w.useContext(AX);return e||t||"ltr"}function Zw(e,t,{checkForDefaultPrevented:n=!0}={}){return function(s){if(e==null||e(s),n===!1||!s.defaultPrevented)return t==null?void 0:t(s)}}function PX(e,t){typeof e=="function"?e(t):e!=null&&(e.current=t)}function KF(...e){return t=>e.forEach(n=>PX(n,t))}function TX(...e){return w.useCallback(KF(...e),e)}const YF=w.forwardRef((e,t)=>{const{children:n,...a}=e,s=w.Children.toArray(n),i=s.find(DX);if(i){const o=i.props.children,l=s.map(c=>c===i?w.Children.count(o)>1?w.Children.only(null):w.isValidElement(o)?o.props.children:null:c);return w.createElement(S5,at({},a,{ref:t}),w.isValidElement(o)?w.cloneElement(o,void 0,l):null)}return w.createElement(S5,at({},a,{ref:t}),n)});YF.displayName="Slot";const S5=w.forwardRef((e,t)=>{const{children:n,...a}=e;return w.isValidElement(n)?w.cloneElement(n,{...kX(a,n.props),ref:t?KF(t,n.ref):n.ref}):w.Children.count(n)>1?w.Children.only(null):null});S5.displayName="SlotClone";const IX=({children:e})=>w.createElement(w.Fragment,null,e);function DX(e){return w.isValidElement(e)&&e.type===IX}function kX(e,t){const n={...t};for(const a in t){const s=e[a],i=t[a];/^on[A-Z]/.test(a)?s&&i?n[a]=(...l)=>{i(...l),s(...l)}:s&&(n[a]=s):a==="style"?n[a]={...s,...i}:a==="className"&&(n[a]=[s,i].filter(Boolean).join(" "))}return{...e,...n}}const OX=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],_X=OX.reduce((e,t)=>{const n=w.forwardRef((a,s)=>{const{asChild:i,...o}=a,l=i?YF:t;return w.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),w.createElement(l,at({},o,{ref:s}))});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{});function LX(e,t){e&&zo.flushSync(()=>e.dispatchEvent(t))}function Al(e){const t=w.useRef(e);return w.useEffect(()=>{t.current=e}),w.useMemo(()=>(...n)=>{var a;return(a=t.current)===null||a===void 0?void 0:a.call(t,...n)},[])}function RX(e,t=globalThis==null?void 0:globalThis.document){const n=Al(e);w.useEffect(()=>{const a=s=>{s.key==="Escape"&&n(s)};return t.addEventListener("keydown",a),()=>t.removeEventListener("keydown",a)},[n,t])}const C5="dismissableLayer.update",FX="dismissableLayer.pointerDownOutside",MX="dismissableLayer.focusOutside";let rT;const $X=w.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),BX=w.forwardRef((e,t)=>{var n;const{disableOutsidePointerEvents:a=!1,onEscapeKeyDown:s,onPointerDownOutside:i,onFocusOutside:o,onInteractOutside:l,onDismiss:c,...d}=e,f=w.useContext($X),[u,m]=w.useState(null),h=(n=u==null?void 0:u.ownerDocument)!==null&&n!==void 0?n:globalThis==null?void 0:globalThis.document,[,x]=w.useState({}),g=TX(t,N=>m(N)),p=Array.from(f.layers),[v]=[...f.layersWithOutsidePointerEventsDisabled].slice(-1),y=p.indexOf(v),b=u?p.indexOf(u):-1,j=f.layersWithOutsidePointerEventsDisabled.size>0,C=b>=y,E=zX(N=>{const I=N.target,D=[...f.branches].some(T=>T.contains(I));!C||D||(i==null||i(N),l==null||l(N),N.defaultPrevented||c==null||c())},h),S=UX(N=>{const I=N.target;[...f.branches].some(T=>T.contains(I))||(o==null||o(N),l==null||l(N),N.defaultPrevented||c==null||c())},h);return RX(N=>{b===f.layers.size-1&&(s==null||s(N),!N.defaultPrevented&&c&&(N.preventDefault(),c()))},h),w.useEffect(()=>{if(u)return a&&(f.layersWithOutsidePointerEventsDisabled.size===0&&(rT=h.body.style.pointerEvents,h.body.style.pointerEvents="none"),f.layersWithOutsidePointerEventsDisabled.add(u)),f.layers.add(u),nT(),()=>{a&&f.layersWithOutsidePointerEventsDisabled.size===1&&(h.body.style.pointerEvents=rT)}},[u,h,a,f]),w.useEffect(()=>()=>{u&&(f.layers.delete(u),f.layersWithOutsidePointerEventsDisabled.delete(u),nT())},[u,f]),w.useEffect(()=>{const N=()=>x({});return document.addEventListener(C5,N),()=>document.removeEventListener(C5,N)},[]),w.createElement(_X.div,at({},d,{ref:g,style:{pointerEvents:j?C?"auto":"none":void 0,...e.style},onFocusCapture:Zw(e.onFocusCapture,S.onFocusCapture),onBlurCapture:Zw(e.onBlurCapture,S.onBlurCapture),onPointerDownCapture:Zw(e.onPointerDownCapture,E.onPointerDownCapture)}))});function zX(e,t=globalThis==null?void 0:globalThis.document){const n=Al(e),a=w.useRef(!1),s=w.useRef(()=>{});return w.useEffect(()=>{const i=l=>{if(l.target&&!a.current){let d=function(){XF(FX,n,c,{discrete:!0})};const c={originalEvent:l};l.pointerType==="touch"?(t.removeEventListener("click",s.current),s.current=d,t.addEventListener("click",s.current,{once:!0})):d()}a.current=!1},o=window.setTimeout(()=>{t.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(o),t.removeEventListener("pointerdown",i),t.removeEventListener("click",s.current)}},[t,n]),{onPointerDownCapture:()=>a.current=!0}}function UX(e,t=globalThis==null?void 0:globalThis.document){const n=Al(e),a=w.useRef(!1);return w.useEffect(()=>{const s=i=>{i.target&&!a.current&&XF(MX,n,{originalEvent:i},{discrete:!1})};return t.addEventListener("focusin",s),()=>t.removeEventListener("focusin",s)},[t,n]),{onFocusCapture:()=>a.current=!0,onBlurCapture:()=>a.current=!1}}function nT(){const e=new CustomEvent(C5);document.dispatchEvent(e)}function XF(e,t,n,{discrete:a}){const s=n.originalEvent.target,i=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&s.addEventListener(e,t,{once:!0}),a?LX(s,i):s.dispatchEvent(i)}let e2=0;function VX(){w.useEffect(()=>{var e,t;const n=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",(e=n[0])!==null&&e!==void 0?e:aT()),document.body.insertAdjacentElement("beforeend",(t=n[1])!==null&&t!==void 0?t:aT()),e2++,()=>{e2===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(a=>a.remove()),e2--}},[])}function aT(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.cssText="outline: none; opacity: 0; position: fixed; pointer-events: none",e}function qX(e,t){typeof e=="function"?e(t):e!=null&&(e.current=t)}function QF(...e){return t=>e.forEach(n=>qX(n,t))}function WX(...e){return w.useCallback(QF(...e),e)}const JF=w.forwardRef((e,t)=>{const{children:n,...a}=e,s=w.Children.toArray(n),i=s.find(GX);if(i){const o=i.props.children,l=s.map(c=>c===i?w.Children.count(o)>1?w.Children.only(null):w.isValidElement(o)?o.props.children:null:c);return w.createElement(A5,at({},a,{ref:t}),w.isValidElement(o)?w.cloneElement(o,void 0,l):null)}return w.createElement(A5,at({},a,{ref:t}),n)});JF.displayName="Slot";const A5=w.forwardRef((e,t)=>{const{children:n,...a}=e;return w.isValidElement(n)?w.cloneElement(n,{...KX(a,n.props),ref:t?QF(t,n.ref):n.ref}):w.Children.count(n)>1?w.Children.only(null):null});A5.displayName="SlotClone";const HX=({children:e})=>w.createElement(w.Fragment,null,e);function GX(e){return w.isValidElement(e)&&e.type===HX}function KX(e,t){const n={...t};for(const a in t){const s=e[a],i=t[a];/^on[A-Z]/.test(a)?s&&i?n[a]=(...l)=>{i(...l),s(...l)}:s&&(n[a]=s):a==="style"?n[a]={...s,...i}:a==="className"&&(n[a]=[s,i].filter(Boolean).join(" "))}return{...e,...n}}const YX=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],XX=YX.reduce((e,t)=>{const n=w.forwardRef((a,s)=>{const{asChild:i,...o}=a,l=i?JF:t;return w.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),w.createElement(l,at({},o,{ref:s}))});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{}),t2="focusScope.autoFocusOnMount",r2="focusScope.autoFocusOnUnmount",sT={bubbles:!1,cancelable:!0},QX=w.forwardRef((e,t)=>{const{loop:n=!1,trapped:a=!1,onMountAutoFocus:s,onUnmountAutoFocus:i,...o}=e,[l,c]=w.useState(null),d=Al(s),f=Al(i),u=w.useRef(null),m=WX(t,g=>c(g)),h=w.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;w.useEffect(()=>{if(a){let g=function(b){if(h.paused||!l)return;const j=b.target;l.contains(j)?u.current=j:rc(u.current,{select:!0})},p=function(b){if(h.paused||!l)return;const j=b.relatedTarget;j!==null&&(l.contains(j)||rc(u.current,{select:!0}))},v=function(b){const j=document.activeElement;for(const C of b)C.removedNodes.length>0&&(l!=null&&l.contains(j)||rc(l))};document.addEventListener("focusin",g),document.addEventListener("focusout",p);const y=new MutationObserver(v);return l&&y.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",g),document.removeEventListener("focusout",p),y.disconnect()}}},[a,l,h.paused]),w.useEffect(()=>{if(l){oT.add(h);const g=document.activeElement;if(!l.contains(g)){const v=new CustomEvent(t2,sT);l.addEventListener(t2,d),l.dispatchEvent(v),v.defaultPrevented||(JX(nQ(ZF(l)),{select:!0}),document.activeElement===g&&rc(l))}return()=>{l.removeEventListener(t2,d),setTimeout(()=>{const v=new CustomEvent(r2,sT);l.addEventListener(r2,f),l.dispatchEvent(v),v.defaultPrevented||rc(g??document.body,{select:!0}),l.removeEventListener(r2,f),oT.remove(h)},0)}}},[l,d,f,h]);const x=w.useCallback(g=>{if(!n&&!a||h.paused)return;const p=g.key==="Tab"&&!g.altKey&&!g.ctrlKey&&!g.metaKey,v=document.activeElement;if(p&&v){const y=g.currentTarget,[b,j]=ZX(y);b&&j?!g.shiftKey&&v===j?(g.preventDefault(),n&&rc(b,{select:!0})):g.shiftKey&&v===b&&(g.preventDefault(),n&&rc(j,{select:!0})):v===y&&g.preventDefault()}},[n,a,h.paused]);return w.createElement(XX.div,at({tabIndex:-1},o,{ref:m,onKeyDown:x}))});function JX(e,{select:t=!1}={}){const n=document.activeElement;for(const a of e)if(rc(a,{select:t}),document.activeElement!==n)return}function ZX(e){const t=ZF(e),n=iT(t,e),a=iT(t.reverse(),e);return[n,a]}function ZF(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:a=>{const s=a.tagName==="INPUT"&&a.type==="hidden";return a.disabled||a.hidden||s?NodeFilter.FILTER_SKIP:a.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function iT(e,t){for(const n of e)if(!eQ(n,{upTo:t}))return n}function eQ(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function tQ(e){return e instanceof HTMLInputElement&&"select"in e}function rc(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&tQ(e)&&t&&e.select()}}const oT=rQ();function rQ(){let e=[];return{add(t){const n=e[0];t!==n&&(n==null||n.pause()),e=lT(e,t),e.unshift(t)},remove(t){var n;e=lT(e,t),(n=e[0])===null||n===void 0||n.resume()}}}function lT(e,t){const n=[...e],a=n.indexOf(t);return a!==-1&&n.splice(a,1),n}function nQ(e){return e.filter(t=>t.tagName!=="A")}const aQ=globalThis!=null&&globalThis.document?w.useLayoutEffect:()=>{},sQ=Mo["useId".toString()]||(()=>{});let iQ=0;function eM(e){const[t,n]=w.useState(sQ());return aQ(()=>{e||n(a=>a??String(iQ++))},[e]),e||(t?`radix-${t}`:"")}const oQ=["top","right","bottom","left"],$c=Math.min,As=Math.max,yy=Math.round,Vg=Math.floor,_o=e=>({x:e,y:e}),lQ={left:"right",right:"left",bottom:"top",top:"bottom"},cQ={start:"end",end:"start"};function E5(e,t,n){return As(e,$c(t,n))}function El(e,t){return typeof e=="function"?e(t):e}function Pl(e){return e.split("-")[0]}function Um(e){return e.split("-")[1]}function GA(e){return e==="x"?"y":"x"}function KA(e){return e==="y"?"height":"width"}const dQ=new Set(["top","bottom"]);function Eo(e){return dQ.has(Pl(e))?"y":"x"}function YA(e){return GA(Eo(e))}function uQ(e,t,n){n===void 0&&(n=!1);const a=Um(e),s=YA(e),i=KA(s);let o=s==="x"?a===(n?"end":"start")?"right":"left":a==="start"?"bottom":"top";return t.reference[i]>t.floating[i]&&(o=by(o)),[o,by(o)]}function fQ(e){const t=by(e);return[P5(e),t,P5(t)]}function P5(e){return e.replace(/start|end/g,t=>cQ[t])}const cT=["left","right"],dT=["right","left"],mQ=["top","bottom"],hQ=["bottom","top"];function pQ(e,t,n){switch(e){case"top":case"bottom":return n?t?dT:cT:t?cT:dT;case"left":case"right":return t?mQ:hQ;default:return[]}}function vQ(e,t,n,a){const s=Um(e);let i=pQ(Pl(e),n==="start",a);return s&&(i=i.map(o=>o+"-"+s),t&&(i=i.concat(i.map(P5)))),i}function by(e){return e.replace(/left|right|bottom|top/g,t=>lQ[t])}function xQ(e){return{top:0,right:0,bottom:0,left:0,...e}}function tM(e){return typeof e!="number"?xQ(e):{top:e,right:e,bottom:e,left:e}}function jy(e){const{x:t,y:n,width:a,height:s}=e;return{width:a,height:s,top:n,left:t,right:t+a,bottom:n+s,x:t,y:n}}function uT(e,t,n){let{reference:a,floating:s}=e;const i=Eo(t),o=YA(t),l=KA(o),c=Pl(t),d=i==="y",f=a.x+a.width/2-s.width/2,u=a.y+a.height/2-s.height/2,m=a[l]/2-s[l]/2;let h;switch(c){case"top":h={x:f,y:a.y-s.height};break;case"bottom":h={x:f,y:a.y+a.height};break;case"right":h={x:a.x+a.width,y:u};break;case"left":h={x:a.x-s.width,y:u};break;default:h={x:a.x,y:a.y}}switch(Um(t)){case"start":h[o]-=m*(n&&d?-1:1);break;case"end":h[o]+=m*(n&&d?-1:1);break}return h}const gQ=async(e,t,n)=>{const{placement:a="bottom",strategy:s="absolute",middleware:i=[],platform:o}=n,l=i.filter(Boolean),c=await(o.isRTL==null?void 0:o.isRTL(t));let d=await o.getElementRects({reference:e,floating:t,strategy:s}),{x:f,y:u}=uT(d,a,c),m=a,h={},x=0;for(let g=0;g<l.length;g++){const{name:p,fn:v}=l[g],{x:y,y:b,data:j,reset:C}=await v({x:f,y:u,initialPlacement:a,placement:m,strategy:s,middlewareData:h,rects:d,platform:o,elements:{reference:e,floating:t}});f=y??f,u=b??u,h={...h,[p]:{...h[p],...j}},C&&x<=50&&(x++,typeof C=="object"&&(C.placement&&(m=C.placement),C.rects&&(d=C.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:s}):C.rects),{x:f,y:u}=uT(d,m,c)),g=-1)}return{x:f,y:u,placement:m,strategy:s,middlewareData:h}};async function iv(e,t){var n;t===void 0&&(t={});const{x:a,y:s,platform:i,rects:o,elements:l,strategy:c}=e,{boundary:d="clippingAncestors",rootBoundary:f="viewport",elementContext:u="floating",altBoundary:m=!1,padding:h=0}=El(t,e),x=tM(h),p=l[m?u==="floating"?"reference":"floating":u],v=jy(await i.getClippingRect({element:(n=await(i.isElement==null?void 0:i.isElement(p)))==null||n?p:p.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(l.floating)),boundary:d,rootBoundary:f,strategy:c})),y=u==="floating"?{x:a,y:s,width:o.floating.width,height:o.floating.height}:o.reference,b=await(i.getOffsetParent==null?void 0:i.getOffsetParent(l.floating)),j=await(i.isElement==null?void 0:i.isElement(b))?await(i.getScale==null?void 0:i.getScale(b))||{x:1,y:1}:{x:1,y:1},C=jy(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:y,offsetParent:b,strategy:c}):y);return{top:(v.top-C.top+x.top)/j.y,bottom:(C.bottom-v.bottom+x.bottom)/j.y,left:(v.left-C.left+x.left)/j.x,right:(C.right-v.right+x.right)/j.x}}const yQ=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:a,placement:s,rects:i,platform:o,elements:l,middlewareData:c}=t,{element:d,padding:f=0}=El(e,t)||{};if(d==null)return{};const u=tM(f),m={x:n,y:a},h=YA(s),x=KA(h),g=await o.getDimensions(d),p=h==="y",v=p?"top":"left",y=p?"bottom":"right",b=p?"clientHeight":"clientWidth",j=i.reference[x]+i.reference[h]-m[h]-i.floating[x],C=m[h]-i.reference[h],E=await(o.getOffsetParent==null?void 0:o.getOffsetParent(d));let S=E?E[b]:0;(!S||!await(o.isElement==null?void 0:o.isElement(E)))&&(S=l.floating[b]||i.floating[x]);const N=j/2-C/2,I=S/2-g[x]/2-1,D=$c(u[v],I),T=$c(u[y],I),A=D,_=S-g[x]-T,k=S/2-g[x]/2+N,L=E5(A,k,_),$=!c.arrow&&Um(s)!=null&&k!==L&&i.reference[x]/2-(k<A?D:T)-g[x]/2<0,M=$?k<A?k-A:k-_:0;return{[h]:m[h]+M,data:{[h]:L,centerOffset:k-L-M,...$&&{alignmentOffset:M}},reset:$}}}),bQ=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,a;const{placement:s,middlewareData:i,rects:o,initialPlacement:l,platform:c,elements:d}=t,{mainAxis:f=!0,crossAxis:u=!0,fallbackPlacements:m,fallbackStrategy:h="bestFit",fallbackAxisSideDirection:x="none",flipAlignment:g=!0,...p}=El(e,t);if((n=i.arrow)!=null&&n.alignmentOffset)return{};const v=Pl(s),y=Eo(l),b=Pl(l)===l,j=await(c.isRTL==null?void 0:c.isRTL(d.floating)),C=m||(b||!g?[by(l)]:fQ(l)),E=x!=="none";!m&&E&&C.push(...vQ(l,g,x,j));const S=[l,...C],N=await iv(t,p),I=[];let D=((a=i.flip)==null?void 0:a.overflows)||[];if(f&&I.push(N[v]),u){const k=uQ(s,o,j);I.push(N[k[0]],N[k[1]])}if(D=[...D,{placement:s,overflows:I}],!I.every(k=>k<=0)){var T,A;const k=(((T=i.flip)==null?void 0:T.index)||0)+1,L=S[k];if(L&&(!(u==="alignment"?y!==Eo(L):!1)||D.every(B=>B.overflows[0]>0&&Eo(B.placement)===y)))return{data:{index:k,overflows:D},reset:{placement:L}};let $=(A=D.filter(M=>M.overflows[0]<=0).sort((M,B)=>M.overflows[1]-B.overflows[1])[0])==null?void 0:A.placement;if(!$)switch(h){case"bestFit":{var _;const M=(_=D.filter(B=>{if(E){const U=Eo(B.placement);return U===y||U==="y"}return!0}).map(B=>[B.placement,B.overflows.filter(U=>U>0).reduce((U,W)=>U+W,0)]).sort((B,U)=>B[1]-U[1])[0])==null?void 0:_[0];M&&($=M);break}case"initialPlacement":$=l;break}if(s!==$)return{reset:{placement:$}}}return{}}}};function fT(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function mT(e){return oQ.some(t=>e[t]>=0)}const jQ=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:n}=t,{strategy:a="referenceHidden",...s}=El(e,t);switch(a){case"referenceHidden":{const i=await iv(t,{...s,elementContext:"reference"}),o=fT(i,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:mT(o)}}}case"escaped":{const i=await iv(t,{...s,altBoundary:!0}),o=fT(i,n.floating);return{data:{escapedOffsets:o,escaped:mT(o)}}}default:return{}}}}},rM=new Set(["left","top"]);async function wQ(e,t){const{placement:n,platform:a,elements:s}=e,i=await(a.isRTL==null?void 0:a.isRTL(s.floating)),o=Pl(n),l=Um(n),c=Eo(n)==="y",d=rM.has(o)?-1:1,f=i&&c?-1:1,u=El(t,e);let{mainAxis:m,crossAxis:h,alignmentAxis:x}=typeof u=="number"?{mainAxis:u,crossAxis:0,alignmentAxis:null}:{mainAxis:u.mainAxis||0,crossAxis:u.crossAxis||0,alignmentAxis:u.alignmentAxis};return l&&typeof x=="number"&&(h=l==="end"?x*-1:x),c?{x:h*f,y:m*d}:{x:m*d,y:h*f}}const NQ=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,a;const{x:s,y:i,placement:o,middlewareData:l}=t,c=await wQ(t,e);return o===((n=l.offset)==null?void 0:n.placement)&&(a=l.arrow)!=null&&a.alignmentOffset?{}:{x:s+c.x,y:i+c.y,data:{...c,placement:o}}}}},SQ=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:a,placement:s}=t,{mainAxis:i=!0,crossAxis:o=!1,limiter:l={fn:p=>{let{x:v,y}=p;return{x:v,y}}},...c}=El(e,t),d={x:n,y:a},f=await iv(t,c),u=Eo(Pl(s)),m=GA(u);let h=d[m],x=d[u];if(i){const p=m==="y"?"top":"left",v=m==="y"?"bottom":"right",y=h+f[p],b=h-f[v];h=E5(y,h,b)}if(o){const p=u==="y"?"top":"left",v=u==="y"?"bottom":"right",y=x+f[p],b=x-f[v];x=E5(y,x,b)}const g=l.fn({...t,[m]:h,[u]:x});return{...g,data:{x:g.x-n,y:g.y-a,enabled:{[m]:i,[u]:o}}}}}},CQ=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:a,placement:s,rects:i,middlewareData:o}=t,{offset:l=0,mainAxis:c=!0,crossAxis:d=!0}=El(e,t),f={x:n,y:a},u=Eo(s),m=GA(u);let h=f[m],x=f[u];const g=El(l,t),p=typeof g=="number"?{mainAxis:g,crossAxis:0}:{mainAxis:0,crossAxis:0,...g};if(c){const b=m==="y"?"height":"width",j=i.reference[m]-i.floating[b]+p.mainAxis,C=i.reference[m]+i.reference[b]-p.mainAxis;h<j?h=j:h>C&&(h=C)}if(d){var v,y;const b=m==="y"?"width":"height",j=rM.has(Pl(s)),C=i.reference[u]-i.floating[b]+(j&&((v=o.offset)==null?void 0:v[u])||0)+(j?0:p.crossAxis),E=i.reference[u]+i.reference[b]+(j?0:((y=o.offset)==null?void 0:y[u])||0)-(j?p.crossAxis:0);x<C?x=C:x>E&&(x=E)}return{[m]:h,[u]:x}}}},AQ=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var n,a;const{placement:s,rects:i,platform:o,elements:l}=t,{apply:c=()=>{},...d}=El(e,t),f=await iv(t,d),u=Pl(s),m=Um(s),h=Eo(s)==="y",{width:x,height:g}=i.floating;let p,v;u==="top"||u==="bottom"?(p=u,v=m===(await(o.isRTL==null?void 0:o.isRTL(l.floating))?"start":"end")?"left":"right"):(v=u,p=m==="end"?"top":"bottom");const y=g-f.top-f.bottom,b=x-f.left-f.right,j=$c(g-f[p],y),C=$c(x-f[v],b),E=!t.middlewareData.shift;let S=j,N=C;if((n=t.middlewareData.shift)!=null&&n.enabled.x&&(N=b),(a=t.middlewareData.shift)!=null&&a.enabled.y&&(S=y),E&&!m){const D=As(f.left,0),T=As(f.right,0),A=As(f.top,0),_=As(f.bottom,0);h?N=x-2*(D!==0||T!==0?D+T:As(f.left,f.right)):S=g-2*(A!==0||_!==0?A+_:As(f.top,f.bottom))}await c({...t,availableWidth:N,availableHeight:S});const I=await o.getDimensions(l.floating);return x!==I.width||g!==I.height?{reset:{rects:!0}}:{}}}};function l1(){return typeof window<"u"}function Vm(e){return nM(e)?(e.nodeName||"").toLowerCase():"#document"}function Os(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Vo(e){var t;return(t=(nM(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function nM(e){return l1()?e instanceof Node||e instanceof Os(e).Node:!1}function Ji(e){return l1()?e instanceof Element||e instanceof Os(e).Element:!1}function $o(e){return l1()?e instanceof HTMLElement||e instanceof Os(e).HTMLElement:!1}function hT(e){return!l1()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Os(e).ShadowRoot}const EQ=new Set(["inline","contents"]);function cx(e){const{overflow:t,overflowX:n,overflowY:a,display:s}=Zi(e);return/auto|scroll|overlay|hidden|clip/.test(t+a+n)&&!EQ.has(s)}const PQ=new Set(["table","td","th"]);function TQ(e){return PQ.has(Vm(e))}const IQ=[":popover-open",":modal"];function c1(e){return IQ.some(t=>{try{return e.matches(t)}catch{return!1}})}const DQ=["transform","translate","scale","rotate","perspective"],kQ=["transform","translate","scale","rotate","perspective","filter"],OQ=["paint","layout","strict","content"];function XA(e){const t=QA(),n=Ji(e)?Zi(e):e;return DQ.some(a=>n[a]?n[a]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||kQ.some(a=>(n.willChange||"").includes(a))||OQ.some(a=>(n.contain||"").includes(a))}function _Q(e){let t=Bc(e);for(;$o(t)&&!em(t);){if(XA(t))return t;if(c1(t))return null;t=Bc(t)}return null}function QA(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const LQ=new Set(["html","body","#document"]);function em(e){return LQ.has(Vm(e))}function Zi(e){return Os(e).getComputedStyle(e)}function d1(e){return Ji(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Bc(e){if(Vm(e)==="html")return e;const t=e.assignedSlot||e.parentNode||hT(e)&&e.host||Vo(e);return hT(t)?t.host:t}function aM(e){const t=Bc(e);return em(t)?e.ownerDocument?e.ownerDocument.body:e.body:$o(t)&&cx(t)?t:aM(t)}function ov(e,t,n){var a;t===void 0&&(t=[]),n===void 0&&(n=!0);const s=aM(e),i=s===((a=e.ownerDocument)==null?void 0:a.body),o=Os(s);if(i){const l=T5(o);return t.concat(o,o.visualViewport||[],cx(s)?s:[],l&&n?ov(l):[])}return t.concat(s,ov(s,[],n))}function T5(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function sM(e){const t=Zi(e);let n=parseFloat(t.width)||0,a=parseFloat(t.height)||0;const s=$o(e),i=s?e.offsetWidth:n,o=s?e.offsetHeight:a,l=yy(n)!==i||yy(a)!==o;return l&&(n=i,a=o),{width:n,height:a,$:l}}function JA(e){return Ji(e)?e:e.contextElement}function $f(e){const t=JA(e);if(!$o(t))return _o(1);const n=t.getBoundingClientRect(),{width:a,height:s,$:i}=sM(t);let o=(i?yy(n.width):n.width)/a,l=(i?yy(n.height):n.height)/s;return(!o||!Number.isFinite(o))&&(o=1),(!l||!Number.isFinite(l))&&(l=1),{x:o,y:l}}const RQ=_o(0);function iM(e){const t=Os(e);return!QA()||!t.visualViewport?RQ:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function FQ(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==Os(e)?!1:t}function iu(e,t,n,a){t===void 0&&(t=!1),n===void 0&&(n=!1);const s=e.getBoundingClientRect(),i=JA(e);let o=_o(1);t&&(a?Ji(a)&&(o=$f(a)):o=$f(e));const l=FQ(i,n,a)?iM(i):_o(0);let c=(s.left+l.x)/o.x,d=(s.top+l.y)/o.y,f=s.width/o.x,u=s.height/o.y;if(i){const m=Os(i),h=a&&Ji(a)?Os(a):a;let x=m,g=T5(x);for(;g&&a&&h!==x;){const p=$f(g),v=g.getBoundingClientRect(),y=Zi(g),b=v.left+(g.clientLeft+parseFloat(y.paddingLeft))*p.x,j=v.top+(g.clientTop+parseFloat(y.paddingTop))*p.y;c*=p.x,d*=p.y,f*=p.x,u*=p.y,c+=b,d+=j,x=Os(g),g=T5(x)}}return jy({width:f,height:u,x:c,y:d})}function ZA(e,t){const n=d1(e).scrollLeft;return t?t.left+n:iu(Vo(e)).left+n}function oM(e,t,n){n===void 0&&(n=!1);const a=e.getBoundingClientRect(),s=a.left+t.scrollLeft-(n?0:ZA(e,a)),i=a.top+t.scrollTop;return{x:s,y:i}}function MQ(e){let{elements:t,rect:n,offsetParent:a,strategy:s}=e;const i=s==="fixed",o=Vo(a),l=t?c1(t.floating):!1;if(a===o||l&&i)return n;let c={scrollLeft:0,scrollTop:0},d=_o(1);const f=_o(0),u=$o(a);if((u||!u&&!i)&&((Vm(a)!=="body"||cx(o))&&(c=d1(a)),$o(a))){const h=iu(a);d=$f(a),f.x=h.x+a.clientLeft,f.y=h.y+a.clientTop}const m=o&&!u&&!i?oM(o,c,!0):_o(0);return{width:n.width*d.x,height:n.height*d.y,x:n.x*d.x-c.scrollLeft*d.x+f.x+m.x,y:n.y*d.y-c.scrollTop*d.y+f.y+m.y}}function $Q(e){return Array.from(e.getClientRects())}function BQ(e){const t=Vo(e),n=d1(e),a=e.ownerDocument.body,s=As(t.scrollWidth,t.clientWidth,a.scrollWidth,a.clientWidth),i=As(t.scrollHeight,t.clientHeight,a.scrollHeight,a.clientHeight);let o=-n.scrollLeft+ZA(e);const l=-n.scrollTop;return Zi(a).direction==="rtl"&&(o+=As(t.clientWidth,a.clientWidth)-s),{width:s,height:i,x:o,y:l}}function zQ(e,t){const n=Os(e),a=Vo(e),s=n.visualViewport;let i=a.clientWidth,o=a.clientHeight,l=0,c=0;if(s){i=s.width,o=s.height;const d=QA();(!d||d&&t==="fixed")&&(l=s.offsetLeft,c=s.offsetTop)}return{width:i,height:o,x:l,y:c}}const UQ=new Set(["absolute","fixed"]);function VQ(e,t){const n=iu(e,!0,t==="fixed"),a=n.top+e.clientTop,s=n.left+e.clientLeft,i=$o(e)?$f(e):_o(1),o=e.clientWidth*i.x,l=e.clientHeight*i.y,c=s*i.x,d=a*i.y;return{width:o,height:l,x:c,y:d}}function pT(e,t,n){let a;if(t==="viewport")a=zQ(e,n);else if(t==="document")a=BQ(Vo(e));else if(Ji(t))a=VQ(t,n);else{const s=iM(e);a={x:t.x-s.x,y:t.y-s.y,width:t.width,height:t.height}}return jy(a)}function lM(e,t){const n=Bc(e);return n===t||!Ji(n)||em(n)?!1:Zi(n).position==="fixed"||lM(n,t)}function qQ(e,t){const n=t.get(e);if(n)return n;let a=ov(e,[],!1).filter(l=>Ji(l)&&Vm(l)!=="body"),s=null;const i=Zi(e).position==="fixed";let o=i?Bc(e):e;for(;Ji(o)&&!em(o);){const l=Zi(o),c=XA(o);!c&&l.position==="fixed"&&(s=null),(i?!c&&!s:!c&&l.position==="static"&&!!s&&UQ.has(s.position)||cx(o)&&!c&&lM(e,o))?a=a.filter(f=>f!==o):s=l,o=Bc(o)}return t.set(e,a),a}function WQ(e){let{element:t,boundary:n,rootBoundary:a,strategy:s}=e;const o=[...n==="clippingAncestors"?c1(t)?[]:qQ(t,this._c):[].concat(n),a],l=o[0],c=o.reduce((d,f)=>{const u=pT(t,f,s);return d.top=As(u.top,d.top),d.right=$c(u.right,d.right),d.bottom=$c(u.bottom,d.bottom),d.left=As(u.left,d.left),d},pT(t,l,s));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function HQ(e){const{width:t,height:n}=sM(e);return{width:t,height:n}}function GQ(e,t,n){const a=$o(t),s=Vo(t),i=n==="fixed",o=iu(e,!0,i,t);let l={scrollLeft:0,scrollTop:0};const c=_o(0);function d(){c.x=ZA(s)}if(a||!a&&!i)if((Vm(t)!=="body"||cx(s))&&(l=d1(t)),a){const h=iu(t,!0,i,t);c.x=h.x+t.clientLeft,c.y=h.y+t.clientTop}else s&&d();i&&!a&&s&&d();const f=s&&!a&&!i?oM(s,l):_o(0),u=o.left+l.scrollLeft-c.x-f.x,m=o.top+l.scrollTop-c.y-f.y;return{x:u,y:m,width:o.width,height:o.height}}function n2(e){return Zi(e).position==="static"}function vT(e,t){if(!$o(e)||Zi(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return Vo(e)===n&&(n=n.ownerDocument.body),n}function cM(e,t){const n=Os(e);if(c1(e))return n;if(!$o(e)){let s=Bc(e);for(;s&&!em(s);){if(Ji(s)&&!n2(s))return s;s=Bc(s)}return n}let a=vT(e,t);for(;a&&TQ(a)&&n2(a);)a=vT(a,t);return a&&em(a)&&n2(a)&&!XA(a)?n:a||_Q(e)||n}const KQ=async function(e){const t=this.getOffsetParent||cM,n=this.getDimensions,a=await n(e.floating);return{reference:GQ(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:a.width,height:a.height}}};function YQ(e){return Zi(e).direction==="rtl"}const XQ={convertOffsetParentRelativeRectToViewportRelativeRect:MQ,getDocumentElement:Vo,getClippingRect:WQ,getOffsetParent:cM,getElementRects:KQ,getClientRects:$Q,getDimensions:HQ,getScale:$f,isElement:Ji,isRTL:YQ};function dM(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function QQ(e,t){let n=null,a;const s=Vo(e);function i(){var l;clearTimeout(a),(l=n)==null||l.disconnect(),n=null}function o(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),i();const d=e.getBoundingClientRect(),{left:f,top:u,width:m,height:h}=d;if(l||t(),!m||!h)return;const x=Vg(u),g=Vg(s.clientWidth-(f+m)),p=Vg(s.clientHeight-(u+h)),v=Vg(f),b={rootMargin:-x+"px "+-g+"px "+-p+"px "+-v+"px",threshold:As(0,$c(1,c))||1};let j=!0;function C(E){const S=E[0].intersectionRatio;if(S!==c){if(!j)return o();S?o(!1,S):a=setTimeout(()=>{o(!1,1e-7)},1e3)}S===1&&!dM(d,e.getBoundingClientRect())&&o(),j=!1}try{n=new IntersectionObserver(C,{...b,root:s.ownerDocument})}catch{n=new IntersectionObserver(C,b)}n.observe(e)}return o(!0),i}function JQ(e,t,n,a){a===void 0&&(a={});const{ancestorScroll:s=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=a,d=JA(e),f=s||i?[...d?ov(d):[],...ov(t)]:[];f.forEach(v=>{s&&v.addEventListener("scroll",n,{passive:!0}),i&&v.addEventListener("resize",n)});const u=d&&l?QQ(d,n):null;let m=-1,h=null;o&&(h=new ResizeObserver(v=>{let[y]=v;y&&y.target===d&&h&&(h.unobserve(t),cancelAnimationFrame(m),m=requestAnimationFrame(()=>{var b;(b=h)==null||b.observe(t)})),n()}),d&&!c&&h.observe(d),h.observe(t));let x,g=c?iu(e):null;c&&p();function p(){const v=iu(e);g&&!dM(g,v)&&n(),g=v,x=requestAnimationFrame(p)}return n(),()=>{var v;f.forEach(y=>{s&&y.removeEventListener("scroll",n),i&&y.removeEventListener("resize",n)}),u==null||u(),(v=h)==null||v.disconnect(),h=null,c&&cancelAnimationFrame(x)}}const ZQ=NQ,eJ=SQ,tJ=bQ,rJ=AQ,nJ=jQ,xT=yQ,aJ=CQ,sJ=(e,t,n)=>{const a=new Map,s={platform:XQ,...n},i={...s.platform,_c:a};return gQ(e,t,{...s,platform:i})};var iJ=typeof document<"u",oJ=function(){},L0=iJ?w.useLayoutEffect:oJ;function wy(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,a,s;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(a=n;a--!==0;)if(!wy(e[a],t[a]))return!1;return!0}if(s=Object.keys(e),n=s.length,n!==Object.keys(t).length)return!1;for(a=n;a--!==0;)if(!{}.hasOwnProperty.call(t,s[a]))return!1;for(a=n;a--!==0;){const i=s[a];if(!(i==="_owner"&&e.$$typeof)&&!wy(e[i],t[i]))return!1}return!0}return e!==e&&t!==t}function uM(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function gT(e,t){const n=uM(e);return Math.round(t*n)/n}function a2(e){const t=w.useRef(e);return L0(()=>{t.current=e}),t}function lJ(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:a=[],platform:s,elements:{reference:i,floating:o}={},transform:l=!0,whileElementsMounted:c,open:d}=e,[f,u]=w.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[m,h]=w.useState(a);wy(m,a)||h(a);const[x,g]=w.useState(null),[p,v]=w.useState(null),y=w.useCallback(B=>{B!==E.current&&(E.current=B,g(B))},[]),b=w.useCallback(B=>{B!==S.current&&(S.current=B,v(B))},[]),j=i||x,C=o||p,E=w.useRef(null),S=w.useRef(null),N=w.useRef(f),I=c!=null,D=a2(c),T=a2(s),A=a2(d),_=w.useCallback(()=>{if(!E.current||!S.current)return;const B={placement:t,strategy:n,middleware:m};T.current&&(B.platform=T.current),sJ(E.current,S.current,B).then(U=>{const W={...U,isPositioned:A.current!==!1};k.current&&!wy(N.current,W)&&(N.current=W,zo.flushSync(()=>{u(W)}))})},[m,t,n,T,A]);L0(()=>{d===!1&&N.current.isPositioned&&(N.current.isPositioned=!1,u(B=>({...B,isPositioned:!1})))},[d]);const k=w.useRef(!1);L0(()=>(k.current=!0,()=>{k.current=!1}),[]),L0(()=>{if(j&&(E.current=j),C&&(S.current=C),j&&C){if(D.current)return D.current(j,C,_);_()}},[j,C,_,D,I]);const L=w.useMemo(()=>({reference:E,floating:S,setReference:y,setFloating:b}),[y,b]),$=w.useMemo(()=>({reference:j,floating:C}),[j,C]),M=w.useMemo(()=>{const B={position:n,left:0,top:0};if(!$.floating)return B;const U=gT($.floating,f.x),W=gT($.floating,f.y);return l?{...B,transform:"translate("+U+"px, "+W+"px)",...uM($.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:U,top:W}},[n,l,$.floating,f.x,f.y]);return w.useMemo(()=>({...f,update:_,refs:L,elements:$,floatingStyles:M}),[f,_,L,$,M])}const cJ=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:a,padding:s}=typeof e=="function"?e(n):e;return a&&t(a)?a.current!=null?xT({element:a.current,padding:s}).fn(n):{}:a?xT({element:a,padding:s}).fn(n):{}}}},dJ=(e,t)=>({...ZQ(e),options:[e,t]}),uJ=(e,t)=>({...eJ(e),options:[e,t]}),fJ=(e,t)=>({...aJ(e),options:[e,t]}),mJ=(e,t)=>({...tJ(e),options:[e,t]}),hJ=(e,t)=>({...rJ(e),options:[e,t]}),pJ=(e,t)=>({...nJ(e),options:[e,t]}),vJ=(e,t)=>({...cJ(e),options:[e,t]});function xJ(e,t){typeof e=="function"?e(t):e!=null&&(e.current=t)}function fM(...e){return t=>e.forEach(n=>xJ(n,t))}function mM(...e){return w.useCallback(fM(...e),e)}function gJ(e,t=[]){let n=[];function a(i,o){const l=w.createContext(o),c=n.length;n=[...n,o];function d(u){const{scope:m,children:h,...x}=u,g=(m==null?void 0:m[e][c])||l,p=w.useMemo(()=>x,Object.values(x));return w.createElement(g.Provider,{value:p},h)}function f(u,m){const h=(m==null?void 0:m[e][c])||l,x=w.useContext(h);if(x)return x;if(o!==void 0)return o;throw new Error(`\`${u}\` must be used within \`${i}\``)}return d.displayName=i+"Provider",[d,f]}const s=()=>{const i=n.map(o=>w.createContext(o));return function(l){const c=(l==null?void 0:l[e])||i;return w.useMemo(()=>({[`__scope${e}`]:{...l,[e]:c}}),[l,c])}};return s.scopeName=e,[a,yJ(s,...t)]}function yJ(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const a=e.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const o=a.reduce((l,{useScope:c,scopeName:d})=>{const u=c(i)[`__scope${d}`];return{...l,...u}},{});return w.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return n.scopeName=t.scopeName,n}const hM=w.forwardRef((e,t)=>{const{children:n,...a}=e,s=w.Children.toArray(n),i=s.find(jJ);if(i){const o=i.props.children,l=s.map(c=>c===i?w.Children.count(o)>1?w.Children.only(null):w.isValidElement(o)?o.props.children:null:c);return w.createElement(I5,at({},a,{ref:t}),w.isValidElement(o)?w.cloneElement(o,void 0,l):null)}return w.createElement(I5,at({},a,{ref:t}),n)});hM.displayName="Slot";const I5=w.forwardRef((e,t)=>{const{children:n,...a}=e;return w.isValidElement(n)?w.cloneElement(n,{...wJ(a,n.props),ref:t?fM(t,n.ref):n.ref}):w.Children.count(n)>1?w.Children.only(null):null});I5.displayName="SlotClone";const bJ=({children:e})=>w.createElement(w.Fragment,null,e);function jJ(e){return w.isValidElement(e)&&e.type===bJ}function wJ(e,t){const n={...t};for(const a in t){const s=e[a],i=t[a];/^on[A-Z]/.test(a)?s&&i?n[a]=(...l)=>{i(...l),s(...l)}:s&&(n[a]=s):a==="style"?n[a]={...s,...i}:a==="className"&&(n[a]=[s,i].filter(Boolean).join(" "))}return{...e,...n}}const NJ=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],pM=NJ.reduce((e,t)=>{const n=w.forwardRef((a,s)=>{const{asChild:i,...o}=a,l=i?hM:t;return w.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),w.createElement(l,at({},o,{ref:s}))});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{}),D5=globalThis!=null&&globalThis.document?w.useLayoutEffect:()=>{};function SJ(e){const[t,n]=w.useState(void 0);return D5(()=>{if(e){n({width:e.offsetWidth,height:e.offsetHeight});const a=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const i=s[0];let o,l;if("borderBoxSize"in i){const c=i.borderBoxSize,d=Array.isArray(c)?c[0]:c;o=d.inlineSize,l=d.blockSize}else o=e.offsetWidth,l=e.offsetHeight;n({width:o,height:l})});return a.observe(e,{box:"border-box"}),()=>a.unobserve(e)}else n(void 0)},[e]),t}const vM="Popper",[xM,gM]=gJ(vM),[CJ,yM]=xM(vM),AJ=e=>{const{__scopePopper:t,children:n}=e,[a,s]=w.useState(null);return w.createElement(CJ,{scope:t,anchor:a,onAnchorChange:s},n)},EJ="PopperAnchor",PJ=w.forwardRef((e,t)=>{const{__scopePopper:n,virtualRef:a,...s}=e,i=yM(EJ,n),o=w.useRef(null),l=mM(t,o);return w.useEffect(()=>{i.onAnchorChange((a==null?void 0:a.current)||o.current)}),a?null:w.createElement(pM.div,at({},s,{ref:l}))}),bM="PopperContent",[TJ,eke]=xM(bM),IJ=w.forwardRef((e,t)=>{var n,a,s,i,o,l,c,d;const{__scopePopper:f,side:u="bottom",sideOffset:m=0,align:h="center",alignOffset:x=0,arrowPadding:g=0,collisionBoundary:p=[],collisionPadding:v=0,sticky:y="partial",hideWhenDetached:b=!1,avoidCollisions:j=!0,onPlaced:C,...E}=e,S=yM(bM,f),[N,I]=w.useState(null),D=mM(t,ye=>I(ye)),[T,A]=w.useState(null),_=SJ(T),k=(n=_==null?void 0:_.width)!==null&&n!==void 0?n:0,L=(a=_==null?void 0:_.height)!==null&&a!==void 0?a:0,$=u+(h!=="center"?"-"+h:""),M=typeof v=="number"?v:{top:0,right:0,bottom:0,left:0,...v},B=Array.isArray(p)?p:[p],U=B.length>0,W={padding:M,boundary:B.filter(DJ),altBoundary:U},{refs:q,floatingStyles:R,placement:V,isPositioned:G,middlewareData:ee}=lJ({strategy:"fixed",placement:$,whileElementsMounted:JQ,elements:{reference:S.anchor},middleware:[dJ({mainAxis:m+L,alignmentAxis:x}),j&&uJ({mainAxis:!0,crossAxis:!1,limiter:y==="partial"?fJ():void 0,...W}),j&&mJ({...W}),hJ({...W,apply:({elements:ye,rects:le,availableWidth:ne,availableHeight:Ae})=>{const{width:Se,height:be}=le.reference,Re=ye.floating.style;Re.setProperty("--radix-popper-available-width",`${ne}px`),Re.setProperty("--radix-popper-available-height",`${Ae}px`),Re.setProperty("--radix-popper-anchor-width",`${Se}px`),Re.setProperty("--radix-popper-anchor-height",`${be}px`)}}),T&&vJ({element:T,padding:g}),kJ({arrowWidth:k,arrowHeight:L}),b&&pJ({strategy:"referenceHidden"})]}),[re,de]=jM(V),ue=Al(C);D5(()=>{G&&(ue==null||ue())},[G,ue]);const oe=(s=ee.arrow)===null||s===void 0?void 0:s.x,ge=(i=ee.arrow)===null||i===void 0?void 0:i.y,ve=((o=ee.arrow)===null||o===void 0?void 0:o.centerOffset)!==0,[xe,Oe]=w.useState();return D5(()=>{N&&Oe(window.getComputedStyle(N).zIndex)},[N]),w.createElement("div",{ref:q.setFloating,"data-radix-popper-content-wrapper":"",style:{...R,transform:G?R.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:xe,"--radix-popper-transform-origin":[(l=ee.transformOrigin)===null||l===void 0?void 0:l.x,(c=ee.transformOrigin)===null||c===void 0?void 0:c.y].join(" ")},dir:e.dir},w.createElement(TJ,{scope:f,placedSide:re,onArrowChange:A,arrowX:oe,arrowY:ge,shouldHideArrow:ve},w.createElement(pM.div,at({"data-side":re,"data-align":de},E,{ref:D,style:{...E.style,animation:G?void 0:"none",opacity:(d=ee.hide)!==null&&d!==void 0&&d.referenceHidden?0:void 0}}))))});function DJ(e){return e!==null}const kJ=e=>({name:"transformOrigin",options:e,fn(t){var n,a,s,i,o;const{placement:l,rects:c,middlewareData:d}=t,u=((n=d.arrow)===null||n===void 0?void 0:n.centerOffset)!==0,m=u?0:e.arrowWidth,h=u?0:e.arrowHeight,[x,g]=jM(l),p={start:"0%",center:"50%",end:"100%"}[g],v=((a=(s=d.arrow)===null||s===void 0?void 0:s.x)!==null&&a!==void 0?a:0)+m/2,y=((i=(o=d.arrow)===null||o===void 0?void 0:o.y)!==null&&i!==void 0?i:0)+h/2;let b="",j="";return x==="bottom"?(b=u?p:`${v}px`,j=`${-h}px`):x==="top"?(b=u?p:`${v}px`,j=`${c.floating.height+h}px`):x==="right"?(b=`${-h}px`,j=u?p:`${y}px`):x==="left"&&(b=`${c.floating.width+h}px`,j=u?p:`${y}px`),{data:{x:b,y:j}}}});function jM(e){const[t,n="center"]=e.split("-");return[t,n]}const OJ=AJ,_J=PJ,LJ=IJ;function RJ(e,t){typeof e=="function"?e(t):e!=null&&(e.current=t)}function FJ(...e){return t=>e.forEach(n=>RJ(n,t))}const wM=w.forwardRef((e,t)=>{const{children:n,...a}=e,s=w.Children.toArray(n),i=s.find($J);if(i){const o=i.props.children,l=s.map(c=>c===i?w.Children.count(o)>1?w.Children.only(null):w.isValidElement(o)?o.props.children:null:c);return w.createElement(k5,at({},a,{ref:t}),w.isValidElement(o)?w.cloneElement(o,void 0,l):null)}return w.createElement(k5,at({},a,{ref:t}),n)});wM.displayName="Slot";const k5=w.forwardRef((e,t)=>{const{children:n,...a}=e;return w.isValidElement(n)?w.cloneElement(n,{...BJ(a,n.props),ref:t?FJ(t,n.ref):n.ref}):w.Children.count(n)>1?w.Children.only(null):null});k5.displayName="SlotClone";const MJ=({children:e})=>w.createElement(w.Fragment,null,e);function $J(e){return w.isValidElement(e)&&e.type===MJ}function BJ(e,t){const n={...t};for(const a in t){const s=e[a],i=t[a];/^on[A-Z]/.test(a)?s&&i?n[a]=(...l)=>{i(...l),s(...l)}:s&&(n[a]=s):a==="style"?n[a]={...s,...i}:a==="className"&&(n[a]=[s,i].filter(Boolean).join(" "))}return{...e,...n}}const zJ=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],UJ=zJ.reduce((e,t)=>{const n=w.forwardRef((a,s)=>{const{asChild:i,...o}=a,l=i?wM:t;return w.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),w.createElement(l,at({},o,{ref:s}))});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{}),VJ=w.forwardRef((e,t)=>{var n;const{container:a=globalThis==null||(n=globalThis.document)===null||n===void 0?void 0:n.body,...s}=e;return a?AA.createPortal(w.createElement(UJ.div,at({},s,{ref:t})),a):null}),e4=w.forwardRef((e,t)=>{const{children:n,...a}=e,s=w.Children.toArray(n),i=s.find(WJ);if(i){const o=i.props.children,l=s.map(c=>c===i?w.Children.count(o)>1?w.Children.only(null):w.isValidElement(o)?o.props.children:null:c);return w.createElement(O5,at({},a,{ref:t}),w.isValidElement(o)?w.cloneElement(o,void 0,l):null)}return w.createElement(O5,at({},a,{ref:t}),n)});e4.displayName="Slot";const O5=w.forwardRef((e,t)=>{const{children:n,...a}=e;return w.isValidElement(n)?w.cloneElement(n,{...HJ(a,n.props),ref:t?GF(t,n.ref):n.ref}):w.Children.count(n)>1?w.Children.only(null):null});O5.displayName="SlotClone";const qJ=({children:e})=>w.createElement(w.Fragment,null,e);function WJ(e){return w.isValidElement(e)&&e.type===qJ}function HJ(e,t){const n={...t};for(const a in t){const s=e[a],i=t[a];/^on[A-Z]/.test(a)?s&&i?n[a]=(...l)=>{i(...l),s(...l)}:s&&(n[a]=s):a==="style"?n[a]={...s,...i}:a==="className"&&(n[a]=[s,i].filter(Boolean).join(" "))}return{...e,...n}}const GJ=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],to=GJ.reduce((e,t)=>{const n=w.forwardRef((a,s)=>{const{asChild:i,...o}=a,l=i?e4:t;return w.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),w.createElement(l,at({},o,{ref:s}))});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{});function yT({prop:e,defaultProp:t,onChange:n=()=>{}}){const[a,s]=KJ({defaultProp:t,onChange:n}),i=e!==void 0,o=i?e:a,l=Al(n),c=w.useCallback(d=>{if(i){const u=typeof d=="function"?d(e):d;u!==e&&l(u)}else s(d)},[i,e,s,l]);return[o,c]}function KJ({defaultProp:e,onChange:t}){const n=w.useState(e),[a]=n,s=w.useRef(a),i=Al(t);return w.useEffect(()=>{s.current!==a&&(i(a),s.current=a)},[a,s,i]),n}const zc=globalThis!=null&&globalThis.document?w.useLayoutEffect:()=>{};function YJ(e){const t=w.useRef({value:e,previous:e});return w.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}function XJ(e,t){typeof e=="function"?e(t):e!=null&&(e.current=t)}function QJ(...e){return t=>e.forEach(n=>XJ(n,t))}const NM=w.forwardRef((e,t)=>{const{children:n,...a}=e,s=w.Children.toArray(n),i=s.find(ZJ);if(i){const o=i.props.children,l=s.map(c=>c===i?w.Children.count(o)>1?w.Children.only(null):w.isValidElement(o)?o.props.children:null:c);return w.createElement(_5,at({},a,{ref:t}),w.isValidElement(o)?w.cloneElement(o,void 0,l):null)}return w.createElement(_5,at({},a,{ref:t}),n)});NM.displayName="Slot";const _5=w.forwardRef((e,t)=>{const{children:n,...a}=e;return w.isValidElement(n)?w.cloneElement(n,{...eZ(a,n.props),ref:t?QJ(t,n.ref):n.ref}):w.Children.count(n)>1?w.Children.only(null):null});_5.displayName="SlotClone";const JJ=({children:e})=>w.createElement(w.Fragment,null,e);function ZJ(e){return w.isValidElement(e)&&e.type===JJ}function eZ(e,t){const n={...t};for(const a in t){const s=e[a],i=t[a];/^on[A-Z]/.test(a)?s&&i?n[a]=(...l)=>{i(...l),s(...l)}:s&&(n[a]=s):a==="style"?n[a]={...s,...i}:a==="className"&&(n[a]=[s,i].filter(Boolean).join(" "))}return{...e,...n}}const tZ=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],rZ=tZ.reduce((e,t)=>{const n=w.forwardRef((a,s)=>{const{asChild:i,...o}=a,l=i?NM:t;return w.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),w.createElement(l,at({},o,{ref:s}))});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{}),nZ=w.forwardRef((e,t)=>w.createElement(rZ.span,at({},e,{ref:t,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...e.style}})));var aZ=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},nf=new WeakMap,qg=new WeakMap,Wg={},s2=0,SM=function(e){return e&&(e.host||SM(e.parentNode))},sZ=function(e,t){return t.map(function(n){if(e.contains(n))return n;var a=SM(n);return a&&e.contains(a)?a:(console.error("aria-hidden",n,"in not contained inside",e,". Doing nothing"),null)}).filter(function(n){return!!n})},iZ=function(e,t,n,a){var s=sZ(t,Array.isArray(e)?e:[e]);Wg[n]||(Wg[n]=new WeakMap);var i=Wg[n],o=[],l=new Set,c=new Set(s),d=function(u){!u||l.has(u)||(l.add(u),d(u.parentNode))};s.forEach(d);var f=function(u){!u||c.has(u)||Array.prototype.forEach.call(u.children,function(m){if(l.has(m))f(m);else try{var h=m.getAttribute(a),x=h!==null&&h!=="false",g=(nf.get(m)||0)+1,p=(i.get(m)||0)+1;nf.set(m,g),i.set(m,p),o.push(m),g===1&&x&&qg.set(m,!0),p===1&&m.setAttribute(n,"true"),x||m.setAttribute(a,"true")}catch(v){console.error("aria-hidden: cannot operate on ",m,v)}})};return f(t),l.clear(),s2++,function(){o.forEach(function(u){var m=nf.get(u)-1,h=i.get(u)-1;nf.set(u,m),i.set(u,h),m||(qg.has(u)||u.removeAttribute(a),qg.delete(u)),h||u.removeAttribute(n)}),s2--,s2||(nf=new WeakMap,nf=new WeakMap,qg=new WeakMap,Wg={})}},oZ=function(e,t,n){n===void 0&&(n="data-aria-hidden");var a=Array.from(Array.isArray(e)?e:[e]),s=t||aZ(e);return s?(a.push.apply(a,Array.from(s.querySelectorAll("[aria-live], script"))),iZ(a,s,n,"aria-hidden")):function(){return null}},Co=function(){return Co=Object.assign||function(t){for(var n,a=1,s=arguments.length;a<s;a++){n=arguments[a];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Co.apply(this,arguments)};function CM(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,a=Object.getOwnPropertySymbols(e);s<a.length;s++)t.indexOf(a[s])<0&&Object.prototype.propertyIsEnumerable.call(e,a[s])&&(n[a[s]]=e[a[s]]);return n}function gu(e,t,n,a){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function l(f){try{d(a.next(f))}catch(u){o(u)}}function c(f){try{d(a.throw(f))}catch(u){o(u)}}function d(f){f.done?i(f.value):s(f.value).then(l,c)}d((a=a.apply(e,t||[])).next())})}function lZ(e,t,n){if(n||arguments.length===2)for(var a=0,s=t.length,i;a<s;a++)(i||!(a in t))&&(i||(i=Array.prototype.slice.call(t,0,a)),i[a]=t[a]);return e.concat(i||Array.prototype.slice.call(t))}var R0="right-scroll-bar-position",F0="width-before-scroll-bar",cZ="with-scroll-bars-hidden",dZ="--removed-body-scroll-bar-size";function i2(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function uZ(e,t){var n=w.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(a){var s=n.value;s!==a&&(n.value=a,n.callback(a,s))}}}})[0];return n.callback=t,n.facade}var fZ=typeof window<"u"?w.useLayoutEffect:w.useEffect,bT=new WeakMap;function mZ(e,t){var n=uZ(t||null,function(a){return e.forEach(function(s){return i2(s,a)})});return fZ(function(){var a=bT.get(n);if(a){var s=new Set(a),i=new Set(e),o=n.current;s.forEach(function(l){i.has(l)||i2(l,null)}),i.forEach(function(l){s.has(l)||i2(l,o)})}bT.set(n,e)},[e]),n}function hZ(e){return e}function pZ(e,t){t===void 0&&(t=hZ);var n=[],a=!1,s={read:function(){if(a)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(i){var o=t(i,a);return n.push(o),function(){n=n.filter(function(l){return l!==o})}},assignSyncMedium:function(i){for(a=!0;n.length;){var o=n;n=[],o.forEach(i)}n={push:function(l){return i(l)},filter:function(){return n}}},assignMedium:function(i){a=!0;var o=[];if(n.length){var l=n;n=[],l.forEach(i),o=n}var c=function(){var f=o;o=[],f.forEach(i)},d=function(){return Promise.resolve().then(c)};d(),n={push:function(f){o.push(f),d()},filter:function(f){return o=o.filter(f),n}}}};return s}function vZ(e){e===void 0&&(e={});var t=pZ(null);return t.options=Co({async:!0,ssr:!1},e),t}var AM=function(e){var t=e.sideCar,n=CM(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var a=t.read();if(!a)throw new Error("Sidecar medium not found");return w.createElement(a,Co({},n))};AM.isSideCarExport=!0;function xZ(e,t){return e.useMedium(t),AM}var EM=vZ(),o2=function(){},u1=w.forwardRef(function(e,t){var n=w.useRef(null),a=w.useState({onScrollCapture:o2,onWheelCapture:o2,onTouchMoveCapture:o2}),s=a[0],i=a[1],o=e.forwardProps,l=e.children,c=e.className,d=e.removeScrollBar,f=e.enabled,u=e.shards,m=e.sideCar,h=e.noIsolation,x=e.inert,g=e.allowPinchZoom,p=e.as,v=p===void 0?"div":p,y=CM(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as"]),b=m,j=mZ([n,t]),C=Co(Co({},y),s);return w.createElement(w.Fragment,null,f&&w.createElement(b,{sideCar:EM,removeScrollBar:d,shards:u,noIsolation:h,inert:x,setCallbacks:i,allowPinchZoom:!!g,lockRef:n}),o?w.cloneElement(w.Children.only(l),Co(Co({},C),{ref:j})):w.createElement(v,Co({},C,{className:c,ref:j}),l))});u1.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};u1.classNames={fullWidth:F0,zeroRight:R0};var jT,gZ=function(){if(jT)return jT;if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function yZ(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=gZ();return t&&e.setAttribute("nonce",t),e}function bZ(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function jZ(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var wZ=function(){var e=0,t=null;return{add:function(n){e==0&&(t=yZ())&&(bZ(t,n),jZ(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},NZ=function(){var e=wZ();return function(t,n){w.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},PM=function(){var e=NZ(),t=function(n){var a=n.styles,s=n.dynamic;return e(a,s),null};return t},SZ={left:0,top:0,right:0,gap:0},l2=function(e){return parseInt(e||"",10)||0},CZ=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],a=t[e==="padding"?"paddingTop":"marginTop"],s=t[e==="padding"?"paddingRight":"marginRight"];return[l2(n),l2(a),l2(s)]},AZ=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return SZ;var t=CZ(e),n=document.documentElement.clientWidth,a=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,a-n+t[2]-t[0])}},EZ=PM(),Bf="data-scroll-locked",PZ=function(e,t,n,a){var s=e.left,i=e.top,o=e.right,l=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(cZ,` {
   overflow: hidden `).concat(a,`;
   padding-right: `).concat(l,"px ").concat(a,`;
  }
  body[`).concat(Bf,`] {
    overflow: hidden `).concat(a,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(a,";"),n==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(a,`;
    `),n==="padding"&&"padding-right: ".concat(l,"px ").concat(a,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(R0,` {
    right: `).concat(l,"px ").concat(a,`;
  }
  
  .`).concat(F0,` {
    margin-right: `).concat(l,"px ").concat(a,`;
  }
  
  .`).concat(R0," .").concat(R0,` {
    right: 0 `).concat(a,`;
  }
  
  .`).concat(F0," .").concat(F0,` {
    margin-right: 0 `).concat(a,`;
  }
  
  body[`).concat(Bf,`] {
    `).concat(dZ,": ").concat(l,`px;
  }
`)},wT=function(){var e=parseInt(document.body.getAttribute(Bf)||"0",10);return isFinite(e)?e:0},TZ=function(){w.useEffect(function(){return document.body.setAttribute(Bf,(wT()+1).toString()),function(){var e=wT()-1;e<=0?document.body.removeAttribute(Bf):document.body.setAttribute(Bf,e.toString())}},[])},IZ=function(e){var t=e.noRelative,n=e.noImportant,a=e.gapMode,s=a===void 0?"margin":a;TZ();var i=w.useMemo(function(){return AZ(s)},[s]);return w.createElement(EZ,{styles:PZ(i,!t,s,n?"":"!important")})},L5=!1;if(typeof window<"u")try{var Hg=Object.defineProperty({},"passive",{get:function(){return L5=!0,!0}});window.addEventListener("test",Hg,Hg),window.removeEventListener("test",Hg,Hg)}catch{L5=!1}var af=L5?{passive:!1}:!1,DZ=function(e){return e.tagName==="TEXTAREA"},TM=function(e,t){var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!DZ(e)&&n[t]==="visible")},kZ=function(e){return TM(e,"overflowY")},OZ=function(e){return TM(e,"overflowX")},NT=function(e,t){var n=t;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var a=IM(e,n);if(a){var s=DM(e,n),i=s[1],o=s[2];if(i>o)return!0}n=n.parentNode}while(n&&n!==document.body);return!1},_Z=function(e){var t=e.scrollTop,n=e.scrollHeight,a=e.clientHeight;return[t,n,a]},LZ=function(e){var t=e.scrollLeft,n=e.scrollWidth,a=e.clientWidth;return[t,n,a]},IM=function(e,t){return e==="v"?kZ(t):OZ(t)},DM=function(e,t){return e==="v"?_Z(t):LZ(t)},RZ=function(e,t){return e==="h"&&t==="rtl"?-1:1},FZ=function(e,t,n,a,s){var i=RZ(e,window.getComputedStyle(t).direction),o=i*a,l=n.target,c=t.contains(l),d=!1,f=o>0,u=0,m=0;do{var h=DM(e,l),x=h[0],g=h[1],p=h[2],v=g-p-i*x;(x||v)&&IM(e,l)&&(u+=v,m+=x),l=l.parentNode}while(!c&&l!==document.body||c&&(t.contains(l)||t===l));return(f&&(s&&u===0||!s&&o>u)||!f&&(s&&m===0||!s&&-o>m))&&(d=!0),d},Gg=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},ST=function(e){return[e.deltaX,e.deltaY]},CT=function(e){return e&&"current"in e?e.current:e},MZ=function(e,t){return e[0]===t[0]&&e[1]===t[1]},$Z=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},BZ=0,sf=[];function zZ(e){var t=w.useRef([]),n=w.useRef([0,0]),a=w.useRef(),s=w.useState(BZ++)[0],i=w.useState(function(){return PM()})[0],o=w.useRef(e);w.useEffect(function(){o.current=e},[e]),w.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(s));var g=lZ([e.lockRef.current],(e.shards||[]).map(CT),!0).filter(Boolean);return g.forEach(function(p){return p.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),g.forEach(function(p){return p.classList.remove("allow-interactivity-".concat(s))})}}},[e.inert,e.lockRef.current,e.shards]);var l=w.useCallback(function(g,p){if("touches"in g&&g.touches.length===2)return!o.current.allowPinchZoom;var v=Gg(g),y=n.current,b="deltaX"in g?g.deltaX:y[0]-v[0],j="deltaY"in g?g.deltaY:y[1]-v[1],C,E=g.target,S=Math.abs(b)>Math.abs(j)?"h":"v";if("touches"in g&&S==="h"&&E.type==="range")return!1;var N=NT(S,E);if(!N)return!0;if(N?C=S:(C=S==="v"?"h":"v",N=NT(S,E)),!N)return!1;if(!a.current&&"changedTouches"in g&&(b||j)&&(a.current=C),!C)return!0;var I=a.current||C;return FZ(I,p,g,I==="h"?b:j,!0)},[]),c=w.useCallback(function(g){var p=g;if(!(!sf.length||sf[sf.length-1]!==i)){var v="deltaY"in p?ST(p):Gg(p),y=t.current.filter(function(C){return C.name===p.type&&C.target===p.target&&MZ(C.delta,v)})[0];if(y&&y.should){p.cancelable&&p.preventDefault();return}if(!y){var b=(o.current.shards||[]).map(CT).filter(Boolean).filter(function(C){return C.contains(p.target)}),j=b.length>0?l(p,b[0]):!o.current.noIsolation;j&&p.cancelable&&p.preventDefault()}}},[]),d=w.useCallback(function(g,p,v,y){var b={name:g,delta:p,target:v,should:y};t.current.push(b),setTimeout(function(){t.current=t.current.filter(function(j){return j!==b})},1)},[]),f=w.useCallback(function(g){n.current=Gg(g),a.current=void 0},[]),u=w.useCallback(function(g){d(g.type,ST(g),g.target,l(g,e.lockRef.current))},[]),m=w.useCallback(function(g){d(g.type,Gg(g),g.target,l(g,e.lockRef.current))},[]);w.useEffect(function(){return sf.push(i),e.setCallbacks({onScrollCapture:u,onWheelCapture:u,onTouchMoveCapture:m}),document.addEventListener("wheel",c,af),document.addEventListener("touchmove",c,af),document.addEventListener("touchstart",f,af),function(){sf=sf.filter(function(g){return g!==i}),document.removeEventListener("wheel",c,af),document.removeEventListener("touchmove",c,af),document.removeEventListener("touchstart",f,af)}},[]);var h=e.removeScrollBar,x=e.inert;return w.createElement(w.Fragment,null,x?w.createElement(i,{styles:$Z(s)}):null,h?w.createElement(IZ,{gapMode:"margin"}):null)}const UZ=xZ(EM,zZ);var kM=w.forwardRef(function(e,t){return w.createElement(u1,Co({},e,{ref:t,sideCar:UZ}))});kM.classNames=u1.classNames;const VZ=kM,qZ=[" ","Enter","ArrowUp","ArrowDown"],WZ=[" ","Enter"],f1="Select",[m1,h1,HZ]=wX(f1),[qm,tke]=SX(f1,[HZ,gM]),t4=gM(),[GZ,yu]=qm(f1),[KZ,YZ]=qm(f1),XZ=e=>{const{__scopeSelect:t,children:n,open:a,defaultOpen:s,onOpenChange:i,value:o,defaultValue:l,onValueChange:c,dir:d,name:f,autoComplete:u,disabled:m,required:h}=e,x=t4(t),[g,p]=w.useState(null),[v,y]=w.useState(null),[b,j]=w.useState(!1),C=EX(d),[E=!1,S]=yT({prop:a,defaultProp:s,onChange:i}),[N,I]=yT({prop:o,defaultProp:l,onChange:c}),D=w.useRef(null),T=g?!!g.closest("form"):!0,[A,_]=w.useState(new Set),k=Array.from(A).map(L=>L.props.value).join(";");return w.createElement(OJ,x,w.createElement(GZ,{required:h,scope:t,trigger:g,onTriggerChange:p,valueNode:v,onValueNodeChange:y,valueNodeHasChildren:b,onValueNodeHasChildrenChange:j,contentId:eM(),value:N,onValueChange:I,open:E,onOpenChange:S,dir:C,triggerPointerDownPosRef:D,disabled:m},w.createElement(m1.Provider,{scope:t},w.createElement(KZ,{scope:e.__scopeSelect,onNativeOptionAdd:w.useCallback(L=>{_($=>new Set($).add(L))},[]),onNativeOptionRemove:w.useCallback(L=>{_($=>{const M=new Set($);return M.delete(L),M})},[])},n)),T?w.createElement(RM,{key:k,"aria-hidden":!0,required:h,tabIndex:-1,name:f,autoComplete:u,value:N,onChange:L=>I(L.target.value),disabled:m},N===void 0?w.createElement("option",{value:""}):null,Array.from(A)):null))},QZ="SelectTrigger",JZ=w.forwardRef((e,t)=>{const{__scopeSelect:n,disabled:a=!1,...s}=e,i=t4(n),o=yu(QZ,n),l=o.disabled||a,c=Uo(t,o.onTriggerChange),d=h1(n),[f,u,m]=FM(x=>{const g=d().filter(y=>!y.disabled),p=g.find(y=>y.value===o.value),v=MM(g,x,p);v!==void 0&&o.onValueChange(v.value)}),h=()=>{l||(o.onOpenChange(!0),m())};return w.createElement(_J,at({asChild:!0},i),w.createElement(to.button,at({type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":o.value===void 0?"":void 0},s,{ref:c,onClick:Va(s.onClick,x=>{x.currentTarget.focus()}),onPointerDown:Va(s.onPointerDown,x=>{const g=x.target;g.hasPointerCapture(x.pointerId)&&g.releasePointerCapture(x.pointerId),x.button===0&&x.ctrlKey===!1&&(h(),o.triggerPointerDownPosRef.current={x:Math.round(x.pageX),y:Math.round(x.pageY)},x.preventDefault())}),onKeyDown:Va(s.onKeyDown,x=>{const g=f.current!=="";!(x.ctrlKey||x.altKey||x.metaKey)&&x.key.length===1&&u(x.key),!(g&&x.key===" ")&&qZ.includes(x.key)&&(h(),x.preventDefault())})})))}),ZZ="SelectValue",eee=w.forwardRef((e,t)=>{const{__scopeSelect:n,className:a,style:s,children:i,placeholder:o,...l}=e,c=yu(ZZ,n),{onValueNodeHasChildrenChange:d}=c,f=i!==void 0,u=Uo(t,c.onValueNodeChange);return zc(()=>{d(f)},[d,f]),w.createElement(to.span,at({},l,{ref:u,style:{pointerEvents:"none"}}),c.value===void 0&&o!==void 0?o:i)}),tee=w.forwardRef((e,t)=>{const{__scopeSelect:n,children:a,...s}=e;return w.createElement(to.span,at({"aria-hidden":!0},s,{ref:t}),a||"▼")}),ree=e=>w.createElement(VJ,at({asChild:!0},e)),tm="SelectContent",nee=w.forwardRef((e,t)=>{const n=yu(tm,e.__scopeSelect),[a,s]=w.useState();if(zc(()=>{s(new DocumentFragment)},[]),!n.open){const i=a;return i?zo.createPortal(w.createElement(OM,{scope:e.__scopeSelect},w.createElement(m1.Slot,{scope:e.__scopeSelect},w.createElement("div",null,e.children))),i):null}return w.createElement(aee,at({},e,{ref:t}))}),ol=10,[OM,bu]=qm(tm),aee=w.forwardRef((e,t)=>{const{__scopeSelect:n,position:a="item-aligned",onCloseAutoFocus:s,onEscapeKeyDown:i,onPointerDownOutside:o,side:l,sideOffset:c,align:d,alignOffset:f,arrowPadding:u,collisionBoundary:m,collisionPadding:h,sticky:x,hideWhenDetached:g,avoidCollisions:p,...v}=e,y=yu(tm,n),[b,j]=w.useState(null),[C,E]=w.useState(null),S=Uo(t,de=>j(de)),[N,I]=w.useState(null),[D,T]=w.useState(null),A=h1(n),[_,k]=w.useState(!1),L=w.useRef(!1);w.useEffect(()=>{if(b)return oZ(b)},[b]),VX();const $=w.useCallback(de=>{const[ue,...oe]=A().map(xe=>xe.ref.current),[ge]=oe.slice(-1),ve=document.activeElement;for(const xe of de)if(xe===ve||(xe==null||xe.scrollIntoView({block:"nearest"}),xe===ue&&C&&(C.scrollTop=0),xe===ge&&C&&(C.scrollTop=C.scrollHeight),xe==null||xe.focus(),document.activeElement!==ve))return},[A,C]),M=w.useCallback(()=>$([N,b]),[$,N,b]);w.useEffect(()=>{_&&M()},[_,M]);const{onOpenChange:B,triggerPointerDownPosRef:U}=y;w.useEffect(()=>{if(b){let de={x:0,y:0};const ue=ge=>{var ve,xe,Oe,ye;de={x:Math.abs(Math.round(ge.pageX)-((ve=(xe=U.current)===null||xe===void 0?void 0:xe.x)!==null&&ve!==void 0?ve:0)),y:Math.abs(Math.round(ge.pageY)-((Oe=(ye=U.current)===null||ye===void 0?void 0:ye.y)!==null&&Oe!==void 0?Oe:0))}},oe=ge=>{de.x<=10&&de.y<=10?ge.preventDefault():b.contains(ge.target)||B(!1),document.removeEventListener("pointermove",ue),U.current=null};return U.current!==null&&(document.addEventListener("pointermove",ue),document.addEventListener("pointerup",oe,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",ue),document.removeEventListener("pointerup",oe,{capture:!0})}}},[b,B,U]),w.useEffect(()=>{const de=()=>B(!1);return window.addEventListener("blur",de),window.addEventListener("resize",de),()=>{window.removeEventListener("blur",de),window.removeEventListener("resize",de)}},[B]);const[W,q]=FM(de=>{const ue=A().filter(ve=>!ve.disabled),oe=ue.find(ve=>ve.ref.current===document.activeElement),ge=MM(ue,de,oe);ge&&setTimeout(()=>ge.ref.current.focus())}),R=w.useCallback((de,ue,oe)=>{const ge=!L.current&&!oe;(y.value!==void 0&&y.value===ue||ge)&&(I(de),ge&&(L.current=!0))},[y.value]),V=w.useCallback(()=>b==null?void 0:b.focus(),[b]),G=w.useCallback((de,ue,oe)=>{const ge=!L.current&&!oe;(y.value!==void 0&&y.value===ue||ge)&&T(de)},[y.value]),ee=a==="popper"?AT:see,re=ee===AT?{side:l,sideOffset:c,align:d,alignOffset:f,arrowPadding:u,collisionBoundary:m,collisionPadding:h,sticky:x,hideWhenDetached:g,avoidCollisions:p}:{};return w.createElement(OM,{scope:n,content:b,viewport:C,onViewportChange:E,itemRefCallback:R,selectedItem:N,onItemLeave:V,itemTextRefCallback:G,focusSelectedItem:M,selectedItemText:D,position:a,isPositioned:_,searchRef:W},w.createElement(VZ,{as:e4,allowPinchZoom:!0},w.createElement(QX,{asChild:!0,trapped:y.open,onMountAutoFocus:de=>{de.preventDefault()},onUnmountAutoFocus:Va(s,de=>{var ue;(ue=y.trigger)===null||ue===void 0||ue.focus({preventScroll:!0}),de.preventDefault()})},w.createElement(BX,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:de=>de.preventDefault(),onDismiss:()=>y.onOpenChange(!1)},w.createElement(ee,at({role:"listbox",id:y.contentId,"data-state":y.open?"open":"closed",dir:y.dir,onContextMenu:de=>de.preventDefault()},v,re,{onPlaced:()=>k(!0),ref:S,style:{display:"flex",flexDirection:"column",outline:"none",...v.style},onKeyDown:Va(v.onKeyDown,de=>{const ue=de.ctrlKey||de.altKey||de.metaKey;if(de.key==="Tab"&&de.preventDefault(),!ue&&de.key.length===1&&q(de.key),["ArrowUp","ArrowDown","Home","End"].includes(de.key)){let ge=A().filter(ve=>!ve.disabled).map(ve=>ve.ref.current);if(["ArrowUp","End"].includes(de.key)&&(ge=ge.slice().reverse()),["ArrowUp","ArrowDown"].includes(de.key)){const ve=de.target,xe=ge.indexOf(ve);ge=ge.slice(xe+1)}setTimeout(()=>$(ge)),de.preventDefault()}})}))))))}),see=w.forwardRef((e,t)=>{const{__scopeSelect:n,onPlaced:a,...s}=e,i=yu(tm,n),o=bu(tm,n),[l,c]=w.useState(null),[d,f]=w.useState(null),u=Uo(t,S=>f(S)),m=h1(n),h=w.useRef(!1),x=w.useRef(!0),{viewport:g,selectedItem:p,selectedItemText:v,focusSelectedItem:y}=o,b=w.useCallback(()=>{if(i.trigger&&i.valueNode&&l&&d&&g&&p&&v){const S=i.trigger.getBoundingClientRect(),N=d.getBoundingClientRect(),I=i.valueNode.getBoundingClientRect(),D=v.getBoundingClientRect();if(i.dir!=="rtl"){const ve=D.left-N.left,xe=I.left-ve,Oe=S.left-xe,ye=S.width+Oe,le=Math.max(ye,N.width),ne=window.innerWidth-ol,Ae=eT(xe,[ol,ne-le]);l.style.minWidth=ye+"px",l.style.left=Ae+"px"}else{const ve=N.right-D.right,xe=window.innerWidth-I.right-ve,Oe=window.innerWidth-S.right-xe,ye=S.width+Oe,le=Math.max(ye,N.width),ne=window.innerWidth-ol,Ae=eT(xe,[ol,ne-le]);l.style.minWidth=ye+"px",l.style.right=Ae+"px"}const T=m(),A=window.innerHeight-ol*2,_=g.scrollHeight,k=window.getComputedStyle(d),L=parseInt(k.borderTopWidth,10),$=parseInt(k.paddingTop,10),M=parseInt(k.borderBottomWidth,10),B=parseInt(k.paddingBottom,10),U=L+$+_+B+M,W=Math.min(p.offsetHeight*5,U),q=window.getComputedStyle(g),R=parseInt(q.paddingTop,10),V=parseInt(q.paddingBottom,10),G=S.top+S.height/2-ol,ee=A-G,re=p.offsetHeight/2,de=p.offsetTop+re,ue=L+$+de,oe=U-ue;if(ue<=G){const ve=p===T[T.length-1].ref.current;l.style.bottom="0px";const xe=d.clientHeight-g.offsetTop-g.offsetHeight,Oe=Math.max(ee,re+(ve?V:0)+xe+M),ye=ue+Oe;l.style.height=ye+"px"}else{const ve=p===T[0].ref.current;l.style.top="0px";const Oe=Math.max(G,L+g.offsetTop+(ve?R:0)+re)+oe;l.style.height=Oe+"px",g.scrollTop=ue-G+g.offsetTop}l.style.margin=`${ol}px 0`,l.style.minHeight=W+"px",l.style.maxHeight=A+"px",a==null||a(),requestAnimationFrame(()=>h.current=!0)}},[m,i.trigger,i.valueNode,l,d,g,p,v,i.dir,a]);zc(()=>b(),[b]);const[j,C]=w.useState();zc(()=>{d&&C(window.getComputedStyle(d).zIndex)},[d]);const E=w.useCallback(S=>{S&&x.current===!0&&(b(),y==null||y(),x.current=!1)},[b,y]);return w.createElement(iee,{scope:n,contentWrapper:l,shouldExpandOnScrollRef:h,onScrollButtonChange:E},w.createElement("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:j}},w.createElement(to.div,at({},s,{ref:u,style:{boxSizing:"border-box",maxHeight:"100%",...s.style}}))))}),AT=w.forwardRef((e,t)=>{const{__scopeSelect:n,align:a="start",collisionPadding:s=ol,...i}=e,o=t4(n);return w.createElement(LJ,at({},o,i,{ref:t,align:a,collisionPadding:s,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}}))}),[iee,r4]=qm(tm,{}),ET="SelectViewport",oee=w.forwardRef((e,t)=>{const{__scopeSelect:n,...a}=e,s=bu(ET,n),i=r4(ET,n),o=Uo(t,s.onViewportChange),l=w.useRef(0);return w.createElement(w.Fragment,null,w.createElement("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"}}),w.createElement(m1.Slot,{scope:n},w.createElement(to.div,at({"data-radix-select-viewport":"",role:"presentation"},a,{ref:o,style:{position:"relative",flex:1,overflow:"auto",...a.style},onScroll:Va(a.onScroll,c=>{const d=c.currentTarget,{contentWrapper:f,shouldExpandOnScrollRef:u}=i;if(u!=null&&u.current&&f){const m=Math.abs(l.current-d.scrollTop);if(m>0){const h=window.innerHeight-ol*2,x=parseFloat(f.style.minHeight),g=parseFloat(f.style.height),p=Math.max(x,g);if(p<h){const v=p+m,y=Math.min(h,v),b=v-y;f.style.height=y+"px",f.style.bottom==="0px"&&(d.scrollTop=b>0?b:0,f.style.justifyContent="flex-end")}}}l.current=d.scrollTop})}))))}),lee="SelectGroup",[rke,cee]=qm(lee),dee="SelectLabel",uee=w.forwardRef((e,t)=>{const{__scopeSelect:n,...a}=e,s=cee(dee,n);return w.createElement(to.div,at({id:s.id},a,{ref:t}))}),R5="SelectItem",[fee,_M]=qm(R5),mee=w.forwardRef((e,t)=>{const{__scopeSelect:n,value:a,disabled:s=!1,textValue:i,...o}=e,l=yu(R5,n),c=bu(R5,n),d=l.value===a,[f,u]=w.useState(i??""),[m,h]=w.useState(!1),x=Uo(t,v=>{var y;return(y=c.itemRefCallback)===null||y===void 0?void 0:y.call(c,v,a,s)}),g=eM(),p=()=>{s||(l.onValueChange(a),l.onOpenChange(!1))};return w.createElement(fee,{scope:n,value:a,disabled:s,textId:g,isSelected:d,onItemTextChange:w.useCallback(v=>{u(y=>{var b;return y||((b=v==null?void 0:v.textContent)!==null&&b!==void 0?b:"").trim()})},[])},w.createElement(m1.ItemSlot,{scope:n,value:a,disabled:s,textValue:f},w.createElement(to.div,at({role:"option","aria-labelledby":g,"data-highlighted":m?"":void 0,"aria-selected":d&&m,"data-state":d?"checked":"unchecked","aria-disabled":s||void 0,"data-disabled":s?"":void 0,tabIndex:s?void 0:-1},o,{ref:x,onFocus:Va(o.onFocus,()=>h(!0)),onBlur:Va(o.onBlur,()=>h(!1)),onPointerUp:Va(o.onPointerUp,p),onPointerMove:Va(o.onPointerMove,v=>{if(s){var y;(y=c.onItemLeave)===null||y===void 0||y.call(c)}else v.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Va(o.onPointerLeave,v=>{if(v.currentTarget===document.activeElement){var y;(y=c.onItemLeave)===null||y===void 0||y.call(c)}}),onKeyDown:Va(o.onKeyDown,v=>{var y;((y=c.searchRef)===null||y===void 0?void 0:y.current)!==""&&v.key===" "||(WZ.includes(v.key)&&p(),v.key===" "&&v.preventDefault())})}))))}),Kg="SelectItemText",hee=w.forwardRef((e,t)=>{const{__scopeSelect:n,className:a,style:s,...i}=e,o=yu(Kg,n),l=bu(Kg,n),c=_M(Kg,n),d=YZ(Kg,n),[f,u]=w.useState(null),m=Uo(t,v=>u(v),c.onItemTextChange,v=>{var y;return(y=l.itemTextRefCallback)===null||y===void 0?void 0:y.call(l,v,c.value,c.disabled)}),h=f==null?void 0:f.textContent,x=w.useMemo(()=>w.createElement("option",{key:c.value,value:c.value,disabled:c.disabled},h),[c.disabled,c.value,h]),{onNativeOptionAdd:g,onNativeOptionRemove:p}=d;return zc(()=>(g(x),()=>p(x)),[g,p,x]),w.createElement(w.Fragment,null,w.createElement(to.span,at({id:c.textId},i,{ref:m})),c.isSelected&&o.valueNode&&!o.valueNodeHasChildren?zo.createPortal(i.children,o.valueNode):null)}),pee="SelectItemIndicator",vee=w.forwardRef((e,t)=>{const{__scopeSelect:n,...a}=e;return _M(pee,n).isSelected?w.createElement(to.span,at({"aria-hidden":!0},a,{ref:t})):null}),PT="SelectScrollUpButton",xee=w.forwardRef((e,t)=>{const n=bu(PT,e.__scopeSelect),a=r4(PT,e.__scopeSelect),[s,i]=w.useState(!1),o=Uo(t,a.onScrollButtonChange);return zc(()=>{if(n.viewport&&n.isPositioned){let c=function(){const d=l.scrollTop>0;i(d)};const l=n.viewport;return c(),l.addEventListener("scroll",c),()=>l.removeEventListener("scroll",c)}},[n.viewport,n.isPositioned]),s?w.createElement(LM,at({},e,{ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=n;l&&c&&(l.scrollTop=l.scrollTop-c.offsetHeight)}})):null}),TT="SelectScrollDownButton",gee=w.forwardRef((e,t)=>{const n=bu(TT,e.__scopeSelect),a=r4(TT,e.__scopeSelect),[s,i]=w.useState(!1),o=Uo(t,a.onScrollButtonChange);return zc(()=>{if(n.viewport&&n.isPositioned){let c=function(){const d=l.scrollHeight-l.clientHeight,f=Math.ceil(l.scrollTop)<d;i(f)};const l=n.viewport;return c(),l.addEventListener("scroll",c),()=>l.removeEventListener("scroll",c)}},[n.viewport,n.isPositioned]),s?w.createElement(LM,at({},e,{ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=n;l&&c&&(l.scrollTop=l.scrollTop+c.offsetHeight)}})):null}),LM=w.forwardRef((e,t)=>{const{__scopeSelect:n,onAutoScroll:a,...s}=e,i=bu("SelectScrollButton",n),o=w.useRef(null),l=h1(n),c=w.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return w.useEffect(()=>()=>c(),[c]),zc(()=>{var d;const f=l().find(u=>u.ref.current===document.activeElement);f==null||(d=f.ref.current)===null||d===void 0||d.scrollIntoView({block:"nearest"})},[l]),w.createElement(to.div,at({"aria-hidden":!0},s,{ref:t,style:{flexShrink:0,...s.style},onPointerDown:Va(s.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(a,50))}),onPointerMove:Va(s.onPointerMove,()=>{var d;(d=i.onItemLeave)===null||d===void 0||d.call(i),o.current===null&&(o.current=window.setInterval(a,50))}),onPointerLeave:Va(s.onPointerLeave,()=>{c()})}))}),yee=w.forwardRef((e,t)=>{const{__scopeSelect:n,...a}=e;return w.createElement(to.div,at({"aria-hidden":!0},a,{ref:t}))}),RM=w.forwardRef((e,t)=>{const{value:n,...a}=e,s=w.useRef(null),i=Uo(t,s),o=YJ(n);return w.useEffect(()=>{const l=s.current,c=window.HTMLSelectElement.prototype,f=Object.getOwnPropertyDescriptor(c,"value").set;if(o!==n&&f){const u=new Event("change",{bubbles:!0});f.call(l,n),l.dispatchEvent(u)}},[o,n]),w.createElement(nZ,{asChild:!0},w.createElement("select",at({},a,{ref:i,defaultValue:n})))});RM.displayName="BubbleSelect";function FM(e){const t=Al(e),n=w.useRef(""),a=w.useRef(0),s=w.useCallback(o=>{const l=n.current+o;t(l),function c(d){n.current=d,window.clearTimeout(a.current),d!==""&&(a.current=window.setTimeout(()=>c(""),1e3))}(l)},[t]),i=w.useCallback(()=>{n.current="",window.clearTimeout(a.current)},[]);return w.useEffect(()=>()=>window.clearTimeout(a.current),[]),[n,s,i]}function MM(e,t,n){const s=t.length>1&&Array.from(t).every(d=>d===t[0])?t[0]:t,i=n?e.indexOf(n):-1;let o=bee(e,Math.max(i,0));s.length===1&&(o=o.filter(d=>d!==n));const c=o.find(d=>d.textValue.toLowerCase().startsWith(s.toLowerCase()));return c!==n?c:void 0}function bee(e,t){return e.map((n,a)=>e[(t+a)%e.length])}const jee=XZ,$M=JZ,wee=eee,Nee=tee,See=ree,BM=nee,Cee=oee,zM=uee,UM=mee,Aee=hee,Eee=vee,VM=xee,qM=gee,WM=yee,$e=jee,Be=wee,Fe=w.forwardRef(({className:e,children:t,...n},a)=>r.jsxs($M,{ref:a,className:He("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...n,children:[t,r.jsx(Nee,{asChild:!0,children:r.jsx(uF,{className:"h-4 w-4 opacity-50"})})]}));Fe.displayName=$M.displayName;const HM=w.forwardRef(({className:e,...t},n)=>r.jsx(VM,{ref:n,className:He("flex cursor-default items-center justify-center py-1",e),...t,children:r.jsx(hG,{className:"h-4 w-4"})}));HM.displayName=VM.displayName;const GM=w.forwardRef(({className:e,...t},n)=>r.jsx(qM,{ref:n,className:He("flex cursor-default items-center justify-center py-1",e),...t,children:r.jsx(uF,{className:"h-4 w-4"})}));GM.displayName=qM.displayName;const Me=w.forwardRef(({className:e,children:t,position:n="popper",...a},s)=>r.jsx(See,{children:r.jsxs(BM,{ref:s,className:He("relative z-50 max-h-96 min-w-[8rem] overflow-auto rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:n,...a,children:[r.jsx(HM,{}),r.jsx(Cee,{className:He("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),r.jsx(GM,{})]})}));Me.displayName=BM.displayName;const Pee=w.forwardRef(({className:e,...t},n)=>r.jsx(zM,{ref:n,className:He("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t}));Pee.displayName=zM.displayName;const K=w.forwardRef(({className:e,children:t,...n},a)=>r.jsxs(UM,{ref:a,className:He("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...n,children:[r.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:r.jsx(Eee,{children:r.jsx(n1,{className:"h-4 w-4"})})}),r.jsx(Aee,{children:t})]}));K.displayName=UM.displayName;const Tee=w.forwardRef(({className:e,...t},n)=>r.jsx(WM,{ref:n,className:He("-mx-1 my-1 h-px bg-muted",e),...t}));Tee.displayName=WM.displayName;var Iee="Label",KM=w.forwardRef((e,t)=>r.jsx(Nn.label,{...e,ref:t,onMouseDown:n=>{var s;n.target.closest("button, input, select, textarea")||((s=e.onMouseDown)==null||s.call(e,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));KM.displayName=Iee;var YM=KM;const Dee=r1("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Z=w.forwardRef(({className:e,...t},n)=>r.jsx(YM,{ref:n,className:He(Dee(),e),...t}));Z.displayName=YM.displayName;var Hn=(e=>(e.NEW="new",e.CONTACTED="contacted",e.QUALIFIED="qualified",e.PROPOSAL="proposal",e.NEGOTIATION="negotiation",e.CLOSED_WON="closed_won",e.CLOSED_LOST="closed_lost",e))(Hn||{});function ro(){const[e,t]=w.useState([]),[n,a]=w.useState([]),[s,i]=w.useState([]),[o,l]=w.useState([]),[c,d]=w.useState([]),[f,u]=w.useState([]),[m,h]=w.useState(!1);w.useEffect(()=>{x()},[]);const x=()=>{const A=[{id:"1",name:"Website Contact Form",type:"website",isActive:!0,trackingCode:"WEB_CONTACT",conversionRate:15.5,createdAt:new Date("2024-01-01")},{id:"2",name:"Facebook Ads",type:"advertising",isActive:!0,trackingCode:"FB_ADS",conversionRate:8.2,createdAt:new Date("2024-01-01")},{id:"3",name:"Customer Referral",type:"referral",isActive:!0,conversionRate:35.8,createdAt:new Date("2024-01-01")},{id:"4",name:"RV Show",type:"event",isActive:!0,trackingCode:"RV_SHOW_2024",conversionRate:22.1,createdAt:new Date("2024-01-01")},{id:"5",name:"Google Ads",type:"advertising",isActive:!0,trackingCode:"GOOGLE_ADS",conversionRate:12.3,createdAt:new Date("2024-01-01")},{id:"6",name:"Walk-in",type:"other",isActive:!0,conversionRate:45.2,createdAt:new Date("2024-01-01")}],_=[{id:"rep-001",name:"John Smith",email:"john.smith@dealership.com",phone:"(555) 123-4567",territory:"North Region",isActive:!0,targets:{monthly:10,quarterly:30,annual:120}},{id:"rep-002",name:"Sarah Johnson",email:"sarah.johnson@dealership.com",phone:"(555) 987-6543",territory:"South Region",isActive:!0,targets:{monthly:12,quarterly:36,annual:144}},{id:"rep-003",name:"Mike Davis",email:"mike.davis@dealership.com",phone:"(555) 456-7890",territory:"East Region",isActive:!0,targets:{monthly:8,quarterly:24,annual:96}}],k=un("renter-insight-leads",[{id:"1",firstName:"John",lastName:"Smith",email:"john.smith@email.com",phone:"(555) 123-4567",source:"Website Contact Form",sourceId:"1",status:Hn.NEW,assignedTo:"rep-001",notes:"Interested in Class A Motorhome, budget $150k-200k",score:85,lastActivity:new Date("2024-01-20"),customFields:{budget:"$150k-200k",timeframe:"3-6 months",experience:"First-time buyer"},createdAt:new Date("2024-01-15"),updatedAt:new Date("2024-01-20")},{id:"2",firstName:"Sarah",lastName:"Johnson",email:"sarah.j@email.com",phone:"(555) 987-6543",source:"Customer Referral",sourceId:"3",status:Hn.QUALIFIED,assignedTo:"rep-002",notes:"Looking for travel trailer under $50k, referred by Mike Davis",score:92,lastActivity:new Date("2024-01-18"),customFields:{budget:"Under $50k",timeframe:"1-3 months",experience:"Experienced RVer"},createdAt:new Date("2024-01-14"),updatedAt:new Date("2024-01-18")}]),L=un("renter-insight-activities",[{id:"1",leadId:"1",type:"call",description:"Initial qualification call",outcome:"positive",duration:25,completedDate:new Date("2024-01-20"),userId:"rep-001",createdAt:new Date("2024-01-20")},{id:"2",leadId:"2",type:"email",description:"Sent product brochures",outcome:"positive",completedDate:new Date("2024-01-18"),userId:"rep-002",createdAt:new Date("2024-01-18")}]),$=[{leadId:"1",totalScore:85,demographicScore:30,behaviorScore:25,engagementScore:30,lastCalculated:new Date("2024-01-20"),factors:[{factor:"Budget Match",points:25,reason:"Budget aligns with inventory"},{factor:"Response Time",points:20,reason:"Quick response to outreach"},{factor:"Engagement Level",points:15,reason:"High email open rates"}]}],M=[{id:"1",leadId:"1",userId:"rep-001",type:"follow_up",title:"Follow up on motorhome interest",description:"Schedule showroom visit",dueDate:new Date("2024-01-25"),isCompleted:!1,priority:"high",createdAt:new Date("2024-01-20")}];a(A),u(_),t(k),i(L),l($),d(M)},g=A=>{Wr("renter-insight-leads",A)},p=A=>{Wr("renter-insight-activities",A)},v=async A=>{h(!0);try{const _={id:Math.random().toString(36).substr(2,9),firstName:A.firstName||"",lastName:A.lastName||"",email:A.email||"",phone:A.phone||"",source:A.source||"",sourceId:A.sourceId||"",status:Hn.NEW,assignedTo:A.assignedTo,notes:A.notes||"",score:0,lastActivity:new Date,customFields:A.customFields||{},createdAt:new Date,updatedAt:new Date},k=[...e,_];return t(k),g(k),await j({leadId:_.id,type:"note",description:`Lead created from ${_.source}`,userId:"current-user"}),await C(_.id),_}finally{h(!1)}},y=async(A,_)=>{const k=e.map(L=>L.id===A?{...L,status:_,updatedAt:new Date}:L);t(k),g(k),await j({leadId:A,type:"status_change",description:`Status changed to ${_}`,userId:"current-user"})},b=async(A,_)=>{var L;const k=e.map($=>$.id===A?{...$,assignedTo:_,updatedAt:new Date}:$);t(k),g(k),await j({leadId:A,type:"note",description:`Lead assigned to ${(L=f.find($=>$.id===_))==null?void 0:L.name}`,userId:"current-user"})},j=async A=>{const _={id:Math.random().toString(36).substr(2,9),leadId:A.leadId||"",type:A.type||"note",description:A.description||"",outcome:A.outcome,duration:A.duration,scheduledDate:A.scheduledDate,completedDate:A.completedDate||new Date,userId:A.userId||"current-user",metadata:A.metadata,createdAt:new Date},k=[...s,_];i(k),p(k);const L=e.map($=>$.id===_.leadId?{...$,lastActivity:new Date,updatedAt:new Date}:$);t(L),g(L),await C(_.leadId)},C=async A=>{var re,de,ue;const _=e.find(oe=>oe.id===A);if(!_)return;const k=s.filter(oe=>oe.leadId===A);let L=0,$=0,M=0;const B=[];(re=_.customFields)!=null&&re.budget&&(L+=20,B.push({factor:"Budget Provided",points:20,reason:"Customer provided budget information"})),((de=_.customFields)==null?void 0:de.timeframe)==="1-3 months"?(L+=25,B.push({factor:"Short Timeframe",points:25,reason:"Ready to purchase soon"})):((ue=_.customFields)==null?void 0:ue.timeframe)==="3-6 months"&&(L+=15,B.push({factor:"Medium Timeframe",points:15,reason:"Moderate purchase timeline"})),k.filter(oe=>oe.type==="call").length>0&&($+=30,B.push({factor:"Phone Engagement",points:30,reason:"Participated in phone calls"})),k.filter(oe=>oe.type==="email").length>2&&($+=20,B.push({factor:"Email Engagement",points:20,reason:"Active email communication"})),k.filter(oe=>new Date(oe.createdAt).getTime()>Date.now()-7*24*60*60*1e3).length>0&&(M+=25,B.push({factor:"Recent Activity",points:25,reason:"Active in the last 7 days"}));const R=k.filter(oe=>oe.outcome==="positive").length;R>0&&(M+=R*10,B.push({factor:"Positive Interactions",points:R*10,reason:`${R} positive interactions`}));const V=L+$+M,G={leadId:A,totalScore:V,demographicScore:L,behaviorScore:$,engagementScore:M,lastCalculated:new Date,factors:B};l(oe=>oe.filter(ge=>ge.leadId!==A).concat(G));const ee=e.map(oe=>oe.id===A?{...oe,score:V,updatedAt:new Date}:oe);t(ee),g(ee)};return{leads:e,sources:n,activities:s,scores:o,reminders:c,salesReps:f,loading:m,createLead:v,updateLeadStatus:y,assignLead:b,logActivity:j,calculateLeadScore:C,createReminder:async A=>{const _={id:Math.random().toString(36).substr(2,9),leadId:A.leadId||"",userId:A.userId||"current-user",type:A.type||"follow_up",title:A.title||"",description:A.description||"",dueDate:A.dueDate||new Date,isCompleted:!1,priority:A.priority||"medium",createdAt:new Date};return d(k=>[...k,_]),_},completeReminder:async A=>{d(_=>_.map(k=>k.id===A?{...k,isCompleted:!0}:k))},getLeadsByRep:A=>e.filter(_=>_.assignedTo===A),getActivitiesByLead:A=>s.filter(_=>_.leadId===A),getRemindersByUser:A=>c.filter(_=>_.userId===A&&!_.isCompleted),getLeadScore:A=>o.find(_=>_.leadId===A)}}function Wm({onClose:e,onSuccess:t}){const{sources:n,salesReps:a,createLead:s}=ro(),{toast:i}=Ct(),[o,l]=w.useState(!1),[c,d]=w.useState({firstName:"",lastName:"",email:"",phone:"",source:"",sourceId:"",assignedTo:"",notes:"",customFields:{budget:"",timeframe:"",experience:"",interests:"",preferredContact:"email"}}),[f,u]=w.useState({}),m=()=>{const p={};return c.firstName.trim()||(p.firstName="First name is required"),c.lastName.trim()||(p.lastName="Last name is required"),c.email.trim()?/\S+@\S+\.\S+/.test(c.email)||(p.email="Please enter a valid email address"):p.email="Email is required",c.phone.trim()||(p.phone="Phone number is required"),c.sourceId||(p.sourceId="Lead source is required"),u(p),Object.keys(p).length===0},h=async p=>{if(p.preventDefault(),!m()){i({title:"Validation Error",description:"Please fill in all required fields correctly.",variant:"destructive"});return}l(!0);try{const v=n.find(j=>j.id===c.sourceId),y={firstName:c.firstName.trim(),lastName:c.lastName.trim(),email:c.email.trim().toLowerCase(),phone:c.phone.trim(),source:(v==null?void 0:v.name)||"",sourceId:c.sourceId,assignedTo:c.assignedTo||void 0,notes:c.notes.trim(),customFields:{...c.customFields,interests:c.customFields.interests.trim()}},b=await s(y);i({title:"Lead Created Successfully!",description:`${b.firstName} ${b.lastName} has been added to your CRM.`,variant:"default"}),t(b),e()}catch(v){console.error("Error creating lead:",v),i({title:"Error Creating Lead",description:"There was a problem creating the lead. Please try again.",variant:"destructive"})}finally{l(!1)}},x=(p,v)=>{d(y=>({...y,[p]:v})),f[p]&&u(y=>({...y,[p]:""}))},g=(p,v)=>{d(y=>({...y,customFields:{...y.customFields,[p]:v}}))};return r.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:r.jsxs(fe,{className:"w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[r.jsx(we,{children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsxs(Ne,{className:"text-xl flex items-center",children:[r.jsx(wa,{className:"h-5 w-5 mr-2 text-blue-500"}),"Add New Lead"]}),r.jsx(Ue,{children:"Create a new lead and start the sales process"})]}),r.jsx(J,{variant:"ghost",size:"sm",onClick:e,children:r.jsx($t,{className:"h-4 w-4"})})]})}),r.jsx(me,{children:r.jsxs("form",{onSubmit:h,className:"space-y-6",children:[r.jsxs("div",{className:"space-y-4",children:[r.jsxs("h3",{className:"text-lg font-semibold flex items-center",children:[r.jsx(wa,{className:"h-4 w-4 mr-2"}),"Contact Information"]}),r.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"firstName",children:"First Name *"}),r.jsx(je,{id:"firstName",value:c.firstName,onChange:p=>x("firstName",p.target.value),placeholder:"Enter first name",className:f.firstName?"border-red-500":""}),f.firstName&&r.jsx("p",{className:"text-sm text-red-500 mt-1",children:f.firstName})]}),r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"lastName",children:"Last Name *"}),r.jsx(je,{id:"lastName",value:c.lastName,onChange:p=>x("lastName",p.target.value),placeholder:"Enter last name",className:f.lastName?"border-red-500":""}),f.lastName&&r.jsx("p",{className:"text-sm text-red-500 mt-1",children:f.lastName})]})]}),r.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"email",children:"Email Address *"}),r.jsxs("div",{className:"relative",children:[r.jsx(en,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),r.jsx(je,{id:"email",type:"email",value:c.email,onChange:p=>x("email",p.target.value),placeholder:"Enter email address",className:`pl-10 ${f.email?"border-red-500":""}`})]}),f.email&&r.jsx("p",{className:"text-sm text-red-500 mt-1",children:f.email})]}),r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"phone",children:"Phone Number *"}),r.jsxs("div",{className:"relative",children:[r.jsx(Mm,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),r.jsx(je,{id:"phone",type:"tel",value:c.phone,onChange:p=>x("phone",p.target.value),placeholder:"Enter phone number",className:`pl-10 ${f.phone?"border-red-500":""}`})]}),f.phone&&r.jsx("p",{className:"text-sm text-red-500 mt-1",children:f.phone})]})]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("h3",{className:"text-lg font-semibold flex items-center",children:[r.jsx($A,{className:"h-4 w-4 mr-2"}),"Lead Details"]}),r.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"source",children:"Lead Source *"}),r.jsxs($e,{value:c.sourceId,onValueChange:p=>x("sourceId",p),children:[r.jsx(Fe,{className:f.sourceId?"border-red-500":"",children:r.jsx(Be,{placeholder:"Select lead source"})}),r.jsx(Me,{children:n.map(p=>r.jsx(K,{value:p.id,children:p.name},p.id))})]}),f.sourceId&&r.jsx("p",{className:"text-sm text-red-500 mt-1",children:f.sourceId})]}),r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"assignedTo",children:"Assign to Sales Rep"}),r.jsxs($e,{value:c.assignedTo,onValueChange:p=>x("assignedTo",p),children:[r.jsx(Fe,{children:r.jsx(Be,{placeholder:"Select sales rep (optional)"})}),r.jsxs(Me,{children:[r.jsx(K,{value:"",children:"Unassigned"}),a.map(p=>r.jsx(K,{value:p.id,children:p.name},p.id))]})]})]})]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("h3",{className:"text-lg font-semibold flex items-center",children:[r.jsx(Mt,{className:"h-4 w-4 mr-2"}),"Additional Information"]}),r.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"budget",children:"Budget Range"}),r.jsxs($e,{value:c.customFields.budget,onValueChange:p=>g("budget",p),children:[r.jsx(Fe,{children:r.jsx(Be,{placeholder:"Select budget range"})}),r.jsxs(Me,{children:[r.jsx(K,{value:"Under $50k",children:"Under $50k"}),r.jsx(K,{value:"$50k-$100k",children:"$50k-$100k"}),r.jsx(K,{value:"$100k-$150k",children:"$100k-$150k"}),r.jsx(K,{value:"$150k-$200k",children:"$150k-$200k"}),r.jsx(K,{value:"$200k+",children:"$200k+"})]})]})]}),r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"timeframe",children:"Purchase Timeframe"}),r.jsxs($e,{value:c.customFields.timeframe,onValueChange:p=>g("timeframe",p),children:[r.jsx(Fe,{children:r.jsx(Be,{placeholder:"Select timeframe"})}),r.jsxs(Me,{children:[r.jsx(K,{value:"Immediate",children:"Immediate (within 1 month)"}),r.jsx(K,{value:"1-3 months",children:"1-3 months"}),r.jsx(K,{value:"3-6 months",children:"3-6 months"}),r.jsx(K,{value:"6-12 months",children:"6-12 months"}),r.jsx(K,{value:"12+ months",children:"12+ months"})]})]})]})]}),r.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"experience",children:"RV Experience"}),r.jsxs($e,{value:c.customFields.experience,onValueChange:p=>g("experience",p),children:[r.jsx(Fe,{children:r.jsx(Be,{placeholder:"Select experience level"})}),r.jsxs(Me,{children:[r.jsx(K,{value:"First-time buyer",children:"First-time buyer"}),r.jsx(K,{value:"Some experience",children:"Some experience"}),r.jsx(K,{value:"Experienced RVer",children:"Experienced RVer"}),r.jsx(K,{value:"Expert/Full-timer",children:"Expert/Full-timer"})]})]})]}),r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"preferredContact",children:"Preferred Contact Method"}),r.jsxs($e,{value:c.customFields.preferredContact,onValueChange:p=>g("preferredContact",p),children:[r.jsx(Fe,{children:r.jsx(Be,{placeholder:"Select contact method"})}),r.jsxs(Me,{children:[r.jsx(K,{value:"email",children:"Email"}),r.jsx(K,{value:"phone",children:"Phone"}),r.jsx(K,{value:"text",children:"Text/SMS"}),r.jsx(K,{value:"any",children:"Any method"})]})]})]})]}),r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"interests",children:"Interests/Requirements"}),r.jsx(je,{id:"interests",value:c.customFields.interests,onChange:p=>g("interests",p.target.value),placeholder:"e.g., Class A Motorhome, Solar panels, Pet-friendly"})]})]}),r.jsx("div",{className:"space-y-4",children:r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"notes",children:"Notes"}),r.jsx(Xt,{id:"notes",value:c.notes,onChange:p=>x("notes",p.target.value),placeholder:"Add any additional notes about this lead...",rows:3})]})}),r.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t",children:[r.jsx(J,{type:"button",variant:"outline",onClick:e,disabled:o,children:"Cancel"}),r.jsx(J,{type:"submit",disabled:o,children:o?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Creating Lead..."]}):r.jsxs(r.Fragment,{children:[r.jsx(Pr,{className:"h-4 w-4 mr-2"}),"Create Lead"]})})]})]})})]})})}const kee=[{name:"Total Leads",value:"2,651",change:"+4.75%",changeType:"positive",icon:$n},{name:"Inventory Units",value:"847",change:"+54.02%",changeType:"positive",icon:Ra},{name:"Active Quotes",value:"124",change:"-1.39%",changeType:"negative",icon:qa},{name:"Monthly Revenue",value:"$405,091",change:"+10.18%",changeType:"positive",icon:Mt}],Oee=[{id:1,type:"lead",title:"New lead from website",description:"John Smith interested in Class A Motorhome",time:"2 minutes ago"},{id:2,type:"quote",title:"Quote sent to customer",description:"Quote #Q-2024-001 sent to Sarah Johnson",time:"15 minutes ago"},{id:3,type:"service",title:"Service appointment scheduled",description:"Annual maintenance for RV #VIN123456",time:"1 hour ago"},{id:4,type:"delivery",title:"Delivery completed",description:"Travel Trailer delivered to Mike Davis",time:"2 hours ago"}];function _ee(){const[e,t]=w.useState(!1),n=s=>{console.log("New lead created from dashboard:",s)},a=s=>{switch(s){case"add-lead":t(!0);break;case"add-inventory":window.location.href="/inventory";break;case"create-quote":window.location.href="/quotes";break;case"schedule-service":window.location.href="/service";break}};return r.jsxs("div",{className:"space-y-6",children:[e&&r.jsx(Wm,{onClose:()=>t(!1),onSuccess:n}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Dashboard"}),r.jsx("p",{className:"text-muted-foreground",children:"Welcome to your Renter Insight CRM/DMS dashboard"})]}),r.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:kee.map(s=>r.jsxs(fe,{children:[r.jsxs(we,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(Ne,{className:"text-sm font-medium",children:s.name}),r.jsx(s.icon,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsxs(me,{children:[r.jsx("div",{className:"text-2xl font-bold",children:s.value}),r.jsxs("p",{className:`text-xs ${s.changeType==="positive"?"text-green-600":"text-red-600"}`,children:[s.change," from last month"]})]})]},s.name))}),r.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[r.jsxs(fe,{children:[r.jsxs(we,{children:[r.jsx(Ne,{children:"Recent Activity"}),r.jsx(Ue,{children:"Latest updates from your dealership"})]}),r.jsx(me,{children:r.jsx("div",{className:"space-y-4",children:Oee.map(s=>r.jsxs("div",{className:"flex items-start space-x-3",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx("div",{className:"h-2 w-2 bg-primary rounded-full mt-2"})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("p",{className:"text-sm font-medium text-foreground",children:s.title}),r.jsx("p",{className:"text-sm text-muted-foreground",children:s.description}),r.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:s.time})]})]},s.id))})})]}),r.jsxs(fe,{children:[r.jsxs(we,{children:[r.jsx(Ne,{children:"Quick Actions"}),r.jsx(Ue,{children:"Common tasks and shortcuts"})]}),r.jsx(me,{children:r.jsxs("div",{className:"grid gap-3",children:[r.jsxs("button",{onClick:()=>a("add-lead"),className:"flex items-center justify-between p-3 text-left border rounded-lg hover:bg-accent transition-colors",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx($n,{className:"h-5 w-5 text-primary"}),r.jsx("span",{className:"font-medium",children:"Add New Lead"})]}),r.jsx(Nt,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsxs("button",{onClick:()=>a("add-inventory"),className:"flex items-center justify-between p-3 text-left border rounded-lg hover:bg-accent transition-colors",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(Ra,{className:"h-5 w-5 text-primary"}),r.jsx("span",{className:"font-medium",children:"Add Inventory"})]}),r.jsx("span",{className:"text-muted-foreground",children:"→"})]}),r.jsxs("button",{onClick:()=>a("create-quote"),className:"flex items-center justify-between p-3 text-left border rounded-lg hover:bg-accent transition-colors",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(qa,{className:"h-5 w-5 text-primary"}),r.jsx("span",{className:"font-medium",children:"Create Quote"})]}),r.jsx("span",{className:"text-muted-foreground",children:"→"})]}),r.jsxs("button",{onClick:()=>a("schedule-service"),className:"flex items-center justify-between p-3 text-left border rounded-lg hover:bg-accent transition-colors",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(Mr,{className:"h-5 w-5 text-primary"}),r.jsx("span",{className:"font-medium",children:"Schedule Service"})]}),r.jsx("span",{className:"text-muted-foreground",children:"→"})]})]})})]})]})]})}function Lee(){const[e,t]=w.useState("admin@renterinsight.com"),[n,a]=w.useState("password"),{login:s,isLoading:i}=$m(),{toast:o}=Ct(),l=DA(),c=async d=>{d.preventDefault();try{await s(e,n),l("/")}catch{o({title:"Login Failed",description:"Invalid email or password",variant:"destructive"})}};return r.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background px-4",children:r.jsxs(fe,{className:"w-full max-w-md",children:[r.jsxs(we,{className:"text-center",children:[r.jsx(Ne,{className:"text-2xl font-bold text-primary",children:"Renter Insight CRM/DMS"}),r.jsx(Ue,{children:"Sign in to your account to continue"})]}),r.jsxs(me,{children:[r.jsxs("form",{onSubmit:c,className:"space-y-4",children:[r.jsx("div",{children:r.jsx(je,{type:"email",placeholder:"Email",value:e,onChange:d=>t(d.target.value),required:!0,autoComplete:"username"})}),r.jsx("div",{children:r.jsx(je,{type:"password",placeholder:"Password",value:n,onChange:d=>a(d.target.value),required:!0,autoComplete:"current-password"})}),r.jsx(J,{type:"submit",className:"w-full",disabled:i,children:i?"Signing in...":"Sign In"})]}),r.jsx("div",{className:"mt-4 text-center text-sm text-muted-foreground",children:"Demo credentials: admin@renterinsight.com / password"})]})]})})}function Ree({children:e}){const{user:t,isLoading:n}=$m();return n?r.jsx("div",{className:"min-h-screen flex items-center justify-center",children:r.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-primary"})}):t?r.jsx(r.Fragment,{children:e}):r.jsx(oH,{to:"/login",replace:!0})}function Fee(e){const t=e+"CollectionProvider",[n,a]=mu(t),[s,i]=n(t,{collectionRef:{current:null},itemMap:new Map}),o=g=>{const{scope:p,children:v}=g,y=pe.useRef(null),b=pe.useRef(new Map).current;return r.jsx(s,{scope:p,itemMap:b,collectionRef:y,children:v})};o.displayName=t;const l=e+"CollectionSlot",c=Jf(l),d=pe.forwardRef((g,p)=>{const{scope:v,children:y}=g,b=i(l,v),j=pi(p,b.collectionRef);return r.jsx(c,{ref:j,children:y})});d.displayName=l;const f=e+"CollectionItemSlot",u="data-radix-collection-item",m=Jf(f),h=pe.forwardRef((g,p)=>{const{scope:v,children:y,...b}=g,j=pe.useRef(null),C=pi(p,j),E=i(f,v);return pe.useEffect(()=>(E.itemMap.set(j,{ref:j,...b}),()=>void E.itemMap.delete(j))),r.jsx(m,{[u]:"",ref:C,children:y})});h.displayName=f;function x(g){const p=i(e+"CollectionConsumer",g);return pe.useCallback(()=>{const y=p.collectionRef.current;if(!y)return[];const b=Array.from(y.querySelectorAll(`[${u}]`));return Array.from(p.itemMap.values()).sort((E,S)=>b.indexOf(E.ref.current)-b.indexOf(S.ref.current))},[p.collectionRef,p.itemMap])}return[{Provider:o,Slot:d,ItemSlot:h},x,a]}var Mee=Mo[" useId ".trim().toString()]||(()=>{}),$ee=0;function Bee(e){const[t,n]=w.useState(Mee());return Mc(()=>{e||n(a=>a??String($ee++))},[e]),e||(t?`radix-${t}`:"")}function zee(e){const t=w.useRef(e);return w.useEffect(()=>{t.current=e}),w.useMemo(()=>(...n)=>{var a;return(a=t.current)==null?void 0:a.call(t,...n)},[])}var Uee=w.createContext(void 0);function Vee(e){const t=w.useContext(Uee);return e||t||"ltr"}var c2="rovingFocusGroup.onEntryFocus",qee={bubbles:!1,cancelable:!0},dx="RovingFocusGroup",[F5,XM,Wee]=Fee(dx),[Hee,QM]=mu(dx,[Wee]),[Gee,Kee]=Hee(dx),JM=w.forwardRef((e,t)=>r.jsx(F5.Provider,{scope:e.__scopeRovingFocusGroup,children:r.jsx(F5.Slot,{scope:e.__scopeRovingFocusGroup,children:r.jsx(Yee,{...e,ref:t})})}));JM.displayName=dx;var Yee=w.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,orientation:a,loop:s=!1,dir:i,currentTabStopId:o,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:d,preventScrollOnEntryFocus:f=!1,...u}=e,m=w.useRef(null),h=pi(t,m),x=Vee(i),[g,p]=e1({prop:o,defaultProp:l??null,onChange:c,caller:dx}),[v,y]=w.useState(!1),b=zee(d),j=XM(n),C=w.useRef(!1),[E,S]=w.useState(0);return w.useEffect(()=>{const N=m.current;if(N)return N.addEventListener(c2,b),()=>N.removeEventListener(c2,b)},[b]),r.jsx(Gee,{scope:n,orientation:a,dir:x,loop:s,currentTabStopId:g,onItemFocus:w.useCallback(N=>p(N),[p]),onItemShiftTab:w.useCallback(()=>y(!0),[]),onFocusableItemAdd:w.useCallback(()=>S(N=>N+1),[]),onFocusableItemRemove:w.useCallback(()=>S(N=>N-1),[]),children:r.jsx(Nn.div,{tabIndex:v||E===0?-1:0,"data-orientation":a,...u,ref:h,style:{outline:"none",...e.style},onMouseDown:rn(e.onMouseDown,()=>{C.current=!0}),onFocus:rn(e.onFocus,N=>{const I=!C.current;if(N.target===N.currentTarget&&I&&!v){const D=new CustomEvent(c2,qee);if(N.currentTarget.dispatchEvent(D),!D.defaultPrevented){const T=j().filter($=>$.focusable),A=T.find($=>$.active),_=T.find($=>$.id===g),L=[A,_,...T].filter(Boolean).map($=>$.ref.current);t$(L,f)}}C.current=!1}),onBlur:rn(e.onBlur,()=>y(!1))})})}),ZM="RovingFocusGroupItem",e$=w.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,focusable:a=!0,active:s=!1,tabStopId:i,children:o,...l}=e,c=Bee(),d=i||c,f=Kee(ZM,n),u=f.currentTabStopId===d,m=XM(n),{onFocusableItemAdd:h,onFocusableItemRemove:x,currentTabStopId:g}=f;return w.useEffect(()=>{if(a)return h(),()=>x()},[a,h,x]),r.jsx(F5.ItemSlot,{scope:n,id:d,focusable:a,active:s,children:r.jsx(Nn.span,{tabIndex:u?0:-1,"data-orientation":f.orientation,...l,ref:t,onMouseDown:rn(e.onMouseDown,p=>{a?f.onItemFocus(d):p.preventDefault()}),onFocus:rn(e.onFocus,()=>f.onItemFocus(d)),onKeyDown:rn(e.onKeyDown,p=>{if(p.key==="Tab"&&p.shiftKey){f.onItemShiftTab();return}if(p.target!==p.currentTarget)return;const v=Jee(p,f.orientation,f.dir);if(v!==void 0){if(p.metaKey||p.ctrlKey||p.altKey||p.shiftKey)return;p.preventDefault();let b=m().filter(j=>j.focusable).map(j=>j.ref.current);if(v==="last")b.reverse();else if(v==="prev"||v==="next"){v==="prev"&&b.reverse();const j=b.indexOf(p.currentTarget);b=f.loop?Zee(b,j+1):b.slice(j+1)}setTimeout(()=>t$(b))}}),children:typeof o=="function"?o({isCurrentTabStop:u,hasTabStop:g!=null}):o})})});e$.displayName=ZM;var Xee={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function Qee(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function Jee(e,t,n){const a=Qee(e.key,n);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(a))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(a)))return Xee[a]}function t$(e,t=!1){const n=document.activeElement;for(const a of e)if(a===n||(a.focus({preventScroll:t}),document.activeElement!==n))return}function Zee(e,t){return e.map((n,a)=>e[(t+a)%e.length])}var ete=JM,tte=e$,rte=w.createContext(void 0);function nte(e){const t=w.useContext(rte);return e||t||"ltr"}var ate=Mo[" useId ".trim().toString()]||(()=>{}),ste=0;function ite(e){const[t,n]=w.useState(ate());return Mc(()=>{e||n(a=>a??String(ste++))},[e]),e||(t?`radix-${t}`:"")}var p1="Tabs",[ote,nke]=mu(p1,[QM]),r$=QM(),[lte,n4]=ote(p1),n$=w.forwardRef((e,t)=>{const{__scopeTabs:n,value:a,onValueChange:s,defaultValue:i,orientation:o="horizontal",dir:l,activationMode:c="automatic",...d}=e,f=nte(l),[u,m]=e1({prop:a,onChange:s,defaultProp:i??"",caller:p1});return r.jsx(lte,{scope:n,baseId:ite(),value:u,onValueChange:m,orientation:o,dir:f,activationMode:c,children:r.jsx(Nn.div,{dir:f,"data-orientation":o,...d,ref:t})})});n$.displayName=p1;var a$="TabsList",s$=w.forwardRef((e,t)=>{const{__scopeTabs:n,loop:a=!0,...s}=e,i=n4(a$,n),o=r$(n);return r.jsx(ete,{asChild:!0,...o,orientation:i.orientation,dir:i.dir,loop:a,children:r.jsx(Nn.div,{role:"tablist","aria-orientation":i.orientation,...s,ref:t})})});s$.displayName=a$;var i$="TabsTrigger",o$=w.forwardRef((e,t)=>{const{__scopeTabs:n,value:a,disabled:s=!1,...i}=e,o=n4(i$,n),l=r$(n),c=d$(o.baseId,a),d=u$(o.baseId,a),f=a===o.value;return r.jsx(tte,{asChild:!0,...l,focusable:!s,active:f,children:r.jsx(Nn.button,{type:"button",role:"tab","aria-selected":f,"aria-controls":d,"data-state":f?"active":"inactive","data-disabled":s?"":void 0,disabled:s,id:c,...i,ref:t,onMouseDown:rn(e.onMouseDown,u=>{!s&&u.button===0&&u.ctrlKey===!1?o.onValueChange(a):u.preventDefault()}),onKeyDown:rn(e.onKeyDown,u=>{[" ","Enter"].includes(u.key)&&o.onValueChange(a)}),onFocus:rn(e.onFocus,()=>{const u=o.activationMode!=="manual";!f&&!s&&u&&o.onValueChange(a)})})})});o$.displayName=i$;var l$="TabsContent",c$=w.forwardRef((e,t)=>{const{__scopeTabs:n,value:a,forceMount:s,children:i,...o}=e,l=n4(l$,n),c=d$(l.baseId,a),d=u$(l.baseId,a),f=a===l.value,u=w.useRef(f);return w.useEffect(()=>{const m=requestAnimationFrame(()=>u.current=!1);return()=>cancelAnimationFrame(m)},[]),r.jsx(Zb,{present:s||f,children:({present:m})=>r.jsx(Nn.div,{"data-state":f?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":c,hidden:!m,id:d,tabIndex:0,...o,ref:t,style:{...e.style,animationDuration:u.current?"0s":void 0},children:m&&i})})});c$.displayName=l$;function d$(e,t){return`${e}-trigger-${t}`}function u$(e,t){return`${e}-content-${t}`}var cte=n$,f$=s$,m$=o$,h$=c$;const lr=cte,or=w.forwardRef(({className:e,...t},n)=>r.jsx(f$,{ref:n,className:He("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...t}));or.displayName=f$.displayName;const Ke=w.forwardRef(({className:e,...t},n)=>r.jsx(m$,{ref:n,className:He("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...t}));Ke.displayName=m$.displayName;const Je=w.forwardRef(({className:e,...t},n)=>r.jsx(h$,{ref:n,className:He("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));Je.displayName=h$.displayName;function dte(e){const t=w.useRef({value:e,previous:e});return w.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}function ute(e){const[t,n]=w.useState(void 0);return Mc(()=>{if(e){n({width:e.offsetWidth,height:e.offsetHeight});const a=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const i=s[0];let o,l;if("borderBoxSize"in i){const c=i.borderBoxSize,d=Array.isArray(c)?c[0]:c;o=d.inlineSize,l=d.blockSize}else o=e.offsetWidth,l=e.offsetHeight;n({width:o,height:l})});return a.observe(e,{box:"border-box"}),()=>a.unobserve(e)}else n(void 0)},[e]),t}var v1="Checkbox",[fte,ake]=mu(v1),[mte,a4]=fte(v1);function hte(e){const{__scopeCheckbox:t,checked:n,children:a,defaultChecked:s,disabled:i,form:o,name:l,onCheckedChange:c,required:d,value:f="on",internal_do_not_use_render:u}=e,[m,h]=e1({prop:n,defaultProp:s??!1,onChange:c,caller:v1}),[x,g]=w.useState(null),[p,v]=w.useState(null),y=w.useRef(!1),b=x?!!o||!!x.closest("form"):!0,j={checked:m,disabled:i,setChecked:h,control:x,setControl:g,name:l,form:o,value:f,hasConsumerStoppedPropagationRef:y,required:d,defaultChecked:Tc(s)?!1:s,isFormControl:b,bubbleInput:p,setBubbleInput:v};return r.jsx(mte,{scope:t,...j,children:pte(u)?u(j):a})}var p$="CheckboxTrigger",v$=w.forwardRef(({__scopeCheckbox:e,onKeyDown:t,onClick:n,...a},s)=>{const{control:i,value:o,disabled:l,checked:c,required:d,setControl:f,setChecked:u,hasConsumerStoppedPropagationRef:m,isFormControl:h,bubbleInput:x}=a4(p$,e),g=pi(s,f),p=w.useRef(c);return w.useEffect(()=>{const v=i==null?void 0:i.form;if(v){const y=()=>u(p.current);return v.addEventListener("reset",y),()=>v.removeEventListener("reset",y)}},[i,u]),r.jsx(Nn.button,{type:"button",role:"checkbox","aria-checked":Tc(c)?"mixed":c,"aria-required":d,"data-state":j$(c),"data-disabled":l?"":void 0,disabled:l,value:o,...a,ref:g,onKeyDown:rn(t,v=>{v.key==="Enter"&&v.preventDefault()}),onClick:rn(n,v=>{u(y=>Tc(y)?!0:!y),x&&h&&(m.current=v.isPropagationStopped(),m.current||v.stopPropagation())})})});v$.displayName=p$;var s4=w.forwardRef((e,t)=>{const{__scopeCheckbox:n,name:a,checked:s,defaultChecked:i,required:o,disabled:l,value:c,onCheckedChange:d,form:f,...u}=e;return r.jsx(hte,{__scopeCheckbox:n,checked:s,defaultChecked:i,disabled:l,required:o,onCheckedChange:d,name:a,form:f,value:c,internal_do_not_use_render:({isFormControl:m})=>r.jsxs(r.Fragment,{children:[r.jsx(v$,{...u,ref:t,__scopeCheckbox:n}),m&&r.jsx(b$,{__scopeCheckbox:n})]})})});s4.displayName=v1;var x$="CheckboxIndicator",g$=w.forwardRef((e,t)=>{const{__scopeCheckbox:n,forceMount:a,...s}=e,i=a4(x$,n);return r.jsx(Zb,{present:a||Tc(i.checked)||i.checked===!0,children:r.jsx(Nn.span,{"data-state":j$(i.checked),"data-disabled":i.disabled?"":void 0,...s,ref:t,style:{pointerEvents:"none",...e.style}})})});g$.displayName=x$;var y$="CheckboxBubbleInput",b$=w.forwardRef(({__scopeCheckbox:e,...t},n)=>{const{control:a,hasConsumerStoppedPropagationRef:s,checked:i,defaultChecked:o,required:l,disabled:c,name:d,value:f,form:u,bubbleInput:m,setBubbleInput:h}=a4(y$,e),x=pi(n,h),g=dte(i),p=ute(a);w.useEffect(()=>{const y=m;if(!y)return;const b=window.HTMLInputElement.prototype,C=Object.getOwnPropertyDescriptor(b,"checked").set,E=!s.current;if(g!==i&&C){const S=new Event("click",{bubbles:E});y.indeterminate=Tc(i),C.call(y,Tc(i)?!1:i),y.dispatchEvent(S)}},[m,g,i,s]);const v=w.useRef(Tc(i)?!1:i);return r.jsx(Nn.input,{type:"checkbox","aria-hidden":!0,defaultChecked:o??v.current,required:l,disabled:c,name:d,value:f,form:u,...t,tabIndex:-1,ref:x,style:{...t.style,...p,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});b$.displayName=y$;function pte(e){return typeof e=="function"}function Tc(e){return e==="indeterminate"}function j$(e){return Tc(e)?"indeterminate":e?"checked":"unchecked"}const St=w.forwardRef(({className:e,...t},n)=>r.jsx(s4,{ref:n,className:He("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",e),...t,children:r.jsx(g$,{className:He("flex items-center justify-center text-current"),children:r.jsx(n1,{className:"h-4 w-4"})})}));St.displayName=s4.displayName;function vte({settings:e,onChange:t}){const n=(o,l)=>{t({[o]:l})},a=[{value:"America/New_York",label:"Eastern Time (ET)"},{value:"America/Chicago",label:"Central Time (CT)"},{value:"America/Denver",label:"Mountain Time (MT)"},{value:"America/Los_Angeles",label:"Pacific Time (PT)"},{value:"America/Anchorage",label:"Alaska Time (AKT)"},{value:"Pacific/Honolulu",label:"Hawaii Time (HT)"},{value:"UTC",label:"Universal Time (UTC)"}],s=[{value:"user",label:"User"},{value:"sales",label:"Sales"},{value:"service",label:"Service"},{value:"manager",label:"Manager"},{value:"admin",label:"Admin"}],i=[{value:"minimal",label:"Minimal"},{value:"standard",label:"Standard"},{value:"verbose",label:"Verbose"}];return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-semibold mb-4",children:"System Information"}),r.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"systemName",children:"System Name"}),r.jsx(je,{id:"systemName",value:e.systemName||"",onChange:o=>n("systemName",o.target.value),className:"max-w-md"})]}),r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"systemVersion",children:"System Version"}),r.jsx(je,{id:"systemVersion",value:e.systemVersion||"",onChange:o=>n("systemVersion",o.target.value),className:"max-w-md"})]}),r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"supportEmail",children:"Support Email"}),r.jsx(je,{id:"supportEmail",type:"email",value:e.supportEmail||"",onChange:o=>n("supportEmail",o.target.value),className:"max-w-md"})]}),r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"supportPhone",children:"Support Phone"}),r.jsx(je,{id:"supportPhone",value:e.supportPhone||"",onChange:o=>n("supportPhone",o.target.value),className:"max-w-md"})]}),r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"timezone",children:"Default Timezone"}),r.jsxs($e,{value:e.timezone||"America/New_York",onValueChange:o=>n("timezone",o),children:[r.jsx(Fe,{className:"max-w-md",children:r.jsx(Be,{})}),r.jsx(Me,{children:a.map(o=>r.jsx(K,{value:o.value,children:o.label},o.value))})]})]}),r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"defaultUserRole",children:"Default User Role"}),r.jsxs($e,{value:e.defaultUserRole||"user",onValueChange:o=>n("defaultUserRole",o),children:[r.jsx(Fe,{className:"max-w-md",children:r.jsx(Be,{})}),r.jsx(Me,{children:s.map(o=>r.jsx(K,{value:o.value,children:o.label},o.value))})]})]})]})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Maintenance Mode"}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(St,{id:"maintenanceMode",checked:e.maintenanceMode||!1,onCheckedChange:o=>n("maintenanceMode",!!o)}),r.jsx(Z,{htmlFor:"maintenanceMode",children:"Enable Maintenance Mode"})]}),e.maintenanceMode&&r.jsxs("div",{className:"bg-yellow-50 p-4 rounded-md flex items-start space-x-2",children:[r.jsx(Ts,{className:"h-5 w-5 text-yellow-600 mt-0.5"}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium text-yellow-800",children:"Warning"}),r.jsx("p",{className:"text-sm text-yellow-700 mt-1",children:"Enabling maintenance mode will prevent all users from accessing the system except for administrators."})]})]}),r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"maintenanceMessage",children:"Maintenance Message"}),r.jsx(Xt,{id:"maintenanceMessage",value:e.maintenanceMessage||"",onChange:o=>n("maintenanceMessage",o.target.value),placeholder:"Enter message to display during maintenance",className:"max-w-md"})]})]})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Audit Logging"}),r.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"auditLogRetentionDays",children:"Audit Log Retention (Days)"}),r.jsx(je,{id:"auditLogRetentionDays",type:"number",value:e.auditLogRetentionDays||0,onChange:o=>n("auditLogRetentionDays",parseInt(o.target.value)),className:"max-w-md"})]}),r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"auditLogLevel",children:"Audit Log Level"}),r.jsxs($e,{value:e.auditLogLevel||"standard",onValueChange:o=>n("auditLogLevel",o),children:[r.jsx(Fe,{className:"max-w-md",children:r.jsx(Be,{})}),r.jsx(Me,{children:i.map(o=>r.jsx(K,{value:o.value,children:o.label},o.value))})]})]})]})]})]})}function xte({settings:e,onChange:t}){const n=(i,o)=>{t({[i]:o})},a=[{value:"USD",label:"US Dollar (USD)"},{value:"EUR",label:"Euro (EUR)"},{value:"GBP",label:"British Pound (GBP)"},{value:"CAD",label:"Canadian Dollar (CAD)"},{value:"AUD",label:"Australian Dollar (AUD)"}],s=[{value:"none",label:"None"},{value:"stripe",label:"Stripe"},{value:"paypal",label:"PayPal"}];return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Currency Settings"}),r.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"currency",children:"Default Currency"}),r.jsxs($e,{value:e.currency||"USD",onValueChange:i=>n("currency",i),children:[r.jsx(Fe,{className:"max-w-md",children:r.jsx(Be,{})}),r.jsx(Me,{children:a.map(i=>r.jsx(K,{value:i.value,children:i.label},i.value))})]})]}),r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"currencySymbol",children:"Currency Symbol"}),r.jsx(je,{id:"currencySymbol",value:e.currencySymbol||"$",onChange:i=>n("currencySymbol",i.target.value),className:"max-w-md"})]}),r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"taxRate",children:"Default Tax Rate (%)"}),r.jsx(je,{id:"taxRate",type:"number",step:"0.01",value:e.taxRate*100||0,onChange:i=>n("taxRate",parseFloat(i.target.value)/100),className:"max-w-md"})]})]})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Payment Gateway Integration"}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"paymentGateway",children:"Select Payment Gateway"}),r.jsxs($e,{value:e.paymentGateway||"none",onValueChange:i=>n("paymentGateway",i),children:[r.jsx(Fe,{className:"max-w-md",children:r.jsx(Be,{})}),r.jsx(Me,{children:s.map(i=>r.jsx(K,{value:i.value,children:i.label},i.value))})]})]}),e.paymentGateway==="stripe"&&r.jsxs("div",{className:"space-y-4 border p-4 rounded-md",children:[r.jsx("h4",{className:"font-medium",children:"Stripe Configuration"}),r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"stripePublishableKey",children:"Stripe Publishable Key"}),r.jsx(je,{id:"stripePublishableKey",value:e.stripePublishableKey||"",onChange:i=>n("stripePublishableKey",i.target.value),className:"max-w-md"})]}),r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"stripeSecretKey",children:"Stripe Secret Key"}),r.jsx(je,{id:"stripeSecretKey",type:"password",value:e.stripeSecretKey||"",onChange:i=>n("stripeSecretKey",i.target.value),className:"max-w-md"})]})]}),e.paymentGateway==="paypal"&&r.jsxs("div",{className:"space-y-4 border p-4 rounded-md",children:[r.jsx("h4",{className:"font-medium",children:"PayPal Configuration"}),r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"paypalClientId",children:"PayPal Client ID"}),r.jsx(je,{id:"paypalClientId",value:e.paypalClientId||"",onChange:i=>n("paypalClientId",i.target.value),className:"max-w-md"})]}),r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"paypalClientSecret",children:"PayPal Client Secret"}),r.jsx(je,{id:"paypalClientSecret",type:"password",value:e.paypalClientSecret||"",onChange:i=>n("paypalClientSecret",i.target.value),className:"max-w-md"})]})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(St,{id:"enableSubscriptions",checked:e.enableSubscriptions||!1,onCheckedChange:i=>n("enableSubscriptions",!!i)}),r.jsx(Z,{htmlFor:"enableSubscriptions",children:"Enable Subscription Payments"})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(St,{id:"enableInvoiceGeneration",checked:e.enableInvoiceGeneration||!1,onCheckedChange:i=>n("enableInvoiceGeneration",!!i)}),r.jsx(Z,{htmlFor:"enableInvoiceGeneration",children:"Enable Automatic Invoice Generation"})]})]})]})]})}function gte({settings:e,onChange:t}){const n=(s,i)=>{t({[s]:i})},a=[{value:"none",label:"None"},{value:"twilio",label:"Twilio"},{value:"messagebird",label:"MessageBird"},{value:"vonage",label:"Vonage (Nexmo)"}];return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-semibold mb-4",children:"SMS Provider Configuration"}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"smsProvider",children:"SMS Provider"}),r.jsxs($e,{value:e.smsProvider||"none",onValueChange:s=>n("smsProvider",s),children:[r.jsx(Fe,{className:"max-w-md",children:r.jsx(Be,{})}),r.jsx(Me,{children:a.map(s=>r.jsx(K,{value:s.value,children:s.label},s.value))})]})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(St,{id:"smsEnabled",checked:e.smsEnabled||!1,onCheckedChange:s=>n("smsEnabled",!!s)}),r.jsx(Z,{htmlFor:"smsEnabled",children:"Enable SMS Notifications"})]}),e.smsProvider==="twilio"&&r.jsxs("div",{className:"space-y-4 border p-4 rounded-md",children:[r.jsx("h4",{className:"font-medium",children:"Twilio Configuration"}),r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"twilioAccountSid",children:"Twilio Account SID"}),r.jsx(je,{id:"twilioAccountSid",value:e.twilioAccountSid||"",onChange:s=>n("twilioAccountSid",s.target.value),className:"max-w-md"})]}),r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"twilioAuthToken",children:"Twilio Auth Token"}),r.jsx(je,{id:"twilioAuthToken",type:"password",value:e.twilioAuthToken||"",onChange:s=>n("twilioAuthToken",s.target.value),className:"max-w-md"})]}),r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"twilioPhoneNumber",children:"Twilio Phone Number"}),r.jsx(je,{id:"twilioPhoneNumber",value:e.twilioPhoneNumber||"",onChange:s=>n("twilioPhoneNumber",s.target.value),placeholder:"+15551234567",className:"max-w-md"}),r.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Must be in E.164 format (e.g., +15551234567)"})]})]})]})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-semibold mb-4",children:"SMS Templates"}),r.jsx("div",{className:"bg-muted/30 p-4 rounded-md",children:r.jsxs("div",{className:"flex items-start space-x-2",children:[r.jsx(nn,{className:"h-5 w-5 text-blue-600 mt-0.5"}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium text-blue-800",children:"SMS Templates"}),r.jsx("p",{className:"text-sm text-blue-700 mt-1",children:"SMS templates can be configured in the Company Settings area under Notification Templates."})]})]})})]})]})}function yte({settings:e,onChange:t}){const n=(s,i)=>{t({[s]:i})},a=[{value:"none",label:"None"},{value:"smtp",label:"SMTP"},{value:"sendgrid",label:"SendGrid"},{value:"mailgun",label:"Mailgun"},{value:"ses",label:"Amazon SES"}];return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Email Provider Configuration"}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"emailProvider",children:"Email Provider"}),r.jsxs($e,{value:e.emailProvider||"none",onValueChange:s=>n("emailProvider",s),children:[r.jsx(Fe,{className:"max-w-md",children:r.jsx(Be,{})}),r.jsx(Me,{children:a.map(s=>r.jsx(K,{value:s.value,children:s.label},s.value))})]})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(St,{id:"emailEnabled",checked:e.emailEnabled||!1,onCheckedChange:s=>n("emailEnabled",!!s)}),r.jsx(Z,{htmlFor:"emailEnabled",children:"Enable Email Notifications"})]}),e.emailProvider==="smtp"&&r.jsxs("div",{className:"space-y-4 border p-4 rounded-md",children:[r.jsx("h4",{className:"font-medium",children:"SMTP Configuration"}),r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"smtpHost",children:"SMTP Host"}),r.jsx(je,{id:"smtpHost",value:e.smtpHost||"",onChange:s=>n("smtpHost",s.target.value),className:"max-w-md"})]}),r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"smtpPort",children:"SMTP Port"}),r.jsx(je,{id:"smtpPort",type:"number",value:e.smtpPort||587,onChange:s=>n("smtpPort",parseInt(s.target.value)),className:"max-w-md"})]}),r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"smtpUsername",children:"SMTP Username"}),r.jsx(je,{id:"smtpUsername",value:e.smtpUsername||"",onChange:s=>n("smtpUsername",s.target.value),className:"max-w-md"})]}),r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"smtpPassword",children:"SMTP Password"}),r.jsx(je,{id:"smtpPassword",type:"password",value:e.smtpPassword||"",onChange:s=>n("smtpPassword",s.target.value),className:"max-w-md"})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(St,{id:"smtpSecure",checked:e.smtpSecure||!1,onCheckedChange:s=>n("smtpSecure",!!s)}),r.jsx(Z,{htmlFor:"smtpSecure",children:"Use SSL/TLS (Secure Connection)"})]})]}),r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"emailFromAddress",children:"From Email Address"}),r.jsx(je,{id:"emailFromAddress",type:"email",value:e.emailFromAddress||"",onChange:s=>n("emailFromAddress",s.target.value),placeholder:"noreply@example.com",className:"max-w-md"})]}),r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"emailFromName",children:"From Name"}),r.jsx(je,{id:"emailFromName",value:e.emailFromName||"",onChange:s=>n("emailFromName",s.target.value),placeholder:"Your Company Name",className:"max-w-md"})]})]})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Email Templates"}),r.jsx("div",{className:"bg-muted/30 p-4 rounded-md",children:r.jsxs("div",{className:"flex items-start space-x-2",children:[r.jsx(en,{className:"h-5 w-5 text-blue-600 mt-0.5"}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium text-blue-800",children:"Email Templates"}),r.jsx("p",{className:"text-sm text-blue-700 mt-1",children:"Email templates can be configured in the Company Settings area under Notification Templates."})]})]})})]})]})}function bte({settings:e,onChange:t}){const n=(s,i)=>{t({[s]:i})},a=[{value:"none",label:"None"},{value:"twilio",label:"Twilio"}];return r.jsx("div",{className:"space-y-6",children:r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Voice Provider Configuration"}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"voiceProvider",children:"Voice Provider"}),r.jsxs($e,{value:e.voiceProvider||"none",onValueChange:s=>n("voiceProvider",s),children:[r.jsx(Fe,{className:"max-w-md",children:r.jsx(Be,{})}),r.jsx(Me,{children:a.map(s=>r.jsx(K,{value:s.value,children:s.label},s.value))})]})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(St,{id:"voiceEnabled",checked:e.voiceEnabled||!1,onCheckedChange:s=>n("voiceEnabled",!!s)}),r.jsx(Z,{htmlFor:"voiceEnabled",children:"Enable Voice Features"})]}),e.voiceProvider==="twilio"&&r.jsxs("div",{className:"space-y-4 border p-4 rounded-md",children:[r.jsx("h4",{className:"font-medium",children:"Twilio Voice Configuration"}),r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"twilioVoiceSid",children:"Twilio Account SID"}),r.jsx(je,{id:"twilioVoiceSid",value:e.twilioVoiceSid||"",onChange:s=>n("twilioVoiceSid",s.target.value),className:"max-w-md"})]}),r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"twilioVoiceAuthToken",children:"Twilio Auth Token"}),r.jsx(je,{id:"twilioVoiceAuthToken",type:"password",value:e.twilioVoiceAuthToken||"",onChange:s=>n("twilioVoiceAuthToken",s.target.value),className:"max-w-md"})]}),r.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"This is typically the same Account SID and Auth Token used for SMS, but can be different if needed."})]})]})]})})}const d2={appName:"Renter Insight",appLogo:"/logo.svg",contactEmail:"support@renterinsight.com",contactPhone:"+1 (555) 123-4567",address:"123 Main St, Anytown, USA",website:"https://www.renterinsight.com",timezone:"America/Los_Angeles",dateFormat:"MM/DD/YYYY",timeFormat:"hh:mm A",currency:"USD",currencySymbol:"$",language:"en",maintenanceMode:!1,welcomeMessage:"Welcome to Renter Insight!",paymentGateway:"stripe",stripePublishableKey:"",stripeSecretKey:"",paypalClientId:"",paypalClientSecret:"",enableSubscriptions:!0,taxRate:.05,enableInvoiceGeneration:!0,smsProvider:"twilio",twilioAccountSid:"",twilioAuthToken:"",twilioPhoneNumber:"",smsEnabled:!0,smsTemplates:[],emailProvider:"smtp",smtpHost:"",smtpPort:587,smtpUsername:"",smtpPassword:"",smtpSecure:!1,emailFromAddress:"noreply@example.com",emailFromName:"Renter Insight",emailEnabled:!0,emailTemplates:[],voiceProvider:"twilio",twilioVoiceSid:"",twilioVoiceAuthToken:"",voiceEnabled:!1,passwordMinLength:8,passwordRequiresUppercase:!0,passwordRequiresLowercase:!0,passwordRequiresNumber:!0,passwordRequiresSymbol:!0,twoFactorAuthEnabled:!1,sessionTimeout:3600,failedLoginAttemptsLockout:5,lockoutDuration:300,googleMapsApiKey:"",slackWebhookUrl:"",googleAnalyticsTrackingId:"",mixpanelProjectId:"",primaryColor:"#4F46E5",secondaryColor:"#10B981",fontFamily:"Inter, sans-serif",termsOfServiceUrl:"/terms",privacyPolicyUrl:"/privacy",supportPageUrl:"/support"};function jte(){const[e,t]=w.useState(d2),[n,a]=w.useState(!0),[s,i]=w.useState(null);w.useEffect(()=>{try{const c=localStorage.getItem("platformSettings");c&&t({...d2,...JSON.parse(c)})}catch(c){console.error("Failed to load settings from local storage",c),i("Failed to load settings.")}finally{a(!1)}},[]);const o=w.useCallback(c=>{t(d=>{const f={...d,...c};try{localStorage.setItem("platformSettings",JSON.stringify(f))}catch(u){console.error("Failed to save settings to local storage",u),i("Failed to save settings.")}return f})},[]),l=w.useCallback(()=>{t(d2);try{localStorage.removeItem("platformSettings")}catch(c){console.error("Failed to clear settings from local storage",c),i("Failed to reset settings.")}},[]);return{settings:e,updateSettings:o,resetSettings:l,loading:n,error:s}}function wte(){const{settings:e,updateSettings:t,resetSettings:n,loading:a,error:s}=jte(),{toast:i}=Ct(),[o,l]=w.useState("general"),c=u=>{t(u)},d=()=>{console.log("Saving settings:",e),i({title:"Settings Saved",description:"Your platform settings have been updated."})},f=()=>{n(),i({title:"Settings Reset",description:"All settings have been reset to their default values."})};return a?r.jsx("div",{children:"Loading settings..."}):s?r.jsxs("div",{className:"text-red-500",children:["Error: ",s]}):r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold",children:"Platform Settings"}),r.jsx("p",{className:"text-muted-foreground",children:"Manage global platform configurations."})]}),r.jsxs("div",{className:"space-x-2",children:[r.jsx(J,{variant:"outline",onClick:f,children:"Reset to Defaults"}),r.jsx(J,{onClick:d,children:"Save Changes"})]})]}),r.jsxs(fe,{children:[r.jsx(we,{children:r.jsx(Ne,{children:"Configuration"})}),r.jsx(me,{children:r.jsxs(lr,{value:o,onValueChange:l,className:"w-full",children:[r.jsxs(or,{className:"grid w-full grid-cols-5",children:[" ",r.jsx(Ke,{value:"general",children:"General"}),r.jsx(Ke,{value:"payment",children:"Payment"}),r.jsx(Ke,{value:"sms",children:"SMS"}),r.jsx(Ke,{value:"email",children:"Email"}),r.jsx(Ke,{value:"voice",children:"Voice"})]}),r.jsx(Je,{value:"general",children:r.jsx(vte,{settings:e,onChange:c})}),r.jsx(Je,{value:"payment",children:r.jsx(xte,{settings:e,onChange:c})}),r.jsx(Je,{value:"sms",children:r.jsx(gte,{settings:e,onChange:c})}),r.jsx(Je,{value:"email",children:r.jsx(yte,{settings:e,onChange:c})}),r.jsx(Je,{value:"voice",children:r.jsx(bte,{settings:e,onChange:c})})]})})]})]})}const Nte=r1("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function ze({className:e,variant:t,...n}){return r.jsx("div",{className:He(Nte({variant:t}),e),...n})}const u2=[{id:"1",name:"New",order:1,probability:10,isActive:!0,color:"bg-blue-500"},{id:"2",name:"Contacted",order:2,probability:25,isActive:!0,color:"bg-yellow-500"},{id:"3",name:"Qualified",order:3,probability:50,isActive:!0,color:"bg-orange-500"},{id:"4",name:"Proposal",order:4,probability:75,isActive:!0,color:"bg-purple-500"},{id:"5",name:"Negotiation",order:5,probability:90,isActive:!0,color:"bg-indigo-500"},{id:"6",name:"Closed Won",order:6,probability:100,isActive:!0,color:"bg-green-500"},{id:"7",name:"Closed Lost",order:7,probability:0,isActive:!0,color:"bg-red-500"}];function Ste(){var u,m,h;const{leads:e,salesReps:t,activities:n}=ro(),[a,s]=w.useState("all"),[i,o]=w.useState("30"),l=w.useMemo(()=>{const x=a==="all"?e:e.filter(p=>p.assignedTo===a);return u2.map(p=>{const v=x.filter(b=>{switch(p.name.toLowerCase()){case"new":return b.status===Hn.NEW;case"contacted":return b.status===Hn.CONTACTED;case"qualified":return b.status===Hn.QUALIFIED;case"proposal":return b.status===Hn.PROPOSAL;case"negotiation":return b.status===Hn.NEGOTIATION;case"closed won":return b.status===Hn.CLOSED_WON;case"closed lost":return b.status===Hn.CLOSED_LOST;default:return!1}}),y=v.reduce((b,j)=>{var E,S;const C=parseFloat(((S=(E=j.customFields)==null?void 0:E.budget)==null?void 0:S.replace(/[^0-9]/g,""))||"0");return b+C*p.probability/100},0);return{stage:p.name,count:v.length,value:y,averageTime:7,conversionRate:p.probability}})},[e,a]),c=w.useMemo(()=>t.map(g=>{const p=e.filter(D=>D.assignedTo===g.id),y=n.filter(D=>D.userId===g.id).filter(D=>{const T=new Date(D.createdAt),A=new Date;return A.setDate(A.getDate()-7),T>=A}),b=p.filter(D=>[Hn.QUALIFIED,Hn.PROPOSAL,Hn.NEGOTIATION,Hn.CLOSED_WON].includes(D.status)),j=p.filter(D=>D.status===Hn.CLOSED_WON),C=p.filter(D=>D.status===Hn.CLOSED_LOST),E=p.reduce((D,T)=>{var k,L;if(T.status===Hn.CLOSED_WON||T.status===Hn.CLOSED_LOST)return D;const A=parseFloat(((L=(k=T.customFields)==null?void 0:k.budget)==null?void 0:L.replace(/[^0-9]/g,""))||"0"),_=u2.find($=>$.name.toLowerCase()===T.status.replace("_"," "));return D+A*((_==null?void 0:_.probability)||0)/100},0),S=j.length+C.length,N=S>0?j.length/S*100:0,I=j.length>0?j.reduce((D,T)=>{var _,k;const A=parseFloat(((k=(_=T.customFields)==null?void 0:_.budget)==null?void 0:k.replace(/[^0-9]/g,""))||"0");return D+A},0)/j.length:0;return{repId:g.id,repName:g.name,totalLeads:p.length,qualifiedLeads:b.length,closedWon:j.length,closedLost:C.length,pipelineValue:E,conversionRate:N,averageDealSize:I,activitiesThisWeek:y.length}}),[e,t,n]),d=l.reduce((x,g)=>x+g.value,0),f=l.reduce((x,g)=>x+g.count,0);return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex gap-4",children:[r.jsxs($e,{value:a,onValueChange:s,children:[r.jsx(Fe,{className:"w-48",children:r.jsx(Be,{placeholder:"Select sales rep"})}),r.jsxs(Me,{children:[r.jsx(K,{value:"all",children:"All Sales Reps"}),t.map(x=>r.jsx(K,{value:x.id,children:x.name},x.id))]})]}),r.jsxs($e,{value:i,onValueChange:o,children:[r.jsx(Fe,{className:"w-32",children:r.jsx(Be,{})}),r.jsxs(Me,{children:[r.jsx(K,{value:"7",children:"7 days"}),r.jsx(K,{value:"30",children:"30 days"}),r.jsx(K,{value:"90",children:"90 days"}),r.jsx(K,{value:"365",children:"1 year"})]})]})]}),r.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[r.jsxs(fe,{className:"shadow-sm border-0 bg-gradient-to-br from-blue-50 to-blue-100/50",children:[r.jsxs(we,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(Ne,{className:"text-sm font-medium text-blue-900",children:"Total Pipeline"}),r.jsx(Mt,{className:"h-4 w-4 text-blue-600"})]}),r.jsxs(me,{children:[r.jsx("div",{className:"text-2xl font-bold text-blue-900",children:De(d)}),r.jsxs("p",{className:"text-xs text-blue-600 flex items-center mt-1",children:[r.jsx(Ot,{className:"h-3 w-3 mr-1"}),f," active leads"]})]})]}),r.jsxs(fe,{className:"shadow-sm border-0 bg-gradient-to-br from-green-50 to-green-100/50",children:[r.jsxs(we,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(Ne,{className:"text-sm font-medium text-green-900",children:"Qualified Leads"}),r.jsx(fs,{className:"h-4 w-4 text-green-600"})]}),r.jsxs(me,{children:[r.jsx("div",{className:"text-2xl font-bold text-green-900",children:((u=l.find(x=>x.stage==="Qualified"))==null?void 0:u.count)||0}),r.jsxs("p",{className:"text-xs text-green-600 flex items-center mt-1",children:[r.jsx(Ot,{className:"h-3 w-3 mr-1"}),"Ready for proposal"]})]})]}),r.jsxs(fe,{className:"shadow-sm border-0 bg-gradient-to-br from-purple-50 to-purple-100/50",children:[r.jsxs(we,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(Ne,{className:"text-sm font-medium text-purple-900",children:"Conversion Rate"}),r.jsx(fs,{className:"h-4 w-4 text-purple-600"})]}),r.jsxs(me,{children:[r.jsxs("div",{className:"text-2xl font-bold text-purple-900",children:[Math.round(a==="all"?c.reduce((x,g)=>x+g.conversionRate,0)/c.length||0:((m=c.find(x=>x.repId===a))==null?void 0:m.conversionRate)||0),"%"]}),r.jsxs("p",{className:"text-xs text-purple-600 flex items-center mt-1",children:[r.jsx(Ot,{className:"h-3 w-3 mr-1"}),"Win rate"]})]})]}),r.jsxs(fe,{className:"shadow-sm border-0 bg-gradient-to-br from-orange-50 to-orange-100/50",children:[r.jsxs(we,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(Ne,{className:"text-sm font-medium text-orange-900",children:"Avg Deal Size"}),r.jsx(Mt,{className:"h-4 w-4 text-orange-600"})]}),r.jsxs(me,{children:[r.jsx("div",{className:"text-2xl font-bold text-orange-900",children:De(a==="all"?c.reduce((x,g)=>x+g.averageDealSize,0)/c.length||0:((h=c.find(x=>x.repId===a))==null?void 0:h.averageDealSize)||0)}),r.jsxs("p",{className:"text-xs text-orange-600 flex items-center mt-1",children:[r.jsx(Mt,{className:"h-3 w-3 mr-1"}),"Per closed deal"]})]})]})]}),r.jsxs(fe,{children:[r.jsxs(we,{children:[r.jsx(Ne,{children:"Sales Pipeline"}),r.jsx(Ue,{children:"Lead distribution across pipeline stages"})]}),r.jsx(me,{children:r.jsx("div",{className:"grid gap-4 md:grid-cols-7",children:l.map((x,g)=>{const p=u2[g];return r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:He("w-full h-24 rounded-lg flex items-center justify-center text-white font-bold text-lg mb-2",p.color),children:x.count}),r.jsx("h3",{className:"font-semibold text-sm",children:p.name}),r.jsx("p",{className:"text-xs text-muted-foreground",children:De(x.value)}),r.jsxs("p",{className:"text-xs text-muted-foreground",children:[p.probability,"% probability"]})]},p.id)})})})]}),r.jsxs(fe,{children:[r.jsxs(we,{children:[r.jsx(Ne,{children:"Sales Rep Performance"}),r.jsx(Ue,{children:"Individual performance metrics and activity levels"})]}),r.jsx(me,{children:r.jsx("div",{className:"space-y-4",children:c.map(x=>r.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-accent/50 transition-colors",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[r.jsx("h3",{className:"font-semibold",children:x.repName}),r.jsxs(ze,{variant:"secondary",children:[x.totalLeads," leads"]}),r.jsxs(ze,{className:"bg-green-50 text-green-700 border-green-200",children:[x.conversionRate.toFixed(1),"% conversion"]})]}),r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm text-muted-foreground",children:[r.jsxs("div",{children:[r.jsx("span",{className:"font-medium",children:"Pipeline Value:"}),r.jsx("div",{className:"font-bold text-primary",children:De(x.pipelineValue)})]}),r.jsxs("div",{children:[r.jsx("span",{className:"font-medium",children:"Qualified:"}),r.jsx("div",{className:"font-bold text-green-600",children:x.qualifiedLeads})]}),r.jsxs("div",{children:[r.jsx("span",{className:"font-medium",children:"Closed Won:"}),r.jsx("div",{className:"font-bold text-blue-600",children:x.closedWon})]}),r.jsxs("div",{children:[r.jsx("span",{className:"font-medium",children:"Activities (7d):"}),r.jsx("div",{className:"font-bold text-purple-600",children:x.activitiesThisWeek})]})]})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsxs(J,{variant:"outline",size:"sm",children:[r.jsx($n,{className:"h-3 w-3 mr-1"}),"View Leads"]}),r.jsxs(J,{variant:"outline",size:"sm",children:[r.jsx(Mr,{className:"h-3 w-3 mr-1"}),"Activities"]})]})]},x.repId))})})]})]})}var i4="Progress",o4=100,[Cte,ske]=mu(i4),[Ate,Ete]=Cte(i4),w$=w.forwardRef((e,t)=>{const{__scopeProgress:n,value:a=null,max:s,getValueLabel:i=Pte,...o}=e;(s||s===0)&&!IT(s)&&console.error(Tte(`${s}`,"Progress"));const l=IT(s)?s:o4;a!==null&&!DT(a,l)&&console.error(Ite(`${a}`,"Progress"));const c=DT(a,l)?a:null,d=Ny(c)?i(c,l):void 0;return r.jsx(Ate,{scope:n,value:c,max:l,children:r.jsx(Nn.div,{"aria-valuemax":l,"aria-valuemin":0,"aria-valuenow":Ny(c)?c:void 0,"aria-valuetext":d,role:"progressbar","data-state":C$(c,l),"data-value":c??void 0,"data-max":l,...o,ref:t})})});w$.displayName=i4;var N$="ProgressIndicator",S$=w.forwardRef((e,t)=>{const{__scopeProgress:n,...a}=e,s=Ete(N$,n);return r.jsx(Nn.div,{"data-state":C$(s.value,s.max),"data-value":s.value??void 0,"data-max":s.max,...a,ref:t})});S$.displayName=N$;function Pte(e,t){return`${Math.round(e/t*100)}%`}function C$(e,t){return e==null?"indeterminate":e===t?"complete":"loading"}function Ny(e){return typeof e=="number"}function IT(e){return Ny(e)&&!isNaN(e)&&e>0}function DT(e,t){return Ny(e)&&!isNaN(e)&&e<=t&&e>=0}function Tte(e,t){return`Invalid prop \`max\` of value \`${e}\` supplied to \`${t}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${o4}\`.`}function Ite(e,t){return`Invalid prop \`value\` of value \`${e}\` supplied to \`${t}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${o4} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var A$=w$,Dte=S$;const qd=w.forwardRef(({className:e,value:t,...n},a)=>r.jsx(A$,{ref:a,className:He("relative h-4 w-full overflow-hidden rounded-full bg-secondary",e),...n,children:r.jsx(Dte,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(t||0)}%)`}})}));qd.displayName=A$.displayName;function kte({score:e,className:t}){const n=i=>i>=80?"text-green-600":i>=60?"text-yellow-600":i>=40?"text-orange-600":"text-red-600",a=i=>i>=80?"bg-green-50 text-green-700 border-green-200":i>=60?"bg-yellow-50 text-yellow-700 border-yellow-200":i>=40?"bg-orange-50 text-orange-700 border-orange-200":"bg-red-50 text-red-700 border-red-200",s=i=>i>=80?"Hot Lead":i>=60?"Warm Lead":i>=40?"Cool Lead":"Cold Lead";return r.jsxs(fe,{className:He("shadow-sm",t),children:[r.jsx(we,{children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx(Ne,{className:"text-lg",children:"Lead Score"}),r.jsxs(Ue,{children:["Last calculated: ",e.lastCalculated.toLocaleDateString()]})]}),r.jsxs("div",{className:"text-right",children:[r.jsx("div",{className:He("text-3xl font-bold",n(e.totalScore)),children:e.totalScore}),r.jsx(ze,{className:He("ri-badge-status",a(e.totalScore)),children:s(e.totalScore)})]})]})}),r.jsxs(me,{className:"space-y-6",children:[r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(wa,{className:"h-4 w-4 text-blue-500"}),r.jsx("span",{className:"text-sm font-medium",children:"Demographics"})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(qd,{value:e.demographicScore/50*100,className:"w-20"}),r.jsx("span",{className:"text-sm font-bold w-8",children:e.demographicScore})]})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(Td,{className:"h-4 w-4 text-green-500"}),r.jsx("span",{className:"text-sm font-medium",children:"Behavior"})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(qd,{value:e.behaviorScore/50*100,className:"w-20"}),r.jsx("span",{className:"text-sm font-bold w-8",children:e.behaviorScore})]})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(xG,{className:"h-4 w-4 text-purple-500"}),r.jsx("span",{className:"text-sm font-medium",children:"Engagement"})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(qd,{value:e.engagementScore/50*100,className:"w-20"}),r.jsx("span",{className:"text-sm font-bold w-8",children:e.engagementScore})]})]})]}),r.jsxs("div",{children:[r.jsxs("h4",{className:"font-semibold text-sm mb-3 flex items-center",children:[r.jsx(Ot,{className:"h-4 w-4 mr-2"}),"Score Factors"]}),r.jsx("div",{className:"space-y-2",children:e.factors.map((i,o)=>r.jsxs("div",{className:"flex items-center justify-between p-2 bg-muted/30 rounded-md",children:[r.jsxs("div",{children:[r.jsx("span",{className:"text-sm font-medium",children:i.factor}),r.jsx("p",{className:"text-xs text-muted-foreground",children:i.reason})]}),r.jsxs(ze,{variant:"secondary",className:"text-xs",children:["+",i.points]})]},o))})]}),r.jsxs("div",{className:"bg-blue-50 p-3 rounded-lg",children:[r.jsx("h4",{className:"font-semibold text-sm text-blue-900 mb-2",children:"Recommendations"}),r.jsxs("div",{className:"space-y-1 text-xs text-blue-700",children:[e.totalScore>=80&&r.jsx("p",{children:"• High priority lead - schedule immediate follow-up"}),e.totalScore>=60&&e.totalScore<80&&r.jsx("p",{children:"• Good potential - maintain regular contact"}),e.totalScore>=40&&e.totalScore<60&&r.jsx("p",{children:"• Nurture with educational content"}),e.totalScore<40&&r.jsx("p",{children:"• Low priority - add to drip campaign"}),e.behaviorScore<20&&r.jsx("p",{children:"• Increase engagement with personalized outreach"}),e.engagementScore<20&&r.jsx("p",{children:"• Try different communication channels"})]})]})]})]})}function Ote({leadId:e,activities:t}){const{logActivity:n}=ro(),[a,s]=w.useState(!1),[i,o]=w.useState({type:"note",description:"",outcome:void 0,duration:void 0,scheduledDate:void 0}),l=m=>{switch(m){case"call":return Mm;case"email":return en;case"meeting":return Mr;case"note":return nn;case"status_change":return wa;default:return nn}},c=m=>{switch(m){case"call":return"text-green-500";case"email":return"text-blue-500";case"meeting":return"text-purple-500";case"note":return"text-gray-500";case"status_change":return"text-orange-500";default:return"text-gray-500"}},d=m=>{switch(m){case"positive":return"bg-green-50 text-green-700 border-green-200";case"neutral":return"bg-yellow-50 text-yellow-700 border-yellow-200";case"negative":return"bg-red-50 text-red-700 border-red-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},f=async()=>{i.description.trim()&&(await n({leadId:e,type:i.type,description:i.description,outcome:i.outcome,duration:i.duration,scheduledDate:i.scheduledDate,userId:"current-user"}),o({type:"note",description:"",outcome:void 0,duration:void 0,scheduledDate:void 0}),s(!1))},u=[...t].sort((m,h)=>new Date(h.createdAt).getTime()-new Date(m.createdAt).getTime());return r.jsxs(fe,{className:"shadow-sm",children:[r.jsx(we,{children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx(Ne,{className:"text-lg",children:"Activity Timeline"}),r.jsx(Ue,{children:"Track all interactions and activities for this lead"})]}),r.jsxs(J,{onClick:()=>s(!0),size:"sm",children:[r.jsx(Nt,{className:"h-4 w-4 mr-2"}),"Add Activity"]})]})}),r.jsxs(me,{children:[a&&r.jsx(fe,{className:"mb-6 border-dashed",children:r.jsx(me,{className:"pt-6",children:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium",children:"Activity Type"}),r.jsxs($e,{value:i.type,onValueChange:m=>o(h=>({...h,type:m})),children:[r.jsx(Fe,{children:r.jsx(Be,{})}),r.jsxs(Me,{children:[r.jsx(K,{value:"call",children:"Phone Call"}),r.jsx(K,{value:"email",children:"Email"}),r.jsx(K,{value:"meeting",children:"Meeting"}),r.jsx(K,{value:"note",children:"Note"})]})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium",children:"Outcome"}),r.jsxs($e,{value:i.outcome||"",onValueChange:m=>o(h=>({...h,outcome:m||void 0})),children:[r.jsx(Fe,{children:r.jsx(Be,{placeholder:"Select outcome"})}),r.jsxs(Me,{children:[r.jsx(K,{value:"positive",children:"Positive"}),r.jsx(K,{value:"neutral",children:"Neutral"}),r.jsx(K,{value:"negative",children:"Negative"})]})]})]})]}),i.type==="call"&&r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium",children:"Duration (minutes)"}),r.jsx(je,{type:"number",value:i.duration||"",onChange:m=>o(h=>({...h,duration:m.target.value?parseInt(m.target.value):void 0})),placeholder:"e.g., 15"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium",children:"Description"}),r.jsx(Xt,{value:i.description,onChange:m=>o(h=>({...h,description:m.target.value})),placeholder:"Describe the activity...",rows:3})]}),r.jsxs("div",{className:"flex justify-end space-x-2",children:[r.jsx(J,{variant:"outline",onClick:()=>s(!1),children:"Cancel"}),r.jsx(J,{onClick:f,children:"Add Activity"})]})]})})}),r.jsx("div",{className:"space-y-4",children:u.length===0?r.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No activities recorded yet"}):u.map((m,h)=>{const x=l(m.type),g=h===u.length-1;return r.jsxs("div",{className:"relative",children:[!g&&r.jsx("div",{className:"absolute left-4 top-8 bottom-0 w-px bg-border"}),r.jsxs("div",{className:"flex items-start space-x-3",children:[r.jsx("div",{className:He("flex-shrink-0 w-8 h-8 rounded-full bg-background border-2 flex items-center justify-center",c(m.type)),children:r.jsx(x,{className:"h-4 w-4"})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-center justify-between mb-1",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("span",{className:"font-medium text-sm capitalize",children:m.type.replace("_"," ")}),m.outcome&&r.jsx(ze,{className:He("ri-badge-status text-xs",d(m.outcome)),children:m.outcome}),m.duration&&r.jsxs(ze,{variant:"secondary",className:"text-xs",children:[r.jsx(er,{className:"h-3 w-3 mr-1"}),m.duration,"m"]})]}),r.jsx("span",{className:"text-xs text-muted-foreground",children:lt(m.createdAt)})]}),r.jsx("p",{className:"text-sm text-muted-foreground",children:m.description}),m.scheduledDate&&r.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Scheduled for: ",lt(m.scheduledDate)]})]})]})]},m.id)})})]})]})}function _te({leadId:e,reminders:t}){const{createReminder:n,completeReminder:a}=ro(),[s,i]=w.useState(!1),[o,l]=w.useState({type:"follow_up",title:"",description:"",dueDate:"",priority:"medium"}),c=g=>{switch(g){case"urgent":return"bg-red-50 text-red-700 border-red-200";case"high":return"bg-orange-50 text-orange-700 border-orange-200";case"medium":return"bg-yellow-50 text-yellow-700 border-yellow-200";case"low":return"bg-green-50 text-green-700 border-green-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},d=g=>{switch(g){case"call":return"📞";case"email":return"📧";case"meeting":return"🤝";case"deadline":return"⏰";default:return"📋"}},f=g=>new Date(g)<new Date,u=async()=>{!o.title.trim()||!o.dueDate||(await n({leadId:e,type:o.type,title:o.title,description:o.description,dueDate:new Date(o.dueDate),priority:o.priority,userId:"current-user"}),l({type:"follow_up",title:"",description:"",dueDate:"",priority:"medium"}),i(!1))},m=async g=>{await a(g)},h=t.filter(g=>!g.isCompleted),x=t.filter(g=>g.isCompleted);return r.jsxs(fe,{className:"shadow-sm",children:[r.jsx(we,{children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsxs(Ne,{className:"text-lg flex items-center",children:[r.jsx(dF,{className:"h-5 w-5 mr-2"}),"Reminders"]}),r.jsx(Ue,{children:"Set follow-up reminders and track completion"})]}),r.jsxs(J,{onClick:()=>i(!0),size:"sm",children:[r.jsx(Nt,{className:"h-4 w-4 mr-2"}),"Add Reminder"]})]})}),r.jsxs(me,{children:[s&&r.jsx(fe,{className:"mb-6 border-dashed",children:r.jsx(me,{className:"pt-6",children:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium",children:"Reminder Type"}),r.jsxs($e,{value:o.type,onValueChange:g=>l(p=>({...p,type:g})),children:[r.jsx(Fe,{children:r.jsx(Be,{})}),r.jsxs(Me,{children:[r.jsx(K,{value:"follow_up",children:"Follow Up"}),r.jsx(K,{value:"call",children:"Call"}),r.jsx(K,{value:"email",children:"Email"}),r.jsx(K,{value:"meeting",children:"Meeting"}),r.jsx(K,{value:"deadline",children:"Deadline"})]})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium",children:"Priority"}),r.jsxs($e,{value:o.priority,onValueChange:g=>l(p=>({...p,priority:g})),children:[r.jsx(Fe,{children:r.jsx(Be,{})}),r.jsxs(Me,{children:[r.jsx(K,{value:"low",children:"Low"}),r.jsx(K,{value:"medium",children:"Medium"}),r.jsx(K,{value:"high",children:"High"}),r.jsx(K,{value:"urgent",children:"Urgent"})]})]})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium",children:"Title"}),r.jsx(je,{value:o.title,onChange:g=>l(p=>({...p,title:g.target.value})),placeholder:"e.g., Follow up on pricing questions"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium",children:"Due Date"}),r.jsx(je,{type:"datetime-local",value:o.dueDate,onChange:g=>l(p=>({...p,dueDate:g.target.value}))})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium",children:"Description"}),r.jsx(Xt,{value:o.description,onChange:g=>l(p=>({...p,description:g.target.value})),placeholder:"Additional details...",rows:2})]}),r.jsxs("div",{className:"flex justify-end space-x-2",children:[r.jsx(J,{variant:"outline",onClick:()=>i(!1),children:"Cancel"}),r.jsx(J,{onClick:u,children:"Add Reminder"})]})]})})}),r.jsxs("div",{className:"space-y-6",children:[h.length>0&&r.jsxs("div",{children:[r.jsxs("h4",{className:"font-semibold text-sm mb-3 flex items-center",children:[r.jsx(er,{className:"h-4 w-4 mr-2"}),"Active Reminders (",h.length,")"]}),r.jsx("div",{className:"space-y-3",children:h.sort((g,p)=>new Date(g.dueDate).getTime()-new Date(p.dueDate).getTime()).map(g=>r.jsxs("div",{className:He("flex items-start space-x-3 p-3 border rounded-lg",f(g.dueDate)?"border-red-200 bg-red-50":"hover:bg-accent/50"),children:[r.jsx(St,{checked:!1,onCheckedChange:()=>m(g.id),className:"mt-1"}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[r.jsx("span",{className:"text-lg",children:d(g.type)}),r.jsx("span",{className:"font-medium text-sm",children:g.title}),r.jsx(ze,{className:He("ri-badge-status text-xs",c(g.priority)),children:g.priority}),f(g.dueDate)&&r.jsxs(ze,{className:"bg-red-50 text-red-700 border-red-200 text-xs",children:[r.jsx(Ts,{className:"h-3 w-3 mr-1"}),"Overdue"]})]}),r.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:g.description}),r.jsxs("div",{className:"flex items-center space-x-2 text-xs text-muted-foreground",children:[r.jsx(Mr,{className:"h-3 w-3"}),r.jsxs("span",{children:["Due: ",lt(g.dueDate)]})]})]})]},g.id))})]}),x.length>0&&r.jsxs("div",{children:[r.jsxs("h4",{className:"font-semibold text-sm mb-3 text-muted-foreground",children:["Completed (",x.length,")"]}),r.jsx("div",{className:"space-y-2",children:x.sort((g,p)=>new Date(p.dueDate).getTime()-new Date(g.dueDate).getTime()).slice(0,5).map(g=>r.jsxs("div",{className:"flex items-center space-x-3 p-2 text-sm text-muted-foreground",children:[r.jsx(St,{checked:!0,disabled:!0}),r.jsx("span",{className:"line-through",children:g.title}),r.jsx("span",{className:"text-xs",children:lt(g.dueDate)})]},g.id))})]}),h.length===0&&x.length===0&&r.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No reminders set for this lead"})]})]})]})}function Lte({template:e,type:t,onSave:n,onCancel:a}){const{toast:s}=Ct(),[i,o]=w.useState(!1),[l,c]=w.useState({name:(e==null?void 0:e.name)||"",subject:(e==null?void 0:e.subject)||"",body:(e==null?void 0:e.body)||(e==null?void 0:e.message)||"",type:(e==null?void 0:e.type)||"custom",variables:(e==null?void 0:e.variables)||[],isActive:(e==null?void 0:e.isActive)??!0}),[d,f]=w.useState(""),u=[{value:"welcome",label:"Welcome"},{value:"follow_up",label:"Follow Up"},{value:"nurture",label:"Nurture"},{value:"proposal",label:"Proposal"},{value:"reminder",label:"Reminder"},{value:"custom",label:"Custom"}],m=["first_name","last_name","company_name","rep_name","rep_phone","rep_email","website_url","budget","timeframe"],h=async()=>{if(!l.name.trim()){s({title:"Validation Error",description:"Template name is required",variant:"destructive"});return}if(!l.body.trim()){s({title:"Validation Error",description:`${t==="email"?"Email body":"SMS message"} is required`,variant:"destructive"});return}if(t==="email"&&!l.subject.trim()){s({title:"Validation Error",description:"Email subject is required",variant:"destructive"});return}if(t==="sms"&&l.body.length>160){s({title:"Validation Error",description:"SMS message must be 160 characters or less",variant:"destructive"});return}o(!0);try{const v=t==="email"?{name:l.name,subject:l.subject,body:l.body,type:l.type,variables:l.variables,isActive:l.isActive}:{name:l.name,message:l.body,type:l.type,variables:l.variables,isActive:l.isActive};await n(v),s({title:"Success",description:`${t==="email"?"Email":"SMS"} template ${e?"updated":"created"} successfully`})}catch{s({title:"Error",description:`Failed to ${e?"update":"create"} template`,variant:"destructive"})}finally{o(!1)}},x=()=>{d.trim()&&!l.variables.includes(d.trim())&&(c(v=>({...v,variables:[...v.variables,d.trim()]})),f(""))},g=v=>{c(y=>({...y,variables:y.variables.filter(b=>b!==v)}))},p=v=>{const y=`{{${v}}}`;c(b=>({...b,body:b.body+y}))};return r.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:r.jsxs(fe,{className:"w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[r.jsx(we,{children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsxs(Ne,{className:"text-xl flex items-center",children:[t==="email"?r.jsx(en,{className:"h-5 w-5 mr-2 text-blue-500"}):r.jsx(nn,{className:"h-5 w-5 mr-2 text-green-500"}),e?"Edit":"Create"," ",t==="email"?"Email":"SMS"," Template"]}),r.jsx(Ue,{children:e?"Update the template details":"Create a new template for automated communications"})]}),r.jsx(J,{variant:"ghost",size:"sm",onClick:a,children:r.jsx($t,{className:"h-4 w-4"})})]})}),r.jsxs(me,{className:"space-y-6",children:[r.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"name",children:"Template Name *"}),r.jsx(je,{id:"name",value:l.name,onChange:v=>c(y=>({...y,name:v.target.value})),placeholder:"e.g., Welcome New Lead"})]}),r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"type",children:"Template Type"}),r.jsxs($e,{value:l.type,onValueChange:v=>c(y=>({...y,type:v})),children:[r.jsx(Fe,{children:r.jsx(Be,{})}),r.jsx(Me,{children:u.map(v=>r.jsx(K,{value:v.value,children:v.label},v.value))})]})]})]}),t==="email"&&r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"subject",children:"Subject Line *"}),r.jsx(je,{id:"subject",value:l.subject,onChange:v=>c(y=>({...y,subject:v.target.value})),placeholder:"e.g., Welcome to {{company_name}}, {{first_name}}!"})]}),r.jsxs("div",{className:"grid gap-6 md:grid-cols-3",children:[r.jsxs("div",{className:"md:col-span-2",children:[r.jsxs(Z,{htmlFor:"body",children:[t==="email"?"Email Body":"SMS Message"," *"]}),r.jsx(Xt,{id:"body",value:l.body,onChange:v=>c(y=>({...y,body:v.target.value})),placeholder:t==="email"?`Hi {{first_name}},

Thank you for your interest in our RV inventory!

Best regards,
{{rep_name}}`:"Hi {{first_name}}! Thanks for your interest. Call us at {{rep_phone}} - {{rep_name}}",rows:t==="email"?12:4,maxLength:t==="sms"?160:void 0}),t==="sms"&&r.jsxs("div",{className:"flex justify-between items-center mt-1",children:[r.jsxs("div",{className:"text-xs text-muted-foreground",children:[l.body.length,"/160 characters"]}),r.jsx("div",{className:`text-xs ${l.body.length>160?"text-red-500":"text-muted-foreground"}`,children:l.body.length>160&&"Message too long"})]})]}),r.jsxs("div",{children:[r.jsx(Z,{children:"Variables"}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Common Variables:"}),r.jsx("div",{className:"space-y-1",children:m.map(v=>r.jsxs(J,{variant:"outline",size:"sm",className:"w-full justify-start text-xs",onClick:()=>p(v),children:[r.jsx(Nt,{className:"h-3 w-3 mr-1"}),v]},v))})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Custom Variables:"}),r.jsxs("div",{className:"flex space-x-1 mb-2",children:[r.jsx(je,{value:d,onChange:v=>f(v.target.value),placeholder:"variable_name",className:"text-xs",onKeyPress:v=>v.key==="Enter"&&x()}),r.jsx(J,{size:"sm",onClick:x,children:r.jsx(Nt,{className:"h-3 w-3"})})]}),r.jsx("div",{className:"space-y-1",children:l.variables.map(v=>r.jsxs("div",{className:"flex items-center justify-between p-1 bg-muted rounded text-xs",children:[r.jsx("span",{children:v}),r.jsx(J,{variant:"ghost",size:"sm",onClick:()=>g(v),className:"h-4 w-4 p-0",children:r.jsx(wn,{className:"h-3 w-3"})})]},v))})]})]})]})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(St,{id:"isActive",checked:l.isActive,onCheckedChange:v=>c(y=>({...y,isActive:!!v}))}),r.jsx(Z,{htmlFor:"isActive",children:"Active template"})]}),r.jsxs("div",{children:[r.jsx(Z,{children:"Preview"}),r.jsxs("div",{className:"mt-2 p-4 bg-muted/30 rounded-lg",children:[t==="email"&&r.jsxs("div",{className:"mb-2",children:[r.jsx("strong",{children:"Subject:"})," ",l.subject||"No subject"]}),r.jsx("div",{className:"whitespace-pre-wrap text-sm",children:l.body||`No ${t==="email"?"content":"message"}`})]})]}),r.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t",children:[r.jsx(J,{variant:"outline",onClick:a,disabled:i,children:"Cancel"}),r.jsx(J,{onClick:h,disabled:i,children:i?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Saving..."]}):r.jsxs(r.Fragment,{children:[r.jsx(Pr,{className:"h-4 w-4 mr-2"}),e?"Update":"Create"," Template"]})})]})]})]})})}function Rte({sequence:e,emailTemplates:t,smsTemplates:n,onSave:a,onCancel:s}){var E,S,N,I,D;const{toast:i}=Ct(),[o,l]=w.useState(!1),[c,d]=w.useState({name:(e==null?void 0:e.name)||"",description:(e==null?void 0:e.description)||"",targetAudience:(e==null?void 0:e.targetAudience)||"",steps:(e==null?void 0:e.steps)||[],isActive:(e==null?void 0:e.isActive)??!0}),[f,u]=w.useState(!1),[m,h]=w.useState({type:"email",delay:0,content:{body:""},isActive:!0}),x=[{value:"email",label:"Email",icon:en,color:"text-blue-500"},{value:"sms",label:"SMS",icon:nn,color:"text-green-500"},{value:"wait",label:"Wait",icon:er,color:"text-orange-500"},{value:"task",label:"Task",icon:$n,color:"text-purple-500"}],g=T=>{const A=x.find(_=>_.value===T);return(A==null?void 0:A.icon)||en},p=T=>{const A=x.find(_=>_.value===T);return(A==null?void 0:A.color)||"text-gray-500"},v=async()=>{if(!c.name.trim()){i({title:"Validation Error",description:"Sequence name is required",variant:"destructive"});return}if(c.steps.length===0){i({title:"Validation Error",description:"At least one step is required",variant:"destructive"});return}l(!0);try{const T={...c,steps:c.steps.map((A,_)=>({...A,order:_+1}))};await a(T),i({title:"Success",description:`Sequence ${e?"updated":"created"} successfully`})}catch{i({title:"Error",description:`Failed to ${e?"update":"create"} sequence`,variant:"destructive"})}finally{l(!1)}},y=()=>{var A,_;if(!((_=(A=m.content)==null?void 0:A.body)!=null&&_.trim())&&m.type!=="wait"){i({title:"Validation Error",description:"Step content is required",variant:"destructive"});return}const T={id:Math.random().toString(36).substr(2,9),type:m.type||"email",delay:m.delay||0,content:m.content||{body:""},isActive:!0};d(k=>({...k,steps:[...k.steps,T]})),h({type:"email",delay:0,content:{body:""},isActive:!0}),u(!1)},b=T=>{d(A=>({...A,steps:A.steps.filter(_=>_.id!==T)}))},j=(T,A)=>{const _=[...c.steps],k=_.findIndex(L=>L.id===T);A==="up"&&k>0?[_[k],_[k-1]]=[_[k-1],_[k]]:A==="down"&&k<_.length-1&&([_[k],_[k+1]]=[_[k+1],_[k]]),d(L=>({...L,steps:_}))},C=T=>{if(T<24)return`${T} hours`;const A=Math.floor(T/24),_=T%24;return _===0?`${A} days`:`${A} days ${_} hours`};return r.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:r.jsxs(fe,{className:"w-full max-w-6xl max-h-[90vh] overflow-y-auto",children:[r.jsx(we,{children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsxs(Ne,{className:"text-xl",children:[e?"Edit":"Create"," Nurture Sequence"]}),r.jsx(Ue,{children:e?"Update the sequence details and steps":"Create an automated sequence for lead nurturing"})]}),r.jsx(J,{variant:"ghost",size:"sm",onClick:s,children:r.jsx($t,{className:"h-4 w-4"})})]})}),r.jsxs(me,{className:"space-y-6",children:[r.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"name",children:"Sequence Name *"}),r.jsx(je,{id:"name",value:c.name,onChange:T=>d(A=>({...A,name:T.target.value})),placeholder:"e.g., New Lead Welcome Series"})]}),r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"targetAudience",children:"Target Audience"}),r.jsx(je,{id:"targetAudience",value:c.targetAudience,onChange:T=>d(A=>({...A,targetAudience:T.target.value})),placeholder:"e.g., New website leads"})]})]}),r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"description",children:"Description"}),r.jsx(Xt,{id:"description",value:c.description,onChange:T=>d(A=>({...A,description:T.target.value})),placeholder:"Describe the purpose and goals of this sequence",rows:3})]}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs(Z,{children:["Sequence Steps (",c.steps.length,")"]}),r.jsxs(J,{onClick:()=>u(!0),size:"sm",children:[r.jsx(Nt,{className:"h-4 w-4 mr-2"}),"Add Step"]})]}),f&&r.jsx(fe,{className:"mb-4 border-dashed",children:r.jsx(me,{className:"pt-6",children:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[r.jsxs("div",{children:[r.jsx(Z,{children:"Step Type"}),r.jsxs($e,{value:m.type,onValueChange:T=>h(A=>({...A,type:T})),children:[r.jsx(Fe,{children:r.jsx(Be,{})}),r.jsx(Me,{children:x.map(T=>r.jsx(K,{value:T.value,children:r.jsxs("div",{className:"flex items-center",children:[r.jsx(T.icon,{className:He("h-4 w-4 mr-2",T.color)}),r.jsx("span",{children:T.label})]})},T.value))})]})]}),r.jsxs("div",{children:[r.jsx(Z,{children:"Delay (hours)"}),r.jsx(je,{type:"number",value:m.delay||0,onChange:T=>h(A=>({...A,delay:parseInt(T.target.value)||0})),placeholder:"0",min:"0"})]}),m.type==="email"&&r.jsxs("div",{children:[r.jsx(Z,{children:"Email Template"}),r.jsxs($e,{value:((E=m.content)==null?void 0:E.template)||"",onValueChange:T=>{const A=t.find(_=>_.id===T);h(_=>({..._,content:{..._.content,template:T,subject:(A==null?void 0:A.subject)||"",body:(A==null?void 0:A.body)||""}}))},children:[r.jsx(Fe,{children:r.jsx(Be,{placeholder:"Select template"})}),r.jsxs(Me,{children:[r.jsx(K,{value:"",children:"Custom Content"}),t.filter(T=>T.isActive).map(T=>r.jsx(K,{value:T.id,children:T.name},T.id))]})]})]}),m.type==="sms"&&r.jsxs("div",{children:[r.jsx(Z,{children:"SMS Template"}),r.jsxs($e,{value:((S=m.content)==null?void 0:S.template)||"",onValueChange:T=>{const A=n.find(_=>_.id===T);h(_=>({..._,content:{..._.content,template:T,body:(A==null?void 0:A.message)||""}}))},children:[r.jsx(Fe,{children:r.jsx(Be,{placeholder:"Select template"})}),r.jsxs(Me,{children:[r.jsx(K,{value:"",children:"Custom Content"}),n.filter(T=>T.isActive).map(T=>r.jsx(K,{value:T.id,children:T.name},T.id))]})]})]})]}),m.type==="email"&&r.jsxs("div",{children:[r.jsx(Z,{children:"Subject"}),r.jsx(je,{value:((N=m.content)==null?void 0:N.subject)||"",onChange:T=>h(A=>({...A,content:{...A.content,subject:T.target.value}})),placeholder:"Email subject line"})]}),(m.type==="email"||m.type==="sms"||m.type==="task")&&r.jsxs("div",{children:[r.jsx(Z,{children:m.type==="email"?"Email Body":m.type==="sms"?"SMS Message":"Task Description"}),r.jsx(Xt,{value:((I=m.content)==null?void 0:I.body)||"",onChange:T=>h(A=>({...A,content:{...A.content,body:T.target.value}})),placeholder:m.type==="email"?"Email content...":m.type==="sms"?"SMS message...":"Task description...",rows:m.type==="email"?6:3,maxLength:m.type==="sms"?160:void 0}),m.type==="sms"&&r.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:[(((D=m.content)==null?void 0:D.body)||"").length,"/160 characters"]})]}),r.jsxs("div",{className:"flex justify-end space-x-2",children:[r.jsx(J,{variant:"outline",onClick:()=>u(!1),children:"Cancel"}),r.jsx(J,{onClick:y,children:"Add Step"})]})]})})}),r.jsxs("div",{className:"space-y-4",children:[c.steps.map((T,A)=>{const _=g(T.type),k=A===c.steps.length-1;return r.jsxs("div",{className:"relative",children:[!k&&r.jsx("div",{className:"absolute left-6 top-12 bottom-0 w-px bg-border"}),r.jsxs("div",{className:"flex items-start space-x-4 p-4 border rounded-lg hover:bg-accent/50 transition-colors",children:[r.jsx("div",{className:He("flex-shrink-0 w-12 h-12 rounded-full bg-background border-2 flex items-center justify-center",p(T.type)),children:r.jsx(_,{className:"h-5 w-5"})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[r.jsx("span",{className:"font-medium capitalize",children:T.type}),T.delay>0&&r.jsxs(ze,{variant:"secondary",className:"text-xs",children:[r.jsx(er,{className:"h-3 w-3 mr-1"}),C(T.delay)]})]}),T.type==="email"&&r.jsxs("div",{className:"bg-blue-50 p-3 rounded-md",children:[r.jsx("p",{className:"font-medium text-sm text-blue-900",children:T.content.subject||"No subject"}),r.jsx("p",{className:"text-sm text-blue-700 mt-1 line-clamp-2",children:T.content.body||"No content"})]}),T.type==="sms"&&r.jsx("div",{className:"bg-green-50 p-3 rounded-md",children:r.jsx("p",{className:"text-sm text-green-700",children:T.content.body||"No message"})}),T.type==="wait"&&r.jsx("div",{className:"bg-orange-50 p-3 rounded-md",children:r.jsxs("p",{className:"text-sm text-orange-700",children:["Wait ",C(T.delay)," before next step"]})}),T.type==="task"&&r.jsx("div",{className:"bg-purple-50 p-3 rounded-md",children:r.jsx("p",{className:"text-sm text-purple-700",children:T.content.body||"No task description"})})]}),r.jsxs("div",{className:"flex items-center space-x-1",children:[r.jsx(J,{variant:"outline",size:"sm",onClick:()=>j(T.id,"up"),disabled:A===0,children:r.jsx(wo,{className:"h-3 w-3"})}),r.jsx(J,{variant:"outline",size:"sm",onClick:()=>j(T.id,"down"),disabled:A===c.steps.length-1,children:r.jsx(jo,{className:"h-3 w-3"})}),r.jsx(J,{variant:"outline",size:"sm",onClick:()=>b(T.id),children:r.jsx(wn,{className:"h-3 w-3"})})]})]})]},T.id)}),c.steps.length===0&&r.jsx("div",{className:"text-center py-8 text-muted-foreground border-2 border-dashed rounded-lg",children:'No steps added yet. Click "Add Step" to get started.'})]})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(St,{id:"isActive",checked:c.isActive,onCheckedChange:T=>d(A=>({...A,isActive:!!T}))}),r.jsx(Z,{htmlFor:"isActive",children:"Active sequence"})]}),r.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t",children:[r.jsx(J,{variant:"outline",onClick:s,disabled:o,children:"Cancel"}),r.jsx(J,{onClick:v,disabled:o,children:o?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Saving..."]}):r.jsxs(r.Fragment,{children:[r.jsx(Pr,{className:"h-4 w-4 mr-2"}),e?"Update":"Create"," Sequence"]})})]})]})]})})}const Fte=[{id:"1",name:"New Lead Welcome Series",description:"Automated welcome sequence for new leads",isActive:!0,targetAudience:"New website leads",steps:[{id:"1",type:"email",delay:0},{id:"2",type:"wait",delay:72},{id:"3",type:"email",delay:0},{id:"4",type:"sms",delay:48}]}],Mte=[{id:"1",name:"Welcome New Lead",subject:"Welcome to our RV dealership!",body:"Thank you for your interest...",type:"welcome",isActive:!0}],$te=[{id:"1",name:"Quick Follow-up",message:"Hi! Just wanted to check if you have any questions.",type:"follow_up",isActive:!0}];function kT(){const[e,t]=w.useState(Fte),[n,a]=w.useState(Mte),[s,i]=w.useState($te),[o]=w.useState([]),[l,c]=w.useState(null),[d,f]=w.useState(!1),[u,m]=w.useState(!1),[h,x]=w.useState(null),[g,p]=w.useState(null),[v,y]=w.useState("email"),b=A=>{switch(A){case"email":return en;case"sms":return nn;case"wait":return er;case"task":return $n;default:return AG}},j=A=>{switch(A){case"email":return"text-blue-500 bg-blue-50";case"sms":return"text-green-500 bg-green-50";case"wait":return"text-orange-500 bg-orange-50";case"task":return"text-purple-500 bg-purple-50";default:return"text-gray-500 bg-gray-50"}},C=A=>{if(A<24)return`${A} hours`;const _=Math.floor(A/24),k=A%24;return k===0?`${_} days`:`${_} days ${k} hours`},E=A=>{const _=o.filter(k=>k.sequenceId===A);return{total:_.length,active:_.filter(k=>k.status==="active").length,completed:_.filter(k=>k.status==="completed").length,paused:_.filter(k=>k.status==="paused").length}},S=(A,_)=>{p({template:A,type:_}),m(!0)},N=async A=>{if(g)g.type==="email"?a(_=>_.map(k=>k.id===g.template.id?{...k,...A}:k)):i(_=>_.map(k=>k.id===g.template.id?{...k,...A}:k));else{const _={id:Math.random().toString(36).substr(2,9),...A,isActive:!0};v==="email"?a(k=>[...k,_]):i(k=>[...k,_])}m(!1),p(null)},I=()=>{f(!0),x(null)},D=A=>{x(A),f(!0)},T=async A=>{if(h)t(_=>_.map(k=>k.id===h.id?{...k,...A}:k));else{const _={id:Math.random().toString(36).substr(2,9),...A,steps:A.steps||[]};t(k=>[...k,_])}f(!1),x(null)};return r.jsxs("div",{className:"space-y-6",children:[u&&r.jsx(Lte,{template:g==null?void 0:g.template,type:(g==null?void 0:g.type)||v,onSave:N,onCancel:()=>{m(!1),p(null)}}),d&&r.jsx(Rte,{sequence:h,emailTemplates:n,smsTemplates:s,onSave:T,onCancel:()=>{f(!1),x(null)}}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-2xl font-bold",children:"Nurture Sequences"}),r.jsx("p",{className:"text-muted-foreground",children:"Automate lead nurturing with email and SMS sequences"})]}),r.jsxs("div",{className:"flex space-x-2",children:[r.jsxs(J,{variant:"outline",onClick:()=>m(!0),children:[r.jsx(Nt,{className:"h-4 w-4 mr-2"}),"Template"]}),r.jsxs(J,{onClick:I,children:[r.jsx(Nt,{className:"h-4 w-4 mr-2"}),"Sequence"]})]})]}),r.jsxs(lr,{defaultValue:"sequences",className:"space-y-6",children:[r.jsxs(or,{children:[r.jsx(Ke,{value:"sequences",children:"Sequences"}),r.jsx(Ke,{value:"templates",children:"Templates"}),r.jsx(Ke,{value:"analytics",children:"Analytics"})]}),r.jsxs(Je,{value:"sequences",className:"space-y-6",children:[r.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:e.map(A=>{const _=E(A.id);return r.jsxs(fe,{className:"shadow-sm hover:shadow-md transition-shadow cursor-pointer",onClick:()=>c(A),children:[r.jsx(we,{children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx(Ne,{className:"text-lg",children:A.name}),r.jsx(Ue,{className:"mt-1",children:A.description})]}),r.jsx(ze,{className:A.isActive?"bg-green-50 text-green-700 border-green-200":"bg-gray-50 text-gray-700 border-gray-200",children:A.isActive?"Active":"Inactive"})]})}),r.jsx(me,{children:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center space-x-4 text-sm",children:[r.jsxs("div",{className:"flex items-center space-x-1",children:[r.jsx($n,{className:"h-4 w-4 text-blue-500"}),r.jsxs("span",{children:[_.total," enrolled"]})]}),r.jsxs("div",{className:"flex items-center space-x-1",children:[r.jsx(qw,{className:"h-4 w-4 text-green-500"}),r.jsxs("span",{children:[_.active," active"]})]})]}),r.jsxs("div",{className:"flex flex-wrap gap-1",children:[A.steps.slice(0,4).map((k,L)=>{const $=b(k.type);return r.jsx("div",{className:He("flex items-center justify-center w-8 h-8 rounded-full",j(k.type)),children:r.jsx($,{className:"h-4 w-4"})},k.id)}),A.steps.length>4&&r.jsxs("div",{className:"flex items-center justify-center w-8 h-8 rounded-full bg-gray-100 text-gray-500 text-xs",children:["+",A.steps.length-4]})]}),r.jsxs("div",{className:"text-xs text-muted-foreground",children:["Target: ",A.targetAudience]})]})})]},A.id)})}),l&&r.jsxs(fe,{className:"shadow-sm",children:[r.jsx(we,{children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx(Ne,{className:"text-xl",children:l.name}),r.jsx(Ue,{children:l.description})]}),r.jsxs("div",{className:"flex space-x-2",children:[r.jsxs(J,{variant:"outline",size:"sm",onClick:()=>D(l),children:[r.jsx(Br,{className:"h-4 w-4 mr-2"}),"Edit"]}),r.jsxs(J,{variant:"outline",size:"sm",children:[l.isActive?r.jsx(NG,{className:"h-4 w-4 mr-2"}):r.jsx(qw,{className:"h-4 w-4 mr-2"}),l.isActive?"Pause":"Activate"]})]})]})}),r.jsx(me,{children:r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("h4",{className:"font-semibold mb-3",children:"Sequence Steps"}),r.jsx("div",{className:"space-y-4",children:l.steps.map((A,_)=>{const k=b(A.type),L=_===l.steps.length-1;return r.jsxs("div",{className:"relative",children:[!L&&r.jsx("div",{className:"absolute left-6 top-12 bottom-0 w-px bg-border"}),r.jsxs("div",{className:"flex items-start space-x-4",children:[r.jsx("div",{className:He("flex-shrink-0 w-12 h-12 rounded-full flex items-center justify-center",j(A.type)),children:r.jsx(k,{className:"h-5 w-5"})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[r.jsx("span",{className:"font-medium capitalize",children:A.type}),A.delay>0&&r.jsxs(ze,{variant:"outline",className:"flex items-center space-x-1",children:[r.jsx(er,{className:"h-3 w-3"}),r.jsxs("span",{children:["Wait ",C(A.delay)]})]})]}),A.type==="email"&&r.jsx("div",{className:"bg-muted/30 p-3 rounded-md",children:r.jsx("p",{className:"text-sm text-muted-foreground",children:A.type==="email"?"Email step":A.type==="sms"?"SMS step":A.type==="wait"?"Wait step":"Step"})})]})]})]},A.id)})})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-semibold mb-3",children:"Performance"}),r.jsx("div",{className:"grid gap-4 md:grid-cols-4",children:Object.entries(E(l.id)).map(([A,_])=>r.jsxs("div",{className:"text-center p-3 bg-muted/30 rounded-lg",children:[r.jsx("div",{className:"text-2xl font-bold",children:_}),r.jsx("div",{className:"text-sm text-muted-foreground capitalize",children:A})]},A))})]})]})})]})]}),r.jsx(Je,{value:"templates",className:"space-y-6",children:r.jsxs(lr,{defaultValue:"email",className:"space-y-4",children:[r.jsxs(or,{children:[r.jsx(Ke,{value:"email",children:"Email Templates"}),r.jsx(Ke,{value:"sms",children:"SMS Templates"})]}),u&&!g&&r.jsx("div",{className:"mb-4",children:r.jsx(lr,{value:v,onValueChange:A=>y(A),children:r.jsxs(or,{children:[r.jsx(Ke,{value:"email",children:"Email Template"}),r.jsx(Ke,{value:"sms",children:"SMS Template"})]})})}),r.jsx(Je,{value:"email",children:r.jsx("div",{className:"grid gap-4 md:grid-cols-2",children:n.map(A=>r.jsxs(fe,{className:"shadow-sm",children:[r.jsx(we,{children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx(Ne,{className:"text-lg",children:A.name}),r.jsx(ze,{variant:"secondary",className:"mt-1",children:A.type})]}),r.jsx(J,{variant:"outline",size:"sm",onClick:()=>S(A,"email"),children:r.jsx(Br,{className:"h-4 w-4"})})]})}),r.jsx(me,{children:r.jsxs("div",{className:"space-y-2",children:[r.jsx("p",{className:"text-sm text-muted-foreground",children:A.subject||A.body}),r.jsxs("div",{children:[r.jsx("span",{className:"text-sm font-medium",children:"Variables:"}),r.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:(A.variables||["first_name","company_name"]).map(_=>r.jsx(ze,{variant:"outline",className:"text-xs",children:_},_))})]})]})})]},A.id))})}),r.jsx(Je,{value:"sms",children:r.jsx("div",{className:"grid gap-4 md:grid-cols-2",children:s.map(A=>r.jsxs(fe,{className:"shadow-sm",children:[r.jsx(we,{children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx(Ne,{className:"text-lg",children:A.name}),r.jsx(ze,{variant:"secondary",className:"mt-1",children:A.type})]}),r.jsx(J,{variant:"outline",size:"sm",onClick:()=>S(A,"sms"),children:r.jsx(Br,{className:"h-4 w-4"})})]})}),r.jsx(me,{children:r.jsxs("div",{className:"space-y-2",children:[r.jsx("p",{className:"text-sm text-muted-foreground",children:A.message}),r.jsxs("div",{children:[r.jsx("span",{className:"text-sm font-medium",children:"Variables:"}),r.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:(A.variables||["first_name"]).map(_=>r.jsx(ze,{variant:"outline",className:"text-xs",children:_},_))})]})]})})]},A.id))})})]})}),r.jsxs(Je,{value:"analytics",className:"space-y-6",children:[r.jsxs("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-4",children:[r.jsxs(fe,{className:"shadow-sm border-0 bg-gradient-to-br from-blue-50 to-blue-100/50",children:[r.jsxs(we,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(Ne,{className:"text-sm font-medium text-blue-900",children:"Total Enrollments"}),r.jsx($n,{className:"h-4 w-4 text-blue-600"})]}),r.jsxs(me,{children:[r.jsx("div",{className:"text-2xl font-bold text-blue-900",children:"0"}),r.jsxs("p",{className:"text-xs text-blue-600 flex items-center mt-1",children:[r.jsx(Ot,{className:"h-3 w-3 mr-1"}),"Across all sequences"]})]})]}),r.jsxs(fe,{className:"shadow-sm border-0 bg-gradient-to-br from-green-50 to-green-100/50",children:[r.jsxs(we,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(Ne,{className:"text-sm font-medium text-green-900",children:"Active Sequences"}),r.jsx(qw,{className:"h-4 w-4 text-green-600"})]}),r.jsxs(me,{children:[r.jsx("div",{className:"text-2xl font-bold text-green-900",children:e.filter(A=>A.isActive).length}),r.jsxs("p",{className:"text-xs text-green-600 flex items-center mt-1",children:[r.jsx(Ot,{className:"h-3 w-3 mr-1"}),"Currently running"]})]})]}),r.jsxs(fe,{className:"shadow-sm border-0 bg-gradient-to-br from-purple-50 to-purple-100/50",children:[r.jsxs(we,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(Ne,{className:"text-sm font-medium text-purple-900",children:"Completion Rate"}),r.jsx(Ot,{className:"h-4 w-4 text-purple-600"})]}),r.jsxs(me,{children:[r.jsx("div",{className:"text-2xl font-bold text-purple-900",children:"0%"}),r.jsxs("p",{className:"text-xs text-purple-600 flex items-center mt-1",children:[r.jsx(Ot,{className:"h-3 w-3 mr-1"}),"Average completion"]})]})]}),r.jsxs(fe,{className:"shadow-sm border-0 bg-gradient-to-br from-orange-50 to-orange-100/50",children:[r.jsxs(we,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(Ne,{className:"text-sm font-medium text-orange-900",children:"Templates"}),r.jsx(en,{className:"h-4 w-4 text-orange-600"})]}),r.jsxs(me,{children:[r.jsx("div",{className:"text-2xl font-bold text-orange-900",children:n.length+s.length}),r.jsxs("p",{className:"text-xs text-orange-600 flex items-center mt-1",children:[r.jsx(en,{className:"h-3 w-3 mr-1"}),"Email & SMS templates"]})]})]})]}),r.jsxs(fe,{className:"shadow-sm",children:[r.jsxs(we,{children:[r.jsx(Ne,{children:"Sequence Performance"}),r.jsx(Ue,{children:"Detailed analytics for each nurture sequence"})]}),r.jsx(me,{children:r.jsx("div",{className:"space-y-4",children:e.map(A=>{E(A.id);const _=0;return r.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("h4",{className:"font-semibold",children:A.name}),r.jsx("p",{className:"text-sm text-muted-foreground",children:A.description})]}),r.jsxs("div",{className:"grid grid-cols-4 gap-4 text-center",children:[r.jsxs("div",{children:[r.jsx("div",{className:"text-lg font-bold",children:"0"}),r.jsx("div",{className:"text-xs text-muted-foreground",children:"Enrolled"})]}),r.jsxs("div",{children:[r.jsx("div",{className:"text-lg font-bold text-green-600",children:"0"}),r.jsx("div",{className:"text-xs text-muted-foreground",children:"Active"})]}),r.jsxs("div",{children:[r.jsx("div",{className:"text-lg font-bold text-blue-600",children:"0"}),r.jsx("div",{className:"text-xs text-muted-foreground",children:"Completed"})]}),r.jsxs("div",{children:[r.jsxs("div",{className:"text-lg font-bold text-purple-600",children:[_.toFixed(1),"%"]}),r.jsx("div",{className:"text-xs text-muted-foreground",children:"Rate"})]})]})]},A.id)})})})]})]})]})]})}function E$(){const[e,t]=w.useState([]),[n,a]=w.useState([]),[s,i]=w.useState([]),[o,l]=w.useState([]),[c,d]=w.useState([]),[f,u]=w.useState([]),[m,h]=w.useState([]),[x,g]=w.useState([]),[p,v]=w.useState(!1);w.useEffect(()=>{y()},[]);const y=()=>{const W=un("renter-insight-email-templates",[]),q=un("renter-insight-sms-templates",[]),R=un("renter-insight-sequences",[]),V=un("renter-insight-enrollments",[]),G=un("renter-insight-communication-logs",[]),ee=un("renter-insight-ai-insights",[]);if(W.length===0){const re=[{id:"1",name:"Welcome New Lead",subject:"Welcome to {{company_name}}, {{first_name}}!",body:`Hi {{first_name}},

Thank you for your interest in our RV inventory! We're excited to help you find the perfect recreational vehicle for your adventures.

Here's what happens next:
- One of our RV specialists will contact you within 24 hours
- We'll schedule a personalized tour of our showroom
- You'll receive our latest inventory updates and special offers

In the meantime, feel free to browse our current inventory at {{website_url}}.

Best regards,
{{rep_name}}
{{company_name}}`,type:"welcome",variables:["first_name","company_name","website_url","rep_name"],isActive:!0,createdAt:new Date("2024-01-01")},{id:"2",name:"Follow-up After 3 Days",subject:"Still looking for the perfect RV, {{first_name}}?",body:`Hi {{first_name}},

I wanted to follow up on your recent inquiry about our RV inventory. Have you had a chance to think about what type of RV would best suit your needs?

Based on your interests, I'd love to show you:
- {{suggested_models}}

We also have some exciting financing options that might interest you. Would you like to schedule a call this week to discuss your options?

You can reply to this email or call me directly at {{rep_phone}}.

Best regards,
{{rep_name}}`,type:"follow_up",variables:["first_name","suggested_models","rep_phone","rep_name"],isActive:!0,createdAt:new Date("2024-01-01")}];i(re),Wr("renter-insight-email-templates",re)}else i(W);if(q.length===0){const re=[{id:"1",name:"Quick Follow-up",message:"Hi {{first_name}}! This is {{rep_name}} from {{company_name}}. Just wanted to check if you have any questions about the RVs you viewed. Reply STOP to opt out.",type:"follow_up",variables:["first_name","rep_name","company_name"],isActive:!0,createdAt:new Date("2024-01-01")},{id:"2",name:"Appointment Reminder",message:"Hi {{first_name}}! Reminder: Your RV showroom appointment is tomorrow at {{appointment_time}}. See you then! - {{rep_name}}",type:"reminder",variables:["first_name","appointment_time","rep_name"],isActive:!0,createdAt:new Date("2024-01-01")}];l(re),Wr("renter-insight-sms-templates",re)}else l(q);if(R.length===0){const re=[{id:"1",name:"New Lead Welcome Series",description:"Automated welcome sequence for new leads",triggerConditions:[{type:"lead_status",operator:"equals",value:"new"}],steps:[{id:"1",sequenceId:"1",order:1,type:"email",delay:0,content:{subject:"Welcome to {{company_name}}, {{first_name}}!",body:mockEmailTemplates[0].body,template:"1"},isActive:!0},{id:"2",sequenceId:"1",order:2,type:"wait",delay:72,content:{body:"Wait 3 days"},isActive:!0},{id:"3",sequenceId:"1",order:3,type:"email",delay:0,content:{subject:"Still looking for the perfect RV, {{first_name}}?",body:mockEmailTemplates[1].body,template:"2"},isActive:!0},{id:"4",sequenceId:"1",order:4,type:"sms",delay:48,content:{body:mockSmsTemplates[0].message},isActive:!0}],isActive:!0,targetAudience:"New website leads",createdBy:"admin",createdAt:new Date("2024-01-01"),updatedAt:new Date("2024-01-01")}];t(re),Wr("renter-insight-sequences",re)}else t(R);if(ee.length===0){const re=[{id:"1",leadId:"1",type:"next_action",title:"Optimal Contact Time Identified",description:"Based on lead behavior patterns, the best time to contact this lead is Tuesday-Thursday between 2-4 PM.",confidence:85,actionable:!0,suggestedActions:["Schedule call for Tuesday 2-4 PM","Send follow-up email on Wednesday morning","Avoid Friday afternoon contact"],metadata:{timeZone:"EST",preferredDays:["Tuesday","Wednesday","Thursday"],preferredHours:[14,15,16]},generatedAt:new Date("2024-01-20"),isRead:!1},{id:"2",leadId:"1",type:"communication_style",title:"Communication Preference Analysis",description:"This lead responds better to detailed, educational content rather than high-pressure sales tactics.",confidence:78,actionable:!0,suggestedActions:["Share educational RV buying guides","Focus on features and benefits","Provide comparison charts","Avoid aggressive closing techniques"],metadata:{preferredStyle:"educational",responseRate:.65,engagementType:"content-focused"},generatedAt:new Date("2024-01-20"),isRead:!1}];u(re),Wr("renter-insight-ai-insights",re)}else u(ee);a(V),d(G)},b=async(W,q)=>{var R,V;v(!0);try{const G={id:Math.random().toString(36).substr(2,9),leadId:W,sequenceId:q,currentStepId:((V=(R=e.find(ee=>ee.id===q))==null?void 0:R.steps[0])==null?void 0:V.id)||"",status:"active",enrolledAt:new Date,nextActionAt:new Date};return a(ee=>[...ee,G]),await j(G),G}finally{v(!1)}},j=async W=>{const q=e.find(G=>G.id===W.sequenceId);if(!q)return;const R=q.steps.find(G=>G.id===W.currentStepId);if(!R)return;switch(R.type){case"email":await C(W.leadId,R);break;case"sms":await E(W.leadId,R);break;case"wait":const G=new Date;G.setHours(G.getHours()+R.delay),a(ee=>ee.map(re=>re.id===W.id?{...re,nextActionAt:G}:re));break}const V=q.steps.findIndex(G=>G.id===R.id)+1;if(V<q.steps.length){const G=q.steps[V];a(ee=>ee.map(re=>re.id===W.id?{...re,currentStepId:G.id}:re))}else a(G=>G.map(ee=>ee.id===W.id?{...ee,status:"completed",completedAt:new Date}:ee))},C=async(W,q)=>{const R={id:Math.random().toString(36).substr(2,9),leadId:W,type:"email",direction:"outbound",subject:q.content.subject,content:q.content.body,status:"sent",sentAt:new Date,metadata:{sequenceStep:q.id,template:q.content.template}};d(V=>[...V,R]),setTimeout(()=>{d(V=>V.map(G=>G.id===R.id?{...G,status:"delivered",deliveredAt:new Date}:G))},2e3),setTimeout(()=>{d(V=>V.map(G=>G.id===R.id?{...G,status:"opened",openedAt:new Date}:G))},5e3)},E=async(W,q)=>{const R={id:Math.random().toString(36).substr(2,9),leadId:W,type:"sms",direction:"outbound",content:q.content.body,status:"sent",sentAt:new Date,metadata:{sequenceStep:q.id}};d(V=>[...V,R]),setTimeout(()=>{d(V=>V.map(G=>G.id===R.id?{...G,status:"delivered",deliveredAt:new Date}:G))},1e3)};return{sequences:e,enrollments:n,emailTemplates:s,smsTemplates:o,communicationLogs:c,aiInsights:f,automationRules:m,analytics:x,loading:p,enrollLeadInSequence:b,processNextStep:j,generateAIInsights:async(W,q)=>{var R;v(!0);try{const V=[];q.score>70&&V.push({id:Math.random().toString(36).substr(2,9),leadId:W,type:"next_action",title:"High-Priority Lead - Immediate Action Recommended",description:"This lead has a high score and recent activity. Schedule a personal call within 24 hours.",confidence:92,actionable:!0,suggestedActions:["Schedule personal phone call","Send personalized video message","Invite to exclusive showroom tour"],generatedAt:new Date,isRead:!1});const G=new Date(q.lastActivity),ee=Math.floor((Date.now()-G.getTime())/(1e3*60*60*24));return ee>7&&V.push({id:Math.random().toString(36).substr(2,9),leadId:W,type:"timing",title:"Re-engagement Opportunity",description:`No activity for ${ee} days. Consider a re-engagement campaign.`,confidence:75,actionable:!0,suggestedActions:['Send "We miss you" email',"Offer special incentive","Share new inventory updates"],generatedAt:new Date,isRead:!1}),(R=q.customFields)!=null&&R.budget&&V.push({id:Math.random().toString(36).substr(2,9),leadId:W,type:"content_suggestion",title:"Personalized Content Recommendation",description:`Based on budget range ${q.customFields.budget}, suggest specific RV models and financing options.`,confidence:88,actionable:!0,suggestedActions:["Send budget-specific inventory","Share financing calculator","Provide trade-in valuation"],generatedAt:new Date,isRead:!1}),u(re=>[...re.filter(de=>de.leadId!==W),...V]),V}finally{v(!1)}},createEmailTemplate:async W=>{const q={id:Math.random().toString(36).substr(2,9),name:W.name||"",subject:W.subject||"",body:W.body||"",type:W.type||"custom",variables:W.variables||[],isActive:!0,createdAt:new Date},R=[...s,q];return i(R),Wr("renter-insight-email-templates",R),q},createSMSTemplate:async W=>{const q={id:Math.random().toString(36).substr(2,9),name:W.name||"",message:W.message||"",type:W.type||"custom",variables:W.variables||[],isActive:!0,createdAt:new Date},R=[...o,q];return l(R),Wr("renter-insight-sms-templates",R),q},createNurtureSequence:async W=>{const q={id:Math.random().toString(36).substr(2,9),name:W.name||"",description:W.description||"",triggerConditions:W.triggerConditions||[],steps:W.steps||[],isActive:!0,targetAudience:W.targetAudience||"",createdBy:"current-user",createdAt:new Date,updatedAt:new Date},R=[...e,q];return t(R),Wr("renter-insight-sequences",R),q},updateNurtureSequence:async(W,q)=>{const R=e.map(V=>V.id===W?{...V,...q,updatedAt:new Date}:V);t(R),Wr("renter-insight-sequences",R)},updateEmailTemplate:async(W,q)=>{const R=s.map(V=>V.id===W?{...V,...q}:V);i(R),Wr("renter-insight-email-templates",R)},updateSMSTemplate:async(W,q)=>{const R=o.map(V=>V.id===W?{...V,...q}:V);l(R),Wr("renter-insight-sms-templates",R)},getEnrollmentsByLead:W=>n.filter(q=>q.leadId===W),getCommunicationHistory:W=>c.filter(q=>q.leadId===W).sort((q,R)=>new Date(R.sentAt).getTime()-new Date(q.sentAt).getTime()),getAIInsightsByLead:W=>f.filter(q=>q.leadId===W&&!q.isRead),markInsightAsRead:async W=>{u(q=>q.map(R=>R.id===W?{...R,isRead:!0}:R))},pauseEnrollment:async W=>{a(q=>q.map(R=>R.id===W?{...R,status:"paused"}:R))},resumeEnrollment:async W=>{a(q=>q.map(R=>R.id===W?{...R,status:"active"}:R))}}}function Bte({leadId:e,leadData:t}){var C,E,S;const{aiInsights:n,generateAIInsights:a,markInsightAsRead:s,enrollLeadInSequence:i,sequences:o}=E$(),[l,c]=w.useState(!1),[d,f]=w.useState("insights"),u=n.filter(N=>N.leadId===e),m=u.filter(N=>!N.isRead),h=N=>{switch(N){case"next_action":return fs;case"communication_style":return nn;case"timing":return er;case"content_suggestion":return yG;case"risk_assessment":return Ot;default:return No}},x=N=>{switch(N){case"next_action":return"from-blue-50 to-blue-100/50";case"communication_style":return"from-green-50 to-green-100/50";case"timing":return"from-orange-50 to-orange-100/50";case"content_suggestion":return"from-purple-50 to-purple-100/50";case"risk_assessment":return"from-red-50 to-red-100/50";default:return"from-gray-50 to-gray-100/50"}},g=N=>N>=80?"text-green-600 bg-green-50":N>=60?"text-yellow-600 bg-yellow-50":"text-orange-600 bg-orange-50",p=async()=>{c(!0);try{await a(e,t)}finally{c(!1)}},v=async N=>{await s(N)},y=async N=>{await i(e,N)},j=(N=>{var T;const I=[];if(N.score>80?I.push({type:"High Priority Action",suggestion:"This lead has excellent potential. Schedule a personal call within 24 hours and prepare a customized presentation.",confidence:95,actions:["Schedule immediate call","Prepare custom presentation","Send calendar invite"]}):N.score>60?I.push({type:"Warm Lead Nurturing",suggestion:"Good engagement level. Send educational content about RV ownership and schedule a follow-up in 3-5 days.",confidence:85,actions:["Send RV buying guide","Share customer testimonials","Schedule follow-up"]}):I.push({type:"Lead Warming",suggestion:"Lower engagement detected. Enroll in nurture sequence and focus on value-driven content.",confidence:75,actions:["Enroll in email sequence","Send value content","Monitor engagement"]}),(T=N.customFields)!=null&&T.budget){const A=N.customFields.budget;I.push({type:"Budget-Matched Recommendations",suggestion:`Based on ${A} budget, focus on specific inventory that matches their price range and financing options.`,confidence:90,actions:["Send matching inventory","Discuss financing","Offer trade-in evaluation"]})}const D=Math.floor((Date.now()-new Date(N.createdAt).getTime())/(1e3*60*60*24));return D>7&&I.push({type:"Re-engagement Strategy",suggestion:`Lead is ${D} days old. Implement re-engagement tactics with special offers or new inventory alerts.`,confidence:80,actions:["Send special offer","Share new arrivals","Offer exclusive preview"]}),N.source.toLowerCase().includes("website")&&I.push({type:"Digital-First Approach",suggestion:"Lead came from website - they prefer digital communication. Use email and video messages before phone calls.",confidence:85,actions:["Send welcome email","Create video message","Share virtual tour"]}),I})(t);return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsxs("h3",{className:"text-lg font-semibold flex items-center",children:[r.jsx(No,{className:"h-5 w-5 mr-2 text-purple-500"}),"AI Insights & Suggestions"]}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"AI-powered recommendations for lead engagement"})]}),r.jsxs(J,{onClick:p,disabled:l,size:"sm",children:[r.jsx(No,{className:"h-4 w-4 mr-2"}),l?"Analyzing...":"Generate Insights"]})]}),r.jsxs(lr,{value:d,onValueChange:f,className:"space-y-4",children:[r.jsxs(or,{className:"grid w-full grid-cols-3",children:[r.jsxs(Ke,{value:"insights",className:"relative",children:["AI Insights",m.length>0&&r.jsx(ze,{className:"ml-2 h-5 w-5 rounded-full p-0 text-xs bg-red-500",children:m.length})]}),r.jsx(Ke,{value:"chatgpt",children:"ChatGPT Suggestions"}),r.jsx(Ke,{value:"automation",children:"Automation"})]}),r.jsx(Je,{value:"insights",className:"space-y-4",children:u.length===0?r.jsx(fe,{className:"shadow-sm",children:r.jsxs(me,{className:"flex flex-col items-center justify-center py-12",children:[r.jsx(No,{className:"h-12 w-12 text-muted-foreground mb-4"}),r.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No AI Insights Yet"}),r.jsx("p",{className:"text-muted-foreground text-center mb-4",children:"Generate AI-powered insights to get personalized recommendations for this lead."}),r.jsxs(J,{onClick:p,disabled:l,children:[r.jsx(No,{className:"h-4 w-4 mr-2"}),"Generate First Insights"]})]})}):r.jsx("div",{className:"space-y-4",children:u.sort((N,I)=>new Date(I.generatedAt).getTime()-new Date(N.generatedAt).getTime()).map(N=>{const I=h(N.type);return r.jsxs(fe,{className:He("shadow-sm border-0 bg-gradient-to-br",x(N.type),!N.isRead&&"ring-2 ring-blue-200"),children:[r.jsx(we,{children:r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{className:"flex items-start space-x-3",children:[r.jsx(I,{className:"h-6 w-6 text-primary mt-1"}),r.jsxs("div",{children:[r.jsx(Ne,{className:"text-lg",children:N.title}),r.jsx(Ue,{className:"mt-1",children:N.description})]})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsxs(ze,{className:He("ri-badge-status",g(N.confidence)),children:[N.confidence,"% confidence"]}),!N.isRead&&r.jsxs(J,{variant:"outline",size:"sm",onClick:()=>v(N.id),children:[r.jsx($r,{className:"h-3 w-3 mr-1"}),"Mark Read"]})]})]})}),N.actionable&&N.suggestedActions&&r.jsx(me,{children:r.jsxs("div",{children:[r.jsx("h4",{className:"font-semibold text-sm mb-2",children:"Suggested Actions:"}),r.jsx("div",{className:"space-y-2",children:N.suggestedActions.map((D,T)=>r.jsxs("div",{className:"flex items-center justify-between p-2 bg-white/50 rounded-md",children:[r.jsx("span",{className:"text-sm",children:D}),r.jsx(J,{variant:"outline",size:"sm",children:"Execute"})]},T))})]})})]},N.id)})})}),r.jsxs(Je,{value:"chatgpt",className:"space-y-4",children:[r.jsxs(fe,{className:"shadow-sm border-0 bg-gradient-to-br from-green-50 to-green-100/50",children:[r.jsx(we,{children:r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("div",{className:"w-8 h-8 bg-green-500 rounded-full flex items-center justify-center",children:r.jsx(No,{className:"h-4 w-4 text-white"})}),r.jsxs("div",{children:[r.jsx(Ne,{className:"text-green-900",children:"ChatGPT Analysis"}),r.jsx(Ue,{className:"text-green-700",children:"AI-powered lead analysis and action recommendations"})]})]})}),r.jsx(me,{children:r.jsx("div",{className:"space-y-4",children:j.map((N,I)=>r.jsxs("div",{className:"bg-white/70 p-4 rounded-lg",children:[r.jsxs("div",{className:"flex items-start justify-between mb-2",children:[r.jsx("h4",{className:"font-semibold text-green-900",children:N.type}),r.jsxs(ze,{className:"bg-green-100 text-green-700 border-green-200",children:[N.confidence,"% confidence"]})]}),r.jsx("p",{className:"text-sm text-green-800 mb-3",children:N.suggestion}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("h5",{className:"text-xs font-semibold text-green-900 uppercase tracking-wide",children:"Recommended Actions:"}),r.jsx("div",{className:"grid gap-2 md:grid-cols-3",children:N.actions.map((D,T)=>r.jsx(J,{variant:"outline",size:"sm",className:"justify-start text-xs bg-white/50 hover:bg-white/80",children:D},T))})]})]},I))})})]}),r.jsxs(fe,{className:"shadow-sm",children:[r.jsx(we,{children:r.jsxs(Ne,{className:"flex items-center",children:[r.jsx(fs,{className:"h-5 w-5 mr-2 text-blue-500"}),"Lead Scoring Analysis"]})}),r.jsx(me,{children:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between p-3 bg-blue-50 rounded-lg",children:[r.jsxs("div",{children:[r.jsxs("h4",{className:"font-semibold text-blue-900",children:["Current Score: ",t.score]}),r.jsx("p",{className:"text-sm text-blue-700",children:t.score>=80?"Hot Lead - High Priority":t.score>=60?"Warm Lead - Good Potential":t.score>=40?"Cool Lead - Needs Nurturing":"Cold Lead - Long-term Nurturing"})]}),r.jsxs("div",{className:"text-right",children:[r.jsx("div",{className:"text-2xl font-bold text-blue-600",children:t.score}),r.jsx("div",{className:"text-xs text-blue-500",children:"/ 100"})]})]}),r.jsxs("div",{className:"grid gap-3 md:grid-cols-2",children:[r.jsxs("div",{className:"p-3 bg-green-50 rounded-lg",children:[r.jsx("h5",{className:"font-semibold text-green-900 mb-1",children:"Strengths"}),r.jsxs("ul",{className:"text-sm text-green-700 space-y-1",children:[((C=t.customFields)==null?void 0:C.budget)&&r.jsx("li",{children:"• Budget information provided"}),((E=t.customFields)==null?void 0:E.timeframe)&&r.jsx("li",{children:"• Clear purchase timeline"}),t.score>60&&r.jsx("li",{children:"• Good engagement level"}),t.source==="Customer Referral"&&r.jsx("li",{children:"• High-quality referral source"})]})]}),r.jsxs("div",{className:"p-3 bg-orange-50 rounded-lg",children:[r.jsx("h5",{className:"font-semibold text-orange-900 mb-1",children:"Improvement Areas"}),r.jsxs("ul",{className:"text-sm text-orange-700 space-y-1",children:[!((S=t.customFields)!=null&&S.budget)&&r.jsx("li",{children:"• No budget information"}),t.score<60&&r.jsx("li",{children:"• Low engagement level"}),!t.assignedTo&&r.jsx("li",{children:"• No sales rep assigned"}),r.jsx("li",{children:"• Limited activity history"})]})]})]})]})})]})]}),r.jsxs(Je,{value:"automation",className:"space-y-4",children:[r.jsxs(fe,{className:"shadow-sm",children:[r.jsxs(we,{children:[r.jsxs(Ne,{className:"flex items-center",children:[r.jsx(nn,{className:"h-5 w-5 mr-2 text-purple-500"}),"Nurture Sequences"]}),r.jsx(Ue,{children:"Enroll this lead in automated nurturing sequences"})]}),r.jsx(me,{children:r.jsx("div",{className:"space-y-4",children:o.filter(N=>N.isActive).map(N=>r.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-accent/50 transition-colors",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("h4",{className:"font-semibold",children:N.name}),r.jsx("p",{className:"text-sm text-muted-foreground",children:N.description}),r.jsxs("div",{className:"flex items-center space-x-2 mt-2",children:[r.jsxs(ze,{variant:"secondary",className:"text-xs",children:[N.steps.length," steps"]}),r.jsx(ze,{variant:"outline",className:"text-xs",children:N.targetAudience})]})]}),r.jsx(J,{onClick:()=>y(N.id),size:"sm",children:"Enroll Lead"})]},N.id))})})]}),r.jsxs(fe,{className:"shadow-sm",children:[r.jsx(we,{children:r.jsxs(Ne,{className:"flex items-center",children:[r.jsx(er,{className:"h-5 w-5 mr-2 text-orange-500"}),"Smart Timing Recommendations"]})}),r.jsx(me,{children:r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"p-3 bg-blue-50 rounded-lg",children:[r.jsx("h4",{className:"font-semibold text-blue-900",children:"Best Contact Times"}),r.jsx("p",{className:"text-sm text-blue-700",children:"Based on lead behavior: Tuesday-Thursday, 2-4 PM"})]}),r.jsxs("div",{className:"p-3 bg-green-50 rounded-lg",children:[r.jsx("h4",{className:"font-semibold text-green-900",children:"Email Timing"}),r.jsx("p",{className:"text-sm text-green-700",children:"Send emails Tuesday/Wednesday mornings for best open rates"})]}),r.jsxs("div",{className:"p-3 bg-purple-50 rounded-lg",children:[r.jsx("h4",{className:"font-semibold text-purple-900",children:"Follow-up Schedule"}),r.jsx("p",{className:"text-sm text-purple-700",children:"Next follow-up recommended in 2-3 days based on engagement"})]})]})})]})]})]})]})}function zte({leadId:e,leadData:t}){const{emailTemplates:n,smsTemplates:a,communicationLogs:s,getCommunicationHistory:i}=E$(),[o,l]=w.useState("history"),[c,d]=w.useState(""),[f,u]=w.useState(""),[m,h]=w.useState(""),[x,g]=w.useState(""),[p,v]=w.useState(""),[y,b]=w.useState(!1),j=i(e),C=T=>{switch(T){case"sent":return r.jsx(Oo,{className:"h-3 w-3 text-blue-500"});case"delivered":return r.jsx($r,{className:"h-3 w-3 text-green-500"});case"opened":return r.jsx(en,{className:"h-3 w-3 text-purple-500"});case"clicked":return r.jsx($r,{className:"h-3 w-3 text-green-600"});case"replied":return r.jsx(nn,{className:"h-3 w-3 text-blue-600"});case"failed":return r.jsx(Ff,{className:"h-3 w-3 text-red-500"});default:return r.jsx(er,{className:"h-3 w-3 text-gray-500"})}},E=T=>{switch(T){case"sent":return"bg-blue-50 text-blue-700 border-blue-200";case"delivered":return"bg-green-50 text-green-700 border-green-200";case"opened":return"bg-purple-50 text-purple-700 border-purple-200";case"clicked":return"bg-green-50 text-green-700 border-green-200";case"replied":return"bg-blue-50 text-blue-700 border-blue-200";case"failed":return"bg-red-50 text-red-700 border-red-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},S=(T,A)=>{var _;return T.replace(/\{\{first_name\}\}/g,A.firstName).replace(/\{\{last_name\}\}/g,A.lastName).replace(/\{\{company_name\}\}/g,"Renter Insight RV").replace(/\{\{rep_name\}\}/g,"Your Sales Representative").replace(/\{\{rep_phone\}\}/g,"(555) 123-4567").replace(/\{\{website_url\}\}/g,"https://renterinsight.com").replace(/\{\{budget\}\}/g,((_=A.customFields)==null?void 0:_.budget)||"your budget")},N=async()=>{b(!0);try{let T=m,A=x;if(c){const _=n.find(k=>k.id===c);_&&(T=S(_.subject,t),A=S(_.body,t))}await new Promise(_=>setTimeout(_,2e3)),h(""),g(""),d(""),console.log("Email sent:",{subject:T,body:A,to:t.email})}finally{b(!1)}},I=async()=>{b(!0);try{let T=p;if(f){const A=a.find(_=>_.id===f);A&&(T=S(A.message,t))}await new Promise(A=>setTimeout(A,1500)),v(""),u(""),console.log("SMS sent:",{message:T,to:t.phone})}finally{b(!1)}},D=(T,A)=>{if(A==="email"){d(T);const _=n.find(k=>k.id===T);_&&(h(S(_.subject,t)),g(S(_.body,t)))}else{u(T);const _=a.find(k=>k.id===T);_&&v(S(_.message,t))}};return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsxs("h3",{className:"text-lg font-semibold flex items-center",children:[r.jsx(nn,{className:"h-5 w-5 mr-2 text-blue-500"}),"Communication Center"]}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Send emails, SMS, and track communication history"})]}),r.jsxs(lr,{value:o,onValueChange:l,className:"space-y-4",children:[r.jsxs(or,{className:"grid w-full grid-cols-3",children:[r.jsx(Ke,{value:"history",children:"History"}),r.jsx(Ke,{value:"email",children:"Send Email"}),r.jsx(Ke,{value:"sms",children:"Send SMS"})]}),r.jsx(Je,{value:"history",className:"space-y-4",children:r.jsxs(fe,{className:"shadow-sm",children:[r.jsxs(we,{children:[r.jsxs(Ne,{className:"flex items-center",children:[r.jsx(er,{className:"h-5 w-5 mr-2"}),"Communication History"]}),r.jsx(Ue,{children:"All email and SMS communications with this lead"})]}),r.jsx(me,{children:j.length===0?r.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[r.jsx(nn,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),r.jsx("p",{children:"No communication history yet"}),r.jsx("p",{className:"text-sm",children:"Start by sending an email or SMS"})]}):r.jsx("div",{className:"space-y-4",children:j.map((T,A)=>r.jsxs("div",{className:"relative",children:[A<j.length-1&&r.jsx("div",{className:"absolute left-4 top-12 bottom-0 w-px bg-border"}),r.jsxs("div",{className:"flex items-start space-x-4",children:[r.jsx("div",{className:He("flex-shrink-0 w-8 h-8 rounded-full border-2 bg-background flex items-center justify-center",T.type==="email"?"border-blue-200":"border-green-200"),children:T.type==="email"?r.jsx(en,{className:"h-4 w-4 text-blue-500"}):r.jsx(nn,{className:"h-4 w-4 text-green-500"})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsxs("span",{className:"font-medium text-sm capitalize",children:[T.type," ",T.direction]}),r.jsxs(ze,{className:He("ri-badge-status text-xs",E(T.status)),children:[C(T.status),r.jsx("span",{className:"ml-1",children:T.status})]})]}),r.jsx("span",{className:"text-xs text-muted-foreground",children:lt(T.sentAt)})]}),T.subject&&r.jsx("p",{className:"font-medium text-sm mb-1",children:T.subject}),r.jsx("div",{className:"bg-muted/30 p-3 rounded-md",children:r.jsx("p",{className:"text-sm text-muted-foreground whitespace-pre-wrap",children:T.content})}),r.jsxs("div",{className:"flex items-center space-x-4 mt-2 text-xs text-muted-foreground",children:[r.jsxs("span",{children:["Sent: ",lt(T.sentAt)]}),T.deliveredAt&&r.jsxs("span",{children:["Delivered: ",lt(T.deliveredAt)]}),T.openedAt&&r.jsxs("span",{children:["Opened: ",lt(T.openedAt)]}),T.clickedAt&&r.jsxs("span",{children:["Clicked: ",lt(T.clickedAt)]})]})]})]})]},T.id))})})]})}),r.jsx(Je,{value:"email",className:"space-y-4",children:r.jsxs(fe,{className:"shadow-sm",children:[r.jsxs(we,{children:[r.jsxs(Ne,{className:"flex items-center",children:[r.jsx(en,{className:"h-5 w-5 mr-2 text-blue-500"}),"Send Email"]}),r.jsx(Ue,{children:"Send personalized emails using templates or custom content"})]}),r.jsxs(me,{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium",children:"Email Template (Optional)"}),r.jsxs($e,{value:c,onValueChange:T=>D(T,"email"),children:[r.jsx(Fe,{children:r.jsx(Be,{placeholder:"Choose a template or write custom email"})}),r.jsxs(Me,{children:[r.jsx(K,{value:"",children:"Custom Email"}),n.filter(T=>T.isActive).map(T=>r.jsxs(K,{value:T.id,children:[T.name," (",T.type,")"]},T.id))]})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium",children:"To"}),r.jsx(je,{value:t.email,disabled:!0,className:"bg-muted/50"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium",children:"Subject"}),r.jsx(je,{value:m,onChange:T=>h(T.target.value),placeholder:"Enter email subject"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium",children:"Message"}),r.jsx(Xt,{value:x,onChange:T=>g(T.target.value),placeholder:"Enter your email message",rows:8})]}),r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("div",{className:"text-xs text-muted-foreground",children:["Available variables: ",{first_name},", ",{last_name},", ",{company_name},", ",{rep_name}]}),r.jsxs(J,{onClick:N,disabled:y||!m||!x,children:[r.jsx(Oo,{className:"h-4 w-4 mr-2"}),y?"Sending...":"Send Email"]})]})]})]})}),r.jsx(Je,{value:"sms",className:"space-y-4",children:r.jsxs(fe,{className:"shadow-sm",children:[r.jsxs(we,{children:[r.jsxs(Ne,{className:"flex items-center",children:[r.jsx(nn,{className:"h-5 w-5 mr-2 text-green-500"}),"Send SMS"]}),r.jsx(Ue,{children:"Send text messages using templates or custom content"})]}),r.jsxs(me,{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium",children:"SMS Template (Optional)"}),r.jsxs($e,{value:f,onValueChange:T=>D(T,"sms"),children:[r.jsx(Fe,{children:r.jsx(Be,{placeholder:"Choose a template or write custom SMS"})}),r.jsxs(Me,{children:[r.jsx(K,{value:"",children:"Custom SMS"}),a.filter(T=>T.isActive).map(T=>r.jsxs(K,{value:T.id,children:[T.name," (",T.type,")"]},T.id))]})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium",children:"To"}),r.jsx(je,{value:t.phone,disabled:!0,className:"bg-muted/50"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium",children:"Message"}),r.jsx(Xt,{value:p,onChange:T=>v(T.target.value),placeholder:"Enter your SMS message",rows:4,maxLength:160}),r.jsxs("div",{className:"flex justify-between items-center mt-1",children:[r.jsxs("div",{className:"text-xs text-muted-foreground",children:[p.length,"/160 characters"]}),r.jsx("div",{className:He("text-xs",p.length>160?"text-red-500":"text-muted-foreground"),children:p.length>160&&"Message too long"})]})]}),r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("div",{className:"text-xs text-muted-foreground",children:["Available variables: ",{first_name},", ",{company_name},", ",{rep_name}]}),r.jsxs(J,{onClick:I,disabled:y||!p||p.length>160,children:[r.jsx(Oo,{className:"h-4 w-4 mr-2"}),y?"Sending...":"Send SMS"]})]})]})]})})]})]})}var P$={exports:{}};/* @license
Papa Parse
v5.5.3
https://github.com/mholt/PapaParse
License: MIT
*/(function(e,t){((n,a)=>{e.exports=a()})(fc,function n(){var a=typeof self<"u"?self:typeof window<"u"?window:a!==void 0?a:{},s,i=!a.document&&!!a.postMessage,o=a.IS_PAPA_WORKER||!1,l={},c=0,d={};function f(N){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(I){var D=C(I);D.chunkSize=parseInt(D.chunkSize),I.step||I.chunk||(D.chunkSize=null),this._handle=new g(D),(this._handle.streamer=this)._config=D}).call(this,N),this.parseChunk=function(I,D){var T=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<T){let _=this._config.newline;_||(A=this._config.quoteChar||'"',_=this._handle.guessLineEndings(I,A)),I=[...I.split(_).slice(T)].join(_)}this.isFirstChunk&&S(this._config.beforeFirstChunk)&&(A=this._config.beforeFirstChunk(I))!==void 0&&(I=A),this.isFirstChunk=!1,this._halted=!1;var T=this._partialLine+I,A=(this._partialLine="",this._handle.parse(T,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(I=A.meta.cursor,T=(this._finished||(this._partialLine=T.substring(I-this._baseIndex),this._baseIndex=I),A&&A.data&&(this._rowCount+=A.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),o)a.postMessage({results:A,workerId:d.WORKER_ID,finished:T});else if(S(this._config.chunk)&&!D){if(this._config.chunk(A,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=A=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(A.data),this._completeResults.errors=this._completeResults.errors.concat(A.errors),this._completeResults.meta=A.meta),this._completed||!T||!S(this._config.complete)||A&&A.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),T||A&&A.meta.paused||this._nextChunk(),A}this._halted=!0},this._sendError=function(I){S(this._config.error)?this._config.error(I):o&&this._config.error&&a.postMessage({workerId:d.WORKER_ID,error:I,finished:!1})}}function u(N){var I;(N=N||{}).chunkSize||(N.chunkSize=d.RemoteChunkSize),f.call(this,N),this._nextChunk=i?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(D){this._input=D,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(I=new XMLHttpRequest,this._config.withCredentials&&(I.withCredentials=this._config.withCredentials),i||(I.onload=E(this._chunkLoaded,this),I.onerror=E(this._chunkError,this)),I.open(this._config.downloadRequestBody?"POST":"GET",this._input,!i),this._config.downloadRequestHeaders){var D,T=this._config.downloadRequestHeaders;for(D in T)I.setRequestHeader(D,T[D])}var A;this._config.chunkSize&&(A=this._start+this._config.chunkSize-1,I.setRequestHeader("Range","bytes="+this._start+"-"+A));try{I.send(this._config.downloadRequestBody)}catch(_){this._chunkError(_.message)}i&&I.status===0&&this._chunkError()}},this._chunkLoaded=function(){I.readyState===4&&(I.status<200||400<=I.status?this._chunkError():(this._start+=this._config.chunkSize||I.responseText.length,this._finished=!this._config.chunkSize||this._start>=(D=>(D=D.getResponseHeader("Content-Range"))!==null?parseInt(D.substring(D.lastIndexOf("/")+1)):-1)(I),this.parseChunk(I.responseText)))},this._chunkError=function(D){D=I.statusText||D,this._sendError(new Error(D))}}function m(N){(N=N||{}).chunkSize||(N.chunkSize=d.LocalChunkSize),f.call(this,N);var I,D,T=typeof FileReader<"u";this.stream=function(A){this._input=A,D=A.slice||A.webkitSlice||A.mozSlice,T?((I=new FileReader).onload=E(this._chunkLoaded,this),I.onerror=E(this._chunkError,this)):I=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var A=this._input,_=(this._config.chunkSize&&(_=Math.min(this._start+this._config.chunkSize,this._input.size),A=D.call(A,this._start,_)),I.readAsText(A,this._config.encoding));T||this._chunkLoaded({target:{result:_}})},this._chunkLoaded=function(A){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(A.target.result)},this._chunkError=function(){this._sendError(I.error)}}function h(N){var I;f.call(this,N=N||{}),this.stream=function(D){return I=D,this._nextChunk()},this._nextChunk=function(){var D,T;if(!this._finished)return D=this._config.chunkSize,I=D?(T=I.substring(0,D),I.substring(D)):(T=I,""),this._finished=!I,this.parseChunk(T)}}function x(N){f.call(this,N=N||{});var I=[],D=!0,T=!1;this.pause=function(){f.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){f.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(A){this._input=A,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){T&&I.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),I.length?this.parseChunk(I.shift()):D=!0},this._streamData=E(function(A){try{I.push(typeof A=="string"?A:A.toString(this._config.encoding)),D&&(D=!1,this._checkIsFinished(),this.parseChunk(I.shift()))}catch(_){this._streamError(_)}},this),this._streamError=E(function(A){this._streamCleanUp(),this._sendError(A)},this),this._streamEnd=E(function(){this._streamCleanUp(),T=!0,this._streamData("")},this),this._streamCleanUp=E(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function g(N){var I,D,T,A,_=Math.pow(2,53),k=-_,L=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,$=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,M=this,B=0,U=0,W=!1,q=!1,R=[],V={data:[],errors:[],meta:{}};function G(ue){return N.skipEmptyLines==="greedy"?ue.join("").trim()==="":ue.length===1&&ue[0].length===0}function ee(){if(V&&T&&(de("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+d.DefaultDelimiter+"'"),T=!1),N.skipEmptyLines&&(V.data=V.data.filter(function(ve){return!G(ve)})),re()){let ve=function(xe,Oe){S(N.transformHeader)&&(xe=N.transformHeader(xe,Oe)),R.push(xe)};if(V)if(Array.isArray(V.data[0])){for(var ue=0;re()&&ue<V.data.length;ue++)V.data[ue].forEach(ve);V.data.splice(0,1)}else V.data.forEach(ve)}function oe(ve,xe){for(var Oe=N.header?{}:[],ye=0;ye<ve.length;ye++){var le=ye,ne=ve[ye],ne=((Ae,Se)=>(be=>(N.dynamicTypingFunction&&N.dynamicTyping[be]===void 0&&(N.dynamicTyping[be]=N.dynamicTypingFunction(be)),(N.dynamicTyping[be]||N.dynamicTyping)===!0))(Ae)?Se==="true"||Se==="TRUE"||Se!=="false"&&Se!=="FALSE"&&((be=>{if(L.test(be)&&(be=parseFloat(be),k<be&&be<_))return 1})(Se)?parseFloat(Se):$.test(Se)?new Date(Se):Se===""?null:Se):Se)(le=N.header?ye>=R.length?"__parsed_extra":R[ye]:le,ne=N.transform?N.transform(ne,le):ne);le==="__parsed_extra"?(Oe[le]=Oe[le]||[],Oe[le].push(ne)):Oe[le]=ne}return N.header&&(ye>R.length?de("FieldMismatch","TooManyFields","Too many fields: expected "+R.length+" fields but parsed "+ye,U+xe):ye<R.length&&de("FieldMismatch","TooFewFields","Too few fields: expected "+R.length+" fields but parsed "+ye,U+xe)),Oe}var ge;V&&(N.header||N.dynamicTyping||N.transform)&&(ge=1,!V.data.length||Array.isArray(V.data[0])?(V.data=V.data.map(oe),ge=V.data.length):V.data=oe(V.data,0),N.header&&V.meta&&(V.meta.fields=R),U+=ge)}function re(){return N.header&&R.length===0}function de(ue,oe,ge,ve){ue={type:ue,code:oe,message:ge},ve!==void 0&&(ue.row=ve),V.errors.push(ue)}S(N.step)&&(A=N.step,N.step=function(ue){V=ue,re()?ee():(ee(),V.data.length!==0&&(B+=ue.data.length,N.preview&&B>N.preview?D.abort():(V.data=V.data[0],A(V,M))))}),this.parse=function(ue,oe,ge){var ve=N.quoteChar||'"',ve=(N.newline||(N.newline=this.guessLineEndings(ue,ve)),T=!1,N.delimiter?S(N.delimiter)&&(N.delimiter=N.delimiter(ue),V.meta.delimiter=N.delimiter):((ve=((xe,Oe,ye,le,ne)=>{var Ae,Se,be,Re;ne=ne||[",","	","|",";",d.RECORD_SEP,d.UNIT_SEP];for(var nt=0;nt<ne.length;nt++){for(var rt,xt=ne[nt],Ve=0,et=0,ut=0,gt=(be=void 0,new v({comments:le,delimiter:xt,newline:Oe,preview:10}).parse(xe)),Dt=0;Dt<gt.data.length;Dt++)ye&&G(gt.data[Dt])?ut++:(rt=gt.data[Dt].length,et+=rt,be===void 0?be=rt:0<rt&&(Ve+=Math.abs(rt-be),be=rt));0<gt.data.length&&(et/=gt.data.length-ut),(Se===void 0||Ve<=Se)&&(Re===void 0||Re<et)&&1.99<et&&(Se=Ve,Ae=xt,Re=et)}return{successful:!!(N.delimiter=Ae),bestDelimiter:Ae}})(ue,N.newline,N.skipEmptyLines,N.comments,N.delimitersToGuess)).successful?N.delimiter=ve.bestDelimiter:(T=!0,N.delimiter=d.DefaultDelimiter),V.meta.delimiter=N.delimiter),C(N));return N.preview&&N.header&&ve.preview++,I=ue,D=new v(ve),V=D.parse(I,oe,ge),ee(),W?{meta:{paused:!0}}:V||{meta:{paused:!1}}},this.paused=function(){return W},this.pause=function(){W=!0,D.abort(),I=S(N.chunk)?"":I.substring(D.getCharIndex())},this.resume=function(){M.streamer._halted?(W=!1,M.streamer.parseChunk(I,!0)):setTimeout(M.resume,3)},this.aborted=function(){return q},this.abort=function(){q=!0,D.abort(),V.meta.aborted=!0,S(N.complete)&&N.complete(V),I=""},this.guessLineEndings=function(xe,ve){xe=xe.substring(0,1048576);var ve=new RegExp(p(ve)+"([^]*?)"+p(ve),"gm"),ge=(xe=xe.replace(ve,"")).split("\r"),ve=xe.split(`
`),xe=1<ve.length&&ve[0].length<ge[0].length;if(ge.length===1||xe)return`
`;for(var Oe=0,ye=0;ye<ge.length;ye++)ge[ye][0]===`
`&&Oe++;return Oe>=ge.length/2?`\r
`:"\r"}}function p(N){return N.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function v(N){var I=(N=N||{}).delimiter,D=N.newline,T=N.comments,A=N.step,_=N.preview,k=N.fastMode,L=null,$=!1,M=N.quoteChar==null?'"':N.quoteChar,B=M;if(N.escapeChar!==void 0&&(B=N.escapeChar),(typeof I!="string"||-1<d.BAD_DELIMITERS.indexOf(I))&&(I=","),T===I)throw new Error("Comment character same as delimiter");T===!0?T="#":(typeof T!="string"||-1<d.BAD_DELIMITERS.indexOf(T))&&(T=!1),D!==`
`&&D!=="\r"&&D!==`\r
`&&(D=`
`);var U=0,W=!1;this.parse=function(q,R,V){if(typeof q!="string")throw new Error("Input must be a string");var G=q.length,ee=I.length,re=D.length,de=T.length,ue=S(A),oe=[],ge=[],ve=[],xe=U=0;if(!q)return Ve();if(k||k!==!1&&q.indexOf(M)===-1){for(var Oe=q.split(D),ye=0;ye<Oe.length;ye++){if(ve=Oe[ye],U+=ve.length,ye!==Oe.length-1)U+=D.length;else if(V)return Ve();if(!T||ve.substring(0,de)!==T){if(ue){if(oe=[],Re(ve.split(I)),et(),W)return Ve()}else Re(ve.split(I));if(_&&_<=ye)return oe=oe.slice(0,_),Ve(!0)}}return Ve()}for(var le=q.indexOf(I,U),ne=q.indexOf(D,U),Ae=new RegExp(p(B)+p(M),"g"),Se=q.indexOf(M,U);;)if(q[U]===M)for(Se=U,U++;;){if((Se=q.indexOf(M,Se+1))===-1)return V||ge.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:oe.length,index:U}),rt();if(Se===G-1)return rt(q.substring(U,Se).replace(Ae,M));if(M===B&&q[Se+1]===B)Se++;else if(M===B||Se===0||q[Se-1]!==B){le!==-1&&le<Se+1&&(le=q.indexOf(I,Se+1));var be=nt((ne=ne!==-1&&ne<Se+1?q.indexOf(D,Se+1):ne)===-1?le:Math.min(le,ne));if(q.substr(Se+1+be,ee)===I){ve.push(q.substring(U,Se).replace(Ae,M)),q[U=Se+1+be+ee]!==M&&(Se=q.indexOf(M,U)),le=q.indexOf(I,U),ne=q.indexOf(D,U);break}if(be=nt(ne),q.substring(Se+1+be,Se+1+be+re)===D){if(ve.push(q.substring(U,Se).replace(Ae,M)),xt(Se+1+be+re),le=q.indexOf(I,U),Se=q.indexOf(M,U),ue&&(et(),W))return Ve();if(_&&oe.length>=_)return Ve(!0);break}ge.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:oe.length,index:U}),Se++}}else if(T&&ve.length===0&&q.substring(U,U+de)===T){if(ne===-1)return Ve();U=ne+re,ne=q.indexOf(D,U),le=q.indexOf(I,U)}else if(le!==-1&&(le<ne||ne===-1))ve.push(q.substring(U,le)),U=le+ee,le=q.indexOf(I,U);else{if(ne===-1)break;if(ve.push(q.substring(U,ne)),xt(ne+re),ue&&(et(),W))return Ve();if(_&&oe.length>=_)return Ve(!0)}return rt();function Re(ut){oe.push(ut),xe=U}function nt(ut){var gt=0;return gt=ut!==-1&&(ut=q.substring(Se+1,ut))&&ut.trim()===""?ut.length:gt}function rt(ut){return V||(ut===void 0&&(ut=q.substring(U)),ve.push(ut),U=G,Re(ve),ue&&et()),Ve()}function xt(ut){U=ut,Re(ve),ve=[],ne=q.indexOf(D,U)}function Ve(ut){if(N.header&&!R&&oe.length&&!$){var gt=oe[0],Dt=Object.create(null),At=new Set(gt);let zt=!1;for(let ot=0;ot<gt.length;ot++){let yr=gt[ot];if(Dt[yr=S(N.transformHeader)?N.transformHeader(yr,ot):yr]){let Qt,zn=Dt[yr];for(;Qt=yr+"_"+zn,zn++,At.has(Qt););At.add(Qt),gt[ot]=Qt,Dt[yr]++,zt=!0,(L=L===null?{}:L)[Qt]=yr}else Dt[yr]=1,gt[ot]=yr;At.add(yr)}zt&&console.warn("Duplicate headers found and renamed."),$=!0}return{data:oe,errors:ge,meta:{delimiter:I,linebreak:D,aborted:W,truncated:!!ut,cursor:xe+(R||0),renamedHeaders:L}}}function et(){A(Ve()),oe=[],ge=[]}},this.abort=function(){W=!0},this.getCharIndex=function(){return U}}function y(N){var I=N.data,D=l[I.workerId],T=!1;if(I.error)D.userError(I.error,I.file);else if(I.results&&I.results.data){var A={abort:function(){T=!0,b(I.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:j,resume:j};if(S(D.userStep)){for(var _=0;_<I.results.data.length&&(D.userStep({data:I.results.data[_],errors:I.results.errors,meta:I.results.meta},A),!T);_++);delete I.results}else S(D.userChunk)&&(D.userChunk(I.results,A,I.file),delete I.results)}I.finished&&!T&&b(I.workerId,I.results)}function b(N,I){var D=l[N];S(D.userComplete)&&D.userComplete(I),D.terminate(),delete l[N]}function j(){throw new Error("Not implemented.")}function C(N){if(typeof N!="object"||N===null)return N;var I,D=Array.isArray(N)?[]:{};for(I in N)D[I]=C(N[I]);return D}function E(N,I){return function(){N.apply(I,arguments)}}function S(N){return typeof N=="function"}return d.parse=function(N,I){var D=(I=I||{}).dynamicTyping||!1;if(S(D)&&(I.dynamicTypingFunction=D,D={}),I.dynamicTyping=D,I.transform=!!S(I.transform)&&I.transform,!I.worker||!d.WORKERS_SUPPORTED)return D=null,d.NODE_STREAM_INPUT,typeof N=="string"?(N=(T=>T.charCodeAt(0)!==65279?T:T.slice(1))(N),D=new(I.download?u:h)(I)):N.readable===!0&&S(N.read)&&S(N.on)?D=new x(I):(a.File&&N instanceof File||N instanceof Object)&&(D=new m(I)),D.stream(N);(D=(()=>{var T;return!!d.WORKERS_SUPPORTED&&(T=(()=>{var A=a.URL||a.webkitURL||null,_=n.toString();return d.BLOB_URL||(d.BLOB_URL=A.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",_,")();"],{type:"text/javascript"})))})(),(T=new a.Worker(T)).onmessage=y,T.id=c++,l[T.id]=T)})()).userStep=I.step,D.userChunk=I.chunk,D.userComplete=I.complete,D.userError=I.error,I.step=S(I.step),I.chunk=S(I.chunk),I.complete=S(I.complete),I.error=S(I.error),delete I.worker,D.postMessage({input:N,config:I,workerId:D.id})},d.unparse=function(N,I){var D=!1,T=!0,A=",",_=`\r
`,k='"',L=k+k,$=!1,M=null,B=!1,U=((()=>{if(typeof I=="object"){if(typeof I.delimiter!="string"||d.BAD_DELIMITERS.filter(function(R){return I.delimiter.indexOf(R)!==-1}).length||(A=I.delimiter),typeof I.quotes!="boolean"&&typeof I.quotes!="function"&&!Array.isArray(I.quotes)||(D=I.quotes),typeof I.skipEmptyLines!="boolean"&&typeof I.skipEmptyLines!="string"||($=I.skipEmptyLines),typeof I.newline=="string"&&(_=I.newline),typeof I.quoteChar=="string"&&(k=I.quoteChar),typeof I.header=="boolean"&&(T=I.header),Array.isArray(I.columns)){if(I.columns.length===0)throw new Error("Option columns is empty");M=I.columns}I.escapeChar!==void 0&&(L=I.escapeChar+k),I.escapeFormulae instanceof RegExp?B=I.escapeFormulae:typeof I.escapeFormulae=="boolean"&&I.escapeFormulae&&(B=/^[=+\-@\t\r].*$/)}})(),new RegExp(p(k),"g"));if(typeof N=="string"&&(N=JSON.parse(N)),Array.isArray(N)){if(!N.length||Array.isArray(N[0]))return W(null,N,$);if(typeof N[0]=="object")return W(M||Object.keys(N[0]),N,$)}else if(typeof N=="object")return typeof N.data=="string"&&(N.data=JSON.parse(N.data)),Array.isArray(N.data)&&(N.fields||(N.fields=N.meta&&N.meta.fields||M),N.fields||(N.fields=Array.isArray(N.data[0])?N.fields:typeof N.data[0]=="object"?Object.keys(N.data[0]):[]),Array.isArray(N.data[0])||typeof N.data[0]=="object"||(N.data=[N.data])),W(N.fields||[],N.data||[],$);throw new Error("Unable to serialize unrecognized input");function W(R,V,G){var ee="",re=(typeof R=="string"&&(R=JSON.parse(R)),typeof V=="string"&&(V=JSON.parse(V)),Array.isArray(R)&&0<R.length),de=!Array.isArray(V[0]);if(re&&T){for(var ue=0;ue<R.length;ue++)0<ue&&(ee+=A),ee+=q(R[ue],ue);0<V.length&&(ee+=_)}for(var oe=0;oe<V.length;oe++){var ge=(re?R:V[oe]).length,ve=!1,xe=re?Object.keys(V[oe]).length===0:V[oe].length===0;if(G&&!re&&(ve=G==="greedy"?V[oe].join("").trim()==="":V[oe].length===1&&V[oe][0].length===0),G==="greedy"&&re){for(var Oe=[],ye=0;ye<ge;ye++){var le=de?R[ye]:ye;Oe.push(V[oe][le])}ve=Oe.join("").trim()===""}if(!ve){for(var ne=0;ne<ge;ne++){0<ne&&!xe&&(ee+=A);var Ae=re&&de?R[ne]:ne;ee+=q(V[oe][Ae],ne)}oe<V.length-1&&(!G||0<ge&&!xe)&&(ee+=_)}}return ee}function q(R,V){var G,ee;return R==null?"":R.constructor===Date?JSON.stringify(R).slice(1,25):(ee=!1,B&&typeof R=="string"&&B.test(R)&&(R="'"+R,ee=!0),G=R.toString().replace(U,L),(ee=ee||D===!0||typeof D=="function"&&D(R,V)||Array.isArray(D)&&D[V]||((re,de)=>{for(var ue=0;ue<de.length;ue++)if(-1<re.indexOf(de[ue]))return!0;return!1})(G,d.BAD_DELIMITERS)||-1<G.indexOf(A)||G.charAt(0)===" "||G.charAt(G.length-1)===" ")?k+G+k:G)}},d.RECORD_SEP=String.fromCharCode(30),d.UNIT_SEP=String.fromCharCode(31),d.BYTE_ORDER_MARK="\uFEFF",d.BAD_DELIMITERS=["\r",`
`,'"',d.BYTE_ORDER_MARK],d.WORKERS_SUPPORTED=!i&&!!a.Worker,d.NODE_STREAM_INPUT=1,d.LocalChunkSize=10485760,d.RemoteChunkSize=5242880,d.DefaultDelimiter=",",d.Parser=v,d.ParserHandle=g,d.NetworkStreamer=u,d.FileStreamer=m,d.StringStreamer=h,d.ReadableStreamStreamer=x,a.jQuery&&((s=a.jQuery).fn.parse=function(N){var I=N.config||{},D=[];return this.each(function(_){if(!(s(this).prop("tagName").toUpperCase()==="INPUT"&&s(this).attr("type").toLowerCase()==="file"&&a.FileReader)||!this.files||this.files.length===0)return!0;for(var k=0;k<this.files.length;k++)D.push({file:this.files[k],inputElem:this,instanceConfig:s.extend({},I)})}),T(),this;function T(){if(D.length===0)S(N.complete)&&N.complete();else{var _,k,L,$,M=D[0];if(S(N.before)){var B=N.before(M.file,M.inputElem);if(typeof B=="object"){if(B.action==="abort")return _="AbortError",k=M.file,L=M.inputElem,$=B.reason,void(S(N.error)&&N.error({name:_},k,L,$));if(B.action==="skip")return void A();typeof B.config=="object"&&(M.instanceConfig=s.extend(M.instanceConfig,B.config))}else if(B==="skip")return void A()}var U=M.instanceConfig.complete;M.instanceConfig.complete=function(W){S(U)&&U(W,M.file,M.inputElem),A()},d.parse(M.file,M.instanceConfig)}}function A(){D.splice(0,1),T()}}),o&&(a.onmessage=function(N){N=N.data,d.WORKER_ID===void 0&&N&&(d.WORKER_ID=N.workerId),typeof N.input=="string"?a.postMessage({workerId:d.WORKER_ID,results:d.parse(N.input,N.config),finished:!0}):(a.File&&N.input instanceof File||N.input instanceof Object)&&(N=d.parse(N.input,N.config))&&a.postMessage({workerId:d.WORKER_ID,results:N,finished:!0})}),(u.prototype=Object.create(f.prototype)).constructor=u,(m.prototype=Object.create(f.prototype)).constructor=m,(h.prototype=Object.create(h.prototype)).constructor=h,(x.prototype=Object.create(f.prototype)).constructor=x,d})})(P$);var Ute=P$.exports;const rm=Er(Ute);function Ol(){const[e,t]=w.useState([]),[n,a]=w.useState(!1);w.useEffect(()=>{s()},[]);const s=()=>{const h=un("renter-insight-vehicles",[{id:"1",vin:"1FDXE4FS8KDC12345",make:"Forest River",model:"Georgetown",year:2024,type:vt.MOTORHOME,status:Yt.AVAILABLE,price:125e3,cost:95e3,location:"Lot A-15",features:["Slide-out","Generator","Solar Panel"],images:["https://images.pexels.com/photos/1319515/pexels-photo-1319515.jpeg"],customFields:{},createdAt:new Date("2024-01-10"),updatedAt:new Date("2024-01-15")},{id:"2",vin:"1FDXE4FS8KDC67890",make:"Winnebago",model:"View",year:2023,type:vt.RV,status:Yt.AVAILABLE,price:89e3,cost:72e3,location:"Lot B-08",features:["Compact Design","Fuel Efficient"],images:["https://images.pexels.com/photos/2506923/pexels-photo-2506923.jpeg"],customFields:{},createdAt:new Date("2024-01-08"),updatedAt:new Date("2024-01-12")},{id:"3",vin:"1FDXE4FS8KDC11111",make:"Jayco",model:"Eagle",year:2024,type:vt.FIFTH_WHEEL,status:Yt.AVAILABLE,price:75e3,cost:58e3,location:"Lot C-12",features:["Bunk Beds","Outdoor Kitchen","Fireplace"],images:["https://images.pexels.com/photos/1319515/pexels-photo-1319515.jpeg"],customFields:{},createdAt:new Date("2024-01-05"),updatedAt:new Date("2024-01-10")},{id:"4",vin:"1FDXE4FS8KDC22222",make:"Airstream",model:"Flying Cloud",year:2024,type:vt.TRAVEL_TRAILER,status:Yt.AVAILABLE,price:95e3,cost:78e3,location:"Lot D-05",features:["Aluminum Construction","Premium Interior","Smart Technology"],images:["https://images.pexels.com/photos/2506923/pexels-photo-2506923.jpeg"],customFields:{},createdAt:new Date("2024-01-03"),updatedAt:new Date("2024-01-08")},{id:"5",vin:"1FDXE4FS8KDC33333",make:"Grand Design",model:"Momentum",year:2023,type:vt.TOY_HAULER,status:Yt.AVAILABLE,price:11e4,cost:88e3,location:"Lot E-18",features:["Garage Space","Fuel Station","Generator"],images:["https://images.pexels.com/photos/1319515/pexels-photo-1319515.jpeg"],customFields:{},createdAt:new Date("2024-01-01"),updatedAt:new Date("2024-01-05")},{id:"6",vin:"MH12345678901234",make:"Clayton Homes",model:"Inspiration",year:2024,type:vt.DOUBLE_WIDE,status:Yt.AVAILABLE,price:125e3,cost:95e3,location:"MH Section A-10",features:["3 Bedroom","2 Bathroom","Open Floor Plan","Energy Efficient"],images:["https://images.pexels.com/photos/2506923/pexels-photo-2506923.jpeg"],customFields:{length:"76",width:"28",squareFootage:"2128",constructionType:"Manufactured",roofType:"Shingle",exteriorSiding:"Vinyl",insulationRating:"R-21"},createdAt:new Date("2024-01-15"),updatedAt:new Date("2024-01-15")}]);t(h)},i=h=>{Wr("renter-insight-vehicles",h)};return{vehicles:e,loading:n,getAvailableVehicles:()=>e.filter(h=>h.status===Yt.AVAILABLE),getVehicleById:h=>e.find(x=>x.id===h),updateVehicleStatus:async(h,x)=>{const g=e.map(p=>p.id===h?{...p,status:x,updatedAt:new Date}:p);t(g),i(g)},createVehicle:async h=>{a(!0);try{const x={id:Math.random().toString(36).substr(2,9),vin:h.vin||"",make:h.make||"",model:h.model||"",year:h.year||new Date().getFullYear(),type:h.type||vt.RV,status:Yt.AVAILABLE,price:h.price||0,cost:h.cost||0,location:h.location||"",features:h.features||[],images:h.images||[],customFields:h.customFields||{},createdAt:new Date,updatedAt:new Date},g=[...e,x];return t(g),i(g),x}finally{a(!1)}},deleteVehicle:async h=>{const x=e.filter(g=>g.id!==h);t(x),i(x)},importVehiclesFromCSV:async h=>new Promise((x,g)=>{rm.parse(h,{header:!0,skipEmptyLines:!0,complete:p=>{const v=p.data.map(y=>({vin:y.vin||"",make:y.make||"",model:y.model||"",year:parseInt(y.year)||new Date().getFullYear(),type:y.type||vt.RV,status:y.status||Yt.AVAILABLE,price:parseFloat(y.price)||0,cost:parseFloat(y.cost)||0,location:y.location||"",features:y.features?y.features.split(",").map(b=>b.trim()):[],images:[],customFields:{exteriorColor:y.exteriorColor||"",interiorColor:y.interiorColor||"",length:y.length||"",weight:y.weight||"",sleeps:y.sleeps||"",slideouts:y.slideouts||"",fuelType:y.fuelType||"",mileage:y.mileage||"",condition:y.condition||"New"}}));x(v)},error:p=>{g(p)}})}),exportVehiclesToCSV:()=>{const h=e.map(g=>{var p,v,y,b,j,C,E,S,N;return{id:g.id,vin:g.vin,make:g.make,model:g.model,year:g.year,type:g.type,status:g.status,price:g.price,cost:g.cost,location:g.location,features:g.features.join(", "),exteriorColor:((p=g.customFields)==null?void 0:p.exteriorColor)||"",interiorColor:((v=g.customFields)==null?void 0:v.interiorColor)||"",length:((y=g.customFields)==null?void 0:y.length)||"",weight:((b=g.customFields)==null?void 0:b.weight)||"",sleeps:((j=g.customFields)==null?void 0:j.sleeps)||"",slideouts:((C=g.customFields)==null?void 0:C.slideouts)||"",fuelType:((E=g.customFields)==null?void 0:E.fuelType)||"",mileage:((S=g.customFields)==null?void 0:S.mileage)||"",condition:((N=g.customFields)==null?void 0:N.condition)||""}});return rm.unparse(h)}}}const Xh=[{id:"1",name:"2024 Forest River Georgetown",description:"Class A Motorhome with premium features",price:125e3,category:"motorhome"},{id:"2",name:"Extended Warranty",description:"3-year comprehensive warranty coverage",price:2500,category:"warranty"},{id:"3",name:"Solar Panel Package",description:"400W solar panel system with inverter",price:3500,category:"accessory"},{id:"4",name:"Premium Package",description:"Includes extended warranty, solar panels, and premium interior",price:8e3,category:"bundle",isBundle:!0,bundleItems:[{productId:"2",quantity:1},{productId:"3",quantity:1},{productId:"5",quantity:1}]},{id:"5",name:"Premium Interior Upgrade",description:"Leather seating and premium finishes",price:2200,category:"upgrade"}],Vte=[{id:"1",name:"Bulk Accessory Discount",type:"quantity_discount",conditions:{minQuantity:3},discount:{type:"percentage",value:10},isActive:!0},{id:"2",name:"Premium Bundle Discount",type:"bundle_discount",conditions:{productIds:["4"]},discount:{type:"fixed",value:500},isActive:!0}];function T$({quote:e,customerId:t,onSave:n,onCancel:a}){const{toast:s}=Ct(),{getAvailableVehicles:i,getVehicleById:o}=Ol(),[l,c]=w.useState(!1),[d,f]=w.useState("items"),[u,m]=w.useState({customerId:t,validUntil:new Date(Date.now()+30*24*60*60*1e3),notes:"",terms:"Payment due within 30 days. All sales final.",items:[],subtotal:0,totalDiscount:0,tax:0,taxRate:.08,total:0}),[h,x]=w.useState(""),[g,p]=w.useState(!1),[v,y]=w.useState(""),[b,j]=w.useState({description:"",quantity:1,unitPrice:0,discount:0,discountType:"percentage"}),C=i();w.useEffect(()=>{e&&m(M=>({...M,...e}))},[e]),w.useEffect(()=>{E()},[u.items,u.taxRate]);const E=()=>{const M=u.items.reduce((R,V)=>R+V.total,0),B=u.items.reduce((R,V)=>{const G=V.discountType==="percentage"?V.quantity*V.unitPrice*V.discount/100:V.discount*V.quantity;return R+G},0),U=M-B,W=U*u.taxRate,q=U+W;m(R=>({...R,subtotal:M,totalDiscount:B,tax:W,total:q}))},S=()=>{if(!b.description||!b.unitPrice){s({title:"Validation Error",description:"Description and unit price are required",variant:"destructive"});return}const M={id:Math.random().toString(36).substr(2,9),description:b.description,quantity:b.quantity||1,unitPrice:b.unitPrice||0,discount:b.discount||0,discountType:b.discountType||"percentage",total:D(b)};m(B=>({...B,items:[...B.items,M]})),j({description:"",quantity:1,unitPrice:0,discount:0,discountType:"percentage"}),x(""),p(!1)},N=M=>{const B=o(M);if(!B)return;const U={id:Math.random().toString(36).substr(2,9),productId:B.id,description:`${B.year} ${B.make} ${B.model}`,quantity:1,unitPrice:B.price,discount:0,discountType:"percentage",total:B.price};m(W=>({...W,items:[...W.items,U]})),y(""),s({title:"Vehicle Added",description:`${B.year} ${B.make} ${B.model} added to quote`})},I=M=>{const B=Xh.find(U=>U.id===M);if(B){if(B.isBundle&&B.bundleItems){const U={id:Math.random().toString(36).substr(2,9),productId:B.id,description:B.description,quantity:1,unitPrice:B.price,discount:0,discountType:"percentage",total:B.price,isBundle:!0,bundleItems:B.bundleItems.map(W=>{const q=Xh.find(R=>R.id===W.productId);return{id:Math.random().toString(36).substr(2,9),productId:W.productId,description:(q==null?void 0:q.name)||"",quantity:W.quantity,unitPrice:(q==null?void 0:q.price)||0,discount:0,discountType:"percentage",total:((q==null?void 0:q.price)||0)*W.quantity}})};m(W=>({...W,items:[...W.items,U]}))}else{const U={id:Math.random().toString(36).substr(2,9),productId:B.id,description:B.name,quantity:1,unitPrice:B.price,discount:0,discountType:"percentage",total:B.price};m(W=>({...W,items:[...W.items,U]}))}_()}},D=M=>{const B=M.quantity*M.unitPrice,U=M.discountType==="percentage"?B*(M.discount/100):M.discount*M.quantity;return B-U},T=(M,B)=>{m(U=>({...U,items:U.items.map(W=>{if(W.id===M){const q={...W,...B};return q.total=D(q),q}return W})}))},A=M=>{m(B=>({...B,items:B.items.filter(U=>U.id!==M)}))},_=()=>{const M=u.items.filter(U=>{var W;return((W=Xh.find(q=>q.id===U.productId))==null?void 0:W.category)==="accessory"});M.length>=3&&M.forEach(U=>{T(U.id,{discount:10,discountType:"percentage"})}),u.items.filter(U=>U.isBundle).forEach(U=>{T(U.id,{discount:500,discountType:"fixed"})})},k=async()=>{c(!0);try{await new Promise(q=>setTimeout(q,2e3));const M=L(),B=new Blob([M],{type:"text/plain"}),U=URL.createObjectURL(B),W=document.createElement("a");W.href=U,W.download=`quote-${Date.now()}.txt`,document.body.appendChild(W),W.click(),document.body.removeChild(W),URL.revokeObjectURL(U),s({title:"PDF Generated",description:"Quote PDF has been downloaded successfully"})}catch{s({title:"Error",description:"Failed to generate PDF",variant:"destructive"})}finally{c(!1)}},L=()=>`
QUOTE DOCUMENT
==============

Customer ID: ${u.customerId}
Valid Until: ${u.validUntil.toLocaleDateString()}

LINE ITEMS:
-----------
${u.items.map(M=>{var B;return`
${M.description}
Quantity: ${M.quantity} x ${De(M.unitPrice)}
${M.discount>0?`Discount: ${M.discount}${M.discountType==="percentage"?"%":" fixed"}`:""}
Total: ${De(M.total)}
${M.isBundle?`
  Bundle Items:
  ${((B=M.bundleItems)==null?void 0:B.map(U=>`  - ${U.description} (${U.quantity}x)`).join(`
  `))||""}
`:""}
`}).join(`
`)}

TOTALS:
-------
Subtotal: ${De(u.subtotal)}
Total Discount: ${De(u.totalDiscount)}
Tax (${(u.taxRate*100).toFixed(1)}%): ${De(u.tax)}
TOTAL: ${De(u.total)}

Notes: ${u.notes}
Terms: ${u.terms}
    `,$=async()=>{if(u.items.length===0){s({title:"Validation Error",description:"At least one line item is required",variant:"destructive"});return}c(!0);try{const M={...u,customerId:u.customerId||t};await n(M),s({title:"Success",description:"Quote saved successfully"})}catch{s({title:"Error",description:"Failed to save quote",variant:"destructive"})}finally{c(!1)}};return r.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:r.jsxs(fe,{className:"w-full max-w-6xl max-h-[90vh] overflow-y-auto",children:[r.jsx(we,{children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsxs(Ne,{className:"text-xl flex items-center",children:[r.jsx(qa,{className:"h-5 w-5 mr-2 text-blue-500"}),e?"Edit Quote":"Create Quote"]}),r.jsx(Ue,{children:"Build a detailed quote with line items, pricing rules, and bundled products"})]}),r.jsx(J,{variant:"ghost",size:"sm",onClick:a,children:r.jsx($t,{className:"h-4 w-4"})})]})}),r.jsxs(me,{children:[r.jsxs(lr,{value:d,onValueChange:f,className:"space-y-6",children:[r.jsxs(or,{className:"grid w-full grid-cols-4",children:[r.jsx(Ke,{value:"items",children:"Line Items"}),r.jsx(Ke,{value:"products",children:"Products"}),r.jsx(Ke,{value:"pricing",children:"Pricing Rules"}),r.jsx(Ke,{value:"details",children:"Quote Details"})]}),r.jsxs(Je,{value:"items",className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h3",{className:"text-lg font-semibold",children:"Quote Line Items"}),r.jsxs("div",{className:"flex space-x-2",children:[r.jsxs($e,{value:v,onValueChange:y,children:[r.jsx(Fe,{className:"w-64",children:r.jsx(Be,{placeholder:"Add vehicle from inventory"})}),r.jsx(Me,{children:C.map(M=>r.jsxs(K,{value:M.id,children:[M.year," ",M.make," ",M.model," - ",De(M.price)]},M.id))})]}),v&&r.jsxs(J,{onClick:()=>N(v),size:"sm",children:[r.jsx(Nt,{className:"h-4 w-4 mr-2"}),"Add Vehicle"]}),r.jsxs(J,{onClick:()=>p(!0),size:"sm",variant:"outline",children:[r.jsx(Nt,{className:"h-4 w-4 mr-2"}),"Custom Item"]})]})]}),g&&r.jsx(fe,{className:"border-dashed",children:r.jsxs(me,{className:"pt-6",children:[r.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[r.jsxs("div",{children:[r.jsx(Z,{children:"Description"}),r.jsx(je,{value:b.description||"",onChange:M=>j(B=>({...B,description:M.target.value})),placeholder:"Item description"})]}),r.jsxs("div",{children:[r.jsx(Z,{children:"Unit Price"}),r.jsx(je,{type:"number",value:b.unitPrice||"",onChange:M=>j(B=>({...B,unitPrice:parseFloat(M.target.value)||0})),placeholder:"0.00"})]}),r.jsxs("div",{children:[r.jsx(Z,{children:"Quantity"}),r.jsx(je,{type:"number",value:b.quantity||1,onChange:M=>j(B=>({...B,quantity:parseInt(M.target.value)||1})),min:"1"})]}),r.jsxs("div",{children:[r.jsx(Z,{children:"Discount"}),r.jsxs("div",{className:"flex space-x-2",children:[r.jsx(je,{type:"number",value:b.discount||0,onChange:M=>j(B=>({...B,discount:parseFloat(M.target.value)||0})),placeholder:"0"}),r.jsxs($e,{value:b.discountType,onValueChange:M=>j(B=>({...B,discountType:M})),children:[r.jsx(Fe,{className:"w-32",children:r.jsx(Be,{})}),r.jsxs(Me,{children:[r.jsx(K,{value:"percentage",children:"%"}),r.jsx(K,{value:"fixed",children:"$"})]})]})]})]})]}),r.jsxs("div",{className:"flex justify-end space-x-2 mt-4",children:[r.jsx(J,{variant:"outline",onClick:()=>p(!1),children:"Cancel"}),r.jsx(J,{onClick:S,children:"Add Item"})]})]})}),r.jsxs("div",{className:"space-y-4",children:[u.items.map((M,B)=>r.jsx(fe,{className:"shadow-sm",children:r.jsxs(me,{className:"pt-6",children:[r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{className:"flex-1 grid gap-4 md:grid-cols-4",children:[r.jsxs("div",{children:[r.jsx(Z,{children:"Description"}),r.jsx(je,{value:M.description,onChange:U=>T(M.id,{description:U.target.value})}),M.isBundle&&r.jsxs(ze,{className:"mt-1 bg-purple-50 text-purple-700 border-purple-200",children:[r.jsx(Ra,{className:"h-3 w-3 mr-1"}),"Bundle"]})]}),r.jsxs("div",{children:[r.jsx(Z,{children:"Quantity"}),r.jsx(je,{type:"number",value:M.quantity,onChange:U=>T(M.id,{quantity:parseInt(U.target.value)||1}),min:"1"})]}),r.jsxs("div",{children:[r.jsx(Z,{children:"Unit Price"}),r.jsx(je,{type:"number",value:M.unitPrice,onChange:U=>T(M.id,{unitPrice:parseFloat(U.target.value)||0}),step:"0.01"})]}),r.jsxs("div",{children:[r.jsx(Z,{children:"Discount"}),r.jsxs("div",{className:"flex space-x-2",children:[r.jsx(je,{type:"number",value:M.discount,onChange:U=>T(M.id,{discount:parseFloat(U.target.value)||0}),step:"0.01"}),r.jsxs($e,{value:M.discountType,onValueChange:U=>T(M.id,{discountType:U}),children:[r.jsx(Fe,{className:"w-16",children:r.jsx(Be,{})}),r.jsxs(Me,{children:[r.jsx(K,{value:"percentage",children:"%"}),r.jsx(K,{value:"fixed",children:"$"})]})]})]})]})]}),r.jsxs("div",{className:"flex items-center space-x-3 ml-4",children:[r.jsxs("div",{className:"text-right",children:[r.jsx("div",{className:"text-sm text-muted-foreground",children:"Total"}),r.jsx("div",{className:"font-bold text-lg",children:De(M.total)})]}),r.jsx(J,{variant:"outline",size:"sm",onClick:()=>A(M.id),children:r.jsx(wn,{className:"h-4 w-4"})})]})]}),M.isBundle&&M.bundleItems&&r.jsxs("div",{className:"mt-4 pl-4 border-l-2 border-purple-200",children:[r.jsx("h4",{className:"text-sm font-semibold text-purple-700 mb-2",children:"Bundle Contents:"}),r.jsx("div",{className:"space-y-2",children:M.bundleItems.map(U=>r.jsxs("div",{className:"flex items-center justify-between text-sm bg-purple-50 p-2 rounded",children:[r.jsx("span",{children:U.description}),r.jsxs("span",{children:[U.quantity,"x ",De(U.unitPrice)]})]},U.id))})]})]})},M.id)),u.items.length===0&&r.jsxs("div",{className:"text-center py-12 text-muted-foreground border-2 border-dashed rounded-lg",children:[r.jsx(qa,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),r.jsx("p",{children:"No line items added yet"}),r.jsx("p",{className:"text-sm",children:"Add products or custom items to build your quote"})]})]}),u.items.length>0&&r.jsx(fe,{className:"bg-muted/30",children:r.jsx(me,{className:"pt-6",children:r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:"Subtotal:"}),r.jsx("span",{children:De(u.subtotal)})]}),r.jsxs("div",{className:"flex justify-between text-red-600",children:[r.jsx("span",{children:"Total Discount:"}),r.jsxs("span",{children:["-",De(u.totalDiscount)]})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsxs("span",{children:["Tax (",(u.taxRate*100).toFixed(1),"%):"]}),r.jsx("span",{children:De(u.tax)})]}),r.jsxs("div",{className:"flex justify-between text-lg font-bold border-t pt-2",children:[r.jsx("span",{children:"Total:"}),r.jsx("span",{children:De(u.total)})]})]})})})]}),r.jsx(Je,{value:"products",className:"space-y-6",children:r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Available Inventory & Products"}),r.jsxs("div",{className:"mb-8",children:[r.jsx("h4",{className:"text-md font-semibold mb-3 text-blue-600",children:"Available Vehicles"}),r.jsx("div",{className:"grid gap-4 md:grid-cols-2",children:C.map(M=>r.jsx(fe,{className:"shadow-sm hover:shadow-md transition-shadow cursor-pointer",children:r.jsx(me,{className:"pt-6",children:r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[r.jsxs("h4",{className:"font-semibold",children:[M.year," ",M.make," ",M.model]}),r.jsx(ze,{className:"bg-blue-50 text-blue-700 border-blue-200",children:M.type.replace("_"," ").toUpperCase()})]}),r.jsxs("p",{className:"text-sm text-muted-foreground mb-2",children:["VIN: ",M.vin]}),r.jsxs("p",{className:"text-sm text-muted-foreground mb-2",children:["Location: ",M.location]}),r.jsx("div",{className:"text-lg font-bold text-primary",children:De(M.price)}),M.features.length>0&&r.jsx("div",{className:"mt-3",children:r.jsxs("div",{className:"flex flex-wrap gap-1",children:[M.features.slice(0,3).map((B,U)=>r.jsx(ze,{variant:"outline",className:"text-xs",children:B},U)),M.features.length>3&&r.jsxs(ze,{variant:"outline",className:"text-xs",children:["+",M.features.length-3," more"]})]})})]}),r.jsxs(J,{onClick:()=>N(M.id),size:"sm",className:"ml-4",children:[r.jsx(Nt,{className:"h-4 w-4 mr-1"}),"Add"]})]})})},M.id))})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"text-md font-semibold mb-3 text-green-600",children:"Available Products & Services"}),r.jsx("div",{className:"grid gap-4 md:grid-cols-2",children:Xh.map(M=>r.jsx(fe,{className:"shadow-sm hover:shadow-md transition-shadow cursor-pointer",children:r.jsx(me,{className:"pt-6",children:r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[r.jsx("h4",{className:"font-semibold",children:M.name}),M.isBundle&&r.jsxs(ze,{className:"bg-purple-50 text-purple-700 border-purple-200",children:[r.jsx(Ra,{className:"h-3 w-3 mr-1"}),"Bundle"]})]}),r.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:M.description}),r.jsx("div",{className:"text-lg font-bold text-primary",children:De(M.price)}),M.isBundle&&M.bundleItems&&r.jsxs("div",{className:"mt-3 p-2 bg-purple-50 rounded",children:[r.jsx("div",{className:"text-xs font-semibold text-purple-700 mb-1",children:"Includes:"}),M.bundleItems.map(B=>{const U=Xh.find(W=>W.id===B.productId);return r.jsxs("div",{className:"text-xs text-purple-600",children:["• ",U==null?void 0:U.name," (",B.quantity,"x)"]},B.productId)})]})]}),r.jsxs(J,{onClick:()=>I(M.id),size:"sm",className:"ml-4",children:[r.jsx(Nt,{className:"h-4 w-4 mr-1"}),"Add"]})]})})},M.id))})]})]})}),r.jsx(Je,{value:"pricing",className:"space-y-6",children:r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Active Pricing Rules"}),r.jsx("div",{className:"space-y-4",children:Vte.filter(M=>M.isActive).map(M=>r.jsx(fe,{className:"shadow-sm",children:r.jsx(me,{className:"pt-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h4",{className:"font-semibold",children:M.name}),r.jsxs("p",{className:"text-sm text-muted-foreground",children:[M.type==="quantity_discount"&&`Min quantity: ${M.conditions.minQuantity}`,M.type==="bundle_discount"&&"Applied to bundle products",M.type==="customer_discount"&&`Customer type: ${M.conditions.customerType}`]}),r.jsx("div",{className:"flex items-center space-x-2 mt-2",children:r.jsxs(ze,{className:"bg-green-50 text-green-700 border-green-200",children:[r.jsx(sv,{className:"h-3 w-3 mr-1"}),M.discount.type==="percentage"?`${M.discount.value}%`:De(M.discount.value)," off"]})})]}),r.jsxs(J,{variant:"outline",size:"sm",onClick:()=>_(),children:[r.jsx(au,{className:"h-4 w-4 mr-1"}),"Apply"]})]})})},M.id))})]})}),r.jsxs(Je,{value:"details",className:"space-y-6",children:[r.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"validUntil",children:"Valid Until"}),r.jsx(je,{id:"validUntil",type:"date",value:u.validUntil.toISOString().split("T")[0],onChange:M=>m(B=>({...B,validUntil:new Date(M.target.value)}))})]}),r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"taxRate",children:"Tax Rate (%)"}),r.jsx(je,{id:"taxRate",type:"number",value:(u.taxRate*100).toFixed(2),onChange:M=>m(B=>({...B,taxRate:parseFloat(M.target.value)/100||0})),step:"0.01",min:"0",max:"100"})]})]}),r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"notes",children:"Notes"}),r.jsx(Xt,{id:"notes",value:u.notes,onChange:M=>m(B=>({...B,notes:M.target.value})),placeholder:"Additional notes for the customer...",rows:3})]}),r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"terms",children:"Terms & Conditions"}),r.jsx(Xt,{id:"terms",value:u.terms,onChange:M=>m(B=>({...B,terms:M.target.value})),placeholder:"Terms and conditions...",rows:4})]})]})]}),r.jsxs("div",{className:"flex justify-between items-center pt-6 border-t",children:[r.jsx("div",{className:"flex space-x-2",children:r.jsxs(J,{variant:"outline",onClick:k,disabled:l||u.items.length===0,children:[r.jsx(ms,{className:"h-4 w-4 mr-2"}),l?"Generating...":"Export PDF"]})}),r.jsxs("div",{className:"flex space-x-3",children:[r.jsx(J,{variant:"outline",onClick:a,disabled:l,children:"Cancel"}),r.jsx(J,{onClick:$,disabled:l,children:l?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Saving..."]}):r.jsxs(r.Fragment,{children:[r.jsx(Pr,{className:"h-4 w-4 mr-2"}),"Save Quote"]})})]})]})]})]})})}function qte(){const[e,t]=w.useState([]),[n,a]=w.useState([]),[s,i]=w.useState([]),[o,l]=w.useState(!1);w.useEffect(()=>{c()},[]);const c=()=>{const E=un("renter-insight-quotes",[]);t(E);const S=[{id:"1",name:"2024 Forest River Georgetown",description:"Class A Motorhome with premium features",price:125e3,category:"motorhome"},{id:"2",name:"Extended Warranty",description:"3-year comprehensive warranty coverage",price:2500,category:"warranty"},{id:"3",name:"Solar Panel Package",description:"400W solar panel system with inverter",price:3500,category:"accessory"},{id:"4",name:"Premium Package",description:"Includes extended warranty, solar panels, and premium interior",price:8e3,category:"bundle",isBundle:!0,bundleItems:[{productId:"2",quantity:1},{productId:"3",quantity:1},{productId:"5",quantity:1}]},{id:"5",name:"Premium Interior Upgrade",description:"Leather seating and premium finishes",price:2200,category:"upgrade"},{id:"6",name:"Backup Camera System",description:"Wireless backup camera with monitor",price:450,category:"accessory"},{id:"7",name:"Awning Package",description:"Electric awning with LED lighting",price:1200,category:"accessory"}],N=[{id:"1",name:"Bulk Accessory Discount",type:"quantity_discount",conditions:{minQuantity:3},discount:{type:"percentage",value:10},isActive:!0},{id:"2",name:"Premium Bundle Discount",type:"bundle_discount",conditions:{productIds:["4"]},discount:{type:"fixed",value:500},isActive:!0},{id:"3",name:"First-Time Buyer Discount",type:"customer_discount",conditions:{customerType:"first_time"},discount:{type:"percentage",value:5},isActive:!0}];a(S),i(N)},d=E=>{Wr("renter-insight-quotes",E)},f=async E=>{l(!0);try{const S={id:Math.random().toString(36).substr(2,9),customerId:E.customerId||"",items:E.items||[],subtotal:E.subtotal||0,totalDiscount:E.totalDiscount||0,tax:E.tax||0,taxRate:E.taxRate||.08,total:E.total||0,status:"draft",validUntil:E.validUntil||new Date(Date.now()+2592e6),notes:E.notes||"",terms:E.terms||"",createdAt:new Date,updatedAt:new Date},N=[...e,S];return t(N),d(N),S}finally{l(!1)}},u=async(E,S)=>{l(!0);try{const N=e.map(I=>I.id===E?{...I,...S,updatedAt:new Date}:I);return t(N),d(N),N.find(I=>I.id===E)}finally{l(!1)}};return{quotes:e,products:n,pricingRules:s,loading:o,createQuote:f,updateQuote:u,deleteQuote:async E=>{const S=e.filter(N=>N.id!==E);t(S),d(S)},duplicateQuote:async E=>{const S=e.find(D=>D.id===E);if(!S)return;const N={...S,id:Math.random().toString(36).substr(2,9),status:"draft",createdAt:new Date,updatedAt:new Date},I=[...e,N];return t(I),d(I),N},sendQuote:async E=>u(E,{status:"sent"}),acceptQuote:async E=>u(E,{status:"accepted"}),rejectQuote:async E=>u(E,{status:"rejected"}),calculateQuoteTotals:(E,S=.08)=>{const N=E.reduce((_,k)=>_+k.total,0),I=E.reduce((_,k)=>{const L=k.discountType==="percentage"?k.quantity*k.unitPrice*k.discount/100:k.discount*k.quantity;return _+L},0),D=N-I,T=D*S,A=D+T;return{subtotal:N,totalDiscount:I,tax:T,total:A}},applyPricingRules:(E,S)=>{let N=[...E];return s.forEach(I=>{if(I.isActive)switch(I.type){case"quantity_discount":if(I.conditions.minQuantity){const D=N.filter(T=>{var A;return((A=n.find(_=>_.id===T.productId))==null?void 0:A.category)==="accessory"});D.length>=I.conditions.minQuantity&&(N=N.map(T=>D.includes(T)?{...T,discount:I.discount.value,discountType:I.discount.type}:T))}break;case"bundle_discount":I.conditions.productIds&&(N=N.map(D=>{var T;return D.isBundle&&((T=I.conditions.productIds)!=null&&T.includes(D.productId||""))?{...D,discount:I.discount.value,discountType:I.discount.type}:D}));break}}),N},getQuotesByCustomer:E=>e.filter(S=>S.customerId===E),getQuotesByStatus:E=>e.filter(S=>S.status===E),getExpiredQuotes:()=>{const E=new Date;return e.filter(S=>new Date(S.validUntil)<E&&S.status!=="accepted")}}}function Wte({quote:e,onClose:t,onEdit:n}){const a=s=>{switch(s){case"draft":return"bg-gray-50 text-gray-700 border-gray-200";case"sent":return"bg-blue-50 text-blue-700 border-blue-200";case"viewed":return"bg-yellow-50 text-yellow-700 border-yellow-200";case"accepted":return"bg-green-50 text-green-700 border-green-200";case"rejected":return"bg-red-50 text-red-700 border-red-200";case"expired":return"bg-orange-50 text-orange-700 border-orange-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}};return r.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:r.jsxs(fe,{className:"w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[r.jsx(we,{children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsxs(Ne,{className:"text-xl",children:["Quote #",e.id]}),r.jsx(Ue,{children:"Quote details and line items"})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsxs(J,{onClick:()=>n(e),size:"sm",children:[r.jsx(Br,{className:"h-4 w-4 mr-2"}),"Edit Quote"]}),r.jsx(J,{variant:"ghost",size:"sm",onClick:t,children:r.jsx($t,{className:"h-4 w-4"})})]})]})}),r.jsxs(me,{className:"space-y-6",children:[r.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Customer ID"}),r.jsx("p",{className:"font-medium",children:e.customerId})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Status"}),r.jsx("div",{className:"mt-1",children:r.jsx(ze,{className:He("ri-badge-status",a(e.status)),children:e.status.toUpperCase()})})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Created Date"}),r.jsx("p",{className:"font-medium",children:lt(e.createdAt)})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Valid Until"}),r.jsx("p",{className:"font-medium",children:lt(e.validUntil)})]})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Line Items"}),r.jsx("div",{className:"space-y-3",children:Array.isArray(e.items)&&e.items.length>0?e.items.map((s,i)=>r.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("h4",{className:"font-medium",children:s.description}),r.jsxs("p",{className:"text-sm text-muted-foreground",children:["Quantity: ",s.quantity," × ",De(s.unitPrice)]})]}),r.jsx("div",{className:"text-right",children:r.jsx("div",{className:"font-bold text-lg",children:De(s.total)})})]},s.id)):r.jsx("p",{className:"text-sm text-muted-foreground",children:"No items in this quote."})})]}),r.jsx("div",{className:"bg-muted/30 p-4 rounded-lg",children:r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:"Subtotal:"}),r.jsx("span",{children:De(e.subtotal)})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:"Tax:"}),r.jsx("span",{children:De(e.tax)})]}),r.jsxs("div",{className:"flex justify-between text-lg font-bold border-t pt-2",children:[r.jsx("span",{children:"Total:"}),r.jsx("span",{children:De(e.total)})]})]})}),e.notes&&r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Notes"}),r.jsx("div",{className:"mt-1 p-3 bg-muted/30 rounded-md",children:r.jsx("p",{className:"text-sm",children:e.notes})})]})]})]})})}function Hte(){const{quotes:e,createQuote:t,updateQuote:n,deleteQuote:a,duplicateQuote:s,sendQuote:i}=qte(),{toast:o}=Ct(),[l,c]=w.useState(""),[d,f]=w.useState("all"),[u,m]=w.useState(!1),[h,x]=w.useState(null),[g,p]=w.useState(null),[v,y]=w.useState(""),[b,j]=w.useState(null);w.useEffect(()=>{!g&&b&&(x(b),y(b.customerId),m(!0),j(null))},[g,b]);const C=L=>{switch(L){case"draft":return"bg-gray-50 text-gray-700 border-gray-200";case"sent":return"bg-blue-50 text-blue-700 border-blue-200";case"viewed":return"bg-yellow-50 text-yellow-700 border-yellow-200";case"accepted":return"bg-green-50 text-green-700 border-green-200";case"rejected":return"bg-red-50 text-red-700 border-red-200";case"expired":return"bg-orange-50 text-orange-700 border-orange-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},E=Array.isArray(e)?e.filter(L=>{var B,U,W,q;const $=((U=(B=L.id)==null?void 0:B.toLowerCase())==null?void 0:U.includes(l.toLowerCase()))||((q=(W=L.customerId)==null?void 0:W.toLowerCase())==null?void 0:q.includes(l.toLowerCase())),M=d==="all"||L.status===d;return $&&M}):[],S=()=>{x(null),y(""),m(!0)},N=L=>{p(null),j(L)},I=L=>{p(L)},D=()=>p(null),T=async L=>{try{h?(await n(h.id,L),o({title:"Success",description:"Quote updated successfully"})):(await t(L),o({title:"Success",description:"Quote created successfully"})),m(!1),x(null)}catch($){console.error("Error saving quote:",$),o({title:"Error",description:"Failed to save quote",variant:"destructive"})}},A=async L=>{try{await i(L),o({title:"Success",description:"Quote sent to customer"})}catch($){console.error("Error sending quote:",$),o({title:"Error",description:"Failed to send quote",variant:"destructive"})}},_=async L=>{try{await s(L),o({title:"Success",description:"Quote duplicated successfully"})}catch($){console.error("Error duplicating quote:",$),o({title:"Error",description:"Failed to duplicate quote",variant:"destructive"})}},k=async L=>{if(window.confirm("Are you sure you want to delete this quote?"))try{await a(L),o({title:"Success",description:"Quote deleted successfully"})}catch($){console.error("Error deleting quote:",$),o({title:"Error",description:"Failed to delete quote",variant:"destructive"})}};return E.length,E.filter(L=>L.status==="draft").length,E.filter(L=>L.status==="sent").length,E.filter(L=>L.status==="accepted").length,E.reduce((L,$)=>L+($.total||0),0),E.filter(L=>L.status==="accepted").reduce((L,$)=>L+($.total||0),0),r.jsxs("div",{className:"space-y-8",children:[u&&r.jsx(T$,{quote:h,customerId:v,onSave:T,onCancel:()=>{m(!1),x(null)}}),g&&r.jsx(Wte,{quote:g,onClose:D,onEdit:N}),r.jsx("div",{className:"ri-page-header",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"ri-page-title",children:"Quote Builder"}),r.jsx("p",{className:"ri-page-description",children:"Create and manage customer quotes with advanced pricing rules"})]}),r.jsxs(J,{className:"shadow-sm",onClick:S,children:[r.jsx(Nt,{className:"h-4 w-4 mr-2"}),"New Quote"]})]})}),r.jsx("div",{className:"ri-stats-grid"}),r.jsxs("div",{className:"flex gap-4",children:[r.jsxs("div",{className:"ri-search-bar",children:[r.jsx(Jn,{className:"ri-search-icon"}),r.jsx(je,{placeholder:"Search quotes...",value:l,onChange:L=>c(L.target.value),className:"ri-search-input shadow-sm"})]}),r.jsxs($e,{value:d,onValueChange:f,children:[r.jsx(Fe,{className:"w-40",children:r.jsx(Be,{placeholder:"Status"})}),r.jsxs(Me,{children:[r.jsx(K,{value:"all",children:"All Status"}),r.jsx(K,{value:"draft",children:"Draft"}),r.jsx(K,{value:"sent",children:"Sent"}),r.jsx(K,{value:"viewed",children:"Viewed"}),r.jsx(K,{value:"accepted",children:"Accepted"}),r.jsx(K,{value:"rejected",children:"Rejected"}),r.jsx(K,{value:"expired",children:"Expired"})]})]}),r.jsxs(J,{variant:"outline",className:"shadow-sm",children:[r.jsx(hs,{className:"h-4 w-4 mr-2"}),"Filter"]})]}),r.jsxs(fe,{className:"shadow-sm",children:[r.jsxs(we,{children:[r.jsxs(Ne,{className:"text-xl",children:["Quotes (",E.length,")"]}),r.jsx(Ue,{children:"Manage customer quotes with advanced pricing and bundling"})]}),r.jsx(me,{children:r.jsx("div",{className:"space-y-4",children:Array.isArray(E)&&E.length>0?E.map(L=>r.jsxs("div",{className:"ri-table-row",children:[r.jsx("div",{className:"flex items-center space-x-4 flex-1",children:r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[r.jsxs("h3",{className:"font-semibold text-foreground",children:["Quote #",L.id]}),r.jsx(ze,{className:He("ri-badge-status",C(L.status)),children:L.status.toUpperCase()})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm text-muted-foreground",children:[r.jsxs("div",{children:[r.jsx("span",{className:"font-medium",children:"Customer:"})," ",L.customerId]}),r.jsxs("div",{children:[r.jsx("span",{className:"font-medium",children:"Total:"})," ",r.jsx("span",{className:"ml-1 font-bold text-primary",children:De(L.total)})]}),r.jsxs("div",{children:[r.jsx("span",{className:"font-medium",children:"Created:"})," ",lt(L.createdAt)]}),r.jsxs("div",{children:[r.jsx("span",{className:"font-medium",children:"Valid Until:"})," ",lt(L.validUntil)]})]})]})}),r.jsxs("div",{className:"ri-action-buttons",children:[r.jsxs(J,{variant:"outline",size:"sm",className:"shadow-sm",onClick:()=>I(L),children:[r.jsx(Sl,{className:"h-3 w-3 mr-1"}),"View"]}),r.jsxs(J,{variant:"outline",size:"sm",className:"shadow-sm",onClick:()=>N(L),children:[r.jsx(Br,{className:"h-3 w-3 mr-1"}),"Edit"]}),L.status==="draft"&&r.jsxs(J,{variant:"outline",size:"sm",className:"shadow-sm",onClick:()=>A(L.id),children:[r.jsx(Oo,{className:"h-3 w-3 mr-1"}),"Send"]}),r.jsxs(J,{variant:"outline",size:"sm",className:"shadow-sm",onClick:()=>_(L.id),children:[r.jsx(FA,{className:"h-3 w-3 mr-1"}),"Copy"]}),r.jsx(J,{variant:"outline",size:"sm",className:"shadow-sm text-red-600 hover:text-red-700",onClick:()=>k(L.id),children:r.jsx(wn,{className:"h-3 w-3"})})]})]},L.id)):r.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[r.jsx(qa,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),r.jsx("p",{children:"No quotes found"}),r.jsx("p",{className:"text-sm",children:"Create your first quote to get started"})]})})})]})]})}function OT(){var I;const{leads:e,sources:t,activities:n,salesReps:a,updateLeadStatus:s,assignLead:i,getActivitiesByLead:o,getRemindersByUser:l,getLeadScore:c}=ro(),[d,f]=w.useState(""),[u,m]=w.useState("all"),[h,x]=w.useState("all"),[g,p]=w.useState("all"),[v,y]=w.useState(null),[b,j]=w.useState(!1),C=D=>{switch(D){case ha.NEW:return"bg-blue-50 text-blue-700 border-blue-200";case ha.CONTACTED:return"bg-yellow-50 text-yellow-700 border-yellow-200";case ha.QUALIFIED:return"bg-green-50 text-green-700 border-green-200";case ha.PROPOSAL:return"bg-purple-50 text-purple-700 border-purple-200";case ha.NEGOTIATION:return"bg-orange-50 text-orange-700 border-orange-200";case ha.CLOSED_WON:return"bg-emerald-50 text-emerald-700 border-emerald-200";case ha.CLOSED_LOST:return"bg-red-50 text-red-700 border-red-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},E=D=>D>=80?"text-green-600 bg-green-50":D>=60?"text-yellow-600 bg-yellow-50":D>=40?"text-orange-600 bg-orange-50":"text-red-600 bg-red-50",S=e.filter(D=>{const T=`${D.firstName} ${D.lastName}`.toLowerCase().includes(d.toLowerCase())||D.email.toLowerCase().includes(d.toLowerCase())||D.phone.includes(d),A=u==="all"||D.status===u,_=h==="all"||D.sourceId===h,k=g==="all"||D.assignedTo===g;return T&&A&&_&&k}),N=D=>{console.log("New lead created:",D)};if(v){const D=o(v.id),T=l("current-user").filter(_=>_.leadId===v.id),A=c(v.id);return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx(J,{variant:"outline",onClick:()=>y(null),className:"mb-4",children:"← Back to Leads"}),r.jsxs("h1",{className:"ri-page-title",children:[v.firstName," ",v.lastName]}),r.jsx("p",{className:"ri-page-description",children:"Lead details and activity management"})]}),r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(ze,{className:He("ri-badge-status",C(v.status)),children:v.status.replace("_"," ").toUpperCase()}),v.score&&r.jsxs(ze,{className:He("ri-badge-status",E(v.score)),children:["Score: ",v.score]})]})]}),r.jsxs(lr,{defaultValue:"overview",className:"space-y-6",children:[r.jsxs(or,{className:"grid w-full grid-cols-6",children:[r.jsx(Ke,{value:"overview",children:"Overview"}),r.jsx(Ke,{value:"activity",children:"Activity"}),r.jsx(Ke,{value:"communication",children:"Communication"}),r.jsx(Ke,{value:"ai-insights",children:"AI Insights"}),r.jsx(Ke,{value:"nurturing",children:"Nurturing"}),r.jsx(Ke,{value:"reminders",children:"Reminders"})]}),r.jsx(Je,{value:"overview",className:"space-y-6",children:r.jsxs("div",{className:"grid gap-6 md:grid-cols-3",children:[r.jsx("div",{className:"md:col-span-2",children:r.jsxs(fe,{className:"shadow-sm",children:[r.jsx(we,{children:r.jsx(Ne,{children:"Lead Information"})}),r.jsxs(me,{children:[r.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Email"}),r.jsx("p",{className:"font-medium",children:v.email})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Phone"}),r.jsx("p",{className:"font-medium",children:v.phone})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Source"}),r.jsx("p",{className:"font-medium",children:v.source})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Assigned To"}),r.jsx("p",{className:"font-medium",children:((I=a.find(_=>_.id===v.assignedTo))==null?void 0:I.name)||"Unassigned"})]}),Object.entries(v.customFields||{}).map(([_,k])=>r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-muted-foreground capitalize",children:_.replace(/([A-Z])/g," $1").trim()}),r.jsx("p",{className:"font-medium",children:k})]},_))]}),v.notes&&r.jsxs("div",{className:"mt-4",children:[r.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Notes"}),r.jsx("p",{className:"mt-1 p-3 bg-muted/30 rounded-md",children:v.notes})]})]})]})}),r.jsx("div",{className:"space-y-6",children:A&&r.jsx(kte,{score:A})})]})}),r.jsx(Je,{value:"activity",children:r.jsx(Ote,{leadId:v.id,activities:D})}),r.jsx(Je,{value:"communication",children:r.jsx(zte,{leadId:v.id,leadData:v})}),r.jsx(Je,{value:"ai-insights",children:r.jsx(Bte,{leadId:v.id,leadData:v})}),r.jsx(Je,{value:"nurturing",children:r.jsx("div",{className:"space-y-6",children:r.jsx(kT,{})})}),r.jsx(Je,{value:"reminders",children:r.jsx(_te,{leadId:v.id,reminders:T})})]})]})}return r.jsxs("div",{className:"space-y-8",children:[b&&r.jsx(Wm,{onClose:()=>j(!1),onSuccess:N}),r.jsx("div",{className:"ri-page-header",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"ri-page-title",children:"CRM & Prospecting"}),r.jsx("p",{className:"ri-page-description",children:"Manage leads, track activities, and monitor sales pipeline with AI-powered insights"})]}),r.jsxs(J,{className:"shadow-sm",onClick:()=>j(!0),children:[r.jsx(Nt,{className:"h-4 w-4 mr-2"}),"Add Lead"]})]})}),r.jsxs("div",{className:"ri-stats-grid",children:[r.jsxs(fe,{className:"shadow-sm border-0 bg-gradient-to-br from-blue-50 to-blue-100/50",children:[r.jsxs(we,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(Ne,{className:"text-sm font-medium text-blue-900",children:"Total Leads"}),r.jsx($n,{className:"h-4 w-4 text-blue-600"})]}),r.jsxs(me,{children:[r.jsx("div",{className:"text-2xl font-bold text-blue-900",children:e.length}),r.jsxs("p",{className:"text-xs text-blue-600 flex items-center mt-1",children:[r.jsx(Ot,{className:"h-3 w-3 mr-1"}),"+12% from last month"]})]})]}),r.jsxs(fe,{className:"shadow-sm border-0 bg-gradient-to-br from-yellow-50 to-yellow-100/50",children:[r.jsxs(we,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(Ne,{className:"text-sm font-medium text-yellow-900",children:"New Leads"}),r.jsx($n,{className:"h-4 w-4 text-yellow-600"})]}),r.jsxs(me,{children:[r.jsx("div",{className:"text-2xl font-bold text-yellow-900",children:e.filter(D=>D.status===ha.NEW).length}),r.jsxs("p",{className:"text-xs text-yellow-600 flex items-center mt-1",children:[r.jsx(Ot,{className:"h-3 w-3 mr-1"}),"+8% from last week"]})]})]}),r.jsxs(fe,{className:"shadow-sm border-0 bg-gradient-to-br from-green-50 to-green-100/50",children:[r.jsxs(we,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(Ne,{className:"text-sm font-medium text-green-900",children:"Qualified"}),r.jsx(fs,{className:"h-4 w-4 text-green-600"})]}),r.jsxs(me,{children:[r.jsx("div",{className:"text-2xl font-bold text-green-900",children:e.filter(D=>D.status===ha.QUALIFIED).length}),r.jsxs("p",{className:"text-xs text-green-600 flex items-center mt-1",children:[r.jsx(Ot,{className:"h-3 w-3 mr-1"}),"+15% from last month"]})]})]}),r.jsxs(fe,{className:"shadow-sm border-0 bg-gradient-to-br from-purple-50 to-purple-100/50",children:[r.jsxs(we,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(Ne,{className:"text-sm font-medium text-purple-900",children:"AI Insights"}),r.jsx(No,{className:"h-4 w-4 text-purple-600"})]}),r.jsxs(me,{children:[r.jsx("div",{className:"text-2xl font-bold text-purple-900",children:"47"}),r.jsxs("p",{className:"text-xs text-purple-600 flex items-center mt-1",children:[r.jsx(No,{className:"h-3 w-3 mr-1"}),"Active recommendations"]})]})]})]}),r.jsxs(lr,{defaultValue:"leads",className:"space-y-6",children:[r.jsxs(or,{className:"grid w-full grid-cols-6",children:[r.jsx(Ke,{value:"leads",children:"Leads"}),r.jsx(Ke,{value:"pipeline",children:"Pipeline"}),r.jsx(Ke,{value:"quotes",children:"Quotes"}),r.jsx(Ke,{value:"nurturing",children:"Nurturing"}),r.jsx(Ke,{value:"forms",children:"Intake Forms"}),r.jsx(Ke,{value:"sources",children:"Sources"})]}),r.jsxs(Je,{value:"leads",className:"space-y-6",children:[r.jsxs("div",{className:"flex gap-4",children:[r.jsxs("div",{className:"ri-search-bar",children:[r.jsx(Jn,{className:"ri-search-icon"}),r.jsx(je,{placeholder:"Search leads...",value:d,onChange:D=>f(D.target.value),className:"ri-search-input shadow-sm"})]}),r.jsxs($e,{value:u,onValueChange:m,children:[r.jsx(Fe,{className:"w-40",children:r.jsx(Be,{placeholder:"Status"})}),r.jsxs(Me,{children:[r.jsx(K,{value:"all",children:"All Status"}),r.jsx(K,{value:ha.NEW,children:"New"}),r.jsx(K,{value:ha.CONTACTED,children:"Contacted"}),r.jsx(K,{value:ha.QUALIFIED,children:"Qualified"}),r.jsx(K,{value:ha.PROPOSAL,children:"Proposal"}),r.jsx(K,{value:ha.NEGOTIATION,children:"Negotiation"}),r.jsx(K,{value:ha.CLOSED_WON,children:"Closed Won"}),r.jsx(K,{value:ha.CLOSED_LOST,children:"Closed Lost"})]})]}),r.jsxs($e,{value:h,onValueChange:x,children:[r.jsx(Fe,{className:"w-40",children:r.jsx(Be,{placeholder:"Source"})}),r.jsxs(Me,{children:[r.jsx(K,{value:"all",children:"All Sources"}),t.map(D=>r.jsx(K,{value:D.id,children:D.name},D.id))]})]}),r.jsxs($e,{value:g,onValueChange:p,children:[r.jsx(Fe,{className:"w-40",children:r.jsx(Be,{placeholder:"Assignee"})}),r.jsxs(Me,{children:[r.jsx(K,{value:"all",children:"All Reps"}),a.map(D=>r.jsx(K,{value:D.id,children:D.name},D.id))]})]}),r.jsxs(J,{onClick:()=>j(!0),className:"shadow-sm",children:[r.jsx(Nt,{className:"h-4 w-4 mr-2"}),"Add Lead"]})]}),r.jsxs(fe,{className:"shadow-sm",children:[r.jsx(we,{children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsxs(Ne,{className:"text-xl",children:["Leads (",S.length,")"]}),r.jsx(Ue,{children:"Manage your sales prospects with AI-powered insights and automated nurturing"})]}),r.jsxs(J,{onClick:()=>j(!0),variant:"outline",className:"shadow-sm",children:[r.jsx(Nt,{className:"h-4 w-4 mr-2"}),"Add Lead"]})]})}),r.jsx(me,{children:r.jsx("div",{className:"space-y-4",children:S.map(D=>{var T;return r.jsxs("div",{className:"ri-table-row cursor-pointer",onClick:()=>y(D),children:[r.jsx("div",{className:"flex items-center space-x-4 flex-1",children:r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[r.jsxs("h3",{className:"font-semibold text-foreground",children:[D.firstName," ",D.lastName]}),r.jsx(ze,{className:He("ri-badge-status",C(D.status)),children:D.status.replace("_"," ").toUpperCase()}),D.score&&r.jsx(ze,{className:He("ri-badge-status",E(D.score)),children:D.score}),r.jsxs(ze,{variant:"outline",className:"text-xs",children:[r.jsx(No,{className:"h-3 w-3 mr-1"}),"AI Ready"]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-2 text-sm text-muted-foreground",children:[r.jsxs("span",{className:"flex items-center",children:[r.jsx(en,{className:"h-3 w-3 mr-2 text-blue-500"}),D.email]}),r.jsxs("span",{className:"flex items-center",children:[r.jsx(Mm,{className:"h-3 w-3 mr-2 text-green-500"}),D.phone]}),r.jsxs("span",{className:"flex items-center",children:[r.jsx($n,{className:"h-3 w-3 mr-2 text-purple-500"}),((T=a.find(A=>A.id===D.assignedTo))==null?void 0:T.name)||"Unassigned"]}),r.jsxs("span",{className:"flex items-center",children:[r.jsx(Mr,{className:"h-3 w-3 mr-2 text-orange-500"}),lt(D.createdAt)]})]}),D.notes&&r.jsx("p",{className:"text-sm text-muted-foreground mt-2 bg-muted/30 p-2 rounded-md",children:D.notes})]})}),r.jsxs("div",{className:"ri-action-buttons",children:[r.jsxs(J,{variant:"outline",size:"sm",className:"shadow-sm",onClick:A=>{A.stopPropagation()},children:[r.jsx(nn,{className:"h-3 w-3 mr-1"}),"Contact"]}),r.jsxs(J,{variant:"outline",size:"sm",className:"shadow-sm",onClick:A=>{A.stopPropagation(),y(D)},children:[r.jsx(No,{className:"h-3 w-3 mr-1"}),"AI Insights"]})]})]},D.id)})})})]})]}),r.jsx(Je,{value:"pipeline",children:r.jsx(Ste,{})}),r.jsx(Je,{value:"quotes",children:r.jsx(Hte,{})}),r.jsx(Je,{value:"nurturing",children:r.jsx(kT,{})}),r.jsx(Je,{value:"forms",children:r.jsxs(fe,{className:"shadow-sm",children:[r.jsxs(we,{children:[r.jsx(Ne,{children:"Lead Intake Forms"}),r.jsx(Ue,{children:"Create and manage dynamic lead capture forms"})]}),r.jsx(me,{children:r.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"Form builder coming soon..."})})]})}),r.jsx(Je,{value:"sources",children:r.jsxs(fe,{className:"shadow-sm",children:[r.jsxs(we,{children:[r.jsx(Ne,{children:"Lead Sources"}),r.jsx(Ue,{children:"Manage and track lead source performance"})]}),r.jsx(me,{children:r.jsx("div",{className:"space-y-4",children:t.map(D=>r.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-accent/50 transition-colors",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold",children:D.name}),r.jsxs("p",{className:"text-sm text-muted-foreground",children:["Type: ",D.type," • Conversion: ",D.conversionRate,"%",D.trackingCode&&` • Code: ${D.trackingCode}`]})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(ze,{className:D.isActive?"bg-green-50 text-green-700 border-green-200":"bg-gray-50 text-gray-700 border-gray-200",children:D.isActive?"Active":"Inactive"}),r.jsx(J,{variant:"outline",size:"sm",children:r.jsx(sx,{className:"h-3 w-3"})})]})]},D.id))})})]})})]})]})}function Gte(){return r.jsxs(Ka,{children:[r.jsx(Vt,{path:"/",element:r.jsx(OT,{})}),r.jsx(Vt,{path:"/*",element:r.jsx(OT,{})})]})}function Kte({vehicles:e,onEdit:t,onDelete:n,onView:a,onStatusChange:s}){const{toast:i}=Ct(),[o,l]=w.useState(""),[c,d]=w.useState("all"),[f,u]=w.useState("all"),[m,h]=w.useState("all"),[x,g]=w.useState([]),[p,v]=w.useState("updatedAt"),[y,b]=w.useState("desc"),j=Array.from(new Set(e.map(_=>_.location))),C=_=>{switch(_){case Yt.AVAILABLE:return"bg-green-50 text-green-700 border-green-200";case Yt.RESERVED:return"bg-yellow-50 text-yellow-700 border-yellow-200";case Yt.SOLD:return"bg-blue-50 text-blue-700 border-blue-200";case Yt.SERVICE:return"bg-orange-50 text-orange-700 border-orange-200";case Yt.DELIVERED:return"bg-purple-50 text-purple-700 border-purple-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},E=_=>_.replace("_"," ").toUpperCase(),S=e.filter(_=>{const k=`${_.make} ${_.model}`.toLowerCase().includes(o.toLowerCase())||_.vin.toLowerCase().includes(o.toLowerCase())||_.year.toString().includes(o),L=c==="all"||_.status===c,$=f==="all"||_.type===f,M=m==="all"||_.location===m;return k&&L&&$&&M}).sort((_,k)=>{let L=_[p],$=k[p];return L instanceof Date&&$ instanceof Date&&(L=L.getTime(),$=$.getTime()),typeof L=="string"&&typeof $=="string"&&(L=L.toLowerCase(),$=$.toLowerCase()),L<$?y==="asc"?-1:1:L>$?y==="asc"?1:-1:0}),N=_=>{p===_?b(y==="asc"?"desc":"asc"):(v(_),b("asc"))},I=_=>{g(_?S.map(k=>k.id):[])},D=_=>{x.includes(_)?g(x.filter(k=>k!==_)):g([...x,_])},T=()=>{const k=(x.length>0?e.filter(U=>x.includes(U.id)):S).map(U=>({id:U.id,vin:U.vin,make:U.make,model:U.model,year:U.year,type:U.type,status:U.status,price:U.price,cost:U.cost,location:U.location,features:U.features.join(", "),createdAt:U.createdAt.toISOString(),updatedAt:U.updatedAt.toISOString()})),L=rm.unparse(k),$=new Blob([L],{type:"text/csv;charset=utf-8;"}),M=URL.createObjectURL($),B=document.createElement("a");B.href=M,B.setAttribute("download",`inventory_export_${new Date().toISOString().split("T")[0]}.csv`),document.body.appendChild(B),B.click(),document.body.removeChild(B),i({title:"Export Successful",description:`Exported ${k.length} vehicles to CSV`})},A=_=>{if(x.length===0){i({title:"No Vehicles Selected",description:"Please select vehicles to update",variant:"destructive"});return}x.forEach(k=>{s(k,_)}),i({title:"Status Updated",description:`Updated ${x.length} vehicles to ${_}`})};return r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[r.jsxs("div",{className:"ri-search-bar flex-1",children:[r.jsx(Jn,{className:"ri-search-icon"}),r.jsx(je,{placeholder:"Search by make, model, VIN...",value:o,onChange:_=>l(_.target.value),className:"ri-search-input shadow-sm"})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs($e,{value:c,onValueChange:d,children:[r.jsx(Fe,{className:"w-[130px]",children:r.jsx(Be,{placeholder:"Status"})}),r.jsxs(Me,{children:[r.jsx(K,{value:"all",children:"All Status"}),r.jsx(K,{value:Yt.AVAILABLE,children:"Available"}),r.jsx(K,{value:Yt.RESERVED,children:"Reserved"}),r.jsx(K,{value:Yt.SOLD,children:"Sold"}),r.jsx(K,{value:Yt.SERVICE,children:"Service"}),r.jsx(K,{value:Yt.DELIVERED,children:"Delivered"})]})]}),r.jsxs($e,{value:f,onValueChange:u,children:[r.jsx(Fe,{className:"w-[130px]",children:r.jsx(Be,{placeholder:"Type"})}),r.jsxs(Me,{children:[r.jsx(K,{value:"all",children:"All Types"}),r.jsx(K,{value:vt.RV,children:"RV"}),r.jsx(K,{value:vt.MOTORHOME,children:"Motorhome"}),r.jsx(K,{value:vt.TRAVEL_TRAILER,children:"Travel Trailer"}),r.jsx(K,{value:vt.FIFTH_WHEEL,children:"Fifth Wheel"}),r.jsx(K,{value:vt.TOY_HAULER,children:"Toy Hauler"})]})]}),r.jsxs($e,{value:m,onValueChange:h,children:[r.jsx(Fe,{className:"w-[130px]",children:r.jsx(Be,{placeholder:"Location"})}),r.jsxs(Me,{children:[r.jsx(K,{value:"all",children:"All Locations"}),j.map(_=>r.jsx(K,{value:_,children:_},_))]})]})]})]}),x.length>0&&r.jsxs("div",{className:"flex items-center justify-between bg-muted/30 p-2 rounded-lg",children:[r.jsxs("div",{className:"text-sm font-medium",children:[x.length," vehicles selected"]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs($e,{onValueChange:_=>A(_),children:[r.jsx(Fe,{className:"w-[150px]",children:r.jsx(Be,{placeholder:"Change Status"})}),r.jsxs(Me,{children:[r.jsx(K,{value:Yt.AVAILABLE,children:"Available"}),r.jsx(K,{value:Yt.RESERVED,children:"Reserved"}),r.jsx(K,{value:Yt.SOLD,children:"Sold"}),r.jsx(K,{value:Yt.SERVICE,children:"Service"}),r.jsx(K,{value:Yt.DELIVERED,children:"Delivered"}),r.jsx(K,{value:vt.SINGLE_WIDE,children:"Single Wide MH"}),r.jsx(K,{value:vt.DOUBLE_WIDE,children:"Double Wide MH"}),r.jsx(K,{value:vt.TRIPLE_WIDE,children:"Triple Wide MH"}),r.jsx(K,{value:vt.PARK_MODEL,children:"Park Model"}),r.jsx(K,{value:vt.MODULAR_HOME,children:"Modular Home"})]})]}),r.jsxs(J,{variant:"outline",size:"sm",onClick:T,children:[r.jsx(ms,{className:"h-4 w-4 mr-2"}),"Export Selected"]}),r.jsxs(J,{variant:"outline",size:"sm",onClick:()=>g([]),children:[r.jsx($t,{className:"h-4 w-4 mr-2"}),"Clear Selection"]})]})]}),r.jsxs(fe,{className:"shadow-sm",children:[r.jsx(we,{className:"pb-3",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsxs(Ne,{className:"text-xl",children:["Inventory (",S.length,")"]}),r.jsx(Ue,{children:"Manage your RV and motorhome inventory"})]}),r.jsx("div",{className:"flex gap-2",children:r.jsxs(J,{variant:"outline",size:"sm",onClick:T,children:[r.jsx(ms,{className:"h-4 w-4 mr-2"}),"Export CSV"]})})]})}),r.jsx(me,{children:r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full border-collapse",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"border-b",children:[r.jsx("th",{className:"p-2 text-left",children:r.jsx(St,{checked:x.length===S.length&&S.length>0,onCheckedChange:I})}),r.jsx("th",{className:"p-2 text-left cursor-pointer hover:bg-muted/30",onClick:()=>N("make"),children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("span",{children:"Make/Model"}),p==="make"&&r.jsx("span",{className:"ml-1",children:y==="asc"?"↑":"↓"})]})}),r.jsx("th",{className:"p-2 text-left cursor-pointer hover:bg-muted/30",onClick:()=>N("year"),children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("span",{children:"Year"}),p==="year"&&r.jsx("span",{className:"ml-1",children:y==="asc"?"↑":"↓"})]})}),r.jsx("th",{className:"p-2 text-left cursor-pointer hover:bg-muted/30",onClick:()=>N("vin"),children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("span",{children:"VIN"}),p==="vin"&&r.jsx("span",{className:"ml-1",children:y==="asc"?"↑":"↓"})]})}),r.jsx("th",{className:"p-2 text-left cursor-pointer hover:bg-muted/30",onClick:()=>N("type"),children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("span",{children:"Type"}),p==="type"&&r.jsx("span",{className:"ml-1",children:y==="asc"?"↑":"↓"})]})}),r.jsx("th",{className:"p-2 text-left cursor-pointer hover:bg-muted/30",onClick:()=>N("status"),children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("span",{children:"Status"}),p==="status"&&r.jsx("span",{className:"ml-1",children:y==="asc"?"↑":"↓"})]})}),r.jsx("th",{className:"p-2 text-left cursor-pointer hover:bg-muted/30",onClick:()=>N("location"),children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("span",{children:"Location"}),p==="location"&&r.jsx("span",{className:"ml-1",children:y==="asc"?"↑":"↓"})]})}),r.jsx("th",{className:"p-2 text-left cursor-pointer hover:bg-muted/30",onClick:()=>N("price"),children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("span",{children:"Price"}),p==="price"&&r.jsx("span",{className:"ml-1",children:y==="asc"?"↑":"↓"})]})}),r.jsx("th",{className:"p-2 text-left",children:"Media"}),r.jsx("th",{className:"p-2 text-left",children:"Actions"})]})}),r.jsxs("tbody",{children:[S.map(_=>r.jsxs("tr",{className:"border-b hover:bg-muted/10",children:[r.jsx("td",{className:"p-2",children:r.jsx(St,{checked:x.includes(_.id),onCheckedChange:()=>D(_.id)})}),r.jsx("td",{className:"p-2",children:r.jsxs("div",{className:"font-medium",children:[_.make," ",_.model]})}),r.jsx("td",{className:"p-2",children:_.year}),r.jsx("td",{className:"p-2",children:r.jsx("span",{className:"font-mono text-xs",children:_.vin})}),r.jsx("td",{className:"p-2",children:r.jsx("span",{className:"text-sm",children:E(_.type)})}),r.jsx("td",{className:"p-2",children:r.jsx(ze,{className:He("ri-badge-status",C(_.status)),children:_.status.toUpperCase()})}),r.jsx("td",{className:"p-2",children:_.location}),r.jsx("td",{className:"p-2 font-medium text-primary",children:De(_.price)}),r.jsx("td",{className:"p-2",children:r.jsxs("div",{className:"flex items-center space-x-1",children:[r.jsxs(ze,{variant:"outline",className:"text-xs",children:[r.jsx(Zf,{className:"h-3 w-3 mr-1"}),_.images.length]}),_.customFields.videos&&r.jsxs(ze,{variant:"outline",className:"text-xs",children:[r.jsx(hy,{className:"h-3 w-3 mr-1"}),_.customFields.videos.length||0]})]})}),r.jsx("td",{className:"p-2",children:r.jsxs("div",{className:"flex items-center space-x-1",children:[r.jsx(J,{variant:"ghost",size:"sm",onClick:()=>a(_),children:r.jsx(Sl,{className:"h-4 w-4"})}),r.jsx(J,{variant:"ghost",size:"sm",onClick:()=>t(_),children:r.jsx(Br,{className:"h-4 w-4"})}),r.jsx(J,{variant:"ghost",size:"sm",onClick:()=>n(_.id),children:r.jsx(wn,{className:"h-4 w-4"})})]})})]},_.id)),S.length===0&&r.jsx("tr",{children:r.jsxs("td",{colSpan:10,className:"p-8 text-center text-muted-foreground",children:[r.jsx(Ra,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),r.jsx("p",{children:"No vehicles found"}),r.jsx("p",{className:"text-sm",children:"Try adjusting your search or filters"})]})})]})]})})})]})]})}var I$={exports:{}},Yte="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",Xte=Yte,Qte=Xte;function D$(){}function k$(){}k$.resetWarningCache=D$;var Jte=function(){function e(a,s,i,o,l,c){if(c!==Qte){var d=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw d.name="Invariant Violation",d}}e.isRequired=e;function t(){return e}var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:k$,resetWarningCache:D$};return n.PropTypes=n,n};I$.exports=Jte();var Zte=I$.exports;const Et=Er(Zte),ere=new Map([["1km","application/vnd.1000minds.decision-model+xml"],["3dml","text/vnd.in3d.3dml"],["3ds","image/x-3ds"],["3g2","video/3gpp2"],["3gp","video/3gp"],["3gpp","video/3gpp"],["3mf","model/3mf"],["7z","application/x-7z-compressed"],["7zip","application/x-7z-compressed"],["123","application/vnd.lotus-1-2-3"],["aab","application/x-authorware-bin"],["aac","audio/x-acc"],["aam","application/x-authorware-map"],["aas","application/x-authorware-seg"],["abw","application/x-abiword"],["ac","application/vnd.nokia.n-gage.ac+xml"],["ac3","audio/ac3"],["acc","application/vnd.americandynamics.acc"],["ace","application/x-ace-compressed"],["acu","application/vnd.acucobol"],["acutc","application/vnd.acucorp"],["adp","audio/adpcm"],["aep","application/vnd.audiograph"],["afm","application/x-font-type1"],["afp","application/vnd.ibm.modcap"],["ahead","application/vnd.ahead.space"],["ai","application/pdf"],["aif","audio/x-aiff"],["aifc","audio/x-aiff"],["aiff","audio/x-aiff"],["air","application/vnd.adobe.air-application-installer-package+zip"],["ait","application/vnd.dvb.ait"],["ami","application/vnd.amiga.ami"],["amr","audio/amr"],["apk","application/vnd.android.package-archive"],["apng","image/apng"],["appcache","text/cache-manifest"],["application","application/x-ms-application"],["apr","application/vnd.lotus-approach"],["arc","application/x-freearc"],["arj","application/x-arj"],["asc","application/pgp-signature"],["asf","video/x-ms-asf"],["asm","text/x-asm"],["aso","application/vnd.accpac.simply.aso"],["asx","video/x-ms-asf"],["atc","application/vnd.acucorp"],["atom","application/atom+xml"],["atomcat","application/atomcat+xml"],["atomdeleted","application/atomdeleted+xml"],["atomsvc","application/atomsvc+xml"],["atx","application/vnd.antix.game-component"],["au","audio/x-au"],["avi","video/x-msvideo"],["avif","image/avif"],["aw","application/applixware"],["azf","application/vnd.airzip.filesecure.azf"],["azs","application/vnd.airzip.filesecure.azs"],["azv","image/vnd.airzip.accelerator.azv"],["azw","application/vnd.amazon.ebook"],["b16","image/vnd.pco.b16"],["bat","application/x-msdownload"],["bcpio","application/x-bcpio"],["bdf","application/x-font-bdf"],["bdm","application/vnd.syncml.dm+wbxml"],["bdoc","application/x-bdoc"],["bed","application/vnd.realvnc.bed"],["bh2","application/vnd.fujitsu.oasysprs"],["bin","application/octet-stream"],["blb","application/x-blorb"],["blorb","application/x-blorb"],["bmi","application/vnd.bmi"],["bmml","application/vnd.balsamiq.bmml+xml"],["bmp","image/bmp"],["book","application/vnd.framemaker"],["box","application/vnd.previewsystems.box"],["boz","application/x-bzip2"],["bpk","application/octet-stream"],["bpmn","application/octet-stream"],["bsp","model/vnd.valve.source.compiled-map"],["btif","image/prs.btif"],["buffer","application/octet-stream"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["c","text/x-c"],["c4d","application/vnd.clonk.c4group"],["c4f","application/vnd.clonk.c4group"],["c4g","application/vnd.clonk.c4group"],["c4p","application/vnd.clonk.c4group"],["c4u","application/vnd.clonk.c4group"],["c11amc","application/vnd.cluetrust.cartomobile-config"],["c11amz","application/vnd.cluetrust.cartomobile-config-pkg"],["cab","application/vnd.ms-cab-compressed"],["caf","audio/x-caf"],["cap","application/vnd.tcpdump.pcap"],["car","application/vnd.curl.car"],["cat","application/vnd.ms-pki.seccat"],["cb7","application/x-cbr"],["cba","application/x-cbr"],["cbr","application/x-cbr"],["cbt","application/x-cbr"],["cbz","application/x-cbr"],["cc","text/x-c"],["cco","application/x-cocoa"],["cct","application/x-director"],["ccxml","application/ccxml+xml"],["cdbcmsg","application/vnd.contact.cmsg"],["cda","application/x-cdf"],["cdf","application/x-netcdf"],["cdfx","application/cdfx+xml"],["cdkey","application/vnd.mediastation.cdkey"],["cdmia","application/cdmi-capability"],["cdmic","application/cdmi-container"],["cdmid","application/cdmi-domain"],["cdmio","application/cdmi-object"],["cdmiq","application/cdmi-queue"],["cdr","application/cdr"],["cdx","chemical/x-cdx"],["cdxml","application/vnd.chemdraw+xml"],["cdy","application/vnd.cinderella"],["cer","application/pkix-cert"],["cfs","application/x-cfs-compressed"],["cgm","image/cgm"],["chat","application/x-chat"],["chm","application/vnd.ms-htmlhelp"],["chrt","application/vnd.kde.kchart"],["cif","chemical/x-cif"],["cii","application/vnd.anser-web-certificate-issue-initiation"],["cil","application/vnd.ms-artgalry"],["cjs","application/node"],["cla","application/vnd.claymore"],["class","application/octet-stream"],["clkk","application/vnd.crick.clicker.keyboard"],["clkp","application/vnd.crick.clicker.palette"],["clkt","application/vnd.crick.clicker.template"],["clkw","application/vnd.crick.clicker.wordbank"],["clkx","application/vnd.crick.clicker"],["clp","application/x-msclip"],["cmc","application/vnd.cosmocaller"],["cmdf","chemical/x-cmdf"],["cml","chemical/x-cml"],["cmp","application/vnd.yellowriver-custom-menu"],["cmx","image/x-cmx"],["cod","application/vnd.rim.cod"],["coffee","text/coffeescript"],["com","application/x-msdownload"],["conf","text/plain"],["cpio","application/x-cpio"],["cpp","text/x-c"],["cpt","application/mac-compactpro"],["crd","application/x-mscardfile"],["crl","application/pkix-crl"],["crt","application/x-x509-ca-cert"],["crx","application/x-chrome-extension"],["cryptonote","application/vnd.rig.cryptonote"],["csh","application/x-csh"],["csl","application/vnd.citationstyles.style+xml"],["csml","chemical/x-csml"],["csp","application/vnd.commonspace"],["csr","application/octet-stream"],["css","text/css"],["cst","application/x-director"],["csv","text/csv"],["cu","application/cu-seeme"],["curl","text/vnd.curl"],["cww","application/prs.cww"],["cxt","application/x-director"],["cxx","text/x-c"],["dae","model/vnd.collada+xml"],["daf","application/vnd.mobius.daf"],["dart","application/vnd.dart"],["dataless","application/vnd.fdsn.seed"],["davmount","application/davmount+xml"],["dbf","application/vnd.dbf"],["dbk","application/docbook+xml"],["dcr","application/x-director"],["dcurl","text/vnd.curl.dcurl"],["dd2","application/vnd.oma.dd2+xml"],["ddd","application/vnd.fujixerox.ddd"],["ddf","application/vnd.syncml.dmddf+xml"],["dds","image/vnd.ms-dds"],["deb","application/x-debian-package"],["def","text/plain"],["deploy","application/octet-stream"],["der","application/x-x509-ca-cert"],["dfac","application/vnd.dreamfactory"],["dgc","application/x-dgc-compressed"],["dic","text/x-c"],["dir","application/x-director"],["dis","application/vnd.mobius.dis"],["disposition-notification","message/disposition-notification"],["dist","application/octet-stream"],["distz","application/octet-stream"],["djv","image/vnd.djvu"],["djvu","image/vnd.djvu"],["dll","application/octet-stream"],["dmg","application/x-apple-diskimage"],["dmn","application/octet-stream"],["dmp","application/vnd.tcpdump.pcap"],["dms","application/octet-stream"],["dna","application/vnd.dna"],["doc","application/msword"],["docm","application/vnd.ms-word.template.macroEnabled.12"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["dot","application/msword"],["dotm","application/vnd.ms-word.template.macroEnabled.12"],["dotx","application/vnd.openxmlformats-officedocument.wordprocessingml.template"],["dp","application/vnd.osgi.dp"],["dpg","application/vnd.dpgraph"],["dra","audio/vnd.dra"],["drle","image/dicom-rle"],["dsc","text/prs.lines.tag"],["dssc","application/dssc+der"],["dtb","application/x-dtbook+xml"],["dtd","application/xml-dtd"],["dts","audio/vnd.dts"],["dtshd","audio/vnd.dts.hd"],["dump","application/octet-stream"],["dvb","video/vnd.dvb.file"],["dvi","application/x-dvi"],["dwd","application/atsc-dwd+xml"],["dwf","model/vnd.dwf"],["dwg","image/vnd.dwg"],["dxf","image/vnd.dxf"],["dxp","application/vnd.spotfire.dxp"],["dxr","application/x-director"],["ear","application/java-archive"],["ecelp4800","audio/vnd.nuera.ecelp4800"],["ecelp7470","audio/vnd.nuera.ecelp7470"],["ecelp9600","audio/vnd.nuera.ecelp9600"],["ecma","application/ecmascript"],["edm","application/vnd.novadigm.edm"],["edx","application/vnd.novadigm.edx"],["efif","application/vnd.picsel"],["ei6","application/vnd.pg.osasli"],["elc","application/octet-stream"],["emf","image/emf"],["eml","message/rfc822"],["emma","application/emma+xml"],["emotionml","application/emotionml+xml"],["emz","application/x-msmetafile"],["eol","audio/vnd.digital-winds"],["eot","application/vnd.ms-fontobject"],["eps","application/postscript"],["epub","application/epub+zip"],["es","application/ecmascript"],["es3","application/vnd.eszigno3+xml"],["esa","application/vnd.osgi.subsystem"],["esf","application/vnd.epson.esf"],["et3","application/vnd.eszigno3+xml"],["etx","text/x-setext"],["eva","application/x-eva"],["evy","application/x-envoy"],["exe","application/octet-stream"],["exi","application/exi"],["exp","application/express"],["exr","image/aces"],["ext","application/vnd.novadigm.ext"],["ez","application/andrew-inset"],["ez2","application/vnd.ezpix-album"],["ez3","application/vnd.ezpix-package"],["f","text/x-fortran"],["f4v","video/mp4"],["f77","text/x-fortran"],["f90","text/x-fortran"],["fbs","image/vnd.fastbidsheet"],["fcdt","application/vnd.adobe.formscentral.fcdt"],["fcs","application/vnd.isac.fcs"],["fdf","application/vnd.fdf"],["fdt","application/fdt+xml"],["fe_launch","application/vnd.denovo.fcselayout-link"],["fg5","application/vnd.fujitsu.oasysgp"],["fgd","application/x-director"],["fh","image/x-freehand"],["fh4","image/x-freehand"],["fh5","image/x-freehand"],["fh7","image/x-freehand"],["fhc","image/x-freehand"],["fig","application/x-xfig"],["fits","image/fits"],["flac","audio/x-flac"],["fli","video/x-fli"],["flo","application/vnd.micrografx.flo"],["flv","video/x-flv"],["flw","application/vnd.kde.kivio"],["flx","text/vnd.fmi.flexstor"],["fly","text/vnd.fly"],["fm","application/vnd.framemaker"],["fnc","application/vnd.frogans.fnc"],["fo","application/vnd.software602.filler.form+xml"],["for","text/x-fortran"],["fpx","image/vnd.fpx"],["frame","application/vnd.framemaker"],["fsc","application/vnd.fsc.weblaunch"],["fst","image/vnd.fst"],["ftc","application/vnd.fluxtime.clip"],["fti","application/vnd.anser-web-funds-transfer-initiation"],["fvt","video/vnd.fvt"],["fxp","application/vnd.adobe.fxp"],["fxpl","application/vnd.adobe.fxp"],["fzs","application/vnd.fuzzysheet"],["g2w","application/vnd.geoplan"],["g3","image/g3fax"],["g3w","application/vnd.geospace"],["gac","application/vnd.groove-account"],["gam","application/x-tads"],["gbr","application/rpki-ghostbusters"],["gca","application/x-gca-compressed"],["gdl","model/vnd.gdl"],["gdoc","application/vnd.google-apps.document"],["geo","application/vnd.dynageo"],["geojson","application/geo+json"],["gex","application/vnd.geometry-explorer"],["ggb","application/vnd.geogebra.file"],["ggt","application/vnd.geogebra.tool"],["ghf","application/vnd.groove-help"],["gif","image/gif"],["gim","application/vnd.groove-identity-message"],["glb","model/gltf-binary"],["gltf","model/gltf+json"],["gml","application/gml+xml"],["gmx","application/vnd.gmx"],["gnumeric","application/x-gnumeric"],["gpg","application/gpg-keys"],["gph","application/vnd.flographit"],["gpx","application/gpx+xml"],["gqf","application/vnd.grafeq"],["gqs","application/vnd.grafeq"],["gram","application/srgs"],["gramps","application/x-gramps-xml"],["gre","application/vnd.geometry-explorer"],["grv","application/vnd.groove-injector"],["grxml","application/srgs+xml"],["gsf","application/x-font-ghostscript"],["gsheet","application/vnd.google-apps.spreadsheet"],["gslides","application/vnd.google-apps.presentation"],["gtar","application/x-gtar"],["gtm","application/vnd.groove-tool-message"],["gtw","model/vnd.gtw"],["gv","text/vnd.graphviz"],["gxf","application/gxf"],["gxt","application/vnd.geonext"],["gz","application/gzip"],["gzip","application/gzip"],["h","text/x-c"],["h261","video/h261"],["h263","video/h263"],["h264","video/h264"],["hal","application/vnd.hal+xml"],["hbci","application/vnd.hbci"],["hbs","text/x-handlebars-template"],["hdd","application/x-virtualbox-hdd"],["hdf","application/x-hdf"],["heic","image/heic"],["heics","image/heic-sequence"],["heif","image/heif"],["heifs","image/heif-sequence"],["hej2","image/hej2k"],["held","application/atsc-held+xml"],["hh","text/x-c"],["hjson","application/hjson"],["hlp","application/winhlp"],["hpgl","application/vnd.hp-hpgl"],["hpid","application/vnd.hp-hpid"],["hps","application/vnd.hp-hps"],["hqx","application/mac-binhex40"],["hsj2","image/hsj2"],["htc","text/x-component"],["htke","application/vnd.kenameaapp"],["htm","text/html"],["html","text/html"],["hvd","application/vnd.yamaha.hv-dic"],["hvp","application/vnd.yamaha.hv-voice"],["hvs","application/vnd.yamaha.hv-script"],["i2g","application/vnd.intergeo"],["icc","application/vnd.iccprofile"],["ice","x-conference/x-cooltalk"],["icm","application/vnd.iccprofile"],["ico","image/x-icon"],["ics","text/calendar"],["ief","image/ief"],["ifb","text/calendar"],["ifm","application/vnd.shana.informed.formdata"],["iges","model/iges"],["igl","application/vnd.igloader"],["igm","application/vnd.insors.igm"],["igs","model/iges"],["igx","application/vnd.micrografx.igx"],["iif","application/vnd.shana.informed.interchange"],["img","application/octet-stream"],["imp","application/vnd.accpac.simply.imp"],["ims","application/vnd.ms-ims"],["in","text/plain"],["ini","text/plain"],["ink","application/inkml+xml"],["inkml","application/inkml+xml"],["install","application/x-install-instructions"],["iota","application/vnd.astraea-software.iota"],["ipfix","application/ipfix"],["ipk","application/vnd.shana.informed.package"],["irm","application/vnd.ibm.rights-management"],["irp","application/vnd.irepository.package+xml"],["iso","application/x-iso9660-image"],["itp","application/vnd.shana.informed.formtemplate"],["its","application/its+xml"],["ivp","application/vnd.immervision-ivp"],["ivu","application/vnd.immervision-ivu"],["jad","text/vnd.sun.j2me.app-descriptor"],["jade","text/jade"],["jam","application/vnd.jam"],["jar","application/java-archive"],["jardiff","application/x-java-archive-diff"],["java","text/x-java-source"],["jhc","image/jphc"],["jisp","application/vnd.jisp"],["jls","image/jls"],["jlt","application/vnd.hp-jlyt"],["jng","image/x-jng"],["jnlp","application/x-java-jnlp-file"],["joda","application/vnd.joost.joda-archive"],["jp2","image/jp2"],["jpe","image/jpeg"],["jpeg","image/jpeg"],["jpf","image/jpx"],["jpg","image/jpeg"],["jpg2","image/jp2"],["jpgm","video/jpm"],["jpgv","video/jpeg"],["jph","image/jph"],["jpm","video/jpm"],["jpx","image/jpx"],["js","application/javascript"],["json","application/json"],["json5","application/json5"],["jsonld","application/ld+json"],["jsonl","application/jsonl"],["jsonml","application/jsonml+json"],["jsx","text/jsx"],["jxr","image/jxr"],["jxra","image/jxra"],["jxrs","image/jxrs"],["jxs","image/jxs"],["jxsc","image/jxsc"],["jxsi","image/jxsi"],["jxss","image/jxss"],["kar","audio/midi"],["karbon","application/vnd.kde.karbon"],["kdb","application/octet-stream"],["kdbx","application/x-keepass2"],["key","application/x-iwork-keynote-sffkey"],["kfo","application/vnd.kde.kformula"],["kia","application/vnd.kidspiration"],["kml","application/vnd.google-earth.kml+xml"],["kmz","application/vnd.google-earth.kmz"],["kne","application/vnd.kinar"],["knp","application/vnd.kinar"],["kon","application/vnd.kde.kontour"],["kpr","application/vnd.kde.kpresenter"],["kpt","application/vnd.kde.kpresenter"],["kpxx","application/vnd.ds-keypoint"],["ksp","application/vnd.kde.kspread"],["ktr","application/vnd.kahootz"],["ktx","image/ktx"],["ktx2","image/ktx2"],["ktz","application/vnd.kahootz"],["kwd","application/vnd.kde.kword"],["kwt","application/vnd.kde.kword"],["lasxml","application/vnd.las.las+xml"],["latex","application/x-latex"],["lbd","application/vnd.llamagraphics.life-balance.desktop"],["lbe","application/vnd.llamagraphics.life-balance.exchange+xml"],["les","application/vnd.hhe.lesson-player"],["less","text/less"],["lgr","application/lgr+xml"],["lha","application/octet-stream"],["link66","application/vnd.route66.link66+xml"],["list","text/plain"],["list3820","application/vnd.ibm.modcap"],["listafp","application/vnd.ibm.modcap"],["litcoffee","text/coffeescript"],["lnk","application/x-ms-shortcut"],["log","text/plain"],["lostxml","application/lost+xml"],["lrf","application/octet-stream"],["lrm","application/vnd.ms-lrm"],["ltf","application/vnd.frogans.ltf"],["lua","text/x-lua"],["luac","application/x-lua-bytecode"],["lvp","audio/vnd.lucent.voice"],["lwp","application/vnd.lotus-wordpro"],["lzh","application/octet-stream"],["m1v","video/mpeg"],["m2a","audio/mpeg"],["m2v","video/mpeg"],["m3a","audio/mpeg"],["m3u","text/plain"],["m3u8","application/vnd.apple.mpegurl"],["m4a","audio/x-m4a"],["m4p","application/mp4"],["m4s","video/iso.segment"],["m4u","application/vnd.mpegurl"],["m4v","video/x-m4v"],["m13","application/x-msmediaview"],["m14","application/x-msmediaview"],["m21","application/mp21"],["ma","application/mathematica"],["mads","application/mads+xml"],["maei","application/mmt-aei+xml"],["mag","application/vnd.ecowin.chart"],["maker","application/vnd.framemaker"],["man","text/troff"],["manifest","text/cache-manifest"],["map","application/json"],["mar","application/octet-stream"],["markdown","text/markdown"],["mathml","application/mathml+xml"],["mb","application/mathematica"],["mbk","application/vnd.mobius.mbk"],["mbox","application/mbox"],["mc1","application/vnd.medcalcdata"],["mcd","application/vnd.mcd"],["mcurl","text/vnd.curl.mcurl"],["md","text/markdown"],["mdb","application/x-msaccess"],["mdi","image/vnd.ms-modi"],["mdx","text/mdx"],["me","text/troff"],["mesh","model/mesh"],["meta4","application/metalink4+xml"],["metalink","application/metalink+xml"],["mets","application/mets+xml"],["mfm","application/vnd.mfmp"],["mft","application/rpki-manifest"],["mgp","application/vnd.osgeo.mapguide.package"],["mgz","application/vnd.proteus.magazine"],["mid","audio/midi"],["midi","audio/midi"],["mie","application/x-mie"],["mif","application/vnd.mif"],["mime","message/rfc822"],["mj2","video/mj2"],["mjp2","video/mj2"],["mjs","application/javascript"],["mk3d","video/x-matroska"],["mka","audio/x-matroska"],["mkd","text/x-markdown"],["mks","video/x-matroska"],["mkv","video/x-matroska"],["mlp","application/vnd.dolby.mlp"],["mmd","application/vnd.chipnuts.karaoke-mmd"],["mmf","application/vnd.smaf"],["mml","text/mathml"],["mmr","image/vnd.fujixerox.edmics-mmr"],["mng","video/x-mng"],["mny","application/x-msmoney"],["mobi","application/x-mobipocket-ebook"],["mods","application/mods+xml"],["mov","video/quicktime"],["movie","video/x-sgi-movie"],["mp2","audio/mpeg"],["mp2a","audio/mpeg"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mp4a","audio/mp4"],["mp4s","application/mp4"],["mp4v","video/mp4"],["mp21","application/mp21"],["mpc","application/vnd.mophun.certificate"],["mpd","application/dash+xml"],["mpe","video/mpeg"],["mpeg","video/mpeg"],["mpg","video/mpeg"],["mpg4","video/mp4"],["mpga","audio/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["mpm","application/vnd.blueice.multipass"],["mpn","application/vnd.mophun.application"],["mpp","application/vnd.ms-project"],["mpt","application/vnd.ms-project"],["mpy","application/vnd.ibm.minipay"],["mqy","application/vnd.mobius.mqy"],["mrc","application/marc"],["mrcx","application/marcxml+xml"],["ms","text/troff"],["mscml","application/mediaservercontrol+xml"],["mseed","application/vnd.fdsn.mseed"],["mseq","application/vnd.mseq"],["msf","application/vnd.epson.msf"],["msg","application/vnd.ms-outlook"],["msh","model/mesh"],["msi","application/x-msdownload"],["msl","application/vnd.mobius.msl"],["msm","application/octet-stream"],["msp","application/octet-stream"],["msty","application/vnd.muvee.style"],["mtl","model/mtl"],["mts","model/vnd.mts"],["mus","application/vnd.musician"],["musd","application/mmt-usd+xml"],["musicxml","application/vnd.recordare.musicxml+xml"],["mvb","application/x-msmediaview"],["mvt","application/vnd.mapbox-vector-tile"],["mwf","application/vnd.mfer"],["mxf","application/mxf"],["mxl","application/vnd.recordare.musicxml"],["mxmf","audio/mobile-xmf"],["mxml","application/xv+xml"],["mxs","application/vnd.triscape.mxs"],["mxu","video/vnd.mpegurl"],["n-gage","application/vnd.nokia.n-gage.symbian.install"],["n3","text/n3"],["nb","application/mathematica"],["nbp","application/vnd.wolfram.player"],["nc","application/x-netcdf"],["ncx","application/x-dtbncx+xml"],["nfo","text/x-nfo"],["ngdat","application/vnd.nokia.n-gage.data"],["nitf","application/vnd.nitf"],["nlu","application/vnd.neurolanguage.nlu"],["nml","application/vnd.enliven"],["nnd","application/vnd.noblenet-directory"],["nns","application/vnd.noblenet-sealer"],["nnw","application/vnd.noblenet-web"],["npx","image/vnd.net-fpx"],["nq","application/n-quads"],["nsc","application/x-conference"],["nsf","application/vnd.lotus-notes"],["nt","application/n-triples"],["ntf","application/vnd.nitf"],["numbers","application/x-iwork-numbers-sffnumbers"],["nzb","application/x-nzb"],["oa2","application/vnd.fujitsu.oasys2"],["oa3","application/vnd.fujitsu.oasys3"],["oas","application/vnd.fujitsu.oasys"],["obd","application/x-msbinder"],["obgx","application/vnd.openblox.game+xml"],["obj","model/obj"],["oda","application/oda"],["odb","application/vnd.oasis.opendocument.database"],["odc","application/vnd.oasis.opendocument.chart"],["odf","application/vnd.oasis.opendocument.formula"],["odft","application/vnd.oasis.opendocument.formula-template"],["odg","application/vnd.oasis.opendocument.graphics"],["odi","application/vnd.oasis.opendocument.image"],["odm","application/vnd.oasis.opendocument.text-master"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogex","model/vnd.opengex"],["ogg","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["omdoc","application/omdoc+xml"],["onepkg","application/onenote"],["onetmp","application/onenote"],["onetoc","application/onenote"],["onetoc2","application/onenote"],["opf","application/oebps-package+xml"],["opml","text/x-opml"],["oprc","application/vnd.palm"],["opus","audio/ogg"],["org","text/x-org"],["osf","application/vnd.yamaha.openscoreformat"],["osfpvg","application/vnd.yamaha.openscoreformat.osfpvg+xml"],["osm","application/vnd.openstreetmap.data+xml"],["otc","application/vnd.oasis.opendocument.chart-template"],["otf","font/otf"],["otg","application/vnd.oasis.opendocument.graphics-template"],["oth","application/vnd.oasis.opendocument.text-web"],["oti","application/vnd.oasis.opendocument.image-template"],["otp","application/vnd.oasis.opendocument.presentation-template"],["ots","application/vnd.oasis.opendocument.spreadsheet-template"],["ott","application/vnd.oasis.opendocument.text-template"],["ova","application/x-virtualbox-ova"],["ovf","application/x-virtualbox-ovf"],["owl","application/rdf+xml"],["oxps","application/oxps"],["oxt","application/vnd.openofficeorg.extension"],["p","text/x-pascal"],["p7a","application/x-pkcs7-signature"],["p7b","application/x-pkcs7-certificates"],["p7c","application/pkcs7-mime"],["p7m","application/pkcs7-mime"],["p7r","application/x-pkcs7-certreqresp"],["p7s","application/pkcs7-signature"],["p8","application/pkcs8"],["p10","application/x-pkcs10"],["p12","application/x-pkcs12"],["pac","application/x-ns-proxy-autoconfig"],["pages","application/x-iwork-pages-sffpages"],["pas","text/x-pascal"],["paw","application/vnd.pawaafile"],["pbd","application/vnd.powerbuilder6"],["pbm","image/x-portable-bitmap"],["pcap","application/vnd.tcpdump.pcap"],["pcf","application/x-font-pcf"],["pcl","application/vnd.hp-pcl"],["pclxl","application/vnd.hp-pclxl"],["pct","image/x-pict"],["pcurl","application/vnd.curl.pcurl"],["pcx","image/x-pcx"],["pdb","application/x-pilot"],["pde","text/x-processing"],["pdf","application/pdf"],["pem","application/x-x509-user-cert"],["pfa","application/x-font-type1"],["pfb","application/x-font-type1"],["pfm","application/x-font-type1"],["pfr","application/font-tdpfr"],["pfx","application/x-pkcs12"],["pgm","image/x-portable-graymap"],["pgn","application/x-chess-pgn"],["pgp","application/pgp"],["php","application/x-httpd-php"],["php3","application/x-httpd-php"],["php4","application/x-httpd-php"],["phps","application/x-httpd-php-source"],["phtml","application/x-httpd-php"],["pic","image/x-pict"],["pkg","application/octet-stream"],["pki","application/pkixcmp"],["pkipath","application/pkix-pkipath"],["pkpass","application/vnd.apple.pkpass"],["pl","application/x-perl"],["plb","application/vnd.3gpp.pic-bw-large"],["plc","application/vnd.mobius.plc"],["plf","application/vnd.pocketlearn"],["pls","application/pls+xml"],["pm","application/x-perl"],["pml","application/vnd.ctc-posml"],["png","image/png"],["pnm","image/x-portable-anymap"],["portpkg","application/vnd.macports.portpkg"],["pot","application/vnd.ms-powerpoint"],["potm","application/vnd.ms-powerpoint.presentation.macroEnabled.12"],["potx","application/vnd.openxmlformats-officedocument.presentationml.template"],["ppa","application/vnd.ms-powerpoint"],["ppam","application/vnd.ms-powerpoint.addin.macroEnabled.12"],["ppd","application/vnd.cups-ppd"],["ppm","image/x-portable-pixmap"],["pps","application/vnd.ms-powerpoint"],["ppsm","application/vnd.ms-powerpoint.slideshow.macroEnabled.12"],["ppsx","application/vnd.openxmlformats-officedocument.presentationml.slideshow"],["ppt","application/powerpoint"],["pptm","application/vnd.ms-powerpoint.presentation.macroEnabled.12"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["pqa","application/vnd.palm"],["prc","application/x-pilot"],["pre","application/vnd.lotus-freelance"],["prf","application/pics-rules"],["provx","application/provenance+xml"],["ps","application/postscript"],["psb","application/vnd.3gpp.pic-bw-small"],["psd","application/x-photoshop"],["psf","application/x-font-linux-psf"],["pskcxml","application/pskc+xml"],["pti","image/prs.pti"],["ptid","application/vnd.pvi.ptid1"],["pub","application/x-mspublisher"],["pvb","application/vnd.3gpp.pic-bw-var"],["pwn","application/vnd.3m.post-it-notes"],["pya","audio/vnd.ms-playready.media.pya"],["pyv","video/vnd.ms-playready.media.pyv"],["qam","application/vnd.epson.quickanime"],["qbo","application/vnd.intu.qbo"],["qfx","application/vnd.intu.qfx"],["qps","application/vnd.publishare-delta-tree"],["qt","video/quicktime"],["qwd","application/vnd.quark.quarkxpress"],["qwt","application/vnd.quark.quarkxpress"],["qxb","application/vnd.quark.quarkxpress"],["qxd","application/vnd.quark.quarkxpress"],["qxl","application/vnd.quark.quarkxpress"],["qxt","application/vnd.quark.quarkxpress"],["ra","audio/x-realaudio"],["ram","audio/x-pn-realaudio"],["raml","application/raml+yaml"],["rapd","application/route-apd+xml"],["rar","application/x-rar"],["ras","image/x-cmu-raster"],["rcprofile","application/vnd.ipunplugged.rcprofile"],["rdf","application/rdf+xml"],["rdz","application/vnd.data-vision.rdz"],["relo","application/p2p-overlay+xml"],["rep","application/vnd.businessobjects"],["res","application/x-dtbresource+xml"],["rgb","image/x-rgb"],["rif","application/reginfo+xml"],["rip","audio/vnd.rip"],["ris","application/x-research-info-systems"],["rl","application/resource-lists+xml"],["rlc","image/vnd.fujixerox.edmics-rlc"],["rld","application/resource-lists-diff+xml"],["rm","audio/x-pn-realaudio"],["rmi","audio/midi"],["rmp","audio/x-pn-realaudio-plugin"],["rms","application/vnd.jcp.javame.midlet-rms"],["rmvb","application/vnd.rn-realmedia-vbr"],["rnc","application/relax-ng-compact-syntax"],["rng","application/xml"],["roa","application/rpki-roa"],["roff","text/troff"],["rp9","application/vnd.cloanto.rp9"],["rpm","audio/x-pn-realaudio-plugin"],["rpss","application/vnd.nokia.radio-presets"],["rpst","application/vnd.nokia.radio-preset"],["rq","application/sparql-query"],["rs","application/rls-services+xml"],["rsa","application/x-pkcs7"],["rsat","application/atsc-rsat+xml"],["rsd","application/rsd+xml"],["rsheet","application/urc-ressheet+xml"],["rss","application/rss+xml"],["rtf","text/rtf"],["rtx","text/richtext"],["run","application/x-makeself"],["rusd","application/route-usd+xml"],["rv","video/vnd.rn-realvideo"],["s","text/x-asm"],["s3m","audio/s3m"],["saf","application/vnd.yamaha.smaf-audio"],["sass","text/x-sass"],["sbml","application/sbml+xml"],["sc","application/vnd.ibm.secure-container"],["scd","application/x-msschedule"],["scm","application/vnd.lotus-screencam"],["scq","application/scvp-cv-request"],["scs","application/scvp-cv-response"],["scss","text/x-scss"],["scurl","text/vnd.curl.scurl"],["sda","application/vnd.stardivision.draw"],["sdc","application/vnd.stardivision.calc"],["sdd","application/vnd.stardivision.impress"],["sdkd","application/vnd.solent.sdkm+xml"],["sdkm","application/vnd.solent.sdkm+xml"],["sdp","application/sdp"],["sdw","application/vnd.stardivision.writer"],["sea","application/octet-stream"],["see","application/vnd.seemail"],["seed","application/vnd.fdsn.seed"],["sema","application/vnd.sema"],["semd","application/vnd.semd"],["semf","application/vnd.semf"],["senmlx","application/senml+xml"],["sensmlx","application/sensml+xml"],["ser","application/java-serialized-object"],["setpay","application/set-payment-initiation"],["setreg","application/set-registration-initiation"],["sfd-hdstx","application/vnd.hydrostatix.sof-data"],["sfs","application/vnd.spotfire.sfs"],["sfv","text/x-sfv"],["sgi","image/sgi"],["sgl","application/vnd.stardivision.writer-global"],["sgm","text/sgml"],["sgml","text/sgml"],["sh","application/x-sh"],["shar","application/x-shar"],["shex","text/shex"],["shf","application/shf+xml"],["shtml","text/html"],["sid","image/x-mrsid-image"],["sieve","application/sieve"],["sig","application/pgp-signature"],["sil","audio/silk"],["silo","model/mesh"],["sis","application/vnd.symbian.install"],["sisx","application/vnd.symbian.install"],["sit","application/x-stuffit"],["sitx","application/x-stuffitx"],["siv","application/sieve"],["skd","application/vnd.koan"],["skm","application/vnd.koan"],["skp","application/vnd.koan"],["skt","application/vnd.koan"],["sldm","application/vnd.ms-powerpoint.slide.macroenabled.12"],["sldx","application/vnd.openxmlformats-officedocument.presentationml.slide"],["slim","text/slim"],["slm","text/slim"],["sls","application/route-s-tsid+xml"],["slt","application/vnd.epson.salt"],["sm","application/vnd.stepmania.stepchart"],["smf","application/vnd.stardivision.math"],["smi","application/smil"],["smil","application/smil"],["smv","video/x-smv"],["smzip","application/vnd.stepmania.package"],["snd","audio/basic"],["snf","application/x-font-snf"],["so","application/octet-stream"],["spc","application/x-pkcs7-certificates"],["spdx","text/spdx"],["spf","application/vnd.yamaha.smaf-phrase"],["spl","application/x-futuresplash"],["spot","text/vnd.in3d.spot"],["spp","application/scvp-vp-response"],["spq","application/scvp-vp-request"],["spx","audio/ogg"],["sql","application/x-sql"],["src","application/x-wais-source"],["srt","application/x-subrip"],["sru","application/sru+xml"],["srx","application/sparql-results+xml"],["ssdl","application/ssdl+xml"],["sse","application/vnd.kodak-descriptor"],["ssf","application/vnd.epson.ssf"],["ssml","application/ssml+xml"],["sst","application/octet-stream"],["st","application/vnd.sailingtracker.track"],["stc","application/vnd.sun.xml.calc.template"],["std","application/vnd.sun.xml.draw.template"],["stf","application/vnd.wt.stf"],["sti","application/vnd.sun.xml.impress.template"],["stk","application/hyperstudio"],["stl","model/stl"],["stpx","model/step+xml"],["stpxz","model/step-xml+zip"],["stpz","model/step+zip"],["str","application/vnd.pg.format"],["stw","application/vnd.sun.xml.writer.template"],["styl","text/stylus"],["stylus","text/stylus"],["sub","text/vnd.dvb.subtitle"],["sus","application/vnd.sus-calendar"],["susp","application/vnd.sus-calendar"],["sv4cpio","application/x-sv4cpio"],["sv4crc","application/x-sv4crc"],["svc","application/vnd.dvb.service"],["svd","application/vnd.svd"],["svg","image/svg+xml"],["svgz","image/svg+xml"],["swa","application/x-director"],["swf","application/x-shockwave-flash"],["swi","application/vnd.aristanetworks.swi"],["swidtag","application/swid+xml"],["sxc","application/vnd.sun.xml.calc"],["sxd","application/vnd.sun.xml.draw"],["sxg","application/vnd.sun.xml.writer.global"],["sxi","application/vnd.sun.xml.impress"],["sxm","application/vnd.sun.xml.math"],["sxw","application/vnd.sun.xml.writer"],["t","text/troff"],["t3","application/x-t3vm-image"],["t38","image/t38"],["taglet","application/vnd.mynfc"],["tao","application/vnd.tao.intent-module-archive"],["tap","image/vnd.tencent.tap"],["tar","application/x-tar"],["tcap","application/vnd.3gpp2.tcap"],["tcl","application/x-tcl"],["td","application/urc-targetdesc+xml"],["teacher","application/vnd.smart.teacher"],["tei","application/tei+xml"],["teicorpus","application/tei+xml"],["tex","application/x-tex"],["texi","application/x-texinfo"],["texinfo","application/x-texinfo"],["text","text/plain"],["tfi","application/thraud+xml"],["tfm","application/x-tex-tfm"],["tfx","image/tiff-fx"],["tga","image/x-tga"],["tgz","application/x-tar"],["thmx","application/vnd.ms-officetheme"],["tif","image/tiff"],["tiff","image/tiff"],["tk","application/x-tcl"],["tmo","application/vnd.tmobile-livetv"],["toml","application/toml"],["torrent","application/x-bittorrent"],["tpl","application/vnd.groove-tool-template"],["tpt","application/vnd.trid.tpt"],["tr","text/troff"],["tra","application/vnd.trueapp"],["trig","application/trig"],["trm","application/x-msterminal"],["ts","video/mp2t"],["tsd","application/timestamped-data"],["tsv","text/tab-separated-values"],["ttc","font/collection"],["ttf","font/ttf"],["ttl","text/turtle"],["ttml","application/ttml+xml"],["twd","application/vnd.simtech-mindmapper"],["twds","application/vnd.simtech-mindmapper"],["txd","application/vnd.genomatix.tuxedo"],["txf","application/vnd.mobius.txf"],["txt","text/plain"],["u8dsn","message/global-delivery-status"],["u8hdr","message/global-headers"],["u8mdn","message/global-disposition-notification"],["u8msg","message/global"],["u32","application/x-authorware-bin"],["ubj","application/ubjson"],["udeb","application/x-debian-package"],["ufd","application/vnd.ufdl"],["ufdl","application/vnd.ufdl"],["ulx","application/x-glulx"],["umj","application/vnd.umajin"],["unityweb","application/vnd.unity"],["uoml","application/vnd.uoml+xml"],["uri","text/uri-list"],["uris","text/uri-list"],["urls","text/uri-list"],["usdz","model/vnd.usdz+zip"],["ustar","application/x-ustar"],["utz","application/vnd.uiq.theme"],["uu","text/x-uuencode"],["uva","audio/vnd.dece.audio"],["uvd","application/vnd.dece.data"],["uvf","application/vnd.dece.data"],["uvg","image/vnd.dece.graphic"],["uvh","video/vnd.dece.hd"],["uvi","image/vnd.dece.graphic"],["uvm","video/vnd.dece.mobile"],["uvp","video/vnd.dece.pd"],["uvs","video/vnd.dece.sd"],["uvt","application/vnd.dece.ttml+xml"],["uvu","video/vnd.uvvu.mp4"],["uvv","video/vnd.dece.video"],["uvva","audio/vnd.dece.audio"],["uvvd","application/vnd.dece.data"],["uvvf","application/vnd.dece.data"],["uvvg","image/vnd.dece.graphic"],["uvvh","video/vnd.dece.hd"],["uvvi","image/vnd.dece.graphic"],["uvvm","video/vnd.dece.mobile"],["uvvp","video/vnd.dece.pd"],["uvvs","video/vnd.dece.sd"],["uvvt","application/vnd.dece.ttml+xml"],["uvvu","video/vnd.uvvu.mp4"],["uvvv","video/vnd.dece.video"],["uvvx","application/vnd.dece.unspecified"],["uvvz","application/vnd.dece.zip"],["uvx","application/vnd.dece.unspecified"],["uvz","application/vnd.dece.zip"],["vbox","application/x-virtualbox-vbox"],["vbox-extpack","application/x-virtualbox-vbox-extpack"],["vcard","text/vcard"],["vcd","application/x-cdlink"],["vcf","text/x-vcard"],["vcg","application/vnd.groove-vcard"],["vcs","text/x-vcalendar"],["vcx","application/vnd.vcx"],["vdi","application/x-virtualbox-vdi"],["vds","model/vnd.sap.vds"],["vhd","application/x-virtualbox-vhd"],["vis","application/vnd.visionary"],["viv","video/vnd.vivo"],["vlc","application/videolan"],["vmdk","application/x-virtualbox-vmdk"],["vob","video/x-ms-vob"],["vor","application/vnd.stardivision.writer"],["vox","application/x-authorware-bin"],["vrml","model/vrml"],["vsd","application/vnd.visio"],["vsf","application/vnd.vsf"],["vss","application/vnd.visio"],["vst","application/vnd.visio"],["vsw","application/vnd.visio"],["vtf","image/vnd.valve.source.texture"],["vtt","text/vtt"],["vtu","model/vnd.vtu"],["vxml","application/voicexml+xml"],["w3d","application/x-director"],["wad","application/x-doom"],["wadl","application/vnd.sun.wadl+xml"],["war","application/java-archive"],["wasm","application/wasm"],["wav","audio/x-wav"],["wax","audio/x-ms-wax"],["wbmp","image/vnd.wap.wbmp"],["wbs","application/vnd.criticaltools.wbs+xml"],["wbxml","application/wbxml"],["wcm","application/vnd.ms-works"],["wdb","application/vnd.ms-works"],["wdp","image/vnd.ms-photo"],["weba","audio/webm"],["webapp","application/x-web-app-manifest+json"],["webm","video/webm"],["webmanifest","application/manifest+json"],["webp","image/webp"],["wg","application/vnd.pmi.widget"],["wgt","application/widget"],["wks","application/vnd.ms-works"],["wm","video/x-ms-wm"],["wma","audio/x-ms-wma"],["wmd","application/x-ms-wmd"],["wmf","image/wmf"],["wml","text/vnd.wap.wml"],["wmlc","application/wmlc"],["wmls","text/vnd.wap.wmlscript"],["wmlsc","application/vnd.wap.wmlscriptc"],["wmv","video/x-ms-wmv"],["wmx","video/x-ms-wmx"],["wmz","application/x-msmetafile"],["woff","font/woff"],["woff2","font/woff2"],["word","application/msword"],["wpd","application/vnd.wordperfect"],["wpl","application/vnd.ms-wpl"],["wps","application/vnd.ms-works"],["wqd","application/vnd.wqd"],["wri","application/x-mswrite"],["wrl","model/vrml"],["wsc","message/vnd.wfa.wsc"],["wsdl","application/wsdl+xml"],["wspolicy","application/wspolicy+xml"],["wtb","application/vnd.webturbo"],["wvx","video/x-ms-wvx"],["x3d","model/x3d+xml"],["x3db","model/x3d+fastinfoset"],["x3dbz","model/x3d+binary"],["x3dv","model/x3d-vrml"],["x3dvz","model/x3d+vrml"],["x3dz","model/x3d+xml"],["x32","application/x-authorware-bin"],["x_b","model/vnd.parasolid.transmit.binary"],["x_t","model/vnd.parasolid.transmit.text"],["xaml","application/xaml+xml"],["xap","application/x-silverlight-app"],["xar","application/vnd.xara"],["xav","application/xcap-att+xml"],["xbap","application/x-ms-xbap"],["xbd","application/vnd.fujixerox.docuworks.binder"],["xbm","image/x-xbitmap"],["xca","application/xcap-caps+xml"],["xcs","application/calendar+xml"],["xdf","application/xcap-diff+xml"],["xdm","application/vnd.syncml.dm+xml"],["xdp","application/vnd.adobe.xdp+xml"],["xdssc","application/dssc+xml"],["xdw","application/vnd.fujixerox.docuworks"],["xel","application/xcap-el+xml"],["xenc","application/xenc+xml"],["xer","application/patch-ops-error+xml"],["xfdf","application/vnd.adobe.xfdf"],["xfdl","application/vnd.xfdl"],["xht","application/xhtml+xml"],["xhtml","application/xhtml+xml"],["xhvml","application/xv+xml"],["xif","image/vnd.xiff"],["xl","application/excel"],["xla","application/vnd.ms-excel"],["xlam","application/vnd.ms-excel.addin.macroEnabled.12"],["xlc","application/vnd.ms-excel"],["xlf","application/xliff+xml"],["xlm","application/vnd.ms-excel"],["xls","application/vnd.ms-excel"],["xlsb","application/vnd.ms-excel.sheet.binary.macroEnabled.12"],["xlsm","application/vnd.ms-excel.sheet.macroEnabled.12"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xlt","application/vnd.ms-excel"],["xltm","application/vnd.ms-excel.template.macroEnabled.12"],["xltx","application/vnd.openxmlformats-officedocument.spreadsheetml.template"],["xlw","application/vnd.ms-excel"],["xm","audio/xm"],["xml","application/xml"],["xns","application/xcap-ns+xml"],["xo","application/vnd.olpc-sugar"],["xop","application/xop+xml"],["xpi","application/x-xpinstall"],["xpl","application/xproc+xml"],["xpm","image/x-xpixmap"],["xpr","application/vnd.is-xpr"],["xps","application/vnd.ms-xpsdocument"],["xpw","application/vnd.intercon.formnet"],["xpx","application/vnd.intercon.formnet"],["xsd","application/xml"],["xsl","application/xml"],["xslt","application/xslt+xml"],["xsm","application/vnd.syncml+xml"],["xspf","application/xspf+xml"],["xul","application/vnd.mozilla.xul+xml"],["xvm","application/xv+xml"],["xvml","application/xv+xml"],["xwd","image/x-xwindowdump"],["xyz","chemical/x-xyz"],["xz","application/x-xz"],["yaml","text/yaml"],["yang","application/yang"],["yin","application/yin+xml"],["yml","text/yaml"],["ymp","text/x-suse-ymp"],["z","application/x-compress"],["z1","application/x-zmachine"],["z2","application/x-zmachine"],["z3","application/x-zmachine"],["z4","application/x-zmachine"],["z5","application/x-zmachine"],["z6","application/x-zmachine"],["z7","application/x-zmachine"],["z8","application/x-zmachine"],["zaz","application/vnd.zzazz.deck+xml"],["zip","application/zip"],["zir","application/vnd.zul"],["zirz","application/vnd.zul"],["zmm","application/vnd.handheld-entertainment+xml"],["zsh","text/x-scriptzsh"]]);function nm(e,t,n){const a=tre(e),{webkitRelativePath:s}=e,i=typeof t=="string"?t:typeof s=="string"&&s.length>0?s:`./${e.name}`;return typeof a.path!="string"&&_T(a,"path",i),n!==void 0&&Object.defineProperty(a,"handle",{value:n,writable:!1,configurable:!1,enumerable:!0}),_T(a,"relativePath",i),a}function tre(e){const{name:t}=e;if(t&&t.lastIndexOf(".")!==-1&&!e.type){const a=t.split(".").pop().toLowerCase(),s=ere.get(a);s&&Object.defineProperty(e,"type",{value:s,writable:!1,configurable:!1,enumerable:!0})}return e}function _T(e,t,n){Object.defineProperty(e,t,{value:n,writable:!1,configurable:!1,enumerable:!0})}const rre=[".DS_Store","Thumbs.db"];function nre(e){return gu(this,void 0,void 0,function*(){return Sy(e)&&are(e.dataTransfer)?lre(e.dataTransfer,e.type):sre(e)?ire(e):Array.isArray(e)&&e.every(t=>"getFile"in t&&typeof t.getFile=="function")?ore(e):[]})}function are(e){return Sy(e)}function sre(e){return Sy(e)&&Sy(e.target)}function Sy(e){return typeof e=="object"&&e!==null}function ire(e){return M5(e.target.files).map(t=>nm(t))}function ore(e){return gu(this,void 0,void 0,function*(){return(yield Promise.all(e.map(n=>n.getFile()))).map(n=>nm(n))})}function lre(e,t){return gu(this,void 0,void 0,function*(){if(e.items){const n=M5(e.items).filter(s=>s.kind==="file");if(t!=="drop")return n;const a=yield Promise.all(n.map(cre));return LT(O$(a))}return LT(M5(e.files).map(n=>nm(n)))})}function LT(e){return e.filter(t=>rre.indexOf(t.name)===-1)}function M5(e){if(e===null)return[];const t=[];for(let n=0;n<e.length;n++){const a=e[n];t.push(a)}return t}function cre(e){if(typeof e.webkitGetAsEntry!="function")return RT(e);const t=e.webkitGetAsEntry();return t&&t.isDirectory?_$(t):RT(e,t)}function O$(e){return e.reduce((t,n)=>[...t,...Array.isArray(n)?O$(n):[n]],[])}function RT(e,t){return gu(this,void 0,void 0,function*(){var n;if(globalThis.isSecureContext&&typeof e.getAsFileSystemHandle=="function"){const i=yield e.getAsFileSystemHandle();if(i===null)throw new Error(`${e} is not a File`);if(i!==void 0){const o=yield i.getFile();return o.handle=i,nm(o)}}const a=e.getAsFile();if(!a)throw new Error(`${e} is not a File`);return nm(a,(n=t==null?void 0:t.fullPath)!==null&&n!==void 0?n:void 0)})}function dre(e){return gu(this,void 0,void 0,function*(){return e.isDirectory?_$(e):ure(e)})}function _$(e){const t=e.createReader();return new Promise((n,a)=>{const s=[];function i(){t.readEntries(o=>gu(this,void 0,void 0,function*(){if(o.length){const l=Promise.all(o.map(dre));s.push(l),i()}else try{const l=yield Promise.all(s);n(l)}catch(l){a(l)}}),o=>{a(o)})}i()})}function ure(e){return gu(this,void 0,void 0,function*(){return new Promise((t,n)=>{e.file(a=>{const s=nm(a,e.fullPath);t(s)},a=>{n(a)})})})}var f2=function(e,t){if(e&&t){var n=Array.isArray(t)?t:t.split(",");if(n.length===0)return!0;var a=e.name||"",s=(e.type||"").toLowerCase(),i=s.replace(/\/.*$/,"");return n.some(function(o){var l=o.trim().toLowerCase();return l.charAt(0)==="."?a.toLowerCase().endsWith(l):l.endsWith("/*")?i===l.replace(/\/.*$/,""):s===l})}return!0};function FT(e){return hre(e)||mre(e)||R$(e)||fre()}function fre(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function mre(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function hre(e){if(Array.isArray(e))return $5(e)}function MT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function $T(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?MT(Object(n),!0).forEach(function(a){L$(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):MT(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function L$(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function lv(e,t){return xre(e)||vre(e,t)||R$(e,t)||pre()}function pre(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function R$(e,t){if(e){if(typeof e=="string")return $5(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return $5(e,t)}}function $5(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function vre(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var a=[],s=!0,i=!1,o,l;try{for(n=n.call(e);!(s=(o=n.next()).done)&&(a.push(o.value),!(t&&a.length===t));s=!0);}catch(c){i=!0,l=c}finally{try{!s&&n.return!=null&&n.return()}finally{if(i)throw l}}return a}}function xre(e){if(Array.isArray(e))return e}var gre=typeof f2=="function"?f2:f2.default,yre="file-invalid-type",bre="file-too-large",jre="file-too-small",wre="too-many-files",Nre=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",n=t.split(","),a=n.length>1?"one of ".concat(n.join(", ")):n[0];return{code:yre,message:"File type must be ".concat(a)}},BT=function(t){return{code:bre,message:"File is larger than ".concat(t," ").concat(t===1?"byte":"bytes")}},zT=function(t){return{code:jre,message:"File is smaller than ".concat(t," ").concat(t===1?"byte":"bytes")}},Sre={code:wre,message:"Too many files"};function F$(e,t){var n=e.type==="application/x-moz-file"||gre(e,t);return[n,n?null:Nre(t)]}function M$(e,t,n){if(Cd(e.size))if(Cd(t)&&Cd(n)){if(e.size>n)return[!1,BT(n)];if(e.size<t)return[!1,zT(t)]}else{if(Cd(t)&&e.size<t)return[!1,zT(t)];if(Cd(n)&&e.size>n)return[!1,BT(n)]}return[!0,null]}function Cd(e){return e!=null}function Cre(e){var t=e.files,n=e.accept,a=e.minSize,s=e.maxSize,i=e.multiple,o=e.maxFiles,l=e.validator;return!i&&t.length>1||i&&o>=1&&t.length>o?!1:t.every(function(c){var d=F$(c,n),f=lv(d,1),u=f[0],m=M$(c,a,s),h=lv(m,1),x=h[0],g=l?l(c):null;return u&&x&&!g})}function Cy(e){return typeof e.isPropagationStopped=="function"?e.isPropagationStopped():typeof e.cancelBubble<"u"?e.cancelBubble:!1}function Yg(e){return e.dataTransfer?Array.prototype.some.call(e.dataTransfer.types,function(t){return t==="Files"||t==="application/x-moz-file"}):!!e.target&&!!e.target.files}function UT(e){e.preventDefault()}function Are(e){return e.indexOf("MSIE")!==-1||e.indexOf("Trident/")!==-1}function Ere(e){return e.indexOf("Edge/")!==-1}function Pre(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.navigator.userAgent;return Are(e)||Ere(e)}function go(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(a){for(var s=arguments.length,i=new Array(s>1?s-1:0),o=1;o<s;o++)i[o-1]=arguments[o];return t.some(function(l){return!Cy(a)&&l&&l.apply(void 0,[a].concat(i)),Cy(a)})}}function Tre(){return"showOpenFilePicker"in window}function Ire(e){if(Cd(e)){var t=Object.entries(e).filter(function(n){var a=lv(n,2),s=a[0],i=a[1],o=!0;return $$(s)||(console.warn('Skipped "'.concat(s,'" because it is not a valid MIME type. Check https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types/Common_types for a list of valid MIME types.')),o=!1),(!Array.isArray(i)||!i.every(B$))&&(console.warn('Skipped "'.concat(s,'" because an invalid file extension was provided.')),o=!1),o}).reduce(function(n,a){var s=lv(a,2),i=s[0],o=s[1];return $T($T({},n),{},L$({},i,o))},{});return[{description:"Files",accept:t}]}return e}function Dre(e){if(Cd(e))return Object.entries(e).reduce(function(t,n){var a=lv(n,2),s=a[0],i=a[1];return[].concat(FT(t),[s],FT(i))},[]).filter(function(t){return $$(t)||B$(t)}).join(",")}function kre(e){return e instanceof DOMException&&(e.name==="AbortError"||e.code===e.ABORT_ERR)}function Ore(e){return e instanceof DOMException&&(e.name==="SecurityError"||e.code===e.SECURITY_ERR)}function $$(e){return e==="audio/*"||e==="video/*"||e==="image/*"||e==="text/*"||e==="application/*"||/\w+\/[-+.\w]+/g.test(e)}function B$(e){return/^.*\.[\w]+$/.test(e)}var _re=["children"],Lre=["open"],Rre=["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],Fre=["refKey","onChange","onClick"];function Mre(e){return zre(e)||Bre(e)||z$(e)||$re()}function $re(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Bre(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function zre(e){if(Array.isArray(e))return B5(e)}function m2(e,t){return qre(e)||Vre(e,t)||z$(e,t)||Ure()}function Ure(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function z$(e,t){if(e){if(typeof e=="string")return B5(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return B5(e,t)}}function B5(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function Vre(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var a=[],s=!0,i=!1,o,l;try{for(n=n.call(e);!(s=(o=n.next()).done)&&(a.push(o.value),!(t&&a.length===t));s=!0);}catch(c){i=!0,l=c}finally{try{!s&&n.return!=null&&n.return()}finally{if(i)throw l}}return a}}function qre(e){if(Array.isArray(e))return e}function VT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function ln(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?VT(Object(n),!0).forEach(function(a){z5(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):VT(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function z5(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ay(e,t){if(e==null)return{};var n=Wre(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function Wre(e,t){if(e==null)return{};var n={},a=Object.keys(e),s,i;for(i=0;i<a.length;i++)s=a[i],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}var l4=w.forwardRef(function(e,t){var n=e.children,a=Ay(e,_re),s=ux(a),i=s.open,o=Ay(s,Lre);return w.useImperativeHandle(t,function(){return{open:i}},[i]),pe.createElement(w.Fragment,null,n(ln(ln({},o),{},{open:i})))});l4.displayName="Dropzone";var U$={disabled:!1,getFilesFromEvent:nre,maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!1,autoFocus:!1};l4.defaultProps=U$;l4.propTypes={children:Et.func,accept:Et.objectOf(Et.arrayOf(Et.string)),multiple:Et.bool,preventDropOnDocument:Et.bool,noClick:Et.bool,noKeyboard:Et.bool,noDrag:Et.bool,noDragEventsBubbling:Et.bool,minSize:Et.number,maxSize:Et.number,maxFiles:Et.number,disabled:Et.bool,getFilesFromEvent:Et.func,onFileDialogCancel:Et.func,onFileDialogOpen:Et.func,useFsAccessApi:Et.bool,autoFocus:Et.bool,onDragEnter:Et.func,onDragLeave:Et.func,onDragOver:Et.func,onDrop:Et.func,onDropAccepted:Et.func,onDropRejected:Et.func,onError:Et.func,validator:Et.func};var U5={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,acceptedFiles:[],fileRejections:[]};function ux(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=ln(ln({},U$),e),n=t.accept,a=t.disabled,s=t.getFilesFromEvent,i=t.maxSize,o=t.minSize,l=t.multiple,c=t.maxFiles,d=t.onDragEnter,f=t.onDragLeave,u=t.onDragOver,m=t.onDrop,h=t.onDropAccepted,x=t.onDropRejected,g=t.onFileDialogCancel,p=t.onFileDialogOpen,v=t.useFsAccessApi,y=t.autoFocus,b=t.preventDropOnDocument,j=t.noClick,C=t.noKeyboard,E=t.noDrag,S=t.noDragEventsBubbling,N=t.onError,I=t.validator,D=w.useMemo(function(){return Dre(n)},[n]),T=w.useMemo(function(){return Ire(n)},[n]),A=w.useMemo(function(){return typeof p=="function"?p:qT},[p]),_=w.useMemo(function(){return typeof g=="function"?g:qT},[g]),k=w.useRef(null),L=w.useRef(null),$=w.useReducer(Hre,U5),M=m2($,2),B=M[0],U=M[1],W=B.isFocused,q=B.isFileDialogActive,R=w.useRef(typeof window<"u"&&window.isSecureContext&&v&&Tre()),V=function(){!R.current&&q&&setTimeout(function(){if(L.current){var et=L.current.files;et.length||(U({type:"closeDialog"}),_())}},300)};w.useEffect(function(){return window.addEventListener("focus",V,!1),function(){window.removeEventListener("focus",V,!1)}},[L,q,_,R]);var G=w.useRef([]),ee=function(et){k.current&&k.current.contains(et.target)||(et.preventDefault(),G.current=[])};w.useEffect(function(){return b&&(document.addEventListener("dragover",UT,!1),document.addEventListener("drop",ee,!1)),function(){b&&(document.removeEventListener("dragover",UT),document.removeEventListener("drop",ee))}},[k,b]),w.useEffect(function(){return!a&&y&&k.current&&k.current.focus(),function(){}},[k,y,a]);var re=w.useCallback(function(Ve){N?N(Ve):console.error(Ve)},[N]),de=w.useCallback(function(Ve){Ve.preventDefault(),Ve.persist(),Re(Ve),G.current=[].concat(Mre(G.current),[Ve.target]),Yg(Ve)&&Promise.resolve(s(Ve)).then(function(et){if(!(Cy(Ve)&&!S)){var ut=et.length,gt=ut>0&&Cre({files:et,accept:D,minSize:o,maxSize:i,multiple:l,maxFiles:c,validator:I}),Dt=ut>0&&!gt;U({isDragAccept:gt,isDragReject:Dt,isDragActive:!0,type:"setDraggedFiles"}),d&&d(Ve)}}).catch(function(et){return re(et)})},[s,d,re,S,D,o,i,l,c,I]),ue=w.useCallback(function(Ve){Ve.preventDefault(),Ve.persist(),Re(Ve);var et=Yg(Ve);if(et&&Ve.dataTransfer)try{Ve.dataTransfer.dropEffect="copy"}catch{}return et&&u&&u(Ve),!1},[u,S]),oe=w.useCallback(function(Ve){Ve.preventDefault(),Ve.persist(),Re(Ve);var et=G.current.filter(function(gt){return k.current&&k.current.contains(gt)}),ut=et.indexOf(Ve.target);ut!==-1&&et.splice(ut,1),G.current=et,!(et.length>0)&&(U({type:"setDraggedFiles",isDragActive:!1,isDragAccept:!1,isDragReject:!1}),Yg(Ve)&&f&&f(Ve))},[k,f,S]),ge=w.useCallback(function(Ve,et){var ut=[],gt=[];Ve.forEach(function(Dt){var At=F$(Dt,D),zt=m2(At,2),ot=zt[0],yr=zt[1],Qt=M$(Dt,o,i),zn=m2(Qt,2),br=zn[0],Dr=zn[1],Qa=I?I(Dt):null;if(ot&&br&&!Qa)ut.push(Dt);else{var cr=[yr,Dr];Qa&&(cr=cr.concat(Qa)),gt.push({file:Dt,errors:cr.filter(function(Ho){return Ho})})}}),(!l&&ut.length>1||l&&c>=1&&ut.length>c)&&(ut.forEach(function(Dt){gt.push({file:Dt,errors:[Sre]})}),ut.splice(0)),U({acceptedFiles:ut,fileRejections:gt,isDragReject:gt.length>0,type:"setFiles"}),m&&m(ut,gt,et),gt.length>0&&x&&x(gt,et),ut.length>0&&h&&h(ut,et)},[U,l,D,o,i,c,m,h,x,I]),ve=w.useCallback(function(Ve){Ve.preventDefault(),Ve.persist(),Re(Ve),G.current=[],Yg(Ve)&&Promise.resolve(s(Ve)).then(function(et){Cy(Ve)&&!S||ge(et,Ve)}).catch(function(et){return re(et)}),U({type:"reset"})},[s,ge,re,S]),xe=w.useCallback(function(){if(R.current){U({type:"openDialog"}),A();var Ve={multiple:l,types:T};window.showOpenFilePicker(Ve).then(function(et){return s(et)}).then(function(et){ge(et,null),U({type:"closeDialog"})}).catch(function(et){kre(et)?(_(et),U({type:"closeDialog"})):Ore(et)?(R.current=!1,L.current?(L.current.value=null,L.current.click()):re(new Error("Cannot open the file picker because the https://developer.mozilla.org/en-US/docs/Web/API/File_System_Access_API is not supported and no <input> was provided."))):re(et)});return}L.current&&(U({type:"openDialog"}),A(),L.current.value=null,L.current.click())},[U,A,_,v,ge,re,T,l]),Oe=w.useCallback(function(Ve){!k.current||!k.current.isEqualNode(Ve.target)||(Ve.key===" "||Ve.key==="Enter"||Ve.keyCode===32||Ve.keyCode===13)&&(Ve.preventDefault(),xe())},[k,xe]),ye=w.useCallback(function(){U({type:"focus"})},[]),le=w.useCallback(function(){U({type:"blur"})},[]),ne=w.useCallback(function(){j||(Pre()?setTimeout(xe,0):xe())},[j,xe]),Ae=function(et){return a?null:et},Se=function(et){return C?null:Ae(et)},be=function(et){return E?null:Ae(et)},Re=function(et){S&&et.stopPropagation()},nt=w.useMemo(function(){return function(){var Ve=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},et=Ve.refKey,ut=et===void 0?"ref":et,gt=Ve.role,Dt=Ve.onKeyDown,At=Ve.onFocus,zt=Ve.onBlur,ot=Ve.onClick,yr=Ve.onDragEnter,Qt=Ve.onDragOver,zn=Ve.onDragLeave,br=Ve.onDrop,Dr=Ay(Ve,Rre);return ln(ln(z5({onKeyDown:Se(go(Dt,Oe)),onFocus:Se(go(At,ye)),onBlur:Se(go(zt,le)),onClick:Ae(go(ot,ne)),onDragEnter:be(go(yr,de)),onDragOver:be(go(Qt,ue)),onDragLeave:be(go(zn,oe)),onDrop:be(go(br,ve)),role:typeof gt=="string"&&gt!==""?gt:"presentation"},ut,k),!a&&!C?{tabIndex:0}:{}),Dr)}},[k,Oe,ye,le,ne,de,ue,oe,ve,C,E,a]),rt=w.useCallback(function(Ve){Ve.stopPropagation()},[]),xt=w.useMemo(function(){return function(){var Ve=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},et=Ve.refKey,ut=et===void 0?"ref":et,gt=Ve.onChange,Dt=Ve.onClick,At=Ay(Ve,Fre),zt=z5({accept:D,multiple:l,type:"file",style:{border:0,clip:"rect(0, 0, 0, 0)",clipPath:"inset(50%)",height:"1px",margin:"0 -1px -1px 0",overflow:"hidden",padding:0,position:"absolute",width:"1px",whiteSpace:"nowrap"},onChange:Ae(go(gt,ve)),onClick:Ae(go(Dt,rt)),tabIndex:-1},ut,L);return ln(ln({},zt),At)}},[L,n,l,ve,a]);return ln(ln({},B),{},{isFocused:W&&!a,getRootProps:nt,getInputProps:xt,rootRef:k,inputRef:L,open:Ae(xe)})}function Hre(e,t){switch(t.type){case"focus":return ln(ln({},e),{},{isFocused:!0});case"blur":return ln(ln({},e),{},{isFocused:!1});case"openDialog":return ln(ln({},U5),{},{isFileDialogActive:!0});case"closeDialog":return ln(ln({},e),{},{isFileDialogActive:!1});case"setDraggedFiles":return ln(ln({},e),{},{isDragActive:t.isDragActive,isDragAccept:t.isDragAccept,isDragReject:t.isDragReject});case"setFiles":return ln(ln({},e),{},{acceptedFiles:t.acceptedFiles,fileRejections:t.fileRejections,isDragReject:t.isDragReject});case"reset":return ln({},U5);default:return e}}function qT(){}function Gre({vehicle:e,onSave:t,onCancel:n,onScanBarcode:a}){var N,I,D,T,A,_,k,L,$,M,B,U,W,q,R,V,G,ee,re,de,ue,oe,ge,ve,xe,Oe;const{toast:s}=Ct(),[i,o]=w.useState(!1),[l,c]=w.useState({vin:"",make:"",model:"",year:new Date().getFullYear(),type:vt.RV,status:Yt.AVAILABLE,price:0,cost:0,location:"",features:[],images:[],customFields:{videos:[],exteriorColor:"",interiorColor:"",length:"",weight:"",sleeps:"",slideouts:"",fuelType:"",mileage:"",condition:"New"}}),[d,f]=w.useState(""),[u,m]=w.useState(""),[h,x]=w.useState(!1);w.useEffect(()=>{e&&c({...e,customFields:{...e.customFields,videos:e.customFields.videos||[]}})},[e]);const{getRootProps:g,getInputProps:p}=ux({accept:{"image/*":[]},onDrop:ye=>{const le=ye.map(ne=>URL.createObjectURL(ne));c(ne=>({...ne,images:[...ne.images||[],...le]})),s({title:"Images Added",description:`Added ${ye.length} images`})}}),v=async ye=>{if(ye.preventDefault(),!l.vin||!l.make||!l.model||!l.year){s({title:"Validation Error",description:"Please fill in all required fields",variant:"destructive"});return}o(!0);try{await t(l),s({title:"Success",description:`Vehicle ${e?"updated":"created"} successfully`})}catch{s({title:"Error",description:`Failed to ${e?"update":"create"} vehicle`,variant:"destructive"})}finally{o(!1)}},y=()=>{var ye;d.trim()&&!((ye=l.features)!=null&&ye.includes(d.trim()))&&(c(le=>({...le,features:[...le.features||[],d.trim()]})),f(""))},b=ye=>{c(le=>{var ne;return{...le,features:((ne=le.features)==null?void 0:ne.filter(Ae=>Ae!==ye))||[]}})},j=()=>{u.trim()&&(c(ye=>{var le;return{...ye,customFields:{...ye.customFields,videos:[...((le=ye.customFields)==null?void 0:le.videos)||[],u.trim()]}}}),m(""))},C=ye=>{c(le=>{var ne,Ae;return{...le,customFields:{...le.customFields,videos:((Ae=(ne=le.customFields)==null?void 0:ne.videos)==null?void 0:Ae.filter(Se=>Se!==ye))||[]}}})},E=ye=>{c(le=>{var ne;return{...le,images:((ne=le.images)==null?void 0:ne.filter(Ae=>Ae!==ye))||[]}})},S=ye=>{ye.length===17?(c(le=>({...le,vin:ye})),s({title:"Barcode Scanned",description:`VIN: ${ye}`}),x(!1)):s({title:"Invalid Barcode",description:"The scanned barcode does not appear to be a valid VIN",variant:"destructive"})};return r.jsxs("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:[r.jsxs(fe,{className:"w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[r.jsx(we,{children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx(Ne,{children:e?"Edit Vehicle":"Add New Home"}),r.jsx(Ue,{children:e?"Update vehicle details":"Add a new home to inventory"})]}),r.jsx(J,{variant:"ghost",size:"sm",onClick:n,children:r.jsx($t,{className:"h-4 w-4"})})]})}),r.jsx(me,{children:r.jsxs("form",{onSubmit:v,className:"space-y-6",children:[r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"text-lg font-semibold",children:"Basic Information"}),r.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"vin",children:"VIN *"}),r.jsxs("div",{className:"flex",children:[r.jsx(je,{id:"vin",value:l.vin,onChange:ye=>c(le=>({...le,vin:ye.target.value})),placeholder:"Vehicle Identification Number",className:"flex-1"}),r.jsx(J,{type:"button",variant:"outline",className:"ml-2",onClick:()=>x(!0),children:r.jsx(mF,{className:"h-4 w-4"})})]})]}),r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"year",children:"Year *"}),r.jsx(je,{id:"year",type:"number",value:l.year,onChange:ye=>c(le=>({...le,year:parseInt(ye.target.value)||new Date().getFullYear()})),min:"1900",max:new Date().getFullYear()+1})]})]}),r.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"make",children:"Make *"}),r.jsx(je,{id:"make",value:l.make,onChange:ye=>c(le=>({...le,make:ye.target.value})),placeholder:"e.g., Forest River, Winnebago"})]}),r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"model",children:"Model *"}),r.jsx(je,{id:"model",value:l.model,onChange:ye=>c(le=>({...le,model:ye.target.value})),placeholder:"e.g., Georgetown, View"})]})]}),r.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"type",children:"Type"}),r.jsxs($e,{value:l.type,onValueChange:ye=>c(le=>({...le,type:ye})),children:[r.jsx(Fe,{children:r.jsx(Be,{})}),r.jsxs(Me,{children:[r.jsx(K,{value:vt.RV,children:"RV"}),r.jsx(K,{value:vt.MOTORHOME,children:"Motorhome"}),r.jsx(K,{value:vt.TRAVEL_TRAILER,children:"Travel Trailer"}),r.jsx(K,{value:vt.FIFTH_WHEEL,children:"Fifth Wheel"}),r.jsx(K,{value:vt.TOY_HAULER,children:"Toy Hauler"}),r.jsx(K,{value:vt.SINGLE_WIDE,children:"Single Wide MH"}),r.jsx(K,{value:vt.DOUBLE_WIDE,children:"Double Wide MH"}),r.jsx(K,{value:vt.TRIPLE_WIDE,children:"Triple Wide MH"}),r.jsx(K,{value:vt.PARK_MODEL,children:"Park Model"}),r.jsx(K,{value:vt.MODULAR_HOME,children:"Modular Home"})]})]})]}),r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"status",children:"Status"}),r.jsxs($e,{value:l.status,onValueChange:ye=>c(le=>({...le,status:ye})),children:[r.jsx(Fe,{children:r.jsx(Be,{})}),r.jsxs(Me,{children:[r.jsx(K,{value:Yt.AVAILABLE,children:"Available"}),r.jsx(K,{value:Yt.RESERVED,children:"Reserved"}),r.jsx(K,{value:Yt.SOLD,children:"Sold"}),r.jsx(K,{value:Yt.SERVICE,children:"Service"}),r.jsx(K,{value:Yt.DELIVERED,children:"Delivered"})]})]})]}),r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"location",children:"Location"}),r.jsx(je,{id:"location",value:l.location,onChange:ye=>c(le=>({...le,location:ye.target.value})),placeholder:"e.g., Lot A-15"})]})]}),r.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"price",children:"Price *"}),r.jsx(je,{id:"price",type:"number",value:l.price,onChange:ye=>c(le=>({...le,price:parseFloat(ye.target.value)||0})),min:"0",step:"0.01"})]}),r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"cost",children:"Cost *"}),r.jsx(je,{id:"cost",type:"number",value:l.cost,onChange:ye=>c(le=>({...le,cost:parseFloat(ye.target.value)||0})),min:"0",step:"0.01"})]})]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"text-lg font-semibold",children:"Features"}),r.jsxs("div",{className:"flex space-x-2",children:[r.jsx(je,{value:d,onChange:ye=>f(ye.target.value),placeholder:"Add a feature",onKeyDown:ye=>{ye.key==="Enter"&&(ye.preventDefault(),y())}}),r.jsx(J,{type:"button",onClick:y,children:r.jsx(Nt,{className:"h-4 w-4"})})]}),r.jsxs("div",{className:"flex flex-wrap gap-2",children:[(N=l.features)==null?void 0:N.map((ye,le)=>r.jsxs(ze,{variant:"secondary",className:"flex items-center gap-1",children:[ye,r.jsx($t,{className:"h-3 w-3 cursor-pointer",onClick:()=>b(ye)})]},le)),(!l.features||l.features.length===0)&&r.jsx("div",{className:"text-sm text-muted-foreground",children:"No features added yet"})]})]}),(l.type===vt.SINGLE_WIDE||l.type===vt.DOUBLE_WIDE||l.type===vt.TRIPLE_WIDE||l.type===vt.PARK_MODEL||l.type===vt.MODULAR_HOME)&&r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"text-lg font-semibold",children:"Manufactured Housing Details"}),r.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"squareFootage",children:"Square Footage"}),r.jsx(je,{id:"squareFootage",value:((I=l.customFields)==null?void 0:I.squareFootage)||"",onChange:ye=>c(le=>({...le,customFields:{...le.customFields,squareFootage:ye.target.value}})),placeholder:"e.g., 1200"})]}),r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"bedrooms",children:"Bedrooms"}),r.jsxs($e,{value:((D=l.customFields)==null?void 0:D.bedrooms)||"",onValueChange:ye=>c(le=>({...le,customFields:{...le.customFields,bedrooms:ye}})),children:[r.jsx(Fe,{children:r.jsx(Be,{placeholder:"Select number"})}),r.jsxs(Me,{children:[r.jsx(K,{value:"1",children:"1"}),r.jsx(K,{value:"2",children:"2"}),r.jsx(K,{value:"3",children:"3"}),r.jsx(K,{value:"4",children:"4"}),r.jsx(K,{value:"5+",children:"5+"})]})]})]}),r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"bathrooms",children:"Bathrooms"}),r.jsxs($e,{value:((T=l.customFields)==null?void 0:T.bathrooms)||"",onValueChange:ye=>c(le=>({...le,customFields:{...le.customFields,bathrooms:ye}})),children:[r.jsx(Fe,{children:r.jsx(Be,{placeholder:"Select number"})}),r.jsxs(Me,{children:[r.jsx(K,{value:"1",children:"1"}),r.jsx(K,{value:"1.5",children:"1.5"}),r.jsx(K,{value:"2",children:"2"}),r.jsx(K,{value:"2.5",children:"2.5"}),r.jsx(K,{value:"3",children:"3"}),r.jsx(K,{value:"3+",children:"3+"})]})]})]}),r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"constructionType",children:"Construction Type"}),r.jsxs($e,{value:((A=l.customFields)==null?void 0:A.constructionType)||"",onValueChange:ye=>c(le=>({...le,customFields:{...le.customFields,constructionType:ye}})),children:[r.jsx(Fe,{children:r.jsx(Be,{placeholder:"Select type"})}),r.jsxs(Me,{children:[r.jsx(K,{value:"Manufactured",children:"Manufactured"}),r.jsx(K,{value:"Modular",children:"Modular"}),r.jsx(K,{value:"Park Model",children:"Park Model"})]})]})]}),r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"exteriorSiding",children:"Exterior Siding"}),r.jsx(je,{id:"exteriorSiding",value:((_=l.customFields)==null?void 0:_.exteriorSiding)||"",onChange:ye=>c(le=>({...le,customFields:{...le.customFields,exteriorSiding:ye.target.value}})),placeholder:"e.g., Vinyl, Hardiplank"})]}),r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"roofType",children:"Roof Type"}),r.jsx(je,{id:"roofType",value:((k=l.customFields)==null?void 0:k.roofType)||"",onChange:ye=>c(le=>({...le,customFields:{...le.customFields,roofType:ye.target.value}})),placeholder:"e.g., Shingle, Metal"})]})]})]}),(l.type===vt.SINGLE_WIDE||l.type===vt.DOUBLE_WIDE||l.type===vt.TRIPLE_WIDE||l.type===vt.PARK_MODEL||l.type===vt.MODULAR_HOME)&&r.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"squareFootage",children:"Square Footage"}),r.jsx(je,{id:"squareFootage",value:((L=l.customFields)==null?void 0:L.squareFootage)||"",onChange:ye=>c(le=>({...le,customFields:{...le.customFields,squareFootage:ye.target.value}}))})]}),r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"constructionType",children:"Construction Type"}),r.jsxs($e,{value:(($=l.customFields)==null?void 0:$.constructionType)||"",onValueChange:ye=>c(le=>({...le,customFields:{...le.customFields,constructionType:ye}})),children:[r.jsx(Fe,{children:r.jsx(Be,{placeholder:"Select type"})}),r.jsxs(Me,{children:[r.jsx(K,{value:"Manufactured",children:"Manufactured"}),r.jsx(K,{value:"Modular",children:"Modular"}),r.jsx(K,{value:"Park Model",children:"Park Model"})]})]})]}),r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"bedrooms",children:"Bedrooms"}),r.jsxs($e,{value:((M=l.customFields)==null?void 0:M.bedrooms)||"",onValueChange:ye=>c(le=>({...le,customFields:{...le.customFields,bedrooms:ye}})),children:[r.jsx(Fe,{children:r.jsx(Be,{placeholder:"Select number"})}),r.jsxs(Me,{children:[r.jsx(K,{value:"1",children:"1"}),r.jsx(K,{value:"2",children:"2"}),r.jsx(K,{value:"3",children:"3"}),r.jsx(K,{value:"4",children:"4"}),r.jsx(K,{value:"5+",children:"5+"})]})]})]}),r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"bathrooms",children:"Bathrooms"}),r.jsxs($e,{value:((B=l.customFields)==null?void 0:B.bathrooms)||"",onValueChange:ye=>c(le=>({...le,customFields:{...le.customFields,bathrooms:ye}})),children:[r.jsx(Fe,{children:r.jsx(Be,{placeholder:"Select number"})}),r.jsxs(Me,{children:[r.jsx(K,{value:"1",children:"1"}),r.jsx(K,{value:"1.5",children:"1.5"}),r.jsx(K,{value:"2",children:"2"}),r.jsx(K,{value:"2.5",children:"2.5"}),r.jsx(K,{value:"3",children:"3"}),r.jsx(K,{value:"3+",children:"3+"})]})]})]}),r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"exteriorSiding",children:"Exterior Siding"}),r.jsx(je,{id:"exteriorSiding",value:((U=l.customFields)==null?void 0:U.exteriorSiding)||"",onChange:ye=>c(le=>({...le,customFields:{...le.customFields,exteriorSiding:ye.target.value}}))})]}),r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"roofType",children:"Roof Type"}),r.jsx(je,{id:"roofType",value:((W=l.customFields)==null?void 0:W.roofType)||"",onChange:ye=>c(le=>({...le,customFields:{...le.customFields,roofType:ye.target.value}}))})]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"text-lg font-semibold",children:"Specifications"}),r.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"exteriorColor",children:"Exterior Color"}),r.jsx(je,{id:"exteriorColor",value:((q=l.customFields)==null?void 0:q.exteriorColor)||"",onChange:ye=>c(le=>({...le,customFields:{...le.customFields,exteriorColor:ye.target.value}}))})]}),r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"interiorColor",children:"Interior Color"}),r.jsx(je,{id:"interiorColor",value:((R=l.customFields)==null?void 0:R.interiorColor)||"",onChange:ye=>c(le=>({...le,customFields:{...le.customFields,interiorColor:ye.target.value}}))})]}),r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"length",children:"Length (ft)"}),r.jsx(je,{id:"length",value:((V=l.customFields)==null?void 0:V.length)||"",onChange:ye=>c(le=>({...le,customFields:{...le.customFields,length:ye.target.value}}))})]}),r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"weight",children:"Weight (lbs)"}),r.jsx(je,{id:"weight",value:((G=l.customFields)==null?void 0:G.weight)||"",onChange:ye=>c(le=>({...le,customFields:{...le.customFields,weight:ye.target.value}}))})]}),r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"sleeps",children:"Sleeps"}),r.jsx(je,{id:"sleeps",value:((ee=l.customFields)==null?void 0:ee.sleeps)||"",onChange:ye=>c(le=>({...le,customFields:{...le.customFields,sleeps:ye.target.value}}))})]}),r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"slideouts",children:"Slideouts"}),r.jsx(je,{id:"slideouts",value:((re=l.customFields)==null?void 0:re.slideouts)||"",onChange:ye=>c(le=>({...le,customFields:{...le.customFields,slideouts:ye.target.value}}))})]}),r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"fuelType",children:"Fuel Type"}),r.jsxs($e,{value:((de=l.customFields)==null?void 0:de.fuelType)||"",onValueChange:ye=>c(le=>({...le,customFields:{...le.customFields,fuelType:ye}})),children:[r.jsx(Fe,{children:r.jsx(Be,{placeholder:"Select fuel type"})}),r.jsxs(Me,{children:[r.jsx(K,{value:"",children:"Not Applicable"}),r.jsx(K,{value:"gasoline",children:"Gasoline"}),r.jsx(K,{value:"diesel",children:"Diesel"}),r.jsx(K,{value:"propane",children:"Propane"})]})]})]}),r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"mileage",children:"Mileage"}),r.jsx(je,{id:"mileage",value:((ue=l.customFields)==null?void 0:ue.mileage)||"",onChange:ye=>c(le=>({...le,customFields:{...le.customFields,mileage:ye.target.value}}))})]}),r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"condition",children:"Condition"}),r.jsxs($e,{value:((oe=l.customFields)==null?void 0:oe.condition)||"New",onValueChange:ye=>c(le=>({...le,customFields:{...le.customFields,condition:ye}})),children:[r.jsx(Fe,{children:r.jsx(Be,{})}),r.jsxs(Me,{children:[r.jsx(K,{value:"New",children:"New"}),r.jsx(K,{value:"Used",children:"Used"}),r.jsx(K,{value:"Certified Pre-Owned",children:"Certified Pre-Owned"})]})]})]})]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"text-lg font-semibold",children:"Images"}),r.jsxs("div",{...g(),className:"border-2 border-dashed rounded-lg p-6 text-center cursor-pointer hover:bg-muted/10",children:[r.jsx("input",{...p()}),r.jsx(Zf,{className:"h-8 w-8 mx-auto mb-2 text-muted-foreground"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Drag & drop images here, or click to select files"})]}),l.images&&l.images.length>0&&r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mt-4",children:l.images.map((ye,le)=>r.jsxs("div",{className:"relative group",children:[r.jsx("img",{src:ye,alt:`Vehicle ${le+1}`,className:"h-24 w-full object-cover rounded-md"}),r.jsx(J,{type:"button",variant:"destructive",size:"sm",className:"absolute top-1 right-1 opacity-0 group-hover:opacity-100 transition-opacity",onClick:()=>E(ye),children:r.jsx($t,{className:"h-3 w-3"})})]},le))})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"text-lg font-semibold",children:"Videos"}),r.jsxs("div",{className:"flex space-x-2",children:[r.jsx(je,{value:u,onChange:ye=>m(ye.target.value),placeholder:"Add a video URL (YouTube, Vimeo, etc.)",onKeyDown:ye=>{ye.key==="Enter"&&(ye.preventDefault(),j())}}),r.jsx(J,{type:"button",onClick:j,children:r.jsx(Nt,{className:"h-4 w-4"})})]}),r.jsxs("div",{className:"space-y-2",children:[(ve=(ge=l.customFields)==null?void 0:ge.videos)==null?void 0:ve.map((ye,le)=>r.jsxs("div",{className:"flex items-center justify-between p-2 bg-muted/30 rounded-md",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx(hy,{className:"h-4 w-4 mr-2 text-blue-500"}),r.jsx("a",{href:ye,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-blue-600 hover:underline truncate max-w-md",children:ye})]}),r.jsx(J,{type:"button",variant:"ghost",size:"sm",onClick:()=>C(ye),children:r.jsx($t,{className:"h-4 w-4"})})]},le)),(!((xe=l.customFields)!=null&&xe.videos)||l.customFields.videos.length===0)&&r.jsx("div",{className:"text-sm text-muted-foreground",children:"No videos added yet"})]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"text-lg font-semibold",children:"Notes"}),r.jsx(Xt,{value:((Oe=l.customFields)==null?void 0:Oe.notes)||"",onChange:ye=>c(le=>({...le,customFields:{...le.customFields,notes:ye.target.value}})),placeholder:"Add any additional notes about this vehicle...",rows:3})]}),r.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t",children:[r.jsx(J,{type:"button",variant:"outline",onClick:n,disabled:i,children:"Cancel"}),r.jsx(J,{type:"submit",disabled:i,children:i?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),e?"Updating...":"Creating..."]}):r.jsxs(r.Fragment,{children:[r.jsx(Pr,{className:"h-4 w-4 mr-2"}),e?"Update":"Create"," Home"]})})]})]})})]}),h&&r.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-[60]",children:r.jsxs(fe,{className:"w-full max-w-md",children:[r.jsxs(we,{children:[r.jsx(Ne,{children:"Scan VIN Barcode"}),r.jsx(Ue,{children:"Position the barcode in front of your camera"})]}),r.jsxs(me,{className:"space-y-4",children:[r.jsx("div",{className:"bg-black h-64 flex items-center justify-center rounded-md",children:r.jsx(ul,{className:"h-12 w-12 text-white/50"})}),r.jsxs("div",{className:"flex justify-end space-x-2",children:[r.jsx(J,{variant:"outline",onClick:()=>x(!1),children:"Cancel"}),r.jsx(J,{onClick:()=>{S("1FDXE4FS8KDC"+Math.floor(Math.random()*1e5).toString().padStart(5,"0"))},children:"Simulate Scan"})]})]})]})})]})}function Kre({vehicle:e,onClose:t,onEdit:n}){var i,o,l,c,d,f,u,m,h,x,g,p,v,y,b,j,C,E,S,N,I,D,T;const a=A=>{switch(A){case Yt.AVAILABLE:return"bg-green-50 text-green-700 border-green-200";case Yt.RESERVED:return"bg-yellow-50 text-yellow-700 border-yellow-200";case Yt.SOLD:return"bg-blue-50 text-blue-700 border-blue-200";case Yt.SERVICE:return"bg-orange-50 text-orange-700 border-orange-200";case Yt.DELIVERED:return"bg-purple-50 text-purple-700 border-purple-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},s=A=>A.replace("_"," ").toUpperCase();return r.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:r.jsxs(fe,{className:"w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[r.jsx(we,{children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsxs(Ne,{className:"text-xl",children:[e.year," ",e.make," ",e.model]}),r.jsxs(Ue,{children:["VIN: ",e.vin]})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsxs(J,{onClick:()=>{t(),n(e)},size:"sm",children:[r.jsx(Br,{className:"h-4 w-4 mr-2"}),"Edit Home/RV"]}),r.jsx(J,{variant:"ghost",size:"sm",onClick:t,children:r.jsx($t,{className:"h-4 w-4"})})]})]})}),r.jsxs(me,{className:"space-y-6",children:[r.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[r.jsx(ze,{className:He("ri-badge-status",a(e.status)),children:e.status.toUpperCase()}),r.jsx(ze,{variant:"outline",children:s(e.type)}),r.jsx("div",{className:"ml-auto font-bold text-lg text-primary",children:De(e.price)})]}),r.jsxs(lr,{defaultValue:"details",className:"space-y-4",children:[r.jsxs(or,{children:[r.jsx(Ke,{value:"details",children:"Details"}),r.jsx(Ke,{value:"images",children:"Images"}),r.jsx(Ke,{value:"features",children:"Features"}),r.jsx(Ke,{value:"videos",children:"Videos"}),r.jsx(Ke,{value:"notes",children:"Notes"})]}),r.jsxs(Je,{value:"details",className:"space-y-4",children:[r.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Make"}),r.jsx("p",{className:"font-medium",children:e.make})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Model"}),r.jsx("p",{className:"font-medium",children:e.model})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Year"}),r.jsx("p",{className:"font-medium",children:e.year})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"VIN"}),r.jsx("p",{className:"font-medium font-mono",children:e.vin})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Type"}),r.jsx("p",{className:"font-medium",children:s(e.type)})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Location"}),r.jsx("p",{className:"font-medium",children:e.location})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Price"}),r.jsx("p",{className:"font-medium text-primary",children:De(e.price)})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Cost"}),r.jsx("p",{className:"font-medium",children:De(e.cost)})]})]}),r.jsxs("div",{className:"mt-6",children:[r.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Specifications"}),r.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[((i=e.customFields)==null?void 0:i.exteriorColor)&&r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Exterior Color"}),r.jsx("p",{className:"font-medium",children:e.customFields.exteriorColor})]}),((o=e.customFields)==null?void 0:o.interiorColor)&&r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Interior Color"}),r.jsx("p",{className:"font-medium",children:e.customFields.interiorColor})]}),((l=e.customFields)==null?void 0:l.length)&&r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Length"}),r.jsxs("p",{className:"font-medium",children:[e.customFields.length," ft"]})]}),((c=e.customFields)==null?void 0:c.weight)&&r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Weight"}),r.jsxs("p",{className:"font-medium",children:[e.customFields.weight," lbs"]})]}),((d=e.customFields)==null?void 0:d.sleeps)&&r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Sleeps"}),r.jsx("p",{className:"font-medium",children:e.customFields.sleeps})]}),((f=e.customFields)==null?void 0:f.slideouts)&&r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Slideouts"}),r.jsx("p",{className:"font-medium",children:e.customFields.slideouts})]}),((u=e.customFields)==null?void 0:u.fuelType)&&r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Fuel Type"}),r.jsx("p",{className:"font-medium",children:e.customFields.fuelType})]}),((m=e.customFields)==null?void 0:m.mileage)&&r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Mileage"}),r.jsx("p",{className:"font-medium",children:e.customFields.mileage})]}),((h=e.customFields)==null?void 0:h.condition)&&r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Condition"}),r.jsx("p",{className:"font-medium",children:e.customFields.condition})]}),(e.type===vt.SINGLE_WIDE||e.type===vt.DOUBLE_WIDE||e.type===vt.TRIPLE_WIDE||e.type===vt.PARK_MODEL||e.type===vt.MODULAR_HOME)&&r.jsxs(r.Fragment,{children:[((x=e.customFields)==null?void 0:x.squareFootage)&&r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Square Footage"}),r.jsxs("p",{className:"font-medium",children:[e.customFields.squareFootage," sq ft"]})]}),((g=e.customFields)==null?void 0:g.bedrooms)&&r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Bedrooms"}),r.jsx("p",{className:"font-medium",children:e.customFields.bedrooms})]}),((p=e.customFields)==null?void 0:p.bathrooms)&&r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Bathrooms"}),r.jsx("p",{className:"font-medium",children:e.customFields.bathrooms})]}),((v=e.customFields)==null?void 0:v.constructionType)&&r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Construction Type"}),r.jsx("p",{className:"font-medium",children:e.customFields.constructionType})]}),((y=e.customFields)==null?void 0:y.exteriorSiding)&&r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Exterior Siding"}),r.jsx("p",{className:"font-medium",children:e.customFields.exteriorSiding})]}),((b=e.customFields)==null?void 0:b.roofType)&&r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Roof Type"}),r.jsx("p",{className:"font-medium",children:e.customFields.roofType})]})]}),(e.type===vt.SINGLE_WIDE||e.type===vt.DOUBLE_WIDE||e.type===vt.TRIPLE_WIDE||e.type===vt.PARK_MODEL||e.type===vt.MODULAR_HOME)&&r.jsxs(r.Fragment,{children:[((j=e.customFields)==null?void 0:j.squareFootage)&&r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Square Footage"}),r.jsxs("p",{className:"font-medium",children:[e.customFields.squareFootage," sq ft"]})]}),((C=e.customFields)==null?void 0:C.bedrooms)&&r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Bedrooms"}),r.jsx("p",{className:"font-medium",children:e.customFields.bedrooms})]}),((E=e.customFields)==null?void 0:E.bathrooms)&&r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Bathrooms"}),r.jsx("p",{className:"font-medium",children:e.customFields.bathrooms})]}),((S=e.customFields)==null?void 0:S.constructionType)&&r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Construction Type"}),r.jsx("p",{className:"font-medium",children:e.customFields.constructionType})]}),((N=e.customFields)==null?void 0:N.exteriorSiding)&&r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Exterior Siding"}),r.jsx("p",{className:"font-medium",children:e.customFields.exteriorSiding})]}),((I=e.customFields)==null?void 0:I.roofType)&&r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Roof Type"}),r.jsx("p",{className:"font-medium",children:e.customFields.roofType})]})]})]})]})]}),r.jsx(Je,{value:"images",children:e.images&&e.images.length>0?r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:e.images.map((A,_)=>r.jsx("div",{className:"overflow-hidden rounded-md",children:r.jsx("img",{src:A,alt:`${e.make} ${e.model} ${_+1}`,className:"w-full h-auto object-cover hover:scale-105 transition-transform duration-300"})},_))}):r.jsxs("div",{className:"text-center py-12 text-muted-foreground border-2 border-dashed rounded-lg",children:[r.jsx(Zf,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),r.jsx("p",{children:"No images available"})]})}),r.jsx(Je,{value:"features",children:e.features&&e.features.length>0?r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:e.features.map((A,_)=>r.jsxs("div",{className:"flex items-center p-2 bg-muted/30 rounded-md",children:[r.jsx(Ra,{className:"h-4 w-4 mr-2 text-primary"}),r.jsx("span",{children:A})]},_))}):r.jsxs("div",{className:"text-center py-12 text-muted-foreground border-2 border-dashed rounded-lg",children:[r.jsx(Ra,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),r.jsx("p",{children:"No features listed"})]})}),r.jsx(Je,{value:"videos",children:(D=e.customFields)!=null&&D.videos&&e.customFields.videos.length>0?r.jsx("div",{className:"space-y-4",children:e.customFields.videos.map((A,_)=>r.jsx("div",{className:"p-3 bg-muted/30 rounded-md",children:r.jsxs("div",{className:"flex items-center mb-2",children:[r.jsx(hy,{className:"h-4 w-4 mr-2 text-primary"}),r.jsxs("a",{href:A,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline",children:["Video ",_+1]})]})},_))}):r.jsxs("div",{className:"text-center py-12 text-muted-foreground border-2 border-dashed rounded-lg",children:[r.jsx(hy,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),r.jsx("p",{children:"No videos available"})]})}),r.jsx(Je,{value:"notes",children:(T=e.customFields)!=null&&T.notes?r.jsx("div",{className:"p-4 bg-muted/30 rounded-md whitespace-pre-wrap",children:e.customFields.notes}):r.jsxs("div",{className:"text-center py-12 text-muted-foreground border-2 border-dashed rounded-lg",children:[r.jsx(qa,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),r.jsx("p",{children:"No notes available"})]})})]}),r.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t",children:[r.jsx(J,{variant:"outline",onClick:t,children:"Close"}),r.jsxs(J,{onClick:()=>n(e),children:[r.jsx(Br,{className:"h-4 w-4 mr-2"}),"Edit Home/RV"]})]})]})]})})}function Yre({onImport:e,onCancel:t}){const{toast:n}=Ct(),[a,s]=w.useState(null),[i,o]=w.useState([]),[l,c]=w.useState({}),[d,f]=w.useState(!1),[u,m]=w.useState("upload"),[h,x]=w.useState([]),g=["vin","make","model","year","price","cost"],p=[{key:"vin",label:"VIN"},{key:"make",label:"Make"},{key:"model",label:"Model"},{key:"year",label:"Year"},{key:"type",label:"Type"},{key:"status",label:"Status"},{key:"price",label:"Price"},{key:"cost",label:"Cost"},{key:"location",label:"Location"},{key:"features",label:"Features"},{key:"exteriorColor",label:"Exterior Color"},{key:"interiorColor",label:"Interior Color"},{key:"length",label:"Length"},{key:"weight",label:"Weight"},{key:"sleeps",label:"Sleeps"},{key:"slideouts",label:"Slideouts"},{key:"fuelType",label:"Fuel Type"},{key:"mileage",label:"Mileage"},{key:"condition",label:"Condition"}],v=I=>{var T;const D=(T=I.target.files)==null?void 0:T[0];D&&(s(D),rm.parse(D,{header:!0,skipEmptyLines:!0,complete:A=>{if(o(A.data),A.meta.fields){const _={};A.meta.fields.forEach(k=>{const L=k.toLowerCase().replace(/[^a-z0-9]/g,"");p.forEach($=>{const M=$.key.toLowerCase();(L===M||L===$.label.toLowerCase().replace(/[^a-z0-9]/g,""))&&(_[k]=$.key)})}),c(_)}m("map")},error:A=>{n({title:"Error Parsing CSV",description:A.message,variant:"destructive"})}}))},y=(I,D)=>{c(T=>({...T,[I]:D}))},b=()=>{if(g.filter(D=>Object.values(l).includes(D)).length<g.length){n({title:"Missing Required Fields",description:`Please map all required fields: ${g.join(", ")}`,variant:"destructive"});return}m("preview"),x(i.map((D,T)=>T))},j=I=>{x(I?i.map((D,T)=>T):[])},C=I=>{h.includes(I)?x(h.filter(D=>D!==I)):x([...h,I])},E=async()=>{if(h.length===0){n({title:"No Rows Selected",description:"Please select at least one row to import",variant:"destructive"});return}f(!0);try{const I=h.map(D=>{const T=i[D],A={images:[],features:[],customFields:{}};return Object.entries(l).forEach(([_,k])=>{const L=T[_];k==="features"?A.features=L?L.split(",").map($=>$.trim()):[]:k==="year"||k==="price"||k==="cost"?A[k]=parseFloat(L)||0:k==="type"?A.type=S(L):k==="status"?A.status=N(L):["exteriorColor","interiorColor","length","weight","sleeps","slideouts","fuelType","mileage","condition"].includes(k)?A.customFields={...A.customFields,[k]:L}:A[k]=L}),A});await e(I),n({title:"Import Successful",description:`Imported ${I.length} vehicles`})}catch{n({title:"Import Failed",description:"There was an error importing the vehicles",variant:"destructive"})}finally{f(!1)}},S=I=>{const D=I.toLowerCase().replace(/[^a-z0-9]/g,"");return D.includes("motorhome")?vt.MOTORHOME:D.includes("travel")&&D.includes("trailer")?vt.TRAVEL_TRAILER:D.includes("fifth")&&D.includes("wheel")?vt.FIFTH_WHEEL:D.includes("toy")&&D.includes("hauler")?vt.TOY_HAULER:vt.RV},N=I=>{const D=I.toLowerCase().replace(/[^a-z0-9]/g,"");return D.includes("reserved")?Yt.RESERVED:D.includes("sold")?Yt.SOLD:D.includes("service")?Yt.SERVICE:D.includes("delivered")?Yt.DELIVERED:Yt.AVAILABLE};return r.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:r.jsxs(fe,{className:"w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[r.jsx(we,{children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx(Ne,{children:"Import Inventory from CSV"}),r.jsxs(Ue,{children:[u==="upload"&&"Upload a CSV file with your inventory data",u==="map"&&"Map CSV columns to vehicle fields",u==="preview"&&"Preview and select vehicles to import"]})]}),r.jsx(J,{variant:"ghost",size:"sm",onClick:t,children:r.jsx($t,{className:"h-4 w-4"})})]})}),r.jsxs(me,{children:[u==="upload"&&r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"border-2 border-dashed rounded-lg p-6 text-center",children:[r.jsx(qa,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),r.jsx("p",{className:"text-muted-foreground mb-4",children:"Upload a CSV file with your inventory data"}),r.jsx(je,{type:"file",accept:".csv",onChange:v,className:"max-w-sm mx-auto"})]}),r.jsxs("div",{className:"bg-muted/30 p-4 rounded-lg",children:[r.jsx("h3",{className:"font-medium mb-2",children:"CSV Format Guidelines"}),r.jsxs("ul",{className:"text-sm space-y-1 text-muted-foreground",children:[r.jsx("li",{children:"• File should be in CSV format"}),r.jsx("li",{children:"• First row should contain column headers"}),r.jsx("li",{children:"• Required fields: VIN, Make, Model, Year, Price, Cost"}),r.jsx("li",{children:"• Features should be comma-separated within quotes"})]})]}),r.jsx("div",{className:"flex justify-end",children:r.jsx(J,{variant:"outline",onClick:t,children:"Cancel"})})]}),u==="map"&&r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"bg-muted/30 p-4 rounded-lg",children:[r.jsxs("h3",{className:"font-medium mb-2 flex items-center",children:[r.jsx(qa,{className:"h-4 w-4 mr-2"}),a==null?void 0:a.name]}),r.jsxs("p",{className:"text-sm text-muted-foreground",children:[i.length," rows found"]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"font-medium",children:"Map CSV Columns to Vehicle Fields"}),r.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Required fields are marked with *"}),r.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto p-2",children:a&&i.length>0&&Object.keys(i[0]).map(I=>r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsx("div",{className:"w-1/3 font-medium truncate",children:I}),r.jsx("div",{className:"w-2/3",children:r.jsxs("select",{value:l[I]||"",onChange:D=>y(I,D.target.value),className:"w-full p-2 border rounded-md",children:[r.jsx("option",{value:"",children:"-- Skip this field --"}),p.map(D=>r.jsxs("option",{value:D.key,children:[D.label," ",g.includes(D.key)?"*":""]},D.key))]})})]},I))})]}),r.jsxs("div",{className:"flex justify-end space-x-3",children:[r.jsx(J,{variant:"outline",onClick:t,children:"Cancel"}),r.jsx(J,{onClick:b,children:"Preview Data"})]})]}),u==="preview"&&r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(St,{checked:h.length===i.length,onCheckedChange:j}),r.jsxs(Z,{children:["Select All (",i.length," vehicles)"]})]}),r.jsxs(ze,{children:[h.length," selected"]})]}),r.jsx("div",{className:"border rounded-md overflow-hidden",children:r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{className:"bg-muted/50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"p-2 text-left"}),Object.entries(l).filter(([I,D])=>D).map(([I,D])=>r.jsxs("th",{className:"p-2 text-left text-sm",children:[D,g.includes(D)&&r.jsx("span",{className:"text-red-500",children:"*"})]},I))]})}),r.jsx("tbody",{children:i.map((I,D)=>r.jsxs("tr",{className:"border-t hover:bg-muted/10",children:[r.jsx("td",{className:"p-2",children:r.jsx(St,{checked:h.includes(D),onCheckedChange:()=>C(D)})}),Object.entries(l).filter(([T,A])=>A).map(([T,A])=>r.jsx("td",{className:"p-2 text-sm",children:I[T]||r.jsx("span",{className:"text-muted-foreground italic",children:"Empty"})},T))]},D))})]})})}),r.jsxs("div",{className:"flex justify-end space-x-3",children:[r.jsx(J,{variant:"outline",onClick:()=>m("map"),children:"Back to Mapping"}),r.jsx(J,{onClick:E,disabled:d,children:d?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Importing..."]}):r.jsxs(r.Fragment,{children:[r.jsx(BA,{className:"h-4 w-4 mr-2"}),"Import ",h.length," Vehicles"]})})]})]})]})]})})}function Xre({onScan:e,onClose:t}){const{toast:n}=Ct(),[a,s]=w.useState(!1),[i,o]=w.useState(null);w.useEffect(()=>{const d=setTimeout(()=>{s(!0)},1e3);return()=>clearTimeout(d)},[]);const l=()=>{const d="ABCDEFGHJKLMNPRSTUVWXYZ0123456789";let f="";for(let u=0;u<17;u++)f+=d.charAt(Math.floor(Math.random()*d.length));o(f),n({title:"Barcode Scanned",description:`VIN: ${f}`})},c=()=>{i&&e(i)};return r.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-[60]",children:r.jsxs(fe,{className:"w-full max-w-md",children:[r.jsx(we,{children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx(Ne,{children:"Scan VIN Barcode"}),r.jsx(Ue,{children:"Position the barcode in front of your camera"})]}),r.jsx(J,{variant:"ghost",size:"sm",onClick:t,children:r.jsx($t,{className:"h-4 w-4"})})]})}),r.jsxs(me,{className:"space-y-4",children:[r.jsx("div",{className:"bg-black h-64 flex items-center justify-center rounded-md relative",children:a?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:r.jsx("div",{className:"w-3/4 h-1 bg-red-500 animate-pulse"})}),r.jsx("div",{className:"text-white text-sm absolute bottom-2 left-2",children:i?`Scanned: ${i}`:"Scanning..."})]}):r.jsx(ul,{className:"h-12 w-12 text-white/50"})}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx(J,{variant:"outline",onClick:t,children:"Cancel"}),i?r.jsxs(J,{onClick:c,children:[r.jsx(n1,{className:"h-4 w-4 mr-2"}),"Confirm"]}):r.jsx(J,{onClick:l,children:"Simulate Scan"})]})]})]})})}function WT(){const{vehicles:e,createVehicle:t,updateVehicleStatus:n,deleteVehicle:a}=Ol(),{toast:s}=Ct(),[i,o]=w.useState(!1),[l,c]=w.useState(!1),[d,f]=w.useState(!1),[u,m]=w.useState(!1),[h,x]=w.useState(null),g=()=>{x(null),o(!0)},p=S=>{x(S),o(!0)},v=S=>{x(S),c(!0)},y=async S=>{if(window.confirm("Are you sure you want to delete this vehicle?"))try{await a(S),s({title:"Vehicle Deleted",description:"The vehicle has been removed from inventory"})}catch{s({title:"Error",description:"Failed to delete vehicle",variant:"destructive"})}},b=async(S,N)=>{try{await n(S,N),s({title:"Status Updated",description:`Vehicle status changed to ${N}`})}catch{s({title:"Error",description:"Failed to update vehicle status",variant:"destructive"})}},j=async S=>{try{h?(await n(h.id,S.status||h.status),s({title:"Vehicle Updated",description:"Vehicle information has been updated"})):(await t(S),s({title:"Vehicle Added",description:"New vehicle has been added to inventory"})),o(!1),x(null)}catch{s({title:"Error",description:`Failed to ${h?"update":"create"} vehicle`,variant:"destructive"})}},C=async S=>{try{for(const N of S)await t(N);f(!1),s({title:"Import Successful",description:`Imported ${S.length} vehicles`})}catch{s({title:"Import Failed",description:"There was an error importing the vehicles",variant:"destructive"})}},E=S=>{const N=e.find(I=>I.vin===S);N?(x(N),c(!0),s({title:"Vehicle Found",description:`Found existing vehicle with VIN: ${S}`})):(x(null),o(!0),setTimeout(()=>{const I=document.getElementById("vin");if(I){I.value=S;const D=new Event("input",{bubbles:!0});I.dispatchEvent(D)}},100),s({title:"New VIN Scanned",description:`Creating new vehicle with VIN: ${S}`})),m(!1)};return r.jsxs("div",{className:"space-y-8",children:[i&&r.jsx(Gre,{vehicle:h||void 0,onSave:j,onCancel:()=>{o(!1),x(null)}}),l&&h&&r.jsx(Kre,{vehicle:h,onClose:()=>c(!1),onEdit:p}),d&&r.jsx(Yre,{onImport:C,onCancel:()=>f(!1)}),u&&r.jsx(Xre,{onScan:E,onClose:()=>m(!1)}),r.jsx("div",{className:"ri-page-header",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"ri-page-title",children:"Inventory Management"}),r.jsx("p",{className:"ri-page-description",children:"Manage your RV and motorhome inventory"})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs(J,{variant:"outline",onClick:()=>m(!0),children:[r.jsx(mF,{className:"h-4 w-4 mr-2"}),"Scan Barcode"]}),r.jsxs(J,{variant:"outline",onClick:()=>f(!0),children:[r.jsx(BA,{className:"h-4 w-4 mr-2"}),"Import CSV"]}),r.jsxs(J,{onClick:g,children:[r.jsx(Nt,{className:"h-4 w-4 mr-2"}),"Add Home"]})]})]})}),r.jsxs("div",{className:"ri-stats-grid",children:[r.jsxs(fe,{className:"shadow-sm border-0 bg-gradient-to-br from-blue-50 to-blue-100/50",children:[r.jsxs(we,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(Ne,{className:"text-sm font-medium text-blue-900",children:"Total Units"}),r.jsx(Ra,{className:"h-4 w-4 text-blue-600"})]}),r.jsxs(me,{children:[r.jsx("div",{className:"text-2xl font-bold text-blue-900",children:e.length}),r.jsxs("p",{className:"text-xs text-blue-600 flex items-center mt-1",children:[r.jsx(Ot,{className:"h-3 w-3 mr-1"}),"+5 units this month"]})]})]}),r.jsxs(fe,{className:"shadow-sm border-0 bg-gradient-to-br from-green-50 to-green-100/50",children:[r.jsxs(we,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(Ne,{className:"text-sm font-medium text-green-900",children:"Available"}),r.jsx(Ra,{className:"h-4 w-4 text-green-600"})]}),r.jsxs(me,{children:[r.jsx("div",{className:"text-2xl font-bold text-green-900",children:e.filter(S=>S.status===Yt.AVAILABLE).length}),r.jsxs("p",{className:"text-xs text-green-600 flex items-center mt-1",children:[r.jsx(Ot,{className:"h-3 w-3 mr-1"}),"Ready for sale"]})]})]}),r.jsxs(fe,{className:"shadow-sm border-0 bg-gradient-to-br from-yellow-50 to-yellow-100/50",children:[r.jsxs(we,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(Ne,{className:"text-sm font-medium text-yellow-900",children:"Reserved"}),r.jsx(Ra,{className:"h-4 w-4 text-yellow-600"})]}),r.jsxs(me,{children:[r.jsx("div",{className:"text-2xl font-bold text-yellow-900",children:e.filter(S=>S.status===Yt.RESERVED).length}),r.jsxs("p",{className:"text-xs text-yellow-600 flex items-center mt-1",children:[r.jsx(Ot,{className:"h-3 w-3 mr-1"}),"Pending sale"]})]})]}),r.jsxs(fe,{className:"shadow-sm border-0 bg-gradient-to-br from-purple-50 to-purple-100/50",children:[r.jsxs(we,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(Ne,{className:"text-sm font-medium text-purple-900",children:"Total Value"}),r.jsx(Mt,{className:"h-4 w-4 text-purple-600"})]}),r.jsxs(me,{children:[r.jsx("div",{className:"text-2xl font-bold text-purple-900",children:De(e.reduce((S,N)=>S+N.price,0))}),r.jsxs("p",{className:"text-xs text-purple-600 flex items-center mt-1",children:[r.jsx(Ot,{className:"h-3 w-3 mr-1"}),"Inventory value"]})]})]})]}),r.jsx(Kte,{vehicles:e,onEdit:p,onDelete:y,onView:v,onStatusChange:b})]})}function Qre(){return r.jsxs(Ka,{children:[r.jsx(Vt,{path:"/",element:r.jsx(WT,{})}),r.jsx(Vt,{path:"/*",element:r.jsx(WT,{})})]})}const Jre=[{id:"1",customerId:"cust-1",vehicleId:"veh-1",items:[{id:"1",description:"2024 Forest River Georgetown",quantity:1,unitPrice:125e3,total:125e3},{id:"2",description:"Extended Warranty",quantity:1,unitPrice:2500,total:2500}],subtotal:127500,tax:10200,total:137700,status:ti.SENT,validUntil:new Date("2024-02-15"),notes:"Customer interested in financing options",customFields:{},createdAt:new Date("2024-01-15"),updatedAt:new Date("2024-01-16")},{id:"2",customerId:"cust-2",vehicleId:"veh-2",items:[{id:"3",description:"2023 Winnebago View",quantity:1,unitPrice:89e3,total:89e3}],subtotal:89e3,tax:7120,total:96120,status:ti.ACCEPTED,validUntil:new Date("2024-02-20"),notes:"Ready to proceed with purchase",customFields:{},createdAt:new Date("2024-01-12"),updatedAt:new Date("2024-01-18")}];function Zre({quote:e,onClose:t,onEdit:n}){const a=s=>{switch(s){case"draft":return"bg-gray-50 text-gray-700 border-gray-200";case"sent":return"bg-blue-50 text-blue-700 border-blue-200";case"viewed":return"bg-yellow-50 text-yellow-700 border-yellow-200";case"accepted":return"bg-green-50 text-green-700 border-green-200";case"rejected":return"bg-red-50 text-red-700 border-red-200";case"expired":return"bg-orange-50 text-orange-700 border-orange-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}};return r.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:r.jsxs(fe,{className:"w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[r.jsx(we,{children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsxs(Ne,{className:"text-xl",children:["Quote #",e.id]}),r.jsx(Ue,{children:"Quote details and line items"})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsxs(J,{onClick:()=>n(e),size:"sm",children:[r.jsx(Br,{className:"h-4 w-4 mr-2"}),"Edit Quote"]}),r.jsx(J,{variant:"ghost",size:"sm",onClick:t,children:r.jsx($t,{className:"h-4 w-4"})})]})]})}),r.jsxs(me,{className:"space-y-6",children:[r.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Customer ID"}),r.jsx("p",{className:"font-medium",children:e.customerId})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Status"}),r.jsx("div",{className:"mt-1",children:r.jsx(ze,{className:He("ri-badge-status",a(e.status)),children:e.status.toUpperCase()})})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Created Date"}),r.jsx("p",{className:"font-medium",children:lt(e.createdAt)})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Valid Until"}),r.jsx("p",{className:"font-medium",children:lt(e.validUntil)})]})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Line Items"}),r.jsx("div",{className:"space-y-3",children:e.items.map((s,i)=>r.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("h4",{className:"font-medium",children:s.description}),r.jsxs("p",{className:"text-sm text-muted-foreground",children:["Quantity: ",s.quantity," × ",De(s.unitPrice)]})]}),r.jsx("div",{className:"text-right",children:r.jsx("div",{className:"font-bold text-lg",children:De(s.total)})})]},s.id))})]}),r.jsx("div",{className:"bg-muted/30 p-4 rounded-lg",children:r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:"Subtotal:"}),r.jsx("span",{children:De(e.subtotal)})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:"Tax:"}),r.jsx("span",{children:De(e.tax)})]}),r.jsxs("div",{className:"flex justify-between text-lg font-bold border-t pt-2",children:[r.jsx("span",{children:"Total:"}),r.jsx("span",{children:De(e.total)})]})]})}),e.notes&&r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Notes"}),r.jsx("div",{className:"mt-1 p-3 bg-muted/30 rounded-md",children:r.jsx("p",{className:"text-sm",children:e.notes})})]})]})]})})}function HT(){const{toast:e}=Ct(),[t,n]=w.useState(Jre),[a,s]=w.useState(""),[i,o]=w.useState("all"),[l,c]=w.useState(!1),[d,f]=w.useState(null),[u,m]=w.useState(null),[h,x]=w.useState(""),g=D=>{switch(D){case ti.DRAFT:return"bg-gray-50 text-gray-700 border-gray-200";case ti.SENT:return"bg-blue-50 text-blue-700 border-blue-200";case ti.VIEWED:return"bg-yellow-50 text-yellow-700 border-yellow-200";case ti.ACCEPTED:return"bg-green-50 text-green-700 border-green-200";case ti.REJECTED:return"bg-red-50 text-red-700 border-red-200";case ti.EXPIRED:return"bg-orange-50 text-orange-700 border-orange-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},p=t.filter(D=>{const T=D.id.toLowerCase().includes(a.toLowerCase())||D.customerId.toLowerCase().includes(a.toLowerCase()),A=i==="all"||D.status===i;return T&&A}),v=()=>{f(null),x(""),c(!0)},y=D=>{f(D),x(D.customerId),c(!0)},b=D=>{m(D)},j=()=>m(null),C=async D=>{try{if(d)n(T=>T.map(A=>A.id===d.id?{...A,...D,updatedAt:new Date}:A)),e({title:"Success",description:"Quote updated successfully"});else{const T={id:Math.random().toString(36).substr(2,9),...D,status:ti.DRAFT,createdAt:new Date,updatedAt:new Date};n(A=>[...A,T]),e({title:"Success",description:"Quote created successfully"})}c(!1),f(null)}catch{e({title:"Error",description:"Failed to save quote",variant:"destructive"})}},E=async D=>{try{n(T=>T.map(A=>A.id===D?{...A,status:ti.SENT,updatedAt:new Date}:A)),e({title:"Success",description:"Quote sent to customer"})}catch{e({title:"Error",description:"Failed to send quote",variant:"destructive"})}},S=async D=>{try{const T=t.find(A=>A.id===D);if(T){const A={...T,id:Math.random().toString(36).substr(2,9),status:ti.DRAFT,createdAt:new Date,updatedAt:new Date};n(_=>[..._,A]),e({title:"Success",description:"Quote duplicated successfully"})}}catch{e({title:"Error",description:"Failed to duplicate quote",variant:"destructive"})}},N=async D=>{if(window.confirm("Are you sure you want to delete this quote?"))try{n(T=>T.filter(A=>A.id!==D)),e({title:"Success",description:"Quote deleted successfully"})}catch{e({title:"Error",description:"Failed to delete quote",variant:"destructive"})}},I={total:t.length,draft:t.filter(D=>D.status==="draft").length,sent:t.filter(D=>D.status==="sent").length,accepted:t.filter(D=>D.status==="accepted").length,totalValue:t.reduce((D,T)=>D+T.total,0),acceptedValue:t.filter(D=>D.status==="accepted").reduce((D,T)=>D+T.total,0)};return r.jsxs("div",{className:"space-y-8",children:[l&&r.jsx(T$,{quote:d,customerId:h,onSave:C,onCancel:()=>{c(!1),f(null)}}),u&&r.jsx(Zre,{quote:u,onClose:j,onEdit:y}),r.jsx("div",{className:"ri-page-header",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"ri-page-title",children:"Quote Builder"}),r.jsx("p",{className:"ri-page-description",children:"Create and manage customer quotes with advanced pricing rules"})]}),r.jsxs(J,{className:"shadow-sm",onClick:v,children:[r.jsx(Nt,{className:"h-4 w-4 mr-2"}),"New Quote"]})]})}),r.jsxs("div",{className:"ri-stats-grid",children:[r.jsxs(fe,{className:"shadow-sm border-0 bg-gradient-to-br from-blue-50 to-blue-100/50",children:[r.jsxs(we,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(Ne,{className:"text-sm font-medium text-blue-900",children:"Total Quotes"}),r.jsx(qa,{className:"h-4 w-4 text-blue-600"})]}),r.jsxs(me,{children:[r.jsx("div",{className:"text-2xl font-bold text-blue-900",children:I.total}),r.jsxs("p",{className:"text-xs text-blue-600 flex items-center mt-1",children:[r.jsx(Ot,{className:"h-3 w-3 mr-1"}),"All quotes"]})]})]}),r.jsxs(fe,{className:"shadow-sm border-0 bg-gradient-to-br from-yellow-50 to-yellow-100/50",children:[r.jsxs(we,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(Ne,{className:"text-sm font-medium text-yellow-900",children:"Pending"}),r.jsx(qa,{className:"h-4 w-4 text-yellow-600"})]}),r.jsxs(me,{children:[r.jsx("div",{className:"text-2xl font-bold text-yellow-900",children:I.sent}),r.jsxs("p",{className:"text-xs text-yellow-600 flex items-center mt-1",children:[r.jsx(Ot,{className:"h-3 w-3 mr-1"}),"Awaiting response"]})]})]}),r.jsxs(fe,{className:"shadow-sm border-0 bg-gradient-to-br from-green-50 to-green-100/50",children:[r.jsxs(we,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(Ne,{className:"text-sm font-medium text-green-900",children:"Accepted"}),r.jsx(qa,{className:"h-4 w-4 text-green-600"})]}),r.jsxs(me,{children:[r.jsx("div",{className:"text-2xl font-bold text-green-900",children:I.accepted}),r.jsxs("p",{className:"text-xs text-green-600 flex items-center mt-1",children:[r.jsx(Ot,{className:"h-3 w-3 mr-1"}),I.total>0?Math.round(I.accepted/I.total*100):0,"% acceptance rate"]})]})]}),r.jsxs(fe,{className:"shadow-sm border-0 bg-gradient-to-br from-purple-50 to-purple-100/50",children:[r.jsxs(we,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(Ne,{className:"text-sm font-medium text-purple-900",children:"Quote Value"}),r.jsx(Mt,{className:"h-4 w-4 text-purple-600"})]}),r.jsxs(me,{children:[r.jsx("div",{className:"text-2xl font-bold text-purple-900",children:De(I.totalValue)}),r.jsxs("p",{className:"text-xs text-purple-600 flex items-center mt-1",children:[r.jsx(Mt,{className:"h-3 w-3 mr-1"}),De(I.acceptedValue)," accepted"]})]})]})]}),r.jsxs("div",{className:"flex gap-4",children:[r.jsxs("div",{className:"ri-search-bar",children:[r.jsx(Jn,{className:"ri-search-icon"}),r.jsx(je,{placeholder:"Search quotes...",value:a,onChange:D=>s(D.target.value),className:"ri-search-input shadow-sm"})]}),r.jsxs($e,{value:i,onValueChange:o,children:[r.jsx(Fe,{className:"w-40",children:r.jsx(Be,{placeholder:"Status"})}),r.jsxs(Me,{children:[r.jsx(K,{value:"all",children:"All Status"}),r.jsx(K,{value:"draft",children:"Draft"}),r.jsx(K,{value:"sent",children:"Sent"}),r.jsx(K,{value:"viewed",children:"Viewed"}),r.jsx(K,{value:"accepted",children:"Accepted"}),r.jsx(K,{value:"rejected",children:"Rejected"}),r.jsx(K,{value:"expired",children:"Expired"})]})]}),r.jsxs(J,{variant:"outline",className:"shadow-sm",children:[r.jsx(hs,{className:"h-4 w-4 mr-2"}),"Filter"]})]}),r.jsxs(fe,{className:"shadow-sm",children:[r.jsxs(we,{children:[r.jsxs(Ne,{className:"text-xl",children:["Quotes (",p.length,")"]}),r.jsx(Ue,{children:"Manage customer quotes with advanced pricing and bundling"})]}),r.jsx(me,{children:r.jsxs("div",{className:"space-y-4",children:[p.map(D=>r.jsxs("div",{className:"ri-table-row",children:[r.jsx("div",{className:"flex items-center space-x-4 flex-1",children:r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[r.jsxs("h3",{className:"font-semibold text-foreground",children:["Quote #",D.id]}),r.jsx(ze,{className:He("ri-badge-status",g(D.status)),children:D.status.toUpperCase()})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm text-muted-foreground",children:[r.jsxs("div",{children:[r.jsx("span",{className:"font-medium",children:"Customer:"})," ",D.customerId]}),r.jsxs("div",{children:[r.jsx("span",{className:"font-medium",children:"Total:"}),r.jsx("span",{className:"font-bold text-primary ml-1",children:De(D.total)})]}),r.jsxs("div",{children:[r.jsx("span",{className:"font-medium",children:"Created:"})," ",lt(D.createdAt)]}),r.jsxs("div",{children:[r.jsx("span",{className:"font-medium",children:"Valid Until:"})," ",lt(D.validUntil)]})]}),r.jsxs("div",{className:"mt-2 bg-muted/30 p-2 rounded-md",children:[r.jsxs("p",{className:"text-sm text-muted-foreground",children:[D.items.length," item(s)"]}),D.notes&&r.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:[r.jsx("span",{className:"font-medium",children:"Notes:"})," ",D.notes]})]})]})}),r.jsxs("div",{className:"ri-action-buttons",children:[r.jsxs(J,{variant:"outline",size:"sm",className:"shadow-sm",onClick:()=>b(D),children:[r.jsx(Sl,{className:"h-3 w-3 mr-1"}),"View"]}),r.jsxs(J,{variant:"outline",size:"sm",className:"shadow-sm",onClick:()=>y(D),children:[r.jsx(Br,{className:"h-3 w-3 mr-1"}),"Edit"]}),D.status==="draft"&&r.jsxs(J,{variant:"outline",size:"sm",className:"shadow-sm",onClick:()=>E(D.id),children:[r.jsx(Oo,{className:"h-3 w-3 mr-1"}),"Send"]}),r.jsxs(J,{variant:"outline",size:"sm",className:"shadow-sm",onClick:()=>S(D.id),children:[r.jsx(FA,{className:"h-3 w-3 mr-1"}),"Copy"]}),r.jsx(J,{variant:"outline",size:"sm",className:"shadow-sm text-red-600 hover:text-red-700",onClick:()=>N(D.id),children:r.jsx(wn,{className:"h-3 w-3"})})]})]},D.id)),p.length===0&&r.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[r.jsx(qa,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),r.jsx("p",{children:"No quotes found"}),r.jsx("p",{className:"text-sm",children:"Create your first quote to get started"})]})]})})]})]})}function ene(){return r.jsxs(Ka,{children:[r.jsx(Vt,{path:"/",element:r.jsx(HT,{})}),r.jsx(Vt,{path:"/*",element:r.jsx(HT,{})})]})}function tne({schedule:e}){const[t,n]=w.useState(""),[a,s]=w.useState(1),[i,o]=w.useState("month"),[l,c]=w.useState("asc"),d=12,u=[...e.filter(v=>v.month.toString().includes(t))].sort((v,y)=>{const b=v[i],j=y[i];return l==="asc"?b>j?1:-1:b<j?1:-1}),m=Math.ceil(u.length/d),h=(a-1)*d,x=u.slice(h,h+d),g=v=>{i===v?c(l==="asc"?"desc":"asc"):(o(v),c("asc"))},p=v=>{s(v)};return e.length===0?r.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No amortization schedule available. Please calculate a loan first."}):r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("div",{className:"relative w-64",children:[r.jsx(Jn,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),r.jsx(je,{placeholder:"Search by month...",value:t,onChange:v=>{n(v.target.value),s(1)},className:"pl-10"})]}),r.jsxs("div",{className:"text-sm text-muted-foreground",children:["Showing ",h+1,"-",Math.min(h+d,u.length)," of ",u.length," payments"]})]}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full border-collapse",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"bg-muted/50",children:[r.jsx("th",{className:"p-3 text-left font-medium text-muted-foreground cursor-pointer hover:bg-muted/80",onClick:()=>g("month"),children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("span",{children:"Month"}),i==="month"&&(l==="asc"?r.jsx(wo,{className:"ml-1 h-3 w-3"}):r.jsx(jo,{className:"ml-1 h-3 w-3"}))]})}),r.jsx("th",{className:"p-3 text-left font-medium text-muted-foreground cursor-pointer hover:bg-muted/80",onClick:()=>g("payment"),children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("span",{children:"Payment"}),i==="payment"&&(l==="asc"?r.jsx(wo,{className:"ml-1 h-3 w-3"}):r.jsx(jo,{className:"ml-1 h-3 w-3"}))]})}),r.jsx("th",{className:"p-3 text-left font-medium text-muted-foreground cursor-pointer hover:bg-muted/80",onClick:()=>g("principal"),children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("span",{children:"Principal"}),i==="principal"&&(l==="asc"?r.jsx(wo,{className:"ml-1 h-3 w-3"}):r.jsx(jo,{className:"ml-1 h-3 w-3"}))]})}),r.jsx("th",{className:"p-3 text-left font-medium text-muted-foreground cursor-pointer hover:bg-muted/80",onClick:()=>g("interest"),children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("span",{children:"Interest"}),i==="interest"&&(l==="asc"?r.jsx(wo,{className:"ml-1 h-3 w-3"}):r.jsx(jo,{className:"ml-1 h-3 w-3"}))]})}),r.jsx("th",{className:"p-3 text-left font-medium text-muted-foreground",children:"Additional"}),r.jsx("th",{className:"p-3 text-left font-medium text-muted-foreground cursor-pointer hover:bg-muted/80",onClick:()=>g("balance"),children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("span",{children:"Balance"}),i==="balance"&&(l==="asc"?r.jsx(wo,{className:"ml-1 h-3 w-3"}):r.jsx(jo,{className:"ml-1 h-3 w-3"}))]})}),r.jsx("th",{className:"p-3 text-left font-medium text-muted-foreground cursor-pointer hover:bg-muted/80",onClick:()=>g("totalInterestPaid"),children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("span",{children:"Total Interest"}),i==="totalInterestPaid"&&(l==="asc"?r.jsx(wo,{className:"ml-1 h-3 w-3"}):r.jsx(jo,{className:"ml-1 h-3 w-3"}))]})})]})}),r.jsx("tbody",{children:x.map((v,y)=>r.jsxs("tr",{className:y%2===0?"bg-muted/20":"",children:[r.jsx("td",{className:"p-3",children:v.month}),r.jsx("td",{className:"p-3",children:De(v.payment)}),r.jsx("td",{className:"p-3",children:De(v.principal)}),r.jsx("td",{className:"p-3",children:De(v.interest)}),r.jsx("td",{className:"p-3",children:De(v.additionalCosts)}),r.jsx("td",{className:"p-3",children:De(v.balance)}),r.jsx("td",{className:"p-3",children:De(v.totalInterestPaid)})]},v.month))})]})}),m>1&&r.jsxs("div",{className:"flex justify-center space-x-2 mt-4",children:[r.jsx(J,{variant:"outline",size:"sm",onClick:()=>p(1),disabled:a===1,children:"First"}),r.jsx(J,{variant:"outline",size:"sm",onClick:()=>p(a-1),disabled:a===1,children:"Previous"}),r.jsx("div",{className:"flex items-center space-x-1",children:Array.from({length:Math.min(5,m)},(v,y)=>{let b;return m<=5||a<=3?b=y+1:a>=m-2?b=m-4+y:b=a-2+y,r.jsx(J,{variant:a===b?"default":"outline",size:"sm",onClick:()=>p(b),children:b},b)})}),r.jsx(J,{variant:"outline",size:"sm",onClick:()=>p(a+1),disabled:a===m,children:"Next"}),r.jsx(J,{variant:"outline",size:"sm",onClick:()=>p(m),disabled:a===m,children:"Last"})]})]})}function V$({initialValues:e,onSave:t,onClose:n}){const{toast:a}=Ct(),[s,i]=w.useState((e==null?void 0:e.loanAmount)||1e5),[o,l]=w.useState((e==null?void 0:e.downPayment)||2e4),[c,d]=w.useState((e==null?void 0:e.interestRate)||6.99),[f,u]=w.useState((e==null?void 0:e.loanTerm)||60),[m,h]=w.useState("monthly"),[x,g]=w.useState(!1),[p,v]=w.useState(0),[y,b]=w.useState(!1),[j,C]=w.useState(0),[E,S]=w.useState("calculator"),[N,I]=w.useState(0),[D,T]=w.useState(0),[A,_]=w.useState(0),[k,L]=w.useState([]);w.useEffect(()=>{$()},[s,o,c,f,m,x,p,y,j]);const $=()=>{const q=s-o;if(q<=0){I(0),T(0),_(0),L([]);return}const R=c/100/12,V=q*R/(1-Math.pow(1+R,-f));let G=0;x&&(G+=p),y&&(G+=V*(j/100));let ee=1;switch(m){case"biweekly":ee=12/26;break;case"weekly":ee=12/52;break;default:ee=1;break}const re=V*ee+G*ee,de=f,ue=V*de-q,oe=q+ue+G*de,ge=M(q,R,f,V,G);I(re),T(ue),_(oe),L(ge)},M=(q,R,V,G,ee)=>{let re=q,de=0;const ue=[];for(let oe=1;oe<=V;oe++){const ge=re*R;let ve=G-ge;if(re<ve&&(ve=re),re-=ve,de+=ge,ue.push({month:oe,payment:G+ee,principal:ve,interest:ge,additionalCosts:ee,balance:re,totalInterestPaid:de}),re<=0)break}return ue},B=()=>{t&&t({loanAmount:s,downPayment:o,interestRate:c,loanTerm:f,paymentFrequency:m,includeInsurance:x,insuranceAmount:p,includeTax:y,taxRate:j,monthlyPayment:N,totalInterest:D,totalCost:A,amortizationSchedule:k}),a({title:"Loan Calculation Saved",description:"Your loan calculation has been saved successfully."})},U=()=>{window.print()},W=()=>{const R=[["Month","Payment","Principal","Interest","Additional Costs","Balance","Total Interest Paid"].join(","),...k.map(re=>[re.month,re.payment.toFixed(2),re.principal.toFixed(2),re.interest.toFixed(2),re.additionalCosts.toFixed(2),re.balance.toFixed(2),re.totalInterestPaid.toFixed(2)].join(","))].join(`
`),V=new Blob([R],{type:"text/csv;charset=utf-8;"}),G=URL.createObjectURL(V),ee=document.createElement("a");ee.href=G,ee.setAttribute("download","amortization_schedule.csv"),document.body.appendChild(ee),ee.click(),document.body.removeChild(ee),a({title:"Export Successful",description:"Amortization schedule exported to CSV."})};return r.jsx("div",{className:"space-y-6",children:r.jsxs(lr,{value:E,onValueChange:S,className:"space-y-4",children:[r.jsxs(or,{className:"grid w-full grid-cols-2",children:[r.jsx(Ke,{value:"calculator",children:"Calculator"}),r.jsx(Ke,{value:"amortization",children:"Amortization Schedule"})]}),r.jsxs(Je,{value:"calculator",className:"space-y-6",children:[r.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[r.jsxs(fe,{className:"shadow-sm",children:[r.jsxs(we,{children:[r.jsxs(Ne,{className:"flex items-center",children:[r.jsx(au,{className:"h-5 w-5 mr-2 text-primary"}),"Loan Details"]}),r.jsx(Ue,{children:"Enter the details of your loan"})]}),r.jsxs(me,{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"loanAmount",children:"Vehicle Price"}),r.jsxs("div",{className:"relative",children:[r.jsx(Mt,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),r.jsx(je,{id:"loanAmount",type:"number",value:s,onChange:q=>i(parseFloat(q.target.value)||0),className:"pl-10"})]})]}),r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"downPayment",children:"Down Payment"}),r.jsxs("div",{className:"relative",children:[r.jsx(Mt,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),r.jsx(je,{id:"downPayment",type:"number",value:o,onChange:q=>l(parseFloat(q.target.value)||0),className:"pl-10"})]})]}),r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"interestRate",children:"Interest Rate (%)"}),r.jsx(je,{id:"interestRate",type:"number",step:"0.01",value:c,onChange:q=>d(parseFloat(q.target.value)||0)})]}),r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"loanTerm",children:"Loan Term (months)"}),r.jsxs($e,{value:f.toString(),onValueChange:q=>u(parseInt(q)),children:[r.jsx(Fe,{children:r.jsx(Be,{})}),r.jsxs(Me,{children:[r.jsx(K,{value:"12",children:"12 months (1 year)"}),r.jsx(K,{value:"24",children:"24 months (2 years)"}),r.jsx(K,{value:"36",children:"36 months (3 years)"}),r.jsx(K,{value:"48",children:"48 months (4 years)"}),r.jsx(K,{value:"60",children:"60 months (5 years)"}),r.jsx(K,{value:"72",children:"72 months (6 years)"}),r.jsx(K,{value:"84",children:"84 months (7 years)"}),r.jsx(K,{value:"96",children:"96 months (8 years)"}),r.jsx(K,{value:"120",children:"120 months (10 years)"}),r.jsx(K,{value:"180",children:"180 months (15 years)"}),r.jsx(K,{value:"240",children:"240 months (20 years)"})]})]})]}),r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"paymentFrequency",children:"Payment Frequency"}),r.jsxs($e,{value:m,onValueChange:h,children:[r.jsx(Fe,{children:r.jsx(Be,{})}),r.jsxs(Me,{children:[r.jsx(K,{value:"monthly",children:"Monthly"}),r.jsx(K,{value:"biweekly",children:"Bi-weekly"}),r.jsx(K,{value:"weekly",children:"Weekly"})]})]})]})]})]}),r.jsxs(fe,{className:"shadow-sm",children:[r.jsxs(we,{children:[r.jsxs(Ne,{className:"flex items-center",children:[r.jsx(Mt,{className:"h-5 w-5 mr-2 text-primary"}),"Additional Costs"]}),r.jsx(Ue,{children:"Include additional costs in your calculation"})]}),r.jsxs(me,{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(St,{id:"includeInsurance",checked:x,onCheckedChange:q=>g(!!q)}),r.jsx(Z,{htmlFor:"includeInsurance",children:"Include Insurance"})]}),x&&r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"insuranceAmount",children:"Monthly Insurance Amount"}),r.jsxs("div",{className:"relative",children:[r.jsx(Mt,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),r.jsx(je,{id:"insuranceAmount",type:"number",value:p,onChange:q=>v(parseFloat(q.target.value)||0),className:"pl-10"})]})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(St,{id:"includeTax",checked:y,onCheckedChange:q=>b(!!q)}),r.jsx(Z,{htmlFor:"includeTax",children:"Include Tax"})]}),y&&r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"taxRate",children:"Tax Rate (%)"}),r.jsx(je,{id:"taxRate",type:"number",step:"0.01",value:j,onChange:q=>C(parseFloat(q.target.value)||0)})]}),r.jsxs("div",{className:"mt-6 pt-6 border-t",children:[r.jsx("h3",{className:"font-semibold mb-4",children:"Loan Summary"}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-muted-foreground",children:"Principal Amount:"}),r.jsx("span",{className:"font-medium",children:De(s-o)})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsxs("span",{className:"text-muted-foreground",children:[m==="monthly"?"Monthly":m==="biweekly"?"Bi-weekly":"Weekly"," Payment:"]}),r.jsx("span",{className:"font-bold text-primary",children:De(N)})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-muted-foreground",children:"Total Interest:"}),r.jsx("span",{className:"font-medium",children:De(D)})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-muted-foreground",children:"Total Cost:"}),r.jsx("span",{className:"font-medium",children:De(A)})]})]})]})]})]})]}),r.jsxs("div",{className:"flex justify-end space-x-3",children:[n&&r.jsx(J,{variant:"outline",onClick:n,children:"Close"}),r.jsxs(J,{variant:"outline",onClick:()=>S("amortization"),children:[r.jsx(Mr,{className:"h-4 w-4 mr-2"}),"View Amortization"]}),t&&r.jsx(J,{onClick:B,children:"Save Calculation"})]})]}),r.jsxs(Je,{value:"amortization",children:[r.jsxs(fe,{className:"shadow-sm",children:[r.jsx(we,{children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsxs(Ne,{className:"flex items-center",children:[r.jsx(Mr,{className:"h-5 w-5 mr-2 text-primary"}),"Amortization Schedule"]}),r.jsx(Ue,{children:"Detailed payment schedule over the life of the loan"})]}),r.jsxs("div",{className:"flex space-x-2",children:[r.jsxs(J,{variant:"outline",size:"sm",onClick:W,children:[r.jsx(ms,{className:"h-4 w-4 mr-2"}),"Export CSV"]}),r.jsxs(J,{variant:"outline",size:"sm",onClick:U,children:[r.jsx(hu,{className:"h-4 w-4 mr-2"}),"Print"]})]})]})}),r.jsx(me,{children:r.jsx(tne,{schedule:k})})]}),r.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[r.jsxs(J,{variant:"outline",onClick:()=>S("calculator"),children:[r.jsx(au,{className:"h-4 w-4 mr-2"}),"Back to Calculator"]}),t&&r.jsx(J,{onClick:B,children:"Save Calculation"})]})]})]})})}function rne(){const{toast:e}=Ct(),[t,n]=w.useState("general"),[a,s]=w.useState(6.99),[i,o]=w.useState(84),[l,c]=w.useState(10),[d,f]=w.useState("monthly"),[u,m]=w.useState(!0),[h,x]=w.useState(12.99),[g,p]=w.useState(48),[v,y]=w.useState(20),[b,j]=w.useState(!0),[C,E]=w.useState(!0),[S,N]=w.useState(!0),[I,D]=w.useState(!0),[T,A]=w.useState(!0),[_,k]=w.useState(10),[L,$]=w.useState(25),[M,B]=w.useState("fixed"),[U,W]=w.useState(""),[q,R]=w.useState(!0),[V,G]=w.useState(!0),[ee,re]=w.useState(!0),[de,ue]=w.useState(5),oe=()=>{e({title:"Settings Saved",description:"Your loan settings have been updated successfully."})};return r.jsxs("div",{className:"space-y-6",children:[r.jsxs(lr,{value:t,onValueChange:n,className:"space-y-4",children:[r.jsxs(or,{className:"grid w-full grid-cols-4",children:[r.jsx(Ke,{value:"general",children:"General"}),r.jsx(Ke,{value:"bhph",children:"Buy Here Pay Here"}),r.jsx(Ke,{value:"payments",children:"Payments"}),r.jsx(Ke,{value:"documents",children:"Documents"})]}),r.jsx(Je,{value:"general",className:"space-y-6",children:r.jsxs(fe,{className:"shadow-sm",children:[r.jsxs(we,{children:[r.jsxs(Ne,{className:"flex items-center",children:[r.jsx(sx,{className:"h-5 w-5 mr-2 text-primary"}),"General Loan Settings"]}),r.jsx(Ue,{children:"Configure default loan parameters and settings"})]}),r.jsx(me,{className:"space-y-4",children:r.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"defaultInterestRate",children:"Default Interest Rate (%)"}),r.jsx(je,{id:"defaultInterestRate",type:"number",step:"0.01",value:a,onChange:ge=>s(parseFloat(ge.target.value)||0)}),r.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Standard interest rate for new loans"})]}),r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"maxLoanTerm",children:"Maximum Loan Term (months)"}),r.jsx(je,{id:"maxLoanTerm",type:"number",value:i,onChange:ge=>o(parseInt(ge.target.value)||0)}),r.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Longest allowed loan term in months"})]}),r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"minDownPaymentPercent",children:"Minimum Down Payment (%)"}),r.jsx(je,{id:"minDownPaymentPercent",type:"number",value:l,onChange:ge=>c(parseFloat(ge.target.value)||0)}),r.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Minimum required down payment as percentage of vehicle price"})]}),r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"defaultPaymentFrequency",children:"Default Payment Frequency"}),r.jsxs($e,{value:d,onValueChange:f,children:[r.jsx(Fe,{children:r.jsx(Be,{})}),r.jsxs(Me,{children:[r.jsx(K,{value:"monthly",children:"Monthly"}),r.jsx(K,{value:"biweekly",children:"Bi-weekly"}),r.jsx(K,{value:"weekly",children:"Weekly"})]})]}),r.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Standard payment schedule for new loans"})]})]})})]})}),r.jsx(Je,{value:"bhph",className:"space-y-6",children:r.jsxs(fe,{className:"shadow-sm",children:[r.jsxs(we,{children:[r.jsxs(Ne,{className:"flex items-center",children:[r.jsx(Mt,{className:"h-5 w-5 mr-2 text-primary"}),"Buy Here Pay Here Settings"]}),r.jsx(Ue,{children:"Configure in-house financing options"})]}),r.jsxs(me,{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(St,{id:"bhphEnabled",checked:u,onCheckedChange:ge=>m(!!ge)}),r.jsx(Z,{htmlFor:"bhphEnabled",children:"Enable Buy Here Pay Here Financing"})]}),u&&r.jsxs("div",{className:"grid gap-4 md:grid-cols-2 mt-4",children:[r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"bhphInterestRate",children:"BHPH Interest Rate (%)"}),r.jsx(je,{id:"bhphInterestRate",type:"number",step:"0.01",value:h,onChange:ge=>x(parseFloat(ge.target.value)||0)}),r.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Standard interest rate for in-house loans"})]}),r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"bhphMaxLoanTerm",children:"BHPH Maximum Term (months)"}),r.jsx(je,{id:"bhphMaxLoanTerm",type:"number",value:g,onChange:ge=>p(parseInt(ge.target.value)||0)}),r.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Maximum term for in-house financing"})]}),r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"bhphMinDownPaymentPercent",children:"BHPH Minimum Down Payment (%)"}),r.jsx(je,{id:"bhphMinDownPaymentPercent",type:"number",value:v,onChange:ge=>y(parseFloat(ge.target.value)||0)}),r.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Minimum down payment for in-house financing"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(St,{id:"bhphRequireIncome",checked:b,onCheckedChange:ge=>j(!!ge)}),r.jsx(Z,{htmlFor:"bhphRequireIncome",children:"Require Income Verification"})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(St,{id:"bhphRequireReference",checked:C,onCheckedChange:ge=>E(!!ge)}),r.jsx(Z,{htmlFor:"bhphRequireReference",children:"Require References"})]})]})]}),r.jsx("div",{className:"bg-yellow-50 p-4 rounded-md mt-4",children:r.jsxs("div",{className:"flex items-start space-x-2",children:[r.jsx(Ts,{className:"h-5 w-5 text-yellow-600 mt-0.5"}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium text-yellow-800",children:"Important Notice"}),r.jsx("p",{className:"text-sm text-yellow-700 mt-1",children:"Buy Here Pay Here financing is subject to state and federal regulations. Ensure your dealership complies with all applicable laws including Truth in Lending Act (TILA), Fair Credit Reporting Act (FCRA), and state-specific lending requirements."})]})]})})]})]})}),r.jsx(Je,{value:"payments",className:"space-y-6",children:r.jsxs(fe,{className:"shadow-sm",children:[r.jsxs(we,{children:[r.jsxs(Ne,{className:"flex items-center",children:[r.jsx(Ga,{className:"h-5 w-5 mr-2 text-primary"}),"Payment Settings"]}),r.jsx(Ue,{children:"Configure payment options and late fee policies"})]}),r.jsx(me,{className:"space-y-4",children:r.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(St,{id:"allowAutoPay",checked:S,onCheckedChange:ge=>N(!!ge)}),r.jsx(Z,{htmlFor:"allowAutoPay",children:"Allow Automatic Payments"})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(St,{id:"allowOnlinePayments",checked:I,onCheckedChange:ge=>D(!!ge)}),r.jsx(Z,{htmlFor:"allowOnlinePayments",children:"Allow Online Payments"})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(St,{id:"allowPartialPayments",checked:T,onCheckedChange:ge=>A(!!ge)}),r.jsx(Z,{htmlFor:"allowPartialPayments",children:"Allow Partial Payments"})]})]}),r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"gracePeriodDays",children:"Grace Period (days)"}),r.jsx(je,{id:"gracePeriodDays",type:"number",value:_,onChange:ge=>k(parseInt(ge.target.value)||0)}),r.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Days after due date before late fee applies"})]}),r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"lateFeeType",children:"Late Fee Type"}),r.jsxs($e,{value:M,onValueChange:B,children:[r.jsx(Fe,{children:r.jsx(Be,{})}),r.jsxs(Me,{children:[r.jsx(K,{value:"fixed",children:"Fixed Amount"}),r.jsx(K,{value:"percentage",children:"Percentage of Payment"})]})]})]}),r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"lateFeeAmount",children:M==="fixed"?"Late Fee Amount ($)":"Late Fee Percentage (%)"}),r.jsx(je,{id:"lateFeeAmount",type:"number",step:M==="percentage"?"0.01":"1",value:L,onChange:ge=>$(parseFloat(ge.target.value)||0)})]})]})})]})}),r.jsx(Je,{value:"documents",className:"space-y-6",children:r.jsxs(fe,{className:"shadow-sm",children:[r.jsxs(we,{children:[r.jsxs(Ne,{className:"flex items-center",children:[r.jsx(qa,{className:"h-5 w-5 mr-2 text-primary"}),"Document Settings"]}),r.jsx(Ue,{children:"Configure loan documents and notification settings"})]}),r.jsxs(me,{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"loanAgreementTemplate",children:"Loan Agreement Template"}),r.jsx(Xt,{id:"loanAgreementTemplate",value:U,onChange:ge=>W(ge.target.value),placeholder:"Enter your loan agreement template text or HTML...",rows:6}),r.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"You can use variables like {{customer_name}}, {{loan_amount}}, {{interest_rate}}, etc."})]}),r.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(St,{id:"requireSignature",checked:q,onCheckedChange:ge=>R(!!ge)}),r.jsx(Z,{htmlFor:"requireSignature",children:"Require Digital Signature"})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(St,{id:"sendPaymentReceipts",checked:V,onCheckedChange:ge=>G(!!ge)}),r.jsx(Z,{htmlFor:"sendPaymentReceipts",children:"Send Payment Receipts"})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(St,{id:"sendPaymentReminders",checked:ee,onCheckedChange:ge=>re(!!ge)}),r.jsx(Z,{htmlFor:"sendPaymentReminders",children:"Send Payment Reminders"})]})]}),ee&&r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"reminderDaysBefore",children:"Reminder Days Before Due"}),r.jsx(je,{id:"reminderDaysBefore",type:"number",value:de,onChange:ge=>ue(parseInt(ge.target.value)||0)}),r.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Number of days before due date to send reminder"})]})]}),r.jsx("div",{className:"bg-blue-50 p-4 rounded-md mt-4",children:r.jsxs("div",{className:"flex items-start space-x-2",children:[r.jsx(MA,{className:"h-5 w-5 text-blue-600 mt-0.5"}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium text-blue-800",children:"Compliance Notice"}),r.jsx("p",{className:"text-sm text-blue-700 mt-1",children:"Ensure your loan documents comply with all applicable laws and regulations. Consider consulting with legal counsel to review your loan agreement templates."})]})]})})]})]})})]}),r.jsx("div",{className:"flex justify-end",children:r.jsxs(J,{onClick:oe,children:[r.jsx(Pr,{className:"h-4 w-4 mr-2"}),"Save Settings"]})})]})}function nne({onSave:e,onCancel:t,onAddNewCustomer:n,preselectedCustomerId:a}){const{toast:s}=Ct(),{leads:i}=ro(),{vehicles:o,getAvailableVehicles:l}=Ol(),[c,d]=w.useState(!1),[f,u]=w.useState(!1),[m,h]=w.useState(null),[x,g]=w.useState({customerId:a||"",customerName:"",vehicleId:"",vehicleInfo:"",amount:0,downPayment:0,term:60,rate:6.99,paymentAmount:0,startDate:new Date().toISOString().split("T")[0],status:"active",notes:"",loanType:"standard",paymentFrequency:"monthly",includeInsurance:!1,insuranceAmount:0,includeTax:!1,taxRate:0});w.useEffect(()=>{a&&g(j=>({...j,customerId:a}))},[a]),w.useEffect(()=>{if(x.customerId){const j=i.find(C=>C.id===x.customerId);j&&g(C=>({...C,customerName:`${j.firstName} ${j.lastName}`}))}},[x.customerId,i]);const p=j=>{j==="add-new"?n==null||n():g(C=>({...C,customerId:j}))},v=j=>{const C=o.find(E=>E.id===j);C&&g(E=>({...E,vehicleId:j,vehicleInfo:`${C.year} ${C.make} ${C.model}`,amount:C.price}))},y=j=>{h(j),g(C=>({...C,amount:j.loanAmount,downPayment:j.downPayment,term:j.loanTerm,rate:j.interestRate,paymentAmount:j.monthlyPayment,paymentFrequency:j.paymentFrequency,includeInsurance:j.includeInsurance,insuranceAmount:j.insuranceAmount,includeTax:j.includeTax,taxRate:j.taxRate}))},b=async j=>{if(j.preventDefault(),!x.customerId||!x.vehicleId){s({title:"Validation Error",description:"Customer and vehicle are required.",variant:"destructive"});return}d(!0);try{await e(x)}catch{s({title:"Error",description:"Failed to create loan",variant:"destructive"})}finally{d(!1)}};return r.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:f?r.jsx("div",{className:"w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:r.jsx(V$,{initialValues:{loanAmount:x.amount,downPayment:x.downPayment,interestRate:x.rate,loanTerm:x.term},onSave:y,onClose:()=>u(!1)})}):r.jsxs(fe,{className:"w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[r.jsx(we,{children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx(Ne,{children:"Create New Loan"}),r.jsx(Ue,{children:"Set up a new loan for a customer"})]}),r.jsx(J,{variant:"ghost",size:"sm",onClick:t,children:r.jsx($t,{className:"h-4 w-4"})})]})}),r.jsx(me,{children:r.jsxs("form",{onSubmit:b,className:"space-y-6",children:[r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"text-lg font-semibold",children:"Customer & Vehicle"}),r.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"customerId",children:"Customer *"}),r.jsxs($e,{value:x.customerId,onValueChange:p,children:[r.jsx(Fe,{children:r.jsx(Be,{placeholder:"Select customer"})}),r.jsxs(Me,{children:[r.jsx("div",{className:"px-2 py-1.5",children:r.jsxs(J,{variant:"outline",size:"sm",className:"w-full justify-start",onClick:()=>p("add-new"),children:[r.jsx($t,{className:"h-3.5 w-3.5 mr-2"}),"Add New Customer"]})}),r.jsx("div",{className:"px-2 py-1 border-t"}),i.map(j=>r.jsxs(K,{value:j.id,children:[j.firstName," ",j.lastName]},j.id))]})]})]}),r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"vehicleId",children:"Vehicle *"}),r.jsxs($e,{value:x.vehicleId,onValueChange:v,children:[r.jsx(Fe,{children:r.jsx(Be,{placeholder:"Select vehicle"})}),r.jsx(Me,{children:o.map(j=>r.jsxs(K,{value:j.id,children:[j.year," ",j.make," ",j.model]},j.id))})]})]})]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h3",{className:"text-lg font-semibold",children:"Loan Details"}),r.jsxs(J,{type:"button",variant:"outline",onClick:()=>u(!0),children:[r.jsx(au,{className:"h-4 w-4 mr-2"}),"Loan Calculator"]})]}),r.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"amount",children:"Loan Amount *"}),r.jsxs("div",{className:"relative",children:[r.jsx(Mt,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),r.jsx(je,{id:"amount",type:"number",value:x.amount,onChange:j=>g(C=>({...C,amount:parseFloat(j.target.value)||0})),className:"pl-10"})]})]}),r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"downPayment",children:"Down Payment"}),r.jsxs("div",{className:"relative",children:[r.jsx(Mt,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),r.jsx(je,{id:"downPayment",type:"number",value:x.downPayment,onChange:j=>g(C=>({...C,downPayment:parseFloat(j.target.value)||0})),className:"pl-10"})]})]})]}),r.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"term",children:"Term (months) *"}),r.jsxs($e,{value:x.term.toString(),onValueChange:j=>g(C=>({...C,term:parseInt(j)})),children:[r.jsx(Fe,{children:r.jsx(Be,{})}),r.jsxs(Me,{children:[r.jsx(K,{value:"12",children:"12 months (1 year)"}),r.jsx(K,{value:"24",children:"24 months (2 years)"}),r.jsx(K,{value:"36",children:"36 months (3 years)"}),r.jsx(K,{value:"48",children:"48 months (4 years)"}),r.jsx(K,{value:"60",children:"60 months (5 years)"}),r.jsx(K,{value:"72",children:"72 months (6 years)"}),r.jsx(K,{value:"84",children:"84 months (7 years)"}),r.jsx(K,{value:"96",children:"96 months (8 years)"}),r.jsx(K,{value:"120",children:"120 months (10 years)"})]})]})]}),r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"rate",children:"Interest Rate (%) *"}),r.jsx(je,{id:"rate",type:"number",step:"0.01",value:x.rate,onChange:j=>g(C=>({...C,rate:parseFloat(j.target.value)||0}))})]}),r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"paymentAmount",children:"Monthly Payment *"}),r.jsxs("div",{className:"relative",children:[r.jsx(Mt,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),r.jsx(je,{id:"paymentAmount",type:"number",step:"0.01",value:x.paymentAmount,onChange:j=>g(C=>({...C,paymentAmount:parseFloat(j.target.value)||0})),className:"pl-10"})]})]})]}),r.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"startDate",children:"Start Date *"}),r.jsx(je,{id:"startDate",type:"date",value:x.startDate,onChange:j=>g(C=>({...C,startDate:j.target.value}))})]}),r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"loanType",children:"Loan Type"}),r.jsxs($e,{value:x.loanType,onValueChange:j=>g(C=>({...C,loanType:j})),children:[r.jsx(Fe,{children:r.jsx(Be,{})}),r.jsxs(Me,{children:[r.jsx(K,{value:"standard",children:"Standard"}),r.jsx(K,{value:"bhph",children:"Buy Here Pay Here"}),r.jsx(K,{value:"balloon",children:"Balloon"}),r.jsx(K,{value:"lease",children:"Lease"})]})]})]})]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"text-lg font-semibold",children:"Additional Options"}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(St,{id:"includeInsurance",checked:x.includeInsurance,onCheckedChange:j=>g(C=>({...C,includeInsurance:!!j}))}),r.jsx(Z,{htmlFor:"includeInsurance",children:"Include Insurance"})]}),x.includeInsurance&&r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"insuranceAmount",children:"Monthly Insurance Amount"}),r.jsxs("div",{className:"relative",children:[r.jsx(Mt,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),r.jsx(je,{id:"insuranceAmount",type:"number",step:"0.01",value:x.insuranceAmount,onChange:j=>g(C=>({...C,insuranceAmount:parseFloat(j.target.value)||0})),className:"pl-10"})]})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(St,{id:"includeTax",checked:x.includeTax,onCheckedChange:j=>g(C=>({...C,includeTax:!!j}))}),r.jsx(Z,{htmlFor:"includeTax",children:"Include Tax"})]}),x.includeTax&&r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"taxRate",children:"Tax Rate (%)"}),r.jsx(je,{id:"taxRate",type:"number",step:"0.01",value:x.taxRate,onChange:j=>g(C=>({...C,taxRate:parseFloat(j.target.value)||0}))})]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"text-lg font-semibold",children:"Notes"}),r.jsx(Xt,{value:x.notes,onChange:j=>g(C=>({...C,notes:j.target.value})),placeholder:"Add any additional notes about this loan...",rows:3})]}),r.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t",children:[r.jsx(J,{type:"button",variant:"outline",onClick:t,disabled:c,children:"Cancel"}),r.jsx(J,{type:"submit",disabled:c,children:c?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Creating Loan..."]}):r.jsxs(r.Fragment,{children:[r.jsx(Pr,{className:"h-4 w-4 mr-2"}),"Create Loan"]})})]})]})})]})})}function GT({loan:e,onClose:t,onRecordPayment:n}){const{toast:a}=Ct(),[s,i]=w.useState([]),[o,l]=w.useState(""),[c,d]=w.useState("all"),[f,u]=w.useState("all"),[m,h]=w.useState("all");w.useEffect(()=>{e&&Array.isArray(e.payments)&&i(e.payments)},[e]);const x=C=>{switch(C){case"completed":return"bg-green-50 text-green-700 border-green-200";case"pending":return"bg-yellow-50 text-yellow-700 border-yellow-200";case"processing":return"bg-blue-50 text-blue-700 border-blue-200";case"failed":return"bg-red-50 text-red-700 border-red-200";case"refunded":return"bg-purple-50 text-purple-700 border-purple-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},g=C=>{switch(C){case"completed":return r.jsx($r,{className:"h-4 w-4 text-green-500"});case"pending":return r.jsx(er,{className:"h-4 w-4 text-yellow-500"});case"processing":return r.jsx(er,{className:"h-4 w-4 text-blue-500"});case"failed":return r.jsx(di,{className:"h-4 w-4 text-red-500"});case"refunded":return r.jsx(Pn,{className:"h-4 w-4 text-purple-500"});default:return null}},p=C=>{switch(C){case"credit_card":return"Credit Card";case"bank_transfer":return"Bank Transfer";case"cash":return"Cash";case"check":return"Check";case"financing":return"Financing";default:return C}},v=C=>{switch(C){case"credit_card":return r.jsx(Ga,{className:"h-4 w-4 text-blue-500"});case"bank_transfer":return r.jsx(Pn,{className:"h-4 w-4 text-green-500"});case"cash":return r.jsx(Pn,{className:"h-4 w-4 text-green-500"});case"check":return r.jsx(Pn,{className:"h-4 w-4 text-blue-500"});case"financing":return r.jsx(Pn,{className:"h-4 w-4 text-purple-500"});default:return r.jsx(Pn,{className:"h-4 w-4 text-gray-500"})}},y=Array.isArray(s)?s.filter(C=>{const E=C.invoiceId&&C.invoiceId.toLowerCase().includes(o.toLowerCase())||C.id&&C.id.toLowerCase().includes(o.toLowerCase())||C.transactionId&&C.transactionId.toLowerCase().includes(o.toLowerCase()),S=c==="all"||C.status===c,N=f==="all"||C.method===f;let I=!0;const D=new Date,T=C.processedDate||new Date;if(m==="today")I=T.toDateString()===D.toDateString();else if(m==="this_week"){const A=new Date(D);A.setDate(D.getDate()-D.getDay());const _=new Date(A);_.setDate(A.getDate()+6),I=T>=A&&T<=_}else m==="this_month"&&(I=T.getMonth()===D.getMonth()&&T.getFullYear()===D.getFullYear());return E&&S&&N&&I}):[],b=()=>{try{if(!Array.isArray(y)||y.length===0){a({title:"Export Failed",description:"No payment data to export",variant:"destructive"});return}const E=[["ID","Invoice ID","Amount","Method","Status","Transaction ID","Date","Notes"].join(","),...y.map(D=>[D.id||"",D.invoiceId||"",(D.amount||0).toFixed(2),D.method||"",D.status||"",D.transactionId||"",D.processedDate?D.processedDate.toISOString().split("T")[0]:"",D.notes||""].join(","))].join(`
`),S=new Blob([E],{type:"text/csv;charset=utf-8;"}),N=URL.createObjectURL(S),I=document.createElement("a");I.href=N,I.setAttribute("download",`loan_${(e==null?void 0:e.id)||"unknown"}_payment_history.csv`),document.body.appendChild(I),I.click(),document.body.removeChild(I),a({title:"Export Successful",description:"Payment history exported to CSV"})}catch(C){console.error("Error exporting payment history:",C),a({title:"Export Failed",description:"An error occurred while exporting data",variant:"destructive"})}},j=async()=>{if(!n||!(e!=null&&e.id)){a({title:"Error",description:"Cannot record payment at this time",variant:"destructive"});return}const C={invoiceId:e.id,amount:100,method:ai.CASH,status:Wi.COMPLETED,processedDate:new Date,notes:"Manual payment recorded",transactionId:Math.random().toString(36).substr(2,9)};try{await n(C),i(E=>Array.isArray(E)?[...E,{...C,id:Math.random().toString(36).substr(2,9)}]:[{...C,id:Math.random().toString(36).substr(2,9)}]),a({title:"Payment Recorded",description:"New payment added to history."})}catch(E){console.error("Failed to record payment:",E),a({title:"Error",description:"Failed to record payment.",variant:"destructive"})}};return r.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:r.jsxs(fe,{className:"w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[e&&r.jsx(we,{children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsxs(Ne,{children:["Payment History for Loan #",e.id||"Unknown"]}),r.jsxs(Ue,{children:[e.customerName?`Customer: ${e.customerName}`:"No customer information",e.vehicleInfo?` | Vehicle: ${e.vehicleInfo}`:""]})]}),r.jsx(J,{variant:"ghost",size:"sm",onClick:t,children:r.jsx($t,{className:"h-4 w-4"})})]})}),r.jsxs(me,{children:[r.jsxs("div",{className:"flex flex-col md:flex-row gap-4 mb-6",children:[r.jsxs("div",{className:"relative flex-1",children:[r.jsx(Jn,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),r.jsx(je,{placeholder:"Search payments...",value:o,onChange:C=>l(C.target.value),className:"pl-10"})]}),r.jsxs($e,{value:c,onValueChange:d,children:[r.jsx(Fe,{className:"w-[150px]",children:r.jsx(Be,{placeholder:"Status"})}),r.jsxs(Me,{children:[r.jsx(K,{value:"all",children:"All Status"}),r.jsx(K,{value:"completed",children:"Completed"}),r.jsx(K,{value:"pending",children:"Pending"}),r.jsx(K,{value:"processing",children:"Processing"}),r.jsx(K,{value:"failed",children:"Failed"}),r.jsx(K,{value:"refunded",children:"Refunded"})]})]}),r.jsxs($e,{value:f,onValueChange:u,children:[r.jsx(Fe,{className:"w-[150px]",children:r.jsx(Be,{placeholder:"Method"})}),r.jsxs(Me,{children:[r.jsx(K,{value:"all",children:"All Methods"}),r.jsx(K,{value:"credit_card",children:"Credit Card"}),r.jsx(K,{value:"bank_transfer",children:"Bank Transfer"}),r.jsx(K,{value:"cash",children:"Cash"}),r.jsx(K,{value:"check",children:"Check"}),r.jsx(K,{value:"financing",children:"Financing"})]})]}),r.jsxs($e,{value:m,onValueChange:h,children:[r.jsx(Fe,{className:"w-[150px]",children:r.jsx(Be,{placeholder:"Date"})}),r.jsxs(Me,{children:[r.jsx(K,{value:"all",children:"All Dates"}),r.jsx(K,{value:"today",children:"Today"}),r.jsx(K,{value:"this_week",children:"This Week"}),r.jsx(K,{value:"this_month",children:"This Month"})]})]}),r.jsxs(J,{variant:"outline",children:[r.jsx(hs,{className:"h-4 w-4 mr-2"}),"More Filters"]})]}),r.jsxs("div",{className:"flex justify-end space-x-2 mb-4",children:[r.jsxs(J,{variant:"outline",size:"sm",onClick:b,disabled:!Array.isArray(y)||y.length===0,children:[r.jsx(ms,{className:"h-4 w-4 mr-2"}),"Export"]}),r.jsxs(J,{variant:"outline",size:"sm",onClick:j,disabled:!n||!(e!=null&&e.id),children:[r.jsx(Ga,{className:"h-4 w-4 mr-2"}),"Record Payment"]})]}),r.jsx("div",{className:"overflow-x-auto",children:Array.isArray(y)&&y.length>0?r.jsxs("table",{className:"w-full border-collapse",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"bg-muted/50",children:[r.jsx("th",{className:"p-3 text-left font-medium text-muted-foreground",children:"Amount"}),r.jsx("th",{className:"p-3 text-left font-medium text-muted-foreground",children:"Method"}),r.jsx("th",{className:"p-3 text-left font-medium text-muted-foreground",children:"Status"}),r.jsx("th",{className:"p-3 text-left font-medium text-muted-foreground",children:"Date"}),r.jsx("th",{className:"p-3 text-left font-medium text-muted-foreground",children:"Transaction ID"}),r.jsx("th",{className:"p-3 text-left font-medium text-muted-foreground",children:"Notes"})]})}),r.jsx("tbody",{children:y.map(C=>r.jsxs("tr",{className:"border-b hover:bg-muted/10",children:[r.jsx("td",{className:"p-3 font-medium",children:De(C.amount||0)}),r.jsx("td",{className:"p-3",children:r.jsxs("div",{className:"flex items-center space-x-1",children:[v(C.method||""),r.jsx("span",{children:p(C.method||"")})]})}),r.jsx("td",{className:"p-3",children:r.jsxs(ze,{className:He("flex items-center space-x-1",x(C.status||"")),children:[g(C.status||""),r.jsx("span",{children:C.status?C.status.charAt(0).toUpperCase()+C.status.slice(1):"Unknown"})]})}),r.jsx("td",{className:"p-3",children:C.processedDate?lt(C.processedDate):"-"}),r.jsx("td",{className:"p-3",children:r.jsx("span",{className:"font-mono text-xs",children:C.transactionId?C.transactionId:"-"})}),r.jsx("td",{className:"p-3 text-sm text-muted-foreground",children:C.notes||"-"})]},C.id))})]}):r.jsxs("div",{className:"p-8 text-center text-muted-foreground border border-dashed rounded-lg",children:[r.jsx(Ga,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),r.jsx("p",{children:"No payments found"}),r.jsx("p",{className:"text-sm mt-2",children:o||c!=="all"||f!=="all"||m!=="all"?"Try adjusting your search filters":"Record a payment to get started"})]})})]})]})})}const ane=()=>{const{toast:e}=Ct();Ol();const[t,n]=w.useState([]),[a,s]=w.useState(""),[i,o]=w.useState("all"),[l,c]=w.useState(!1),[d,f]=w.useState(!1),[u,m]=w.useState(null),h=[{id:"1",customerId:"cust-1",customerName:"John Smith",vehicleId:"veh-1",vehicleInfo:"2023 Honda Civic",amount:25e3,downPayment:5e3,term:60,rate:4.5,paymentAmount:372.86,startDate:new Date("2024-01-15"),status:"active",remainingBalance:22e3,nextPaymentDate:new Date("2024-02-15"),createdAt:new Date("2024-01-10"),payments:[{id:"payment-1",invoiceId:"1",amount:372.86,method:ai.CREDIT_CARD,status:Wi.COMPLETED,processedDate:new Date("2024-01-15"),notes:"Initial payment",transactionId:"txn_123456",customFields:{},createdAt:new Date("2024-01-15"),updatedAt:new Date("2024-01-15")}]}];pe.useEffect(()=>{n(h)},[]);const x=t.filter(v=>{var j,C,E,S;const y=((C=(j=v==null?void 0:v.customerName)==null?void 0:j.toLowerCase())==null?void 0:C.includes(a.toLowerCase()))||!1||((S=(E=v==null?void 0:v.vehicleInfo)==null?void 0:E.toLowerCase())==null?void 0:S.includes(a.toLowerCase()))||!1,b=i==="all"||(v==null?void 0:v.status)===i;return y&&b}),g=v=>{v&&(m(v),f(!0))},p=async v=>{if(!u){e({title:"Error",description:"No loan selected",variant:"destructive"});return}try{const y={id:`payment-${Math.random().toString(36).substring(2,9)}`,invoiceId:u.id,amount:v.amount||0,method:v.method||ai.CASH,status:v.status||Wi.COMPLETED,processedDate:v.processedDate||new Date,notes:v.notes||"",transactionId:v.transactionId||`txn_${Math.random().toString(36).substring(2,9)}`,customFields:{},createdAt:new Date,updatedAt:new Date};return n(b=>Array.isArray(b)?b.map(j=>(j==null?void 0:j.id)===(u==null?void 0:u.id)?{...j,payments:Array.isArray(j.payments)?[...j.payments,y]:[y]}:j):[]),e({title:"Payment Recorded",description:`Payment of ${De(y.amount)} has been recorded.`}),Promise.resolve()}catch(y){return console.error("Error recording payment:",y),e({title:"Error",description:"Failed to record payment",variant:"destructive"}),Promise.reject(y)}};return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Finance Management"}),r.jsx("p",{className:"text-muted-foreground",children:"Manage loans, payments, and financial operations"})]}),r.jsxs(J,{onClick:()=>c(!0),children:[r.jsx(Nt,{className:"mr-2 h-4 w-4"}),"New Loan"]})]}),r.jsxs(lr,{defaultValue:"loans",className:"space-y-4",children:[r.jsxs(or,{children:[r.jsx(Ke,{value:"loans",children:"Loans"}),r.jsx(Ke,{value:"calculator",children:"Calculator"}),r.jsx(Ke,{value:"payments",children:"Payment History"}),r.jsx(Ke,{value:"settings",children:"Settings"})]}),r.jsxs(Je,{value:"loans",className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsxs("div",{className:"relative flex-1",children:[r.jsx(Jn,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),r.jsx(je,{placeholder:"Search loans...",value:a,onChange:v=>s(v.target.value),className:"pl-8"})]}),r.jsxs("select",{value:i,onChange:v=>o(v.target.value),className:"px-3 py-2 border rounded-md",children:[r.jsx("option",{value:"all",children:"All Status"}),r.jsx("option",{value:"active",children:"Active"}),r.jsx("option",{value:"completed",children:"Completed"}),r.jsx("option",{value:"defaulted",children:"Defaulted"})]})]}),r.jsx("div",{className:"grid gap-4",children:Array.isArray(x)&&x.length>0?x.map(v=>v&&r.jsxs(fe,{children:[r.jsxs(we,{children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs(Ne,{className:"flex items-center gap-2",children:[r.jsx(Ga,{className:"h-5 w-5"}),(v==null?void 0:v.customerName)||"Unknown Customer"]}),r.jsx(ze,{variant:(v==null?void 0:v.status)==="active"?"default":"secondary",children:(v==null?void 0:v.status)||"Unknown"})]}),r.jsx(Ue,{children:(v==null?void 0:v.vehicleInfo)||"No vehicle information"})]}),r.jsx(me,{children:r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Loan Amount"}),r.jsx("p",{className:"text-lg font-semibold",children:De((v==null?void 0:v.amount)||0)})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Monthly Payment"}),r.jsx("p",{className:"text-lg font-semibold",children:De((v==null?void 0:v.paymentAmount)||0)})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Payments"}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("p",{className:"text-lg font-semibold",children:Array.isArray(v==null?void 0:v.payments)?v.payments.length:0}),r.jsx(J,{variant:"outline",size:"sm",onClick:y=>{y.stopPropagation(),v&&g(v)},children:"View History"})]})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Next Payment"}),r.jsxs("p",{className:"text-lg font-semibold flex items-center gap-1",children:[r.jsx(Mr,{className:"h-4 w-4"}),v!=null&&v.nextPaymentDate?v.nextPaymentDate.toLocaleDateString():"Not scheduled"]})]})]})})]},(v==null?void 0:v.id)||Math.random().toString())):r.jsx("div",{className:"text-center p-8 border border-dashed rounded-lg",children:r.jsx("p",{className:"text-muted-foreground",children:"No loans found"})})})]}),r.jsx(Je,{value:"calculator",children:r.jsx(V$,{})}),r.jsx(Je,{value:"payments",children:r.jsx(GT,{loan:Array.isArray(x)&&x.length>0?x[0]:{id:"0",customerId:"",customerName:"",vehicleId:"",vehicleInfo:"",amount:0,downPayment:0,term:0,rate:0,paymentAmount:0,startDate:new Date,status:"",remainingBalance:0,nextPaymentDate:new Date,createdAt:new Date,payments:[]},onClose:()=>{}})}),r.jsx(Je,{value:"settings",children:r.jsx(rne,{})})]}),d&&u&&r.jsx(GT,{loan:u,onClose:()=>f(!1),onRecordPayment:p}),l&&r.jsx(nne,{onClose:()=>c(!1),onSave:async v=>{e({title:"Loan Created",description:"New loan has been successfully created."}),c(!1)},onAddNewCustomer:()=>{}})]})};var yt=(e=>(e.PROSPECTING="prospecting",e.QUALIFICATION="qualification",e.NEEDS_ANALYSIS="needs_analysis",e.PROPOSAL="proposal",e.NEGOTIATION="negotiation",e.CLOSED_WON="closed_won",e.CLOSED_LOST="closed_lost",e))(yt||{}),Cr=(e=>(e.ACTIVE="active",e.WON="won",e.LOST="lost",e.ON_HOLD="on_hold",e.CANCELLED="cancelled",e))(Cr||{}),Ao=(e=>(e.LOW="low",e.MEDIUM="medium",e.HIGH="high",e.CRITICAL="critical",e))(Ao||{}),nc=(e=>(e.GEOGRAPHIC="geographic",e.INDUSTRY="industry",e.ACCOUNT_SIZE="account_size",e.PRODUCT_LINE="product_line",e))(nc||{});function sne(){const[e,t]=w.useState([]),[n,a]=w.useState([]),[s,i]=w.useState([]),[o,l]=w.useState([]),[c,d]=w.useState([]),[f,u]=w.useState(!1);w.useEffect(()=>{m()},[]);const m=()=>{const k=un("renter-insight-deals",[{id:"1",name:"Georgetown Class A Sale - Smith Family",customerId:"cust-001",customerName:"John & Mary Smith",stage:yt.PROPOSAL,status:Cr.ACTIVE,priority:"high",value:145e3,probability:75,expectedCloseDate:new Date("2024-02-15"),assignedTo:"rep-001",territoryId:"territory-001",sourceId:"source-001",competitorIds:["comp-001"],products:[{id:"1",productId:"prod-001",productName:"2024 Forest River Georgetown",quantity:1,unitPrice:125e3,discount:5e3,total:12e4},{id:"2",productId:"prod-002",productName:"Extended Warranty Package",quantity:1,unitPrice:3500,discount:0,total:3500}],stageHistory:[],notes:"Customer very interested, financing pre-approved",requiresApproval:!0,approvalStatus:"pending",customFields:{tradeInValue:25e3,financingType:"bank_loan"},createdAt:new Date("2024-01-10"),updatedAt:new Date("2024-01-20")},{id:"2",name:"Travel Trailer - Johnson Family",customerId:"cust-002",customerName:"Sarah Johnson",stage:yt.NEGOTIATION,status:Cr.ACTIVE,priority:"medium",value:75e3,probability:85,expectedCloseDate:new Date("2024-02-10"),assignedTo:"rep-002",territoryId:"territory-002",competitorIds:[],products:[{id:"3",productId:"prod-003",productName:"2024 Airstream Flying Cloud",quantity:1,unitPrice:75e3,discount:2e3,total:73e3}],stageHistory:[],notes:"Ready to close, just finalizing delivery details",requiresApproval:!1,customFields:{},createdAt:new Date("2024-01-05"),updatedAt:new Date("2024-01-18")}]),L=un("renter-insight-territories",[{id:"territory-001",name:"North Region",type:"geographic",description:"Northern states territory",assignedTo:["rep-001","rep-003"],rules:[{id:"1",field:"state",operator:"in_range",value:["IL","WI","MN","IA"],priority:1}],isActive:!0,createdAt:new Date("2024-01-01"),updatedAt:new Date("2024-01-01")},{id:"territory-002",name:"South Region",type:"geographic",description:"Southern states territory",assignedTo:["rep-002"],rules:[{id:"2",field:"state",operator:"in_range",value:["TX","FL","GA","NC"],priority:1}],isActive:!0,createdAt:new Date("2024-01-01"),updatedAt:new Date("2024-01-01")}]),$=un("renter-insight-stage-history",[{id:"1",dealId:"1",fromStage:yt.QUALIFICATION,toStage:yt.NEEDS_ANALYSIS,changedBy:"rep-001",changedAt:new Date("2024-01-12"),duration:48,notes:"Customer qualified, moving to needs analysis"},{id:"2",dealId:"1",fromStage:yt.NEEDS_ANALYSIS,toStage:yt.PROPOSAL,changedBy:"rep-001",changedAt:new Date("2024-01-18"),duration:144,notes:"Proposal prepared and presented"}]);t(k),a(L),d($)},h=k=>{Wr("renter-insight-deals",k)},x=k=>{Wr("renter-insight-stage-history",k)},g=async k=>{u(!0);try{const L={id:Math.random().toString(36).substr(2,9),name:k.name||"",customerId:k.customerId||"",customerName:k.customerName||"",stage:yt.PROSPECTING,status:Cr.ACTIVE,priority:k.priority||"medium",value:k.value||0,probability:10,expectedCloseDate:k.expectedCloseDate||new Date,assignedTo:k.assignedTo||"",territoryId:k.territoryId||"",sourceId:k.sourceId,competitorIds:k.competitorIds||[],products:k.products||[],stageHistory:[],notes:k.notes||"",requiresApproval:(k.value||0)>1e5,customFields:k.customFields||{},createdAt:new Date,updatedAt:new Date},$=[...e,L];return t($),h($),await v(L.id,void 0,yt.PROSPECTING,"system"),L}finally{u(!1)}},p=async(k,L,$)=>{const M=e.find(V=>V.id===k);if(!M)return;const B=M.stage,U=b(L),W=L===yt.CLOSED_WON?Cr.WON:L===yt.CLOSED_LOST?Cr.LOST:Cr.ACTIVE,q=L===yt.CLOSED_WON||L===yt.CLOSED_LOST?new Date:void 0,R=e.map(V=>V.id===k?{...V,stage:L,probability:U,status:W,actualCloseDate:q,updatedAt:new Date}:V);return t(R),h(R),await v(k,B,L,"current-user",$||`Stage changed from ${(B==null?void 0:B.replace("_"," "))||"none"} to ${L.replace("_"," ")}`),R.find(V=>V.id===k)},v=async(k,L,$,M,B)=>{const U=L?y(k,L):void 0,W={id:Math.random().toString(36).substr(2,9),dealId:k,fromStage:L,toStage:$,changedBy:M,changedAt:new Date,duration:U,notes:B},q=[...c,W];d(q),x(q)},y=(k,L)=>{const M=c.filter(B=>B.dealId===k).find(B=>B.toStage===L);return M?Math.floor((Date.now()-M.changedAt.getTime())/36e5):0},b=k=>{switch(k){case yt.PROSPECTING:return 10;case yt.QUALIFICATION:return 25;case yt.NEEDS_ANALYSIS:return 40;case yt.PROPOSAL:return 60;case yt.NEGOTIATION:return 80;case yt.CLOSED_WON:return 100;case yt.CLOSED_LOST:return 0;default:return 10}},j=async(k,L)=>{const $=n.find(M=>M.isActive);if($){const M=e.map(B=>B.id===k?{...B,territoryId:$.id,updatedAt:new Date}:B);t(M),h(M)}},C=async(k,L)=>{const $={id:Math.random().toString(36).substr(2,9),dealId:k,workflowType:L,currentStep:1,totalSteps:2,steps:[{id:"1",stepNumber:1,approverRole:"sales_manager",approverIds:["manager-001"],requiredApprovals:1,currentApprovals:[],status:"pending"},{id:"2",stepNumber:2,approverRole:"sales_director",approverIds:["director-001"],requiredApprovals:1,currentApprovals:[],status:"pending"}],status:"pending",requestedBy:"current-user",requestedAt:new Date};return i(M=>[...M,$]),$},E=async(k,L,$)=>{const M={id:Math.random().toString(36).substr(2,9),dealId:k,outcome:L,primaryReason:$.primaryReason||"",secondaryReasons:$.secondaryReasons||[],competitorWon:$.competitorWon,feedback:$.feedback||"",lessonsLearned:$.lessonsLearned||[],actionItems:$.actionItems||[],reportedBy:"current-user",reportedAt:new Date};return l(B=>[...B,M]),M},S=()=>{const k=e.length,L=e.reduce((V,G)=>V+G.value,0),$=e.filter(V=>V.status===Cr.WON).length,M=e.filter(V=>V.status===Cr.WON).reduce((V,G)=>V+G.value,0),B=e.filter(V=>V.status===Cr.LOST).length,U=e.filter(V=>V.status===Cr.LOST).reduce((V,G)=>V+G.value,0),W=k>0?$/k*100:0,q=k>0?L/k:0,R=N();return{totalDeals:k,totalValue:L,wonDeals:$,wonValue:M,lostDeals:B,lostValue:U,winRate:W,averageDealSize:q,averageSalesCycle:R,conversionRates:I()}},N=()=>{const k=e.filter($=>$.actualCloseDate);return k.length===0?0:k.reduce(($,M)=>{const B=new Date(M.actualCloseDate),U=new Date(M.createdAt),W=isNaN(B.getTime())?0:B.getTime(),q=isNaN(U.getTime())?0:U.getTime(),R=W&&q?Math.floor((W-q)/(1e3*60*60*24)):0;return $+R},0)/k.length},I=()=>[{fromStage:yt.PROSPECTING,toStage:yt.QUALIFICATION,rate:65,averageDuration:72},{fromStage:yt.QUALIFICATION,toStage:yt.NEEDS_ANALYSIS,rate:75,averageDuration:48},{fromStage:yt.NEEDS_ANALYSIS,toStage:yt.PROPOSAL,rate:80,averageDuration:96},{fromStage:yt.PROPOSAL,toStage:yt.NEGOTIATION,rate:70,averageDuration:120},{fromStage:yt.NEGOTIATION,toStage:yt.CLOSED_WON,rate:85,averageDuration:168}];return{deals:e,territories:n,approvalWorkflows:s,winLossReports:o,stageHistory:c,loading:f,createDeal:g,updateDealStage:p,assignTerritory:j,createApprovalWorkflow:C,createWinLossReport:E,getDealMetrics:S,getDealsByStage:k=>e.filter(L=>L.stage===k),getDealsByTerritory:k=>e.filter(L=>L.territoryId===k),getDealsByRep:k=>e.filter(L=>L.assignedTo===k),getStageHistory:k=>c.filter(L=>L.dealId===k).sort((L,$)=>new Date(L.changedAt).getTime()-new Date($.changedAt).getTime())}}function V5(e,t){return V5=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},V5(e,t)}function q$(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,V5(e,t)}function xr(e){"@babel/helpers - typeof";return xr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xr(e)}function ine(e,t){if(xr(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t||"default");if(xr(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function one(e){var t=ine(e,"string");return xr(t)=="symbol"?t:t+""}function lne(e,t,n){return(t=one(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function KT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function YT(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?KT(Object(n),!0).forEach(function(a){lne(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):KT(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function as(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var XT=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),h2=function(){return Math.random().toString(36).substring(7).split("").join(".")},QT={INIT:"@@redux/INIT"+h2(),REPLACE:"@@redux/REPLACE"+h2(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+h2()}};function cne(e){if(typeof e!="object"||e===null)return!1;for(var t=e;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function W$(e,t,n){var a;if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(as(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(as(1));return n(W$)(e,t)}if(typeof e!="function")throw new Error(as(2));var s=e,i=t,o=[],l=o,c=!1;function d(){l===o&&(l=o.slice())}function f(){if(c)throw new Error(as(3));return i}function u(g){if(typeof g!="function")throw new Error(as(4));if(c)throw new Error(as(5));var p=!0;return d(),l.push(g),function(){if(p){if(c)throw new Error(as(6));p=!1,d();var y=l.indexOf(g);l.splice(y,1),o=null}}}function m(g){if(!cne(g))throw new Error(as(7));if(typeof g.type>"u")throw new Error(as(8));if(c)throw new Error(as(9));try{c=!0,i=s(i,g)}finally{c=!1}for(var p=o=l,v=0;v<p.length;v++){var y=p[v];y()}return g}function h(g){if(typeof g!="function")throw new Error(as(10));s=g,m({type:QT.REPLACE})}function x(){var g,p=u;return g={subscribe:function(y){if(typeof y!="object"||y===null)throw new Error(as(11));function b(){y.next&&y.next(f())}b();var j=p(b);return{unsubscribe:j}}},g[XT]=function(){return this},g}return m({type:QT.INIT}),a={dispatch:m,subscribe:u,getState:f,replaceReducer:h},a[XT]=x,a}function JT(e,t){return function(){return t(e.apply(this,arguments))}}function ZT(e,t){if(typeof e=="function")return JT(e,t);if(typeof e!="object"||e===null)throw new Error(as(16));var n={};for(var a in e){var s=e[a];typeof s=="function"&&(n[a]=JT(s,t))}return n}function H$(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.length===0?function(a){return a}:t.length===1?t[0]:t.reduce(function(a,s){return function(){return a(s.apply(void 0,arguments))}})}function dne(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(a){return function(){var s=a.apply(void 0,arguments),i=function(){throw new Error(as(15))},o={getState:s.getState,dispatch:function(){return i.apply(void 0,arguments)}},l=t.map(function(c){return c(o)});return i=H$.apply(void 0,l)(s.dispatch),YT(YT({},s),{},{dispatch:i})}}}var G$=pe.createContext(null);function une(e){e()}var K$=une,fne=function(t){return K$=t},mne=function(){return K$};function hne(){var e=mne(),t=null,n=null;return{clear:function(){t=null,n=null},notify:function(){e(function(){for(var s=t;s;)s.callback(),s=s.next})},get:function(){for(var s=[],i=t;i;)s.push(i),i=i.next;return s},subscribe:function(s){var i=!0,o=n={callback:s,next:null,prev:n};return o.prev?o.prev.next=o:t=o,function(){!i||t===null||(i=!1,o.next?o.next.prev=o.prev:n=o.prev,o.prev?o.prev.next=o.next:t=o.next)}}}}var eI={notify:function(){},get:function(){return[]}};function Y$(e,t){var n,a=eI;function s(u){return c(),a.subscribe(u)}function i(){a.notify()}function o(){f.onStateChange&&f.onStateChange()}function l(){return!!n}function c(){n||(n=t?t.addNestedSub(o):e.subscribe(o),a=hne())}function d(){n&&(n(),n=void 0,a.clear(),a=eI)}var f={addNestedSub:s,notifyNestedSubs:i,handleChangeWrapper:o,isSubscribed:l,trySubscribe:c,tryUnsubscribe:d,getListeners:function(){return a}};return f}var X$=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?w.useLayoutEffect:w.useEffect;function pne(e){var t=e.store,n=e.context,a=e.children,s=w.useMemo(function(){var l=Y$(t);return{store:t,subscription:l}},[t]),i=w.useMemo(function(){return t.getState()},[t]);X$(function(){var l=s.subscription;return l.onStateChange=l.notifyNestedSubs,l.trySubscribe(),i!==t.getState()&&l.notifyNestedSubs(),function(){l.tryUnsubscribe(),l.onStateChange=null}},[s,i]);var o=n||G$;return pe.createElement(o.Provider,{value:s},a)}function Ey(e,t){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;n[a]=e[a]}return n}var Q$={exports:{}},Tr={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var la=typeof Symbol=="function"&&Symbol.for,c4=la?Symbol.for("react.element"):60103,d4=la?Symbol.for("react.portal"):60106,x1=la?Symbol.for("react.fragment"):60107,g1=la?Symbol.for("react.strict_mode"):60108,y1=la?Symbol.for("react.profiler"):60114,b1=la?Symbol.for("react.provider"):60109,j1=la?Symbol.for("react.context"):60110,u4=la?Symbol.for("react.async_mode"):60111,w1=la?Symbol.for("react.concurrent_mode"):60111,N1=la?Symbol.for("react.forward_ref"):60112,S1=la?Symbol.for("react.suspense"):60113,vne=la?Symbol.for("react.suspense_list"):60120,C1=la?Symbol.for("react.memo"):60115,A1=la?Symbol.for("react.lazy"):60116,xne=la?Symbol.for("react.block"):60121,gne=la?Symbol.for("react.fundamental"):60117,yne=la?Symbol.for("react.responder"):60118,bne=la?Symbol.for("react.scope"):60119;function zs(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case c4:switch(e=e.type,e){case u4:case w1:case x1:case y1:case g1:case S1:return e;default:switch(e=e&&e.$$typeof,e){case j1:case N1:case A1:case C1:case b1:return e;default:return t}}case d4:return t}}}function J$(e){return zs(e)===w1}Tr.AsyncMode=u4;Tr.ConcurrentMode=w1;Tr.ContextConsumer=j1;Tr.ContextProvider=b1;Tr.Element=c4;Tr.ForwardRef=N1;Tr.Fragment=x1;Tr.Lazy=A1;Tr.Memo=C1;Tr.Portal=d4;Tr.Profiler=y1;Tr.StrictMode=g1;Tr.Suspense=S1;Tr.isAsyncMode=function(e){return J$(e)||zs(e)===u4};Tr.isConcurrentMode=J$;Tr.isContextConsumer=function(e){return zs(e)===j1};Tr.isContextProvider=function(e){return zs(e)===b1};Tr.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===c4};Tr.isForwardRef=function(e){return zs(e)===N1};Tr.isFragment=function(e){return zs(e)===x1};Tr.isLazy=function(e){return zs(e)===A1};Tr.isMemo=function(e){return zs(e)===C1};Tr.isPortal=function(e){return zs(e)===d4};Tr.isProfiler=function(e){return zs(e)===y1};Tr.isStrictMode=function(e){return zs(e)===g1};Tr.isSuspense=function(e){return zs(e)===S1};Tr.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===x1||e===w1||e===y1||e===g1||e===S1||e===vne||typeof e=="object"&&e!==null&&(e.$$typeof===A1||e.$$typeof===C1||e.$$typeof===b1||e.$$typeof===j1||e.$$typeof===N1||e.$$typeof===gne||e.$$typeof===yne||e.$$typeof===bne||e.$$typeof===xne)};Tr.typeOf=zs;Q$.exports=Tr;var jne=Q$.exports,f4=jne,wne={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},Nne={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},Sne={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},Z$={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},m4={};m4[f4.ForwardRef]=Sne;m4[f4.Memo]=Z$;function tI(e){return f4.isMemo(e)?Z$:m4[e.$$typeof]||wne}var Cne=Object.defineProperty,Ane=Object.getOwnPropertyNames,rI=Object.getOwnPropertySymbols,Ene=Object.getOwnPropertyDescriptor,Pne=Object.getPrototypeOf,nI=Object.prototype;function e7(e,t,n){if(typeof t!="string"){if(nI){var a=Pne(t);a&&a!==nI&&e7(e,a,n)}var s=Ane(t);rI&&(s=s.concat(rI(t)));for(var i=tI(e),o=tI(t),l=0;l<s.length;++l){var c=s[l];if(!Nne[c]&&!(n&&n[c])&&!(o&&o[c])&&!(i&&i[c])){var d=Ene(t,c);try{Cne(e,c,d)}catch{}}}}return e}var Tne=e7;const aI=Er(Tne);var t7={exports:{}},zr={};/** @license React v17.0.2
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var E1=60103,P1=60106,fx=60107,mx=60108,hx=60114,px=60109,vx=60110,xx=60112,gx=60113,h4=60120,yx=60115,bx=60116,r7=60121,n7=60122,a7=60117,s7=60129,i7=60131;if(typeof Symbol=="function"&&Symbol.for){var ma=Symbol.for;E1=ma("react.element"),P1=ma("react.portal"),fx=ma("react.fragment"),mx=ma("react.strict_mode"),hx=ma("react.profiler"),px=ma("react.provider"),vx=ma("react.context"),xx=ma("react.forward_ref"),gx=ma("react.suspense"),h4=ma("react.suspense_list"),yx=ma("react.memo"),bx=ma("react.lazy"),r7=ma("react.block"),n7=ma("react.server.block"),a7=ma("react.fundamental"),s7=ma("react.debug_trace_mode"),i7=ma("react.legacy_hidden")}function no(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case E1:switch(e=e.type,e){case fx:case hx:case mx:case gx:case h4:return e;default:switch(e=e&&e.$$typeof,e){case vx:case xx:case bx:case yx:case px:return e;default:return t}}case P1:return t}}}var Ine=px,Dne=E1,kne=xx,One=fx,_ne=bx,Lne=yx,Rne=P1,Fne=hx,Mne=mx,$ne=gx;zr.ContextConsumer=vx;zr.ContextProvider=Ine;zr.Element=Dne;zr.ForwardRef=kne;zr.Fragment=One;zr.Lazy=_ne;zr.Memo=Lne;zr.Portal=Rne;zr.Profiler=Fne;zr.StrictMode=Mne;zr.Suspense=$ne;zr.isAsyncMode=function(){return!1};zr.isConcurrentMode=function(){return!1};zr.isContextConsumer=function(e){return no(e)===vx};zr.isContextProvider=function(e){return no(e)===px};zr.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===E1};zr.isForwardRef=function(e){return no(e)===xx};zr.isFragment=function(e){return no(e)===fx};zr.isLazy=function(e){return no(e)===bx};zr.isMemo=function(e){return no(e)===yx};zr.isPortal=function(e){return no(e)===P1};zr.isProfiler=function(e){return no(e)===hx};zr.isStrictMode=function(e){return no(e)===mx};zr.isSuspense=function(e){return no(e)===gx};zr.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===fx||e===hx||e===s7||e===mx||e===gx||e===h4||e===i7||typeof e=="object"&&e!==null&&(e.$$typeof===bx||e.$$typeof===yx||e.$$typeof===px||e.$$typeof===vx||e.$$typeof===xx||e.$$typeof===a7||e.$$typeof===r7||e[0]===n7)};zr.typeOf=no;t7.exports=zr;var Bne=t7.exports,zne=["getDisplayName","methodName","renderCountProp","shouldHandleStateChanges","storeKey","withRef","forwardRef","context"],Une=["reactReduxForwardedRef"],Vne=[],qne=[null,null];function Wne(e,t){var n=e[1];return[t.payload,n+1]}function sI(e,t,n){X$(function(){return e.apply(void 0,t)},n)}function Hne(e,t,n,a,s,i,o){e.current=a,t.current=s,n.current=!1,i.current&&(i.current=null,o())}function Gne(e,t,n,a,s,i,o,l,c,d){if(e){var f=!1,u=null,m=function(){if(!f){var g=t.getState(),p,v;try{p=a(g,s.current)}catch(y){v=y,u=y}v||(u=null),p===i.current?o.current||c():(i.current=p,l.current=p,o.current=!0,d({type:"STORE_UPDATED",payload:{error:v}}))}};n.onStateChange=m,n.trySubscribe(),m();var h=function(){if(f=!0,n.tryUnsubscribe(),n.onStateChange=null,u)throw u};return h}}var Kne=function(){return[null,0]};function Yne(e,t){t===void 0&&(t={});var n=t,a=n.getDisplayName,s=a===void 0?function(b){return"ConnectAdvanced("+b+")"}:a,i=n.methodName,o=i===void 0?"connectAdvanced":i,l=n.renderCountProp,c=l===void 0?void 0:l,d=n.shouldHandleStateChanges,f=d===void 0?!0:d,u=n.storeKey,m=u===void 0?"store":u;n.withRef;var h=n.forwardRef,x=h===void 0?!1:h,g=n.context,p=g===void 0?G$:g,v=Ey(n,zne),y=p;return function(j){var C=j.displayName||j.name||"Component",E=s(C),S=at({},v,{getDisplayName:s,methodName:o,renderCountProp:c,shouldHandleStateChanges:f,storeKey:m,displayName:E,wrappedComponentName:C,WrappedComponent:j}),N=v.pure;function I(k){return e(k.dispatch,S)}var D=N?w.useMemo:function(k){return k()};function T(k){var L=w.useMemo(function(){var be=k.reactReduxForwardedRef,Re=Ey(k,Une);return[k.context,be,Re]},[k]),$=L[0],M=L[1],B=L[2],U=w.useMemo(function(){return $&&$.Consumer&&Bne.isContextConsumer(pe.createElement($.Consumer,null))?$:y},[$,y]),W=w.useContext(U),q=!!k.store&&!!k.store.getState&&!!k.store.dispatch;W&&W.store;var R=q?k.store:W.store,V=w.useMemo(function(){return I(R)},[R]),G=w.useMemo(function(){if(!f)return qne;var be=Y$(R,q?null:W.subscription),Re=be.notifyNestedSubs.bind(be);return[be,Re]},[R,q,W]),ee=G[0],re=G[1],de=w.useMemo(function(){return q?W:at({},W,{subscription:ee})},[q,W,ee]),ue=w.useReducer(Wne,Vne,Kne),oe=ue[0],ge=oe[0],ve=ue[1];if(ge&&ge.error)throw ge.error;var xe=w.useRef(),Oe=w.useRef(B),ye=w.useRef(),le=w.useRef(!1),ne=D(function(){return ye.current&&B===Oe.current?ye.current:V(R.getState(),B)},[R,ge,B]);sI(Hne,[Oe,xe,le,B,ne,ye,re]),sI(Gne,[f,R,ee,V,Oe,xe,le,ye,re,ve],[R,ee,V]);var Ae=w.useMemo(function(){return pe.createElement(j,at({},ne,{ref:M}))},[M,j,ne]),Se=w.useMemo(function(){return f?pe.createElement(U.Provider,{value:de},Ae):Ae},[U,Ae,de]);return Se}var A=N?pe.memo(T):T;if(A.WrappedComponent=j,A.displayName=T.displayName=E,x){var _=pe.forwardRef(function(L,$){return pe.createElement(A,at({},L,{reactReduxForwardedRef:$}))});return _.displayName=E,_.WrappedComponent=j,aI(_,j)}return aI(A,j)}}function iI(e,t){return e===t?e!==0||t!==0||1/e===1/t:e!==e&&t!==t}function p2(e,t){if(iI(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),a=Object.keys(t);if(n.length!==a.length)return!1;for(var s=0;s<n.length;s++)if(!Object.prototype.hasOwnProperty.call(t,n[s])||!iI(e[n[s]],t[n[s]]))return!1;return!0}function Xne(e,t){var n={},a=function(o){var l=e[o];typeof l=="function"&&(n[o]=function(){return t(l.apply(void 0,arguments))})};for(var s in e)a(s);return n}function p4(e){return function(n,a){var s=e(n,a);function i(){return s}return i.dependsOnOwnProps=!1,i}}function oI(e){return e.dependsOnOwnProps!==null&&e.dependsOnOwnProps!==void 0?!!e.dependsOnOwnProps:e.length!==1}function o7(e,t){return function(a,s){s.displayName;var i=function(l,c){return i.dependsOnOwnProps?i.mapToProps(l,c):i.mapToProps(l)};return i.dependsOnOwnProps=!0,i.mapToProps=function(l,c){i.mapToProps=e,i.dependsOnOwnProps=oI(e);var d=i(l,c);return typeof d=="function"&&(i.mapToProps=d,i.dependsOnOwnProps=oI(d),d=i(l,c)),d},i}}function Qne(e){return typeof e=="function"?o7(e):void 0}function Jne(e){return e?void 0:p4(function(t){return{dispatch:t}})}function Zne(e){return e&&typeof e=="object"?p4(function(t){return Xne(e,t)}):void 0}const eae=[Qne,Jne,Zne];function tae(e){return typeof e=="function"?o7(e):void 0}function rae(e){return e?void 0:p4(function(){return{}})}const nae=[tae,rae];function aae(e,t,n){return at({},n,e,t)}function sae(e){return function(n,a){a.displayName;var s=a.pure,i=a.areMergedPropsEqual,o=!1,l;return function(d,f,u){var m=e(d,f,u);return o?(!s||!i(m,l))&&(l=m):(o=!0,l=m),l}}}function iae(e){return typeof e=="function"?sae(e):void 0}function oae(e){return e?void 0:function(){return aae}}const lae=[iae,oae];var cae=["initMapStateToProps","initMapDispatchToProps","initMergeProps"];function dae(e,t,n,a){return function(i,o){return n(e(i,o),t(a,o),o)}}function uae(e,t,n,a,s){var i=s.areStatesEqual,o=s.areOwnPropsEqual,l=s.areStatePropsEqual,c=!1,d,f,u,m,h;function x(b,j){return d=b,f=j,u=e(d,f),m=t(a,f),h=n(u,m,f),c=!0,h}function g(){return u=e(d,f),t.dependsOnOwnProps&&(m=t(a,f)),h=n(u,m,f),h}function p(){return e.dependsOnOwnProps&&(u=e(d,f)),t.dependsOnOwnProps&&(m=t(a,f)),h=n(u,m,f),h}function v(){var b=e(d,f),j=!l(b,u);return u=b,j&&(h=n(u,m,f)),h}function y(b,j){var C=!o(j,f),E=!i(b,d,j,f);return d=b,f=j,C&&E?g():C?p():E?v():h}return function(j,C){return c?y(j,C):x(j,C)}}function fae(e,t){var n=t.initMapStateToProps,a=t.initMapDispatchToProps,s=t.initMergeProps,i=Ey(t,cae),o=n(e,i),l=a(e,i),c=s(e,i),d=i.pure?uae:dae;return d(o,l,c,e,i)}var mae=["pure","areStatesEqual","areOwnPropsEqual","areStatePropsEqual","areMergedPropsEqual"];function v2(e,t,n){for(var a=t.length-1;a>=0;a--){var s=t[a](e);if(s)return s}return function(i,o){throw new Error("Invalid value of type "+typeof e+" for "+n+" argument when connecting component "+o.wrappedComponentName+".")}}function hae(e,t){return e===t}function pae(e){var t=e===void 0?{}:e,n=t.connectHOC,a=n===void 0?Yne:n,s=t.mapStateToPropsFactories,i=s===void 0?nae:s,o=t.mapDispatchToPropsFactories,l=o===void 0?eae:o,c=t.mergePropsFactories,d=c===void 0?lae:c,f=t.selectorFactory,u=f===void 0?fae:f;return function(h,x,g,p){p===void 0&&(p={});var v=p,y=v.pure,b=y===void 0?!0:y,j=v.areStatesEqual,C=j===void 0?hae:j,E=v.areOwnPropsEqual,S=E===void 0?p2:E,N=v.areStatePropsEqual,I=N===void 0?p2:N,D=v.areMergedPropsEqual,T=D===void 0?p2:D,A=Ey(v,mae),_=v2(h,i,"mapStateToProps"),k=v2(x,l,"mapDispatchToProps"),L=v2(g,d,"mergeProps");return a(u,at({methodName:"connect",getDisplayName:function(M){return"Connect("+M+")"},shouldHandleStateChanges:!!h,initMapStateToProps:_,initMapDispatchToProps:k,initMergeProps:L,pure:b,areStatesEqual:C,areOwnPropsEqual:S,areStatePropsEqual:I,areMergedPropsEqual:T},A))}}const l7=pae();fne(zo.unstable_batchedUpdates);function vae(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function c7(e,t){var n=w.useState(function(){return{inputs:t,result:e()}})[0],a=w.useRef(!0),s=w.useRef(n),i=a.current||!!(t&&s.current.inputs&&vae(t,s.current.inputs)),o=i?s.current:{inputs:t,result:e()};return w.useEffect(function(){a.current=!1,s.current=o},[o]),o.result}function xae(e,t){return c7(function(){return e},t)}var hr=c7,Pt=xae,gae=!0,x2="Invariant failed";function Uc(e,t){if(!e){if(gae)throw new Error(x2);var n=typeof t=="function"?t():t,a=n?"".concat(x2,": ").concat(n):x2;throw new Error(a)}}var Hi=function(t){var n=t.top,a=t.right,s=t.bottom,i=t.left,o=a-i,l=s-n,c={top:n,right:a,bottom:s,left:i,width:o,height:l,x:i,y:n,center:{x:(a+i)/2,y:(s+n)/2}};return c},v4=function(t,n){return{top:t.top-n.top,left:t.left-n.left,bottom:t.bottom+n.bottom,right:t.right+n.right}},lI=function(t,n){return{top:t.top+n.top,left:t.left+n.left,bottom:t.bottom-n.bottom,right:t.right-n.right}},yae=function(t,n){return{top:t.top+n.y,left:t.left+n.x,bottom:t.bottom+n.y,right:t.right+n.x}},g2={top:0,right:0,bottom:0,left:0},x4=function(t){var n=t.borderBox,a=t.margin,s=a===void 0?g2:a,i=t.border,o=i===void 0?g2:i,l=t.padding,c=l===void 0?g2:l,d=Hi(v4(n,s)),f=Hi(lI(n,o)),u=Hi(lI(f,c));return{marginBox:d,borderBox:Hi(n),paddingBox:f,contentBox:u,margin:s,border:o,padding:c}},Xs=function(t){var n=t.slice(0,-2),a=t.slice(-2);if(a!=="px")return 0;var s=Number(n);return isNaN(s)&&Uc(!1),s},bae=function(){return{x:window.pageXOffset,y:window.pageYOffset}},Py=function(t,n){var a=t.borderBox,s=t.border,i=t.margin,o=t.padding,l=yae(a,n);return x4({borderBox:l,border:s,margin:i,padding:o})},Ty=function(t,n){return n===void 0&&(n=bae()),Py(t,n)},d7=function(t,n){var a={top:Xs(n.marginTop),right:Xs(n.marginRight),bottom:Xs(n.marginBottom),left:Xs(n.marginLeft)},s={top:Xs(n.paddingTop),right:Xs(n.paddingRight),bottom:Xs(n.paddingBottom),left:Xs(n.paddingLeft)},i={top:Xs(n.borderTopWidth),right:Xs(n.borderRightWidth),bottom:Xs(n.borderBottomWidth),left:Xs(n.borderLeftWidth)};return x4({borderBox:t,margin:a,padding:s,border:i})},u7=function(t){var n=t.getBoundingClientRect(),a=window.getComputedStyle(t);return d7(n,a)},cI=Number.isNaN||function(t){return typeof t=="number"&&t!==t};function jae(e,t){return!!(e===t||cI(e)&&cI(t))}function wae(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(!jae(e[n],t[n]))return!1;return!0}function ia(e,t){t===void 0&&(t=wae);var n,a=[],s,i=!1;function o(){for(var l=[],c=0;c<arguments.length;c++)l[c]=arguments[c];return i&&n===this&&t(l,a)||(s=e.apply(this,l),i=!0,n=this,a=l),s}return o}var Nae=function(t){var n=[],a=null,s=function(){for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];n=l,!a&&(a=requestAnimationFrame(function(){a=null,t.apply(void 0,n)}))};return s.cancel=function(){a&&(cancelAnimationFrame(a),a=null)},s};const cv=Nae;function f7(e,t){}f7.bind(null,"warn");f7.bind(null,"error");function Ic(){}function Sae(e,t){return at({},e,{},t)}function oi(e,t,n){var a=t.map(function(s){var i=Sae(n,s.options);return e.addEventListener(s.eventName,s.fn,i),function(){e.removeEventListener(s.eventName,s.fn,i)}});return function(){a.forEach(function(i){i()})}}var Cae="Invariant failed";function Iy(e){this.message=e}Iy.prototype.toString=function(){return this.message};function it(e,t){if(!e)throw new Iy(Cae)}var Aae=function(e){q$(t,e);function t(){for(var a,s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];return a=e.call.apply(e,[this].concat(i))||this,a.callbacks=null,a.unbind=Ic,a.onWindowError=function(l){var c=a.getCallbacks();c.isDragging()&&c.tryAbort();var d=l.error;d instanceof Iy&&l.preventDefault()},a.getCallbacks=function(){if(!a.callbacks)throw new Error("Unable to find AppCallbacks in <ErrorBoundary/>");return a.callbacks},a.setCallbacks=function(l){a.callbacks=l},a}var n=t.prototype;return n.componentDidMount=function(){this.unbind=oi(window,[{eventName:"error",fn:this.onWindowError}])},n.componentDidCatch=function(s){if(s instanceof Iy){this.setState({});return}throw s},n.componentWillUnmount=function(){this.unbind()},n.render=function(){return this.props.children(this.setCallbacks)},t}(pe.Component),Eae=`
  Press space bar to start a drag.
  When dragging you can use the arrow keys to move the item around and escape to cancel.
  Some screen readers may require you to be in focus mode or to use your pass through key
`,Dy=function(t){return t+1},Pae=function(t){return`
  You have lifted an item in position `+Dy(t.source.index)+`
`},m7=function(t,n){var a=t.droppableId===n.droppableId,s=Dy(t.index),i=Dy(n.index);return a?`
      You have moved the item from position `+s+`
      to position `+i+`
    `:`
    You have moved the item from position `+s+`
    in list `+t.droppableId+`
    to list `+n.droppableId+`
    in position `+i+`
  `},h7=function(t,n,a){var s=n.droppableId===a.droppableId;return s?`
      The item `+t+`
      has been combined with `+a.draggableId:`
      The item `+t+`
      in list `+n.droppableId+`
      has been combined with `+a.draggableId+`
      in list `+a.droppableId+`
    `},Tae=function(t){var n=t.destination;if(n)return m7(t.source,n);var a=t.combine;return a?h7(t.draggableId,t.source,a):"You are over an area that cannot be dropped on"},dI=function(t){return`
  The item has returned to its starting position
  of `+Dy(t.index)+`
`},Iae=function(t){if(t.reason==="CANCEL")return`
      Movement cancelled.
      `+dI(t.source)+`
    `;var n=t.destination,a=t.combine;return n?`
      You have dropped the item.
      `+m7(t.source,n)+`
    `:a?`
      You have dropped the item.
      `+h7(t.draggableId,t.source,a)+`
    `:`
    The item has been dropped while not over a drop area.
    `+dI(t.source)+`
  `},M0={dragHandleUsageInstructions:Eae,onDragStart:Pae,onDragUpdate:Tae,onDragEnd:Iae},oa={x:0,y:0},ga=function(t,n){return{x:t.x+n.x,y:t.y+n.y}},Is=function(t,n){return{x:t.x-n.x,y:t.y-n.y}},Dc=function(t,n){return t.x===n.x&&t.y===n.y},Hm=function(t){return{x:t.x!==0?-t.x:0,y:t.y!==0?-t.y:0}},ou=function(t,n,a){var s;return a===void 0&&(a=0),s={},s[t]=n,s[t==="x"?"y":"x"]=a,s},dv=function(t,n){return Math.sqrt(Math.pow(n.x-t.x,2)+Math.pow(n.y-t.y,2))},uI=function(t,n){return Math.min.apply(Math,n.map(function(a){return dv(t,a)}))},p7=function(t){return function(n){return{x:t(n.x),y:t(n.y)}}},Dae=function(e,t){var n=Hi({top:Math.max(t.top,e.top),right:Math.min(t.right,e.right),bottom:Math.min(t.bottom,e.bottom),left:Math.max(t.left,e.left)});return n.width<=0||n.height<=0?null:n},jx=function(t,n){return{top:t.top+n.y,left:t.left+n.x,bottom:t.bottom+n.y,right:t.right+n.x}},fI=function(t){return[{x:t.left,y:t.top},{x:t.right,y:t.top},{x:t.left,y:t.bottom},{x:t.right,y:t.bottom}]},kae={top:0,right:0,bottom:0,left:0},Oae=function(t,n){return n?jx(t,n.scroll.diff.displacement):t},_ae=function(t,n,a){if(a&&a.increasedBy){var s;return at({},t,(s={},s[n.end]=t[n.end]+a.increasedBy[n.line],s))}return t},Lae=function(t,n){return n&&n.shouldClipSubject?Dae(n.pageMarginBox,t):Hi(t)},am=function(e){var t=e.page,n=e.withPlaceholder,a=e.axis,s=e.frame,i=Oae(t.marginBox,s),o=_ae(i,a,n),l=Lae(o,s);return{page:t,withPlaceholder:n,active:l}},g4=function(e,t){e.frame||it(!1);var n=e.frame,a=Is(t,n.scroll.initial),s=Hm(a),i=at({},n,{scroll:{initial:n.scroll.initial,current:t,diff:{value:a,displacement:s},max:n.scroll.max}}),o=am({page:e.subject.page,withPlaceholder:e.subject.withPlaceholder,axis:e.axis,frame:i}),l=at({},e,{frame:i,subject:o});return l};function ky(e){return Object.values?Object.values(e):Object.keys(e).map(function(t){return e[t]})}function y4(e,t){if(e.findIndex)return e.findIndex(t);for(var n=0;n<e.length;n++)if(t(e[n]))return n;return-1}function Qc(e,t){if(e.find)return e.find(t);var n=y4(e,t);if(n!==-1)return e[n]}function v7(e){return Array.prototype.slice.call(e)}var x7=ia(function(e){return e.reduce(function(t,n){return t[n.descriptor.id]=n,t},{})}),g7=ia(function(e){return e.reduce(function(t,n){return t[n.descriptor.id]=n,t},{})}),T1=ia(function(e){return ky(e)}),Rae=ia(function(e){return ky(e)}),Gm=ia(function(e,t){var n=Rae(t).filter(function(a){return e===a.descriptor.droppableId}).sort(function(a,s){return a.descriptor.index-s.descriptor.index});return n});function b4(e){return e.at&&e.at.type==="REORDER"?e.at.destination:null}function I1(e){return e.at&&e.at.type==="COMBINE"?e.at.combine:null}var D1=ia(function(e,t){return t.filter(function(n){return n.descriptor.id!==e.descriptor.id})}),Fae=function(e){var t=e.isMovingForward,n=e.draggable,a=e.destination,s=e.insideDestination,i=e.previousImpact;if(!a.isCombineEnabled)return null;var o=b4(i);if(!o)return null;function l(g){var p={type:"COMBINE",combine:{draggableId:g,droppableId:a.descriptor.id}};return at({},i,{at:p})}var c=i.displaced.all,d=c.length?c[0]:null;if(t)return d?l(d):null;var f=D1(n,s);if(!d){if(!f.length)return null;var u=f[f.length-1];return l(u.descriptor.id)}var m=y4(f,function(g){return g.descriptor.id===d});m===-1&&it(!1);var h=m-1;if(h<0)return null;var x=f[h];return l(x.descriptor.id)},Km=function(e,t){return e.descriptor.droppableId===t.descriptor.id},y7={point:oa,value:0},uv={invisible:{},visible:{},all:[]},Mae={displaced:uv,displacedBy:y7,at:null},ui=function(e,t){return function(n){return e<=n&&n<=t}},b7=function(e){var t=ui(e.top,e.bottom),n=ui(e.left,e.right);return function(a){var s=t(a.top)&&t(a.bottom)&&n(a.left)&&n(a.right);if(s)return!0;var i=t(a.top)||t(a.bottom),o=n(a.left)||n(a.right),l=i&&o;if(l)return!0;var c=a.top<e.top&&a.bottom>e.bottom,d=a.left<e.left&&a.right>e.right,f=c&&d;if(f)return!0;var u=c&&o||d&&i;return u}},$ae=function(e){var t=ui(e.top,e.bottom),n=ui(e.left,e.right);return function(a){var s=t(a.top)&&t(a.bottom)&&n(a.left)&&n(a.right);return s}},j4={direction:"vertical",line:"y",crossAxisLine:"x",start:"top",end:"bottom",size:"height",crossAxisStart:"left",crossAxisEnd:"right",crossAxisSize:"width"},j7={direction:"horizontal",line:"x",crossAxisLine:"y",start:"left",end:"right",size:"width",crossAxisStart:"top",crossAxisEnd:"bottom",crossAxisSize:"height"},Bae=function(e){return function(t){var n=ui(t.top,t.bottom),a=ui(t.left,t.right);return function(s){return e===j4?n(s.top)&&n(s.bottom):a(s.left)&&a(s.right)}}},zae=function(t,n){var a=n.frame?n.frame.scroll.diff.displacement:oa;return jx(t,a)},Uae=function(t,n,a){return n.subject.active?a(n.subject.active)(t):!1},Vae=function(t,n,a){return a(n)(t)},w4=function(t){var n=t.target,a=t.destination,s=t.viewport,i=t.withDroppableDisplacement,o=t.isVisibleThroughFrameFn,l=i?zae(n,a):n;return Uae(l,a,o)&&Vae(l,s,o)},qae=function(t){return w4(at({},t,{isVisibleThroughFrameFn:b7}))},w7=function(t){return w4(at({},t,{isVisibleThroughFrameFn:$ae}))},Wae=function(t){return w4(at({},t,{isVisibleThroughFrameFn:Bae(t.destination.axis)}))},Hae=function(t,n,a){if(typeof a=="boolean")return a;if(!n)return!0;var s=n.invisible,i=n.visible;if(s[t])return!1;var o=i[t];return o?o.shouldAnimate:!0};function Gae(e,t){var n=e.page.marginBox,a={top:t.point.y,right:0,bottom:0,left:t.point.x};return Hi(v4(n,a))}function fv(e){var t=e.afterDragging,n=e.destination,a=e.displacedBy,s=e.viewport,i=e.forceShouldAnimate,o=e.last;return t.reduce(function(c,d){var f=Gae(d,a),u=d.descriptor.id;c.all.push(u);var m=qae({target:f,destination:n,viewport:s,withDroppableDisplacement:!0});if(!m)return c.invisible[d.descriptor.id]=!0,c;var h=Hae(u,o,i),x={draggableId:u,shouldAnimate:h};return c.visible[u]=x,c},{all:[],visible:{},invisible:{}})}function Kae(e,t){if(!e.length)return 0;var n=e[e.length-1].descriptor.index;return t.inHomeList?n:n+1}function mI(e){var t=e.insideDestination,n=e.inHomeList,a=e.displacedBy,s=e.destination,i=Kae(t,{inHomeList:n});return{displaced:uv,displacedBy:a,at:{type:"REORDER",destination:{droppableId:s.descriptor.id,index:i}}}}function Oy(e){var t=e.draggable,n=e.insideDestination,a=e.destination,s=e.viewport,i=e.displacedBy,o=e.last,l=e.index,c=e.forceShouldAnimate,d=Km(t,a);if(l==null)return mI({insideDestination:n,inHomeList:d,displacedBy:i,destination:a});var f=Qc(n,function(g){return g.descriptor.index===l});if(!f)return mI({insideDestination:n,inHomeList:d,displacedBy:i,destination:a});var u=D1(t,n),m=n.indexOf(f),h=u.slice(m),x=fv({afterDragging:h,destination:a,displacedBy:i,last:o,viewport:s.frame,forceShouldAnimate:c});return{displaced:x,displacedBy:i,at:{type:"REORDER",destination:{droppableId:a.descriptor.id,index:l}}}}function Vc(e,t){return!!t.effected[e]}var Yae=function(e){var t=e.isMovingForward,n=e.destination,a=e.draggables,s=e.combine,i=e.afterCritical;if(!n.isCombineEnabled)return null;var o=s.draggableId,l=a[o],c=l.descriptor.index,d=Vc(o,i);return d?t?c:c-1:t?c+1:c},Xae=function(e){var t=e.isMovingForward,n=e.isInHomeList,a=e.insideDestination,s=e.location;if(!a.length)return null;var i=s.index,o=t?i+1:i-1,l=a[0].descriptor.index,c=a[a.length-1].descriptor.index,d=n?c:c+1;return o<l||o>d?null:o},Qae=function(e){var t=e.isMovingForward,n=e.isInHomeList,a=e.draggable,s=e.draggables,i=e.destination,o=e.insideDestination,l=e.previousImpact,c=e.viewport,d=e.afterCritical,f=l.at;if(f||it(!1),f.type==="REORDER"){var u=Xae({isMovingForward:t,isInHomeList:n,location:f.destination,insideDestination:o});return u==null?null:Oy({draggable:a,insideDestination:o,destination:i,viewport:c,last:l.displaced,displacedBy:l.displacedBy,index:u})}var m=Yae({isMovingForward:t,destination:i,displaced:l.displaced,draggables:s,combine:f.combine,afterCritical:d});return m==null?null:Oy({draggable:a,insideDestination:o,destination:i,viewport:c,last:l.displaced,displacedBy:l.displacedBy,index:m})},Jae=function(e){var t=e.displaced,n=e.afterCritical,a=e.combineWith,s=e.displacedBy,i=!!(t.visible[a]||t.invisible[a]);return Vc(a,n)?i?oa:Hm(s.point):i?s.point:oa},Zae=function(e){var t=e.afterCritical,n=e.impact,a=e.draggables,s=I1(n);s||it(!1);var i=s.draggableId,o=a[i].page.borderBox.center,l=Jae({displaced:n.displaced,afterCritical:t,combineWith:i,displacedBy:n.displacedBy});return ga(o,l)},N7=function(t,n){return n.margin[t.start]+n.borderBox[t.size]/2},ese=function(t,n){return n.margin[t.end]+n.borderBox[t.size]/2},N4=function(t,n,a){return n[t.crossAxisStart]+a.margin[t.crossAxisStart]+a.borderBox[t.crossAxisSize]/2},hI=function(t){var n=t.axis,a=t.moveRelativeTo,s=t.isMoving;return ou(n.line,a.marginBox[n.end]+N7(n,s),N4(n,a.marginBox,s))},pI=function(t){var n=t.axis,a=t.moveRelativeTo,s=t.isMoving;return ou(n.line,a.marginBox[n.start]-ese(n,s),N4(n,a.marginBox,s))},tse=function(t){var n=t.axis,a=t.moveInto,s=t.isMoving;return ou(n.line,a.contentBox[n.start]+N7(n,s),N4(n,a.contentBox,s))},rse=function(e){var t=e.impact,n=e.draggable,a=e.draggables,s=e.droppable,i=e.afterCritical,o=Gm(s.descriptor.id,a),l=n.page,c=s.axis;if(!o.length)return tse({axis:c,moveInto:s.page,isMoving:l});var d=t.displaced,f=t.displacedBy,u=d.all[0];if(u){var m=a[u];if(Vc(u,i))return pI({axis:c,moveRelativeTo:m.page,isMoving:l});var h=Py(m.page,f.point);return pI({axis:c,moveRelativeTo:h,isMoving:l})}var x=o[o.length-1];if(x.descriptor.id===n.descriptor.id)return l.borderBox.center;if(Vc(x.descriptor.id,i)){var g=Py(x.page,Hm(i.displacedBy.point));return hI({axis:c,moveRelativeTo:g,isMoving:l})}return hI({axis:c,moveRelativeTo:x.page,isMoving:l})},q5=function(e,t){var n=e.frame;return n?ga(t,n.scroll.diff.displacement):t},nse=function(t){var n=t.impact,a=t.draggable,s=t.droppable,i=t.draggables,o=t.afterCritical,l=a.page.borderBox.center,c=n.at;return!s||!c?l:c.type==="REORDER"?rse({impact:n,draggable:a,draggables:i,droppable:s,afterCritical:o}):Zae({impact:n,draggables:i,afterCritical:o})},k1=function(e){var t=nse(e),n=e.droppable,a=n?q5(n,t):t;return a},S7=function(e,t){var n=Is(t,e.scroll.initial),a=Hm(n),s=Hi({top:t.y,bottom:t.y+e.frame.height,left:t.x,right:t.x+e.frame.width}),i={frame:s,scroll:{initial:e.scroll.initial,max:e.scroll.max,current:t,diff:{value:n,displacement:a}}};return i};function vI(e,t){return e.map(function(n){return t[n]})}function ase(e,t){for(var n=0;n<t.length;n++){var a=t[n].visible[e];if(a)return a}return null}var sse=function(e){var t=e.impact,n=e.viewport,a=e.destination,s=e.draggables,i=e.maxScrollChange,o=S7(n,ga(n.scroll.current,i)),l=a.frame?g4(a,ga(a.frame.scroll.current,i)):a,c=t.displaced,d=fv({afterDragging:vI(c.all,s),destination:a,displacedBy:t.displacedBy,viewport:o.frame,last:c,forceShouldAnimate:!1}),f=fv({afterDragging:vI(c.all,s),destination:l,displacedBy:t.displacedBy,viewport:n.frame,last:c,forceShouldAnimate:!1}),u={},m={},h=[c,d,f];c.all.forEach(function(g){var p=ase(g,h);if(p){m[g]=p;return}u[g]=!0});var x=at({},t,{displaced:{all:c.all,invisible:u,visible:m}});return x},ise=function(e,t){return ga(e.scroll.diff.displacement,t)},S4=function(e){var t=e.pageBorderBoxCenter,n=e.draggable,a=e.viewport,s=ise(a,t),i=Is(s,n.page.borderBox.center);return ga(n.client.borderBox.center,i)},C7=function(e){var t=e.draggable,n=e.destination,a=e.newPageBorderBoxCenter,s=e.viewport,i=e.withDroppableDisplacement,o=e.onlyOnMainAxis,l=o===void 0?!1:o,c=Is(a,t.page.borderBox.center),d=jx(t.page.borderBox,c),f={target:d,destination:n,withDroppableDisplacement:i,viewport:s};return l?Wae(f):w7(f)},ose=function(e){var t=e.isMovingForward,n=e.draggable,a=e.destination,s=e.draggables,i=e.previousImpact,o=e.viewport,l=e.previousPageBorderBoxCenter,c=e.previousClientSelection,d=e.afterCritical;if(!a.isEnabled)return null;var f=Gm(a.descriptor.id,s),u=Km(n,a),m=Fae({isMovingForward:t,draggable:n,destination:a,insideDestination:f,previousImpact:i})||Qae({isMovingForward:t,isInHomeList:u,draggable:n,draggables:s,destination:a,insideDestination:f,previousImpact:i,viewport:o,afterCritical:d});if(!m)return null;var h=k1({impact:m,draggable:n,droppable:a,draggables:s,afterCritical:d}),x=C7({draggable:n,destination:a,newPageBorderBoxCenter:h,viewport:o.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0});if(x){var g=S4({pageBorderBoxCenter:h,draggable:n,viewport:o});return{clientSelection:g,impact:m,scrollJumpRequest:null}}var p=Is(h,l),v=sse({impact:m,viewport:o,destination:a,draggables:s,maxScrollChange:p});return{clientSelection:c,impact:v,scrollJumpRequest:p}},za=function(t){var n=t.subject.active;return n||it(!1),n},lse=function(e){var t=e.isMovingForward,n=e.pageBorderBoxCenter,a=e.source,s=e.droppables,i=e.viewport,o=a.subject.active;if(!o)return null;var l=a.axis,c=ui(o[l.start],o[l.end]),d=T1(s).filter(function(u){return u!==a}).filter(function(u){return u.isEnabled}).filter(function(u){return!!u.subject.active}).filter(function(u){return b7(i.frame)(za(u))}).filter(function(u){var m=za(u);return t?o[l.crossAxisEnd]<m[l.crossAxisEnd]:m[l.crossAxisStart]<o[l.crossAxisStart]}).filter(function(u){var m=za(u),h=ui(m[l.start],m[l.end]);return c(m[l.start])||c(m[l.end])||h(o[l.start])||h(o[l.end])}).sort(function(u,m){var h=za(u)[l.crossAxisStart],x=za(m)[l.crossAxisStart];return t?h-x:x-h}).filter(function(u,m,h){return za(u)[l.crossAxisStart]===za(h[0])[l.crossAxisStart]});if(!d.length)return null;if(d.length===1)return d[0];var f=d.filter(function(u){var m=ui(za(u)[l.start],za(u)[l.end]);return m(n[l.line])});return f.length===1?f[0]:f.length>1?f.sort(function(u,m){return za(u)[l.start]-za(m)[l.start]})[0]:d.sort(function(u,m){var h=uI(n,fI(za(u))),x=uI(n,fI(za(m)));return h!==x?h-x:za(u)[l.start]-za(m)[l.start]})[0]},xI=function(t,n){var a=t.page.borderBox.center;return Vc(t.descriptor.id,n)?Is(a,n.displacedBy.point):a},cse=function(t,n){var a=t.page.borderBox;return Vc(t.descriptor.id,n)?jx(a,Hm(n.displacedBy.point)):a},dse=function(e){var t=e.pageBorderBoxCenter,n=e.viewport,a=e.destination,s=e.insideDestination,i=e.afterCritical,o=s.filter(function(l){return w7({target:cse(l,i),destination:a,viewport:n.frame,withDroppableDisplacement:!0})}).sort(function(l,c){var d=dv(t,q5(a,xI(l,i))),f=dv(t,q5(a,xI(c,i)));return d<f?-1:f<d?1:l.descriptor.index-c.descriptor.index});return o[0]||null},wx=ia(function(t,n){var a=n[t.line];return{value:a,point:ou(t.line,a)}}),use=function(t,n,a){var s=t.axis;if(t.descriptor.mode==="virtual")return ou(s.line,n[s.line]);var i=t.subject.page.contentBox[s.size],o=Gm(t.descriptor.id,a),l=o.reduce(function(f,u){return f+u.client.marginBox[s.size]},0),c=l+n[s.line],d=c-i;return d<=0?null:ou(s.line,d)},A7=function(t,n){return at({},t,{scroll:at({},t.scroll,{max:n})})},E7=function(t,n,a){var s=t.frame;Km(n,t)&&it(!1),t.subject.withPlaceholder&&it(!1);var i=wx(t.axis,n.displaceBy).point,o=use(t,i,a),l={placeholderSize:i,increasedBy:o,oldFrameMaxScroll:t.frame?t.frame.scroll.max:null};if(!s){var c=am({page:t.subject.page,withPlaceholder:l,axis:t.axis,frame:t.frame});return at({},t,{subject:c})}var d=o?ga(s.scroll.max,o):s.scroll.max,f=A7(s,d),u=am({page:t.subject.page,withPlaceholder:l,axis:t.axis,frame:f});return at({},t,{subject:u,frame:f})},fse=function(t){var n=t.subject.withPlaceholder;n||it(!1);var a=t.frame;if(!a){var s=am({page:t.subject.page,axis:t.axis,frame:null,withPlaceholder:null});return at({},t,{subject:s})}var i=n.oldFrameMaxScroll;i||it(!1);var o=A7(a,i),l=am({page:t.subject.page,axis:t.axis,frame:o,withPlaceholder:null});return at({},t,{subject:l,frame:o})},mse=function(e){var t=e.previousPageBorderBoxCenter,n=e.moveRelativeTo,a=e.insideDestination,s=e.draggable,i=e.draggables,o=e.destination,l=e.viewport,c=e.afterCritical;if(!n){if(a.length)return null;var d={displaced:uv,displacedBy:y7,at:{type:"REORDER",destination:{droppableId:o.descriptor.id,index:0}}},f=k1({impact:d,draggable:s,droppable:o,draggables:i,afterCritical:c}),u=Km(s,o)?o:E7(o,s,i),m=C7({draggable:s,destination:u,newPageBorderBoxCenter:f,viewport:l.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0});return m?d:null}var h=t[o.axis.line]<=n.page.borderBox.center[o.axis.line],x=function(){var p=n.descriptor.index;return n.descriptor.id===s.descriptor.id||h?p:p+1}(),g=wx(o.axis,s.displaceBy);return Oy({draggable:s,insideDestination:a,destination:o,viewport:l,displacedBy:g,last:uv,index:x})},hse=function(e){var t=e.isMovingForward,n=e.previousPageBorderBoxCenter,a=e.draggable,s=e.isOver,i=e.draggables,o=e.droppables,l=e.viewport,c=e.afterCritical,d=lse({isMovingForward:t,pageBorderBoxCenter:n,source:s,droppables:o,viewport:l});if(!d)return null;var f=Gm(d.descriptor.id,i),u=dse({pageBorderBoxCenter:n,viewport:l,destination:d,insideDestination:f,afterCritical:c}),m=mse({previousPageBorderBoxCenter:n,destination:d,draggable:a,draggables:i,moveRelativeTo:u,insideDestination:f,viewport:l,afterCritical:c});if(!m)return null;var h=k1({impact:m,draggable:a,droppable:d,draggables:i,afterCritical:c}),x=S4({pageBorderBoxCenter:h,draggable:a,viewport:l});return{clientSelection:x,impact:m,scrollJumpRequest:null}},_s=function(e){var t=e.at;return t?t.type==="REORDER"?t.destination.droppableId:t.combine.droppableId:null},pse=function(t,n){var a=_s(t);return a?n[a]:null},vse=function(e){var t=e.state,n=e.type,a=pse(t.impact,t.dimensions.droppables),s=!!a,i=t.dimensions.droppables[t.critical.droppable.id],o=a||i,l=o.axis.direction,c=l==="vertical"&&(n==="MOVE_UP"||n==="MOVE_DOWN")||l==="horizontal"&&(n==="MOVE_LEFT"||n==="MOVE_RIGHT");if(c&&!s)return null;var d=n==="MOVE_DOWN"||n==="MOVE_RIGHT",f=t.dimensions.draggables[t.critical.draggable.id],u=t.current.page.borderBoxCenter,m=t.dimensions,h=m.draggables,x=m.droppables;return c?ose({isMovingForward:d,previousPageBorderBoxCenter:u,draggable:f,destination:o,draggables:h,viewport:t.viewport,previousClientSelection:t.current.client.selection,previousImpact:t.impact,afterCritical:t.afterCritical}):hse({isMovingForward:d,previousPageBorderBoxCenter:u,draggable:f,isOver:o,draggables:h,droppables:x,viewport:t.viewport,afterCritical:t.afterCritical})};function yd(e){return e.phase==="DRAGGING"||e.phase==="COLLECTING"}function P7(e){var t=ui(e.top,e.bottom),n=ui(e.left,e.right);return function(s){return t(s.y)&&n(s.x)}}function xse(e,t){return e.left<t.right&&e.right>t.left&&e.top<t.bottom&&e.bottom>t.top}function gse(e){var t=e.pageBorderBox,n=e.draggable,a=e.candidates,s=n.page.borderBox.center,i=a.map(function(o){var l=o.axis,c=ou(o.axis.line,t.center[l.line],o.page.borderBox.center[l.crossAxisLine]);return{id:o.descriptor.id,distance:dv(s,c)}}).sort(function(o,l){return l.distance-o.distance});return i[0]?i[0].id:null}function yse(e){var t=e.pageBorderBox,n=e.draggable,a=e.droppables,s=T1(a).filter(function(i){if(!i.isEnabled)return!1;var o=i.subject.active;if(!o||!xse(t,o))return!1;if(P7(o)(t.center))return!0;var l=i.axis,c=o.center[l.crossAxisLine],d=t[l.crossAxisStart],f=t[l.crossAxisEnd],u=ui(o[l.crossAxisStart],o[l.crossAxisEnd]),m=u(d),h=u(f);return!m&&!h?!0:m?d<c:f>c});return s.length?s.length===1?s[0].descriptor.id:gse({pageBorderBox:t,draggable:n,candidates:s}):null}var T7=function(t,n){return Hi(jx(t,n))},bse=function(e,t){var n=e.frame;return n?T7(t,n.scroll.diff.value):t};function I7(e){var t=e.displaced,n=e.id;return!!(t.visible[n]||t.invisible[n])}function jse(e){var t=e.draggable,n=e.closest,a=e.inHomeList;return n?a&&n.descriptor.index>t.descriptor.index?n.descriptor.index-1:n.descriptor.index:null}var wse=function(e){var t=e.pageBorderBoxWithDroppableScroll,n=e.draggable,a=e.destination,s=e.insideDestination,i=e.last,o=e.viewport,l=e.afterCritical,c=a.axis,d=wx(a.axis,n.displaceBy),f=d.value,u=t[c.start],m=t[c.end],h=D1(n,s),x=Qc(h,function(p){var v=p.descriptor.id,y=p.page.borderBox.center[c.line],b=Vc(v,l),j=I7({displaced:i,id:v});return b?j?m<=y:u<y-f:j?m<=y+f:u<y}),g=jse({draggable:n,closest:x,inHomeList:Km(n,a)});return Oy({draggable:n,insideDestination:s,destination:a,viewport:o,last:i,displacedBy:d,index:g})},Nse=4,Sse=function(e){var t=e.draggable,n=e.pageBorderBoxWithDroppableScroll,a=e.previousImpact,s=e.destination,i=e.insideDestination,o=e.afterCritical;if(!s.isCombineEnabled)return null;var l=s.axis,c=wx(s.axis,t.displaceBy),d=c.value,f=n[l.start],u=n[l.end],m=D1(t,i),h=Qc(m,function(g){var p=g.descriptor.id,v=g.page.borderBox,y=v[l.size],b=y/Nse,j=Vc(p,o),C=I7({displaced:a.displaced,id:p});return j?C?u>v[l.start]+b&&u<v[l.end]-b:f>v[l.start]-d+b&&f<v[l.end]-d-b:C?u>v[l.start]+d+b&&u<v[l.end]+d-b:f>v[l.start]+b&&f<v[l.end]-b});if(!h)return null;var x={displacedBy:c,displaced:a.displaced,at:{type:"COMBINE",combine:{draggableId:h.descriptor.id,droppableId:s.descriptor.id}}};return x},D7=function(e){var t=e.pageOffset,n=e.draggable,a=e.draggables,s=e.droppables,i=e.previousImpact,o=e.viewport,l=e.afterCritical,c=T7(n.page.borderBox,t),d=yse({pageBorderBox:c,draggable:n,droppables:s});if(!d)return Mae;var f=s[d],u=Gm(f.descriptor.id,a),m=bse(f,c);return Sse({pageBorderBoxWithDroppableScroll:m,draggable:n,previousImpact:i,destination:f,insideDestination:u,afterCritical:l})||wse({pageBorderBoxWithDroppableScroll:m,draggable:n,destination:f,insideDestination:u,last:i.displaced,viewport:o,afterCritical:l})},C4=function(e,t){var n;return at({},e,(n={},n[t.descriptor.id]=t,n))},Cse=function(t){var n=t.previousImpact,a=t.impact,s=t.droppables,i=_s(n),o=_s(a);if(!i||i===o)return s;var l=s[i];if(!l.subject.withPlaceholder)return s;var c=fse(l);return C4(s,c)},Ase=function(e){var t=e.draggable,n=e.draggables,a=e.droppables,s=e.previousImpact,i=e.impact,o=Cse({previousImpact:s,impact:i,droppables:a}),l=_s(i);if(!l)return o;var c=a[l];if(Km(t,c)||c.subject.withPlaceholder)return o;var d=E7(c,t,n);return C4(o,d)},Pp=function(e){var t=e.state,n=e.clientSelection,a=e.dimensions,s=e.viewport,i=e.impact,o=e.scrollJumpRequest,l=s||t.viewport,c=a||t.dimensions,d=n||t.current.client.selection,f=Is(d,t.initial.client.selection),u={offset:f,selection:d,borderBoxCenter:ga(t.initial.client.borderBoxCenter,f)},m={selection:ga(u.selection,l.scroll.current),borderBoxCenter:ga(u.borderBoxCenter,l.scroll.current),offset:ga(u.offset,l.scroll.diff.value)},h={client:u,page:m};if(t.phase==="COLLECTING")return at({phase:"COLLECTING"},t,{dimensions:c,viewport:l,current:h});var x=c.draggables[t.critical.draggable.id],g=i||D7({pageOffset:m.offset,draggable:x,draggables:c.draggables,droppables:c.droppables,previousImpact:t.impact,viewport:l,afterCritical:t.afterCritical}),p=Ase({draggable:x,impact:g,previousImpact:t.impact,draggables:c.draggables,droppables:c.droppables}),v=at({},t,{current:h,dimensions:{draggables:c.draggables,droppables:p},impact:g,viewport:l,scrollJumpRequest:o||null,forceShouldAnimate:o?!1:null});return v};function Ese(e,t){return e.map(function(n){return t[n]})}var k7=function(e){var t=e.impact,n=e.viewport,a=e.draggables,s=e.destination,i=e.forceShouldAnimate,o=t.displaced,l=Ese(o.all,a),c=fv({afterDragging:l,destination:s,displacedBy:t.displacedBy,viewport:n.frame,forceShouldAnimate:i,last:o});return at({},t,{displaced:c})},O7=function(e){var t=e.impact,n=e.draggable,a=e.droppable,s=e.draggables,i=e.viewport,o=e.afterCritical,l=k1({impact:t,draggable:n,draggables:s,droppable:a,afterCritical:o});return S4({pageBorderBoxCenter:l,draggable:n,viewport:i})},_7=function(e){var t=e.state,n=e.dimensions,a=e.viewport;t.movementMode!=="SNAP"&&it(!1);var s=t.impact,i=a||t.viewport,o=n||t.dimensions,l=o.draggables,c=o.droppables,d=l[t.critical.draggable.id],f=_s(s);f||it(!1);var u=c[f],m=k7({impact:s,viewport:i,destination:u,draggables:l}),h=O7({impact:m,draggable:d,droppable:u,draggables:l,viewport:i,afterCritical:t.afterCritical});return Pp({impact:m,clientSelection:h,state:t,dimensions:o,viewport:i})},Pse=function(e){return{index:e.index,droppableId:e.droppableId}},L7=function(e){var t=e.draggable,n=e.home,a=e.draggables,s=e.viewport,i=wx(n.axis,t.displaceBy),o=Gm(n.descriptor.id,a),l=o.indexOf(t);l===-1&&it(!1);var c=o.slice(l+1),d=c.reduce(function(h,x){return h[x.descriptor.id]=!0,h},{}),f={inVirtualList:n.descriptor.mode==="virtual",displacedBy:i,effected:d},u=fv({afterDragging:c,destination:n,displacedBy:i,last:null,viewport:s.frame,forceShouldAnimate:!1}),m={displaced:u,displacedBy:i,at:{type:"REORDER",destination:Pse(t.descriptor)}};return{impact:m,afterCritical:f}},Tse=function(e,t){return{draggables:e.draggables,droppables:C4(e.droppables,t)}},Ise=function(e){var t=e.draggable,n=e.offset,a=e.initialWindowScroll,s=Py(t.client,n),i=Ty(s,a),o=at({},t,{placeholder:at({},t.placeholder,{client:s}),client:s,page:i});return o},Dse=function(e){var t=e.frame;return t||it(!1),t},kse=function(e){var t=e.additions,n=e.updatedDroppables,a=e.viewport,s=a.scroll.diff.value;return t.map(function(i){var o=i.descriptor.droppableId,l=n[o],c=Dse(l),d=c.scroll.diff.value,f=ga(s,d),u=Ise({draggable:i,offset:f,initialWindowScroll:a.scroll.initial});return u})},Ose=function(e){var t=e.state,n=e.published,a=n.modified.map(function(b){var j=t.dimensions.droppables[b.droppableId],C=g4(j,b.scroll);return C}),s=at({},t.dimensions.droppables,{},x7(a)),i=g7(kse({additions:n.additions,updatedDroppables:s,viewport:t.viewport})),o=at({},t.dimensions.draggables,{},i);n.removals.forEach(function(b){delete o[b]});var l={droppables:s,draggables:o},c=_s(t.impact),d=c?l.droppables[c]:null,f=l.draggables[t.critical.draggable.id],u=l.droppables[t.critical.droppable.id],m=L7({draggable:f,home:u,draggables:o,viewport:t.viewport}),h=m.impact,x=m.afterCritical,g=d&&d.isCombineEnabled?t.impact:h,p=D7({pageOffset:t.current.page.offset,draggable:l.draggables[t.critical.draggable.id],draggables:l.draggables,droppables:l.droppables,previousImpact:g,viewport:t.viewport,afterCritical:x}),v=at({phase:"DRAGGING"},t,{phase:"DRAGGING",impact:p,onLiftImpact:h,dimensions:l,afterCritical:x,forceShouldAnimate:!1});if(t.phase==="COLLECTING")return v;var y=at({phase:"DROP_PENDING"},v,{phase:"DROP_PENDING",reason:t.reason,isWaiting:!1});return y},W5=function(t){return t.movementMode==="SNAP"},y2=function(t,n,a){var s=Tse(t.dimensions,n);return!W5(t)||a?Pp({state:t,dimensions:s}):_7({state:t,dimensions:s})};function b2(e){return e.isDragging&&e.movementMode==="SNAP"?at({phase:"DRAGGING"},e,{scrollJumpRequest:null}):e}var gI={phase:"IDLE",completed:null,shouldFlush:!1},_se=function(e,t){if(e===void 0&&(e=gI),t.type==="FLUSH")return at({},gI,{shouldFlush:!0});if(t.type==="INITIAL_PUBLISH"){e.phase!=="IDLE"&&it(!1);var n=t.payload,a=n.critical,s=n.clientSelection,i=n.viewport,o=n.dimensions,l=n.movementMode,c=o.draggables[a.draggable.id],d=o.droppables[a.droppable.id],f={selection:s,borderBoxCenter:c.client.borderBox.center,offset:oa},u={client:f,page:{selection:ga(f.selection,i.scroll.initial),borderBoxCenter:ga(f.selection,i.scroll.initial),offset:ga(f.selection,i.scroll.diff.value)}},m=T1(o.droppables).every(function(ve){return!ve.isFixedOnPage}),h=L7({draggable:c,home:d,draggables:o.draggables,viewport:i}),x=h.impact,g=h.afterCritical,p={phase:"DRAGGING",isDragging:!0,critical:a,movementMode:l,dimensions:o,initial:u,current:u,isWindowScrollAllowed:m,impact:x,afterCritical:g,onLiftImpact:x,viewport:i,scrollJumpRequest:null,forceShouldAnimate:null};return p}if(t.type==="COLLECTION_STARTING"){if(e.phase==="COLLECTING"||e.phase==="DROP_PENDING")return e;e.phase!=="DRAGGING"&&it(!1);var v=at({phase:"COLLECTING"},e,{phase:"COLLECTING"});return v}if(t.type==="PUBLISH_WHILE_DRAGGING")return e.phase==="COLLECTING"||e.phase==="DROP_PENDING"||it(!1),Ose({state:e,published:t.payload});if(t.type==="MOVE"){if(e.phase==="DROP_PENDING")return e;yd(e)||it(!1);var y=t.payload.client;return Dc(y,e.current.client.selection)?e:Pp({state:e,clientSelection:y,impact:W5(e)?e.impact:null})}if(t.type==="UPDATE_DROPPABLE_SCROLL"){if(e.phase==="DROP_PENDING"||e.phase==="COLLECTING")return b2(e);yd(e)||it(!1);var b=t.payload,j=b.id,C=b.newScroll,E=e.dimensions.droppables[j];if(!E)return e;var S=g4(E,C);return y2(e,S,!1)}if(t.type==="UPDATE_DROPPABLE_IS_ENABLED"){if(e.phase==="DROP_PENDING")return e;yd(e)||it(!1);var N=t.payload,I=N.id,D=N.isEnabled,T=e.dimensions.droppables[I];T||it(!1),T.isEnabled===D&&it(!1);var A=at({},T,{isEnabled:D});return y2(e,A,!0)}if(t.type==="UPDATE_DROPPABLE_IS_COMBINE_ENABLED"){if(e.phase==="DROP_PENDING")return e;yd(e)||it(!1);var _=t.payload,k=_.id,L=_.isCombineEnabled,$=e.dimensions.droppables[k];$||it(!1),$.isCombineEnabled===L&&it(!1);var M=at({},$,{isCombineEnabled:L});return y2(e,M,!0)}if(t.type==="MOVE_BY_WINDOW_SCROLL"){if(e.phase==="DROP_PENDING"||e.phase==="DROP_ANIMATING")return e;yd(e)||it(!1),e.isWindowScrollAllowed||it(!1);var B=t.payload.newScroll;if(Dc(e.viewport.scroll.current,B))return b2(e);var U=S7(e.viewport,B);return W5(e)?_7({state:e,viewport:U}):Pp({state:e,viewport:U})}if(t.type==="UPDATE_VIEWPORT_MAX_SCROLL"){if(!yd(e))return e;var W=t.payload.maxScroll;if(Dc(W,e.viewport.scroll.max))return e;var q=at({},e.viewport,{scroll:at({},e.viewport.scroll,{max:W})});return at({phase:"DRAGGING"},e,{viewport:q})}if(t.type==="MOVE_UP"||t.type==="MOVE_DOWN"||t.type==="MOVE_LEFT"||t.type==="MOVE_RIGHT"){if(e.phase==="COLLECTING"||e.phase==="DROP_PENDING")return e;e.phase!=="DRAGGING"&&it(!1);var R=vse({state:e,type:t.type});return R?Pp({state:e,impact:R.impact,clientSelection:R.clientSelection,scrollJumpRequest:R.scrollJumpRequest}):e}if(t.type==="DROP_PENDING"){var V=t.payload.reason;e.phase!=="COLLECTING"&&it(!1);var G=at({phase:"DROP_PENDING"},e,{phase:"DROP_PENDING",isWaiting:!0,reason:V});return G}if(t.type==="DROP_ANIMATE"){var ee=t.payload,re=ee.completed,de=ee.dropDuration,ue=ee.newHomeClientOffset;e.phase==="DRAGGING"||e.phase==="DROP_PENDING"||it(!1);var oe={phase:"DROP_ANIMATING",completed:re,dropDuration:de,newHomeClientOffset:ue,dimensions:e.dimensions};return oe}if(t.type==="DROP_COMPLETE"){var ge=t.payload.completed;return{phase:"IDLE",completed:ge,shouldFlush:!1}}return e},Lse=function(t){return{type:"BEFORE_INITIAL_CAPTURE",payload:t}},Rse=function(t){return{type:"LIFT",payload:t}},Fse=function(t){return{type:"INITIAL_PUBLISH",payload:t}},Mse=function(t){return{type:"PUBLISH_WHILE_DRAGGING",payload:t}},$se=function(){return{type:"COLLECTION_STARTING",payload:null}},Bse=function(t){return{type:"UPDATE_DROPPABLE_SCROLL",payload:t}},zse=function(t){return{type:"UPDATE_DROPPABLE_IS_ENABLED",payload:t}},Use=function(t){return{type:"UPDATE_DROPPABLE_IS_COMBINE_ENABLED",payload:t}},R7=function(t){return{type:"MOVE",payload:t}},Vse=function(t){return{type:"MOVE_BY_WINDOW_SCROLL",payload:t}},qse=function(t){return{type:"UPDATE_VIEWPORT_MAX_SCROLL",payload:t}},Wse=function(){return{type:"MOVE_UP",payload:null}},Hse=function(){return{type:"MOVE_DOWN",payload:null}},Gse=function(){return{type:"MOVE_RIGHT",payload:null}},Kse=function(){return{type:"MOVE_LEFT",payload:null}},A4=function(){return{type:"FLUSH",payload:null}},Yse=function(t){return{type:"DROP_ANIMATE",payload:t}},E4=function(t){return{type:"DROP_COMPLETE",payload:t}},F7=function(t){return{type:"DROP",payload:t}},Xse=function(t){return{type:"DROP_PENDING",payload:t}},M7=function(){return{type:"DROP_ANIMATION_FINISHED",payload:null}},Qse=function(e){return function(t){var n=t.getState,a=t.dispatch;return function(s){return function(i){if(i.type!=="LIFT"){s(i);return}var o=i.payload,l=o.id,c=o.clientSelection,d=o.movementMode,f=n();f.phase==="DROP_ANIMATING"&&a(E4({completed:f.completed})),n().phase!=="IDLE"&&it(!1),a(A4()),a(Lse({draggableId:l,movementMode:d}));var u={shouldPublishImmediately:d==="SNAP"},m={draggableId:l,scrollOptions:u},h=e.startPublishing(m),x=h.critical,g=h.dimensions,p=h.viewport;a(Fse({critical:x,dimensions:g,clientSelection:c,movementMode:d,viewport:p}))}}}},Jse=function(e){return function(){return function(t){return function(n){n.type==="INITIAL_PUBLISH"&&e.dragging(),n.type==="DROP_ANIMATE"&&e.dropping(n.payload.completed.result.reason),(n.type==="FLUSH"||n.type==="DROP_COMPLETE")&&e.resting(),t(n)}}}},P4={outOfTheWay:"cubic-bezier(0.2, 0, 0, 1)",drop:"cubic-bezier(.2,1,.1,1)"},mv={opacity:{drop:0,combining:.7},scale:{drop:.75}},T4={outOfTheWay:.2,minDropTime:.33,maxDropTime:.55},pd=T4.outOfTheWay+"s "+P4.outOfTheWay,Tp={fluid:"opacity "+pd,snap:"transform "+pd+", opacity "+pd,drop:function(t){var n=t+"s "+P4.drop;return"transform "+n+", opacity "+n},outOfTheWay:"transform "+pd,placeholder:"height "+pd+", width "+pd+", margin "+pd},yI=function(t){return Dc(t,oa)?null:"translate("+t.x+"px, "+t.y+"px)"},H5={moveTo:yI,drop:function(t,n){var a=yI(t);return a?n?a+" scale("+mv.scale.drop+")":a:null}},G5=T4.minDropTime,$7=T4.maxDropTime,Zse=$7-G5,bI=1500,eie=.6,tie=function(e){var t=e.current,n=e.destination,a=e.reason,s=dv(t,n);if(s<=0)return G5;if(s>=bI)return $7;var i=s/bI,o=G5+Zse*i,l=a==="CANCEL"?o*eie:o;return Number(l.toFixed(2))},rie=function(e){var t=e.impact,n=e.draggable,a=e.dimensions,s=e.viewport,i=e.afterCritical,o=a.draggables,l=a.droppables,c=_s(t),d=c?l[c]:null,f=l[n.descriptor.droppableId],u=O7({impact:t,draggable:n,draggables:o,afterCritical:i,droppable:d||f,viewport:s}),m=Is(u,n.client.borderBox.center);return m},nie=function(e){var t=e.draggables,n=e.reason,a=e.lastImpact,s=e.home,i=e.viewport,o=e.onLiftImpact;if(!a.at||n!=="DROP"){var l=k7({draggables:t,impact:o,destination:s,viewport:i,forceShouldAnimate:!0});return{impact:l,didDropInsideDroppable:!1}}if(a.at.type==="REORDER")return{impact:a,didDropInsideDroppable:!0};var c=at({},a,{displaced:uv});return{impact:c,didDropInsideDroppable:!0}},aie=function(e){var t=e.getState,n=e.dispatch;return function(a){return function(s){if(s.type!=="DROP"){a(s);return}var i=t(),o=s.payload.reason;if(i.phase==="COLLECTING"){n(Xse({reason:o}));return}if(i.phase!=="IDLE"){var l=i.phase==="DROP_PENDING"&&i.isWaiting;l&&it(!1),i.phase==="DRAGGING"||i.phase==="DROP_PENDING"||it(!1);var c=i.critical,d=i.dimensions,f=d.draggables[i.critical.draggable.id],u=nie({reason:o,lastImpact:i.impact,afterCritical:i.afterCritical,onLiftImpact:i.onLiftImpact,home:i.dimensions.droppables[i.critical.droppable.id],viewport:i.viewport,draggables:i.dimensions.draggables}),m=u.impact,h=u.didDropInsideDroppable,x=h?b4(m):null,g=h?I1(m):null,p={index:c.draggable.index,droppableId:c.droppable.id},v={draggableId:f.descriptor.id,type:f.descriptor.type,source:p,reason:o,mode:i.movementMode,destination:x,combine:g},y=rie({impact:m,draggable:f,dimensions:d,viewport:i.viewport,afterCritical:i.afterCritical}),b={critical:i.critical,afterCritical:i.afterCritical,result:v,impact:m},j=!Dc(i.current.client.offset,y)||!!v.combine;if(!j){n(E4({completed:b}));return}var C=tie({current:i.current.client.offset,destination:y,reason:o}),E={newHomeClientOffset:y,dropDuration:C,completed:b};n(Yse(E))}}}},B7=function(){return{x:window.pageXOffset,y:window.pageYOffset}};function sie(e){return{eventName:"scroll",options:{passive:!0,capture:!1},fn:function(n){n.target!==window&&n.target!==window.document||e()}}}function iie(e){var t=e.onWindowScroll;function n(){t(B7())}var a=cv(n),s=sie(a),i=Ic;function o(){return i!==Ic}function l(){o()&&it(!1),i=oi(window,[s])}function c(){o()||it(!1),a.cancel(),i(),i=Ic}return{start:l,stop:c,isActive:o}}var oie=function(t){return t.type==="DROP_COMPLETE"||t.type==="DROP_ANIMATE"||t.type==="FLUSH"},lie=function(e){var t=iie({onWindowScroll:function(a){e.dispatch(Vse({newScroll:a}))}});return function(n){return function(a){!t.isActive()&&a.type==="INITIAL_PUBLISH"&&t.start(),t.isActive()&&oie(a)&&t.stop(),n(a)}}},cie=function(e){var t=!1,n=!1,a=setTimeout(function(){n=!0}),s=function(o){t||n||(t=!0,e(o),clearTimeout(a))};return s.wasCalled=function(){return t},s},die=function(){var e=[],t=function(i){var o=y4(e,function(d){return d.timerId===i});o===-1&&it(!1);var l=e.splice(o,1),c=l[0];c.callback()},n=function(i){var o=setTimeout(function(){return t(o)}),l={timerId:o,callback:i};e.push(l)},a=function(){if(e.length){var i=[].concat(e);e.length=0,i.forEach(function(o){clearTimeout(o.timerId),o.callback()})}};return{add:n,flush:a}},uie=function(t,n){return t==null&&n==null?!0:t==null||n==null?!1:t.droppableId===n.droppableId&&t.index===n.index},fie=function(t,n){return t==null&&n==null?!0:t==null||n==null?!1:t.draggableId===n.draggableId&&t.droppableId===n.droppableId},mie=function(t,n){if(t===n)return!0;var a=t.draggable.id===n.draggable.id&&t.draggable.droppableId===n.draggable.droppableId&&t.draggable.type===n.draggable.type&&t.draggable.index===n.draggable.index,s=t.droppable.id===n.droppable.id&&t.droppable.type===n.droppable.type;return a&&s},Qh=function(t,n){n()},Xg=function(t,n){return{draggableId:t.draggable.id,type:t.droppable.type,source:{droppableId:t.droppable.id,index:t.draggable.index},mode:n}},j2=function(t,n,a,s){if(!t){a(s(n));return}var i=cie(a),o={announce:i};t(n,o),i.wasCalled()||a(s(n))},hie=function(e,t){var n=die(),a=null,s=function(m,h){a&&it(!1),Qh("onBeforeCapture",function(){var x=e().onBeforeCapture;if(x){var g={draggableId:m,mode:h};x(g)}})},i=function(m,h){a&&it(!1),Qh("onBeforeDragStart",function(){var x=e().onBeforeDragStart;x&&x(Xg(m,h))})},o=function(m,h){a&&it(!1);var x=Xg(m,h);a={mode:h,lastCritical:m,lastLocation:x.source,lastCombine:null},n.add(function(){Qh("onDragStart",function(){return j2(e().onDragStart,x,t,M0.onDragStart)})})},l=function(m,h){var x=b4(h),g=I1(h);a||it(!1);var p=!mie(m,a.lastCritical);p&&(a.lastCritical=m);var v=!uie(a.lastLocation,x);v&&(a.lastLocation=x);var y=!fie(a.lastCombine,g);if(y&&(a.lastCombine=g),!(!p&&!v&&!y)){var b=at({},Xg(m,a.mode),{combine:g,destination:x});n.add(function(){Qh("onDragUpdate",function(){return j2(e().onDragUpdate,b,t,M0.onDragUpdate)})})}},c=function(){a||it(!1),n.flush()},d=function(m){a||it(!1),a=null,Qh("onDragEnd",function(){return j2(e().onDragEnd,m,t,M0.onDragEnd)})},f=function(){if(a){var m=at({},Xg(a.lastCritical,a.mode),{combine:null,destination:null,reason:"CANCEL"});d(m)}};return{beforeCapture:s,beforeStart:i,start:o,update:l,flush:c,drop:d,abort:f}},pie=function(e,t){var n=hie(e,t);return function(a){return function(s){return function(i){if(i.type==="BEFORE_INITIAL_CAPTURE"){n.beforeCapture(i.payload.draggableId,i.payload.movementMode);return}if(i.type==="INITIAL_PUBLISH"){var o=i.payload.critical;n.beforeStart(o,i.payload.movementMode),s(i),n.start(o,i.payload.movementMode);return}if(i.type==="DROP_COMPLETE"){var l=i.payload.completed.result;n.flush(),s(i),n.drop(l);return}if(s(i),i.type==="FLUSH"){n.abort();return}var c=a.getState();c.phase==="DRAGGING"&&n.update(c.critical,c.impact)}}}},vie=function(e){return function(t){return function(n){if(n.type!=="DROP_ANIMATION_FINISHED"){t(n);return}var a=e.getState();a.phase!=="DROP_ANIMATING"&&it(!1),e.dispatch(E4({completed:a.completed}))}}},xie=function(e){var t=null,n=null;function a(){n&&(cancelAnimationFrame(n),n=null),t&&(t(),t=null)}return function(s){return function(i){if((i.type==="FLUSH"||i.type==="DROP_COMPLETE"||i.type==="DROP_ANIMATION_FINISHED")&&a(),s(i),i.type==="DROP_ANIMATE"){var o={eventName:"scroll",options:{capture:!0,passive:!1,once:!0},fn:function(){var c=e.getState();c.phase==="DROP_ANIMATING"&&e.dispatch(M7())}};n=requestAnimationFrame(function(){n=null,t=oi(window,[o])})}}}},gie=function(e){return function(){return function(t){return function(n){(n.type==="DROP_COMPLETE"||n.type==="FLUSH"||n.type==="DROP_ANIMATE")&&e.stopPublishing(),t(n)}}}},yie=function(e){var t=!1;return function(){return function(n){return function(a){if(a.type==="INITIAL_PUBLISH"){t=!0,e.tryRecordFocus(a.payload.critical.draggable.id),n(a),e.tryRestoreFocusRecorded();return}if(n(a),!!t){if(a.type==="FLUSH"){t=!1,e.tryRestoreFocusRecorded();return}if(a.type==="DROP_COMPLETE"){t=!1;var s=a.payload.completed.result;s.combine&&e.tryShiftRecord(s.draggableId,s.combine.draggableId),e.tryRestoreFocusRecorded()}}}}}},bie=function(t){return t.type==="DROP_COMPLETE"||t.type==="DROP_ANIMATE"||t.type==="FLUSH"},jie=function(e){return function(t){return function(n){return function(a){if(bie(a)){e.stop(),n(a);return}if(a.type==="INITIAL_PUBLISH"){n(a);var s=t.getState();s.phase!=="DRAGGING"&&it(!1),e.start(s);return}n(a),e.scroll(t.getState())}}}},wie=function(e){return function(t){return function(n){if(t(n),n.type==="PUBLISH_WHILE_DRAGGING"){var a=e.getState();a.phase==="DROP_PENDING"&&(a.isWaiting||e.dispatch(F7({reason:a.reason})))}}}},Nie=H$,Sie=function(e){var t=e.dimensionMarshal,n=e.focusMarshal,a=e.styleMarshal,s=e.getResponders,i=e.announce,o=e.autoScroller;return W$(_se,Nie(dne(Jse(a),gie(t),Qse(t),aie,vie,xie,wie,jie(o),lie,yie(n),pie(s,i))))},w2=function(){return{additions:{},removals:{},modified:{}}};function Cie(e){var t=e.registry,n=e.callbacks,a=w2(),s=null,i=function(){s||(n.collectionStarting(),s=requestAnimationFrame(function(){s=null;var f=a,u=f.additions,m=f.removals,h=f.modified,x=Object.keys(u).map(function(v){return t.draggable.getById(v).getDimension(oa)}).sort(function(v,y){return v.descriptor.index-y.descriptor.index}),g=Object.keys(h).map(function(v){var y=t.droppable.getById(v),b=y.callbacks.getScrollWhileDragging();return{droppableId:v,scroll:b}}),p={additions:x,removals:Object.keys(m),modified:g};a=w2(),n.publish(p)}))},o=function(f){var u=f.descriptor.id;a.additions[u]=f,a.modified[f.descriptor.droppableId]=!0,a.removals[u]&&delete a.removals[u],i()},l=function(f){var u=f.descriptor;a.removals[u.id]=!0,a.modified[u.droppableId]=!0,a.additions[u.id]&&delete a.additions[u.id],i()},c=function(){s&&(cancelAnimationFrame(s),s=null,a=w2())};return{add:o,remove:l,stop:c}}var z7=function(e){var t=e.scrollHeight,n=e.scrollWidth,a=e.height,s=e.width,i=Is({x:n,y:t},{x:s,y:a}),o={x:Math.max(0,i.x),y:Math.max(0,i.y)};return o},U7=function(){var e=document.documentElement;return e||it(!1),e},V7=function(){var e=U7(),t=z7({scrollHeight:e.scrollHeight,scrollWidth:e.scrollWidth,width:e.clientWidth,height:e.clientHeight});return t},Aie=function(){var e=B7(),t=V7(),n=e.y,a=e.x,s=U7(),i=s.clientWidth,o=s.clientHeight,l=a+i,c=n+o,d=Hi({top:n,left:a,right:l,bottom:c}),f={frame:d,scroll:{initial:e,current:e,max:t,diff:{value:oa,displacement:oa}}};return f},Eie=function(e){var t=e.critical,n=e.scrollOptions,a=e.registry,s=Aie(),i=s.scroll.current,o=t.droppable,l=a.droppable.getAllByType(o.type).map(function(u){return u.callbacks.getDimensionAndWatchScroll(i,n)}),c=a.draggable.getAllByType(t.draggable.type).map(function(u){return u.getDimension(i)}),d={draggables:g7(c),droppables:x7(l)},f={dimensions:d,critical:t,viewport:s};return f};function jI(e,t,n){if(n.descriptor.id===t.id||n.descriptor.type!==t.type)return!1;var a=e.droppable.getById(n.descriptor.droppableId);return a.descriptor.mode==="virtual"}var Pie=function(e,t){var n=null,a=Cie({callbacks:{publish:t.publishWhileDragging,collectionStarting:t.collectionStarting},registry:e}),s=function(h,x){e.droppable.exists(h)||it(!1),n&&t.updateDroppableIsEnabled({id:h,isEnabled:x})},i=function(h,x){n&&(e.droppable.exists(h)||it(!1),t.updateDroppableIsCombineEnabled({id:h,isCombineEnabled:x}))},o=function(h,x){n&&(e.droppable.exists(h)||it(!1),t.updateDroppableScroll({id:h,newScroll:x}))},l=function(h,x){n&&e.droppable.getById(h).callbacks.scroll(x)},c=function(){if(n){a.stop();var h=n.critical.droppable;e.droppable.getAllByType(h.type).forEach(function(x){return x.callbacks.dragStopped()}),n.unsubscribe(),n=null}},d=function(h){n||it(!1);var x=n.critical.draggable;h.type==="ADDITION"&&jI(e,x,h.value)&&a.add(h.value),h.type==="REMOVAL"&&jI(e,x,h.value)&&a.remove(h.value)},f=function(h){n&&it(!1);var x=e.draggable.getById(h.draggableId),g=e.droppable.getById(x.descriptor.droppableId),p={draggable:x.descriptor,droppable:g.descriptor},v=e.subscribe(d);return n={critical:p,unsubscribe:v},Eie({critical:p,registry:e,scrollOptions:h.scrollOptions})},u={updateDroppableIsEnabled:s,updateDroppableIsCombineEnabled:i,scrollDroppable:l,updateDroppableScroll:o,startPublishing:f,stopPublishing:c};return u},q7=function(e,t){return e.phase==="IDLE"?!0:e.phase!=="DROP_ANIMATING"||e.completed.result.draggableId===t?!1:e.completed.result.reason==="DROP"},Tie=function(e){window.scrollBy(e.x,e.y)},Iie=ia(function(e){return T1(e).filter(function(t){return!(!t.isEnabled||!t.frame)})}),Die=function(t,n){var a=Qc(Iie(n),function(s){return s.frame||it(!1),P7(s.frame.pageMarginBox)(t)});return a},kie=function(e){var t=e.center,n=e.destination,a=e.droppables;if(n){var s=a[n];return s.frame?s:null}var i=Die(t,a);return i},kc={startFromPercentage:.25,maxScrollAtPercentage:.05,maxPixelScroll:28,ease:function(t){return Math.pow(t,2)},durationDampening:{stopDampeningAt:1200,accelerateAt:360}},Oie=function(e,t){var n=e[t.size]*kc.startFromPercentage,a=e[t.size]*kc.maxScrollAtPercentage,s={startScrollingFrom:n,maxScrollValueAt:a};return s},W7=function(e){var t=e.startOfRange,n=e.endOfRange,a=e.current,s=n-t;if(s===0)return 0;var i=a-t,o=i/s;return o},I4=1,_ie=function(e,t){if(e>t.startScrollingFrom)return 0;if(e<=t.maxScrollValueAt)return kc.maxPixelScroll;if(e===t.startScrollingFrom)return I4;var n=W7({startOfRange:t.maxScrollValueAt,endOfRange:t.startScrollingFrom,current:e}),a=1-n,s=kc.maxPixelScroll*kc.ease(a);return Math.ceil(s)},wI=kc.durationDampening.accelerateAt,NI=kc.durationDampening.stopDampeningAt,Lie=function(e,t){var n=t,a=NI,s=Date.now(),i=s-n;if(i>=NI)return e;if(i<wI)return I4;var o=W7({startOfRange:wI,endOfRange:a,current:i}),l=e*kc.ease(o);return Math.ceil(l)},SI=function(e){var t=e.distanceToEdge,n=e.thresholds,a=e.dragStartTime,s=e.shouldUseTimeDampening,i=_ie(t,n);return i===0?0:s?Math.max(Lie(i,a),I4):i},CI=function(e){var t=e.container,n=e.distanceToEdges,a=e.dragStartTime,s=e.axis,i=e.shouldUseTimeDampening,o=Oie(t,s),l=n[s.end]<n[s.start];return l?SI({distanceToEdge:n[s.end],thresholds:o,dragStartTime:a,shouldUseTimeDampening:i}):-1*SI({distanceToEdge:n[s.start],thresholds:o,dragStartTime:a,shouldUseTimeDampening:i})},Rie=function(e){var t=e.container,n=e.subject,a=e.proposedScroll,s=n.height>t.height,i=n.width>t.width;return!i&&!s?a:i&&s?null:{x:i?0:a.x,y:s?0:a.y}},Fie=p7(function(e){return e===0?0:e}),H7=function(e){var t=e.dragStartTime,n=e.container,a=e.subject,s=e.center,i=e.shouldUseTimeDampening,o={top:s.y-n.top,right:n.right-s.x,bottom:n.bottom-s.y,left:s.x-n.left},l=CI({container:n,distanceToEdges:o,dragStartTime:t,axis:j4,shouldUseTimeDampening:i}),c=CI({container:n,distanceToEdges:o,dragStartTime:t,axis:j7,shouldUseTimeDampening:i}),d=Fie({x:c,y:l});if(Dc(d,oa))return null;var f=Rie({container:n,subject:a,proposedScroll:d});return f?Dc(f,oa)?null:f:null},Mie=p7(function(e){return e===0?0:e>0?1:-1}),D4=function(){var e=function(n,a){return n<0?n:n>a?n-a:0};return function(t){var n=t.current,a=t.max,s=t.change,i=ga(n,s),o={x:e(i.x,a.x),y:e(i.y,a.y)};return Dc(o,oa)?null:o}}(),G7=function(t){var n=t.max,a=t.current,s=t.change,i={x:Math.max(a.x,n.x),y:Math.max(a.y,n.y)},o=Mie(s),l=D4({max:i,current:a,change:o});return!l||o.x!==0&&l.x===0||o.y!==0&&l.y===0},k4=function(t,n){return G7({current:t.scroll.current,max:t.scroll.max,change:n})},$ie=function(t,n){if(!k4(t,n))return null;var a=t.scroll.max,s=t.scroll.current;return D4({current:s,max:a,change:n})},O4=function(t,n){var a=t.frame;return a?G7({current:a.scroll.current,max:a.scroll.max,change:n}):!1},Bie=function(t,n){var a=t.frame;return!a||!O4(t,n)?null:D4({current:a.scroll.current,max:a.scroll.max,change:n})},zie=function(e){var t=e.viewport,n=e.subject,a=e.center,s=e.dragStartTime,i=e.shouldUseTimeDampening,o=H7({dragStartTime:s,container:t.frame,subject:n,center:a,shouldUseTimeDampening:i});return o&&k4(t,o)?o:null},Uie=function(e){var t=e.droppable,n=e.subject,a=e.center,s=e.dragStartTime,i=e.shouldUseTimeDampening,o=t.frame;if(!o)return null;var l=H7({dragStartTime:s,container:o.pageMarginBox,subject:n,center:a,shouldUseTimeDampening:i});return l&&O4(t,l)?l:null},AI=function(e){var t=e.state,n=e.dragStartTime,a=e.shouldUseTimeDampening,s=e.scrollWindow,i=e.scrollDroppable,o=t.current.page.borderBoxCenter,l=t.dimensions.draggables[t.critical.draggable.id],c=l.page.marginBox;if(t.isWindowScrollAllowed){var d=t.viewport,f=zie({dragStartTime:n,viewport:d,subject:c,center:o,shouldUseTimeDampening:a});if(f){s(f);return}}var u=kie({center:o,destination:_s(t.impact),droppables:t.dimensions.droppables});if(u){var m=Uie({dragStartTime:n,droppable:u,subject:c,center:o,shouldUseTimeDampening:a});m&&i(u.descriptor.id,m)}},Vie=function(e){var t=e.scrollWindow,n=e.scrollDroppable,a=cv(t),s=cv(n),i=null,o=function(f){i||it(!1);var u=i,m=u.shouldUseTimeDampening,h=u.dragStartTime;AI({state:f,scrollWindow:a,scrollDroppable:s,dragStartTime:h,shouldUseTimeDampening:m})},l=function(f){i&&it(!1);var u=Date.now(),m=!1,h=function(){m=!0};AI({state:f,dragStartTime:0,shouldUseTimeDampening:!1,scrollWindow:h,scrollDroppable:h}),i={dragStartTime:u,shouldUseTimeDampening:m},m&&o(f)},c=function(){i&&(a.cancel(),s.cancel(),i=null)};return{start:l,stop:c,scroll:o}},qie=function(e){var t=e.move,n=e.scrollDroppable,a=e.scrollWindow,s=function(d,f){var u=ga(d.current.client.selection,f);t({client:u})},i=function(d,f){if(!O4(d,f))return f;var u=Bie(d,f);if(!u)return n(d.descriptor.id,f),null;var m=Is(f,u);n(d.descriptor.id,m);var h=Is(f,m);return h},o=function(d,f,u){if(!d||!k4(f,u))return u;var m=$ie(f,u);if(!m)return a(u),null;var h=Is(u,m);a(h);var x=Is(u,h);return x},l=function(d){var f=d.scrollJumpRequest;if(f){var u=_s(d.impact);u||it(!1);var m=i(d.dimensions.droppables[u],f);if(m){var h=d.viewport,x=o(d.isWindowScrollAllowed,h,m);x&&s(d,x)}}};return l},Wie=function(e){var t=e.scrollDroppable,n=e.scrollWindow,a=e.move,s=Vie({scrollWindow:n,scrollDroppable:t}),i=qie({move:a,scrollWindow:n,scrollDroppable:t}),o=function(d){if(d.phase==="DRAGGING"){if(d.movementMode==="FLUID"){s.scroll(d);return}d.scrollJumpRequest&&i(d)}},l={scroll:o,start:s.start,stop:s.stop};return l},sm="data-rbd",im=function(){var e=sm+"-drag-handle";return{base:e,draggableId:e+"-draggable-id",contextId:e+"-context-id"}}(),K5=function(){var e=sm+"-draggable";return{base:e,contextId:e+"-context-id",id:e+"-id"}}(),Hie=function(){var e=sm+"-droppable";return{base:e,contextId:e+"-context-id",id:e+"-id"}}(),EI={contextId:sm+"-scroll-container-context-id"},Gie=function(t){return function(n){return"["+n+'="'+t+'"]'}},Jh=function(t,n){return t.map(function(a){var s=a.styles[n];return s?a.selector+" { "+s+" }":""}).join(" ")},Kie="pointer-events: none;",Yie=function(e){var t=Gie(e),n=function(){var l=`
      cursor: -webkit-grab;
      cursor: grab;
    `;return{selector:t(im.contextId),styles:{always:`
          -webkit-touch-callout: none;
          -webkit-tap-highlight-color: rgba(0,0,0,0);
          touch-action: manipulation;
        `,resting:l,dragging:Kie,dropAnimating:l}}}(),a=function(){var l=`
      transition: `+Tp.outOfTheWay+`;
    `;return{selector:t(K5.contextId),styles:{dragging:l,dropAnimating:l,userCancel:l}}}(),s={selector:t(Hie.contextId),styles:{always:"overflow-anchor: none;"}},i={selector:"body",styles:{dragging:`
        cursor: grabbing;
        cursor: -webkit-grabbing;
        user-select: none;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        overflow-anchor: none;
      `}},o=[a,n,s,i];return{always:Jh(o,"always"),resting:Jh(o,"resting"),dragging:Jh(o,"dragging"),dropAnimating:Jh(o,"dropAnimating"),userCancel:Jh(o,"userCancel")}},Ls=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?w.useLayoutEffect:w.useEffect,N2=function(){var t=document.querySelector("head");return t||it(!1),t},PI=function(t){var n=document.createElement("style");return t&&n.setAttribute("nonce",t),n.type="text/css",n};function Xie(e,t){var n=hr(function(){return Yie(e)},[e]),a=w.useRef(null),s=w.useRef(null),i=Pt(ia(function(u){var m=s.current;m||it(!1),m.textContent=u}),[]),o=Pt(function(u){var m=a.current;m||it(!1),m.textContent=u},[]);Ls(function(){!a.current&&!s.current||it(!1);var u=PI(t),m=PI(t);return a.current=u,s.current=m,u.setAttribute(sm+"-always",e),m.setAttribute(sm+"-dynamic",e),N2().appendChild(u),N2().appendChild(m),o(n.always),i(n.resting),function(){var h=function(g){var p=g.current;p||it(!1),N2().removeChild(p),g.current=null};h(a),h(s)}},[t,o,i,n.always,n.resting,e]);var l=Pt(function(){return i(n.dragging)},[i,n.dragging]),c=Pt(function(u){if(u==="DROP"){i(n.dropAnimating);return}i(n.userCancel)},[i,n.dropAnimating,n.userCancel]),d=Pt(function(){s.current&&i(n.resting)},[i,n.resting]),f=hr(function(){return{dragging:l,dropping:c,resting:d}},[l,c,d]);return f}var K7=function(e){return e&&e.ownerDocument?e.ownerDocument.defaultView:window};function O1(e){return e instanceof K7(e).HTMLElement}function Qie(e,t){var n="["+im.contextId+'="'+e+'"]',a=v7(document.querySelectorAll(n));if(!a.length)return null;var s=Qc(a,function(i){return i.getAttribute(im.draggableId)===t});return!s||!O1(s)?null:s}function Jie(e){var t=w.useRef({}),n=w.useRef(null),a=w.useRef(null),s=w.useRef(!1),i=Pt(function(m,h){var x={id:m,focus:h};return t.current[m]=x,function(){var p=t.current,v=p[m];v!==x&&delete p[m]}},[]),o=Pt(function(m){var h=Qie(e,m);h&&h!==document.activeElement&&h.focus()},[e]),l=Pt(function(m,h){n.current===m&&(n.current=h)},[]),c=Pt(function(){a.current||s.current&&(a.current=requestAnimationFrame(function(){a.current=null;var m=n.current;m&&o(m)}))},[o]),d=Pt(function(m){n.current=null;var h=document.activeElement;h&&h.getAttribute(im.draggableId)===m&&(n.current=m)},[]);Ls(function(){return s.current=!0,function(){s.current=!1;var m=a.current;m&&cancelAnimationFrame(m)}},[]);var f=hr(function(){return{register:i,tryRecordFocus:d,tryRestoreFocusRecorded:c,tryShiftRecord:l}},[i,d,c,l]);return f}function Zie(){var e={draggables:{},droppables:{}},t=[];function n(u){return t.push(u),function(){var h=t.indexOf(u);h!==-1&&t.splice(h,1)}}function a(u){t.length&&t.forEach(function(m){return m(u)})}function s(u){return e.draggables[u]||null}function i(u){var m=s(u);return m||it(!1),m}var o={register:function(m){e.draggables[m.descriptor.id]=m,a({type:"ADDITION",value:m})},update:function(m,h){var x=e.draggables[h.descriptor.id];x&&x.uniqueId===m.uniqueId&&(delete e.draggables[h.descriptor.id],e.draggables[m.descriptor.id]=m)},unregister:function(m){var h=m.descriptor.id,x=s(h);x&&m.uniqueId===x.uniqueId&&(delete e.draggables[h],a({type:"REMOVAL",value:m}))},getById:i,findById:s,exists:function(m){return!!s(m)},getAllByType:function(m){return ky(e.draggables).filter(function(h){return h.descriptor.type===m})}};function l(u){return e.droppables[u]||null}function c(u){var m=l(u);return m||it(!1),m}var d={register:function(m){e.droppables[m.descriptor.id]=m},unregister:function(m){var h=l(m.descriptor.id);h&&m.uniqueId===h.uniqueId&&delete e.droppables[m.descriptor.id]},getById:c,findById:l,exists:function(m){return!!l(m)},getAllByType:function(m){return ky(e.droppables).filter(function(h){return h.descriptor.type===m})}};function f(){e.draggables={},e.droppables={},t.length=0}return{draggable:o,droppable:d,subscribe:n,clean:f}}function eoe(){var e=hr(Zie,[]);return w.useEffect(function(){return function(){requestAnimationFrame(e.clean)}},[e]),e}var _4=pe.createContext(null),_y=function(){var e=document.body;return e||it(!1),e},toe={position:"absolute",width:"1px",height:"1px",margin:"-1px",border:"0",padding:"0",overflow:"hidden",clip:"rect(0 0 0 0)","clip-path":"inset(100%)"},roe=function(t){return"rbd-announcement-"+t};function noe(e){var t=hr(function(){return roe(e)},[e]),n=w.useRef(null);w.useEffect(function(){var i=document.createElement("div");return n.current=i,i.id=t,i.setAttribute("aria-live","assertive"),i.setAttribute("aria-atomic","true"),at(i.style,toe),_y().appendChild(i),function(){setTimeout(function(){var c=_y();c.contains(i)&&c.removeChild(i),i===n.current&&(n.current=null)})}},[t]);var a=Pt(function(s){var i=n.current;if(i){i.textContent=s;return}},[]);return a}var aoe=0,soe={separator:"::"};function L4(e,t){return t===void 0&&(t=soe),hr(function(){return""+e+t.separator+aoe++},[t.separator,e])}function ioe(e){var t=e.contextId,n=e.uniqueId;return"rbd-hidden-text-"+t+"-"+n}function ooe(e){var t=e.contextId,n=e.text,a=L4("hidden-text",{separator:"-"}),s=hr(function(){return ioe({contextId:t,uniqueId:a})},[a,t]);return w.useEffect(function(){var o=document.createElement("div");return o.id=s,o.textContent=n,o.style.display="none",_y().appendChild(o),function(){var c=_y();c.contains(o)&&c.removeChild(o)}},[s,n]),s}var _1=pe.createContext(null);function Y7(e){var t=w.useRef(e);return w.useEffect(function(){t.current=e}),t}function loe(){var e=null;function t(){return!!e}function n(o){return o===e}function a(o){e&&it(!1);var l={abandon:o};return e=l,l}function s(){e||it(!1),e=null}function i(){e&&(e.abandon(),s())}return{isClaimed:t,isActive:n,claim:a,release:s,tryAbandon:i}}var coe=9,doe=13,R4=27,X7=32,uoe=33,foe=34,moe=35,hoe=36,poe=37,voe=38,xoe=39,goe=40,Qg,yoe=(Qg={},Qg[doe]=!0,Qg[coe]=!0,Qg),Q7=function(e){yoe[e.keyCode]&&e.preventDefault()},L1=function(){var e="visibilitychange";if(typeof document>"u")return e;var t=[e,"ms"+e,"webkit"+e,"moz"+e,"o"+e],n=Qc(t,function(a){return"on"+a in document});return n||e}(),J7=0,TI=5;function boe(e,t){return Math.abs(t.x-e.x)>=TI||Math.abs(t.y-e.y)>=TI}var II={type:"IDLE"};function joe(e){var t=e.cancel,n=e.completed,a=e.getPhase,s=e.setPhase;return[{eventName:"mousemove",fn:function(o){var l=o.button,c=o.clientX,d=o.clientY;if(l===J7){var f={x:c,y:d},u=a();if(u.type==="DRAGGING"){o.preventDefault(),u.actions.move(f);return}u.type!=="PENDING"&&it(!1);var m=u.point;if(boe(m,f)){o.preventDefault();var h=u.actions.fluidLift(f);s({type:"DRAGGING",actions:h})}}}},{eventName:"mouseup",fn:function(o){var l=a();if(l.type!=="DRAGGING"){t();return}o.preventDefault(),l.actions.drop({shouldBlockNextClick:!0}),n()}},{eventName:"mousedown",fn:function(o){a().type==="DRAGGING"&&o.preventDefault(),t()}},{eventName:"keydown",fn:function(o){var l=a();if(l.type==="PENDING"){t();return}if(o.keyCode===R4){o.preventDefault(),t();return}Q7(o)}},{eventName:"resize",fn:t},{eventName:"scroll",options:{passive:!0,capture:!1},fn:function(){a().type==="PENDING"&&t()}},{eventName:"webkitmouseforcedown",fn:function(o){var l=a();if(l.type==="IDLE"&&it(!1),l.actions.shouldRespectForcePress()){t();return}o.preventDefault()}},{eventName:L1,fn:t}]}function woe(e){var t=w.useRef(II),n=w.useRef(Ic),a=hr(function(){return{eventName:"mousedown",fn:function(u){if(!u.defaultPrevented&&u.button===J7&&!(u.ctrlKey||u.metaKey||u.shiftKey||u.altKey)){var m=e.findClosestDraggableId(u);if(m){var h=e.tryGetLock(m,o,{sourceEvent:u});if(h){u.preventDefault();var x={x:u.clientX,y:u.clientY};n.current(),d(h,x)}}}}}},[e]),s=hr(function(){return{eventName:"webkitmouseforcewillbegin",fn:function(u){if(!u.defaultPrevented){var m=e.findClosestDraggableId(u);if(m){var h=e.findOptionsForDraggable(m);h&&(h.shouldRespectForcePress||e.canGetLock(m)&&u.preventDefault())}}}}},[e]),i=Pt(function(){var u={passive:!1,capture:!0};n.current=oi(window,[s,a],u)},[s,a]),o=Pt(function(){var f=t.current;f.type!=="IDLE"&&(t.current=II,n.current(),i())},[i]),l=Pt(function(){var f=t.current;o(),f.type==="DRAGGING"&&f.actions.cancel({shouldBlockNextClick:!0}),f.type==="PENDING"&&f.actions.abort()},[o]),c=Pt(function(){var u={capture:!0,passive:!1},m=joe({cancel:l,completed:o,getPhase:function(){return t.current},setPhase:function(x){t.current=x}});n.current=oi(window,m,u)},[l,o]),d=Pt(function(u,m){t.current.type!=="IDLE"&&it(!1),t.current={type:"PENDING",point:m,actions:u},c()},[c]);Ls(function(){return i(),function(){n.current()}},[i])}var of;function Noe(){}var Soe=(of={},of[foe]=!0,of[uoe]=!0,of[hoe]=!0,of[moe]=!0,of);function Coe(e,t){function n(){t(),e.cancel()}function a(){t(),e.drop()}return[{eventName:"keydown",fn:function(i){if(i.keyCode===R4){i.preventDefault(),n();return}if(i.keyCode===X7){i.preventDefault(),a();return}if(i.keyCode===goe){i.preventDefault(),e.moveDown();return}if(i.keyCode===voe){i.preventDefault(),e.moveUp();return}if(i.keyCode===xoe){i.preventDefault(),e.moveRight();return}if(i.keyCode===poe){i.preventDefault(),e.moveLeft();return}if(Soe[i.keyCode]){i.preventDefault();return}Q7(i)}},{eventName:"mousedown",fn:n},{eventName:"mouseup",fn:n},{eventName:"click",fn:n},{eventName:"touchstart",fn:n},{eventName:"resize",fn:n},{eventName:"wheel",fn:n,options:{passive:!0}},{eventName:L1,fn:n}]}function Aoe(e){var t=w.useRef(Noe),n=hr(function(){return{eventName:"keydown",fn:function(i){if(i.defaultPrevented||i.keyCode!==X7)return;var o=e.findClosestDraggableId(i);if(!o)return;var l=e.tryGetLock(o,f,{sourceEvent:i});if(!l)return;i.preventDefault();var c=!0,d=l.snapLift();t.current();function f(){c||it(!1),c=!1,t.current(),a()}t.current=oi(window,Coe(d,f),{capture:!0,passive:!1})}}},[e]),a=Pt(function(){var i={passive:!1,capture:!0};t.current=oi(window,[n],i)},[n]);Ls(function(){return a(),function(){t.current()}},[a])}var S2={type:"IDLE"},Eoe=120,Poe=.15;function Toe(e){var t=e.cancel,n=e.getPhase;return[{eventName:"orientationchange",fn:t},{eventName:"resize",fn:t},{eventName:"contextmenu",fn:function(s){s.preventDefault()}},{eventName:"keydown",fn:function(s){if(n().type!=="DRAGGING"){t();return}s.keyCode===R4&&s.preventDefault(),t()}},{eventName:L1,fn:t}]}function Ioe(e){var t=e.cancel,n=e.completed,a=e.getPhase;return[{eventName:"touchmove",options:{capture:!1},fn:function(i){var o=a();if(o.type!=="DRAGGING"){t();return}o.hasMoved=!0;var l=i.touches[0],c=l.clientX,d=l.clientY,f={x:c,y:d};i.preventDefault(),o.actions.move(f)}},{eventName:"touchend",fn:function(i){var o=a();if(o.type!=="DRAGGING"){t();return}i.preventDefault(),o.actions.drop({shouldBlockNextClick:!0}),n()}},{eventName:"touchcancel",fn:function(i){if(a().type!=="DRAGGING"){t();return}i.preventDefault(),t()}},{eventName:"touchforcechange",fn:function(i){var o=a();o.type==="IDLE"&&it(!1);var l=i.touches[0];if(l){var c=l.force>=Poe;if(c){var d=o.actions.shouldRespectForcePress();if(o.type==="PENDING"){d&&t();return}if(d){if(o.hasMoved){i.preventDefault();return}t();return}i.preventDefault()}}}},{eventName:L1,fn:t}]}function Doe(e){var t=w.useRef(S2),n=w.useRef(Ic),a=Pt(function(){return t.current},[]),s=Pt(function(h){t.current=h},[]),i=hr(function(){return{eventName:"touchstart",fn:function(h){if(!h.defaultPrevented){var x=e.findClosestDraggableId(h);if(x){var g=e.tryGetLock(x,l,{sourceEvent:h});if(g){var p=h.touches[0],v=p.clientX,y=p.clientY,b={x:v,y};n.current(),u(g,b)}}}}}},[e]),o=Pt(function(){var h={capture:!0,passive:!1};n.current=oi(window,[i],h)},[i]),l=Pt(function(){var m=t.current;m.type!=="IDLE"&&(m.type==="PENDING"&&clearTimeout(m.longPressTimerId),s(S2),n.current(),o())},[o,s]),c=Pt(function(){var m=t.current;l(),m.type==="DRAGGING"&&m.actions.cancel({shouldBlockNextClick:!0}),m.type==="PENDING"&&m.actions.abort()},[l]),d=Pt(function(){var h={capture:!0,passive:!1},x={cancel:c,completed:l,getPhase:a},g=oi(window,Ioe(x),h),p=oi(window,Toe(x),h);n.current=function(){g(),p()}},[c,a,l]),f=Pt(function(){var h=a();h.type!=="PENDING"&&it(!1);var x=h.actions.fluidLift(h.point);s({type:"DRAGGING",actions:x,hasMoved:!1})},[a,s]),u=Pt(function(h,x){a().type!=="IDLE"&&it(!1);var g=setTimeout(f,Eoe);s({type:"PENDING",point:x,actions:h,longPressTimerId:g}),d()},[d,a,s,f]);Ls(function(){return o(),function(){n.current();var x=a();x.type==="PENDING"&&(clearTimeout(x.longPressTimerId),s(S2))}},[a,o,s]),Ls(function(){var h=oi(window,[{eventName:"touchmove",fn:function(){},options:{capture:!1,passive:!1}}]);return h},[])}var koe={input:!0,button:!0,textarea:!0,select:!0,option:!0,optgroup:!0,video:!0,audio:!0};function Z7(e,t){if(t==null)return!1;var n=!!koe[t.tagName.toLowerCase()];if(n)return!0;var a=t.getAttribute("contenteditable");return a==="true"||a===""?!0:t===e?!1:Z7(e,t.parentElement)}function Ooe(e,t){var n=t.target;return O1(n)?Z7(e,n):!1}var _oe=function(e){return Hi(e.getBoundingClientRect()).center};function Loe(e){return e instanceof K7(e).Element}var Roe=function(){var e="matches";if(typeof document>"u")return e;var t=[e,"msMatchesSelector","webkitMatchesSelector"],n=Qc(t,function(a){return a in Element.prototype});return n||e}();function e8(e,t){return e==null?null:e[Roe](t)?e:e8(e.parentElement,t)}function Foe(e,t){return e.closest?e.closest(t):e8(e,t)}function Moe(e){return"["+im.contextId+'="'+e+'"]'}function $oe(e,t){var n=t.target;if(!Loe(n))return null;var a=Moe(e),s=Foe(n,a);return!s||!O1(s)?null:s}function Boe(e,t){var n=$oe(e,t);return n?n.getAttribute(im.draggableId):null}function zoe(e,t){var n="["+K5.contextId+'="'+e+'"]',a=v7(document.querySelectorAll(n)),s=Qc(a,function(i){return i.getAttribute(K5.id)===t});return!s||!O1(s)?null:s}function Uoe(e){e.preventDefault()}function Jg(e){var t=e.expected,n=e.phase,a=e.isLockActive;return e.shouldWarn,!(!a()||t!==n)}function t8(e){var t=e.lockAPI,n=e.store,a=e.registry,s=e.draggableId;if(t.isClaimed())return!1;var i=a.draggable.findById(s);return!(!i||!i.options.isEnabled||!q7(n.getState(),s))}function Voe(e){var t=e.lockAPI,n=e.contextId,a=e.store,s=e.registry,i=e.draggableId,o=e.forceSensorStop,l=e.sourceEvent,c=t8({lockAPI:t,store:a,registry:s,draggableId:i});if(!c)return null;var d=s.draggable.getById(i),f=zoe(n,d.descriptor.id);if(!f||l&&!d.options.canDragInteractiveElements&&Ooe(f,l))return null;var u=t.claim(o||Ic),m="PRE_DRAG";function h(){return d.options.shouldRespectForcePress}function x(){return t.isActive(u)}function g(E,S){Jg({expected:E,phase:m,isLockActive:x,shouldWarn:!0})&&a.dispatch(S())}var p=g.bind(null,"DRAGGING");function v(E){function S(){t.release(),m="COMPLETED"}m!=="PRE_DRAG"&&(S(),m!=="PRE_DRAG"&&it(!1)),a.dispatch(Rse(E.liftActionArgs)),m="DRAGGING";function N(I,D){if(D===void 0&&(D={shouldBlockNextClick:!1}),E.cleanup(),D.shouldBlockNextClick){var T=oi(window,[{eventName:"click",fn:Uoe,options:{once:!0,passive:!1,capture:!0}}]);setTimeout(T)}S(),a.dispatch(F7({reason:I}))}return at({isActive:function(){return Jg({expected:"DRAGGING",phase:m,isLockActive:x,shouldWarn:!1})},shouldRespectForcePress:h,drop:function(D){return N("DROP",D)},cancel:function(D){return N("CANCEL",D)}},E.actions)}function y(E){var S=cv(function(I){p(function(){return R7({client:I})})}),N=v({liftActionArgs:{id:i,clientSelection:E,movementMode:"FLUID"},cleanup:function(){return S.cancel()},actions:{move:S}});return at({},N,{move:S})}function b(){var E={moveUp:function(){return p(Wse)},moveRight:function(){return p(Gse)},moveDown:function(){return p(Hse)},moveLeft:function(){return p(Kse)}};return v({liftActionArgs:{id:i,clientSelection:_oe(f),movementMode:"SNAP"},cleanup:Ic,actions:E})}function j(){var E=Jg({expected:"PRE_DRAG",phase:m,isLockActive:x,shouldWarn:!0});E&&t.release()}var C={isActive:function(){return Jg({expected:"PRE_DRAG",phase:m,isLockActive:x,shouldWarn:!1})},shouldRespectForcePress:h,fluidLift:y,snapLift:b,abort:j};return C}var qoe=[woe,Aoe,Doe];function Woe(e){var t=e.contextId,n=e.store,a=e.registry,s=e.customSensors,i=e.enableDefaultSensors,o=[].concat(i?qoe:[],s||[]),l=w.useState(function(){return loe()})[0],c=Pt(function(y,b){y.isDragging&&!b.isDragging&&l.tryAbandon()},[l]);Ls(function(){var y=n.getState(),b=n.subscribe(function(){var j=n.getState();c(y,j),y=j});return b},[l,n,c]),Ls(function(){return l.tryAbandon},[l.tryAbandon]);for(var d=Pt(function(v){return t8({lockAPI:l,registry:a,store:n,draggableId:v})},[l,a,n]),f=Pt(function(v,y,b){return Voe({lockAPI:l,registry:a,contextId:t,store:n,draggableId:v,forceSensorStop:y,sourceEvent:b&&b.sourceEvent?b.sourceEvent:null})},[t,l,a,n]),u=Pt(function(v){return Boe(t,v)},[t]),m=Pt(function(v){var y=a.draggable.findById(v);return y?y.options:null},[a.draggable]),h=Pt(function(){l.isClaimed()&&(l.tryAbandon(),n.getState().phase!=="IDLE"&&n.dispatch(A4()))},[l,n]),x=Pt(l.isClaimed,[l]),g=hr(function(){return{canGetLock:d,tryGetLock:f,findClosestDraggableId:u,findOptionsForDraggable:m,tryReleaseLock:h,isLockClaimed:x}},[d,f,u,m,h,x]),p=0;p<o.length;p++)o[p](g)}var Hoe=function(t){return{onBeforeCapture:t.onBeforeCapture,onBeforeDragStart:t.onBeforeDragStart,onDragStart:t.onDragStart,onDragEnd:t.onDragEnd,onDragUpdate:t.onDragUpdate}};function Zh(e){return e.current||it(!1),e.current}function Goe(e){var t=e.contextId,n=e.setCallbacks,a=e.sensors,s=e.nonce,i=e.dragHandleUsageInstructions,o=w.useRef(null),l=Y7(e),c=Pt(function(){return Hoe(l.current)},[l]),d=noe(t),f=ooe({contextId:t,text:i}),u=Xie(t,s),m=Pt(function(I){Zh(o).dispatch(I)},[]),h=hr(function(){return ZT({publishWhileDragging:Mse,updateDroppableScroll:Bse,updateDroppableIsEnabled:zse,updateDroppableIsCombineEnabled:Use,collectionStarting:$se},m)},[m]),x=eoe(),g=hr(function(){return Pie(x,h)},[x,h]),p=hr(function(){return Wie(at({scrollWindow:Tie,scrollDroppable:g.scrollDroppable},ZT({move:R7},m)))},[g.scrollDroppable,m]),v=Jie(t),y=hr(function(){return Sie({announce:d,autoScroller:p,dimensionMarshal:g,focusMarshal:v,getResponders:c,styleMarshal:u})},[d,p,g,v,c,u]);o.current=y;var b=Pt(function(){var I=Zh(o),D=I.getState();D.phase!=="IDLE"&&I.dispatch(A4())},[]),j=Pt(function(){var I=Zh(o).getState();return I.isDragging||I.phase==="DROP_ANIMATING"},[]),C=hr(function(){return{isDragging:j,tryAbort:b}},[j,b]);n(C);var E=Pt(function(I){return q7(Zh(o).getState(),I)},[]),S=Pt(function(){return yd(Zh(o).getState())},[]),N=hr(function(){return{marshal:g,focus:v,contextId:t,canLift:E,isMovementAllowed:S,dragHandleUsageInstructionsId:f,registry:x}},[t,g,f,v,E,S,x]);return Woe({contextId:t,store:y,registry:x,customSensors:a,enableDefaultSensors:e.enableDefaultSensors!==!1}),w.useEffect(function(){return b},[b]),pe.createElement(_1.Provider,{value:N},pe.createElement(pne,{context:_4,store:y},e.children))}var Koe=0;function Yoe(){return hr(function(){return""+Koe++},[])}function Xoe(e){var t=Yoe(),n=e.dragHandleUsageInstructions||M0.dragHandleUsageInstructions;return pe.createElement(Aae,null,function(a){return pe.createElement(Goe,{nonce:e.nonce,contextId:t,setCallbacks:a,dragHandleUsageInstructions:n,enableDefaultSensors:e.enableDefaultSensors,sensors:e.sensors,onBeforeCapture:e.onBeforeCapture,onBeforeDragStart:e.onBeforeDragStart,onDragStart:e.onDragStart,onDragUpdate:e.onDragUpdate,onDragEnd:e.onDragEnd},e.children)})}var r8=function(t){return function(n){return t===n}},Qoe=r8("scroll"),Joe=r8("auto"),DI=function(t,n){return n(t.overflowX)||n(t.overflowY)},Zoe=function(t){var n=window.getComputedStyle(t),a={overflowX:n.overflowX,overflowY:n.overflowY};return DI(a,Qoe)||DI(a,Joe)},ele=function(){return!1},tle=function e(t){return t==null?null:t===document.body?ele()?t:null:t===document.documentElement?null:Zoe(t)?t:e(t.parentElement)},Y5=function(e){return{x:e.scrollLeft,y:e.scrollTop}},rle=function e(t){if(!t)return!1;var n=window.getComputedStyle(t);return n.position==="fixed"?!0:e(t.parentElement)},nle=function(e){var t=tle(e),n=rle(e);return{closestScrollable:t,isFixedOnPage:n}},ale=function(e){var t=e.descriptor,n=e.isEnabled,a=e.isCombineEnabled,s=e.isFixedOnPage,i=e.direction,o=e.client,l=e.page,c=e.closest,d=function(){if(!c)return null;var h=c.scrollSize,x=c.client,g=z7({scrollHeight:h.scrollHeight,scrollWidth:h.scrollWidth,height:x.paddingBox.height,width:x.paddingBox.width});return{pageMarginBox:c.page.marginBox,frameClient:x,scrollSize:h,shouldClipSubject:c.shouldClipSubject,scroll:{initial:c.scroll,current:c.scroll,max:g,diff:{value:oa,displacement:oa}}}}(),f=i==="vertical"?j4:j7,u=am({page:l,withPlaceholder:null,axis:f,frame:d}),m={descriptor:t,isCombineEnabled:a,isFixedOnPage:s,axis:f,isEnabled:n,client:o,page:l,frame:d,subject:u};return m},sle=function(t,n){var a=u7(t);if(!n||t!==n)return a;var s=a.paddingBox.top-n.scrollTop,i=a.paddingBox.left-n.scrollLeft,o=s+n.scrollHeight,l=i+n.scrollWidth,c={top:s,right:l,bottom:o,left:i},d=v4(c,a.border),f=x4({borderBox:d,margin:a.margin,border:a.border,padding:a.padding});return f},ile=function(e){var t=e.ref,n=e.descriptor,a=e.env,s=e.windowScroll,i=e.direction,o=e.isDropDisabled,l=e.isCombineEnabled,c=e.shouldClipSubject,d=a.closestScrollable,f=sle(t,d),u=Ty(f,s),m=function(){if(!d)return null;var x=u7(d),g={scrollHeight:d.scrollHeight,scrollWidth:d.scrollWidth};return{client:x,page:Ty(x,s),scroll:Y5(d),scrollSize:g,shouldClipSubject:c}}(),h=ale({descriptor:n,isEnabled:!o,isCombineEnabled:l,isFixedOnPage:a.isFixedOnPage,direction:i,client:f,page:u,closest:m});return h},ole={passive:!1},lle={passive:!0},kI=function(e){return e.shouldPublishImmediately?ole:lle};function Ly(e){var t=w.useContext(e);return t||it(!1),t}var Zg=function(t){return t&&t.env.closestScrollable||null};function cle(e){var t=w.useRef(null),n=Ly(_1),a=L4("droppable"),s=n.registry,i=n.marshal,o=Y7(e),l=hr(function(){return{id:e.droppableId,type:e.type,mode:e.mode}},[e.droppableId,e.mode,e.type]),c=w.useRef(l),d=hr(function(){return ia(function(j,C){t.current||it(!1);var E={x:j,y:C};i.updateDroppableScroll(l.id,E)})},[l.id,i]),f=Pt(function(){var j=t.current;return!j||!j.env.closestScrollable?oa:Y5(j.env.closestScrollable)},[]),u=Pt(function(){var j=f();d(j.x,j.y)},[f,d]),m=hr(function(){return cv(u)},[u]),h=Pt(function(){var j=t.current,C=Zg(j);j&&C||it(!1);var E=j.scrollOptions;if(E.shouldPublishImmediately){u();return}m()},[m,u]),x=Pt(function(j,C){t.current&&it(!1);var E=o.current,S=E.getDroppableRef();S||it(!1);var N=nle(S),I={ref:S,descriptor:l,env:N,scrollOptions:C};t.current=I;var D=ile({ref:S,descriptor:l,env:N,windowScroll:j,direction:E.direction,isDropDisabled:E.isDropDisabled,isCombineEnabled:E.isCombineEnabled,shouldClipSubject:!E.ignoreContainerClipping}),T=N.closestScrollable;return T&&(T.setAttribute(EI.contextId,n.contextId),T.addEventListener("scroll",h,kI(I.scrollOptions))),D},[n.contextId,l,h,o]),g=Pt(function(){var j=t.current,C=Zg(j);return j&&C||it(!1),Y5(C)},[]),p=Pt(function(){var j=t.current;j||it(!1);var C=Zg(j);t.current=null,C&&(m.cancel(),C.removeAttribute(EI.contextId),C.removeEventListener("scroll",h,kI(j.scrollOptions)))},[h,m]),v=Pt(function(j){var C=t.current;C||it(!1);var E=Zg(C);E||it(!1),E.scrollTop+=j.y,E.scrollLeft+=j.x},[]),y=hr(function(){return{getDimensionAndWatchScroll:x,getScrollWhileDragging:g,dragStopped:p,scroll:v}},[p,x,g,v]),b=hr(function(){return{uniqueId:a,descriptor:l,callbacks:y}},[y,l,a]);Ls(function(){return c.current=b.descriptor,s.droppable.register(b),function(){t.current&&p(),s.droppable.unregister(b)}},[y,l,p,b,i,s.droppable]),Ls(function(){t.current&&i.updateDroppableIsEnabled(c.current.id,!e.isDropDisabled)},[e.isDropDisabled,i]),Ls(function(){t.current&&i.updateDroppableIsCombineEnabled(c.current.id,e.isCombineEnabled)},[e.isCombineEnabled,i])}function C2(){}var OI={width:0,height:0,margin:kae},dle=function(t){var n=t.isAnimatingOpenOnMount,a=t.placeholder,s=t.animate;return n||s==="close"?OI:{height:a.client.borderBox.height,width:a.client.borderBox.width,margin:a.client.margin}},ule=function(t){var n=t.isAnimatingOpenOnMount,a=t.placeholder,s=t.animate,i=dle({isAnimatingOpenOnMount:n,placeholder:a,animate:s});return{display:a.display,boxSizing:"border-box",width:i.width,height:i.height,marginTop:i.margin.top,marginRight:i.margin.right,marginBottom:i.margin.bottom,marginLeft:i.margin.left,flexShrink:"0",flexGrow:"0",pointerEvents:"none",transition:s!=="none"?Tp.placeholder:null}};function fle(e){var t=w.useRef(null),n=Pt(function(){t.current&&(clearTimeout(t.current),t.current=null)},[]),a=e.animate,s=e.onTransitionEnd,i=e.onClose,o=e.contextId,l=w.useState(e.animate==="open"),c=l[0],d=l[1];w.useEffect(function(){return c?a!=="open"?(n(),d(!1),C2):t.current?C2:(t.current=setTimeout(function(){t.current=null,d(!1)}),n):C2},[a,c,n]);var f=Pt(function(m){m.propertyName==="height"&&(s(),a==="close"&&i())},[a,i,s]),u=ule({isAnimatingOpenOnMount:c,animate:e.animate,placeholder:e.placeholder});return pe.createElement(e.placeholder.tagName,{style:u,"data-rbd-placeholder-context-id":o,onTransitionEnd:f,ref:e.innerRef})}var mle=pe.memo(fle),F4=pe.createContext(null),hle=function(e){q$(t,e);function t(){for(var a,s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];return a=e.call.apply(e,[this].concat(i))||this,a.state={isVisible:!!a.props.on,data:a.props.on,animate:a.props.shouldAnimate&&a.props.on?"open":"none"},a.onClose=function(){a.state.animate==="close"&&a.setState({isVisible:!1})},a}t.getDerivedStateFromProps=function(s,i){return s.shouldAnimate?s.on?{isVisible:!0,data:s.on,animate:"open"}:i.isVisible?{isVisible:!0,data:i.data,animate:"close"}:{isVisible:!1,animate:"close",data:null}:{isVisible:!!s.on,data:s.on,animate:"none"}};var n=t.prototype;return n.render=function(){if(!this.state.isVisible)return null;var s={onClose:this.onClose,data:this.state.data,animate:this.state.animate};return this.props.children(s)},t}(pe.PureComponent),_I={dragging:5e3,dropAnimating:4500},ple=function(t,n){return n?Tp.drop(n.duration):t?Tp.snap:Tp.fluid},vle=function(t,n){return t?n?mv.opacity.drop:mv.opacity.combining:null},xle=function(t){return t.forceShouldAnimate!=null?t.forceShouldAnimate:t.mode==="SNAP"};function gle(e){var t=e.dimension,n=t.client,a=e.offset,s=e.combineWith,i=e.dropping,o=!!s,l=xle(e),c=!!i,d=c?H5.drop(a,o):H5.moveTo(a),f={position:"fixed",top:n.marginBox.top,left:n.marginBox.left,boxSizing:"border-box",width:n.borderBox.width,height:n.borderBox.height,transition:ple(l,i),transform:d,opacity:vle(o,c),zIndex:c?_I.dropAnimating:_I.dragging,pointerEvents:"none"};return f}function yle(e){return{transform:H5.moveTo(e.offset),transition:e.shouldAnimateDisplacement?null:"none"}}function ble(e){return e.type==="DRAGGING"?gle(e):yle(e)}function jle(e,t,n){n===void 0&&(n=oa);var a=window.getComputedStyle(t),s=t.getBoundingClientRect(),i=d7(s,a),o=Ty(i,n),l={client:i,tagName:t.tagName.toLowerCase(),display:a.display},c={x:i.marginBox.width,y:i.marginBox.height},d={descriptor:e,placeholder:l,displaceBy:c,client:i,page:o};return d}function wle(e){var t=L4("draggable"),n=e.descriptor,a=e.registry,s=e.getDraggableRef,i=e.canDragInteractiveElements,o=e.shouldRespectForcePress,l=e.isEnabled,c=hr(function(){return{canDragInteractiveElements:i,shouldRespectForcePress:o,isEnabled:l}},[i,l,o]),d=Pt(function(h){var x=s();return x||it(!1),jle(n,x,h)},[n,s]),f=hr(function(){return{uniqueId:t,descriptor:n,options:c,getDimension:d}},[n,d,c,t]),u=w.useRef(f),m=w.useRef(!0);Ls(function(){return a.draggable.register(u.current),function(){return a.draggable.unregister(u.current)}},[a.draggable]),Ls(function(){if(m.current){m.current=!1;return}var h=u.current;u.current=f,a.draggable.update(f,h)},[f,a.draggable])}function Nle(e){e.preventDefault()}function Sle(e){var t=w.useRef(null),n=Pt(function(I){t.current=I},[]),a=Pt(function(){return t.current},[]),s=Ly(_1),i=s.contextId,o=s.dragHandleUsageInstructionsId,l=s.registry,c=Ly(F4),d=c.type,f=c.droppableId,u=hr(function(){return{id:e.draggableId,index:e.index,type:d,droppableId:f}},[e.draggableId,e.index,d,f]),m=e.children,h=e.draggableId,x=e.isEnabled,g=e.shouldRespectForcePress,p=e.canDragInteractiveElements,v=e.isClone,y=e.mapped,b=e.dropAnimationFinished;if(!v){var j=hr(function(){return{descriptor:u,registry:l,getDraggableRef:a,canDragInteractiveElements:p,shouldRespectForcePress:g,isEnabled:x}},[u,l,a,p,g,x]);wle(j)}var C=hr(function(){return x?{tabIndex:0,role:"button","aria-describedby":o,"data-rbd-drag-handle-draggable-id":h,"data-rbd-drag-handle-context-id":i,draggable:!1,onDragStart:Nle}:null},[i,o,h,x]),E=Pt(function(I){y.type==="DRAGGING"&&y.dropping&&I.propertyName==="transform"&&b()},[b,y]),S=hr(function(){var I=ble(y),D=y.type==="DRAGGING"&&y.dropping?E:null,T={innerRef:n,draggableProps:{"data-rbd-draggable-context-id":i,"data-rbd-draggable-id":h,style:I,onTransitionEnd:D},dragHandleProps:C};return T},[i,C,h,y,E,n]),N=hr(function(){return{draggableId:u.id,type:u.type,source:{index:u.index,droppableId:u.droppableId}}},[u.droppableId,u.id,u.index,u.type]);return m(S,y.snapshot,N)}var n8=function(e,t){return e===t},a8=function(e){var t=e.combine,n=e.destination;return n?n.droppableId:t?t.droppableId:null},Cle=function(t){return t.combine?t.combine.draggableId:null},Ale=function(t){return t.at&&t.at.type==="COMBINE"?t.at.combine.draggableId:null};function Ele(){var e=ia(function(s,i){return{x:s,y:i}}),t=ia(function(s,i,o,l,c){return{isDragging:!0,isClone:i,isDropAnimating:!!c,dropAnimation:c,mode:s,draggingOver:o,combineWith:l,combineTargetFor:null}}),n=ia(function(s,i,o,l,c,d,f){return{mapped:{type:"DRAGGING",dropping:null,draggingOver:c,combineWith:d,mode:i,offset:s,dimension:o,forceShouldAnimate:f,snapshot:t(i,l,c,d,null)}}}),a=function(i,o){if(i.isDragging){if(i.critical.draggable.id!==o.draggableId)return null;var l=i.current.client.offset,c=i.dimensions.draggables[o.draggableId],d=_s(i.impact),f=Ale(i.impact),u=i.forceShouldAnimate;return n(e(l.x,l.y),i.movementMode,c,o.isClone,d,f,u)}if(i.phase==="DROP_ANIMATING"){var m=i.completed;if(m.result.draggableId!==o.draggableId)return null;var h=o.isClone,x=i.dimensions.draggables[o.draggableId],g=m.result,p=g.mode,v=a8(g),y=Cle(g),b=i.dropDuration,j={duration:b,curve:P4.drop,moveTo:i.newHomeClientOffset,opacity:y?mv.opacity.drop:null,scale:y?mv.scale.drop:null};return{mapped:{type:"DRAGGING",offset:i.newHomeClientOffset,dimension:x,dropping:j,draggingOver:v,combineWith:y,mode:p,forceShouldAnimate:null,snapshot:t(p,h,v,y,j)}}}return null};return a}function s8(e){return{isDragging:!1,isDropAnimating:!1,isClone:!1,dropAnimation:null,mode:null,draggingOver:null,combineTargetFor:e,combineWith:null}}var Ple={mapped:{type:"SECONDARY",offset:oa,combineTargetFor:null,shouldAnimateDisplacement:!0,snapshot:s8(null)}};function Tle(){var e=ia(function(o,l){return{x:o,y:l}}),t=ia(s8),n=ia(function(o,l,c){return l===void 0&&(l=null),{mapped:{type:"SECONDARY",offset:o,combineTargetFor:l,shouldAnimateDisplacement:c,snapshot:t(l)}}}),a=function(l){return l?n(oa,l,!0):null},s=function(l,c,d,f){var u=d.displaced.visible[l],m=!!(f.inVirtualList&&f.effected[l]),h=I1(d),x=h&&h.draggableId===l?c:null;if(!u){if(!m)return a(x);if(d.displaced.invisible[l])return null;var g=Hm(f.displacedBy.point),p=e(g.x,g.y);return n(p,x,!0)}if(m)return a(x);var v=d.displacedBy.point,y=e(v.x,v.y);return n(y,x,u.shouldAnimate)},i=function(l,c){if(l.isDragging)return l.critical.draggable.id===c.draggableId?null:s(c.draggableId,l.critical.draggable.id,l.impact,l.afterCritical);if(l.phase==="DROP_ANIMATING"){var d=l.completed;return d.result.draggableId===c.draggableId?null:s(c.draggableId,d.result.draggableId,d.impact,d.afterCritical)}return null};return i}var Ile=function(){var t=Ele(),n=Tle(),a=function(i,o){return t(i,o)||n(i,o)||Ple};return a},Dle={dropAnimationFinished:M7},kle=l7(Ile,Dle,null,{context:_4,pure:!0,areStatePropsEqual:n8})(Sle);function i8(e){var t=Ly(F4),n=t.isUsingCloneFor;return n===e.draggableId&&!e.isClone?null:pe.createElement(kle,e)}function Ole(e){var t=typeof e.isDragDisabled=="boolean"?!e.isDragDisabled:!0,n=!!e.disableInteractiveElementBlocking,a=!!e.shouldRespectForcePress;return pe.createElement(i8,at({},e,{isClone:!1,isEnabled:t,canDragInteractiveElements:n,shouldRespectForcePress:a}))}function _le(e){var t=w.useContext(_1);t||it(!1);var n=t.contextId,a=t.isMovementAllowed,s=w.useRef(null),i=w.useRef(null),o=e.children,l=e.droppableId,c=e.type,d=e.mode,f=e.direction,u=e.ignoreContainerClipping,m=e.isDropDisabled,h=e.isCombineEnabled,x=e.snapshot,g=e.useClone,p=e.updateViewportMaxScroll,v=e.getContainerForClone,y=Pt(function(){return s.current},[]),b=Pt(function(T){s.current=T},[]);Pt(function(){return i.current},[]);var j=Pt(function(T){i.current=T},[]),C=Pt(function(){a()&&p({maxScroll:V7()})},[a,p]);cle({droppableId:l,type:c,mode:d,direction:f,isDropDisabled:m,isCombineEnabled:h,ignoreContainerClipping:u,getDroppableRef:y});var E=pe.createElement(hle,{on:e.placeholder,shouldAnimate:e.shouldAnimatePlaceholder},function(T){var A=T.onClose,_=T.data,k=T.animate;return pe.createElement(mle,{placeholder:_,onClose:A,innerRef:j,animate:k,contextId:n,onTransitionEnd:C})}),S=hr(function(){return{innerRef:b,placeholder:E,droppableProps:{"data-rbd-droppable-id":l,"data-rbd-droppable-context-id":n}}},[n,l,E,b]),N=g?g.dragging.draggableId:null,I=hr(function(){return{droppableId:l,type:c,isUsingCloneFor:N}},[l,N,c]);function D(){if(!g)return null;var T=g.dragging,A=g.render,_=pe.createElement(i8,{draggableId:T.draggableId,index:T.source.index,isClone:!0,isEnabled:!0,shouldRespectForcePress:!1,canDragInteractiveElements:!0},function(k,L){return A(k,L,T)});return AA.createPortal(_,v())}return pe.createElement(F4.Provider,{value:I},o(S,x),D())}var A2=function(t,n){return t===n.droppable.type},LI=function(t,n){return n.draggables[t.draggable.id]},Lle=function(){var t={placeholder:null,shouldAnimatePlaceholder:!0,snapshot:{isDraggingOver:!1,draggingOverWith:null,draggingFromThisWith:null,isUsingPlaceholder:!1},useClone:null},n=at({},t,{shouldAnimatePlaceholder:!1}),a=ia(function(o){return{draggableId:o.id,type:o.type,source:{index:o.index,droppableId:o.droppableId}}}),s=ia(function(o,l,c,d,f,u){var m=f.descriptor.id,h=f.descriptor.droppableId===o;if(h){var x=u?{render:u,dragging:a(f.descriptor)}:null,g={isDraggingOver:c,draggingOverWith:c?m:null,draggingFromThisWith:m,isUsingPlaceholder:!0};return{placeholder:f.placeholder,shouldAnimatePlaceholder:!1,snapshot:g,useClone:x}}if(!l)return n;if(!d)return t;var p={isDraggingOver:c,draggingOverWith:m,draggingFromThisWith:null,isUsingPlaceholder:!0};return{placeholder:f.placeholder,shouldAnimatePlaceholder:!0,snapshot:p,useClone:null}}),i=function(l,c){var d=c.droppableId,f=c.type,u=!c.isDropDisabled,m=c.renderClone;if(l.isDragging){var h=l.critical;if(!A2(f,h))return n;var x=LI(h,l.dimensions),g=_s(l.impact)===d;return s(d,u,g,g,x,m)}if(l.phase==="DROP_ANIMATING"){var p=l.completed;if(!A2(f,p.critical))return n;var v=LI(p.critical,l.dimensions);return s(d,u,a8(p.result)===d,_s(p.impact)===d,v,m)}if(l.phase==="IDLE"&&l.completed&&!l.shouldFlush){var y=l.completed;if(!A2(f,y.critical))return n;var b=_s(y.impact)===d,j=!!(y.impact.at&&y.impact.at.type==="COMBINE"),C=y.critical.droppable.id===d;return b?j?t:n:C?t:n}return n};return i},Rle={updateViewportMaxScroll:qse};function Fle(){return document.body||it(!1),document.body}var Mle={mode:"standard",type:"DEFAULT",direction:"vertical",isDropDisabled:!1,isCombineEnabled:!1,ignoreContainerClipping:!1,renderClone:null,getContainerForClone:Fle},o8=l7(Lle,Rle,null,{context:_4,pure:!0,areStatePropsEqual:n8})(_le);o8.defaultProps=Mle;const RI=[{stage:yt.PROSPECTING,name:"Prospecting",color:"bg-blue-500"},{stage:yt.QUALIFICATION,name:"Qualification",color:"bg-yellow-500"},{stage:yt.NEEDS_ANALYSIS,name:"Needs Analysis",color:"bg-orange-500"},{stage:yt.PROPOSAL,name:"Proposal",color:"bg-purple-500"},{stage:yt.NEGOTIATION,name:"Negotiation",color:"bg-indigo-500"},{stage:yt.CLOSED_WON,name:"Closed Won",color:"bg-green-500"},{stage:yt.CLOSED_LOST,name:"Closed Lost",color:"bg-red-500"}];function $le({deals:e,onDealStageChange:t,onDealClick:n}){const[a,s]=w.useState(null),i=h=>{switch(h){case Cr.ACTIVE:return"bg-blue-50 text-blue-700 border-blue-200";case Cr.WON:return"bg-green-50 text-green-700 border-green-200";case Cr.LOST:return"bg-red-50 text-red-700 border-red-200";case Cr.ON_HOLD:return"bg-yellow-50 text-yellow-700 border-yellow-200";case Cr.CANCELLED:return"bg-gray-50 text-gray-700 border-gray-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},o=h=>{switch(h){case"critical":return"bg-red-50 text-red-700 border-red-200";case"high":return"bg-orange-50 text-orange-700 border-orange-200";case"medium":return"bg-yellow-50 text-yellow-700 border-yellow-200";case"low":return"bg-green-50 text-green-700 border-green-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},l=h=>new Date(h.expectedCloseDate)<new Date&&h.status===Cr.ACTIVE,c=h=>{if(s(null),!h.destination||h.source.droppableId===h.destination.droppableId)return;const x=h.draggableId,g=h.destination.droppableId;t(x,g)},d=h=>{s(h.draggableId)},f=h=>e.filter(x=>x.stage===h),u=h=>f(h).reduce((x,g)=>x+g.value,0),m=h=>f(h).reduce((x,g)=>x+g.value*g.probability/100,0);return r.jsxs("div",{className:"space-y-6 pb-10",children:[r.jsx("div",{className:"grid gap-4 md:grid-cols-7",children:RI.map(h=>{const x=f(h.stage),g=u(h.stage),p=m(h.stage);return r.jsxs(fe,{className:"shadow-sm",children:[r.jsxs(we,{className:"pb-3",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("div",{className:He("w-3 h-3 rounded-full",h.color)}),r.jsx("span",{className:"text-xs text-muted-foreground",children:x.length})]}),r.jsx(Ne,{className:"text-sm font-medium",children:h.name})]}),r.jsx(me,{className:"pt-0",children:r.jsxs("div",{className:"space-y-1",children:[r.jsx("div",{className:"text-lg font-bold",children:De(g)}),r.jsxs("div",{className:"text-xs text-muted-foreground",children:["Weighted: ",De(p)]})]})})]},h.stage)})}),r.jsx(Xoe,{onDragEnd:c,onDragStart:d,children:r.jsx("div",{className:"grid gap-4 grid-cols-1 md:grid-cols-7 min-h-[600px]",children:RI.map(h=>r.jsx(o8,{droppableId:h.stage,children:(x,g)=>r.jsxs("div",{ref:x.innerRef,...x.droppableProps,className:He("space-y-3 p-3 rounded-lg border-2 border-dashed transition-colors min-h-[200px]",g.isDraggingOver?"border-primary bg-primary/5":"border-muted"),children:[r.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[r.jsx("div",{className:He("w-3 h-3 rounded-full",h.color)}),r.jsx("h3",{className:"font-semibold text-sm",children:h.name})]}),f(h.stage).map((p,v)=>r.jsx(Ole,{draggableId:p.id,index:v,children:(y,b)=>r.jsx(fe,{ref:y.innerRef,...y.draggableProps,...y.dragHandleProps,className:He("cursor-pointer transition-all hover:shadow-md",b.isDragging&&"rotate-3 shadow-lg",a===p.id&&"opacity-50"),onClick:()=>n(p),children:r.jsx(me,{className:"p-4",children:r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{children:[r.jsx("h4",{className:"font-semibold text-sm line-clamp-2",children:p.name}),r.jsx("p",{className:"text-xs text-muted-foreground truncate",children:p.customerName})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"font-bold text-primary",children:De(p.value)}),r.jsx(ze,{className:He("ri-badge-status text-xs",o(p.priority)),children:p.priority.toUpperCase()})]}),r.jsxs("div",{className:"flex items-center justify-between text-xs text-muted-foreground",children:[r.jsxs("div",{className:"flex items-center space-x-1",children:[r.jsx(Ot,{className:"h-3 w-3"}),r.jsxs("span",{children:[p.probability,"%"]})]}),r.jsxs("div",{className:"flex items-center space-x-1",children:[r.jsx(Mr,{className:"h-3 w-3 flex-shrink-0"}),r.jsx("span",{className:"truncate",children:new Date(p.expectedCloseDate).toLocaleDateString()})]})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx(ze,{className:He("ri-badge-status text-xs",i(p.status)),children:p.status.toUpperCase()}),l(p)&&r.jsxs("div",{className:"flex items-center space-x-1 text-red-500",children:[r.jsx(Ff,{className:"h-3 w-3 flex-shrink-0"}),r.jsx("span",{className:"text-xs",children:"Overdue"})]})]})]})})},p.id)},p.id)),x.placeholder]})},h.stage))})})]})}function Ble({metrics:e}){const t=n=>n>=80?"text-green-600":n>=60?"text-yellow-600":"text-red-600";return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[r.jsxs(fe,{className:"shadow-sm border-0 bg-gradient-to-br from-blue-50 to-blue-100/50",children:[r.jsxs(we,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(Ne,{className:"text-sm font-medium text-blue-900",children:"Total Pipeline"}),r.jsx(Mt,{className:"h-4 w-4 text-blue-600"})]}),r.jsxs(me,{children:[r.jsx("div",{className:"text-2xl font-bold text-blue-900",children:De(e.totalValue)}),r.jsxs("p",{className:"text-xs text-blue-600 flex items-center mt-1",children:[r.jsx(Yn,{className:"h-3 w-3 mr-1"}),e.totalDeals," active deals"]})]})]}),r.jsxs(fe,{className:"shadow-sm border-0 bg-gradient-to-br from-green-50 to-green-100/50",children:[r.jsxs(we,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(Ne,{className:"text-sm font-medium text-green-900",children:"Won Deals"}),r.jsx(Ot,{className:"h-4 w-4 text-green-600"})]}),r.jsxs(me,{children:[r.jsx("div",{className:"text-2xl font-bold text-green-900",children:De(e.wonValue)}),r.jsxs("p",{className:"text-xs text-green-600 flex items-center mt-1",children:[r.jsx(fs,{className:"h-3 w-3 mr-1"}),e.wonDeals," deals closed"]})]})]}),r.jsxs(fe,{className:"shadow-sm border-0 bg-gradient-to-br from-purple-50 to-purple-100/50",children:[r.jsxs(we,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(Ne,{className:"text-sm font-medium text-purple-900",children:"Win Rate"}),r.jsx(fs,{className:"h-4 w-4 text-purple-600"})]}),r.jsxs(me,{children:[r.jsxs("div",{className:"text-2xl font-bold text-purple-900",children:[e.winRate.toFixed(1),"%"]}),r.jsxs("p",{className:"text-xs text-purple-600 flex items-center mt-1",children:[r.jsx(Ot,{className:"h-3 w-3 mr-1"}),"Industry average: 27%"]})]})]}),r.jsxs(fe,{className:"shadow-sm border-0 bg-gradient-to-br from-orange-50 to-orange-100/50",children:[r.jsxs(we,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(Ne,{className:"text-sm font-medium text-orange-900",children:"Avg Deal Size"}),r.jsx(Mt,{className:"h-4 w-4 text-orange-600"})]}),r.jsxs(me,{children:[r.jsx("div",{className:"text-2xl font-bold text-orange-900",children:De(e.averageDealSize)}),r.jsxs("p",{className:"text-xs text-orange-600 flex items-center mt-1",children:[r.jsx(er,{className:"h-3 w-3 mr-1"}),e.averageSalesCycle.toFixed(0)," day cycle"]})]})]})]}),r.jsxs(fe,{className:"shadow-sm",children:[r.jsxs(we,{children:[r.jsx(Ne,{children:"Stage Conversion Rates"}),r.jsx(Ue,{children:"Conversion rates and average time spent in each stage"})]}),r.jsx(me,{children:r.jsx("div",{className:"space-y-6",children:e.conversionRates.map((n,a)=>r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsxs("span",{className:"text-sm font-medium capitalize",children:[n.fromStage.replace("_"," ")," → ",n.toStage.replace("_"," ")]}),r.jsxs("span",{className:`text-sm font-bold ${t(n.rate)}`,children:[n.rate.toFixed(1),"%"]})]}),r.jsxs("div",{className:"flex items-center space-x-2 text-xs text-muted-foreground",children:[r.jsx(er,{className:"h-3 w-3"}),r.jsxs("span",{children:[n.averageDuration,"h avg"]})]})]}),r.jsx(qd,{value:n.rate,className:"h-2"})]},`${n.fromStage}-${n.toStage}`))})})]}),r.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[r.jsxs(fe,{className:"shadow-sm",children:[r.jsxs(we,{children:[r.jsx(Ne,{children:"Pipeline Health"}),r.jsx(Ue,{children:"Key performance indicators"})]}),r.jsx(me,{children:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between p-3 bg-green-50 rounded-lg",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(Ot,{className:"h-4 w-4 text-green-600"}),r.jsx("span",{className:"text-sm font-medium text-green-900",children:"Win Rate"})]}),r.jsxs("span",{className:"text-lg font-bold text-green-600",children:[e.winRate.toFixed(1),"%"]})]}),r.jsxs("div",{className:"flex items-center justify-between p-3 bg-blue-50 rounded-lg",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(Mt,{className:"h-4 w-4 text-blue-600"}),r.jsx("span",{className:"text-sm font-medium text-blue-900",children:"Average Deal Size"})]}),r.jsx("span",{className:"text-lg font-bold text-blue-600",children:De(e.averageDealSize)})]}),r.jsxs("div",{className:"flex items-center justify-between p-3 bg-purple-50 rounded-lg",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(er,{className:"h-4 w-4 text-purple-600"}),r.jsx("span",{className:"text-sm font-medium text-purple-900",children:"Sales Cycle"})]}),r.jsxs("span",{className:"text-lg font-bold text-purple-600",children:[e.averageSalesCycle.toFixed(0)," days"]})]})]})})]}),r.jsxs(fe,{className:"shadow-sm",children:[r.jsxs(we,{children:[r.jsx(Ne,{children:"Deal Breakdown"}),r.jsx(Ue,{children:"Current pipeline composition"})]}),r.jsx(me,{children:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm text-muted-foreground",children:"Total Deals"}),r.jsx("span",{className:"font-bold",children:e.totalDeals})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm text-muted-foreground",children:"Won Deals"}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("span",{className:"font-bold text-green-600",children:e.wonDeals}),r.jsxs("span",{className:"text-xs text-green-600",children:["(",De(e.wonValue),")"]})]})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm text-muted-foreground",children:"Lost Deals"}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("span",{className:"font-bold text-red-600",children:e.lostDeals}),r.jsxs("span",{className:"text-xs text-red-600",children:["(",De(e.lostValue),")"]})]})]}),r.jsx("div",{className:"pt-2 border-t",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm font-medium",children:"Active Pipeline"}),r.jsx("span",{className:"font-bold text-primary",children:De(e.totalValue-e.wonValue-e.lostValue)})]})})]})})]})]})]})}const zle=["Best Price","Superior Product Features","Excellent Service","Strong Relationship","Competitive Financing","Quick Delivery","Brand Reputation","Referral/Recommendation"],Ule=["Price Too High","Lost to Competitor","Budget Constraints","Timing Issues","Product Limitations","Service Concerns","Decision Delayed","Requirements Changed"],Vle=["Camping World","Lazydays","General RV","PPL Motor Homes","Local Dealer","Private Seller","Other"];function qle({deals:e,winLossReports:t,onCreateReport:n}){const[a,s]=w.useState(!1),[i,o]=w.useState(null),[l,c]=w.useState({outcome:"won",primaryReason:"",secondaryReasons:[],competitorWon:"",feedback:"",lessonsLearned:[],actionItems:[]}),d=e.filter(E=>E.status==="won"||E.status==="lost"),f=e.filter(E=>E.status==="won"),u=e.filter(E=>E.status==="lost"),m=d.length>0?f.length/d.length*100:0,h=f.length>0?f.reduce((E,S)=>E+S.value,0)/f.length:0,x=u.length>0?u.reduce((E,S)=>E+S.value,0)/u.length:0,g=E=>{o(E),c({...l,outcome:E.status==="won"?"won":"lost"}),s(!0)},p=()=>{i&&(n(i.id,l.outcome,l),s(!1),o(null),c({outcome:"won",primaryReason:"",secondaryReasons:[],competitorWon:"",feedback:"",lessonsLearned:[],actionItems:[]}))},v=(E,S,N)=>{S.trim()&&!E.includes(S.trim())&&N([...E,S.trim()])},y=(E,S,N)=>{N(E.filter((I,D)=>D!==S))},b=E=>{const S=t.filter(I=>I.outcome===E),N={};return S.forEach(I=>{N[I.primaryReason]=(N[I.primaryReason]||0)+1}),Object.entries(N).sort(([,I],[,D])=>D-I).slice(0,5).map(([I,D])=>({reason:I,count:D,percentage:S.length>0?D/S.length*100:0}))},j=b("won"),C=b("lost");return r.jsxs("div",{className:"space-y-6",children:[a&&i&&r.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:r.jsxs(fe,{className:"w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[r.jsx(we,{children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx(Ne,{children:"Win/Loss Report"}),r.jsxs(Ue,{children:[i.name," - ",De(i.value)]})]}),r.jsx(J,{variant:"ghost",size:"sm",onClick:()=>s(!1),children:r.jsx($t,{className:"h-4 w-4"})})]})}),r.jsxs(me,{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx(Z,{children:"Outcome"}),r.jsxs($e,{value:l.outcome,onValueChange:E=>c(S=>({...S,outcome:E})),children:[r.jsx(Fe,{children:r.jsx(Be,{})}),r.jsxs(Me,{children:[r.jsx(K,{value:"won",children:"Won"}),r.jsx(K,{value:"lost",children:"Lost"})]})]})]}),r.jsxs("div",{children:[r.jsx(Z,{children:"Primary Reason"}),r.jsxs($e,{value:l.primaryReason,onValueChange:E=>c(S=>({...S,primaryReason:E})),children:[r.jsx(Fe,{children:r.jsx(Be,{placeholder:"Select primary reason"})}),r.jsx(Me,{children:(l.outcome==="won"?zle:Ule).map(E=>r.jsx(K,{value:E,children:E},E))})]})]}),l.outcome==="lost"&&r.jsxs("div",{children:[r.jsx(Z,{children:"Competitor Won"}),r.jsxs($e,{value:l.competitorWon,onValueChange:E=>c(S=>({...S,competitorWon:E})),children:[r.jsx(Fe,{children:r.jsx(Be,{placeholder:"Select competitor"})}),r.jsx(Me,{children:Vle.map(E=>r.jsx(K,{value:E,children:E},E))})]})]}),r.jsxs("div",{children:[r.jsx(Z,{children:"Customer Feedback"}),r.jsx(Xt,{value:l.feedback,onChange:E=>c(S=>({...S,feedback:E.target.value})),placeholder:"What did the customer say about their decision?",rows:3})]}),r.jsxs("div",{children:[r.jsx(Z,{children:"Lessons Learned"}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex space-x-2",children:[r.jsx(je,{placeholder:"Add a lesson learned",onKeyDown:E=>{if(E.key==="Enter"){E.preventDefault();const S=E.currentTarget;v(l.lessonsLearned,S.value,N=>c(I=>({...I,lessonsLearned:N}))),S.value=""}}}),r.jsx(J,{type:"button",variant:"outline",onClick:E=>{const S=E.currentTarget.previousElementSibling;v(l.lessonsLearned,S.value,N=>c(I=>({...I,lessonsLearned:N}))),S.value=""},children:r.jsx(Nt,{className:"h-4 w-4"})})]}),r.jsx("div",{className:"flex flex-wrap gap-2",children:l.lessonsLearned.map((E,S)=>r.jsxs(ze,{variant:"secondary",className:"flex items-center gap-1",children:[E,r.jsx($t,{className:"h-3 w-3 cursor-pointer",onClick:()=>y(l.lessonsLearned,S,N=>c(I=>({...I,lessonsLearned:N})))})]},S))})]})]}),r.jsxs("div",{children:[r.jsx(Z,{children:"Action Items"}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex space-x-2",children:[r.jsx(je,{placeholder:"Add an action item",onKeyDown:E=>{if(E.key==="Enter"){E.preventDefault();const S=E.currentTarget;v(l.actionItems,S.value,N=>c(I=>({...I,actionItems:N}))),S.value=""}}}),r.jsx(J,{type:"button",variant:"outline",onClick:E=>{const S=E.currentTarget.previousElementSibling;v(l.actionItems,S.value,N=>c(I=>({...I,actionItems:N}))),S.value=""},children:r.jsx(Nt,{className:"h-4 w-4"})})]}),r.jsx("div",{className:"flex flex-wrap gap-2",children:l.actionItems.map((E,S)=>r.jsxs(ze,{variant:"secondary",className:"flex items-center gap-1",children:[E,r.jsx($t,{className:"h-3 w-3 cursor-pointer",onClick:()=>y(l.actionItems,S,N=>c(I=>({...I,actionItems:N})))})]},S))})]})]}),r.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t",children:[r.jsx(J,{variant:"outline",onClick:()=>s(!1),children:"Cancel"}),r.jsxs(J,{onClick:p,children:[r.jsx(Pr,{className:"h-4 w-4 mr-2"}),"Save Report"]})]})]})]})}),r.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[r.jsxs(fe,{className:"shadow-sm border-0 bg-gradient-to-br from-blue-50 to-blue-100/50",children:[r.jsxs(we,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(Ne,{className:"text-sm font-medium text-blue-900",children:"Win Rate"}),r.jsx(fs,{className:"h-4 w-4 text-blue-600"})]}),r.jsxs(me,{children:[r.jsxs("div",{className:"text-2xl font-bold text-blue-900",children:[m.toFixed(1),"%"]}),r.jsxs("p",{className:"text-xs text-blue-600 flex items-center mt-1",children:[r.jsx(Yn,{className:"h-3 w-3 mr-1"}),d.length," closed deals"]})]})]}),r.jsxs(fe,{className:"shadow-sm border-0 bg-gradient-to-br from-green-50 to-green-100/50",children:[r.jsxs(we,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(Ne,{className:"text-sm font-medium text-green-900",children:"Won Deals"}),r.jsx(Ot,{className:"h-4 w-4 text-green-600"})]}),r.jsxs(me,{children:[r.jsx("div",{className:"text-2xl font-bold text-green-900",children:f.length}),r.jsxs("p",{className:"text-xs text-green-600 flex items-center mt-1",children:[r.jsx(Ot,{className:"h-3 w-3 mr-1"}),De(h)," avg"]})]})]}),r.jsxs(fe,{className:"shadow-sm border-0 bg-gradient-to-br from-red-50 to-red-100/50",children:[r.jsxs(we,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(Ne,{className:"text-sm font-medium text-red-900",children:"Lost Deals"}),r.jsx(Mf,{className:"h-4 w-4 text-red-600"})]}),r.jsxs(me,{children:[r.jsx("div",{className:"text-2xl font-bold text-red-900",children:u.length}),r.jsxs("p",{className:"text-xs text-red-600 flex items-center mt-1",children:[r.jsx(Mf,{className:"h-3 w-3 mr-1"}),De(x)," avg"]})]})]}),r.jsxs(fe,{className:"shadow-sm border-0 bg-gradient-to-br from-purple-50 to-purple-100/50",children:[r.jsxs(we,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(Ne,{className:"text-sm font-medium text-purple-900",children:"Reports"}),r.jsx(Yn,{className:"h-4 w-4 text-purple-600"})]}),r.jsxs(me,{children:[r.jsx("div",{className:"text-2xl font-bold text-purple-900",children:t.length}),r.jsxs("p",{className:"text-xs text-purple-600 flex items-center mt-1",children:[r.jsx(Yn,{className:"h-3 w-3 mr-1"}),"Completed reports"]})]})]})]}),r.jsxs(lr,{defaultValue:"analysis",className:"space-y-6",children:[r.jsxs(or,{children:[r.jsx(Ke,{value:"analysis",children:"Analysis"}),r.jsx(Ke,{value:"closed-deals",children:"Closed Deals"}),r.jsx(Ke,{value:"reports",children:"Reports"})]}),r.jsxs(Je,{value:"analysis",className:"space-y-6",children:[r.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[r.jsxs(fe,{className:"shadow-sm",children:[r.jsxs(we,{children:[r.jsxs(Ne,{className:"flex items-center",children:[r.jsx(Ot,{className:"h-5 w-5 mr-2 text-green-500"}),"Win Reasons"]}),r.jsx(Ue,{children:"Top reasons for winning deals"})]}),r.jsx(me,{children:r.jsx("div",{className:"space-y-4",children:j.length>0?j.map((E,S)=>r.jsxs("div",{className:"space-y-1",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm font-medium",children:E.reason}),r.jsxs("span",{className:"text-sm text-green-600",children:[E.percentage.toFixed(0),"%"]})]}),r.jsx(qd,{value:E.percentage,className:"h-2"})]},S)):r.jsx("div",{className:"text-center py-6 text-muted-foreground",children:"No win reports available"})})})]}),r.jsxs(fe,{className:"shadow-sm",children:[r.jsxs(we,{children:[r.jsxs(Ne,{className:"flex items-center",children:[r.jsx(Mf,{className:"h-5 w-5 mr-2 text-red-500"}),"Loss Reasons"]}),r.jsx(Ue,{children:"Top reasons for losing deals"})]}),r.jsx(me,{children:r.jsx("div",{className:"space-y-4",children:C.length>0?C.map((E,S)=>r.jsxs("div",{className:"space-y-1",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm font-medium",children:E.reason}),r.jsxs("span",{className:"text-sm text-red-600",children:[E.percentage.toFixed(0),"%"]})]}),r.jsx(qd,{value:E.percentage,className:"h-2"})]},S)):r.jsx("div",{className:"text-center py-6 text-muted-foreground",children:"No loss reports available"})})})]})]}),r.jsxs(fe,{className:"shadow-sm",children:[r.jsxs(we,{children:[r.jsx(Ne,{children:"Lessons Learned"}),r.jsx(Ue,{children:"Key insights from win/loss reports"})]}),r.jsx(me,{children:t.length>0?r.jsx("div",{className:"space-y-4",children:t.slice(0,5).map((E,S)=>r.jsxs("div",{className:"p-3 rounded-lg bg-muted/30",children:[r.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[E.outcome==="won"?r.jsx(ze,{className:"bg-green-50 text-green-700 border-green-200",children:"WON"}):r.jsx(ze,{className:"bg-red-50 text-red-700 border-red-200",children:"LOST"}),r.jsx("span",{className:"text-sm font-medium",children:E.primaryReason})]}),r.jsx("div",{className:"space-y-2",children:E.lessonsLearned.map((N,I)=>r.jsxs("p",{className:"text-sm text-muted-foreground",children:["• ",N]},I))})]},S))}):r.jsx("div",{className:"text-center py-6 text-muted-foreground",children:"No lessons learned available"})})]})]}),r.jsx(Je,{value:"closed-deals",className:"space-y-6",children:r.jsxs(fe,{className:"shadow-sm",children:[r.jsxs(we,{children:[r.jsx(Ne,{children:"Recently Closed Deals"}),r.jsx(Ue,{children:"Deals that have been won or lost"})]}),r.jsx(me,{children:r.jsx("div",{className:"space-y-4",children:d.length>0?d.map(E=>r.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-accent/50 transition-colors",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[r.jsx("h3",{className:"font-semibold",children:E.name}),r.jsx(ze,{className:E.status==="won"?"bg-green-50 text-green-700 border-green-200":"bg-red-50 text-red-700 border-red-200",children:E.status.toUpperCase()})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm text-muted-foreground",children:[r.jsxs("div",{children:[r.jsx("span",{className:"font-medium",children:"Customer:"})," ",E.customerName]}),r.jsxs("div",{children:[r.jsx("span",{className:"font-medium",children:"Value:"})," ",De(E.value)]}),r.jsxs("div",{children:[r.jsx("span",{className:"font-medium",children:"Closed:"})," ",E.actualCloseDate?lt(E.actualCloseDate):"N/A"]}),r.jsxs("div",{children:[r.jsx("span",{className:"font-medium",children:"Rep:"})," ",E.assignedTo]})]})]}),r.jsxs(J,{variant:"outline",size:"sm",onClick:()=>g(E),className:"shadow-sm",children:[r.jsx(Nt,{className:"h-3 w-3 mr-1"}),"Report"]})]},E.id)):r.jsx("div",{className:"text-center py-6 text-muted-foreground",children:"No closed deals available"})})})]})}),r.jsx(Je,{value:"reports",className:"space-y-6",children:r.jsxs(fe,{className:"shadow-sm",children:[r.jsxs(we,{children:[r.jsx(Ne,{children:"Win/Loss Reports"}),r.jsx(Ue,{children:"Detailed reports on won and lost deals"})]}),r.jsx(me,{children:r.jsx("div",{className:"space-y-4",children:t.length>0?t.map(E=>{const S=e.find(N=>N.id===E.dealId);return r.jsxs("div",{className:"p-4 border rounded-lg hover:bg-accent/50 transition-colors",children:[r.jsxs("div",{className:"flex items-center justify-between mb-3",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(ze,{className:E.outcome==="won"?"bg-green-50 text-green-700 border-green-200":"bg-red-50 text-red-700 border-red-200",children:E.outcome.toUpperCase()}),r.jsx("h3",{className:"font-semibold",children:(S==null?void 0:S.name)||"Unknown Deal"})]}),r.jsx("span",{className:"text-sm text-muted-foreground",children:lt(E.reportedAt)})]}),r.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[r.jsxs("div",{children:[r.jsx("h4",{className:"text-sm font-medium mb-2",children:"Reasons"}),r.jsxs("div",{className:"space-y-1",children:[r.jsxs("p",{className:"text-sm",children:[r.jsx("span",{className:"font-medium",children:"Primary:"})," ",E.primaryReason]}),E.secondaryReasons.length>0&&r.jsxs("p",{className:"text-sm",children:[r.jsx("span",{className:"font-medium",children:"Secondary:"})," ",E.secondaryReasons.join(", ")]}),E.competitorWon&&r.jsxs("p",{className:"text-sm",children:[r.jsx("span",{className:"font-medium",children:"Competitor:"})," ",E.competitorWon]})]})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"text-sm font-medium mb-2",children:"Feedback"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:E.feedback})]})]}),r.jsxs("div",{className:"mt-4 pt-4 border-t",children:[r.jsx("h4",{className:"text-sm font-medium mb-2",children:"Lessons & Action Items"}),r.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[r.jsxs("div",{children:[r.jsx("h5",{className:"text-xs font-medium text-muted-foreground mb-1",children:"Lessons Learned:"}),r.jsx("ul",{className:"text-sm space-y-1",children:E.lessonsLearned.map((N,I)=>r.jsxs("li",{children:["• ",N]},I))})]}),r.jsxs("div",{children:[r.jsx("h5",{className:"text-xs font-medium text-muted-foreground mb-1",children:"Action Items:"}),r.jsx("ul",{className:"text-sm space-y-1",children:E.actionItems.map((N,I)=>r.jsxs("li",{children:["• ",N]},I))})]})]})]})]},E.id)}):r.jsx("div",{className:"text-center py-6 text-muted-foreground",children:"No win/loss reports available"})})})]})})]})]})}function Wle({deal:e,onClose:t,onEdit:n}){const a=l=>{switch(l){case Cr.ACTIVE:return"bg-blue-50 text-blue-700 border-blue-200";case Cr.WON:return"bg-green-50 text-green-700 border-green-200";case Cr.LOST:return"bg-red-50 text-red-700 border-red-200";case Cr.ON_HOLD:return"bg-yellow-50 text-yellow-700 border-yellow-200";case Cr.CANCELLED:return"bg-gray-50 text-gray-700 border-gray-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},s=l=>{switch(l){case Ao.CRITICAL:return"bg-red-50 text-red-700 border-red-200";case Ao.HIGH:return"bg-orange-50 text-orange-700 border-orange-200";case Ao.MEDIUM:return"bg-yellow-50 text-yellow-700 border-yellow-200";case Ao.LOW:return"bg-green-50 text-green-700 border-green-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},i=l=>{switch(l){case yt.PROSPECTING:return"bg-blue-50 text-blue-700 border-blue-200";case yt.QUALIFICATION:return"bg-yellow-50 text-yellow-700 border-yellow-200";case yt.NEEDS_ANALYSIS:return"bg-orange-50 text-orange-700 border-orange-200";case yt.PROPOSAL:return"bg-purple-50 text-purple-700 border-purple-200";case yt.NEGOTIATION:return"bg-indigo-50 text-indigo-700 border-indigo-200";case yt.CLOSED_WON:return"bg-green-50 text-green-700 border-green-200";case yt.CLOSED_LOST:return"bg-red-50 text-red-700 border-red-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},o=l=>new Date(l.expectedCloseDate)<new Date&&l.status===Cr.ACTIVE;return r.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:r.jsxs(fe,{className:"w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[r.jsx(we,{children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx(Ne,{className:"text-xl",children:e.name}),r.jsx(Ue,{children:"Deal details and information"})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsxs(J,{onClick:()=>n(e),size:"sm",children:[r.jsx(Br,{className:"h-4 w-4 mr-2"}),"Edit Deal"]}),r.jsx(J,{variant:"ghost",size:"sm",onClick:t,children:r.jsx($t,{className:"h-4 w-4"})})]})]})}),r.jsxs(me,{className:"space-y-6",children:[r.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[r.jsx(ze,{className:He("ri-badge-status",a(e.status)),children:e.status.toUpperCase()}),r.jsx(ze,{className:He("ri-badge-status",i(e.stage)),children:e.stage.replace("_"," ").toUpperCase()}),r.jsx(ze,{className:He("ri-badge-status",s(e.priority)),children:e.priority.toUpperCase()}),o(e)&&r.jsxs(ze,{className:"bg-red-50 text-red-700 border-red-200",children:[r.jsx(Ts,{className:"h-3 w-3 mr-1"}),"OVERDUE"]}),e.requiresApproval&&r.jsx(ze,{className:"bg-orange-50 text-orange-700 border-orange-200",children:"REQUIRES APPROVAL"})]}),r.jsxs(lr,{defaultValue:"overview",className:"space-y-4",children:[r.jsxs(or,{children:[r.jsx(Ke,{value:"overview",children:"Overview"}),r.jsx(Ke,{value:"products",children:"Products"}),r.jsx(Ke,{value:"history",children:"History"})]}),r.jsxs(Je,{value:"overview",className:"space-y-4",children:[r.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Customer"}),r.jsx("p",{className:"font-medium",children:e.customerName})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Value"}),r.jsx("p",{className:"font-bold text-primary text-lg",children:De(e.value)})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Probability"}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(fs,{className:"h-4 w-4 text-blue-500"}),r.jsxs("p",{className:"font-medium",children:[e.probability,"%"]})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Expected Close"}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(Mr,{className:"h-4 w-4 text-purple-500"}),r.jsx("p",{className:"font-medium",children:lt(e.expectedCloseDate)})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Assigned To"}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(wa,{className:"h-4 w-4 text-green-500"}),r.jsx("p",{className:"font-medium",children:e.assignedTo||"Unassigned"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Territory"}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(Cl,{className:"h-4 w-4 text-orange-500"}),r.jsx("p",{className:"font-medium",children:e.territoryId||"No Territory"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Created"}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(er,{className:"h-4 w-4 text-blue-500"}),r.jsx("p",{className:"font-medium",children:lt(e.createdAt)})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Last Updated"}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(er,{className:"h-4 w-4 text-blue-500"}),r.jsx("p",{className:"font-medium",children:lt(e.updatedAt)})]})]})]}),e.notes&&r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Notes"}),r.jsx("div",{className:"mt-1 p-3 bg-muted/30 rounded-md",children:r.jsx("p",{className:"text-sm whitespace-pre-wrap",children:e.notes})})]}),Object.keys(e.customFields||{}).length>0&&r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Custom Fields"}),r.jsx("div",{className:"mt-1 grid gap-2 md:grid-cols-2",children:Object.entries(e.customFields||{}).map(([l,c])=>r.jsxs("div",{className:"p-2 bg-muted/30 rounded-md",children:[r.jsxs("span",{className:"text-sm font-medium capitalize",children:[l.replace(/([A-Z])/g," $1").trim(),": "]}),r.jsx("span",{className:"text-sm",children:c==null?void 0:c.toString()})]},l))})]})]}),r.jsxs(Je,{value:"products",className:"space-y-4",children:[r.jsx("h3",{className:"text-lg font-semibold",children:"Products & Services"}),e.products&&e.products.length>0?r.jsxs("div",{className:"space-y-3",children:[e.products.map(l=>r.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(Ra,{className:"h-4 w-4 text-blue-500"}),r.jsx("span",{className:"font-medium",children:l.productName})]}),r.jsxs("div",{className:"flex items-center space-x-4 mt-1 text-sm text-muted-foreground",children:[r.jsxs("span",{children:["Quantity: ",l.quantity]}),r.jsxs("span",{children:["Unit Price: ",De(l.unitPrice)]}),l.discount>0&&r.jsxs("span",{className:"text-green-600",children:["Discount: ",De(l.discount)]})]})]}),r.jsx("div",{className:"text-right",children:r.jsx("div",{className:"font-bold",children:De(l.total)})})]},l.id)),r.jsx("div",{className:"flex justify-end p-3 bg-muted/30 rounded-lg",children:r.jsxs("div",{className:"text-right",children:[r.jsx("span",{className:"text-sm font-medium",children:"Total Deal Value: "}),r.jsx("span",{className:"text-lg font-bold text-primary",children:De(e.value)})]})})]}):r.jsxs("div",{className:"text-center py-8 text-muted-foreground border-2 border-dashed rounded-lg",children:[r.jsx(Ra,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),r.jsx("p",{children:"No products added to this deal"}),r.jsx("p",{className:"text-sm",children:"Edit the deal to add products"})]})]}),r.jsxs(Je,{value:"history",className:"space-y-4",children:[r.jsx("h3",{className:"text-lg font-semibold",children:"Stage History"}),e.stageHistory&&e.stageHistory.length>0?r.jsx("div",{className:"space-y-3",children:e.stageHistory.map((l,c)=>r.jsxs("div",{className:"relative",children:[c<e.stageHistory.length-1&&r.jsx("div",{className:"absolute left-4 top-8 bottom-0 w-px bg-border"}),r.jsxs("div",{className:"flex items-start space-x-3",children:[r.jsx("div",{className:"flex-shrink-0 w-8 h-8 rounded-full bg-primary flex items-center justify-center text-primary-foreground",children:c+1}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[r.jsx("span",{className:"font-medium capitalize",children:l.fromStage?`${l.fromStage.replace("_"," ")} → ${l.toStage.replace("_"," ")}`:`Started at ${l.toStage.replace("_"," ")}`}),r.jsx("span",{className:"text-xs text-muted-foreground",children:lt(l.changedAt)})]}),l.duration!==void 0&&r.jsxs("div",{className:"text-sm text-muted-foreground",children:["Duration: ",l.duration," hours"]}),l.notes&&r.jsx("div",{className:"mt-1 text-sm bg-muted/30 p-2 rounded-md",children:l.notes})]})]})]},c))}):r.jsxs("div",{className:"text-center py-8 text-muted-foreground border-2 border-dashed rounded-lg",children:[r.jsx(er,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),r.jsx("p",{children:"No stage history available"})]})]})]}),r.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t",children:[r.jsx(J,{variant:"outline",onClick:t,children:"Close"}),r.jsxs(J,{onClick:()=>n(e),children:[r.jsx(Br,{className:"h-4 w-4 mr-2"}),"Edit Deal"]})]})]})]})})}function Hle({territories:e,salesReps:t,deals:n,onCreateTerritory:a,onUpdateTerritory:s,onDeleteTerritory:i}){var E,S,N;const[o,l]=w.useState(!1),[c,d]=w.useState(null),[f,u]=w.useState({name:"",type:nc.GEOGRAPHIC,description:"",assignedTo:[],rules:[],isActive:!0}),[m,h]=w.useState({field:"",operator:"equals",value:"",priority:1}),x=()=>{d(null),u({name:"",type:nc.GEOGRAPHIC,description:"",assignedTo:[],rules:[],isActive:!0}),l(!0)},g=I=>{d(I),u({name:I.name,type:I.type,description:I.description,assignedTo:[...I.assignedTo],rules:[...I.rules],isActive:I.isActive}),l(!0)},p=()=>{f.name&&(c?s(c.id,f):a(f),l(!1),d(null),u({name:"",type:nc.GEOGRAPHIC,description:"",assignedTo:[],rules:[],isActive:!0}))},v=()=>{if(!m.field||!m.operator)return;const I={id:Math.random().toString(36).substr(2,9),field:m.field,operator:m.operator,value:m.value,priority:m.priority||1};u(D=>({...D,rules:[...D.rules||[],I]})),h({field:"",operator:"equals",value:"",priority:1})},y=I=>{u(D=>{var T;return{...D,rules:((T=D.rules)==null?void 0:T.filter(A=>A.id!==I))||[]}})},b=(I,D)=>{u(D?T=>({...T,assignedTo:[...T.assignedTo||[],I]}):T=>{var A;return{...T,assignedTo:((A=T.assignedTo)==null?void 0:A.filter(_=>_!==I))||[]}})},j=I=>n.filter(T=>T.territoryId===I).length,C=I=>{const D=e.find(T=>T.id===I);return D?t.filter(T=>D.assignedTo.includes(T.id)):[]};return r.jsxs("div",{className:"space-y-6",children:[o&&r.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:r.jsxs(fe,{className:"w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[r.jsx(we,{children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx(Ne,{children:c?"Edit Territory":"Create Territory"}),r.jsx(Ue,{children:c?"Update territory details and rules":"Define a new sales territory"})]}),r.jsx(J,{variant:"ghost",size:"sm",onClick:()=>l(!1),children:r.jsx($t,{className:"h-4 w-4"})})]})}),r.jsxs(me,{className:"space-y-6",children:[r.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"name",children:"Territory Name *"}),r.jsx(je,{id:"name",value:f.name,onChange:I=>u(D=>({...D,name:I.target.value})),placeholder:"e.g., North Region"})]}),r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"type",children:"Territory Type"}),r.jsxs($e,{value:f.type,onValueChange:I=>u(D=>({...D,type:I})),children:[r.jsx(Fe,{children:r.jsx(Be,{})}),r.jsxs(Me,{children:[r.jsx(K,{value:nc.GEOGRAPHIC,children:"Geographic"}),r.jsx(K,{value:nc.INDUSTRY,children:"Industry"}),r.jsx(K,{value:nc.ACCOUNT_SIZE,children:"Account Size"}),r.jsx(K,{value:nc.PRODUCT_LINE,children:"Product Line"})]})]})]})]}),r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"description",children:"Description"}),r.jsx(Xt,{id:"description",value:f.description,onChange:I=>u(D=>({...D,description:I.target.value})),placeholder:"Describe the territory",rows:3})]}),r.jsxs("div",{children:[r.jsx("div",{className:"flex items-center justify-between mb-4",children:r.jsx(Z,{children:"Territory Rules"})}),r.jsxs("div",{className:"space-y-4",children:[(E=f.rules)==null?void 0:E.map(I=>r.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("span",{className:"font-medium",children:I.field}),r.jsx("span",{className:"text-muted-foreground",children:I.operator}),r.jsx("span",{children:I.value.toString()})]}),r.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:["Priority: ",I.priority]})]}),r.jsx(J,{variant:"ghost",size:"sm",onClick:()=>y(I.id),children:r.jsx(wn,{className:"h-4 w-4 text-red-500"})})]},I.id)),r.jsx(fe,{className:"border-dashed",children:r.jsxs(me,{className:"pt-6",children:[r.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[r.jsxs("div",{children:[r.jsx(Z,{children:"Field"}),r.jsxs($e,{value:m.field,onValueChange:I=>h(D=>({...D,field:I})),children:[r.jsx(Fe,{children:r.jsx(Be,{placeholder:"Select field"})}),r.jsxs(Me,{children:[r.jsx(K,{value:"state",children:"State"}),r.jsx(K,{value:"zipCode",children:"Zip Code"}),r.jsx(K,{value:"country",children:"Country"}),r.jsx(K,{value:"industry",children:"Industry"}),r.jsx(K,{value:"dealSize",children:"Deal Size"}),r.jsx(K,{value:"productType",children:"Product Type"})]})]})]}),r.jsxs("div",{children:[r.jsx(Z,{children:"Operator"}),r.jsxs($e,{value:m.operator,onValueChange:I=>h(D=>({...D,operator:I})),children:[r.jsx(Fe,{children:r.jsx(Be,{})}),r.jsxs(Me,{children:[r.jsx(K,{value:"equals",children:"Equals"}),r.jsx(K,{value:"contains",children:"Contains"}),r.jsx(K,{value:"starts_with",children:"Starts With"}),r.jsx(K,{value:"in_range",children:"In Range"}),r.jsx(K,{value:"greater_than",children:"Greater Than"}),r.jsx(K,{value:"less_than",children:"Less Than"})]})]})]})]}),r.jsxs("div",{className:"mt-4",children:[r.jsx(Z,{children:"Value"}),r.jsx(je,{value:((S=m.value)==null?void 0:S.toString())||"",onChange:I=>h(D=>({...D,value:I.target.value})),placeholder:"Rule value"}),r.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"For multiple values, separate with commas"})]}),r.jsxs("div",{className:"mt-4",children:[r.jsx(Z,{children:"Priority"}),r.jsxs($e,{value:((N=m.priority)==null?void 0:N.toString())||"1",onValueChange:I=>h(D=>({...D,priority:parseInt(I)})),children:[r.jsx(Fe,{children:r.jsx(Be,{})}),r.jsxs(Me,{children:[r.jsx(K,{value:"1",children:"1 - Highest"}),r.jsx(K,{value:"2",children:"2"}),r.jsx(K,{value:"3",children:"3"}),r.jsx(K,{value:"4",children:"4"}),r.jsx(K,{value:"5",children:"5 - Lowest"})]})]})]}),r.jsx("div",{className:"flex justify-end mt-4",children:r.jsxs(J,{onClick:v,children:[r.jsx(Nt,{className:"h-4 w-4 mr-2"}),"Add Rule"]})})]})})]})]}),r.jsxs("div",{children:[r.jsx(Z,{className:"mb-2 block",children:"Assign Sales Reps"}),r.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto p-2 border rounded-lg",children:t.map(I=>{var D;return r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(St,{id:`rep-${I.id}`,checked:(D=f.assignedTo)==null?void 0:D.includes(I.id),onCheckedChange:T=>b(I.id,!!T)}),r.jsx(Z,{htmlFor:`rep-${I.id}`,className:"text-sm cursor-pointer",children:I.name})]},I.id)})})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(St,{id:"isActive",checked:f.isActive,onCheckedChange:I=>u(D=>({...D,isActive:!!I}))}),r.jsx(Z,{htmlFor:"isActive",children:"Active territory"})]}),r.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t",children:[r.jsx(J,{variant:"outline",onClick:()=>l(!1),children:"Cancel"}),r.jsxs(J,{onClick:p,children:[r.jsx(Pr,{className:"h-4 w-4 mr-2"}),c?"Update":"Create"," Territory"]})]})]})]})}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-2xl font-bold",children:"Territory Management"}),r.jsx("p",{className:"text-muted-foreground",children:"Define and manage sales territories and assignment rules"})]}),r.jsxs(J,{onClick:x,children:[r.jsx(Nt,{className:"h-4 w-4 mr-2"}),"Create Territory"]})]}),r.jsxs("div",{className:"space-y-6",children:[e.map(I=>r.jsxs(fe,{className:"shadow-sm",children:[r.jsx(we,{children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(Ne,{children:I.name}),r.jsx(ze,{className:I.isActive?"bg-green-50 text-green-700 border-green-200":"bg-gray-50 text-gray-700 border-gray-200",children:I.isActive?"Active":"Inactive"}),r.jsx(ze,{variant:"outline",children:I.type.replace("_"," ")})]}),r.jsx(Ue,{className:"mt-1",children:I.description})]}),r.jsx("div",{className:"flex space-x-2",children:r.jsxs(J,{variant:"outline",size:"sm",onClick:()=>g(I),children:[r.jsx(Br,{className:"h-4 w-4 mr-2"}),"Edit"]})})]})}),r.jsx(me,{children:r.jsxs("div",{className:"grid gap-6 md:grid-cols-3",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"text-sm font-semibold mb-3",children:"Territory Rules"}),r.jsxs("div",{className:"space-y-2",children:[I.rules.map(D=>r.jsx("div",{className:"p-2 bg-muted/30 rounded-lg text-sm",children:r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("span",{className:"font-medium",children:D.field}),r.jsx("span",{className:"text-muted-foreground",children:D.operator}),r.jsx("span",{children:D.value.toString()})]})},D.id)),I.rules.length===0&&r.jsx("p",{className:"text-sm text-muted-foreground",children:"No rules defined"})]})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-sm font-semibold mb-3",children:"Assigned Sales Reps"}),r.jsxs("div",{className:"space-y-2",children:[C(I.id).map(D=>r.jsxs("div",{className:"flex items-center space-x-2 p-2 bg-muted/30 rounded-lg",children:[r.jsx($n,{className:"h-4 w-4 text-blue-500"}),r.jsx("span",{className:"text-sm",children:D.name})]},D.id)),I.assignedTo.length===0&&r.jsx("p",{className:"text-sm text-muted-foreground",children:"No reps assigned"})]})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-sm font-semibold mb-3",children:"Territory Stats"}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center justify-between p-2 bg-blue-50 rounded-lg",children:[r.jsx("span",{className:"text-sm text-blue-700",children:"Deals"}),r.jsx("span",{className:"font-bold text-blue-700",children:j(I.id)})]}),r.jsxs("div",{className:"flex items-center justify-between p-2 bg-green-50 rounded-lg",children:[r.jsx("span",{className:"text-sm text-green-700",children:"Reps"}),r.jsx("span",{className:"font-bold text-green-700",children:I.assignedTo.length})]})]})]})]})})]},I.id)),e.length===0&&r.jsx(fe,{className:"shadow-sm",children:r.jsxs(me,{className:"flex flex-col items-center justify-center py-12",children:[r.jsx(Cl,{className:"h-12 w-12 text-muted-foreground mb-4"}),r.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Territories Defined"}),r.jsx("p",{className:"text-muted-foreground text-center mb-4",children:"Create territories to organize your sales team and deals by region, industry, or other criteria."}),r.jsxs(J,{onClick:x,children:[r.jsx(Nt,{className:"h-4 w-4 mr-2"}),"Create First Territory"]})]})})]})]})}function Gle({deals:e,approvalWorkflows:t,onApprove:n,onReject:a,onEscalate:s}){var y;const[i,o]=w.useState("pending"),[l,c]=w.useState(null),[d,f]=w.useState(""),u=b=>{switch(b){case"pending":return"bg-yellow-50 text-yellow-700 border-yellow-200";case"approved":return"bg-green-50 text-green-700 border-green-200";case"rejected":return"bg-red-50 text-red-700 border-red-200";case"escalated":return"bg-orange-50 text-orange-700 border-orange-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},m=b=>{switch(b){case"pending":return r.jsx(er,{className:"h-4 w-4 text-yellow-500"});case"approved":return r.jsx($r,{className:"h-4 w-4 text-green-500"});case"rejected":return r.jsx(di,{className:"h-4 w-4 text-red-500"});case"escalated":return r.jsx(Ts,{className:"h-4 w-4 text-orange-500"});default:return r.jsx(er,{className:"h-4 w-4 text-gray-500"})}},h=b=>t.filter(j=>j.status===b),x=b=>e.find(j=>j.id===b),g=()=>{if(!l)return;const b=l.steps.find(j=>j.stepNumber===l.currentStep);b&&(n(l.id,b.id,d),f(""),c(null))},p=()=>{if(!l)return;const b=l.steps.find(j=>j.stepNumber===l.currentStep);b&&(a(l.id,b.id,d),f(""),c(null))},v=()=>{if(!l)return;const b=l.steps.find(j=>j.stepNumber===l.currentStep);b&&(s(l.id,b.id,d),f(""),c(null))};return r.jsxs("div",{className:"space-y-6",children:[l&&r.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:r.jsxs(fe,{className:"w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[r.jsx(we,{children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx(Ne,{children:"Approval Request"}),r.jsx(Ue,{children:((y=x(l.dealId))==null?void 0:y.name)||"Unknown Deal"})]}),r.jsx(ze,{className:He("ri-badge-status",u(l.status)),children:l.status.toUpperCase()})]})}),r.jsxs(me,{className:"space-y-6",children:[r.jsx("div",{className:"p-4 bg-muted/30 rounded-lg",children:r.jsx("div",{className:"grid gap-4 md:grid-cols-2",children:(()=>{const b=x(l.dealId);return b?r.jsxs(r.Fragment,{children:[r.jsxs("div",{children:[r.jsx("span",{className:"text-sm font-medium",children:"Customer:"}),r.jsx("p",{className:"text-sm",children:b.customerName})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-sm font-medium",children:"Deal Value:"}),r.jsx("p",{className:"text-sm font-bold",children:De(b.value)})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-sm font-medium",children:"Stage:"}),r.jsx("p",{className:"text-sm",children:b.stage.replace("_"," ")})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-sm font-medium",children:"Assigned To:"}),r.jsx("p",{className:"text-sm",children:b.assignedTo})]})]}):null})()})}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-sm font-semibold mb-2",children:"Workflow Details"}),r.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[r.jsxs("div",{children:[r.jsx("span",{className:"text-sm font-medium",children:"Type:"}),r.jsx("p",{className:"text-sm",children:l.workflowType.replace("_"," ")})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-sm font-medium",children:"Requested By:"}),r.jsx("p",{className:"text-sm",children:l.requestedBy})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-sm font-medium",children:"Requested:"}),r.jsx("p",{className:"text-sm",children:lt(l.requestedAt)})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-sm font-medium",children:"Current Step:"}),r.jsxs("p",{className:"text-sm",children:[l.currentStep," of ",l.totalSteps]})]})]})]}),r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"comments",children:"Comments"}),r.jsx(Xt,{id:"comments",value:d,onChange:b=>f(b.target.value),placeholder:"Add your comments here...",rows:3})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-sm font-semibold mb-3",children:"Approval Steps"}),r.jsx("div",{className:"space-y-4",children:l.steps.map((b,j)=>{const C=b.stepNumber===l.currentStep,E=b.stepNumber<l.currentStep;return r.jsxs("div",{className:He("p-3 rounded-lg border-2",C?"border-primary bg-primary/5":E?"border-muted bg-muted/10":"border-dashed border-muted"),children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("span",{className:"flex items-center justify-center w-6 h-6 rounded-full bg-muted text-xs font-bold",children:b.stepNumber}),r.jsx("span",{className:"font-medium",children:b.approverRole.replace("_"," ")})]}),r.jsxs(ze,{className:He("ri-badge-status",u(b.status)),children:[m(b.status),r.jsx("span",{className:"ml-1",children:b.status.toUpperCase()})]})]}),r.jsxs("div",{className:"text-sm text-muted-foreground mb-2",children:["Requires ",b.requiredApprovals," approval(s) from ",b.approverIds.length," approver(s)"]}),b.currentApprovals.length>0&&r.jsxs("div",{className:"mt-3 space-y-2",children:[r.jsx("h4",{className:"text-xs font-medium",children:"Approvals:"}),b.currentApprovals.map((S,N)=>r.jsxs("div",{className:"flex items-start space-x-2 text-xs p-2 bg-muted/30 rounded",children:[S.action==="approve"?r.jsx(CG,{className:"h-3 w-3 text-green-500 mt-0.5"}):S.action==="reject"?r.jsx(SG,{className:"h-3 w-3 text-red-500 mt-0.5"}):r.jsx(Ts,{className:"h-3 w-3 text-orange-500 mt-0.5"}),r.jsxs("div",{children:[r.jsx("div",{className:"font-medium",children:S.approverId}),r.jsx("div",{className:"text-muted-foreground",children:lt(S.actionDate)}),S.comments&&r.jsx("div",{className:"mt-1 italic",children:S.comments})]})]},N))]})]},b.id)})})]}),l.status==="pending"&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"comments",children:"Comments"}),r.jsx(Xt,{id:"comments",value:d,onChange:b=>f(b.target.value),placeholder:"Add your comments here...",rows:3})]}),r.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t",children:[r.jsx(J,{variant:"outline",onClick:()=>c(null),children:"Cancel"}),r.jsxs(J,{variant:"outline",onClick:v,children:[r.jsx(Ts,{className:"h-4 w-4 mr-2"}),"Escalate"]}),r.jsxs(J,{variant:"destructive",onClick:p,children:[r.jsx(di,{className:"h-4 w-4 mr-2"}),"Reject"]}),r.jsxs(J,{variant:"default",onClick:g,children:[r.jsx($r,{className:"h-4 w-4 mr-2"}),"Approve"]})]})]}),l.status!=="pending"&&r.jsx("div",{className:"flex justify-end pt-6 border-t",children:r.jsx(J,{variant:"outline",onClick:()=>c(null),children:"Close"})})]})]})}),r.jsx("div",{className:"flex items-center justify-between",children:r.jsxs("div",{children:[r.jsx("h2",{className:"text-2xl font-bold",children:"Approval Workflows"}),r.jsx("p",{className:"text-muted-foreground",children:"Manage approval requests for deals above threshold"})]})}),r.jsxs(lr,{value:i,onValueChange:o,className:"space-y-6",children:[r.jsxs(or,{children:[r.jsxs(Ke,{value:"pending",children:["Pending",r.jsx(ze,{className:"ml-2 bg-yellow-50 text-yellow-700 border-yellow-200",children:h("pending").length})]}),r.jsxs(Ke,{value:"approved",children:["Approved",r.jsx(ze,{className:"ml-2 bg-green-50 text-green-700 border-green-200",children:h("approved").length})]}),r.jsxs(Ke,{value:"rejected",children:["Rejected",r.jsx(ze,{className:"ml-2 bg-red-50 text-red-700 border-red-200",children:h("rejected").length})]}),r.jsxs(Ke,{value:"escalated",children:["Escalated",r.jsx(ze,{className:"ml-2 bg-orange-50 text-orange-700 border-orange-200",children:h("escalated").length})]})]}),r.jsx(Je,{value:"pending",className:"space-y-4",children:h("pending").length>0?h("pending").map(b=>{const j=x(b.dealId);return j?r.jsx(fe,{className:"shadow-sm hover:shadow-md transition-shadow cursor-pointer",onClick:()=>c(b),children:r.jsxs(me,{className:"p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold",children:j.name}),r.jsx("p",{className:"text-sm text-muted-foreground",children:j.customerName})]}),r.jsxs(ze,{className:He("ri-badge-status",u(b.status)),children:[m(b.status),r.jsx("span",{className:"ml-1",children:b.status.toUpperCase()})]})]}),r.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[r.jsxs("div",{children:[r.jsx("span",{className:"text-sm font-medium",children:"Deal Value:"}),r.jsx("p",{className:"text-lg font-bold text-primary",children:De(j.value)})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-sm font-medium",children:"Requested By:"}),r.jsxs("div",{className:"flex items-center space-x-1 mt-1",children:[r.jsx(wa,{className:"h-4 w-4 text-blue-500"}),r.jsx("span",{className:"text-sm",children:b.requestedBy})]})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-sm font-medium",children:"Requested:"}),r.jsx("p",{className:"text-sm",children:lt(b.requestedAt)})]})]}),r.jsxs("div",{className:"mt-4 pt-4 border-t",children:[r.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[r.jsx("span",{className:"text-sm font-medium",children:"Approval Progress:"}),r.jsxs("span",{className:"text-sm",children:[b.currentStep," of ",b.totalSteps]})]}),r.jsx("div",{className:"flex items-center space-x-2",children:b.steps.map((C,E)=>{const S=C.stepNumber<b.currentStep,N=C.stepNumber===b.currentStep;return r.jsxs(pe.Fragment,{children:[r.jsx("div",{className:He("flex items-center justify-center w-8 h-8 rounded-full",S?"bg-primary text-primary-foreground":N?"bg-primary/20 text-primary border-2 border-primary":"bg-muted text-muted-foreground"),children:C.stepNumber}),E<b.steps.length-1&&r.jsx(mG,{className:"h-4 w-4 text-muted-foreground"})]},C.id)})})]})]})},b.id):null}):r.jsx(fe,{className:"shadow-sm",children:r.jsxs(me,{className:"flex flex-col items-center justify-center py-12",children:[r.jsx(er,{className:"h-12 w-12 text-muted-foreground mb-4"}),r.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Pending Approvals"}),r.jsx("p",{className:"text-muted-foreground text-center",children:"There are no deals currently waiting for your approval."})]})})}),r.jsx(Je,{value:"approved",className:"space-y-4",children:h("approved").length>0?h("approved").map(b=>{const j=x(b.dealId);return j?r.jsx(fe,{className:"shadow-sm hover:shadow-md transition-shadow cursor-pointer",onClick:()=>c(b),children:r.jsxs(me,{className:"p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold",children:j.name}),r.jsx("p",{className:"text-sm text-muted-foreground",children:j.customerName})]}),r.jsxs(ze,{className:He("ri-badge-status",u(b.status)),children:[m(b.status),r.jsx("span",{className:"ml-1",children:b.status.toUpperCase()})]})]}),r.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[r.jsxs("div",{children:[r.jsx("span",{className:"text-sm font-medium",children:"Deal Value:"}),r.jsx("p",{className:"text-lg font-bold text-primary",children:De(j.value)})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-sm font-medium",children:"Completed:"}),r.jsx("p",{className:"text-sm",children:b.completedAt?lt(b.completedAt):"N/A"})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-sm font-medium",children:"Workflow Type:"}),r.jsx("p",{className:"text-sm capitalize",children:b.workflowType.replace("_"," ")})]})]})]})},b.id):null}):r.jsx(fe,{className:"shadow-sm",children:r.jsxs(me,{className:"flex flex-col items-center justify-center py-12",children:[r.jsx($r,{className:"h-12 w-12 text-muted-foreground mb-4"}),r.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Approved Workflows"}),r.jsx("p",{className:"text-muted-foreground text-center",children:"There are no approved deal workflows yet."})]})})}),r.jsx(Je,{value:"rejected",className:"space-y-4",children:h("rejected").length>0?h("rejected").map(b=>{const j=x(b.dealId);return j?r.jsx(fe,{className:"shadow-sm hover:shadow-md transition-shadow cursor-pointer",onClick:()=>c(b),children:r.jsxs(me,{className:"p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold",children:j.name}),r.jsx("p",{className:"text-sm text-muted-foreground",children:j.customerName})]}),r.jsxs(ze,{className:He("ri-badge-status",u(b.status)),children:[m(b.status),r.jsx("span",{className:"ml-1",children:b.status.toUpperCase()})]})]}),r.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[r.jsxs("div",{children:[r.jsx("span",{className:"text-sm font-medium",children:"Deal Value:"}),r.jsx("p",{className:"text-lg font-bold text-primary",children:De(j.value)})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-sm font-medium",children:"Completed:"}),r.jsx("p",{className:"text-sm",children:b.completedAt?lt(b.completedAt):"N/A"})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-sm font-medium",children:"Workflow Type:"}),r.jsx("p",{className:"text-sm capitalize",children:b.workflowType.replace("_"," ")})]})]})]})},b.id):null}):r.jsx(fe,{className:"shadow-sm",children:r.jsxs(me,{className:"flex flex-col items-center justify-center py-12",children:[r.jsx(di,{className:"h-12 w-12 text-muted-foreground mb-4"}),r.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Rejected Workflows"}),r.jsx("p",{className:"text-muted-foreground text-center",children:"There are no rejected deal workflows."})]})})}),r.jsx(Je,{value:"escalated",className:"space-y-4",children:h("escalated").length>0?h("escalated").map(b=>{const j=x(b.dealId);return j?r.jsx(fe,{className:"shadow-sm hover:shadow-md transition-shadow cursor-pointer",onClick:()=>c(b),children:r.jsxs(me,{className:"p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold",children:j.name}),r.jsx("p",{className:"text-sm text-muted-foreground",children:j.customerName})]}),r.jsxs(ze,{className:He("ri-badge-status",u(b.status)),children:[m(b.status),r.jsx("span",{className:"ml-1",children:b.status.toUpperCase()})]})]}),r.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[r.jsxs("div",{children:[r.jsx("span",{className:"text-sm font-medium",children:"Deal Value:"}),r.jsx("p",{className:"text-lg font-bold text-primary",children:De(j.value)})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-sm font-medium",children:"Requested:"}),r.jsx("p",{className:"text-sm",children:lt(b.requestedAt)})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-sm font-medium",children:"Workflow Type:"}),r.jsx("p",{className:"text-sm capitalize",children:b.workflowType.replace("_"," ")})]})]})]})},b.id):null}):r.jsx(fe,{className:"shadow-sm",children:r.jsxs(me,{className:"flex flex-col items-center justify-center py-12",children:[r.jsx(Ts,{className:"h-12 w-12 text-muted-foreground mb-4"}),r.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Escalated Workflows"}),r.jsx("p",{className:"text-muted-foreground text-center",children:"There are no escalated deal workflows."})]})})})]})]})}function Kle({deal:e,customers:t,salesReps:n,territories:a,products:s,onSave:i,onCancel:o}){const{toast:l}=Ct(),[c,d]=w.useState(!1),[f,u]=w.useState({name:"",customerId:"",customerName:"",stage:yt.PROSPECTING,status:Cr.ACTIVE,priority:Ao.MEDIUM,value:0,probability:10,expectedCloseDate:new Date(Date.now()+30*24*60*60*1e3),assignedTo:"",territoryId:"",sourceId:"",competitorIds:[],products:[],notes:"",requiresApproval:!1,customFields:{}}),[m,h]=w.useState(!1),[x,g]=w.useState(!1),[p,v]=w.useState({productId:"",productName:"",quantity:1,unitPrice:0,discount:0,total:0});w.useEffect(()=>{e&&u({...e,expectedCloseDate:new Date(e.expectedCloseDate)})},[e]),w.useEffect(()=>{if(f.customerId){const S=t.find(N=>N.id===f.customerId);S&&u(N=>({...N,customerName:`${S.firstName} ${S.lastName}`}))}},[f.customerId,t]),w.useEffect(()=>{if(f.products&&f.products.length>0){const S=f.products.reduce((N,I)=>N+I.total,0);u(N=>({...N,value:S}))}},[f.products]),w.useEffect(()=>{const S=p.quantity||1,N=p.unitPrice||0,I=p.discount||0,D=S*N-I;v(T=>({...T,total:D}))},[p.quantity,p.unitPrice,p.discount]);const y=async S=>{if(S.preventDefault(),!f.name||!f.customerId||!f.expectedCloseDate){l({title:"Validation Error",description:"Please fill in all required fields",variant:"destructive"});return}d(!0);try{await i(f),l({title:"Success",description:`Deal ${e?"updated":"created"} successfully`})}catch{l({title:"Error",description:`Failed to ${e?"update":"create"} deal`,variant:"destructive"})}finally{d(!1)}},b=()=>{if(!p.productId||!p.productName){l({title:"Validation Error",description:"Please select a product",variant:"destructive"});return}const S={id:Math.random().toString(36).substr(2,9),productId:p.productId,productName:p.productName,quantity:p.quantity||1,unitPrice:p.unitPrice||0,discount:p.discount||0,total:p.total||0};u(N=>({...N,products:[...N.products||[],S]})),v({productId:"",productName:"",quantity:1,unitPrice:0,discount:0,total:0}),h(!1)},j=S=>{u(N=>{var I;return{...N,products:((I=N.products)==null?void 0:I.filter(D=>D.id!==S))||[]}})},C=S=>{const N=s.find(I=>I.id===S);N&&v({productId:N.id,productName:N.name,quantity:1,unitPrice:N.price,discount:0,total:N.price})},E=S=>{u(N=>({...N,customerId:S.id,customerName:`${S.firstName} ${S.lastName}`})),g(!1),l({title:"Customer Added",description:`${S.firstName} ${S.lastName} has been added as a customer.`})};return r.jsxs("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:[x&&r.jsx(Wm,{onClose:()=>g(!1),onSuccess:E}),r.jsxs(fe,{className:"w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[r.jsx(we,{children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx(Ne,{children:e?"Edit Deal":"Create Deal"}),r.jsx(Ue,{children:e?"Update deal details":"Create a new sales deal"})]}),r.jsx(J,{variant:"ghost",size:"sm",onClick:o,children:r.jsx($t,{className:"h-4 w-4"})})]})}),r.jsx(me,{children:r.jsxs("form",{onSubmit:y,className:"space-y-6",children:[r.jsxs("div",{className:"space-y-4",children:[r.jsxs("h3",{className:"text-lg font-semibold flex items-center",children:[r.jsx(fs,{className:"h-4 w-4 mr-2"}),"Deal Information"]}),r.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"name",children:"Deal Name *"}),r.jsx(je,{id:"name",value:f.name,onChange:S=>u(N=>({...N,name:S.target.value})),placeholder:"Enter deal name"})]}),r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"customerId",children:"Customer *"}),r.jsxs($e,{value:f.customerId||"",onValueChange:S=>u(N=>({...N,customerId:S})),children:[r.jsx(Fe,{children:r.jsx(Be,{placeholder:"Select customer"})}),r.jsxs(Me,{children:[r.jsx("div",{className:"px-2 py-1.5",children:r.jsxs(J,{variant:"outline",size:"sm",className:"w-full justify-start",onClick:()=>g(!0),children:[r.jsx(Nt,{className:"h-3.5 w-3.5 mr-2"}),"Add New Customer"]})}),r.jsx("div",{className:"px-2 py-1 border-t"}),t.map(S=>r.jsxs(K,{value:S.id,children:[S.firstName," ",S.lastName]},S.id))]})]})]})]}),r.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"stage",children:"Stage"}),r.jsxs($e,{value:f.stage,onValueChange:S=>u(N=>({...N,stage:S,probability:S===yt.PROSPECTING?10:S===yt.QUALIFICATION?25:S===yt.NEEDS_ANALYSIS?40:S===yt.PROPOSAL?60:S===yt.NEGOTIATION?80:S===yt.CLOSED_WON?100:S===yt.CLOSED_LOST?0:10})),children:[r.jsx(Fe,{children:r.jsx(Be,{})}),r.jsxs(Me,{children:[r.jsx(K,{value:yt.PROSPECTING,children:"Prospecting"}),r.jsx(K,{value:yt.QUALIFICATION,children:"Qualification"}),r.jsx(K,{value:yt.NEEDS_ANALYSIS,children:"Needs Analysis"}),r.jsx(K,{value:yt.PROPOSAL,children:"Proposal"}),r.jsx(K,{value:yt.NEGOTIATION,children:"Negotiation"}),r.jsx(K,{value:yt.CLOSED_WON,children:"Closed Won"}),r.jsx(K,{value:yt.CLOSED_LOST,children:"Closed Lost"})]})]})]}),r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"priority",children:"Priority"}),r.jsxs($e,{value:f.priority,onValueChange:S=>u(N=>({...N,priority:S})),children:[r.jsx(Fe,{children:r.jsx(Be,{})}),r.jsxs(Me,{children:[r.jsx(K,{value:Ao.LOW,children:"Low"}),r.jsx(K,{value:Ao.MEDIUM,children:"Medium"}),r.jsx(K,{value:Ao.HIGH,children:"High"}),r.jsx(K,{value:Ao.CRITICAL,children:"Critical"})]})]})]}),r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"probability",children:"Probability (%)"}),r.jsx(je,{id:"probability",type:"number",min:"0",max:"100",value:f.probability,onChange:S=>u(N=>({...N,probability:parseInt(S.target.value)||0}))})]})]}),r.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"expectedCloseDate",children:"Expected Close Date *"}),r.jsx(je,{id:"expectedCloseDate",type:"date",value:f.expectedCloseDate?new Date(f.expectedCloseDate).toISOString().split("T")[0]:"",onChange:S=>u(N=>({...N,expectedCloseDate:new Date(S.target.value)}))})]}),r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"assignedTo",children:"Assigned To"}),r.jsxs($e,{value:f.assignedTo,onValueChange:S=>u(N=>({...N,assignedTo:S})),children:[r.jsx(Fe,{children:r.jsx(Be,{placeholder:"Select sales rep"})}),r.jsx(Me,{children:n.map(S=>r.jsx(K,{value:S.id,children:S.name},S.id))})]})]}),r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"territoryId",children:"Territory"}),r.jsxs($e,{value:f.territoryId,onValueChange:S=>u(N=>({...N,territoryId:S})),children:[r.jsx(Fe,{children:r.jsx(Be,{placeholder:"Select territory"})}),r.jsx(Me,{children:a.map(S=>r.jsx(K,{value:S.id,children:S.name},S.id))})]})]})]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("h3",{className:"text-lg font-semibold flex items-center",children:[r.jsx(Ra,{className:"h-4 w-4 mr-2"}),"Products"]}),r.jsxs(J,{type:"button",onClick:()=>h(!0),size:"sm",children:[r.jsx(Nt,{className:"h-4 w-4 mr-2"}),"Add Product"]})]}),m&&r.jsx(fe,{className:"border-dashed",children:r.jsxs(me,{className:"pt-6",children:[r.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[r.jsxs("div",{children:[r.jsx(Z,{children:"Product"}),r.jsxs($e,{onValueChange:C,children:[r.jsx(Fe,{children:r.jsx(Be,{placeholder:"Select product"})}),r.jsx(Me,{children:s.map(S=>r.jsxs(K,{value:S.id,children:[S.name," - ",De(S.price)]},S.id))})]})]}),r.jsxs("div",{children:[r.jsx(Z,{children:"Quantity"}),r.jsx(je,{type:"number",min:"1",value:p.quantity,onChange:S=>v(N=>({...N,quantity:parseInt(S.target.value)||1}))})]}),r.jsxs("div",{children:[r.jsx(Z,{children:"Unit Price"}),r.jsx(je,{type:"number",min:"0",step:"0.01",value:p.unitPrice,onChange:S=>v(N=>({...N,unitPrice:parseFloat(S.target.value)||0}))})]}),r.jsxs("div",{children:[r.jsx(Z,{children:"Discount"}),r.jsx(je,{type:"number",min:"0",step:"0.01",value:p.discount,onChange:S=>v(N=>({...N,discount:parseFloat(S.target.value)||0}))})]})]}),r.jsxs("div",{className:"flex items-center justify-between mt-4",children:[r.jsxs("div",{children:[r.jsx("span",{className:"text-sm font-medium",children:"Total: "}),r.jsx("span",{className:"font-bold",children:De(p.total||0)})]}),r.jsxs("div",{className:"flex space-x-2",children:[r.jsx(J,{type:"button",variant:"outline",onClick:()=>h(!1),children:"Cancel"}),r.jsx(J,{type:"button",onClick:b,children:"Add Product"})]})]})]})}),r.jsx("div",{className:"space-y-3",children:f.products&&f.products.length>0?f.products.map(S=>r.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("span",{className:"font-medium",children:S.productName}),r.jsxs(ze,{variant:"outline",children:[S.quantity," × ",De(S.unitPrice)]})]}),S.discount>0&&r.jsxs("div",{className:"text-sm text-green-600 mt-1",children:["Discount: ",De(S.discount)]})]}),r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsx("span",{className:"font-bold",children:De(S.total)}),r.jsx(J,{type:"button",variant:"ghost",size:"sm",onClick:()=>j(S.id),children:r.jsx(wn,{className:"h-4 w-4 text-red-500"})})]})]},S.id)):r.jsxs("div",{className:"text-center py-6 text-muted-foreground border-2 border-dashed rounded-lg",children:[r.jsx(Ra,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),r.jsx("p",{children:"No products added yet"}),r.jsx("p",{className:"text-sm",children:"Add products to calculate deal value"})]})}),f.products&&f.products.length>0&&r.jsx("div",{className:"flex justify-end p-3 bg-muted/30 rounded-lg",children:r.jsxs("div",{className:"text-right",children:[r.jsx("span",{className:"text-sm font-medium",children:"Total Deal Value: "}),r.jsx("span",{className:"text-lg font-bold text-primary",children:De(f.value||0)})]})})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"text-lg font-semibold",children:"Notes"}),r.jsx(Xt,{value:f.notes,onChange:S=>u(N=>({...N,notes:S.target.value})),placeholder:"Add any additional notes about this deal...",rows:3})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"text-lg font-semibold",children:"Approval Settings"}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(St,{id:"requiresApproval",checked:f.requiresApproval,onCheckedChange:S=>u(N=>({...N,requiresApproval:!!S}))}),r.jsx(Z,{htmlFor:"requiresApproval",children:"This deal requires approval"})]}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Deals over $100,000 automatically require approval"})]}),r.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t",children:[r.jsx(J,{type:"button",variant:"outline",onClick:o,disabled:c,children:"Cancel"}),r.jsx(J,{type:"submit",disabled:c,children:c?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),e?"Updating...":"Creating..."]}):r.jsxs(r.Fragment,{children:[r.jsx(Pr,{className:"h-4 w-4 mr-2"}),e?"Update":"Create"," Deal"]})})]})]})})]})]})}function FI(){const{deals:e,territories:t,approvalWorkflows:n,winLossReports:a,stageHistory:s,createDeal:i,updateDealStage:o,assignTerritory:l,createApprovalWorkflow:c,createWinLossReport:d,getDealMetrics:f}=sne(),{leads:u,salesReps:m}=ro(),{vehicles:h}=Ol(),[x,g]=w.useState(""),[p,v]=w.useState("all"),[y,b]=w.useState("all"),[j,C]=w.useState(null),[E,S]=w.useState(!1),[N,I]=w.useState("pipeline"),[D,T]=w.useState(!1),{toast:A}=Ct(),_=G=>{switch(G){case Cr.ACTIVE:return"bg-blue-50 text-blue-700 border-blue-200";case Cr.WON:return"bg-green-50 text-green-700 border-green-200";case Cr.LOST:return"bg-red-50 text-red-700 border-red-200";case Cr.ON_HOLD:return"bg-yellow-50 text-yellow-700 border-yellow-200";case Cr.CANCELLED:return"bg-gray-50 text-gray-700 border-gray-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},k=e.filter(G=>{const ee=G.name.toLowerCase().includes(x.toLowerCase())||G.customerName.toLowerCase().includes(x.toLowerCase()),re=p==="all"||G.stage===p,de=y==="all"||G.assignedTo===y;return ee&&re&&de}),L=async(G,ee)=>{try{await o(G,ee);const re=e.find(de=>de.id===G);re&&A({title:"Deal Stage Updated",description:`${re.name} moved to ${ee.replace("_"," ").toLowerCase()}`})}catch{A({title:"Error",description:"Failed to update deal stage",variant:"destructive"})}},$=G=>{C(G),T(!0)},M=()=>{C(null),S(!0)},B=G=>{C(G),S(!0)},U=async G=>{j?await o(j.id,G.stage||j.stage):await i(G),S(!1),C(null)},W=async(G,ee)=>{await c(G,ee)},q=async(G,ee,re)=>{await d(G,ee,re)},R=f(),V=h.map(G=>({id:G.id,name:`${G.year} ${G.make} ${G.model}`,price:G.price,category:"vehicle"})).concat([{id:"prod-001",name:"Extended Warranty Package",price:3500,category:"warranty"},{id:"prod-002",name:"Premium Interior Upgrade",price:2200,category:"upgrade"},{id:"prod-003",name:"Solar Panel Package",price:3500,category:"accessory"}]);return r.jsxs("div",{className:"space-y-8",children:[D&&j&&r.jsx(Wle,{deal:j,onClose:()=>T(!1),onEdit:B}),E&&r.jsx(Kle,{deal:j||void 0,customers:u,salesReps:m,territories:t,products:V,onSave:U,onCancel:()=>{S(!1),C(null)}}),r.jsx("div",{className:"ri-page-header",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"ri-page-title",children:"Sales Deal Management"}),r.jsx("p",{className:"ri-page-description",children:"Track deals through the sales pipeline with approvals and territory management"})]}),r.jsxs(J,{className:"shadow-sm",onClick:M,children:[r.jsx(Nt,{className:"h-4 w-4 mr-2"}),"New Deal"]})]})}),r.jsxs("div",{className:"ri-stats-grid",children:[r.jsxs(fe,{className:"shadow-sm border-0 bg-gradient-to-br from-blue-50 to-blue-100/50",children:[r.jsxs(we,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(Ne,{className:"text-sm font-medium text-blue-900",children:"Total Pipeline"}),r.jsx(Mt,{className:"h-4 w-4 text-blue-600"})]}),r.jsxs(me,{children:[r.jsx("div",{className:"text-2xl font-bold text-blue-900",children:De(R.totalValue)}),r.jsxs("p",{className:"text-xs text-blue-600 flex items-center mt-1",children:[r.jsx(Ot,{className:"h-3 w-3 mr-1"}),R.totalDeals," active deals"]})]})]}),r.jsxs(fe,{className:"shadow-sm border-0 bg-gradient-to-br from-green-50 to-green-100/50",children:[r.jsxs(we,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(Ne,{className:"text-sm font-medium text-green-900",children:"Win Rate"}),r.jsx(fs,{className:"h-4 w-4 text-green-600"})]}),r.jsxs(me,{children:[r.jsxs("div",{className:"text-2xl font-bold text-green-900",children:[R.winRate.toFixed(1),"%"]}),r.jsxs("p",{className:"text-xs text-green-600 flex items-center mt-1",children:[r.jsx(Ot,{className:"h-3 w-3 mr-1"}),R.wonDeals," won deals"]})]})]}),r.jsxs(fe,{className:"shadow-sm border-0 bg-gradient-to-br from-purple-50 to-purple-100/50",children:[r.jsxs(we,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(Ne,{className:"text-sm font-medium text-purple-900",children:"Avg Deal Size"}),r.jsx(Mt,{className:"h-4 w-4 text-purple-600"})]}),r.jsxs(me,{children:[r.jsx("div",{className:"text-2xl font-bold text-purple-900",children:De(R.averageDealSize)}),r.jsxs("p",{className:"text-xs text-purple-600 flex items-center mt-1",children:[r.jsx(Ot,{className:"h-3 w-3 mr-1"}),R.averageSalesCycle.toFixed(0)," day cycle"]})]})]}),r.jsxs(fe,{className:"shadow-sm border-0 bg-gradient-to-br from-orange-50 to-orange-100/50",children:[r.jsxs(we,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(Ne,{className:"text-sm font-medium text-orange-900",children:"Territories"}),r.jsx(Cl,{className:"h-4 w-4 text-orange-600"})]}),r.jsxs(me,{children:[r.jsx("div",{className:"text-2xl font-bold text-orange-900",children:t.length}),r.jsxs("p",{className:"text-xs text-orange-600 flex items-center mt-1",children:[r.jsx($n,{className:"h-3 w-3 mr-1"}),"Active territories"]})]})]})]}),r.jsxs(lr,{value:N,onValueChange:I,className:"space-y-6",children:[r.jsxs(or,{className:"grid w-full grid-cols-5",children:[r.jsx(Ke,{value:"pipeline",children:"Pipeline"}),r.jsx(Ke,{value:"deals",children:"Deals"}),r.jsx(Ke,{value:"analytics",children:"Analytics"}),r.jsx(Ke,{value:"territories",children:"Territories"}),r.jsx(Ke,{value:"approvals",children:"Approvals"})]}),r.jsx(Je,{value:"pipeline",className:"space-y-6",children:r.jsx($le,{deals:e,onDealStageChange:L,onDealClick:$})}),r.jsxs(Je,{value:"deals",className:"space-y-6",children:[r.jsxs("div",{className:"flex gap-4",children:[r.jsxs("div",{className:"ri-search-bar",children:[r.jsx(Jn,{className:"ri-search-icon"}),r.jsx(je,{placeholder:"Search deals...",value:x,onChange:G=>g(G.target.value),className:"ri-search-input shadow-sm"})]}),r.jsxs($e,{value:p,onValueChange:v,children:[r.jsx(Fe,{className:"w-40",children:r.jsx(Be,{placeholder:"Stage"})}),r.jsxs(Me,{children:[r.jsx(K,{value:"all",children:"All Stages"}),r.jsx(K,{value:yt.PROSPECTING,children:"Prospecting"}),r.jsx(K,{value:yt.QUALIFICATION,children:"Qualification"}),r.jsx(K,{value:yt.NEEDS_ANALYSIS,children:"Needs Analysis"}),r.jsx(K,{value:yt.PROPOSAL,children:"Proposal"}),r.jsx(K,{value:yt.NEGOTIATION,children:"Negotiation"}),r.jsx(K,{value:yt.CLOSED_WON,children:"Closed Won"}),r.jsx(K,{value:yt.CLOSED_LOST,children:"Closed Lost"})]})]}),r.jsxs($e,{value:y,onValueChange:b,children:[r.jsx(Fe,{className:"w-40",children:r.jsx(Be,{placeholder:"Sales Rep"})}),r.jsxs(Me,{children:[r.jsx(K,{value:"all",children:"All Reps"}),m.map(G=>r.jsx(K,{value:G.id,children:G.name},G.id))]})]}),r.jsxs(J,{variant:"outline",className:"shadow-sm",children:[r.jsx(hs,{className:"h-4 w-4 mr-2"}),"Filter"]})]}),r.jsxs(fe,{className:"shadow-sm",children:[r.jsxs(we,{children:[r.jsxs(Ne,{className:"text-xl",children:["Deals (",k.length,")"]}),r.jsx(Ue,{children:"Manage your sales pipeline and deal progression"})]}),r.jsx(me,{children:r.jsxs("div",{className:"space-y-4",children:[k.map(G=>{var ee;return r.jsxs("div",{className:"ri-table-row cursor-pointer",onClick:()=>B(G),children:[r.jsx("div",{className:"flex items-center space-x-4 flex-1",children:r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[r.jsx("h3",{className:"font-semibold text-foreground",children:G.name}),r.jsx(ze,{className:He("ri-badge-status",_(G.status)),children:G.status.toUpperCase()}),r.jsx(ze,{variant:"outline",children:G.stage.replace("_"," ").toUpperCase()})]}),r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 text-sm text-muted-foreground",children:[r.jsxs("span",{className:"flex items-center",children:[r.jsx($n,{className:"h-3 w-3 mr-2 text-blue-500"}),G.customerName]}),r.jsxs("span",{className:"flex items-center",children:[r.jsx(Mt,{className:"h-3 w-3 mr-2 text-green-500"}),De(G.value)]}),r.jsxs("span",{className:"flex items-center",children:[r.jsx(fs,{className:"h-3 w-3 mr-2 text-purple-500"}),G.probability,"% probability"]}),r.jsxs("span",{className:"flex items-center",children:[r.jsx(Cl,{className:"h-3 w-3 mr-2 text-orange-500"}),((ee=t.find(re=>re.id===G.territoryId))==null?void 0:ee.name)||"No Territory"]})]}),G.notes&&r.jsx("p",{className:"text-sm text-muted-foreground mt-2 bg-muted/30 p-2 rounded-md",children:G.notes})]})}),r.jsxs("div",{className:"ri-action-buttons",children:[r.jsx(J,{variant:"outline",size:"sm",className:"shadow-sm",onClick:re=>{re.stopPropagation(),$(G)},children:"View"}),G.requiresApproval&&r.jsx(J,{variant:"outline",size:"sm",className:"shadow-sm",onClick:re=>{re.stopPropagation(),W(G.id,"deal_value")},children:"Request Approval"})]})]},G.id)}),k.length===0&&r.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[r.jsx(fs,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),r.jsx("p",{children:"No deals found"}),r.jsx("p",{className:"text-sm",children:"Create your first deal to get started"})]})]})})]})]}),r.jsx(Je,{value:"analytics",className:"space-y-6",children:r.jsxs(lr,{defaultValue:"metrics",className:"space-y-6",children:[r.jsxs(or,{children:[r.jsx(Ke,{value:"metrics",children:"Deal Metrics"}),r.jsx(Ke,{value:"win-loss",children:"Win/Loss Analysis"})]}),r.jsx(Je,{value:"metrics",children:r.jsx(Ble,{metrics:R})}),r.jsx(Je,{value:"win-loss",children:r.jsx(qle,{deals:e,winLossReports:a,onCreateReport:q})})]})}),r.jsx(Je,{value:"territories",className:"space-y-6",children:r.jsx(Hle,{territories:t,salesReps:m,deals:e,onCreateTerritory:()=>{},onUpdateTerritory:()=>{},onDeleteTerritory:()=>{}})}),r.jsx(Je,{value:"approvals",className:"space-y-6",children:r.jsx(Gle,{deals:e,approvalWorkflows:n,onApprove:()=>{},onReject:()=>{},onEscalate:()=>{}})})]})]})}function Yle(){return r.jsxs(Ka,{children:[r.jsx(Vt,{path:"/",element:r.jsx(FI,{})}),r.jsx(Vt,{path:"/*",element:r.jsx(FI,{})})]})}const Xle=[{id:"1",type:kd.PURCHASE,customerId:"cust-1",vehicleId:"veh-1",quoteId:"quote-1",status:Fi.SIGNED,signedDate:new Date("2024-01-18"),effectiveDate:new Date("2024-01-18"),expirationDate:new Date("2025-01-18"),terms:"Standard purchase agreement with 90-day warranty",documents:[{id:"1",name:"Purchase Agreement.pdf",type:"application/pdf",url:"/documents/purchase-agreement-1.pdf",size:245760,uploadedAt:new Date("2024-01-18")}],customFields:{},createdAt:new Date("2024-01-15"),updatedAt:new Date("2024-01-18")},{id:"2",type:kd.SERVICE,customerId:"cust-2",status:Fi.ACTIVE,effectiveDate:new Date("2024-01-10"),expirationDate:new Date("2024-07-10"),terms:"Extended service contract for 6 months",documents:[{id:"2",name:"Service Contract.pdf",type:"application/pdf",url:"/documents/service-contract-2.pdf",size:189440,uploadedAt:new Date("2024-01-10")}],customFields:{},createdAt:new Date("2024-01-08"),updatedAt:new Date("2024-01-10")}];function MI(){const[e]=w.useState(Xle),[t,n]=w.useState(""),a=o=>{switch(o){case Fi.DRAFT:return"bg-gray-50 text-gray-700 border-gray-200";case Fi.PENDING:return"bg-yellow-50 text-yellow-700 border-yellow-200";case Fi.SIGNED:return"bg-blue-50 text-blue-700 border-blue-200";case Fi.ACTIVE:return"bg-green-50 text-green-700 border-green-200";case Fi.EXPIRED:return"bg-orange-50 text-orange-700 border-orange-200";case Fi.CANCELLED:return"bg-red-50 text-red-700 border-red-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},s=o=>{switch(o){case kd.PURCHASE:return"bg-blue-50 text-blue-700 border-blue-200";case kd.LEASE:return"bg-purple-50 text-purple-700 border-purple-200";case kd.SERVICE:return"bg-green-50 text-green-700 border-green-200";case kd.WARRANTY:return"bg-orange-50 text-orange-700 border-orange-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},i=e.filter(o=>o.id.toLowerCase().includes(t.toLowerCase())||o.customerId.toLowerCase().includes(t.toLowerCase())||o.type.toLowerCase().includes(t.toLowerCase()));return r.jsxs("div",{className:"space-y-8",children:[r.jsx("div",{className:"ri-page-header",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"ri-page-title",children:"Agreement Vault"}),r.jsx("p",{className:"ri-page-description",children:"Manage contracts, agreements, and legal documents"})]}),r.jsxs(J,{className:"shadow-sm",children:[r.jsx(Nt,{className:"h-4 w-4 mr-2"}),"New Agreement"]})]})}),r.jsxs("div",{className:"ri-stats-grid",children:[r.jsxs(fe,{className:"shadow-sm border-0 bg-gradient-to-br from-blue-50 to-blue-100/50",children:[r.jsxs(we,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(Ne,{className:"text-sm font-medium text-blue-900",children:"Total Agreements"}),r.jsx(D0,{className:"h-4 w-4 text-blue-600"})]}),r.jsxs(me,{children:[r.jsx("div",{className:"text-2xl font-bold text-blue-900",children:e.length}),r.jsxs("p",{className:"text-xs text-blue-600 flex items-center mt-1",children:[r.jsx(Ot,{className:"h-3 w-3 mr-1"}),"All contracts"]})]})]}),r.jsxs(fe,{className:"shadow-sm border-0 bg-gradient-to-br from-green-50 to-green-100/50",children:[r.jsxs(we,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(Ne,{className:"text-sm font-medium text-green-900",children:"Active"}),r.jsx(D0,{className:"h-4 w-4 text-green-600"})]}),r.jsxs(me,{children:[r.jsx("div",{className:"text-2xl font-bold text-green-900",children:e.filter(o=>o.status===Fi.ACTIVE).length}),r.jsxs("p",{className:"text-xs text-green-600 flex items-center mt-1",children:[r.jsx(Ot,{className:"h-3 w-3 mr-1"}),"Currently active"]})]})]}),r.jsxs(fe,{className:"shadow-sm border-0 bg-gradient-to-br from-yellow-50 to-yellow-100/50",children:[r.jsxs(we,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(Ne,{className:"text-sm font-medium text-yellow-900",children:"Pending"}),r.jsx(D0,{className:"h-4 w-4 text-yellow-600"})]}),r.jsxs(me,{children:[r.jsx("div",{className:"text-2xl font-bold text-yellow-900",children:e.filter(o=>o.status===Fi.PENDING).length}),r.jsxs("p",{className:"text-xs text-yellow-600 flex items-center mt-1",children:[r.jsx(Mr,{className:"h-3 w-3 mr-1"}),"Awaiting signature"]})]})]}),r.jsxs(fe,{className:"shadow-sm border-0 bg-gradient-to-br from-orange-50 to-orange-100/50",children:[r.jsxs(we,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(Ne,{className:"text-sm font-medium text-orange-900",children:"Expiring Soon"}),r.jsx(Mr,{className:"h-4 w-4 text-orange-600"})]}),r.jsxs(me,{children:[r.jsx("div",{className:"text-2xl font-bold text-orange-900",children:"0"}),r.jsxs("p",{className:"text-xs text-orange-600 flex items-center mt-1",children:[r.jsx(Mr,{className:"h-3 w-3 mr-1"}),"Next 30 days"]})]})]})]}),r.jsxs("div",{className:"flex gap-4",children:[r.jsxs("div",{className:"ri-search-bar",children:[r.jsx(Jn,{className:"ri-search-icon"}),r.jsx(je,{placeholder:"Search agreements...",value:t,onChange:o=>n(o.target.value),className:"ri-search-input shadow-sm"})]}),r.jsxs(J,{variant:"outline",className:"shadow-sm",children:[r.jsx(hs,{className:"h-4 w-4 mr-2"}),"Filter"]})]}),r.jsxs(fe,{className:"shadow-sm",children:[r.jsxs(we,{children:[r.jsx(Ne,{className:"text-xl",children:"Agreements"}),r.jsx(Ue,{children:"Manage contracts, purchase agreements, and legal documents"})]}),r.jsx(me,{children:r.jsx("div",{className:"space-y-4",children:i.map(o=>r.jsxs("div",{className:"ri-table-row",children:[r.jsx("div",{className:"flex items-center space-x-4 flex-1",children:r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[r.jsxs("h3",{className:"font-semibold text-foreground",children:["Agreement #",o.id]}),r.jsx(ze,{className:He("ri-badge-status",s(o.type)),children:o.type.toUpperCase()}),r.jsx(ze,{className:He("ri-badge-status",a(o.status)),children:o.status.toUpperCase()})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm text-muted-foreground",children:[r.jsxs("div",{children:[r.jsx("span",{className:"font-medium",children:"Customer:"})," ",o.customerId]}),r.jsxs("div",{children:[r.jsx("span",{className:"font-medium",children:"Effective:"})," ",lt(o.effectiveDate)]}),r.jsxs("div",{children:[r.jsx("span",{className:"font-medium",children:"Documents:"})," ",o.documents.length]}),o.expirationDate&&r.jsxs("div",{children:[r.jsx("span",{className:"font-medium",children:"Expires:"})," ",lt(o.expirationDate)]})]}),r.jsx("div",{className:"mt-2 bg-muted/30 p-2 rounded-md",children:r.jsx("p",{className:"text-sm text-muted-foreground",children:o.terms})})]})}),r.jsxs("div",{className:"ri-action-buttons",children:[r.jsxs(J,{variant:"outline",size:"sm",className:"shadow-sm",children:[r.jsx(Sl,{className:"h-3 w-3 mr-1"}),"View"]}),r.jsxs(J,{variant:"outline",size:"sm",className:"shadow-sm",children:[r.jsx(Br,{className:"h-3 w-3 mr-1"}),"Edit"]}),r.jsxs(J,{variant:"outline",size:"sm",className:"shadow-sm",children:[r.jsx(ms,{className:"h-3 w-3 mr-1"}),"Download"]})]})]},o.id))})})]})]})}function Qle(){return r.jsxs(Ka,{children:[r.jsx(Vt,{path:"/",element:r.jsx(MI,{})}),r.jsx(Vt,{path:"/*",element:r.jsx(MI,{})})]})}function l8(){const[e,t]=w.useState([]),[n,a]=w.useState(!1);w.useEffect(()=>{s()},[]);const s=()=>{const p=un("renter-insight-service-tickets",[{id:"1",customerId:"cust-1",vehicleId:"veh-1",title:"Annual Maintenance Service",description:"Complete annual maintenance including oil change, filter replacement, and system checks",priority:Qr.MEDIUM,status:ar.IN_PROGRESS,assignedTo:"Tech-001",scheduledDate:new Date("2024-01-20"),parts:[{id:"1",partNumber:"OIL-001",description:"Engine Oil Filter",quantity:1,unitCost:25.99,total:25.99}],labor:[{id:"1",description:"Annual Maintenance",hours:3,rate:85,total:255}],notes:"Customer requested additional inspection of brake system",customFields:{warrantyStatus:"not_covered",estimatedCompletionDate:"2024-01-22",customerAuthorization:!0,technicianNotes:"Check brake pads and rotors during service",customerPortalAccess:!0},createdAt:new Date("2024-01-15"),updatedAt:new Date("2024-01-18")},{id:"2",customerId:"cust-2",vehicleId:"veh-2",title:"AC System Repair",description:"Air conditioning not cooling properly, needs diagnostic and repair",priority:Qr.HIGH,status:ar.WAITING_PARTS,assignedTo:"Tech-002",scheduledDate:new Date("2024-01-22"),parts:[{id:"2",partNumber:"AC-COMP-001",description:"AC Compressor",quantity:1,unitCost:450,total:450}],labor:[{id:"2",description:"AC System Diagnostic",hours:2,rate:85,total:170}],notes:"Waiting for compressor part to arrive",customFields:{warrantyStatus:"partial",estimatedCompletionDate:"2024-01-25",customerAuthorization:!0,technicianNotes:"Compressor needs replacement, on order from supplier",customerPortalAccess:!0},createdAt:new Date("2024-01-12"),updatedAt:new Date("2024-01-16")}]);t(p)},i=p=>{Wr("renter-insight-service-tickets",p)};return{tickets:e,loading:n,getTicketsByCustomerId:p=>e.filter(v=>v.customerId===p),getTicketsByVehicleId:p=>e.filter(v=>v.vehicleId===p),getTicketById:p=>e.find(v=>v.id===p),createTicket:async p=>{a(!0);try{const v={id:Math.random().toString(36).substr(2,9),customerId:p.customerId||"",vehicleId:p.vehicleId,title:p.title||"",description:p.description||"",priority:p.priority||Qr.MEDIUM,status:p.status||ar.OPEN,assignedTo:p.assignedTo,scheduledDate:p.scheduledDate,parts:p.parts||[],labor:p.labor||[],notes:p.notes||"",customFields:p.customFields||{},createdAt:new Date,updatedAt:new Date},y=[...e,v];return t(y),i(y),v}finally{a(!1)}},updateTicket:async(p,v)=>{const y=e.map(b=>b.id===p?{...b,...v,updatedAt:new Date}:b);t(y),i(y)},deleteTicket:async p=>{const v=e.filter(y=>y.id!==p);t(v),i(v)},updateTicketStatus:async(p,v)=>{const y=e.map(b=>b.id===p?{...b,status:v,completedDate:v===ar.COMPLETED?new Date:b.completedDate,updatedAt:new Date}:b);t(y),i(y)},assignTechnician:async(p,v)=>{const y=e.map(b=>b.id===p?{...b,assignedTo:v,updatedAt:new Date}:b);t(y),i(y)},addPart:async(p,v)=>{if(!e.find(C=>C.id===p))return null;const b={id:Math.random().toString(36).substr(2,9),partNumber:v.partNumber||"",description:v.description||"",quantity:v.quantity||1,unitCost:v.unitCost||0,total:v.total||0},j=e.map(C=>C.id===p?{...C,parts:[...C.parts,b],updatedAt:new Date}:C);return t(j),i(j),b},addLabor:async(p,v)=>{if(!e.find(C=>C.id===p))return null;const b={id:Math.random().toString(36).substr(2,9),description:v.description||"",hours:v.hours||1,rate:v.rate||85,total:v.total||85},j=e.map(C=>C.id===p?{...C,labor:[...C.labor,b],updatedAt:new Date}:C);return t(j),i(j),b}}}function Jle({ticket:e,onSave:t,onCancel:n}){var k,L,$,M,B,U,W;const{toast:a}=Ct(),{vehicles:s}=Ol(),{leads:i}=ro(),[o,l]=w.useState(!1),[c,d]=w.useState(!1),[f,u]=w.useState({customerId:"",vehicleId:"",title:"",description:"",priority:Qr.MEDIUM,status:ar.OPEN,assignedTo:"",scheduledDate:void 0,notes:"",parts:[],labor:[],customFields:{warrantyStatus:"not_covered",estimatedCompletionDate:"",customerAuthorization:!1,technicianNotes:"",customerPortalAccess:!0}}),[m,h]=w.useState(!1),[x,g]=w.useState(!1),[p,v]=w.useState({partNumber:"",description:"",quantity:1,unitCost:0,total:0}),[y,b]=w.useState({description:"",hours:1,rate:85,total:85});w.useEffect(()=>{var q,R,V,G,ee;e&&u({...e,customFields:{...e.customFields,warrantyStatus:((q=e.customFields)==null?void 0:q.warrantyStatus)||"not_covered",estimatedCompletionDate:((R=e.customFields)==null?void 0:R.estimatedCompletionDate)||"",customerAuthorization:((V=e.customFields)==null?void 0:V.customerAuthorization)||!1,technicianNotes:((G=e.customFields)==null?void 0:G.technicianNotes)||"",customerPortalAccess:((ee=e.customFields)==null?void 0:ee.customerPortalAccess)!==!1}})},[e]),w.useEffect(()=>{const q=p.quantity||1,R=p.unitCost||0;v(V=>({...V,total:q*R}))},[p.quantity,p.unitCost]),w.useEffect(()=>{const q=y.hours||1,R=y.rate||85;b(V=>({...V,total:q*R}))},[y.hours,y.rate]);const j=async q=>{if(q.preventDefault(),!f.customerId||!f.title||!f.description){a({title:"Validation Error",description:"Please fill in all required fields",variant:"destructive"});return}l(!0);try{await t(f),a({title:"Success",description:`Service ticket ${e?"updated":"created"} successfully`})}catch{a({title:"Error",description:`Failed to ${e?"update":"create"} service ticket`,variant:"destructive"})}finally{l(!1)}},C=q=>{q==="add-new"?d(!0):u(R=>({...R,customerId:q}))},E=q=>{u(R=>({...R,customerId:q.id})),d(!1),a({title:"Customer Added",description:`${q.firstName} ${q.lastName} has been added as a customer.`})},S=()=>{if(!p.partNumber||!p.description){a({title:"Validation Error",description:"Part number and description are required",variant:"destructive"});return}const q={id:Math.random().toString(36).substr(2,9),partNumber:p.partNumber||"",description:p.description||"",quantity:p.quantity||1,unitCost:p.unitCost||0,total:p.total||0};u(R=>({...R,parts:[...R.parts||[],q]})),v({partNumber:"",description:"",quantity:1,unitCost:0,total:0}),h(!1)},N=q=>{u(R=>{var V;return{...R,parts:((V=R.parts)==null?void 0:V.filter(G=>G.id!==q))||[]}})},I=()=>{if(!y.description){a({title:"Validation Error",description:"Labor description is required",variant:"destructive"});return}const q={id:Math.random().toString(36).substr(2,9),description:y.description||"",hours:y.hours||1,rate:y.rate||85,total:y.total||85};u(R=>({...R,labor:[...R.labor||[],q]})),b({description:"",hours:1,rate:85,total:85}),g(!1)},D=q=>{u(R=>{var V;return{...R,labor:((V=R.labor)==null?void 0:V.filter(G=>G.id!==q))||[]}})},A=(()=>{var V,G;const q=((V=f.parts)==null?void 0:V.reduce((ee,re)=>ee+re.total,0))||0,R=((G=f.labor)==null?void 0:G.reduce((ee,re)=>ee+re.total,0))||0;return{partsTotal:q,laborTotal:R,grandTotal:q+R}})(),_=[{id:"Tech-001",name:"John Smith"},{id:"Tech-002",name:"Sarah Johnson"},{id:"Tech-003",name:"Mike Davis"}];return r.jsxs("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:[c&&r.jsx(Wm,{onClose:()=>d(!1),onSuccess:E}),r.jsxs(fe,{className:"w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[r.jsx(we,{children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx(Ne,{children:e?"Edit Service Ticket":"Create Service Ticket"}),r.jsx(Ue,{children:e?"Update service ticket details":"Create a new service ticket"})]}),r.jsx(J,{variant:"ghost",size:"sm",onClick:n,children:r.jsx($t,{className:"h-4 w-4"})})]})}),r.jsx(me,{children:r.jsxs("form",{onSubmit:j,className:"space-y-6",children:[r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"text-lg font-semibold",children:"Ticket Information"}),r.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"customerId",children:"Customer *"}),r.jsxs($e,{value:f.customerId,onValueChange:C,children:[r.jsx(Fe,{children:r.jsx(Be,{placeholder:"Select customer"})}),r.jsxs(Me,{children:[r.jsx("div",{className:"px-2 py-1.5",children:r.jsxs(J,{variant:"outline",size:"sm",className:"w-full justify-start",onClick:()=>C("add-new"),children:[r.jsx(Nt,{className:"h-3.5 w-3.5 mr-2"}),"Add New Customer"]})}),r.jsx("div",{className:"px-2 py-1 border-t"}),i.map(q=>r.jsxs(K,{value:q.id,children:[q.firstName," ",q.lastName]},q.id))]})]})]}),r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"vehicleId",children:"Vehicle"}),r.jsxs($e,{value:f.vehicleId,onValueChange:q=>u(R=>({...R,vehicleId:q})),children:[r.jsx(Fe,{children:r.jsx(Be,{placeholder:"Select vehicle (optional)"})}),r.jsxs(Me,{children:[r.jsx(K,{value:"",children:"No Vehicle"}),s.map(q=>r.jsxs(K,{value:q.id,children:[q.year," ",q.make," ",q.model]},q.id))]})]})]})]}),r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"title",children:"Service Title *"}),r.jsx(je,{id:"title",value:f.title,onChange:q=>u(R=>({...R,title:q.target.value})),placeholder:"e.g., Annual Maintenance Service"})]}),r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"description",children:"Description *"}),r.jsx(Xt,{id:"description",value:f.description,onChange:q=>u(R=>({...R,description:q.target.value})),placeholder:"Describe the service needed",rows:3})]}),r.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"priority",children:"Priority"}),r.jsxs($e,{value:f.priority,onValueChange:q=>u(R=>({...R,priority:q})),children:[r.jsx(Fe,{children:r.jsx(Be,{})}),r.jsxs(Me,{children:[r.jsx(K,{value:Qr.LOW,children:"Low"}),r.jsx(K,{value:Qr.MEDIUM,children:"Medium"}),r.jsx(K,{value:Qr.HIGH,children:"High"}),r.jsx(K,{value:Qr.URGENT,children:"Urgent"})]})]})]}),r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"status",children:"Status"}),r.jsxs($e,{value:f.status,onValueChange:q=>u(R=>({...R,status:q})),children:[r.jsx(Fe,{children:r.jsx(Be,{})}),r.jsxs(Me,{children:[r.jsx(K,{value:ar.OPEN,children:"Open"}),r.jsx(K,{value:ar.IN_PROGRESS,children:"In Progress"}),r.jsx(K,{value:ar.WAITING_PARTS,children:"Waiting for Parts"}),r.jsx(K,{value:ar.COMPLETED,children:"Completed"}),r.jsx(K,{value:ar.CANCELLED,children:"Cancelled"})]})]})]}),r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"assignedTo",children:"Assigned Technician"}),r.jsxs($e,{value:f.assignedTo,onValueChange:q=>u(R=>({...R,assignedTo:q})),children:[r.jsx(Fe,{children:r.jsx(Be,{placeholder:"Select technician"})}),r.jsxs(Me,{children:[r.jsx(K,{value:"",children:"Unassigned"}),_.map(q=>r.jsx(K,{value:q.id,children:q.name},q.id))]})]})]})]}),r.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"scheduledDate",children:"Scheduled Date"}),r.jsx(je,{id:"scheduledDate",type:"date",value:f.scheduledDate?new Date(f.scheduledDate).toISOString().split("T")[0]:"",onChange:q=>u(R=>({...R,scheduledDate:q.target.value?new Date(q.target.value):void 0}))})]}),r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"estimatedCompletionDate",children:"Estimated Completion"}),r.jsx(je,{id:"estimatedCompletionDate",type:"date",value:((k=f.customFields)==null?void 0:k.estimatedCompletionDate)||"",onChange:q=>u(R=>({...R,customFields:{...R.customFields,estimatedCompletionDate:q.target.value}}))})]})]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"text-lg font-semibold",children:"Warranty Information"}),r.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"warrantyStatus",children:"Warranty Status"}),r.jsxs($e,{value:((L=f.customFields)==null?void 0:L.warrantyStatus)||"not_covered",onValueChange:q=>u(R=>({...R,customFields:{...R.customFields,warrantyStatus:q}})),children:[r.jsx(Fe,{children:r.jsx(Be,{})}),r.jsxs(Me,{children:[r.jsx(K,{value:"covered",children:"Covered by Warranty"}),r.jsx(K,{value:"partial",children:"Partially Covered"}),r.jsx(K,{value:"not_covered",children:"Not Covered"}),r.jsx(K,{value:"extended",children:"Extended Warranty"}),r.jsx(K,{value:"expired",children:"Warranty Expired"})]})]})]}),r.jsxs("div",{className:"flex items-center space-x-2 pt-8",children:[r.jsx(St,{id:"customerAuthorization",checked:(($=f.customFields)==null?void 0:$.customerAuthorization)||!1,onCheckedChange:q=>u(R=>({...R,customFields:{...R.customFields,customerAuthorization:!!q}}))}),r.jsx(Z,{htmlFor:"customerAuthorization",children:"Customer has authorized work"})]})]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h3",{className:"text-lg font-semibold",children:"Parts"}),r.jsxs(J,{type:"button",onClick:()=>h(!0),size:"sm",children:[r.jsx(Nt,{className:"h-4 w-4 mr-2"}),"Add Part"]})]}),m&&r.jsx(fe,{className:"border-dashed",children:r.jsxs(me,{className:"pt-6",children:[r.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"partNumber",children:"Part Number *"}),r.jsx(je,{id:"partNumber",value:p.partNumber,onChange:q=>v(R=>({...R,partNumber:q.target.value})),placeholder:"e.g., AC-COMP-001"})]}),r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"partDescription",children:"Description *"}),r.jsx(je,{id:"partDescription",value:p.description,onChange:q=>v(R=>({...R,description:q.target.value})),placeholder:"e.g., AC Compressor"})]}),r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"partQuantity",children:"Quantity"}),r.jsx(je,{id:"partQuantity",type:"number",min:"1",value:p.quantity,onChange:q=>v(R=>({...R,quantity:parseInt(q.target.value)||1}))})]}),r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"partUnitCost",children:"Unit Cost"}),r.jsx(je,{id:"partUnitCost",type:"number",step:"0.01",min:"0",value:p.unitCost,onChange:q=>v(R=>({...R,unitCost:parseFloat(q.target.value)||0}))})]})]}),r.jsxs("div",{className:"flex justify-between items-center mt-4",children:[r.jsxs("div",{children:[r.jsx("span",{className:"text-sm font-medium",children:"Total: "}),r.jsx("span",{className:"font-bold",children:De(p.total||0)})]}),r.jsxs("div",{className:"flex space-x-2",children:[r.jsx(J,{type:"button",variant:"outline",onClick:()=>h(!1),children:"Cancel"}),r.jsx(J,{type:"button",onClick:S,children:"Add Part"})]})]})]})}),r.jsx("div",{className:"space-y-3",children:f.parts&&f.parts.length>0?f.parts.map(q=>r.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("span",{className:"font-medium",children:q.description}),r.jsx(ze,{variant:"outline",children:q.partNumber})]}),r.jsxs("p",{className:"text-sm text-muted-foreground",children:["Quantity: ",q.quantity," × ",De(q.unitCost)]})]}),r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsx("span",{className:"font-bold",children:De(q.total)}),r.jsx(J,{type:"button",variant:"ghost",size:"sm",onClick:()=>N(q.id),children:r.jsx(wn,{className:"h-4 w-4 text-red-500"})})]})]},q.id)):r.jsxs("div",{className:"text-center py-6 text-muted-foreground border-2 border-dashed rounded-lg",children:[r.jsx(Id,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),r.jsx("p",{children:"No parts added yet"}),r.jsx("p",{className:"text-sm",children:"Add parts needed for this service"})]})})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h3",{className:"text-lg font-semibold",children:"Labor"}),r.jsxs(J,{type:"button",onClick:()=>g(!0),size:"sm",children:[r.jsx(Nt,{className:"h-4 w-4 mr-2"}),"Add Labor"]})]}),x&&r.jsx(fe,{className:"border-dashed",children:r.jsxs(me,{className:"pt-6",children:[r.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[r.jsxs("div",{className:"md:col-span-3",children:[r.jsx(Z,{htmlFor:"laborDescription",children:"Description *"}),r.jsx(je,{id:"laborDescription",value:y.description,onChange:q=>b(R=>({...R,description:q.target.value})),placeholder:"e.g., Diagnostic and Repair"})]}),r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"laborHours",children:"Hours"}),r.jsx(je,{id:"laborHours",type:"number",step:"0.5",min:"0.5",value:y.hours,onChange:q=>b(R=>({...R,hours:parseFloat(q.target.value)||1}))})]}),r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"laborRate",children:"Hourly Rate"}),r.jsx(je,{id:"laborRate",type:"number",step:"0.01",min:"0",value:y.rate,onChange:q=>b(R=>({...R,rate:parseFloat(q.target.value)||85}))})]}),r.jsxs("div",{children:[r.jsx(Z,{children:"Total"}),r.jsx("div",{className:"h-10 px-3 py-2 rounded-md border border-input bg-muted/50 flex items-center",children:De(y.total||0)})]})]}),r.jsxs("div",{className:"flex justify-end space-x-2 mt-4",children:[r.jsx(J,{type:"button",variant:"outline",onClick:()=>g(!1),children:"Cancel"}),r.jsx(J,{type:"button",onClick:I,children:"Add Labor"})]})]})}),r.jsx("div",{className:"space-y-3",children:f.labor&&f.labor.length>0?f.labor.map(q=>r.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("div",{className:"font-medium",children:q.description}),r.jsxs("p",{className:"text-sm text-muted-foreground",children:[q.hours," hours × ",De(q.rate),"/hr"]})]}),r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsx("span",{className:"font-bold",children:De(q.total)}),r.jsx(J,{type:"button",variant:"ghost",size:"sm",onClick:()=>D(q.id),children:r.jsx(wn,{className:"h-4 w-4 text-red-500"})})]})]},q.id)):r.jsxs("div",{className:"text-center py-6 text-muted-foreground border-2 border-dashed rounded-lg",children:[r.jsx(er,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),r.jsx("p",{children:"No labor added yet"}),r.jsx("p",{className:"text-sm",children:"Add labor for this service"})]})})]}),(((M=f.parts)==null?void 0:M.length)>0||((B=f.labor)==null?void 0:B.length)>0)&&r.jsx(fe,{className:"bg-muted/30",children:r.jsx(me,{className:"pt-6",children:r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:"Parts Total:"}),r.jsx("span",{children:De(A.partsTotal)})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:"Labor Total:"}),r.jsx("span",{children:De(A.laborTotal)})]}),r.jsxs("div",{className:"flex justify-between text-lg font-bold border-t pt-2",children:[r.jsx("span",{children:"Grand Total:"}),r.jsx("span",{children:De(A.grandTotal)})]})]})})}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"text-lg font-semibold",children:"Additional Information"}),r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"technicianNotes",children:"Technician Notes"}),r.jsx(Xt,{id:"technicianNotes",value:((U=f.customFields)==null?void 0:U.technicianNotes)||"",onChange:q=>u(R=>({...R,customFields:{...R.customFields,technicianNotes:q.target.value}})),placeholder:"Notes for technicians only (not visible to customer)",rows:3})]}),r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"notes",children:"Customer Notes"}),r.jsx(Xt,{id:"notes",value:f.notes,onChange:q=>u(R=>({...R,notes:q.target.value})),placeholder:"Notes visible to the customer",rows:3})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(St,{id:"customerPortalAccess",checked:((W=f.customFields)==null?void 0:W.customerPortalAccess)!==!1,onCheckedChange:q=>u(R=>({...R,customFields:{...R.customFields,customerPortalAccess:!!q}}))}),r.jsx(Z,{htmlFor:"customerPortalAccess",children:"Allow customer to view this ticket in portal"})]})]}),r.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t",children:[r.jsx(J,{type:"button",variant:"outline",onClick:n,disabled:o,children:"Cancel"}),r.jsx(J,{type:"submit",disabled:o,children:o?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),e?"Updating...":"Creating..."]}):r.jsxs(r.Fragment,{children:[r.jsx(Pr,{className:"h-4 w-4 mr-2"}),e?"Update":"Create"," Ticket"]})})]})]})})]})]})}const Zle="modulepreload",ece=function(e){return"/"+e},$I={},X5=function(t,n,a){if(!n||n.length===0)return t();const s=document.getElementsByTagName("link");return Promise.all(n.map(i=>{if(i=ece(i),i in $I)return;$I[i]=!0;const o=i.endsWith(".css"),l=o?'[rel="stylesheet"]':"";if(!!a)for(let f=s.length-1;f>=0;f--){const u=s[f];if(u.href===i&&(!o||u.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${i}"]${l}`))return;const d=document.createElement("link");if(d.rel=o?"stylesheet":Zle,o||(d.as="script",d.crossOrigin=""),d.href=i,document.head.appendChild(d),o)return new Promise((f,u)=>{d.addEventListener("load",f),d.addEventListener("error",()=>u(new Error(`Unable to preload CSS for ${i}`)))})})).then(()=>t()).catch(i=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=i,window.dispatchEvent(o),!o.defaultPrevented)throw i})};var _a=Uint8Array,Ds=Uint16Array,M4=Int32Array,R1=new _a([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),F1=new _a([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Q5=new _a([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),c8=function(e,t){for(var n=new Ds(31),a=0;a<31;++a)n[a]=t+=1<<e[a-1];for(var s=new M4(n[30]),a=1;a<30;++a)for(var i=n[a];i<n[a+1];++i)s[i]=i-n[a]<<5|a;return{b:n,r:s}},d8=c8(R1,2),u8=d8.b,J5=d8.r;u8[28]=258,J5[258]=28;var f8=c8(F1,0),tce=f8.b,BI=f8.r,Z5=new Ds(32768);for(var Jr=0;Jr<32768;++Jr){var ec=(Jr&43690)>>1|(Jr&21845)<<1;ec=(ec&52428)>>2|(ec&13107)<<2,ec=(ec&61680)>>4|(ec&3855)<<4,Z5[Jr]=((ec&65280)>>8|(ec&255)<<8)>>1}var Lo=function(e,t,n){for(var a=e.length,s=0,i=new Ds(t);s<a;++s)e[s]&&++i[e[s]-1];var o=new Ds(t);for(s=1;s<t;++s)o[s]=o[s-1]+i[s-1]<<1;var l;if(n){l=new Ds(1<<t);var c=15-t;for(s=0;s<a;++s)if(e[s])for(var d=s<<4|e[s],f=t-e[s],u=o[e[s]-1]++<<f,m=u|(1<<f)-1;u<=m;++u)l[Z5[u]>>c]=d}else for(l=new Ds(a),s=0;s<a;++s)e[s]&&(l[s]=Z5[o[e[s]-1]++]>>15-e[s]);return l},qc=new _a(288);for(var Jr=0;Jr<144;++Jr)qc[Jr]=8;for(var Jr=144;Jr<256;++Jr)qc[Jr]=9;for(var Jr=256;Jr<280;++Jr)qc[Jr]=7;for(var Jr=280;Jr<288;++Jr)qc[Jr]=8;var hv=new _a(32);for(var Jr=0;Jr<32;++Jr)hv[Jr]=5;var rce=Lo(qc,9,0),nce=Lo(qc,9,1),ace=Lo(hv,5,0),sce=Lo(hv,5,1),E2=function(e){for(var t=e[0],n=1;n<e.length;++n)e[n]>t&&(t=e[n]);return t},Oi=function(e,t,n){var a=t/8|0;return(e[a]|e[a+1]<<8)>>(t&7)&n},P2=function(e,t){var n=t/8|0;return(e[n]|e[n+1]<<8|e[n+2]<<16)>>(t&7)},$4=function(e){return(e+7)/8|0},m8=function(e,t,n){return(t==null||t<0)&&(t=0),(n==null||n>e.length)&&(n=e.length),new _a(e.subarray(t,n))},ice=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Mi=function(e,t,n){var a=new Error(t||ice[e]);if(a.code=e,Error.captureStackTrace&&Error.captureStackTrace(a,Mi),!n)throw a;return a},oce=function(e,t,n,a){var s=e.length,i=a?a.length:0;if(!s||t.f&&!t.l)return n||new _a(0);var o=!n,l=o||t.i!=2,c=t.i;o&&(n=new _a(s*3));var d=function(ve){var xe=n.length;if(ve>xe){var Oe=new _a(Math.max(xe*2,ve));Oe.set(n),n=Oe}},f=t.f||0,u=t.p||0,m=t.b||0,h=t.l,x=t.d,g=t.m,p=t.n,v=s*8;do{if(!h){f=Oi(e,u,1);var y=Oi(e,u+1,3);if(u+=3,y)if(y==1)h=nce,x=sce,g=9,p=5;else if(y==2){var E=Oi(e,u,31)+257,S=Oi(e,u+10,15)+4,N=E+Oi(e,u+5,31)+1;u+=14;for(var I=new _a(N),D=new _a(19),T=0;T<S;++T)D[Q5[T]]=Oi(e,u+T*3,7);u+=S*3;for(var A=E2(D),_=(1<<A)-1,k=Lo(D,A,1),T=0;T<N;){var L=k[Oi(e,u,_)];u+=L&15;var b=L>>4;if(b<16)I[T++]=b;else{var $=0,M=0;for(b==16?(M=3+Oi(e,u,3),u+=2,$=I[T-1]):b==17?(M=3+Oi(e,u,7),u+=3):b==18&&(M=11+Oi(e,u,127),u+=7);M--;)I[T++]=$}}var B=I.subarray(0,E),U=I.subarray(E);g=E2(B),p=E2(U),h=Lo(B,g,1),x=Lo(U,p,1)}else Mi(1);else{var b=$4(u)+4,j=e[b-4]|e[b-3]<<8,C=b+j;if(C>s){c&&Mi(0);break}l&&d(m+j),n.set(e.subarray(b,C),m),t.b=m+=j,t.p=u=C*8,t.f=f;continue}if(u>v){c&&Mi(0);break}}l&&d(m+131072);for(var W=(1<<g)-1,q=(1<<p)-1,R=u;;R=u){var $=h[P2(e,u)&W],V=$>>4;if(u+=$&15,u>v){c&&Mi(0);break}if($||Mi(2),V<256)n[m++]=V;else if(V==256){R=u,h=null;break}else{var G=V-254;if(V>264){var T=V-257,ee=R1[T];G=Oi(e,u,(1<<ee)-1)+u8[T],u+=ee}var re=x[P2(e,u)&q],de=re>>4;re||Mi(3),u+=re&15;var U=tce[de];if(de>3){var ee=F1[de];U+=P2(e,u)&(1<<ee)-1,u+=ee}if(u>v){c&&Mi(0);break}l&&d(m+131072);var ue=m+G;if(m<U){var oe=i-U,ge=Math.min(U,ue);for(oe+m<0&&Mi(3);m<ge;++m)n[m]=a[oe+m]}for(;m<ue;++m)n[m]=n[m-U]}}t.l=h,t.p=R,t.b=m,t.f=f,h&&(f=1,t.m=g,t.d=x,t.n=p)}while(!f);return m!=n.length&&o?m8(n,0,m):n.subarray(0,m)},al=function(e,t,n){n<<=t&7;var a=t/8|0;e[a]|=n,e[a+1]|=n>>8},ep=function(e,t,n){n<<=t&7;var a=t/8|0;e[a]|=n,e[a+1]|=n>>8,e[a+2]|=n>>16},T2=function(e,t){for(var n=[],a=0;a<e.length;++a)e[a]&&n.push({s:a,f:e[a]});var s=n.length,i=n.slice();if(!s)return{t:p8,l:0};if(s==1){var o=new _a(n[0].s+1);return o[n[0].s]=1,{t:o,l:1}}n.sort(function(C,E){return C.f-E.f}),n.push({s:-1,f:25001});var l=n[0],c=n[1],d=0,f=1,u=2;for(n[0]={s:-1,f:l.f+c.f,l,r:c};f!=s-1;)l=n[n[d].f<n[u].f?d++:u++],c=n[d!=f&&n[d].f<n[u].f?d++:u++],n[f++]={s:-1,f:l.f+c.f,l,r:c};for(var m=i[0].s,a=1;a<s;++a)i[a].s>m&&(m=i[a].s);var h=new Ds(m+1),x=eS(n[f-1],h,0);if(x>t){var a=0,g=0,p=x-t,v=1<<p;for(i.sort(function(E,S){return h[S.s]-h[E.s]||E.f-S.f});a<s;++a){var y=i[a].s;if(h[y]>t)g+=v-(1<<x-h[y]),h[y]=t;else break}for(g>>=p;g>0;){var b=i[a].s;h[b]<t?g-=1<<t-h[b]++-1:++a}for(;a>=0&&g;--a){var j=i[a].s;h[j]==t&&(--h[j],++g)}x=t}return{t:new _a(h),l:x}},eS=function(e,t,n){return e.s==-1?Math.max(eS(e.l,t,n+1),eS(e.r,t,n+1)):t[e.s]=n},zI=function(e){for(var t=e.length;t&&!e[--t];);for(var n=new Ds(++t),a=0,s=e[0],i=1,o=function(c){n[a++]=c},l=1;l<=t;++l)if(e[l]==s&&l!=t)++i;else{if(!s&&i>2){for(;i>138;i-=138)o(32754);i>2&&(o(i>10?i-11<<5|28690:i-3<<5|12305),i=0)}else if(i>3){for(o(s),--i;i>6;i-=6)o(8304);i>2&&(o(i-3<<5|8208),i=0)}for(;i--;)o(s);i=1,s=e[l]}return{c:n.subarray(0,a),n:t}},tp=function(e,t){for(var n=0,a=0;a<t.length;++a)n+=e[a]*t[a];return n},h8=function(e,t,n){var a=n.length,s=$4(t+2);e[s]=a&255,e[s+1]=a>>8,e[s+2]=e[s]^255,e[s+3]=e[s+1]^255;for(var i=0;i<a;++i)e[s+i+4]=n[i];return(s+4+a)*8},UI=function(e,t,n,a,s,i,o,l,c,d,f){al(t,f++,n),++s[256];for(var u=T2(s,15),m=u.t,h=u.l,x=T2(i,15),g=x.t,p=x.l,v=zI(m),y=v.c,b=v.n,j=zI(g),C=j.c,E=j.n,S=new Ds(19),N=0;N<y.length;++N)++S[y[N]&31];for(var N=0;N<C.length;++N)++S[C[N]&31];for(var I=T2(S,7),D=I.t,T=I.l,A=19;A>4&&!D[Q5[A-1]];--A);var _=d+5<<3,k=tp(s,qc)+tp(i,hv)+o,L=tp(s,m)+tp(i,g)+o+14+3*A+tp(S,D)+2*S[16]+3*S[17]+7*S[18];if(c>=0&&_<=k&&_<=L)return h8(t,f,e.subarray(c,c+d));var $,M,B,U;if(al(t,f,1+(L<k)),f+=2,L<k){$=Lo(m,h,0),M=m,B=Lo(g,p,0),U=g;var W=Lo(D,T,0);al(t,f,b-257),al(t,f+5,E-1),al(t,f+10,A-4),f+=14;for(var N=0;N<A;++N)al(t,f+3*N,D[Q5[N]]);f+=3*A;for(var q=[y,C],R=0;R<2;++R)for(var V=q[R],N=0;N<V.length;++N){var G=V[N]&31;al(t,f,W[G]),f+=D[G],G>15&&(al(t,f,V[N]>>5&127),f+=V[N]>>12)}}else $=rce,M=qc,B=ace,U=hv;for(var N=0;N<l;++N){var ee=a[N];if(ee>255){var G=ee>>18&31;ep(t,f,$[G+257]),f+=M[G+257],G>7&&(al(t,f,ee>>23&31),f+=R1[G]);var re=ee&31;ep(t,f,B[re]),f+=U[re],re>3&&(ep(t,f,ee>>5&8191),f+=F1[re])}else ep(t,f,$[ee]),f+=M[ee]}return ep(t,f,$[256]),f+M[256]},lce=new M4([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),p8=new _a(0),cce=function(e,t,n,a,s,i){var o=i.z||e.length,l=new _a(a+o+5*(1+Math.ceil(o/7e3))+s),c=l.subarray(a,l.length-s),d=i.l,f=(i.r||0)&7;if(t){f&&(c[0]=i.r>>3);for(var u=lce[t-1],m=u>>13,h=u&8191,x=(1<<n)-1,g=i.p||new Ds(32768),p=i.h||new Ds(x+1),v=Math.ceil(n/3),y=2*v,b=function(ye){return(e[ye]^e[ye+1]<<v^e[ye+2]<<y)&x},j=new M4(25e3),C=new Ds(288),E=new Ds(32),S=0,N=0,I=i.i||0,D=0,T=i.w||0,A=0;I+2<o;++I){var _=b(I),k=I&32767,L=p[_];if(g[k]=L,p[_]=k,T<=I){var $=o-I;if((S>7e3||D>24576)&&($>423||!d)){f=UI(e,c,0,j,C,E,N,D,A,I-A,f),D=S=N=0,A=I;for(var M=0;M<286;++M)C[M]=0;for(var M=0;M<30;++M)E[M]=0}var B=2,U=0,W=h,q=k-L&32767;if($>2&&_==b(I-q))for(var R=Math.min(m,$)-1,V=Math.min(32767,I),G=Math.min(258,$);q<=V&&--W&&k!=L;){if(e[I+B]==e[I+B-q]){for(var ee=0;ee<G&&e[I+ee]==e[I+ee-q];++ee);if(ee>B){if(B=ee,U=q,ee>R)break;for(var re=Math.min(q,ee-2),de=0,M=0;M<re;++M){var ue=I-q+M&32767,oe=g[ue],ge=ue-oe&32767;ge>de&&(de=ge,L=ue)}}}k=L,L=g[k],q+=k-L&32767}if(U){j[D++]=268435456|J5[B]<<18|BI[U];var ve=J5[B]&31,xe=BI[U]&31;N+=R1[ve]+F1[xe],++C[257+ve],++E[xe],T=I+B,++S}else j[D++]=e[I],++C[e[I]]}}for(I=Math.max(I,T);I<o;++I)j[D++]=e[I],++C[e[I]];f=UI(e,c,d,j,C,E,N,D,A,I-A,f),d||(i.r=f&7|c[f/8|0]<<3,f-=7,i.h=p,i.p=g,i.i=I,i.w=T)}else{for(var I=i.w||0;I<o+d;I+=65535){var Oe=I+65535;Oe>=o&&(c[f/8|0]=d,Oe=o),f=h8(c,f+1,e.subarray(I,Oe))}i.i=o}return m8(l,0,a+$4(f)+s)},v8=function(){var e=1,t=0;return{p:function(n){for(var a=e,s=t,i=n.length|0,o=0;o!=i;){for(var l=Math.min(o+2655,i);o<l;++o)s+=a+=n[o];a=(a&65535)+15*(a>>16),s=(s&65535)+15*(s>>16)}e=a,t=s},d:function(){return e%=65521,t%=65521,(e&255)<<24|(e&65280)<<8|(t&255)<<8|t>>8}}},dce=function(e,t,n,a,s){if(!s&&(s={l:1},t.dictionary)){var i=t.dictionary.subarray(-32768),o=new _a(i.length+e.length);o.set(i),o.set(e,i.length),e=o,s.w=i.length}return cce(e,t.level==null?6:t.level,t.mem==null?s.l?Math.ceil(Math.max(8,Math.min(13,Math.log(e.length)))*1.5):20:12+t.mem,n,a,s)},x8=function(e,t,n){for(;n;++t)e[t]=n,n>>>=8},uce=function(e,t){var n=t.level,a=n==0?0:n<6?1:n==9?3:2;if(e[0]=120,e[1]=a<<6|(t.dictionary&&32),e[1]|=31-(e[0]<<8|e[1])%31,t.dictionary){var s=v8();s.p(t.dictionary),x8(e,2,s.d())}},fce=function(e,t){return((e[0]&15)!=8||e[0]>>4>7||(e[0]<<8|e[1])%31)&&Mi(6,"invalid zlib data"),(e[1]>>5&1)==+!t&&Mi(6,"invalid zlib data: "+(e[1]&32?"need":"unexpected")+" dictionary"),(e[1]>>3&4)+2};function tS(e,t){t||(t={});var n=v8();n.p(e);var a=dce(e,t,t.dictionary?6:2,4);return uce(a,t),x8(a,a.length-4,n.d()),a}function mce(e,t){return oce(e.subarray(fce(e,t&&t.dictionary),-4),{i:2},t&&t.out,t&&t.dictionary)}var hce=typeof TextDecoder<"u"&&new TextDecoder,pce=0;try{hce.decode(p8,{stream:!0}),pce=1}catch{}var Ft=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function I2(){Ft.console&&typeof Ft.console.log=="function"&&Ft.console.log.apply(Ft.console,arguments)}var Lr={log:I2,warn:function(e){Ft.console&&(typeof Ft.console.warn=="function"?Ft.console.warn.apply(Ft.console,arguments):I2.call(null,arguments))},error:function(e){Ft.console&&(typeof Ft.console.error=="function"?Ft.console.error.apply(Ft.console,arguments):I2(e))}};function D2(e,t,n){var a=new XMLHttpRequest;a.open("GET",e),a.responseType="blob",a.onload=function(){bd(a.response,t,n)},a.onerror=function(){Lr.error("could not download file")},a.send()}function VI(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch{}return t.status>=200&&t.status<=299}function e0(e){try{e.dispatchEvent(new MouseEvent("click"))}catch{var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var Ip,rS,bd=Ft.saveAs||((typeof window>"u"?"undefined":xr(window))!=="object"||window!==Ft?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(e,t,n){var a=Ft.URL||Ft.webkitURL,s=document.createElement("a");t=t||e.name||"download",s.download=t,s.rel="noopener",typeof e=="string"?(s.href=e,s.origin!==location.origin?VI(s.href)?D2(e,t,n):e0(s,s.target="_blank"):e0(s)):(s.href=a.createObjectURL(e),setTimeout(function(){a.revokeObjectURL(s.href)},4e4),setTimeout(function(){e0(s)},0))}:"msSaveOrOpenBlob"in navigator?function(e,t,n){if(t=t||e.name||"download",typeof e=="string")if(VI(e))D2(e,t,n);else{var a=document.createElement("a");a.href=e,a.target="_blank",setTimeout(function(){e0(a)})}else navigator.msSaveOrOpenBlob(function(s,i){return i===void 0?i={autoBom:!1}:xr(i)!=="object"&&(Lr.warn("Deprecated: Expected third argument to be a object"),i={autoBom:!i}),i.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(s.type)?new Blob([String.fromCharCode(65279),s],{type:s.type}):s}(e,n),t)}:function(e,t,n,a){if((a=a||open("","_blank"))&&(a.document.title=a.document.body.innerText="downloading..."),typeof e=="string")return D2(e,t,n);var s=e.type==="application/octet-stream",i=/constructor/i.test(Ft.HTMLElement)||Ft.safari,o=/CriOS\/[\d]+/.test(navigator.userAgent);if((o||s&&i)&&(typeof FileReader>"u"?"undefined":xr(FileReader))==="object"){var l=new FileReader;l.onloadend=function(){var f=l.result;f=o?f:f.replace(/^data:[^;]*;/,"data:attachment/file;"),a?a.location.href=f:location=f,a=null},l.readAsDataURL(e)}else{var c=Ft.URL||Ft.webkitURL,d=c.createObjectURL(e);a?a.location=d:location.href=d,a=null,setTimeout(function(){c.revokeObjectURL(d)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function g8(e){var t;e=e||"",this.ok=!1,e.charAt(0)=="#"&&(e=e.substr(1,6)),e={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[e=(e=e.replace(/ /g,"")).toLowerCase()]||e;for(var n=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(l){return[parseInt(l[1]),parseInt(l[2]),parseInt(l[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(l){return[parseInt(l[1],16),parseInt(l[2],16),parseInt(l[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(l){return[parseInt(l[1]+l[1],16),parseInt(l[2]+l[2],16),parseInt(l[3]+l[3],16)]}}],a=0;a<n.length;a++){var s=n[a].re,i=n[a].process,o=s.exec(e);o&&(t=i(o),this.r=t[0],this.g=t[1],this.b=t[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var l=this.r.toString(16),c=this.g.toString(16),d=this.b.toString(16);return l.length==1&&(l="0"+l),c.length==1&&(c="0"+c),d.length==1&&(d="0"+d),"#"+l+c+d}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function k2(e,t){var n=e[0],a=e[1],s=e[2],i=e[3];n=Ea(n,a,s,i,t[0],7,-680876936),i=Ea(i,n,a,s,t[1],12,-389564586),s=Ea(s,i,n,a,t[2],17,606105819),a=Ea(a,s,i,n,t[3],22,-1044525330),n=Ea(n,a,s,i,t[4],7,-176418897),i=Ea(i,n,a,s,t[5],12,1200080426),s=Ea(s,i,n,a,t[6],17,-1473231341),a=Ea(a,s,i,n,t[7],22,-45705983),n=Ea(n,a,s,i,t[8],7,1770035416),i=Ea(i,n,a,s,t[9],12,-1958414417),s=Ea(s,i,n,a,t[10],17,-42063),a=Ea(a,s,i,n,t[11],22,-1990404162),n=Ea(n,a,s,i,t[12],7,1804603682),i=Ea(i,n,a,s,t[13],12,-40341101),s=Ea(s,i,n,a,t[14],17,-1502002290),n=Pa(n,a=Ea(a,s,i,n,t[15],22,1236535329),s,i,t[1],5,-165796510),i=Pa(i,n,a,s,t[6],9,-1069501632),s=Pa(s,i,n,a,t[11],14,643717713),a=Pa(a,s,i,n,t[0],20,-373897302),n=Pa(n,a,s,i,t[5],5,-701558691),i=Pa(i,n,a,s,t[10],9,38016083),s=Pa(s,i,n,a,t[15],14,-660478335),a=Pa(a,s,i,n,t[4],20,-405537848),n=Pa(n,a,s,i,t[9],5,568446438),i=Pa(i,n,a,s,t[14],9,-1019803690),s=Pa(s,i,n,a,t[3],14,-187363961),a=Pa(a,s,i,n,t[8],20,1163531501),n=Pa(n,a,s,i,t[13],5,-1444681467),i=Pa(i,n,a,s,t[2],9,-51403784),s=Pa(s,i,n,a,t[7],14,1735328473),n=Ta(n,a=Pa(a,s,i,n,t[12],20,-1926607734),s,i,t[5],4,-378558),i=Ta(i,n,a,s,t[8],11,-2022574463),s=Ta(s,i,n,a,t[11],16,1839030562),a=Ta(a,s,i,n,t[14],23,-35309556),n=Ta(n,a,s,i,t[1],4,-1530992060),i=Ta(i,n,a,s,t[4],11,1272893353),s=Ta(s,i,n,a,t[7],16,-155497632),a=Ta(a,s,i,n,t[10],23,-1094730640),n=Ta(n,a,s,i,t[13],4,681279174),i=Ta(i,n,a,s,t[0],11,-358537222),s=Ta(s,i,n,a,t[3],16,-722521979),a=Ta(a,s,i,n,t[6],23,76029189),n=Ta(n,a,s,i,t[9],4,-640364487),i=Ta(i,n,a,s,t[12],11,-421815835),s=Ta(s,i,n,a,t[15],16,530742520),n=Ia(n,a=Ta(a,s,i,n,t[2],23,-995338651),s,i,t[0],6,-198630844),i=Ia(i,n,a,s,t[7],10,1126891415),s=Ia(s,i,n,a,t[14],15,-1416354905),a=Ia(a,s,i,n,t[5],21,-57434055),n=Ia(n,a,s,i,t[12],6,1700485571),i=Ia(i,n,a,s,t[3],10,-1894986606),s=Ia(s,i,n,a,t[10],15,-1051523),a=Ia(a,s,i,n,t[1],21,-2054922799),n=Ia(n,a,s,i,t[8],6,1873313359),i=Ia(i,n,a,s,t[15],10,-30611744),s=Ia(s,i,n,a,t[6],15,-1560198380),a=Ia(a,s,i,n,t[13],21,1309151649),n=Ia(n,a,s,i,t[4],6,-145523070),i=Ia(i,n,a,s,t[11],10,-1120210379),s=Ia(s,i,n,a,t[2],15,718787259),a=Ia(a,s,i,n,t[9],21,-343485551),e[0]=xc(n,e[0]),e[1]=xc(a,e[1]),e[2]=xc(s,e[2]),e[3]=xc(i,e[3])}function M1(e,t,n,a,s,i){return t=xc(xc(t,e),xc(a,i)),xc(t<<s|t>>>32-s,n)}function Ea(e,t,n,a,s,i,o){return M1(t&n|~t&a,e,t,s,i,o)}function Pa(e,t,n,a,s,i,o){return M1(t&a|n&~a,e,t,s,i,o)}function Ta(e,t,n,a,s,i,o){return M1(t^n^a,e,t,s,i,o)}function Ia(e,t,n,a,s,i,o){return M1(n^(t|~a),e,t,s,i,o)}function y8(e){var t,n=e.length,a=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=e.length;t+=64)k2(a,vce(e.substring(t-64,t)));e=e.substring(t-64);var s=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<e.length;t++)s[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(s[t>>2]|=128<<(t%4<<3),t>55)for(k2(a,s),t=0;t<16;t++)s[t]=0;return s[14]=8*n,k2(a,s),a}function vce(e){var t,n=[];for(t=0;t<64;t+=4)n[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return n}Ip=Ft.atob.bind(Ft),rS=Ft.btoa.bind(Ft);var qI="0123456789abcdef".split("");function xce(e){for(var t="",n=0;n<4;n++)t+=qI[e>>8*n+4&15]+qI[e>>8*n&15];return t}function gce(e){return String.fromCharCode((255&e)>>0,(65280&e)>>8,(16711680&e)>>16,(4278190080&e)>>24)}function nS(e){return y8(e).map(gce).join("")}var yce=function(e){for(var t=0;t<e.length;t++)e[t]=xce(e[t]);return e.join("")}(y8("hello"))!="5d41402abc4b2a76b9719d911017c592";function xc(e,t){if(yce){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}return e+t&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function aS(e,t){var n,a,s,i;if(e!==n){for(var o=(s=e,i=1+(256/e.length>>0),new Array(i+1).join(s)),l=[],c=0;c<256;c++)l[c]=c;var d=0;for(c=0;c<256;c++){var f=l[c];d=(d+f+o.charCodeAt(c))%256,l[c]=l[d],l[d]=f}n=e,a=l}else l=a;var u=t.length,m=0,h=0,x="";for(c=0;c<u;c++)h=(h+(f=l[m=(m+1)%256]))%256,l[m]=l[h],l[h]=f,o=l[(l[m]+l[h])%256],x+=String.fromCharCode(t.charCodeAt(c)^o);return x}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var WI={print:4,modify:8,copy:16,"annot-forms":32};function mf(e,t,n,a){this.v=1,this.r=2;var s=192;e.forEach(function(l){if(WI.perm!==void 0)throw new Error("Invalid permission: "+l);s+=WI[l]}),this.padding="(¿N^NuAd\0NVÿú\b..\0¶Ðh>/\f©þdSiz";var i=(t+this.padding).substr(0,32),o=(n+this.padding).substr(0,32);this.O=this.processOwnerPassword(i,o),this.P=-(1+(255^s)),this.encryptionKey=nS(i+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(a)).substr(0,5),this.U=aS(this.encryptionKey,this.padding)}function hf(e){if(/[^\u0000-\u00ff]/.test(e))throw new Error("Invalid PDF Name Object: "+e+", Only accept ASCII characters.");for(var t="",n=e.length,a=0;a<n;a++){var s=e.charCodeAt(a);s<33||s===35||s===37||s===40||s===41||s===47||s===60||s===62||s===91||s===93||s===123||s===125||s>126?t+="#"+("0"+s.toString(16)).slice(-2):t+=e[a]}return t}function HI(e){if(xr(e)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var t={};this.subscribe=function(n,a,s){if(s=s||!1,typeof n!="string"||typeof a!="function"||typeof s!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");t.hasOwnProperty(n)||(t[n]={});var i=Math.random().toString(35);return t[n][i]=[a,!!s],i},this.unsubscribe=function(n){for(var a in t)if(t[a][n])return delete t[a][n],Object.keys(t[a]).length===0&&delete t[a],!0;return!1},this.publish=function(n){if(t.hasOwnProperty(n)){var a=Array.prototype.slice.call(arguments,1),s=[];for(var i in t[n]){var o=t[n][i];try{o[0].apply(e,a)}catch(l){Ft.console&&Lr.error("jsPDF PubSub Error",l.message,l)}o[1]&&s.push(i)}s.length&&s.forEach(this.unsubscribe)}},this.getTopics=function(){return t}}function pv(e){if(!(this instanceof pv))return new pv(e);var t="opacity,stroke-opacity".split(",");for(var n in e)e.hasOwnProperty(n)&&t.indexOf(n)>=0&&(this[n]=e[n]);this.id="",this.objectNumber=-1}function b8(e,t){this.gState=e,this.matrix=t,this.id="",this.objectNumber=-1}function uc(e,t,n,a,s){if(!(this instanceof uc))return new uc(e,t,n,a,s);this.type=e==="axial"?2:3,this.coords=t,this.colors=n,b8.call(this,a,s)}function _d(e,t,n,a,s){if(!(this instanceof _d))return new _d(e,t,n,a,s);this.boundingBox=e,this.xStep=t,this.yStep=n,this.stream="",this.cloneIndex=0,b8.call(this,a,s)}function It(e){var t,n=typeof arguments[0]=="string"?arguments[0]:"p",a=arguments[1],s=arguments[2],i=arguments[3],o=[],l=1,c=16,d="S",f=null;xr(e=e||{})==="object"&&(n=e.orientation,a=e.unit||a,s=e.format||s,i=e.compress||e.compressPdf||i,(f=e.encryption||null)!==null&&(f.userPassword=f.userPassword||"",f.ownerPassword=f.ownerPassword||"",f.userPermissions=f.userPermissions||[]),l=typeof e.userUnit=="number"?Math.abs(e.userUnit):1,e.precision!==void 0&&(t=e.precision),e.floatPrecision!==void 0&&(c=e.floatPrecision),d=e.defaultPathOperation||"S"),o=e.filters||(i===!0?["FlateEncode"]:o),a=a||"mm",n=(""+(n||"P")).toLowerCase();var u=e.putOnlyUsedFonts||!1,m={},h={internal:{},__private__:{}};h.__private__.PubSub=HI;var x="1.3",g=h.__private__.getPdfVersion=function(){return x};h.__private__.setPdfVersion=function(F){x=F};var p={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};h.__private__.getPageFormats=function(){return p};var v=h.__private__.getPageFormat=function(F){return p[F]};s=s||"a4";var y={COMPAT:"compat",ADVANCED:"advanced"},b=y.COMPAT;function j(){this.saveGraphicsState(),ne(new _t(ot,0,0,-ot,0,$l()*ot).toString()+" cm"),this.setFontSize(this.getFontSize()/ot),d="n",b=y.ADVANCED}function C(){this.restoreGraphicsState(),d="S",b=y.COMPAT}var E=h.__private__.combineFontStyleAndFontWeight=function(F,Q){if(F=="bold"&&Q=="normal"||F=="bold"&&Q==400||F=="normal"&&Q=="italic"||F=="bold"&&Q=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return Q&&(F=Q==400||Q==="normal"?F==="italic"?"italic":"normal":Q!=700&&Q!=="bold"||F!=="normal"?(Q==700?"bold":Q)+""+F:"bold"),F};h.advancedAPI=function(F){var Q=b===y.COMPAT;return Q&&j.call(this),typeof F!="function"||(F(this),Q&&C.call(this)),this},h.compatAPI=function(F){var Q=b===y.ADVANCED;return Q&&C.call(this),typeof F!="function"||(F(this),Q&&j.call(this)),this},h.isAdvancedAPI=function(){return b===y.ADVANCED};var S,N=function(F){if(b!==y.ADVANCED)throw new Error(F+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},I=h.roundToPrecision=h.__private__.roundToPrecision=function(F,Q){var he=t||Q;if(isNaN(F)||isNaN(he))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return F.toFixed(he).replace(/0+$/,"")};S=h.hpf=h.__private__.hpf=typeof c=="number"?function(F){if(isNaN(F))throw new Error("Invalid argument passed to jsPDF.hpf");return I(F,c)}:c==="smart"?function(F){if(isNaN(F))throw new Error("Invalid argument passed to jsPDF.hpf");return I(F,F>-1&&F<1?16:5)}:function(F){if(isNaN(F))throw new Error("Invalid argument passed to jsPDF.hpf");return I(F,16)};var D=h.f2=h.__private__.f2=function(F){if(isNaN(F))throw new Error("Invalid argument passed to jsPDF.f2");return I(F,2)},T=h.__private__.f3=function(F){if(isNaN(F))throw new Error("Invalid argument passed to jsPDF.f3");return I(F,3)},A=h.scale=h.__private__.scale=function(F){if(isNaN(F))throw new Error("Invalid argument passed to jsPDF.scale");return b===y.COMPAT?F*ot:b===y.ADVANCED?F:void 0},_=function(F){return b===y.COMPAT?$l()-F:b===y.ADVANCED?F:void 0},k=function(F){return A(_(F))};h.__private__.setPrecision=h.setPrecision=function(F){typeof parseInt(F,10)=="number"&&(t=parseInt(F,10))};var L,$="00000000000000000000000000000000",M=h.__private__.getFileId=function(){return $},B=h.__private__.setFileId=function(F){return $=F!==void 0&&/^[a-fA-F0-9]{32}$/.test(F)?F.toUpperCase():$.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),f!==null&&(Na=new mf(f.userPermissions,f.userPassword,f.ownerPassword,$)),$};h.setFileId=function(F){return B(F),this},h.getFileId=function(){return M()};var U=h.__private__.convertDateToPDFDate=function(F){var Q=F.getTimezoneOffset(),he=Q<0?"+":"-",Ce=Math.floor(Math.abs(Q/60)),ke=Math.abs(Q%60),We=[he,G(Ce),"'",G(ke),"'"].join("");return["D:",F.getFullYear(),G(F.getMonth()+1),G(F.getDate()),G(F.getHours()),G(F.getMinutes()),G(F.getSeconds()),We].join("")},W=h.__private__.convertPDFDateToDate=function(F){var Q=parseInt(F.substr(2,4),10),he=parseInt(F.substr(6,2),10)-1,Ce=parseInt(F.substr(8,2),10),ke=parseInt(F.substr(10,2),10),We=parseInt(F.substr(12,2),10),tt=parseInt(F.substr(14,2),10);return new Date(Q,he,Ce,ke,We,tt,0)},q=h.__private__.setCreationDate=function(F){var Q;if(F===void 0&&(F=new Date),F instanceof Date)Q=U(F);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(F))throw new Error("Invalid argument passed to jsPDF.setCreationDate");Q=F}return L=Q},R=h.__private__.getCreationDate=function(F){var Q=L;return F==="jsDate"&&(Q=W(L)),Q};h.setCreationDate=function(F){return q(F),this},h.getCreationDate=function(F){return R(F)};var V,G=h.__private__.padd2=function(F){return("0"+parseInt(F)).slice(-2)},ee=h.__private__.padd2Hex=function(F){return("00"+(F=F.toString())).substr(F.length)},re=0,de=[],ue=[],oe=0,ge=[],ve=[],xe=!1,Oe=ue,ye=function(){re=0,oe=0,ue=[],de=[],ge=[],Ko=On(),Ni=On()};h.__private__.setCustomOutputDestination=function(F){xe=!0,Oe=F};var le=function(F){xe||(Oe=F)};h.__private__.resetCustomOutputDestination=function(){xe=!1,Oe=ue};var ne=h.__private__.out=function(F){return F=F.toString(),oe+=F.length+1,Oe.push(F),Oe},Ae=h.__private__.write=function(F){return ne(arguments.length===1?F.toString():Array.prototype.join.call(arguments," "))},Se=h.__private__.getArrayBuffer=function(F){for(var Q=F.length,he=new ArrayBuffer(Q),Ce=new Uint8Array(he);Q--;)Ce[Q]=F.charCodeAt(Q);return he},be=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];h.__private__.getStandardFonts=function(){return be};var Re=e.fontSize||16;h.__private__.setFontSize=h.setFontSize=function(F){return Re=b===y.ADVANCED?F/ot:F,this};var nt,rt=h.__private__.getFontSize=h.getFontSize=function(){return b===y.COMPAT?Re:Re*ot},xt=e.R2L||!1;h.__private__.setR2L=h.setR2L=function(F){return xt=F,this},h.__private__.getR2L=h.getR2L=function(){return xt};var Ve,et=h.__private__.setZoomMode=function(F){var Q=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(F))nt=F;else if(isNaN(F)){if(Q.indexOf(F)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+F+'" is not recognized.');nt=F}else nt=parseInt(F,10)};h.__private__.getZoomMode=function(){return nt};var ut,gt=h.__private__.setPageMode=function(F){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(F)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+F+'" is not recognized.');Ve=F};h.__private__.getPageMode=function(){return Ve};var Dt=h.__private__.setLayoutMode=function(F){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(F)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+F+'" is not recognized.');ut=F};h.__private__.getLayoutMode=function(){return ut},h.__private__.setDisplayMode=h.setDisplayMode=function(F,Q,he){return et(F),Dt(Q),gt(he),this};var At={title:"",subject:"",author:"",keywords:"",creator:""};h.__private__.getDocumentProperty=function(F){if(Object.keys(At).indexOf(F)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return At[F]},h.__private__.getDocumentProperties=function(){return At},h.__private__.setDocumentProperties=h.setProperties=h.setDocumentProperties=function(F){for(var Q in At)At.hasOwnProperty(Q)&&F[Q]&&(At[Q]=F[Q]);return this},h.__private__.setDocumentProperty=function(F,Q){if(Object.keys(At).indexOf(F)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return At[F]=Q};var zt,ot,yr,Qt,zn,br={},Dr={},Qa=[],cr={},Ho={},pn={},ji={},Go=null,vn=0,Wt=[],wr=new HI(h),nd=e.hotfixes||[],da={},oo={},lo=[],_t=function F(Q,he,Ce,ke,We,tt){if(!(this instanceof F))return new F(Q,he,Ce,ke,We,tt);isNaN(Q)&&(Q=1),isNaN(he)&&(he=0),isNaN(Ce)&&(Ce=0),isNaN(ke)&&(ke=1),isNaN(We)&&(We=0),isNaN(tt)&&(tt=0),this._matrix=[Q,he,Ce,ke,We,tt]};Object.defineProperty(_t.prototype,"sx",{get:function(){return this._matrix[0]},set:function(F){this._matrix[0]=F}}),Object.defineProperty(_t.prototype,"shy",{get:function(){return this._matrix[1]},set:function(F){this._matrix[1]=F}}),Object.defineProperty(_t.prototype,"shx",{get:function(){return this._matrix[2]},set:function(F){this._matrix[2]=F}}),Object.defineProperty(_t.prototype,"sy",{get:function(){return this._matrix[3]},set:function(F){this._matrix[3]=F}}),Object.defineProperty(_t.prototype,"tx",{get:function(){return this._matrix[4]},set:function(F){this._matrix[4]=F}}),Object.defineProperty(_t.prototype,"ty",{get:function(){return this._matrix[5]},set:function(F){this._matrix[5]=F}}),Object.defineProperty(_t.prototype,"a",{get:function(){return this._matrix[0]},set:function(F){this._matrix[0]=F}}),Object.defineProperty(_t.prototype,"b",{get:function(){return this._matrix[1]},set:function(F){this._matrix[1]=F}}),Object.defineProperty(_t.prototype,"c",{get:function(){return this._matrix[2]},set:function(F){this._matrix[2]=F}}),Object.defineProperty(_t.prototype,"d",{get:function(){return this._matrix[3]},set:function(F){this._matrix[3]=F}}),Object.defineProperty(_t.prototype,"e",{get:function(){return this._matrix[4]},set:function(F){this._matrix[4]=F}}),Object.defineProperty(_t.prototype,"f",{get:function(){return this._matrix[5]},set:function(F){this._matrix[5]=F}}),Object.defineProperty(_t.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(_t.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(_t.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(_t.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),_t.prototype.join=function(F){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(S).join(F)},_t.prototype.multiply=function(F){var Q=F.sx*this.sx+F.shy*this.shx,he=F.sx*this.shy+F.shy*this.sy,Ce=F.shx*this.sx+F.sy*this.shx,ke=F.shx*this.shy+F.sy*this.sy,We=F.tx*this.sx+F.ty*this.shx+this.tx,tt=F.tx*this.shy+F.ty*this.sy+this.ty;return new _t(Q,he,Ce,ke,We,tt)},_t.prototype.decompose=function(){var F=this.sx,Q=this.shy,he=this.shx,Ce=this.sy,ke=this.tx,We=this.ty,tt=Math.sqrt(F*F+Q*Q),ht=(F/=tt)*he+(Q/=tt)*Ce;he-=F*ht,Ce-=Q*ht;var Tt=Math.sqrt(he*he+Ce*Ce);return ht/=Tt,F*(Ce/=Tt)<Q*(he/=Tt)&&(F=-F,Q=-Q,ht=-ht,tt=-tt),{scale:new _t(tt,0,0,Tt,0,0),translate:new _t(1,0,0,1,ke,We),rotate:new _t(F,Q,-Q,F,0,0),skew:new _t(1,0,ht,1,0,0)}},_t.prototype.toString=function(F){return this.join(" ")},_t.prototype.inversed=function(){var F=this.sx,Q=this.shy,he=this.shx,Ce=this.sy,ke=this.tx,We=this.ty,tt=1/(F*Ce-Q*he),ht=Ce*tt,Tt=-Q*tt,Kt=-he*tt,Ht=F*tt;return new _t(ht,Tt,Kt,Ht,-ht*ke-Kt*We,-Tt*ke-Ht*We)},_t.prototype.applyToPoint=function(F){var Q=F.x*this.sx+F.y*this.shx+this.tx,he=F.x*this.shy+F.y*this.sy+this.ty;return new Bu(Q,he)},_t.prototype.applyToRectangle=function(F){var Q=this.applyToPoint(F),he=this.applyToPoint(new Bu(F.x+F.w,F.y+F.h));return new gh(Q.x,Q.y,he.x-Q.x,he.y-Q.y)},_t.prototype.clone=function(){var F=this.sx,Q=this.shy,he=this.shx,Ce=this.sy,ke=this.tx,We=this.ty;return new _t(F,Q,he,Ce,ke,We)},h.Matrix=_t;var wi=h.matrixMult=function(F,Q){return Q.multiply(F)},co=new _t(1,0,0,1,0,0);h.unitMatrix=h.identityMatrix=co;var Ja=function(F,Q){if(!Ho[F]){var he=(Q instanceof uc?"Sh":"P")+(Object.keys(cr).length+1).toString(10);Q.id=he,Ho[F]=he,cr[he]=Q,wr.publish("addPattern",Q)}};h.ShadingPattern=uc,h.TilingPattern=_d,h.addShadingPattern=function(F,Q){return N("addShadingPattern()"),Ja(F,Q),this},h.beginTilingPattern=function(F){N("beginTilingPattern()"),Gx(F.boundingBox[0],F.boundingBox[1],F.boundingBox[2]-F.boundingBox[0],F.boundingBox[3]-F.boundingBox[1],F.matrix)},h.endTilingPattern=function(F,Q){N("endTilingPattern()"),Q.stream=ve[V].join(`
`),Ja(F,Q),wr.publish("endTilingPattern",Q),lo.pop().restore()};var Un=h.__private__.newObject=function(){var F=On();return xs(F,!0),F},On=h.__private__.newObjectDeferred=function(){return re++,de[re]=function(){return oe},re},xs=function(F,Q){return Q=typeof Q=="boolean"&&Q,de[F]=oe,Q&&ne(F+" 0 obj"),F},Eu=h.__private__.newAdditionalObject=function(){var F={objId:On(),content:""};return ge.push(F),F},Ko=On(),Ni=On(),Si=h.__private__.decodeColorString=function(F){var Q=F.split(" ");if(Q.length!==2||Q[1]!=="g"&&Q[1]!=="G")Q.length===5&&(Q[4]==="k"||Q[4]==="K")&&(Q=[(1-Q[0])*(1-Q[3]),(1-Q[1])*(1-Q[3]),(1-Q[2])*(1-Q[3]),"r"]);else{var he=parseFloat(Q[0]);Q=[he,he,he,"r"]}for(var Ce="#",ke=0;ke<3;ke++)Ce+=("0"+Math.floor(255*parseFloat(Q[ke])).toString(16)).slice(-2);return Ce},Ci=h.__private__.encodeColorString=function(F){var Q;typeof F=="string"&&(F={ch1:F});var he=F.ch1,Ce=F.ch2,ke=F.ch3,We=F.ch4,tt=F.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof he=="string"&&he.charAt(0)!=="#"){var ht=new g8(he);if(ht.ok)he=ht.toHex();else if(!/^\d*\.?\d*$/.test(he))throw new Error('Invalid color "'+he+'" passed to jsPDF.encodeColorString.')}if(typeof he=="string"&&/^#[0-9A-Fa-f]{3}$/.test(he)&&(he="#"+he[1]+he[1]+he[2]+he[2]+he[3]+he[3]),typeof he=="string"&&/^#[0-9A-Fa-f]{6}$/.test(he)){var Tt=parseInt(he.substr(1),16);he=Tt>>16&255,Ce=Tt>>8&255,ke=255&Tt}if(Ce===void 0||We===void 0&&he===Ce&&Ce===ke)if(typeof he=="string")Q=he+" "+tt[0];else switch(F.precision){case 2:Q=D(he/255)+" "+tt[0];break;case 3:default:Q=T(he/255)+" "+tt[0]}else if(We===void 0||xr(We)==="object"){if(We&&!isNaN(We.a)&&We.a===0)return Q=["1.","1.","1.",tt[1]].join(" ");if(typeof he=="string")Q=[he,Ce,ke,tt[1]].join(" ");else switch(F.precision){case 2:Q=[D(he/255),D(Ce/255),D(ke/255),tt[1]].join(" ");break;default:case 3:Q=[T(he/255),T(Ce/255),T(ke/255),tt[1]].join(" ")}}else if(typeof he=="string")Q=[he,Ce,ke,We,tt[2]].join(" ");else switch(F.precision){case 2:Q=[D(he),D(Ce),D(ke),D(We),tt[2]].join(" ");break;case 3:default:Q=[T(he),T(Ce),T(ke),T(We),tt[2]].join(" ")}return Q},uo=h.__private__.getFilters=function(){return o},Us=h.__private__.putStream=function(F){var Q=(F=F||{}).data||"",he=F.filters||uo(),Ce=F.alreadyAppliedFilters||[],ke=F.addLength1||!1,We=Q.length,tt=F.objectId,ht=function(Sa){return Sa};if(f!==null&&tt===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");f!==null&&(ht=Na.encryptor(tt,0));var Tt={};he===!0&&(he=["FlateEncode"]);var Kt=F.additionalKeyValues||[],Ht=(Tt=It.API.processDataByFilters!==void 0?It.API.processDataByFilters(Q,he):{data:Q,reverseChain:[]}).reverseChain+(Array.isArray(Ce)?Ce.join(" "):Ce.toString());if(Tt.data.length!==0&&(Kt.push({key:"Length",value:Tt.data.length}),ke===!0&&Kt.push({key:"Length1",value:We})),Ht.length!=0)if(Ht.split("/").length-1==1)Kt.push({key:"Filter",value:Ht});else{Kt.push({key:"Filter",value:"["+Ht+"]"});for(var dr=0;dr<Kt.length;dr+=1)if(Kt[dr].key==="DecodeParms"){for(var on=[],xn=0;xn<Tt.reverseChain.split("/").length-1;xn+=1)on.push("null");on.push(Kt[dr].value),Kt[dr].value="["+on.join(" ")+"]"}}ne("<<");for(var _n=0;_n<Kt.length;_n++)ne("/"+Kt[_n].key+" "+Kt[_n].value);ne(">>"),Tt.data.length!==0&&(ne("stream"),ne(ht(Tt.data)),ne("endstream"))},fo=h.__private__.putPage=function(F){var Q=F.number,he=F.data,Ce=F.objId,ke=F.contentsObjId;xs(Ce,!0),ne("<</Type /Page"),ne("/Parent "+F.rootDictionaryObjId+" 0 R"),ne("/Resources "+F.resourceDictionaryObjId+" 0 R"),ne("/MediaBox ["+parseFloat(S(F.mediaBox.bottomLeftX))+" "+parseFloat(S(F.mediaBox.bottomLeftY))+" "+S(F.mediaBox.topRightX)+" "+S(F.mediaBox.topRightY)+"]"),F.cropBox!==null&&ne("/CropBox ["+S(F.cropBox.bottomLeftX)+" "+S(F.cropBox.bottomLeftY)+" "+S(F.cropBox.topRightX)+" "+S(F.cropBox.topRightY)+"]"),F.bleedBox!==null&&ne("/BleedBox ["+S(F.bleedBox.bottomLeftX)+" "+S(F.bleedBox.bottomLeftY)+" "+S(F.bleedBox.topRightX)+" "+S(F.bleedBox.topRightY)+"]"),F.trimBox!==null&&ne("/TrimBox ["+S(F.trimBox.bottomLeftX)+" "+S(F.trimBox.bottomLeftY)+" "+S(F.trimBox.topRightX)+" "+S(F.trimBox.topRightY)+"]"),F.artBox!==null&&ne("/ArtBox ["+S(F.artBox.bottomLeftX)+" "+S(F.artBox.bottomLeftY)+" "+S(F.artBox.topRightX)+" "+S(F.artBox.topRightY)+"]"),typeof F.userUnit=="number"&&F.userUnit!==1&&ne("/UserUnit "+F.userUnit),wr.publish("putPage",{objId:Ce,pageContext:Wt[Q],pageNumber:Q,page:he}),ne("/Contents "+ke+" 0 R"),ne(">>"),ne("endobj");var We=he.join(`
`);return b===y.ADVANCED&&(We+=`
Q`),xs(ke,!0),Us({data:We,filters:uo(),objectId:ke}),ne("endobj"),Ce},ad=h.__private__.putPages=function(){var F,Q,he=[];for(F=1;F<=vn;F++)Wt[F].objId=On(),Wt[F].contentsObjId=On();for(F=1;F<=vn;F++)he.push(fo({number:F,data:ve[F],objId:Wt[F].objId,contentsObjId:Wt[F].contentsObjId,mediaBox:Wt[F].mediaBox,cropBox:Wt[F].cropBox,bleedBox:Wt[F].bleedBox,trimBox:Wt[F].trimBox,artBox:Wt[F].artBox,userUnit:Wt[F].userUnit,rootDictionaryObjId:Ko,resourceDictionaryObjId:Ni}));xs(Ko,!0),ne("<</Type /Pages");var Ce="/Kids [";for(Q=0;Q<vn;Q++)Ce+=he[Q]+" 0 R ";ne(Ce+"]"),ne("/Count "+vn),ne(">>"),ne("endobj"),wr.publish("postPutPages")},Pu=function(F){wr.publish("putFont",{font:F,out:ne,newObject:Un,putStream:Us}),F.isAlreadyPutted!==!0&&(F.objectNumber=Un(),ne("<<"),ne("/Type /Font"),ne("/BaseFont /"+hf(F.postScriptName)),ne("/Subtype /Type1"),typeof F.encoding=="string"&&ne("/Encoding /"+F.encoding),ne("/FirstChar 32"),ne("/LastChar 255"),ne(">>"),ne("endobj"))},Tu=function(){for(var F in br)br.hasOwnProperty(F)&&(u===!1||u===!0&&m.hasOwnProperty(F))&&Pu(br[F])},Iu=function(F){F.objectNumber=Un();var Q=[];Q.push({key:"Type",value:"/XObject"}),Q.push({key:"Subtype",value:"/Form"}),Q.push({key:"BBox",value:"["+[S(F.x),S(F.y),S(F.x+F.width),S(F.y+F.height)].join(" ")+"]"}),Q.push({key:"Matrix",value:"["+F.matrix.toString()+"]"});var he=F.pages[1].join(`
`);Us({data:he,additionalKeyValues:Q,objectId:F.objectNumber}),ne("endobj")},Du=function(){for(var F in da)da.hasOwnProperty(F)&&Iu(da[F])},Tx=function(F,Q){var he,Ce=[],ke=1/(Q-1);for(he=0;he<1;he+=ke)Ce.push(he);if(Ce.push(1),F[0].offset!=0){var We={offset:0,color:F[0].color};F.unshift(We)}if(F[F.length-1].offset!=1){var tt={offset:1,color:F[F.length-1].color};F.push(tt)}for(var ht="",Tt=0,Kt=0;Kt<Ce.length;Kt++){for(he=Ce[Kt];he>F[Tt+1].offset;)Tt++;var Ht=F[Tt].offset,dr=(he-Ht)/(F[Tt+1].offset-Ht),on=F[Tt].color,xn=F[Tt+1].color;ht+=ee(Math.round((1-dr)*on[0]+dr*xn[0]).toString(16))+ee(Math.round((1-dr)*on[1]+dr*xn[1]).toString(16))+ee(Math.round((1-dr)*on[2]+dr*xn[2]).toString(16))}return ht.trim()},Ej=function(F,Q){Q||(Q=21);var he=Un(),Ce=Tx(F.colors,Q),ke=[];ke.push({key:"FunctionType",value:"0"}),ke.push({key:"Domain",value:"[0.0 1.0]"}),ke.push({key:"Size",value:"["+Q+"]"}),ke.push({key:"BitsPerSample",value:"8"}),ke.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),ke.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Us({data:Ce,additionalKeyValues:ke,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:he}),ne("endobj"),F.objectNumber=Un(),ne("<< /ShadingType "+F.type),ne("/ColorSpace /DeviceRGB");var We="/Coords ["+S(parseFloat(F.coords[0]))+" "+S(parseFloat(F.coords[1]))+" ";F.type===2?We+=S(parseFloat(F.coords[2]))+" "+S(parseFloat(F.coords[3])):We+=S(parseFloat(F.coords[2]))+" "+S(parseFloat(F.coords[3]))+" "+S(parseFloat(F.coords[4]))+" "+S(parseFloat(F.coords[5])),ne(We+="]"),F.matrix&&ne("/Matrix ["+F.matrix.toString()+"]"),ne("/Function "+he+" 0 R"),ne("/Extend [true true]"),ne(">>"),ne("endobj")},Pj=function(F,Q){var he=On(),Ce=Un();Q.push({resourcesOid:he,objectOid:Ce}),F.objectNumber=Ce;var ke=[];ke.push({key:"Type",value:"/Pattern"}),ke.push({key:"PatternType",value:"1"}),ke.push({key:"PaintType",value:"1"}),ke.push({key:"TilingType",value:"1"}),ke.push({key:"BBox",value:"["+F.boundingBox.map(S).join(" ")+"]"}),ke.push({key:"XStep",value:S(F.xStep)}),ke.push({key:"YStep",value:S(F.yStep)}),ke.push({key:"Resources",value:he+" 0 R"}),F.matrix&&ke.push({key:"Matrix",value:"["+F.matrix.toString()+"]"}),Us({data:F.stream,additionalKeyValues:ke,objectId:F.objectNumber}),ne("endobj")},ku=function(F){var Q;for(Q in cr)cr.hasOwnProperty(Q)&&(cr[Q]instanceof uc?Ej(cr[Q]):cr[Q]instanceof _d&&Pj(cr[Q],F))},Ix=function(F){for(var Q in F.objectNumber=Un(),ne("<<"),F)switch(Q){case"opacity":ne("/ca "+D(F[Q]));break;case"stroke-opacity":ne("/CA "+D(F[Q]))}ne(">>"),ne("endobj")},Tj=function(){var F;for(F in pn)pn.hasOwnProperty(F)&&Ix(pn[F])},lh=function(){for(var F in ne("/XObject <<"),da)da.hasOwnProperty(F)&&da[F].objectNumber>=0&&ne("/"+F+" "+da[F].objectNumber+" 0 R");wr.publish("putXobjectDict"),ne(">>")},Ij=function(){Na.oid=Un(),ne("<<"),ne("/Filter /Standard"),ne("/V "+Na.v),ne("/R "+Na.r),ne("/U <"+Na.toHexString(Na.U)+">"),ne("/O <"+Na.toHexString(Na.O)+">"),ne("/P "+Na.P),ne(">>"),ne("endobj")},Dx=function(){for(var F in ne("/Font <<"),br)br.hasOwnProperty(F)&&(u===!1||u===!0&&m.hasOwnProperty(F))&&ne("/"+F+" "+br[F].objectNumber+" 0 R");ne(">>")},Dj=function(){if(Object.keys(cr).length>0){for(var F in ne("/Shading <<"),cr)cr.hasOwnProperty(F)&&cr[F]instanceof uc&&cr[F].objectNumber>=0&&ne("/"+F+" "+cr[F].objectNumber+" 0 R");wr.publish("putShadingPatternDict"),ne(">>")}},Ou=function(F){if(Object.keys(cr).length>0){for(var Q in ne("/Pattern <<"),cr)cr.hasOwnProperty(Q)&&cr[Q]instanceof h.TilingPattern&&cr[Q].objectNumber>=0&&cr[Q].objectNumber<F&&ne("/"+Q+" "+cr[Q].objectNumber+" 0 R");wr.publish("putTilingPatternDict"),ne(">>")}},kj=function(){if(Object.keys(pn).length>0){var F;for(F in ne("/ExtGState <<"),pn)pn.hasOwnProperty(F)&&pn[F].objectNumber>=0&&ne("/"+F+" "+pn[F].objectNumber+" 0 R");wr.publish("putGStateDict"),ne(">>")}},Sn=function(F){xs(F.resourcesOid,!0),ne("<<"),ne("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),Dx(),Dj(),Ou(F.objectOid),kj(),lh(),ne(">>"),ne("endobj")},kx=function(){var F=[];Tu(),Tj(),Du(),ku(F),wr.publish("putResources"),F.forEach(Sn),Sn({resourcesOid:Ni,objectOid:Number.MAX_SAFE_INTEGER}),wr.publish("postPutResources")},Ox=function(){wr.publish("putAdditionalObjects");for(var F=0;F<ge.length;F++){var Q=ge[F];xs(Q.objId,!0),ne(Q.content),ne("endobj")}wr.publish("postPutAdditionalObjects")},_x=function(F){Dr[F.fontName]=Dr[F.fontName]||{},Dr[F.fontName][F.fontStyle]=F.id},ch=function(F,Q,he,Ce,ke){var We={id:"F"+(Object.keys(br).length+1).toString(10),postScriptName:F,fontName:Q,fontStyle:he,encoding:Ce,isStandardFont:ke||!1,metadata:{}};return wr.publish("addFont",{font:We,instance:this}),br[We.id]=We,_x(We),We.id},Oj=function(F){for(var Q=0,he=be.length;Q<he;Q++){var Ce=ch.call(this,F[Q][0],F[Q][1],F[Q][2],be[Q][3],!0);u===!1&&(m[Ce]=!0);var ke=F[Q][0].split("-");_x({id:Ce,fontName:ke[0],fontStyle:ke[1]||""})}wr.publish("addFonts",{fonts:br,dictionary:Dr})},Ai=function(F){return F.foo=function(){try{return F.apply(this,arguments)}catch(Ce){var Q=Ce.stack||"";~Q.indexOf(" at ")&&(Q=Q.split(" at ")[1]);var he="Error in function "+Q.split(`
`)[0].split("<")[0]+": "+Ce.message;if(!Ft.console)throw new Error(he);Ft.console.error(he,Ce),Ft.alert&&alert(he)}},F.foo.bar=F,F.foo},_u=function(F,Q){var he,Ce,ke,We,tt,ht,Tt,Kt,Ht;if(ke=(Q=Q||{}).sourceEncoding||"Unicode",tt=Q.outputEncoding,(Q.autoencode||tt)&&br[zt].metadata&&br[zt].metadata[ke]&&br[zt].metadata[ke].encoding&&(We=br[zt].metadata[ke].encoding,!tt&&br[zt].encoding&&(tt=br[zt].encoding),!tt&&We.codePages&&(tt=We.codePages[0]),typeof tt=="string"&&(tt=We[tt]),tt)){for(Tt=!1,ht=[],he=0,Ce=F.length;he<Ce;he++)(Kt=tt[F.charCodeAt(he)])?ht.push(String.fromCharCode(Kt)):ht.push(F[he]),ht[he].charCodeAt(0)>>8&&(Tt=!0);F=ht.join("")}for(he=F.length;Tt===void 0&&he!==0;)F.charCodeAt(he-1)>>8&&(Tt=!0),he--;if(!Tt)return F;for(ht=Q.noBOM?[]:[254,255],he=0,Ce=F.length;he<Ce;he++){if((Ht=(Kt=F.charCodeAt(he))>>8)>>8)throw new Error("Character at position "+he+" of string '"+F+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");ht.push(Ht),ht.push(Kt-(Ht<<8))}return String.fromCharCode.apply(void 0,ht)},Za=h.__private__.pdfEscape=h.pdfEscape=function(F,Q){return _u(F,Q).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},dh=h.__private__.beginPage=function(F){ve[++vn]=[],Wt[vn]={objId:0,contentsObjId:0,userUnit:Number(l),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(F[0]),topRightY:Number(F[1])}},Rx(vn),le(ve[V])},Lx=function(F,Q){var he,Ce,ke;switch(n=Q||n,typeof F=="string"&&(he=v(F.toLowerCase()),Array.isArray(he)&&(Ce=he[0],ke=he[1])),Array.isArray(F)&&(Ce=F[0]*ot,ke=F[1]*ot),isNaN(Ce)&&(Ce=s[0],ke=s[1]),(Ce>14400||ke>14400)&&(Lr.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),Ce=Math.min(14400,Ce),ke=Math.min(14400,ke)),s=[Ce,ke],n.substr(0,1)){case"l":ke>Ce&&(s=[ke,Ce]);break;case"p":Ce>ke&&(s=[ke,Ce])}dh(s),Ux(hh),ne(Ei),vh!==0&&ne(vh+" J"),xh!==0&&ne(xh+" j"),wr.publish("addPage",{pageNumber:vn})},_j=function(F){F>0&&F<=vn&&(ve.splice(F,1),Wt.splice(F,1),vn--,V>vn&&(V=vn),this.setPage(V))},Rx=function(F){F>0&&F<=vn&&(V=F)},Lj=h.__private__.getNumberOfPages=h.getNumberOfPages=function(){return ve.length-1},Fx=function(F,Q,he){var Ce,ke=void 0;return he=he||{},F=F!==void 0?F:br[zt].fontName,Q=Q!==void 0?Q:br[zt].fontStyle,Ce=F.toLowerCase(),Dr[Ce]!==void 0&&Dr[Ce][Q]!==void 0?ke=Dr[Ce][Q]:Dr[F]!==void 0&&Dr[F][Q]!==void 0?ke=Dr[F][Q]:he.disableWarning===!1&&Lr.warn("Unable to look up font label for font '"+F+"', '"+Q+"'. Refer to getFontList() for available fonts."),ke||he.noFallback||(ke=Dr.times[Q])==null&&(ke=Dr.times.normal),ke},Rj=h.__private__.putInfo=function(){var F=Un(),Q=function(Ce){return Ce};for(var he in f!==null&&(Q=Na.encryptor(F,0)),ne("<<"),ne("/Producer ("+Za(Q("jsPDF "+It.version))+")"),At)At.hasOwnProperty(he)&&At[he]&&ne("/"+he.substr(0,1).toUpperCase()+he.substr(1)+" ("+Za(Q(At[he]))+")");ne("/CreationDate ("+Za(Q(L))+")"),ne(">>"),ne("endobj")},uh=h.__private__.putCatalog=function(F){var Q=(F=F||{}).rootDictionaryObjId||Ko;switch(Un(),ne("<<"),ne("/Type /Catalog"),ne("/Pages "+Q+" 0 R"),nt||(nt="fullwidth"),nt){case"fullwidth":ne("/OpenAction [3 0 R /FitH null]");break;case"fullheight":ne("/OpenAction [3 0 R /FitV null]");break;case"fullpage":ne("/OpenAction [3 0 R /Fit]");break;case"original":ne("/OpenAction [3 0 R /XYZ null null 1]");break;default:var he=""+nt;he.substr(he.length-1)==="%"&&(nt=parseInt(nt)/100),typeof nt=="number"&&ne("/OpenAction [3 0 R /XYZ null null "+D(nt)+"]")}switch(ut||(ut="continuous"),ut){case"continuous":ne("/PageLayout /OneColumn");break;case"single":ne("/PageLayout /SinglePage");break;case"two":case"twoleft":ne("/PageLayout /TwoColumnLeft");break;case"tworight":ne("/PageLayout /TwoColumnRight")}Ve&&ne("/PageMode /"+Ve),wr.publish("putCatalog"),ne(">>"),ne("endobj")},Fj=h.__private__.putTrailer=function(){ne("trailer"),ne("<<"),ne("/Size "+(re+1)),ne("/Root "+re+" 0 R"),ne("/Info "+(re-1)+" 0 R"),f!==null&&ne("/Encrypt "+Na.oid+" 0 R"),ne("/ID [ <"+$+"> <"+$+"> ]"),ne(">>")},Mj=h.__private__.putHeader=function(){ne("%PDF-"+x),ne("%ºß¬à")},$j=h.__private__.putXRef=function(){var F="0000000000";ne("xref"),ne("0 "+(re+1)),ne("0000000000 65535 f ");for(var Q=1;Q<=re;Q++)typeof de[Q]=="function"?ne((F+de[Q]()).slice(-10)+" 00000 n "):de[Q]!==void 0?ne((F+de[Q]).slice(-10)+" 00000 n "):ne("0000000000 00000 n ")},Yo=h.__private__.buildDocument=function(){ye(),le(ue),wr.publish("buildDocument"),Mj(),ad(),Ox(),kx(),f!==null&&Ij(),Rj(),uh();var F=oe;return $j(),Fj(),ne("startxref"),ne(""+F),ne("%%EOF"),le(ve[V]),ue.join(`
`)},Lu=h.__private__.getBlob=function(F){return new Blob([Se(F)],{type:"application/pdf"})},Ru=h.output=h.__private__.output=Ai(function(F,Q){switch(typeof(Q=Q||{})=="string"?Q={filename:Q}:Q.filename=Q.filename||"generated.pdf",F){case void 0:return Yo();case"save":h.save(Q.filename);break;case"arraybuffer":return Se(Yo());case"blob":return Lu(Yo());case"bloburi":case"bloburl":if(Ft.URL!==void 0&&typeof Ft.URL.createObjectURL=="function")return Ft.URL&&Ft.URL.createObjectURL(Lu(Yo()))||void 0;Lr.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var he="",Ce=Yo();try{he=rS(Ce)}catch{he=rS(unescape(encodeURIComponent(Ce)))}return"data:application/pdf;filename="+Q.filename+";base64,"+he;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Ft)==="[object Window]"){var ke="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",We=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';Q.pdfObjectUrl&&(ke=Q.pdfObjectUrl,We="");var tt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+ke+'"'+We+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(Q)+");<\/script></body></html>",ht=Ft.open();return ht!==null&&ht.document.write(tt),ht}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Ft)==="[object Window]"){var Tt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(Q.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+Q.filename+'" width="500px" height="400px" /></body></html>',Kt=Ft.open();if(Kt!==null){Kt.document.write(Tt);var Ht=this;Kt.document.documentElement.querySelector("#pdfViewer").onload=function(){Kt.document.title=Q.filename,Kt.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(Ht.output("bloburl"))}}return Kt}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Ft)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var dr='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",Q)+'"></iframe></body></html>',on=Ft.open();if(on!==null&&(on.document.write(dr),on.document.title=Q.filename),on||typeof safari>"u")return on;break;case"datauri":case"dataurl":return Ft.document.location.href=this.output("datauristring",Q);default:return null}}),Mx=function(F){return Array.isArray(nd)===!0&&nd.indexOf(F)>-1};switch(a){case"pt":ot=1;break;case"mm":ot=72/25.4;break;case"cm":ot=72/2.54;break;case"in":ot=72;break;case"px":ot=Mx("px_scaling")==1?.75:96/72;break;case"pc":case"em":ot=12;break;case"ex":ot=6;break;default:if(typeof a!="number")throw new Error("Invalid unit: "+a);ot=a}var Na=null;q(),B();var Bj=function(F){return f!==null?Na.encryptor(F,0):function(Q){return Q}},$x=h.__private__.getPageInfo=h.getPageInfo=function(F){if(isNaN(F)||F%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Wt[F].objId,pageNumber:F,pageContext:Wt[F]}},qt=h.__private__.getPageInfoByObjId=function(F){if(isNaN(F)||F%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var Q in Wt)if(Wt[Q].objId===F)break;return $x(Q)},zj=h.__private__.getCurrentPageInfo=h.getCurrentPageInfo=function(){return{objId:Wt[V].objId,pageNumber:V,pageContext:Wt[V]}};h.addPage=function(){return Lx.apply(this,arguments),this},h.setPage=function(){return Rx.apply(this,arguments),le.call(this,ve[V]),this},h.insertPage=function(F){return this.addPage(),this.movePage(V,F),this},h.movePage=function(F,Q){var he,Ce;if(F>Q){he=ve[F],Ce=Wt[F];for(var ke=F;ke>Q;ke--)ve[ke]=ve[ke-1],Wt[ke]=Wt[ke-1];ve[Q]=he,Wt[Q]=Ce,this.setPage(Q)}else if(F<Q){he=ve[F],Ce=Wt[F];for(var We=F;We<Q;We++)ve[We]=ve[We+1],Wt[We]=Wt[We+1];ve[Q]=he,Wt[Q]=Ce,this.setPage(Q)}return this},h.deletePage=function(){return _j.apply(this,arguments),this},h.__private__.text=h.text=function(F,Q,he,Ce,ke){var We,tt,ht,Tt,Kt,Ht,dr,on,xn,_n=(Ce=Ce||{}).scope||this;if(typeof F=="number"&&typeof Q=="number"&&(typeof he=="string"||Array.isArray(he))){var Sa=he;he=Q,Q=F,F=Sa}if(arguments[3]instanceof _t?(N("The transform parameter of text() with a Matrix value"),xn=ke):(ht=arguments[4],Tt=arguments[5],xr(dr=arguments[3])==="object"&&dr!==null||(typeof ht=="string"&&(Tt=ht,ht=null),typeof dr=="string"&&(Tt=dr,dr=null),typeof dr=="number"&&(ht=dr,dr=null),Ce={flags:dr,angle:ht,align:Tt})),isNaN(Q)||isNaN(he)||F==null)throw new Error("Invalid arguments passed to jsPDF.text");if(F.length===0)return _n;var ea="",Pi=!1,gs=typeof Ce.lineHeightFactor=="number"?Ce.lineHeightFactor:id,po=_n.internal.scaleFactor;function Kx(Ur){return Ur=Ur.split("	").join(Array(Ce.TabLen||9).join(" ")),Za(Ur,dr)}function wh(Ur){for(var Vr,An=Ur.concat(),Vn=[],el=An.length;el--;)typeof(Vr=An.shift())=="string"?Vn.push(Vr):Array.isArray(Ur)&&(Vr.length===1||Vr[1]===void 0&&Vr[2]===void 0)?Vn.push(Vr[0]):Vn.push([Vr[0],Vr[1],Vr[2]]);return Vn}function Nh(Ur,Vr){var An;if(typeof Ur=="string")An=Vr(Ur)[0];else if(Array.isArray(Ur)){for(var Vn,el,Dh=Ur.concat(),Qu=[],Zx=Dh.length;Zx--;)typeof(Vn=Dh.shift())=="string"?Qu.push(Vr(Vn)[0]):Array.isArray(Vn)&&typeof Vn[0]=="string"&&(el=Vr(Vn[0],Vn[1],Vn[2]),Qu.push([el[0],el[1],el[2]]));An=Qu}return An}var Uu=!1,Sh=!0;if(typeof F=="string")Uu=!0;else if(Array.isArray(F)){var Ch=F.concat();tt=[];for(var Vu,ua=Ch.length;ua--;)(typeof(Vu=Ch.shift())!="string"||Array.isArray(Vu)&&typeof Vu[0]!="string")&&(Sh=!1);Uu=Sh}if(Uu===!1)throw new Error('Type of text must be string or Array. "'+F+'" is not recognized.');typeof F=="string"&&(F=F.match(/[\r?\n]/)?F.split(/\r\n|\r|\n/g):[F]);var qu=Re/_n.internal.scaleFactor,Wu=qu*(gs-1);switch(Ce.baseline){case"bottom":he-=Wu;break;case"top":he+=qu-Wu;break;case"hanging":he+=qu-2*Wu;break;case"middle":he+=qu/2-Wu}if((Ht=Ce.maxWidth||0)>0&&(typeof F=="string"?F=_n.splitTextToSize(F,Ht):Object.prototype.toString.call(F)==="[object Array]"&&(F=F.reduce(function(Ur,Vr){return Ur.concat(_n.splitTextToSize(Vr,Ht))},[]))),We={text:F,x:Q,y:he,options:Ce,mutex:{pdfEscape:Za,activeFontKey:zt,fonts:br,activeFontSize:Re}},wr.publish("preProcessText",We),F=We.text,ht=(Ce=We.options).angle,!(xn instanceof _t)&&ht&&typeof ht=="number"){ht*=Math.PI/180,Ce.rotationDirection===0&&(ht=-ht),b===y.ADVANCED&&(ht=-ht);var Hu=Math.cos(ht),Ah=Math.sin(ht);xn=new _t(Hu,Ah,-Ah,Hu,0,0)}else ht&&ht instanceof _t&&(xn=ht);b!==y.ADVANCED||xn||(xn=co),(Kt=Ce.charSpace||$u)!==void 0&&(ea+=S(A(Kt))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(on=Ce.horizontalScale)!==void 0&&(ea+=S(100*on)+` Tz
`),Ce.lang;var es=-1,Qj=Ce.renderingMode!==void 0?Ce.renderingMode:Ce.stroke,Eh=_n.internal.getCurrentPageInfo().pageContext;switch(Qj){case 0:case!1:case"fill":es=0;break;case 1:case!0:case"stroke":es=1;break;case 2:case"fillThenStroke":es=2;break;case 3:case"invisible":es=3;break;case 4:case"fillAndAddForClipping":es=4;break;case 5:case"strokeAndAddPathForClipping":es=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":es=6;break;case 7:case"addToPathForClipping":es=7}var Yx=Eh.usedRenderingMode!==void 0?Eh.usedRenderingMode:-1;es!==-1?ea+=es+` Tr
`:Yx!==-1&&(ea+=`0 Tr
`),es!==-1&&(Eh.usedRenderingMode=es),Tt=Ce.align||"left";var Vs,Gu=Re*gs,Xx=_n.internal.pageSize.getWidth(),Qx=br[zt];Kt=Ce.charSpace||$u,Ht=Ce.maxWidth||0,dr=Object.assign({autoencode:!0,noBOM:!0},Ce.flags);var Bl=[],cd=function(Ur){return _n.getStringUnitWidth(Ur,{font:Qx,charSpace:Kt,fontSize:Re,doKerning:!1})*Re/po};if(Object.prototype.toString.call(F)==="[object Array]"){var ts;tt=wh(F),Tt!=="left"&&(Vs=tt.map(cd));var Ma,zl=0;if(Tt==="right"){Q-=Vs[0],F=[],ua=tt.length;for(var Qo=0;Qo<ua;Qo++)Qo===0?(Ma=ho(Q),ts=Xo(he)):(Ma=A(zl-Vs[Qo]),ts=-Gu),F.push([tt[Qo],Ma,ts]),zl=Vs[Qo]}else if(Tt==="center"){Q-=Vs[0]/2,F=[],ua=tt.length;for(var Jo=0;Jo<ua;Jo++)Jo===0?(Ma=ho(Q),ts=Xo(he)):(Ma=A((zl-Vs[Jo])/2),ts=-Gu),F.push([tt[Jo],Ma,ts]),zl=Vs[Jo]}else if(Tt==="left"){F=[],ua=tt.length;for(var Ku=0;Ku<ua;Ku++)F.push(tt[Ku])}else if(Tt==="justify"&&Qx.encoding==="Identity-H"){F=[],ua=tt.length,Ht=Ht!==0?Ht:Xx;for(var Zo=0,Cn=0;Cn<ua;Cn++)if(ts=Cn===0?Xo(he):-Gu,Ma=Cn===0?ho(Q):Zo,Cn<ua-1){var Ph=A((Ht-Vs[Cn])/(tt[Cn].split(" ").length-1)),$a=tt[Cn].split(" ");F.push([$a[0]+" ",Ma,ts]),Zo=0;for(var qs=1;qs<$a.length;qs++){var Yu=(cd($a[qs-1]+" "+$a[qs])-cd($a[qs]))*po+Ph;qs==$a.length-1?F.push([$a[qs],Yu,0]):F.push([$a[qs]+" ",Yu,0]),Zo-=Yu}}else F.push([tt[Cn],Ma,ts]);F.push(["",Zo,0])}else{if(Tt!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(F=[],ua=tt.length,Ht=Ht!==0?Ht:Xx,Cn=0;Cn<ua;Cn++)ts=Cn===0?Xo(he):-Gu,Ma=Cn===0?ho(Q):0,Cn<ua-1?Bl.push(S(A((Ht-Vs[Cn])/(tt[Cn].split(" ").length-1)))):Bl.push(0),F.push([tt[Cn],Ma,ts])}}var Jx=typeof Ce.R2L=="boolean"?Ce.R2L:xt;Jx===!0&&(F=Nh(F,function(Ur,Vr,An){return[Ur.split("").reverse().join(""),Vr,An]})),We={text:F,x:Q,y:he,options:Ce,mutex:{pdfEscape:Za,activeFontKey:zt,fonts:br,activeFontSize:Re}},wr.publish("postProcessText",We),F=We.text,Pi=We.mutex.isHex||!1;var Th=br[zt].encoding;Th!=="WinAnsiEncoding"&&Th!=="StandardEncoding"||(F=Nh(F,function(Ur,Vr,An){return[Kx(Ur),Vr,An]})),tt=wh(F),F=[];for(var dd,ud,Ul,fd=0,Xu=1,md=Array.isArray(tt[0])?Xu:fd,Vl="",Ih=function(Ur,Vr,An){var Vn="";return An instanceof _t?(An=typeof Ce.angle=="number"?wi(An,new _t(1,0,0,1,Ur,Vr)):wi(new _t(1,0,0,1,Ur,Vr),An),b===y.ADVANCED&&(An=wi(new _t(1,0,0,-1,0,0),An)),Vn=An.join(" ")+` Tm
`):Vn=S(Ur)+" "+S(Vr)+` Td
`,Vn},Ws=0;Ws<tt.length;Ws++){switch(Vl="",md){case Xu:Ul=(Pi?"<":"(")+tt[Ws][0]+(Pi?">":")"),dd=parseFloat(tt[Ws][1]),ud=parseFloat(tt[Ws][2]);break;case fd:Ul=(Pi?"<":"(")+tt[Ws]+(Pi?">":")"),dd=ho(Q),ud=Xo(he)}Bl!==void 0&&Bl[Ws]!==void 0&&(Vl=Bl[Ws]+` Tw
`),Ws===0?F.push(Vl+Ih(dd,ud,xn)+Ul):md===fd?F.push(Vl+Ul):md===Xu&&F.push(Vl+Ih(dd,ud,xn)+Ul)}F=md===fd?F.join(` Tj
T* `):F.join(` Tj
`),F+=` Tj
`;var Hs=`BT
/`;return Hs+=zt+" "+Re+` Tf
`,Hs+=S(Re*gs)+` TL
`,Hs+=od+`
`,Hs+=ea,Hs+=F,ne(Hs+="ET"),m[zt]=!0,_n};var Uj=h.__private__.clip=h.clip=function(F){return ne(F==="evenodd"?"W*":"W"),this};h.clipEvenOdd=function(){return Uj("evenodd")},h.__private__.discardPath=h.discardPath=function(){return ne("n"),this};var mo=h.__private__.isValidStyle=function(F){var Q=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(F)!==-1&&(Q=!0),Q};h.__private__.setDefaultPathOperation=h.setDefaultPathOperation=function(F){return mo(F)&&(d=F),this};var Bx=h.__private__.getStyle=h.getStyle=function(F){var Q=d;switch(F){case"D":case"S":Q="S";break;case"F":Q="f";break;case"FD":case"DF":Q="B";break;case"f":case"f*":case"B":case"B*":Q=F}return Q},zx=h.close=function(){return ne("h"),this};h.stroke=function(){return ne("S"),this},h.fill=function(F){return Fu("f",F),this},h.fillEvenOdd=function(F){return Fu("f*",F),this},h.fillStroke=function(F){return Fu("B",F),this},h.fillStrokeEvenOdd=function(F){return Fu("B*",F),this};var Fu=function(F,Q){xr(Q)==="object"?qj(Q,F):ne(F)},fh=function(F){F===null||b===y.ADVANCED&&F===void 0||(F=Bx(F),ne(F))};function Vj(F,Q,he,Ce,ke){var We=new _d(Q||this.boundingBox,he||this.xStep,Ce||this.yStep,this.gState,ke||this.matrix);We.stream=this.stream;var tt=F+"$$"+this.cloneIndex+++"$$";return Ja(tt,We),We}var qj=function(F,Q){var he=Ho[F.key],Ce=cr[he];if(Ce instanceof uc)ne("q"),ne(Wj(Q)),Ce.gState&&h.setGState(Ce.gState),ne(F.matrix.toString()+" cm"),ne("/"+he+" sh"),ne("Q");else if(Ce instanceof _d){var ke=new _t(1,0,0,-1,0,$l());F.matrix&&(ke=ke.multiply(F.matrix||co),he=Vj.call(Ce,F.key,F.boundingBox,F.xStep,F.yStep,ke).id),ne("q"),ne("/Pattern cs"),ne("/"+he+" scn"),Ce.gState&&h.setGState(Ce.gState),ne(Q),ne("Q")}},Wj=function(F){switch(F){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},mh=h.moveTo=function(F,Q){return ne(S(A(F))+" "+S(k(Q))+" m"),this},sd=h.lineTo=function(F,Q){return ne(S(A(F))+" "+S(k(Q))+" l"),this},Fl=h.curveTo=function(F,Q,he,Ce,ke,We){return ne([S(A(F)),S(k(Q)),S(A(he)),S(k(Ce)),S(A(ke)),S(k(We)),"c"].join(" ")),this};h.__private__.line=h.line=function(F,Q,he,Ce,ke){if(isNaN(F)||isNaN(Q)||isNaN(he)||isNaN(Ce)||!mo(ke))throw new Error("Invalid arguments passed to jsPDF.line");return b===y.COMPAT?this.lines([[he-F,Ce-Q]],F,Q,[1,1],ke||"S"):this.lines([[he-F,Ce-Q]],F,Q,[1,1]).stroke()},h.__private__.lines=h.lines=function(F,Q,he,Ce,ke,We){var tt,ht,Tt,Kt,Ht,dr,on,xn,_n,Sa,ea,Pi;if(typeof F=="number"&&(Pi=he,he=Q,Q=F,F=Pi),Ce=Ce||[1,1],We=We||!1,isNaN(Q)||isNaN(he)||!Array.isArray(F)||!Array.isArray(Ce)||!mo(ke)||typeof We!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(mh(Q,he),tt=Ce[0],ht=Ce[1],Kt=F.length,Sa=Q,ea=he,Tt=0;Tt<Kt;Tt++)(Ht=F[Tt]).length===2?(Sa=Ht[0]*tt+Sa,ea=Ht[1]*ht+ea,sd(Sa,ea)):(dr=Ht[0]*tt+Sa,on=Ht[1]*ht+ea,xn=Ht[2]*tt+Sa,_n=Ht[3]*ht+ea,Sa=Ht[4]*tt+Sa,ea=Ht[5]*ht+ea,Fl(dr,on,xn,_n,Sa,ea));return We&&zx(),fh(ke),this},h.path=function(F){for(var Q=0;Q<F.length;Q++){var he=F[Q],Ce=he.c;switch(he.op){case"m":mh(Ce[0],Ce[1]);break;case"l":sd(Ce[0],Ce[1]);break;case"c":Fl.apply(this,Ce);break;case"h":zx()}}return this},h.__private__.rect=h.rect=function(F,Q,he,Ce,ke){if(isNaN(F)||isNaN(Q)||isNaN(he)||isNaN(Ce)||!mo(ke))throw new Error("Invalid arguments passed to jsPDF.rect");return b===y.COMPAT&&(Ce=-Ce),ne([S(A(F)),S(k(Q)),S(A(he)),S(A(Ce)),"re"].join(" ")),fh(ke),this},h.__private__.triangle=h.triangle=function(F,Q,he,Ce,ke,We,tt){if(isNaN(F)||isNaN(Q)||isNaN(he)||isNaN(Ce)||isNaN(ke)||isNaN(We)||!mo(tt))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[he-F,Ce-Q],[ke-he,We-Ce],[F-ke,Q-We]],F,Q,[1,1],tt,!0),this},h.__private__.roundedRect=h.roundedRect=function(F,Q,he,Ce,ke,We,tt){if(isNaN(F)||isNaN(Q)||isNaN(he)||isNaN(Ce)||isNaN(ke)||isNaN(We)||!mo(tt))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var ht=4/3*(Math.SQRT2-1);return ke=Math.min(ke,.5*he),We=Math.min(We,.5*Ce),this.lines([[he-2*ke,0],[ke*ht,0,ke,We-We*ht,ke,We],[0,Ce-2*We],[0,We*ht,-ke*ht,We,-ke,We],[2*ke-he,0],[-ke*ht,0,-ke,-We*ht,-ke,-We],[0,2*We-Ce],[0,-We*ht,ke*ht,-We,ke,-We]],F+ke,Q,[1,1],tt,!0),this},h.__private__.ellipse=h.ellipse=function(F,Q,he,Ce,ke){if(isNaN(F)||isNaN(Q)||isNaN(he)||isNaN(Ce)||!mo(ke))throw new Error("Invalid arguments passed to jsPDF.ellipse");var We=4/3*(Math.SQRT2-1)*he,tt=4/3*(Math.SQRT2-1)*Ce;return mh(F+he,Q),Fl(F+he,Q-tt,F+We,Q-Ce,F,Q-Ce),Fl(F-We,Q-Ce,F-he,Q-tt,F-he,Q),Fl(F-he,Q+tt,F-We,Q+Ce,F,Q+Ce),Fl(F+We,Q+Ce,F+he,Q+tt,F+he,Q),fh(ke),this},h.__private__.circle=h.circle=function(F,Q,he,Ce){if(isNaN(F)||isNaN(Q)||isNaN(he)||!mo(Ce))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(F,Q,he,he,Ce)},h.setFont=function(F,Q,he){return he&&(Q=E(Q,he)),zt=Fx(F,Q,{disableWarning:!1}),this};var Hj=h.__private__.getFont=h.getFont=function(){return br[Fx.apply(h,arguments)]};h.__private__.getFontList=h.getFontList=function(){var F,Q,he={};for(F in Dr)if(Dr.hasOwnProperty(F))for(Q in he[F]=[],Dr[F])Dr[F].hasOwnProperty(Q)&&he[F].push(Q);return he},h.addFont=function(F,Q,he,Ce,ke){var We=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&We.indexOf(arguments[3])!==-1?ke=arguments[3]:arguments[3]&&We.indexOf(arguments[3])==-1&&(he=E(he,Ce)),ke=ke||"Identity-H",ch.call(this,F,Q,he,ke)};var id,hh=e.lineWidth||.200025,Mu=h.__private__.getLineWidth=h.getLineWidth=function(){return hh},Ux=h.__private__.setLineWidth=h.setLineWidth=function(F){return hh=F,ne(S(A(F))+" w"),this};h.__private__.setLineDash=It.API.setLineDash=It.API.setLineDashPattern=function(F,Q){if(F=F||[],Q=Q||0,isNaN(Q)||!Array.isArray(F))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return F=F.map(function(he){return S(A(he))}).join(" "),Q=S(A(Q)),ne("["+F+"] "+Q+" d"),this};var Vx=h.__private__.getLineHeight=h.getLineHeight=function(){return Re*id};h.__private__.getLineHeight=h.getLineHeight=function(){return Re*id};var qx=h.__private__.setLineHeightFactor=h.setLineHeightFactor=function(F){return typeof(F=F||1.15)=="number"&&(id=F),this},Wx=h.__private__.getLineHeightFactor=h.getLineHeightFactor=function(){return id};qx(e.lineHeight);var ho=h.__private__.getHorizontalCoordinate=function(F){return A(F)},Xo=h.__private__.getVerticalCoordinate=function(F){return b===y.ADVANCED?F:Wt[V].mediaBox.topRightY-Wt[V].mediaBox.bottomLeftY-A(F)},Gj=h.__private__.getHorizontalCoordinateString=h.getHorizontalCoordinateString=function(F){return S(ho(F))},Ml=h.__private__.getVerticalCoordinateString=h.getVerticalCoordinateString=function(F){return S(Xo(F))},Ei=e.strokeColor||"0 G";h.__private__.getStrokeColor=h.getDrawColor=function(){return Si(Ei)},h.__private__.setStrokeColor=h.setDrawColor=function(F,Q,he,Ce){return Ei=Ci({ch1:F,ch2:Q,ch3:he,ch4:Ce,pdfColorType:"draw",precision:2}),ne(Ei),this};var ph=e.fillColor||"0 g";h.__private__.getFillColor=h.getFillColor=function(){return Si(ph)},h.__private__.setFillColor=h.setFillColor=function(F,Q,he,Ce){return ph=Ci({ch1:F,ch2:Q,ch3:he,ch4:Ce,pdfColorType:"fill",precision:2}),ne(ph),this};var od=e.textColor||"0 g",Kj=h.__private__.getTextColor=h.getTextColor=function(){return Si(od)};h.__private__.setTextColor=h.setTextColor=function(F,Q,he,Ce){return od=Ci({ch1:F,ch2:Q,ch3:he,ch4:Ce,pdfColorType:"text",precision:3}),this};var $u=e.charSpace,Yj=h.__private__.getCharSpace=h.getCharSpace=function(){return parseFloat($u||0)};h.__private__.setCharSpace=h.setCharSpace=function(F){if(isNaN(F))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return $u=F,this};var vh=0;h.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},h.__private__.setLineCap=h.setLineCap=function(F){var Q=h.CapJoinStyles[F];if(Q===void 0)throw new Error("Line cap style of '"+F+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return vh=Q,ne(Q+" J"),this};var xh=0;h.__private__.setLineJoin=h.setLineJoin=function(F){var Q=h.CapJoinStyles[F];if(Q===void 0)throw new Error("Line join style of '"+F+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return xh=Q,ne(Q+" j"),this},h.__private__.setLineMiterLimit=h.__private__.setMiterLimit=h.setLineMiterLimit=h.setMiterLimit=function(F){if(F=F||0,isNaN(F))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return ne(S(A(F))+" M"),this},h.GState=pv,h.setGState=function(F){(F=typeof F=="string"?pn[ji[F]]:Hx(null,F)).equals(Go)||(ne("/"+F.id+" gs"),Go=F)};var Hx=function(F,Q){if(!F||!ji[F]){var he=!1;for(var Ce in pn)if(pn.hasOwnProperty(Ce)&&pn[Ce].equals(Q)){he=!0;break}if(he)Q=pn[Ce];else{var ke="GS"+(Object.keys(pn).length+1).toString(10);pn[ke]=Q,Q.id=ke}return F&&(ji[F]=Q.id),wr.publish("addGState",Q),Q}};h.addGState=function(F,Q){return Hx(F,Q),this},h.saveGraphicsState=function(){return ne("q"),Qa.push({key:zt,size:Re,color:od}),this},h.restoreGraphicsState=function(){ne("Q");var F=Qa.pop();return zt=F.key,Re=F.size,od=F.color,Go=null,this},h.setCurrentTransformationMatrix=function(F){return ne(F.toString()+" cm"),this},h.comment=function(F){return ne("#"+F),this};var Bu=function(F,Q){var he=F||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return he},set:function(We){isNaN(We)||(he=parseFloat(We))}});var Ce=Q||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return Ce},set:function(We){isNaN(We)||(Ce=parseFloat(We))}});var ke="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return ke},set:function(We){ke=We.toString()}}),this},gh=function(F,Q,he,Ce){Bu.call(this,F,Q),this.type="rect";var ke=he||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return ke},set:function(tt){isNaN(tt)||(ke=parseFloat(tt))}});var We=Ce||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return We},set:function(tt){isNaN(tt)||(We=parseFloat(tt))}}),this},yh=function(){this.page=vn,this.currentPage=V,this.pages=ve.slice(0),this.pagesContext=Wt.slice(0),this.x=yr,this.y=Qt,this.matrix=zn,this.width=ld(V),this.height=$l(V),this.outputDestination=Oe,this.id="",this.objectNumber=-1};yh.prototype.restore=function(){vn=this.page,V=this.currentPage,Wt=this.pagesContext,ve=this.pages,yr=this.x,Qt=this.y,zn=this.matrix,bh(V,this.width),jh(V,this.height),Oe=this.outputDestination};var Gx=function(F,Q,he,Ce,ke){lo.push(new yh),vn=V=0,ve=[],yr=F,Qt=Q,zn=ke,dh([he,Ce])},Xj=function(F){if(oo[F])lo.pop().restore();else{var Q=new yh,he="Xo"+(Object.keys(da).length+1).toString(10);Q.id=he,oo[F]=he,da[he]=Q,wr.publish("addFormObject",Q),lo.pop().restore()}};for(var zu in h.beginFormObject=function(F,Q,he,Ce,ke){return Gx(F,Q,he,Ce,ke),this},h.endFormObject=function(F){return Xj(F),this},h.doFormObject=function(F,Q){var he=da[oo[F]];return ne("q"),ne(Q.toString()+" cm"),ne("/"+he.id+" Do"),ne("Q"),this},h.getFormObject=function(F){var Q=da[oo[F]];return{x:Q.x,y:Q.y,width:Q.width,height:Q.height,matrix:Q.matrix}},h.save=function(F,Q){return F=F||"generated.pdf",(Q=Q||{}).returnPromise=Q.returnPromise||!1,Q.returnPromise===!1?(bd(Lu(Yo()),F),typeof bd.unload=="function"&&Ft.setTimeout&&setTimeout(bd.unload,911),this):new Promise(function(he,Ce){try{var ke=bd(Lu(Yo()),F);typeof bd.unload=="function"&&Ft.setTimeout&&setTimeout(bd.unload,911),he(ke)}catch(We){Ce(We.message)}})},It.API)It.API.hasOwnProperty(zu)&&(zu==="events"&&It.API.events.length?function(F,Q){var he,Ce,ke;for(ke=Q.length-1;ke!==-1;ke--)he=Q[ke][0],Ce=Q[ke][1],F.subscribe.apply(F,[he].concat(typeof Ce=="function"?[Ce]:Ce))}(wr,It.API.events):h[zu]=It.API[zu]);var ld=h.getPageWidth=function(F){return(Wt[F=F||V].mediaBox.topRightX-Wt[F].mediaBox.bottomLeftX)/ot},bh=h.setPageWidth=function(F,Q){Wt[F].mediaBox.topRightX=Q*ot+Wt[F].mediaBox.bottomLeftX},$l=h.getPageHeight=function(F){return(Wt[F=F||V].mediaBox.topRightY-Wt[F].mediaBox.bottomLeftY)/ot},jh=h.setPageHeight=function(F,Q){Wt[F].mediaBox.topRightY=Q*ot+Wt[F].mediaBox.bottomLeftY};return h.internal={pdfEscape:Za,getStyle:Bx,getFont:Hj,getFontSize:rt,getCharSpace:Yj,getTextColor:Kj,getLineHeight:Vx,getLineHeightFactor:Wx,getLineWidth:Mu,write:Ae,getHorizontalCoordinate:ho,getVerticalCoordinate:Xo,getCoordinateString:Gj,getVerticalCoordinateString:Ml,collections:{},newObject:Un,newAdditionalObject:Eu,newObjectDeferred:On,newObjectDeferredBegin:xs,getFilters:uo,putStream:Us,events:wr,scaleFactor:ot,pageSize:{getWidth:function(){return ld(V)},setWidth:function(F){bh(V,F)},getHeight:function(){return $l(V)},setHeight:function(F){jh(V,F)}},encryptionOptions:f,encryption:Na,getEncryptor:Bj,output:Ru,getNumberOfPages:Lj,pages:ve,out:ne,f2:D,f3:T,getPageInfo:$x,getPageInfoByObjId:qt,getCurrentPageInfo:zj,getPDFVersion:g,Point:Bu,Rectangle:gh,Matrix:_t,hasHotfix:Mx},Object.defineProperty(h.internal.pageSize,"width",{get:function(){return ld(V)},set:function(F){bh(V,F)},enumerable:!0,configurable:!0}),Object.defineProperty(h.internal.pageSize,"height",{get:function(){return $l(V)},set:function(F){jh(V,F)},enumerable:!0,configurable:!0}),Oj.call(h,be),zt="F1",Lx(s,n),wr.publish("initialized"),h}mf.prototype.lsbFirstWord=function(e){return String.fromCharCode(e>>0&255,e>>8&255,e>>16&255,e>>24&255)},mf.prototype.toHexString=function(e){return e.split("").map(function(t){return("0"+(255&t.charCodeAt(0)).toString(16)).slice(-2)}).join("")},mf.prototype.hexToBytes=function(e){for(var t=[],n=0;n<e.length;n+=2)t.push(String.fromCharCode(parseInt(e.substr(n,2),16)));return t.join("")},mf.prototype.processOwnerPassword=function(e,t){return aS(nS(t).substr(0,5),e)},mf.prototype.encryptor=function(e,t){var n=nS(this.encryptionKey+String.fromCharCode(255&e,e>>8&255,e>>16&255,255&t,t>>8&255)).substr(0,10);return function(a){return aS(n,a)}},pv.prototype.equals=function(e){var t,n="id,objectNumber,equals";if(!e||xr(e)!==xr(this))return!1;var a=0;for(t in this)if(!(n.indexOf(t)>=0)){if(this.hasOwnProperty(t)&&!e.hasOwnProperty(t)||this[t]!==e[t])return!1;a++}for(t in e)e.hasOwnProperty(t)&&n.indexOf(t)<0&&a--;return a===0},It.API={events:[]},It.version="2.5.2";var yn=It.API,B4=1,ju=function(e){return e.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},lf=function(e){return e.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Gt=function(e){return e.toFixed(2)},tc=function(e){return e.toFixed(5)};yn.__acroform__={};var ps=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e},GI=function(e){return e*B4},yo=function(e){var t=new w8,n=wt.internal.getHeight(e)||0,a=wt.internal.getWidth(e)||0;return t.BBox=[0,0,Number(Gt(a)),Number(Gt(n))],t},bce=yn.__acroform__.setBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return e|=1<<t},jce=yn.__acroform__.clearBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return e&=~(1<<t)},wce=yn.__acroform__.getBit=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return e&1<<t?1:0},Tn=yn.__acroform__.getBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return wce(e,t-1)},In=yn.__acroform__.setBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return bce(e,t-1)},Dn=yn.__acroform__.clearBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return jce(e,t-1)},Nce=yn.__acroform__.calculateCoordinates=function(e,t){var n=t.internal.getHorizontalCoordinate,a=t.internal.getVerticalCoordinate,s=e[0],i=e[1],o=e[2],l=e[3],c={};return c.lowerLeft_X=n(s)||0,c.lowerLeft_Y=a(i+l)||0,c.upperRight_X=n(s+o)||0,c.upperRight_Y=a(i)||0,[Number(Gt(c.lowerLeft_X)),Number(Gt(c.lowerLeft_Y)),Number(Gt(c.upperRight_X)),Number(Gt(c.upperRight_Y))]},Sce=function(e){if(e.appearanceStreamContent)return e.appearanceStreamContent;if(e.V||e.DV){var t=[],n=e._V||e.DV,a=sS(e,n),s=e.scope.internal.getFont(e.fontName,e.fontStyle).id;t.push("/Tx BMC"),t.push("q"),t.push("BT"),t.push(e.scope.__private__.encodeColorString(e.color)),t.push("/"+s+" "+Gt(a.fontSize)+" Tf"),t.push("1 0 0 1 0 0 Tm"),t.push(a.text),t.push("ET"),t.push("Q"),t.push("EMC");var i=yo(e);return i.scope=e.scope,i.stream=t.join(`
`),i}},sS=function(e,t){var n=e.fontSize===0?e.maxFontSize:e.fontSize,a={text:"",fontSize:""},s=(t=(t=t.substr(0,1)=="("?t.substr(1):t).substr(t.length-1)==")"?t.substr(0,t.length-1):t).split(" ");s=e.multiline?s.map(function(T){return T.split(`
`)}):s.map(function(T){return[T]});var i=n,o=wt.internal.getHeight(e)||0;o=o<0?-o:o;var l=wt.internal.getWidth(e)||0;l=l<0?-l:l;var c=function(T,A,_){if(T+1<s.length){var k=A+" "+s[T+1][0];return t0(k,e,_).width<=l-4}return!1};i++;e:for(;i>0;){t="",i--;var d,f,u=t0("3",e,i).height,m=e.multiline?o-i:(o-u)/2,h=m+=2,x=0,g=0,p=0;if(i<=0){t=`(...) Tj
`,t+="% Width of Text: "+t0(t,e,i=12).width+", FieldWidth:"+l+`
`;break}for(var v="",y=0,b=0;b<s.length;b++)if(s.hasOwnProperty(b)){var j=!1;if(s[b].length!==1&&p!==s[b].length-1){if((u+2)*(y+2)+2>o)continue e;v+=s[b][p],j=!0,g=b,b--}else{v=(v+=s[b][p]+" ").substr(v.length-1)==" "?v.substr(0,v.length-1):v;var C=parseInt(b),E=c(C,v,i),S=b>=s.length-1;if(E&&!S){v+=" ",p=0;continue}if(E||S){if(S)g=C;else if(e.multiline&&(u+2)*(y+2)+2>o)continue e}else{if(!e.multiline||(u+2)*(y+2)+2>o)continue e;g=C}}for(var N="",I=x;I<=g;I++){var D=s[I];if(e.multiline){if(I===g){N+=D[p]+" ",p=(p+1)%D.length;continue}if(I===x){N+=D[D.length-1]+" ";continue}}N+=D[0]+" "}switch(N=N.substr(N.length-1)==" "?N.substr(0,N.length-1):N,f=t0(N,e,i).width,e.textAlign){case"right":d=l-f-2;break;case"center":d=(l-f)/2;break;case"left":default:d=2}t+=Gt(d)+" "+Gt(h)+` Td
`,t+="("+ju(N)+`) Tj
`,t+=-Gt(d)+` 0 Td
`,h=-(i+2),f=0,x=j?g:g+1,y++,v=""}break}return a.text=t,a.fontSize=i,a},t0=function(e,t,n){var a=t.scope.internal.getFont(t.fontName,t.fontStyle),s=t.scope.getStringUnitWidth(e,{font:a,fontSize:parseFloat(n),charSpace:0})*parseFloat(n);return{height:t.scope.getStringUnitWidth("3",{font:a,fontSize:parseFloat(n),charSpace:0})*parseFloat(n)*1.5,width:s}},Cce={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},Ace=function(e,t){var n={type:"reference",object:e};t.internal.getPageInfo(e.page).pageContext.annotations.find(function(a){return a.type===n.type&&a.object===n.object})===void 0&&t.internal.getPageInfo(e.page).pageContext.annotations.push(n)},Ece=function(e,t){for(var n in e)if(e.hasOwnProperty(n)){var a=n,s=e[n];t.internal.newObjectDeferredBegin(s.objId,!0),xr(s)==="object"&&typeof s.putStream=="function"&&s.putStream(),delete e[a]}},Pce=function(e,t){if(t.scope=e,e.internal!==void 0&&(e.internal.acroformPlugin===void 0||e.internal.acroformPlugin.isInitialized===!1)){if(ao.FieldNum=0,e.internal.acroformPlugin=JSON.parse(JSON.stringify(Cce)),e.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");B4=e.internal.scaleFactor,e.internal.acroformPlugin.acroFormDictionaryRoot=new N8,e.internal.acroformPlugin.acroFormDictionaryRoot.scope=e,e.internal.acroformPlugin.acroFormDictionaryRoot._eventID=e.internal.events.subscribe("postPutResources",function(){(function(n){n.internal.events.unsubscribe(n.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete n.internal.acroformPlugin.acroFormDictionaryRoot._eventID,n.internal.acroformPlugin.printedOut=!0})(e)}),e.internal.events.subscribe("buildDocument",function(){(function(n){n.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var a=n.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var s in a)if(a.hasOwnProperty(s)){var i=a[s];i.objId=void 0,i.hasAnnotation&&Ace(i,n)}})(e)}),e.internal.events.subscribe("putCatalog",function(){(function(n){if(n.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");n.internal.write("/AcroForm "+n.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(e)}),e.internal.events.subscribe("postPutPages",function(n){(function(a,s){var i=!a;for(var o in a||(s.internal.newObjectDeferredBegin(s.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),s.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),a=a||s.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(a.hasOwnProperty(o)){var l=a[o],c=[],d=l.Rect;if(l.Rect&&(l.Rect=Nce(l.Rect,s)),s.internal.newObjectDeferredBegin(l.objId,!0),l.DA=wt.createDefaultAppearanceStream(l),xr(l)==="object"&&typeof l.getKeyValueListForStream=="function"&&(c=l.getKeyValueListForStream()),l.Rect=d,l.hasAppearanceStream&&!l.appearanceStreamContent){var f=Sce(l);c.push({key:"AP",value:"<</N "+f+">>"}),s.internal.acroformPlugin.xForms.push(f)}if(l.appearanceStreamContent){var u="";for(var m in l.appearanceStreamContent)if(l.appearanceStreamContent.hasOwnProperty(m)){var h=l.appearanceStreamContent[m];if(u+="/"+m+" ",u+="<<",Object.keys(h).length>=1||Array.isArray(h)){for(var o in h)if(h.hasOwnProperty(o)){var x=h[o];typeof x=="function"&&(x=x.call(s,l)),u+="/"+o+" "+x+" ",s.internal.acroformPlugin.xForms.indexOf(x)>=0||s.internal.acroformPlugin.xForms.push(x)}}else typeof(x=h)=="function"&&(x=x.call(s,l)),u+="/"+o+" "+x,s.internal.acroformPlugin.xForms.indexOf(x)>=0||s.internal.acroformPlugin.xForms.push(x);u+=">>"}c.push({key:"AP",value:`<<
`+u+">>"})}s.internal.putStream({additionalKeyValues:c,objectId:l.objId}),s.internal.out("endobj")}i&&Ece(s.internal.acroformPlugin.xForms,s)})(n,e)}),e.internal.acroformPlugin.isInitialized=!0}},j8=yn.__acroform__.arrayToPdfArray=function(e,t,n){var a=function(o){return o};if(Array.isArray(e)){for(var s="[",i=0;i<e.length;i++)switch(i!==0&&(s+=" "),xr(e[i])){case"boolean":case"number":case"object":s+=e[i].toString();break;case"string":e[i].substr(0,1)!=="/"?(t!==void 0&&n&&(a=n.internal.getEncryptor(t)),s+="("+ju(a(e[i].toString()))+")"):s+=e[i].toString()}return s+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},O2=function(e,t,n){var a=function(s){return s};return t!==void 0&&n&&(a=n.internal.getEncryptor(t)),(e=e||"").toString(),e="("+ju(a(e))+")"},Po=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(e){this._objId=e}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Po.prototype.toString=function(){return this.objId+" 0 R"},Po.prototype.putStream=function(){var e=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:e,objectId:this.objId}),this.scope.internal.out("endobj")},Po.prototype.getKeyValueListForStream=function(){var e=[],t=Object.getOwnPropertyNames(this).filter(function(i){return i!="content"&&i!="appearanceStreamContent"&&i!="scope"&&i!="objId"&&i.substring(0,1)!="_"});for(var n in t)if(Object.getOwnPropertyDescriptor(this,t[n]).configurable===!1){var a=t[n],s=this[a];s&&(Array.isArray(s)?e.push({key:a,value:j8(s,this.objId,this.scope)}):s instanceof Po?(s.scope=this.scope,e.push({key:a,value:s.objId+" 0 R"})):typeof s!="function"&&e.push({key:a,value:s}))}return e};var w8=function(){Po.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var e,t=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(n){e=n.trim()},get:function(){return e||null}})};ps(w8,Po);var N8=function(){Po.call(this);var e,t=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return t.length>0?t:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return t}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(e){var n=function(a){return a};return this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),"("+ju(n(e))+")"}},set:function(n){e=n}})};ps(N8,Po);var ao=function e(){Po.call(this);var t=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return t},set:function(v){if(isNaN(v))throw new Error('Invalid value "'+v+'" for attribute F supplied.');t=v}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!Tn(t,3)},set:function(v){v?this.F=In(t,3):this.F=Dn(t,3)}});var n=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return n},set:function(v){if(isNaN(v))throw new Error('Invalid value "'+v+'" for attribute Ff supplied.');n=v}});var a=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(a.length!==0)return a},set:function(v){a=v!==void 0?v:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!a||isNaN(a[0])?0:a[0]},set:function(v){a[0]=v}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!a||isNaN(a[1])?0:a[1]},set:function(v){a[1]=v}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!a||isNaN(a[2])?0:a[2]},set:function(v){a[2]=v}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!a||isNaN(a[3])?0:a[3]},set:function(v){a[3]=v}});var s="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return s},set:function(v){switch(v){case"/Btn":case"/Tx":case"/Ch":case"/Sig":s=v;break;default:throw new Error('Invalid value "'+v+'" for attribute FT supplied.')}}});var i=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!i||i.length<1){if(this instanceof Ry)return;i="FieldObject"+e.FieldNum++}var v=function(y){return y};return this.scope&&(v=this.scope.internal.getEncryptor(this.objId)),"("+ju(v(i))+")"},set:function(v){i=v.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return i},set:function(v){i=v}});var o="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return o},set:function(v){o=v}});var l="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return l},set:function(v){l=v}});var c=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return c},set:function(v){c=v}});var d=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return d===void 0?50/B4:d},set:function(v){d=v}});var f="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return f},set:function(v){f=v}});var u="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!u||this instanceof Ry||this instanceof Oc))return O2(u,this.objId,this.scope)},set:function(v){v=v.toString(),u=v}});var m=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(m)return this instanceof Kn?m:O2(m,this.objId,this.scope)},set:function(v){v=v.toString(),m=this instanceof Kn?v:v.substr(0,1)==="("?lf(v.substr(1,v.length-2)):lf(v)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Kn?lf(m.substr(1,m.length-1)):m},set:function(v){v=v.toString(),m=this instanceof Kn?"/"+v:v}});var h=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(h)return h},set:function(v){this.V=v}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(h)return this instanceof Kn?h:O2(h,this.objId,this.scope)},set:function(v){v=v.toString(),h=this instanceof Kn?v:v.substr(0,1)==="("?lf(v.substr(1,v.length-2)):lf(v)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Kn?lf(h.substr(1,h.length-1)):h},set:function(v){v=v.toString(),h=this instanceof Kn?"/"+v:v}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var x,g=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return g},set:function(v){v=!!v,g=v}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(x)return x},set:function(v){x=v}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!Tn(this.Ff,1)},set:function(v){v?this.Ff=In(this.Ff,1):this.Ff=Dn(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!Tn(this.Ff,2)},set:function(v){v?this.Ff=In(this.Ff,2):this.Ff=Dn(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!Tn(this.Ff,3)},set:function(v){v?this.Ff=In(this.Ff,3):this.Ff=Dn(this.Ff,3)}});var p=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(p!==null)return p},set:function(v){if([0,1,2].indexOf(v)===-1)throw new Error('Invalid value "'+v+'" for attribute Q supplied.');p=v}}),Object.defineProperty(this,"textAlign",{get:function(){var v;switch(p){case 0:default:v="left";break;case 1:v="center";break;case 2:v="right"}return v},configurable:!0,enumerable:!0,set:function(v){switch(v){case"right":case 2:p=2;break;case"center":case 1:p=1;break;case"left":case 0:default:p=0}}})};ps(ao,Po);var Wd=function(){ao.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var e=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return e},set:function(n){e=n}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return e},set:function(n){e=n}});var t=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return j8(t,this.objId,this.scope)},set:function(n){var a,s;s=[],typeof(a=n)=="string"&&(s=function(i,o,l){l||(l=1);for(var c,d=[];c=o.exec(i);)d.push(c[l]);return d}(a,/\((.*?)\)/g)),t=s}}),this.getOptions=function(){return t},this.setOptions=function(n){t=n,this.sort&&t.sort()},this.addOption=function(n){n=(n=n||"").toString(),t.push(n),this.sort&&t.sort()},this.removeOption=function(n,a){for(a=a||!1,n=(n=n||"").toString();t.indexOf(n)!==-1&&(t.splice(t.indexOf(n),1),a!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!Tn(this.Ff,18)},set:function(n){n?this.Ff=In(this.Ff,18):this.Ff=Dn(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!Tn(this.Ff,19)},set:function(n){this.combo===!0&&(n?this.Ff=In(this.Ff,19):this.Ff=Dn(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!Tn(this.Ff,20)},set:function(n){n?(this.Ff=In(this.Ff,20),t.sort()):this.Ff=Dn(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!Tn(this.Ff,22)},set:function(n){n?this.Ff=In(this.Ff,22):this.Ff=Dn(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Tn(this.Ff,23)},set:function(n){n?this.Ff=In(this.Ff,23):this.Ff=Dn(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!Tn(this.Ff,27)},set:function(n){n?this.Ff=In(this.Ff,27):this.Ff=Dn(this.Ff,27)}}),this.hasAppearanceStream=!1};ps(Wd,ao);var Hd=function(){Wd.call(this),this.fontName="helvetica",this.combo=!1};ps(Hd,Wd);var Gd=function(){Hd.call(this),this.combo=!0};ps(Gd,Hd);var Dp=function(){Gd.call(this),this.edit=!0};ps(Dp,Gd);var Kn=function(){ao.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!Tn(this.Ff,15)},set:function(n){n?this.Ff=In(this.Ff,15):this.Ff=Dn(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!Tn(this.Ff,16)},set:function(n){n?this.Ff=In(this.Ff,16):this.Ff=Dn(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!Tn(this.Ff,17)},set:function(n){n?this.Ff=In(this.Ff,17):this.Ff=Dn(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!Tn(this.Ff,26)},set:function(n){n?this.Ff=In(this.Ff,26):this.Ff=Dn(this.Ff,26)}});var e,t={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var n=function(i){return i};if(this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),Object.keys(t).length!==0){var a,s=[];for(a in s.push("<<"),t)s.push("/"+a+" ("+ju(n(t[a]))+")");return s.push(">>"),s.join(`
`)}},set:function(n){xr(n)==="object"&&(t=n)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return t.CA||""},set:function(n){typeof n=="string"&&(t.CA=n)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return e},set:function(n){e=n}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return e.substr(1,e.length-1)},set:function(n){e="/"+n}})};ps(Kn,ao);var kp=function(){Kn.call(this),this.pushButton=!0};ps(kp,Kn);var Kd=function(){Kn.call(this),this.radio=!0,this.pushButton=!1;var e=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t!==void 0?t:[]}})};ps(Kd,Kn);var Ry=function(){var e,t;ao.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return e},set:function(s){e=s}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return t},set:function(s){t=s}});var n,a={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var s=function(l){return l};this.scope&&(s=this.scope.internal.getEncryptor(this.objId));var i,o=[];for(i in o.push("<<"),a)o.push("/"+i+" ("+ju(s(a[i]))+")");return o.push(">>"),o.join(`
`)},set:function(s){xr(s)==="object"&&(a=s)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return a.CA||""},set:function(s){typeof s=="string"&&(a.CA=s)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(s){n=s}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(s){n="/"+s}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=wt.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};ps(Ry,ao),Kd.prototype.setAppearance=function(e){if(!("createAppearanceStream"in e)||!("getCA"in e))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var t in this.Kids)if(this.Kids.hasOwnProperty(t)){var n=this.Kids[t];n.appearanceStreamContent=e.createAppearanceStream(n.optionName),n.caption=e.getCA()}},Kd.prototype.createOption=function(e){var t=new Ry;return t.Parent=this,t.optionName=e,this.Kids.push(t),Tce.call(this.scope,t),t};var Op=function(){Kn.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=wt.CheckBox.createAppearanceStream()};ps(Op,Kn);var Oc=function(){ao.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!Tn(this.Ff,13)},set:function(t){t?this.Ff=In(this.Ff,13):this.Ff=Dn(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!Tn(this.Ff,21)},set:function(t){t?this.Ff=In(this.Ff,21):this.Ff=Dn(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Tn(this.Ff,23)},set:function(t){t?this.Ff=In(this.Ff,23):this.Ff=Dn(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!Tn(this.Ff,24)},set:function(t){t?this.Ff=In(this.Ff,24):this.Ff=Dn(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!Tn(this.Ff,25)},set:function(t){t?this.Ff=In(this.Ff,25):this.Ff=Dn(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!Tn(this.Ff,26)},set:function(t){t?this.Ff=In(this.Ff,26):this.Ff=Dn(this.Ff,26)}});var e=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return e},set:function(t){Number.isInteger(t)&&(e=t)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};ps(Oc,ao);var _p=function(){Oc.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!Tn(this.Ff,14)},set:function(e){e?this.Ff=In(this.Ff,14):this.Ff=Dn(this.Ff,14)}}),this.password=!0};ps(_p,Oc);var wt={CheckBox:{createAppearanceStream:function(){return{N:{On:wt.CheckBox.YesNormal},D:{On:wt.CheckBox.YesPushDown,Off:wt.CheckBox.OffPushDown}}},YesPushDown:function(e){var t=yo(e);t.scope=e.scope;var n=[],a=e.scope.internal.getFont(e.fontName,e.fontStyle).id,s=e.scope.__private__.encodeColorString(e.color),i=sS(e,e.caption);return n.push("0.749023 g"),n.push("0 0 "+Gt(wt.internal.getWidth(e))+" "+Gt(wt.internal.getHeight(e))+" re"),n.push("f"),n.push("BMC"),n.push("q"),n.push("0 0 1 rg"),n.push("/"+a+" "+Gt(i.fontSize)+" Tf "+s),n.push("BT"),n.push(i.text),n.push("ET"),n.push("Q"),n.push("EMC"),t.stream=n.join(`
`),t},YesNormal:function(e){var t=yo(e);t.scope=e.scope;var n=e.scope.internal.getFont(e.fontName,e.fontStyle).id,a=e.scope.__private__.encodeColorString(e.color),s=[],i=wt.internal.getHeight(e),o=wt.internal.getWidth(e),l=sS(e,e.caption);return s.push("1 g"),s.push("0 0 "+Gt(o)+" "+Gt(i)+" re"),s.push("f"),s.push("q"),s.push("0 0 1 rg"),s.push("0 0 "+Gt(o-1)+" "+Gt(i-1)+" re"),s.push("W"),s.push("n"),s.push("0 g"),s.push("BT"),s.push("/"+n+" "+Gt(l.fontSize)+" Tf "+a),s.push(l.text),s.push("ET"),s.push("Q"),t.stream=s.join(`
`),t},OffPushDown:function(e){var t=yo(e);t.scope=e.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+Gt(wt.internal.getWidth(e))+" "+Gt(wt.internal.getHeight(e))+" re"),n.push("f"),t.stream=n.join(`
`),t}},RadioButton:{Circle:{createAppearanceStream:function(e){var t={D:{Off:wt.RadioButton.Circle.OffPushDown},N:{}};return t.N[e]=wt.RadioButton.Circle.YesNormal,t.D[e]=wt.RadioButton.Circle.YesPushDown,t},getCA:function(){return"l"},YesNormal:function(e){var t=yo(e);t.scope=e.scope;var n=[],a=wt.internal.getWidth(e)<=wt.internal.getHeight(e)?wt.internal.getWidth(e)/4:wt.internal.getHeight(e)/4;a=Number((.9*a).toFixed(5));var s=wt.internal.Bezier_C,i=Number((a*s).toFixed(5));return n.push("q"),n.push("1 0 0 1 "+tc(wt.internal.getWidth(e)/2)+" "+tc(wt.internal.getHeight(e)/2)+" cm"),n.push(a+" 0 m"),n.push(a+" "+i+" "+i+" "+a+" 0 "+a+" c"),n.push("-"+i+" "+a+" -"+a+" "+i+" -"+a+" 0 c"),n.push("-"+a+" -"+i+" -"+i+" -"+a+" 0 -"+a+" c"),n.push(i+" -"+a+" "+a+" -"+i+" "+a+" 0 c"),n.push("f"),n.push("Q"),t.stream=n.join(`
`),t},YesPushDown:function(e){var t=yo(e);t.scope=e.scope;var n=[],a=wt.internal.getWidth(e)<=wt.internal.getHeight(e)?wt.internal.getWidth(e)/4:wt.internal.getHeight(e)/4;a=Number((.9*a).toFixed(5));var s=Number((2*a).toFixed(5)),i=Number((s*wt.internal.Bezier_C).toFixed(5)),o=Number((a*wt.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+tc(wt.internal.getWidth(e)/2)+" "+tc(wt.internal.getHeight(e)/2)+" cm"),n.push(s+" 0 m"),n.push(s+" "+i+" "+i+" "+s+" 0 "+s+" c"),n.push("-"+i+" "+s+" -"+s+" "+i+" -"+s+" 0 c"),n.push("-"+s+" -"+i+" -"+i+" -"+s+" 0 -"+s+" c"),n.push(i+" -"+s+" "+s+" -"+i+" "+s+" 0 c"),n.push("f"),n.push("Q"),n.push("0 g"),n.push("q"),n.push("1 0 0 1 "+tc(wt.internal.getWidth(e)/2)+" "+tc(wt.internal.getHeight(e)/2)+" cm"),n.push(a+" 0 m"),n.push(a+" "+o+" "+o+" "+a+" 0 "+a+" c"),n.push("-"+o+" "+a+" -"+a+" "+o+" -"+a+" 0 c"),n.push("-"+a+" -"+o+" -"+o+" -"+a+" 0 -"+a+" c"),n.push(o+" -"+a+" "+a+" -"+o+" "+a+" 0 c"),n.push("f"),n.push("Q"),t.stream=n.join(`
`),t},OffPushDown:function(e){var t=yo(e);t.scope=e.scope;var n=[],a=wt.internal.getWidth(e)<=wt.internal.getHeight(e)?wt.internal.getWidth(e)/4:wt.internal.getHeight(e)/4;a=Number((.9*a).toFixed(5));var s=Number((2*a).toFixed(5)),i=Number((s*wt.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+tc(wt.internal.getWidth(e)/2)+" "+tc(wt.internal.getHeight(e)/2)+" cm"),n.push(s+" 0 m"),n.push(s+" "+i+" "+i+" "+s+" 0 "+s+" c"),n.push("-"+i+" "+s+" -"+s+" "+i+" -"+s+" 0 c"),n.push("-"+s+" -"+i+" -"+i+" -"+s+" 0 -"+s+" c"),n.push(i+" -"+s+" "+s+" -"+i+" "+s+" 0 c"),n.push("f"),n.push("Q"),t.stream=n.join(`
`),t}},Cross:{createAppearanceStream:function(e){var t={D:{Off:wt.RadioButton.Cross.OffPushDown},N:{}};return t.N[e]=wt.RadioButton.Cross.YesNormal,t.D[e]=wt.RadioButton.Cross.YesPushDown,t},getCA:function(){return"8"},YesNormal:function(e){var t=yo(e);t.scope=e.scope;var n=[],a=wt.internal.calculateCross(e);return n.push("q"),n.push("1 1 "+Gt(wt.internal.getWidth(e)-2)+" "+Gt(wt.internal.getHeight(e)-2)+" re"),n.push("W"),n.push("n"),n.push(Gt(a.x1.x)+" "+Gt(a.x1.y)+" m"),n.push(Gt(a.x2.x)+" "+Gt(a.x2.y)+" l"),n.push(Gt(a.x4.x)+" "+Gt(a.x4.y)+" m"),n.push(Gt(a.x3.x)+" "+Gt(a.x3.y)+" l"),n.push("s"),n.push("Q"),t.stream=n.join(`
`),t},YesPushDown:function(e){var t=yo(e);t.scope=e.scope;var n=wt.internal.calculateCross(e),a=[];return a.push("0.749023 g"),a.push("0 0 "+Gt(wt.internal.getWidth(e))+" "+Gt(wt.internal.getHeight(e))+" re"),a.push("f"),a.push("q"),a.push("1 1 "+Gt(wt.internal.getWidth(e)-2)+" "+Gt(wt.internal.getHeight(e)-2)+" re"),a.push("W"),a.push("n"),a.push(Gt(n.x1.x)+" "+Gt(n.x1.y)+" m"),a.push(Gt(n.x2.x)+" "+Gt(n.x2.y)+" l"),a.push(Gt(n.x4.x)+" "+Gt(n.x4.y)+" m"),a.push(Gt(n.x3.x)+" "+Gt(n.x3.y)+" l"),a.push("s"),a.push("Q"),t.stream=a.join(`
`),t},OffPushDown:function(e){var t=yo(e);t.scope=e.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+Gt(wt.internal.getWidth(e))+" "+Gt(wt.internal.getHeight(e))+" re"),n.push("f"),t.stream=n.join(`
`),t}}},createDefaultAppearanceStream:function(e){var t=e.scope.internal.getFont(e.fontName,e.fontStyle).id,n=e.scope.__private__.encodeColorString(e.color);return"/"+t+" "+e.fontSize+" Tf "+n}};wt.internal={Bezier_C:.551915024494,calculateCross:function(e){var t=wt.internal.getWidth(e),n=wt.internal.getHeight(e),a=Math.min(t,n);return{x1:{x:(t-a)/2,y:(n-a)/2+a},x2:{x:(t-a)/2+a,y:(n-a)/2},x3:{x:(t-a)/2,y:(n-a)/2},x4:{x:(t-a)/2+a,y:(n-a)/2+a}}}},wt.internal.getWidth=function(e){var t=0;return xr(e)==="object"&&(t=GI(e.Rect[2])),t},wt.internal.getHeight=function(e){var t=0;return xr(e)==="object"&&(t=GI(e.Rect[3])),t};var Tce=yn.addField=function(e){if(Pce(this,e),!(e instanceof ao))throw new Error("Invalid argument passed to jsPDF.addField.");var t;return(t=e).scope.internal.acroformPlugin.printedOut&&(t.scope.internal.acroformPlugin.printedOut=!1,t.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),t.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(t),e.page=e.scope.internal.getCurrentPageInfo().pageNumber,this};yn.AcroFormChoiceField=Wd,yn.AcroFormListBox=Hd,yn.AcroFormComboBox=Gd,yn.AcroFormEditBox=Dp,yn.AcroFormButton=Kn,yn.AcroFormPushButton=kp,yn.AcroFormRadioButton=Kd,yn.AcroFormCheckBox=Op,yn.AcroFormTextField=Oc,yn.AcroFormPasswordField=_p,yn.AcroFormAppearance=wt,yn.AcroForm={ChoiceField:Wd,ListBox:Hd,ComboBox:Gd,EditBox:Dp,Button:Kn,PushButton:kp,RadioButton:Kd,CheckBox:Op,TextField:Oc,PasswordField:_p,Appearance:wt},It.AcroForm={ChoiceField:Wd,ListBox:Hd,ComboBox:Gd,EditBox:Dp,Button:Kn,PushButton:kp,RadioButton:Kd,CheckBox:Op,TextField:Oc,PasswordField:_p,Appearance:wt};var Ice=It.AcroForm;function S8(e){return e.reduce(function(t,n,a){return t[n]=a,t},{})}(function(e){e.__addimage__={};var t="UNKNOWN",n={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},a=e.__addimage__.getImageFileTypeByImageData=function(T,A){var _,k,L,$,M,B=t;if((A=A||t)==="RGBA"||T.data!==void 0&&T.data instanceof Uint8ClampedArray&&"height"in T&&"width"in T)return"RGBA";if(E(T))for(M in n)for(L=n[M],_=0;_<L.length;_+=1){for($=!0,k=0;k<L[_].length;k+=1)if(L[_][k]!==void 0&&L[_][k]!==T[k]){$=!1;break}if($===!0){B=M;break}}else for(M in n)for(L=n[M],_=0;_<L.length;_+=1){for($=!0,k=0;k<L[_].length;k+=1)if(L[_][k]!==void 0&&L[_][k]!==T.charCodeAt(k)){$=!1;break}if($===!0){B=M;break}}return B===t&&A!==t&&(B=A),B},s=function T(A){for(var _=this.internal.write,k=this.internal.putStream,L=(0,this.internal.getFilters)();L.indexOf("FlateEncode")!==-1;)L.splice(L.indexOf("FlateEncode"),1);A.objectId=this.internal.newObject();var $=[];if($.push({key:"Type",value:"/XObject"}),$.push({key:"Subtype",value:"/Image"}),$.push({key:"Width",value:A.width}),$.push({key:"Height",value:A.height}),A.colorSpace===p.INDEXED?$.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(A.palette.length/3-1)+" "+("sMask"in A&&A.sMask!==void 0?A.objectId+2:A.objectId+1)+" 0 R]"}):($.push({key:"ColorSpace",value:"/"+A.colorSpace}),A.colorSpace===p.DEVICE_CMYK&&$.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),$.push({key:"BitsPerComponent",value:A.bitsPerComponent}),"decodeParameters"in A&&A.decodeParameters!==void 0&&$.push({key:"DecodeParms",value:"<<"+A.decodeParameters+">>"}),"transparency"in A&&Array.isArray(A.transparency)){for(var M="",B=0,U=A.transparency.length;B<U;B++)M+=A.transparency[B]+" "+A.transparency[B]+" ";$.push({key:"Mask",value:"["+M+"]"})}A.sMask!==void 0&&$.push({key:"SMask",value:A.objectId+1+" 0 R"});var W=A.filter!==void 0?["/"+A.filter]:void 0;if(k({data:A.data,additionalKeyValues:$,alreadyAppliedFilters:W,objectId:A.objectId}),_("endobj"),"sMask"in A&&A.sMask!==void 0){var q="/Predictor "+A.predictor+" /Colors 1 /BitsPerComponent "+A.bitsPerComponent+" /Columns "+A.width,R={width:A.width,height:A.height,colorSpace:"DeviceGray",bitsPerComponent:A.bitsPerComponent,decodeParameters:q,data:A.sMask};"filter"in A&&(R.filter=A.filter),T.call(this,R)}if(A.colorSpace===p.INDEXED){var V=this.internal.newObject();k({data:N(new Uint8Array(A.palette)),objectId:V}),_("endobj")}},i=function(){var T=this.internal.collections.addImage_images;for(var A in T)s.call(this,T[A])},o=function(){var T,A=this.internal.collections.addImage_images,_=this.internal.write;for(var k in A)_("/I"+(T=A[k]).index,T.objectId,"0","R")},l=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",i),this.internal.events.subscribe("putXobjectDict",o))},c=function(){var T=this.internal.collections.addImage_images;return l.call(this),T},d=function(){return Object.keys(this.internal.collections.addImage_images).length},f=function(T){return typeof e["process"+T.toUpperCase()]=="function"},u=function(T){return xr(T)==="object"&&T.nodeType===1},m=function(T,A){if(T.nodeName==="IMG"&&T.hasAttribute("src")){var _=""+T.getAttribute("src");if(_.indexOf("data:image/")===0)return Ip(unescape(_).split("base64,").pop());var k=e.loadFile(_,!0);if(k!==void 0)return k}if(T.nodeName==="CANVAS"){if(T.width===0||T.height===0)throw new Error("Given canvas must have data. Canvas width: "+T.width+", height: "+T.height);var L;switch(A){case"PNG":L="image/png";break;case"WEBP":L="image/webp";break;case"JPEG":case"JPG":default:L="image/jpeg"}return Ip(T.toDataURL(L,1).split("base64,").pop())}},h=function(T){var A=this.internal.collections.addImage_images;if(A){for(var _ in A)if(T===A[_].alias)return A[_]}},x=function(T,A,_){return T||A||(T=-96,A=-96),T<0&&(T=-1*_.width*72/T/this.internal.scaleFactor),A<0&&(A=-1*_.height*72/A/this.internal.scaleFactor),T===0&&(T=A*_.width/_.height),A===0&&(A=T*_.height/_.width),[T,A]},g=function(T,A,_,k,L,$){var M=x.call(this,_,k,L),B=this.internal.getCoordinateString,U=this.internal.getVerticalCoordinateString,W=c.call(this);if(_=M[0],k=M[1],W[L.index]=L,$){$*=Math.PI/180;var q=Math.cos($),R=Math.sin($),V=function(ee){return ee.toFixed(4)},G=[V(q),V(R),V(-1*R),V(q),0,0,"cm"]}this.internal.write("q"),$?(this.internal.write([1,"0","0",1,B(T),U(A+k),"cm"].join(" ")),this.internal.write(G.join(" ")),this.internal.write([B(_),"0","0",B(k),"0","0","cm"].join(" "))):this.internal.write([B(_),"0","0",B(k),B(T),U(A+k),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+L.index+" Do"),this.internal.write("Q")},p=e.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};e.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var v=e.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},y=e.__addimage__.sHashCode=function(T){var A,_,k=0;if(typeof T=="string")for(_=T.length,A=0;A<_;A++)k=(k<<5)-k+T.charCodeAt(A),k|=0;else if(E(T))for(_=T.byteLength/2,A=0;A<_;A++)k=(k<<5)-k+T[A],k|=0;return k},b=e.__addimage__.validateStringAsBase64=function(T){(T=T||"").toString().trim();var A=!0;return T.length===0&&(A=!1),T.length%4!=0&&(A=!1),/^[A-Za-z0-9+/]+$/.test(T.substr(0,T.length-2))===!1&&(A=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(T.substr(-2))===!1&&(A=!1),A},j=e.__addimage__.extractImageFromDataUrl=function(T){var A=(T=T||"").split("base64,"),_=null;if(A.length===2){var k=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(A[0]);Array.isArray(k)&&(_={mimeType:k[1],charset:k[2],data:A[1]})}return _},C=e.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};e.__addimage__.isArrayBuffer=function(T){return C()&&T instanceof ArrayBuffer};var E=e.__addimage__.isArrayBufferView=function(T){return C()&&typeof Uint32Array<"u"&&(T instanceof Int8Array||T instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&T instanceof Uint8ClampedArray||T instanceof Int16Array||T instanceof Uint16Array||T instanceof Int32Array||T instanceof Uint32Array||T instanceof Float32Array||T instanceof Float64Array)},S=e.__addimage__.binaryStringToUint8Array=function(T){for(var A=T.length,_=new Uint8Array(A),k=0;k<A;k++)_[k]=T.charCodeAt(k);return _},N=e.__addimage__.arrayBufferToBinaryString=function(T){for(var A="",_=E(T)?T:new Uint8Array(T),k=0;k<_.length;k+=8192)A+=String.fromCharCode.apply(null,_.subarray(k,k+8192));return A};e.addImage=function(){var T,A,_,k,L,$,M,B,U;if(typeof arguments[1]=="number"?(A=t,_=arguments[1],k=arguments[2],L=arguments[3],$=arguments[4],M=arguments[5],B=arguments[6],U=arguments[7]):(A=arguments[1],_=arguments[2],k=arguments[3],L=arguments[4],$=arguments[5],M=arguments[6],B=arguments[7],U=arguments[8]),xr(T=arguments[0])==="object"&&!u(T)&&"imageData"in T){var W=T;T=W.imageData,A=W.format||A||t,_=W.x||_||0,k=W.y||k||0,L=W.w||W.width||L,$=W.h||W.height||$,M=W.alias||M,B=W.compression||B,U=W.rotation||W.angle||U}var q=this.internal.getFilters();if(B===void 0&&q.indexOf("FlateEncode")!==-1&&(B="SLOW"),isNaN(_)||isNaN(k))throw new Error("Invalid coordinates passed to jsPDF.addImage");l.call(this);var R=I.call(this,T,A,M,B);return g.call(this,_,k,L,$,R,U),this};var I=function(T,A,_,k){var L,$,M;if(typeof T=="string"&&a(T)===t){T=unescape(T);var B=D(T,!1);(B!==""||(B=e.loadFile(T,!0))!==void 0)&&(T=B)}if(u(T)&&(T=m(T,A)),A=a(T,A),!f(A))throw new Error("addImage does not support files of type '"+A+"', please ensure that a plugin for '"+A+"' support is added.");if(((M=_)==null||M.length===0)&&(_=function(U){return typeof U=="string"||E(U)?y(U):E(U.data)?y(U.data):null}(T)),(L=h.call(this,_))||(C()&&(T instanceof Uint8Array||A==="RGBA"||($=T,T=S(T))),L=this["process"+A.toUpperCase()](T,d.call(this),_,function(U){return U&&typeof U=="string"&&(U=U.toUpperCase()),U in e.image_compression?U:v.NONE}(k),$)),!L)throw new Error("An unknown error occurred whilst processing the image.");return L},D=e.__addimage__.convertBase64ToBinaryString=function(T,A){var _;A=typeof A!="boolean"||A;var k,L="";if(typeof T=="string"){k=(_=j(T))!==null?_.data:T;try{L=Ip(k)}catch($){if(A)throw b(k)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+$.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return L};e.getImageProperties=function(T){var A,_,k="";if(u(T)&&(T=m(T)),typeof T=="string"&&a(T)===t&&((k=D(T,!1))===""&&(k=e.loadFile(T)||""),T=k),_=a(T),!f(_))throw new Error("addImage does not support files of type '"+_+"', please ensure that a plugin for '"+_+"' support is added.");if(!C()||T instanceof Uint8Array||(T=S(T)),!(A=this["process"+_.toUpperCase()](T)))throw new Error("An unknown error occurred whilst processing the image");return A.fileType=_,A}})(It.API),function(e){var t=function(n){if(n!==void 0&&n!="")return!0};It.API.events.push(["addPage",function(n){this.internal.getPageInfo(n.pageNumber).pageContext.annotations=[]}]),e.events.push(["putPage",function(n){for(var a,s,i,o=this.internal.getCoordinateString,l=this.internal.getVerticalCoordinateString,c=this.internal.getPageInfoByObjId(n.objId),d=n.pageContext.annotations,f=!1,u=0;u<d.length&&!f;u++)switch((a=d[u]).type){case"link":(t(a.options.url)||t(a.options.pageNumber))&&(f=!0);break;case"reference":case"text":case"freetext":f=!0}if(f!=0){this.internal.write("/Annots [");for(var m=0;m<d.length;m++){a=d[m];var h=this.internal.pdfEscape,x=this.internal.getEncryptor(n.objId);switch(a.type){case"reference":this.internal.write(" "+a.object.objId+" 0 R ");break;case"text":var g=this.internal.newAdditionalObject(),p=this.internal.newAdditionalObject(),v=this.internal.getEncryptor(g.objId),y=a.title||"Note";i="<</Type /Annot /Subtype /Text "+(s="/Rect ["+o(a.bounds.x)+" "+l(a.bounds.y+a.bounds.h)+" "+o(a.bounds.x+a.bounds.w)+" "+l(a.bounds.y)+"] ")+"/Contents ("+h(v(a.contents))+")",i+=" /Popup "+p.objId+" 0 R",i+=" /P "+c.objId+" 0 R",i+=" /T ("+h(v(y))+") >>",g.content=i;var b=g.objId+" 0 R";i="<</Type /Annot /Subtype /Popup "+(s="/Rect ["+o(a.bounds.x+30)+" "+l(a.bounds.y+a.bounds.h)+" "+o(a.bounds.x+a.bounds.w+30)+" "+l(a.bounds.y)+"] ")+" /Parent "+b,a.open&&(i+=" /Open true"),i+=" >>",p.content=i,this.internal.write(g.objId,"0 R",p.objId,"0 R");break;case"freetext":s="/Rect ["+o(a.bounds.x)+" "+l(a.bounds.y)+" "+o(a.bounds.x+a.bounds.w)+" "+l(a.bounds.y+a.bounds.h)+"] ";var j=a.color||"#000000";i="<</Type /Annot /Subtype /FreeText "+s+"/Contents ("+h(x(a.contents))+")",i+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+j+")",i+=" /Border [0 0 0]",i+=" >>",this.internal.write(i);break;case"link":if(a.options.name){var C=this.annotations._nameMap[a.options.name];a.options.pageNumber=C.page,a.options.top=C.y}else a.options.top||(a.options.top=0);if(s="/Rect ["+a.finalBounds.x+" "+a.finalBounds.y+" "+a.finalBounds.w+" "+a.finalBounds.h+"] ",i="",a.options.url)i="<</Type /Annot /Subtype /Link "+s+"/Border [0 0 0] /A <</S /URI /URI ("+h(x(a.options.url))+") >>";else if(a.options.pageNumber)switch(i="<</Type /Annot /Subtype /Link "+s+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(a.options.pageNumber).objId+" 0 R",a.options.magFactor=a.options.magFactor||"XYZ",a.options.magFactor){case"Fit":i+=" /Fit]";break;case"FitH":i+=" /FitH "+a.options.top+"]";break;case"FitV":a.options.left=a.options.left||0,i+=" /FitV "+a.options.left+"]";break;case"XYZ":default:var E=l(a.options.top);a.options.left=a.options.left||0,a.options.zoom===void 0&&(a.options.zoom=0),i+=" /XYZ "+a.options.left+" "+E+" "+a.options.zoom+"]"}i!=""&&(i+=" >>",this.internal.write(i))}}this.internal.write("]")}}]),e.createAnnotation=function(n){var a=this.internal.getCurrentPageInfo();switch(n.type){case"link":this.link(n.bounds.x,n.bounds.y,n.bounds.w,n.bounds.h,n);break;case"text":case"freetext":a.pageContext.annotations.push(n)}},e.link=function(n,a,s,i,o){var l=this.internal.getCurrentPageInfo(),c=this.internal.getCoordinateString,d=this.internal.getVerticalCoordinateString;l.pageContext.annotations.push({finalBounds:{x:c(n),y:d(a),w:c(n+s),h:d(a+i)},options:o,type:"link"})},e.textWithLink=function(n,a,s,i){var o,l,c=this.getTextWidth(n),d=this.internal.getLineHeight()/this.internal.scaleFactor;if(i.maxWidth!==void 0){l=i.maxWidth;var f=this.splitTextToSize(n,l).length;o=Math.ceil(d*f)}else l=c,o=d;return this.text(n,a,s,i),s+=.2*d,i.align==="center"&&(a-=c/2),i.align==="right"&&(a-=c),this.link(a,s-d,l,o,i),c},e.getTextWidth=function(n){var a=this.internal.getFontSize();return this.getStringUnitWidth(n)*a/this.internal.scaleFactor}}(It.API),function(e){var t={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},n={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},a={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},s=[1570,1571,1573,1575];e.__arabicParser__={};var i=e.__arabicParser__.isInArabicSubstitutionA=function(g){return t[g.charCodeAt(0)]!==void 0},o=e.__arabicParser__.isArabicLetter=function(g){return typeof g=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(g)},l=e.__arabicParser__.isArabicEndLetter=function(g){return o(g)&&i(g)&&t[g.charCodeAt(0)].length<=2},c=e.__arabicParser__.isArabicAlfLetter=function(g){return o(g)&&s.indexOf(g.charCodeAt(0))>=0};e.__arabicParser__.arabicLetterHasIsolatedForm=function(g){return o(g)&&i(g)&&t[g.charCodeAt(0)].length>=1};var d=e.__arabicParser__.arabicLetterHasFinalForm=function(g){return o(g)&&i(g)&&t[g.charCodeAt(0)].length>=2};e.__arabicParser__.arabicLetterHasInitialForm=function(g){return o(g)&&i(g)&&t[g.charCodeAt(0)].length>=3};var f=e.__arabicParser__.arabicLetterHasMedialForm=function(g){return o(g)&&i(g)&&t[g.charCodeAt(0)].length==4},u=e.__arabicParser__.resolveLigatures=function(g){var p=0,v=n,y="",b=0;for(p=0;p<g.length;p+=1)v[g.charCodeAt(p)]!==void 0?(b++,typeof(v=v[g.charCodeAt(p)])=="number"&&(y+=String.fromCharCode(v),v=n,b=0),p===g.length-1&&(v=n,y+=g.charAt(p-(b-1)),p-=b-1,b=0)):(v=n,y+=g.charAt(p-b),p-=b,b=0);return y};e.__arabicParser__.isArabicDiacritic=function(g){return g!==void 0&&a[g.charCodeAt(0)]!==void 0};var m=e.__arabicParser__.getCorrectForm=function(g,p,v){return o(g)?i(g)===!1?-1:!d(g)||!o(p)&&!o(v)||!o(v)&&l(p)||l(g)&&!o(p)||l(g)&&c(p)||l(g)&&l(p)?0:f(g)&&o(p)&&!l(p)&&o(v)&&d(v)?3:l(g)||!o(v)?1:2:-1},h=function(g){var p=0,v=0,y=0,b="",j="",C="",E=(g=g||"").split("\\s+"),S=[];for(p=0;p<E.length;p+=1){for(S.push(""),v=0;v<E[p].length;v+=1)b=E[p][v],j=E[p][v-1],C=E[p][v+1],o(b)?(y=m(b,j,C),S[p]+=y!==-1?String.fromCharCode(t[b.charCodeAt(0)][y]):b):S[p]+=b;S[p]=u(S[p])}return S.join(" ")},x=e.__arabicParser__.processArabic=e.processArabic=function(){var g,p=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,v=[];if(Array.isArray(p)){var y=0;for(v=[],y=0;y<p.length;y+=1)Array.isArray(p[y])?v.push([h(p[y][0]),p[y][1],p[y][2]]):v.push([h(p[y])]);g=v}else g=h(p);return typeof arguments[0]=="string"?g:(arguments[0].text=g,arguments[0])};e.events.push(["preProcessText",x])}(It.API),It.API.autoPrint=function(e){var t;switch((e=e||{}).variant=e.variant||"non-conform",e.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){t=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+t+" 0 R")})}return this},function(e){var t=function(){var n=void 0;Object.defineProperty(this,"pdf",{get:function(){return n},set:function(l){n=l}});var a=150;Object.defineProperty(this,"width",{get:function(){return a},set:function(l){a=isNaN(l)||Number.isInteger(l)===!1||l<0?150:l,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=a+1)}});var s=300;Object.defineProperty(this,"height",{get:function(){return s},set:function(l){s=isNaN(l)||Number.isInteger(l)===!1||l<0?300:l,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=s+1)}});var i=[];Object.defineProperty(this,"childNodes",{get:function(){return i},set:function(l){i=l}});var o={};Object.defineProperty(this,"style",{get:function(){return o},set:function(l){o=l}}),Object.defineProperty(this,"parentNode",{})};t.prototype.getContext=function(n,a){var s;if((n=n||"2d")!=="2d")return null;for(s in a)this.pdf.context2d.hasOwnProperty(s)&&(this.pdf.context2d[s]=a[s]);return this.pdf.context2d._canvas=this,this.pdf.context2d},t.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},e.events.push(["initialized",function(){this.canvas=new t,this.canvas.pdf=this}])}(It.API),function(e){var t={left:0,top:0,bottom:0,right:0},n=!1,a=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},t),this.internal.__cell__.margins.width=this.getPageWidth(),s.call(this))},s=function(){this.internal.__cell__.lastCell=new i,this.internal.__cell__.pages=1},i=function(){var c=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return c},set:function(g){c=g}});var d=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return d},set:function(g){d=g}});var f=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return f},set:function(g){f=g}});var u=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return u},set:function(g){u=g}});var m=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return m},set:function(g){m=g}});var h=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return h},set:function(g){h=g}});var x=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return x},set:function(g){x=g}}),this};i.prototype.clone=function(){return new i(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},i.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},e.setHeaderFunction=function(c){return a.call(this),this.internal.__cell__.headerFunction=typeof c=="function"?c:void 0,this},e.getTextDimensions=function(c,d){a.call(this);var f=(d=d||{}).fontSize||this.getFontSize(),u=d.font||this.getFont(),m=d.scaleFactor||this.internal.scaleFactor,h=0,x=0,g=0,p=this;if(!Array.isArray(c)&&typeof c!="string"){if(typeof c!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");c=String(c)}var v=d.maxWidth;v>0?typeof c=="string"?c=this.splitTextToSize(c,v):Object.prototype.toString.call(c)==="[object Array]"&&(c=c.reduce(function(b,j){return b.concat(p.splitTextToSize(j,v))},[])):c=Array.isArray(c)?c:[c];for(var y=0;y<c.length;y++)h<(g=this.getStringUnitWidth(c[y],{font:u})*f)&&(h=g);return h!==0&&(x=c.length),{w:h/=m,h:Math.max((x*f*this.getLineHeightFactor()-f*(this.getLineHeightFactor()-1))/m,0)}},e.cellAddPage=function(){a.call(this),this.addPage();var c=this.internal.__cell__.margins||t;return this.internal.__cell__.lastCell=new i(c.left,c.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var o=e.cell=function(){var c;c=arguments[0]instanceof i?arguments[0]:new i(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),a.call(this);var d=this.internal.__cell__.lastCell,f=this.internal.__cell__.padding,u=this.internal.__cell__.margins||t,m=this.internal.__cell__.tableHeaderRow,h=this.internal.__cell__.printHeaders;return d.lineNumber!==void 0&&(d.lineNumber===c.lineNumber?(c.x=(d.x||0)+(d.width||0),c.y=d.y||0):d.y+d.height+c.height+u.bottom>this.getPageHeight()?(this.cellAddPage(),c.y=u.top,h&&m&&(this.printHeaderRow(c.lineNumber,!0),c.y+=m[0].height)):c.y=d.y+d.height||c.y),c.text[0]!==void 0&&(this.rect(c.x,c.y,c.width,c.height,n===!0?"FD":void 0),c.align==="right"?this.text(c.text,c.x+c.width-f,c.y+f,{align:"right",baseline:"top"}):c.align==="center"?this.text(c.text,c.x+c.width/2,c.y+f,{align:"center",baseline:"top",maxWidth:c.width-f-f}):this.text(c.text,c.x+f,c.y+f,{align:"left",baseline:"top",maxWidth:c.width-f-f})),this.internal.__cell__.lastCell=c,this};e.table=function(c,d,f,u,m){if(a.call(this),!f)throw new Error("No data for PDF table.");var h,x,g,p,v=[],y=[],b=[],j={},C={},E=[],S=[],N=(m=m||{}).autoSize||!1,I=m.printHeaders!==!1,D=m.css&&m.css["font-size"]!==void 0?16*m.css["font-size"]:m.fontSize||12,T=m.margins||Object.assign({width:this.getPageWidth()},t),A=typeof m.padding=="number"?m.padding:3,_=m.headerBackgroundColor||"#c8c8c8",k=m.headerTextColor||"#000";if(s.call(this),this.internal.__cell__.printHeaders=I,this.internal.__cell__.margins=T,this.internal.__cell__.table_font_size=D,this.internal.__cell__.padding=A,this.internal.__cell__.headerBackgroundColor=_,this.internal.__cell__.headerTextColor=k,this.setFontSize(D),u==null)y=v=Object.keys(f[0]),b=v.map(function(){return"left"});else if(Array.isArray(u)&&xr(u[0])==="object")for(v=u.map(function(W){return W.name}),y=u.map(function(W){return W.prompt||W.name||""}),b=u.map(function(W){return W.align||"left"}),h=0;h<u.length;h+=1)C[u[h].name]=u[h].width*(19.049976/25.4);else Array.isArray(u)&&typeof u[0]=="string"&&(y=v=u,b=v.map(function(){return"left"}));if(N||Array.isArray(u)&&typeof u[0]=="string")for(h=0;h<v.length;h+=1){for(j[p=v[h]]=f.map(function(W){return W[p]}),this.setFont(void 0,"bold"),E.push(this.getTextDimensions(y[h],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),x=j[p],this.setFont(void 0,"normal"),g=0;g<x.length;g+=1)E.push(this.getTextDimensions(x[g],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);C[p]=Math.max.apply(null,E)+A+A,E=[]}if(I){var L={};for(h=0;h<v.length;h+=1)L[v[h]]={},L[v[h]].text=y[h],L[v[h]].align=b[h];var $=l.call(this,L,C);S=v.map(function(W){return new i(c,d,C[W],$,L[W].text,void 0,L[W].align)}),this.setTableHeaderRow(S),this.printHeaderRow(1,!1)}var M=u.reduce(function(W,q){return W[q.name]=q.align,W},{});for(h=0;h<f.length;h+=1){"rowStart"in m&&m.rowStart instanceof Function&&m.rowStart({row:h,data:f[h]},this);var B=l.call(this,f[h],C);for(g=0;g<v.length;g+=1){var U=f[h][v[g]];"cellStart"in m&&m.cellStart instanceof Function&&m.cellStart({row:h,col:g,data:U},this),o.call(this,new i(c,d,C[v[g]],B,U,h+2,M[v[g]]))}}return this.internal.__cell__.table_x=c,this.internal.__cell__.table_y=d,this};var l=function(c,d){var f=this.internal.__cell__.padding,u=this.internal.__cell__.table_font_size,m=this.internal.scaleFactor;return Object.keys(c).map(function(h){var x=c[h];return this.splitTextToSize(x.hasOwnProperty("text")?x.text:x,d[h]-f-f)},this).map(function(h){return this.getLineHeightFactor()*h.length*u/m+f+f},this).reduce(function(h,x){return Math.max(h,x)},0)};e.setTableHeaderRow=function(c){a.call(this),this.internal.__cell__.tableHeaderRow=c},e.printHeaderRow=function(c,d){if(a.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var f;if(n=!0,typeof this.internal.__cell__.headerFunction=="function"){var u=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new i(u[0],u[1],u[2],u[3],void 0,-1)}this.setFont(void 0,"bold");for(var m=[],h=0;h<this.internal.__cell__.tableHeaderRow.length;h+=1){f=this.internal.__cell__.tableHeaderRow[h].clone(),d&&(f.y=this.internal.__cell__.margins.top||0,m.push(f)),f.lineNumber=c;var x=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),o.call(this,f),this.setTextColor(x)}m.length>0&&this.setTableHeaderRow(m),this.setFont(void 0,"normal"),n=!1}}(It.API);var C8={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},A8=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],iS=S8(A8),E8=[100,200,300,400,500,600,700,800,900],Dce=S8(E8);function oS(e){var t=e.family.replace(/"|'/g,"").toLowerCase(),n=function(i){return C8[i=i||"normal"]?i:"normal"}(e.style),a=function(i){if(!i)return 400;if(typeof i=="number")return i>=100&&i<=900&&i%100==0?i:400;if(/^\d00$/.test(i))return parseInt(i);switch(i){case"bold":return 700;case"normal":default:return 400}}(e.weight),s=function(i){return typeof iS[i=i||"normal"]=="number"?i:"normal"}(e.stretch);return{family:t,style:n,weight:a,stretch:s,src:e.src||[],ref:e.ref||{name:t,style:[s,n,a].join(" ")}}}function KI(e,t,n,a){var s;for(s=n;s>=0&&s<t.length;s+=a)if(e[t[s]])return e[t[s]];for(s=n;s>=0&&s<t.length;s-=a)if(e[t[s]])return e[t[s]]}var kce={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},YI={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function XI(e){return[e.stretch,e.style,e.weight,e.family].join(" ")}function Oce(e,t,n){for(var a=(n=n||{}).defaultFontFamily||"times",s=Object.assign({},kce,n.genericFontFamilies||{}),i=null,o=null,l=0;l<t.length;++l)if(s[(i=oS(t[l])).family]&&(i.family=s[i.family]),e.hasOwnProperty(i.family)){o=e[i.family];break}if(!(o=o||e[a]))throw new Error("Could not find a font-family for the rule '"+XI(i)+"' and default family '"+a+"'.");if(o=function(c,d){if(d[c])return d[c];var f=iS[c],u=f<=iS.normal?-1:1,m=KI(d,A8,f,u);if(!m)throw new Error("Could not find a matching font-stretch value for "+c);return m}(i.stretch,o),o=function(c,d){if(d[c])return d[c];for(var f=C8[c],u=0;u<f.length;++u)if(d[f[u]])return d[f[u]];throw new Error("Could not find a matching font-style for "+c)}(i.style,o),!(o=function(c,d){if(d[c])return d[c];if(c===400&&d[500])return d[500];if(c===500&&d[400])return d[400];var f=Dce[c],u=KI(d,E8,f,c<400?-1:1);if(!u)throw new Error("Could not find a matching font-weight for value "+c);return u}(i.weight,o)))throw new Error("Failed to resolve a font for the rule '"+XI(i)+"'.");return o}function QI(e){return e.trimLeft()}function _ce(e,t){for(var n=0;n<e.length;){if(e.charAt(n)===t)return[e.substring(0,n),e.substring(n+1)];n+=1}return null}function Lce(e){var t=e.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return t===null?null:[t[0],e.substring(t[0].length)]}var r0,JI,ZI,_2=["times"];(function(e){var t,n,a,s,i,o,l,c,d,f=function(R){return R=R||{},this.isStrokeTransparent=R.isStrokeTransparent||!1,this.strokeOpacity=R.strokeOpacity||1,this.strokeStyle=R.strokeStyle||"#000000",this.fillStyle=R.fillStyle||"#000000",this.isFillTransparent=R.isFillTransparent||!1,this.fillOpacity=R.fillOpacity||1,this.font=R.font||"10px sans-serif",this.textBaseline=R.textBaseline||"alphabetic",this.textAlign=R.textAlign||"left",this.lineWidth=R.lineWidth||1,this.lineJoin=R.lineJoin||"miter",this.lineCap=R.lineCap||"butt",this.path=R.path||[],this.transform=R.transform!==void 0?R.transform.clone():new c,this.globalCompositeOperation=R.globalCompositeOperation||"normal",this.globalAlpha=R.globalAlpha||1,this.clip_path=R.clip_path||[],this.currentPoint=R.currentPoint||new o,this.miterLimit=R.miterLimit||10,this.lastPoint=R.lastPoint||new o,this.lineDashOffset=R.lineDashOffset||0,this.lineDash=R.lineDash||[],this.margin=R.margin||[0,0,0,0],this.prevPageLastElemOffset=R.prevPageLastElemOffset||0,this.ignoreClearRect=typeof R.ignoreClearRect!="boolean"||R.ignoreClearRect,this};e.events.push(["initialized",function(){this.context2d=new u(this),t=this.internal.f2,n=this.internal.getCoordinateString,a=this.internal.getVerticalCoordinateString,s=this.internal.getHorizontalCoordinate,i=this.internal.getVerticalCoordinate,o=this.internal.Point,l=this.internal.Rectangle,c=this.internal.Matrix,d=new f}]);var u=function(R){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var V=R;Object.defineProperty(this,"pdf",{get:function(){return V}});var G=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return G},set:function(le){G=!!le}});var ee=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return ee},set:function(le){ee=!!le}});var re=0;Object.defineProperty(this,"posX",{get:function(){return re},set:function(le){isNaN(le)||(re=le)}});var de=0;Object.defineProperty(this,"posY",{get:function(){return de},set:function(le){isNaN(le)||(de=le)}}),Object.defineProperty(this,"margin",{get:function(){return d.margin},set:function(le){var ne;typeof le=="number"?ne=[le,le,le,le]:((ne=new Array(4))[0]=le[0],ne[1]=le.length>=2?le[1]:ne[0],ne[2]=le.length>=3?le[2]:ne[0],ne[3]=le.length>=4?le[3]:ne[1]),d.margin=ne}});var ue=!1;Object.defineProperty(this,"autoPaging",{get:function(){return ue},set:function(le){ue=le}});var oe=0;Object.defineProperty(this,"lastBreak",{get:function(){return oe},set:function(le){oe=le}});var ge=[];Object.defineProperty(this,"pageBreaks",{get:function(){return ge},set:function(le){ge=le}}),Object.defineProperty(this,"ctx",{get:function(){return d},set:function(le){le instanceof f&&(d=le)}}),Object.defineProperty(this,"path",{get:function(){return d.path},set:function(le){d.path=le}});var ve=[];Object.defineProperty(this,"ctxStack",{get:function(){return ve},set:function(le){ve=le}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(le){var ne;ne=m(le),this.ctx.fillStyle=ne.style,this.ctx.isFillTransparent=ne.a===0,this.ctx.fillOpacity=ne.a,this.pdf.setFillColor(ne.r,ne.g,ne.b,{a:ne.a}),this.pdf.setTextColor(ne.r,ne.g,ne.b,{a:ne.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(le){var ne=m(le);this.ctx.strokeStyle=ne.style,this.ctx.isStrokeTransparent=ne.a===0,this.ctx.strokeOpacity=ne.a,ne.a===0?this.pdf.setDrawColor(255,255,255):(ne.a,this.pdf.setDrawColor(ne.r,ne.g,ne.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(le){["butt","round","square"].indexOf(le)!==-1&&(this.ctx.lineCap=le,this.pdf.setLineCap(le))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(le){isNaN(le)||(this.ctx.lineWidth=le,this.pdf.setLineWidth(le))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(le){["bevel","round","miter"].indexOf(le)!==-1&&(this.ctx.lineJoin=le,this.pdf.setLineJoin(le))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(le){isNaN(le)||(this.ctx.miterLimit=le,this.pdf.setMiterLimit(le))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(le){this.ctx.textBaseline=le}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(le){["right","end","center","left","start"].indexOf(le)!==-1&&(this.ctx.textAlign=le)}});var xe=null;function Oe(le,ne){if(xe===null){var Ae=function(Se){var be=[];return Object.keys(Se).forEach(function(Re){Se[Re].forEach(function(nt){var rt=null;switch(nt){case"bold":rt={family:Re,weight:"bold"};break;case"italic":rt={family:Re,style:"italic"};break;case"bolditalic":rt={family:Re,weight:"bold",style:"italic"};break;case"":case"normal":rt={family:Re}}rt!==null&&(rt.ref={name:Re,style:nt},be.push(rt))})}),be}(le.getFontList());xe=function(Se){for(var be={},Re=0;Re<Se.length;++Re){var nt=oS(Se[Re]),rt=nt.family,xt=nt.stretch,Ve=nt.style,et=nt.weight;be[rt]=be[rt]||{},be[rt][xt]=be[rt][xt]||{},be[rt][xt][Ve]=be[rt][xt][Ve]||{},be[rt][xt][Ve][et]=nt}return be}(Ae.concat(ne))}return xe}var ye=null;Object.defineProperty(this,"fontFaces",{get:function(){return ye},set:function(le){xe=null,ye=le}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(le){var ne;if(this.ctx.font=le,(ne=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(le))!==null){var Ae=ne[1],Se=(ne[2],ne[3]),be=ne[4],Re=(ne[5],ne[6]),nt=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(be)[2];be=Math.floor(nt==="px"?parseFloat(be)*this.pdf.internal.scaleFactor:nt==="em"?parseFloat(be)*this.pdf.getFontSize():parseFloat(be)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(be);var rt=function(At){var zt,ot,yr=[],Qt=At.trim();if(Qt==="")return _2;if(Qt in YI)return[YI[Qt]];for(;Qt!=="";){switch(ot=null,zt=(Qt=QI(Qt)).charAt(0)){case'"':case"'":ot=_ce(Qt.substring(1),zt);break;default:ot=Lce(Qt)}if(ot===null||(yr.push(ot[0]),(Qt=QI(ot[1]))!==""&&Qt.charAt(0)!==","))return _2;Qt=Qt.replace(/^,/,"")}return yr}(Re);if(this.fontFaces){var xt=Oce(Oe(this.pdf,this.fontFaces),rt.map(function(At){return{family:At,stretch:"normal",weight:Se,style:Ae}}));this.pdf.setFont(xt.ref.name,xt.ref.style)}else{var Ve="";(Se==="bold"||parseInt(Se,10)>=700||Ae==="bold")&&(Ve="bold"),Ae==="italic"&&(Ve+="italic"),Ve.length===0&&(Ve="normal");for(var et="",ut={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},gt=0;gt<rt.length;gt++){if(this.pdf.internal.getFont(rt[gt],Ve,{noFallback:!0,disableWarning:!0})!==void 0){et=rt[gt];break}if(Ve==="bolditalic"&&this.pdf.internal.getFont(rt[gt],"bold",{noFallback:!0,disableWarning:!0})!==void 0)et=rt[gt],Ve="bold";else if(this.pdf.internal.getFont(rt[gt],"normal",{noFallback:!0,disableWarning:!0})!==void 0){et=rt[gt],Ve="normal";break}}if(et===""){for(var Dt=0;Dt<rt.length;Dt++)if(ut[rt[Dt]]){et=ut[rt[Dt]];break}}et=et===""?"Times":et,this.pdf.setFont(et,Ve)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(le){this.ctx.globalCompositeOperation=le}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(le){this.ctx.globalAlpha=le}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(le){this.ctx.lineDashOffset=le,q.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(le){this.ctx.lineDash=le,q.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(le){this.ctx.ignoreClearRect=!!le}})};u.prototype.setLineDash=function(R){this.lineDash=R},u.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},u.prototype.fill=function(){j.call(this,"fill",!1)},u.prototype.stroke=function(){j.call(this,"stroke",!1)},u.prototype.beginPath=function(){this.path=[{type:"begin"}]},u.prototype.moveTo=function(R,V){if(isNaN(R)||isNaN(V))throw Lr.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var G=this.ctx.transform.applyToPoint(new o(R,V));this.path.push({type:"mt",x:G.x,y:G.y}),this.ctx.lastPoint=new o(R,V)},u.prototype.closePath=function(){var R=new o(0,0),V=0;for(V=this.path.length-1;V!==-1;V--)if(this.path[V].type==="begin"&&xr(this.path[V+1])==="object"&&typeof this.path[V+1].x=="number"){R=new o(this.path[V+1].x,this.path[V+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new o(R.x,R.y)},u.prototype.lineTo=function(R,V){if(isNaN(R)||isNaN(V))throw Lr.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var G=this.ctx.transform.applyToPoint(new o(R,V));this.path.push({type:"lt",x:G.x,y:G.y}),this.ctx.lastPoint=new o(G.x,G.y)},u.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),j.call(this,null,!0)},u.prototype.quadraticCurveTo=function(R,V,G,ee){if(isNaN(G)||isNaN(ee)||isNaN(R)||isNaN(V))throw Lr.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var re=this.ctx.transform.applyToPoint(new o(G,ee)),de=this.ctx.transform.applyToPoint(new o(R,V));this.path.push({type:"qct",x1:de.x,y1:de.y,x:re.x,y:re.y}),this.ctx.lastPoint=new o(re.x,re.y)},u.prototype.bezierCurveTo=function(R,V,G,ee,re,de){if(isNaN(re)||isNaN(de)||isNaN(R)||isNaN(V)||isNaN(G)||isNaN(ee))throw Lr.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var ue=this.ctx.transform.applyToPoint(new o(re,de)),oe=this.ctx.transform.applyToPoint(new o(R,V)),ge=this.ctx.transform.applyToPoint(new o(G,ee));this.path.push({type:"bct",x1:oe.x,y1:oe.y,x2:ge.x,y2:ge.y,x:ue.x,y:ue.y}),this.ctx.lastPoint=new o(ue.x,ue.y)},u.prototype.arc=function(R,V,G,ee,re,de){if(isNaN(R)||isNaN(V)||isNaN(G)||isNaN(ee)||isNaN(re))throw Lr.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(de=!!de,!this.ctx.transform.isIdentity){var ue=this.ctx.transform.applyToPoint(new o(R,V));R=ue.x,V=ue.y;var oe=this.ctx.transform.applyToPoint(new o(0,G)),ge=this.ctx.transform.applyToPoint(new o(0,0));G=Math.sqrt(Math.pow(oe.x-ge.x,2)+Math.pow(oe.y-ge.y,2))}Math.abs(re-ee)>=2*Math.PI&&(ee=0,re=2*Math.PI),this.path.push({type:"arc",x:R,y:V,radius:G,startAngle:ee,endAngle:re,counterclockwise:de})},u.prototype.arcTo=function(R,V,G,ee,re){throw new Error("arcTo not implemented.")},u.prototype.rect=function(R,V,G,ee){if(isNaN(R)||isNaN(V)||isNaN(G)||isNaN(ee))throw Lr.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(R,V),this.lineTo(R+G,V),this.lineTo(R+G,V+ee),this.lineTo(R,V+ee),this.lineTo(R,V),this.lineTo(R+G,V),this.lineTo(R,V)},u.prototype.fillRect=function(R,V,G,ee){if(isNaN(R)||isNaN(V)||isNaN(G)||isNaN(ee))throw Lr.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!h.call(this)){var re={};this.lineCap!=="butt"&&(re.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(re.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(R,V,G,ee),this.fill(),re.hasOwnProperty("lineCap")&&(this.lineCap=re.lineCap),re.hasOwnProperty("lineJoin")&&(this.lineJoin=re.lineJoin)}},u.prototype.strokeRect=function(R,V,G,ee){if(isNaN(R)||isNaN(V)||isNaN(G)||isNaN(ee))throw Lr.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");x.call(this)||(this.beginPath(),this.rect(R,V,G,ee),this.stroke())},u.prototype.clearRect=function(R,V,G,ee){if(isNaN(R)||isNaN(V)||isNaN(G)||isNaN(ee))throw Lr.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(R,V,G,ee))},u.prototype.save=function(R){R=typeof R!="boolean"||R;for(var V=this.pdf.internal.getCurrentPageInfo().pageNumber,G=0;G<this.pdf.internal.getNumberOfPages();G++)this.pdf.setPage(G+1),this.pdf.internal.out("q");if(this.pdf.setPage(V),R){this.ctx.fontSize=this.pdf.internal.getFontSize();var ee=new f(this.ctx);this.ctxStack.push(this.ctx),this.ctx=ee}},u.prototype.restore=function(R){R=typeof R!="boolean"||R;for(var V=this.pdf.internal.getCurrentPageInfo().pageNumber,G=0;G<this.pdf.internal.getNumberOfPages();G++)this.pdf.setPage(G+1),this.pdf.internal.out("Q");this.pdf.setPage(V),R&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},u.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var m=function(R){var V,G,ee,re;if(R.isCanvasGradient===!0&&(R=R.getColor()),!R)return{r:0,g:0,b:0,a:0,style:R};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(R))V=0,G=0,ee=0,re=0;else{var de=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(R);if(de!==null)V=parseInt(de[1]),G=parseInt(de[2]),ee=parseInt(de[3]),re=1;else if((de=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(R))!==null)V=parseInt(de[1]),G=parseInt(de[2]),ee=parseInt(de[3]),re=parseFloat(de[4]);else{if(re=1,typeof R=="string"&&R.charAt(0)!=="#"){var ue=new g8(R);R=ue.ok?ue.toHex():"#000000"}R.length===4?(V=R.substring(1,2),V+=V,G=R.substring(2,3),G+=G,ee=R.substring(3,4),ee+=ee):(V=R.substring(1,3),G=R.substring(3,5),ee=R.substring(5,7)),V=parseInt(V,16),G=parseInt(G,16),ee=parseInt(ee,16)}}return{r:V,g:G,b:ee,a:re,style:R}},h=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},x=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};u.prototype.fillText=function(R,V,G,ee){if(isNaN(V)||isNaN(G)||typeof R!="string")throw Lr.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(ee=isNaN(ee)?void 0:ee,!h.call(this)){var re=B(this.ctx.transform.rotation),de=this.ctx.transform.scaleX;A.call(this,{text:R,x:V,y:G,scale:de,angle:re,align:this.textAlign,maxWidth:ee})}},u.prototype.strokeText=function(R,V,G,ee){if(isNaN(V)||isNaN(G)||typeof R!="string")throw Lr.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!x.call(this)){ee=isNaN(ee)?void 0:ee;var re=B(this.ctx.transform.rotation),de=this.ctx.transform.scaleX;A.call(this,{text:R,x:V,y:G,scale:de,renderingMode:"stroke",angle:re,align:this.textAlign,maxWidth:ee})}},u.prototype.measureText=function(R){if(typeof R!="string")throw Lr.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var V=this.pdf,G=this.pdf.internal.scaleFactor,ee=V.internal.getFontSize(),re=V.getStringUnitWidth(R)*ee/V.internal.scaleFactor,de=function(ue){var oe=(ue=ue||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return oe}}),this};return new de({width:re*=Math.round(96*G/72*1e4)/1e4})},u.prototype.scale=function(R,V){if(isNaN(R)||isNaN(V))throw Lr.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var G=new c(R,0,0,V,0,0);this.ctx.transform=this.ctx.transform.multiply(G)},u.prototype.rotate=function(R){if(isNaN(R))throw Lr.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var V=new c(Math.cos(R),Math.sin(R),-Math.sin(R),Math.cos(R),0,0);this.ctx.transform=this.ctx.transform.multiply(V)},u.prototype.translate=function(R,V){if(isNaN(R)||isNaN(V))throw Lr.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var G=new c(1,0,0,1,R,V);this.ctx.transform=this.ctx.transform.multiply(G)},u.prototype.transform=function(R,V,G,ee,re,de){if(isNaN(R)||isNaN(V)||isNaN(G)||isNaN(ee)||isNaN(re)||isNaN(de))throw Lr.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var ue=new c(R,V,G,ee,re,de);this.ctx.transform=this.ctx.transform.multiply(ue)},u.prototype.setTransform=function(R,V,G,ee,re,de){R=isNaN(R)?1:R,V=isNaN(V)?0:V,G=isNaN(G)?0:G,ee=isNaN(ee)?1:ee,re=isNaN(re)?0:re,de=isNaN(de)?0:de,this.ctx.transform=new c(R,V,G,ee,re,de)};var g=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};u.prototype.drawImage=function(R,V,G,ee,re,de,ue,oe,ge){var ve=this.pdf.getImageProperties(R),xe=1,Oe=1,ye=1,le=1;ee!==void 0&&oe!==void 0&&(ye=oe/ee,le=ge/re,xe=ve.width/ee*oe/ee,Oe=ve.height/re*ge/re),de===void 0&&(de=V,ue=G,V=0,G=0),ee!==void 0&&oe===void 0&&(oe=ee,ge=re),ee===void 0&&oe===void 0&&(oe=ve.width,ge=ve.height);for(var ne,Ae=this.ctx.transform.decompose(),Se=B(Ae.rotate.shx),be=new c,Re=(be=(be=(be=be.multiply(Ae.translate)).multiply(Ae.skew)).multiply(Ae.scale)).applyToRectangle(new l(de-V*ye,ue-G*le,ee*xe,re*Oe)),nt=p.call(this,Re),rt=[],xt=0;xt<nt.length;xt+=1)rt.indexOf(nt[xt])===-1&&rt.push(nt[xt]);if(b(rt),this.autoPaging)for(var Ve=rt[0],et=rt[rt.length-1],ut=Ve;ut<et+1;ut++){this.pdf.setPage(ut);var gt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Dt=ut===1?this.posY+this.margin[0]:this.margin[0],At=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],zt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],ot=ut===1?0:At+(ut-2)*zt;if(this.ctx.clip_path.length!==0){var yr=this.path;ne=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=y(ne,this.posX+this.margin[3],-ot+Dt+this.ctx.prevPageLastElemOffset),C.call(this,"fill",!0),this.path=yr}var Qt=JSON.parse(JSON.stringify(Re));Qt=y([Qt],this.posX+this.margin[3],-ot+Dt+this.ctx.prevPageLastElemOffset)[0];var zn=(ut>Ve||ut<et)&&g.call(this);zn&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],gt,zt,null).clip().discardPath()),this.pdf.addImage(R,"JPEG",Qt.x,Qt.y,Qt.w,Qt.h,null,null,Se),zn&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(R,"JPEG",Re.x,Re.y,Re.w,Re.h,null,null,Se)};var p=function(R,V,G){var ee=[];V=V||this.pdf.internal.pageSize.width,G=G||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var re=this.posY+this.ctx.prevPageLastElemOffset;switch(R.type){default:case"mt":case"lt":ee.push(Math.floor((R.y+re)/G)+1);break;case"arc":ee.push(Math.floor((R.y+re-R.radius)/G)+1),ee.push(Math.floor((R.y+re+R.radius)/G)+1);break;case"qct":var de=U(this.ctx.lastPoint.x,this.ctx.lastPoint.y,R.x1,R.y1,R.x,R.y);ee.push(Math.floor((de.y+re)/G)+1),ee.push(Math.floor((de.y+de.h+re)/G)+1);break;case"bct":var ue=W(this.ctx.lastPoint.x,this.ctx.lastPoint.y,R.x1,R.y1,R.x2,R.y2,R.x,R.y);ee.push(Math.floor((ue.y+re)/G)+1),ee.push(Math.floor((ue.y+ue.h+re)/G)+1);break;case"rect":ee.push(Math.floor((R.y+re)/G)+1),ee.push(Math.floor((R.y+R.h+re)/G)+1)}for(var oe=0;oe<ee.length;oe+=1)for(;this.pdf.internal.getNumberOfPages()<ee[oe];)v.call(this);return ee},v=function(){var R=this.fillStyle,V=this.strokeStyle,G=this.font,ee=this.lineCap,re=this.lineWidth,de=this.lineJoin;this.pdf.addPage(),this.fillStyle=R,this.strokeStyle=V,this.font=G,this.lineCap=ee,this.lineWidth=re,this.lineJoin=de},y=function(R,V,G){for(var ee=0;ee<R.length;ee++)switch(R[ee].type){case"bct":R[ee].x2+=V,R[ee].y2+=G;case"qct":R[ee].x1+=V,R[ee].y1+=G;case"mt":case"lt":case"arc":default:R[ee].x+=V,R[ee].y+=G}return R},b=function(R){return R.sort(function(V,G){return V-G})},j=function(R,V){for(var G,ee,re=this.fillStyle,de=this.strokeStyle,ue=this.lineCap,oe=this.lineWidth,ge=Math.abs(oe*this.ctx.transform.scaleX),ve=this.lineJoin,xe=JSON.parse(JSON.stringify(this.path)),Oe=JSON.parse(JSON.stringify(this.path)),ye=[],le=0;le<Oe.length;le++)if(Oe[le].x!==void 0)for(var ne=p.call(this,Oe[le]),Ae=0;Ae<ne.length;Ae+=1)ye.indexOf(ne[Ae])===-1&&ye.push(ne[Ae]);for(var Se=0;Se<ye.length;Se++)for(;this.pdf.internal.getNumberOfPages()<ye[Se];)v.call(this);if(b(ye),this.autoPaging)for(var be=ye[0],Re=ye[ye.length-1],nt=be;nt<Re+1;nt++){this.pdf.setPage(nt),this.fillStyle=re,this.strokeStyle=de,this.lineCap=ue,this.lineWidth=ge,this.lineJoin=ve;var rt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],xt=nt===1?this.posY+this.margin[0]:this.margin[0],Ve=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],et=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],ut=nt===1?0:Ve+(nt-2)*et;if(this.ctx.clip_path.length!==0){var gt=this.path;G=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=y(G,this.posX+this.margin[3],-ut+xt+this.ctx.prevPageLastElemOffset),C.call(this,R,!0),this.path=gt}if(ee=JSON.parse(JSON.stringify(xe)),this.path=y(ee,this.posX+this.margin[3],-ut+xt+this.ctx.prevPageLastElemOffset),V===!1||nt===0){var Dt=(nt>be||nt<Re)&&g.call(this);Dt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],rt,et,null).clip().discardPath()),C.call(this,R,V),Dt&&this.pdf.restoreGraphicsState()}this.lineWidth=oe}else this.lineWidth=ge,C.call(this,R,V),this.lineWidth=oe;this.path=xe},C=function(R,V){if((R!=="stroke"||V||!x.call(this))&&(R==="stroke"||V||!h.call(this))){for(var G,ee,re=[],de=this.path,ue=0;ue<de.length;ue++){var oe=de[ue];switch(oe.type){case"begin":re.push({begin:!0});break;case"close":re.push({close:!0});break;case"mt":re.push({start:oe,deltas:[],abs:[]});break;case"lt":var ge=re.length;if(de[ue-1]&&!isNaN(de[ue-1].x)&&(G=[oe.x-de[ue-1].x,oe.y-de[ue-1].y],ge>0)){for(;ge>=0;ge--)if(re[ge-1].close!==!0&&re[ge-1].begin!==!0){re[ge-1].deltas.push(G),re[ge-1].abs.push(oe);break}}break;case"bct":G=[oe.x1-de[ue-1].x,oe.y1-de[ue-1].y,oe.x2-de[ue-1].x,oe.y2-de[ue-1].y,oe.x-de[ue-1].x,oe.y-de[ue-1].y],re[re.length-1].deltas.push(G);break;case"qct":var ve=de[ue-1].x+2/3*(oe.x1-de[ue-1].x),xe=de[ue-1].y+2/3*(oe.y1-de[ue-1].y),Oe=oe.x+2/3*(oe.x1-oe.x),ye=oe.y+2/3*(oe.y1-oe.y),le=oe.x,ne=oe.y;G=[ve-de[ue-1].x,xe-de[ue-1].y,Oe-de[ue-1].x,ye-de[ue-1].y,le-de[ue-1].x,ne-de[ue-1].y],re[re.length-1].deltas.push(G);break;case"arc":re.push({deltas:[],abs:[],arc:!0}),Array.isArray(re[re.length-1].abs)&&re[re.length-1].abs.push(oe)}}ee=V?null:R==="stroke"?"stroke":"fill";for(var Ae=!1,Se=0;Se<re.length;Se++)if(re[Se].arc)for(var be=re[Se].abs,Re=0;Re<be.length;Re++){var nt=be[Re];nt.type==="arc"?N.call(this,nt.x,nt.y,nt.radius,nt.startAngle,nt.endAngle,nt.counterclockwise,void 0,V,!Ae):_.call(this,nt.x,nt.y),Ae=!0}else if(re[Se].close===!0)this.pdf.internal.out("h"),Ae=!1;else if(re[Se].begin!==!0){var rt=re[Se].start.x,xt=re[Se].start.y;k.call(this,re[Se].deltas,rt,xt),Ae=!0}ee&&I.call(this,ee),V&&D.call(this)}},E=function(R){var V=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,G=V*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return R-G;case"top":return R+V-G;case"hanging":return R+V-2*G;case"middle":return R+V/2-G;case"ideographic":return R;case"alphabetic":default:return R}},S=function(R){return R+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};u.prototype.createLinearGradient=function(){var R=function(){};return R.colorStops=[],R.addColorStop=function(V,G){this.colorStops.push([V,G])},R.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},R.isCanvasGradient=!0,R},u.prototype.createPattern=function(){return this.createLinearGradient()},u.prototype.createRadialGradient=function(){return this.createLinearGradient()};var N=function(R,V,G,ee,re,de,ue,oe,ge){for(var ve=$.call(this,G,ee,re,de),xe=0;xe<ve.length;xe++){var Oe=ve[xe];xe===0&&(ge?T.call(this,Oe.x1+R,Oe.y1+V):_.call(this,Oe.x1+R,Oe.y1+V)),L.call(this,R,V,Oe.x2,Oe.y2,Oe.x3,Oe.y3,Oe.x4,Oe.y4)}oe?D.call(this):I.call(this,ue)},I=function(R){switch(R){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},D=function(){this.pdf.clip(),this.pdf.discardPath()},T=function(R,V){this.pdf.internal.out(n(R)+" "+a(V)+" m")},A=function(R){var V;switch(R.align){case"right":case"end":V="right";break;case"center":V="center";break;case"left":case"start":default:V="left"}var G=this.pdf.getTextDimensions(R.text),ee=E.call(this,R.y),re=S.call(this,ee)-G.h,de=this.ctx.transform.applyToPoint(new o(R.x,ee)),ue=this.ctx.transform.decompose(),oe=new c;oe=(oe=(oe=oe.multiply(ue.translate)).multiply(ue.skew)).multiply(ue.scale);for(var ge,ve,xe,Oe=this.ctx.transform.applyToRectangle(new l(R.x,ee,G.w,G.h)),ye=oe.applyToRectangle(new l(R.x,re,G.w,G.h)),le=p.call(this,ye),ne=[],Ae=0;Ae<le.length;Ae+=1)ne.indexOf(le[Ae])===-1&&ne.push(le[Ae]);if(b(ne),this.autoPaging)for(var Se=ne[0],be=ne[ne.length-1],Re=Se;Re<be+1;Re++){this.pdf.setPage(Re);var nt=Re===1?this.posY+this.margin[0]:this.margin[0],rt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],xt=this.pdf.internal.pageSize.height-this.margin[2],Ve=xt-this.margin[0],et=this.pdf.internal.pageSize.width-this.margin[1],ut=et-this.margin[3],gt=Re===1?0:rt+(Re-2)*Ve;if(this.ctx.clip_path.length!==0){var Dt=this.path;ge=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=y(ge,this.posX+this.margin[3],-1*gt+nt),C.call(this,"fill",!0),this.path=Dt}var At=y([JSON.parse(JSON.stringify(ye))],this.posX+this.margin[3],-gt+nt+this.ctx.prevPageLastElemOffset)[0];R.scale>=.01&&(ve=this.pdf.internal.getFontSize(),this.pdf.setFontSize(ve*R.scale),xe=this.lineWidth,this.lineWidth=xe*R.scale);var zt=this.autoPaging!=="text";if(zt||At.y+At.h<=xt){if(zt||At.y>=nt&&At.x<=et){var ot=zt?R.text:this.pdf.splitTextToSize(R.text,R.maxWidth||et-At.x)[0],yr=y([JSON.parse(JSON.stringify(Oe))],this.posX+this.margin[3],-gt+nt+this.ctx.prevPageLastElemOffset)[0],Qt=zt&&(Re>Se||Re<be)&&g.call(this);Qt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ut,Ve,null).clip().discardPath()),this.pdf.text(ot,yr.x,yr.y,{angle:R.angle,align:V,renderingMode:R.renderingMode}),Qt&&this.pdf.restoreGraphicsState()}}else At.y<xt&&(this.ctx.prevPageLastElemOffset+=xt-At.y);R.scale>=.01&&(this.pdf.setFontSize(ve),this.lineWidth=xe)}else R.scale>=.01&&(ve=this.pdf.internal.getFontSize(),this.pdf.setFontSize(ve*R.scale),xe=this.lineWidth,this.lineWidth=xe*R.scale),this.pdf.text(R.text,de.x+this.posX,de.y+this.posY,{angle:R.angle,align:V,renderingMode:R.renderingMode,maxWidth:R.maxWidth}),R.scale>=.01&&(this.pdf.setFontSize(ve),this.lineWidth=xe)},_=function(R,V,G,ee){G=G||0,ee=ee||0,this.pdf.internal.out(n(R+G)+" "+a(V+ee)+" l")},k=function(R,V,G){return this.pdf.lines(R,V,G,null,null)},L=function(R,V,G,ee,re,de,ue,oe){this.pdf.internal.out([t(s(G+R)),t(i(ee+V)),t(s(re+R)),t(i(de+V)),t(s(ue+R)),t(i(oe+V)),"c"].join(" "))},$=function(R,V,G,ee){for(var re=2*Math.PI,de=Math.PI/2;V>G;)V-=re;var ue=Math.abs(G-V);ue<re&&ee&&(ue=re-ue);for(var oe=[],ge=ee?-1:1,ve=V;ue>1e-5;){var xe=ve+ge*Math.min(ue,de);oe.push(M.call(this,R,ve,xe)),ue-=Math.abs(xe-ve),ve=xe}return oe},M=function(R,V,G){var ee=(G-V)/2,re=R*Math.cos(ee),de=R*Math.sin(ee),ue=re,oe=-de,ge=ue*ue+oe*oe,ve=ge+ue*re+oe*de,xe=4/3*(Math.sqrt(2*ge*ve)-ve)/(ue*de-oe*re),Oe=ue-xe*oe,ye=oe+xe*ue,le=Oe,ne=-ye,Ae=ee+V,Se=Math.cos(Ae),be=Math.sin(Ae);return{x1:R*Math.cos(V),y1:R*Math.sin(V),x2:Oe*Se-ye*be,y2:Oe*be+ye*Se,x3:le*Se-ne*be,y3:le*be+ne*Se,x4:R*Math.cos(G),y4:R*Math.sin(G)}},B=function(R){return 180*R/Math.PI},U=function(R,V,G,ee,re,de){var ue=R+.5*(G-R),oe=V+.5*(ee-V),ge=re+.5*(G-re),ve=de+.5*(ee-de),xe=Math.min(R,re,ue,ge),Oe=Math.max(R,re,ue,ge),ye=Math.min(V,de,oe,ve),le=Math.max(V,de,oe,ve);return new l(xe,ye,Oe-xe,le-ye)},W=function(R,V,G,ee,re,de,ue,oe){var ge,ve,xe,Oe,ye,le,ne,Ae,Se,be,Re,nt,rt,xt,Ve=G-R,et=ee-V,ut=re-G,gt=de-ee,Dt=ue-re,At=oe-de;for(ve=0;ve<41;ve++)Se=(ne=(xe=R+(ge=ve/40)*Ve)+ge*((ye=G+ge*ut)-xe))+ge*(ye+ge*(re+ge*Dt-ye)-ne),be=(Ae=(Oe=V+ge*et)+ge*((le=ee+ge*gt)-Oe))+ge*(le+ge*(de+ge*At-le)-Ae),ve==0?(Re=Se,nt=be,rt=Se,xt=be):(Re=Math.min(Re,Se),nt=Math.min(nt,be),rt=Math.max(rt,Se),xt=Math.max(xt,be));return new l(Math.round(Re),Math.round(nt),Math.round(rt-Re),Math.round(xt-nt))},q=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var R,V,G=(R=this.ctx.lineDash,V=this.ctx.lineDashOffset,JSON.stringify({lineDash:R,lineDashOffset:V}));this.prevLineDash!==G&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=G)}}})(It.API),function(e){var t=function(i){var o,l,c,d,f,u,m,h,x,g;for(l=[],c=0,d=(i+=o="\0\0\0\0".slice(i.length%4||4)).length;d>c;c+=4)(f=(i.charCodeAt(c)<<24)+(i.charCodeAt(c+1)<<16)+(i.charCodeAt(c+2)<<8)+i.charCodeAt(c+3))!==0?(u=(f=((f=((f=((f=(f-(g=f%85))/85)-(x=f%85))/85)-(h=f%85))/85)-(m=f%85))/85)%85,l.push(u+33,m+33,h+33,x+33,g+33)):l.push(122);return function(p,v){for(var y=v;y>0;y--)p.pop()}(l,o.length),String.fromCharCode.apply(String,l)+"~>"},n=function(i){var o,l,c,d,f,u=String,m="length",h=255,x="charCodeAt",g="slice",p="replace";for(i[g](-2),i=i[g](0,-2)[p](/\s/g,"")[p]("z","!!!!!"),c=[],d=0,f=(i+=o="uuuuu"[g](i[m]%5||5))[m];f>d;d+=5)l=52200625*(i[x](d)-33)+614125*(i[x](d+1)-33)+7225*(i[x](d+2)-33)+85*(i[x](d+3)-33)+(i[x](d+4)-33),c.push(h&l>>24,h&l>>16,h&l>>8,h&l);return function(v,y){for(var b=y;b>0;b--)v.pop()}(c,o[m]),u.fromCharCode.apply(u,c)},a=function(i){var o=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((i=i.replace(/\s/g,"")).indexOf(">")!==-1&&(i=i.substr(0,i.indexOf(">"))),i.length%2&&(i+="0"),o.test(i)===!1)return"";for(var l="",c=0;c<i.length;c+=2)l+=String.fromCharCode("0x"+(i[c]+i[c+1]));return l},s=function(i){for(var o=new Uint8Array(i.length),l=i.length;l--;)o[l]=i.charCodeAt(l);return i=(o=tS(o)).reduce(function(c,d){return c+String.fromCharCode(d)},"")};e.processDataByFilters=function(i,o){var l=0,c=i||"",d=[];for(typeof(o=o||[])=="string"&&(o=[o]),l=0;l<o.length;l+=1)switch(o[l]){case"ASCII85Decode":case"/ASCII85Decode":c=n(c),d.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":c=t(c),d.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":c=a(c),d.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":c=c.split("").map(function(f){return("0"+f.charCodeAt().toString(16)).slice(-2)}).join("")+">",d.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":c=s(c),d.push("/FlateDecode");break;default:throw new Error('The filter: "'+o[l]+'" is not implemented')}return{data:c,reverseChain:d.reverse().join(" ")}}}(It.API),function(e){e.loadFile=function(t,n,a){return function(s,i,o){i=i!==!1,o=typeof o=="function"?o:function(){};var l=void 0;try{l=function(c,d,f){var u=new XMLHttpRequest,m=0,h=function(x){var g=x.length,p=[],v=String.fromCharCode;for(m=0;m<g;m+=1)p.push(v(255&x.charCodeAt(m)));return p.join("")};if(u.open("GET",c,!d),u.overrideMimeType("text/plain; charset=x-user-defined"),d===!1&&(u.onload=function(){u.status===200?f(h(this.responseText)):f(void 0)}),u.send(null),d&&u.status===200)return h(u.responseText)}(s,i,o)}catch{}return l}(t,n,a)},e.loadImageFile=e.loadFile}(It.API),function(e){function t(){return(Ft.html2canvas?Promise.resolve(Ft.html2canvas):X5(()=>import("./html2canvas.esm-e0a7d97b.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load html2canvas: "+o))}).then(function(o){return o.default?o.default:o})}function n(){return(Ft.DOMPurify?Promise.resolve(Ft.DOMPurify):X5(()=>import("./purify.es-2de9db7f.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load dompurify: "+o))}).then(function(o){return o.default?o.default:o})}var a=function(o){var l=xr(o);return l==="undefined"?"undefined":l==="string"||o instanceof String?"string":l==="number"||o instanceof Number?"number":l==="function"||o instanceof Function?"function":o&&o.constructor===Array?"array":o&&o.nodeType===1?"element":l==="object"?"object":"unknown"},s=function(o,l){var c=document.createElement(o);for(var d in l.className&&(c.className=l.className),l.innerHTML&&l.dompurify&&(c.innerHTML=l.dompurify.sanitize(l.innerHTML)),l.style)c.style[d]=l.style[d];return c},i=function o(l){var c=Object.assign(o.convert(Promise.resolve()),JSON.parse(JSON.stringify(o.template))),d=o.convert(Promise.resolve(),c);return d=(d=d.setProgress(1,o,1,[o])).set(l)};(i.prototype=Object.create(Promise.prototype)).constructor=i,i.convert=function(o,l){return o.__proto__=l||i.prototype,o},i.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},i.prototype.from=function(o,l){return this.then(function(){switch(l=l||function(c){switch(a(c)){case"string":return"string";case"element":return c.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(o)){case"string":return this.then(n).then(function(c){return this.set({src:s("div",{innerHTML:o,dompurify:c})})});case"element":return this.set({src:o});case"canvas":return this.set({canvas:o});case"img":return this.set({img:o});default:return this.error("Unknown source type.")}})},i.prototype.to=function(o){switch(o){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},i.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var o={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},l=function c(d,f){for(var u=d.nodeType===3?document.createTextNode(d.nodeValue):d.cloneNode(!1),m=d.firstChild;m;m=m.nextSibling)f!==!0&&m.nodeType===1&&m.nodeName==="SCRIPT"||u.appendChild(c(m,f));return d.nodeType===1&&(d.nodeName==="CANVAS"?(u.width=d.width,u.height=d.height,u.getContext("2d").drawImage(d,0,0)):d.nodeName!=="TEXTAREA"&&d.nodeName!=="SELECT"||(u.value=d.value),u.addEventListener("load",function(){u.scrollTop=d.scrollTop,u.scrollLeft=d.scrollLeft},!0)),u}(this.prop.src,this.opt.html2canvas.javascriptEnabled);l.tagName==="BODY"&&(o.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=s("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=s("div",{className:"html2pdf__container",style:o}),this.prop.container.appendChild(l),this.prop.container.firstChild.appendChild(s("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},i.prototype.toCanvas=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(t).then(function(l){var c=Object.assign({},this.opt.html2canvas);return delete c.onrendered,l(this.prop.container,c)}).then(function(l){(this.opt.html2canvas.onrendered||function(){})(l),this.prop.canvas=l,document.body.removeChild(this.prop.overlay)})},i.prototype.toContext2d=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(t).then(function(l){var c=this.opt.jsPDF,d=this.opt.fontFaces,f=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,u=Object.assign({async:!0,allowTaint:!0,scale:f,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete u.onrendered,c.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,c.context2d.posX=this.opt.x,c.context2d.posY=this.opt.y,c.context2d.margin=this.opt.margin,c.context2d.fontFaces=d,d)for(var m=0;m<d.length;++m){var h=d[m],x=h.src.find(function(g){return g.format==="truetype"});x&&c.addFont(x.url,h.ref.name,h.ref.style)}return u.windowHeight=u.windowHeight||0,u.windowHeight=u.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):u.windowHeight,c.context2d.save(!0),l(this.prop.container,u)}).then(function(l){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(l),this.prop.canvas=l,document.body.removeChild(this.prop.overlay)})},i.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var o=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=o})},i.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},i.prototype.output=function(o,l,c){return(c=c||"pdf").toLowerCase()==="img"||c.toLowerCase()==="image"?this.outputImg(o,l):this.outputPdf(o,l)},i.prototype.outputPdf=function(o,l){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(o,l)})},i.prototype.outputImg=function(o){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(o){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+o+'" is not supported.'}})},i.prototype.save=function(o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(o?{filename:o}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},i.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},i.prototype.set=function(o){if(a(o)!=="object")return this;var l=Object.keys(o||{}).map(function(c){if(c in i.template.prop)return function(){this.prop[c]=o[c]};switch(c){case"margin":return this.setMargin.bind(this,o.margin);case"jsPDF":return function(){return this.opt.jsPDF=o.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,o.pageSize);default:return function(){this.opt[c]=o[c]}}},this);return this.then(function(){return this.thenList(l)})},i.prototype.get=function(o,l){return this.then(function(){var c=o in i.template.prop?this.prop[o]:this.opt[o];return l?l(c):c})},i.prototype.setMargin=function(o){return this.then(function(){switch(a(o)){case"number":o=[o,o,o,o];case"array":if(o.length===2&&(o=[o[0],o[1],o[0],o[1]]),o.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=o}).then(this.setPageSize)},i.prototype.setPageSize=function(o){function l(c,d){return Math.floor(c*d/72*96)}return this.then(function(){(o=o||It.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(o.inner={width:o.width-this.opt.margin[1]-this.opt.margin[3],height:o.height-this.opt.margin[0]-this.opt.margin[2]},o.inner.px={width:l(o.inner.width,o.k),height:l(o.inner.height,o.k)},o.inner.ratio=o.inner.height/o.inner.width),this.prop.pageSize=o})},i.prototype.setProgress=function(o,l,c,d){return o!=null&&(this.progress.val=o),l!=null&&(this.progress.state=l),c!=null&&(this.progress.n=c),d!=null&&(this.progress.stack=d),this.progress.ratio=this.progress.val/this.progress.state,this},i.prototype.updateProgress=function(o,l,c,d){return this.setProgress(o?this.progress.val+o:null,l||null,c?this.progress.n+c:null,d?this.progress.stack.concat(d):null)},i.prototype.then=function(o,l){var c=this;return this.thenCore(o,l,function(d,f){return c.updateProgress(null,null,1,[d]),Promise.prototype.then.call(this,function(u){return c.updateProgress(null,d),u}).then(d,f).then(function(u){return c.updateProgress(1),u})})},i.prototype.thenCore=function(o,l,c){c=c||Promise.prototype.then,o&&(o=o.bind(this)),l&&(l=l.bind(this));var d=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:i.convert(Object.assign({},this),Promise.prototype),f=c.call(d,o,l);return i.convert(f,this.__proto__)},i.prototype.thenExternal=function(o,l){return Promise.prototype.then.call(this,o,l)},i.prototype.thenList=function(o){var l=this;return o.forEach(function(c){l=l.thenCore(c)}),l},i.prototype.catch=function(o){o&&(o=o.bind(this));var l=Promise.prototype.catch.call(this,o);return i.convert(l,this)},i.prototype.catchExternal=function(o){return Promise.prototype.catch.call(this,o)},i.prototype.error=function(o){return this.then(function(){throw new Error(o)})},i.prototype.using=i.prototype.set,i.prototype.saveAs=i.prototype.save,i.prototype.export=i.prototype.output,i.prototype.run=i.prototype.then,It.getPageSize=function(o,l,c){if(xr(o)==="object"){var d=o;o=d.orientation,l=d.unit||l,c=d.format||c}l=l||"mm",c=c||"a4",o=(""+(o||"P")).toLowerCase();var f,u=(""+c).toLowerCase(),m={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(l){case"pt":f=1;break;case"mm":f=72/25.4;break;case"cm":f=72/2.54;break;case"in":f=72;break;case"px":f=.75;break;case"pc":case"em":f=12;break;case"ex":f=6;break;default:throw"Invalid unit: "+l}var h,x=0,g=0;if(m.hasOwnProperty(u))x=m[u][1]/f,g=m[u][0]/f;else try{x=c[1],g=c[0]}catch{throw new Error("Invalid format: "+c)}if(o==="p"||o==="portrait")o="p",g>x&&(h=g,g=x,x=h);else{if(o!=="l"&&o!=="landscape")throw"Invalid orientation: "+o;o="l",x>g&&(h=g,g=x,x=h)}return{width:g,height:x,unit:l,k:f,orientation:o}},e.html=function(o,l){(l=l||{}).callback=l.callback||function(){},l.html2canvas=l.html2canvas||{},l.html2canvas.canvas=l.html2canvas.canvas||this.canvas,l.jsPDF=l.jsPDF||this,l.fontFaces=l.fontFaces?l.fontFaces.map(oS):null;var c=new i(l);return l.worker?c:c.from(o).doCallback()}}(It.API),It.API.addJS=function(e){return ZI=e,this.internal.events.subscribe("postPutResources",function(){r0=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(r0+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),JI=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+ZI+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){r0!==void 0&&JI!==void 0&&this.internal.out("/Names <</JavaScript "+r0+" 0 R>>")}),this},function(e){var t;e.events.push(["postPutResources",function(){var n=this,a=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var s=n.outline.render().split(/\r\n/),i=0;i<s.length;i++){var o=s[i],l=a.exec(o);if(l!=null){var c=l[1];n.internal.newObjectDeferredBegin(c,!1)}n.internal.write(o)}if(this.outline.createNamedDestinations){var d=this.internal.pages.length,f=[];for(i=0;i<d;i++){var u=n.internal.newObject();f.push(u);var m=n.internal.getPageInfo(i+1);n.internal.write("<< /D["+m.objId+" 0 R /XYZ null null null]>> endobj")}var h=n.internal.newObject();for(n.internal.write("<< /Names [ "),i=0;i<f.length;i++)n.internal.write("(page_"+(i+1)+")"+f[i]+" 0 R");n.internal.write(" ] >>","endobj"),t=n.internal.newObject(),n.internal.write("<< /Dests "+h+" 0 R"),n.internal.write(">>","endobj")}}]),e.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+t+" 0 R"))}]),e.events.push(["initialized",function(){var n=this;n.outline={createNamedDestinations:!1,root:{children:[]}},n.outline.add=function(a,s,i){var o={title:s,options:i,children:[]};return a==null&&(a=this.root),a.children.push(o),o},n.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=n,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},n.outline.genIds_r=function(a){a.id=n.internal.newObjectDeferred();for(var s=0;s<a.children.length;s++)this.genIds_r(a.children[s])},n.outline.renderRoot=function(a){this.objStart(a),this.line("/Type /Outlines"),a.children.length>0&&(this.line("/First "+this.makeRef(a.children[0])),this.line("/Last "+this.makeRef(a.children[a.children.length-1]))),this.line("/Count "+this.count_r({count:0},a)),this.objEnd()},n.outline.renderItems=function(a){for(var s=this.ctx.pdf.internal.getVerticalCoordinateString,i=0;i<a.children.length;i++){var o=a.children[i];this.objStart(o),this.line("/Title "+this.makeString(o.title)),this.line("/Parent "+this.makeRef(a)),i>0&&this.line("/Prev "+this.makeRef(a.children[i-1])),i<a.children.length-1&&this.line("/Next "+this.makeRef(a.children[i+1])),o.children.length>0&&(this.line("/First "+this.makeRef(o.children[0])),this.line("/Last "+this.makeRef(o.children[o.children.length-1])));var l=this.count=this.count_r({count:0},o);if(l>0&&this.line("/Count "+l),o.options&&o.options.pageNumber){var c=n.internal.getPageInfo(o.options.pageNumber);this.line("/Dest ["+c.objId+" 0 R /XYZ 0 "+s(0)+" 0]")}this.objEnd()}for(var d=0;d<a.children.length;d++)this.renderItems(a.children[d])},n.outline.line=function(a){this.ctx.val+=a+`\r
`},n.outline.makeRef=function(a){return a.id+" 0 R"},n.outline.makeString=function(a){return"("+n.internal.pdfEscape(a)+")"},n.outline.objStart=function(a){this.ctx.val+=`\r
`+a.id+` 0 obj\r
<<\r
`},n.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},n.outline.count_r=function(a,s){for(var i=0;i<s.children.length;i++)a.count++,this.count_r(a,s.children[i]);return a.count}}])}(It.API),function(e){var t=[192,193,194,195,196,197,198,199];e.processJPEG=function(n,a,s,i,o,l){var c,d=this.decode.DCT_DECODE,f=null;if(typeof n=="string"||this.__addimage__.isArrayBuffer(n)||this.__addimage__.isArrayBufferView(n)){switch(n=o||n,n=this.__addimage__.isArrayBuffer(n)?new Uint8Array(n):n,(c=function(u){for(var m,h=256*u.charCodeAt(4)+u.charCodeAt(5),x=u.length,g={width:0,height:0,numcomponents:1},p=4;p<x;p+=2){if(p+=h,t.indexOf(u.charCodeAt(p+1))!==-1){m=256*u.charCodeAt(p+5)+u.charCodeAt(p+6),g={width:256*u.charCodeAt(p+7)+u.charCodeAt(p+8),height:m,numcomponents:u.charCodeAt(p+9)};break}h=256*u.charCodeAt(p+2)+u.charCodeAt(p+3)}return g}(n=this.__addimage__.isArrayBufferView(n)?this.__addimage__.arrayBufferToBinaryString(n):n)).numcomponents){case 1:l=this.color_spaces.DEVICE_GRAY;break;case 4:l=this.color_spaces.DEVICE_CMYK;break;case 3:l=this.color_spaces.DEVICE_RGB}f={data:n,width:c.width,height:c.height,colorSpace:l,bitsPerComponent:8,filter:d,index:a,alias:s}}return f}}(It.API);var cf,n0,eD,tD,rD,Rce=function(){var e,t,n;function a(i){var o,l,c,d,f,u,m,h,x,g,p,v,y,b;for(this.data=i,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},u=null;;){switch(o=this.readUInt32(),x=(function(){var j,C;for(C=[],j=0;j<4;++j)C.push(String.fromCharCode(this.data[this.pos++]));return C}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(o);break;case"fcTL":u&&this.animation.frames.push(u),this.pos+=4,u={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},f=this.readUInt16(),d=this.readUInt16()||100,u.delay=1e3*f/d,u.disposeOp=this.data[this.pos++],u.blendOp=this.data[this.pos++],u.data=[];break;case"IDAT":case"fdAT":for(x==="fdAT"&&(this.pos+=4,o-=4),i=(u!=null?u.data:void 0)||this.imgData,v=0;0<=o?v<o:v>o;0<=o?++v:--v)i.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(c=this.palette.length/3,this.transparency.indexed=this.read(o),this.transparency.indexed.length>c)throw new Error("More transparent colors than palette size");if((g=c-this.transparency.indexed.length)>0)for(y=0;0<=g?y<g:y>g;0<=g?++y:--y)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(o)[0];break;case 2:this.transparency.rgb=this.read(o)}break;case"tEXt":m=(p=this.read(o)).indexOf(0),h=String.fromCharCode.apply(String,p.slice(0,m)),this.text[h]=String.fromCharCode.apply(String,p.slice(m+1));break;case"IEND":return u&&this.animation.frames.push(u),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(b=this.colorType)===4||b===6,l=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*l,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=o}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}a.prototype.read=function(i){var o,l;for(l=[],o=0;0<=i?o<i:o>i;0<=i?++o:--o)l.push(this.data[this.pos++]);return l},a.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},a.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},a.prototype.decodePixels=function(i){var o=this.pixelBitlength/8,l=new Uint8Array(this.width*this.height*o),c=0,d=this;if(i==null&&(i=this.imgData),i.length===0)return new Uint8Array(0);function f(u,m,h,x){var g,p,v,y,b,j,C,E,S,N,I,D,T,A,_,k,L,$,M,B,U,W=Math.ceil((d.width-u)/h),q=Math.ceil((d.height-m)/x),R=d.width==W&&d.height==q;for(A=o*W,D=R?l:new Uint8Array(A*q),j=i.length,T=0,p=0;T<q&&c<j;){switch(i[c++]){case 0:for(y=L=0;L<A;y=L+=1)D[p++]=i[c++];break;case 1:for(y=$=0;$<A;y=$+=1)g=i[c++],b=y<o?0:D[p-o],D[p++]=(g+b)%256;break;case 2:for(y=M=0;M<A;y=M+=1)g=i[c++],v=(y-y%o)/o,_=T&&D[(T-1)*A+v*o+y%o],D[p++]=(_+g)%256;break;case 3:for(y=B=0;B<A;y=B+=1)g=i[c++],v=(y-y%o)/o,b=y<o?0:D[p-o],_=T&&D[(T-1)*A+v*o+y%o],D[p++]=(g+Math.floor((b+_)/2))%256;break;case 4:for(y=U=0;U<A;y=U+=1)g=i[c++],v=(y-y%o)/o,b=y<o?0:D[p-o],T===0?_=k=0:(_=D[(T-1)*A+v*o+y%o],k=v&&D[(T-1)*A+(v-1)*o+y%o]),C=b+_-k,E=Math.abs(C-b),N=Math.abs(C-_),I=Math.abs(C-k),S=E<=N&&E<=I?b:N<=I?_:k,D[p++]=(g+S)%256;break;default:throw new Error("Invalid filter algorithm: "+i[c-1])}if(!R){var V=((m+T*x)*d.width+u)*o,G=T*A;for(y=0;y<W;y+=1){for(var ee=0;ee<o;ee+=1)l[V++]=D[G++];V+=(h-1)*o}}T++}}return i=mce(i),d.interlaceMethod==1?(f(0,0,8,8),f(4,0,8,8),f(0,4,4,8),f(2,0,4,4),f(0,2,2,4),f(1,0,2,2),f(0,1,1,2)):f(0,0,1,1),l},a.prototype.decodePalette=function(){var i,o,l,c,d,f,u,m,h;for(l=this.palette,f=this.transparency.indexed||[],d=new Uint8Array((f.length||0)+l.length),c=0,i=0,o=u=0,m=l.length;u<m;o=u+=3)d[c++]=l[o],d[c++]=l[o+1],d[c++]=l[o+2],d[c++]=(h=f[i++])!=null?h:255;return d},a.prototype.copyToImageData=function(i,o){var l,c,d,f,u,m,h,x,g,p,v;if(c=this.colors,g=null,l=this.hasAlphaChannel,this.palette.length&&(g=(v=this._decodedPalette)!=null?v:this._decodedPalette=this.decodePalette(),c=4,l=!0),x=(d=i.data||i).length,u=g||o,f=m=0,c===1)for(;f<x;)h=g?4*o[f/4]:m,p=u[h++],d[f++]=p,d[f++]=p,d[f++]=p,d[f++]=l?u[h++]:255,m=h;else for(;f<x;)h=g?4*o[f/4]:m,d[f++]=u[h++],d[f++]=u[h++],d[f++]=u[h++],d[f++]=l?u[h++]:255,m=h},a.prototype.decode=function(){var i;return i=new Uint8Array(this.width*this.height*4),this.copyToImageData(i,this.decodePixels()),i};var s=function(){if(Object.prototype.toString.call(Ft)==="[object Window]"){try{t=Ft.document.createElement("canvas"),n=t.getContext("2d")}catch{return!1}return!0}return!1};return s(),e=function(i){var o;if(s()===!0)return n.width=i.width,n.height=i.height,n.clearRect(0,0,i.width,i.height),n.putImageData(i,0,0),(o=new Image).src=t.toDataURL(),o;throw new Error("This method requires a Browser with Canvas-capability.")},a.prototype.decodeFrames=function(i){var o,l,c,d,f,u,m,h;if(this.animation){for(h=[],l=f=0,u=(m=this.animation.frames).length;f<u;l=++f)o=m[l],c=i.createImageData(o.width,o.height),d=this.decodePixels(new Uint8Array(o.data)),this.copyToImageData(c,d),o.imageData=c,h.push(o.image=e(c));return h}},a.prototype.renderFrame=function(i,o){var l,c,d;return l=(c=this.animation.frames)[o],d=c[o-1],o===0&&i.clearRect(0,0,this.width,this.height),(d!=null?d.disposeOp:void 0)===1?i.clearRect(d.xOffset,d.yOffset,d.width,d.height):(d!=null?d.disposeOp:void 0)===2&&i.putImageData(d.imageData,d.xOffset,d.yOffset),l.blendOp===0&&i.clearRect(l.xOffset,l.yOffset,l.width,l.height),i.drawImage(l.image,l.xOffset,l.yOffset)},a.prototype.animate=function(i){var o,l,c,d,f,u,m=this;return l=0,u=this.animation,d=u.numFrames,c=u.frames,f=u.numPlays,(o=function(){var h,x;if(h=l++%d,x=c[h],m.renderFrame(i,h),d>1&&l/d<f)return m.animation._timeout=setTimeout(o,x.delay)})()},a.prototype.stopAnimation=function(){var i;return clearTimeout((i=this.animation)!=null?i._timeout:void 0)},a.prototype.render=function(i){var o,l;return i._png&&i._png.stopAnimation(),i._png=this,i.width=this.width,i.height=this.height,o=i.getContext("2d"),this.animation?(this.decodeFrames(o),this.animate(o)):(l=o.createImageData(this.width,this.height),this.copyToImageData(l,this.decodePixels()),o.putImageData(l,0,0))},a}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function Fce(e){var t=0;if(e[t++]!==71||e[t++]!==73||e[t++]!==70||e[t++]!==56||(e[t++]+1&253)!=56||e[t++]!==97)throw new Error("Invalid GIF 87a/89a header.");var n=e[t++]|e[t++]<<8,a=e[t++]|e[t++]<<8,s=e[t++],i=s>>7,o=1<<(7&s)+1;e[t++],e[t++];var l=null,c=null;i&&(l=t,c=o,t+=3*o);var d=!0,f=[],u=0,m=null,h=0,x=null;for(this.width=n,this.height=a;d&&t<e.length;)switch(e[t++]){case 33:switch(e[t++]){case 255:if(e[t]!==11||e[t+1]==78&&e[t+2]==69&&e[t+3]==84&&e[t+4]==83&&e[t+5]==67&&e[t+6]==65&&e[t+7]==80&&e[t+8]==69&&e[t+9]==50&&e[t+10]==46&&e[t+11]==48&&e[t+12]==3&&e[t+13]==1&&e[t+16]==0)t+=14,x=e[t++]|e[t++]<<8,t++;else for(t+=12;;){if(!((T=e[t++])>=0))throw Error("Invalid block size");if(T===0)break;t+=T}break;case 249:if(e[t++]!==4||e[t+4]!==0)throw new Error("Invalid graphics extension block.");var g=e[t++];u=e[t++]|e[t++]<<8,m=e[t++],!(1&g)&&(m=null),h=g>>2&7,t++;break;case 254:for(;;){if(!((T=e[t++])>=0))throw Error("Invalid block size");if(T===0)break;t+=T}break;default:throw new Error("Unknown graphic control label: 0x"+e[t-1].toString(16))}break;case 44:var p=e[t++]|e[t++]<<8,v=e[t++]|e[t++]<<8,y=e[t++]|e[t++]<<8,b=e[t++]|e[t++]<<8,j=e[t++],C=j>>6&1,E=1<<(7&j)+1,S=l,N=c,I=!1;j>>7&&(I=!0,S=t,N=E,t+=3*E);var D=t;for(t++;;){var T;if(!((T=e[t++])>=0))throw Error("Invalid block size");if(T===0)break;t+=T}f.push({x:p,y:v,width:y,height:b,has_local_palette:I,palette_offset:S,palette_size:N,data_offset:D,data_length:t-D,transparent_index:m,interlaced:!!C,delay:u,disposal:h});break;case 59:d=!1;break;default:throw new Error("Unknown gif block: 0x"+e[t-1].toString(16))}this.numFrames=function(){return f.length},this.loopCount=function(){return x},this.frameInfo=function(A){if(A<0||A>=f.length)throw new Error("Frame index out of range.");return f[A]},this.decodeAndBlitFrameBGRA=function(A,_){var k=this.frameInfo(A),L=k.width*k.height,$=new Uint8Array(L);nD(e,k.data_offset,$,L);var M=k.palette_offset,B=k.transparent_index;B===null&&(B=256);var U=k.width,W=n-U,q=U,R=4*(k.y*n+k.x),V=4*((k.y+k.height)*n+k.x),G=R,ee=4*W;k.interlaced===!0&&(ee+=4*n*7);for(var re=8,de=0,ue=$.length;de<ue;++de){var oe=$[de];if(q===0&&(q=U,(G+=ee)>=V&&(ee=4*W+4*n*(re-1),G=R+(U+W)*(re<<1),re>>=1)),oe===B)G+=4;else{var ge=e[M+3*oe],ve=e[M+3*oe+1],xe=e[M+3*oe+2];_[G++]=xe,_[G++]=ve,_[G++]=ge,_[G++]=255}--q}},this.decodeAndBlitFrameRGBA=function(A,_){var k=this.frameInfo(A),L=k.width*k.height,$=new Uint8Array(L);nD(e,k.data_offset,$,L);var M=k.palette_offset,B=k.transparent_index;B===null&&(B=256);var U=k.width,W=n-U,q=U,R=4*(k.y*n+k.x),V=4*((k.y+k.height)*n+k.x),G=R,ee=4*W;k.interlaced===!0&&(ee+=4*n*7);for(var re=8,de=0,ue=$.length;de<ue;++de){var oe=$[de];if(q===0&&(q=U,(G+=ee)>=V&&(ee=4*W+4*n*(re-1),G=R+(U+W)*(re<<1),re>>=1)),oe===B)G+=4;else{var ge=e[M+3*oe],ve=e[M+3*oe+1],xe=e[M+3*oe+2];_[G++]=ge,_[G++]=ve,_[G++]=xe,_[G++]=255}--q}}}function nD(e,t,n,a){for(var s=e[t++],i=1<<s,o=i+1,l=o+1,c=s+1,d=(1<<c)-1,f=0,u=0,m=0,h=e[t++],x=new Int32Array(4096),g=null;;){for(;f<16&&h!==0;)u|=e[t++]<<f,f+=8,h===1?h=e[t++]:--h;if(f<c)break;var p=u&d;if(u>>=c,f-=c,p!==i){if(p===o)break;for(var v=p<l?p:g,y=0,b=v;b>i;)b=x[b]>>8,++y;var j=b;if(m+y+(v!==p?1:0)>a)return void Lr.log("Warning, gif stream longer than expected.");n[m++]=j;var C=m+=y;for(v!==p&&(n[m++]=j),b=v;y--;)b=x[b],n[--C]=255&b,b>>=8;g!==null&&l<4096&&(x[l++]=g<<8|j,l>=d+1&&c<12&&(++c,d=d<<1|1)),g=p}else l=o+1,d=(1<<(c=s+1))-1,g=null}return m!==a&&Lr.log("Warning, gif stream shorter than expected."),n}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function L2(e){var t,n,a,s,i,o=Math.floor,l=new Array(64),c=new Array(64),d=new Array(64),f=new Array(64),u=new Array(65535),m=new Array(65535),h=new Array(64),x=new Array(64),g=[],p=0,v=7,y=new Array(64),b=new Array(64),j=new Array(64),C=new Array(256),E=new Array(2048),S=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],N=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],I=[0,1,2,3,4,5,6,7,8,9,10,11],D=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],T=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],A=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],_=[0,1,2,3,4,5,6,7,8,9,10,11],k=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],L=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function $(R,V){for(var G=0,ee=0,re=new Array,de=1;de<=16;de++){for(var ue=1;ue<=R[de];ue++)re[V[ee]]=[],re[V[ee]][0]=G,re[V[ee]][1]=de,ee++,G++;G*=2}return re}function M(R){for(var V=R[0],G=R[1]-1;G>=0;)V&1<<G&&(p|=1<<v),G--,--v<0&&(p==255?(B(255),B(0)):B(p),v=7,p=0)}function B(R){g.push(R)}function U(R){B(R>>8&255),B(255&R)}function W(R,V,G,ee,re){for(var de,ue=re[0],oe=re[240],ge=function(be,Re){var nt,rt,xt,Ve,et,ut,gt,Dt,At,zt,ot=0;for(At=0;At<8;++At){nt=be[ot],rt=be[ot+1],xt=be[ot+2],Ve=be[ot+3],et=be[ot+4],ut=be[ot+5],gt=be[ot+6];var yr=nt+(Dt=be[ot+7]),Qt=nt-Dt,zn=rt+gt,br=rt-gt,Dr=xt+ut,Qa=xt-ut,cr=Ve+et,Ho=Ve-et,pn=yr+cr,ji=yr-cr,Go=zn+Dr,vn=zn-Dr;be[ot]=pn+Go,be[ot+4]=pn-Go;var Wt=.707106781*(vn+ji);be[ot+2]=ji+Wt,be[ot+6]=ji-Wt;var wr=.382683433*((pn=Ho+Qa)-(vn=br+Qt)),nd=.5411961*pn+wr,da=1.306562965*vn+wr,oo=.707106781*(Go=Qa+br),lo=Qt+oo,_t=Qt-oo;be[ot+5]=_t+nd,be[ot+3]=_t-nd,be[ot+1]=lo+da,be[ot+7]=lo-da,ot+=8}for(ot=0,At=0;At<8;++At){nt=be[ot],rt=be[ot+8],xt=be[ot+16],Ve=be[ot+24],et=be[ot+32],ut=be[ot+40],gt=be[ot+48];var wi=nt+(Dt=be[ot+56]),co=nt-Dt,Ja=rt+gt,Un=rt-gt,On=xt+ut,xs=xt-ut,Eu=Ve+et,Ko=Ve-et,Ni=wi+Eu,Si=wi-Eu,Ci=Ja+On,uo=Ja-On;be[ot]=Ni+Ci,be[ot+32]=Ni-Ci;var Us=.707106781*(uo+Si);be[ot+16]=Si+Us,be[ot+48]=Si-Us;var fo=.382683433*((Ni=Ko+xs)-(uo=Un+co)),ad=.5411961*Ni+fo,Pu=1.306562965*uo+fo,Tu=.707106781*(Ci=xs+Un),Iu=co+Tu,Du=co-Tu;be[ot+40]=Du+ad,be[ot+24]=Du-ad,be[ot+8]=Iu+Pu,be[ot+56]=Iu-Pu,ot++}for(At=0;At<64;++At)zt=be[At]*Re[At],h[At]=zt>0?zt+.5|0:zt-.5|0;return h}(R,V),ve=0;ve<64;++ve)x[S[ve]]=ge[ve];var xe=x[0]-G;G=x[0],xe==0?M(ee[0]):(M(ee[m[de=32767+xe]]),M(u[de]));for(var Oe=63;Oe>0&&x[Oe]==0;)Oe--;if(Oe==0)return M(ue),G;for(var ye,le=1;le<=Oe;){for(var ne=le;x[le]==0&&le<=Oe;)++le;var Ae=le-ne;if(Ae>=16){ye=Ae>>4;for(var Se=1;Se<=ye;++Se)M(oe);Ae&=15}de=32767+x[le],M(re[(Ae<<4)+m[de]]),M(u[de]),le++}return Oe!=63&&M(ue),G}function q(R){R=Math.min(Math.max(R,1),100),i!=R&&(function(V){for(var G=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],ee=0;ee<64;ee++){var re=o((G[ee]*V+50)/100);re=Math.min(Math.max(re,1),255),l[S[ee]]=re}for(var de=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],ue=0;ue<64;ue++){var oe=o((de[ue]*V+50)/100);oe=Math.min(Math.max(oe,1),255),c[S[ue]]=oe}for(var ge=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],ve=0,xe=0;xe<8;xe++)for(var Oe=0;Oe<8;Oe++)d[ve]=1/(l[S[ve]]*ge[xe]*ge[Oe]*8),f[ve]=1/(c[S[ve]]*ge[xe]*ge[Oe]*8),ve++}(R<50?Math.floor(5e3/R):Math.floor(200-2*R)),i=R)}this.encode=function(R,V){V&&q(V),g=new Array,p=0,v=7,U(65496),U(65504),U(16),B(74),B(70),B(73),B(70),B(0),B(1),B(1),B(0),U(1),U(1),B(0),B(0),function(){U(65499),U(132),B(0);for(var rt=0;rt<64;rt++)B(l[rt]);B(1);for(var xt=0;xt<64;xt++)B(c[xt])}(),function(rt,xt){U(65472),U(17),B(8),U(xt),U(rt),B(3),B(1),B(17),B(0),B(2),B(17),B(1),B(3),B(17),B(1)}(R.width,R.height),function(){U(65476),U(418),B(0);for(var rt=0;rt<16;rt++)B(N[rt+1]);for(var xt=0;xt<=11;xt++)B(I[xt]);B(16);for(var Ve=0;Ve<16;Ve++)B(D[Ve+1]);for(var et=0;et<=161;et++)B(T[et]);B(1);for(var ut=0;ut<16;ut++)B(A[ut+1]);for(var gt=0;gt<=11;gt++)B(_[gt]);B(17);for(var Dt=0;Dt<16;Dt++)B(k[Dt+1]);for(var At=0;At<=161;At++)B(L[At])}(),U(65498),U(12),B(3),B(1),B(0),B(2),B(17),B(3),B(17),B(0),B(63),B(0);var G=0,ee=0,re=0;p=0,v=7,this.encode.displayName="_encode_";for(var de,ue,oe,ge,ve,xe,Oe,ye,le,ne=R.data,Ae=R.width,Se=R.height,be=4*Ae,Re=0;Re<Se;){for(de=0;de<be;){for(ve=be*Re+de,Oe=-1,ye=0,le=0;le<64;le++)xe=ve+(ye=le>>3)*be+(Oe=4*(7&le)),Re+ye>=Se&&(xe-=be*(Re+1+ye-Se)),de+Oe>=be&&(xe-=de+Oe-be+4),ue=ne[xe++],oe=ne[xe++],ge=ne[xe++],y[le]=(E[ue]+E[oe+256>>0]+E[ge+512>>0]>>16)-128,b[le]=(E[ue+768>>0]+E[oe+1024>>0]+E[ge+1280>>0]>>16)-128,j[le]=(E[ue+1280>>0]+E[oe+1536>>0]+E[ge+1792>>0]>>16)-128;G=W(y,d,G,t,a),ee=W(b,f,ee,n,s),re=W(j,f,re,n,s),de+=32}Re+=8}if(v>=0){var nt=[];nt[1]=v+1,nt[0]=(1<<v+1)-1,M(nt)}return U(65497),new Uint8Array(g)},e=e||50,function(){for(var R=String.fromCharCode,V=0;V<256;V++)C[V]=R(V)}(),t=$(N,I),n=$(A,_),a=$(D,T),s=$(k,L),function(){for(var R=1,V=2,G=1;G<=15;G++){for(var ee=R;ee<V;ee++)m[32767+ee]=G,u[32767+ee]=[],u[32767+ee][1]=G,u[32767+ee][0]=ee;for(var re=-(V-1);re<=-R;re++)m[32767+re]=G,u[32767+re]=[],u[32767+re][1]=G,u[32767+re][0]=V-1+re;R<<=1,V<<=1}}(),function(){for(var R=0;R<256;R++)E[R]=19595*R,E[R+256>>0]=38470*R,E[R+512>>0]=7471*R+32768,E[R+768>>0]=-11059*R,E[R+1024>>0]=-21709*R,E[R+1280>>0]=32768*R+8421375,E[R+1536>>0]=-27439*R,E[R+1792>>0]=-5329*R}(),q(e)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function _i(e,t){if(this.pos=0,this.buffer=e,this.datav=new DataView(e.buffer),this.is_with_alpha=!!t,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function aD(e){function t(N){if(!N)throw Error("assert :P")}function n(N,I,D){for(var T=0;4>T;T++)if(N[I+T]!=D.charCodeAt(T))return!0;return!1}function a(N,I,D,T,A){for(var _=0;_<A;_++)N[I+_]=D[T+_]}function s(N,I,D,T){for(var A=0;A<T;A++)N[I+A]=D}function i(N){return new Int32Array(N)}function o(N,I){for(var D=[],T=0;T<N;T++)D.push(new I);return D}function l(N,I){var D=[];return function T(A,_,k){for(var L=k[_],$=0;$<L&&(A.push(k.length>_+1?[]:new I),!(k.length<_+1));$++)T(A[$],_+1,k)}(D,0,N),D}var c=function(){var N=this;function I(P,O){for(var z=1<<O-1>>>0;P&z;)z>>>=1;return z?(P&z-1)+z:P}function D(P,O,z,H,Y){t(!(H%z));do P[O+(H-=z)]=Y;while(0<H)}function T(P,O,z,H,Y){if(t(2328>=Y),512>=Y)var te=i(512);else if((te=i(Y))==null)return 0;return function(ae,se,ie,ce,Ee,_e){var Le,Ie,Qe=se,qe=1<<ie,Pe=i(16),Te=i(16);for(t(Ee!=0),t(ce!=null),t(ae!=null),t(0<ie),Ie=0;Ie<Ee;++Ie){if(15<ce[Ie])return 0;++Pe[ce[Ie]]}if(Pe[0]==Ee)return 0;for(Te[1]=0,Le=1;15>Le;++Le){if(Pe[Le]>1<<Le)return 0;Te[Le+1]=Te[Le]+Pe[Le]}for(Ie=0;Ie<Ee;++Ie)Le=ce[Ie],0<ce[Ie]&&(_e[Te[Le]++]=Ie);if(Te[15]==1)return(ce=new A).g=0,ce.value=_e[0],D(ae,Qe,1,qe,ce),qe;var Ye,Ze=-1,Xe=qe-1,pt=0,ct=1,kt=1,mt=1<<ie;for(Ie=0,Le=1,Ee=2;Le<=ie;++Le,Ee<<=1){if(ct+=kt<<=1,0>(kt-=Pe[Le]))return 0;for(;0<Pe[Le];--Pe[Le])(ce=new A).g=Le,ce.value=_e[Ie++],D(ae,Qe+pt,Ee,mt,ce),pt=I(pt,Le)}for(Le=ie+1,Ee=2;15>=Le;++Le,Ee<<=1){if(ct+=kt<<=1,0>(kt-=Pe[Le]))return 0;for(;0<Pe[Le];--Pe[Le]){if(ce=new A,(pt&Xe)!=Ze){for(Qe+=mt,Ye=1<<(Ze=Le)-ie;15>Ze&&!(0>=(Ye-=Pe[Ze]));)++Ze,Ye<<=1;qe+=mt=1<<(Ye=Ze-ie),ae[se+(Ze=pt&Xe)].g=Ye+ie,ae[se+Ze].value=Qe-se-Ze}ce.g=Le-ie,ce.value=_e[Ie++],D(ae,Qe+(pt>>ie),Ee,mt,ce),pt=I(pt,Le)}}return ct!=2*Te[15]-1?0:qe}(P,O,z,H,Y,te)}function A(){this.value=this.g=0}function _(){this.value=this.g=0}function k(){this.G=o(5,A),this.H=i(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=o(ua,_)}function L(P,O,z,H){t(P!=null),t(O!=null),t(2147483648>H),P.Ca=254,P.I=0,P.b=-8,P.Ka=0,P.oa=O,P.pa=z,P.Jd=O,P.Yc=z+H,P.Zc=4<=H?z+H-4+1:z,de(P)}function $(P,O){for(var z=0;0<O--;)z|=oe(P,128)<<O;return z}function M(P,O){var z=$(P,O);return ue(P)?-z:z}function B(P,O,z,H){var Y,te=0;for(t(P!=null),t(O!=null),t(4294967288>H),P.Sb=H,P.Ra=0,P.u=0,P.h=0,4<H&&(H=4),Y=0;Y<H;++Y)te+=O[z+Y]<<8*Y;P.Ra=te,P.bb=H,P.oa=O,P.pa=z}function U(P){for(;8<=P.u&&P.bb<P.Sb;)P.Ra>>>=8,P.Ra+=P.oa[P.pa+P.bb]<<Hu-8>>>0,++P.bb,P.u-=8;G(P)&&(P.h=1,P.u=0)}function W(P,O){if(t(0<=O),!P.h&&O<=Wu){var z=V(P)&qu[O];return P.u+=O,U(P),z}return P.h=1,P.u=0}function q(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function R(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function V(P){return P.Ra>>>(P.u&Hu-1)>>>0}function G(P){return t(P.bb<=P.Sb),P.h||P.bb==P.Sb&&P.u>Hu}function ee(P,O){P.u=O,P.h=G(P)}function re(P){P.u>=Ah&&(t(P.u>=Ah),U(P))}function de(P){t(P!=null&&P.oa!=null),P.pa<P.Zc?(P.I=(P.oa[P.pa++]|P.I<<8)>>>0,P.b+=8):(t(P!=null&&P.oa!=null),P.pa<P.Yc?(P.b+=8,P.I=P.oa[P.pa++]|P.I<<8):P.Ka?P.b=0:(P.I<<=8,P.b+=8,P.Ka=1))}function ue(P){return $(P,1)}function oe(P,O){var z=P.Ca;0>P.b&&de(P);var H=P.b,Y=z*O>>>8,te=(P.I>>>H>Y)+0;for(te?(z-=Y,P.I-=Y+1<<H>>>0):z=Y+1,H=z,Y=0;256<=H;)Y+=8,H>>=8;return H=7^Y+es[H],P.b-=H,P.Ca=(z<<H)-1,te}function ge(P,O,z){P[O+0]=z>>24&255,P[O+1]=z>>16&255,P[O+2]=z>>8&255,P[O+3]=z>>0&255}function ve(P,O){return P[O+0]<<0|P[O+1]<<8}function xe(P,O){return ve(P,O)|P[O+2]<<16}function Oe(P,O){return ve(P,O)|ve(P,O+2)<<16}function ye(P,O){var z=1<<O;return t(P!=null),t(0<O),P.X=i(z),P.X==null?0:(P.Mb=32-O,P.Xa=O,1)}function le(P,O){t(P!=null),t(O!=null),t(P.Xa==O.Xa),a(O.X,0,P.X,0,1<<O.Xa)}function ne(){this.X=[],this.Xa=this.Mb=0}function Ae(P,O,z,H){t(z!=null),t(H!=null);var Y=z[0],te=H[0];return Y==0&&(Y=(P*te+O/2)/O),te==0&&(te=(O*Y+P/2)/P),0>=Y||0>=te?0:(z[0]=Y,H[0]=te,1)}function Se(P,O){return P+(1<<O)-1>>>O}function be(P,O){return((4278255360&P)+(4278255360&O)>>>0&4278255360)+((16711935&P)+(16711935&O)>>>0&16711935)>>>0}function Re(P,O){N[O]=function(z,H,Y,te,ae,se,ie){var ce;for(ce=0;ce<ae;++ce){var Ee=N[P](se[ie+ce-1],Y,te+ce);se[ie+ce]=be(z[H+ce],Ee)}}}function nt(){this.ud=this.hd=this.jd=0}function rt(P,O){return((4278124286&(P^O))>>>1)+(P&O)>>>0}function xt(P){return 0<=P&&256>P?P:0>P?0:255<P?255:void 0}function Ve(P,O){return xt(P+(P-O+.5>>1))}function et(P,O,z){return Math.abs(O-z)-Math.abs(P-z)}function ut(P,O,z,H,Y,te,ae){for(H=te[ae-1],z=0;z<Y;++z)te[ae+z]=H=be(P[O+z],H)}function gt(P,O,z,H,Y){var te;for(te=0;te<z;++te){var ae=P[O+te],se=ae>>8&255,ie=16711935&(ie=(ie=16711935&ae)+((se<<16)+se));H[Y+te]=(4278255360&ae)+ie>>>0}}function Dt(P,O){O.jd=P>>0&255,O.hd=P>>8&255,O.ud=P>>16&255}function At(P,O,z,H,Y,te){var ae;for(ae=0;ae<H;++ae){var se=O[z+ae],ie=se>>>8,ce=se,Ee=255&(Ee=(Ee=se>>>16)+((P.jd<<24>>24)*(ie<<24>>24)>>>5));ce=255&(ce=(ce=ce+((P.hd<<24>>24)*(ie<<24>>24)>>>5))+((P.ud<<24>>24)*(Ee<<24>>24)>>>5)),Y[te+ae]=(4278255360&se)+(Ee<<16)+ce}}function zt(P,O,z,H,Y){N[O]=function(te,ae,se,ie,ce,Ee,_e,Le,Ie){for(ie=_e;ie<Le;++ie)for(_e=0;_e<Ie;++_e)ce[Ee++]=Y(se[H(te[ae++])])},N[P]=function(te,ae,se,ie,ce,Ee,_e){var Le=8>>te.b,Ie=te.Ea,Qe=te.K[0],qe=te.w;if(8>Le)for(te=(1<<te.b)-1,qe=(1<<Le)-1;ae<se;++ae){var Pe,Te=0;for(Pe=0;Pe<Ie;++Pe)Pe&te||(Te=H(ie[ce++])),Ee[_e++]=Y(Qe[Te&qe]),Te>>=Le}else N["VP8LMapColor"+z](ie,ce,Qe,qe,Ee,_e,ae,se,Ie)}}function ot(P,O,z,H,Y){for(z=O+z;O<z;){var te=P[O++];H[Y++]=te>>16&255,H[Y++]=te>>8&255,H[Y++]=te>>0&255}}function yr(P,O,z,H,Y){for(z=O+z;O<z;){var te=P[O++];H[Y++]=te>>16&255,H[Y++]=te>>8&255,H[Y++]=te>>0&255,H[Y++]=te>>24&255}}function Qt(P,O,z,H,Y){for(z=O+z;O<z;){var te=(ae=P[O++])>>16&240|ae>>12&15,ae=ae>>0&240|ae>>28&15;H[Y++]=te,H[Y++]=ae}}function zn(P,O,z,H,Y){for(z=O+z;O<z;){var te=(ae=P[O++])>>16&248|ae>>13&7,ae=ae>>5&224|ae>>3&31;H[Y++]=te,H[Y++]=ae}}function br(P,O,z,H,Y){for(z=O+z;O<z;){var te=P[O++];H[Y++]=te>>0&255,H[Y++]=te>>8&255,H[Y++]=te>>16&255}}function Dr(P,O,z,H,Y,te){if(te==0)for(z=O+z;O<z;)ge(H,((te=P[O++])[0]>>24|te[1]>>8&65280|te[2]<<8&16711680|te[3]<<24)>>>0),Y+=32;else a(H,Y,P,O,z)}function Qa(P,O){N[O][0]=N[P+"0"],N[O][1]=N[P+"1"],N[O][2]=N[P+"2"],N[O][3]=N[P+"3"],N[O][4]=N[P+"4"],N[O][5]=N[P+"5"],N[O][6]=N[P+"6"],N[O][7]=N[P+"7"],N[O][8]=N[P+"8"],N[O][9]=N[P+"9"],N[O][10]=N[P+"10"],N[O][11]=N[P+"11"],N[O][12]=N[P+"12"],N[O][13]=N[P+"13"],N[O][14]=N[P+"0"],N[O][15]=N[P+"0"]}function cr(P){return P==ew||P==tw||P==sg||P==rw}function Ho(){this.eb=[],this.size=this.A=this.fb=0}function pn(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function ji(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Ho,this.f.kb=new pn,this.sd=null}function Go(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function vn(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function Wt(P){return alert("todo:WebPSamplerProcessPlane"),P.T}function wr(P,O){var z=P.T,H=O.ba.f.RGBA,Y=H.eb,te=H.fb+P.ka*H.A,ae=Ks[O.ba.S],se=P.y,ie=P.O,ce=P.f,Ee=P.N,_e=P.ea,Le=P.W,Ie=O.cc,Qe=O.dc,qe=O.Mc,Pe=O.Nc,Te=P.ka,Ye=P.ka+P.T,Ze=P.U,Xe=Ze+1>>1;for(Te==0?ae(se,ie,null,null,ce,Ee,_e,Le,ce,Ee,_e,Le,Y,te,null,null,Ze):(ae(O.ec,O.fc,se,ie,Ie,Qe,qe,Pe,ce,Ee,_e,Le,Y,te-H.A,Y,te,Ze),++z);Te+2<Ye;Te+=2)Ie=ce,Qe=Ee,qe=_e,Pe=Le,Ee+=P.Rc,Le+=P.Rc,te+=2*H.A,ae(se,(ie+=2*P.fa)-P.fa,se,ie,Ie,Qe,qe,Pe,ce,Ee,_e,Le,Y,te-H.A,Y,te,Ze);return ie+=P.fa,P.j+Ye<P.o?(a(O.ec,O.fc,se,ie,Ze),a(O.cc,O.dc,ce,Ee,Xe),a(O.Mc,O.Nc,_e,Le,Xe),z--):1&Ye||ae(se,ie,null,null,ce,Ee,_e,Le,ce,Ee,_e,Le,Y,te+H.A,null,null,Ze),z}function nd(P,O,z){var H=P.F,Y=[P.J];if(H!=null){var te=P.U,ae=O.ba.S,se=ae==ag||ae==sg;O=O.ba.f.RGBA;var ie=[0],ce=P.ka;ie[0]=P.T,P.Kb&&(ce==0?--ie[0]:(--ce,Y[0]-=P.width),P.j+P.ka+P.T==P.o&&(ie[0]=P.o-P.j-ce));var Ee=O.eb;ce=O.fb+ce*O.A,P=Vr(H,Y[0],P.width,te,ie,Ee,ce+(se?0:3),O.A),t(z==ie),P&&cr(ae)&&Hs(Ee,ce,se,te,ie,O.A)}return 0}function da(P){var O=P.ma,z=O.ba.S,H=11>z,Y=z==rg||z==ng||z==ag||z==Zj||z==12||cr(z);if(O.memory=null,O.Ib=null,O.Jb=null,O.Nd=null,!Sh(O.Oa,P,Y?11:12))return 0;if(Y&&cr(z)&&tt(),P.da)alert("todo:use_scaling");else{if(H){if(O.Ib=Wt,P.Kb){if(z=P.U+1>>1,O.memory=i(P.U+2*z),O.memory==null)return 0;O.ec=O.memory,O.fc=0,O.cc=O.ec,O.dc=O.fc+P.U,O.Mc=O.cc,O.Nc=O.dc+z,O.Ib=wr,tt()}}else alert("todo:EmitYUV");Y&&(O.Jb=nd,H&&ke())}if(H&&!e3){for(P=0;256>P;++P)EU[P]=89858*(P-128)+og>>ig,IU[P]=-22014*(P-128)+og,TU[P]=-45773*(P-128),PU[P]=113618*(P-128)+og>>ig;for(P=Oh;P<sw;++P)O=76283*(P-16)+og>>ig,DU[P-Oh]=gs(O,255),kU[P-Oh]=gs(O+8>>4,15);e3=1}return 1}function oo(P){var O=P.ma,z=P.U,H=P.T;return t(!(1&P.ka)),0>=z||0>=H?0:(z=O.Ib(P,O),O.Jb!=null&&O.Jb(P,O,z),O.Dc+=z,1)}function lo(P){P.ma.memory=null}function _t(P,O,z,H){return W(P,8)!=47?0:(O[0]=W(P,14)+1,z[0]=W(P,14)+1,H[0]=W(P,1),W(P,3)!=0?0:!P.h)}function wi(P,O){if(4>P)return P+1;var z=P-2>>1;return(2+(1&P)<<z)+W(O,z)+1}function co(P,O){return 120<O?O-120:1<=(z=((z=mU[O-1])>>4)*P+(8-(15&z)))?z:1;var z}function Ja(P,O,z){var H=V(z),Y=P[O+=255&H].g-8;return 0<Y&&(ee(z,z.u+8),H=V(z),O+=P[O].value,O+=H&(1<<Y)-1),ee(z,z.u+P[O].g),P[O].value}function Un(P,O,z){return z.g+=P.g,z.value+=P.value<<O>>>0,t(8>=z.g),P.g}function On(P,O,z){var H=P.xc;return t((O=H==0?0:P.vc[P.md*(z>>H)+(O>>H)])<P.Wb),P.Ya[O]}function xs(P,O,z,H){var Y=P.ab,te=P.c*O,ae=P.C;O=ae+O;var se=z,ie=H;for(H=P.Ta,z=P.Ua;0<Y--;){var ce=P.gc[Y],Ee=ae,_e=O,Le=se,Ie=ie,Qe=(ie=H,se=z,ce.Ea);switch(t(Ee<_e),t(_e<=ce.nc),ce.hc){case 2:Yx(Le,Ie,(_e-Ee)*Qe,ie,se);break;case 0:var qe=Ee,Pe=_e,Te=ie,Ye=se,Ze=(mt=ce).Ea;qe==0&&(Qj(Le,Ie,null,null,1,Te,Ye),ut(Le,Ie+1,0,0,Ze-1,Te,Ye+1),Ie+=Ze,Ye+=Ze,++qe);for(var Xe=1<<mt.b,pt=Xe-1,ct=Se(Ze,mt.b),kt=mt.K,mt=mt.w+(qe>>mt.b)*ct;qe<Pe;){var jr=kt,Nr=mt,fr=1;for(Eh(Le,Ie,Te,Ye-Ze,1,Te,Ye);fr<Ze;){var rr=(fr&~pt)+Xe;rr>Ze&&(rr=Ze),(0,Bl[jr[Nr++]>>8&15])(Le,Ie+ +fr,Te,Ye+fr-Ze,rr-fr,Te,Ye+fr),fr=rr}Ie+=Ze,Ye+=Ze,++qe&pt||(mt+=ct)}_e!=ce.nc&&a(ie,se-Qe,ie,se+(_e-Ee-1)*Qe,Qe);break;case 1:for(Qe=Le,Pe=Ie,Ze=(Le=ce.Ea)-(Ye=Le&~(Te=(Ie=1<<ce.b)-1)),qe=Se(Le,ce.b),Xe=ce.K,ce=ce.w+(Ee>>ce.b)*qe;Ee<_e;){for(pt=Xe,ct=ce,kt=new nt,mt=Pe+Ye,jr=Pe+Le;Pe<mt;)Dt(pt[ct++],kt),cd(kt,Qe,Pe,Ie,ie,se),Pe+=Ie,se+=Ie;Pe<jr&&(Dt(pt[ct++],kt),cd(kt,Qe,Pe,Ze,ie,se),Pe+=Ze,se+=Ze),++Ee&Te||(ce+=qe)}break;case 3:if(Le==ie&&Ie==se&&0<ce.b){for(Pe=ie,Le=Qe=se+(_e-Ee)*Qe-(Ye=(_e-Ee)*Se(ce.Ea,ce.b)),Ie=ie,Te=se,qe=[],Ye=(Ze=Ye)-1;0<=Ye;--Ye)qe[Ye]=Ie[Te+Ye];for(Ye=Ze-1;0<=Ye;--Ye)Pe[Le+Ye]=qe[Ye];Vs(ce,Ee,_e,ie,Qe,ie,se)}else Vs(ce,Ee,_e,Le,Ie,ie,se)}se=H,ie=z}ie!=z&&a(H,z,se,ie,te)}function Eu(P,O){var z=P.V,H=P.Ba+P.c*P.C,Y=O-P.C;if(t(O<=P.l.o),t(16>=Y),0<Y){var te=P.l,ae=P.Ta,se=P.Ua,ie=te.width;if(xs(P,Y,z,H),Y=se=[se],t((z=P.C)<(H=O)),t(te.v<te.va),H>te.o&&(H=te.o),z<te.j){var ce=te.j-z;z=te.j,Y[0]+=ce*ie}if(z>=H?z=0:(Y[0]+=4*te.v,te.ka=z-te.j,te.U=te.va-te.v,te.T=H-z,z=1),z){if(se=se[0],11>(z=P.ca).S){var Ee=z.f.RGBA,_e=(H=z.S,Y=te.U,te=te.T,ce=Ee.eb,Ee.A),Le=te;for(Ee=Ee.fb+P.Ma*Ee.A;0<Le--;){var Ie=ae,Qe=se,qe=Y,Pe=ce,Te=Ee;switch(H){case tg:ts(Ie,Qe,qe,Pe,Te);break;case rg:Ma(Ie,Qe,qe,Pe,Te);break;case ew:Ma(Ie,Qe,qe,Pe,Te),Hs(Pe,Te,0,qe,1,0);break;case qE:Jo(Ie,Qe,qe,Pe,Te);break;case ng:Dr(Ie,Qe,qe,Pe,Te,1);break;case tw:Dr(Ie,Qe,qe,Pe,Te,1),Hs(Pe,Te,0,qe,1,0);break;case ag:Dr(Ie,Qe,qe,Pe,Te,0);break;case sg:Dr(Ie,Qe,qe,Pe,Te,0),Hs(Pe,Te,1,qe,1,0);break;case Zj:zl(Ie,Qe,qe,Pe,Te);break;case rw:zl(Ie,Qe,qe,Pe,Te),Ur(Pe,Te,qe,1,0);break;case WE:Qo(Ie,Qe,qe,Pe,Te);break;default:t(0)}se+=ie,Ee+=_e}P.Ma+=te}else alert("todo:EmitRescaledRowsYUVA");t(P.Ma<=z.height)}}P.C=O,t(P.C<=P.i)}function Ko(P){var O;if(0<P.ua)return 0;for(O=0;O<P.Wb;++O){var z=P.Ya[O].G,H=P.Ya[O].H;if(0<z[1][H[1]+0].g||0<z[2][H[2]+0].g||0<z[3][H[3]+0].g)return 0}return 1}function Ni(P,O,z,H,Y,te){if(P.Z!=0){var ae=P.qd,se=P.rd;for(t(Wl[P.Z]!=null);O<z;++O)Wl[P.Z](ae,se,H,Y,H,Y,te),ae=H,se=Y,Y+=te;P.qd=ae,P.rd=se}}function Si(P,O){var z=P.l.ma,H=z.Z==0||z.Z==1?P.l.j:P.C;if(H=P.C<H?H:P.C,t(O<=P.l.o),O>H){var Y=P.l.width,te=z.ca,ae=z.tb+Y*H,se=P.V,ie=P.Ba+P.c*H,ce=P.gc;t(P.ab==1),t(ce[0].hc==3),Xx(ce[0],H,O,se,ie,te,ae),Ni(z,H,O,te,ae,Y)}P.C=P.Ma=O}function Ci(P,O,z,H,Y,te,ae){var se=P.$/H,ie=P.$%H,ce=P.m,Ee=P.s,_e=z+P.$,Le=_e;Y=z+H*Y;var Ie=z+H*te,Qe=280+Ee.ua,qe=P.Pb?se:16777216,Pe=0<Ee.ua?Ee.Wa:null,Te=Ee.wc,Ye=_e<Ie?On(Ee,ie,se):null;t(P.C<te),t(Ie<=Y);var Ze=!1;e:for(;;){for(;Ze||_e<Ie;){var Xe=0;if(se>=qe){var pt=_e-z;t((qe=P).Pb),qe.wd=qe.m,qe.xd=pt,0<qe.s.ua&&le(qe.s.Wa,qe.s.vb),qe=se+pU}if(ie&Te||(Ye=On(Ee,ie,se)),t(Ye!=null),Ye.Qb&&(O[_e]=Ye.qb,Ze=!0),!Ze)if(re(ce),Ye.jc){Xe=ce,pt=O;var ct=_e,kt=Ye.pd[V(Xe)&ua-1];t(Ye.jc),256>kt.g?(ee(Xe,Xe.u+kt.g),pt[ct]=kt.value,Xe=0):(ee(Xe,Xe.u+kt.g-256),t(256<=kt.value),Xe=kt.value),Xe==0&&(Ze=!0)}else Xe=Ja(Ye.G[0],Ye.H[0],ce);if(ce.h)break;if(Ze||256>Xe){if(!Ze)if(Ye.nd)O[_e]=(Ye.qb|Xe<<8)>>>0;else{if(re(ce),Ze=Ja(Ye.G[1],Ye.H[1],ce),re(ce),pt=Ja(Ye.G[2],Ye.H[2],ce),ct=Ja(Ye.G[3],Ye.H[3],ce),ce.h)break;O[_e]=(ct<<24|Ze<<16|Xe<<8|pt)>>>0}if(Ze=!1,++_e,++ie>=H&&(ie=0,++se,ae!=null&&se<=te&&!(se%16)&&ae(P,se),Pe!=null))for(;Le<_e;)Xe=O[Le++],Pe.X[(506832829*Xe&4294967295)>>>Pe.Mb]=Xe}else if(280>Xe){if(Xe=wi(Xe-256,ce),pt=Ja(Ye.G[4],Ye.H[4],ce),re(ce),pt=co(H,pt=wi(pt,ce)),ce.h)break;if(_e-z<pt||Y-_e<Xe)break e;for(ct=0;ct<Xe;++ct)O[_e+ct]=O[_e+ct-pt];for(_e+=Xe,ie+=Xe;ie>=H;)ie-=H,++se,ae!=null&&se<=te&&!(se%16)&&ae(P,se);if(t(_e<=Y),ie&Te&&(Ye=On(Ee,ie,se)),Pe!=null)for(;Le<_e;)Xe=O[Le++],Pe.X[(506832829*Xe&4294967295)>>>Pe.Mb]=Xe}else{if(!(Xe<Qe))break e;for(Ze=Xe-280,t(Pe!=null);Le<_e;)Xe=O[Le++],Pe.X[(506832829*Xe&4294967295)>>>Pe.Mb]=Xe;Xe=_e,t(!(Ze>>>(pt=Pe).Xa)),O[Xe]=pt.X[Ze],Ze=!0}Ze||t(ce.h==G(ce))}if(P.Pb&&ce.h&&_e<Y)t(P.m.h),P.a=5,P.m=P.wd,P.$=P.xd,0<P.s.ua&&le(P.s.vb,P.s.Wa);else{if(ce.h)break e;ae!=null&&ae(P,se>te?te:se),P.a=0,P.$=_e-z}return 1}return P.a=3,0}function uo(P){t(P!=null),P.vc=null,P.yc=null,P.Ya=null;var O=P.Wa;O!=null&&(O.X=null),P.vb=null,t(P!=null)}function Us(){var P=new Xj;return P==null?null:(P.a=0,P.xb=KE,Qa("Predictor","VP8LPredictors"),Qa("Predictor","VP8LPredictors_C"),Qa("PredictorAdd","VP8LPredictorsAdd"),Qa("PredictorAdd","VP8LPredictorsAdd_C"),Yx=gt,cd=At,ts=ot,Ma=yr,zl=Qt,Qo=zn,Jo=br,N.VP8LMapColor32b=Gu,N.VP8LMapColor8b=Qx,P)}function fo(P,O,z,H,Y){var te=1,ae=[P],se=[O],ie=H.m,ce=H.s,Ee=null,_e=0;e:for(;;){if(z)for(;te&&W(ie,1);){var Le=ae,Ie=se,Qe=H,qe=1,Pe=Qe.m,Te=Qe.gc[Qe.ab],Ye=W(Pe,2);if(Qe.Oc&1<<Ye)te=0;else{switch(Qe.Oc|=1<<Ye,Te.hc=Ye,Te.Ea=Le[0],Te.nc=Ie[0],Te.K=[null],++Qe.ab,t(4>=Qe.ab),Ye){case 0:case 1:Te.b=W(Pe,3)+2,qe=fo(Se(Te.Ea,Te.b),Se(Te.nc,Te.b),0,Qe,Te.K),Te.K=Te.K[0];break;case 3:var Ze,Xe=W(Pe,8)+1,pt=16<Xe?0:4<Xe?1:2<Xe?2:3;if(Le[0]=Se(Te.Ea,pt),Te.b=pt,Ze=qe=fo(Xe,1,0,Qe,Te.K)){var ct,kt=Xe,mt=Te,jr=1<<(8>>mt.b),Nr=i(jr);if(Nr==null)Ze=0;else{var fr=mt.K[0],rr=mt.w;for(Nr[0]=mt.K[0][0],ct=1;ct<1*kt;++ct)Nr[ct]=be(fr[rr+ct],Nr[ct-1]);for(;ct<4*jr;++ct)Nr[ct]=0;mt.K[0]=null,mt.K[0]=Nr,Ze=1}}qe=Ze;break;case 2:break;default:t(0)}te=qe}}if(ae=ae[0],se=se[0],te&&W(ie,1)&&!(te=1<=(_e=W(ie,4))&&11>=_e)){H.a=3;break e}var _r;if(_r=te)t:{var kr,Jt,Ln,rs=H,Rn=ae,ns=se,Sr=_e,bs=z,js=rs.m,ta=rs.s,fa=[null],Ba=1,Ys=0,vo=hU[Sr];r:for(;;){if(bs&&W(js,1)){var ra=W(js,3)+2,rl=Se(Rn,ra),hd=Se(ns,ra),Ju=rl*hd;if(!fo(rl,hd,0,rs,fa))break r;for(fa=fa[0],ta.xc=ra,kr=0;kr<Ju;++kr){var Hl=fa[kr]>>8&65535;fa[kr]=Hl,Hl>=Ba&&(Ba=Hl+1)}}if(js.h)break r;for(Jt=0;5>Jt;++Jt){var gn=HE[Jt];!Jt&&0<Sr&&(gn+=1<<Sr),Ys<gn&&(Ys=gn)}var iw=o(Ba*vo,A),n3=Ba,a3=o(n3,k);if(a3==null)var cg=null;else t(65536>=n3),cg=a3;var _h=i(Ys);if(cg==null||_h==null||iw==null){rs.a=1;break r}var dg=iw;for(kr=Ln=0;kr<Ba;++kr){var Ii=cg[kr],Zu=Ii.G,ef=Ii.H,s3=0,ug=1,i3=0;for(Jt=0;5>Jt;++Jt){gn=HE[Jt],Zu[Jt]=dg,ef[Jt]=Ln,!Jt&&0<Sr&&(gn+=1<<Sr);a:{var fg,ow=gn,mg=rs,Lh=_h,LU=dg,RU=Ln,lw=0,Gl=mg.m,FU=W(Gl,1);if(s(Lh,0,0,ow),FU){var MU=W(Gl,1)+1,$U=W(Gl,1),o3=W(Gl,$U==0?1:8);Lh[o3]=1,MU==2&&(Lh[o3=W(Gl,8)]=1);var hg=1}else{var l3=i(19),c3=W(Gl,4)+4;if(19<c3){mg.a=3;var pg=0;break a}for(fg=0;fg<c3;++fg)l3[fU[fg]]=W(Gl,3);var cw=void 0,Rh=void 0,d3=mg,BU=l3,vg=ow,u3=Lh,dw=0,Kl=d3.m,f3=8,m3=o(128,A);n:for(;T(m3,0,7,BU,19);){if(W(Kl,1)){var zU=2+2*W(Kl,3);if((cw=2+W(Kl,zU))>vg)break n}else cw=vg;for(Rh=0;Rh<vg&&cw--;){re(Kl);var h3=m3[0+(127&V(Kl))];ee(Kl,Kl.u+h3.g);var tf=h3.value;if(16>tf)u3[Rh++]=tf,tf!=0&&(f3=tf);else{var UU=tf==16,p3=tf-16,VU=dU[p3],v3=W(Kl,cU[p3])+VU;if(Rh+v3>vg)break n;for(var qU=UU?f3:0;0<v3--;)u3[Rh++]=qU}}dw=1;break n}dw||(d3.a=3),hg=dw}(hg=hg&&!Gl.h)&&(lw=T(LU,RU,8,Lh,ow)),hg&&lw!=0?pg=lw:(mg.a=3,pg=0)}if(pg==0)break r;if(ug&&uU[Jt]==1&&(ug=dg[Ln].g==0),s3+=dg[Ln].g,Ln+=pg,3>=Jt){var Fh,uw=_h[0];for(Fh=1;Fh<gn;++Fh)_h[Fh]>uw&&(uw=_h[Fh]);i3+=uw}}if(Ii.nd=ug,Ii.Qb=0,ug&&(Ii.qb=(Zu[3][ef[3]+0].value<<24|Zu[1][ef[1]+0].value<<16|Zu[2][ef[2]+0].value)>>>0,s3==0&&256>Zu[0][ef[0]+0].value&&(Ii.Qb=1,Ii.qb+=Zu[0][ef[0]+0].value<<8)),Ii.jc=!Ii.Qb&&6>i3,Ii.jc){var xg,nl=Ii;for(xg=0;xg<ua;++xg){var Yl=xg,Xl=nl.pd[Yl],gg=nl.G[0][nl.H[0]+Yl];256<=gg.value?(Xl.g=gg.g+256,Xl.value=gg.value):(Xl.g=0,Xl.value=0,Yl>>=Un(gg,8,Xl),Yl>>=Un(nl.G[1][nl.H[1]+Yl],16,Xl),Yl>>=Un(nl.G[2][nl.H[2]+Yl],0,Xl),Un(nl.G[3][nl.H[3]+Yl],24,Xl))}}}ta.vc=fa,ta.Wb=Ba,ta.Ya=cg,ta.yc=iw,_r=1;break t}_r=0}if(!(te=_r)){H.a=3;break e}if(0<_e){if(ce.ua=1<<_e,!ye(ce.Wa,_e)){H.a=1,te=0;break e}}else ce.ua=0;var fw=H,x3=ae,WU=se,mw=fw.s,hw=mw.xc;if(fw.c=x3,fw.i=WU,mw.md=Se(x3,hw),mw.wc=hw==0?-1:(1<<hw)-1,z){H.xb=wU;break e}if((Ee=i(ae*se))==null){H.a=1,te=0;break e}te=(te=Ci(H,Ee,0,ae,se,se,null))&&!ie.h;break e}return te?(Y!=null?Y[0]=Ee:(t(Ee==null),t(z)),H.$=0,z||uo(ce)):uo(ce),te}function ad(P,O){var z=P.c*P.i,H=z+O+16*O;return t(P.c<=O),P.V=i(H),P.V==null?(P.Ta=null,P.Ua=0,P.a=1,0):(P.Ta=P.V,P.Ua=P.Ba+z+O,1)}function Pu(P,O){var z=P.C,H=O-z,Y=P.V,te=P.Ba+P.c*z;for(t(O<=P.l.o);0<H;){var ae=16<H?16:H,se=P.l.ma,ie=P.l.width,ce=ie*ae,Ee=se.ca,_e=se.tb+ie*z,Le=P.Ta,Ie=P.Ua;xs(P,ae,Y,te),An(Le,Ie,Ee,_e,ce),Ni(se,z,z+ae,Ee,_e,ie),H-=ae,Y+=ae*P.c,z+=ae}t(z==O),P.C=P.Ma=O}function Tu(){this.ub=this.yd=this.td=this.Rb=0}function Iu(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Du(){this.Fb=this.Bb=this.Cb=0,this.Zb=i(4),this.Lb=i(4)}function Tx(){this.Yb=function(){var P=[];return function O(z,H,Y){for(var te=Y[H],ae=0;ae<te&&(z.push(Y.length>H+1?[]:0),!(Y.length<H+1));ae++)O(z[ae],H+1,Y)}(P,0,[3,11]),P}()}function Ej(){this.jb=i(3),this.Wc=l([4,8],Tx),this.Xc=l([4,17],Tx)}function Pj(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new i(4),this.od=new i(4)}function ku(){this.ld=this.La=this.dd=this.tc=0}function Ix(){this.Na=this.la=0}function Tj(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function lh(){this.ad=i(384),this.Za=0,this.Ob=i(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Ij(){this.uc=this.M=this.Nb=0,this.wa=Array(new ku),this.Y=0,this.ya=Array(new lh),this.aa=0,this.l=new Ou}function Dx(){this.y=i(16),this.f=i(8),this.ea=i(8)}function Dj(){this.cb=this.a=0,this.sc="",this.m=new q,this.Od=new Tu,this.Kc=new Iu,this.ed=new Pj,this.Qa=new Du,this.Ic=this.$c=this.Aa=0,this.D=new Ij,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=o(8,q),this.ia=0,this.pb=o(4,Tj),this.Pa=new Ej,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Dx),this.Hd=0,this.rb=Array(new Ix),this.sb=0,this.wa=Array(new ku),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new lh),this.L=this.aa=0,this.gd=l([4,2],ku),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Ou(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function kj(){var P=new Dj;return P!=null&&(P.a=0,P.sc="OK",P.cb=0,P.Xb=0,kh||(kh=_x)),P}function Sn(P,O,z){return P.a==0&&(P.a=O,P.sc=z,P.cb=0),0}function kx(P,O,z){return 3<=z&&P[O+0]==157&&P[O+1]==1&&P[O+2]==42}function Ox(P,O){if(P==null)return 0;if(P.a=0,P.sc="OK",O==null)return Sn(P,2,"null VP8Io passed to VP8GetHeaders()");var z=O.data,H=O.w,Y=O.ha;if(4>Y)return Sn(P,7,"Truncated header.");var te=z[H+0]|z[H+1]<<8|z[H+2]<<16,ae=P.Od;if(ae.Rb=!(1&te),ae.td=te>>1&7,ae.yd=te>>4&1,ae.ub=te>>5,3<ae.td)return Sn(P,3,"Incorrect keyframe parameters.");if(!ae.yd)return Sn(P,4,"Frame not displayable.");H+=3,Y-=3;var se=P.Kc;if(ae.Rb){if(7>Y)return Sn(P,7,"cannot parse picture header");if(!kx(z,H,Y))return Sn(P,3,"Bad code word");se.c=16383&(z[H+4]<<8|z[H+3]),se.Td=z[H+4]>>6,se.i=16383&(z[H+6]<<8|z[H+5]),se.Ud=z[H+6]>>6,H+=7,Y-=7,P.za=se.c+15>>4,P.Ub=se.i+15>>4,O.width=se.c,O.height=se.i,O.Da=0,O.j=0,O.v=0,O.va=O.width,O.o=O.height,O.da=0,O.ib=O.width,O.hb=O.height,O.U=O.width,O.T=O.height,s((te=P.Pa).jb,0,255,te.jb.length),t((te=P.Qa)!=null),te.Cb=0,te.Bb=0,te.Fb=1,s(te.Zb,0,0,te.Zb.length),s(te.Lb,0,0,te.Lb)}if(ae.ub>Y)return Sn(P,7,"bad partition length");L(te=P.m,z,H,ae.ub),H+=ae.ub,Y-=ae.ub,ae.Rb&&(se.Ld=ue(te),se.Kd=ue(te)),se=P.Qa;var ie,ce=P.Pa;if(t(te!=null),t(se!=null),se.Cb=ue(te),se.Cb){if(se.Bb=ue(te),ue(te)){for(se.Fb=ue(te),ie=0;4>ie;++ie)se.Zb[ie]=ue(te)?M(te,7):0;for(ie=0;4>ie;++ie)se.Lb[ie]=ue(te)?M(te,6):0}if(se.Bb)for(ie=0;3>ie;++ie)ce.jb[ie]=ue(te)?$(te,8):255}else se.Bb=0;if(te.Ka)return Sn(P,3,"cannot parse segment header");if((se=P.ed).zd=ue(te),se.Tb=$(te,6),se.wb=$(te,3),se.Pc=ue(te),se.Pc&&ue(te)){for(ce=0;4>ce;++ce)ue(te)&&(se.vd[ce]=M(te,6));for(ce=0;4>ce;++ce)ue(te)&&(se.od[ce]=M(te,6))}if(P.L=se.Tb==0?0:se.zd?1:2,te.Ka)return Sn(P,3,"cannot parse filter header");var Ee=Y;if(Y=ie=H,H=ie+Ee,se=Ee,P.Xb=(1<<$(P.m,2))-1,Ee<3*(ce=P.Xb))z=7;else{for(ie+=3*ce,se-=3*ce,Ee=0;Ee<ce;++Ee){var _e=z[Y+0]|z[Y+1]<<8|z[Y+2]<<16;_e>se&&(_e=se),L(P.Jc[+Ee],z,ie,_e),ie+=_e,se-=_e,Y+=3}L(P.Jc[+ce],z,ie,se),z=ie<H?0:5}if(z!=0)return Sn(P,z,"cannot parse partitions");for(z=$(ie=P.m,7),Y=ue(ie)?M(ie,4):0,H=ue(ie)?M(ie,4):0,se=ue(ie)?M(ie,4):0,ce=ue(ie)?M(ie,4):0,ie=ue(ie)?M(ie,4):0,Ee=P.Qa,_e=0;4>_e;++_e){if(Ee.Cb){var Le=Ee.Zb[_e];Ee.Fb||(Le+=z)}else{if(0<_e){P.pb[_e]=P.pb[0];continue}Le=z}var Ie=P.pb[_e];Ie.Sc[0]=nw[gs(Le+Y,127)],Ie.Sc[1]=aw[gs(Le+0,127)],Ie.Eb[0]=2*nw[gs(Le+H,127)],Ie.Eb[1]=101581*aw[gs(Le+se,127)]>>16,8>Ie.Eb[1]&&(Ie.Eb[1]=8),Ie.Qc[0]=nw[gs(Le+ce,117)],Ie.Qc[1]=aw[gs(Le+ie,127)],Ie.lc=Le+ie}if(!ae.Rb)return Sn(P,4,"Not a key frame.");for(ue(te),ae=P.Pa,z=0;4>z;++z){for(Y=0;8>Y;++Y)for(H=0;3>H;++H)for(se=0;11>se;++se)ce=oe(te,bU[z][Y][H][se])?$(te,8):gU[z][Y][H][se],ae.Wc[z][Y].Yb[H][se]=ce;for(Y=0;17>Y;++Y)ae.Xc[z][Y]=ae.Wc[z][jU[Y]]}return P.kc=ue(te),P.kc&&(P.Bd=$(te,8)),P.cb=1}function _x(P,O,z,H,Y,te,ae){var se=O[Y].Yb[z];for(z=0;16>Y;++Y){if(!oe(P,se[z+0]))return Y;for(;!oe(P,se[z+1]);)if(se=O[++Y].Yb[0],z=0,Y==16)return 16;var ie=O[Y+1].Yb;if(oe(P,se[z+2])){var ce=P,Ee=0;if(oe(ce,(Le=se)[(_e=z)+3]))if(oe(ce,Le[_e+6])){for(se=0,_e=2*(Ee=oe(ce,Le[_e+8]))+(Le=oe(ce,Le[_e+9+Ee])),Ee=0,Le=vU[_e];Le[se];++se)Ee+=Ee+oe(ce,Le[se]);Ee+=3+(8<<_e)}else oe(ce,Le[_e+7])?(Ee=7+2*oe(ce,165),Ee+=oe(ce,145)):Ee=5+oe(ce,159);else Ee=oe(ce,Le[_e+4])?3+oe(ce,Le[_e+5]):2;se=ie[2]}else Ee=1,se=ie[1];ie=ae+xU[Y],0>(ce=P).b&&de(ce);var _e,Le=ce.b,Ie=(_e=ce.Ca>>1)-(ce.I>>Le)>>31;--ce.b,ce.Ca+=Ie,ce.Ca|=1,ce.I-=(_e+1&Ie)<<Le,te[ie]=((Ee^Ie)-Ie)*H[(0<Y)+0]}return 16}function ch(P){var O=P.rb[P.sb-1];O.la=0,O.Na=0,s(P.zc,0,0,P.zc.length),P.ja=0}function Oj(P,O){if(P==null)return 0;if(O==null)return Sn(P,2,"NULL VP8Io parameter in VP8Decode().");if(!P.cb&&!Ox(P,O))return 0;if(t(P.cb),O.ac==null||O.ac(O)){O.ob&&(P.L=0);var z=lg[P.L];if(P.L==2?(P.yb=0,P.zb=0):(P.yb=O.v-z>>4,P.zb=O.j-z>>4,0>P.yb&&(P.yb=0),0>P.zb&&(P.zb=0)),P.Va=O.o+15+z>>4,P.Hb=O.va+15+z>>4,P.Hb>P.za&&(P.Hb=P.za),P.Va>P.Ub&&(P.Va=P.Ub),0<P.L){var H=P.ed;for(z=0;4>z;++z){var Y;if(P.Qa.Cb){var te=P.Qa.Lb[z];P.Qa.Fb||(te+=H.Tb)}else te=H.Tb;for(Y=0;1>=Y;++Y){var ae=P.gd[z][Y],se=te;if(H.Pc&&(se+=H.vd[0],Y&&(se+=H.od[0])),0<(se=0>se?0:63<se?63:se)){var ie=se;0<H.wb&&(ie=4<H.wb?ie>>2:ie>>1)>9-H.wb&&(ie=9-H.wb),1>ie&&(ie=1),ae.dd=ie,ae.tc=2*se+ie,ae.ld=40<=se?2:15<=se?1:0}else ae.tc=0;ae.La=Y}}}z=0}else Sn(P,6,"Frame setup failed"),z=P.a;if(z=z==0){if(z){P.$c=0,0<P.Aa||(P.Ic=_U);e:{z=P.Ic,H=4*(ie=P.za);var ce=32*ie,Ee=ie+1,_e=0<P.L?ie*(0<P.Aa?2:1):0,Le=(P.Aa==2?2:1)*ie;if((ae=H+832+(Y=3*(16*z+lg[P.L])/2*ce)+(te=P.Fa!=null&&0<P.Fa.length?P.Kc.c*P.Kc.i:0))!=ae)z=0;else{if(ae>P.Vb){if(P.Vb=0,P.Ec=i(ae),P.Fc=0,P.Ec==null){z=Sn(P,1,"no memory during frame initialization.");break e}P.Vb=ae}ae=P.Ec,se=P.Fc,P.Ac=ae,P.Bc=se,se+=H,P.Gd=o(ce,Dx),P.Hd=0,P.rb=o(Ee+1,Ix),P.sb=1,P.wa=_e?o(_e,ku):null,P.Y=0,P.D.Nb=0,P.D.wa=P.wa,P.D.Y=P.Y,0<P.Aa&&(P.D.Y+=ie),t(!0),P.oc=ae,P.pc=se,se+=832,P.ya=o(Le,lh),P.aa=0,P.D.ya=P.ya,P.D.aa=P.aa,P.Aa==2&&(P.D.aa+=ie),P.R=16*ie,P.B=8*ie,ie=(ce=lg[P.L])*P.R,ce=ce/2*P.B,P.sa=ae,P.ta=se+ie,P.qa=P.sa,P.ra=P.ta+16*z*P.R+ce,P.Ha=P.qa,P.Ia=P.ra+8*z*P.B+ce,P.$c=0,se+=Y,P.mb=te?ae:null,P.nb=te?se:null,t(se+te<=P.Fc+P.Vb),ch(P),s(P.Ac,P.Bc,0,H),z=1}}if(z){if(O.ka=0,O.y=P.sa,O.O=P.ta,O.f=P.qa,O.N=P.ra,O.ea=P.Ha,O.Vd=P.Ia,O.fa=P.R,O.Rc=P.B,O.F=null,O.J=0,!Zx){for(z=-255;255>=z;++z)Vn[255+z]=0>z?-z:z;for(z=-1020;1020>=z;++z)el[1020+z]=-128>z?-128:127<z?127:z;for(z=-112;112>=z;++z)Dh[112+z]=-16>z?-16:15<z?15:z;for(z=-255;510>=z;++z)Qu[255+z]=0>z?0:255<z?255:z;Zx=1}Ku=Rj,Zo=_j,Ph=Rx,$a=Lj,qs=Fx,Cn=Lx,Yu=ph,Jx=od,Th=Yj,dd=vh,ud=Kj,Ul=$u,fd=xh,Xu=Hx,md=Wx,Vl=ho,Ih=Xo,Ws=Gj,Ti[0]=mo,Ti[1]=Fj,Ti[2]=zj,Ti[3]=Uj,Ti[4]=Bx,Ti[5]=Fu,Ti[6]=zx,Ti[7]=fh,Ti[8]=qj,Ti[9]=Vj,ql[0]=Mx,ql[1]=$j,ql[2]=Yo,ql[3]=Lu,ql[4]=Na,ql[5]=Bj,ql[6]=$x,tl[0]=Fl,tl[1]=Mj,tl[2]=Wj,tl[3]=mh,tl[4]=id,tl[5]=Hj,tl[6]=hh,z=1}else z=0}z&&(z=function(Ie,Qe){for(Ie.M=0;Ie.M<Ie.Va;++Ie.M){var qe,Pe=Ie.Jc[Ie.M&Ie.Xb],Te=Ie.m,Ye=Ie;for(qe=0;qe<Ye.za;++qe){var Ze=Te,Xe=Ye,pt=Xe.Ac,ct=Xe.Bc+4*qe,kt=Xe.zc,mt=Xe.ya[Xe.aa+qe];if(Xe.Qa.Bb?mt.$b=oe(Ze,Xe.Pa.jb[0])?2+oe(Ze,Xe.Pa.jb[2]):oe(Ze,Xe.Pa.jb[1]):mt.$b=0,Xe.kc&&(mt.Ad=oe(Ze,Xe.Bd)),mt.Za=!oe(Ze,145)+0,mt.Za){var jr=mt.Ob,Nr=0;for(Xe=0;4>Xe;++Xe){var fr,rr=kt[0+Xe];for(fr=0;4>fr;++fr){rr=yU[pt[ct+fr]][rr];for(var _r=GE[oe(Ze,rr[0])];0<_r;)_r=GE[2*_r+oe(Ze,rr[_r])];rr=-_r,pt[ct+fr]=rr}a(jr,Nr,pt,ct,4),Nr+=4,kt[0+Xe]=rr}}else rr=oe(Ze,156)?oe(Ze,128)?1:3:oe(Ze,163)?2:0,mt.Ob[0]=rr,s(pt,ct,rr,4),s(kt,0,rr,4);mt.Dd=oe(Ze,142)?oe(Ze,114)?oe(Ze,183)?1:3:2:0}if(Ye.m.Ka)return Sn(Ie,7,"Premature end-of-partition0 encountered.");for(;Ie.ja<Ie.za;++Ie.ja){if(Ye=Pe,Ze=(Te=Ie).rb[Te.sb-1],pt=Te.rb[Te.sb+Te.ja],qe=Te.ya[Te.aa+Te.ja],ct=Te.kc?qe.Ad:0)Ze.la=pt.la=0,qe.Za||(Ze.Na=pt.Na=0),qe.Hc=0,qe.Gc=0,qe.ia=0;else{var kr,Jt;if(Ze=pt,pt=Ye,ct=Te.Pa.Xc,kt=Te.ya[Te.aa+Te.ja],mt=Te.pb[kt.$b],Xe=kt.ad,jr=0,Nr=Te.rb[Te.sb-1],rr=fr=0,s(Xe,jr,0,384),kt.Za)var Ln=0,rs=ct[3];else{_r=i(16);var Rn=Ze.Na+Nr.Na;if(Rn=kh(pt,ct[1],Rn,mt.Eb,0,_r,0),Ze.Na=Nr.Na=(0<Rn)+0,1<Rn)Ku(_r,0,Xe,jr);else{var ns=_r[0]+3>>3;for(_r=0;256>_r;_r+=16)Xe[jr+_r]=ns}Ln=1,rs=ct[0]}var Sr=15&Ze.la,bs=15&Nr.la;for(_r=0;4>_r;++_r){var js=1&bs;for(ns=Jt=0;4>ns;++ns)Sr=Sr>>1|(js=(Rn=kh(pt,rs,Rn=js+(1&Sr),mt.Sc,Ln,Xe,jr))>Ln)<<7,Jt=Jt<<2|(3<Rn?3:1<Rn?2:Xe[jr+0]!=0),jr+=16;Sr>>=4,bs=bs>>1|js<<7,fr=(fr<<8|Jt)>>>0}for(rs=Sr,Ln=bs>>4,kr=0;4>kr;kr+=2){for(Jt=0,Sr=Ze.la>>4+kr,bs=Nr.la>>4+kr,_r=0;2>_r;++_r){for(js=1&bs,ns=0;2>ns;++ns)Rn=js+(1&Sr),Sr=Sr>>1|(js=0<(Rn=kh(pt,ct[2],Rn,mt.Qc,0,Xe,jr)))<<3,Jt=Jt<<2|(3<Rn?3:1<Rn?2:Xe[jr+0]!=0),jr+=16;Sr>>=2,bs=bs>>1|js<<5}rr|=Jt<<4*kr,rs|=Sr<<4<<kr,Ln|=(240&bs)<<kr}Ze.la=rs,Nr.la=Ln,kt.Hc=fr,kt.Gc=rr,kt.ia=43690&rr?0:mt.ia,ct=!(fr|rr)}if(0<Te.L&&(Te.wa[Te.Y+Te.ja]=Te.gd[qe.$b][qe.Za],Te.wa[Te.Y+Te.ja].La|=!ct),Ye.Ka)return Sn(Ie,7,"Premature end-of-file encountered.")}if(ch(Ie),Te=Qe,Ye=1,qe=(Pe=Ie).D,Ze=0<Pe.L&&Pe.M>=Pe.zb&&Pe.M<=Pe.Va,Pe.Aa==0)e:{if(qe.M=Pe.M,qe.uc=Ze,Nh(Pe,qe),Ye=1,qe=(Jt=Pe.D).Nb,Ze=(rr=lg[Pe.L])*Pe.R,pt=rr/2*Pe.B,_r=16*qe*Pe.R,ns=8*qe*Pe.B,ct=Pe.sa,kt=Pe.ta-Ze+_r,mt=Pe.qa,Xe=Pe.ra-pt+ns,jr=Pe.Ha,Nr=Pe.Ia-pt+ns,bs=(Sr=Jt.M)==0,fr=Sr>=Pe.Va-1,Pe.Aa==2&&Nh(Pe,Jt),Jt.uc)for(js=(Rn=Pe).D.M,t(Rn.D.uc),Jt=Rn.yb;Jt<Rn.Hb;++Jt){Ln=Jt,rs=js;var ta=(fa=(gn=Rn).D).Nb;kr=gn.R;var fa=fa.wa[fa.Y+Ln],Ba=gn.sa,Ys=gn.ta+16*ta*kr+16*Ln,vo=fa.dd,ra=fa.tc;if(ra!=0)if(t(3<=ra),gn.L==1)0<Ln&&Vl(Ba,Ys,kr,ra+4),fa.La&&Ws(Ba,Ys,kr,ra),0<rs&&md(Ba,Ys,kr,ra+4),fa.La&&Ih(Ba,Ys,kr,ra);else{var rl=gn.B,hd=gn.qa,Ju=gn.ra+8*ta*rl+8*Ln,Hl=gn.Ha,gn=gn.Ia+8*ta*rl+8*Ln;ta=fa.ld,0<Ln&&(Jx(Ba,Ys,kr,ra+4,vo,ta),dd(hd,Ju,Hl,gn,rl,ra+4,vo,ta)),fa.La&&(Ul(Ba,Ys,kr,ra,vo,ta),Xu(hd,Ju,Hl,gn,rl,ra,vo,ta)),0<rs&&(Yu(Ba,Ys,kr,ra+4,vo,ta),Th(hd,Ju,Hl,gn,rl,ra+4,vo,ta)),fa.La&&(ud(Ba,Ys,kr,ra,vo,ta),fd(hd,Ju,Hl,gn,rl,ra,vo,ta))}}if(Pe.ia&&alert("todo:DitherRow"),Te.put!=null){if(Jt=16*Sr,Sr=16*(Sr+1),bs?(Te.y=Pe.sa,Te.O=Pe.ta+_r,Te.f=Pe.qa,Te.N=Pe.ra+ns,Te.ea=Pe.Ha,Te.W=Pe.Ia+ns):(Jt-=rr,Te.y=ct,Te.O=kt,Te.f=mt,Te.N=Xe,Te.ea=jr,Te.W=Nr),fr||(Sr-=rr),Sr>Te.o&&(Sr=Te.o),Te.F=null,Te.J=null,Pe.Fa!=null&&0<Pe.Fa.length&&Jt<Sr&&(Te.J=jh(Pe,Te,Jt,Sr-Jt),Te.F=Pe.mb,Te.F==null&&Te.F.length==0)){Ye=Sn(Pe,3,"Could not decode alpha data.");break e}Jt<Te.j&&(rr=Te.j-Jt,Jt=Te.j,t(!(1&rr)),Te.O+=Pe.R*rr,Te.N+=Pe.B*(rr>>1),Te.W+=Pe.B*(rr>>1),Te.F!=null&&(Te.J+=Te.width*rr)),Jt<Sr&&(Te.O+=Te.v,Te.N+=Te.v>>1,Te.W+=Te.v>>1,Te.F!=null&&(Te.J+=Te.v),Te.ka=Jt-Te.j,Te.U=Te.va-Te.v,Te.T=Sr-Jt,Ye=Te.put(Te))}qe+1!=Pe.Ic||fr||(a(Pe.sa,Pe.ta-Ze,ct,kt+16*Pe.R,Ze),a(Pe.qa,Pe.ra-pt,mt,Xe+8*Pe.B,pt),a(Pe.Ha,Pe.Ia-pt,jr,Nr+8*Pe.B,pt))}if(!Ye)return Sn(Ie,6,"Output aborted.")}return 1}(P,O)),O.bc!=null&&O.bc(O),z&=1}return z?(P.cb=0,z):0}function Ai(P,O,z,H,Y){Y=P[O+z+32*H]+(Y>>3),P[O+z+32*H]=-256&Y?0>Y?0:255:Y}function _u(P,O,z,H,Y,te){Ai(P,O,0,z,H+Y),Ai(P,O,1,z,H+te),Ai(P,O,2,z,H-te),Ai(P,O,3,z,H-Y)}function Za(P){return(20091*P>>16)+P}function dh(P,O,z,H){var Y,te=0,ae=i(16);for(Y=0;4>Y;++Y){var se=P[O+0]+P[O+8],ie=P[O+0]-P[O+8],ce=(35468*P[O+4]>>16)-Za(P[O+12]),Ee=Za(P[O+4])+(35468*P[O+12]>>16);ae[te+0]=se+Ee,ae[te+1]=ie+ce,ae[te+2]=ie-ce,ae[te+3]=se-Ee,te+=4,O++}for(Y=te=0;4>Y;++Y)se=(P=ae[te+0]+4)+ae[te+8],ie=P-ae[te+8],ce=(35468*ae[te+4]>>16)-Za(ae[te+12]),Ai(z,H,0,0,se+(Ee=Za(ae[te+4])+(35468*ae[te+12]>>16))),Ai(z,H,1,0,ie+ce),Ai(z,H,2,0,ie-ce),Ai(z,H,3,0,se-Ee),te++,H+=32}function Lx(P,O,z,H){var Y=P[O+0]+4,te=35468*P[O+4]>>16,ae=Za(P[O+4]),se=35468*P[O+1]>>16;_u(z,H,0,Y+ae,P=Za(P[O+1]),se),_u(z,H,1,Y+te,P,se),_u(z,H,2,Y-te,P,se),_u(z,H,3,Y-ae,P,se)}function _j(P,O,z,H,Y){dh(P,O,z,H),Y&&dh(P,O+16,z,H+4)}function Rx(P,O,z,H){Zo(P,O+0,z,H,1),Zo(P,O+32,z,H+128,1)}function Lj(P,O,z,H){var Y;for(P=P[O+0]+4,Y=0;4>Y;++Y)for(O=0;4>O;++O)Ai(z,H,O,Y,P)}function Fx(P,O,z,H){P[O+0]&&$a(P,O+0,z,H),P[O+16]&&$a(P,O+16,z,H+4),P[O+32]&&$a(P,O+32,z,H+128),P[O+48]&&$a(P,O+48,z,H+128+4)}function Rj(P,O,z,H){var Y,te=i(16);for(Y=0;4>Y;++Y){var ae=P[O+0+Y]+P[O+12+Y],se=P[O+4+Y]+P[O+8+Y],ie=P[O+4+Y]-P[O+8+Y],ce=P[O+0+Y]-P[O+12+Y];te[0+Y]=ae+se,te[8+Y]=ae-se,te[4+Y]=ce+ie,te[12+Y]=ce-ie}for(Y=0;4>Y;++Y)ae=(P=te[0+4*Y]+3)+te[3+4*Y],se=te[1+4*Y]+te[2+4*Y],ie=te[1+4*Y]-te[2+4*Y],ce=P-te[3+4*Y],z[H+0]=ae+se>>3,z[H+16]=ce+ie>>3,z[H+32]=ae-se>>3,z[H+48]=ce-ie>>3,H+=64}function uh(P,O,z){var H,Y=O-32,te=ys,ae=255-P[Y-1];for(H=0;H<z;++H){var se,ie=te,ce=ae+P[O-1];for(se=0;se<z;++se)P[O+se]=ie[ce+P[Y+se]];O+=32}}function Fj(P,O){uh(P,O,4)}function Mj(P,O){uh(P,O,8)}function $j(P,O){uh(P,O,16)}function Yo(P,O){var z;for(z=0;16>z;++z)a(P,O+32*z,P,O-32,16)}function Lu(P,O){var z;for(z=16;0<z;--z)s(P,O,P[O-1],16),O+=32}function Ru(P,O,z){var H;for(H=0;16>H;++H)s(O,z+32*H,P,16)}function Mx(P,O){var z,H=16;for(z=0;16>z;++z)H+=P[O-1+32*z]+P[O+z-32];Ru(H>>5,P,O)}function Na(P,O){var z,H=8;for(z=0;16>z;++z)H+=P[O-1+32*z];Ru(H>>4,P,O)}function Bj(P,O){var z,H=8;for(z=0;16>z;++z)H+=P[O+z-32];Ru(H>>4,P,O)}function $x(P,O){Ru(128,P,O)}function qt(P,O,z){return P+2*O+z+2>>2}function zj(P,O){var z,H=O-32;for(H=new Uint8Array([qt(P[H-1],P[H+0],P[H+1]),qt(P[H+0],P[H+1],P[H+2]),qt(P[H+1],P[H+2],P[H+3]),qt(P[H+2],P[H+3],P[H+4])]),z=0;4>z;++z)a(P,O+32*z,H,0,H.length)}function Uj(P,O){var z=P[O-1],H=P[O-1+32],Y=P[O-1+64],te=P[O-1+96];ge(P,O+0,16843009*qt(P[O-1-32],z,H)),ge(P,O+32,16843009*qt(z,H,Y)),ge(P,O+64,16843009*qt(H,Y,te)),ge(P,O+96,16843009*qt(Y,te,te))}function mo(P,O){var z,H=4;for(z=0;4>z;++z)H+=P[O+z-32]+P[O-1+32*z];for(H>>=3,z=0;4>z;++z)s(P,O+32*z,H,4)}function Bx(P,O){var z=P[O-1+0],H=P[O-1+32],Y=P[O-1+64],te=P[O-1-32],ae=P[O+0-32],se=P[O+1-32],ie=P[O+2-32],ce=P[O+3-32];P[O+0+96]=qt(H,Y,P[O-1+96]),P[O+1+96]=P[O+0+64]=qt(z,H,Y),P[O+2+96]=P[O+1+64]=P[O+0+32]=qt(te,z,H),P[O+3+96]=P[O+2+64]=P[O+1+32]=P[O+0+0]=qt(ae,te,z),P[O+3+64]=P[O+2+32]=P[O+1+0]=qt(se,ae,te),P[O+3+32]=P[O+2+0]=qt(ie,se,ae),P[O+3+0]=qt(ce,ie,se)}function zx(P,O){var z=P[O+1-32],H=P[O+2-32],Y=P[O+3-32],te=P[O+4-32],ae=P[O+5-32],se=P[O+6-32],ie=P[O+7-32];P[O+0+0]=qt(P[O+0-32],z,H),P[O+1+0]=P[O+0+32]=qt(z,H,Y),P[O+2+0]=P[O+1+32]=P[O+0+64]=qt(H,Y,te),P[O+3+0]=P[O+2+32]=P[O+1+64]=P[O+0+96]=qt(Y,te,ae),P[O+3+32]=P[O+2+64]=P[O+1+96]=qt(te,ae,se),P[O+3+64]=P[O+2+96]=qt(ae,se,ie),P[O+3+96]=qt(se,ie,ie)}function Fu(P,O){var z=P[O-1+0],H=P[O-1+32],Y=P[O-1+64],te=P[O-1-32],ae=P[O+0-32],se=P[O+1-32],ie=P[O+2-32],ce=P[O+3-32];P[O+0+0]=P[O+1+64]=te+ae+1>>1,P[O+1+0]=P[O+2+64]=ae+se+1>>1,P[O+2+0]=P[O+3+64]=se+ie+1>>1,P[O+3+0]=ie+ce+1>>1,P[O+0+96]=qt(Y,H,z),P[O+0+64]=qt(H,z,te),P[O+0+32]=P[O+1+96]=qt(z,te,ae),P[O+1+32]=P[O+2+96]=qt(te,ae,se),P[O+2+32]=P[O+3+96]=qt(ae,se,ie),P[O+3+32]=qt(se,ie,ce)}function fh(P,O){var z=P[O+0-32],H=P[O+1-32],Y=P[O+2-32],te=P[O+3-32],ae=P[O+4-32],se=P[O+5-32],ie=P[O+6-32],ce=P[O+7-32];P[O+0+0]=z+H+1>>1,P[O+1+0]=P[O+0+64]=H+Y+1>>1,P[O+2+0]=P[O+1+64]=Y+te+1>>1,P[O+3+0]=P[O+2+64]=te+ae+1>>1,P[O+0+32]=qt(z,H,Y),P[O+1+32]=P[O+0+96]=qt(H,Y,te),P[O+2+32]=P[O+1+96]=qt(Y,te,ae),P[O+3+32]=P[O+2+96]=qt(te,ae,se),P[O+3+64]=qt(ae,se,ie),P[O+3+96]=qt(se,ie,ce)}function Vj(P,O){var z=P[O-1+0],H=P[O-1+32],Y=P[O-1+64],te=P[O-1+96];P[O+0+0]=z+H+1>>1,P[O+2+0]=P[O+0+32]=H+Y+1>>1,P[O+2+32]=P[O+0+64]=Y+te+1>>1,P[O+1+0]=qt(z,H,Y),P[O+3+0]=P[O+1+32]=qt(H,Y,te),P[O+3+32]=P[O+1+64]=qt(Y,te,te),P[O+3+64]=P[O+2+64]=P[O+0+96]=P[O+1+96]=P[O+2+96]=P[O+3+96]=te}function qj(P,O){var z=P[O-1+0],H=P[O-1+32],Y=P[O-1+64],te=P[O-1+96],ae=P[O-1-32],se=P[O+0-32],ie=P[O+1-32],ce=P[O+2-32];P[O+0+0]=P[O+2+32]=z+ae+1>>1,P[O+0+32]=P[O+2+64]=H+z+1>>1,P[O+0+64]=P[O+2+96]=Y+H+1>>1,P[O+0+96]=te+Y+1>>1,P[O+3+0]=qt(se,ie,ce),P[O+2+0]=qt(ae,se,ie),P[O+1+0]=P[O+3+32]=qt(z,ae,se),P[O+1+32]=P[O+3+64]=qt(H,z,ae),P[O+1+64]=P[O+3+96]=qt(Y,H,z),P[O+1+96]=qt(te,Y,H)}function Wj(P,O){var z;for(z=0;8>z;++z)a(P,O+32*z,P,O-32,8)}function mh(P,O){var z;for(z=0;8>z;++z)s(P,O,P[O-1],8),O+=32}function sd(P,O,z){var H;for(H=0;8>H;++H)s(O,z+32*H,P,8)}function Fl(P,O){var z,H=8;for(z=0;8>z;++z)H+=P[O+z-32]+P[O-1+32*z];sd(H>>4,P,O)}function Hj(P,O){var z,H=4;for(z=0;8>z;++z)H+=P[O+z-32];sd(H>>3,P,O)}function id(P,O){var z,H=4;for(z=0;8>z;++z)H+=P[O-1+32*z];sd(H>>3,P,O)}function hh(P,O){sd(128,P,O)}function Mu(P,O,z){var H=P[O-z],Y=P[O+0],te=3*(Y-H)+Jj[1020+P[O-2*z]-P[O+z]],ae=eg[112+(te+4>>3)];P[O-z]=ys[255+H+eg[112+(te+3>>3)]],P[O+0]=ys[255+Y-ae]}function Ux(P,O,z,H){var Y=P[O+0],te=P[O+z];return Gs[255+P[O-2*z]-P[O-z]]>H||Gs[255+te-Y]>H}function Vx(P,O,z,H){return 4*Gs[255+P[O-z]-P[O+0]]+Gs[255+P[O-2*z]-P[O+z]]<=H}function qx(P,O,z,H,Y){var te=P[O-3*z],ae=P[O-2*z],se=P[O-z],ie=P[O+0],ce=P[O+z],Ee=P[O+2*z],_e=P[O+3*z];return 4*Gs[255+se-ie]+Gs[255+ae-ce]>H?0:Gs[255+P[O-4*z]-te]<=Y&&Gs[255+te-ae]<=Y&&Gs[255+ae-se]<=Y&&Gs[255+_e-Ee]<=Y&&Gs[255+Ee-ce]<=Y&&Gs[255+ce-ie]<=Y}function Wx(P,O,z,H){var Y=2*H+1;for(H=0;16>H;++H)Vx(P,O+H,z,Y)&&Mu(P,O+H,z)}function ho(P,O,z,H){var Y=2*H+1;for(H=0;16>H;++H)Vx(P,O+H*z,1,Y)&&Mu(P,O+H*z,1)}function Xo(P,O,z,H){var Y;for(Y=3;0<Y;--Y)Wx(P,O+=4*z,z,H)}function Gj(P,O,z,H){var Y;for(Y=3;0<Y;--Y)ho(P,O+=4,z,H)}function Ml(P,O,z,H,Y,te,ae,se){for(te=2*te+1;0<Y--;){if(qx(P,O,z,te,ae))if(Ux(P,O,z,se))Mu(P,O,z);else{var ie=P,ce=O,Ee=z,_e=ie[ce-2*Ee],Le=ie[ce-Ee],Ie=ie[ce+0],Qe=ie[ce+Ee],qe=ie[ce+2*Ee],Pe=27*(Ye=Jj[1020+3*(Ie-Le)+Jj[1020+_e-Qe]])+63>>7,Te=18*Ye+63>>7,Ye=9*Ye+63>>7;ie[ce-3*Ee]=ys[255+ie[ce-3*Ee]+Ye],ie[ce-2*Ee]=ys[255+_e+Te],ie[ce-Ee]=ys[255+Le+Pe],ie[ce+0]=ys[255+Ie-Pe],ie[ce+Ee]=ys[255+Qe-Te],ie[ce+2*Ee]=ys[255+qe-Ye]}O+=H}}function Ei(P,O,z,H,Y,te,ae,se){for(te=2*te+1;0<Y--;){if(qx(P,O,z,te,ae))if(Ux(P,O,z,se))Mu(P,O,z);else{var ie=P,ce=O,Ee=z,_e=ie[ce-Ee],Le=ie[ce+0],Ie=ie[ce+Ee],Qe=eg[112+((qe=3*(Le-_e))+4>>3)],qe=eg[112+(qe+3>>3)],Pe=Qe+1>>1;ie[ce-2*Ee]=ys[255+ie[ce-2*Ee]+Pe],ie[ce-Ee]=ys[255+_e+qe],ie[ce+0]=ys[255+Le-Qe],ie[ce+Ee]=ys[255+Ie-Pe]}O+=H}}function ph(P,O,z,H,Y,te){Ml(P,O,z,1,16,H,Y,te)}function od(P,O,z,H,Y,te){Ml(P,O,1,z,16,H,Y,te)}function Kj(P,O,z,H,Y,te){var ae;for(ae=3;0<ae;--ae)Ei(P,O+=4*z,z,1,16,H,Y,te)}function $u(P,O,z,H,Y,te){var ae;for(ae=3;0<ae;--ae)Ei(P,O+=4,1,z,16,H,Y,te)}function Yj(P,O,z,H,Y,te,ae,se){Ml(P,O,Y,1,8,te,ae,se),Ml(z,H,Y,1,8,te,ae,se)}function vh(P,O,z,H,Y,te,ae,se){Ml(P,O,1,Y,8,te,ae,se),Ml(z,H,1,Y,8,te,ae,se)}function xh(P,O,z,H,Y,te,ae,se){Ei(P,O+4*Y,Y,1,8,te,ae,se),Ei(z,H+4*Y,Y,1,8,te,ae,se)}function Hx(P,O,z,H,Y,te,ae,se){Ei(P,O+4,1,Y,8,te,ae,se),Ei(z,H+4,1,Y,8,te,ae,se)}function Bu(){this.ba=new ji,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new vn,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function gh(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function yh(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Gx(){this.ua=0,this.Wa=new ne,this.vb=new ne,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new k,this.yc=new A}function Xj(){this.xb=this.a=0,this.l=new Ou,this.ca=new ji,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new R,this.Pb=0,this.wd=new R,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Gx,this.ab=0,this.gc=o(4,yh),this.Oc=0}function zu(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Ou,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function ld(P,O,z,H,Y,te,ae){for(P=P==null?0:P[O+0],O=0;O<ae;++O)Y[te+O]=P+z[H+O]&255,P=Y[te+O]}function bh(P,O,z,H,Y,te,ae){var se;if(P==null)ld(null,null,z,H,Y,te,ae);else for(se=0;se<ae;++se)Y[te+se]=P[O+se]+z[H+se]&255}function $l(P,O,z,H,Y,te,ae){if(P==null)ld(null,null,z,H,Y,te,ae);else{var se,ie=P[O+0],ce=ie,Ee=ie;for(se=0;se<ae;++se)ce=Ee+(ie=P[O+se])-ce,Ee=z[H+se]+(-256&ce?0>ce?0:255:ce)&255,ce=ie,Y[te+se]=Ee}}function jh(P,O,z,H){var Y=O.width,te=O.o;if(t(P!=null&&O!=null),0>z||0>=H||z+H>te)return null;if(!P.Cc){if(P.ga==null){var ae;if(P.ga=new zu,(ae=P.ga==null)||(ae=O.width*O.o,t(P.Gb.length==0),P.Gb=i(ae),P.Uc=0,P.Gb==null?ae=0:(P.mb=P.Gb,P.nb=P.Uc,P.rc=null,ae=1),ae=!ae),!ae){ae=P.ga;var se=P.Fa,ie=P.P,ce=P.qc,Ee=P.mb,_e=P.nb,Le=ie+1,Ie=ce-1,Qe=ae.l;if(t(se!=null&&Ee!=null&&O!=null),Wl[0]=null,Wl[1]=ld,Wl[2]=bh,Wl[3]=$l,ae.ca=Ee,ae.tb=_e,ae.c=O.width,ae.i=O.height,t(0<ae.c&&0<ae.i),1>=ce)O=0;else if(ae.$a=se[ie+0]>>0&3,ae.Z=se[ie+0]>>2&3,ae.Lc=se[ie+0]>>4&3,ie=se[ie+0]>>6&3,0>ae.$a||1<ae.$a||4<=ae.Z||1<ae.Lc||ie)O=0;else if(Qe.put=oo,Qe.ac=da,Qe.bc=lo,Qe.ma=ae,Qe.width=O.width,Qe.height=O.height,Qe.Da=O.Da,Qe.v=O.v,Qe.va=O.va,Qe.j=O.j,Qe.o=O.o,ae.$a)e:{t(ae.$a==1),O=Us();t:for(;;){if(O==null){O=0;break e}if(t(ae!=null),ae.mc=O,O.c=ae.c,O.i=ae.i,O.l=ae.l,O.l.ma=ae,O.l.width=ae.c,O.l.height=ae.i,O.a=0,B(O.m,se,Le,Ie),!fo(ae.c,ae.i,1,O,null)||(O.ab==1&&O.gc[0].hc==3&&Ko(O.s)?(ae.ic=1,se=O.c*O.i,O.Ta=null,O.Ua=0,O.V=i(se),O.Ba=0,O.V==null?(O.a=1,O=0):O=1):(ae.ic=0,O=ad(O,ae.c)),!O))break t;O=1;break e}ae.mc=null,O=0}else O=Ie>=ae.c*ae.i;ae=!O}if(ae)return null;P.ga.Lc!=1?P.Ga=0:H=te-z}t(P.ga!=null),t(z+H<=te);e:{if(O=(se=P.ga).c,te=se.l.o,se.$a==0){if(Le=P.rc,Ie=P.Vc,Qe=P.Fa,ie=P.P+1+z*O,ce=P.mb,Ee=P.nb+z*O,t(ie<=P.P+P.qc),se.Z!=0)for(t(Wl[se.Z]!=null),ae=0;ae<H;++ae)Wl[se.Z](Le,Ie,Qe,ie,ce,Ee,O),Le=ce,Ie=Ee,Ee+=O,ie+=O;else for(ae=0;ae<H;++ae)a(ce,Ee,Qe,ie,O),Le=ce,Ie=Ee,Ee+=O,ie+=O;P.rc=Le,P.Vc=Ie}else{if(t(se.mc!=null),O=z+H,t((ae=se.mc)!=null),t(O<=ae.i),ae.C>=O)O=1;else if(se.ic||ke(),se.ic){se=ae.V,Le=ae.Ba,Ie=ae.c;var qe=ae.i,Pe=(Qe=1,ie=ae.$/Ie,ce=ae.$%Ie,Ee=ae.m,_e=ae.s,ae.$),Te=Ie*qe,Ye=Ie*O,Ze=_e.wc,Xe=Pe<Ye?On(_e,ce,ie):null;t(Pe<=Te),t(O<=qe),t(Ko(_e));t:for(;;){for(;!Ee.h&&Pe<Ye;){if(ce&Ze||(Xe=On(_e,ce,ie)),t(Xe!=null),re(Ee),256>(qe=Ja(Xe.G[0],Xe.H[0],Ee)))se[Le+Pe]=qe,++Pe,++ce>=Ie&&(ce=0,++ie<=O&&!(ie%16)&&Si(ae,ie));else{if(!(280>qe)){Qe=0;break t}qe=wi(qe-256,Ee);var pt,ct=Ja(Xe.G[4],Xe.H[4],Ee);if(re(Ee),!(Pe>=(ct=co(Ie,ct=wi(ct,Ee)))&&Te-Pe>=qe)){Qe=0;break t}for(pt=0;pt<qe;++pt)se[Le+Pe+pt]=se[Le+Pe+pt-ct];for(Pe+=qe,ce+=qe;ce>=Ie;)ce-=Ie,++ie<=O&&!(ie%16)&&Si(ae,ie);Pe<Ye&&ce&Ze&&(Xe=On(_e,ce,ie))}t(Ee.h==G(Ee))}Si(ae,ie>O?O:ie);break t}!Qe||Ee.h&&Pe<Te?(Qe=0,ae.a=Ee.h?5:3):ae.$=Pe,O=Qe}else O=Ci(ae,ae.V,ae.Ba,ae.c,ae.i,O,Pu);if(!O){H=0;break e}}z+H>=te&&(P.Cc=1),H=1}if(!H)return null;if(P.Cc&&((H=P.ga)!=null&&(H.mc=null),P.ga=null,0<P.Ga))return alert("todo:WebPDequantizeLevels"),null}return P.nb+z*Y}function F(P,O,z,H,Y,te){for(;0<Y--;){var ae,se=P,ie=O+(z?1:0),ce=P,Ee=O+(z?0:3);for(ae=0;ae<H;++ae){var _e=ce[Ee+4*ae];_e!=255&&(_e*=32897,se[ie+4*ae+0]=se[ie+4*ae+0]*_e>>23,se[ie+4*ae+1]=se[ie+4*ae+1]*_e>>23,se[ie+4*ae+2]=se[ie+4*ae+2]*_e>>23)}O+=te}}function Q(P,O,z,H,Y){for(;0<H--;){var te;for(te=0;te<z;++te){var ae=P[O+2*te+0],se=15&(ce=P[O+2*te+1]),ie=4369*se,ce=(240&ce|ce>>4)*ie>>16;P[O+2*te+0]=(240&ae|ae>>4)*ie>>16&240|(15&ae|ae<<4)*ie>>16>>4&15,P[O+2*te+1]=240&ce|se}O+=Y}}function he(P,O,z,H,Y,te,ae,se){var ie,ce,Ee=255;for(ce=0;ce<Y;++ce){for(ie=0;ie<H;++ie){var _e=P[O+ie];te[ae+4*ie]=_e,Ee&=_e}O+=z,ae+=se}return Ee!=255}function Ce(P,O,z,H,Y){var te;for(te=0;te<Y;++te)z[H+te]=P[O+te]>>8}function ke(){Hs=F,Ur=Q,Vr=he,An=Ce}function We(P,O,z){N[P]=function(H,Y,te,ae,se,ie,ce,Ee,_e,Le,Ie,Qe,qe,Pe,Te,Ye,Ze){var Xe,pt=Ze-1>>1,ct=se[ie+0]|ce[Ee+0]<<16,kt=_e[Le+0]|Ie[Qe+0]<<16;t(H!=null);var mt=3*ct+kt+131074>>2;for(O(H[Y+0],255&mt,mt>>16,qe,Pe),te!=null&&(mt=3*kt+ct+131074>>2,O(te[ae+0],255&mt,mt>>16,Te,Ye)),Xe=1;Xe<=pt;++Xe){var jr=se[ie+Xe]|ce[Ee+Xe]<<16,Nr=_e[Le+Xe]|Ie[Qe+Xe]<<16,fr=ct+jr+kt+Nr+524296,rr=fr+2*(jr+kt)>>3;mt=rr+ct>>1,ct=(fr=fr+2*(ct+Nr)>>3)+jr>>1,O(H[Y+2*Xe-1],255&mt,mt>>16,qe,Pe+(2*Xe-1)*z),O(H[Y+2*Xe-0],255&ct,ct>>16,qe,Pe+(2*Xe-0)*z),te!=null&&(mt=fr+kt>>1,ct=rr+Nr>>1,O(te[ae+2*Xe-1],255&mt,mt>>16,Te,Ye+(2*Xe-1)*z),O(te[ae+2*Xe+0],255&ct,ct>>16,Te,Ye+(2*Xe+0)*z)),ct=jr,kt=Nr}1&Ze||(mt=3*ct+kt+131074>>2,O(H[Y+Ze-1],255&mt,mt>>16,qe,Pe+(Ze-1)*z),te!=null&&(mt=3*kt+ct+131074>>2,O(te[ae+Ze-1],255&mt,mt>>16,Te,Ye+(Ze-1)*z)))}}function tt(){Ks[tg]=NU,Ks[rg]=YE,Ks[qE]=SU,Ks[ng]=XE,Ks[ag]=QE,Ks[Zj]=JE,Ks[WE]=CU,Ks[ew]=YE,Ks[tw]=XE,Ks[sg]=QE,Ks[rw]=JE}function ht(P){return P&~AU?0>P?0:255:P>>ZE}function Tt(P,O){return ht((19077*P>>8)+(26149*O>>8)-14234)}function Kt(P,O,z){return ht((19077*P>>8)-(6419*O>>8)-(13320*z>>8)+8708)}function Ht(P,O){return ht((19077*P>>8)+(33050*O>>8)-17685)}function dr(P,O,z,H,Y){H[Y+0]=Tt(P,z),H[Y+1]=Kt(P,O,z),H[Y+2]=Ht(P,O)}function on(P,O,z,H,Y){H[Y+0]=Ht(P,O),H[Y+1]=Kt(P,O,z),H[Y+2]=Tt(P,z)}function xn(P,O,z,H,Y){var te=Kt(P,O,z);O=te<<3&224|Ht(P,O)>>3,H[Y+0]=248&Tt(P,z)|te>>5,H[Y+1]=O}function _n(P,O,z,H,Y){var te=240&Ht(P,O)|15;H[Y+0]=240&Tt(P,z)|Kt(P,O,z)>>4,H[Y+1]=te}function Sa(P,O,z,H,Y){H[Y+0]=255,dr(P,O,z,H,Y+1)}function ea(P,O,z,H,Y){on(P,O,z,H,Y),H[Y+3]=255}function Pi(P,O,z,H,Y){dr(P,O,z,H,Y),H[Y+3]=255}function gs(P,O){return 0>P?0:P>O?O:P}function po(P,O,z){N[P]=function(H,Y,te,ae,se,ie,ce,Ee,_e){for(var Le=Ee+(-2&_e)*z;Ee!=Le;)O(H[Y+0],te[ae+0],se[ie+0],ce,Ee),O(H[Y+1],te[ae+0],se[ie+0],ce,Ee+z),Y+=2,++ae,++ie,Ee+=2*z;1&_e&&O(H[Y+0],te[ae+0],se[ie+0],ce,Ee)}}function Kx(P,O,z){return z==0?P==0?O==0?6:5:O==0?4:0:z}function wh(P,O,z,H,Y){switch(P>>>30){case 3:Zo(O,z,H,Y,0);break;case 2:Cn(O,z,H,Y);break;case 1:$a(O,z,H,Y)}}function Nh(P,O){var z,H,Y=O.M,te=O.Nb,ae=P.oc,se=P.pc+40,ie=P.oc,ce=P.pc+584,Ee=P.oc,_e=P.pc+600;for(z=0;16>z;++z)ae[se+32*z-1]=129;for(z=0;8>z;++z)ie[ce+32*z-1]=129,Ee[_e+32*z-1]=129;for(0<Y?ae[se-1-32]=ie[ce-1-32]=Ee[_e-1-32]=129:(s(ae,se-32-1,127,21),s(ie,ce-32-1,127,9),s(Ee,_e-32-1,127,9)),H=0;H<P.za;++H){var Le=O.ya[O.aa+H];if(0<H){for(z=-1;16>z;++z)a(ae,se+32*z-4,ae,se+32*z+12,4);for(z=-1;8>z;++z)a(ie,ce+32*z-4,ie,ce+32*z+4,4),a(Ee,_e+32*z-4,Ee,_e+32*z+4,4)}var Ie=P.Gd,Qe=P.Hd+H,qe=Le.ad,Pe=Le.Hc;if(0<Y&&(a(ae,se-32,Ie[Qe].y,0,16),a(ie,ce-32,Ie[Qe].f,0,8),a(Ee,_e-32,Ie[Qe].ea,0,8)),Le.Za){var Te=ae,Ye=se-32+16;for(0<Y&&(H>=P.za-1?s(Te,Ye,Ie[Qe].y[15],4):a(Te,Ye,Ie[Qe+1].y,0,4)),z=0;4>z;z++)Te[Ye+128+z]=Te[Ye+256+z]=Te[Ye+384+z]=Te[Ye+0+z];for(z=0;16>z;++z,Pe<<=2)Te=ae,Ye=se+t3[z],Ti[Le.Ob[z]](Te,Ye),wh(Pe,qe,16*+z,Te,Ye)}else if(Te=Kx(H,Y,Le.Ob[0]),ql[Te](ae,se),Pe!=0)for(z=0;16>z;++z,Pe<<=2)wh(Pe,qe,16*+z,ae,se+t3[z]);for(z=Le.Gc,Te=Kx(H,Y,Le.Dd),tl[Te](ie,ce),tl[Te](Ee,_e),Pe=qe,Te=ie,Ye=ce,255&(Le=z>>0)&&(170&Le?Ph(Pe,256,Te,Ye):qs(Pe,256,Te,Ye)),Le=Ee,Pe=_e,255&(z>>=8)&&(170&z?Ph(qe,320,Le,Pe):qs(qe,320,Le,Pe)),Y<P.Ub-1&&(a(Ie[Qe].y,0,ae,se+480,16),a(Ie[Qe].f,0,ie,ce+224,8),a(Ie[Qe].ea,0,Ee,_e+224,8)),z=8*te*P.B,Ie=P.sa,Qe=P.ta+16*H+16*te*P.R,qe=P.qa,Le=P.ra+8*H+z,Pe=P.Ha,Te=P.Ia+8*H+z,z=0;16>z;++z)a(Ie,Qe+z*P.R,ae,se+32*z,16);for(z=0;8>z;++z)a(qe,Le+z*P.B,ie,ce+32*z,8),a(Pe,Te+z*P.B,Ee,_e+32*z,8)}}function Uu(P,O,z,H,Y,te,ae,se,ie){var ce=[0],Ee=[0],_e=0,Le=ie!=null?ie.kd:0,Ie=ie??new gh;if(P==null||12>z)return 7;Ie.data=P,Ie.w=O,Ie.ha=z,O=[O],z=[z],Ie.gb=[Ie.gb];e:{var Qe=O,qe=z,Pe=Ie.gb;if(t(P!=null),t(qe!=null),t(Pe!=null),Pe[0]=0,12<=qe[0]&&!n(P,Qe[0],"RIFF")){if(n(P,Qe[0]+8,"WEBP")){Pe=3;break e}var Te=Oe(P,Qe[0]+4);if(12>Te||4294967286<Te){Pe=3;break e}if(Le&&Te>qe[0]-8){Pe=7;break e}Pe[0]=Te,Qe[0]+=12,qe[0]-=12}Pe=0}if(Pe!=0)return Pe;for(Te=0<Ie.gb[0],z=z[0];;){e:{var Ye=P;qe=O,Pe=z;var Ze=ce,Xe=Ee,pt=Qe=[0];if((mt=_e=[_e])[0]=0,8>Pe[0])Pe=7;else{if(!n(Ye,qe[0],"VP8X")){if(Oe(Ye,qe[0]+4)!=10){Pe=3;break e}if(18>Pe[0]){Pe=7;break e}var ct=Oe(Ye,qe[0]+8),kt=1+xe(Ye,qe[0]+12);if(2147483648<=kt*(Ye=1+xe(Ye,qe[0]+15))){Pe=3;break e}pt!=null&&(pt[0]=ct),Ze!=null&&(Ze[0]=kt),Xe!=null&&(Xe[0]=Ye),qe[0]+=18,Pe[0]-=18,mt[0]=1}Pe=0}}if(_e=_e[0],Qe=Qe[0],Pe!=0)return Pe;if(qe=!!(2&Qe),!Te&&_e)return 3;if(te!=null&&(te[0]=!!(16&Qe)),ae!=null&&(ae[0]=qe),se!=null&&(se[0]=0),ae=ce[0],Qe=Ee[0],_e&&qe&&ie==null){Pe=0;break}if(4>z){Pe=7;break}if(Te&&_e||!Te&&!_e&&!n(P,O[0],"ALPH")){z=[z],Ie.na=[Ie.na],Ie.P=[Ie.P],Ie.Sa=[Ie.Sa];e:{ct=P,Pe=O,Te=z;var mt=Ie.gb;Ze=Ie.na,Xe=Ie.P,pt=Ie.Sa,kt=22,t(ct!=null),t(Te!=null),Ye=Pe[0];var jr=Te[0];for(t(Ze!=null),t(pt!=null),Ze[0]=null,Xe[0]=null,pt[0]=0;;){if(Pe[0]=Ye,Te[0]=jr,8>jr){Pe=7;break e}var Nr=Oe(ct,Ye+4);if(4294967286<Nr){Pe=3;break e}var fr=8+Nr+1&-2;if(kt+=fr,0<mt&&kt>mt){Pe=3;break e}if(!n(ct,Ye,"VP8 ")||!n(ct,Ye,"VP8L")){Pe=0;break e}if(jr[0]<fr){Pe=7;break e}n(ct,Ye,"ALPH")||(Ze[0]=ct,Xe[0]=Ye+8,pt[0]=Nr),Ye+=fr,jr-=fr}}if(z=z[0],Ie.na=Ie.na[0],Ie.P=Ie.P[0],Ie.Sa=Ie.Sa[0],Pe!=0)break}z=[z],Ie.Ja=[Ie.Ja],Ie.xa=[Ie.xa];e:if(mt=P,Pe=O,Te=z,Ze=Ie.gb[0],Xe=Ie.Ja,pt=Ie.xa,ct=Pe[0],Ye=!n(mt,ct,"VP8 "),kt=!n(mt,ct,"VP8L"),t(mt!=null),t(Te!=null),t(Xe!=null),t(pt!=null),8>Te[0])Pe=7;else{if(Ye||kt){if(mt=Oe(mt,ct+4),12<=Ze&&mt>Ze-12){Pe=3;break e}if(Le&&mt>Te[0]-8){Pe=7;break e}Xe[0]=mt,Pe[0]+=8,Te[0]-=8,pt[0]=kt}else pt[0]=5<=Te[0]&&mt[ct+0]==47&&!(mt[ct+4]>>5),Xe[0]=Te[0];Pe=0}if(z=z[0],Ie.Ja=Ie.Ja[0],Ie.xa=Ie.xa[0],O=O[0],Pe!=0)break;if(4294967286<Ie.Ja)return 3;if(se==null||qe||(se[0]=Ie.xa?2:1),ae=[ae],Qe=[Qe],Ie.xa){if(5>z){Pe=7;break}se=ae,Le=Qe,qe=te,P==null||5>z?P=0:5<=z&&P[O+0]==47&&!(P[O+4]>>5)?(Te=[0],mt=[0],Ze=[0],B(Xe=new R,P,O,z),_t(Xe,Te,mt,Ze)?(se!=null&&(se[0]=Te[0]),Le!=null&&(Le[0]=mt[0]),qe!=null&&(qe[0]=Ze[0]),P=1):P=0):P=0}else{if(10>z){Pe=7;break}se=Qe,P==null||10>z||!kx(P,O+3,z-3)?P=0:(Le=P[O+0]|P[O+1]<<8|P[O+2]<<16,qe=16383&(P[O+7]<<8|P[O+6]),P=16383&(P[O+9]<<8|P[O+8]),1&Le||3<(Le>>1&7)||!(Le>>4&1)||Le>>5>=Ie.Ja||!qe||!P?P=0:(ae&&(ae[0]=qe),se&&(se[0]=P),P=1))}if(!P||(ae=ae[0],Qe=Qe[0],_e&&(ce[0]!=ae||Ee[0]!=Qe)))return 3;ie!=null&&(ie[0]=Ie,ie.offset=O-ie.w,t(4294967286>O-ie.w),t(ie.offset==ie.ha-z));break}return Pe==0||Pe==7&&_e&&ie==null?(te!=null&&(te[0]|=Ie.na!=null&&0<Ie.na.length),H!=null&&(H[0]=ae),Y!=null&&(Y[0]=Qe),0):Pe}function Sh(P,O,z){var H=O.width,Y=O.height,te=0,ae=0,se=H,ie=Y;if(O.Da=P!=null&&0<P.Da,O.Da&&(se=P.cd,ie=P.bd,te=P.v,ae=P.j,11>z||(te&=-2,ae&=-2),0>te||0>ae||0>=se||0>=ie||te+se>H||ae+ie>Y))return 0;if(O.v=te,O.j=ae,O.va=te+se,O.o=ae+ie,O.U=se,O.T=ie,O.da=P!=null&&0<P.da,O.da){if(!Ae(se,ie,z=[P.ib],te=[P.hb]))return 0;O.ib=z[0],O.hb=te[0]}return O.ob=P!=null&&P.ob,O.Kb=P==null||!P.Sd,O.da&&(O.ob=O.ib<3*H/4&&O.hb<3*Y/4,O.Kb=0),1}function Ch(P){if(P==null)return 2;if(11>P.S){var O=P.f.RGBA;O.fb+=(P.height-1)*O.A,O.A=-O.A}else O=P.f.kb,P=P.height,O.O+=(P-1)*O.fa,O.fa=-O.fa,O.N+=(P-1>>1)*O.Ab,O.Ab=-O.Ab,O.W+=(P-1>>1)*O.Db,O.Db=-O.Db,O.F!=null&&(O.J+=(P-1)*O.lb,O.lb=-O.lb);return 0}function Vu(P,O,z,H){if(H==null||0>=P||0>=O)return 2;if(z!=null){if(z.Da){var Y=z.cd,te=z.bd,ae=-2&z.v,se=-2&z.j;if(0>ae||0>se||0>=Y||0>=te||ae+Y>P||se+te>O)return 2;P=Y,O=te}if(z.da){if(!Ae(P,O,Y=[z.ib],te=[z.hb]))return 2;P=Y[0],O=te[0]}}H.width=P,H.height=O;e:{var ie=H.width,ce=H.height;if(P=H.S,0>=ie||0>=ce||!(P>=tg&&13>P))P=2;else{if(0>=H.Rd&&H.sd==null){ae=te=Y=O=0;var Ee=(se=ie*r3[P])*ce;if(11>P||(te=(ce+1)/2*(O=(ie+1)/2),P==12&&(ae=(Y=ie)*ce)),(ce=i(Ee+2*te+ae))==null){P=1;break e}H.sd=ce,11>P?((ie=H.f.RGBA).eb=ce,ie.fb=0,ie.A=se,ie.size=Ee):((ie=H.f.kb).y=ce,ie.O=0,ie.fa=se,ie.Fd=Ee,ie.f=ce,ie.N=0+Ee,ie.Ab=O,ie.Cd=te,ie.ea=ce,ie.W=0+Ee+te,ie.Db=O,ie.Ed=te,P==12&&(ie.F=ce,ie.J=0+Ee+2*te),ie.Tc=ae,ie.lb=Y)}if(O=1,Y=H.S,te=H.width,ae=H.height,Y>=tg&&13>Y)if(11>Y)P=H.f.RGBA,O&=(se=Math.abs(P.A))*(ae-1)+te<=P.size,O&=se>=te*r3[Y],O&=P.eb!=null;else{P=H.f.kb,se=(te+1)/2,Ee=(ae+1)/2,ie=Math.abs(P.fa),ce=Math.abs(P.Ab);var _e=Math.abs(P.Db),Le=Math.abs(P.lb),Ie=Le*(ae-1)+te;O&=ie*(ae-1)+te<=P.Fd,O&=ce*(Ee-1)+se<=P.Cd,O=(O&=_e*(Ee-1)+se<=P.Ed)&ie>=te&ce>=se&_e>=se,O&=P.y!=null,O&=P.f!=null,O&=P.ea!=null,Y==12&&(O&=Le>=te,O&=Ie<=P.Tc,O&=P.F!=null)}else O=0;P=O?0:2}}return P!=0||z!=null&&z.fd&&(P=Ch(H)),P}var ua=64,qu=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Wu=24,Hu=32,Ah=8,es=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];Re("Predictor0","PredictorAdd0"),N.Predictor0=function(){return 4278190080},N.Predictor1=function(P){return P},N.Predictor2=function(P,O,z){return O[z+0]},N.Predictor3=function(P,O,z){return O[z+1]},N.Predictor4=function(P,O,z){return O[z-1]},N.Predictor5=function(P,O,z){return rt(rt(P,O[z+1]),O[z+0])},N.Predictor6=function(P,O,z){return rt(P,O[z-1])},N.Predictor7=function(P,O,z){return rt(P,O[z+0])},N.Predictor8=function(P,O,z){return rt(O[z-1],O[z+0])},N.Predictor9=function(P,O,z){return rt(O[z+0],O[z+1])},N.Predictor10=function(P,O,z){return rt(rt(P,O[z-1]),rt(O[z+0],O[z+1]))},N.Predictor11=function(P,O,z){var H=O[z+0];return 0>=et(H>>24&255,P>>24&255,(O=O[z-1])>>24&255)+et(H>>16&255,P>>16&255,O>>16&255)+et(H>>8&255,P>>8&255,O>>8&255)+et(255&H,255&P,255&O)?H:P},N.Predictor12=function(P,O,z){var H=O[z+0];return(xt((P>>24&255)+(H>>24&255)-((O=O[z-1])>>24&255))<<24|xt((P>>16&255)+(H>>16&255)-(O>>16&255))<<16|xt((P>>8&255)+(H>>8&255)-(O>>8&255))<<8|xt((255&P)+(255&H)-(255&O)))>>>0},N.Predictor13=function(P,O,z){var H=O[z-1];return(Ve((P=rt(P,O[z+0]))>>24&255,H>>24&255)<<24|Ve(P>>16&255,H>>16&255)<<16|Ve(P>>8&255,H>>8&255)<<8|Ve(P>>0&255,H>>0&255))>>>0};var Qj=N.PredictorAdd0;N.PredictorAdd1=ut,Re("Predictor2","PredictorAdd2"),Re("Predictor3","PredictorAdd3"),Re("Predictor4","PredictorAdd4"),Re("Predictor5","PredictorAdd5"),Re("Predictor6","PredictorAdd6"),Re("Predictor7","PredictorAdd7"),Re("Predictor8","PredictorAdd8"),Re("Predictor9","PredictorAdd9"),Re("Predictor10","PredictorAdd10"),Re("Predictor11","PredictorAdd11"),Re("Predictor12","PredictorAdd12"),Re("Predictor13","PredictorAdd13");var Eh=N.PredictorAdd2;zt("ColorIndexInverseTransform","MapARGB","32b",function(P){return P>>8&255},function(P){return P}),zt("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(P){return P},function(P){return P>>8&255});var Yx,Vs=N.ColorIndexInverseTransform,Gu=N.MapARGB,Xx=N.VP8LColorIndexInverseTransformAlpha,Qx=N.MapAlpha,Bl=N.VP8LPredictorsAdd=[];Bl.length=16,(N.VP8LPredictors=[]).length=16,(N.VP8LPredictorsAdd_C=[]).length=16,(N.VP8LPredictors_C=[]).length=16;var cd,ts,Ma,zl,Qo,Jo,Ku,Zo,Cn,Ph,$a,qs,Yu,Jx,Th,dd,ud,Ul,fd,Xu,md,Vl,Ih,Ws,Hs,Ur,Vr,An,Vn=i(511),el=i(2041),Dh=i(225),Qu=i(767),Zx=0,Jj=el,eg=Dh,ys=Qu,Gs=Vn,tg=0,rg=1,qE=2,ng=3,ag=4,Zj=5,WE=6,ew=7,tw=8,sg=9,rw=10,cU=[2,3,7],dU=[3,3,11],HE=[280,256,256,256,40],uU=[0,1,1,1,0],fU=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],mU=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],hU=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],pU=8,nw=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],aw=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],kh=null,vU=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],xU=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],GE=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],gU=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],yU=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],bU=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],jU=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],ql=[],Ti=[],tl=[],wU=1,KE=2,Wl=[],Ks=[];We("UpsampleRgbLinePair",dr,3),We("UpsampleBgrLinePair",on,3),We("UpsampleRgbaLinePair",Pi,4),We("UpsampleBgraLinePair",ea,4),We("UpsampleArgbLinePair",Sa,4),We("UpsampleRgba4444LinePair",_n,2),We("UpsampleRgb565LinePair",xn,2);var NU=N.UpsampleRgbLinePair,SU=N.UpsampleBgrLinePair,YE=N.UpsampleRgbaLinePair,XE=N.UpsampleBgraLinePair,QE=N.UpsampleArgbLinePair,JE=N.UpsampleRgba4444LinePair,CU=N.UpsampleRgb565LinePair,ig=16,og=1<<ig-1,Oh=-227,sw=482,ZE=6,AU=(256<<ZE)-1,e3=0,EU=i(256),PU=i(256),TU=i(256),IU=i(256),DU=i(sw-Oh),kU=i(sw-Oh);po("YuvToRgbRow",dr,3),po("YuvToBgrRow",on,3),po("YuvToRgbaRow",Pi,4),po("YuvToBgraRow",ea,4),po("YuvToArgbRow",Sa,4),po("YuvToRgba4444Row",_n,2),po("YuvToRgb565Row",xn,2);var t3=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],lg=[0,2,8],OU=[8,7,6,4,4,2,2,2,1,1,1,1],_U=1;this.WebPDecodeRGBA=function(P,O,z,H,Y){var te=rg,ae=new Bu,se=new ji;ae.ba=se,se.S=te,se.width=[se.width],se.height=[se.height];var ie=se.width,ce=se.height,Ee=new Go;if(Ee==null||P==null)var _e=2;else t(Ee!=null),_e=Uu(P,O,z,Ee.width,Ee.height,Ee.Pd,Ee.Qd,Ee.format,null);if(_e!=0?ie=0:(ie!=null&&(ie[0]=Ee.width[0]),ce!=null&&(ce[0]=Ee.height[0]),ie=1),ie){se.width=se.width[0],se.height=se.height[0],H!=null&&(H[0]=se.width),Y!=null&&(Y[0]=se.height);e:{if(H=new Ou,(Y=new gh).data=P,Y.w=O,Y.ha=z,Y.kd=1,O=[0],t(Y!=null),((P=Uu(Y.data,Y.w,Y.ha,null,null,null,O,null,Y))==0||P==7)&&O[0]&&(P=4),(O=P)==0){if(t(ae!=null),H.data=Y.data,H.w=Y.w+Y.offset,H.ha=Y.ha-Y.offset,H.put=oo,H.ac=da,H.bc=lo,H.ma=ae,Y.xa){if((P=Us())==null){ae=1;break e}if(function(Le,Ie){var Qe=[0],qe=[0],Pe=[0];t:for(;;){if(Le==null)return 0;if(Ie==null)return Le.a=2,0;if(Le.l=Ie,Le.a=0,B(Le.m,Ie.data,Ie.w,Ie.ha),!_t(Le.m,Qe,qe,Pe)){Le.a=3;break t}if(Le.xb=KE,Ie.width=Qe[0],Ie.height=qe[0],!fo(Qe[0],qe[0],1,Le,null))break t;return 1}return t(Le.a!=0),0}(P,H)){if(H=(O=Vu(H.width,H.height,ae.Oa,ae.ba))==0){t:{H=P;r:for(;;){if(H==null){H=0;break t}if(t(H.s.yc!=null),t(H.s.Ya!=null),t(0<H.s.Wb),t((z=H.l)!=null),t((Y=z.ma)!=null),H.xb!=0){if(H.ca=Y.ba,H.tb=Y.tb,t(H.ca!=null),!Sh(Y.Oa,z,ng)){H.a=2;break r}if(!ad(H,z.width)||z.da)break r;if((z.da||cr(H.ca.S))&&ke(),11>H.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),H.ca.f.kb.F!=null&&ke()),H.Pb&&0<H.s.ua&&H.s.vb.X==null&&!ye(H.s.vb,H.s.Wa.Xa)){H.a=1;break r}H.xb=0}if(!Ci(H,H.V,H.Ba,H.c,H.i,z.o,Eu))break r;Y.Dc=H.Ma,H=1;break t}t(H.a!=0),H=0}H=!H}H&&(O=P.a)}else O=P.a}else{if((P=new kj)==null){ae=1;break e}if(P.Fa=Y.na,P.P=Y.P,P.qc=Y.Sa,Ox(P,H)){if((O=Vu(H.width,H.height,ae.Oa,ae.ba))==0){if(P.Aa=0,z=ae.Oa,t((Y=P)!=null),z!=null){if(0<(ie=0>(ie=z.Md)?0:100<ie?255:255*ie/100)){for(ce=Ee=0;4>ce;++ce)12>(_e=Y.pb[ce]).lc&&(_e.ia=ie*OU[0>_e.lc?0:_e.lc]>>3),Ee|=_e.ia;Ee&&(alert("todo:VP8InitRandom"),Y.ia=1)}Y.Ga=z.Id,100<Y.Ga?Y.Ga=100:0>Y.Ga&&(Y.Ga=0)}Oj(P,H)||(O=P.a)}}else O=P.a}O==0&&ae.Oa!=null&&ae.Oa.fd&&(O=Ch(ae.ba))}ae=O}te=ae!=0?null:11>te?se.f.RGBA.eb:se.f.kb.y}else te=null;return te};var r3=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function d(N,I){for(var D="",T=0;T<4;T++)D+=String.fromCharCode(N[I++]);return D}function f(N,I){return(N[I+0]<<0|N[I+1]<<8|N[I+2]<<16)>>>0}function u(N,I){return(N[I+0]<<0|N[I+1]<<8|N[I+2]<<16|N[I+3]<<24)>>>0}new c;var m=[0],h=[0],x=[],g=new c,p=e,v=function(N,I){var D={},T=0,A=!1,_=0,k=0;if(D.frames=[],!function(V,G,ee,re){for(var de=0;de<re;de++)if(V[G+de]!=ee.charCodeAt(de))return!0;return!1}(N,I,"RIFF",4)){var L,$;for(u(N,I+=4),I+=8;I<N.length;){var M=d(N,I),B=u(N,I+=4);I+=4;var U=B+(1&B);switch(M){case"VP8 ":case"VP8L":D.frames[T]===void 0&&(D.frames[T]={}),(R=D.frames[T]).src_off=A?k:I-8,R.src_size=_+B+8,T++,A&&(A=!1,_=0,k=0);break;case"VP8X":(R=D.header={}).feature_flags=N[I];var W=I+4;R.canvas_width=1+f(N,W),W+=3,R.canvas_height=1+f(N,W),W+=3;break;case"ALPH":A=!0,_=U+8,k=I-8;break;case"ANIM":(R=D.header).bgcolor=u(N,I),W=I+4,R.loop_count=(L=N)[($=W)+0]<<0|L[$+1]<<8,W+=2;break;case"ANMF":var q,R;(R=D.frames[T]={}).offset_x=2*f(N,I),I+=3,R.offset_y=2*f(N,I),I+=3,R.width=1+f(N,I),I+=3,R.height=1+f(N,I),I+=3,R.duration=f(N,I),I+=3,q=N[I++],R.dispose=1&q,R.blend=q>>1&1}M!="ANMF"&&(I+=U)}return D}}(p,0);v.response=p,v.rgbaoutput=!0,v.dataurl=!1;var y=v.header?v.header:null,b=v.frames?v.frames:null;if(y){y.loop_counter=y.loop_count,m=[y.canvas_height],h=[y.canvas_width];for(var j=0;j<b.length&&b[j].blend!=0;j++);}var C=b[0],E=g.WebPDecodeRGBA(p,C.src_off,C.src_size,h,m);C.rgba=E,C.imgwidth=h[0],C.imgheight=m[0];for(var S=0;S<h[0]*m[0]*4;S++)x[S]=E[S];return this.width=h,this.height=m,this.data=x,this}(function(e){var t=function(){return typeof tS=="function"},n=function(m,h,x,g){var p=4,v=o;switch(g){case e.image_compression.FAST:p=1,v=i;break;case e.image_compression.MEDIUM:p=6,v=l;break;case e.image_compression.SLOW:p=9,v=c}m=a(m,h,x,v);var y=tS(m,{level:p});return e.__addimage__.arrayBufferToBinaryString(y)},a=function(m,h,x,g){for(var p,v,y,b=m.length/h,j=new Uint8Array(m.length+b),C=f(),E=0;E<b;E+=1){if(y=E*h,p=m.subarray(y,y+h),g)j.set(g(p,x,v),y+E);else{for(var S,N=C.length,I=[];S<N;S+=1)I[S]=C[S](p,x,v);var D=u(I.concat());j.set(I[D],y+E)}v=p}return j},s=function(m){var h=Array.apply([],m);return h.unshift(0),h},i=function(m,h){var x,g=[],p=m.length;g[0]=1;for(var v=0;v<p;v+=1)x=m[v-h]||0,g[v+1]=m[v]-x+256&255;return g},o=function(m,h,x){var g,p=[],v=m.length;p[0]=2;for(var y=0;y<v;y+=1)g=x&&x[y]||0,p[y+1]=m[y]-g+256&255;return p},l=function(m,h,x){var g,p,v=[],y=m.length;v[0]=3;for(var b=0;b<y;b+=1)g=m[b-h]||0,p=x&&x[b]||0,v[b+1]=m[b]+256-(g+p>>>1)&255;return v},c=function(m,h,x){var g,p,v,y,b=[],j=m.length;b[0]=4;for(var C=0;C<j;C+=1)g=m[C-h]||0,p=x&&x[C]||0,v=x&&x[C-h]||0,y=d(g,p,v),b[C+1]=m[C]-y+256&255;return b},d=function(m,h,x){if(m===h&&h===x)return m;var g=Math.abs(h-x),p=Math.abs(m-x),v=Math.abs(m+h-x-x);return g<=p&&g<=v?m:p<=v?h:x},f=function(){return[s,i,o,l,c]},u=function(m){var h=m.map(function(x){return x.reduce(function(g,p){return g+Math.abs(p)},0)});return h.indexOf(Math.min.apply(null,h))};e.processPNG=function(m,h,x,g){var p,v,y,b,j,C,E,S,N,I,D,T,A,_,k,L=this.decode.FLATE_DECODE,$="";if(this.__addimage__.isArrayBuffer(m)&&(m=new Uint8Array(m)),this.__addimage__.isArrayBufferView(m)){if(m=(y=new Rce(m)).imgData,v=y.bits,p=y.colorSpace,j=y.colors,[4,6].indexOf(y.colorType)!==-1){if(y.bits===8){N=(S=y.pixelBitlength==32?new Uint32Array(y.decodePixels().buffer):y.pixelBitlength==16?new Uint16Array(y.decodePixels().buffer):new Uint8Array(y.decodePixels().buffer)).length,D=new Uint8Array(N*y.colors),I=new Uint8Array(N);var M,B=y.pixelBitlength-y.bits;for(_=0,k=0;_<N;_++){for(A=S[_],M=0;M<B;)D[k++]=A>>>M&255,M+=y.bits;I[_]=A>>>M&255}}if(y.bits===16){N=(S=new Uint32Array(y.decodePixels().buffer)).length,D=new Uint8Array(N*(32/y.pixelBitlength)*y.colors),I=new Uint8Array(N*(32/y.pixelBitlength)),T=y.colors>1,_=0,k=0;for(var U=0;_<N;)A=S[_++],D[k++]=A>>>0&255,T&&(D[k++]=A>>>16&255,A=S[_++],D[k++]=A>>>0&255),I[U++]=A>>>16&255;v=8}g!==e.image_compression.NONE&&t()?(m=n(D,y.width*y.colors,y.colors,g),E=n(I,y.width,1,g)):(m=D,E=I,L=void 0)}if(y.colorType===3&&(p=this.color_spaces.INDEXED,C=y.palette,y.transparency.indexed)){var W=y.transparency.indexed,q=0;for(_=0,N=W.length;_<N;++_)q+=W[_];if((q/=255)===N-1&&W.indexOf(0)!==-1)b=[W.indexOf(0)];else if(q!==N){for(S=y.decodePixels(),I=new Uint8Array(S.length),_=0,N=S.length;_<N;_++)I[_]=W[S[_]];E=n(I,y.width,1)}}var R=function(V){var G;switch(V){case e.image_compression.FAST:G=11;break;case e.image_compression.MEDIUM:G=13;break;case e.image_compression.SLOW:G=14;break;default:G=12}return G}(g);return L===this.decode.FLATE_DECODE&&($="/Predictor "+R+" "),$+="/Colors "+j+" /BitsPerComponent "+v+" /Columns "+y.width,(this.__addimage__.isArrayBuffer(m)||this.__addimage__.isArrayBufferView(m))&&(m=this.__addimage__.arrayBufferToBinaryString(m)),(E&&this.__addimage__.isArrayBuffer(E)||this.__addimage__.isArrayBufferView(E))&&(E=this.__addimage__.arrayBufferToBinaryString(E)),{alias:x,data:m,index:h,filter:L,decodeParameters:$,transparency:b,palette:C,sMask:E,predictor:R,width:y.width,height:y.height,bitsPerComponent:v,colorSpace:p}}}})(It.API),function(e){e.processGIF89A=function(t,n,a,s){var i=new Fce(t),o=i.width,l=i.height,c=[];i.decodeAndBlitFrameRGBA(0,c);var d={data:c,width:o,height:l},f=new L2(100).encode(d,100);return e.processJPEG.call(this,f,n,a,s)},e.processGIF87A=e.processGIF89A}(It.API),_i.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var e=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(e);for(var t=0;t<e;t++){var n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0);this.palette[t]={red:s,green:a,blue:n,quad:i}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},_i.prototype.parseBGR=function(){this.pos=this.offset;try{var e="bit"+this.bitPP,t=this.width*this.height*4;this.data=new Uint8Array(t),this[e]()}catch(n){Lr.log("bit decode error:"+n)}},_i.prototype.bit1=function(){var e,t=Math.ceil(this.width/8),n=t%4;for(e=this.height-1;e>=0;e--){for(var a=this.bottom_up?e:this.height-1-e,s=0;s<t;s++)for(var i=this.datav.getUint8(this.pos++,!0),o=a*this.width*4+8*s*4,l=0;l<8&&8*s+l<this.width;l++){var c=this.palette[i>>7-l&1];this.data[o+4*l]=c.blue,this.data[o+4*l+1]=c.green,this.data[o+4*l+2]=c.red,this.data[o+4*l+3]=255}n!==0&&(this.pos+=4-n)}},_i.prototype.bit4=function(){for(var e=Math.ceil(this.width/2),t=e%4,n=this.height-1;n>=0;n--){for(var a=this.bottom_up?n:this.height-1-n,s=0;s<e;s++){var i=this.datav.getUint8(this.pos++,!0),o=a*this.width*4+2*s*4,l=i>>4,c=15&i,d=this.palette[l];if(this.data[o]=d.blue,this.data[o+1]=d.green,this.data[o+2]=d.red,this.data[o+3]=255,2*s+1>=this.width)break;d=this.palette[c],this.data[o+4]=d.blue,this.data[o+4+1]=d.green,this.data[o+4+2]=d.red,this.data[o+4+3]=255}t!==0&&(this.pos+=4-t)}},_i.prototype.bit8=function(){for(var e=this.width%4,t=this.height-1;t>=0;t--){for(var n=this.bottom_up?t:this.height-1-t,a=0;a<this.width;a++){var s=this.datav.getUint8(this.pos++,!0),i=n*this.width*4+4*a;if(s<this.palette.length){var o=this.palette[s];this.data[i]=o.red,this.data[i+1]=o.green,this.data[i+2]=o.blue,this.data[i+3]=255}else this.data[i]=255,this.data[i+1]=255,this.data[i+2]=255,this.data[i+3]=255}e!==0&&(this.pos+=4-e)}},_i.prototype.bit15=function(){for(var e=this.width%3,t=parseInt("11111",2),n=this.height-1;n>=0;n--){for(var a=this.bottom_up?n:this.height-1-n,s=0;s<this.width;s++){var i=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(i&t)/t*255|0,l=(i>>5&t)/t*255|0,c=(i>>10&t)/t*255|0,d=i>>15?255:0,f=a*this.width*4+4*s;this.data[f]=c,this.data[f+1]=l,this.data[f+2]=o,this.data[f+3]=d}this.pos+=e}},_i.prototype.bit16=function(){for(var e=this.width%3,t=parseInt("11111",2),n=parseInt("111111",2),a=this.height-1;a>=0;a--){for(var s=this.bottom_up?a:this.height-1-a,i=0;i<this.width;i++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var l=(o&t)/t*255|0,c=(o>>5&n)/n*255|0,d=(o>>11)/t*255|0,f=s*this.width*4+4*i;this.data[f]=d,this.data[f+1]=c,this.data[f+2]=l,this.data[f+3]=255}this.pos+=e}},_i.prototype.bit24=function(){for(var e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,n=0;n<this.width;n++){var a=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=t*this.width*4+4*n;this.data[o]=i,this.data[o+1]=s,this.data[o+2]=a,this.data[o+3]=255}this.pos+=this.width%4}},_i.prototype.bit32=function(){for(var e=this.height-1;e>=0;e--)for(var t=this.bottom_up?e:this.height-1-e,n=0;n<this.width;n++){var a=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),l=t*this.width*4+4*n;this.data[l]=i,this.data[l+1]=s,this.data[l+2]=a,this.data[l+3]=o}},_i.prototype.getData=function(){return this.data},function(e){e.processBMP=function(t,n,a,s){var i=new _i(t,!1),o=i.width,l=i.height,c={data:i.getData(),width:o,height:l},d=new L2(100).encode(c,100);return e.processJPEG.call(this,d,n,a,s)}}(It.API),aD.prototype.getData=function(){return this.data},function(e){e.processWEBP=function(t,n,a,s){var i=new aD(t),o=i.width,l=i.height,c={data:i.getData(),width:o,height:l},d=new L2(100).encode(c,100);return e.processJPEG.call(this,d,n,a,s)}}(It.API),It.API.processRGBA=function(e,t,n){for(var a=e.data,s=a.length,i=new Uint8Array(s/4*3),o=new Uint8Array(s/4),l=0,c=0,d=0;d<s;d+=4){var f=a[d],u=a[d+1],m=a[d+2],h=a[d+3];i[l++]=f,i[l++]=u,i[l++]=m,o[c++]=h}var x=this.__addimage__.arrayBufferToBinaryString(i);return{alpha:this.__addimage__.arrayBufferToBinaryString(o),data:x,index:t,alias:n,colorSpace:"DeviceRGB",bitsPerComponent:8,width:e.width,height:e.height}},It.API.setLanguage=function(e){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[e]!==void 0&&(this.internal.languageSettings.languageCode=e,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},cf=It.API,n0=cf.getCharWidthsArray=function(e,t){var n,a,s=(t=t||{}).font||this.internal.getFont(),i=t.fontSize||this.internal.getFontSize(),o=t.charSpace||this.internal.getCharSpace(),l=t.widths?t.widths:s.metadata.Unicode.widths,c=l.fof?l.fof:1,d=t.kerning?t.kerning:s.metadata.Unicode.kerning,f=d.fof?d.fof:1,u=t.doKerning!==!1,m=0,h=e.length,x=0,g=l[0]||c,p=[];for(n=0;n<h;n++)a=e.charCodeAt(n),typeof s.metadata.widthOfString=="function"?p.push((s.metadata.widthOfGlyph(s.metadata.characterToGlyph(a))+o*(1e3/i)||0)/1e3):(m=u&&xr(d[a])==="object"&&!isNaN(parseInt(d[a][x],10))?d[a][x]/f:0,p.push((l[a]||g)/c+m)),x=a;return p},eD=cf.getStringUnitWidth=function(e,t){var n=(t=t||{}).fontSize||this.internal.getFontSize(),a=t.font||this.internal.getFont(),s=t.charSpace||this.internal.getCharSpace();return cf.processArabic&&(e=cf.processArabic(e)),typeof a.metadata.widthOfString=="function"?a.metadata.widthOfString(e,n,s)/n:n0.apply(this,arguments).reduce(function(i,o){return i+o},0)},tD=function(e,t,n,a){for(var s=[],i=0,o=e.length,l=0;i!==o&&l+t[i]<n;)l+=t[i],i++;s.push(e.slice(0,i));var c=i;for(l=0;i!==o;)l+t[i]>a&&(s.push(e.slice(c,i)),l=0,c=i),l+=t[i],i++;return c!==i&&s.push(e.slice(c,i)),s},rD=function(e,t,n){n||(n={});var a,s,i,o,l,c,d,f=[],u=[f],m=n.textIndent||0,h=0,x=0,g=e.split(" "),p=n0.apply(this,[" ",n])[0];if(c=n.lineIndent===-1?g[0].length+2:n.lineIndent||0){var v=Array(c).join(" "),y=[];g.map(function(j){(j=j.split(/\s*\n/)).length>1?y=y.concat(j.map(function(C,E){return(E&&C.length?`
`:"")+C})):y.push(j[0])}),g=y,c=eD.apply(this,[v,n])}for(i=0,o=g.length;i<o;i++){var b=0;if(a=g[i],c&&a[0]==`
`&&(a=a.substr(1),b=1),m+h+(x=(s=n0.apply(this,[a,n])).reduce(function(j,C){return j+C},0))>t||b){if(x>t){for(l=tD.apply(this,[a,s,t-(m+h),t]),f.push(l.shift()),f=[l.pop()];l.length;)u.push([l.shift()]);x=s.slice(a.length-(f[0]?f[0].length:0)).reduce(function(j,C){return j+C},0)}else f=[a];u.push(f),m=x+c,h=p}else f.push(a),m+=h+x,h=p}return d=c?function(j,C){return(C?v:"")+j.join(" ")}:function(j){return j.join(" ")},u.map(d)},cf.splitTextToSize=function(e,t,n){var a,s=(n=n||{}).fontSize||this.internal.getFontSize(),i=(function(f){if(f.widths&&f.kerning)return{widths:f.widths,kerning:f.kerning};var u=this.internal.getFont(f.fontName,f.fontStyle);return u.metadata.Unicode?{widths:u.metadata.Unicode.widths||{0:1},kerning:u.metadata.Unicode.kerning||{}}:{font:u.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,n);a=Array.isArray(e)?e:String(e).split(/\r?\n/);var o=1*this.internal.scaleFactor*t/s;i.textIndent=n.textIndent?1*n.textIndent*this.internal.scaleFactor/s:0,i.lineIndent=n.lineIndent;var l,c,d=[];for(l=0,c=a.length;l<c;l++)d=d.concat(rD.apply(this,[a[l],o,i]));return d},function(e){e.__fontmetrics__=e.__fontmetrics__||{};for(var t="klmnopqrstuvwxyz",n={},a={},s=0;s<t.length;s++)n[t[s]]="0123456789abcdef"[s],a["0123456789abcdef"[s]]=t[s];var i=function(u){return"0x"+parseInt(u,10).toString(16)},o=e.__fontmetrics__.compress=function(u){var m,h,x,g,p=["{"];for(var v in u){if(m=u[v],isNaN(parseInt(v,10))?h="'"+v+"'":(v=parseInt(v,10),h=(h=i(v).slice(2)).slice(0,-1)+a[h.slice(-1)]),typeof m=="number")m<0?(x=i(m).slice(3),g="-"):(x=i(m).slice(2),g=""),x=g+x.slice(0,-1)+a[x.slice(-1)];else{if(xr(m)!=="object")throw new Error("Don't know what to do with value type "+xr(m)+".");x=o(m)}p.push(h+x)}return p.push("}"),p.join("")},l=e.__fontmetrics__.uncompress=function(u){if(typeof u!="string")throw new Error("Invalid argument passed to uncompress.");for(var m,h,x,g,p={},v=1,y=p,b=[],j="",C="",E=u.length-1,S=1;S<E;S+=1)(g=u[S])=="'"?m?(x=m.join(""),m=void 0):m=[]:m?m.push(g):g=="{"?(b.push([y,x]),y={},x=void 0):g=="}"?((h=b.pop())[0][h[1]]=y,x=void 0,y=h[0]):g=="-"?v=-1:x===void 0?n.hasOwnProperty(g)?(j+=n[g],x=parseInt(j,16)*v,v=1,j=""):j+=g:n.hasOwnProperty(g)?(C+=n[g],y[x]=parseInt(C,16)*v,v=1,x=void 0,C=""):C+=g;return p},c={codePages:["WinAnsiEncoding"],WinAnsiEncoding:l("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},d={Unicode:{Courier:c,"Courier-Bold":c,"Courier-BoldOblique":c,"Courier-Oblique":c,Helvetica:c,"Helvetica-Bold":c,"Helvetica-BoldOblique":c,"Helvetica-Oblique":c,"Times-Roman":c,"Times-Bold":c,"Times-BoldItalic":c,"Times-Italic":c}},f={Unicode:{"Courier-Oblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":l("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":l("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:l("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:l("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":l("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":l("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};e.events.push(["addFont",function(u){var m=u.font,h=f.Unicode[m.postScriptName];h&&(m.metadata.Unicode={},m.metadata.Unicode.widths=h.widths,m.metadata.Unicode.kerning=h.kerning);var x=d.Unicode[m.postScriptName];x&&(m.metadata.Unicode.encoding=x,m.encoding=x.codePages[0])}])}(It.API),function(e){var t=function(n){for(var a=n.length,s=new Uint8Array(a),i=0;i<a;i++)s[i]=n.charCodeAt(i);return s};e.API.events.push(["addFont",function(n){var a=void 0,s=n.font,i=n.instance;if(!s.isStandardFont){if(i===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+s.postScriptName+"').");if(typeof(a=i.existsFileInVFS(s.postScriptName)===!1?i.loadFile(s.postScriptName):i.getFileFromVFS(s.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+s.postScriptName+"').");(function(o,l){l=/^\x00\x01\x00\x00/.test(l)?t(l):t(Ip(l)),o.metadata=e.API.TTFFont.open(l),o.metadata.Unicode=o.metadata.Unicode||{encoding:{},kerning:{},widths:[]},o.metadata.glyIdsUsed=[0]})(s,a)}}])}(It),function(e){function t(){return(Ft.canvg?Promise.resolve(Ft.canvg):X5(()=>import("./index.es-f6bd8f06.js"),[])).catch(function(n){return Promise.reject(new Error("Could not load canvg: "+n))}).then(function(n){return n.default?n.default:n})}It.API.addSvgAsImage=function(n,a,s,i,o,l,c,d){if(isNaN(a)||isNaN(s))throw Lr.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(i)||isNaN(o))throw Lr.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var f=document.createElement("canvas");f.width=i,f.height=o;var u=f.getContext("2d");u.fillStyle="#fff",u.fillRect(0,0,f.width,f.height);var m={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},h=this;return t().then(function(x){return x.fromString(u,n,m)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(x){return x.render(m)}).then(function(){h.addImage(f.toDataURL("image/jpeg",1),a,s,i,o,c,d)})}}(),It.API.putTotalPages=function(e){var t,n=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(t=new RegExp(e,"g"),n=this.internal.getNumberOfPages()):(t=new RegExp(this.pdfEscape16(e,this.internal.getFont()),"g"),n=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var a=1;a<=this.internal.getNumberOfPages();a++)for(var s=0;s<this.internal.pages[a].length;s++)this.internal.pages[a][s]=this.internal.pages[a][s].replace(t,n);return this},It.API.viewerPreferences=function(e,t){var n;e=e||{},t=t||!1;var a,s,i,o={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},l=Object.keys(o),c=[],d=0,f=0,u=0;function m(x,g){var p,v=!1;for(p=0;p<x.length;p+=1)x[p]===g&&(v=!0);return v}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(o)),this.internal.viewerpreferences.isSubscribed=!1),n=this.internal.viewerpreferences.configuration,e==="reset"||t===!0){var h=l.length;for(u=0;u<h;u+=1)n[l[u]].value=n[l[u]].defaultValue,n[l[u]].explicitSet=!1}if(xr(e)==="object"){for(s in e)if(i=e[s],m(l,s)&&i!==void 0){if(n[s].type==="boolean"&&typeof i=="boolean")n[s].value=i;else if(n[s].type==="name"&&m(n[s].valueSet,i))n[s].value=i;else if(n[s].type==="integer"&&Number.isInteger(i))n[s].value=i;else if(n[s].type==="array"){for(d=0;d<i.length;d+=1)if(a=!0,i[d].length===1&&typeof i[d][0]=="number")c.push(String(i[d]-1));else if(i[d].length>1){for(f=0;f<i[d].length;f+=1)typeof i[d][f]!="number"&&(a=!1);a===!0&&c.push([i[d][0]-1,i[d][1]-1].join(" "))}n[s].value="["+c.join(" ")+"]"}else n[s].value=n[s].defaultValue;n[s].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var x,g=[];for(x in n)n[x].explicitSet===!0&&(n[x].type==="name"?g.push("/"+x+" /"+n[x].value):g.push("/"+x+" "+n[x].value));g.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+g.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=n,this},function(e){var t=function(){var a='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',s=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),i=unescape(encodeURIComponent(a)),o=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),l=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),c=unescape(encodeURIComponent("</x:xmpmeta>")),d=i.length+o.length+l.length+s.length+c.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+d+" >>"),this.internal.write("stream"),this.internal.write(s+i+o+l+c),this.internal.write("endstream"),this.internal.write("endobj")},n=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};e.addMetadata=function(a,s){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:a,namespaceuri:s||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",n),this.internal.events.subscribe("postPutResources",t)),this}}(It.API),function(e){var t=e.API,n=t.pdfEscape16=function(i,o){for(var l,c=o.metadata.Unicode.widths,d=["","0","00","000","0000"],f=[""],u=0,m=i.length;u<m;++u){if(l=o.metadata.characterToGlyph(i.charCodeAt(u)),o.metadata.glyIdsUsed.push(l),o.metadata.toUnicode[l]=i.charCodeAt(u),c.indexOf(l)==-1&&(c.push(l),c.push([parseInt(o.metadata.widthOfGlyph(l),10)])),l=="0")return f.join("");l=l.toString(16),f.push(d[4-l.length],l)}return f.join("")},a=function(i){var o,l,c,d,f,u,m;for(f=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,c=[],u=0,m=(l=Object.keys(i).sort(function(h,x){return h-x})).length;u<m;u++)o=l[u],c.length>=100&&(f+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar`,c=[]),i[o]!==void 0&&i[o]!==null&&typeof i[o].toString=="function"&&(d=("0000"+i[o].toString(16)).slice(-4),o=("0000"+(+o).toString(16)).slice(-4),c.push("<"+o+"><"+d+">"));return c.length&&(f+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar
`),f+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};t.events.push(["putFont",function(i){(function(o){var l=o.font,c=o.out,d=o.newObject,f=o.putStream;if(l.metadata instanceof e.API.TTFFont&&l.encoding==="Identity-H"){for(var u=l.metadata.Unicode.widths,m=l.metadata.subset.encode(l.metadata.glyIdsUsed,1),h="",x=0;x<m.length;x++)h+=String.fromCharCode(m[x]);var g=d();f({data:h,addLength1:!0,objectId:g}),c("endobj");var p=d();f({data:a(l.metadata.toUnicode),addLength1:!0,objectId:p}),c("endobj");var v=d();c("<<"),c("/Type /FontDescriptor"),c("/FontName /"+hf(l.fontName)),c("/FontFile2 "+g+" 0 R"),c("/FontBBox "+e.API.PDFObject.convert(l.metadata.bbox)),c("/Flags "+l.metadata.flags),c("/StemV "+l.metadata.stemV),c("/ItalicAngle "+l.metadata.italicAngle),c("/Ascent "+l.metadata.ascender),c("/Descent "+l.metadata.decender),c("/CapHeight "+l.metadata.capHeight),c(">>"),c("endobj");var y=d();c("<<"),c("/Type /Font"),c("/BaseFont /"+hf(l.fontName)),c("/FontDescriptor "+v+" 0 R"),c("/W "+e.API.PDFObject.convert(u)),c("/CIDToGIDMap /Identity"),c("/DW 1000"),c("/Subtype /CIDFontType2"),c("/CIDSystemInfo"),c("<<"),c("/Supplement 0"),c("/Registry (Adobe)"),c("/Ordering ("+l.encoding+")"),c(">>"),c(">>"),c("endobj"),l.objectNumber=d(),c("<<"),c("/Type /Font"),c("/Subtype /Type0"),c("/ToUnicode "+p+" 0 R"),c("/BaseFont /"+hf(l.fontName)),c("/Encoding /"+l.encoding),c("/DescendantFonts ["+y+" 0 R]"),c(">>"),c("endobj"),l.isAlreadyPutted=!0}})(i)}]),t.events.push(["putFont",function(i){(function(o){var l=o.font,c=o.out,d=o.newObject,f=o.putStream;if(l.metadata instanceof e.API.TTFFont&&l.encoding==="WinAnsiEncoding"){for(var u=l.metadata.rawData,m="",h=0;h<u.length;h++)m+=String.fromCharCode(u[h]);var x=d();f({data:m,addLength1:!0,objectId:x}),c("endobj");var g=d();f({data:a(l.metadata.toUnicode),addLength1:!0,objectId:g}),c("endobj");var p=d();c("<<"),c("/Descent "+l.metadata.decender),c("/CapHeight "+l.metadata.capHeight),c("/StemV "+l.metadata.stemV),c("/Type /FontDescriptor"),c("/FontFile2 "+x+" 0 R"),c("/Flags 96"),c("/FontBBox "+e.API.PDFObject.convert(l.metadata.bbox)),c("/FontName /"+hf(l.fontName)),c("/ItalicAngle "+l.metadata.italicAngle),c("/Ascent "+l.metadata.ascender),c(">>"),c("endobj"),l.objectNumber=d();for(var v=0;v<l.metadata.hmtx.widths.length;v++)l.metadata.hmtx.widths[v]=parseInt(l.metadata.hmtx.widths[v]*(1e3/l.metadata.head.unitsPerEm));c("<</Subtype/TrueType/Type/Font/ToUnicode "+g+" 0 R/BaseFont/"+hf(l.fontName)+"/FontDescriptor "+p+" 0 R/Encoding/"+l.encoding+" /FirstChar 29 /LastChar 255 /Widths "+e.API.PDFObject.convert(l.metadata.hmtx.widths)+">>"),c("endobj"),l.isAlreadyPutted=!0}})(i)}]);var s=function(i){var o,l=i.text||"",c=i.x,d=i.y,f=i.options||{},u=i.mutex||{},m=u.pdfEscape,h=u.activeFontKey,x=u.fonts,g=h,p="",v=0,y="",b=x[g].encoding;if(x[g].encoding!=="Identity-H")return{text:l,x:c,y:d,options:f,mutex:u};for(y=l,g=h,Array.isArray(l)&&(y=l[0]),v=0;v<y.length;v+=1)x[g].metadata.hasOwnProperty("cmap")&&(o=x[g].metadata.cmap.unicode.codeMap[y[v].charCodeAt(0)]),o||y[v].charCodeAt(0)<256&&x[g].metadata.hasOwnProperty("Unicode")?p+=y[v]:p+="";var j="";return parseInt(g.slice(1))<14||b==="WinAnsiEncoding"?j=m(p,g).split("").map(function(C){return C.charCodeAt(0).toString(16)}).join(""):b==="Identity-H"&&(j=n(p,x[g])),u.isHex=!0,{text:j,x:c,y:d,options:f,mutex:u}};t.events.push(["postProcessText",function(i){var o=i.text||"",l=[],c={text:o,x:i.x,y:i.y,options:i.options,mutex:i.mutex};if(Array.isArray(o)){var d=0;for(d=0;d<o.length;d+=1)Array.isArray(o[d])&&o[d].length===3?l.push([s(Object.assign({},c,{text:o[d][0]})).text,o[d][1],o[d][2]]):l.push(s(Object.assign({},c,{text:o[d]})).text);i.text=l}else i.text=s(Object.assign({},c,{text:o})).text}])}(It),function(e){var t=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};e.existsFileInVFS=function(n){return t.call(this),this.internal.vFS[n]!==void 0},e.addFileToVFS=function(n,a){return t.call(this),this.internal.vFS[n]=a,this},e.getFileFromVFS=function(n){return t.call(this),this.internal.vFS[n]!==void 0?this.internal.vFS[n]:null}}(It.API),function(e){e.__bidiEngine__=e.prototype.__bidiEngine__=function(a){var s,i,o,l,c,d,f,u=t,m=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],h=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],x={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},g={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},p=["(",")","(","<",">","<","[","]","[","{","}","{","«","»","«","‹","›","‹","⁅","⁆","⁅","⁽","⁾","⁽","₍","₎","₍","≤","≥","≤","〈","〉","〈","﹙","﹚","﹙","﹛","﹜","﹛","﹝","﹞","﹝","﹤","﹥","﹤"],v=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),y=!1,b=0;this.__bidiEngine__={};var j=function(T){var A=T.charCodeAt(),_=A>>8,k=g[_];return k!==void 0?u[256*k+(255&A)]:_===252||_===253?"AL":v.test(_)?"L":_===8?"R":"N"},C=function(T){for(var A,_=0;_<T.length;_++){if((A=j(T.charAt(_)))==="L")return!1;if(A==="R")return!0}return!1},E=function(T,A,_,k){var L,$,M,B,U=A[k];switch(U){case"L":case"R":y=!1;break;case"N":case"AN":break;case"EN":y&&(U="AN");break;case"AL":y=!0,U="R";break;case"WS":U="N";break;case"CS":k<1||k+1>=A.length||(L=_[k-1])!=="EN"&&L!=="AN"||($=A[k+1])!=="EN"&&$!=="AN"?U="N":y&&($="AN"),U=$===L?$:"N";break;case"ES":U=(L=k>0?_[k-1]:"B")==="EN"&&k+1<A.length&&A[k+1]==="EN"?"EN":"N";break;case"ET":if(k>0&&_[k-1]==="EN"){U="EN";break}if(y){U="N";break}for(M=k+1,B=A.length;M<B&&A[M]==="ET";)M++;U=M<B&&A[M]==="EN"?"EN":"N";break;case"NSM":if(o&&!l){for(B=A.length,M=k+1;M<B&&A[M]==="NSM";)M++;if(M<B){var W=T[k],q=W>=1425&&W<=2303||W===64286;if(L=A[M],q&&(L==="R"||L==="AL")){U="R";break}}}U=k<1||(L=A[k-1])==="B"?"N":_[k-1];break;case"B":y=!1,s=!0,U=b;break;case"S":i=!0,U="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":y=!1;break;case"BN":U="N"}return U},S=function(T,A,_){var k=T.split("");return _&&N(k,_,{hiLevel:b}),k.reverse(),A&&A.reverse(),k.join("")},N=function(T,A,_){var k,L,$,M,B,U=-1,W=T.length,q=0,R=[],V=b?h:m,G=[];for(y=!1,s=!1,i=!1,L=0;L<W;L++)G[L]=j(T[L]);for($=0;$<W;$++){if(B=q,R[$]=E(T,G,R,$),k=240&(q=V[B][x[R[$]]]),q&=15,A[$]=M=V[q][5],k>0)if(k===16){for(L=U;L<$;L++)A[L]=1;U=-1}else U=-1;if(V[q][6])U===-1&&(U=$);else if(U>-1){for(L=U;L<$;L++)A[L]=M;U=-1}G[$]==="B"&&(A[$]=0),_.hiLevel|=M}i&&function(ee,re,de){for(var ue=0;ue<de;ue++)if(ee[ue]==="S"){re[ue]=b;for(var oe=ue-1;oe>=0&&ee[oe]==="WS";oe--)re[oe]=b}}(G,A,W)},I=function(T,A,_,k,L){if(!(L.hiLevel<T)){if(T===1&&b===1&&!s)return A.reverse(),void(_&&_.reverse());for(var $,M,B,U,W=A.length,q=0;q<W;){if(k[q]>=T){for(B=q+1;B<W&&k[B]>=T;)B++;for(U=q,M=B-1;U<M;U++,M--)$=A[U],A[U]=A[M],A[M]=$,_&&($=_[U],_[U]=_[M],_[M]=$);q=B}q++}}},D=function(T,A,_){var k=T.split(""),L={hiLevel:b};return _||(_=[]),N(k,_,L),function($,M,B){if(B.hiLevel!==0&&f)for(var U,W=0;W<$.length;W++)M[W]===1&&(U=p.indexOf($[W]))>=0&&($[W]=p[U+1])}(k,_,L),I(2,k,A,_,L),I(1,k,A,_,L),k.join("")};return this.__bidiEngine__.doBidiReorder=function(T,A,_){if(function(L,$){if($)for(var M=0;M<L.length;M++)$[M]=M;l===void 0&&(l=C(L)),d===void 0&&(d=C(L))}(T,A),o||!c||d)if(o&&c&&l^d)b=l?1:0,T=S(T,A,_);else if(!o&&c&&d)b=l?1:0,T=D(T,A,_),T=S(T,A);else if(!o||l||c||d){if(o&&!c&&l^d)T=S(T,A),l?(b=0,T=D(T,A,_)):(b=1,T=D(T,A,_),T=S(T,A));else if(o&&l&&!c&&d)b=1,T=D(T,A,_),T=S(T,A);else if(!o&&!c&&l^d){var k=f;l?(b=1,T=D(T,A,_),b=0,f=!1,T=D(T,A,_),f=k):(b=0,T=D(T,A,_),T=S(T,A),b=1,f=!1,T=D(T,A,_),f=k,T=S(T,A))}}else b=0,T=D(T,A,_);else b=l?1:0,T=D(T,A,_);return T},this.__bidiEngine__.setOptions=function(T){T&&(o=T.isInputVisual,c=T.isOutputVisual,l=T.isInputRtl,d=T.isOutputRtl,f=T.isSymmetricSwapping)},this.__bidiEngine__.setOptions(a),this.__bidiEngine__};var t=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],n=new e.__bidiEngine__({isInputVisual:!0});e.API.events.push(["postProcessText",function(a){var s=a.text,i=(a.x,a.y,a.options||{}),o=(a.mutex,i.lang,[]);if(i.isInputVisual=typeof i.isInputVisual!="boolean"||i.isInputVisual,n.setOptions(i),Object.prototype.toString.call(s)==="[object Array]"){var l=0;for(o=[],l=0;l<s.length;l+=1)Object.prototype.toString.call(s[l])==="[object Array]"?o.push([n.doBidiReorder(s[l][0]),s[l][1],s[l][2]]):o.push([n.doBidiReorder(s[l])]);a.text=o}else a.text=n.doBidiReorder(s);n.setOptions({isInputVisual:!0})}])}(It),It.API.TTFFont=function(){function e(t){var n;if(this.rawData=t,n=this.contents=new Wc(t),this.contents.pos=4,n.readString(4)==="ttcf")throw new Error("TTCF not supported.");n.pos=0,this.parse(),this.subset=new Jce(this),this.registerTTF()}return e.open=function(t){return new e(t)},e.prototype.parse=function(){return this.directory=new Mce(this.contents),this.head=new Bce(this),this.name=new Wce(this),this.cmap=new P8(this),this.toUnicode={},this.hhea=new zce(this),this.maxp=new Hce(this),this.hmtx=new Gce(this),this.post=new Vce(this),this.os2=new Uce(this),this.loca=new Qce(this),this.glyf=new Kce(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},e.prototype.registerTTF=function(){var t,n,a,s,i;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var o,l,c,d;for(d=[],o=0,l=(c=this.bbox).length;o<l;o++)t=c[o],d.push(Math.round(t*this.scaleFactor));return d}).call(this),this.stemV=0,this.post.exists?(a=255&(s=this.post.italic_angle),32768&(n=s>>16)&&(n=-(1+(65535^n))),this.italicAngle=+(n+"."+a)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(i=this.familyClass)===1||i===2||i===3||i===4||i===5||i===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},e.prototype.characterToGlyph=function(t){var n;return((n=this.cmap.unicode)!=null?n.codeMap[t]:void 0)||0},e.prototype.widthOfGlyph=function(t){var n;return n=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(t).advance*n},e.prototype.widthOfString=function(t,n,a){var s,i,o,l;for(o=0,i=0,l=(t=""+t).length;0<=l?i<l:i>l;i=0<=l?++i:--i)s=t.charCodeAt(i),o+=this.widthOfGlyph(this.characterToGlyph(s))+a*(1e3/n)||0;return o*(n/1e3)},e.prototype.lineHeight=function(t,n){var a;return n==null&&(n=!1),a=n?this.lineGap:0,(this.ascender+a-this.decender)/1e3*t},e}();var so,Wc=function(){function e(t){this.data=t??[],this.pos=0,this.length=this.data.length}return e.prototype.readByte=function(){return this.data[this.pos++]},e.prototype.writeByte=function(t){return this.data[this.pos++]=t},e.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},e.prototype.writeUInt32=function(t){return this.writeByte(t>>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt32=function(){var t;return(t=this.readUInt32())>=2147483648?t-4294967296:t},e.prototype.writeInt32=function(t){return t<0&&(t+=4294967296),this.writeUInt32(t)},e.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},e.prototype.writeUInt16=function(t){return this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt16=function(){var t;return(t=this.readUInt16())>=32768?t-65536:t},e.prototype.writeInt16=function(t){return t<0&&(t+=65536),this.writeUInt16(t)},e.prototype.readString=function(t){var n,a;for(a=[],n=0;0<=t?n<t:n>t;n=0<=t?++n:--n)a[n]=String.fromCharCode(this.readByte());return a.join("")},e.prototype.writeString=function(t){var n,a,s;for(s=[],n=0,a=t.length;0<=a?n<a:n>a;n=0<=a?++n:--n)s.push(this.writeByte(t.charCodeAt(n)));return s},e.prototype.readShort=function(){return this.readInt16()},e.prototype.writeShort=function(t){return this.writeInt16(t)},e.prototype.readLongLong=function(){var t,n,a,s,i,o,l,c;return t=this.readByte(),n=this.readByte(),a=this.readByte(),s=this.readByte(),i=this.readByte(),o=this.readByte(),l=this.readByte(),c=this.readByte(),128&t?-1*(72057594037927940*(255^t)+281474976710656*(255^n)+1099511627776*(255^a)+4294967296*(255^s)+16777216*(255^i)+65536*(255^o)+256*(255^l)+(255^c)+1):72057594037927940*t+281474976710656*n+1099511627776*a+4294967296*s+16777216*i+65536*o+256*l+c},e.prototype.writeLongLong=function(t){var n,a;return n=Math.floor(t/4294967296),a=4294967295&t,this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n),this.writeByte(a>>24&255),this.writeByte(a>>16&255),this.writeByte(a>>8&255),this.writeByte(255&a)},e.prototype.readInt=function(){return this.readInt32()},e.prototype.writeInt=function(t){return this.writeInt32(t)},e.prototype.read=function(t){var n,a;for(n=[],a=0;0<=t?a<t:a>t;a=0<=t?++a:--a)n.push(this.readByte());return n},e.prototype.write=function(t){var n,a,s,i;for(i=[],a=0,s=t.length;a<s;a++)n=t[a],i.push(this.writeByte(n));return i},e}(),Mce=function(){var e;function t(n){var a,s,i;for(this.scalarType=n.readInt(),this.tableCount=n.readShort(),this.searchRange=n.readShort(),this.entrySelector=n.readShort(),this.rangeShift=n.readShort(),this.tables={},s=0,i=this.tableCount;0<=i?s<i:s>i;s=0<=i?++s:--s)a={tag:n.readString(4),checksum:n.readInt(),offset:n.readInt(),length:n.readInt()},this.tables[a.tag]=a}return t.prototype.encode=function(n){var a,s,i,o,l,c,d,f,u,m,h,x,g;for(g in h=Object.keys(n).length,c=Math.log(2),u=16*Math.floor(Math.log(h)/c),o=Math.floor(u/c),f=16*h-u,(s=new Wc).writeInt(this.scalarType),s.writeShort(h),s.writeShort(u),s.writeShort(o),s.writeShort(f),i=16*h,d=s.pos+i,l=null,x=[],n)for(m=n[g],s.writeString(g),s.writeInt(e(m)),s.writeInt(d),s.writeInt(m.length),x=x.concat(m),g==="head"&&(l=d),d+=m.length;d%4;)x.push(0),d++;return s.write(x),a=2981146554-e(s.data),s.pos=l+8,s.writeUInt32(a),s.data},e=function(n){var a,s,i,o;for(n=T8.call(n);n.length%4;)n.push(0);for(i=new Wc(n),s=0,a=0,o=n.length;a<o;a=a+=4)s+=i.readUInt32();return 4294967295&s},t}(),$ce={}.hasOwnProperty,qo=function(e,t){for(var n in t)$ce.call(t,n)&&(e[n]=t[n]);function a(){this.constructor=e}return a.prototype=t.prototype,e.prototype=new a,e.__super__=t.prototype,e};so=function(){function e(t){var n;this.file=t,n=this.file.directory.tables[this.tag],this.exists=!!n,n&&(this.offset=n.offset,this.length=n.length,this.parse(this.file.contents))}return e.prototype.parse=function(){},e.prototype.encode=function(){},e.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},e}();var Bce=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return qo(t,so),t.prototype.tag="head",t.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.revision=n.readInt(),this.checkSumAdjustment=n.readInt(),this.magicNumber=n.readInt(),this.flags=n.readShort(),this.unitsPerEm=n.readShort(),this.created=n.readLongLong(),this.modified=n.readLongLong(),this.xMin=n.readShort(),this.yMin=n.readShort(),this.xMax=n.readShort(),this.yMax=n.readShort(),this.macStyle=n.readShort(),this.lowestRecPPEM=n.readShort(),this.fontDirectionHint=n.readShort(),this.indexToLocFormat=n.readShort(),this.glyphDataFormat=n.readShort()},t.prototype.encode=function(n){var a;return(a=new Wc).writeInt(this.version),a.writeInt(this.revision),a.writeInt(this.checkSumAdjustment),a.writeInt(this.magicNumber),a.writeShort(this.flags),a.writeShort(this.unitsPerEm),a.writeLongLong(this.created),a.writeLongLong(this.modified),a.writeShort(this.xMin),a.writeShort(this.yMin),a.writeShort(this.xMax),a.writeShort(this.yMax),a.writeShort(this.macStyle),a.writeShort(this.lowestRecPPEM),a.writeShort(this.fontDirectionHint),a.writeShort(n),a.writeShort(this.glyphDataFormat),a.data},t}(),sD=function(){function e(t,n){var a,s,i,o,l,c,d,f,u,m,h,x,g,p,v,y,b;switch(this.platformID=t.readUInt16(),this.encodingID=t.readShort(),this.offset=n+t.readInt(),u=t.pos,t.pos=this.offset,this.format=t.readUInt16(),this.length=t.readUInt16(),this.language=t.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(c=0;c<256;++c)this.codeMap[c]=t.readByte();break;case 4:for(h=t.readUInt16(),m=h/2,t.pos+=6,i=function(){var j,C;for(C=[],c=j=0;0<=m?j<m:j>m;c=0<=m?++j:--j)C.push(t.readUInt16());return C}(),t.pos+=2,g=function(){var j,C;for(C=[],c=j=0;0<=m?j<m:j>m;c=0<=m?++j:--j)C.push(t.readUInt16());return C}(),d=function(){var j,C;for(C=[],c=j=0;0<=m?j<m:j>m;c=0<=m?++j:--j)C.push(t.readUInt16());return C}(),f=function(){var j,C;for(C=[],c=j=0;0<=m?j<m:j>m;c=0<=m?++j:--j)C.push(t.readUInt16());return C}(),s=(this.length-t.pos+this.offset)/2,l=function(){var j,C;for(C=[],c=j=0;0<=s?j<s:j>s;c=0<=s?++j:--j)C.push(t.readUInt16());return C}(),c=v=0,b=i.length;v<b;c=++v)for(p=i[c],a=y=x=g[c];x<=p?y<=p:y>=p;a=x<=p?++y:--y)f[c]===0?o=a+d[c]:(o=l[f[c]/2+(a-x)-(m-c)]||0)!==0&&(o+=d[c]),this.codeMap[a]=65535&o}t.pos=u}return e.encode=function(t,n){var a,s,i,o,l,c,d,f,u,m,h,x,g,p,v,y,b,j,C,E,S,N,I,D,T,A,_,k,L,$,M,B,U,W,q,R,V,G,ee,re,de,ue,oe,ge,ve,xe;switch(k=new Wc,o=Object.keys(t).sort(function(Oe,ye){return Oe-ye}),n){case"macroman":for(g=0,p=function(){var Oe=[];for(x=0;x<256;++x)Oe.push(0);return Oe}(),y={0:0},i={},L=0,U=o.length;L<U;L++)y[oe=t[s=o[L]]]==null&&(y[oe]=++g),i[s]={old:t[s],new:y[t[s]]},p[s]=y[t[s]];return k.writeUInt16(1),k.writeUInt16(0),k.writeUInt32(12),k.writeUInt16(0),k.writeUInt16(262),k.writeUInt16(0),k.write(p),{charMap:i,subtable:k.data,maxGlyphID:g+1};case"unicode":for(A=[],u=[],b=0,y={},a={},v=d=null,$=0,W=o.length;$<W;$++)y[C=t[s=o[$]]]==null&&(y[C]=++b),a[s]={old:C,new:y[C]},l=y[C]-s,v!=null&&l===d||(v&&u.push(v),A.push(s),d=l),v=s;for(v&&u.push(v),u.push(65535),A.push(65535),D=2*(I=A.length),N=2*Math.pow(Math.log(I)/Math.LN2,2),m=Math.log(N/2)/Math.LN2,S=2*I-N,c=[],E=[],h=[],x=M=0,q=A.length;M<q;x=++M){if(T=A[x],f=u[x],T===65535){c.push(0),E.push(0);break}if(T-(_=a[T].new)>=32768)for(c.push(0),E.push(2*(h.length+I-x)),s=B=T;T<=f?B<=f:B>=f;s=T<=f?++B:--B)h.push(a[s].new);else c.push(_-T),E.push(0)}for(k.writeUInt16(3),k.writeUInt16(1),k.writeUInt32(12),k.writeUInt16(4),k.writeUInt16(16+8*I+2*h.length),k.writeUInt16(0),k.writeUInt16(D),k.writeUInt16(N),k.writeUInt16(m),k.writeUInt16(S),de=0,R=u.length;de<R;de++)s=u[de],k.writeUInt16(s);for(k.writeUInt16(0),ue=0,V=A.length;ue<V;ue++)s=A[ue],k.writeUInt16(s);for(ge=0,G=c.length;ge<G;ge++)l=c[ge],k.writeUInt16(l);for(ve=0,ee=E.length;ve<ee;ve++)j=E[ve],k.writeUInt16(j);for(xe=0,re=h.length;xe<re;xe++)g=h[xe],k.writeUInt16(g);return{charMap:a,subtable:k.data,maxGlyphID:b+1}}},e}(),P8=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return qo(t,so),t.prototype.tag="cmap",t.prototype.parse=function(n){var a,s,i;for(n.pos=this.offset,this.version=n.readUInt16(),i=n.readUInt16(),this.tables=[],this.unicode=null,s=0;0<=i?s<i:s>i;s=0<=i?++s:--s)a=new sD(n,this.offset),this.tables.push(a),a.isUnicode&&this.unicode==null&&(this.unicode=a);return!0},t.encode=function(n,a){var s,i;return a==null&&(a="macroman"),s=sD.encode(n,a),(i=new Wc).writeUInt16(0),i.writeUInt16(1),s.table=i.data.concat(s.subtable),s},t}(),zce=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return qo(t,so),t.prototype.tag="hhea",t.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.ascender=n.readShort(),this.decender=n.readShort(),this.lineGap=n.readShort(),this.advanceWidthMax=n.readShort(),this.minLeftSideBearing=n.readShort(),this.minRightSideBearing=n.readShort(),this.xMaxExtent=n.readShort(),this.caretSlopeRise=n.readShort(),this.caretSlopeRun=n.readShort(),this.caretOffset=n.readShort(),n.pos+=8,this.metricDataFormat=n.readShort(),this.numberOfMetrics=n.readUInt16()},t}(),Uce=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return qo(t,so),t.prototype.tag="OS/2",t.prototype.parse=function(n){if(n.pos=this.offset,this.version=n.readUInt16(),this.averageCharWidth=n.readShort(),this.weightClass=n.readUInt16(),this.widthClass=n.readUInt16(),this.type=n.readShort(),this.ySubscriptXSize=n.readShort(),this.ySubscriptYSize=n.readShort(),this.ySubscriptXOffset=n.readShort(),this.ySubscriptYOffset=n.readShort(),this.ySuperscriptXSize=n.readShort(),this.ySuperscriptYSize=n.readShort(),this.ySuperscriptXOffset=n.readShort(),this.ySuperscriptYOffset=n.readShort(),this.yStrikeoutSize=n.readShort(),this.yStrikeoutPosition=n.readShort(),this.familyClass=n.readShort(),this.panose=function(){var a,s;for(s=[],a=0;a<10;++a)s.push(n.readByte());return s}(),this.charRange=function(){var a,s;for(s=[],a=0;a<4;++a)s.push(n.readInt());return s}(),this.vendorID=n.readString(4),this.selection=n.readShort(),this.firstCharIndex=n.readShort(),this.lastCharIndex=n.readShort(),this.version>0&&(this.ascent=n.readShort(),this.descent=n.readShort(),this.lineGap=n.readShort(),this.winAscent=n.readShort(),this.winDescent=n.readShort(),this.codePageRange=function(){var a,s;for(s=[],a=0;a<2;a=++a)s.push(n.readInt());return s}(),this.version>1))return this.xHeight=n.readShort(),this.capHeight=n.readShort(),this.defaultChar=n.readShort(),this.breakChar=n.readShort(),this.maxContext=n.readShort()},t}(),Vce=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return qo(t,so),t.prototype.tag="post",t.prototype.parse=function(n){var a,s,i;switch(n.pos=this.offset,this.format=n.readInt(),this.italicAngle=n.readInt(),this.underlinePosition=n.readShort(),this.underlineThickness=n.readShort(),this.isFixedPitch=n.readInt(),this.minMemType42=n.readInt(),this.maxMemType42=n.readInt(),this.minMemType1=n.readInt(),this.maxMemType1=n.readInt(),this.format){case 65536:break;case 131072:var o;for(s=n.readUInt16(),this.glyphNameIndex=[],o=0;0<=s?o<s:o>s;o=0<=s?++o:--o)this.glyphNameIndex.push(n.readUInt16());for(this.names=[],i=[];n.pos<this.offset+this.length;)a=n.readByte(),i.push(this.names.push(n.readString(a)));return i;case 151552:return s=n.readUInt16(),this.offsets=n.read(s);case 196608:break;case 262144:return this.map=(function(){var l,c,d;for(d=[],o=l=0,c=this.file.maxp.numGlyphs;0<=c?l<c:l>c;o=0<=c?++l:--l)d.push(n.readUInt32());return d}).call(this)}},t}(),qce=function(e,t){this.raw=e,this.length=e.length,this.platformID=t.platformID,this.encodingID=t.encodingID,this.languageID=t.languageID},Wce=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return qo(t,so),t.prototype.tag="name",t.prototype.parse=function(n){var a,s,i,o,l,c,d,f,u,m,h;for(n.pos=this.offset,n.readShort(),a=n.readShort(),c=n.readShort(),s=[],o=0;0<=a?o<a:o>a;o=0<=a?++o:--o)s.push({platformID:n.readShort(),encodingID:n.readShort(),languageID:n.readShort(),nameID:n.readShort(),length:n.readShort(),offset:this.offset+c+n.readShort()});for(d={},o=u=0,m=s.length;u<m;o=++u)i=s[o],n.pos=i.offset,f=n.readString(i.length),l=new qce(f,i),d[h=i.nameID]==null&&(d[h]=[]),d[i.nameID].push(l);this.strings=d,this.copyright=d[0],this.fontFamily=d[1],this.fontSubfamily=d[2],this.uniqueSubfamily=d[3],this.fontName=d[4],this.version=d[5];try{this.postscriptName=d[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=d[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=d[7],this.manufacturer=d[8],this.designer=d[9],this.description=d[10],this.vendorUrl=d[11],this.designerUrl=d[12],this.license=d[13],this.licenseUrl=d[14],this.preferredFamily=d[15],this.preferredSubfamily=d[17],this.compatibleFull=d[18],this.sampleText=d[19]},t}(),Hce=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return qo(t,so),t.prototype.tag="maxp",t.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.numGlyphs=n.readUInt16(),this.maxPoints=n.readUInt16(),this.maxContours=n.readUInt16(),this.maxCompositePoints=n.readUInt16(),this.maxComponentContours=n.readUInt16(),this.maxZones=n.readUInt16(),this.maxTwilightPoints=n.readUInt16(),this.maxStorage=n.readUInt16(),this.maxFunctionDefs=n.readUInt16(),this.maxInstructionDefs=n.readUInt16(),this.maxStackElements=n.readUInt16(),this.maxSizeOfInstructions=n.readUInt16(),this.maxComponentElements=n.readUInt16(),this.maxComponentDepth=n.readUInt16()},t}(),Gce=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return qo(t,so),t.prototype.tag="hmtx",t.prototype.parse=function(n){var a,s,i,o,l,c,d;for(n.pos=this.offset,this.metrics=[],a=0,c=this.file.hhea.numberOfMetrics;0<=c?a<c:a>c;a=0<=c?++a:--a)this.metrics.push({advance:n.readUInt16(),lsb:n.readInt16()});for(i=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var f,u;for(u=[],a=f=0;0<=i?f<i:f>i;a=0<=i?++f:--f)u.push(n.readInt16());return u}(),this.widths=(function(){var f,u,m,h;for(h=[],f=0,u=(m=this.metrics).length;f<u;f++)o=m[f],h.push(o.advance);return h}).call(this),s=this.widths[this.widths.length-1],d=[],a=l=0;0<=i?l<i:l>i;a=0<=i?++l:--l)d.push(this.widths.push(s));return d},t.prototype.forGlyph=function(n){return n in this.metrics?this.metrics[n]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[n-this.metrics.length]}},t}(),T8=[].slice,Kce=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return qo(t,so),t.prototype.tag="glyf",t.prototype.parse=function(){return this.cache={}},t.prototype.glyphFor=function(n){var a,s,i,o,l,c,d,f,u,m;return n in this.cache?this.cache[n]:(o=this.file.loca,a=this.file.contents,s=o.indexOf(n),(i=o.lengthOf(n))===0?this.cache[n]=null:(a.pos=this.offset+s,l=(c=new Wc(a.read(i))).readShort(),f=c.readShort(),m=c.readShort(),d=c.readShort(),u=c.readShort(),this.cache[n]=l===-1?new Xce(c,f,m,d,u):new Yce(c,l,f,m,d,u),this.cache[n]))},t.prototype.encode=function(n,a,s){var i,o,l,c,d;for(l=[],o=[],c=0,d=a.length;c<d;c++)i=n[a[c]],o.push(l.length),i&&(l=l.concat(i.encode(s)));return o.push(l.length),{table:l,offsets:o}},t}(),Yce=function(){function e(t,n,a,s,i,o){this.raw=t,this.numberOfContours=n,this.xMin=a,this.yMin=s,this.xMax=i,this.yMax=o,this.compound=!1}return e.prototype.encode=function(){return this.raw.data},e}(),Xce=function(){function e(t,n,a,s,i){var o,l;for(this.raw=t,this.xMin=n,this.yMin=a,this.xMax=s,this.yMax=i,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],o=this.raw;l=o.readShort(),this.glyphOffsets.push(o.pos),this.glyphIDs.push(o.readUInt16()),32&l;)o.pos+=1&l?4:2,128&l?o.pos+=8:64&l?o.pos+=4:8&l&&(o.pos+=2)}return e.prototype.encode=function(){var t,n,a;for(n=new Wc(T8.call(this.raw.data)),t=0,a=this.glyphIDs.length;t<a;++t)n.pos=this.glyphOffsets[t];return n.data},e}(),Qce=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return qo(t,so),t.prototype.tag="loca",t.prototype.parse=function(n){var a,s;return n.pos=this.offset,a=this.file.head.indexToLocFormat,this.offsets=a===0?(function(){var i,o;for(o=[],s=0,i=this.length;s<i;s+=2)o.push(2*n.readUInt16());return o}).call(this):(function(){var i,o;for(o=[],s=0,i=this.length;s<i;s+=4)o.push(n.readUInt32());return o}).call(this)},t.prototype.indexOf=function(n){return this.offsets[n]},t.prototype.lengthOf=function(n){return this.offsets[n+1]-this.offsets[n]},t.prototype.encode=function(n,a){for(var s=new Uint32Array(this.offsets.length),i=0,o=0,l=0;l<s.length;++l)if(s[l]=i,o<a.length&&a[o]==l){++o,s[l]=i;var c=this.offsets[l],d=this.offsets[l+1]-c;d>0&&(i+=d)}for(var f=new Array(4*s.length),u=0;u<s.length;++u)f[4*u+3]=255&s[u],f[4*u+2]=(65280&s[u])>>8,f[4*u+1]=(16711680&s[u])>>16,f[4*u]=(4278190080&s[u])>>24;return f},t}(),Jce=function(){function e(t){this.font=t,this.subset={},this.unicodes={},this.next=33}return e.prototype.generateCmap=function(){var t,n,a,s,i;for(n in s=this.font.cmap.tables[0].codeMap,t={},i=this.subset)a=i[n],t[n]=s[a];return t},e.prototype.glyphsFor=function(t){var n,a,s,i,o,l,c;for(s={},o=0,l=t.length;o<l;o++)s[i=t[o]]=this.font.glyf.glyphFor(i);for(i in n=[],s)(a=s[i])!=null&&a.compound&&n.push.apply(n,a.glyphIDs);if(n.length>0)for(i in c=this.glyphsFor(n))a=c[i],s[i]=a;return s},e.prototype.encode=function(t,n){var a,s,i,o,l,c,d,f,u,m,h,x,g,p,v;for(s in a=P8.encode(this.generateCmap(),"unicode"),o=this.glyphsFor(t),h={0:0},v=a.charMap)h[(c=v[s]).old]=c.new;for(x in m=a.maxGlyphID,o)x in h||(h[x]=m++);return f=function(y){var b,j;for(b in j={},y)j[y[b]]=b;return j}(h),u=Object.keys(f).sort(function(y,b){return y-b}),g=function(){var y,b,j;for(j=[],y=0,b=u.length;y<b;y++)l=u[y],j.push(f[l]);return j}(),i=this.font.glyf.encode(o,g,h),d=this.font.loca.encode(i.offsets,g),p={cmap:this.font.cmap.raw(),glyf:i.table,loca:d,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(n)},this.font.os2.exists&&(p["OS/2"]=this.font.os2.raw()),this.font.directory.encode(p)},e}();It.API.PDFObject=function(){var e;function t(){}return e=function(n,a){return(Array(a+1).join("0")+n).slice(-a)},t.convert=function(n){var a,s,i,o;if(Array.isArray(n))return"["+function(){var l,c,d;for(d=[],l=0,c=n.length;l<c;l++)a=n[l],d.push(t.convert(a));return d}().join(" ")+"]";if(typeof n=="string")return"/"+n;if(n!=null&&n.isString)return"("+n+")";if(n instanceof Date)return"(D:"+e(n.getUTCFullYear(),4)+e(n.getUTCMonth(),2)+e(n.getUTCDate(),2)+e(n.getUTCHours(),2)+e(n.getUTCMinutes(),2)+e(n.getUTCSeconds(),2)+"Z)";if({}.toString.call(n)==="[object Object]"){for(s in i=["<<"],n)o=n[s],i.push("/"+s+" "+t.convert(o));return i.push(">>"),i.join(`
`)}return""+n},t}();const Zce=Object.freeze(Object.defineProperty({__proto__:null,AcroForm:Ice,AcroFormAppearance:wt,AcroFormButton:Kn,AcroFormCheckBox:Op,AcroFormChoiceField:Wd,AcroFormComboBox:Gd,AcroFormEditBox:Dp,AcroFormListBox:Hd,AcroFormPasswordField:_p,AcroFormPushButton:kp,AcroFormRadioButton:Kd,AcroFormTextField:Oc,GState:pv,ShadingPattern:uc,TilingPattern:_d,default:It,jsPDF:It},Symbol.toStringTag,{value:"Module"}));var ede={exports:{}};const tde=GU(Zce);/*!
 * 
 *               jsPDF AutoTable plugin v3.8.4
 *
 *               Copyright (c) 2024 Simon Bengtsson, https://github.com/simonbengtsson/jsPDF-AutoTable
 *               Licensed under the MIT License.
 *               http://opensource.org/licenses/mit-license
 *
 */(function(e,t){(function(a,s){e.exports=s(function(){try{return tde}catch{}}())})(typeof globalThis<"u"?globalThis:typeof fc<"u"?fc:typeof window<"u"?window:typeof self<"u"?self:fc,function(n){return function(){var a={172:function(l,c){var d=this&&this.__extends||function(){var m=function(h,x){return m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,p){g.__proto__=p}||function(g,p){for(var v in p)Object.prototype.hasOwnProperty.call(p,v)&&(g[v]=p[v])},m(h,x)};return function(h,x){if(typeof x!="function"&&x!==null)throw new TypeError("Class extends value "+String(x)+" is not a constructor or null");m(h,x);function g(){this.constructor=h}h.prototype=x===null?Object.create(x):(g.prototype=x.prototype,new g)}}();Object.defineProperty(c,"__esModule",{value:!0}),c.CellHookData=c.HookData=void 0;var f=function(){function m(h,x,g){this.table=x,this.pageNumber=x.pageNumber,this.pageCount=this.pageNumber,this.settings=x.settings,this.cursor=g,this.doc=h.getDocument()}return m}();c.HookData=f;var u=function(m){d(h,m);function h(x,g,p,v,y,b){var j=m.call(this,x,g,b)||this;return j.cell=p,j.row=v,j.column=y,j.section=v.section,j}return h}(f);c.CellHookData=u},340:function(l,c,d){Object.defineProperty(c,"__esModule",{value:!0});var f=d(4),u=d(136),m=d(744),h=d(776),x=d(664),g=d(972);function p(v){v.API.autoTable=function(){for(var y=[],b=0;b<arguments.length;b++)y[b]=arguments[b];var j;y.length===1?j=y[0]:(console.error("Use of deprecated autoTable initiation"),j=y[2]||{},j.columns=y[0],j.body=y[1]);var C=(0,h.parseInput)(this,j),E=(0,g.createTable)(this,C);return(0,x.drawTable)(this,E),this},v.API.lastAutoTable=!1,v.API.previousAutoTable=!1,v.API.autoTable.previous=!1,v.API.autoTableText=function(y,b,j,C){(0,u.default)(y,b,j,C,this)},v.API.autoTableSetDefaults=function(y){return m.DocHandler.setDefaults(y,this),this},v.autoTableSetDefaults=function(y,b){m.DocHandler.setDefaults(y,b)},v.API.autoTableHtmlToJson=function(y,b){var j;if(b===void 0&&(b=!1),typeof window>"u")return console.error("Cannot run autoTableHtmlToJson in non browser environment"),null;var C=new m.DocHandler(this),E=(0,f.parseHtml)(C,y,window,b,!1),S=E.head,N=E.body,I=((j=S[0])===null||j===void 0?void 0:j.map(function(D){return D.content}))||[];return{columns:I,rows:N,data:N}},v.API.autoTableEndPosY=function(){console.error("Use of deprecated function: autoTableEndPosY. Use doc.lastAutoTable.finalY instead.");var y=this.lastAutoTable;return y&&y.finalY?y.finalY:0},v.API.autoTableAddPageContent=function(y){return console.error("Use of deprecated function: autoTableAddPageContent. Use jsPDF.autoTableSetDefaults({didDrawPage: () => {}}) instead."),v.API.autoTable.globalDefaults||(v.API.autoTable.globalDefaults={}),v.API.autoTable.globalDefaults.addPageContent=y,this},v.API.autoTableAddPage=function(){return console.error("Use of deprecated function: autoTableAddPage. Use doc.addPage()"),this.addPage(),this}}c.default=p},136:function(l,c){Object.defineProperty(c,"__esModule",{value:!0});function d(f,u,m,h,x){h=h||{};var g=1.15,p=x.internal.scaleFactor,v=x.internal.getFontSize()/p,y=x.getLineHeightFactor?x.getLineHeightFactor():g,b=v*y,j=/\r\n|\r|\n/g,C="",E=1;if((h.valign==="middle"||h.valign==="bottom"||h.halign==="center"||h.halign==="right")&&(C=typeof f=="string"?f.split(j):f,E=C.length||1),m+=v*(2-g),h.valign==="middle"?m-=E/2*b:h.valign==="bottom"&&(m-=E*b),h.halign==="center"||h.halign==="right"){var S=v;if(h.halign==="center"&&(S*=.5),C&&E>=1){for(var N=0;N<C.length;N++)x.text(C[N],u-x.getStringUnitWidth(C[N])*S,m),m+=b;return x}u-=x.getStringUnitWidth(f)*S}return h.halign==="justify"?x.text(f,u,m,{maxWidth:h.maxWidth||100,align:"justify"}):x.text(f,u,m),x}c.default=d},420:function(l,c){Object.defineProperty(c,"__esModule",{value:!0}),c.getPageAvailableWidth=c.parseSpacing=c.getFillStyle=c.addTableBorder=c.getStringWidth=void 0;function d(x,g,p){p.applyStyles(g,!0);var v=Array.isArray(x)?x:[x],y=v.map(function(b){return p.getTextWidth(b)}).reduce(function(b,j){return Math.max(b,j)},0);return y}c.getStringWidth=d;function f(x,g,p,v){var y=g.settings.tableLineWidth,b=g.settings.tableLineColor;x.applyStyles({lineWidth:y,lineColor:b});var j=u(y,!1);j&&x.rect(p.x,p.y,g.getWidth(x.pageSize().width),v.y-p.y,j)}c.addTableBorder=f;function u(x,g){var p=x>0,v=g||g===0;return p&&v?"DF":p?"S":v?"F":null}c.getFillStyle=u;function m(x,g){var p,v,y,b;if(x=x||g,Array.isArray(x)){if(x.length>=4)return{top:x[0],right:x[1],bottom:x[2],left:x[3]};if(x.length===3)return{top:x[0],right:x[1],bottom:x[2],left:x[1]};if(x.length===2)return{top:x[0],right:x[1],bottom:x[0],left:x[1]};x.length===1?x=x[0]:x=g}return typeof x=="object"?(typeof x.vertical=="number"&&(x.top=x.vertical,x.bottom=x.vertical),typeof x.horizontal=="number"&&(x.right=x.horizontal,x.left=x.horizontal),{left:(p=x.left)!==null&&p!==void 0?p:g,top:(v=x.top)!==null&&v!==void 0?v:g,right:(y=x.right)!==null&&y!==void 0?y:g,bottom:(b=x.bottom)!==null&&b!==void 0?b:g}):(typeof x!="number"&&(x=g),{top:x,right:x,bottom:x,left:x})}c.parseSpacing=m;function h(x,g){var p=m(g.settings.margin,0);return x.pageSize().width-(p.left+p.right)}c.getPageAvailableWidth=h},796:function(l,c){var d=this&&this.__extends||function(){var h=function(x,g){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,v){p.__proto__=v}||function(p,v){for(var y in v)Object.prototype.hasOwnProperty.call(v,y)&&(p[y]=v[y])},h(x,g)};return function(x,g){if(typeof g!="function"&&g!==null)throw new TypeError("Class extends value "+String(g)+" is not a constructor or null");h(x,g);function p(){this.constructor=x}x.prototype=g===null?Object.create(g):(p.prototype=g.prototype,new p)}}();Object.defineProperty(c,"__esModule",{value:!0}),c.getTheme=c.defaultStyles=c.HtmlRowInput=void 0;var f=function(h){d(x,h);function x(g){var p=h.call(this)||this;return p._element=g,p}return x}(Array);c.HtmlRowInput=f;function u(h){return{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/h,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0}}c.defaultStyles=u;function m(h){var x={striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}};return x[h]}c.getTheme=m},903:function(l,c,d){Object.defineProperty(c,"__esModule",{value:!0}),c.parseCss=void 0;var f=d(420);function u(p,v,y,b,j){var C={},E=1.3333333333333333,S=h(v,function(U){return j.getComputedStyle(U).backgroundColor});S!=null&&(C.fillColor=S);var N=h(v,function(U){return j.getComputedStyle(U).color});N!=null&&(C.textColor=N);var I=g(b,y);I&&(C.cellPadding=I);var D="borderTopColor",T=E*y,A=b.borderTopWidth;if(b.borderBottomWidth===A&&b.borderRightWidth===A&&b.borderLeftWidth===A){var _=(parseFloat(A)||0)/T;_&&(C.lineWidth=_)}else C.lineWidth={top:(parseFloat(b.borderTopWidth)||0)/T,right:(parseFloat(b.borderRightWidth)||0)/T,bottom:(parseFloat(b.borderBottomWidth)||0)/T,left:(parseFloat(b.borderLeftWidth)||0)/T},C.lineWidth.top||(C.lineWidth.right?D="borderRightColor":C.lineWidth.bottom?D="borderBottomColor":C.lineWidth.left&&(D="borderLeftColor"));var k=h(v,function(U){return j.getComputedStyle(U)[D]});k!=null&&(C.lineColor=k);var L=["left","right","center","justify"];L.indexOf(b.textAlign)!==-1&&(C.halign=b.textAlign),L=["middle","bottom","top"],L.indexOf(b.verticalAlign)!==-1&&(C.valign=b.verticalAlign);var $=parseInt(b.fontSize||"");isNaN($)||(C.fontSize=$/E);var M=m(b);M&&(C.fontStyle=M);var B=(b.fontFamily||"").toLowerCase();return p.indexOf(B)!==-1&&(C.font=B),C}c.parseCss=u;function m(p){var v="";return(p.fontWeight==="bold"||p.fontWeight==="bolder"||parseInt(p.fontWeight)>=700)&&(v="bold"),(p.fontStyle==="italic"||p.fontStyle==="oblique")&&(v+="italic"),v}function h(p,v){var y=x(p,v);if(!y)return null;var b=y.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!b||!Array.isArray(b))return null;var j=[parseInt(b[1]),parseInt(b[2]),parseInt(b[3])],C=parseInt(b[4]);return C===0||isNaN(j[0])||isNaN(j[1])||isNaN(j[2])?null:j}function x(p,v){var y=v(p);return y==="rgba(0, 0, 0, 0)"||y==="transparent"||y==="initial"||y==="inherit"?p.parentElement==null?null:x(p.parentElement,v):y}function g(p,v){var y=[p.paddingTop,p.paddingRight,p.paddingBottom,p.paddingLeft],b=96/(72/v),j=(parseInt(p.lineHeight)-parseInt(p.fontSize))/v/2,C=y.map(function(S){return parseInt(S||"0")/b}),E=(0,f.parseSpacing)(C,0);return j>E.top&&(E.top=j),j>E.bottom&&(E.bottom=j),E}},744:function(l,c){Object.defineProperty(c,"__esModule",{value:!0}),c.DocHandler=void 0;var d={},f=function(){function u(m){this.jsPDFDocument=m,this.userStyles={textColor:m.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:m.internal.getFontSize(),fontStyle:m.internal.getFont().fontStyle,font:m.internal.getFont().fontName,lineWidth:m.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:m.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return u.setDefaults=function(m,h){h===void 0&&(h=null),h?h.__autoTableDocumentDefaults=m:d=m},u.unifyColor=function(m){return Array.isArray(m)?m:typeof m=="number"?[m,m,m]:typeof m=="string"?[m]:null},u.prototype.applyStyles=function(m,h){var x,g,p;h===void 0&&(h=!1),m.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(m.fontStyle);var v=this.jsPDFDocument.internal.getFont(),y=v.fontStyle,b=v.fontName;if(m.font&&(b=m.font),m.fontStyle){y=m.fontStyle;var j=this.getFontList()[b];j&&j.indexOf(y)===-1&&(this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(j[0]),y=j[0])}if(this.jsPDFDocument.setFont(b,y),m.fontSize&&this.jsPDFDocument.setFontSize(m.fontSize),!h){var C=u.unifyColor(m.fillColor);C&&(x=this.jsPDFDocument).setFillColor.apply(x,C),C=u.unifyColor(m.textColor),C&&(g=this.jsPDFDocument).setTextColor.apply(g,C),C=u.unifyColor(m.lineColor),C&&(p=this.jsPDFDocument).setDrawColor.apply(p,C),typeof m.lineWidth=="number"&&this.jsPDFDocument.setLineWidth(m.lineWidth)}},u.prototype.splitTextToSize=function(m,h,x){return this.jsPDFDocument.splitTextToSize(m,h,x)},u.prototype.rect=function(m,h,x,g,p){return this.jsPDFDocument.rect(m,h,x,g,p)},u.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},u.prototype.getTextWidth=function(m){return this.jsPDFDocument.getTextWidth(m)},u.prototype.getDocument=function(){return this.jsPDFDocument},u.prototype.setPage=function(m){this.jsPDFDocument.setPage(m)},u.prototype.addPage=function(){return this.jsPDFDocument.addPage()},u.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},u.prototype.getGlobalOptions=function(){return d||{}},u.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},u.prototype.pageSize=function(){var m=this.jsPDFDocument.internal.pageSize;return m.width==null&&(m={width:m.getWidth(),height:m.getHeight()}),m},u.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},u.prototype.getLineHeightFactor=function(){var m=this.jsPDFDocument;return m.getLineHeightFactor?m.getLineHeightFactor():1.15},u.prototype.getLineHeight=function(m){return m/this.scaleFactor()*this.getLineHeightFactor()},u.prototype.pageNumber=function(){var m=this.jsPDFDocument.internal.getCurrentPageInfo();return m?m.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},u}();c.DocHandler=f},4:function(l,c,d){Object.defineProperty(c,"__esModule",{value:!0}),c.parseHtml=void 0;var f=d(903),u=d(796);function m(g,p,v,y,b){var j,C;y===void 0&&(y=!1),b===void 0&&(b=!1);var E;typeof p=="string"?E=v.document.querySelector(p):E=p;var S=Object.keys(g.getFontList()),N=g.scaleFactor(),I=[],D=[],T=[];if(!E)return console.error("Html table could not be found with input: ",p),{head:I,body:D,foot:T};for(var A=0;A<E.rows.length;A++){var _=E.rows[A],k=(C=(j=_==null?void 0:_.parentElement)===null||j===void 0?void 0:j.tagName)===null||C===void 0?void 0:C.toLowerCase(),L=h(S,N,v,_,y,b);L&&(k==="thead"?I.push(L):k==="tfoot"?T.push(L):D.push(L))}return{head:I,body:D,foot:T}}c.parseHtml=m;function h(g,p,v,y,b,j){for(var C=new u.HtmlRowInput(y),E=0;E<y.cells.length;E++){var S=y.cells[E],N=v.getComputedStyle(S);if(b||N.display!=="none"){var I=void 0;j&&(I=(0,f.parseCss)(g,S,p,N,v)),C.push({rowSpan:S.rowSpan,colSpan:S.colSpan,styles:I,_element:S,content:x(S)})}}var D=v.getComputedStyle(y);if(C.length>0&&(b||D.display!=="none"))return C}function x(g){var p=g.cloneNode(!0);return p.innerHTML=p.innerHTML.replace(/\n/g,"").replace(/ +/g," "),p.innerHTML=p.innerHTML.split(/<br.*?>/).map(function(v){return v.trim()}).join(`
`),p.innerText||p.textContent||""}},776:function(l,c,d){Object.defineProperty(c,"__esModule",{value:!0}),c.parseInput=void 0;var f=d(4),u=d(356),m=d(420),h=d(744),x=d(792);function g(E,S){var N=new h.DocHandler(E),I=N.getDocumentOptions(),D=N.getGlobalOptions();(0,x.default)(N,D,I,S);var T=(0,u.assign)({},D,I,S),A;typeof window<"u"&&(A=window);var _=p(D,I,S),k=v(D,I,S),L=y(N,T),$=j(N,T,A);return{id:S.tableId,content:$,hooks:k,styles:_,settings:L}}c.parseInput=g;function p(E,S,N){for(var I={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},D=function(k){if(k==="columnStyles"){var L=E[k],$=S[k],M=N[k];I.columnStyles=(0,u.assign)({},L,$,M)}else{var B=[E,S,N],U=B.map(function(W){return W[k]||{}});I[k]=(0,u.assign)({},U[0],U[1],U[2])}},T=0,A=Object.keys(I);T<A.length;T++){var _=A[T];D(_)}return I}function v(E,S,N){for(var I=[E,S,N],D={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},T=0,A=I;T<A.length;T++){var _=A[T];_.didParseCell&&D.didParseCell.push(_.didParseCell),_.willDrawCell&&D.willDrawCell.push(_.willDrawCell),_.didDrawCell&&D.didDrawCell.push(_.didDrawCell),_.willDrawPage&&D.willDrawPage.push(_.willDrawPage),_.didDrawPage&&D.didDrawPage.push(_.didDrawPage)}return D}function y(E,S){var N,I,D,T,A,_,k,L,$,M,B,U,W=(0,m.parseSpacing)(S.margin,40/E.scaleFactor()),q=(N=b(E,S.startY))!==null&&N!==void 0?N:W.top,R;S.showFoot===!0?R="everyPage":S.showFoot===!1?R="never":R=(I=S.showFoot)!==null&&I!==void 0?I:"everyPage";var V;S.showHead===!0?V="everyPage":S.showHead===!1?V="never":V=(D=S.showHead)!==null&&D!==void 0?D:"everyPage";var G=(T=S.useCss)!==null&&T!==void 0?T:!1,ee=S.theme||(G?"plain":"striped"),re=!!S.horizontalPageBreak,de=(A=S.horizontalPageBreakRepeat)!==null&&A!==void 0?A:null;return{includeHiddenHtml:(_=S.includeHiddenHtml)!==null&&_!==void 0?_:!1,useCss:G,theme:ee,startY:q,margin:W,pageBreak:(k=S.pageBreak)!==null&&k!==void 0?k:"auto",rowPageBreak:(L=S.rowPageBreak)!==null&&L!==void 0?L:"auto",tableWidth:($=S.tableWidth)!==null&&$!==void 0?$:"auto",showHead:V,showFoot:R,tableLineWidth:(M=S.tableLineWidth)!==null&&M!==void 0?M:0,tableLineColor:(B=S.tableLineColor)!==null&&B!==void 0?B:200,horizontalPageBreak:re,horizontalPageBreakRepeat:de,horizontalPageBreakBehaviour:(U=S.horizontalPageBreakBehaviour)!==null&&U!==void 0?U:"afterAllRows"}}function b(E,S){var N=E.getLastAutoTable(),I=E.scaleFactor(),D=E.pageNumber(),T=!1;if(N&&N.startPageNumber){var A=N.startPageNumber+N.pageNumber-1;T=A===D}return typeof S=="number"?S:(S==null||S===!1)&&T&&(N==null?void 0:N.finalY)!=null?N.finalY+20/I:null}function j(E,S,N){var I=S.head||[],D=S.body||[],T=S.foot||[];if(S.html){var A=S.includeHiddenHtml;if(N){var _=(0,f.parseHtml)(E,S.html,N,A,S.useCss)||{};I=_.head||I,D=_.body||I,T=_.foot||I}else console.error("Cannot parse html in non browser environment")}var k=S.columns||C(I,D,T);return{columns:k,head:I,body:D,foot:T}}function C(E,S,N){var I=E[0]||S[0]||N[0]||[],D=[];return Object.keys(I).filter(function(T){return T!=="_element"}).forEach(function(T){var A=1,_;Array.isArray(I)?_=I[parseInt(T)]:_=I[T],typeof _=="object"&&!Array.isArray(_)&&(A=(_==null?void 0:_.colSpan)||1);for(var k=0;k<A;k++){var L=void 0;Array.isArray(I)?L=D.length:L=T+(k>0?"_".concat(k):"");var $={dataKey:L};D.push($)}}),D}},792:function(l,c){Object.defineProperty(c,"__esModule",{value:!0});function d(u,m,h,x){for(var g=function(b){b&&typeof b!="object"&&console.error("The options parameter should be of type object, is: "+typeof b),typeof b.extendWidth<"u"&&(b.tableWidth=b.extendWidth?"auto":"wrap",console.error("Use of deprecated option: extendWidth, use tableWidth instead.")),typeof b.margins<"u"&&(typeof b.margin>"u"&&(b.margin=b.margins),console.error("Use of deprecated option: margins, use margin instead.")),b.startY&&typeof b.startY!="number"&&(console.error("Invalid value for startY option",b.startY),delete b.startY),!b.didDrawPage&&(b.afterPageContent||b.beforePageContent||b.afterPageAdd)&&(console.error("The afterPageContent, beforePageContent and afterPageAdd hooks are deprecated. Use didDrawPage instead"),b.didDrawPage=function(T){u.applyStyles(u.userStyles),b.beforePageContent&&b.beforePageContent(T),u.applyStyles(u.userStyles),b.afterPageContent&&b.afterPageContent(T),u.applyStyles(u.userStyles),b.afterPageAdd&&T.pageNumber>1&&T.afterPageAdd(T),u.applyStyles(u.userStyles)}),["createdHeaderCell","drawHeaderRow","drawRow","drawHeaderCell"].forEach(function(T){b[T]&&console.error('The "'.concat(T,'" hook has changed in version 3.0, check the changelog for how to migrate.'))}),[["showFoot","showFooter"],["showHead","showHeader"],["didDrawPage","addPageContent"],["didParseCell","createdCell"],["headStyles","headerStyles"]].forEach(function(T){var A=T[0],_=T[1];b[_]&&(console.error("Use of deprecated option ".concat(_,". Use ").concat(A," instead")),b[A]=b[_])}),[["padding","cellPadding"],["lineHeight","rowHeight"],"fontSize","overflow"].forEach(function(T){var A=typeof T=="string"?T:T[0],_=typeof T=="string"?T:T[1];typeof b[A]<"u"&&(typeof b.styles[_]>"u"&&(b.styles[_]=b[A]),console.error("Use of deprecated option: "+A+", use the style "+_+" instead."))});for(var j=0,C=["styles","bodyStyles","headStyles","footStyles"];j<C.length;j++){var E=C[j];f(b[E]||{})}for(var S=b.columnStyles||{},N=0,I=Object.keys(S);N<I.length;N++){var D=I[N];f(S[D]||{})}},p=0,v=[m,h,x];p<v.length;p++){var y=v[p];g(y)}}c.default=d;function f(u){u.rowHeight?(console.error("Use of deprecated style rowHeight. It is renamed to minCellHeight."),u.minCellHeight||(u.minCellHeight=u.rowHeight)):u.columnWidth&&(console.error("Use of deprecated style columnWidth. It is renamed to cellWidth."),u.cellWidth||(u.cellWidth=u.columnWidth))}},260:function(l,c,d){Object.defineProperty(c,"__esModule",{value:!0}),c.Column=c.Cell=c.Row=c.Table=void 0;var f=d(796),u=d(172),m=d(420),h=function(){function v(y,b){this.pageNumber=1,this.pageCount=1,this.id=y.id,this.settings=y.settings,this.styles=y.styles,this.hooks=y.hooks,this.columns=b.columns,this.head=b.head,this.body=b.body,this.foot=b.foot}return v.prototype.getHeadHeight=function(y){return this.head.reduce(function(b,j){return b+j.getMaxCellHeight(y)},0)},v.prototype.getFootHeight=function(y){return this.foot.reduce(function(b,j){return b+j.getMaxCellHeight(y)},0)},v.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},v.prototype.callCellHooks=function(y,b,j,C,E,S){for(var N=0,I=b;N<I.length;N++){var D=I[N],T=new u.CellHookData(y,this,j,C,E,S),A=D(T)===!1;if(j.text=Array.isArray(j.text)?j.text:[j.text],A)return!1}return!0},v.prototype.callEndPageHooks=function(y,b){y.applyStyles(y.userStyles);for(var j=0,C=this.hooks.didDrawPage;j<C.length;j++){var E=C[j];E(new u.HookData(y,this,b))}},v.prototype.callWillDrawPageHooks=function(y,b){for(var j=0,C=this.hooks.willDrawPage;j<C.length;j++){var E=C[j];E(new u.HookData(y,this,b))}},v.prototype.getWidth=function(y){if(typeof this.settings.tableWidth=="number")return this.settings.tableWidth;if(this.settings.tableWidth==="wrap"){var b=this.columns.reduce(function(C,E){return C+E.wrappedWidth},0);return b}else{var j=this.settings.margin;return y-j.left-j.right}},v}();c.Table=h;var x=function(){function v(y,b,j,C,E){E===void 0&&(E=!1),this.height=0,this.raw=y,y instanceof f.HtmlRowInput&&(this.raw=y._element,this.element=y._element),this.index=b,this.section=j,this.cells=C,this.spansMultiplePages=E}return v.prototype.getMaxCellHeight=function(y){var b=this;return y.reduce(function(j,C){var E;return Math.max(j,((E=b.cells[C.index])===null||E===void 0?void 0:E.height)||0)},0)},v.prototype.hasRowSpan=function(y){var b=this;return y.filter(function(j){var C=b.cells[j.index];return C?C.rowSpan>1:!1}).length>0},v.prototype.canEntireRowFit=function(y,b){return this.getMaxCellHeight(b)<=y},v.prototype.getMinimumRowHeight=function(y,b){var j=this;return y.reduce(function(C,E){var S=j.cells[E.index];if(!S)return 0;var N=b.getLineHeight(S.styles.fontSize),I=S.padding("vertical"),D=I+N;return D>C?D:C},0)},v}();c.Row=x;var g=function(){function v(y,b,j){var C,E;this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=b,this.section=j,this.raw=y;var S=y;y!=null&&typeof y=="object"&&!Array.isArray(y)?(this.rowSpan=y.rowSpan||1,this.colSpan=y.colSpan||1,S=(E=(C=y.content)!==null&&C!==void 0?C:y.title)!==null&&E!==void 0?E:y,y._element&&(this.raw=y._element)):(this.rowSpan=1,this.colSpan=1);var N=S!=null?""+S:"",I=/\r\n|\r|\n/g;this.text=N.split(I)}return v.prototype.getTextPos=function(){var y;if(this.styles.valign==="top")y=this.y+this.padding("top");else if(this.styles.valign==="bottom")y=this.y+this.height-this.padding("bottom");else{var b=this.height-this.padding("vertical");y=this.y+b/2+this.padding("top")}var j;if(this.styles.halign==="right")j=this.x+this.width-this.padding("right");else if(this.styles.halign==="center"){var C=this.width-this.padding("horizontal");j=this.x+C/2+this.padding("left")}else j=this.x+this.padding("left");return{x:j,y}},v.prototype.getContentHeight=function(y,b){b===void 0&&(b=1.15);var j=Array.isArray(this.text)?this.text.length:1,C=this.styles.fontSize/y*b,E=j*C+this.padding("vertical");return Math.max(E,this.styles.minCellHeight)},v.prototype.padding=function(y){var b=(0,m.parseSpacing)(this.styles.cellPadding,0);return y==="vertical"?b.top+b.bottom:y==="horizontal"?b.left+b.right:b[y]},v}();c.Cell=g;var p=function(){function v(y,b,j){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=y,this.raw=b,this.index=j}return v.prototype.getMaxCustomCellWidth=function(y){for(var b=0,j=0,C=y.allRows();j<C.length;j++){var E=C[j],S=E.cells[this.index];S&&typeof S.styles.cellWidth=="number"&&(b=Math.max(b,S.styles.cellWidth))}return b},v}();c.Column=p},356:function(l,c){Object.defineProperty(c,"__esModule",{value:!0}),c.assign=void 0;function d(f,u,m,h,x){if(f==null)throw new TypeError("Cannot convert undefined or null to object");for(var g=Object(f),p=1;p<arguments.length;p++){var v=arguments[p];if(v!=null)for(var y in v)Object.prototype.hasOwnProperty.call(v,y)&&(g[y]=v[y])}return g}c.assign=d},972:function(l,c,d){Object.defineProperty(c,"__esModule",{value:!0}),c.createTable=void 0;var f=d(744),u=d(260),m=d(324),h=d(796),x=d(356);function g(E,S){var N=new f.DocHandler(E),I=p(S,N.scaleFactor()),D=new u.Table(S,I);return(0,m.calculateWidths)(N,D),N.applyStyles(N.userStyles),D}c.createTable=g;function p(E,S){var N=E.content,I=j(N.columns);if(N.head.length===0){var D=y(I,"head");D&&N.head.push(D)}if(N.foot.length===0){var D=y(I,"foot");D&&N.foot.push(D)}var T=E.settings.theme,A=E.styles;return{columns:I,head:v("head",N.head,I,A,T,S),body:v("body",N.body,I,A,T,S),foot:v("foot",N.foot,I,A,T,S)}}function v(E,S,N,I,D,T){var A={},_=S.map(function(k,L){for(var $=0,M={},B=0,U=0,W=0,q=N;W<q.length;W++){var R=q[W];if(A[R.index]==null||A[R.index].left===0)if(U===0){var V=void 0;Array.isArray(k)?V=k[R.index-B-$]:V=k[R.dataKey];var G={};typeof V=="object"&&!Array.isArray(V)&&(G=(V==null?void 0:V.styles)||{});var ee=C(E,R,L,D,I,T,G),re=new u.Cell(V,ee,E);M[R.dataKey]=re,M[R.index]=re,U=re.colSpan-1,A[R.index]={left:re.rowSpan-1,times:U}}else U--,B++;else A[R.index].left--,U=A[R.index].times,$++}return new u.Row(k,L,E,M)});return _}function y(E,S){var N={};return E.forEach(function(I){if(I.raw!=null){var D=b(S,I.raw);D!=null&&(N[I.dataKey]=D)}}),Object.keys(N).length>0?N:null}function b(E,S){if(E==="head"){if(typeof S=="object")return S.header||S.title||null;if(typeof S=="string"||typeof S=="number")return S}else if(E==="foot"&&typeof S=="object")return S.footer;return null}function j(E){return E.map(function(S,N){var I,D,T;return typeof S=="object"?T=(D=(I=S.dataKey)!==null&&I!==void 0?I:S.key)!==null&&D!==void 0?D:N:T=N,new u.Column(T,S,N)})}function C(E,S,N,I,D,T,A){var _=(0,h.getTheme)(I),k;E==="head"?k=D.headStyles:E==="body"?k=D.bodyStyles:E==="foot"&&(k=D.footStyles);var L=(0,x.assign)({},_.table,_[E],D.styles,k),$=D.columnStyles[S.dataKey]||D.columnStyles[S.index]||{},M=E==="body"?$:{},B=E==="body"&&N%2===0?(0,x.assign)({},_.alternateRow,D.alternateRowStyles):{},U=(0,h.defaultStyles)(T),W=(0,x.assign)({},U,L,B,M);return(0,x.assign)(W,A)}},664:function(l,c,d){Object.defineProperty(c,"__esModule",{value:!0}),c.addPage=c.drawTable=void 0;var f=d(420),u=d(260),m=d(744),h=d(356),x=d(136),g=d(224);function p($,M){var B=M.settings,U=B.startY,W=B.margin,q={x:W.left,y:U},R=M.getHeadHeight(M.columns)+M.getFootHeight(M.columns),V=U+W.bottom+R;if(B.pageBreak==="avoid"){var G=M.body,ee=G.reduce(function(ue,oe){return ue+oe.height},0);V+=ee}var re=new m.DocHandler($);(B.pageBreak==="always"||B.startY!=null&&V>re.pageSize().height)&&(L(re),q.y=W.top),M.callWillDrawPageHooks(re,q);var de=(0,h.assign)({},q);M.startPageNumber=re.pageNumber(),B.horizontalPageBreak?v(re,M,de,q):(re.applyStyles(re.userStyles),(B.showHead==="firstPage"||B.showHead==="everyPage")&&M.head.forEach(function(ue){return D(re,M,ue,q,M.columns)}),re.applyStyles(re.userStyles),M.body.forEach(function(ue,oe){var ge=oe===M.body.length-1;I(re,M,ue,ge,de,q,M.columns)}),re.applyStyles(re.userStyles),(B.showFoot==="lastPage"||B.showFoot==="everyPage")&&M.foot.forEach(function(ue){return D(re,M,ue,q,M.columns)})),(0,f.addTableBorder)(re,M,de,q),M.callEndPageHooks(re,q),M.finalY=q.y,$.lastAutoTable=M,$.previousAutoTable=M,$.autoTable&&($.autoTable.previous=M),re.applyStyles(re.userStyles)}c.drawTable=p;function v($,M,B,U){var W=(0,g.calculateAllColumnsCanFitInPage)($,M),q=M.settings;if(q.horizontalPageBreakBehaviour==="afterAllRows")W.forEach(function(ee,re){$.applyStyles($.userStyles),re>0?k($,M,B,U,ee.columns,!0):y($,M,U,ee.columns),b($,M,B,U,ee.columns),C($,M,U,ee.columns)});else for(var R=-1,V=W[0],G=function(){var ee=R;if(V){$.applyStyles($.userStyles);var re=V.columns;R>=0?k($,M,B,U,re,!0):y($,M,U,re),ee=j($,M,R+1,U,re),C($,M,U,re)}var de=ee-R;W.slice(1).forEach(function(ue){$.applyStyles($.userStyles),k($,M,B,U,ue.columns,!0),j($,M,R+1,U,ue.columns,de),C($,M,U,ue.columns)}),R=ee};R<M.body.length-1;)G()}function y($,M,B,U){var W=M.settings;$.applyStyles($.userStyles),(W.showHead==="firstPage"||W.showHead==="everyPage")&&M.head.forEach(function(q){return D($,M,q,B,U)})}function b($,M,B,U,W){$.applyStyles($.userStyles),M.body.forEach(function(q,R){var V=R===M.body.length-1;I($,M,q,V,B,U,W)})}function j($,M,B,U,W,q){$.applyStyles($.userStyles),q=q??M.body.length;var R=Math.min(B+q,M.body.length),V=-1;return M.body.slice(B,R).forEach(function(G,ee){var re=B+ee===M.body.length-1,de=_($,M,re,U);G.canEntireRowFit(de,W)&&(D($,M,G,U,W),V=B+ee)}),V}function C($,M,B,U){var W=M.settings;$.applyStyles($.userStyles),(W.showFoot==="lastPage"||W.showFoot==="everyPage")&&M.foot.forEach(function(q){return D($,M,q,B,U)})}function E($,M,B){var U=B.getLineHeight($.styles.fontSize),W=$.padding("vertical"),q=Math.floor((M-W)/U);return Math.max(0,q)}function S($,M,B,U){var W={};$.spansMultiplePages=!0,$.height=0;for(var q=0,R=0,V=B.columns;R<V.length;R++){var G=V[R],ee=$.cells[G.index];if(ee){Array.isArray(ee.text)||(ee.text=[ee.text]);var re=new u.Cell(ee.raw,ee.styles,ee.section);re=(0,h.assign)(re,ee),re.text=[];var de=E(ee,M,U);ee.text.length>de&&(re.text=ee.text.splice(de,ee.text.length));var ue=U.scaleFactor(),oe=U.getLineHeightFactor();ee.contentHeight=ee.getContentHeight(ue,oe),ee.contentHeight>=M&&(ee.contentHeight=M,re.styles.minCellHeight-=M),ee.contentHeight>$.height&&($.height=ee.contentHeight),re.contentHeight=re.getContentHeight(ue,oe),re.contentHeight>q&&(q=re.contentHeight),W[G.index]=re}}var ge=new u.Row($.raw,-1,$.section,W,!0);ge.height=q;for(var ve=0,xe=B.columns;ve<xe.length;ve++){var G=xe[ve],re=ge.cells[G.index];re&&(re.height=ge.height);var ee=$.cells[G.index];ee&&(ee.height=$.height)}return ge}function N($,M,B,U){var W=$.pageSize().height,q=U.settings.margin,R=q.top+q.bottom,V=W-R;M.section==="body"&&(V-=U.getHeadHeight(U.columns)+U.getFootHeight(U.columns));var G=M.getMinimumRowHeight(U.columns,$),ee=G<B;if(G>V)return console.error("Will not be able to print row ".concat(M.index," correctly since it's minimum height is larger than page height")),!0;if(!ee)return!1;var re=M.hasRowSpan(U.columns),de=M.getMaxCellHeight(U.columns)>V;return de?(re&&console.error("The content of row ".concat(M.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!(re||U.settings.rowPageBreak==="avoid")}function I($,M,B,U,W,q,R){var V=_($,M,U,q);if(B.canEntireRowFit(V,R))D($,M,B,q,R);else if(N($,B,V,M)){var G=S(B,V,M,$);D($,M,B,q,R),k($,M,W,q,R),I($,M,G,U,W,q,R)}else k($,M,W,q,R),I($,M,B,U,W,q,R)}function D($,M,B,U,W){U.x=M.settings.margin.left;for(var q=0,R=W;q<R.length;q++){var V=R[q],G=B.cells[V.index];if(!G){U.x+=V.width;continue}$.applyStyles(G.styles),G.x=U.x,G.y=U.y;var ee=M.callCellHooks($,M.hooks.willDrawCell,G,B,V,U);if(ee===!1){U.x+=V.width;continue}T($,G,U);var re=G.getTextPos();(0,x.default)(G.text,re.x,re.y,{halign:G.styles.halign,valign:G.styles.valign,maxWidth:Math.ceil(G.width-G.padding("left")-G.padding("right"))},$.getDocument()),M.callCellHooks($,M.hooks.didDrawCell,G,B,V,U),U.x+=V.width}U.y+=B.height}function T($,M,B){var U=M.styles;if($.getDocument().setFillColor($.getDocument().getFillColor()),typeof U.lineWidth=="number"){var W=(0,f.getFillStyle)(U.lineWidth,U.fillColor);W&&$.rect(M.x,B.y,M.width,M.height,W)}else typeof U.lineWidth=="object"&&(U.fillColor&&$.rect(M.x,B.y,M.width,M.height,"F"),A($,M,B,U.lineWidth))}function A($,M,B,U){var W,q,R,V;U.top&&(W=B.x,q=B.y,R=B.x+M.width,V=B.y,U.right&&(R+=.5*U.right),U.left&&(W-=.5*U.left),G(U.top,W,q,R,V)),U.bottom&&(W=B.x,q=B.y+M.height,R=B.x+M.width,V=B.y+M.height,U.right&&(R+=.5*U.right),U.left&&(W-=.5*U.left),G(U.bottom,W,q,R,V)),U.left&&(W=B.x,q=B.y,R=B.x,V=B.y+M.height,U.top&&(q-=.5*U.top),U.bottom&&(V+=.5*U.bottom),G(U.left,W,q,R,V)),U.right&&(W=B.x+M.width,q=B.y,R=B.x+M.width,V=B.y+M.height,U.top&&(q-=.5*U.top),U.bottom&&(V+=.5*U.bottom),G(U.right,W,q,R,V));function G(ee,re,de,ue,oe){$.getDocument().setLineWidth(ee),$.getDocument().line(re,de,ue,oe,"S")}}function _($,M,B,U){var W=M.settings.margin.bottom,q=M.settings.showFoot;return(q==="everyPage"||q==="lastPage"&&B)&&(W+=M.getFootHeight(M.columns)),$.pageSize().height-U.y-W}function k($,M,B,U,W,q){W===void 0&&(W=[]),q===void 0&&(q=!1),$.applyStyles($.userStyles),M.settings.showFoot==="everyPage"&&!q&&M.foot.forEach(function(V){return D($,M,V,U,W)}),M.callEndPageHooks($,U);var R=M.settings.margin;(0,f.addTableBorder)($,M,B,U),L($),M.pageNumber++,M.pageCount++,U.x=R.left,U.y=R.top,B.y=R.top,M.callWillDrawPageHooks($,U),M.settings.showHead==="everyPage"&&(M.head.forEach(function(V){return D($,M,V,U,W)}),$.applyStyles($.userStyles))}c.addPage=k;function L($){var M=$.pageNumber();$.setPage(M+1);var B=$.pageNumber();return B===M?($.addPage(),!0):!1}},224:function(l,c,d){Object.defineProperty(c,"__esModule",{value:!0}),c.calculateAllColumnsCanFitInPage=void 0;var f=d(420);function u(h,x,g){var p;g===void 0&&(g={});var v=(0,f.getPageAvailableWidth)(h,x),y=new Map,b=[],j=[],C=[];x.settings.horizontalPageBreakRepeat,Array.isArray(x.settings.horizontalPageBreakRepeat)?C=x.settings.horizontalPageBreakRepeat:(typeof x.settings.horizontalPageBreakRepeat=="string"||typeof x.settings.horizontalPageBreakRepeat=="number")&&(C=[x.settings.horizontalPageBreakRepeat]),C.forEach(function(I){var D=x.columns.find(function(T){return T.dataKey===I||T.index===I});D&&!y.has(D.index)&&(y.set(D.index,!0),b.push(D.index),j.push(x.columns[D.index]),v-=D.wrappedWidth)});for(var E=!0,S=(p=g==null?void 0:g.start)!==null&&p!==void 0?p:0;S<x.columns.length;){if(y.has(S)){S++;continue}var N=x.columns[S].wrappedWidth;if(E||v>=N)E=!1,b.push(S),j.push(x.columns[S]),v-=N;else break;S++}return{colIndexes:b,columns:j,lastIndex:S-1}}function m(h,x){for(var g=[],p=0;p<x.columns.length;p++){var v=u(h,x,{start:p});v.columns.length&&(g.push(v),p=v.lastIndex)}return g}c.calculateAllColumnsCanFitInPage=m},324:function(l,c,d){Object.defineProperty(c,"__esModule",{value:!0}),c.ellipsize=c.resizeColumns=c.calculateWidths=void 0;var f=d(420);function u(b,j){m(b,j);var C=[],E=0;j.columns.forEach(function(N){var I=N.getMaxCustomCellWidth(j);I?N.width=I:(N.width=N.wrappedWidth,C.push(N)),E+=N.width});var S=j.getWidth(b.pageSize().width)-E;S&&(S=h(C,S,function(N){return Math.max(N.minReadableWidth,N.minWidth)})),S&&(S=h(C,S,function(N){return N.minWidth})),S=Math.abs(S),!j.settings.horizontalPageBreak&&S>.1/b.scaleFactor()&&(S=S<1?S:Math.round(S),console.warn("Of the table content, ".concat(S," units width could not fit page"))),g(j),p(j,b),x(j)}c.calculateWidths=u;function m(b,j){var C=b.scaleFactor(),E=j.settings.horizontalPageBreak,S=(0,f.getPageAvailableWidth)(b,j);j.allRows().forEach(function(N){for(var I=0,D=j.columns;I<D.length;I++){var T=D[I],A=N.cells[T.index];if(A){var _=j.hooks.didParseCell;j.callCellHooks(b,_,A,N,T,null);var k=A.padding("horizontal");A.contentWidth=(0,f.getStringWidth)(A.text,A.styles,b)+k;var L=(0,f.getStringWidth)(A.text.join(" ").split(/[^\S\u00A0]+/),A.styles,b);if(A.minReadableWidth=L+A.padding("horizontal"),typeof A.styles.cellWidth=="number")A.minWidth=A.styles.cellWidth,A.wrappedWidth=A.styles.cellWidth;else if(A.styles.cellWidth==="wrap"||E===!0)A.contentWidth>S?(A.minWidth=S,A.wrappedWidth=S):(A.minWidth=A.contentWidth,A.wrappedWidth=A.contentWidth);else{var $=10/C;A.minWidth=A.styles.minCellWidth||$,A.wrappedWidth=A.contentWidth,A.minWidth>A.wrappedWidth&&(A.wrappedWidth=A.minWidth)}}}}),j.allRows().forEach(function(N){for(var I=0,D=j.columns;I<D.length;I++){var T=D[I],A=N.cells[T.index];if(A&&A.colSpan===1)T.wrappedWidth=Math.max(T.wrappedWidth,A.wrappedWidth),T.minWidth=Math.max(T.minWidth,A.minWidth),T.minReadableWidth=Math.max(T.minReadableWidth,A.minReadableWidth);else{var _=j.styles.columnStyles[T.dataKey]||j.styles.columnStyles[T.index]||{},k=_.cellWidth||_.minCellWidth;k&&typeof k=="number"&&(T.minWidth=k,T.wrappedWidth=k)}A&&(A.colSpan>1&&!T.minWidth&&(T.minWidth=A.minWidth),A.colSpan>1&&!T.wrappedWidth&&(T.wrappedWidth=A.minWidth))}})}function h(b,j,C){for(var E=j,S=b.reduce(function($,M){return $+M.wrappedWidth},0),N=0;N<b.length;N++){var I=b[N],D=I.wrappedWidth/S,T=E*D,A=I.width+T,_=C(I),k=A<_?_:A;j-=k-I.width,I.width=k}if(j=Math.round(j*1e10)/1e10,j){var L=b.filter(function($){return j<0?$.width>C($):!0});L.length&&(j=h(L,j,C))}return j}c.resizeColumns=h;function x(b){for(var j={},C=1,E=b.allRows(),S=0;S<E.length;S++)for(var N=E[S],I=0,D=b.columns;I<D.length;I++){var T=D[I],A=j[T.index];if(C>1)C--,delete N.cells[T.index];else if(A)A.cell.height+=N.height,C=A.cell.colSpan,delete N.cells[T.index],A.left--,A.left<=1&&delete j[T.index];else{var _=N.cells[T.index];if(!_)continue;if(_.height=N.height,_.rowSpan>1){var k=E.length-S,L=_.rowSpan>k?k:_.rowSpan;j[T.index]={cell:_,left:L,row:N}}}}}function g(b){for(var j=b.allRows(),C=0;C<j.length;C++)for(var E=j[C],S=null,N=0,I=0,D=0;D<b.columns.length;D++){var T=b.columns[D];if(I-=1,I>1&&b.columns[D+1])N+=T.width,delete E.cells[T.index];else if(S){var A=S;delete E.cells[T.index],S=null,A.width=T.width+N}else{var A=E.cells[T.index];if(!A)continue;if(I=A.colSpan,N=0,A.colSpan>1){S=A,N+=T.width;continue}A.width=T.width+N}}}function p(b,j){for(var C={count:0,height:0},E=0,S=b.allRows();E<S.length;E++){for(var N=S[E],I=0,D=b.columns;I<D.length;I++){var T=D[I],A=N.cells[T.index];if(A){j.applyStyles(A.styles,!0);var _=A.width-A.padding("horizontal");if(A.styles.overflow==="linebreak")A.text=j.splitTextToSize(A.text,_+1/j.scaleFactor(),{fontSize:A.styles.fontSize});else if(A.styles.overflow==="ellipsize")A.text=v(A.text,_,A.styles,j,"...");else if(A.styles.overflow==="hidden")A.text=v(A.text,_,A.styles,j,"");else if(typeof A.styles.overflow=="function"){var k=A.styles.overflow(A.text,_);typeof k=="string"?A.text=[k]:A.text=k}A.contentHeight=A.getContentHeight(j.scaleFactor(),j.getLineHeightFactor());var L=A.contentHeight/A.rowSpan;A.rowSpan>1&&C.count*C.height<L*A.rowSpan?C={height:L,count:A.rowSpan}:C&&C.count>0&&C.height>L&&(L=C.height),L>N.height&&(N.height=L)}}C.count--}}function v(b,j,C,E,S){return b.map(function(N){return y(N,j,C,E,S)})}c.ellipsize=v;function y(b,j,C,E,S){var N=1e4*E.scaleFactor();if(j=Math.ceil(j*N)/N,j>=(0,f.getStringWidth)(b,C,E))return b;for(;j<(0,f.getStringWidth)(b+S,C,E)&&!(b.length<=1);)b=b.substring(0,b.length-1);return b.trim()+S}},964:function(l){if(typeof n>"u"){var c=new Error("Cannot find module 'undefined'");throw c.code="MODULE_NOT_FOUND",c}l.exports=n}},s={};function i(l){var c=s[l];if(c!==void 0)return c.exports;var d=s[l]={exports:{}};return a[l].call(d.exports,d,d.exports,i),d.exports}var o={};return function(){var l=o;Object.defineProperty(l,"__esModule",{value:!0}),l.Cell=l.Column=l.Row=l.Table=l.CellHookData=l.__drawTable=l.__createTable=l.applyPlugin=void 0;var c=i(340),d=i(776),f=i(664),u=i(972),m=i(260);Object.defineProperty(l,"Table",{enumerable:!0,get:function(){return m.Table}});var h=i(172);Object.defineProperty(l,"CellHookData",{enumerable:!0,get:function(){return h.CellHookData}});var x=i(260);Object.defineProperty(l,"Cell",{enumerable:!0,get:function(){return x.Cell}}),Object.defineProperty(l,"Column",{enumerable:!0,get:function(){return x.Column}}),Object.defineProperty(l,"Row",{enumerable:!0,get:function(){return x.Row}});function g(j){(0,c.default)(j)}l.applyPlugin=g;function p(j,C){var E=(0,d.parseInput)(j,C),S=(0,u.createTable)(j,E);(0,f.drawTable)(j,S)}function v(j,C){var E=(0,d.parseInput)(j,C);return(0,u.createTable)(j,E)}l.__createTable=v;function y(j,C){(0,f.drawTable)(j,C)}l.__drawTable=y;try{var b=i(964);b.jsPDF&&(b=b.jsPDF),g(b)}catch{}l.default=p}(),o}()})})(ede);function rde({ticket:e,onClose:t,onEdit:n}){var x,g,p,v,y,b,j,C,E;const{toast:a}=Ct(),{tenant:s}=vu(),[i,o]=w.useState("details"),l=S=>{switch(S){case ar.OPEN:return"bg-blue-50 text-blue-700 border-blue-200";case ar.IN_PROGRESS:return"bg-yellow-50 text-yellow-700 border-yellow-200";case ar.WAITING_PARTS:return"bg-orange-50 text-orange-700 border-orange-200";case ar.COMPLETED:return"bg-green-50 text-green-700 border-green-200";case ar.CANCELLED:return"bg-red-50 text-red-700 border-red-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},c=S=>{switch(S){case Qr.LOW:return"bg-green-50 text-green-700 border-green-200";case Qr.MEDIUM:return"bg-yellow-50 text-yellow-700 border-yellow-200";case Qr.HIGH:return"bg-orange-50 text-orange-700 border-orange-200";case Qr.URGENT:return"bg-red-50 text-red-700 border-red-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},d=S=>{switch(S){case"covered":return"Covered by Warranty";case"partial":return"Partially Covered";case"not_covered":return"Not Covered";case"extended":return"Extended Warranty";case"expired":return"Warranty Expired";default:return"Unknown"}},f=S=>{switch(S){case"covered":return"bg-green-50 text-green-700 border-green-200";case"partial":return"bg-yellow-50 text-yellow-700 border-yellow-200";case"not_covered":return"bg-red-50 text-red-700 border-red-200";case"extended":return"bg-blue-50 text-blue-700 border-blue-200";case"expired":return"bg-orange-50 text-orange-700 border-orange-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},m=(()=>{const S=Array.isArray(e.parts)?e.parts.reduce((I,D)=>I+(D.total||0),0):0,N=Array.isArray(e.labor)?e.labor.reduce((I,D)=>I+(D.total||0),0):0;return{partsTotal:S,laborTotal:N,grandTotal:S+N}})(),h=()=>{try{const S=new It;let N=10;(T=>{var U;const A=(U=s==null?void 0:s.branding)==null?void 0:U.logo,_=s==null?void 0:s.name,k=30,L=15,$=10,M=10,B=$+k+5;if(A){const W=new Image;W.src=A,W.onload=()=>{S.addImage(W,"PNG",$,M,k,L),_&&(S.setFontSize(16),S.text(_,B,M+L/2+2)),N=Math.max(N,M+L+10),T()},W.onerror=()=>{_?(S.setFontSize(16),S.text(_,$,M+5),N=Math.max(N,M+15+10)):N=Math.max(N,M+10),T()}}else _?(S.setFontSize(16),S.text(_,$,M+5),N=Math.max(N,M+15+10),T()):(N=Math.max(N,M+10),T())})(()=>{var A,_;S.setFontSize(20),S.text("Service Ticket",105,N+10,{align:"center"}),N+=30,S.setFontSize(12),S.text(`Ticket #: ${e.id||"N/A"}`,20,N),N+=7,S.text(`Date: ${lt(e.createdAt)}`,20,N),N+=7,S.text(`Customer: ${e.customerId||"N/A"}`,20,N),N+=7,S.text(`Status: ${((_=(A=e.status)==null?void 0:A.replace("_"," "))==null?void 0:_.toUpperCase())||"N/A"}`,20,N),N+=15,S.setFontSize(16),S.text("Service Details",20,N),N+=10,S.setFontSize(12),S.text(`Title: ${e.title||"N/A"}`,20,N),N+=7;const T=S.splitTextToSize(e.description||"",170);if(S.text(T,20,N),N+=T.length*7+15,Array.isArray(e.parts)&&e.parts.length>0&&(S.setFontSize(16),S.text("Parts",20,N),N+=5,S.autoTable({startY:N,head:[["Part Number","Description","Quantity","Unit Cost","Total"]],body:e.parts.map(k=>[k.partNumber||"",k.description||"",k.quantity||0,De(k.unitCost||0),De(k.total||0)]),foot:[["","","","Parts Total:",De(m.partsTotal)]],theme:"striped",headStyles:{fillColor:[66,139,202]}}),N=S.lastAutoTable.finalY+15),Array.isArray(e.labor)&&e.labor.length>0&&(S.setFontSize(16),S.text("Labor",20,N),N+=5,S.autoTable({startY:N,head:[["Description","Hours","Rate","Total"]],body:e.labor.map(k=>[k.description||"",k.hours||0,De(k.rate||0),De(k.total||0)]),foot:[["","","Labor Total:",De(m.laborTotal)]],theme:"striped",headStyles:{fillColor:[66,139,202]}}),N=S.lastAutoTable.finalY+10),S.setFontSize(14),S.text(`Grand Total: ${De(m.grandTotal)}`,150,N,{align:"right"}),N+=15,e.notes){S.setFontSize(16),S.text("Notes",20,N),N+=10;const k=S.splitTextToSize(e.notes,170);S.text(k,20,N),N+=k.length*7+10}S.save(`service-ticket-${e.id||"N/A"}.pdf`),a({title:"PDF Generated",description:"Service ticket PDF has been downloaded"})})}catch(S){console.error("Error generating PDF:",S),a({title:"Error",description:"Failed to generate PDF",variant:"destructive"})}};return r.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:r.jsxs(fe,{className:"w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[r.jsx(we,{children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx(Ne,{className:"text-xl",children:e.title}),r.jsxs(Ue,{children:["Service Ticket #",e.id]})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsxs(J,{onClick:()=>n(e),size:"sm",children:[r.jsx(Br,{className:"h-4 w-4 mr-2"}),"Edit Ticket"]}),r.jsx(J,{variant:"ghost",size:"sm",onClick:t,children:r.jsx($t,{className:"h-4 w-4"})})]})]})}),r.jsxs(me,{children:[r.jsxs(lr,{value:i,onValueChange:o,className:"space-y-4",children:[r.jsxs(or,{className:"grid w-full grid-cols-3",children:[r.jsx(Ke,{value:"details",children:"Details"}),r.jsx(Ke,{value:"parts-labor",children:"Parts & Labor"}),r.jsx(Ke,{value:"notes",children:"Notes"})]}),r.jsxs(Je,{value:"details",className:"space-y-6",children:[r.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[r.jsx(ze,{className:He("ri-badge-status",l(e.status)),children:((g=(x=e.status)==null?void 0:x.replace("_"," "))==null?void 0:g.toUpperCase())||"N/A"}),r.jsxs(ze,{className:He("ri-badge-status",c(e.priority)),children:[((p=e.priority)==null?void 0:p.toUpperCase())||"N/A"," PRIORITY"]}),((v=e.customFields)==null?void 0:v.warrantyStatus)&&r.jsx(ze,{className:He("ri-badge-status",f(e.customFields.warrantyStatus)),children:d(e.customFields.warrantyStatus)}),((y=e.customFields)==null?void 0:y.customerAuthorization)&&r.jsx(ze,{className:"bg-green-50 text-green-700 border-green-200",children:"AUTHORIZED"})]}),r.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Customer"}),r.jsx("p",{className:"font-medium",children:e.customerId||"N/A"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Vehicle"}),r.jsx("p",{className:"font-medium",children:e.vehicleId||"No Vehicle"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Assigned To"}),r.jsx("p",{className:"font-medium",children:e.assignedTo||"Unassigned"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Created"}),r.jsx("p",{className:"font-medium",children:lt(e.createdAt)})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Scheduled Date"}),r.jsx("p",{className:"font-medium",children:e.scheduledDate?lt(e.scheduledDate):"Not scheduled"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Estimated Completion"}),r.jsx("p",{className:"font-medium",children:((b=e.customFields)==null?void 0:b.estimatedCompletionDate)||"Not specified"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Description"}),r.jsx("div",{className:"mt-1 p-3 bg-muted/30 rounded-md",children:r.jsx("p",{className:"whitespace-pre-wrap",children:e.description||"N/A"})})]}),r.jsxs("div",{className:"p-3 bg-blue-50 rounded-md",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(wa,{className:"h-4 w-4 text-blue-600"}),r.jsx("span",{className:"font-medium text-blue-700",children:"Customer Portal Access:"}),r.jsx("span",{className:"text-blue-700",children:((j=e.customFields)==null?void 0:j.customerPortalAccess)!==!1?"Enabled":"Disabled"})]}),r.jsx("p",{className:"text-sm text-blue-600 mt-1",children:((C=e.customFields)==null?void 0:C.customerPortalAccess)!==!1?"Customer can view this ticket in the portal":"Customer cannot view this ticket in the portal"})]})]}),r.jsxs(Je,{value:"parts-labor",className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Parts"}),Array.isArray(e.parts)&&e.parts.length>0?r.jsxs("div",{className:"space-y-3",children:[e.parts.map(S=>r.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("div",{className:"font-medium",children:S.description||"N/A"}),r.jsxs("p",{className:"text-sm text-muted-foreground",children:["Quantity: ",S.quantity||0," × ",De(S.unitCost||0)]})]}),r.jsx("div",{className:"font-bold",children:De(S.total||0)})]},S.id)),r.jsx("div",{className:"flex justify-end p-2",children:r.jsxs("span",{className:"font-medium",children:["Parts Total: ",De(m.partsTotal)]})})]}):r.jsx("div",{className:"text-center py-6 text-muted-foreground border-2 border-dashed rounded-lg",children:r.jsx("p",{children:"No parts added to this service ticket"})})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Labor"}),Array.isArray(e.labor)&&e.labor.length>0?r.jsxs("div",{className:"space-y-3",children:[e.labor.map(S=>r.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("div",{className:"font-medium",children:S.description||"N/A"}),r.jsxs("p",{className:"text-sm text-muted-foreground",children:[S.hours||0," hours × ",De(S.rate||0),"/hr"]})]}),r.jsx("div",{className:"font-bold",children:De(S.total||0)})]},S.id)),r.jsx("div",{className:"flex justify-end p-2",children:r.jsxs("span",{className:"font-medium",children:["Labor Total: ",De(m.laborTotal)]})})]}):r.jsx("div",{className:"text-center py-6 text-muted-foreground border-2 border-dashed rounded-lg",children:r.jsx("p",{children:"No labor added to this service ticket"})})]}),r.jsx(fe,{className:"bg-muted/30",children:r.jsx(me,{className:"pt-6",children:r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:"Parts Total:"}),r.jsx("span",{children:De(m.partsTotal)})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:"Labor Total:"}),r.jsx("span",{children:De(m.laborTotal)})]}),r.jsxs("div",{className:"flex justify-between text-lg font-bold border-t pt-2",children:[r.jsx("span",{children:"Grand Total:"}),r.jsx("span",{children:De(m.grandTotal)})]})]})})})]}),r.jsxs(Je,{value:"notes",className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Customer Notes"}),e.notes?r.jsx("div",{className:"p-3 bg-muted/30 rounded-md",children:r.jsx("p",{className:"whitespace-pre-wrap",children:e.notes})}):r.jsx("div",{className:"text-center py-6 text-muted-foreground border-2 border-dashed rounded-lg",children:r.jsx("p",{children:"No customer notes for this service ticket"})})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Technician Notes"}),(E=e.customFields)!=null&&E.technicianNotes?r.jsx("div",{className:"p-3 bg-yellow-50 rounded-md",children:r.jsx("p",{className:"whitespace-pre-wrap text-yellow-800",children:e.customFields.technicianNotes})}):r.jsx("div",{className:"text-center py-6 text-muted-foreground border-2 border-dashed rounded-lg",children:r.jsx("p",{children:"No technician notes for this service ticket"})})]})]})]}),r.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t mt-6",children:[r.jsx(J,{variant:"outline",onClick:t,children:"Close"}),r.jsxs(J,{variant:"outline",onClick:h,children:[r.jsx(hu,{className:"h-4 w-4 mr-2"}),"Print PDF"]}),r.jsxs(J,{onClick:()=>n(e),children:[r.jsx(Br,{className:"h-4 w-4 mr-2"}),"Edit Ticket"]})]})]})]})})}function nde({ticket:e,onClose:t}){var l;const n=c=>{switch(c){case ar.OPEN:return"bg-blue-50 text-blue-700 border-blue-200";case ar.IN_PROGRESS:return"bg-yellow-50 text-yellow-700 border-yellow-200";case ar.WAITING_PARTS:return"bg-orange-50 text-orange-700 border-orange-200";case ar.COMPLETED:return"bg-green-50 text-green-700 border-green-200";case ar.CANCELLED:return"bg-red-50 text-red-700 border-red-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},a=c=>{switch(c){case Qr.LOW:return"bg-green-50 text-green-700 border-green-200";case Qr.MEDIUM:return"bg-yellow-50 text-yellow-700 border-yellow-200";case Qr.HIGH:return"bg-orange-50 text-orange-700 border-orange-200";case Qr.URGENT:return"bg-red-50 text-red-700 border-red-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},i=(()=>{const c=e.parts.reduce((f,u)=>f+u.total,0),d=e.labor.reduce((f,u)=>f+u.total,0);return{partsTotal:c,laborTotal:d,grandTotal:c+d}})(),o=()=>{try{const c=new It;c.setFontSize(20),c.text("Service Ticket",105,15,{align:"center"}),c.setFontSize(12),c.text(`Ticket #: ${e.id}`,20,30),c.text(`Date: ${lt(e.createdAt)}`,20,40),c.text(`Status: ${e.status.replace("_"," ")}`,20,50),c.setFontSize(16),c.text("Service Details",20,65),c.setFontSize(12),c.text(`Title: ${e.title}`,20,75);const d=c.splitTextToSize(e.description,170);if(c.text(d,20,85),e.parts.length>0&&(c.setFontSize(16),c.text("Parts",20,110),c.autoTable({startY:115,head:[["Description","Quantity","Unit Cost","Total"]],body:e.parts.map(u=>[u.description,u.quantity,De(u.unitCost),De(u.total)]),foot:[["","","Parts Total:",De(i.partsTotal)]]})),e.labor.length>0){const u=c.lastAutoTable.finalY||115;c.setFontSize(16),c.text("Labor",20,u+15),c.autoTable({startY:u+20,head:[["Description","Hours","Rate","Total"]],body:e.labor.map(m=>[m.description,m.hours,De(m.rate),De(m.total)]),foot:[["","","Labor Total:",De(i.laborTotal)]]})}const f=c.lastAutoTable.finalY||115;if(c.setFontSize(14),c.text(`Grand Total: ${De(i.grandTotal)}`,150,f+20,{align:"right"}),e.notes){c.setFontSize(16),c.text("Notes",20,f+35),c.setFontSize(12);const u=c.splitTextToSize(e.notes,170);c.text(u,20,f+45)}c.save(`service-ticket-${e.id}.pdf`)}catch(c){console.error("Error generating PDF:",c)}};return r.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:r.jsxs(fe,{className:"w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[r.jsx(we,{children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx(Ne,{className:"text-xl",children:"Service Ticket"}),r.jsxs(Ue,{children:["Ticket #",e.id]})]}),r.jsx(J,{variant:"ghost",size:"sm",onClick:t,children:r.jsx($t,{className:"h-4 w-4"})})]})}),r.jsx(me,{children:r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(Id,{className:"h-5 w-5 text-blue-600"}),r.jsx("h3",{className:"font-semibold text-blue-700",children:"Customer Portal View"})]}),r.jsx("p",{className:"text-sm text-blue-600 mt-1",children:"This is how your service ticket appears in the customer portal"})]}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-2xl font-bold",children:e.title}),r.jsxs("div",{className:"flex flex-wrap items-center gap-2 mt-2",children:[r.jsx(ze,{className:He("ri-badge-status",n(e.status)),children:e.status.replace("_"," ").toUpperCase()}),r.jsxs(ze,{className:He("ri-badge-status",a(e.priority)),children:[e.priority.toUpperCase()," PRIORITY"]})]})]}),r.jsxs(lr,{defaultValue:"details",className:"space-y-4",children:[r.jsxs(or,{className:"grid w-full grid-cols-3",children:[r.jsx(Ke,{value:"details",children:"Details"}),r.jsx(Ke,{value:"parts-labor",children:"Parts & Labor"}),r.jsx(Ke,{value:"timeline",children:"Timeline"})]}),r.jsxs(Je,{value:"details",className:"space-y-4",children:[r.jsxs(fe,{children:[r.jsx(we,{children:r.jsx(Ne,{className:"text-lg",children:"Description"})}),r.jsx(me,{children:r.jsx("p",{className:"whitespace-pre-wrap",children:e.description})})]}),r.jsxs(fe,{children:[r.jsx(we,{children:r.jsx(Ne,{className:"text-lg",children:"Schedule Information"})}),r.jsx(me,{children:r.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Created Date"}),r.jsx("p",{className:"font-medium",children:lt(e.createdAt)})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Scheduled Date"}),r.jsx("p",{className:"font-medium",children:e.scheduledDate?lt(e.scheduledDate):"Not scheduled"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Estimated Completion"}),r.jsx("p",{className:"font-medium",children:((l=e.customFields)==null?void 0:l.estimatedCompletionDate)||"Not specified"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Completed Date"}),r.jsx("p",{className:"font-medium",children:e.completedDate?lt(e.completedDate):"Not completed"})]})]})})]}),e.notes&&r.jsxs(fe,{children:[r.jsx(we,{children:r.jsx(Ne,{className:"text-lg",children:"Notes"})}),r.jsx(me,{children:r.jsx("p",{className:"whitespace-pre-wrap",children:e.notes})})]})]}),r.jsxs(Je,{value:"parts-labor",className:"space-y-6",children:[r.jsxs(fe,{children:[r.jsx(we,{children:r.jsx(Ne,{className:"text-lg",children:"Parts"})}),r.jsx(me,{children:e.parts.length>0?r.jsxs("div",{className:"space-y-3",children:[e.parts.map(c=>r.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("div",{className:"font-medium",children:c.description}),r.jsxs("p",{className:"text-sm text-muted-foreground",children:["Quantity: ",c.quantity," × ",De(c.unitCost)]})]}),r.jsx("div",{className:"font-bold",children:De(c.total)})]},c.id)),r.jsx("div",{className:"flex justify-end p-2",children:r.jsxs("span",{className:"font-medium",children:["Parts Total: ",De(i.partsTotal)]})})]}):r.jsx("div",{className:"text-center py-6 text-muted-foreground",children:r.jsx("p",{children:"No parts added to this service ticket"})})})]}),r.jsxs(fe,{children:[r.jsx(we,{children:r.jsx(Ne,{className:"text-lg",children:"Labor"})}),r.jsx(me,{children:e.labor.length>0?r.jsxs("div",{className:"space-y-3",children:[e.labor.map(c=>r.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("div",{className:"font-medium",children:c.description}),r.jsxs("p",{className:"text-sm text-muted-foreground",children:[c.hours," hours × ",De(c.rate),"/hr"]})]}),r.jsx("div",{className:"font-bold",children:De(c.total)})]},c.id)),r.jsx("div",{className:"flex justify-end p-2",children:r.jsxs("span",{className:"font-medium",children:["Labor Total: ",De(i.laborTotal)]})})]}):r.jsx("div",{className:"text-center py-6 text-muted-foreground",children:r.jsx("p",{children:"No labor added to this service ticket"})})})]}),r.jsx(fe,{className:"bg-muted/30",children:r.jsx(me,{className:"pt-6",children:r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:"Parts Total:"}),r.jsx("span",{children:De(i.partsTotal)})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:"Labor Total:"}),r.jsx("span",{children:De(i.laborTotal)})]}),r.jsxs("div",{className:"flex justify-between text-lg font-bold border-t pt-2",children:[r.jsx("span",{children:"Grand Total:"}),r.jsx("span",{children:De(i.grandTotal)})]})]})})})]}),r.jsx(Je,{value:"timeline",className:"space-y-4",children:r.jsxs(fe,{children:[r.jsx(we,{children:r.jsx(Ne,{className:"text-lg",children:"Service Timeline"})}),r.jsx(me,{children:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"relative pl-6 pb-6 border-l-2 border-muted",children:[r.jsx("div",{className:"absolute left-[-8px] top-0 w-4 h-4 rounded-full bg-blue-500"}),r.jsx("div",{className:"font-medium",children:"Ticket Created"}),r.jsx("div",{className:"text-sm text-muted-foreground",children:lt(e.createdAt)})]}),e.status!==ar.OPEN&&r.jsxs("div",{className:"relative pl-6 pb-6 border-l-2 border-muted",children:[r.jsx("div",{className:"absolute left-[-8px] top-0 w-4 h-4 rounded-full bg-yellow-500"}),r.jsx("div",{className:"font-medium",children:"Work Started"}),r.jsx("div",{className:"text-sm text-muted-foreground",children:new Date(e.createdAt.getTime()+864e5).toLocaleDateString()})]}),e.status===ar.WAITING_PARTS&&r.jsxs("div",{className:"relative pl-6 pb-6 border-l-2 border-muted",children:[r.jsx("div",{className:"absolute left-[-8px] top-0 w-4 h-4 rounded-full bg-orange-500"}),r.jsx("div",{className:"font-medium",children:"Waiting for Parts"}),r.jsx("div",{className:"text-sm text-muted-foreground",children:new Date(e.createdAt.getTime()+1728e5).toLocaleDateString()})]}),e.status===ar.COMPLETED&&r.jsxs("div",{className:"relative pl-6",children:[r.jsx("div",{className:"absolute left-[-8px] top-0 w-4 h-4 rounded-full bg-green-500"}),r.jsx("div",{className:"font-medium",children:"Service Completed"}),r.jsx("div",{className:"text-sm text-muted-foreground",children:e.completedDate?lt(e.completedDate):"Date not recorded"})]})]})})]})})]}),r.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t",children:[r.jsx(J,{variant:"outline",onClick:t,children:"Close"}),r.jsxs(J,{variant:"outline",onClick:o,children:[r.jsx(hu,{className:"h-4 w-4 mr-2"}),"Print PDF"]})]})]})})]})})}function ade(){const{tickets:e,createTicket:t,updateTicket:n,deleteTicket:a,updateTicketStatus:s}=l8(),{toast:i}=Ct(),[o,l]=w.useState(""),[c,d]=w.useState("all"),[f,u]=w.useState("all"),[m,h]=w.useState(!1),[x,g]=w.useState(!1),[p,v]=w.useState(!1),[y,b]=w.useState(!1),[j,C]=w.useState(null),E=L=>{switch(L){case ar.OPEN:return"bg-blue-50 text-blue-700 border-blue-200";case ar.IN_PROGRESS:return"bg-yellow-50 text-yellow-700 border-yellow-200";case ar.WAITING_PARTS:return"bg-orange-50 text-orange-700 border-orange-200";case ar.COMPLETED:return"bg-green-50 text-green-700 border-green-200";case ar.CANCELLED:return"bg-red-50 text-red-700 border-red-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},S=L=>{switch(L){case Qr.LOW:return"bg-green-50 text-green-700 border-green-200";case Qr.MEDIUM:return"bg-yellow-50 text-yellow-700 border-yellow-200";case Qr.HIGH:return"bg-orange-50 text-orange-700 border-orange-200";case Qr.URGENT:return"bg-red-50 text-red-700 border-red-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},N=e.filter(L=>L.title.toLowerCase().includes(o.toLowerCase())||L.description.toLowerCase().includes(o.toLowerCase())||L.customerId.toLowerCase().includes(o.toLowerCase())||L.id.toLowerCase().includes(o.toLowerCase())).filter(L=>c==="all"||L.status===c).filter(L=>f==="all"||L.priority===f),I=()=>{C(null),h(!0)},D=L=>{C(L),h(!0),g(!1)},T=L=>{C(L),g(!0)},A=L=>{C(L),v(!0)},_=async L=>{try{j?(await n(j.id,L),i({title:"Success",description:"Service ticket updated successfully"})):(await t(L),i({title:"Success",description:"Service ticket created successfully"})),h(!1),C(null)}catch{i({title:"Error",description:`Failed to ${j?"update":"create"} service ticket`,variant:"destructive"})}},k=L=>{i({title:"Customer Added",description:`${L.firstName} ${L.lastName} has been added.`}),C(null),b(!1),h(!0)};return r.jsxs("div",{className:"space-y-8",children:[y&&r.jsx(Wm,{onClose:()=>b(!1),onSuccess:k}),m&&r.jsx(Jle,{ticket:j||void 0,onSave:_,onCancel:()=>{h(!1),C(null)}}),x&&j&&r.jsx(rde,{ticket:j,onClose:()=>g(!1),onEdit:D}),p&&j&&r.jsx(nde,{ticket:j,onClose:()=>v(!1)}),r.jsx("div",{className:"ri-page-header",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"ri-page-title",children:"Service Operations"}),r.jsx("p",{className:"ri-page-description",children:"Manage service tickets and maintenance schedules"})]}),r.jsxs(J,{className:"shadow-sm",onClick:I,children:[r.jsx(Nt,{className:"h-4 w-4 mr-2"}),"New Service Ticket"]})]})}),r.jsxs("div",{className:"ri-stats-grid",children:[r.jsxs(fe,{className:"shadow-sm border-0 bg-gradient-to-br from-blue-50 to-blue-100/50",children:[r.jsxs(we,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(Ne,{className:"text-sm font-medium text-blue-900",children:"Total Tickets"}),r.jsx(Id,{className:"h-4 w-4 text-blue-600"})]}),r.jsxs(me,{children:[r.jsx("div",{className:"text-2xl font-bold text-blue-900",children:e.length}),r.jsxs("p",{className:"text-xs text-blue-600 flex items-center mt-1",children:[r.jsx(Ot,{className:"h-3 w-3 mr-1"}),"All service requests"]})]})]}),r.jsxs(fe,{className:"shadow-sm border-0 bg-gradient-to-br from-yellow-50 to-yellow-100/50",children:[r.jsxs(we,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(Ne,{className:"text-sm font-medium text-yellow-900",children:"In Progress"}),r.jsx(Id,{className:"h-4 w-4 text-yellow-600"})]}),r.jsxs(me,{children:[r.jsx("div",{className:"text-2xl font-bold text-yellow-900",children:e.filter(L=>L.status===ar.IN_PROGRESS).length}),r.jsxs("p",{className:"text-xs text-yellow-600 flex items-center mt-1",children:[r.jsx(er,{className:"h-3 w-3 mr-1"}),"Currently working"]})]})]}),r.jsxs(fe,{className:"shadow-sm border-0 bg-gradient-to-br from-orange-50 to-orange-100/50",children:[r.jsxs(we,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(Ne,{className:"text-sm font-medium text-orange-900",children:"Waiting Parts"}),r.jsx(Id,{className:"h-4 w-4 text-orange-600"})]}),r.jsxs(me,{children:[r.jsx("div",{className:"text-2xl font-bold text-orange-900",children:e.filter(L=>L.status===ar.WAITING_PARTS).length}),r.jsxs("p",{className:"text-xs text-orange-600 flex items-center mt-1",children:[r.jsx(er,{className:"h-3 w-3 mr-1"}),"Parts on order"]})]})]}),r.jsxs(fe,{className:"shadow-sm border-0 bg-gradient-to-br from-green-50 to-green-100/50",children:[r.jsxs(we,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(Ne,{className:"text-sm font-medium text-green-900",children:"Revenue"}),r.jsx(Mt,{className:"h-4 w-4 text-green-600"})]}),r.jsxs(me,{children:[r.jsx("div",{className:"text-2xl font-bold text-green-900",children:De(e.reduce((L,$)=>L+$.parts.reduce((M,B)=>M+B.total,0)+$.labor.reduce((M,B)=>M+B.total,0),0))}),r.jsxs("p",{className:"text-xs text-green-600 flex items-center mt-1",children:[r.jsx(Ot,{className:"h-3 w-3 mr-1"}),"Service revenue"]})]})]})]}),r.jsxs("div",{className:"flex gap-4",children:[r.jsxs("div",{className:"ri-search-bar",children:[r.jsx(Jn,{className:"ri-search-icon"}),r.jsx(je,{placeholder:"Search service tickets...",value:o,onChange:L=>l(L.target.value),className:"ri-search-input shadow-sm"})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs($e,{value:c,onValueChange:d,children:[r.jsx(Fe,{className:"w-40",children:r.jsx(Be,{placeholder:"Status"})}),r.jsxs(Me,{children:[r.jsx(K,{value:"all",children:"All Status"}),r.jsx(K,{value:ar.OPEN,children:"Open"}),r.jsx(K,{value:ar.IN_PROGRESS,children:"In Progress"}),r.jsx(K,{value:ar.WAITING_PARTS,children:"Waiting Parts"}),r.jsx(K,{value:ar.COMPLETED,children:"Completed"}),r.jsx(K,{value:ar.CANCELLED,children:"Cancelled"})]})]}),r.jsxs($e,{value:f,onValueChange:u,children:[r.jsx(Fe,{className:"w-40",children:r.jsx(Be,{placeholder:"Priority"})}),r.jsxs(Me,{children:[r.jsx(K,{value:"all",children:"All Priorities"}),r.jsx(K,{value:Qr.LOW,children:"Low"}),r.jsx(K,{value:Qr.MEDIUM,children:"Medium"}),r.jsx(K,{value:Qr.HIGH,children:"High"}),r.jsx(K,{value:Qr.URGENT,children:"Urgent"})]})]}),r.jsxs(J,{variant:"outline",className:"shadow-sm",children:[r.jsx(hs,{className:"h-4 w-4 mr-2"}),"More Filters"]})]})]}),r.jsxs(fe,{className:"shadow-sm",children:[r.jsxs(we,{children:[r.jsx(Ne,{className:"text-xl",children:"Service Tickets"}),r.jsx(Ue,{children:"Manage service requests and maintenance schedules"})]}),r.jsx(me,{children:r.jsxs("div",{className:"space-y-4",children:[N.map(L=>{var $;return r.jsxs("div",{className:"ri-table-row",children:[r.jsx("div",{className:"flex items-center space-x-4 flex-1",children:r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[r.jsx("h3",{className:"font-semibold text-foreground",children:L.title}),r.jsx(ze,{className:He("ri-badge-status",S(L.priority)),children:L.priority.toUpperCase()}),r.jsx(ze,{className:He("ri-badge-status",E(L.status)),children:L.status.replace("_"," ").toUpperCase()})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm text-muted-foreground",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx(wa,{className:"h-3 w-3 mr-2 text-blue-500"}),r.jsx("span",{className:"font-medium",children:"Customer:"}),r.jsx("span",{className:"ml-1",children:L.customerId})]}),r.jsxs("div",{className:"flex items-center",children:[r.jsx(wa,{className:"h-3 w-3 mr-2 text-green-500"}),r.jsx("span",{className:"font-medium",children:"Assigned:"}),r.jsx("span",{className:"ml-1",children:L.assignedTo||"Unassigned"})]}),r.jsxs("div",{className:"flex items-center",children:[r.jsx(Mr,{className:"h-3 w-3 mr-2 text-purple-500"}),r.jsx("span",{className:"font-medium",children:"Scheduled:"}),r.jsx("span",{className:"ml-1",children:L.scheduledDate?lt(L.scheduledDate):"Not scheduled"})]}),r.jsxs("div",{className:"flex items-center",children:[r.jsx(er,{className:"h-3 w-3 mr-2 text-orange-500"}),r.jsx("span",{className:"font-medium",children:"Created:"}),r.jsx("span",{className:"ml-1",children:lt(L.createdAt)})]})]}),r.jsxs("div",{className:"mt-2 bg-muted/30 p-2 rounded-md",children:[r.jsx("p",{className:"text-sm text-muted-foreground",children:L.description}),L.notes&&r.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:[r.jsx("span",{className:"font-medium",children:"Notes:"})," ",L.notes]})]}),r.jsxs("div",{className:"flex items-center space-x-4 mt-3 text-sm",children:[r.jsxs("span",{className:"bg-blue-50 text-blue-700 px-2 py-1 rounded-md",children:[r.jsx("span",{className:"font-medium",children:"Parts:"})," ",De(L.parts.reduce((M,B)=>M+B.total,0))]}),r.jsxs("span",{className:"bg-green-50 text-green-700 px-2 py-1 rounded-md",children:[r.jsx("span",{className:"font-medium",children:"Labor:"})," ",De(L.labor.reduce((M,B)=>M+B.total,0))]}),r.jsxs("span",{className:"bg-purple-50 text-purple-700 px-2 py-1 rounded-md font-semibold",children:[r.jsx("span",{className:"font-medium",children:"Total:"})," ",De(L.parts.reduce((M,B)=>M+B.total,0)+L.labor.reduce((M,B)=>M+B.total,0))]})]})]})}),r.jsxs("div",{className:"ri-action-buttons",children:[r.jsx(J,{variant:"outline",size:"sm",className:"shadow-sm",onClick:()=>T(L),children:"View"}),r.jsx(J,{variant:"outline",size:"sm",className:"shadow-sm",onClick:()=>D(L),children:"Edit"}),(($=L.customFields)==null?void 0:$.customerPortalAccess)!==!1&&r.jsx(J,{variant:"outline",size:"sm",className:"shadow-sm",onClick:()=>A(L),children:"Customer View"})]})]},L.id)}),N.length===0&&r.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[r.jsx(Id,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),r.jsx("p",{children:"No service tickets found"}),r.jsx("p",{className:"text-sm",children:"Try adjusting your search or filters"})]})]})})]})]})}function sde(){return r.jsx(Ka,{children:r.jsx(Vt,{path:"/*",element:r.jsx(ade,{})})})}function I8(){const[e,t]=w.useState([]),[n,a]=w.useState(!1);w.useEffect(()=>{s()},[]);const s=()=>{const p=un("renter-insight-deliveries",[{id:"1",customerId:"cust-1",vehicleId:"veh-1",status:Ut.SCHEDULED,scheduledDate:new Date("2024-01-25"),address:{street:"123 Main St",city:"Springfield",state:"IL",zipCode:"62701",country:"USA"},driver:"Driver-001",notes:"Customer prefers morning delivery",customFields:{contactPhone:"(555) 123-4567",contactEmail:"customer@example.com",sendSMSUpdates:!0,sendEmailUpdates:!0,estimatedArrival:"10:00"},createdAt:new Date("2024-01-15"),updatedAt:new Date("2024-01-18")},{id:"2",customerId:"cust-2",vehicleId:"veh-2",status:Ut.IN_TRANSIT,scheduledDate:new Date("2024-01-20"),deliveredDate:void 0,address:{street:"456 Oak Ave",city:"Chicago",state:"IL",zipCode:"60601",country:"USA"},driver:"Driver-002",notes:"Call customer 30 minutes before arrival",customFields:{contactPhone:"(555) 987-6543",contactEmail:"customer2@example.com",sendSMSUpdates:!0,sendEmailUpdates:!0,estimatedArrival:"14:30",departureTime:"2024-01-20T08:00:00",departureNotes:"Left dealership on schedule",customerNotified:"2024-01-20T08:15:00",notificationMethod:"SMS",etaUpdated:"2024-01-20T10:30:00"},createdAt:new Date("2024-01-12"),updatedAt:new Date("2024-01-20")}]);t(p)},i=p=>{Wr("renter-insight-deliveries",p)};return{deliveries:e,loading:n,getDeliveriesByCustomerId:p=>e.filter(v=>v.customerId===p),getDeliveriesByVehicleId:p=>e.filter(v=>v.vehicleId===p),getDeliveryById:p=>e.find(v=>v.id===p),createDelivery:async p=>{a(!0);try{const v={id:Math.random().toString(36).substr(2,9),customerId:p.customerId||"",vehicleId:p.vehicleId||"",status:p.status||Ut.SCHEDULED,scheduledDate:p.scheduledDate||new Date,deliveredDate:p.deliveredDate,address:p.address||{street:"",city:"",state:"",zipCode:"",country:"USA"},driver:p.driver||"",notes:p.notes||"",customFields:p.customFields||{},createdAt:new Date,updatedAt:new Date},y=[...e,v];return t(y),i(y),v}finally{a(!1)}},updateDelivery:async(p,v)=>{const y=e.map(b=>b.id===p?{...b,...v,updatedAt:new Date}:b);t(y),i(y)},deleteDelivery:async p=>{const v=e.filter(y=>y.id!==p);t(v),i(v)},updateDeliveryStatus:async(p,v)=>{const y=e.map(b=>b.id===p?{...b,status:v,deliveredDate:v===Ut.DELIVERED?new Date:b.deliveredDate,updatedAt:new Date}:b);t(y),i(y)},sendNotification:async(p,v,y)=>{if(!e.find(C=>C.id===p))return;const j=e.map(C=>C.id===p?{...C,customFields:{...C.customFields,customerNotified:new Date().toISOString(),notificationMethod:v==="sms"?"SMS":"Email",lastNotificationMessage:y},updatedAt:new Date}:C);return t(j),i(j),await new Promise(C=>setTimeout(C,1e3)),!0},updateETA:async(p,v)=>{if(!e.find(j=>j.id===p))return;const b=e.map(j=>j.id===p?{...j,customFields:{...j.customFields,estimatedArrival:v,etaUpdated:new Date().toISOString()},updatedAt:new Date}:j);t(b),i(b)},addDeliveryPhotos:async(p,v,y)=>{if(!e.find(E=>E.id===p))return;const j=v.map((E,S)=>({url:E,caption:y[S]||""})),C=e.map(E=>{var S,N;return E.id===p?{...E,customFields:{...E.customFields,deliveryPhotos:[...((S=E.customFields)==null?void 0:S.deliveryPhotos)||[],...v],photoDetails:[...((N=E.customFields)==null?void 0:N.photoDetails)||[],...j]},updatedAt:new Date}:E});t(C),i(C)}}}function D8({delivery:e,vehicles:t,customers:n,onSave:a,onCancel:s}){var y,b,j,C,E,S,N,I,D,T,A,_,k;const{toast:i}=Ct(),[o,l]=w.useState(!1),[c,d]=w.useState(!1),[f,u]=w.useState({customerId:"",vehicleId:"",status:Ut.SCHEDULED,scheduledDate:new Date,address:{street:"",city:"",state:"",zipCode:"",country:"USA"},driver:"",notes:"",customFields:{contactPhone:"",contactEmail:"",sendSMSUpdates:!0,sendEmailUpdates:!0,estimatedArrival:"",departureTime:"",departureNotes:"",deliveryNotes:"",deliveryPhotos:[]}});w.useEffect(()=>{var L,$,M,B,U,W,q,R,V;e&&u({...e,customFields:{...e.customFields,contactPhone:((L=e.customFields)==null?void 0:L.contactPhone)||"",contactEmail:(($=e.customFields)==null?void 0:$.contactEmail)||"",sendSMSUpdates:((M=e.customFields)==null?void 0:M.sendSMSUpdates)!==!1,sendEmailUpdates:((B=e.customFields)==null?void 0:B.sendEmailUpdates)!==!1,estimatedArrival:((U=e.customFields)==null?void 0:U.estimatedArrival)||"",departureTime:((W=e.customFields)==null?void 0:W.departureTime)||"",departureNotes:((q=e.customFields)==null?void 0:q.departureNotes)||"",deliveryNotes:((R=e.customFields)==null?void 0:R.deliveryNotes)||"",deliveryPhotos:((V=e.customFields)==null?void 0:V.deliveryPhotos)||[]}})},[e]);const{getRootProps:m,getInputProps:h}=ux({accept:{"image/*":[]},onDrop:L=>{const $=L.map(M=>URL.createObjectURL(M));u(M=>{var B;return{...M,customFields:{...M.customFields,deliveryPhotos:[...((B=M.customFields)==null?void 0:B.deliveryPhotos)||[],...$]}}}),i({title:"Photos Added",description:`Added ${L.length} delivery photos`})}}),x=L=>{L==="__add_new_customer__"?d(!0):u($=>({...$,customerId:L}))},g=L=>{u($=>({...$,customerId:L.id})),d(!1),i({title:"Customer Added",description:`${L.firstName} ${L.lastName} has been added as a customer.`})},p=async L=>{var $,M,B,U;if(L.preventDefault(),!f.customerId||!f.vehicleId||!f.scheduledDate){i({title:"Validation Error",description:"Please fill in all required fields",variant:"destructive"});return}if(!(($=f.address)!=null&&$.street)||!((M=f.address)!=null&&M.city)||!((B=f.address)!=null&&B.state)||!((U=f.address)!=null&&U.zipCode)){i({title:"Validation Error",description:"Please provide a complete delivery address",variant:"destructive"});return}l(!0);try{await a(f),i({title:"Success",description:`Delivery ${e?"updated":"scheduled"} successfully`})}catch{i({title:"Error",description:`Failed to ${e?"update":"schedule"} delivery`,variant:"destructive"})}finally{l(!1)}},v=L=>{u($=>{var M,B;return{...$,customFields:{...$.customFields,deliveryPhotos:((B=(M=$.customFields)==null?void 0:M.deliveryPhotos)==null?void 0:B.filter(U=>U!==L))||[]}}})};return r.jsxs("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:[c&&r.jsx(Wm,{onClose:()=>d(!1),onSuccess:g}),r.jsxs(fe,{className:"w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[r.jsx(we,{children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx(Ne,{children:e?"Edit Delivery":"Schedule Delivery"}),r.jsx(Ue,{children:e?"Update delivery details":"Schedule a new delivery"})]}),r.jsx(J,{variant:"ghost",size:"sm",onClick:s,children:r.jsx($t,{className:"h-4 w-4"})})]})}),r.jsx(me,{children:r.jsxs("form",{onSubmit:p,className:"space-y-6",children:[r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"text-lg font-semibold",children:"Delivery Information"}),r.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"customerId",children:"Customer *"}),r.jsxs($e,{value:f.customerId,onValueChange:x,children:[r.jsx(Fe,{children:r.jsx(Be,{placeholder:"Select customer"})}),r.jsxs(Me,{className:"z-50",children:[r.jsx("div",{className:"px-2 py-1.5",children:r.jsxs(J,{variant:"outline",size:"sm",className:"w-full justify-start",onClick:()=>x("__add_new_customer__"),children:[r.jsx(Nt,{className:"h-3.5 w-3.5 mr-2"}),"Add New Customer"]})}),r.jsx("div",{className:"px-2 py-1 border-t"}),n.map(L=>r.jsx(K,{value:L.id,children:r.jsxs("div",{className:"flex flex-col",children:[r.jsxs("span",{children:[L.firstName," ",L.lastName]}),r.jsx("span",{className:"text-xs text-muted-foreground",children:L.phone})]})},L.id)),n.length===0&&r.jsx("div",{className:"px-2 py-4 text-center text-sm text-muted-foreground",children:"No customers found"})]})]})]}),r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"vehicleId",children:"Vehicle *"}),r.jsxs($e,{value:f.vehicleId,onValueChange:L=>u($=>({...$,vehicleId:L})),children:[r.jsx(Fe,{children:r.jsx(Be,{placeholder:"Select vehicle"})}),r.jsx(Me,{className:"z-50",children:t.map(L=>r.jsxs(K,{value:L.id,children:[L.year," ",L.make," ",L.model]},L.id))})]})]})]}),r.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"scheduledDate",children:"Scheduled Date *"}),r.jsx(je,{id:"scheduledDate",type:"date",value:f.scheduledDate?new Date(f.scheduledDate).toISOString().split("T")[0]:"",onChange:L=>u($=>({...$,scheduledDate:L.target.value?new Date(L.target.value):new Date}))})]}),r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"estimatedArrival",children:"Estimated Arrival Time"}),r.jsx(je,{id:"estimatedArrival",type:"time",value:((y=f.customFields)==null?void 0:y.estimatedArrival)||"",onChange:L=>u($=>({...$,customFields:{...$.customFields,estimatedArrival:L.target.value}}))})]})]}),r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"status",children:"Status"}),r.jsxs($e,{value:f.status,onValueChange:L=>u($=>({...$,status:L})),children:[r.jsx(Fe,{children:r.jsx(Be,{})}),r.jsxs(Me,{className:"z-50",children:[r.jsx(K,{value:Ut.SCHEDULED,children:"Scheduled"}),r.jsx(K,{value:Ut.IN_TRANSIT,children:"In Transit"}),r.jsx(K,{value:Ut.DELIVERED,children:"Delivered"}),r.jsx(K,{value:Ut.CANCELLED,children:"Cancelled"})]})]})]}),r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"driver",children:"Driver"}),r.jsx(je,{id:"driver",value:f.driver||"",onChange:L=>u($=>({...$,driver:L.target.value})),placeholder:"Driver name"})]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"text-lg font-semibold",children:"Delivery Address"}),r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"street",children:"Street Address *"}),r.jsx(je,{id:"street",value:((b=f.address)==null?void 0:b.street)||"",onChange:L=>u($=>({...$,address:{...$.address,street:L.target.value}})),placeholder:"123 Main St"})]}),r.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"city",children:"City *"}),r.jsx(je,{id:"city",value:((j=f.address)==null?void 0:j.city)||"",onChange:L=>u($=>({...$,address:{...$.address,city:L.target.value}})),placeholder:"City"})]}),r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"state",children:"State *"}),r.jsx(je,{id:"state",value:((C=f.address)==null?void 0:C.state)||"",onChange:L=>u($=>({...$,address:{...$.address,state:L.target.value}})),placeholder:"State"})]}),r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"zipCode",children:"Zip Code *"}),r.jsx(je,{id:"zipCode",value:((E=f.address)==null?void 0:E.zipCode)||"",onChange:L=>u($=>({...$,address:{...$.address,zipCode:L.target.value}})),placeholder:"Zip Code"})]})]}),r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"country",children:"Country"}),r.jsx(je,{id:"country",value:((S=f.address)==null?void 0:S.country)||"USA",onChange:L=>u($=>({...$,address:{...$.address,country:L.target.value}})),placeholder:"Country"})]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"text-lg font-semibold",children:"Contact Information"}),r.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"contactPhone",children:"Contact Phone"}),r.jsx(je,{id:"contactPhone",value:((N=f.customFields)==null?void 0:N.contactPhone)||"",onChange:L=>u($=>({...$,customFields:{...$.customFields,contactPhone:L.target.value}})),placeholder:"(555) 123-4567"})]}),r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"contactEmail",children:"Contact Email"}),r.jsx(je,{id:"contactEmail",type:"email",value:((I=f.customFields)==null?void 0:I.contactEmail)||"",onChange:L=>u($=>({...$,customFields:{...$.customFields,contactEmail:L.target.value}})),placeholder:"customer@example.com"})]})]}),r.jsxs("div",{className:"flex flex-col space-y-2",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(St,{id:"sendSMSUpdates",checked:((D=f.customFields)==null?void 0:D.sendSMSUpdates)!==!1,onCheckedChange:L=>u($=>({...$,customFields:{...$.customFields,sendSMSUpdates:!!L}}))}),r.jsx(Z,{htmlFor:"sendSMSUpdates",children:"Send SMS updates"})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(St,{id:"sendEmailUpdates",checked:((T=f.customFields)==null?void 0:T.sendEmailUpdates)!==!1,onCheckedChange:L=>u($=>({...$,customFields:{...$.customFields,sendEmailUpdates:!!L}}))}),r.jsx(Z,{htmlFor:"sendEmailUpdates",children:"Send email updates"})]})]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"text-lg font-semibold",children:"Delivery Details"}),(f.status===Ut.IN_TRANSIT||f.status===Ut.DELIVERED)&&r.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"departureTime",children:"Departure Time"}),r.jsx(je,{id:"departureTime",type:"datetime-local",value:((A=f.customFields)==null?void 0:A.departureTime)||"",onChange:L=>u($=>({...$,customFields:{...$.customFields,departureTime:L.target.value}}))})]}),r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"departureNotes",children:"Departure Notes"}),r.jsx(je,{id:"departureNotes",value:((_=f.customFields)==null?void 0:_.departureNotes)||"",onChange:L=>u($=>({...$,customFields:{...$.customFields,departureNotes:L.target.value}})),placeholder:"Notes about departure"})]})]}),f.status===Ut.DELIVERED&&r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"deliveredDate",children:"Delivery Date"}),r.jsx(je,{id:"deliveredDate",type:"datetime-local",value:f.deliveredDate?new Date(f.deliveredDate).toISOString().slice(0,16):"",onChange:L=>u($=>({...$,deliveredDate:L.target.value?new Date(L.target.value):void 0}))})]}),r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"notes",children:"Delivery Notes"}),r.jsx(Xt,{id:"notes",value:f.notes||"",onChange:L=>u($=>({...$,notes:L.target.value})),placeholder:"Add any notes about this delivery",rows:3})]})]}),(f.status===Ut.DELIVERED||f.status===Ut.IN_TRANSIT)&&r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"text-lg font-semibold",children:"Delivery Photos"}),r.jsxs("div",{...m(),className:"border-2 border-dashed rounded-lg p-6 text-center cursor-pointer hover:bg-muted/10",children:[r.jsx("input",{...h()}),r.jsxs("div",{className:"flex flex-col items-center",children:[r.jsx(Camera,{className:"h-8 w-8 mb-2 text-muted-foreground"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Drag & drop photos here, or click to select files"}),r.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Upload photos for delivery verification"})]})]}),((k=f.customFields)==null?void 0:k.deliveryPhotos)&&f.customFields.deliveryPhotos.length>0&&r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mt-4",children:f.customFields.deliveryPhotos.map((L,$)=>r.jsxs("div",{className:"relative group",children:[r.jsx("img",{src:L,alt:`Delivery photo ${$+1}`,className:"h-24 w-full object-cover rounded-md"}),r.jsx(J,{type:"button",variant:"destructive",size:"sm",className:"absolute top-1 right-1 opacity-0 group-hover:opacity-100 transition-opacity",onClick:()=>v(L),children:r.jsx($t,{className:"h-3 w-3"})})]},$))})]}),r.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t",children:[r.jsx(J,{type:"button",variant:"outline",onClick:s,disabled:o,children:"Cancel"}),r.jsx(J,{type:"submit",disabled:o,children:o?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),e?"Updating...":"Scheduling..."]}):r.jsxs(r.Fragment,{children:[r.jsx(Pr,{className:"h-4 w-4 mr-2"}),e?"Update":"Schedule"," Delivery"]})})]})]})})]})]})}function ide({delivery:e,onAddMilestone:t}){const a=(()=>{try{const s=[],i=e.customFields||{},o=c=>c?new Date(c):new Date;return s.push({id:"scheduled",title:"Delivery Scheduled",description:`Scheduled for ${lt(e.scheduledDate)}`,date:o(e.createdAt),icon:Mr}),[Ut.IN_TRANSIT,Ut.DELIVERED].includes(e.status)&&(s.push({id:"preparation",title:"Preparation Complete",description:"Vehicle prepared and ready for delivery",date:new Date(new Date(e.scheduledDate).getTime()-864e5),icon:$r}),s.push({id:"in_transit",title:"In Transit",description:i.departureNotes||"Vehicle has left the dealership",date:o(i.departureTime),icon:is})),i.etaUpdated&&i.estimatedArrival&&s.push({id:"eta_update",title:"ETA Updated",description:`New estimated arrival: ${i.estimatedArrival}`,date:o(i.etaUpdated),icon:er}),i.customerNotified&&s.push({id:"customer_notified",title:"Customer Notified",description:`${i.notificationMethod||"SMS"} notification sent to customer`,date:o(i.customerNotified),icon:nn}),e.status===Ut.DELIVERED&&(s.push({id:"arrived",title:"Arrived at Destination",description:"Vehicle arrived at delivery location",date:o(e.deliveredDate),icon:Cl}),s.push({id:"delivered",title:"Delivery Confirmed",description:i.deliveryNotes||"Delivery completed successfully",date:o(e.deliveredDate),icon:$r}),Array.isArray(i.deliveryPhotos)&&i.deliveryPhotos.length>0&&s.push({id:"photos",title:"Delivery Photos",description:`${i.deliveryPhotos.length} photo(s) captured`,date:o(e.deliveredDate),icon:ul})),Array.from(new Map(s.map(c=>[c.id,c])).values()).sort((c,d)=>c.date.getTime()-d.date.getTime())}catch(s){return console.error("Failed to generate milestones:",s),[]}})();return r.jsxs(fe,{className:"shadow-sm",children:[r.jsxs(we,{children:[r.jsxs(Ne,{className:"flex items-center",children:[r.jsx(is,{className:"h-5 w-5 mr-2 text-primary"}),"Delivery Timeline"]}),r.jsx(Ue,{children:"Track the progress of this delivery"})]}),r.jsx(me,{children:r.jsxs("div",{className:"relative pl-8 space-y-8",children:[r.jsx("div",{className:"absolute left-3 top-0 bottom-0 w-px bg-border"}),a.map((s,i)=>{var l;const o=s.icon;return r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:He("absolute left-[-21px] w-6 h-6 rounded-full flex items-center justify-center","bg-primary text-primary-foreground"),children:r.jsx(o,{className:"h-3 w-3"})}),r.jsxs("div",{className:"mb-1 flex items-center",children:[r.jsx("h3",{className:"text-base font-semibold",children:s.title}),r.jsx(ze,{className:"ml-2 text-xs",variant:"outline",children:lt(s.date)})]}),r.jsx("p",{className:"text-sm text-muted-foreground",children:s.description}),s.id==="photos"&&((l=e.customFields)==null?void 0:l.deliveryPhotos)&&r.jsx("div",{className:"grid grid-cols-3 gap-2 mt-2",children:e.customFields.deliveryPhotos.map((c,d)=>r.jsx("img",{src:c,alt:`Delivery photo ${d+1}`,className:"h-20 w-full object-cover rounded-md"},d))})]},s.id)})]})})]})}function ode({delivery:e,vehicle:t,onClose:n,onEdit:a,onSendNotification:s}){var h,x,g,p,v,y,b,j,C;const{toast:i}=Ct(),[o,l]=w.useState("details"),[c,d]=w.useState(!1),f=E=>{switch(E){case Ut.SCHEDULED:return"bg-blue-50 text-blue-700 border-blue-200";case Ut.IN_TRANSIT:return"bg-yellow-50 text-yellow-700 border-yellow-200";case Ut.DELIVERED:return"bg-green-50 text-green-700 border-green-200";case Ut.CANCELLED:return"bg-red-50 text-red-700 border-red-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},u=async E=>{if(s){d(!0);try{await s(e.id,E),i({title:"Notification Sent",description:`${E==="sms"?"SMS":"Email"} notification sent successfully`})}catch{i({title:"Error",description:`Failed to send ${E==="sms"?"SMS":"email"} notification`,variant:"destructive"})}finally{d(!1)}}},m=()=>{var E,S;try{const N=new It;if(N.setFontSize(20),N.text("Delivery Information Sheet",105,15,{align:"center"}),N.setFontSize(12),N.text(`Delivery #: ${e.id}`,20,30),N.text(`Status: ${e.status.replace("_"," ")}`,20,40),N.text(`Scheduled Date: ${lt(e.scheduledDate)}`,20,50),N.setFontSize(16),N.text("Vehicle Information",20,65),N.setFontSize(12),t?(N.text(`Vehicle: ${t.year} ${t.make} ${t.model}`,20,75),N.text(`VIN: ${t.vin}`,20,85)):N.text(`Vehicle ID: ${e.vehicleId}`,20,75),N.setFontSize(16),N.text("Delivery Address",20,105),N.setFontSize(12),N.text(`${e.address.street}`,20,115),N.text(`${e.address.city}, ${e.address.state} ${e.address.zipCode}`,20,125),N.text(`${e.address.country}`,20,135),N.setFontSize(16),N.text("Contact Information",20,155),N.setFontSize(12),N.text(`Customer ID: ${e.customerId}`,20,165),(E=e.customFields)!=null&&E.contactPhone&&N.text(`Phone: ${e.customFields.contactPhone}`,20,175),(S=e.customFields)!=null&&S.contactEmail&&N.text(`Email: ${e.customFields.contactEmail}`,20,185),e.notes){N.setFontSize(16),N.text("Delivery Notes",20,205),N.setFontSize(12);const I=N.splitTextToSize(e.notes,170);N.text(I,20,215)}N.setFontSize(16),N.text("Signatures",20,245),N.setFontSize(12),N.text("Driver: _______________________________",20,255),N.text("Customer: _____________________________",20,270),N.save(`delivery-${e.id}.pdf`),i({title:"PDF Generated",description:"Delivery information sheet has been downloaded"})}catch(N){console.error("Error generating PDF:",N),i({title:"Error",description:"Failed to generate PDF",variant:"destructive"})}};return r.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:r.jsxs(fe,{className:"w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[r.jsx(we,{children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx(Ne,{className:"text-xl",children:"Delivery Details"}),r.jsxs(Ue,{children:["Delivery #",e.id]})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsxs(J,{onClick:()=>a(e),size:"sm",children:[r.jsx(Br,{className:"h-4 w-4 mr-2"}),"Edit Delivery"]}),r.jsx(J,{variant:"ghost",size:"sm",onClick:n,children:r.jsx($t,{className:"h-4 w-4"})})]})]})}),r.jsxs(me,{children:[r.jsxs(lr,{value:o,onValueChange:l,className:"space-y-4",children:[r.jsxs(or,{className:"grid w-full grid-cols-3",children:[r.jsx(Ke,{value:"details",children:"Details"}),r.jsx(Ke,{value:"timeline",children:"Timeline"}),r.jsx(Ke,{value:"photos",children:"Photos"})]}),r.jsxs(Je,{value:"details",className:"space-y-6",children:[r.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[r.jsx(ze,{className:He("ri-badge-status",f(e.status)),children:e.status.replace("_"," ").toUpperCase()}),e.driver&&r.jsxs(ze,{variant:"outline",children:["Driver: ",e.driver]})]}),r.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Customer"}),r.jsx("p",{className:"font-medium",children:e.customerId})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Vehicle"}),r.jsx("p",{className:"font-medium",children:t?`${t.year} ${t.make} ${t.model}`:e.vehicleId})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Scheduled Date"}),r.jsx("p",{className:"font-medium",children:lt(e.scheduledDate)})]}),e.deliveredDate&&r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Delivered Date"}),r.jsx("p",{className:"font-medium",children:lt(e.deliveredDate)})]}),((h=e.customFields)==null?void 0:h.estimatedArrival)&&r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Estimated Arrival"}),r.jsx("p",{className:"font-medium",children:e.customFields.estimatedArrival})]}),((x=e.customFields)==null?void 0:x.departureTime)&&r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Departure Time"}),r.jsx("p",{className:"font-medium",children:new Date(e.customFields.departureTime).toLocaleString()})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Delivery Address"}),r.jsxs("div",{className:"mt-1 p-3 bg-muted/30 rounded-md",children:[r.jsx("p",{children:e.address.street}),r.jsxs("p",{children:[e.address.city,", ",e.address.state," ",e.address.zipCode]}),r.jsx("p",{children:e.address.country})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Contact Information"}),r.jsxs("div",{className:"mt-1 grid gap-2 md:grid-cols-2",children:[((g=e.customFields)==null?void 0:g.contactPhone)&&r.jsxs("div",{className:"flex items-center space-x-2 p-2 bg-muted/30 rounded-md",children:[r.jsx(Mm,{className:"h-4 w-4 text-muted-foreground"}),r.jsx("span",{children:e.customFields.contactPhone})]}),((p=e.customFields)==null?void 0:p.contactEmail)&&r.jsxs("div",{className:"flex items-center space-x-2 p-2 bg-muted/30 rounded-md",children:[r.jsx(en,{className:"h-4 w-4 text-muted-foreground"}),r.jsx("span",{children:e.customFields.contactEmail})]})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Notification Preferences"}),r.jsxs("div",{className:"mt-1 grid gap-2 md:grid-cols-2",children:[r.jsxs("div",{className:"flex items-center space-x-2 p-2 bg-muted/30 rounded-md",children:[r.jsx(nn,{className:"h-4 w-4 text-muted-foreground"}),r.jsxs("span",{children:["SMS Updates: ",((v=e.customFields)==null?void 0:v.sendSMSUpdates)!==!1?"Enabled":"Disabled"]})]}),r.jsxs("div",{className:"flex items-center space-x-2 p-2 bg-muted/30 rounded-md",children:[r.jsx(en,{className:"h-4 w-4 text-muted-foreground"}),r.jsxs("span",{children:["Email Updates: ",((y=e.customFields)==null?void 0:y.sendEmailUpdates)!==!1?"Enabled":"Disabled"]})]})]})]}),e.notes&&r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Notes"}),r.jsx("div",{className:"mt-1 p-3 bg-muted/30 rounded-md",children:r.jsx("p",{className:"whitespace-pre-wrap",children:e.notes})})]}),(e.status===Ut.SCHEDULED||e.status===Ut.IN_TRANSIT)&&r.jsxs("div",{className:"flex flex-wrap gap-2",children:[r.jsxs(J,{variant:"outline",size:"sm",onClick:()=>u("sms"),disabled:c||!((b=e.customFields)!=null&&b.contactPhone),children:[r.jsx(nn,{className:"h-4 w-4 mr-2"}),"Send SMS Update"]}),r.jsxs(J,{variant:"outline",size:"sm",onClick:()=>u("email"),disabled:c||!((j=e.customFields)!=null&&j.contactEmail),children:[r.jsx(en,{className:"h-4 w-4 mr-2"}),"Send Email Update"]}),r.jsxs(J,{variant:"outline",size:"sm",onClick:m,children:[r.jsx(hu,{className:"h-4 w-4 mr-2"}),"Print Delivery Sheet"]})]})]}),r.jsx(Je,{value:"timeline",children:r.jsx(ide,{delivery:e})}),r.jsxs(Je,{value:"photos",className:"space-y-4",children:[r.jsx("h3",{className:"text-lg font-semibold",children:"Delivery Photos"}),(C=e.customFields)!=null&&C.deliveryPhotos&&e.customFields.deliveryPhotos.length>0?r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:e.customFields.deliveryPhotos.map((E,S)=>r.jsx("div",{className:"overflow-hidden rounded-md",children:r.jsx("img",{src:E,alt:`Delivery photo ${S+1}`,className:"w-full h-auto object-cover"})},S))}):r.jsxs("div",{className:"text-center py-12 text-muted-foreground border-2 border-dashed rounded-lg",children:[r.jsx(ul,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),r.jsx("p",{children:"No delivery photos available"}),e.status!==Ut.DELIVERED&&r.jsx("p",{className:"text-sm",children:"Photos will be added during delivery"})]})]})]}),r.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t mt-6",children:[r.jsx(J,{variant:"outline",onClick:n,children:"Close"}),r.jsxs(J,{onClick:()=>a(e),children:[r.jsx(Br,{className:"h-4 w-4 mr-2"}),"Edit Delivery"]})]})]})]})})}function lde({delivery:e,onSend:t,onCancel:n}){var j,C,E;const{toast:a}=Ct(),[s,i]=w.useState(!1),[o,l]=w.useState("sms"),[c,d]=w.useState(""),[f,u]=w.useState(""),[m,h]=w.useState(""),x=((j=e.customer)==null?void 0:j.name)||"Customer",g=e.vehicle?`${e.vehicle.year||""} ${e.vehicle.make||""} ${e.vehicle.model||""}`.trim():"your Home/RV",p=!!((C=e.customer)!=null&&C.phone),v=!!((E=e.customer)!=null&&E.email),y=()=>{try{const S=f||new Date(e.scheduledDate).toLocaleDateString(),N=c||"the scheduled time";return o==="sms"?`Hi ${x}, your delivery of ${g} is scheduled for ${S} at ${N}. Reply HELP for assistance or STOP to opt out.`:`Dear ${x},

We're writing to confirm the delivery of ${g} scheduled for ${S} at ${N}.

If you have any questions or need to reschedule, please contact our delivery team.

Thank you,
The Delivery Team`}catch(S){return console.error("Failed to generate default message:",S),""}};w.useEffect(()=>{try{const S=y();h(S)}catch(S){console.error("Message generation error:",S)}},[o,c,f]);const b=async S=>{if(S.preventDefault(),!m.trim()){a({title:"Validation Error",description:"Please enter a message",variant:"destructive"});return}if(!f||!c){a({title:"Missing ETA",description:"Please select both a date and time for estimated arrival.",variant:"destructive"});return}if(o==="sms"&&!p){a({title:"Missing Phone Number",description:"Customer does not have a valid phone number for SMS.",variant:"destructive"});return}if(o==="email"&&!v){a({title:"Missing Email Address",description:"Customer does not have a valid email address.",variant:"destructive"});return}i(!0);try{await t(e.id,{type:o,estimatedArrival:`${f}T${c}`,message:m,updateDelivery:!0}),a({title:"Notification Sent",description:`${o.toUpperCase()} sent successfully.`}),n()}catch(N){console.error("Notification send failed:",N),a({title:"Error",description:`Failed to send ${o==="sms"?"SMS":"Email"} notification`,variant:"destructive"})}finally{i(!1)}};return r.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:r.jsxs(fe,{className:"w-full max-w-md",children:[r.jsx(we,{children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx(Ne,{children:"Send ETA Notification"}),r.jsx(Ue,{children:"Notify the customer about delivery status"})]}),r.jsx(J,{variant:"ghost",size:"sm",onClick:n,children:r.jsx($t,{className:"h-4 w-4"})})]})}),r.jsxs(me,{children:[r.jsxs("div",{className:"text-sm mb-4 text-muted-foreground",children:["Delivering to: ",r.jsx("strong",{children:x}),r.jsx("br",{}),"Home/RV: ",r.jsx("strong",{children:g}),r.jsx("br",{}),o==="sms"&&!p&&r.jsx("span",{className:"text-red-500 text-xs",children:"⚠ No valid phone number on file"}),o==="email"&&!v&&r.jsx("span",{className:"text-red-500 text-xs",children:"⚠ No valid email address on file"})]}),r.jsxs("form",{onSubmit:b,className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"notificationType",children:"Notification Type"}),r.jsxs($e,{value:o,onValueChange:S=>l(S),children:[r.jsx(Fe,{children:r.jsx(Be,{})}),r.jsxs(Me,{className:"z-50",children:[r.jsx(K,{value:"sms",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx(nn,{className:"h-4 w-4 mr-2"}),r.jsx("span",{children:"SMS"})]})}),r.jsx(K,{value:"email",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx(en,{className:"h-4 w-4 mr-2"}),r.jsx("span",{children:"Email"})]})})]})]})]}),r.jsxs("div",{className:"flex gap-4",children:[r.jsxs("div",{className:"w-1/2",children:[r.jsx(Z,{htmlFor:"arrivalDate",children:"Arrival Date"}),r.jsx(je,{id:"arrivalDate",type:"date",value:f,onChange:S=>u(S.target.value)})]}),r.jsxs("div",{className:"w-1/2",children:[r.jsx(Z,{htmlFor:"arrivalTime",children:"Arrival Time"}),r.jsx(je,{id:"arrivalTime",type:"time",value:c,onChange:S=>d(S.target.value)})]})]}),r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"message",children:"Message"}),r.jsx(Xt,{id:"message",value:m,onChange:S=>h(S.target.value),rows:o==="sms"?3:6,maxLength:o==="sms"?160:void 0}),o==="sms"&&r.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground mt-1",children:[r.jsxs("span",{children:[m.length," characters"]}),r.jsxs("span",{children:[160-m.length," remaining"]})]})]}),r.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[r.jsx(J,{type:"button",variant:"outline",onClick:n,disabled:s,children:"Cancel"}),r.jsx(J,{type:"submit",disabled:s,children:s?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Sending..."]}):r.jsxs(r.Fragment,{children:[r.jsx(Oo,{className:"h-4 w-4 mr-2"}),"Send Notification"]})})]})]})]})]})})}function cde({onCapture:e,onCancel:t}){const{toast:n}=Ct(),[a,s]=w.useState(!1),[i,o]=w.useState([]),[l,c]=w.useState([]),[d,f]=w.useState([]),[u,m]=w.useState(!1),h=w.useRef(null);w.useRef(null);const x=async j=>new Promise(C=>{const E=new Image;E.onload=()=>{const S=document.createElement("canvas"),N=S.getContext("2d"),I=800,D=I/E.width;S.width=I,S.height=E.height*D,N==null||N.drawImage(E,0,0,S.width,S.height),C(S.toDataURL("image/jpeg",.7))},E.src=j});ux({accept:{"image/*":[]},multiple:!0,maxFiles:10,onDrop:async j=>{try{const C=j.map(S=>new Promise(N=>{const I=new FileReader;I.onload=async()=>{const D=await x(I.result);N(D)},I.readAsDataURL(S)})),E=await Promise.all(C);o(S=>[...S,...E]),c(S=>[...S,...E.map(()=>"")]),f(S=>[...S,...E.map(()=>[])]),n({title:"Upload Successful",description:`${j.length} photo(s) added.`})}catch(C){console.error("File processing error:",C),n({title:"Upload Error",description:"An error occurred while processing files.",variant:"destructive"})}},onError:j=>{n({title:"Upload Failed",description:j.message,variant:"destructive"})}});const g=()=>{var j;(j=h.current)!=null&&j.srcObject&&(h.current.srcObject.getTracks().forEach(C=>C.stop()),h.current.srcObject=null,m(!1),n({title:"Camera Stopped"}))},p=(j,C)=>{c(E=>{const S=[...E];return S[j]=C,S})},v=(j,C)=>{const E=C.split(",").map(S=>S.trim()).filter(Boolean);f(S=>{const N=[...S];return N[j]=E,N})},y=j=>{o(C=>C.filter((E,S)=>S!==j)),c(C=>C.filter((E,S)=>S!==j)),f(C=>C.filter((E,S)=>S!==j))},b=async()=>{if(!i.length){n({title:"No Photos",description:"Please add or take at least one photo.",variant:"destructive"});return}s(!0);try{await e(i,l,d),n({title:"Photos Saved",description:`${i.length} photo(s) saved.`})}catch(j){console.error("Save error:",j),n({title:"Save Failed",description:"Unable to save photos.",variant:"destructive"})}finally{s(!1),g()}};return w.useEffect(()=>()=>{g()},[]),r.jsx("div",{className:"fixed inset-0 z-50 bg-black/50 flex justify-center items-center p-4",children:r.jsxs(fe,{className:"w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[r.jsxs(we,{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx(Ne,{children:"Delivery Photo Capture"}),r.jsx(Ue,{children:"Take or upload photos and add optional captions & tags"})]}),r.jsx(J,{size:"sm",variant:"ghost",onClick:t,children:r.jsx($t,{className:"w-4 h-4"})})]}),r.jsxs(me,{className:"space-y-6",children:[i.length>0&&r.jsxs("div",{className:"space-y-4",children:[r.jsxs("h3",{className:"font-semibold text-lg",children:["Photos (",i.length,")"]}),r.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:i.map((j,C)=>{var E;return r.jsxs("div",{className:"border rounded-lg p-3 space-y-2",children:[r.jsxs("div",{className:"relative",children:[r.jsx("img",{src:j,className:"w-full h-40 object-cover rounded-md",alt:`Photo ${C+1}`}),r.jsx(J,{size:"sm",variant:"destructive",className:"absolute top-2 right-2",onClick:()=>y(C),children:r.jsx($t,{className:"w-4 h-4"})})]}),r.jsx(Z,{htmlFor:`caption-${C}`,children:"Caption"}),r.jsx(je,{id:`caption-${C}`,value:l[C]||"",placeholder:"Optional caption",onChange:S=>p(C,S.target.value)}),r.jsx(Z,{htmlFor:`tags-${C}`,children:"Tags (comma-separated)"}),r.jsx(je,{id:`tags-${C}`,value:((E=d[C])==null?void 0:E.join(", "))||"",placeholder:"e.g. front, side, receipt",onChange:S=>v(C,S.target.value)})]},C)})})]}),r.jsxs("div",{className:"flex justify-end space-x-2 border-t pt-4",children:[r.jsx(J,{onClick:t,variant:"outline",disabled:a,children:"Cancel"}),r.jsxs(J,{onClick:b,disabled:a||i.length===0,children:[a?r.jsx("div",{className:"animate-spin h-4 w-4 border-b-2 border-white rounded-full mr-2"}):r.jsx(n1,{className:"w-4 h-4 mr-2"}),a?"Saving...":"Save Photos"]})]})]})]})})}function dde({delivery:e,className:t}){const n=w.useRef(null);return w.useEffect(()=>{if(n.current){const a=n.current;a.innerHTML="";const s=document.createElement("div");s.className="relative w-full h-full bg-muted/30 rounded-lg overflow-hidden",s.innerHTML=`
        <div class="absolute inset-0 flex items-center justify-center">
          <div class="text-center">
            <div class="text-muted-foreground mb-2">Map would display here in a real application</div>
            <div class="flex flex-col items-center">
              <div class="text-sm font-medium">Delivery Address:</div>
              <div class="text-sm">${e.address.street}</div>
              <div class="text-sm">${e.address.city}, ${e.address.state} ${e.address.zipCode}</div>
            </div>
          </div>
        </div>
        
        <!-- Simulated map markers -->
        <div class="absolute bottom-4 right-4 bg-background p-2 rounded-md shadow-sm">
          <div class="flex items-center space-x-2 text-xs">
            <div class="flex items-center">
              <div class="w-3 h-3 rounded-full bg-green-500 mr-1"></div>
              <span>Origin</span>
            </div>
            <div class="flex items-center">
              <div class="w-3 h-3 rounded-full bg-red-500 mr-1"></div>
              <span>Destination</span>
            </div>
            ${e.status==="in_transit"?`
              <div class="flex items-center">
                <div class="w-3 h-3 rounded-full bg-blue-500 mr-1"></div>
                <span>Current Location</span>
              </div>
            `:""}
          </div>
        </div>
        
        <!-- Simulated route -->
        <div class="absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2">
          <svg width="200" height="100" viewBox="0 0 200 100">
            <path d="M20,80 Q100,20 180,80" stroke="#3b82f6" stroke-width="3" fill="none" stroke-dasharray="5,5" />
            ${e.status==="in_transit"?`
              <circle cx="100" cy="50" r="5" fill="#3b82f6" />
            `:""}
            <circle cx="20" cy="80" r="5" fill="#22c55e" />
            <circle cx="180" cy="80" r="5" fill="#ef4444" />
          </svg>
        </div>
      `,a.appendChild(s)}},[e]),r.jsxs(fe,{className:t,children:[r.jsxs(we,{children:[r.jsxs(Ne,{className:"flex items-center",children:[r.jsx(Cl,{className:"h-5 w-5 mr-2 text-primary"}),"Delivery Map"]}),r.jsx(Ue,{children:"Track delivery location and route"})]}),r.jsx(me,{children:r.jsx("div",{ref:n,className:"h-64 w-full",children:r.jsx("div",{className:"flex items-center justify-center h-full bg-muted/30 rounded-lg",children:r.jsxs("div",{className:"text-center",children:[r.jsx(is,{className:"h-12 w-12 mx-auto mb-2 text-muted-foreground"}),r.jsx("p",{className:"text-muted-foreground",children:"Loading map..."})]})})})})]})}function ude({deliveries:e,onScheduleDelivery:t}){const n=e.length,a=e.filter(m=>m.status===Ut.SCHEDULED).length,s=e.filter(m=>m.status===Ut.IN_TRANSIT).length,i=e.filter(m=>m.status===Ut.DELIVERED).length,o=new Date,l=new Date(o.getTime()+7*24*60*60*1e3),c=e.filter(m=>m.status===Ut.SCHEDULED&&m.scheduledDate>=o&&m.scheduledDate<=l).sort((m,h)=>m.scheduledDate.getTime()-h.scheduledDate.getTime()),d=e.filter(m=>m.status===Ut.IN_TRANSIT).sort((m,h)=>m.scheduledDate.getTime()-h.scheduledDate.getTime()),f=new Date(o.getTime()-30*24*60*60*1e3),u=e.filter(m=>m.status===Ut.DELIVERED&&m.deliveredDate&&m.deliveredDate>=f).sort((m,h)=>{var x,g;return(((x=h.deliveredDate)==null?void 0:x.getTime())||0)-(((g=m.deliveredDate)==null?void 0:g.getTime())||0)}).slice(0,5);return r.jsxs("div",{className:"space-y-6",children:[r.jsx("div",{className:"grid gap-4 md:grid-cols-4",children:[{title:"Total Deliveries",count:n,icon:r.jsx(is,{className:"h-4 w-4 text-blue-800"}),description:"All time",bg:"bg-blue-100"},{title:"Scheduled",count:a,icon:r.jsx(Mr,{className:"h-4 w-4 text-yellow-700"}),description:"Upcoming deliveries",bg:"bg-yellow-100"},{title:"In Transit",count:s,icon:r.jsx(is,{className:"h-4 w-4 text-orange-700"}),description:"Currently in transit",bg:"bg-orange-100"},{title:"Completed",count:i,icon:r.jsx($r,{className:"h-4 w-4 text-green-700"}),description:"Successful deliveries",bg:"bg-green-100"}].map((m,h)=>r.jsxs(fe,{className:`${m.bg} border-0 shadow-sm`,children:[r.jsxs(we,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(Ne,{className:"text-sm font-medium",children:m.title}),m.icon]}),r.jsxs(me,{children:[r.jsx("div",{className:"text-2xl font-bold text-gray-900",children:m.count}),r.jsxs("p",{className:"text-xs text-gray-600 flex items-center mt-1",children:[r.jsx(Ot,{className:"h-3 w-3 mr-1"}),m.description]})]})]},h))}),r.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[r.jsxs(fe,{children:[r.jsxs(we,{children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx(Ne,{children:"Upcoming Deliveries"}),r.jsxs(J,{size:"sm",onClick:t,children:[r.jsx(Nt,{className:"h-4 w-4 mr-2"}),"Schedule"]})]}),r.jsx(Ue,{children:"Deliveries scheduled for the next 7 days"})]}),r.jsx(me,{children:c.length>0?r.jsx("div",{className:"space-y-4",children:c.map(m=>r.jsxs("div",{className:"flex items-start space-x-3 p-3 border rounded-lg",children:[r.jsx(Mr,{className:"h-5 w-5 text-blue-500 mt-1"}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("p",{className:"font-medium",children:["Delivery #",m.id]}),r.jsx("p",{className:"text-sm text-muted-foreground",children:lt(m.scheduledDate)})]}),r.jsxs("p",{className:"text-sm text-muted-foreground truncate",children:["Customer: ",m.customerId]}),r.jsxs("p",{className:"text-sm text-muted-foreground truncate",children:[m.address.city,", ",m.address.state]})]})]},m.id))}):r.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[r.jsx(Mr,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),r.jsx("p",{children:"No upcoming deliveries"}),r.jsx("p",{className:"text-sm",children:"Schedule a new delivery to get started"})]})})]}),r.jsxs(fe,{children:[r.jsxs(we,{children:[r.jsx(Ne,{children:"In-Transit Deliveries"}),r.jsx(Ue,{children:"Deliveries currently on the road"})]}),r.jsx(me,{children:d.length>0?r.jsx("div",{className:"space-y-4",children:d.map(m=>{var h;return r.jsxs("div",{className:"flex items-start space-x-3 p-3 border rounded-lg",children:[r.jsx(is,{className:"h-5 w-5 text-yellow-500 mt-1"}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("p",{className:"font-medium",children:["Delivery #",m.id]}),r.jsxs("p",{className:"text-sm text-muted-foreground",children:["ETA: ",((h=m.customFields)==null?void 0:h.estimatedArrival)||"Unknown"]})]}),r.jsxs("p",{className:"text-sm text-muted-foreground truncate",children:["Driver: ",m.driver||"Unassigned"]}),r.jsxs("p",{className:"text-sm text-muted-foreground truncate",children:[m.address.city,", ",m.address.state]})]})]},m.id)})}):r.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[r.jsx(is,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),r.jsx("p",{children:"No deliveries in transit"})]})})]})]}),r.jsxs("div",{className:"grid gap-6 md:grid-cols-3",children:[r.jsx("div",{className:"md:col-span-2",children:d.length>0?r.jsx(dde,{delivery:d[0]}):r.jsxs(fe,{children:[r.jsxs(we,{children:[r.jsxs(Ne,{className:"flex items-center",children:[r.jsx(Cl,{className:"h-5 w-5 mr-2 text-primary"}),"Delivery Map"]}),r.jsx(Ue,{children:"No active deliveries to display"})]}),r.jsx(me,{children:r.jsx("div",{className:"h-64 w-full flex items-center justify-center bg-muted/30 rounded-lg",children:r.jsxs("div",{className:"text-center",children:[r.jsx(Cl,{className:"h-12 w-12 mx-auto mb-2 text-muted-foreground"}),r.jsx("p",{className:"text-muted-foreground",children:"No active deliveries to track"})]})})})]})}),r.jsxs(fe,{children:[r.jsxs(we,{children:[r.jsx(Ne,{children:"Recent Deliveries"}),r.jsx(Ue,{children:"Recently completed deliveries"})]}),r.jsx(me,{children:u.length>0?r.jsx("div",{className:"space-y-4",children:u.map(m=>r.jsxs("div",{className:"flex items-start space-x-3 p-3 border rounded-lg",children:[r.jsx($r,{className:"h-5 w-5 text-green-500 mt-1"}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("p",{className:"font-medium",children:["Delivery #",m.id]}),r.jsx("p",{className:"text-sm text-muted-foreground",children:m.deliveredDate?lt(m.deliveredDate):"Unknown"})]}),r.jsxs("p",{className:"text-sm text-muted-foreground truncate",children:["Customer: ",m.customerId]})]})]},m.id))}):r.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[r.jsx($r,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),r.jsx("p",{children:"No recent deliveries"})]})})]})]})]})}function iD(){const{deliveries:e,createDelivery:t,updateDelivery:n,deleteDelivery:a,updateDeliveryStatus:s,sendNotification:i,updateETA:o,addDeliveryPhotos:l}=I8(),{vehicles:c}=Ol(),{leads:d}=ro(),{toast:f}=Ct(),[u,m]=w.useState(""),[h,x]=w.useState("all"),[g,p]=w.useState(!1),[v,y]=w.useState(!1),[b,j]=w.useState(!1),[C,E]=w.useState(!1),[S,N]=w.useState(null),I=B=>{switch(B){case Ut.SCHEDULED:return"bg-blue-50 text-blue-700 border-blue-200";case Ut.IN_TRANSIT:return"bg-yellow-50 text-yellow-700 border-yellow-200";case Ut.DELIVERED:return"bg-green-50 text-green-700 border-green-200";case Ut.CANCELLED:return"bg-red-50 text-red-700 border-red-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},D=e.filter(B=>B.id.toLowerCase().includes(u.toLowerCase())||B.customerId.toLowerCase().includes(u.toLowerCase())||B.address.city.toLowerCase().includes(u.toLowerCase())).filter(B=>h==="all"||B.status===h),T=()=>{N(null),p(!0)},A=B=>{N(B),p(!0),y(!1)},_=B=>{N(B),y(!0)},k=async B=>{try{S?(await n(S.id,B),f({title:"Success",description:"Delivery updated successfully"})):(await t(B),f({title:"Success",description:"Delivery scheduled successfully"})),p(!1),N(null)}catch{f({title:"Error",description:`Failed to ${S?"update":"schedule"} delivery`,variant:"destructive"})}},L=async(B,U)=>{try{return U.estimatedArrival&&await o(B,U.estimatedArrival),await i(B,U.type,U.message),!0}catch(W){throw console.error("Error sending notification:",W),W}},$=async(B,U)=>{if(S)try{await l(S.id,B,U),S.status===Ut.IN_TRANSIT&&await s(S.id,Ut.DELIVERED),E(!1),f({title:"Photos Added",description:`${B.length} photos added to delivery`})}catch{f({title:"Error",description:"Failed to add photos",variant:"destructive"})}},M=B=>c.find(U=>U.id===B);return r.jsxs("div",{className:"space-y-8",children:[g&&r.jsx(D8,{delivery:S||void 0,vehicles:c,customers:d,onSave:k,onCancel:()=>{p(!1),N(null)}}),v&&S&&r.jsx(ode,{delivery:S,vehicle:M(S.vehicleId),onClose:()=>y(!1),onEdit:A,onSendNotification:async(B,U)=>{y(!1),j(!0)}}),b&&S&&r.jsx(lde,{delivery:S,onSend:L,onCancel:()=>{j(!1),y(!0)}}),C&&S&&r.jsx(cde,{onCapture:$,onCancel:()=>{E(!1),y(!0)}}),r.jsx("div",{className:"ri-page-header",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"ri-page-title",children:"Delivery Tracker"}),r.jsx("p",{className:"ri-page-description",children:"Track vehicle deliveries and logistics"})]}),r.jsxs(J,{className:"shadow-sm",onClick:T,children:[r.jsx(Nt,{className:"h-4 w-4 mr-2"}),"Schedule Delivery"]})]})}),r.jsxs("div",{className:"ri-stats-grid",children:[r.jsxs(fe,{className:"shadow-sm border-0 bg-gradient-to-br from-blue-50 to-blue-100/50",children:[r.jsxs(we,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(Ne,{className:"text-sm font-medium text-blue-900",children:"Total Deliveries"}),r.jsx(is,{className:"h-4 w-4 text-blue-600"})]}),r.jsxs(me,{children:[r.jsx("div",{className:"text-2xl font-bold text-blue-900",children:e.length}),r.jsxs("p",{className:"text-xs text-blue-600 flex items-center mt-1",children:[r.jsx(Ot,{className:"h-3 w-3 mr-1"}),"All deliveries"]})]})]}),r.jsxs(fe,{className:"shadow-sm border-0 bg-gradient-to-br from-blue-50 to-blue-100/50",children:[r.jsxs(we,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(Ne,{className:"text-sm font-medium text-blue-900",children:"Scheduled"}),r.jsx(is,{className:"h-4 w-4 text-blue-600"})]}),r.jsxs(me,{children:[r.jsx("div",{className:"text-2xl font-bold text-blue-900",children:e.filter(B=>B.status===Ut.SCHEDULED).length}),r.jsxs("p",{className:"text-xs text-blue-600 flex items-center mt-1",children:[r.jsx(Mr,{className:"h-3 w-3 mr-1"}),"Upcoming deliveries"]})]})]}),r.jsxs(fe,{className:"shadow-sm border-0 bg-gradient-to-br from-yellow-50 to-yellow-100/50",children:[r.jsxs(we,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(Ne,{className:"text-sm font-medium text-yellow-900",children:"In Transit"}),r.jsx(is,{className:"h-4 w-4 text-yellow-600"})]}),r.jsxs(me,{children:[r.jsx("div",{className:"text-2xl font-bold text-yellow-900",children:e.filter(B=>B.status===Ut.IN_TRANSIT).length}),r.jsxs("p",{className:"text-xs text-yellow-600 flex items-center mt-1",children:[r.jsx(is,{className:"h-3 w-3 mr-1"}),"On the road"]})]})]}),r.jsxs(fe,{className:"shadow-sm border-0 bg-gradient-to-br from-green-50 to-green-100/50",children:[r.jsxs(we,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(Ne,{className:"text-sm font-medium text-green-900",children:"Delivered"}),r.jsx(is,{className:"h-4 w-4 text-green-600"})]}),r.jsxs(me,{children:[r.jsx("div",{className:"text-2xl font-bold text-green-900",children:e.filter(B=>B.status===Ut.DELIVERED).length}),r.jsxs("p",{className:"text-xs text-green-600 flex items-center mt-1",children:[r.jsx(Ot,{className:"h-3 w-3 mr-1"}),"Completed"]})]})]}),r.jsxs(fe,{className:"shadow-sm border-0 bg-gradient-to-br from-orange-50 to-orange-100/50",children:[r.jsxs(we,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(Ne,{className:"text-sm font-medium text-orange-900",children:"Notifications"}),r.jsx(nn,{className:"h-4 w-4 text-orange-600"})]}),r.jsxs(me,{children:[r.jsx("div",{className:"text-2xl font-bold text-orange-900",children:e.filter(B=>{var U;return(U=B.customFields)==null?void 0:U.customerNotified}).length}),r.jsxs("p",{className:"text-xs text-orange-600 flex items-center mt-1",children:[r.jsx(nn,{className:"h-3 w-3 mr-1"}),"Sent to customers"]})]})]})]}),r.jsxs("div",{className:"flex gap-4",children:[r.jsxs("div",{className:"ri-search-bar",children:[r.jsx(Jn,{className:"ri-search-icon"}),r.jsx(je,{placeholder:"Search deliveries...",value:u,onChange:B=>m(B.target.value),className:"ri-search-input shadow-sm"})]}),r.jsxs("select",{value:h,onChange:B=>x(B.target.value),className:"px-3 py-2 rounded-md border border-input bg-background",children:[r.jsx("option",{value:"all",children:"All Status"}),r.jsx("option",{value:Ut.SCHEDULED,children:"Scheduled"}),r.jsx("option",{value:Ut.IN_TRANSIT,children:"In Transit"}),r.jsx("option",{value:Ut.DELIVERED,children:"Delivered"}),r.jsx("option",{value:Ut.CANCELLED,children:"Cancelled"})]})]}),r.jsxs(fe,{className:"shadow-sm",children:[r.jsxs(we,{children:[r.jsx(Ne,{className:"text-xl",children:"Deliveries"}),r.jsx(Ue,{children:"Track and manage vehicle deliveries"})]}),r.jsx(me,{children:r.jsxs("div",{className:"space-y-4",children:[D.map(B=>r.jsxs("div",{className:"ri-table-row",children:[r.jsx("div",{className:"flex items-center space-x-4 flex-1",children:r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[r.jsxs("h3",{className:"font-semibold text-foreground",children:["Delivery #",B.id]}),r.jsx(ze,{className:He("ri-badge-status",I(B.status)),children:B.status.replace("_"," ").toUpperCase()})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm text-muted-foreground",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx(wa,{className:"h-3 w-3 mr-2 text-blue-500"}),r.jsx("span",{className:"font-medium",children:"Customer:"}),r.jsx("span",{className:"ml-1",children:B.customerId})]}),r.jsxs("div",{className:"flex items-center",children:[r.jsx(wa,{className:"h-3 w-3 mr-2 text-green-500"}),r.jsx("span",{className:"font-medium",children:"Driver:"}),r.jsx("span",{className:"ml-1",children:B.driver||"Not assigned"})]}),r.jsxs("div",{className:"flex items-center",children:[r.jsx(Mr,{className:"h-3 w-3 mr-2 text-purple-500"}),r.jsx("span",{className:"font-medium",children:"Scheduled:"}),r.jsx("span",{className:"ml-1",children:lt(B.scheduledDate)})]}),B.deliveredDate&&r.jsxs("div",{className:"flex items-center",children:[r.jsx(Mr,{className:"h-3 w-3 mr-2 text-green-500"}),r.jsx("span",{className:"font-medium",children:"Delivered:"}),r.jsx("span",{className:"ml-1",children:lt(B.deliveredDate)})]})]}),r.jsxs("div",{className:"mt-2",children:[r.jsxs("div",{className:"flex items-start bg-muted/30 p-2 rounded-md",children:[r.jsx(Cl,{className:"h-3 w-3 mr-2 mt-0.5 text-red-500"}),r.jsxs("span",{className:"text-sm text-muted-foreground",children:[B.address.street,", ",B.address.city,", ",B.address.state," ",B.address.zipCode]})]}),B.notes&&r.jsxs("p",{className:"text-sm text-muted-foreground mt-2 bg-blue-50 p-2 rounded-md",children:[r.jsx("span",{className:"font-medium",children:"Notes:"})," ",B.notes]})]})]})}),r.jsxs("div",{className:"ri-action-buttons",children:[r.jsxs(J,{variant:"outline",size:"sm",className:"shadow-sm",onClick:()=>_(B),children:[r.jsx(Sl,{className:"h-3 w-3 mr-1"}),"View"]}),r.jsx(J,{variant:"outline",size:"sm",className:"shadow-sm",onClick:()=>A(B),children:"Edit"}),B.status===Ut.IN_TRANSIT&&r.jsxs(J,{variant:"outline",size:"sm",className:"shadow-sm",onClick:()=>{N(B),E(!0)},children:[r.jsx(ul,{className:"h-3 w-3 mr-1"}),"Photos"]}),(B.status===Ut.SCHEDULED||B.status===Ut.IN_TRANSIT)&&r.jsxs(J,{variant:"outline",size:"sm",className:"shadow-sm",onClick:()=>{N(B),j(!0)},children:[r.jsx(nn,{className:"h-3 w-3 mr-1"}),"Notify"]})]})]},B.id)),D.length===0&&r.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[r.jsx(is,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),r.jsx("p",{children:"No deliveries found"}),r.jsx("p",{className:"text-sm",children:"Try adjusting your search or filters"})]})]})})]})]})}function fde(){const{deliveries:e}=I8(),[t,n]=w.useState(!1);return r.jsxs(r.Fragment,{children:[t&&r.jsx(D8,{vehicles:[],customers:[],onSave:async()=>{},onCancel:()=>n(!1)}),r.jsx(ude,{deliveries:e,onScheduleDelivery:()=>n(!0)})]})}function mde(){return r.jsxs(Ka,{children:[r.jsx(Vt,{path:"/",element:r.jsx(fde,{})}),r.jsx(Vt,{path:"/list",element:r.jsx(iD,{})}),r.jsx(Vt,{path:"/*",element:r.jsx(iD,{})})]})}var cn=(e=>(e.IN_PROGRESS="in_progress",e.COMPLETED="completed",e.APPROVED="approved",e.REJECTED="rejected",e))(cn||{}),ur=(e=>(e.PENDING="pending",e.PASSED="passed",e.FAILED="failed",e.NA="na",e))(ur||{}),xa=(e=>(e.LOW="low",e.MEDIUM="medium",e.HIGH="high",e.CRITICAL="critical",e))(xa||{}),$0=(e=>(e.OPEN="open",e.IN_PROGRESS="in_progress",e.RESOLVED="resolved",e.VERIFIED="verified",e))($0||{}),Ld=(e=>(e.INSPECTOR="inspector",e.MANAGER="manager",e.QUALITY_CONTROL="quality_control",e))(Ld||{});function hde(){const[e,t]=w.useState([]),[n,a]=w.useState([]),[s,i]=w.useState(!1);w.useEffect(()=>{o()},[]);const o=()=>{const T=un("renter-insight-pdi-templates",[{id:"1",name:"RV Pre-Delivery Inspection",description:"Standard PDI checklist for recreational vehicles",vehicleType:vt.RV,isActive:!0,sections:[{id:"1-1",templateId:"1",name:"Exterior",description:"Exterior inspection items",orderIndex:1,items:[{id:"1-1-1",sectionId:"1-1",name:"Exterior Body Condition",description:"Check for scratches, dents, or damage",itemType:"checkbox",isRequired:!0,orderIndex:1,createdAt:new Date("2024-01-01")},{id:"1-1-2",sectionId:"1-1",name:"Roof Inspection",description:"Check roof seals, vents, and AC units",itemType:"checkbox",isRequired:!0,orderIndex:2,createdAt:new Date("2024-01-01")},{id:"1-1-3",sectionId:"1-1",name:"Exterior Photos",description:"Take photos of all sides of the vehicle",itemType:"photo",isRequired:!0,orderIndex:3,createdAt:new Date("2024-01-01")}],createdAt:new Date("2024-01-01")},{id:"1-2",templateId:"1",name:"Interior",description:"Interior inspection items",orderIndex:2,items:[{id:"1-2-1",sectionId:"1-2",name:"Interior Cleanliness",description:"Verify interior is clean and free of debris",itemType:"checkbox",isRequired:!0,orderIndex:1,createdAt:new Date("2024-01-01")},{id:"1-2-2",sectionId:"1-2",name:"Furniture Condition",description:"Check all furniture for damage or defects",itemType:"checkbox",isRequired:!0,orderIndex:2,createdAt:new Date("2024-01-01")}],createdAt:new Date("2024-01-01")}],createdAt:new Date("2024-01-01"),updatedAt:new Date("2024-01-01")},{id:"2",name:"Motorhome Pre-Delivery Inspection",description:"Comprehensive PDI checklist for motorhomes",vehicleType:vt.MOTORHOME,isActive:!0,sections:[],createdAt:new Date("2024-01-01"),updatedAt:new Date("2024-01-01")}]),A=un("renter-insight-pdi-inspections",[{id:"1",templateId:"1",vehicleId:"1",inspectorId:"user-001",status:cn.IN_PROGRESS,startedAt:new Date("2024-01-15"),notes:"Initial inspection for new RV",items:[{id:"1-1",inspectionId:"1",templateItemId:"1-1-1",status:ur.PASSED,notes:"No exterior damage found",createdAt:new Date("2024-01-15"),updatedAt:new Date("2024-01-15")},{id:"1-2",inspectionId:"1",templateItemId:"1-1-2",status:ur.FAILED,notes:"Roof seal damaged near AC unit",createdAt:new Date("2024-01-15"),updatedAt:new Date("2024-01-15")}],defects:[{id:"1-1",inspectionId:"1",inspectionItemId:"1-2",title:"Roof Seal Damage",description:"Damaged roof seal near AC unit on passenger side",severity:xa.MEDIUM,status:$0.OPEN,assignedTo:"user-002",createdAt:new Date("2024-01-15"),updatedAt:new Date("2024-01-15")}],photos:[{id:"1-1",inspectionId:"1",inspectionItemId:"1-2",defectId:"1-1",url:"https://images.pexels.com/photos/1319515/pexels-photo-1319515.jpeg",caption:"Damaged roof seal",createdAt:new Date("2024-01-15")}],signoffs:[],createdAt:new Date("2024-01-15"),updatedAt:new Date("2024-01-15")}]);t(T),a(A)},l=T=>{Wr("renter-insight-pdi-templates",T)},c=T=>{Wr("renter-insight-pdi-inspections",T)};return{templates:e,inspections:n,loading:s,getTemplatesByVehicleType:T=>e.filter(A=>A.vehicleType===T&&A.isActive),getTemplateById:T=>e.find(A=>A.id===T),createTemplate:async T=>{i(!0);try{const A={id:Math.random().toString(36).substr(2,9),name:T.name||"",description:T.description||"",vehicleType:T.vehicleType||vt.RV,isActive:T.isActive??!0,sections:T.sections||[],createdAt:new Date,updatedAt:new Date},_=[...e,A];return t(_),l(_),A}finally{i(!1)}},updateTemplate:async(T,A)=>{const _=e.map(k=>k.id===T?{...k,...A,updatedAt:new Date}:k);t(_),l(_)},deleteTemplate:async T=>{const A=e.filter(_=>_.id!==T);t(A),l(A)},createTemplateSection:async(T,A)=>{const _=e.find(M=>M.id===T);if(!_)return null;const k={id:Math.random().toString(36).substr(2,9),templateId:T,name:A.name||"",description:A.description||"",orderIndex:A.orderIndex||_.sections.length+1,items:A.items||[],createdAt:new Date},L={..._,sections:[..._.sections,k],updatedAt:new Date},$=e.map(M=>M.id===T?L:M);return t($),l($),k},createTemplateItem:async(T,A)=>{const _=e.findIndex(R=>R.sections.some(V=>V.id===T));if(_===-1)return null;const k=e[_],L=k.sections.findIndex(R=>R.id===T);if(L===-1)return null;const $=k.sections[L],M={id:Math.random().toString(36).substr(2,9),sectionId:T,name:A.name||"",description:A.description||"",itemType:A.itemType||"checkbox",isRequired:A.isRequired??!0,orderIndex:A.orderIndex||$.items.length+1,createdAt:new Date},B={...$,items:[...$.items,M]},U=[...k.sections];U[L]=B;const W={...k,sections:U,updatedAt:new Date},q=[...e];return q[_]=W,t(q),l(q),M},getInspectionsByVehicleId:T=>n.filter(A=>A.vehicleId===T),getInspectionById:T=>n.find(A=>A.id===T),createInspection:async T=>{i(!0);try{const A=e.find($=>$.id===T.templateId);if(!A)throw new Error("Template not found");const _=[];A.sections.forEach($=>{$.items.forEach(M=>{_.push({id:Math.random().toString(36).substr(2,9),inspectionId:"",templateItemId:M.id,templateItem:M,status:ur.PENDING,createdAt:new Date,updatedAt:new Date})})});const k={id:Math.random().toString(36).substr(2,9),templateId:T.templateId||"",template:A||void 0,vehicleId:T.vehicleId||"",inspectorId:T.inspectorId||"",status:cn.IN_PROGRESS,startedAt:new Date,notes:T.notes||"",items:[],defects:[],photos:[],signoffs:[],createdAt:new Date,updatedAt:new Date};_.forEach($=>{$.inspectionId=k.id}),k.items=_;const L=[...n,k];return a(L),c(L),k}finally{i(!1)}},updateInspection:async(T,A)=>{const _=n.map(k=>k.id===T?{...k,...A,updatedAt:new Date}:k);a(_),c(_)},updateInspectionItem:async(T,A,_)=>{const k=n.findIndex(W=>W.id===T);if(k===-1)return;const L=n[k],$=L.items.findIndex(W=>W.id===A);if($===-1)return;const M=[...L.items];M[$]={...M[$],..._,updatedAt:new Date};const B={...L,items:M,updatedAt:new Date},U=[...n];U[k]=B,a(U),c(U)},completeInspection:async(T,A)=>{const _=n.findIndex(B=>B.id===T);if(_===-1)return;const k=n[_];if(!k.items.every(B=>{const U=e.flatMap(W=>W.sections).flatMap(W=>W.items).find(W=>W.id===B.templateItemId);return!(U!=null&&U.isRequired)||B.status!==ur.PENDING}))throw new Error("All required items must be completed");const $={...k,status:cn.COMPLETED,completedAt:new Date,notes:A||k.notes,updatedAt:new Date},M=[...n];M[_]=$,a(M),c(M)},createDefect:async(T,A)=>{const _=n.findIndex(B=>B.id===T);if(_===-1)return null;const k=n[_],L={id:Math.random().toString(36).substr(2,9),inspectionId:T,inspectionItemId:A.inspectionItemId,title:A.title||"",description:A.description||"",severity:A.severity||xa.MEDIUM,status:$0.OPEN,assignedTo:A.assignedTo,photos:[],createdAt:new Date,updatedAt:new Date},$={...k,defects:[...k.defects,L],updatedAt:new Date},M=[...n];return M[_]=$,a(M),c(M),L},updateDefect:async(T,A,_)=>{const k=n.findIndex(W=>W.id===T);if(k===-1)return;const L=n[k],$=L.defects.findIndex(W=>W.id===A);if($===-1)return;const M=[...L.defects];M[$]={...M[$],..._,updatedAt:new Date};const B={...L,defects:M,updatedAt:new Date},U=[...n];U[k]=B,a(U),c(U)},resolveDefect:async(T,A,_)=>{const k=n.findIndex(W=>W.id===T);if(k===-1)return;const L=n[k],$=L.defects.findIndex(W=>W.id===A);if($===-1)return;const M=[...L.defects];M[$]={...M[$],status:$0.RESOLVED,resolvedAt:new Date,resolutionNotes:_,updatedAt:new Date};const B={...L,defects:M,updatedAt:new Date},U=[...n];U[k]=B,a(U),c(U)},addPhoto:async(T,A)=>{const _=n.findIndex(B=>B.id===T);if(_===-1)return null;const k=n[_],L={id:Math.random().toString(36).substr(2,9),inspectionId:T,inspectionItemId:A.inspectionItemId,defectId:A.defectId,url:A.url||"",caption:A.caption,createdAt:new Date},$={...k,photos:[...k.photos,L],updatedAt:new Date},M=[...n];return M[_]=$,a(M),c(M),L},addSignoff:async(T,A)=>{const _=n.findIndex(U=>U.id===T);if(_===-1)return null;const k=n[_],L={id:Math.random().toString(36).substr(2,9),inspectionId:T,userId:A.userId||"",role:A.role||Ld.INSPECTOR,signatureUrl:A.signatureUrl,notes:A.notes,signedAt:new Date,createdAt:new Date};let $=k.status;A.role===Ld.MANAGER&&($=cn.APPROVED);const M={...k,signoffs:[...k.signoffs,L],status:$,updatedAt:new Date},B=[...n];return B[_]=M,a(B),c(B),L}}}function pde({templates:e,onCreateTemplate:t,onEditTemplate:n,onDeleteTemplate:a,onDuplicateTemplate:s,onViewTemplate:i}){const[o,l]=w.useState(""),[c,d]=w.useState("all"),f=e.filter(m=>{var g;const h=m.name.toLowerCase().includes(o.toLowerCase())||((g=m.description)==null?void 0:g.toLowerCase().includes(o.toLowerCase())),x=c==="all"||m.vehicleType===c;return h&&x}),u=m=>m.replace("_"," ").toUpperCase();return r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[r.jsxs("div",{className:"ri-search-bar flex-1",children:[r.jsx(Jn,{className:"ri-search-icon"}),r.jsx(je,{placeholder:"Search templates...",value:o,onChange:m=>l(m.target.value),className:"ri-search-input shadow-sm"})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs("select",{value:c,onChange:m=>d(m.target.value),className:"px-3 py-2 rounded-md border border-input bg-background",children:[r.jsx("option",{value:"all",children:"All Types"}),r.jsx("option",{value:"rv",children:"RV"}),r.jsx("option",{value:"motorhome",children:"Motorhome"}),r.jsx("option",{value:"travel_trailer",children:"Travel Trailer"}),r.jsx("option",{value:"fifth_wheel",children:"Fifth Wheel"}),r.jsx("option",{value:"toy_hauler",children:"Toy Hauler"})]}),r.jsxs(J,{variant:"outline",className:"shadow-sm",children:[r.jsx(hs,{className:"h-4 w-4 mr-2"}),"Filter"]}),r.jsxs(J,{onClick:t,className:"shadow-sm",children:[r.jsx(Nt,{className:"h-4 w-4 mr-2"}),"New Template"]})]})]}),r.jsxs(fe,{className:"shadow-sm",children:[r.jsxs(we,{children:[r.jsxs(Ne,{className:"text-xl",children:["PDI Templates (",f.length,")"]}),r.jsx(Ue,{children:"Manage pre-delivery inspection templates for different vehicle types"})]}),r.jsx(me,{children:r.jsxs("div",{className:"space-y-4",children:[f.map(m=>r.jsxs("div",{className:"ri-table-row",children:[r.jsx("div",{className:"flex items-center space-x-4 flex-1",children:r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[r.jsx("h3",{className:"font-semibold text-foreground",children:m.name}),r.jsx(ze,{variant:"outline",children:u(m.vehicleType)}),m.isActive?r.jsx(ze,{className:"bg-green-50 text-green-700 border-green-200",children:"ACTIVE"}):r.jsx(ze,{className:"bg-gray-50 text-gray-700 border-gray-200",children:"INACTIVE"})]}),r.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:m.description}),r.jsxs("div",{className:"flex items-center space-x-4 text-sm",children:[r.jsxs("span",{className:"flex items-center",children:[r.jsx(u5,{className:"h-3 w-3 mr-1 text-blue-500"}),m.sections.length," sections"]}),r.jsxs("span",{className:"flex items-center",children:[r.jsx(RA,{className:"h-3 w-3 mr-1 text-green-500"}),m.sections.reduce((h,x)=>h+x.items.length,0)," items"]})]})]})}),r.jsxs("div",{className:"ri-action-buttons",children:[r.jsx(J,{variant:"outline",size:"sm",className:"shadow-sm",onClick:()=>i(m),children:"View"}),r.jsxs(J,{variant:"outline",size:"sm",className:"shadow-sm",onClick:()=>n(m),children:[r.jsx(Br,{className:"h-3 w-3 mr-1"}),"Edit"]}),r.jsxs(J,{variant:"outline",size:"sm",className:"shadow-sm",onClick:()=>s(m),children:[r.jsx(FA,{className:"h-3 w-3 mr-1"}),"Duplicate"]}),r.jsx(J,{variant:"outline",size:"sm",className:"shadow-sm text-red-600 hover:text-red-700",onClick:()=>a(m.id),children:r.jsx(wn,{className:"h-3 w-3"})})]})]},m.id)),f.length===0&&r.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[r.jsx(u5,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),r.jsx("p",{children:"No templates found"}),r.jsx("p",{className:"text-sm",children:"Create your first template to get started"})]})]})})]})]})}function vde({template:e,onSave:t,onCancel:n}){var T;const{toast:a}=Ct(),[s,i]=w.useState(!1),[o,l]=w.useState({name:"",description:"",vehicleType:vt.RV,isActive:!0,sections:[]}),[c,d]=w.useState(!1),[f,u]=w.useState({name:"",description:"",items:[]}),[m,h]=w.useState(null),[x,g]=w.useState(!1),[p,v]=w.useState({name:"",description:"",itemType:"checkbox",isRequired:!0});w.useEffect(()=>{e&&l({...e})},[e]);const y=async A=>{if(A.preventDefault(),!o.name){a({title:"Validation Error",description:"Template name is required",variant:"destructive"});return}if(!o.vehicleType){a({title:"Validation Error",description:"Vehicle type is required",variant:"destructive"});return}if(!o.sections||o.sections.length===0){a({title:"Validation Error",description:"At least one section is required",variant:"destructive"});return}const _=o.sections.filter(k=>!k.items||k.items.length===0);if(_.length>0){a({title:"Validation Error",description:`Section "${_[0].name}" must have at least one item`,variant:"destructive"});return}i(!0);try{await t(o),a({title:"Success",description:`Template ${e?"updated":"created"} successfully`})}catch{a({title:"Error",description:`Failed to ${e?"update":"create"} template`,variant:"destructive"})}finally{i(!1)}},b=()=>{var _;if(!f.name){a({title:"Validation Error",description:"Section name is required",variant:"destructive"});return}const A={id:Math.random().toString(36).substr(2,9),templateId:(e==null?void 0:e.id)||"",name:f.name,description:f.description||"",orderIndex:(((_=o.sections)==null?void 0:_.length)||0)+1,items:[],createdAt:new Date};l(k=>({...k,sections:[...k.sections||[],A]})),u({name:"",description:"",items:[]}),d(!1)},j=A=>{l(_=>{var k;return{..._,sections:((k=_.sections)==null?void 0:k.filter(L=>L.id!==A))||[]}})},C=A=>{const _=[...o.sections||[]],k=_.findIndex(L=>L.id===A);k<=0||([_[k-1],_[k]]=[_[k],_[k-1]],_.forEach((L,$)=>{L.orderIndex=$+1}),l(L=>({...L,sections:_})))},E=A=>{const _=[...o.sections||[]],k=_.findIndex(L=>L.id===A);k===-1||k>=_.length-1||([_[k],_[k+1]]=[_[k+1],_[k]],_.forEach((L,$)=>{L.orderIndex=$+1}),l(L=>({...L,sections:_})))},S=A=>{var M;if(!p.name){a({title:"Validation Error",description:"Item name is required",variant:"destructive"});return}const _=[...o.sections||[]],k=_.findIndex(B=>B.id===A);if(k===-1)return;const L=_[k],$={id:Math.random().toString(36).substr(2,9),sectionId:A,name:p.name,description:p.description||"",itemType:p.itemType||"checkbox",isRequired:p.isRequired??!0,orderIndex:(((M=L.items)==null?void 0:M.length)||0)+1,createdAt:new Date};L.items=[...L.items||[],$],_[k]=L,l(B=>({...B,sections:_})),v({name:"",description:"",itemType:"checkbox",isRequired:!0}),g(!1)},N=(A,_)=>{const k=[...o.sections||[]],L=k.findIndex(M=>M.id===A);if(L===-1)return;const $=k[L];$.items=$.items.filter(M=>M.id!==_),k[L]=$,l(M=>({...M,sections:k}))},I=(A,_)=>{const k=[...o.sections||[]],L=k.findIndex(U=>U.id===A);if(L===-1)return;const $=k[L],M=[...$.items],B=M.findIndex(U=>U.id===_);B<=0||([M[B-1],M[B]]=[M[B],M[B-1]],M.forEach((U,W)=>{U.orderIndex=W+1}),$.items=M,k[L]=$,l(U=>({...U,sections:k})))},D=(A,_)=>{const k=[...o.sections||[]],L=k.findIndex(U=>U.id===A);if(L===-1)return;const $=k[L],M=[...$.items],B=M.findIndex(U=>U.id===_);B===-1||B>=M.length-1||([M[B],M[B+1]]=[M[B+1],M[B]],M.forEach((U,W)=>{U.orderIndex=W+1}),$.items=M,k[L]=$,l(U=>({...U,sections:k})))};return r.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:r.jsxs(fe,{className:"w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[r.jsx(we,{children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx(Ne,{children:e?"Edit Template":"Create Template"}),r.jsx(Ue,{children:e?"Update PDI template details":"Create a new PDI template"})]}),r.jsx(J,{variant:"ghost",size:"sm",onClick:n,children:r.jsx($t,{className:"h-4 w-4"})})]})}),r.jsx(me,{children:r.jsxs("form",{onSubmit:y,className:"space-y-6",children:[r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"text-lg font-semibold",children:"Template Information"}),r.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"name",children:"Template Name *"}),r.jsx(je,{id:"name",value:o.name,onChange:A=>l(_=>({..._,name:A.target.value})),placeholder:"e.g., RV Pre-Delivery Inspection"})]}),r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"vehicleType",children:"Home/Vehicle Type *"}),r.jsxs($e,{value:o.vehicleType,onValueChange:A=>l(_=>({..._,vehicleType:A})),children:[r.jsx(Fe,{children:r.jsx(Be,{})}),r.jsxs(Me,{children:[r.jsx(K,{value:vt.RV,children:"RV"}),r.jsx(K,{value:vt.MOTORHOME,children:"Motorhome"}),r.jsx(K,{value:vt.TRAVEL_TRAILER,children:"Travel Trailer"}),r.jsx(K,{value:vt.FIFTH_WHEEL,children:"Fifth Wheel"}),r.jsx(K,{value:vt.TOY_HAULER,children:"Toy Hauler"}),r.jsx(K,{value:vt.SINGLE_WIDE,children:"Single Wide MH"}),r.jsx(K,{value:vt.DOUBLE_WIDE,children:"Double Wide MH"}),r.jsx(K,{value:vt.TRIPLE_WIDE,children:"Triple Wide MH"}),r.jsx(K,{value:vt.PARK_MODEL,children:"Park Model"}),r.jsx(K,{value:vt.MODULAR_HOME,children:"Modular Home"})]})]})]})]}),r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"description",children:"Description"}),r.jsx(Xt,{id:"description",value:o.description,onChange:A=>l(_=>({..._,description:A.target.value})),placeholder:"Describe the purpose and scope of this template",rows:3})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(St,{id:"isActive",checked:o.isActive,onCheckedChange:A=>l(_=>({..._,isActive:!!A}))}),r.jsx(Z,{htmlFor:"isActive",children:"Active template"})]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h3",{className:"text-lg font-semibold",children:"Sections"}),r.jsxs(J,{type:"button",onClick:()=>d(!0),size:"sm",children:[r.jsx(Nt,{className:"h-4 w-4 mr-2"}),"Add Section"]})]}),c&&r.jsx(fe,{className:"border-dashed",children:r.jsx(me,{className:"pt-6",children:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"sectionName",children:"Section Name *"}),r.jsx(je,{id:"sectionName",value:f.name,onChange:A=>u(_=>({..._,name:A.target.value})),placeholder:"e.g., Exterior Inspection"})]}),r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"sectionDescription",children:"Description"}),r.jsx(Xt,{id:"sectionDescription",value:f.description,onChange:A=>u(_=>({..._,description:A.target.value})),placeholder:"Describe this section",rows:2})]}),r.jsxs("div",{className:"flex justify-end space-x-2",children:[r.jsx(J,{type:"button",variant:"outline",onClick:()=>d(!1),children:"Cancel"}),r.jsx(J,{type:"button",onClick:b,children:"Add Section"})]})]})})}),r.jsxs("div",{className:"space-y-6",children:[(T=o.sections)==null?void 0:T.map(A=>{var _;return r.jsxs(fe,{className:"shadow-sm",children:[r.jsx(we,{className:"pb-3",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx(Ne,{className:"text-lg",children:A.name}),A.description&&r.jsx(Ue,{children:A.description})]}),r.jsxs("div",{className:"flex items-center space-x-1",children:[r.jsx(J,{type:"button",variant:"ghost",size:"sm",onClick:()=>C(A.id),disabled:A.orderIndex<=1,children:r.jsx(wo,{className:"h-4 w-4"})}),r.jsx(J,{type:"button",variant:"ghost",size:"sm",onClick:()=>E(A.id),disabled:A.orderIndex>=(((_=o.sections)==null?void 0:_.length)||0),children:r.jsx(jo,{className:"h-4 w-4"})}),r.jsx(J,{type:"button",variant:"ghost",size:"sm",onClick:()=>j(A.id),children:r.jsx(wn,{className:"h-4 w-4 text-red-500"})})]})]})}),r.jsx(me,{children:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("h4",{className:"text-sm font-semibold",children:["Items (",A.items.length,")"]}),r.jsxs(J,{type:"button",size:"sm",variant:"outline",onClick:()=>{h(A.id),g(!0)},children:[r.jsx(Nt,{className:"h-3 w-3 mr-1"}),"Add Item"]})]}),x&&m===A.id&&r.jsx(fe,{className:"border-dashed",children:r.jsx(me,{className:"pt-6",children:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"itemName",children:"Item Name *"}),r.jsx(je,{id:"itemName",value:p.name,onChange:k=>v(L=>({...L,name:k.target.value})),placeholder:"e.g., Check Exterior Body Condition"})]}),r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"itemType",children:"Item Type"}),r.jsxs($e,{value:p.itemType,onValueChange:k=>v(L=>({...L,itemType:k})),children:[r.jsx(Fe,{children:r.jsx(Be,{})}),r.jsxs(Me,{children:[r.jsx(K,{value:"checkbox",children:"Checkbox"}),r.jsx(K,{value:"text",children:"Text Input"}),r.jsx(K,{value:"number",children:"Number Input"}),r.jsx(K,{value:"photo",children:"Photo Upload"})]})]})]})]}),r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"itemDescription",children:"Description"}),r.jsx(Xt,{id:"itemDescription",value:p.description,onChange:k=>v(L=>({...L,description:k.target.value})),placeholder:"Describe this inspection item",rows:2})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(St,{id:"isRequired",checked:p.isRequired,onCheckedChange:k=>v(L=>({...L,isRequired:!!k}))}),r.jsx(Z,{htmlFor:"isRequired",children:"Required item"})]}),r.jsxs("div",{className:"flex justify-end space-x-2",children:[r.jsx(J,{type:"button",variant:"outline",onClick:()=>{g(!1),h(null)},children:"Cancel"}),r.jsx(J,{type:"button",onClick:()=>S(A.id),children:"Add Item"})]})]})})}),r.jsxs("div",{className:"space-y-2",children:[A.items.map(k=>r.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("span",{className:"font-medium",children:k.name}),r.jsx(ze,{variant:"outline",className:"text-xs",children:k.itemType}),k.isRequired&&r.jsx(ze,{className:"bg-blue-50 text-blue-700 border-blue-200 text-xs",children:"Required"})]}),k.description&&r.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:k.description})]}),r.jsxs("div",{className:"flex items-center space-x-1",children:[r.jsx(J,{type:"button",variant:"ghost",size:"sm",onClick:()=>I(A.id,k.id),disabled:k.orderIndex<=1,children:r.jsx(wo,{className:"h-3 w-3"})}),r.jsx(J,{type:"button",variant:"ghost",size:"sm",onClick:()=>D(A.id,k.id),disabled:k.orderIndex>=A.items.length,children:r.jsx(jo,{className:"h-3 w-3"})}),r.jsx(J,{type:"button",variant:"ghost",size:"sm",onClick:()=>N(A.id,k.id),children:r.jsx(wn,{className:"h-3 w-3 text-red-500"})})]})]},k.id)),A.items.length===0&&r.jsxs("div",{className:"text-center py-4 text-sm text-muted-foreground border-2 border-dashed rounded-lg",children:[r.jsx(RA,{className:"h-8 w-8 mx-auto mb-2 text-muted-foreground/50"}),r.jsx("p",{children:"No items added yet"}),r.jsx("p",{className:"text-xs",children:"Add items to this section"})]})]})]})})]},A.id)}),(!o.sections||o.sections.length===0)&&r.jsxs("div",{className:"text-center py-8 text-muted-foreground border-2 border-dashed rounded-lg",children:[r.jsx(u5,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),r.jsx("p",{children:"No sections added yet"}),r.jsx("p",{className:"text-sm",children:"Add sections to organize your checklist"})]})]})]}),r.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t",children:[r.jsx(J,{type:"button",variant:"outline",onClick:n,disabled:s,children:"Cancel"}),r.jsx(J,{type:"submit",disabled:s,children:s?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),e?"Updating...":"Creating..."]}):r.jsxs(r.Fragment,{children:[r.jsx(Pr,{className:"h-4 w-4 mr-2"}),e?"Update":"Create"," Template"]})})]})]})})]})})}function xde({inspections:e,onCreateInspection:t,onViewInspection:n,onContinueInspection:a}){const[s,i]=w.useState(""),[o,l]=w.useState("all"),c=e.filter(u=>{const m=u.id.toLowerCase().includes(s.toLowerCase())||u.vehicleId.toLowerCase().includes(s.toLowerCase()),h=o==="all"||u.status===o;return m&&h}),d=u=>{switch(u){case cn.IN_PROGRESS:return"bg-yellow-50 text-yellow-700 border-yellow-200";case cn.COMPLETED:return"bg-blue-50 text-blue-700 border-blue-200";case cn.APPROVED:return"bg-green-50 text-green-700 border-green-200";case cn.REJECTED:return"bg-red-50 text-red-700 border-red-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},f=u=>{switch(u){case cn.IN_PROGRESS:return r.jsx(er,{className:"h-4 w-4 text-yellow-500"});case cn.COMPLETED:return r.jsx($r,{className:"h-4 w-4 text-blue-500"});case cn.APPROVED:return r.jsx($r,{className:"h-4 w-4 text-green-500"});case cn.REJECTED:return r.jsx(Ff,{className:"h-4 w-4 text-red-500"});default:return r.jsx(er,{className:"h-4 w-4 text-gray-500"})}};return r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[r.jsxs("div",{className:"ri-search-bar flex-1",children:[r.jsx(Jn,{className:"ri-search-icon"}),r.jsx(je,{placeholder:"Search inspections...",value:s,onChange:u=>i(u.target.value),className:"ri-search-input shadow-sm"})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs("select",{value:o,onChange:u=>l(u.target.value),className:"px-3 py-2 rounded-md border border-input bg-background",children:[r.jsx("option",{value:"all",children:"All Status"}),r.jsx("option",{value:"in_progress",children:"In Progress"}),r.jsx("option",{value:"completed",children:"Completed"}),r.jsx("option",{value:"approved",children:"Approved"}),r.jsx("option",{value:"rejected",children:"Rejected"})]}),r.jsxs(J,{variant:"outline",className:"shadow-sm",children:[r.jsx(hs,{className:"h-4 w-4 mr-2"}),"Filter"]}),r.jsxs(J,{onClick:t,className:"shadow-sm",children:[r.jsx(Nt,{className:"h-4 w-4 mr-2"}),"New Inspection"]})]})]}),r.jsxs(fe,{className:"shadow-sm",children:[r.jsxs(we,{children:[r.jsxs(Ne,{className:"text-xl",children:["Home/Vehicle PDI Inspections (",c.length,")"]}),r.jsx(Ue,{children:"Manage pre-delivery inspections for homes and vehicles"})]}),r.jsx(me,{children:r.jsxs("div",{className:"space-y-4",children:[c.map(u=>{var m,h,x;return r.jsxs("div",{className:"ri-table-row",children:[r.jsx("div",{className:"flex items-center space-x-4 flex-1",children:r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[r.jsxs("h3",{className:"font-semibold text-foreground",children:["Inspection #",u.id.substring(0,8)]}),r.jsxs(ze,{className:He("ri-badge-status",d(u.status)),children:[f(u.status),r.jsx("span",{className:"ml-1",children:u.status.replace("_"," ").toUpperCase()})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm text-muted-foreground",children:[r.jsxs("div",{children:[r.jsx("span",{className:"font-medium",children:"Vehicle:"}),r.jsxs("span",{className:"ml-1",children:[(m=u.vehicle)==null?void 0:m.make," ",(h=u.vehicle)==null?void 0:h.model," (",u.vehicleId,")"]})]}),r.jsxs("div",{children:[r.jsx("span",{className:"font-medium",children:"Inspector:"}),r.jsx("span",{className:"ml-1",children:((x=u.inspector)==null?void 0:x.name)||u.inspectorId})]}),r.jsxs("div",{children:[r.jsx("span",{className:"font-medium",children:"Started:"}),r.jsx("span",{className:"ml-1",children:lt(u.startedAt)})]}),u.completedAt&&r.jsxs("div",{children:[r.jsx("span",{className:"font-medium",children:"Completed:"}),r.jsx("span",{className:"ml-1",children:lt(u.completedAt)})]})]}),r.jsxs("div",{className:"flex items-center space-x-4 mt-2 text-sm",children:[r.jsxs("span",{className:"flex items-center",children:[r.jsx($r,{className:"h-3 w-3 mr-1 text-green-500"}),u.items.filter(g=>g.status==="passed").length," passed"]}),r.jsxs("span",{className:"flex items-center",children:[r.jsx(Ff,{className:"h-3 w-3 mr-1 text-red-500"}),u.items.filter(g=>g.status==="failed").length," failed"]}),r.jsxs("span",{className:"flex items-center",children:[r.jsx(er,{className:"h-3 w-3 mr-1 text-yellow-500"}),u.items.filter(g=>g.status==="pending").length," pending"]})]}),u.defects.length>0&&r.jsx("div",{className:"mt-2 bg-red-50 p-2 rounded-md",children:r.jsxs("p",{className:"text-sm text-red-700 flex items-center",children:[r.jsx(Ff,{className:"h-3 w-3 mr-1"}),u.defects.length," defect",u.defects.length!==1?"s":""," found"]})})]})}),r.jsx("div",{className:"ri-action-buttons",children:u.status===cn.IN_PROGRESS?r.jsxs(J,{variant:"outline",size:"sm",className:"shadow-sm",onClick:()=>a(u),children:[r.jsx(su,{className:"h-3 w-3 mr-1"}),"Continue"]}):r.jsxs(J,{variant:"outline",size:"sm",className:"shadow-sm",onClick:()=>n(u),children:[r.jsx(Sl,{className:"h-3 w-3 mr-1"}),"View"]})})]},u.id)}),c.length===0&&r.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[r.jsx(su,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),r.jsx("p",{children:"No inspections found"}),r.jsx("p",{className:"text-sm",children:"Create your first inspection to get started"})]})]})})]})]})}function gde({inspection:e,vehicles:t,onSave:n,onComplete:a,onUpdateItem:s,onAddDefect:i,onAddPhoto:o,onCancel:l}){var U;const{toast:c}=Ct(),[d,f]=w.useState(!1),[u,m]=w.useState("checklist"),[h,x]=w.useState(e.notes||""),[g,p]=w.useState(!1),[v,y]=w.useState(null),[b,j]=w.useState({title:"",description:"",severity:xa.MEDIUM}),[C,E]=w.useState(!1),[S,N]=w.useState("");w.useEffect(()=>{x(e.notes||"")},[e]);const{getRootProps:I,getInputProps:D}=ux({accept:{"image/*":[]},onDrop:W=>{if(W.length===0)return;const q=W[0],R=URL.createObjectURL(q);L(R)}}),T=async()=>{f(!0);try{await n({notes:h}),c({title:"Success",description:"Inspection saved successfully"})}catch{c({title:"Error",description:"Failed to save inspection",variant:"destructive"})}finally{f(!1)}},A=async()=>{const W=e.items.filter(q=>{const R=q.templateItem;return(R==null?void 0:R.isRequired)&&q.status===ur.PENDING});if(W.length>0){c({title:"Incomplete Inspection",description:`${W.length} required items are still pending`,variant:"destructive"});return}f(!0);try{await a(e.id,h),c({title:"Success",description:"Inspection completed successfully"}),l()}catch{c({title:"Error",description:"Failed to complete inspection",variant:"destructive"})}finally{f(!1)}},_=async(W,q,R,V)=>{try{await s(e.id,W,{status:q,value:R,notes:V}),q===ur.FAILED&&(y(W),p(!0))}catch{c({title:"Error",description:"Failed to update item",variant:"destructive"})}},k=async()=>{if(!b.title||!b.description){c({title:"Validation Error",description:"Title and description are required",variant:"destructive"});return}try{await i(e.id,{...b,inspectionItemId:v||void 0}),j({title:"",description:"",severity:xa.MEDIUM}),y(null),p(!1),c({title:"Success",description:"Defect added successfully"})}catch{c({title:"Error",description:"Failed to add defect",variant:"destructive"})}},L=async W=>{try{await o(e.id,{url:W,inspectionItemId:v||void 0,caption:S}),N(""),E(!1),c({title:"Success",description:"Photo added successfully"})}catch{c({title:"Error",description:"Failed to add photo",variant:"destructive"})}},$=W=>{switch(W){case ur.PENDING:return"bg-yellow-50 text-yellow-700 border-yellow-200";case ur.PASSED:return"bg-green-50 text-green-700 border-green-200";case ur.FAILED:return"bg-red-50 text-red-700 border-red-200";case ur.NA:return"bg-gray-50 text-gray-700 border-gray-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},M=W=>{switch(W){case xa.LOW:return"bg-blue-50 text-blue-700 border-blue-200";case xa.MEDIUM:return"bg-yellow-50 text-yellow-700 border-yellow-200";case xa.HIGH:return"bg-orange-50 text-orange-700 border-orange-200";case xa.CRITICAL:return"bg-red-50 text-red-700 border-red-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},B=t.find(W=>W.id===e.vehicleId);return r.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:r.jsxs(fe,{className:"w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[r.jsx(we,{children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx(Ne,{children:"PDI Inspection"}),r.jsx(Ue,{children:B?`${B.year} ${B.make} ${B.model}`:e.vehicleId})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(ze,{className:He("ri-badge-status",e.status===cn.IN_PROGRESS?"bg-yellow-50 text-yellow-700 border-yellow-200":e.status===cn.COMPLETED?"bg-blue-50 text-blue-700 border-blue-200":e.status===cn.APPROVED?"bg-green-50 text-green-700 border-green-200":"bg-red-50 text-red-700 border-red-200"),children:e.status.replace("_"," ").toUpperCase()}),r.jsx(J,{variant:"ghost",size:"sm",onClick:l,children:r.jsx($t,{className:"h-4 w-4"})})]})]})}),r.jsx(me,{children:r.jsxs(lr,{value:u,onValueChange:m,className:"space-y-4",children:[r.jsxs(or,{className:"grid w-full grid-cols-3",children:[r.jsx(Ke,{value:"checklist",children:"Checklist"}),r.jsxs(Ke,{value:"defects",children:["Defects",e.defects.length>0&&r.jsx(ze,{className:"ml-2 bg-red-50 text-red-700 border-red-200",children:e.defects.length})]}),r.jsxs(Ke,{value:"photos",children:["Photos",e.photos.length>0&&r.jsx(ze,{className:"ml-2 bg-blue-50 text-blue-700 border-blue-200",children:e.photos.length})]})]}),r.jsxs(Je,{value:"checklist",className:"space-y-6",children:[g&&r.jsxs(fe,{className:"border-2 border-red-200",children:[r.jsxs(we,{className:"bg-red-50",children:[r.jsxs(Ne,{className:"text-lg text-red-700 flex items-center",children:[r.jsx(Ts,{className:"h-5 w-5 mr-2"}),"Report Defect"]}),r.jsx(Ue,{className:"text-red-600",children:"Record details about the issue found"})]}),r.jsxs(me,{className:"pt-6 space-y-4",children:[r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"defectTitle",children:"Defect Title *"}),r.jsx(je,{id:"defectTitle",value:b.title,onChange:W=>j(q=>({...q,title:W.target.value})),placeholder:"e.g., Damaged Roof Seal"})]}),r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"defectDescription",children:"Description *"}),r.jsx(Xt,{id:"defectDescription",value:b.description,onChange:W=>j(q=>({...q,description:W.target.value})),placeholder:"Describe the defect in detail",rows:3})]}),r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"defectSeverity",children:"Severity"}),r.jsxs($e,{value:b.severity,onValueChange:W=>j(q=>({...q,severity:W})),children:[r.jsx(Fe,{children:r.jsx(Be,{})}),r.jsxs(Me,{children:[r.jsx(K,{value:xa.LOW,children:"Low"}),r.jsx(K,{value:xa.MEDIUM,children:"Medium"}),r.jsx(K,{value:xa.HIGH,children:"High"}),r.jsx(K,{value:xa.CRITICAL,children:"Critical"})]})]})]}),r.jsxs("div",{className:"flex justify-end space-x-2",children:[r.jsx(J,{type:"button",variant:"outline",onClick:()=>{p(!1),y(null)},children:"Cancel"}),r.jsx(J,{type:"button",onClick:k,children:"Add Defect"})]})]})]}),C&&r.jsxs(fe,{className:"border-2 border-blue-200",children:[r.jsxs(we,{className:"bg-blue-50",children:[r.jsxs(Ne,{className:"text-lg text-blue-700 flex items-center",children:[r.jsx(ul,{className:"h-5 w-5 mr-2"}),"Add Photo"]}),r.jsx(Ue,{className:"text-blue-600",children:"Upload a photo for documentation"})]}),r.jsxs(me,{className:"pt-6 space-y-4",children:[r.jsxs("div",{...I(),className:"border-2 border-dashed rounded-lg p-6 text-center cursor-pointer hover:bg-muted/10",children:[r.jsx("input",{...D()}),r.jsx(Zf,{className:"h-8 w-8 mx-auto mb-2 text-muted-foreground"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Drag & drop an image here, or click to select a file"})]}),r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"photoCaption",children:"Caption (Optional)"}),r.jsx(je,{id:"photoCaption",value:S,onChange:W=>N(W.target.value),placeholder:"e.g., Front view of vehicle"})]}),r.jsxs("div",{className:"flex justify-end space-x-2",children:[r.jsx(J,{type:"button",variant:"outline",onClick:()=>{E(!1),y(null),N("")},children:"Cancel"}),r.jsx(J,{type:"button",onClick:()=>{L("https://images.pexels.com/photos/1319515/pexels-photo-1319515.jpeg")},children:"Simulate Upload"})]})]})]}),(U=e.template)==null?void 0:U.sections.map(W=>r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"text-lg font-semibold",children:W.name}),W.description&&r.jsx("p",{className:"text-sm text-muted-foreground",children:W.description}),r.jsx("div",{className:"space-y-3",children:W.items.map(q=>{const R=e.items.find(V=>V.templateItemId===q.id);return R?r.jsx(fe,{className:"shadow-sm",children:r.jsx(me,{className:"p-4",children:r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[r.jsx("h4",{className:"font-medium",children:q.name}),q.isRequired&&r.jsx(ze,{className:"bg-blue-50 text-blue-700 border-blue-200 text-xs",children:"Required"}),r.jsx(ze,{className:He("ri-badge-status text-xs",$(R.status)),children:R.status.toUpperCase()})]}),q.description&&r.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:q.description}),q.itemType==="text"&&r.jsx("div",{className:"mb-3",children:r.jsx(je,{value:R.value||"",onChange:V=>_(R.id,ur.PASSED,V.target.value),placeholder:"Enter text"})}),q.itemType==="number"&&r.jsx("div",{className:"mb-3",children:r.jsx(je,{type:"number",value:R.value||"",onChange:V=>_(R.id,ur.PASSED,V.target.value),placeholder:"Enter number"})}),q.itemType==="photo"&&r.jsxs("div",{className:"mb-3",children:[r.jsxs(J,{variant:"outline",size:"sm",onClick:()=>{y(R.id),E(!0)},children:[r.jsx(ul,{className:"h-4 w-4 mr-2"}),"Add Photo"]}),e.photos.filter(V=>V.inspectionItemId===R.id).length>0&&r.jsx("div",{className:"grid grid-cols-3 gap-2 mt-2",children:e.photos.filter(V=>V.inspectionItemId===R.id).map(V=>r.jsxs("div",{className:"relative",children:[r.jsx("img",{src:V.url,alt:V.caption||"Inspection photo",className:"h-20 w-full object-cover rounded-md"}),V.caption&&r.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-black/50 text-white text-xs p-1 truncate",children:V.caption})]},V.id))})]}),R.notes&&r.jsx("div",{className:"mb-3 p-2 bg-muted/30 rounded-md",children:r.jsxs("p",{className:"text-sm text-muted-foreground",children:[r.jsx("span",{className:"font-medium",children:"Notes:"})," ",R.notes]})}),R.status!==ur.PENDING&&r.jsx("div",{className:"mb-3",children:r.jsx(Xt,{value:R.notes||"",onChange:V=>_(R.id,R.status,R.value,V.target.value),placeholder:"Add notes (optional)",rows:2})})]}),q.itemType==="checkbox"&&r.jsxs("div",{className:"flex items-center space-x-2 ml-4",children:[r.jsxs(J,{variant:R.status===ur.PASSED?"default":"outline",size:"sm",onClick:()=>_(R.id,ur.PASSED),className:R.status===ur.PASSED?"":"border-green-200 text-green-700",children:[r.jsx($r,{className:"h-4 w-4 mr-1"}),"Pass"]}),r.jsxs(J,{variant:R.status===ur.FAILED?"default":"outline",size:"sm",onClick:()=>_(R.id,ur.FAILED),className:R.status===ur.FAILED?"":"border-red-200 text-red-700",children:[r.jsx(di,{className:"h-4 w-4 mr-1"}),"Fail"]}),r.jsx(J,{variant:R.status===ur.NA?"default":"outline",size:"sm",onClick:()=>_(R.id,ur.NA),className:R.status===ur.NA?"":"border-gray-200 text-gray-700",children:"N/A"})]})]})})},q.id):null})})]},W.id)),r.jsxs("div",{className:"space-y-4 pt-6 border-t",children:[r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"inspectionNotes",children:"Inspection Notes"}),r.jsx(Xt,{id:"inspectionNotes",value:h,onChange:W=>x(W.target.value),placeholder:"Add general notes about this inspection",rows:3})]}),r.jsxs("div",{className:"flex justify-end space-x-3",children:[r.jsx(J,{type:"button",variant:"outline",onClick:l,disabled:d,children:"Cancel"}),r.jsxs(J,{type:"button",onClick:T,disabled:d,children:[r.jsx(Pr,{className:"h-4 w-4 mr-2"}),"Save Progress"]}),r.jsxs(J,{type:"button",onClick:A,disabled:d||e.status!=="in_progress",children:[r.jsx(su,{className:"h-4 w-4 mr-2"}),"Complete Inspection"]})]})]})]}),r.jsxs(Je,{value:"defects",className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h3",{className:"text-lg font-semibold",children:"Defects"}),r.jsxs(J,{size:"sm",onClick:()=>{y(null),p(!0)},children:[r.jsx(Nt,{className:"h-4 w-4 mr-2"}),"Add Defect"]})]}),e.defects.length===0?r.jsxs("div",{className:"text-center py-8 text-muted-foreground border-2 border-dashed rounded-lg",children:[r.jsx(Ts,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),r.jsx("p",{children:"No defects reported"}),r.jsx("p",{className:"text-sm",children:"Add defects when issues are found"})]}):r.jsx("div",{className:"space-y-4",children:e.defects.map(W=>r.jsxs(fe,{className:"shadow-sm",children:[r.jsx(we,{className:"pb-3",children:r.jsx("div",{className:"flex items-center justify-between",children:r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("h4",{className:"font-semibold",children:W.title}),r.jsx(ze,{className:He("ri-badge-status",M(W.severity)),children:W.severity.toUpperCase()}),r.jsx(ze,{className:W.status==="open"?"bg-red-50 text-red-700 border-red-200":W.status==="in_progress"?"bg-yellow-50 text-yellow-700 border-yellow-200":W.status==="resolved"?"bg-blue-50 text-blue-700 border-blue-200":"bg-green-50 text-green-700 border-green-200",children:W.status.replace("_"," ").toUpperCase()})]})})}),r.jsxs(me,{children:[r.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:W.description}),e.photos.filter(q=>q.defectId===W.id).length>0&&r.jsxs("div",{className:"mb-4",children:[r.jsx("h5",{className:"text-sm font-medium mb-2",children:"Photos"}),r.jsx("div",{className:"grid grid-cols-3 gap-2",children:e.photos.filter(q=>q.defectId===W.id).map(q=>r.jsxs("div",{className:"relative",children:[r.jsx("img",{src:q.url,alt:q.caption||"Defect photo",className:"h-24 w-full object-cover rounded-md"}),q.caption&&r.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-black/50 text-white text-xs p-1 truncate",children:q.caption})]},q.id))})]}),r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("div",{className:"text-sm text-muted-foreground",children:W.assignedTo?r.jsxs("span",{children:["Assigned to: ",W.assignedTo]}):r.jsx("span",{children:"Unassigned"})}),r.jsx("div",{className:"flex space-x-2",children:r.jsxs(J,{variant:"outline",size:"sm",onClick:()=>{y(null),E(!0)},children:[r.jsx(ul,{className:"h-3 w-3 mr-1"}),"Add Photo"]})})]})]})]},W.id))})]}),r.jsxs(Je,{value:"photos",className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h3",{className:"text-lg font-semibold",children:"Photos"}),r.jsxs(J,{size:"sm",onClick:()=>{y(null),E(!0)},children:[r.jsx(ul,{className:"h-4 w-4 mr-2"}),"Add Photo"]})]}),e.photos.length===0?r.jsxs("div",{className:"text-center py-8 text-muted-foreground border-2 border-dashed rounded-lg",children:[r.jsx(Zf,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),r.jsx("p",{children:"No photos added"}),r.jsx("p",{className:"text-sm",children:"Add photos to document the inspection"})]}):r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:e.photos.map(W=>r.jsxs("div",{className:"relative",children:[r.jsx("img",{src:W.url,alt:W.caption||"Inspection photo",className:"h-40 w-full object-cover rounded-md"}),W.caption&&r.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-black/50 text-white p-2 truncate",children:W.caption})]},W.id))})]})]})})]})})}function yde({inspection:e,vehicles:t,onAddSignoff:n,onClose:a}){var E,S;const{toast:s}=Ct(),[i,o]=w.useState("summary"),[l,c]=w.useState(!1),[d,f]=w.useState(""),[u,m]=w.useState(Ld.INSPECTOR),h=async()=>{try{await n(e.id,{role:u,notes:d,signatureUrl:"https://via.placeholder.com/200x100?text=Signature"}),c(!1),f(""),s({title:"Success",description:"Signoff added successfully"})}catch{s({title:"Error",description:"Failed to add signoff",variant:"destructive"})}},x=N=>{switch(N){case ur.PENDING:return"bg-yellow-50 text-yellow-700 border-yellow-200";case ur.PASSED:return"bg-green-50 text-green-700 border-green-200";case ur.FAILED:return"bg-red-50 text-red-700 border-red-200";case ur.NA:return"bg-gray-50 text-gray-700 border-gray-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},g=N=>{switch(N){case xa.LOW:return"bg-blue-50 text-blue-700 border-blue-200";case xa.MEDIUM:return"bg-yellow-50 text-yellow-700 border-yellow-200";case xa.HIGH:return"bg-orange-50 text-orange-700 border-orange-200";case xa.CRITICAL:return"bg-red-50 text-red-700 border-red-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},p=t.find(N=>N.id===e.vehicleId),v=e.items.filter(N=>N.status===ur.PASSED).length,y=e.items.filter(N=>N.status===ur.FAILED).length,b=e.items.filter(N=>N.status===ur.NA).length,j=e.items.length,C=Math.round((v+y+b)/j*100);return r.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:r.jsxs(fe,{className:"w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[r.jsx(we,{children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx(Ne,{children:"PDI Inspection Report"}),r.jsx(Ue,{children:p?`${p.year} ${p.make} ${p.model}`:e.vehicleId})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(ze,{className:He("ri-badge-status",e.status===cn.IN_PROGRESS?"bg-yellow-50 text-yellow-700 border-yellow-200":e.status===cn.COMPLETED?"bg-blue-50 text-blue-700 border-blue-200":e.status===cn.APPROVED?"bg-green-50 text-green-700 border-green-200":"bg-red-50 text-red-700 border-red-200"),children:e.status.replace("_"," ").toUpperCase()}),r.jsx(J,{variant:"ghost",size:"sm",onClick:a,children:r.jsx($t,{className:"h-4 w-4"})})]})]})}),r.jsx(me,{children:r.jsxs(lr,{value:i,onValueChange:o,className:"space-y-4",children:[r.jsxs(or,{className:"grid w-full grid-cols-4",children:[r.jsx(Ke,{value:"summary",children:"Summary"}),r.jsx(Ke,{value:"checklist",children:"Checklist"}),r.jsxs(Ke,{value:"defects",children:["Defects",e.defects.length>0&&r.jsx(ze,{className:"ml-2 bg-red-50 text-red-700 border-red-200",children:e.defects.length})]}),r.jsxs(Ke,{value:"signoffs",children:["Signoffs",e.signoffs.length>0&&r.jsx(ze,{className:"ml-2 bg-green-50 text-green-700 border-green-200",children:e.signoffs.length})]})]}),r.jsxs(Je,{value:"summary",className:"space-y-6",children:[r.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[r.jsxs(fe,{className:"shadow-sm",children:[r.jsx(we,{children:r.jsx(Ne,{className:"text-lg",children:"Inspection Details"})}),r.jsx(me,{children:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("span",{className:"text-sm font-medium text-muted-foreground",children:"Status"}),r.jsx("p",{className:"font-medium",children:e.status.replace("_"," ")})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-sm font-medium text-muted-foreground",children:"Inspector"}),r.jsx("p",{className:"font-medium",children:((E=e.inspector)==null?void 0:E.name)||e.inspectorId})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-sm font-medium text-muted-foreground",children:"Started"}),r.jsx("p",{className:"font-medium",children:lt(e.startedAt)})]}),e.completedAt&&r.jsxs("div",{children:[r.jsx("span",{className:"text-sm font-medium text-muted-foreground",children:"Completed"}),r.jsx("p",{className:"font-medium",children:lt(e.completedAt)})]})]}),e.notes&&r.jsxs("div",{children:[r.jsx("span",{className:"text-sm font-medium text-muted-foreground",children:"Notes"}),r.jsx("p",{className:"text-sm mt-1 p-3 bg-muted/30 rounded-md",children:e.notes})]})]})})]}),r.jsxs(fe,{className:"shadow-sm",children:[r.jsx(we,{children:r.jsx(Ne,{className:"text-lg",children:"Inspection Results"})}),r.jsx(me,{children:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm font-medium",children:"Completion"}),r.jsxs("span",{className:"text-sm font-bold",children:[C,"%"]})]}),r.jsx("div",{className:"w-full bg-muted rounded-full h-2.5",children:r.jsx("div",{className:"bg-primary h-2.5 rounded-full",style:{width:`${C}%`}})}),r.jsxs("div",{className:"grid grid-cols-3 gap-2 text-center",children:[r.jsxs("div",{className:"p-3 bg-green-50 rounded-lg",children:[r.jsx("div",{className:"text-lg font-bold text-green-700",children:v}),r.jsx("p",{className:"text-xs text-green-600",children:"Passed"})]}),r.jsxs("div",{className:"p-3 bg-red-50 rounded-lg",children:[r.jsx("div",{className:"text-lg font-bold text-red-700",children:y}),r.jsx("p",{className:"text-xs text-red-600",children:"Failed"})]}),r.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[r.jsx("div",{className:"text-lg font-bold text-gray-700",children:b}),r.jsx("p",{className:"text-xs text-gray-600",children:"N/A"})]})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm font-medium",children:"Defects"}),r.jsx("span",{className:"text-sm font-bold text-red-600",children:e.defects.length})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm font-medium",children:"Photos"}),r.jsx("span",{className:"text-sm font-bold",children:e.photos.length})]})]})})]})]}),r.jsxs("div",{className:"flex justify-end space-x-3",children:[r.jsx(J,{variant:"outline",onClick:a,children:"Close"}),r.jsxs(J,{variant:"outline",children:[r.jsx(hu,{className:"h-4 w-4 mr-2"}),"Print Report"]}),r.jsxs(J,{variant:"outline",children:[r.jsx(ms,{className:"h-4 w-4 mr-2"}),"Export PDF"]}),e.status==="completed"&&r.jsxs(J,{onClick:()=>c(!0),children:[r.jsx(Mg,{className:"h-4 w-4 mr-2"}),"Add Signoff"]})]})]}),r.jsx(Je,{value:"checklist",className:"space-y-6",children:(S=e.template)==null?void 0:S.sections.map(N=>r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"text-lg font-semibold",children:N.name}),N.description&&r.jsx("p",{className:"text-sm text-muted-foreground",children:N.description}),r.jsx("div",{className:"space-y-3",children:N.items.map(I=>{const D=e.items.find(T=>T.templateItemId===I.id);return D?r.jsx(fe,{className:"shadow-sm",children:r.jsx(me,{className:"p-4",children:r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[r.jsx("h4",{className:"font-medium",children:I.name}),I.isRequired&&r.jsx(ze,{className:"bg-blue-50 text-blue-700 border-blue-200 text-xs",children:"Required"}),r.jsx(ze,{className:He("ri-badge-status text-xs",x(D.status)),children:D.status.toUpperCase()})]}),I.description&&r.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:I.description}),D.value&&r.jsx("div",{className:"mb-2 p-2 bg-muted/30 rounded-md",children:r.jsxs("p",{className:"text-sm",children:[r.jsx("span",{className:"font-medium",children:"Value:"})," ",D.value]})}),D.notes&&r.jsx("div",{className:"mb-2 p-2 bg-muted/30 rounded-md",children:r.jsxs("p",{className:"text-sm text-muted-foreground",children:[r.jsx("span",{className:"font-medium",children:"Notes:"})," ",D.notes]})}),e.photos.filter(T=>T.inspectionItemId===D.id).length>0&&r.jsxs("div",{className:"mt-2",children:[r.jsx("h5",{className:"text-sm font-medium mb-1",children:"Photos"}),r.jsx("div",{className:"grid grid-cols-3 gap-2",children:e.photos.filter(T=>T.inspectionItemId===D.id).map(T=>r.jsxs("div",{className:"relative",children:[r.jsx("img",{src:T.url,alt:T.caption||"Inspection photo",className:"h-20 w-full object-cover rounded-md"}),T.caption&&r.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-black/50 text-white text-xs p-1 truncate",children:T.caption})]},T.id))})]}),e.defects.filter(T=>T.inspectionItemId===D.id).length>0&&r.jsxs("div",{className:"mt-2",children:[r.jsx("h5",{className:"text-sm font-medium mb-1 text-red-600",children:"Defects"}),e.defects.filter(T=>T.inspectionItemId===D.id).map(T=>r.jsxs("div",{className:"p-2 bg-red-50 rounded-md mb-2",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("span",{className:"font-medium text-red-700",children:T.title}),r.jsx(ze,{className:He("ri-badge-status text-xs",g(T.severity)),children:T.severity.toUpperCase()})]}),r.jsx("p",{className:"text-sm text-red-600 mt-1",children:T.description})]},T.id))]})]}),r.jsxs("div",{className:"ml-4",children:[D.status===ur.PASSED&&r.jsx($r,{className:"h-6 w-6 text-green-500"}),D.status===ur.FAILED&&r.jsx(di,{className:"h-6 w-6 text-red-500"}),D.status===ur.PENDING&&r.jsx(er,{className:"h-6 w-6 text-yellow-500"}),D.status===ur.NA&&r.jsx("span",{className:"text-sm font-medium text-gray-500",children:"N/A"})]})]})})},I.id):null})})]},N.id))}),r.jsxs(Je,{value:"defects",className:"space-y-4",children:[r.jsx("h3",{className:"text-lg font-semibold",children:"Defects"}),e.defects.length===0?r.jsxs("div",{className:"text-center py-8 text-muted-foreground border-2 border-dashed rounded-lg",children:[r.jsx($r,{className:"h-12 w-12 mx-auto mb-4 text-green-500"}),r.jsx("p",{children:"No defects reported"}),r.jsx("p",{className:"text-sm",children:"This vehicle passed inspection without issues"})]}):r.jsx("div",{className:"space-y-4",children:e.defects.map(N=>r.jsxs(fe,{className:"shadow-sm",children:[r.jsx(we,{className:"pb-3",children:r.jsx("div",{className:"flex items-center justify-between",children:r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("h4",{className:"font-semibold",children:N.title}),r.jsx(ze,{className:He("ri-badge-status",g(N.severity)),children:N.severity.toUpperCase()}),r.jsx(ze,{className:N.status==="open"?"bg-red-50 text-red-700 border-red-200":N.status==="in_progress"?"bg-yellow-50 text-yellow-700 border-yellow-200":N.status==="resolved"?"bg-blue-50 text-blue-700 border-blue-200":"bg-green-50 text-green-700 border-green-200",children:N.status.replace("_"," ").toUpperCase()})]})})}),r.jsxs(me,{children:[r.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:N.description}),e.photos.filter(I=>I.defectId===N.id).length>0&&r.jsxs("div",{className:"mb-4",children:[r.jsx("h5",{className:"text-sm font-medium mb-2",children:"Photos"}),r.jsx("div",{className:"grid grid-cols-3 gap-2",children:e.photos.filter(I=>I.defectId===N.id).map(I=>r.jsxs("div",{className:"relative",children:[r.jsx("img",{src:I.url,alt:I.caption||"Defect photo",className:"h-24 w-full object-cover rounded-md"}),I.caption&&r.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-black/50 text-white text-xs p-1 truncate",children:I.caption})]},I.id))})]}),r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("div",{className:"text-sm text-muted-foreground",children:N.assignedTo?r.jsxs("span",{children:["Assigned to: ",N.assignedTo]}):r.jsx("span",{children:"Unassigned"})}),N.resolvedAt&&r.jsxs("div",{className:"text-sm text-green-600",children:["Resolved: ",lt(N.resolvedAt)]})]}),N.resolutionNotes&&r.jsx("div",{className:"mt-3 p-2 bg-blue-50 rounded-md",children:r.jsxs("p",{className:"text-sm text-blue-700",children:[r.jsx("span",{className:"font-medium",children:"Resolution:"})," ",N.resolutionNotes]})})]})]},N.id))})]}),r.jsxs(Je,{value:"signoffs",className:"space-y-4",children:[l&&r.jsxs(fe,{className:"border-2 border-green-200 mb-6",children:[r.jsxs(we,{className:"bg-green-50",children:[r.jsxs(Ne,{className:"text-lg text-green-700 flex items-center",children:[r.jsx(Mg,{className:"h-5 w-5 mr-2"}),"Add Signoff"]}),r.jsx(Ue,{className:"text-green-600",children:"Sign off on the completed inspection"})]}),r.jsxs(me,{className:"pt-6 space-y-4",children:[r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"signoffRole",children:"Role"}),r.jsxs("select",{id:"signoffRole",value:u,onChange:N=>m(N.target.value),className:"w-full p-2 border rounded-md",children:[r.jsx("option",{value:Ld.INSPECTOR,children:"Inspector"}),r.jsx("option",{value:Ld.MANAGER,children:"Manager"}),r.jsx("option",{value:Ld.QUALITY_CONTROL,children:"Quality Control"})]})]}),r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"signoffNotes",children:"Notes (Optional)"}),r.jsx(Xt,{id:"signoffNotes",value:d,onChange:N=>f(N.target.value),placeholder:"Add any notes about this signoff",rows:3})]}),r.jsxs("div",{className:"border-2 border-dashed rounded-lg p-6 text-center",children:[r.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Signature Capture"}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"In a real app, this would be a signature pad"})]}),r.jsxs("div",{className:"flex justify-end space-x-2",children:[r.jsx(J,{type:"button",variant:"outline",onClick:()=>{c(!1),f("")},children:"Cancel"}),r.jsx(J,{type:"button",onClick:h,children:"Add Signoff"})]})]})]}),r.jsx("h3",{className:"text-lg font-semibold",children:"Signoffs"}),e.signoffs.length===0?r.jsxs("div",{className:"text-center py-8 text-muted-foreground border-2 border-dashed rounded-lg",children:[r.jsx(Mg,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),r.jsx("p",{children:"No signoffs yet"}),r.jsx("p",{className:"text-sm",children:"Add signoffs to approve the inspection"})]}):r.jsx("div",{className:"space-y-4",children:e.signoffs.map(N=>{var I;return r.jsx(fe,{className:"shadow-sm",children:r.jsx(me,{className:"p-4",children:r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[r.jsx("h4",{className:"font-medium",children:((I=N.user)==null?void 0:I.name)||N.userId}),r.jsx(ze,{className:"bg-blue-50 text-blue-700 border-blue-200",children:N.role.replace("_"," ").toUpperCase()})]}),r.jsxs("p",{className:"text-sm text-muted-foreground mb-2",children:["Signed: ",lt(N.signedAt)]}),N.notes&&r.jsx("p",{className:"text-sm text-muted-foreground p-2 bg-muted/30 rounded-md",children:N.notes})]}),r.jsx("div",{className:"ml-4",children:N.signatureUrl?r.jsx("img",{src:N.signatureUrl,alt:"Signature",className:"h-12 object-contain"}):r.jsx("div",{className:"h-12 w-32 border-2 border-dashed rounded flex items-center justify-center",children:r.jsx("span",{className:"text-xs text-muted-foreground",children:"No signature"})})})]})})},N.id)})}),e.status==="completed"&&!l&&r.jsx("div",{className:"flex justify-end mt-4",children:r.jsxs(J,{onClick:()=>c(!0),children:[r.jsx(Mg,{className:"h-4 w-4 mr-2"}),"Add Signoff"]})})]})]})})]})})}function bde({templates:e,vehicles:t,currentUserId:n,onCreateInspection:a,onCancel:s}){const{toast:i}=Ct(),[o,l]=w.useState(!1),[c,d]=w.useState(""),[f,u]=w.useState(""),[m,h]=w.useState(""),[x,g]=w.useState([]);w.useEffect(()=>{if(c){const v=t.find(y=>y.id===c);if(v){const y=v.type,b=e.filter(j=>j.isActive&&j.vehicleType===y);g(b),b.length===1?u(b[0].id):u("")}}else g([]),u("")},[c,e,t]);const p=async v=>{if(v.preventDefault(),!c){i({title:"Validation Error",description:"Please select a vehicle",variant:"destructive"});return}if(!f){i({title:"Validation Error",description:"Please select a template",variant:"destructive"});return}l(!0);try{await a({templateId:f,vehicleId:c,inspectorId:n,notes:m}),i({title:"Success",description:"Inspection created successfully"})}catch{i({title:"Error",description:"Failed to create inspection",variant:"destructive"})}finally{l(!1)}};return r.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:r.jsxs(fe,{className:"w-full max-w-md",children:[r.jsx(we,{children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx(Ne,{children:"New PDI Inspection"}),r.jsx(Ue,{children:"Create a new pre-delivery inspection"})]}),r.jsx(J,{variant:"ghost",size:"sm",onClick:s,children:r.jsx($t,{className:"h-4 w-4"})})]})}),r.jsx(me,{children:r.jsxs("form",{onSubmit:p,className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"vehicle",children:"Vehicle *"}),r.jsxs($e,{value:c,onValueChange:d,children:[r.jsx(Fe,{children:r.jsx(Be,{placeholder:"Select a home/vehicle"})}),r.jsx(Me,{children:t.map(v=>r.jsxs(K,{value:v.id,children:[v.year," ",v.make," ",v.model," - ",v.vin]},v.id))})]})]}),r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"template",children:"Inspection Template *"}),r.jsxs($e,{value:f,onValueChange:u,disabled:x.length===0,children:[r.jsx(Fe,{children:r.jsx(Be,{placeholder:x.length===0?"Select a home/vehicle first":"Select a template"})}),r.jsx(Me,{children:x.map(v=>r.jsx(K,{value:v.id,children:v.name},v.id))})]}),x.length===0&&c&&r.jsx("p",{className:"text-xs text-red-500 mt-1",children:"No templates available for this vehicle type"})]}),r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"notes",children:"Notes (Optional)"}),r.jsx(Xt,{id:"notes",value:m,onChange:v=>h(v.target.value),placeholder:"Add any initial notes about this inspection",rows:3})]}),r.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[r.jsx(J,{type:"button",variant:"outline",onClick:s,disabled:o,children:"Cancel"}),r.jsx(J,{type:"submit",disabled:o||!c||!f,children:o?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Creating..."]}):r.jsxs(r.Fragment,{children:[r.jsx(su,{className:"h-4 w-4 mr-2"}),"Start Inspection"]})})]})]})})]})})}function oD(){const{templates:e,inspections:t,createTemplate:n,updateTemplate:a,deleteTemplate:s,createInspection:i,updateInspection:o,updateInspectionItem:l,completeInspection:c,createDefect:d,addPhoto:f,addSignoff:u}=hde(),{vehicles:m}=Ol(),{user:h}=$m(),{toast:x}=Ct(),[g,p]=w.useState("inspections"),[v,y]=w.useState(!1),[b,j]=w.useState(!1),[C,E]=w.useState(!1),[S,N]=w.useState(!1),[I,D]=w.useState(null),[T,A]=w.useState(null),_=()=>{D(null),y(!0)},k=ne=>{D(ne),y(!0)},L=ne=>{D(ne),y(!0)},$=async ne=>{if(window.confirm("Are you sure you want to delete this template?"))try{await s(ne),x({title:"Success",description:"Template deleted successfully"})}catch{x({title:"Error",description:"Failed to delete template",variant:"destructive"})}},M=async ne=>{try{const Ae={...ne,id:void 0,name:`${ne.name} (Copy)`};await n(Ae),x({title:"Success",description:"Template duplicated successfully"})}catch{x({title:"Error",description:"Failed to duplicate template",variant:"destructive"})}},B=async ne=>{try{I?await a(I.id,ne):await n(ne),y(!1),D(null)}catch{x({title:"Error",description:`Failed to ${I?"update":"create"} template`,variant:"destructive"})}},U=()=>{E(!0)},W=async ne=>{try{const Ae=await i(ne);E(!1),A(Ae),j(!0)}catch{x({title:"Error",description:"Failed to create inspection",variant:"destructive"})}},q=ne=>{A(ne),N(!0)},R=ne=>{A(ne),j(!0)},V=async ne=>{if(T)try{await o(T.id,ne),x({title:"Success",description:"Inspection saved successfully"})}catch{x({title:"Error",description:"Failed to save inspection",variant:"destructive"})}},G=async(ne,Ae)=>{try{await c(ne,Ae),j(!1),A(null),x({title:"Success",description:"Inspection completed successfully"})}catch{x({title:"Error",description:"Failed to complete inspection",variant:"destructive"})}},ee=async(ne,Ae,Se)=>{try{await l(ne,Ae,Se)}catch{x({title:"Error",description:"Failed to update item",variant:"destructive"})}},re=async(ne,Ae)=>{try{await d(ne,Ae)}catch{x({title:"Error",description:"Failed to add defect",variant:"destructive"})}},de=async(ne,Ae)=>{try{await f(ne,Ae)}catch{x({title:"Error",description:"Failed to add photo",variant:"destructive"})}},ue=async(ne,Ae)=>{try{await u(ne,{...Ae,userId:(h==null?void 0:h.id)||"current-user"})}catch{x({title:"Error",description:"Failed to add signoff",variant:"destructive"})}},oe=e.length,ge=e.filter(ne=>ne.isActive).length,ve=t.length,xe=t.filter(ne=>ne.status===cn.COMPLETED||ne.status===cn.APPROVED).length,Oe=t.filter(ne=>ne.status===cn.IN_PROGRESS).length,ye=t.reduce((ne,Ae)=>ne+Ae.defects.length,0),le=t.reduce((ne,Ae)=>ne+Ae.defects.filter(Se=>Se.status==="open"||Se.status==="in_progress").length,0);return t.reduce((ne,Ae)=>ne+Ae.photos.length,0),r.jsxs("div",{className:"space-y-8",children:[v&&r.jsx(vde,{template:I||void 0,onSave:B,onCancel:()=>{y(!1),D(null)}}),C&&r.jsx(bde,{templates:e,vehicles:m,currentUserId:(h==null?void 0:h.id)||"current-user",onCreateInspection:W,onCancel:()=>E(!1)}),b&&T&&r.jsx(gde,{inspection:T,vehicles:m,onSave:V,onComplete:G,onUpdateItem:ee,onAddDefect:re,onAddPhoto:de,onCancel:()=>{j(!1),A(null)}}),S&&T&&r.jsx(yde,{inspection:T,vehicles:m,onAddSignoff:ue,onClose:()=>{N(!1),A(null)}}),r.jsx("div",{className:"ri-page-header",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"ri-page-title",children:"PDI Checklist - Home/Vehicle"}),r.jsx("p",{className:"ri-page-description",children:"Manage pre-delivery inspections and quality control for homes and vehicles"})]}),r.jsxs(J,{className:"shadow-sm",onClick:U,children:[r.jsx(Nt,{className:"h-4 w-4 mr-2"}),"New Inspection"]})]})}),r.jsxs("div",{className:"ri-stats-grid",children:[r.jsxs(fe,{className:"shadow-sm border-0 bg-gradient-to-br from-blue-50 to-blue-100/50",children:[r.jsxs(we,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(Ne,{className:"text-sm font-medium text-blue-900",children:"Inspections"}),r.jsx(su,{className:"h-4 w-4 text-blue-600"})]}),r.jsxs(me,{children:[r.jsx("div",{className:"text-2xl font-bold text-blue-900",children:ve}),r.jsxs("p",{className:"text-xs text-blue-600 flex items-center mt-1",children:[r.jsx(Ot,{className:"h-3 w-3 mr-1"}),xe," completed"]})]})]}),r.jsxs(fe,{className:"shadow-sm border-0 bg-gradient-to-br from-yellow-50 to-yellow-100/50",children:[r.jsxs(we,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(Ne,{className:"text-sm font-medium text-yellow-900",children:"In Progress"}),r.jsx(su,{className:"h-4 w-4 text-yellow-600"})]}),r.jsxs(me,{children:[r.jsx("div",{className:"text-2xl font-bold text-yellow-900",children:Oe}),r.jsxs("p",{className:"text-xs text-yellow-600 flex items-center mt-1",children:[r.jsx(Ot,{className:"h-3 w-3 mr-1"}),"Active inspections"]})]})]}),r.jsxs(fe,{className:"shadow-sm border-0 bg-gradient-to-br from-red-50 to-red-100/50",children:[r.jsxs(we,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(Ne,{className:"text-sm font-medium text-red-900",children:"Open Defects"}),r.jsx(Ts,{className:"h-4 w-4 text-red-600"})]}),r.jsxs(me,{children:[r.jsx("div",{className:"text-2xl font-bold text-red-900",children:le}),r.jsxs("p",{className:"text-xs text-red-600 flex items-center mt-1",children:[r.jsx(Ot,{className:"h-3 w-3 mr-1"}),ye," total defects"]})]})]}),r.jsxs(fe,{className:"shadow-sm border-0 bg-gradient-to-br from-green-50 to-green-100/50",children:[r.jsxs(we,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(Ne,{className:"text-sm font-medium text-green-900",children:"Templates"}),r.jsx(RA,{className:"h-4 w-4 text-green-600"})]}),r.jsxs(me,{children:[r.jsx("div",{className:"text-2xl font-bold text-green-900",children:oe}),r.jsxs("p",{className:"text-xs text-green-600 flex items-center mt-1",children:[r.jsx(Ot,{className:"h-3 w-3 mr-1"}),ge," active"]})]})]})]}),r.jsxs(lr,{value:g,onValueChange:p,className:"space-y-6",children:[r.jsxs(or,{className:"grid w-full grid-cols-2",children:[r.jsx(Ke,{value:"inspections",children:"Inspections"}),r.jsx(Ke,{value:"templates",children:"Templates"})]}),r.jsx(Je,{value:"inspections",children:r.jsx(xde,{inspections:t,onCreateInspection:U,onViewInspection:q,onContinueInspection:R})}),r.jsx(Je,{value:"templates",children:r.jsx(pde,{templates:e,onCreateTemplate:_,onEditTemplate:k,onDeleteTemplate:$,onDuplicateTemplate:M,onViewTemplate:L})})]})]})}function jde(){return r.jsxs(Ka,{children:[r.jsx(Vt,{path:"/",element:r.jsx(oD,{})}),r.jsx(Vt,{path:"/*",element:r.jsx(oD,{})})]})}function wde(){const[e,t]=w.useState([]),[n,a]=w.useState([]),[s,i]=w.useState([]),[o,l]=w.useState(!1);w.useEffect(()=>{c()},[]);const c=()=>{const A=un("renter-insight-commissions",[{id:"1",salesPersonId:"sales-001",dealId:"deal-001",type:mr.PERCENTAGE,rate:.05,amount:6875,status:Rt.APPROVED,paidDate:new Date("2024-01-20"),notes:"Commission for Georgetown sale",customFields:{},createdAt:new Date("2024-01-18"),updatedAt:new Date("2024-01-20")},{id:"2",salesPersonId:"sales-002",dealId:"deal-002",type:mr.FLAT,rate:0,amount:2500,status:Rt.PENDING,notes:"Flat commission for service contract",customFields:{},createdAt:new Date("2024-01-15"),updatedAt:new Date("2024-01-15")}]),_=un("renter-insight-commission-rules",[{id:"1",name:"Standard Sales Commission",type:"percentage",rate:.05,isActive:!0,createdAt:new Date("2024-01-01"),updatedAt:new Date("2024-01-01")},{id:"2",name:"Service Contract Bonus",type:"flat",amount:500,isActive:!0,createdAt:new Date("2024-01-01"),updatedAt:new Date("2024-01-01")},{id:"3",name:"Tiered Sales Commission",type:"tiered",tiers:[{id:"1",ruleId:"3",minAmount:0,maxAmount:5e4,rate:.03},{id:"2",ruleId:"3",minAmount:5e4,maxAmount:1e5,rate:.05},{id:"3",ruleId:"3",minAmount:1e5,rate:.07}],isActive:!0,createdAt:new Date("2024-01-01"),updatedAt:new Date("2024-01-01")}]),k=un("renter-insight-commission-audit",[{id:"1",commissionId:"1",userId:"user-001",userName:"Admin User",action:"created",newValue:{salesPersonId:"sales-001",dealId:"deal-001",type:mr.PERCENTAGE,rate:.05,amount:6875,status:Rt.PENDING},timestamp:new Date("2024-01-18")},{id:"2",commissionId:"1",userId:"user-001",userName:"Admin User",action:"approved",previousValue:{status:Rt.PENDING},newValue:{status:Rt.APPROVED},notes:"Approved after deal verification",timestamp:new Date("2024-01-19")}]);t(A),a(_),i(k)},d=A=>{Wr("renter-insight-commissions",A)},f=A=>{Wr("renter-insight-commission-rules",A)},u=A=>{Wr("renter-insight-commission-audit",A)},m=A=>e.filter(_=>_.salesPersonId===A),h=A=>e.filter(_=>_.dealId===A),x=A=>e.find(_=>_.id===A),g=A=>n.find(_=>_.id===A),p=A=>s.filter(_=>_.commissionId===A).sort((_,k)=>k.timestamp.getTime()-_.timestamp.getTime()),v=async(A,_,k)=>{l(!0);try{const L={id:Math.random().toString(36).substr(2,9),salesPersonId:A.salesPersonId||"",dealId:A.dealId||"",type:A.type||mr.PERCENTAGE,rate:A.rate||0,amount:A.amount||0,status:Rt.PENDING,notes:A.notes||"",customFields:A.customFields||{},createdAt:new Date,updatedAt:new Date},$=[...e,L];t($),d($);const M={id:Math.random().toString(36).substr(2,9),commissionId:L.id,userId:_,userName:k,action:"created",newValue:{...L},timestamp:new Date},B=[...s,M];return i(B),u(B),L}finally{l(!1)}},y=async(A,_,k,L,$)=>{const M=e.find(R=>R.id===A);if(!M)return null;const B={...M,..._,updatedAt:new Date},U=e.map(R=>R.id===A?B:R);t(U),d(U);const W={id:Math.random().toString(36).substr(2,9),commissionId:A,userId:k,userName:L,action:"updated",previousValue:{...M},newValue:_,notes:$,timestamp:new Date},q=[...s,W];return i(q),u(q),B};return{commissions:e,rules:n,auditTrail:s,loading:o,getCommissionsBySalesPerson:m,getCommissionsByDeal:h,getCommissionById:x,getRuleById:g,getAuditTrailByCommission:p,createCommission:v,updateCommission:y,approveCommission:async(A,_,k,L)=>y(A,{status:Rt.APPROVED},_,k,L),rejectCommission:async(A,_,k,L)=>y(A,{status:Rt.CANCELLED},_,k,L),markCommissionPaid:async(A,_,k,L)=>y(A,{status:Rt.PAID,paidDate:new Date},_,k,L),createRule:async A=>{l(!0);try{let _;switch(A.type){case"flat":_={id:Math.random().toString(36).substr(2,9),name:A.name||"",type:"flat",amount:A.amount||0,isActive:A.isActive??!0,createdAt:new Date,updatedAt:new Date};break;case"percentage":_={id:Math.random().toString(36).substr(2,9),name:A.name||"",type:"percentage",rate:A.rate||0,isActive:A.isActive??!0,createdAt:new Date,updatedAt:new Date};break;case"tiered":_={id:Math.random().toString(36).substr(2,9),name:A.name||"",type:"tiered",tiers:A.tiers||[],isActive:A.isActive??!0,createdAt:new Date,updatedAt:new Date};break;default:throw new Error("Invalid commission rule type")}const k=[...n,_];return a(k),f(k),_}finally{l(!1)}},updateRule:async(A,_)=>{const k=n.find(M=>M.id===A);if(!k)return null;const L={...k,..._,updatedAt:new Date},$=n.map(M=>M.id===A?L:M);return a($),f($),L},deleteRule:async A=>{const _=n.filter(k=>k.id!==A);a(_),f(_)},calculateCommission:(A,_)=>{const k=n.find(L=>L.id===_);if(!k)return 0;switch(k.type){case"flat":return k.amount;case"percentage":return A*k.rate;case"tiered":const $=k.tiers.find(M=>A>=M.minAmount&&(M.maxAmount===void 0||A<M.maxAmount));return $?A*$.rate:0;default:return 0}},generateCommissionReport:A=>{let _=[...e];A.startDate&&(_=_.filter(L=>new Date(L.createdAt)>=new Date(A.startDate))),A.endDate&&(_=_.filter(L=>new Date(L.createdAt)<=new Date(A.endDate))),A.salesPersonId&&(_=_.filter(L=>L.salesPersonId===A.salesPersonId)),A.status&&(_=_.filter(L=>L.status===A.status)),A.type&&(_=_.filter(L=>L.type===A.type));const k={totalCommissions:_.length,totalAmount:_.reduce((L,$)=>L+$.amount,0),pendingAmount:_.filter(L=>L.status===Rt.PENDING).reduce((L,$)=>L+$.amount,0),approvedAmount:_.filter(L=>L.status===Rt.APPROVED).reduce((L,$)=>L+$.amount,0),paidAmount:_.filter(L=>L.status===Rt.PAID).reduce((L,$)=>L+$.amount,0),byType:{flat:_.filter(L=>L.type===mr.FLAT).reduce((L,$)=>L+$.amount,0),percentage:_.filter(L=>L.type===mr.PERCENTAGE).reduce((L,$)=>L+$.amount,0),tiered:_.filter(L=>L.type===mr.TIERED).reduce((L,$)=>L+$.amount,0)}};return{commissions:_,summary:k}},exportCommissionsToCSV:A=>{const _=["ID","Sales Person","Deal ID","Type","Rate","Amount","Status","Paid Date","Notes","Created At"],k=A.map(L=>[L.id,L.salesPersonId,L.dealId,L.type,L.rate,L.amount,L.status,L.paidDate?L.paidDate.toISOString():"",L.notes,L.createdAt.toISOString()]);return[_,...k]}}}function Nde({commission:e,salesReps:t,deals:n,rules:a,onSave:s,onCancel:i}){const{toast:o}=Ct(),[l,c]=w.useState(!1),[d,f]=w.useState({salesPersonId:"",dealId:"",type:mr.PERCENTAGE,rate:.05,amount:0,notes:""}),[u,m]=w.useState(""),[h,x]=w.useState(0),[g,p]=w.useState("");w.useEffect(()=>{if(e){f({...e}),p("");const j=n.find(C=>C.id===e.dealId);j&&x(j.value)}},[e,n]),w.useEffect(()=>{if(d.dealId){const j=n.find(C=>C.id===d.dealId);j&&x(j.value)}},[d.dealId,n]),w.useEffect(()=>{if(u){const j=a.find(E=>E.id===u);if(!j)return;let C=0;switch(j.type){case"flat":C=j.amount,f(I=>({...I,type:mr.FLAT,rate:0,amount:C}));break;case"percentage":const E=j.rate;C=h*E,f(I=>({...I,type:mr.PERCENTAGE,rate:E,amount:C}));break;case"tiered":const N=j.tiers.find(I=>h>=I.minAmount&&(I.maxAmount===void 0||h<I.maxAmount));N&&(C=h*N.rate,f(I=>({...I,type:mr.TIERED,rate:N.rate,amount:C})));break}}else if(d.type===mr.PERCENTAGE){const j=h*(d.rate||0);f(C=>({...C,amount:j}))}},[u,h,d.rate,d.type,a]);const v=async j=>{if(j.preventDefault(),!d.salesPersonId||!d.dealId){o({title:"Validation Error",description:"Sales rep and deal are required",variant:"destructive"});return}if(d.amount<=0){o({title:"Validation Error",description:"Commission amount must be greater than zero",variant:"destructive"});return}c(!0);try{await s(d,g),o({title:"Success",description:`Commission ${e?"updated":"created"} successfully`})}catch{o({title:"Error",description:`Failed to ${e?"update":"create"} commission`,variant:"destructive"})}finally{c(!1)}},y=j=>{m(j)},b=()=>{if(d.type===mr.PERCENTAGE){const j=h*(d.rate||0);f(C=>({...C,amount:j}))}};return r.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:r.jsxs(fe,{className:"w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[r.jsx(we,{children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx(Ne,{children:e?"Edit Commission":"Create Commission"}),r.jsx(Ue,{children:e?"Update commission details":"Create a new commission record"})]}),r.jsx(J,{variant:"ghost",size:"sm",onClick:i,children:r.jsx($t,{className:"h-4 w-4"})})]})}),r.jsx(me,{children:r.jsxs("form",{onSubmit:v,className:"space-y-6",children:[r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"salesPersonId",children:"Sales Rep *"}),r.jsxs($e,{value:d.salesPersonId,onValueChange:j=>f(C=>({...C,salesPersonId:j})),children:[r.jsx(Fe,{children:r.jsx(Be,{placeholder:"Select sales rep"})}),r.jsx(Me,{className:"z-50",children:t.map(j=>r.jsx(K,{value:j.id,children:j.name},j.id))})]})]}),r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"dealId",children:"Deal *"}),r.jsxs($e,{value:d.dealId,onValueChange:j=>f(C=>({...C,dealId:j})),children:[r.jsx(Fe,{children:r.jsx(Be,{placeholder:"Select deal"})}),r.jsx(Me,{className:"z-50",children:n.map(j=>r.jsxs(K,{value:j.id,children:[j.name," - ",De(j.value)]},j.id))})]})]})]}),r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"commissionRule",children:"Commission Rule"}),r.jsxs($e,{value:u,onValueChange:y,children:[r.jsx(Fe,{children:r.jsx(Be,{placeholder:"Select rule or enter manually"})}),r.jsxs(Me,{className:"z-50",children:[r.jsx(K,{value:"",children:"Manual Entry"}),a.filter(j=>j.isActive).map(j=>r.jsxs(K,{value:j.id,children:[j.name," (",j.type,")"]},j.id))]})]})]}),r.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"dealValue",children:"Deal Value"}),r.jsxs("div",{className:"relative",children:[r.jsx(Mt,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),r.jsx(je,{id:"dealValue",type:"number",value:h,onChange:j=>x(parseFloat(j.target.value)||0),className:"pl-10",min:"0",step:"0.01"})]})]}),r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"commissionType",children:"Commission Type"}),r.jsxs($e,{value:d.type,onValueChange:j=>f(C=>({...C,type:j})),disabled:!!u,children:[r.jsx(Fe,{children:r.jsx(Be,{})}),r.jsxs(Me,{className:"z-50",children:[r.jsx(K,{value:mr.FLAT,children:"Flat"}),r.jsx(K,{value:mr.PERCENTAGE,children:"Percentage"}),r.jsx(K,{value:mr.TIERED,children:"Tiered"})]})]})]})]}),d.type===mr.PERCENTAGE&&!u&&r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"rate",children:"Commission Rate (%)"}),r.jsxs("div",{className:"relative",children:[r.jsx(sv,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),r.jsx(je,{id:"rate",type:"number",value:d.rate?d.rate*100:"",onChange:j=>f(C=>({...C,rate:parseFloat(j.target.value)/100||0})),className:"pl-10",min:"0",max:"100",step:"0.01"})]})]}),d.type===mr.FLAT&&!u&&r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"amount",children:"Flat Commission Amount"}),r.jsxs("div",{className:"relative",children:[r.jsx(Mt,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),r.jsx(je,{id:"amount",type:"number",value:d.amount||"",onChange:j=>f(C=>({...C,amount:parseFloat(j.target.value)||0})),className:"pl-10",min:"0",step:"0.01"})]})]}),!u&&d.type===mr.PERCENTAGE&&r.jsx("div",{className:"flex justify-end",children:r.jsxs(J,{type:"button",variant:"outline",onClick:b,size:"sm",children:[r.jsx(au,{className:"h-4 w-4 mr-2"}),"Calculate"]})}),r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"commissionAmount",children:"Commission Amount"}),r.jsxs("div",{className:"relative",children:[r.jsx(Mt,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),r.jsx(je,{id:"commissionAmount",type:"number",value:d.amount||"",onChange:j=>f(C=>({...C,amount:parseFloat(j.target.value)||0})),className:"pl-10",min:"0",step:"0.01"})]})]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"notes",children:"Commission Notes"}),r.jsx(Xt,{id:"notes",value:d.notes||"",onChange:j=>f(C=>({...C,notes:j.target.value})),placeholder:"Add any notes about this commission",rows:3})]}),e&&r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"auditNotes",children:"Audit Notes"}),r.jsx(Xt,{id:"auditNotes",value:g,onChange:j=>p(j.target.value),placeholder:"Add notes about this update (for audit trail)",rows:2})]})]}),r.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t",children:[r.jsx(J,{type:"button",variant:"outline",onClick:i,disabled:l,children:"Cancel"}),r.jsx(J,{type:"submit",disabled:l,children:l?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),e?"Updating...":"Creating..."]}):r.jsxs(r.Fragment,{children:[r.jsx(Pr,{className:"h-4 w-4 mr-2"}),e?"Update":"Create"," Commission"]})})]})]})})]})})}function Sde({auditEntries:e}){const t=s=>{switch(s){case"created":return r.jsx(Nt,{className:"h-4 w-4 text-blue-500"});case"updated":return r.jsx(Br,{className:"h-4 w-4 text-yellow-500"});case"approved":return r.jsx($r,{className:"h-4 w-4 text-green-500"});case"rejected":return r.jsx(di,{className:"h-4 w-4 text-red-500"});case"paid":return r.jsx(Mt,{className:"h-4 w-4 text-green-500"});default:return r.jsx(Vw,{className:"h-4 w-4 text-gray-500"})}},n=s=>{switch(s){case"created":return"bg-blue-50 text-blue-700 border-blue-200";case"updated":return"bg-yellow-50 text-yellow-700 border-yellow-200";case"approved":return"bg-green-50 text-green-700 border-green-200";case"rejected":return"bg-red-50 text-red-700 border-red-200";case"paid":return"bg-purple-50 text-purple-700 border-purple-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},a=s=>{if(!s.previousValue&&!s.newValue)return null;const i=[];if(s.action==="created"&&s.newValue)return r.jsx("div",{className:"text-sm text-muted-foreground",children:r.jsx("p",{children:"Commission created with initial values"})});if(s.previousValue&&s.newValue)for(const[o,l]of Object.entries(s.newValue)){const c=s.previousValue[o];c!==l&&i.push(r.jsxs("div",{className:"text-sm",children:[r.jsxs("span",{className:"font-medium capitalize",children:[o.replace(/([A-Z])/g," $1").trim(),": "]}),r.jsx("span",{className:"line-through text-red-600 mr-2",children:c}),r.jsx("span",{className:"text-green-600",children:l})]},o))}return i.length>0?r.jsx("div",{className:"space-y-1",children:i}):null};return r.jsxs(fe,{className:"shadow-sm",children:[r.jsxs(we,{children:[r.jsxs(Ne,{className:"flex items-center",children:[r.jsx(Vw,{className:"h-5 w-5 mr-2 text-primary"}),"Audit Trail"]}),r.jsx(Ue,{children:"History of changes to this commission"})]}),r.jsx(me,{children:e.length===0?r.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[r.jsx(Vw,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),r.jsx("p",{children:"No audit history available"})]}):r.jsx("div",{className:"space-y-4",children:e.map(s=>r.jsxs("div",{className:"relative pl-6",children:[r.jsx("div",{className:"absolute left-0 top-1.5",children:t(s.action)}),r.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[r.jsx(ze,{className:He("ri-badge-status",n(s.action)),children:s.action.toUpperCase()}),r.jsx("span",{className:"text-sm text-muted-foreground",children:lt(s.timestamp)})]}),r.jsxs("p",{className:"text-sm",children:[r.jsx("span",{className:"font-medium",children:s.userName})," ",s.action," this commission"]}),a(s),s.notes&&r.jsx("div",{className:"mt-2 p-2 bg-muted/30 rounded-md",children:r.jsx("p",{className:"text-sm text-muted-foreground",children:s.notes})})]},s.id))})})]})}function Cde({commission:e,salesReps:t,deals:n,auditTrail:a,onClose:s,onEdit:i,onApprove:o,onReject:l,onMarkPaid:c}){const{toast:d}=Ct(),[f,u]=w.useState("details"),[m,h]=w.useState(""),[x,g]=w.useState(!1),p=S=>{switch(S){case Rt.PENDING:return"bg-yellow-50 text-yellow-700 border-yellow-200";case Rt.APPROVED:return"bg-blue-50 text-blue-700 border-blue-200";case Rt.PAID:return"bg-green-50 text-green-700 border-green-200";case Rt.CANCELLED:return"bg-red-50 text-red-700 border-red-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},v=S=>{switch(S){case mr.FLAT:return"bg-blue-50 text-blue-700 border-blue-200";case mr.PERCENTAGE:return"bg-green-50 text-green-700 border-green-200";case mr.TIERED:return"bg-purple-50 text-purple-700 border-purple-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},y=async()=>{g(!0);try{await o(e.id,m),h(""),d({title:"Commission Approved",description:"The commission has been approved successfully"})}catch{d({title:"Error",description:"Failed to approve commission",variant:"destructive"})}finally{g(!1)}},b=async()=>{g(!0);try{await l(e.id,m),h(""),d({title:"Commission Rejected",description:"The commission has been rejected"})}catch{d({title:"Error",description:"Failed to reject commission",variant:"destructive"})}finally{g(!1)}},j=async()=>{g(!0);try{await c(e.id,m),h(""),d({title:"Commission Marked as Paid",description:"The commission has been marked as paid"})}catch{d({title:"Error",description:"Failed to mark commission as paid",variant:"destructive"})}finally{g(!1)}},C=t.find(S=>S.id===e.salesPersonId),E=n.find(S=>S.id===e.dealId);return r.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:r.jsxs(fe,{className:"w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[r.jsx(we,{children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx(Ne,{className:"text-xl",children:"Commission Details"}),r.jsxs(Ue,{children:["Commission #",e.id]})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsxs(J,{onClick:()=>i(e),size:"sm",children:[r.jsx(Br,{className:"h-4 w-4 mr-2"}),"Edit Commission"]}),r.jsx(J,{variant:"ghost",size:"sm",onClick:s,children:r.jsx($t,{className:"h-4 w-4"})})]})]})}),r.jsxs(me,{children:[r.jsxs(lr,{value:f,onValueChange:u,className:"space-y-4",children:[r.jsxs(or,{className:"grid w-full grid-cols-2",children:[r.jsx(Ke,{value:"details",children:"Details"}),r.jsxs(Ke,{value:"audit",children:["Audit Trail",a.length>0&&r.jsx(ze,{className:"ml-2 bg-blue-50 text-blue-700 border-blue-200",children:a.length})]})]}),r.jsxs(Je,{value:"details",className:"space-y-6",children:[r.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[r.jsx(ze,{className:He("ri-badge-status",p(e.status)),children:e.status.toUpperCase()}),r.jsx(ze,{className:He("ri-badge-status",v(e.type)),children:e.type.toUpperCase()}),r.jsx("div",{className:"ml-auto font-bold text-lg text-primary",children:De(e.amount)})]}),r.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Sales Rep"}),r.jsx("p",{className:"font-medium",children:(C==null?void 0:C.name)||e.salesPersonId})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Deal"}),r.jsx("p",{className:"font-medium",children:(E==null?void 0:E.name)||e.dealId})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Commission Type"}),r.jsx("p",{className:"font-medium",children:e.type.charAt(0).toUpperCase()+e.type.slice(1)})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Amount"}),r.jsx("p",{className:"font-medium text-primary",children:De(e.amount)})]}),e.type===mr.PERCENTAGE&&r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Rate"}),r.jsxs("p",{className:"font-medium",children:[(e.rate*100).toFixed(2),"%"]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Created"}),r.jsx("p",{className:"font-medium",children:lt(e.createdAt)})]}),e.paidDate&&r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Paid Date"}),r.jsx("p",{className:"font-medium",children:lt(e.paidDate)})]})]}),e.notes&&r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Notes"}),r.jsx("div",{className:"mt-1 p-3 bg-muted/30 rounded-md",children:r.jsx("p",{className:"whitespace-pre-wrap",children:e.notes})})]}),(e.status===Rt.PENDING||e.status===Rt.APPROVED)&&r.jsxs("div",{className:"space-y-4 pt-4 border-t",children:[r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"actionNotes",children:"Action Notes"}),r.jsx(Xt,{id:"actionNotes",value:m,onChange:S=>h(S.target.value),placeholder:"Add notes about this action (for audit trail)",rows:2})]}),r.jsxs("div",{className:"flex justify-end space-x-3",children:[e.status===Rt.PENDING&&r.jsxs(r.Fragment,{children:[r.jsxs(J,{variant:"outline",onClick:b,disabled:x,children:[r.jsx(di,{className:"h-4 w-4 mr-2"}),"Reject"]}),r.jsxs(J,{onClick:y,disabled:x,children:[r.jsx($r,{className:"h-4 w-4 mr-2"}),"Approve"]})]}),e.status===Rt.APPROVED&&r.jsxs(J,{onClick:j,disabled:x,children:[r.jsx(Mt,{className:"h-4 w-4 mr-2"}),"Mark as Paid"]})]})]})]}),r.jsx(Je,{value:"audit",children:r.jsx(Sde,{auditEntries:a})})]}),r.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t mt-6",children:[r.jsx(J,{variant:"outline",onClick:s,children:"Close"}),r.jsxs(J,{onClick:()=>i(e),children:[r.jsx(Br,{className:"h-4 w-4 mr-2"}),"Edit Commission"]})]})]})]})})}function Ade({rules:e,onCreateRule:t,onEditRule:n,onDeleteRule:a}){const[s,i]=w.useState(""),[o,l]=w.useState("all"),c=u=>{switch(u){case"flat":return"bg-blue-50 text-blue-700 border-blue-200";case"percentage":return"bg-green-50 text-green-700 border-green-200";case"tiered":return"bg-purple-50 text-purple-700 border-purple-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},d=e.filter(u=>{const m=u.name.toLowerCase().includes(s.toLowerCase()),h=o==="all"||u.type===o;return m&&h}),f=u=>{switch(u.type){case"flat":return`${De(u.amount)} flat rate`;case"percentage":return`${(u.rate*100).toFixed(2)}% of deal value`;case"tiered":const m=u.tiers;return m.length===0?"No tiers defined":`${m.length} tiers, ${(m[0].rate*100).toFixed(2)}% to ${(m[m.length-1].rate*100).toFixed(2)}%`;default:return""}};return r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[r.jsxs("div",{className:"ri-search-bar flex-1",children:[r.jsx(Jn,{className:"ri-search-icon"}),r.jsx(je,{placeholder:"Search rules...",value:s,onChange:u=>i(u.target.value),className:"ri-search-input shadow-sm"})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs("select",{value:o,onChange:u=>l(u.target.value),className:"px-3 py-2 rounded-md border border-input bg-background",children:[r.jsx("option",{value:"all",children:"All Types"}),r.jsx("option",{value:"flat",children:"Flat"}),r.jsx("option",{value:"percentage",children:"Percentage"}),r.jsx("option",{value:"tiered",children:"Tiered"})]}),r.jsxs(J,{onClick:t,className:"shadow-sm",children:[r.jsx(Nt,{className:"h-4 w-4 mr-2"}),"New Rule"]})]})]}),r.jsxs(fe,{className:"shadow-sm",children:[r.jsxs(we,{children:[r.jsxs(Ne,{className:"text-xl",children:["Commission Rules (",d.length,")"]}),r.jsx(Ue,{children:"Define how commissions are calculated for different scenarios"})]}),r.jsx(me,{children:r.jsxs("div",{className:"space-y-4",children:[d.map(u=>r.jsxs("div",{className:"ri-table-row",children:[r.jsx("div",{className:"flex items-center space-x-4 flex-1",children:r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[r.jsx("h3",{className:"font-semibold text-foreground",children:u.name}),r.jsx(ze,{className:He("ri-badge-status",c(u.type)),children:u.type.toUpperCase()}),u.isActive?r.jsx(ze,{className:"bg-green-50 text-green-700 border-green-200",children:"ACTIVE"}):r.jsx(ze,{className:"bg-gray-50 text-gray-700 border-gray-200",children:"INACTIVE"})]}),r.jsx("div",{className:"flex items-center space-x-2 text-sm text-muted-foreground",children:u.type==="flat"?r.jsxs("span",{className:"flex items-center",children:[r.jsx(Mt,{className:"h-3 w-3 mr-1 text-blue-500"}),f(u)]}):u.type==="percentage"?r.jsxs("span",{className:"flex items-center",children:[r.jsx(sv,{className:"h-3 w-3 mr-1 text-green-500"}),f(u)]}):r.jsxs("span",{className:"flex items-center",children:[r.jsx(au,{className:"h-3 w-3 mr-1 text-purple-500"}),f(u)]})}),u.type==="tiered"&&r.jsx("div",{className:"mt-2 grid grid-cols-3 gap-2",children:u.tiers.map((m,h)=>r.jsxs("div",{className:"text-xs p-1 bg-muted/30 rounded",children:[De(m.minAmount),m.maxAmount?` - ${De(m.maxAmount)}`:"+",":",r.jsxs("span",{className:"font-semibold ml-1",children:[(m.rate*100).toFixed(2),"%"]})]},m.id))})]})}),r.jsxs("div",{className:"ri-action-buttons",children:[r.jsxs(J,{variant:"outline",size:"sm",className:"shadow-sm",onClick:()=>n(u),children:[r.jsx(Br,{className:"h-3 w-3 mr-1"}),"Edit"]}),r.jsx(J,{variant:"outline",size:"sm",className:"shadow-sm text-red-600 hover:text-red-700",onClick:()=>a(u.id),children:r.jsx(wn,{className:"h-3 w-3"})})]})]},u.id)),d.length===0&&r.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[r.jsx(au,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),r.jsx("p",{children:"No commission rules found"}),r.jsx("p",{className:"text-sm",children:"Create your first rule to get started"})]})]})})]})]})}function Ede({rule:e,onSave:t,onCancel:n}){const{toast:a}=Ct(),[s,i]=w.useState(!1),[o,l]=w.useState((e==null?void 0:e.type)||"percentage"),[c,d]=w.useState((e==null?void 0:e.name)||""),[f,u]=w.useState((e==null?void 0:e.isActive)!==!1),[m,h]=w.useState((e==null?void 0:e.type)==="flat"?e.amount:500),[x,g]=w.useState((e==null?void 0:e.type)==="percentage"?e.rate:.05),[p,v]=w.useState((e==null?void 0:e.type)==="tiered"?e.tiers:[{id:"1",ruleId:"",minAmount:0,maxAmount:5e4,rate:.03},{id:"2",ruleId:"",minAmount:5e4,maxAmount:1e5,rate:.05},{id:"3",ruleId:"",minAmount:1e5,rate:.07}]),y=async E=>{if(E.preventDefault(),!c){a({title:"Validation Error",description:"Rule name is required",variant:"destructive"});return}i(!0);try{let S;switch(o){case"flat":S={name:c,type:"flat",amount:m,isActive:f};break;case"percentage":S={name:c,type:"percentage",rate:x,isActive:f};break;case"tiered":for(let N=0;N<p.length;N++)if(N<p.length-1&&p[N].maxAmount!==p[N+1].minAmount){a({title:"Validation Error",description:"Tier ranges must be continuous without gaps",variant:"destructive"});return}S={name:c,type:"tiered",tiers:p,isActive:f};break;default:throw new Error("Invalid rule type")}await t(S)}catch{a({title:"Error",description:`Failed to ${e?"update":"create"} commission rule`,variant:"destructive"})}finally{i(!1)}},b=()=>{if(p.length===0){v([{id:"1",ruleId:"",minAmount:0,rate:.03}]);return}const E=p[p.length-1],S={id:Math.random().toString(36).substr(2,9),ruleId:"",minAmount:E.maxAmount||E.minAmount+5e4,rate:E.rate+.01};v([...p,S])},j=E=>{v(p.filter(S=>S.id!==E))},C=(E,S)=>{v(p.map(N=>N.id===E?{...N,...S}:N))};return r.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:r.jsxs(fe,{className:"w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[r.jsx(we,{children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx(Ne,{children:e?"Edit Commission Rule":"Create Commission Rule"}),r.jsx(Ue,{children:e?"Update commission rule details":"Define a new commission calculation rule"})]}),r.jsx(J,{variant:"ghost",size:"sm",onClick:n,children:r.jsx($t,{className:"h-4 w-4"})})]})}),r.jsx(me,{children:r.jsxs("form",{onSubmit:y,className:"space-y-6",children:[r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"name",children:"Rule Name *"}),r.jsx(je,{id:"name",value:c,onChange:E=>d(E.target.value),placeholder:"e.g., Standard Sales Commission"})]}),r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"type",children:"Commission Type"}),r.jsxs($e,{value:o,onValueChange:E=>l(E),children:[r.jsx(Fe,{children:r.jsx(Be,{})}),r.jsxs(Me,{children:[r.jsx(K,{value:"flat",children:"Flat Amount"}),r.jsx(K,{value:"percentage",children:"Percentage"}),r.jsx(K,{value:"tiered",children:"Tiered Percentage"})]})]})]})]}),o==="flat"&&r.jsxs("div",{className:"space-y-4",children:[r.jsx(Z,{htmlFor:"flatAmount",children:"Flat Commission Amount"}),r.jsxs("div",{className:"relative",children:[r.jsx(Mt,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),r.jsx(je,{id:"flatAmount",type:"number",value:m,onChange:E=>h(parseFloat(E.target.value)||0),className:"pl-10",min:"0",step:"0.01"})]}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"A fixed amount will be paid regardless of the deal value"})]}),o==="percentage"&&r.jsxs("div",{className:"space-y-4",children:[r.jsx(Z,{htmlFor:"percentageRate",children:"Commission Rate (%)"}),r.jsxs("div",{className:"relative",children:[r.jsx(sv,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),r.jsx(je,{id:"percentageRate",type:"number",value:x*100,onChange:E=>g(parseFloat(E.target.value)/100||0),className:"pl-10",min:"0",max:"100",step:"0.01"})]}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"A percentage of the deal value will be paid as commission"})]}),o==="tiered"&&r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx(Z,{children:"Tiered Commission Rates"}),r.jsxs(J,{type:"button",onClick:b,size:"sm",children:[r.jsx(Nt,{className:"h-4 w-4 mr-2"}),"Add Tier"]})]}),r.jsxs("div",{className:"space-y-3",children:[p.map((E,S)=>r.jsxs("div",{className:"flex items-center space-x-2 p-3 border rounded-lg",children:[r.jsxs("div",{className:"flex-1 grid grid-cols-3 gap-2",children:[r.jsxs("div",{children:[r.jsx(Z,{className:"text-xs",children:"Min Amount"}),r.jsxs("div",{className:"relative",children:[r.jsx(Mt,{className:"absolute left-2 top-2.5 h-3 w-3 text-muted-foreground"}),r.jsx(je,{type:"number",value:E.minAmount,onChange:N=>C(E.id,{minAmount:parseFloat(N.target.value)||0}),className:"pl-7 h-9 text-sm",min:"0",step:"1000"})]})]}),r.jsxs("div",{children:[r.jsx(Z,{className:"text-xs",children:"Max Amount"}),r.jsxs("div",{className:"relative",children:[r.jsx(Mt,{className:"absolute left-2 top-2.5 h-3 w-3 text-muted-foreground"}),r.jsx(je,{type:"number",value:E.maxAmount,onChange:N=>{const I=N.target.value?parseFloat(N.target.value):void 0;C(E.id,{maxAmount:I})},className:"pl-7 h-9 text-sm",min:E.minAmount,step:"1000",placeholder:S===p.length-1?"No limit":""})]})]}),r.jsxs("div",{children:[r.jsx(Z,{className:"text-xs",children:"Rate (%)"}),r.jsxs("div",{className:"relative",children:[r.jsx(sv,{className:"absolute left-2 top-2.5 h-3 w-3 text-muted-foreground"}),r.jsx(je,{type:"number",value:E.rate*100,onChange:N=>C(E.id,{rate:parseFloat(N.target.value)/100||0}),className:"pl-7 h-9 text-sm",min:"0",max:"100",step:"0.01"})]})]})]}),r.jsx(J,{type:"button",variant:"ghost",size:"sm",onClick:()=>j(E.id),disabled:p.length<=1,children:r.jsx(wn,{className:"h-4 w-4 text-red-500"})})]},E.id)),p.length===0&&r.jsxs("div",{className:"text-center py-4 text-muted-foreground border-2 border-dashed rounded-lg",children:[r.jsx("p",{children:"No tiers defined"}),r.jsx("p",{className:"text-sm",children:'Click "Add Tier" to create commission tiers'})]})]}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Different commission rates will apply based on the deal value tiers"})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(St,{id:"isActive",checked:f,onCheckedChange:E=>u(!!E)}),r.jsx(Z,{htmlFor:"isActive",children:"Active rule"})]}),r.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t",children:[r.jsx(J,{type:"button",variant:"outline",onClick:n,disabled:s,children:"Cancel"}),r.jsx(J,{type:"submit",disabled:s,children:s?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),e?"Updating...":"Creating..."]}):r.jsxs(r.Fragment,{children:[r.jsx(Pr,{className:"h-4 w-4 mr-2"}),e?"Update":"Create"," Rule"]})})]})]})})]})})}function Pde({salesReps:e,onGenerateReport:t,onExportCSV:n}){const{toast:a}=Ct(),[s,i]=w.useState({startDate:new Date(new Date().getFullYear(),new Date().getMonth(),1),endDate:new Date,salesPersonId:"",status:"",type:""}),[o,l]=w.useState(!1),[c,d]=w.useState(null),[f,u]=w.useState("none"),m=()=>{try{const y=t(s);d(y),a({title:"Report Generated",description:`Generated report with ${y.commissions.length} commissions`})}catch{a({title:"Error",description:"Failed to generate report",variant:"destructive"})}},h=()=>{if(c)try{const y=n(c.commissions),b=rm.unparse(y),j=new Blob([b],{type:"text/csv;charset=utf-8;"}),C=URL.createObjectURL(j),E=document.createElement("a");E.href=C,E.setAttribute("download",`commission_report_${new Date().toISOString().split("T")[0]}.csv`),document.body.appendChild(E),E.click(),document.body.removeChild(E),a({title:"Export Successful",description:"Commission report exported to CSV"})}catch{a({title:"Export Failed",description:"Failed to export report to CSV",variant:"destructive"})}},x=y=>{if(f==="none")return{"All Commissions":y};const b={};return y.forEach(j=>{let C="";switch(f){case"salesPerson":C=j.salesPersonId;break;case"status":C=j.status;break;case"type":C=j.type;break}b[C]||(b[C]=[]),b[C].push(j)}),b},g=y=>{switch(f){case"salesPerson":const b=e.find(j=>j.id===y);return b?b.name:y;case"status":return y.charAt(0).toUpperCase()+y.slice(1);case"type":return y.charAt(0).toUpperCase()+y.slice(1);default:return y}},p=y=>{switch(y){case Rt.PENDING:return"Pending";case Rt.APPROVED:return"Approved";case Rt.PAID:return"Paid";case Rt.CANCELLED:return"Cancelled";default:return y}},v=y=>{switch(y){case mr.FLAT:return"Flat";case mr.PERCENTAGE:return"Percentage";case mr.TIERED:return"Tiered";default:return y}};return r.jsx("div",{className:"space-y-6",children:r.jsxs(fe,{className:"shadow-sm",children:[r.jsx(we,{children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsxs(Ne,{className:"flex items-center",children:[r.jsx(Yn,{className:"h-5 w-5 mr-2 text-primary"}),"Commission Report Generator"]}),r.jsx(Ue,{children:"Generate detailed commission reports with custom filters"})]}),r.jsxs(J,{variant:"outline",onClick:()=>l(!o),className:"shadow-sm",children:[r.jsx(hs,{className:"h-4 w-4 mr-2"}),o?"Hide Filters":"Show Filters"]})]})}),r.jsxs(me,{children:[o&&r.jsxs("div",{className:"space-y-4 mb-6 p-4 bg-muted/30 rounded-lg",children:[r.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"startDate",children:"Start Date"}),r.jsx(je,{id:"startDate",type:"date",value:s.startDate?new Date(s.startDate).toISOString().split("T")[0]:"",onChange:y=>i(b=>({...b,startDate:y.target.value?new Date(y.target.value):void 0}))})]}),r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"endDate",children:"End Date"}),r.jsx(je,{id:"endDate",type:"date",value:s.endDate?new Date(s.endDate).toISOString().split("T")[0]:"",onChange:y=>i(b=>({...b,endDate:y.target.value?new Date(y.target.value):void 0}))})]})]}),r.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"salesPersonId",children:"Sales Rep"}),r.jsxs($e,{value:s.salesPersonId||"",onValueChange:y=>i(b=>({...b,salesPersonId:y})),children:[r.jsx(Fe,{children:r.jsx(Be,{placeholder:"All Sales Reps"})}),r.jsxs(Me,{children:[r.jsx(K,{value:"",children:"All Sales Reps"}),e.map(y=>r.jsx(K,{value:y.id,children:y.name},y.id))]})]})]}),r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"status",children:"Status"}),r.jsxs($e,{value:s.status||"",onValueChange:y=>i(b=>({...b,status:y})),children:[r.jsx(Fe,{children:r.jsx(Be,{placeholder:"All Statuses"})}),r.jsxs(Me,{children:[r.jsx(K,{value:"",children:"All Statuses"}),r.jsx(K,{value:Rt.PENDING,children:"Pending"}),r.jsx(K,{value:Rt.APPROVED,children:"Approved"}),r.jsx(K,{value:Rt.PAID,children:"Paid"}),r.jsx(K,{value:Rt.CANCELLED,children:"Cancelled"})]})]})]}),r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"type",children:"Commission Type"}),r.jsxs($e,{value:s.type||"",onValueChange:y=>i(b=>({...b,type:y})),children:[r.jsx(Fe,{children:r.jsx(Be,{placeholder:"All Types"})}),r.jsxs(Me,{children:[r.jsx(K,{value:"",children:"All Types"}),r.jsx(K,{value:mr.FLAT,children:"Flat"}),r.jsx(K,{value:mr.PERCENTAGE,children:"Percentage"}),r.jsx(K,{value:mr.TIERED,children:"Tiered"})]})]})]})]}),r.jsx("div",{className:"flex justify-end",children:r.jsxs(J,{onClick:m,children:[r.jsx(Yn,{className:"h-4 w-4 mr-2"}),"Generate Report"]})})]}),!o&&r.jsx("div",{className:"flex justify-end mb-6",children:r.jsxs(J,{onClick:m,children:[r.jsx(Yn,{className:"h-4 w-4 mr-2"}),"Generate Report"]})}),c&&r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[r.jsx(fe,{className:"shadow-sm bg-blue-50",children:r.jsx(me,{className:"pt-6",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-sm font-medium text-blue-700 mb-1",children:"Total Commissions"}),r.jsx("div",{className:"text-2xl font-bold text-blue-900",children:c.summary.totalCommissions}),r.jsx("div",{className:"text-sm text-blue-700 mt-1",children:De(c.summary.totalAmount)})]})})}),r.jsx(fe,{className:"shadow-sm bg-yellow-50",children:r.jsx(me,{className:"pt-6",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-sm font-medium text-yellow-700 mb-1",children:"Pending"}),r.jsx("div",{className:"text-2xl font-bold text-yellow-900",children:De(c.summary.pendingAmount)}),r.jsx("div",{className:"text-sm text-yellow-700 mt-1",children:"Awaiting approval"})]})})}),r.jsx(fe,{className:"shadow-sm bg-green-50",children:r.jsx(me,{className:"pt-6",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-sm font-medium text-green-700 mb-1",children:"Paid"}),r.jsx("div",{className:"text-2xl font-bold text-green-900",children:De(c.summary.paidAmount)}),r.jsx("div",{className:"text-sm text-green-700 mt-1",children:"Commissions paid"})]})})}),r.jsx(fe,{className:"shadow-sm bg-purple-50",children:r.jsx(me,{className:"pt-6",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-sm font-medium text-purple-700 mb-1",children:"Approved"}),r.jsx("div",{className:"text-2xl font-bold text-purple-900",children:De(c.summary.approvedAmount)}),r.jsx("div",{className:"text-sm text-purple-700 mt-1",children:"Ready for payment"})]})})})]}),r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsx(Z,{htmlFor:"groupBy",className:"whitespace-nowrap",children:"Group By:"}),r.jsxs($e,{value:f,onValueChange:y=>u(y),children:[r.jsx(Fe,{className:"w-40",children:r.jsx(Be,{})}),r.jsxs(Me,{children:[r.jsx(K,{value:"none",children:"No Grouping"}),r.jsx(K,{value:"salesPerson",children:"Sales Rep"}),r.jsx(K,{value:"status",children:"Status"}),r.jsx(K,{value:"type",children:"Commission Type"})]})]})]}),r.jsxs(J,{variant:"outline",onClick:h,disabled:!c,children:[r.jsx(ms,{className:"h-4 w-4 mr-2"}),"Export CSV"]})]}),r.jsx("div",{className:"space-y-6",children:Object.entries(x(c.commissions)).map(([y,b])=>r.jsxs("div",{className:"space-y-2",children:[r.jsxs("h3",{className:"text-lg font-semibold flex items-center",children:[f==="salesPerson"&&r.jsx(wa,{className:"h-4 w-4 mr-2 text-blue-500"}),f==="status"&&r.jsx(qa,{className:"h-4 w-4 mr-2 text-yellow-500"}),f==="type"&&r.jsx(Yn,{className:"h-4 w-4 mr-2 text-purple-500"}),g(y),r.jsxs("span",{className:"ml-2 text-sm font-normal text-muted-foreground",children:["(",b.length," commissions, ",De(b.reduce((j,C)=>j+C.amount,0)),")"]})]}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full border-collapse",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"bg-muted/50",children:[r.jsx("th",{className:"p-2 text-left font-medium text-muted-foreground",children:"Sales Rep"}),r.jsx("th",{className:"p-2 text-left font-medium text-muted-foreground",children:"Deal"}),r.jsx("th",{className:"p-2 text-left font-medium text-muted-foreground",children:"Type"}),r.jsx("th",{className:"p-2 text-left font-medium text-muted-foreground",children:"Amount"}),r.jsx("th",{className:"p-2 text-left font-medium text-muted-foreground",children:"Status"}),r.jsx("th",{className:"p-2 text-left font-medium text-muted-foreground",children:"Created"})]})}),r.jsx("tbody",{children:b.map(j=>{const C=e.find(E=>E.id===j.salesPersonId);return r.jsxs("tr",{className:"border-b hover:bg-muted/10",children:[r.jsx("td",{className:"p-2",children:(C==null?void 0:C.name)||j.salesPersonId}),r.jsx("td",{className:"p-2",children:j.dealId}),r.jsx("td",{className:"p-2",children:v(j.type)}),r.jsx("td",{className:"p-2 font-medium",children:De(j.amount)}),r.jsx("td",{className:"p-2",children:p(j.status)}),r.jsx("td",{className:"p-2",children:new Date(j.createdAt).toLocaleDateString()})]},j.id)})})]})})]},y))})]}),!c&&r.jsxs("div",{className:"text-center py-12 text-muted-foreground border-2 border-dashed rounded-lg",children:[r.jsx(Yn,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),r.jsx("p",{children:"No report generated yet"}),r.jsx("p",{className:"text-sm",children:"Use the filters above to generate a commission report"})]})]})]})})}const a0=[{id:"sales-001",name:"John Smith",email:"john.smith@dealership.com",phone:"(555) 123-4567",territory:"North Region",isActive:!0,targets:{monthly:10,quarterly:30,annual:120}},{id:"sales-002",name:"Sarah Johnson",email:"sarah.johnson@dealership.com",phone:"(555) 987-6543",territory:"South Region",isActive:!0,targets:{monthly:12,quarterly:36,annual:144}},{id:"sales-003",name:"Mike Davis",email:"mike.davis@dealership.com",phone:"(555) 456-7890",territory:"East Region",isActive:!0,targets:{monthly:8,quarterly:24,annual:96}}],R2=[{id:"deal-001",name:"Georgetown Class A Sale - Smith Family",customerName:"John & Mary Smith",value:137500,stage:"closed_won",status:"active",createdAt:new Date("2024-01-15")},{id:"deal-002",name:"Travel Trailer - Johnson Family",customerName:"Sarah Johnson",value:75e3,stage:"closed_won",status:"active",createdAt:new Date("2024-01-10")},{id:"deal-003",name:"Service Contract - Davis",customerName:"Mike Davis",value:2500,stage:"closed_won",status:"active",createdAt:new Date("2024-01-20")}];function lD(){const{commissions:e,rules:t,auditTrail:n,createCommission:a,updateCommission:s,approveCommission:i,rejectCommission:o,markCommissionPaid:l,createRule:c,updateRule:d,deleteRule:f,getAuditTrailByCommission:u,generateCommissionReport:m,exportCommissionsToCSV:h}=wde(),{user:x}=$m(),{toast:g}=Ct(),[p,v]=w.useState(""),[y,b]=w.useState("all"),[j,C]=w.useState("commissions"),[E,S]=w.useState(!1),[N,I]=w.useState(!1),[D,T]=w.useState(!1),[A,_]=w.useState(null),[k,L]=w.useState(null),$=be=>{switch(be){case Rt.PENDING:return"bg-yellow-50 text-yellow-700 border-yellow-200";case Rt.APPROVED:return"bg-blue-50 text-blue-700 border-blue-200";case Rt.PAID:return"bg-green-50 text-green-700 border-green-200";case Rt.CANCELLED:return"bg-red-50 text-red-700 border-red-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},M=be=>{switch(be){case mr.FLAT:return"bg-blue-50 text-blue-700 border-blue-200";case mr.PERCENTAGE:return"bg-green-50 text-green-700 border-green-200";case mr.TIERED:return"bg-purple-50 text-purple-700 border-purple-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},B=be=>{switch(be){case Rt.PENDING:return r.jsx(er,{className:"h-4 w-4 text-yellow-500"});case Rt.APPROVED:return r.jsx($r,{className:"h-4 w-4 text-blue-500"});case Rt.PAID:return r.jsx(Mt,{className:"h-4 w-4 text-green-500"});case Rt.CANCELLED:return r.jsx(di,{className:"h-4 w-4 text-red-500"});default:return null}},U=e.filter(be=>{const Re=be.salesPersonId.toLowerCase().includes(p.toLowerCase())||be.dealId.toLowerCase().includes(p.toLowerCase())||be.id.toLowerCase().includes(p.toLowerCase()),nt=y==="all"||be.status===y;return Re&&nt}),W=()=>{_(null),S(!0)},q=be=>{_(be),S(!0),I(!1)},R=be=>{_(be),I(!0)},V=async(be,Re)=>{try{A?(await s(A.id,be,(x==null?void 0:x.id)||"current-user",(x==null?void 0:x.name)||"Current User",Re),g({title:"Success",description:"Commission updated successfully"})):(await a(be,(x==null?void 0:x.id)||"current-user",(x==null?void 0:x.name)||"Current User"),g({title:"Success",description:"Commission created successfully"})),S(!1),_(null)}catch{g({title:"Error",description:`Failed to ${A?"update":"create"} commission`,variant:"destructive"})}},G=async(be,Re)=>{try{await i(be,(x==null?void 0:x.id)||"current-user",(x==null?void 0:x.name)||"Current User",Re),g({title:"Success",description:"Commission approved successfully"})}catch{g({title:"Error",description:"Failed to approve commission",variant:"destructive"})}},ee=async(be,Re)=>{try{await o(be,(x==null?void 0:x.id)||"current-user",(x==null?void 0:x.name)||"Current User",Re),g({title:"Success",description:"Commission rejected successfully"})}catch{g({title:"Error",description:"Failed to reject commission",variant:"destructive"})}},re=async(be,Re)=>{try{await l(be,(x==null?void 0:x.id)||"current-user",(x==null?void 0:x.name)||"Current User",Re),g({title:"Success",description:"Commission marked as paid successfully"})}catch{g({title:"Error",description:"Failed to mark commission as paid",variant:"destructive"})}},de=()=>{L(null),T(!0)},ue=be=>{L(be),T(!0)},oe=async be=>{try{k?(await d(k.id,be),g({title:"Success",description:"Commission rule updated successfully"})):(await c(be),g({title:"Success",description:"Commission rule created successfully"})),T(!1),L(null)}catch{g({title:"Error",description:`Failed to ${k?"update":"create"} commission rule`,variant:"destructive"})}},ge=async be=>{if(window.confirm("Are you sure you want to delete this commission rule?"))try{await f(be),g({title:"Success",description:"Commission rule deleted successfully"})}catch{g({title:"Error",description:"Failed to delete commission rule",variant:"destructive"})}},ve=e.length,xe=e.filter(be=>be.status===Rt.PENDING).length,Oe=e.filter(be=>be.status===Rt.APPROVED).length,ye=e.filter(be=>be.status===Rt.PAID).length,le=e.reduce((be,Re)=>be+Re.amount,0),ne=e.filter(be=>be.status===Rt.PENDING).reduce((be,Re)=>be+Re.amount,0),Ae=e.filter(be=>be.status===Rt.APPROVED).reduce((be,Re)=>be+Re.amount,0),Se=e.filter(be=>be.status===Rt.PAID).reduce((be,Re)=>be+Re.amount,0);return r.jsxs("div",{className:"space-y-8",children:[E&&r.jsx(Nde,{commission:A||void 0,salesReps:a0,deals:R2,rules:t,onSave:V,onCancel:()=>{S(!1),_(null)}}),N&&A&&r.jsx(Cde,{commission:A,salesReps:a0,deals:R2,auditTrail:u(A.id),onClose:()=>I(!1),onEdit:q,onApprove:G,onReject:ee,onMarkPaid:re}),D&&r.jsx(Ede,{rule:k||void 0,onSave:oe,onCancel:()=>{T(!1),L(null)}}),r.jsx("div",{className:"ri-page-header",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"ri-page-title",children:"Commission Engine"}),r.jsx("p",{className:"ri-page-description",children:"Manage sales commissions and payment rules"})]}),r.jsxs(J,{className:"shadow-sm",onClick:W,children:[r.jsx(Nt,{className:"h-4 w-4 mr-2"}),"New Commission"]})]})}),r.jsxs("div",{className:"ri-stats-grid",children:[r.jsxs(fe,{className:"shadow-sm border-0 bg-gradient-to-br from-blue-50 to-blue-100/50",children:[r.jsxs(we,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(Ne,{className:"text-sm font-medium text-blue-900",children:"Total Commissions"}),r.jsx(Mt,{className:"h-4 w-4 text-blue-600"})]}),r.jsxs(me,{children:[r.jsx("div",{className:"text-2xl font-bold text-blue-900",children:De(le)}),r.jsxs("p",{className:"text-xs text-blue-600 flex items-center mt-1",children:[r.jsx(wa,{className:"h-3 w-3 mr-1"}),ve," commissions"]})]})]}),r.jsxs(fe,{className:"shadow-sm border-0 bg-gradient-to-br from-yellow-50 to-yellow-100/50",children:[r.jsxs(we,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(Ne,{className:"text-sm font-medium text-yellow-900",children:"Pending"}),r.jsx(er,{className:"h-4 w-4 text-yellow-600"})]}),r.jsxs(me,{children:[r.jsx("div",{className:"text-2xl font-bold text-yellow-900",children:De(ne)}),r.jsxs("p",{className:"text-xs text-yellow-600 flex items-center mt-1",children:[r.jsx(er,{className:"h-3 w-3 mr-1"}),xe," pending approval"]})]})]}),r.jsxs(fe,{className:"shadow-sm border-0 bg-gradient-to-br from-blue-50 to-blue-100/50",children:[r.jsxs(we,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(Ne,{className:"text-sm font-medium text-blue-900",children:"Approved"}),r.jsx($r,{className:"h-4 w-4 text-blue-600"})]}),r.jsxs(me,{children:[r.jsx("div",{className:"text-2xl font-bold text-blue-900",children:De(Ae)}),r.jsxs("p",{className:"text-xs text-blue-600 flex items-center mt-1",children:[r.jsx($r,{className:"h-3 w-3 mr-1"}),Oe," approved"]})]})]}),r.jsxs(fe,{className:"shadow-sm border-0 bg-gradient-to-br from-green-50 to-green-100/50",children:[r.jsxs(we,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(Ne,{className:"text-sm font-medium text-green-900",children:"Paid"}),r.jsx(Mt,{className:"h-4 w-4 text-green-600"})]}),r.jsxs(me,{children:[r.jsx("div",{className:"text-2xl font-bold text-green-900",children:De(Se)}),r.jsxs("p",{className:"text-xs text-green-600 flex items-center mt-1",children:[r.jsx(Mt,{className:"h-3 w-3 mr-1"}),ye," paid out"]})]})]})]}),r.jsxs(lr,{value:j,onValueChange:C,className:"space-y-6",children:[r.jsxs(or,{className:"grid w-full grid-cols-3",children:[r.jsx(Ke,{value:"commissions",children:"Commissions"}),r.jsx(Ke,{value:"rules",children:"Commission Rules"}),r.jsx(Ke,{value:"reports",children:"Reports"})]}),r.jsxs(Je,{value:"commissions",className:"space-y-6",children:[r.jsxs("div",{className:"flex gap-4",children:[r.jsxs("div",{className:"ri-search-bar",children:[r.jsx(Jn,{className:"ri-search-icon"}),r.jsx(je,{placeholder:"Search commissions...",value:p,onChange:be=>v(be.target.value),className:"ri-search-input shadow-sm"})]}),r.jsxs($e,{value:y,onValueChange:b,children:[r.jsx(Fe,{className:"w-40",children:r.jsx(Be,{placeholder:"Status"})}),r.jsxs(Me,{children:[r.jsx(K,{value:"all",children:"All Status"}),r.jsx(K,{value:Rt.PENDING,children:"Pending"}),r.jsx(K,{value:Rt.APPROVED,children:"Approved"}),r.jsx(K,{value:Rt.PAID,children:"Paid"}),r.jsx(K,{value:Rt.CANCELLED,children:"Cancelled"})]})]}),r.jsxs(J,{variant:"outline",className:"shadow-sm",children:[r.jsx(hs,{className:"h-4 w-4 mr-2"}),"Filter"]}),r.jsxs(J,{onClick:W,className:"shadow-sm",children:[r.jsx(Nt,{className:"h-4 w-4 mr-2"}),"New Commission"]})]}),r.jsxs(fe,{className:"shadow-sm",children:[r.jsxs(we,{children:[r.jsx(Ne,{className:"text-xl",children:"Commissions"}),r.jsx(Ue,{children:"Track and manage sales commissions"})]}),r.jsx(me,{children:r.jsxs("div",{className:"space-y-4",children:[U.map(be=>{const Re=a0.find(rt=>rt.id===be.salesPersonId),nt=R2.find(rt=>rt.id===be.dealId);return r.jsxs("div",{className:"ri-table-row",children:[r.jsx("div",{className:"flex items-center space-x-4 flex-1",children:r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[r.jsxs("h3",{className:"font-semibold text-foreground",children:["Commission #",be.id]}),r.jsx(ze,{className:He("ri-badge-status",M(be.type)),children:be.type.toUpperCase()}),r.jsxs(ze,{className:He("ri-badge-status",$(be.status)),children:[B(be.status),r.jsx("span",{className:"ml-1",children:be.status.toUpperCase()})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm text-muted-foreground",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx(wa,{className:"h-3 w-3 mr-2 text-blue-500"}),r.jsx("span",{className:"font-medium",children:"Sales Rep:"}),r.jsx("span",{className:"ml-1",children:(Re==null?void 0:Re.name)||be.salesPersonId})]}),r.jsxs("div",{className:"flex items-center",children:[r.jsx(Mt,{className:"h-3 w-3 mr-2 text-green-500"}),r.jsx("span",{className:"font-medium",children:"Deal:"}),r.jsx("span",{className:"ml-1",children:(nt==null?void 0:nt.name)||be.dealId})]}),r.jsxs("div",{className:"flex items-center",children:[r.jsx(Mt,{className:"h-3 w-3 mr-2 text-purple-500"}),r.jsx("span",{className:"font-medium",children:"Amount:"}),r.jsx("span",{className:"ml-1 font-bold text-primary",children:De(be.amount)})]}),r.jsxs("div",{className:"flex items-center",children:[r.jsx(Mr,{className:"h-3 w-3 mr-2 text-orange-500"}),r.jsx("span",{className:"font-medium",children:"Created:"}),r.jsx("span",{className:"ml-1",children:lt(be.createdAt)})]})]}),be.notes&&r.jsx("div",{className:"mt-2 bg-muted/30 p-2 rounded-md",children:r.jsxs("p",{className:"text-sm text-muted-foreground",children:[r.jsx("span",{className:"font-medium",children:"Notes:"})," ",be.notes]})})]})}),r.jsxs("div",{className:"ri-action-buttons",children:[r.jsx(J,{variant:"outline",size:"sm",className:"shadow-sm",onClick:()=>R(be),children:"View"}),r.jsx(J,{variant:"outline",size:"sm",className:"shadow-sm",onClick:()=>q(be),children:"Edit"}),be.status===Rt.PENDING&&r.jsx(J,{variant:"outline",size:"sm",className:"shadow-sm",onClick:()=>G(be.id),children:"Approve"}),be.status===Rt.APPROVED&&r.jsx(J,{variant:"outline",size:"sm",className:"shadow-sm",onClick:()=>re(be.id),children:"Mark Paid"})]})]},be.id)}),U.length===0&&r.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[r.jsx(Mt,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),r.jsx("p",{children:"No commissions found"}),r.jsx("p",{className:"text-sm",children:"Create your first commission to get started"})]})]})})]})]}),r.jsx(Je,{value:"rules",children:r.jsx(Ade,{rules:t,onCreateRule:de,onEditRule:ue,onDeleteRule:ge})}),r.jsx(Je,{value:"reports",children:r.jsx(Pde,{salesReps:a0,onGenerateReport:m,onExportCSV:h})})]})]})}function Tde(){return r.jsxs(Ka,{children:[r.jsx(Vt,{path:"/",element:r.jsx(lD,{})}),r.jsx(Vt,{path:"/*",element:r.jsx(lD,{})})]})}function Ide({user:e,onSave:t,onCancel:n}){const{toast:a}=Ct(),[s,i]=w.useState(!1),[o,l]=w.useState({firstName:(e==null?void 0:e.firstName)||"",lastName:(e==null?void 0:e.lastName)||"",email:(e==null?void 0:e.email)||"",phone:(e==null?void 0:e.phone)||"",sendInvite:!0,inviteMethod:"email",notes:(e==null?void 0:e.notes)||"",status:(e==null?void 0:e.status)||"active"}),c=async d=>{if(d.preventDefault(),!o.firstName||!o.lastName||!o.email){a({title:"Validation Error",description:"Please fill in all required fields",variant:"destructive"});return}i(!0);try{await new Promise(f=>setTimeout(f,1e3)),t({...o,id:(e==null?void 0:e.id)||Math.random().toString(36).substring(2,9)}),a({title:"Success",description:`Portal user ${e?"updated":"created"} successfully`})}catch{a({title:"Error",description:`Failed to ${e?"update":"create"} portal user`,variant:"destructive"})}finally{i(!1)}};return r.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:r.jsxs(fe,{className:"w-full max-w-md",children:[r.jsx(we,{children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx(Ne,{children:e?"Edit Portal User":"Add Portal User"}),r.jsx(Ue,{children:e?"Update user details":"Create a new portal user account"})]}),r.jsx(J,{variant:"ghost",size:"sm",onClick:n,children:r.jsx($t,{className:"h-4 w-4"})})]})}),r.jsx(me,{children:r.jsxs("form",{onSubmit:c,className:"space-y-4",children:[r.jsxs("div",{className:"grid gap-4 grid-cols-2",children:[r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"firstName",children:"First Name *"}),r.jsx(je,{id:"firstName",value:o.firstName,onChange:d=>l(f=>({...f,firstName:d.target.value})),placeholder:"Enter first name"})]}),r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"lastName",children:"Last Name *"}),r.jsx(je,{id:"lastName",value:o.lastName,onChange:d=>l(f=>({...f,lastName:d.target.value})),placeholder:"Enter last name"})]})]}),r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"email",children:"Email Address *"}),r.jsxs("div",{className:"relative",children:[r.jsx(en,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),r.jsx(je,{id:"email",type:"email",value:o.email,onChange:d=>l(f=>({...f,email:d.target.value})),placeholder:"Enter email address",className:"pl-10"})]})]}),r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"phone",children:"Phone Number"}),r.jsxs("div",{className:"relative",children:[r.jsx(Mm,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),r.jsx(je,{id:"phone",type:"tel",value:o.phone,onChange:d=>l(f=>({...f,phone:d.target.value})),placeholder:"Enter phone number",className:"pl-10"})]})]}),!e&&r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(St,{id:"sendInvite",checked:o.sendInvite,onCheckedChange:d=>l(f=>({...f,sendInvite:!!d}))}),r.jsx(Z,{htmlFor:"sendInvite",children:"Send invitation to user"})]}),o.sendInvite&&r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"inviteMethod",children:"Invitation Method"}),r.jsxs($e,{value:o.inviteMethod,onValueChange:d=>l(f=>({...f,inviteMethod:d})),children:[r.jsx(Fe,{children:r.jsx(Be,{})}),r.jsxs(Me,{children:[r.jsx(K,{value:"email",children:"Email"}),r.jsx(K,{value:"sms",children:"SMS"}),r.jsx(K,{value:"both",children:"Both Email & SMS"})]})]})]})]}),e&&r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"status",children:"Account Status"}),r.jsxs($e,{value:o.status,onValueChange:d=>l(f=>({...f,status:d})),children:[r.jsx(Fe,{children:r.jsx(Be,{})}),r.jsxs(Me,{children:[r.jsx(K,{value:"active",children:"Active"}),r.jsx(K,{value:"inactive",children:"Inactive"}),r.jsx(K,{value:"suspended",children:"Suspended"})]})]})]}),r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"notes",children:"Notes (Optional)"}),r.jsx(Xt,{id:"notes",value:o.notes,onChange:d=>l(f=>({...f,notes:d.target.value})),placeholder:"Add any notes about this user",rows:3})]}),r.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[r.jsx(J,{type:"button",variant:"outline",onClick:n,disabled:s,children:"Cancel"}),r.jsx(J,{type:"submit",disabled:s,children:s?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),e?"Updating...":"Creating..."]}):r.jsxs(r.Fragment,{children:[r.jsx(Pr,{className:"h-4 w-4 mr-2"}),e?"Update":"Create"," User"]})})]})]})})]})})}const Dde=[{id:"user-1",firstName:"John",lastName:"Smith",email:"john.smith@example.com",phone:"(555) 123-4567",status:"active",lastLogin:new Date("2024-01-18"),createdAt:new Date("2023-12-15")},{id:"user-2",firstName:"Sarah",lastName:"Johnson",email:"sarah.j@example.com",phone:"(555) 987-6543",status:"active",lastLogin:new Date("2024-01-16"),createdAt:new Date("2023-12-10")},{id:"user-3",firstName:"Michael",lastName:"Davis",email:"michael.d@example.com",phone:"(555) 456-7890",status:"inactive",lastLogin:new Date("2023-12-05"),createdAt:new Date("2023-11-20")}];function kde({onImpersonate:e}){const{toast:t}=Ct(),[n,a]=w.useState(Dde),[s,i]=w.useState(""),[o,l]=w.useState("all"),c=m=>{switch(m){case"active":return"bg-green-50 text-green-700 border-green-200";case"inactive":return"bg-gray-50 text-gray-700 border-gray-200";case"suspended":return"bg-red-50 text-red-700 border-red-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},d=n.filter(m=>{const h=`${m.firstName} ${m.lastName}`.toLowerCase().includes(s.toLowerCase())||m.email.toLowerCase().includes(s.toLowerCase())||m.phone.includes(s),x=o==="all"||m.status===o;return h&&x}),f=m=>{t({title:"Password Reset Link Sent",description:"A password reset link has been sent to the user's email address."})},u=m=>{console.log("Edit user:",m)};return r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[r.jsxs("div",{className:"ri-search-bar flex-1",children:[r.jsx(Jn,{className:"ri-search-icon"}),r.jsx(je,{placeholder:"Search users...",value:s,onChange:m=>i(m.target.value),className:"ri-search-input shadow-sm"})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs($e,{value:o,onValueChange:l,children:[r.jsx(Fe,{className:"w-40",children:r.jsx(Be,{placeholder:"Status"})}),r.jsxs(Me,{children:[r.jsx(K,{value:"all",children:"All Status"}),r.jsx(K,{value:"active",children:"Active"}),r.jsx(K,{value:"inactive",children:"Inactive"}),r.jsx(K,{value:"suspended",children:"Suspended"})]})]}),r.jsxs(J,{variant:"outline",className:"shadow-sm",children:[r.jsx(hs,{className:"h-4 w-4 mr-2"}),"Filter"]})]})]}),r.jsxs(fe,{className:"shadow-sm",children:[r.jsxs(we,{children:[r.jsx(Ne,{className:"text-xl",children:"Portal Users"}),r.jsx(Ue,{children:"Manage customer portal access and permissions"})]}),r.jsx(me,{children:r.jsxs("div",{className:"space-y-4",children:[d.map(m=>r.jsxs("div",{className:"ri-table-row",children:[r.jsx("div",{className:"flex items-center space-x-4 flex-1",children:r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[r.jsxs("h3",{className:"font-semibold text-foreground",children:[m.firstName," ",m.lastName]}),r.jsx(ze,{className:He("ri-badge-status",c(m.status)),children:m.status.toUpperCase()})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-2 text-sm text-muted-foreground",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx(en,{className:"h-3 w-3 mr-2 text-blue-500"}),m.email]}),r.jsxs("div",{className:"flex items-center",children:[r.jsx(Mm,{className:"h-3 w-3 mr-2 text-green-500"}),m.phone]}),r.jsxs("div",{className:"flex items-center",children:[r.jsx(Mr,{className:"h-3 w-3 mr-2 text-purple-500"}),"Last login: ",m.lastLogin.toLocaleDateString()]})]})]})}),r.jsxs("div",{className:"ri-action-buttons",children:[r.jsxs(J,{variant:"outline",size:"sm",className:"shadow-sm",onClick:()=>u(m),children:[r.jsx(Br,{className:"h-3 w-3 mr-1"}),"Edit"]}),r.jsx(J,{variant:"outline",size:"sm",className:"shadow-sm",onClick:()=>f(m.id),children:"Reset Password"}),r.jsxs(J,{variant:"outline",size:"sm",className:"shadow-sm",onClick:()=>e(m.id,`${m.firstName} ${m.lastName}`),children:[r.jsx(vG,{className:"h-3 w-3 mr-1"}),"Proxy as Client"]})]})]},m.id)),d.length===0&&r.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[r.jsx(Users,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),r.jsx("p",{children:"No users found"}),r.jsx("p",{className:"text-sm",children:"Try adjusting your search or filters"})]})]})})]})]})}function Ode(){const{toast:e}=Ct(),[t,n]=w.useState("general"),[a,s]=w.useState("Customer Self-Service Portal"),[i,o]=w.useState("Access your quotes, service history, and more"),[l,c]=w.useState(""),[d,f]=w.useState("Welcome to your customer portal. Here you can view your quotes, track deliveries, and request service."),[u,m]=w.useState(!0),[h,x]=w.useState(!0),[g,p]=w.useState(!0),[v,y]=w.useState(!0),[b,j]=w.useState(!0),[C,E]=w.useState(!0),[S,N]=w.useState(90),[I,D]=w.useState(5),[T,A]=w.useState(30),[_,k]=w.useState(!1),L=()=>{e({title:"Settings Saved",description:"Portal settings have been updated successfully."})};return r.jsxs("div",{className:"space-y-6",children:[r.jsxs(lr,{value:t,onValueChange:n,className:"space-y-4",children:[r.jsxs(or,{className:"grid w-full grid-cols-3",children:[r.jsx(Ke,{value:"general",children:"General"}),r.jsx(Ke,{value:"notifications",children:"Notifications"}),r.jsx(Ke,{value:"security",children:"Security"})]}),r.jsxs(Je,{value:"general",className:"space-y-4",children:[r.jsxs(fe,{className:"shadow-sm",children:[r.jsxs(we,{children:[r.jsxs(Ne,{className:"flex items-center",children:[r.jsx(ax,{className:"h-5 w-5 mr-2 text-primary"}),"Portal Configuration"]}),r.jsx(Ue,{children:"Configure general portal settings and appearance"})]}),r.jsxs(me,{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"portalName",children:"Portal Name"}),r.jsx(je,{id:"portalName",value:a,onChange:$=>s($.target.value)})]}),r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"portalDescription",children:"Portal Description"}),r.jsx(je,{id:"portalDescription",value:i,onChange:$=>o($.target.value)})]}),r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"portalLogo",children:"Logo URL (Optional)"}),r.jsx(je,{id:"portalLogo",value:l,onChange:$=>c($.target.value),placeholder:"https://example.com/logo.png"})]}),r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"welcomeMessage",children:"Welcome Message"}),r.jsx(Xt,{id:"welcomeMessage",value:d,onChange:$=>f($.target.value),rows:3})]})]})]}),r.jsxs(fe,{className:"shadow-sm",children:[r.jsxs(we,{children:[r.jsx(Ne,{className:"text-lg",children:"Portal Features"}),r.jsx(Ue,{children:"Enable or disable portal features"})]}),r.jsx(me,{children:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(St,{id:"enableQuotes",defaultChecked:!0}),r.jsx(Z,{htmlFor:"enableQuotes",children:"Enable Quotes"})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(St,{id:"enableService",defaultChecked:!0}),r.jsx(Z,{htmlFor:"enableService",children:"Enable Service Requests"})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(St,{id:"enableDelivery",defaultChecked:!0}),r.jsx(Z,{htmlFor:"enableDelivery",children:"Enable Delivery Tracking"})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(St,{id:"enableDocuments",defaultChecked:!0}),r.jsx(Z,{htmlFor:"enableDocuments",children:"Enable Document Signing"})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(St,{id:"enableSurveys",defaultChecked:!0}),r.jsx(Z,{htmlFor:"enableSurveys",children:"Enable Satisfaction Surveys"})]})]})})]})]}),r.jsxs(Je,{value:"notifications",className:"space-y-4",children:[r.jsxs(fe,{className:"shadow-sm",children:[r.jsxs(we,{children:[r.jsxs(Ne,{className:"flex items-center",children:[r.jsx(dF,{className:"h-5 w-5 mr-2 text-primary"}),"Notification Settings"]}),r.jsx(Ue,{children:"Configure how and when notifications are sent"})]}),r.jsx(me,{className:"space-y-4",children:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx(Z,{className:"text-base",children:"Notification Channels"}),r.jsxs("div",{className:"mt-2 space-y-2",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(St,{id:"emailNotifications",checked:u,onCheckedChange:$=>m(!!$)}),r.jsxs(Z,{htmlFor:"emailNotifications",className:"flex items-center",children:[r.jsx(en,{className:"h-4 w-4 mr-2 text-blue-500"}),"Email Notifications"]})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(St,{id:"smsNotifications",checked:h,onCheckedChange:$=>x(!!$)}),r.jsxs(Z,{htmlFor:"smsNotifications",className:"flex items-center",children:[r.jsx(nn,{className:"h-4 w-4 mr-2 text-green-500"}),"SMS Notifications"]})]})]})]}),r.jsxs("div",{children:[r.jsx(Z,{className:"text-base",children:"Notification Events"}),r.jsxs("div",{className:"mt-2 space-y-2",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(St,{id:"notifyOnQuoteViewed",checked:g,onCheckedChange:$=>p(!!$)}),r.jsx(Z,{htmlFor:"notifyOnQuoteViewed",children:"Quote Viewed by Customer"})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(St,{id:"notifyOnQuoteAccepted",checked:v,onCheckedChange:$=>y(!!$)}),r.jsx(Z,{htmlFor:"notifyOnQuoteAccepted",children:"Quote Accepted by Customer"})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(St,{id:"notifyOnServiceRequest",checked:b,onCheckedChange:$=>j(!!$)}),r.jsx(Z,{htmlFor:"notifyOnServiceRequest",children:"New Service Request Submitted"})]})]})]})]})})]}),r.jsxs(fe,{className:"shadow-sm",children:[r.jsxs(we,{children:[r.jsx(Ne,{className:"text-lg",children:"Email Templates"}),r.jsx(Ue,{children:"Customize notification email templates"})]}),r.jsx(me,{children:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"welcomeEmailTemplate",children:"Welcome Email"}),r.jsxs($e,{defaultValue:"default",children:[r.jsx(Fe,{children:r.jsx(Be,{})}),r.jsxs(Me,{children:[r.jsx(K,{value:"default",children:"Default Welcome Template"}),r.jsx(K,{value:"minimal",children:"Minimal Welcome Template"}),r.jsx(K,{value:"branded",children:"Branded Welcome Template"})]})]})]}),r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"passwordResetTemplate",children:"Password Reset Email"}),r.jsxs($e,{defaultValue:"default",children:[r.jsx(Fe,{children:r.jsx(Be,{})}),r.jsxs(Me,{children:[r.jsx(K,{value:"default",children:"Default Password Reset Template"}),r.jsx(K,{value:"minimal",children:"Minimal Password Reset Template"}),r.jsx(K,{value:"secure",children:"Secure Password Reset Template"})]})]})]})]})})]})]}),r.jsxs(Je,{value:"security",className:"space-y-4",children:[r.jsxs(fe,{className:"shadow-sm",children:[r.jsxs(we,{children:[r.jsxs(Ne,{className:"flex items-center",children:[r.jsx(bG,{className:"h-5 w-5 mr-2 text-primary"}),"Security Settings"]}),r.jsx(Ue,{children:"Configure portal security and access controls"})]}),r.jsx(me,{className:"space-y-4",children:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(St,{id:"requireStrongPasswords",checked:C,onCheckedChange:$=>E(!!$)}),r.jsx(Z,{htmlFor:"requireStrongPasswords",children:"Require Strong Passwords"})]}),r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"passwordExpiryDays",children:"Password Expiry (Days)"}),r.jsx(je,{id:"passwordExpiryDays",type:"number",min:"0",value:S,onChange:$=>N(parseInt($.target.value)||0)}),r.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Set to 0 for no expiration"})]}),r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"maxLoginAttempts",children:"Max Login Attempts"}),r.jsx(je,{id:"maxLoginAttempts",type:"number",min:"1",value:I,onChange:$=>D(parseInt($.target.value)||5)})]}),r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"sessionTimeoutMinutes",children:"Session Timeout (Minutes)"}),r.jsx(je,{id:"sessionTimeoutMinutes",type:"number",min:"5",value:T,onChange:$=>A(parseInt($.target.value)||30)})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(St,{id:"twoFactorAuth",checked:_,onCheckedChange:$=>k(!!$)}),r.jsx(Z,{htmlFor:"twoFactorAuth",children:"Enable Two-Factor Authentication"})]})]})})]}),r.jsxs(fe,{className:"shadow-sm",children:[r.jsxs(we,{children:[r.jsx(Ne,{className:"text-lg",children:"Access Controls"}),r.jsx(Ue,{children:"Configure IP restrictions and access limits"})]}),r.jsx(me,{children:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"ipWhitelist",children:"IP Whitelist (Optional)"}),r.jsx(Xt,{id:"ipWhitelist",placeholder:"Enter IP addresses, one per line",rows:3}),r.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Leave empty to allow access from any IP address"})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(St,{id:"limitConcurrentSessions",defaultChecked:!0}),r.jsx(Z,{htmlFor:"limitConcurrentSessions",children:"Limit to One Active Session Per User"})]})]})})]})]})]}),r.jsx("div",{className:"flex justify-end",children:r.jsxs(J,{onClick:L,children:[r.jsx(Pr,{className:"h-4 w-4 mr-2"}),"Save Settings"]})})]})}function cD(){const[e,t]=w.useState("users"),[n,a]=w.useState(!1),s=()=>{a(!0)},i=(o,l)=>{const c=`/customer-portal?impersonateClientId=${o}`;window.open(c,"_blank")};return r.jsxs("div",{className:"space-y-8",children:[n&&r.jsx(Ide,{onSave:()=>{a(!1)},onCancel:()=>a(!1)}),r.jsx("div",{className:"ri-page-header",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"ri-page-title",children:"Client Portal Management"}),r.jsx("p",{className:"ri-page-description",children:"Manage customer portal access and self-service features"})]}),r.jsxs(J,{className:"shadow-sm",onClick:s,children:[r.jsx(Nt,{className:"h-4 w-4 mr-2"}),"Add Portal User"]})]})}),r.jsxs(lr,{value:e,onValueChange:t,className:"space-y-6",children:[r.jsxs(or,{className:"grid w-full grid-cols-3",children:[r.jsx(Ke,{value:"users",children:"Portal Users"}),r.jsx(Ke,{value:"settings",children:"Portal Settings"}),r.jsx(Ke,{value:"activity",children:"User Activity"})]}),r.jsx(Je,{value:"users",children:r.jsx(kde,{onImpersonate:i})}),r.jsx(Je,{value:"settings",children:r.jsx(Ode,{})}),r.jsx(Je,{value:"activity",children:r.jsxs(fe,{className:"shadow-sm",children:[r.jsxs(we,{children:[r.jsx(Ne,{className:"text-xl",children:"Portal Activity"}),r.jsx(Ue,{children:"Recent user activity in the customer portal"})]}),r.jsx(me,{children:r.jsx("div",{className:"space-y-4",children:r.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[r.jsx(ax,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),r.jsx("p",{children:"No recent activity to display"})]})})})]})})]})]})}function _de(){return r.jsxs(Ka,{children:[r.jsx(Vt,{path:"/",element:r.jsx(cD,{})}),r.jsx(Vt,{path:"/*",element:r.jsx(cD,{})})]})}function k8(){const[e,t]=w.useState([]),[n,a]=w.useState([]),[s,i]=w.useState(!1);w.useEffect(()=>{o()},[]);const o=()=>{const j=un("renter-insight-invoices",[{id:"1",customerId:"cust-1",number:"INV-2024-001",items:[{id:"1",description:"2024 Forest River Georgetown",quantity:1,unitPrice:125e3,total:125e3},{id:"2",description:"Extended Warranty",quantity:1,unitPrice:2500,total:2500}],subtotal:127500,tax:10200,total:137700,status:Bt.PAID,dueDate:new Date("2024-02-15"),paidDate:new Date("2024-01-20"),paymentMethod:"Credit Card",notes:"Payment received via Zego",customFields:{},createdAt:new Date("2024-01-15"),updatedAt:new Date("2024-01-20")},{id:"2",customerId:"cust-2",number:"INV-2024-002",items:[{id:"3",description:"Service - AC Repair",quantity:1,unitPrice:620,total:620}],subtotal:620,tax:49.6,total:669.6,status:Bt.SENT,dueDate:new Date("2024-02-20"),notes:"Service invoice for AC repair",customFields:{},createdAt:new Date("2024-01-12"),updatedAt:new Date("2024-01-18")}]),C=un("renter-insight-payments",[{id:"1",invoiceId:"1",amount:137700,method:ai.CREDIT_CARD,status:Wi.COMPLETED,transactionId:"txn_1234567890",processedDate:new Date("2024-01-20"),notes:"Processed via Zego payment gateway",customFields:{},createdAt:new Date("2024-01-20"),updatedAt:new Date("2024-01-20")}]);t(j),a(C)},l=j=>{Wr("renter-insight-invoices",j)},c=j=>{Wr("renter-insight-payments",j)},d=j=>e.filter(C=>C.customerId===j),f=j=>e.find(C=>C.id===j),u=j=>n.filter(C=>C.invoiceId===j),m=async j=>{i(!0);try{const C={id:Math.random().toString(36).substr(2,9),customerId:j.customerId||"",number:j.number||"",items:j.items||[],subtotal:j.subtotal||0,tax:j.tax||0,total:j.total||0,status:j.status||Bt.DRAFT,dueDate:j.dueDate||new Date,notes:j.notes||"",customFields:j.customFields||{},createdAt:new Date,updatedAt:new Date},E=[...e,C];return t(E),l(E),C}finally{i(!1)}},h=async(j,C)=>{const E=e.map(S=>S.id===j?{...S,...C,updatedAt:new Date}:S);t(E),l(E)},x=async j=>{const C=e.filter(E=>E.id!==j);t(C),l(C)},g=async(j,C)=>{const E=e.map(S=>S.id===j?{...S,status:C,updatedAt:new Date}:S);t(E),l(E)},p=async(j,C)=>{const E=e.map(S=>S.id===j?{...S,status:Bt.PAID,paidDate:new Date,paymentMethod:C,updatedAt:new Date}:S);t(E),l(E)};return{invoices:e,payments:n,loading:s,getInvoicesByCustomerId:d,getInvoiceById:f,getPaymentsByInvoiceId:u,createInvoice:m,updateInvoice:h,deleteInvoice:x,updateInvoiceStatus:g,markInvoiceAsPaid:p,sendInvoice:async j=>{const C=e.map(E=>E.id===j?{...E,status:Bt.SENT,updatedAt:new Date}:E);t(C),l(C)},recordPayment:async j=>{i(!0);try{const C={id:Math.random().toString(36).substr(2,9),invoiceId:j.invoiceId||"",amount:j.amount||0,method:j.method||ai.CREDIT_CARD,status:j.status||Wi.COMPLETED,transactionId:j.transactionId,processedDate:j.processedDate||new Date,notes:j.notes||"",customFields:j.customFields||{},createdAt:new Date,updatedAt:new Date},E=[...n,C];return a(E),c(E),C.status===Wi.COMPLETED&&await p(C.invoiceId,C.method),C}finally{i(!1)}},sendPaymentRequest:async j=>(await g(j,Bt.SENT),await new Promise(C=>setTimeout(C,1e3)),!0)}}function Lde({invoice:e,onSave:t,onCancel:n}){const{toast:a}=Ct(),{leads:s}=ro(),[i,o]=w.useState(!1),[l,c]=w.useState({customerId:"",number:`INV-${new Date().getFullYear()}-${String(Math.floor(Math.random()*1e3)).padStart(3,"0")}`,items:[],subtotal:0,tax:0,total:0,status:Bt.DRAFT,dueDate:new Date(Date.now()+30*24*60*60*1e3),notes:"",customFields:{}}),[d,f]=w.useState({description:"",quantity:1,unitPrice:0,total:0}),[u,m]=w.useState(.08);w.useEffect(()=>{e&&(c({...e,dueDate:new Date(e.dueDate)}),e.subtotal>0&&m(e.tax/e.subtotal))},[e]),w.useEffect(()=>{const p=d.quantity||1,v=d.unitPrice||0;f(y=>({...y,total:p*v}))},[d.quantity,d.unitPrice]),w.useEffect(()=>{if(l.items&&l.items.length>0){const p=l.items.reduce((b,j)=>b+j.total,0),v=p*u,y=p+v;c(b=>({...b,subtotal:p,tax:v,total:y}))}else c(p=>({...p,subtotal:0,tax:0,total:0}))},[l.items,u]);const h=async p=>{if(p.preventDefault(),!l.customerId||!l.number||!l.dueDate){a({title:"Validation Error",description:"Please fill in all required fields",variant:"destructive"});return}if(!l.items||l.items.length===0){a({title:"Validation Error",description:"Please add at least one item to the invoice",variant:"destructive"});return}o(!0);try{await t(l),a({title:"Success",description:`Invoice ${e?"updated":"created"} successfully`})}catch{a({title:"Error",description:`Failed to ${e?"update":"create"} invoice`,variant:"destructive"})}finally{o(!1)}},x=()=>{if(!d.description||!d.unitPrice){a({title:"Validation Error",description:"Description and unit price are required",variant:"destructive"});return}const p={id:Math.random().toString(36).substr(2,9),description:d.description||"",quantity:d.quantity||1,unitPrice:d.unitPrice||0,total:d.total||0};c(v=>({...v,items:[...v.items||[],p]})),f({description:"",quantity:1,unitPrice:0,total:0})},g=p=>{c(v=>{var y;return{...v,items:((y=v.items)==null?void 0:y.filter(b=>b.id!==p))||[]}})};return r.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:r.jsxs(fe,{className:"w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[r.jsx(we,{children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx(Ne,{children:e?"Edit Invoice":"Create Invoice"}),r.jsx(Ue,{children:e?"Update invoice details":"Create a new invoice"})]}),r.jsx(J,{variant:"ghost",size:"sm",onClick:n,children:r.jsx($t,{className:"h-4 w-4"})})]})}),r.jsx(me,{children:r.jsxs("form",{onSubmit:h,className:"space-y-6",children:[r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"text-lg font-semibold",children:"Invoice Information"}),r.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"customerId",children:"Customer *"}),r.jsxs($e,{value:l.customerId,onValueChange:p=>c(v=>({...v,customerId:p})),children:[r.jsx(Fe,{children:r.jsx(Be,{placeholder:"Select customer"})}),r.jsx(Me,{children:s.map(p=>r.jsxs(K,{value:p.id,children:[p.firstName," ",p.lastName]},p.id))})]})]}),r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"invoiceNumber",children:"Invoice Number *"}),r.jsx(je,{id:"invoiceNumber",value:l.number,onChange:p=>c(v=>({...v,number:p.target.value})),placeholder:"e.g., INV-2024-001"})]})]}),r.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"dueDate",children:"Due Date *"}),r.jsx(je,{id:"dueDate",type:"date",value:l.dueDate?new Date(l.dueDate).toISOString().split("T")[0]:"",onChange:p=>c(v=>({...v,dueDate:p.target.value?new Date(p.target.value):void 0}))})]}),r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"status",children:"Status"}),r.jsxs($e,{value:l.status,onValueChange:p=>c(v=>({...v,status:p})),children:[r.jsx(Fe,{children:r.jsx(Be,{})}),r.jsxs(Me,{children:[r.jsx(K,{value:Bt.DRAFT,children:"Draft"}),r.jsx(K,{value:Bt.SENT,children:"Sent"}),r.jsx(K,{value:Bt.VIEWED,children:"Viewed"}),r.jsx(K,{value:Bt.PAID,children:"Paid"}),r.jsx(K,{value:Bt.OVERDUE,children:"Overdue"}),r.jsx(K,{value:Bt.CANCELLED,children:"Cancelled"})]})]})]})]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h3",{className:"text-lg font-semibold",children:"Invoice Items"}),r.jsxs(J,{type:"button",onClick:x,size:"sm",children:[r.jsx(Nt,{className:"h-4 w-4 mr-2"}),"Add Item"]})]}),r.jsx(fe,{className:"border-dashed",children:r.jsxs(me,{className:"pt-6",children:[r.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[r.jsxs("div",{className:"md:col-span-2",children:[r.jsx(Z,{htmlFor:"description",children:"Description *"}),r.jsx(je,{id:"description",value:d.description,onChange:p=>f(v=>({...v,description:p.target.value})),placeholder:"e.g., Service Labor"})]}),r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"quantity",children:"Quantity"}),r.jsx(je,{id:"quantity",type:"number",min:"1",value:d.quantity,onChange:p=>f(v=>({...v,quantity:parseInt(p.target.value)||1}))})]}),r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"unitPrice",children:"Unit Price"}),r.jsx(je,{id:"unitPrice",type:"number",step:"0.01",min:"0",value:d.unitPrice,onChange:p=>f(v=>({...v,unitPrice:parseFloat(p.target.value)||0}))})]})]}),r.jsxs("div",{className:"flex justify-between items-center mt-4",children:[r.jsxs("div",{children:[r.jsx("span",{className:"text-sm font-medium",children:"Total: "}),r.jsx("span",{className:"font-bold",children:De(d.total||0)})]}),r.jsx(J,{type:"button",onClick:x,children:"Add Item"})]})]})}),r.jsx("div",{className:"space-y-3",children:l.items&&l.items.length>0?l.items.map(p=>r.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("div",{className:"font-medium",children:p.description}),r.jsxs("p",{className:"text-sm text-muted-foreground",children:["Quantity: ",p.quantity," × ",De(p.unitPrice)]})]}),r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsx("span",{className:"font-bold",children:De(p.total)}),r.jsx(J,{type:"button",variant:"ghost",size:"sm",onClick:()=>g(p.id),children:r.jsx(wn,{className:"h-4 w-4 text-red-500"})})]})]},p.id)):r.jsxs("div",{className:"text-center py-6 text-muted-foreground border-2 border-dashed rounded-lg",children:[r.jsx(Pn,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),r.jsx("p",{children:"No items added yet"}),r.jsx("p",{className:"text-sm",children:"Add items to this invoice"})]})})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"text-lg font-semibold",children:"Invoice Totals"}),r.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"taxRate",children:"Tax Rate (%)"}),r.jsx(je,{id:"taxRate",type:"number",step:"0.01",min:"0",max:"100",value:u*100,onChange:p=>m(parseFloat(p.target.value)/100||0)})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:"Subtotal:"}),r.jsx("span",{children:De(l.subtotal||0)})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsxs("span",{children:["Tax (",(u*100).toFixed(2),"%):"]}),r.jsx("span",{children:De(l.tax||0)})]}),r.jsxs("div",{className:"flex justify-between font-bold text-lg",children:[r.jsx("span",{children:"Total:"}),r.jsx("span",{children:De(l.total||0)})]})]})]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"text-lg font-semibold",children:"Additional Information"}),r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"notes",children:"Notes"}),r.jsx(Xt,{id:"notes",value:l.notes,onChange:p=>c(v=>({...v,notes:p.target.value})),placeholder:"Add any additional notes about this invoice",rows:3})]})]}),r.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t",children:[r.jsx(J,{type:"button",variant:"outline",onClick:n,disabled:i,children:"Cancel"}),r.jsx(J,{type:"submit",disabled:i,children:i?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),e?"Updating...":"Creating..."]}):r.jsxs(r.Fragment,{children:[r.jsx(Pr,{className:"h-4 w-4 mr-2"}),e?"Update":"Create"," Invoice"]})})]})]})})]})})}function Rde({invoiceId:e,invoiceTotal:t,remainingBalance:n,onSave:a,onCancel:s}){const{toast:i}=Ct(),[o,l]=w.useState(!1),[c,d]=w.useState({invoiceId:e,amount:n,method:ai.CREDIT_CARD,status:Wi.COMPLETED,processedDate:new Date,notes:""}),f=async u=>{if(u.preventDefault(),!c.amount||c.amount<=0){i({title:"Validation Error",description:"Payment amount must be greater than zero",variant:"destructive"});return}if(c.amount>n){i({title:"Validation Error",description:"Payment amount cannot exceed the remaining balance",variant:"destructive"});return}l(!0);try{await a(c),i({title:"Success",description:"Payment recorded successfully"})}catch{i({title:"Error",description:"Failed to record payment",variant:"destructive"})}finally{l(!1)}};return r.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:r.jsxs(fe,{className:"w-full max-w-md",children:[r.jsx(we,{children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsxs(Ne,{className:"flex items-center",children:[r.jsx(Ga,{className:"h-5 w-5 mr-2 text-primary"}),"Record Payment"]}),r.jsxs(Ue,{children:["Record a payment for invoice #",e]})]}),r.jsx(J,{variant:"ghost",size:"sm",onClick:s,children:r.jsx($t,{className:"h-4 w-4"})})]})}),r.jsx(me,{children:r.jsxs("form",{onSubmit:f,className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"amount",children:"Payment Amount *"}),r.jsxs("div",{className:"relative",children:[r.jsx(Mt,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),r.jsx(je,{id:"amount",type:"number",step:"0.01",min:"0.01",max:n,value:c.amount,onChange:u=>d(m=>({...m,amount:parseFloat(u.target.value)||0})),className:"pl-10"})]}),r.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Remaining balance: ",De(n)]})]}),r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"method",children:"Payment Method *"}),r.jsxs($e,{value:c.method,onValueChange:u=>d(m=>({...m,method:u})),children:[r.jsx(Fe,{children:r.jsx(Be,{})}),r.jsxs(Me,{children:[r.jsx(K,{value:ai.CREDIT_CARD,children:"Credit Card"}),r.jsx(K,{value:ai.BANK_TRANSFER,children:"Bank Transfer"}),r.jsx(K,{value:ai.CASH,children:"Cash"}),r.jsx(K,{value:ai.CHECK,children:"Check"}),r.jsx(K,{value:ai.FINANCING,children:"Financing"})]})]})]}),r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"status",children:"Payment Status *"}),r.jsxs($e,{value:c.status,onValueChange:u=>d(m=>({...m,status:u})),children:[r.jsx(Fe,{children:r.jsx(Be,{})}),r.jsxs(Me,{children:[r.jsx(K,{value:Wi.COMPLETED,children:"Completed"}),r.jsx(K,{value:Wi.PENDING,children:"Pending"}),r.jsx(K,{value:Wi.PROCESSING,children:"Processing"})]})]})]}),r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"processedDate",children:"Payment Date *"}),r.jsx(je,{id:"processedDate",type:"date",value:c.processedDate?new Date(c.processedDate).toISOString().split("T")[0]:"",onChange:u=>d(m=>({...m,processedDate:u.target.value?new Date(u.target.value):void 0}))})]}),r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"transactionId",children:"Transaction ID"}),r.jsx(je,{id:"transactionId",value:c.transactionId||"",onChange:u=>d(m=>({...m,transactionId:u.target.value})),placeholder:"e.g., txn_1234567890"})]}),r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"notes",children:"Notes"}),r.jsx(Xt,{id:"notes",value:c.notes||"",onChange:u=>d(m=>({...m,notes:u.target.value})),placeholder:"Add any notes about this payment",rows:3})]}),r.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[r.jsx(J,{type:"button",variant:"outline",onClick:s,disabled:o,children:"Cancel"}),r.jsx(J,{type:"submit",disabled:o,children:o?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Recording..."]}):r.jsxs(r.Fragment,{children:[r.jsx(Pr,{className:"h-4 w-4 mr-2"}),"Record Payment"]})})]})]})})]})})}function Fde({invoice:e,payments:t,onClose:n,onEdit:a,onSendPaymentRequest:s,onRecordPayment:i}){const{toast:o}=Ct(),[l,c]=w.useState("details"),[d,f]=w.useState(!1),[u,m]=w.useState(!1),h=E=>{switch(E){case Bt.DRAFT:return"bg-gray-50 text-gray-700 border-gray-200";case Bt.SENT:return"bg-blue-50 text-blue-700 border-blue-200";case Bt.VIEWED:return"bg-yellow-50 text-yellow-700 border-yellow-200";case Bt.PAID:return"bg-green-50 text-green-700 border-green-200";case Bt.OVERDUE:return"bg-red-50 text-red-700 border-red-200";case Bt.CANCELLED:return"bg-gray-50 text-gray-700 border-gray-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},x=E=>{switch(E){case"completed":return r.jsx($r,{className:"h-4 w-4 text-green-500"});case"pending":return r.jsx(er,{className:"h-4 w-4 text-yellow-500"});case"processing":return r.jsx(er,{className:"h-4 w-4 text-blue-500"});case"failed":return r.jsx(di,{className:"h-4 w-4 text-red-500"});case"refunded":return r.jsx(Ff,{className:"h-4 w-4 text-purple-500"});default:return null}},g=E=>{switch(E){case"credit_card":return r.jsx(Ga,{className:"h-4 w-4 text-blue-500"});case"bank_transfer":return r.jsx(Mt,{className:"h-4 w-4 text-green-500"});case"cash":return r.jsx(Mt,{className:"h-4 w-4 text-green-500"});case"check":return r.jsx(Pn,{className:"h-4 w-4 text-blue-500"});case"financing":return r.jsx(Mt,{className:"h-4 w-4 text-purple-500"});default:return r.jsx(Mt,{className:"h-4 w-4 text-gray-500"})}},p=()=>{try{const E=new It;if(E.setFontSize(20),E.text("INVOICE",105,15,{align:"center"}),E.setFontSize(12),E.text(`Invoice #: ${e.number}`,20,30),E.text(`Date: ${lt(e.createdAt)}`,20,40),E.text(`Due Date: ${lt(e.dueDate)}`,20,50),E.text(`Status: ${e.status.toUpperCase()}`,20,60),E.setFontSize(14),E.text("Bill To:",20,75),E.setFontSize(12),E.text(`Customer ID: ${e.customerId}`,20,85),E.setFontSize(14),E.text("Invoice Items",20,105),E.autoTable({startY:110,head:[["Description","Quantity","Unit Price","Total"]],body:e.items.map(S=>[S.description,S.quantity,De(S.unitPrice),De(S.total)]),foot:[["","","Subtotal:",De(e.subtotal)],["","","Tax:",De(e.tax)],["","","Total:",De(e.total)]],theme:"striped",headStyles:{fillColor:[66,139,202]}}),e.notes){const S=E.lastAutoTable.finalY||110;E.setFontSize(14),E.text("Notes",20,S+20),E.setFontSize(12);const N=E.splitTextToSize(e.notes,170);E.text(N,20,S+30)}E.save(`invoice-${e.number}.pdf`),o({title:"PDF Generated",description:"Invoice PDF has been downloaded"})}catch(E){console.error("Error generating PDF:",E),o({title:"Error",description:"Failed to generate PDF",variant:"destructive"})}},v=async()=>{if(s){f(!0);try{await s(e.id),o({title:"Payment Request Sent",description:"Payment request has been sent to the customer"})}catch{o({title:"Error",description:"Failed to send payment request",variant:"destructive"})}finally{f(!1)}}},y=async E=>{if(i)try{await i(E),m(!1)}catch(S){throw S}},b=t.filter(E=>E.invoiceId===e.id),j=b.reduce((E,S)=>E+S.amount,0),C=e.total-j;return r.jsxs("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:[u&&r.jsx(Rde,{invoiceId:e.id,invoiceTotal:e.total,remainingBalance:C,onSave:y,onCancel:()=>m(!1)}),r.jsxs(fe,{className:"w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[r.jsx(we,{children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsxs(Ne,{className:"text-xl",children:["Invoice #",e.number]}),r.jsx(Ue,{children:"Invoice details and payment information"})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsxs(J,{onClick:()=>a(e),size:"sm",children:[r.jsx(Br,{className:"h-4 w-4 mr-2"}),"Edit Invoice"]}),r.jsx(J,{variant:"ghost",size:"sm",onClick:n,children:r.jsx($t,{className:"h-4 w-4"})})]})]})}),r.jsxs(me,{children:[r.jsxs(lr,{value:l,onValueChange:c,className:"space-y-4",children:[r.jsxs(or,{className:"grid w-full grid-cols-3",children:[r.jsx(Ke,{value:"details",children:"Details"}),r.jsxs(Ke,{value:"payments",children:["Payments",b.length>0&&r.jsx(ze,{className:"ml-2 bg-green-50 text-green-700 border-green-200",children:b.length})]}),r.jsx(Ke,{value:"history",children:"History"})]}),r.jsxs(Je,{value:"details",className:"space-y-6",children:[r.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[r.jsx(ze,{className:He("ri-badge-status",h(e.status)),children:e.status.toUpperCase()}),e.paidDate&&r.jsxs(ze,{className:"bg-green-50 text-green-700 border-green-200",children:["PAID ON ",lt(e.paidDate)]}),e.status===Bt.OVERDUE&&r.jsx(ze,{className:"bg-red-50 text-red-700 border-red-200",children:"OVERDUE"})]}),r.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Customer"}),r.jsx("p",{className:"font-medium",children:e.customerId})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Invoice Number"}),r.jsx("p",{className:"font-medium",children:e.number})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Created Date"}),r.jsx("p",{className:"font-medium",children:lt(e.createdAt)})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Due Date"}),r.jsx("p",{className:"font-medium",children:lt(e.dueDate)})]}),e.paidDate&&r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Paid Date"}),r.jsx("p",{className:"font-medium",children:lt(e.paidDate)})]}),e.paymentMethod&&r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Payment Method"}),r.jsx("p",{className:"font-medium",children:e.paymentMethod})]})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Invoice Items"}),r.jsx("div",{className:"space-y-3",children:e.items.map((E,S)=>r.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("h4",{className:"font-medium",children:E.description}),r.jsxs("p",{className:"text-sm text-muted-foreground",children:["Quantity: ",E.quantity," × ",De(E.unitPrice)]})]}),r.jsx("div",{className:"text-right",children:r.jsx("div",{className:"font-bold text-lg",children:De(E.total)})})]},E.id))})]}),r.jsx("div",{className:"bg-muted/30 p-4 rounded-lg",children:r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:"Subtotal:"}),r.jsx("span",{children:De(e.subtotal)})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:"Tax:"}),r.jsx("span",{children:De(e.tax)})]}),r.jsxs("div",{className:"flex justify-between text-lg font-bold border-t pt-2",children:[r.jsx("span",{children:"Total:"}),r.jsx("span",{children:De(e.total)})]}),b.length>0&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"flex justify-between text-green-600",children:[r.jsx("span",{children:"Paid:"}),r.jsx("span",{children:De(j)})]}),r.jsxs("div",{className:"flex justify-between font-bold",children:[r.jsx("span",{children:"Balance Due:"}),r.jsx("span",{children:De(C)})]})]})]})}),e.notes&&r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Notes"}),r.jsx("div",{className:"mt-1 p-3 bg-muted/30 rounded-md",children:r.jsx("p",{className:"text-sm",children:e.notes})})]})]}),r.jsxs(Je,{value:"payments",className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h3",{className:"text-lg font-semibold",children:"Payment History"}),r.jsx("div",{className:"flex space-x-2",children:e.status!==Bt.PAID&&e.status!==Bt.CANCELLED&&r.jsxs(r.Fragment,{children:[r.jsxs(J,{onClick:v,disabled:d,size:"sm",variant:"outline",children:[r.jsx(Oo,{className:"h-4 w-4 mr-2"}),d?"Sending...":"Send Payment Request"]}),i&&C>0&&r.jsxs(J,{onClick:()=>m(!0),size:"sm",children:[r.jsx(Nt,{className:"h-4 w-4 mr-2"}),"Record Payment"]})]})})]}),b.length>0?r.jsxs("div",{className:"space-y-4",children:[b.map(E=>r.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[r.jsxs("h4",{className:"font-medium",children:["Payment #",E.id.substring(0,8)]}),r.jsx(ze,{className:E.status==="completed"?"bg-green-50 text-green-700 border-green-200":E.status==="pending"?"bg-yellow-50 text-yellow-700 border-yellow-200":E.status==="processing"?"bg-blue-50 text-blue-700 border-blue-200":E.status==="failed"?"bg-red-50 text-red-700 border-red-200":E.status==="refunded"?"bg-purple-50 text-purple-700 border-purple-200":"bg-gray-50 text-gray-700 border-gray-200",children:r.jsxs("span",{className:"flex items-center",children:[x(E.status),r.jsx("span",{className:"ml-1",children:E.status.toUpperCase()})]})})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm text-muted-foreground",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx(Mr,{className:"h-3 w-3 mr-1 text-blue-500"}),r.jsx("span",{className:"font-medium",children:"Date:"}),r.jsx("span",{className:"ml-1",children:lt(E.processedDate)})]}),r.jsxs("div",{className:"flex items-center",children:[g(E.method),r.jsx("span",{className:"font-medium ml-1",children:"Method:"}),r.jsx("span",{className:"ml-1",children:E.method.replace("_"," ").replace(/\b\w/g,S=>S.toUpperCase())})]}),E.transactionId&&r.jsxs("div",{className:"flex items-center",children:[r.jsx(Pn,{className:"h-3 w-3 mr-1 text-purple-500"}),r.jsx("span",{className:"font-medium",children:"Transaction ID:"}),r.jsx("span",{className:"ml-1 font-mono text-xs",children:E.transactionId})]})]}),E.notes&&r.jsx("p",{className:"text-sm text-muted-foreground mt-2 bg-muted/20 p-2 rounded-md",children:E.notes})]}),r.jsx("div",{className:"text-right",children:r.jsx("div",{className:"font-bold text-lg text-green-600",children:De(E.amount)})})]},E.id)),r.jsx("div",{className:"bg-muted/30 p-4 rounded-lg",children:r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"font-medium",children:"Invoice Total:"}),r.jsx("span",{children:De(e.total)})]}),r.jsxs("div",{className:"flex justify-between text-green-700",children:[r.jsx("span",{className:"font-medium",children:"Total Paid:"}),r.jsx("span",{children:De(j)})]}),r.jsxs("div",{className:"flex justify-between font-bold border-t pt-2",children:[r.jsx("span",{className:C>0?"text-red-700":"text-green-700",children:"Balance Due:"}),r.jsx("span",{className:C>0?"text-red-700":"text-green-700",children:De(C)})]})]})})]}):r.jsxs("div",{className:"text-center py-8 text-muted-foreground border-2 border-dashed rounded-lg",children:[r.jsx(Ga,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),r.jsx("p",{children:"No payments recorded for this invoice"}),e.status!==Bt.PAID&&e.status!==Bt.CANCELLED&&i&&r.jsxs(J,{onClick:()=>m(!0),className:"mt-4",size:"sm",children:[r.jsx(Nt,{className:"h-4 w-4 mr-2"}),"Record Payment"]})]}),r.jsxs(fe,{className:"bg-blue-50 border-blue-200",children:[r.jsxs(we,{className:"pb-2",children:[r.jsx(Ne,{className:"text-lg text-blue-800",children:"Zego Payment Integration"}),r.jsx(Ue,{className:"text-blue-700",children:"Secure payment processing for your customers"})]}),r.jsx(me,{children:r.jsxs("div",{className:"space-y-3 text-blue-700",children:[r.jsx("p",{className:"text-sm",children:"When you send a payment request, your customer will receive an email with a secure link to make their payment online."}),r.jsx("p",{className:"text-sm",children:"Payments are processed securely through Zego's payment gateway, supporting credit cards, ACH transfers, and more."}),r.jsx("p",{className:"text-sm font-medium",children:"Processing fee: 2.9% + $0.30 per transaction"})]})})]})]}),r.jsxs(Je,{value:"history",className:"space-y-6",children:[r.jsx("h3",{className:"text-lg font-semibold",children:"Invoice History"}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"relative pl-6 pb-6 border-l-2 border-muted",children:[r.jsx("div",{className:"absolute left-[-8px] top-0 w-4 h-4 rounded-full bg-blue-500"}),r.jsx("div",{className:"font-medium",children:"Invoice Created"}),r.jsx("div",{className:"text-sm text-muted-foreground",children:lt(e.createdAt)})]}),e.status!==Bt.DRAFT&&r.jsxs("div",{className:"relative pl-6 pb-6 border-l-2 border-muted",children:[r.jsx("div",{className:"absolute left-[-8px] top-0 w-4 h-4 rounded-full bg-yellow-500"}),r.jsx("div",{className:"font-medium",children:"Invoice Sent"}),r.jsx("div",{className:"text-sm text-muted-foreground",children:lt(e.updatedAt)})]}),e.status===Bt.VIEWED&&r.jsxs("div",{className:"relative pl-6 pb-6 border-l-2 border-muted",children:[r.jsx("div",{className:"absolute left-[-8px] top-0 w-4 h-4 rounded-full bg-purple-500"}),r.jsx("div",{className:"font-medium",children:"Invoice Viewed by Customer"}),r.jsx("div",{className:"text-sm text-muted-foreground",children:lt(e.updatedAt)})]}),e.status===Bt.PAID&&e.paidDate&&r.jsxs("div",{className:"relative pl-6",children:[r.jsx("div",{className:"absolute left-[-8px] top-0 w-4 h-4 rounded-full bg-green-500"}),r.jsx("div",{className:"font-medium",children:"Payment Received"}),r.jsx("div",{className:"text-sm text-muted-foreground",children:lt(e.paidDate)})]}),e.status===Bt.OVERDUE&&r.jsxs("div",{className:"relative pl-6",children:[r.jsx("div",{className:"absolute left-[-8px] top-0 w-4 h-4 rounded-full bg-red-500"}),r.jsx("div",{className:"font-medium",children:"Invoice Overdue"}),r.jsx("div",{className:"text-sm text-muted-foreground",children:lt(e.dueDate)})]}),e.status===Bt.CANCELLED&&r.jsxs("div",{className:"relative pl-6",children:[r.jsx("div",{className:"absolute left-[-8px] top-0 w-4 h-4 rounded-full bg-gray-500"}),r.jsx("div",{className:"font-medium",children:"Invoice Cancelled"}),r.jsx("div",{className:"text-sm text-muted-foreground",children:lt(e.updatedAt)})]})]})]})]}),r.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t mt-6",children:[r.jsx(J,{variant:"outline",onClick:n,children:"Close"}),r.jsxs(J,{variant:"outline",onClick:p,children:[r.jsx(hu,{className:"h-4 w-4 mr-2"}),"Print PDF"]}),r.jsxs("div",{className:"flex space-x-2",children:[e.status===Bt.DRAFT&&r.jsxs(J,{children:[r.jsx(Oo,{className:"h-4 w-4 mr-2"}),"Send Invoice"]}),e.status!==Bt.PAID&&e.status!==Bt.CANCELLED&&r.jsxs(r.Fragment,{children:[r.jsxs(J,{onClick:v,disabled:d,variant:"outline",children:[r.jsx(Oo,{className:"h-4 w-4 mr-2"}),d?"Sending...":"Request Payment"]}),i&&C>0&&r.jsxs(J,{onClick:()=>m(!0),children:[r.jsx(Ga,{className:"h-4 w-4 mr-2"}),"Record Payment"]})]})]})]})]})]})]})}function Mde({payments:e,onViewPaymentDetails:t}){const{toast:n}=Ct(),[a,s]=w.useState(""),[i,o]=w.useState("all"),[l,c]=w.useState("all"),[d,f]=w.useState("all"),u=S=>{switch(S){case"completed":return"bg-green-50 text-green-700 border-green-200";case"pending":return"bg-yellow-50 text-yellow-700 border-yellow-200";case"processing":return"bg-blue-50 text-blue-700 border-blue-200";case"failed":return"bg-red-50 text-red-700 border-red-200";case"refunded":return"bg-purple-50 text-purple-700 border-purple-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},m=S=>{switch(S){case"completed":return r.jsx($r,{className:"h-4 w-4 text-green-500"});case"pending":return r.jsx(er,{className:"h-4 w-4 text-yellow-500"});case"processing":return r.jsx(er,{className:"h-4 w-4 text-blue-500"});case"failed":return r.jsx(di,{className:"h-4 w-4 text-red-500"});case"refunded":return r.jsx(Pn,{className:"h-4 w-4 text-purple-500"});default:return null}},h=S=>{switch(S){case"credit_card":return"Credit Card";case"bank_transfer":return"Bank Transfer";case"cash":return"Cash";case"check":return"Check";case"financing":return"Financing";default:return S}},x=S=>{switch(S){case"credit_card":return r.jsx(Ga,{className:"h-4 w-4 text-blue-500"});case"bank_transfer":return r.jsx(Pn,{className:"h-4 w-4 text-green-500"});case"cash":return r.jsx(Pn,{className:"h-4 w-4 text-green-500"});case"check":return r.jsx(Pn,{className:"h-4 w-4 text-blue-500"});case"financing":return r.jsx(Pn,{className:"h-4 w-4 text-purple-500"});default:return r.jsx(Pn,{className:"h-4 w-4 text-gray-500"})}},g=e.filter(S=>{const N=S.invoiceId.toLowerCase().includes(a.toLowerCase())||S.id.toLowerCase().includes(a.toLowerCase())||S.transactionId&&S.transactionId.toLowerCase().includes(a.toLowerCase()),I=i==="all"||S.status===i,D=l==="all"||S.method===l;let T=!0;const A=new Date,_=S.processedDate;if(d==="today")T=_.toDateString()===A.toDateString();else if(d==="this_week"){const k=new Date(A);k.setDate(A.getDate()-A.getDay());const L=new Date(k);L.setDate(k.getDate()+6),T=_>=k&&_<=L}else d==="this_month"&&(T=_.getMonth()===A.getMonth()&&_.getFullYear()===A.getFullYear());return N&&I&&D&&T}),p=()=>{const N=[["ID","Invoice ID","Amount","Method","Status","Transaction ID","Date","Notes"].join(","),...g.map(A=>[A.id,A.invoiceId,A.amount.toFixed(2),A.method,A.status,A.transactionId||"",A.processedDate.toISOString().split("T")[0],A.notes||""].join(","))].join(`
`),I=new Blob([N],{type:"text/csv;charset=utf-8;"}),D=URL.createObjectURL(I),T=document.createElement("a");T.href=D,T.setAttribute("download","payment_history.csv"),document.body.appendChild(T),T.click(),document.body.removeChild(T),n({title:"Export Successful",description:"Payment history exported to CSV"})},v=e.length,y=e.reduce((S,N)=>S+N.amount,0),b=e.filter(S=>S.status==="completed").length,j=e.filter(S=>S.status==="pending"||S.status==="processing").length,C=e.filter(S=>S.status==="failed").length,E=e.reduce((S,N)=>{const I=N.method;return S[I]||(S[I]=0),N.status==="completed"&&(S[I]+=N.amount),S},{});return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[r.jsxs(fe,{className:"shadow-sm border-0 bg-gradient-to-br from-blue-50 to-blue-100/50",children:[r.jsxs(we,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(Ne,{className:"text-sm font-medium text-blue-900",children:"Total Payments"}),r.jsx(Ga,{className:"h-4 w-4 text-blue-600"})]}),r.jsxs(me,{children:[r.jsx("div",{className:"text-2xl font-bold text-blue-900",children:v}),r.jsxs("p",{className:"text-xs text-blue-600 flex items-center mt-1",children:[De(y)," processed"]})]})]}),r.jsxs(fe,{className:"shadow-sm border-0 bg-gradient-to-br from-green-50 to-green-100/50",children:[r.jsxs(we,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(Ne,{className:"text-sm font-medium text-green-900",children:"Completed"}),r.jsx($r,{className:"h-4 w-4 text-green-600"})]}),r.jsxs(me,{children:[r.jsx("div",{className:"text-2xl font-bold text-green-900",children:b}),r.jsxs("p",{className:"text-xs text-green-600 flex items-center mt-1",children:[(b/v*100||0).toFixed(1),"% success rate"]})]})]}),r.jsxs(fe,{className:"shadow-sm border-0 bg-gradient-to-br from-yellow-50 to-yellow-100/50",children:[r.jsxs(we,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(Ne,{className:"text-sm font-medium text-yellow-900",children:"Pending"}),r.jsx(er,{className:"h-4 w-4 text-yellow-600"})]}),r.jsxs(me,{children:[r.jsx("div",{className:"text-2xl font-bold text-yellow-900",children:j}),r.jsx("p",{className:"text-xs text-yellow-600 flex items-center mt-1",children:"Awaiting processing"})]})]}),r.jsxs(fe,{className:"shadow-sm border-0 bg-gradient-to-br from-red-50 to-red-100/50",children:[r.jsxs(we,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(Ne,{className:"text-sm font-medium text-red-900",children:"Failed"}),r.jsx(di,{className:"h-4 w-4 text-red-600"})]}),r.jsxs(me,{children:[r.jsx("div",{className:"text-2xl font-bold text-red-900",children:C}),r.jsxs("p",{className:"text-xs text-red-600 flex items-center mt-1",children:[(C/v*100||0).toFixed(1),"% failure rate"]})]})]})]}),r.jsxs(fe,{className:"shadow-sm",children:[r.jsxs(we,{children:[r.jsx(Ne,{className:"text-lg",children:"Payment Methods"}),r.jsx(Ue,{children:"Breakdown of payments by method"})]}),r.jsx(me,{children:r.jsxs("div",{className:"grid gap-3 md:grid-cols-3",children:[Object.entries(E).map(([S,N])=>r.jsxs("div",{className:"p-4 border rounded-lg",children:[r.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[x(S),r.jsx("span",{className:"font-medium",children:h(S)})]}),r.jsx("div",{className:"text-2xl font-bold text-primary",children:De(N)}),r.jsxs("p",{className:"text-sm text-muted-foreground",children:[e.filter(I=>I.method===S&&I.status==="completed").length," payments"]})]},S)),Object.keys(E).length===0&&r.jsx("div",{className:"col-span-3 text-center py-8 text-muted-foreground",children:r.jsx("p",{children:"No payment data available"})})]})})]}),r.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[r.jsxs("div",{className:"relative flex-1",children:[r.jsx(Jn,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),r.jsx(je,{placeholder:"Search payments...",value:a,onChange:S=>s(S.target.value),className:"pl-10"})]}),r.jsxs($e,{value:i,onValueChange:o,children:[r.jsx(Fe,{className:"w-[150px]",children:r.jsx(Be,{placeholder:"Status"})}),r.jsxs(Me,{children:[r.jsx(K,{value:"all",children:"All Status"}),r.jsx(K,{value:"completed",children:"Completed"}),r.jsx(K,{value:"pending",children:"Pending"}),r.jsx(K,{value:"processing",children:"Processing"}),r.jsx(K,{value:"failed",children:"Failed"}),r.jsx(K,{value:"refunded",children:"Refunded"})]})]}),r.jsxs($e,{value:l,onValueChange:c,children:[r.jsx(Fe,{className:"w-[150px]",children:r.jsx(Be,{placeholder:"Method"})}),r.jsxs(Me,{children:[r.jsx(K,{value:"all",children:"All Methods"}),r.jsx(K,{value:"credit_card",children:"Credit Card"}),r.jsx(K,{value:"bank_transfer",children:"Bank Transfer"}),r.jsx(K,{value:"cash",children:"Cash"}),r.jsx(K,{value:"check",children:"Check"}),r.jsx(K,{value:"financing",children:"Financing"})]})]}),r.jsxs($e,{value:d,onValueChange:f,children:[r.jsx(Fe,{className:"w-[150px]",children:r.jsx(Be,{placeholder:"Date"})}),r.jsxs(Me,{children:[r.jsx(K,{value:"all",children:"All Dates"}),r.jsx(K,{value:"today",children:"Today"}),r.jsx(K,{value:"this_week",children:"This Week"}),r.jsx(K,{value:"this_month",children:"This Month"})]})]}),r.jsxs(J,{variant:"outline",children:[r.jsx(hs,{className:"h-4 w-4 mr-2"}),"More Filters"]})]}),r.jsxs(fe,{className:"shadow-sm",children:[r.jsx(we,{children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx(Ne,{children:"Payment History"}),r.jsx(Ue,{children:"Track and manage customer payments"})]}),r.jsxs("div",{className:"flex space-x-2",children:[r.jsxs(J,{variant:"outline",size:"sm",onClick:p,children:[r.jsx(ms,{className:"h-4 w-4 mr-2"}),"Export"]}),r.jsxs(J,{variant:"outline",size:"sm",children:[r.jsx(hu,{className:"h-4 w-4 mr-2"}),"Print"]})]})]})}),r.jsx(me,{children:r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full border-collapse",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"bg-muted/50",children:[r.jsx("th",{className:"p-3 text-left font-medium text-muted-foreground",children:"Invoice"}),r.jsx("th",{className:"p-3 text-left font-medium text-muted-foreground",children:"Amount"}),r.jsx("th",{className:"p-3 text-left font-medium text-muted-foreground",children:"Method"}),r.jsx("th",{className:"p-3 text-left font-medium text-muted-foreground",children:"Status"}),r.jsx("th",{className:"p-3 text-left font-medium text-muted-foreground",children:"Date"}),r.jsx("th",{className:"p-3 text-left font-medium text-muted-foreground",children:"Transaction ID"}),r.jsx("th",{className:"p-3 text-left font-medium text-muted-foreground",children:"Actions"})]})}),r.jsxs("tbody",{children:[g.map(S=>r.jsxs("tr",{className:"border-b hover:bg-muted/10",children:[r.jsx("td",{className:"p-3",children:r.jsxs("div",{className:"font-medium",children:["#",S.invoiceId.substring(0,8)]})}),r.jsx("td",{className:"p-3 font-medium",children:De(S.amount)}),r.jsx("td",{className:"p-3",children:r.jsxs("div",{className:"flex items-center space-x-1",children:[x(S.method),r.jsx("span",{children:h(S.method)})]})}),r.jsx("td",{className:"p-3",children:r.jsxs(ze,{className:He("flex items-center space-x-1",u(S.status)),children:[m(S.status),r.jsx("span",{children:S.status.charAt(0).toUpperCase()+S.status.slice(1)})]})}),r.jsx("td",{className:"p-3",children:lt(S.processedDate)}),r.jsx("td",{className:"p-3",children:r.jsx("span",{className:"font-mono text-xs",children:S.transactionId?S.transactionId:"-"})}),r.jsx("td",{className:"p-3",children:r.jsx("div",{className:"flex space-x-2",children:r.jsx(J,{variant:"ghost",size:"sm",onClick:()=>t==null?void 0:t(S),children:"View"})})})]},S.id)),g.length===0&&r.jsx("tr",{children:r.jsxs("td",{colSpan:7,className:"p-8 text-center text-muted-foreground",children:[r.jsx(Ga,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),r.jsx("p",{children:"No payments found matching your filters"})]})})]})]})})})]})]})}function dD(){const{invoices:e,payments:t,createInvoice:n,updateInvoice:a,deleteInvoice:s,updateInvoiceStatus:i,sendInvoice:o,sendPaymentRequest:l,recordPayment:c}=k8(),{toast:d}=Ct(),[f,u]=w.useState(""),[m,h]=w.useState("all"),[x,g]=w.useState("invoices"),[p,v]=w.useState(!1),[y,b]=w.useState(!1),[j,C]=w.useState(null),E=k=>{switch(k){case Bt.DRAFT:return"bg-gray-50 text-gray-700 border-gray-200";case Bt.SENT:return"bg-blue-50 text-blue-700 border-blue-200";case Bt.VIEWED:return"bg-yellow-50 text-yellow-700 border-yellow-200";case Bt.PAID:return"bg-green-50 text-green-700 border-green-200";case Bt.OVERDUE:return"bg-red-50 text-red-700 border-red-200";case Bt.CANCELLED:return"bg-gray-50 text-gray-700 border-gray-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},S=e.filter(k=>k.number.toLowerCase().includes(f.toLowerCase())||k.customerId.toLowerCase().includes(f.toLowerCase())).filter(k=>m==="all"||k.status===m),N=()=>{C(null),v(!0)},I=k=>{C(k),v(!0),b(!1)},D=k=>{C(k),b(!0)},T=async k=>{try{j?(await a(j.id,k),d({title:"Success",description:"Invoice updated successfully"})):(await n(k),d({title:"Success",description:"Invoice created successfully"})),v(!1),C(null)}catch{d({title:"Error",description:`Failed to ${j?"update":"create"} invoice`,variant:"destructive"})}},A=async k=>{try{return await l(k),!0}catch(L){throw console.error("Error sending payment request:",L),L}},_=async k=>{try{return await c(k),d({title:"Success",description:"Payment recorded successfully"}),!0}catch(L){throw d({title:"Error",description:"Failed to record payment",variant:"destructive"}),L}};return r.jsxs("div",{className:"space-y-8",children:[p&&r.jsx(Lde,{invoice:j||void 0,onSave:T,onCancel:()=>{v(!1),C(null)}}),y&&j&&r.jsx(Fde,{invoice:j,payments:t.filter(k=>k.invoiceId===j.id),onClose:()=>b(!1),onEdit:I,onSendPaymentRequest:A,onRecordPayment:_}),r.jsx("div",{className:"ri-page-header",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"ri-page-title",children:"Invoice & Payments"}),r.jsx("p",{className:"ri-page-description",children:"Manage invoices and process payments via Zego integration"})]}),r.jsxs(J,{className:"shadow-sm",onClick:N,children:[r.jsx(Nt,{className:"h-4 w-4 mr-2"}),"New Invoice"]})]})}),r.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[r.jsxs(fe,{className:"shadow-sm border-0 bg-gradient-to-br from-blue-50 to-blue-100/50",children:[r.jsxs(we,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(Ne,{className:"text-sm font-medium text-blue-900",children:"Total Invoices"}),r.jsx(Pn,{className:"h-4 w-4 text-blue-600"})]}),r.jsxs(me,{children:[r.jsx("div",{className:"text-2xl font-bold text-blue-900",children:e.length}),r.jsxs("p",{className:"text-xs text-blue-600 flex items-center mt-1",children:[r.jsx(Ot,{className:"h-3 w-3 mr-1"}),"All invoices"]})]})]}),r.jsxs(fe,{className:"shadow-sm border-0 bg-gradient-to-br from-orange-50 to-orange-100/50",children:[r.jsxs(we,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(Ne,{className:"text-sm font-medium text-orange-900",children:"Outstanding"}),r.jsx(Pn,{className:"h-4 w-4 text-orange-600"})]}),r.jsxs(me,{children:[r.jsx("div",{className:"text-2xl font-bold text-orange-900",children:De(e.filter(k=>k.status!==Bt.PAID).reduce((k,L)=>k+L.total,0))}),r.jsxs("p",{className:"text-xs text-orange-600 flex items-center mt-1",children:[r.jsx(Mt,{className:"h-3 w-3 mr-1"}),"Unpaid invoices"]})]})]}),r.jsxs(fe,{className:"shadow-sm border-0 bg-gradient-to-br from-green-50 to-green-100/50",children:[r.jsxs(we,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(Ne,{className:"text-sm font-medium text-green-900",children:"Paid This Month"}),r.jsx(Pn,{className:"h-4 w-4 text-green-600"})]}),r.jsxs(me,{children:[r.jsx("div",{className:"text-2xl font-bold text-green-900",children:De(e.filter(k=>k.status===Bt.PAID).reduce((k,L)=>k+L.total,0))}),r.jsxs("p",{className:"text-xs text-green-600 flex items-center mt-1",children:[r.jsx(Ot,{className:"h-3 w-3 mr-1"}),"Revenue collected"]})]})]}),r.jsxs(fe,{className:"shadow-sm border-0 bg-gradient-to-br from-purple-50 to-purple-100/50",children:[r.jsxs(we,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(Ne,{className:"text-sm font-medium text-purple-900",children:"Payment Success Rate"}),r.jsx(Ga,{className:"h-4 w-4 text-purple-600"})]}),r.jsxs(me,{children:[r.jsx("div",{className:"text-2xl font-bold text-purple-900",children:"98.5%"}),r.jsxs("p",{className:"text-xs text-purple-600 flex items-center mt-1",children:[r.jsx($r,{className:"h-3 w-3 mr-1"}),t.filter(k=>k.status==="completed").length," successful payments"]})]})]})]}),r.jsxs(fe,{className:"shadow-sm border-0 bg-gradient-to-br from-blue-50 to-blue-100/50",children:[r.jsxs(we,{children:[r.jsxs(Ne,{className:"flex items-center space-x-2 text-blue-900",children:[r.jsx(Ga,{className:"h-5 w-5 text-blue-600"}),r.jsx("span",{children:"Zego Payment Integration"})]}),r.jsx(Ue,{className:"text-blue-700",children:"Seamlessly process payments and send payment requests to customers"})]}),r.jsx(me,{children:r.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[r.jsxs("div",{className:"text-center p-4 bg-white/50 rounded-lg",children:[r.jsx("div",{className:"text-2xl font-bold text-blue-600",children:"99.9%"}),r.jsx("p",{className:"text-sm text-blue-700",children:"Uptime"})]}),r.jsxs("div",{className:"text-center p-4 bg-white/50 rounded-lg",children:[r.jsx("div",{className:"text-2xl font-bold text-blue-600",children:"2.9%"}),r.jsx("p",{className:"text-sm text-blue-700",children:"Processing Fee"})]}),r.jsxs("div",{className:"text-center p-4 bg-white/50 rounded-lg",children:[r.jsx("div",{className:"text-2xl font-bold text-blue-600",children:"24/7"}),r.jsx("p",{className:"text-sm text-blue-700",children:"Support"})]})]})})]}),r.jsxs(lr,{value:x,onValueChange:g,className:"space-y-6",children:[r.jsxs(or,{className:"grid w-full grid-cols-2",children:[r.jsxs(Ke,{value:"invoices",className:"flex items-center",children:[r.jsx(Pn,{className:"h-4 w-4 mr-2"}),"Invoices"]}),r.jsxs(Ke,{value:"payments",className:"flex items-center",children:[r.jsx(Ga,{className:"h-4 w-4 mr-2"}),"Payments"]})]}),r.jsxs(Je,{value:"invoices",children:[r.jsxs("div",{className:"flex gap-4",children:[r.jsxs("div",{className:"ri-search-bar",children:[r.jsx(Jn,{className:"ri-search-icon"}),r.jsx(je,{placeholder:"Search invoices...",value:f,onChange:k=>u(k.target.value),className:"ri-search-input shadow-sm"})]}),r.jsxs($e,{value:m,onValueChange:h,children:[r.jsx(Fe,{className:"w-40",children:r.jsx(Be,{placeholder:"Status"})}),r.jsxs(Me,{children:[r.jsx(K,{value:"all",children:"All Status"}),r.jsx(K,{value:Bt.DRAFT,children:"Draft"}),r.jsx(K,{value:Bt.SENT,children:"Sent"}),r.jsx(K,{value:Bt.VIEWED,children:"Viewed"}),r.jsx(K,{value:Bt.PAID,children:"Paid"}),r.jsx(K,{value:Bt.OVERDUE,children:"Overdue"}),r.jsx(K,{value:Bt.CANCELLED,children:"Cancelled"})]})]}),r.jsxs(J,{variant:"outline",className:"shadow-sm",children:[r.jsx(hs,{className:"h-4 w-4 mr-2"}),"Filter"]})]}),r.jsxs(fe,{className:"shadow-sm",children:[r.jsxs(we,{children:[r.jsx(Ne,{className:"text-xl",children:"Invoices"}),r.jsx(Ue,{children:"Manage invoices and track payments"})]}),r.jsx(me,{children:r.jsxs("div",{className:"space-y-4",children:[S.map(k=>r.jsxs("div",{className:"ri-table-row",children:[r.jsx("div",{className:"flex items-center space-x-4 flex-1",children:r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[r.jsx("h3",{className:"font-semibold text-foreground",children:k.number}),r.jsx(ze,{className:He("ri-badge-status",E(k.status)),children:k.status.toUpperCase()})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm text-muted-foreground",children:[r.jsxs("div",{children:[r.jsx("span",{className:"font-medium",children:"Customer:"}),r.jsx("span",{className:"ml-1",children:k.customerId})]}),r.jsxs("div",{children:[r.jsx("span",{className:"font-medium",children:"Total:"}),r.jsx("span",{className:"ml-1 font-bold text-primary",children:De(k.total)})]}),r.jsxs("div",{children:[r.jsx("span",{className:"font-medium",children:"Due Date:"}),r.jsx("span",{className:"ml-1",children:lt(k.dueDate)})]}),k.paidDate&&r.jsxs("div",{children:[r.jsx("span",{className:"font-medium",children:"Paid Date:"}),r.jsx("span",{className:"ml-1",children:lt(k.paidDate)})]})]}),r.jsxs("div",{className:"mt-2 bg-muted/30 p-2 rounded-md",children:[r.jsxs("p",{className:"text-sm text-muted-foreground",children:[k.items.length," item(s) - ",k.notes]}),k.paymentMethod&&r.jsxs("p",{className:"text-sm text-muted-foreground",children:[r.jsx("span",{className:"font-medium",children:"Payment Method:"})," ",k.paymentMethod]})]})]})}),r.jsxs("div",{className:"ri-action-buttons",children:[r.jsxs(J,{variant:"outline",size:"sm",className:"shadow-sm",onClick:()=>D(k),children:[r.jsx(Sl,{className:"h-3 w-3 mr-1"}),"View"]}),r.jsx(J,{variant:"outline",size:"sm",className:"shadow-sm",onClick:()=>I(k),children:"Edit"}),r.jsxs(J,{variant:"outline",size:"sm",className:"shadow-sm",children:[r.jsx(ms,{className:"h-3 w-3 mr-1"}),"PDF"]}),k.status!==Bt.PAID&&r.jsxs(J,{variant:"outline",size:"sm",className:"shadow-sm",onClick:()=>A(k.id),children:[r.jsx(Oo,{className:"h-3 w-3 mr-1"}),"Send Payment Request"]})]})]},k.id)),S.length===0&&r.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[r.jsx(Pn,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),r.jsx("p",{children:"No invoices found"}),r.jsx("p",{className:"text-sm",children:"Create your first invoice to get started"})]})]})})]})]}),r.jsx(Je,{value:"payments",children:r.jsx(Mde,{payments:t,onViewPaymentDetails:k=>{const L=e.find($=>$.id===k.invoiceId);L&&(C(L),b(!0),setTimeout(()=>{const $=document.querySelector('[role="tablist"]');if($){const M=Array.from($.children).find(B=>{var U;return(U=B.textContent)==null?void 0:U.includes("Payments")});M&&M.click()}},100))}})})]})]})}function $de(){return r.jsxs(Ka,{children:[r.jsx(Vt,{path:"/",element:r.jsx(dD,{})}),r.jsx(Vt,{path:"/*",element:r.jsx(dD,{})})]})}function Bde({field:e,onSave:t,onCancel:n,modules:a}){var g;const{toast:s}=Ct(),[i,o]=w.useState(!1),[l,c]=w.useState({name:"",type:ei.TEXT,required:!1,options:[],module:"",section:""}),[d,f]=w.useState("");w.useEffect(()=>{e&&c({...e})},[e]);const u=async p=>{if(p.preventDefault(),!l.name||!l.module||!l.section){s({title:"Validation Error",description:"Please fill in all required fields",variant:"destructive"});return}if((l.type===ei.SELECT||l.type===ei.MULTISELECT)&&(!l.options||l.options.length===0)){s({title:"Validation Error",description:"Please add at least one option for select fields",variant:"destructive"});return}o(!0);try{await t(l),s({title:"Success",description:`Custom field ${e?"updated":"created"} successfully`})}catch{s({title:"Error",description:`Failed to ${e?"update":"create"} custom field`,variant:"destructive"})}finally{o(!1)}},m=()=>{var p;d.trim()&&!((p=l.options)!=null&&p.includes(d.trim()))&&(c(v=>({...v,options:[...v.options||[],d.trim()]})),f(""))},h=p=>{c(v=>{var y;return{...v,options:((y=v.options)==null?void 0:y.filter(b=>b!==p))||[]}})},x=p=>{switch(p){case"crm":return["Lead Information","Contact Details","Preferences","Notes"];case"inventory":return["Vehicle Details","Specifications","Pricing","Features"];case"quotes":return["Quote Details","Terms","Pricing"];case"agreements":return["Agreement Details","Terms","Conditions"];case"service":return["Service Details","Customer Requirements","Technical Notes"];case"delivery":return["Delivery Details","Customer Instructions","Logistics"];case"invoices":return["Invoice Details","Payment Terms","Additional Charges"];default:return["General","Details","Other"]}};return r.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:r.jsxs(fe,{className:"w-full max-w-md",children:[r.jsx(we,{children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx(Ne,{children:e?"Edit Custom Field":"Add Custom Field"}),r.jsx(Ue,{children:e?"Update custom field details":"Create a new custom field"})]}),r.jsx(J,{variant:"ghost",size:"sm",onClick:n,children:r.jsx($t,{className:"h-4 w-4"})})]})}),r.jsx(me,{children:r.jsxs("form",{onSubmit:u,className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"name",children:"Field Name *"}),r.jsx(je,{id:"name",value:l.name,onChange:p=>c(v=>({...v,name:p.target.value})),placeholder:"e.g., Customer Budget"})]}),r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"module",children:"Module *"}),r.jsxs($e,{value:l.module,onValueChange:p=>{c(v=>({...v,module:p,section:""}))},children:[r.jsx(Fe,{children:r.jsx(Be,{placeholder:"Select module"})}),r.jsx(Me,{children:a.map(p=>r.jsx(K,{value:p,children:p.charAt(0).toUpperCase()+p.slice(1)},p))})]})]}),r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"section",children:"Section *"}),r.jsxs($e,{value:l.section,onValueChange:p=>c(v=>({...v,section:p})),disabled:!l.module,children:[r.jsx(Fe,{children:r.jsx(Be,{placeholder:l.module?"Select section":"Select module first"})}),r.jsx(Me,{children:l.module&&x(l.module).map(p=>r.jsx(K,{value:p,children:p},p))})]})]}),r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"type",children:"Field Type *"}),r.jsxs($e,{value:l.type,onValueChange:p=>c(v=>({...v,type:p})),children:[r.jsx(Fe,{children:r.jsx(Be,{})}),r.jsxs(Me,{children:[r.jsx(K,{value:ei.TEXT,children:"Text"}),r.jsx(K,{value:ei.NUMBER,children:"Number"}),r.jsx(K,{value:ei.DATE,children:"Date"}),r.jsx(K,{value:ei.BOOLEAN,children:"Boolean"}),r.jsx(K,{value:ei.SELECT,children:"Select"}),r.jsx(K,{value:ei.MULTISELECT,children:"Multi-select"})]})]})]}),(l.type===ei.SELECT||l.type===ei.MULTISELECT)&&r.jsxs("div",{children:[r.jsx(Z,{children:"Options"}),r.jsxs("div",{className:"flex space-x-2 mb-2",children:[r.jsx(je,{value:d,onChange:p=>f(p.target.value),placeholder:"Add an option",onKeyDown:p=>{p.key==="Enter"&&(p.preventDefault(),m())}}),r.jsx(J,{type:"button",onClick:m,children:r.jsx(Nt,{className:"h-4 w-4"})})]}),r.jsxs("div",{className:"flex flex-wrap gap-2 mt-2",children:[(g=l.options)==null?void 0:g.map((p,v)=>r.jsxs("div",{className:"flex items-center bg-muted/50 px-3 py-1 rounded-md",children:[r.jsx("span",{className:"mr-2",children:p}),r.jsx(J,{type:"button",variant:"ghost",size:"sm",className:"h-5 w-5 p-0",onClick:()=>h(p),children:r.jsx(wn,{className:"h-3 w-3"})})]},v)),(!l.options||l.options.length===0)&&r.jsx("div",{className:"text-sm text-muted-foreground",children:"No options added yet"})]})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(St,{id:"required",checked:l.required,onCheckedChange:p=>c(v=>({...v,required:!!p}))}),r.jsx(Z,{htmlFor:"required",children:"Required field"})]}),r.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[r.jsx(J,{type:"button",variant:"outline",onClick:n,disabled:i,children:"Cancel"}),r.jsx(J,{type:"submit",disabled:i,children:i?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),e?"Updating...":"Creating..."]}):r.jsxs(r.Fragment,{children:[r.jsx(Pr,{className:"h-4 w-4 mr-2"}),e?"Update":"Create"," Field"]})})]})]})})]})})}function zde(){const{tenant:e,updateTenantSettings:t}=vu(),{toast:n}=Ct(),[a,s]=w.useState(!1),[i,o]=w.useState((e==null?void 0:e.branding.primaryColor)||"#3b82f6"),[l,c]=w.useState((e==null?void 0:e.branding.secondaryColor)||"#64748b"),[d,f]=w.useState((e==null?void 0:e.branding.fontFamily)||"Inter"),[u,m]=w.useState((e==null?void 0:e.branding.logo)||""),[h,x]=w.useState((e==null?void 0:e.branding.logo)||""),g=w.useRef(null),p=[{value:"Inter",label:"Inter"},{value:"Roboto",label:"Roboto"},{value:"Open Sans",label:"Open Sans"},{value:"Montserrat",label:"Montserrat"},{value:"Lato",label:"Lato"},{value:"Poppins",label:"Poppins"},{value:"Source Sans Pro",label:"Source Sans Pro"},{value:"Oswald",label:"Oswald"}],v=b=>{var C;const j=(C=b.target.files)==null?void 0:C[0];if(j){const E=URL.createObjectURL(j);x(E),m(E)}},y=async()=>{s(!0);try{await t({branding:{primaryColor:i,secondaryColor:l,fontFamily:d,logo:u}}),n({title:"Branding Updated",description:"Your branding settings have been saved successfully."})}catch{n({title:"Error",description:"Failed to update branding settings.",variant:"destructive"})}finally{s(!1)}};return r.jsxs(fe,{className:"shadow-sm",children:[r.jsxs(we,{children:[r.jsxs(Ne,{className:"flex items-center",children:[r.jsx(fF,{className:"h-5 w-5 mr-2 text-primary"}),"Branding & Appearance"]}),r.jsx(Ue,{children:"Customize your dealership's visual identity"})]}),r.jsxs(me,{className:"space-y-6",children:[r.jsxs("div",{className:"space-y-4",children:[r.jsx(Z,{children:"Company Logo"}),r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsx("div",{className:"border rounded-md p-4 w-40 h-40 flex items-center justify-center bg-muted/30",children:h?r.jsx("img",{src:h,alt:"Company Logo",className:"max-w-full max-h-full object-contain"}):r.jsx(Zf,{className:"h-12 w-12 text-muted-foreground"})}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs(J,{variant:"outline",onClick:()=>{var b;return(b=g.current)==null?void 0:b.click()},children:[r.jsx(BA,{className:"h-4 w-4 mr-2"}),"Upload Logo"]}),r.jsx(je,{type:"file",ref:g,className:"hidden",accept:"image/*",onChange:v}),r.jsxs("p",{className:"text-xs text-muted-foreground",children:["Recommended size: 200x200px. Max file size: 2MB.",r.jsx("br",{}),"Supported formats: PNG, JPG, SVG"]})]})]})]}),r.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"primaryColor",children:"Primary Color"}),r.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[r.jsx(je,{type:"color",id:"primaryColor",value:i,onChange:b=>o(b.target.value),className:"w-16 h-10 shadow-sm"}),r.jsx(je,{value:i,onChange:b=>o(b.target.value),className:"shadow-sm"})]}),r.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Used for buttons, links, and primary actions"})]}),r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"secondaryColor",children:"Secondary Color"}),r.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[r.jsx(je,{type:"color",id:"secondaryColor",value:l,onChange:b=>c(b.target.value),className:"w-16 h-10 shadow-sm"}),r.jsx(je,{value:l,onChange:b=>c(b.target.value),className:"shadow-sm"})]}),r.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Used for secondary elements and accents"})]})]}),r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"fontFamily",children:"Font Family"}),r.jsxs($e,{value:d,onValueChange:f,children:[r.jsx(Fe,{className:"shadow-sm",children:r.jsx(Be,{placeholder:"Select font family"})}),r.jsx(Me,{children:p.map(b=>r.jsx(K,{value:b.value,children:b.label},b.value))})]}),r.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"The primary font used throughout your application"})]}),r.jsxs("div",{className:"border rounded-lg p-6 mt-6",children:[r.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Preview"}),r.jsxs("div",{className:"space-y-4 p-4 rounded-lg border",style:{fontFamily:d},children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx("h4",{className:"font-semibold",children:"Text Preview"}),r.jsx("p",{children:"This is how your text will appear with the selected font."})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("h4",{className:"font-semibold",children:"Color Preview"}),r.jsxs("div",{className:"flex space-x-4",children:[r.jsx("div",{className:"w-20 h-10 rounded-md flex items-center justify-center text-white",style:{backgroundColor:i},children:"Primary"}),r.jsx("div",{className:"w-20 h-10 rounded-md flex items-center justify-center text-white",style:{backgroundColor:l},children:"Secondary"})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("h4",{className:"font-semibold",children:"Button Preview"}),r.jsxs("div",{className:"flex space-x-4",children:[r.jsx("button",{className:"px-4 py-2 rounded-md text-white",style:{backgroundColor:i},children:"Primary Button"}),r.jsx("button",{className:"px-4 py-2 rounded-md border",style:{borderColor:l,color:l},children:"Secondary Button"})]})]})]})]}),r.jsx("div",{className:"flex justify-end",children:r.jsx(J,{onClick:y,disabled:a,children:a?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Saving..."]}):r.jsxs(r.Fragment,{children:[r.jsx(Pr,{className:"h-4 w-4 mr-2"}),"Save Branding"]})})})]})]})}function Ude(){var p,v;const{tenant:e,updateTenantSettings:t}=vu(),{toast:n}=Ct(),[a,s]=w.useState(!1),[i,o]=w.useState("general"),[l,c]=w.useState(((p=e==null?void 0:e.settings)==null?void 0:p.labelOverrides)||{}),[d,f]=w.useState(((v=e==null?void 0:e.settings)==null?void 0:v.platformType)||"both"),u={general:{vehicle:"Home/RV",customer:"Customer",deal:"Deal",quote:"Quote",service:"Service",inventory:"Inventory"},crm:{lead:"Lead",prospect:"Prospect",contact:"Contact",activity:"Activity",source:"Source"},inventory:{vin:"VIN",make:"Make",model:"Model",year:"Year",type:"Type",price:"Price",cost:"Cost",features:"Features"},sales:{salesperson:"Sales Rep",commission:"Commission",deal_stage:"Deal Stage",close_date:"Close Date",financing:"Financing"},service:{technician:"Technician",service_ticket:"Service Ticket",parts:"Parts",labor:"Labor",warranty:"Warranty"}},m=(y,b,j)=>{c({...l,[`${y}.${b}`]:j})},h=(y,b)=>l[`${y}.${b}`]||"",x=y=>{const b={...l};Object.keys(b).forEach(j=>{j.startsWith(`${y}.`)&&delete b[j]}),c(b),n({title:"Labels Reset",description:`Default labels restored for ${y} module.`})},g=async()=>{s(!0);try{await t({labelOverrides:l,platformType:d}),n({title:"Labels Updated",description:"Your label overrides have been saved successfully."})}catch{n({title:"Error",description:"Failed to update label overrides.",variant:"destructive"})}finally{s(!1)}};return r.jsxs(fe,{className:"shadow-sm",children:[r.jsxs(we,{children:[r.jsxs(Ne,{className:"flex items-center",children:[r.jsx($A,{className:"h-5 w-5 mr-2 text-primary"}),"Label Overrides"]}),r.jsx(Ue,{children:"Customize terminology throughout the platform"})]}),r.jsxs(me,{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"platformType",children:"Platform Type"}),r.jsxs($e,{value:d,onValueChange:f,children:[r.jsx(Fe,{className:"shadow-sm",children:r.jsx(Be,{placeholder:"Select platform type"})}),r.jsxs(Me,{children:[r.jsx(K,{value:"rv",children:"RV Dealership"}),r.jsx(K,{value:"mh",children:"Manufactured Housing"}),r.jsx(K,{value:"both",children:"Both RV & Manufactured Housing"})]})]}),r.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"This setting affects terminology and features throughout the platform"})]}),r.jsxs(lr,{value:i,onValueChange:o,className:"space-y-4",children:[r.jsxs(or,{className:"grid grid-cols-5",children:[r.jsx(Ke,{value:"general",children:"General"}),r.jsx(Ke,{value:"crm",children:"CRM"}),r.jsx(Ke,{value:"inventory",children:"Inventory"}),r.jsx(Ke,{value:"sales",children:"Sales"}),r.jsx(Ke,{value:"service",children:"Service"})]}),Object.entries(u).map(([y,b])=>r.jsxs(Je,{value:y,className:"space-y-4",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("h3",{className:"text-lg font-semibold capitalize",children:[y," Labels"]}),r.jsxs(J,{variant:"outline",size:"sm",onClick:()=>x(y),children:[r.jsx(f5,{className:"h-3 w-3 mr-2"}),"Reset to Defaults"]})]}),r.jsx("div",{className:"grid gap-4 md:grid-cols-2",children:Object.entries(b).map(([j,C])=>{let E=C;return j==="vehicle"&&(d==="rv"?E="RV":d==="mh"?E="Home":E="Home/RV"),r.jsxs("div",{className:"space-y-2",children:[r.jsx(Z,{htmlFor:`${y}-${j}`,className:"capitalize",children:j.replace(/_/g," ")}),r.jsx("div",{className:"flex space-x-2",children:r.jsx(je,{id:`${y}-${j}`,value:h(y,j),onChange:S=>m(y,j,S.target.value),placeholder:E,className:"shadow-sm"})}),r.jsxs("p",{className:"text-xs text-muted-foreground",children:["Default: ",r.jsx("span",{className:"font-medium",children:E})]})]},j)})})]},y))]}),r.jsxs("div",{className:"border rounded-lg p-6 mt-6",children:[r.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Preview"}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("p",{className:"text-sm",children:"Here's how your customized labels will appear in the application:"}),r.jsx("div",{className:"grid gap-4 md:grid-cols-2",children:Object.entries(u.general).map(([y,b])=>{const j=h("general",y);let E=j||b;return y==="vehicle"&&!j&&(d==="rv"?E="RV":d==="mh"?E="Home":E="Home/RV"),r.jsxs("div",{className:"p-2 bg-muted/30 rounded-md",children:[r.jsxs("span",{className:"font-medium capitalize",children:[y.replace(/_/g," "),":"]})," ",r.jsx("span",{children:E})]},y)})})]})]}),r.jsx("div",{className:"flex justify-end",children:r.jsx(J,{onClick:g,disabled:a,children:a?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Saving..."]}):r.jsxs(r.Fragment,{children:[r.jsx(Pr,{className:"h-4 w-4 mr-2"}),"Save Labels"]})})})]})]})}function Vde(){var le,ne;const{tenant:e,updateTenantSettings:t}=vu(),{toast:n}=Ct(),[a,s]=w.useState(!1),[i,o]=w.useState("email"),[l,c]=w.useState(((le=e==null?void 0:e.settings)==null?void 0:le.emailTemplates)||[]),[d,f]=w.useState(null),[u,m]=w.useState(""),[h,x]=w.useState(""),[g,p]=w.useState(""),[v,y]=w.useState("welcome"),[b,j]=w.useState(((ne=e==null?void 0:e.settings)==null?void 0:ne.smsTemplates)||[]),[C,E]=w.useState(null),[S,N]=w.useState(""),[I,D]=w.useState(""),[T,A]=w.useState("welcome"),[_,k]=w.useState(!1),[L,$]=w.useState("email"),[M,B]=w.useState(null),U=[{value:"welcome",label:"Welcome Email"},{value:"quote",label:"Quote Email"},{value:"service",label:"Service Notification"},{value:"delivery",label:"Delivery Notification"},{value:"invoice",label:"Invoice Email"},{value:"password_reset",label:"Password Reset"},{value:"custom",label:"Custom Email"}],W=[{value:"welcome",label:"Welcome SMS"},{value:"quote",label:"Quote SMS"},{value:"service",label:"Service Notification"},{value:"delivery",label:"Delivery Notification"},{value:"appointment",label:"Appointment Reminder"},{value:"custom",label:"Custom SMS"}],q=["{{first_name}}","{{last_name}}","{{company_name}}","{{quote_number}}","{{invoice_number}}","{{service_ticket}}","{{delivery_date}}","{{appointment_date}}","{{appointment_time}}","{{login_url}}","{{reset_url}}"],R=()=>{f(null),m(""),x(""),p(""),y("welcome")},V=()=>{E(null),N(""),D(""),A("welcome")},G=Ae=>{f(Ae),m(Ae.name),x(Ae.subject),p(Ae.body),y(Ae.type)},ee=Ae=>{E(Ae),N(Ae.name),D(Ae.message),A(Ae.type)},re=()=>{if(!u||!h||!g){n({title:"Validation Error",description:"Please fill in all required fields",variant:"destructive"});return}const Ae=/\{\{([^}]+)\}\}/g,Se=[];let be;for(;(be=Ae.exec(h+g))!==null;)Se.includes(be[1])||Se.push(be[1]);c(d?l.map(Re=>Re.id===d.id?{...Re,name:u,subject:h,body:g,type:v,variables:Se}:Re):[...l,{id:Math.random().toString(36).substring(2,9),name:u,subject:h,body:g,type:v,variables:Se,isActive:!0}]),R()},de=()=>{if(!S||!I){n({title:"Validation Error",description:"Please fill in all required fields",variant:"destructive"});return}const Ae=/\{\{([^}]+)\}\}/g,Se=[];let be;for(;(be=Ae.exec(I))!==null;)Se.includes(be[1])||Se.push(be[1]);j(C?b.map(Re=>Re.id===C.id?{...Re,name:S,message:I,type:T,variables:Se}:Re):[...b,{id:Math.random().toString(36).substring(2,9),name:S,message:I,type:T,variables:Se,isActive:!0}]),V()},ue=Ae=>{c(l.filter(Se=>Se.id!==Ae))},oe=Ae=>{j(b.filter(Se=>Se.id!==Ae))},ge=Ae=>{c(l.map(Se=>Se.id===Ae?{...Se,isActive:!Se.isActive}:Se))},ve=Ae=>{j(b.map(Se=>Se.id===Ae?{...Se,isActive:!Se.isActive}:Se))},xe=(Ae,Se)=>{$(Ae),B(Se),k(!0)},Oe=Ae=>{i==="email"?p(g+Ae):D(I+Ae)},ye=async()=>{s(!0);try{await t({emailTemplates:l,smsTemplates:b}),n({title:"Templates Updated",description:"Your notification templates have been saved successfully."})}catch{n({title:"Error",description:"Failed to update notification templates.",variant:"destructive"})}finally{s(!1)}};return r.jsxs(r.Fragment,{children:[_&&M&&r.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:r.jsxs(fe,{className:"w-full max-w-2xl",children:[r.jsx(we,{children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx(Ne,{children:"Template Preview"}),r.jsx(Ue,{children:M.name})]}),r.jsx(J,{variant:"ghost",size:"sm",onClick:()=>k(!1),children:r.jsx(X,{className:"h-4 w-4"})})]})}),r.jsxs(me,{className:"space-y-4",children:[L==="email"&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{children:[r.jsx(Z,{children:"Subject"}),r.jsx("div",{className:"p-3 bg-muted/30 rounded-md mt-1",children:M.subject})]}),r.jsxs("div",{children:[r.jsx(Z,{children:"Body"}),r.jsx("div",{className:"p-3 bg-muted/30 rounded-md mt-1 whitespace-pre-wrap",children:M.body})]})]}),L==="sms"&&r.jsxs("div",{children:[r.jsx(Z,{children:"Message"}),r.jsx("div",{className:"p-3 bg-muted/30 rounded-md mt-1",children:M.message})]}),r.jsxs("div",{children:[r.jsx(Z,{children:"Variables"}),r.jsxs("div",{className:"flex flex-wrap gap-2 mt-1",children:[M.variables.map((Ae,Se)=>r.jsx(ze,{variant:"secondary",children:`{{${Ae}}}`},Se)),M.variables.length===0&&r.jsx("div",{className:"text-sm text-muted-foreground",children:"No variables used"})]})]}),r.jsx("div",{className:"flex justify-end",children:r.jsx(J,{onClick:()=>k(!1),children:"Close Preview"})})]})]})}),r.jsxs(fe,{className:"shadow-sm",children:[r.jsxs(we,{children:[r.jsxs(Ne,{className:"flex items-center",children:[r.jsx(en,{className:"h-5 w-5 mr-2 text-primary"}),"Notification Templates"]}),r.jsx(Ue,{children:"Customize email and SMS notification templates"})]}),r.jsxs(me,{className:"space-y-6",children:[r.jsxs(lr,{value:i,onValueChange:o,className:"space-y-4",children:[r.jsxs(or,{className:"grid w-full grid-cols-2",children:[r.jsx(Ke,{value:"email",children:"Email Templates"}),r.jsx(Ke,{value:"sms",children:"SMS Templates"})]}),r.jsx(Je,{value:"email",className:"space-y-6",children:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h3",{className:"text-lg font-semibold",children:"Email Templates"}),r.jsxs(J,{variant:"outline",size:"sm",onClick:R,disabled:!d,children:[r.jsx(Nt,{className:"h-4 w-4 mr-2"}),"New Template"]})]}),r.jsx(fe,{className:"border-dashed",children:r.jsxs(me,{className:"pt-6 space-y-4",children:[r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"emailName",children:"Template Name *"}),r.jsx(je,{id:"emailName",value:u,onChange:Ae=>m(Ae.target.value),placeholder:"e.g., Welcome Email",className:"shadow-sm"})]}),r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"emailType",children:"Template Type"}),r.jsxs($e,{value:v,onValueChange:y,children:[r.jsx(Fe,{className:"shadow-sm",children:r.jsx(Be,{placeholder:"Select template type"})}),r.jsx(Me,{children:U.map(Ae=>r.jsx(K,{value:Ae.value,children:Ae.label},Ae.value))})]})]}),r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"emailSubject",children:"Subject Line *"}),r.jsx(je,{id:"emailSubject",value:h,onChange:Ae=>x(Ae.target.value),placeholder:"e.g., Welcome to {{company_name}}!",className:"shadow-sm"})]}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx(Z,{htmlFor:"emailBody",children:"Email Body *"}),r.jsxs($e,{value:"",onValueChange:Ae=>Oe(Ae),children:[r.jsx(Fe,{className:"w-[200px] shadow-sm",children:r.jsx(Be,{placeholder:"Insert variable"})}),r.jsx(Me,{children:q.map(Ae=>r.jsx(K,{value:Ae,children:Ae},Ae))})]})]}),r.jsx(Xt,{id:"emailBody",value:g,onChange:Ae=>p(Ae.target.value),placeholder:"Enter your email content here...",className:"shadow-sm",rows:10})]}),r.jsxs("div",{className:"flex justify-end space-x-2",children:[r.jsx(J,{type:"button",variant:"outline",onClick:R,children:"Cancel"}),r.jsx(J,{type:"button",onClick:re,children:d?"Update Template":"Add Template"})]})]})}),r.jsxs("div",{className:"space-y-3 mt-6",children:[r.jsx("h3",{className:"text-lg font-semibold",children:"Saved Templates"}),l.length>0?l.map(Ae=>{var Se;return r.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("h4",{className:"font-medium",children:Ae.name}),r.jsx(ze,{variant:"outline",children:((Se=U.find(be=>be.value===Ae.type))==null?void 0:Se.label)||Ae.type}),!Ae.isActive&&r.jsx(ze,{variant:"secondary",children:"Inactive"})]}),r.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:["Subject: ",Ae.subject]})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(J,{variant:"ghost",size:"sm",onClick:()=>ge(Ae.id),children:Ae.isActive?"Disable":"Enable"}),r.jsx(J,{variant:"ghost",size:"sm",onClick:()=>xe("email",Ae),children:r.jsx(Sl,{className:"h-4 w-4"})}),r.jsx(J,{variant:"ghost",size:"sm",onClick:()=>G(Ae),children:"Edit"}),r.jsx(J,{variant:"ghost",size:"sm",onClick:()=>ue(Ae.id),children:r.jsx(wn,{className:"h-4 w-4 text-red-500"})})]})]},Ae.id)}):r.jsxs("div",{className:"text-center py-6 text-muted-foreground border-2 border-dashed rounded-lg",children:[r.jsx(en,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),r.jsx("p",{children:"No email templates created yet"}),r.jsx("p",{className:"text-sm",children:"Create your first template to get started"})]})]})]})}),r.jsx(Je,{value:"sms",className:"space-y-6",children:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h3",{className:"text-lg font-semibold",children:"SMS Templates"}),r.jsxs(J,{variant:"outline",size:"sm",onClick:V,disabled:!C,children:[r.jsx(Nt,{className:"h-4 w-4 mr-2"}),"New Template"]})]}),r.jsx(fe,{className:"border-dashed",children:r.jsxs(me,{className:"pt-6 space-y-4",children:[r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"smsName",children:"Template Name *"}),r.jsx(je,{id:"smsName",value:S,onChange:Ae=>N(Ae.target.value),placeholder:"e.g., Appointment Reminder",className:"shadow-sm"})]}),r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"smsType",children:"Template Type"}),r.jsxs($e,{value:T,onValueChange:A,children:[r.jsx(Fe,{className:"shadow-sm",children:r.jsx(Be,{placeholder:"Select template type"})}),r.jsx(Me,{children:W.map(Ae=>r.jsx(K,{value:Ae.value,children:Ae.label},Ae.value))})]})]}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx(Z,{htmlFor:"smsMessage",children:"Message *"}),r.jsxs($e,{value:"",onValueChange:Ae=>Oe(Ae),children:[r.jsx(Fe,{className:"w-[200px] shadow-sm",children:r.jsx(Be,{placeholder:"Insert variable"})}),r.jsx(Me,{children:q.map(Ae=>r.jsx(K,{value:Ae,children:Ae},Ae))})]})]}),r.jsx(Xt,{id:"smsMessage",value:I,onChange:Ae=>D(Ae.target.value),placeholder:"Enter your SMS message here...",className:"shadow-sm",rows:4}),r.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground mt-1",children:[r.jsxs("span",{children:[I.length," characters"]}),r.jsxs("span",{children:[160-I.length," remaining"]})]})]}),r.jsxs("div",{className:"flex justify-end space-x-2",children:[r.jsx(J,{type:"button",variant:"outline",onClick:V,children:"Cancel"}),r.jsx(J,{type:"button",onClick:de,children:C?"Update Template":"Add Template"})]})]})}),r.jsxs("div",{className:"space-y-3 mt-6",children:[r.jsx("h3",{className:"text-lg font-semibold",children:"Saved Templates"}),b.length>0?b.map(Ae=>{var Se;return r.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("h4",{className:"font-medium",children:Ae.name}),r.jsx(ze,{variant:"outline",children:((Se=W.find(be=>be.value===Ae.type))==null?void 0:Se.label)||Ae.type}),!Ae.isActive&&r.jsx(ze,{variant:"secondary",children:"Inactive"})]}),r.jsx("p",{className:"text-sm text-muted-foreground mt-1 truncate",children:Ae.message})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(J,{variant:"ghost",size:"sm",onClick:()=>ve(Ae.id),children:Ae.isActive?"Disable":"Enable"}),r.jsx(J,{variant:"ghost",size:"sm",onClick:()=>xe("sms",Ae),children:r.jsx(Sl,{className:"h-4 w-4"})}),r.jsx(J,{variant:"ghost",size:"sm",onClick:()=>ee(Ae),children:"Edit"}),r.jsx(J,{variant:"ghost",size:"sm",onClick:()=>oe(Ae.id),children:r.jsx(wn,{className:"h-4 w-4 text-red-500"})})]})]},Ae.id)}):r.jsxs("div",{className:"text-center py-6 text-muted-foreground border-2 border-dashed rounded-lg",children:[r.jsx(nn,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),r.jsx("p",{children:"No SMS templates created yet"}),r.jsx("p",{className:"text-sm",children:"Create your first template to get started"})]})]})]})})]}),r.jsx("div",{className:"flex justify-end",children:r.jsx(J,{onClick:ye,disabled:a,children:a?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Saving..."]}):r.jsxs(r.Fragment,{children:[r.jsx(Pr,{className:"h-4 w-4 mr-2"}),"Save Templates"]})})})]})]})]})}function qde(){var de,ue,oe,ge,ve,xe,Oe,ye,le,ne,Ae;const{tenant:e,updateTenantSettings:t}=vu(),{toast:n}=Ct(),[a,s]=w.useState(!1),[i,o]=w.useState(((de=e==null?void 0:e.settings)==null?void 0:de.emailProvider)||"default"),[l,c]=w.useState(((ue=e==null?void 0:e.settings)==null?void 0:ue.emailApiKey)||""),[d,f]=w.useState(((oe=e==null?void 0:e.settings)==null?void 0:oe.emailFromAddress)||""),[u,m]=w.useState(((ge=e==null?void 0:e.settings)==null?void 0:ge.emailFromName)||""),[h,x]=w.useState(((ve=e==null?void 0:e.settings)==null?void 0:ve.smsProvider)||"default"),[g,p]=w.useState(((xe=e==null?void 0:e.settings)==null?void 0:xe.smsApiKey)||""),[v,y]=w.useState(((Oe=e==null?void 0:e.settings)==null?void 0:Oe.smsFromNumber)||""),[b,j]=w.useState(((ye=e==null?void 0:e.settings)==null?void 0:ye.webhooks)||[]),[C,E]=w.useState(""),[S,N]=w.useState(""),[I,D]=w.useState(((le=e==null?void 0:e.settings)==null?void 0:le.apiEnabled)||!1),[T,A]=w.useState(((ne=e==null?void 0:e.settings)==null?void 0:ne.apiKey)||""),[_,k]=w.useState(((Ae=e==null?void 0:e.settings)==null?void 0:Ae.allowedOrigins)||[]),[L,$]=w.useState(""),M=[{value:"default",label:"Default (Platform)"},{value:"sendgrid",label:"SendGrid"},{value:"mailchimp",label:"Mailchimp"},{value:"mailgun",label:"Mailgun"},{value:"smtp",label:"Custom SMTP"}],B=[{value:"default",label:"Default (Platform)"},{value:"twilio",label:"Twilio"},{value:"messagebird",label:"MessageBird"},{value:"vonage",label:"Vonage (Nexmo)"}],U=[{value:"lead.created",label:"Lead Created"},{value:"lead.updated",label:"Lead Updated"},{value:"quote.created",label:"Quote Created"},{value:"quote.accepted",label:"Quote Accepted"},{value:"service.created",label:"Service Ticket Created"},{value:"service.completed",label:"Service Completed"},{value:"vehicle.created",label:"Home/RV Created"},{value:"vehicle.sold",label:"Home/RV Sold"}],W=()=>{!C||!S||(j([...b,{id:Math.random().toString(36).substring(2,9),event:C,url:S,active:!0}]),E(""),N(""))},q=Se=>{j(b.filter(be=>be.id!==Se))},R=Se=>{j(b.map(be=>be.id===Se?{...be,active:!be.active}:be))},V=()=>{L&&(k([..._,L]),$(""))},G=Se=>{k(_.filter(be=>be!==Se))},ee=()=>{const Se=Array.from(crypto.getRandomValues(new Uint8Array(32))).map(be=>be.toString(16).padStart(2,"0")).join("");A(Se)},re=async()=>{s(!0);try{await t({emailProvider:i,emailApiKey:l,emailFromAddress:d,emailFromName:u,smsProvider:h,smsApiKey:g,smsFromNumber:v,webhooks:b,apiEnabled:I,apiKey:T,allowedOrigins:_}),n({title:"Integrations Updated",description:"Your integration settings have been saved successfully."})}catch{n({title:"Error",description:"Failed to update integration settings.",variant:"destructive"})}finally{s(!1)}};return r.jsxs("div",{className:"space-y-6",children:[r.jsxs(fe,{className:"shadow-sm",children:[r.jsxs(we,{children:[r.jsxs(Ne,{className:"flex items-center",children:[r.jsx(en,{className:"h-5 w-5 mr-2 text-primary"}),"Email Provider"]}),r.jsx(Ue,{children:"Configure your email delivery service"})]}),r.jsxs(me,{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"emailProvider",children:"Provider"}),r.jsxs($e,{value:i,onValueChange:o,children:[r.jsx(Fe,{className:"shadow-sm",children:r.jsx(Be,{placeholder:"Select email provider"})}),r.jsx(Me,{children:M.map(Se=>r.jsx(K,{value:Se.value,children:Se.label},Se.value))})]})]}),i!=="default"&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"emailApiKey",children:"API Key"}),r.jsx(je,{id:"emailApiKey",type:"password",value:l,onChange:Se=>c(Se.target.value),className:"shadow-sm",placeholder:"Enter API key"})]}),r.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"emailFromAddress",children:"From Email Address"}),r.jsx(je,{id:"emailFromAddress",type:"email",value:d,onChange:Se=>f(Se.target.value),className:"shadow-sm",placeholder:"noreply@yourdomain.com"})]}),r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"emailFromName",children:"From Name"}),r.jsx(je,{id:"emailFromName",value:u,onChange:Se=>m(Se.target.value),className:"shadow-sm",placeholder:"Your Company Name"})]})]})]}),i==="default"&&r.jsx("div",{className:"bg-blue-50 p-4 rounded-md",children:r.jsx("p",{className:"text-sm text-blue-700",children:"Using the default platform email provider. No additional configuration needed."})})]})]}),r.jsxs(fe,{className:"shadow-sm",children:[r.jsxs(we,{children:[r.jsxs(Ne,{className:"flex items-center",children:[r.jsx(nn,{className:"h-5 w-5 mr-2 text-primary"}),"SMS Provider"]}),r.jsx(Ue,{children:"Configure your SMS delivery service"})]}),r.jsxs(me,{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"smsProvider",children:"Provider"}),r.jsxs($e,{value:h,onValueChange:x,children:[r.jsx(Fe,{className:"shadow-sm",children:r.jsx(Be,{placeholder:"Select SMS provider"})}),r.jsx(Me,{children:B.map(Se=>r.jsx(K,{value:Se.value,children:Se.label},Se.value))})]})]}),h!=="default"&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"smsApiKey",children:"API Key"}),r.jsx(je,{id:"smsApiKey",type:"password",value:g,onChange:Se=>p(Se.target.value),className:"shadow-sm",placeholder:"Enter API key"})]}),r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"smsFromNumber",children:"From Number"}),r.jsx(je,{id:"smsFromNumber",value:v,onChange:Se=>y(Se.target.value),className:"shadow-sm",placeholder:"+1234567890"}),r.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Must be in E.164 format (e.g., +1234567890)"})]})]}),h==="default"&&r.jsx("div",{className:"bg-blue-50 p-4 rounded-md",children:r.jsx("p",{className:"text-sm text-blue-700",children:"Using the default platform SMS provider. No additional configuration needed."})})]})]}),r.jsxs(fe,{className:"shadow-sm",children:[r.jsxs(we,{children:[r.jsxs(Ne,{className:"flex items-center",children:[r.jsx(VP,{className:"h-5 w-5 mr-2 text-primary"}),"Webhooks"]}),r.jsx(Ue,{children:"Configure webhooks to receive event notifications"})]}),r.jsxs(me,{className:"space-y-4",children:[r.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"webhookEvent",children:"Event"}),r.jsxs($e,{value:C,onValueChange:E,children:[r.jsx(Fe,{className:"shadow-sm",children:r.jsx(Be,{placeholder:"Select event"})}),r.jsx(Me,{children:U.map(Se=>r.jsx(K,{value:Se.value,children:Se.label},Se.value))})]})]}),r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"webhookUrl",children:"Webhook URL"}),r.jsxs("div",{className:"flex space-x-2",children:[r.jsx(je,{id:"webhookUrl",value:S,onChange:Se=>N(Se.target.value),className:"shadow-sm flex-1",placeholder:"https://your-endpoint.com/webhook"}),r.jsx(J,{type:"button",onClick:W,children:r.jsx(Nt,{className:"h-4 w-4"})})]})]})]}),r.jsx("div",{className:"space-y-3 mt-4",children:b.length>0?b.map(Se=>{var be;return r.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(St,{checked:Se.active,onCheckedChange:()=>R(Se.id)}),r.jsxs("div",{children:[r.jsx("div",{className:"font-medium",children:((be=U.find(Re=>Re.value===Se.event))==null?void 0:be.label)||Se.event}),r.jsx("div",{className:"text-sm text-muted-foreground",children:Se.url})]})]}),r.jsx(J,{variant:"ghost",size:"sm",onClick:()=>q(Se.id),children:r.jsx(wn,{className:"h-4 w-4 text-red-500"})})]},Se.id)}):r.jsxs("div",{className:"text-center py-6 text-muted-foreground border-2 border-dashed rounded-lg",children:[r.jsx(VP,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),r.jsx("p",{children:"No webhooks configured"}),r.jsx("p",{className:"text-sm",children:"Add webhooks to receive event notifications"})]})})]})]}),r.jsxs(fe,{className:"shadow-sm",children:[r.jsxs(we,{children:[r.jsxs(Ne,{className:"flex items-center",children:[r.jsx(ax,{className:"h-5 w-5 mr-2 text-primary"}),"API Access"]}),r.jsx(Ue,{children:"Configure API access for external integrations"})]}),r.jsxs(me,{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(St,{id:"apiEnabled",checked:I,onCheckedChange:Se=>D(!!Se)}),r.jsx(Z,{htmlFor:"apiEnabled",children:"Enable API access"})]}),I&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"apiKey",children:"API Key"}),r.jsxs("div",{className:"flex space-x-2",children:[r.jsx(je,{id:"apiKey",type:"password",value:T,onChange:Se=>A(Se.target.value),className:"shadow-sm flex-1",placeholder:"API key will appear here",readOnly:!0}),r.jsx(J,{type:"button",onClick:ee,children:"Generate"})]}),r.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Keep this key secure. It provides full access to your account."})]}),r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"allowedOrigins",children:"Allowed Origins (CORS)"}),r.jsxs("div",{className:"flex space-x-2",children:[r.jsx(je,{id:"allowedOrigins",value:L,onChange:Se=>$(Se.target.value),className:"shadow-sm flex-1",placeholder:"https://your-domain.com"}),r.jsx(J,{type:"button",onClick:V,children:r.jsx(Nt,{className:"h-4 w-4"})})]}),r.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Domains that are allowed to make API requests"})]}),r.jsxs("div",{className:"flex flex-wrap gap-2 mt-2",children:[_.map((Se,be)=>r.jsxs("div",{className:"flex items-center bg-muted/50 px-3 py-1 rounded-md",children:[r.jsx("span",{className:"mr-2",children:Se}),r.jsx(J,{type:"button",variant:"ghost",size:"sm",className:"h-5 w-5 p-0",onClick:()=>G(Se),children:r.jsx(wn,{className:"h-3 w-3"})})]},be)),_.length===0&&r.jsx("div",{className:"text-sm text-muted-foreground",children:"No origins added yet"})]})]})]})]}),r.jsx("div",{className:"flex justify-end",children:r.jsx(J,{onClick:re,disabled:a,children:a?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Saving..."]}):r.jsxs(r.Fragment,{children:[r.jsx(Pr,{className:"h-4 w-4 mr-2"}),"Save Integrations"]})})})]})}function uD(){const{tenant:e,customFields:t,updateTenantSettings:n,addCustomField:a,updateCustomField:s,deleteCustomField:i}=vu(),{toast:o}=Ct(),[l,c]=w.useState("general"),[d,f]=w.useState(!1),u=[{id:"general",name:"General",icon:my},{id:"branding",name:"Branding",icon:fF},{id:"labels",name:"Labels",icon:$A},{id:"notifications",name:"Notifications",icon:en},{id:"integrations",name:"Integrations",icon:ax},{id:"users",name:"Users",icon:$n},{id:"custom-fields",name:"Custom Fields",icon:sx}],m=["crm","inventory","quotes","agreements","service","delivery","invoices"],h=()=>{setSelectedCustomField(null),f(!0)},x=N=>{setSelectedCustomField(N),f(!0)},g=async N=>{if(window.confirm("Are you sure you want to delete this custom field?"))try{await i(N),o({title:"Success",description:"Custom field deleted successfully"})}catch{o({title:"Error",description:"Failed to delete custom field",variant:"destructive"})}},p=async N=>{try{return selectedCustomField?await s(selectedCustomField.id,N):await a(N),f(!1),!0}catch{return!1}},v=()=>r.jsxs("div",{className:"space-y-6",children:[r.jsxs(fe,{className:"shadow-sm",children:[r.jsxs(we,{children:[r.jsx(Ne,{className:"text-xl",children:"Company Information"}),r.jsx(Ue,{children:"Basic information about your dealership"})]}),r.jsx(me,{className:"space-y-4",children:r.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-foreground",children:"Company Name"}),r.jsx(je,{defaultValue:e==null?void 0:e.name,className:"mt-1 shadow-sm"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-foreground",children:"Domain"}),r.jsx(je,{defaultValue:e==null?void 0:e.domain,className:"mt-1 shadow-sm"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-foreground",children:"Timezone"}),r.jsx(je,{defaultValue:e==null?void 0:e.settings.timezone,className:"mt-1 shadow-sm"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-foreground",children:"Currency"}),r.jsx(je,{defaultValue:e==null?void 0:e.settings.currency,className:"mt-1 shadow-sm"})]})]})})]}),r.jsxs(fe,{className:"shadow-sm",children:[r.jsxs(we,{children:[r.jsx(Ne,{className:"text-xl",children:"Business Hours"}),r.jsx(Ue,{children:"Set your dealership operating hours"})]}),r.jsx(me,{children:r.jsx("div",{className:"space-y-4",children:(e==null?void 0:e.settings.businessHours)&&Object.entries(e.settings.businessHours).map(([N,I])=>r.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted/30 rounded-lg",children:[r.jsx("div",{className:"w-24 capitalize font-medium",children:N}),r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(je,{type:"time",defaultValue:I.open,disabled:I.closed,className:"w-32 shadow-sm"}),r.jsx("span",{className:"text-muted-foreground",children:"to"}),r.jsx(je,{type:"time",defaultValue:I.close,disabled:I.closed,className:"w-32 shadow-sm"}),r.jsxs("label",{className:"flex items-center space-x-2",children:[r.jsx("input",{type:"checkbox",defaultChecked:I.closed,className:"rounded"}),r.jsx("span",{className:"text-sm",children:"Closed"})]})]})]},N))})})]})]}),y=()=>r.jsx(zde,{}),b=()=>r.jsx(Ude,{}),j=()=>r.jsx(Vde,{}),C=()=>r.jsx(qde,{}),E=()=>r.jsxs(fe,{className:"shadow-sm",children:[r.jsxs(we,{children:[r.jsx(Ne,{className:"text-xl",children:"User Management"}),r.jsx(Ue,{children:"Manage user accounts and permissions"})]}),r.jsxs(me,{children:[r.jsxs("div",{className:"flex justify-between items-center mb-6",children:[r.jsx("p",{className:"text-sm text-muted-foreground",children:"Manage users, roles, and permissions for your dealership"}),r.jsxs(J,{className:"shadow-sm",children:[r.jsx(Nt,{className:"h-4 w-4 mr-2"}),"Add User"]})]}),r.jsx("div",{className:"space-y-4",children:r.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-accent/50 transition-colors",children:[r.jsxs("div",{children:[r.jsx("h4",{className:"font-semibold",children:"Admin User"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"admin@renterinsight.com"})]}),r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(ze,{className:"bg-blue-50 text-blue-700 border-blue-200",children:"Admin"}),r.jsx(J,{variant:"outline",size:"sm",className:"shadow-sm",children:r.jsx(Br,{className:"h-3 w-3"})})]})]})})]})]}),S=()=>r.jsxs(fe,{className:"shadow-sm",children:[r.jsx(we,{children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx(Ne,{className:"text-xl",children:"Custom Fields"}),r.jsx(Ue,{children:"Add custom fields to capture additional information"})]}),r.jsxs(J,{className:"shadow-sm",onClick:h,children:[r.jsx(Nt,{className:"h-4 w-4 mr-2"}),"Add Custom Field"]})]})}),r.jsx(me,{children:r.jsxs("div",{className:"space-y-4",children:[t.map(N=>r.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-accent/50 transition-colors",children:[r.jsxs("div",{children:[r.jsx("h4",{className:"font-semibold",children:N.name}),r.jsxs("p",{className:"text-sm text-muted-foreground",children:[N.module," - ",N.section," - ",N.type,N.required&&r.jsx(ze,{className:"ml-2 bg-orange-50 text-orange-700 border-orange-200",variant:"secondary",children:"Required"})]})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(J,{variant:"outline",size:"sm",className:"shadow-sm",onClick:()=>x(N),children:"Edit"}),r.jsx(J,{variant:"outline",size:"sm",className:"shadow-sm",onClick:()=>g(N.id),children:"Delete"})]})]},N.id)),t.length===0&&r.jsx("div",{className:"text-center py-12 text-muted-foreground bg-muted/30 rounded-lg",children:"No custom fields configured yet"})]})})]});return r.jsxs("div",{className:"space-y-8",children:[d&&r.jsx(Bde,{field:selectedCustomField||void 0,onSave:p,onCancel:()=>f(!1),modules:m}),r.jsx("div",{className:"ri-page-header",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"ri-page-title",children:"Company Settings"}),r.jsx("p",{className:"ri-page-description",children:"Configure your dealership settings and preferences"})]}),r.jsxs(J,{onClick:Wde,className:"shadow-sm",children:[r.jsx(Pr,{className:"h-4 w-4 mr-2"}),"Save Changes"]})]})}),r.jsx("div",{className:"border-b",children:r.jsx("nav",{className:"-mb-px flex flex-wrap space-x-4 md:space-x-8",children:u.map(N=>r.jsxs("button",{onClick:()=>c(N.id),className:He("flex items-center space-x-2 py-3 px-1 border-b-2 font-medium text-sm transition-colors",l===N.id?"border-primary text-primary":"border-transparent text-muted-foreground hover:text-foreground hover:border-gray-300"),children:[r.jsx(N.icon,{className:"h-4 w-4"}),r.jsx("span",{children:N.name})]},N.id))})}),r.jsxs("div",{children:[l==="general"&&v(),l==="branding"&&y(),l==="labels"&&b(),l==="notifications"&&j(),l==="integrations"&&C(),l==="users"&&E(),l==="custom-fields"&&S()]})]})}const Wde=async()=>{console.log("Saving settings...")};function Hde(){return r.jsxs(Ka,{children:[r.jsx(Vt,{path:"/",element:r.jsx(uD,{})}),r.jsx(Vt,{path:"/*",element:r.jsx(uD,{})})]})}function Gde({onSave:e,onCancel:t}){const{toast:n}=Ct(),[a,s]=w.useState(!1),[i,o]=w.useState({name:"",domain:"",settings:{timezone:"America/New_York",currency:"USD",dateFormat:"MM/dd/yyyy",features:{crm:!0,inventory:!0,quotes:!0,agreements:!0,service:!0,delivery:!0,commissions:!0,portal:!0,invoices:!0,reports:!0}},branding:{primaryColor:"#3b82f6",secondaryColor:"#64748b",fontFamily:"Inter"},isActive:!0}),l=async c=>{if(c.preventDefault(),!i.name||!i.domain){n({title:"Validation Error",description:"Tenant name and domain are required",variant:"destructive"});return}s(!0);try{await e(i),n({title:"Success",description:"Tenant created successfully"})}catch{n({title:"Error",description:"Failed to create tenant",variant:"destructive"})}finally{s(!1)}};return r.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:r.jsxs(fe,{className:"w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[r.jsx(we,{children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsxs(Ne,{className:"flex items-center",children:[r.jsx(my,{className:"h-5 w-5 mr-2 text-primary"}),"Add New Tenant"]}),r.jsx(Ue,{children:"Create a new tenant organization"})]}),r.jsx(J,{variant:"ghost",size:"sm",onClick:t,children:r.jsx($t,{className:"h-4 w-4"})})]})}),r.jsx(me,{children:r.jsxs("form",{onSubmit:l,className:"space-y-6",children:[r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"text-lg font-semibold",children:"Tenant Information"}),r.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"name",children:"Tenant Name *"}),r.jsx(je,{id:"name",value:i.name,onChange:c=>o(d=>({...d,name:c.target.value})),placeholder:"e.g., Sunshine RV Dealership"})]}),r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"domain",children:"Domain *"}),r.jsx(je,{id:"domain",value:i.domain,onChange:c=>o(d=>({...d,domain:c.target.value})),placeholder:"e.g., sunshine.renterinsight.com"}),r.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"This will be used for tenant-specific access"})]})]}),r.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"timezone",children:"Timezone"}),r.jsxs($e,{value:i.settings.timezone,onValueChange:c=>o(d=>({...d,settings:{...d.settings,timezone:c}})),children:[r.jsx(Fe,{children:r.jsx(Be,{})}),r.jsxs(Me,{children:[r.jsx(K,{value:"America/New_York",children:"Eastern Time (ET)"}),r.jsx(K,{value:"America/Chicago",children:"Central Time (CT)"}),r.jsx(K,{value:"America/Denver",children:"Mountain Time (MT)"}),r.jsx(K,{value:"America/Los_Angeles",children:"Pacific Time (PT)"})]})]})]}),r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"currency",children:"Currency"}),r.jsxs($e,{value:i.settings.currency,onValueChange:c=>o(d=>({...d,settings:{...d.settings,currency:c}})),children:[r.jsx(Fe,{children:r.jsx(Be,{})}),r.jsxs(Me,{children:[r.jsx(K,{value:"USD",children:"US Dollar (USD)"}),r.jsx(K,{value:"CAD",children:"Canadian Dollar (CAD)"}),r.jsx(K,{value:"EUR",children:"Euro (EUR)"}),r.jsx(K,{value:"GBP",children:"British Pound (GBP)"})]})]})]}),r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"dateFormat",children:"Date Format"}),r.jsxs($e,{value:i.settings.dateFormat,onValueChange:c=>o(d=>({...d,settings:{...d.settings,dateFormat:c}})),children:[r.jsx(Fe,{children:r.jsx(Be,{})}),r.jsxs(Me,{children:[r.jsx(K,{value:"MM/dd/yyyy",children:"MM/DD/YYYY"}),r.jsx(K,{value:"dd/MM/yyyy",children:"DD/MM/YYYY"}),r.jsx(K,{value:"yyyy-MM-dd",children:"YYYY-MM-DD"})]})]})]})]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"text-lg font-semibold",children:"Enabled Features"}),r.jsx("div",{className:"grid gap-4 md:grid-cols-2",children:Object.entries(i.settings.features).map(([c,d])=>r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(St,{id:`feature-${c}`,checked:d,onCheckedChange:f=>o(u=>({...u,settings:{...u.settings,features:{...u.settings.features,[c]:!!f}}}))}),r.jsx(Z,{htmlFor:`feature-${c}`,className:"capitalize",children:c==="crm"?"CRM & Prospecting":c==="invoices"?"Invoice & Payments":c})]},c))})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"text-lg font-semibold",children:"Branding"}),r.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"primaryColor",children:"Primary Color"}),r.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[r.jsx(je,{type:"color",id:"primaryColor",value:i.branding.primaryColor,onChange:c=>o(d=>({...d,branding:{...d.branding,primaryColor:c.target.value}})),className:"w-16 h-10 shadow-sm"}),r.jsx(je,{value:i.branding.primaryColor,onChange:c=>o(d=>({...d,branding:{...d.branding,primaryColor:c.target.value}})),className:"shadow-sm"})]})]}),r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"secondaryColor",children:"Secondary Color"}),r.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[r.jsx(je,{type:"color",id:"secondaryColor",value:i.branding.secondaryColor,onChange:c=>o(d=>({...d,branding:{...d.branding,secondaryColor:c.target.value}})),className:"w-16 h-10 shadow-sm"}),r.jsx(je,{value:i.branding.secondaryColor,onChange:c=>o(d=>({...d,branding:{...d.branding,secondaryColor:c.target.value}})),className:"shadow-sm"})]})]}),r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"fontFamily",children:"Font Family"}),r.jsxs($e,{value:i.branding.fontFamily,onValueChange:c=>o(d=>({...d,branding:{...d.branding,fontFamily:c}})),children:[r.jsx(Fe,{children:r.jsx(Be,{})}),r.jsxs(Me,{children:[r.jsx(K,{value:"Inter",children:"Inter"}),r.jsx(K,{value:"Roboto",children:"Roboto"}),r.jsx(K,{value:"Open Sans",children:"Open Sans"}),r.jsx(K,{value:"Montserrat",children:"Montserrat"})]})]})]})]})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(St,{id:"isActive",checked:i.isActive,onCheckedChange:c=>o(d=>({...d,isActive:!!c}))}),r.jsx(Z,{htmlFor:"isActive",children:"Active tenant"})]}),r.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t",children:[r.jsx(J,{type:"button",variant:"outline",onClick:t,disabled:a,children:"Cancel"}),r.jsx(J,{type:"submit",disabled:a,children:a?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Creating..."]}):r.jsxs(r.Fragment,{children:[r.jsx(Pr,{className:"h-4 w-4 mr-2"}),"Create Tenant"]})})]})]})})]})})}function Kde({tenantId:e,user:t,onSave:n,onCancel:a}){const{toast:s}=Ct(),[i,o]=w.useState(!1),[l,c]=w.useState({name:(t==null?void 0:t.name)||"",email:(t==null?void 0:t.email)||"",role:(t==null?void 0:t.role)||Vi.USER,isActive:(t==null?void 0:t.is_active)!==!1,sendInvite:!t}),d=f=>{if(f.preventDefault(),!l.name||!l.email){s({title:"Validation Error",description:"Name and email are required",variant:"destructive"});return}o(!0);try{const u={id:t==null?void 0:t.id,...l,tenantId:e,createdAt:(t==null?void 0:t.created_at)||new Date};n(u),s({title:"Success",description:`User ${t?"updated":"added"} successfully`})}catch{s({title:"Error",description:`Failed to ${t?"update":"add"} user`,variant:"destructive"})}finally{o(!1)}};return r.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:r.jsxs(fe,{className:"w-full max-w-md",children:[r.jsx(we,{children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsxs(Ne,{className:"flex items-center",children:[r.jsx(wa,{className:"h-5 w-5 mr-2 text-primary"}),t?"Edit User":"Add User"]}),r.jsx(Ue,{children:t?"Update user details":"Add a new user to this tenant"})]}),r.jsx(J,{variant:"ghost",size:"sm",onClick:a,children:r.jsx($t,{className:"h-4 w-4"})})]})}),r.jsx(me,{children:r.jsxs("form",{onSubmit:d,className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"name",children:"Full Name *"}),r.jsxs("div",{className:"relative",children:[r.jsx(wa,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),r.jsx(je,{id:"name",value:l.name,onChange:f=>c(u=>({...u,name:f.target.value})),placeholder:"John Smith",className:"pl-10"})]})]}),r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"email",children:"Email Address *"}),r.jsxs("div",{className:"relative",children:[r.jsx(en,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),r.jsx(je,{id:"email",type:"email",value:l.email,onChange:f=>c(u=>({...u,email:f.target.value})),placeholder:"john.smith@example.com",className:"pl-10",disabled:!!t})]}),t&&r.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Email cannot be changed for existing users"})]}),r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"role",children:"Role"}),r.jsxs("div",{className:"relative",children:[r.jsx(MA,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),r.jsxs($e,{value:l.role,onValueChange:f=>c(u=>({...u,role:f})),children:[r.jsx(Fe,{className:"pl-10",children:r.jsx(Be,{})}),r.jsxs(Me,{children:[r.jsx(K,{value:Vi.ADMIN,children:"Admin"}),r.jsx(K,{value:Vi.MANAGER,children:"Manager"}),r.jsx(K,{value:Vi.SALES,children:"Sales"}),r.jsx(K,{value:Vi.SERVICE,children:"Service"}),r.jsx(K,{value:Vi.USER,children:"User"})]})]})]})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(St,{id:"isActive",checked:l.isActive,onCheckedChange:f=>c(u=>({...u,isActive:!!f}))}),r.jsx(Z,{htmlFor:"isActive",children:"Active user"})]}),!t&&r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(St,{id:"sendInvite",checked:l.sendInvite,onCheckedChange:f=>c(u=>({...u,sendInvite:!!f}))}),r.jsx(Z,{htmlFor:"sendInvite",children:"Send invitation email"})]}),r.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[r.jsx(J,{type:"button",variant:"outline",onClick:a,disabled:i,children:"Cancel"}),r.jsx(J,{type:"submit",disabled:i,children:i?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),t?"Updating...":"Adding..."]}):r.jsxs(r.Fragment,{children:[r.jsx(Pr,{className:"h-4 w-4 mr-2"}),t?"Update User":"Add User"]})})]})]})})]})})}function Yde({tenant:e,onSave:t,onClose:n}){var N;const{toast:a}=Ct(),[s,i]=w.useState(!1),[o,l]=w.useState("general"),[c,d]=w.useState([]),[f,u]=w.useState(!1),[m,h]=w.useState(!1),[x,g]=w.useState(null),[p,v]=w.useState({...e,settings:{...e.settings,features:((N=e.settings)==null?void 0:N.features)||{crm:!0,inventory:!0,quotes:!0,agreements:!0,service:!0,delivery:!0,commissions:!0,portal:!0,invoices:!0,reports:!0}},branding:e.branding||{primaryColor:"#3b82f6",secondaryColor:"#64748b",fontFamily:"Inter"}}),y=async I=>{if(I.preventDefault(),!p.name||!p.domain){a({title:"Validation Error",description:"Tenant name and domain are required",variant:"destructive"});return}i(!0);try{await t(e.id,{...p,status:p.isActive?"active":"inactive"}),a({title:"Success",description:"Tenant updated successfully"})}catch{a({title:"Error",description:"Failed to update tenant",variant:"destructive"})}finally{i(!1)}},b=I=>{switch(I){case"active":return"bg-green-50 text-green-700 border-green-200";case"inactive":return"bg-gray-50 text-gray-700 border-gray-200";case"suspended":return"bg-red-50 text-red-700 border-red-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}};w.useEffect(()=>{o==="users"&&j()},[o,e.id]);const j=()=>{u(!0),setTimeout(()=>{d([{id:"user-1",name:"Tenant Admin",email:"admin@tenant.com",role:"admin",is_active:!0},{id:"user-2",name:"Tenant Manager",email:"manager@tenant.com",role:"manager",is_active:!0},{id:"user-3",name:"Sales Rep",email:"sales@tenant.com",role:"sales",is_active:!1}]),u(!1)},500)},C=I=>{if(console.log(x?"Updating user:":"Adding user:",I),x)d(D=>D.map(T=>T.id===I.id?{...T,...I}:T)),a({title:"User Updated",description:`${I.name} has been updated successfully.`});else{const D={...I,id:I.id||Math.random().toString(36).substr(2,9)};d(T=>[...T,D]),a({title:"User Added",description:`${I.name} has been added successfully.`})}h(!1),g(null)},E=I=>{g(I),h(!0)},S=(I,D)=>{window.confirm(`Are you sure you want to delete user ${D}?`)&&(console.log("Deleting user:",I),d(T=>T.filter(A=>A.id!==I)),a({title:"User Deleted",description:`${D} has been deleted successfully.`}))};return r.jsxs("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:[m&&r.jsx(Kde,{tenantId:e.id,user:x,onSave:C,onCancel:()=>{h(!1),g(null)}}),r.jsxs(fe,{className:"w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[r.jsx(we,{children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(Ne,{className:"text-xl",children:e.name}),r.jsx(ze,{className:He("ri-badge-status",b(e.status)),children:e.status.toUpperCase()})]}),r.jsx(Ue,{children:e.domain})]}),r.jsx(J,{variant:"ghost",size:"sm",onClick:n,children:r.jsx($t,{className:"h-4 w-4"})})]})}),r.jsxs(me,{children:[r.jsxs(lr,{value:o,onValueChange:l,className:"space-y-4",children:[r.jsxs(or,{className:"grid w-full grid-cols-5",children:[r.jsx(Ke,{value:"general",children:"General"}),r.jsx(Ke,{value:"features",children:"Features"}),r.jsx(Ke,{value:"branding",children:"Branding"}),r.jsx(Ke,{value:"users",children:"Users"}),r.jsx(Ke,{value:"activity",children:"Activity"})]}),r.jsxs(Je,{value:"general",className:"space-y-4",children:[r.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"name",children:"Tenant Name *"}),r.jsx(je,{id:"name",value:p.name,onChange:I=>v(D=>({...D,name:I.target.value})),placeholder:"e.g., Sunshine RV Dealership"})]}),r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"domain",children:"Domain *"}),r.jsx(je,{id:"domain",value:p.domain,onChange:I=>v(D=>({...D,domain:I.target.value})),placeholder:"e.g., sunshine.renterinsight.com"}),r.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"This will be used for tenant-specific access"})]})]}),r.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"timezone",children:"Timezone"}),r.jsxs($e,{value:p.settings.timezone,onValueChange:I=>v(D=>({...D,settings:{...D.settings,timezone:I}})),children:[r.jsx(Fe,{children:r.jsx(Be,{})}),r.jsxs(Me,{children:[r.jsx(K,{value:"America/New_York",children:"Eastern Time (ET)"}),r.jsx(K,{value:"America/Chicago",children:"Central Time (CT)"}),r.jsx(K,{value:"America/Denver",children:"Mountain Time (MT)"}),r.jsx(K,{value:"America/Los_Angeles",children:"Pacific Time (PT)"})]})]})]}),r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"currency",children:"Currency"}),r.jsxs($e,{value:p.settings.currency,onValueChange:I=>v(D=>({...D,settings:{...D.settings,currency:I}})),children:[r.jsx(Fe,{children:r.jsx(Be,{})}),r.jsxs(Me,{children:[r.jsx(K,{value:"USD",children:"US Dollar (USD)"}),r.jsx(K,{value:"CAD",children:"Canadian Dollar (CAD)"}),r.jsx(K,{value:"EUR",children:"Euro (EUR)"}),r.jsx(K,{value:"GBP",children:"British Pound (GBP)"})]})]})]}),r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"dateFormat",children:"Date Format"}),r.jsxs($e,{value:p.settings.dateFormat,onValueChange:I=>v(D=>({...D,settings:{...D.settings,dateFormat:I}})),children:[r.jsx(Fe,{children:r.jsx(Be,{})}),r.jsxs(Me,{children:[r.jsx(K,{value:"MM/dd/yyyy",children:"MM/DD/YYYY"}),r.jsx(K,{value:"dd/MM/yyyy",children:"DD/MM/YYYY"}),r.jsx(K,{value:"yyyy-MM-dd",children:"YYYY-MM-DD"})]})]})]})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(St,{id:"isActive",checked:p.isActive,onCheckedChange:I=>v(D=>({...D,isActive:!!I}))}),r.jsx(Z,{htmlFor:"isActive",children:"Active tenant"})]})]}),r.jsxs(Je,{value:"features",className:"space-y-4",children:[r.jsx("h3",{className:"text-lg font-semibold",children:"Enabled Features"}),r.jsx("div",{className:"grid gap-4 md:grid-cols-2",children:Object.entries(p.settings.features).map(([I,D])=>r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(St,{id:`feature-${I}`,checked:D,onCheckedChange:T=>v(A=>({...A,settings:{...A.settings,features:{...A.settings.features,[I]:!!T}}}))}),r.jsx(Z,{htmlFor:`feature-${I}`,className:"capitalize",children:I==="crm"?"CRM & Prospecting":I==="invoices"?"Invoice & Payments":I})]},I))})]}),r.jsxs(Je,{value:"branding",className:"space-y-4",children:[r.jsx("h3",{className:"text-lg font-semibold",children:"Branding"}),r.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"primaryColor",children:"Primary Color"}),r.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[r.jsx(je,{type:"color",id:"primaryColor",value:p.branding.primaryColor,onChange:I=>v(D=>({...D,branding:{...D.branding,primaryColor:I.target.value}})),className:"w-16 h-10 shadow-sm"}),r.jsx(je,{value:p.branding.primaryColor,onChange:I=>v(D=>({...D,branding:{...D.branding,primaryColor:I.target.value}})),className:"shadow-sm"})]})]}),r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"secondaryColor",children:"Secondary Color"}),r.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[r.jsx(je,{type:"color",id:"secondaryColor",value:p.branding.secondaryColor,onChange:I=>v(D=>({...D,branding:{...D.branding,secondaryColor:I.target.value}})),className:"w-16 h-10 shadow-sm"}),r.jsx(je,{value:p.branding.secondaryColor,onChange:I=>v(D=>({...D,branding:{...D.branding,secondaryColor:I.target.value}})),className:"shadow-sm"})]})]}),r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"fontFamily",children:"Font Family"}),r.jsxs($e,{value:p.branding.fontFamily,onValueChange:I=>v(D=>({...D,branding:{...D.branding,fontFamily:I}})),children:[r.jsx(Fe,{children:r.jsx(Be,{})}),r.jsxs(Me,{children:[r.jsx(K,{value:"Inter",children:"Inter"}),r.jsx(K,{value:"Roboto",children:"Roboto"}),r.jsx(K,{value:"Open Sans",children:"Open Sans"}),r.jsx(K,{value:"Montserrat",children:"Montserrat"})]})]})]})]}),r.jsxs("div",{className:"border rounded-lg p-6 mt-6",children:[r.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Preview"}),r.jsxs("div",{className:"space-y-4 p-4 rounded-lg border",style:{fontFamily:p.branding.fontFamily},children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx("h4",{className:"font-semibold",children:"Text Preview"}),r.jsx("p",{children:"This is how your text will appear with the selected font."})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("h4",{className:"font-semibold",children:"Color Preview"}),r.jsxs("div",{className:"flex space-x-4",children:[r.jsx("div",{className:"w-20 h-10 rounded-md flex items-center justify-center text-white",style:{backgroundColor:p.branding.primaryColor},children:"Primary"}),r.jsx("div",{className:"w-20 h-10 rounded-md flex items-center justify-center text-white",style:{backgroundColor:p.branding.secondaryColor},children:"Secondary"})]})]})]})]})]}),r.jsxs(Je,{value:"users",className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h3",{className:"text-lg font-semibold",children:"Users"}),r.jsxs(J,{size:"sm",onClick:()=>h(!0),children:[r.jsx($n,{className:"h-4 w-4 mr-2"}),"Add User"]})]}),f?r.jsxs("div",{className:"text-center py-8",children:[r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto"}),r.jsx("p",{className:"mt-2 text-muted-foreground",children:"Loading users..."})]}):c.length>0?r.jsx("div",{className:"space-y-3",children:c.map(I=>r.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-accent/50 transition-colors",children:[r.jsxs("div",{children:[r.jsx("h4",{className:"font-semibold",children:I.name}),r.jsx("p",{className:"text-sm text-muted-foreground",children:I.email})]}),r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(ze,{className:I.is_active?"bg-green-50 text-green-700 border-green-200":"bg-gray-50 text-gray-700 border-gray-200",children:I.is_active?"ACTIVE":"INACTIVE"}),r.jsx(ze,{variant:"outline",children:I.role.toUpperCase()}),r.jsxs("div",{className:"flex space-x-2",children:[r.jsxs(J,{variant:"outline",size:"sm",onClick:()=>E(I),children:[r.jsx(Br,{className:"h-3 w-3 mr-1"}),"Edit"]}),r.jsxs(J,{variant:"outline",size:"sm",onClick:()=>S(I.id,I.name),children:[r.jsx(wn,{className:"h-3 w-3 mr-1"}),"Delete"]})]})]})]},I.id))}):r.jsxs("div",{className:"text-center py-8 text-muted-foreground border-2 border-dashed rounded-lg",children:[r.jsx($n,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),r.jsx("p",{children:"No users found for this tenant"}),r.jsx("p",{className:"text-sm",children:"Add users to provide access to this tenant"})]})]}),r.jsxs(Je,{value:"activity",className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h3",{className:"text-lg font-semibold",children:"Activity Log"}),r.jsxs(J,{variant:"outline",size:"sm",children:[r.jsx(Td,{className:"h-4 w-4 mr-2"}),"Refresh"]})]}),r.jsxs("div",{className:"text-center py-8 text-muted-foreground border-2 border-dashed rounded-lg",children:[r.jsx(Td,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),r.jsx("p",{children:"No activity recorded yet"}),r.jsx("p",{className:"text-sm",children:"Activity will be logged as users interact with the system"})]})]})]}),r.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t mt-6",children:[r.jsx(J,{variant:"outline",onClick:n,disabled:s,children:"Cancel"}),r.jsx(J,{onClick:y,disabled:s,children:s?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Saving..."]}):r.jsxs(r.Fragment,{children:[r.jsx(Pr,{className:"h-4 w-4 mr-2"}),"Save Changes"]})})]})]})]})]})}const Xde=[{id:"1",name:"Demo RV Dealership",domain:"demo.renterinsight.com",status:"active",users:5,createdAt:new Date("2024-01-01"),lastActivity:new Date("2024-01-20")},{id:"2",name:"Sunshine RV Center",domain:"sunshine.renterinsight.com",status:"active",users:12,createdAt:new Date("2023-12-15"),lastActivity:new Date("2024-01-19")}],df={totalTenants:2,activeTenants:2,totalUsers:17,systemUptime:"99.9%",avgResponseTime:"120ms",errorRate:"0.1%"};function Qde(){const{hasRole:e}=$m(),{toast:t}=Ct(),[n,a]=w.useState(Xde),[s,i]=w.useState(""),[o,l]=w.useState(null),[c,d]=w.useState(!1),[f,u]=w.useState(!1);if(!e(Vi.ADMIN))return r.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:r.jsx(fe,{className:"w-full max-w-md shadow-sm",children:r.jsxs(we,{className:"text-center",children:[r.jsx(Ts,{className:"h-12 w-12 text-orange-500 mx-auto mb-4"}),r.jsx(Ne,{children:"Access Denied"}),r.jsx(Ue,{children:"You don't have permission to access the Platform Admin area."})]})})});n.filter(g=>g.name.toLowerCase().includes(s.toLowerCase())||g.domain.toLowerCase().includes(s.toLowerCase()));const m=()=>{d(!0)},h=g=>{try{const p={id:Math.random().toString(36).substring(2,9),...g,status:g.isActive?"active":"inactive",users:0,createdAt:new Date,lastActivity:new Date};a(v=>[...v,p]),d(!1),t({title:"Tenant Created",description:`${g.name} has been created successfully.`})}catch{t({title:"Error",description:"Failed to create tenant",variant:"destructive"})}},x=(g,p)=>{try{const v=n.map(y=>y.id===g?{...y,...p}:y);a(v),u(!1),t({title:"Tenant Updated",description:`${p.name} has been updated successfully.`})}catch{t({title:"Error",description:"Failed to update tenant",variant:"destructive"})}};return r.jsxs("div",{className:"space-y-8",children:[c&&r.jsx(Gde,{onSave:h,onCancel:()=>d(!1)}),f&&o&&r.jsx(Yde,{tenant:o,onSave:x,onClose:()=>{u(!1),l(null)}}),r.jsx("div",{className:"ri-page-header",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"ri-page-title",children:"Platform Admin"}),r.jsx("p",{className:"ri-page-description",children:"System administration and tenant management"})]}),r.jsxs("div",{children:[r.jsxs(J,{className:"shadow-sm",onClick:m,children:[r.jsx(Nt,{className:"h-4 w-4 mr-2"}),"Add Tenant"]}),r.jsxs(J,{onClick:()=>window.location.href="/admin/settings",className:"shadow-sm ml-2",children:[r.jsx(sx,{className:"h-4 w-4 mr-2"}),"Platform Settings"]})]})]})}),r.jsxs("div",{className:"grid gap-4 md:grid-cols-3 lg:grid-cols-6",children:[r.jsxs(fe,{className:"shadow-sm border-0 bg-gradient-to-br from-blue-50 to-blue-100/50",children:[r.jsxs(we,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(Ne,{className:"text-sm font-medium text-blue-900",children:"Total Tenants"}),r.jsx(my,{className:"h-4 w-4 text-blue-600"})]}),r.jsxs(me,{children:[r.jsx("div",{className:"text-2xl font-bold text-blue-900",children:df.totalTenants}),r.jsxs("p",{className:"text-xs text-blue-600 flex items-center mt-1",children:[r.jsx(Ot,{className:"h-3 w-3 mr-1"}),"All tenants"]})]})]}),r.jsxs(fe,{className:"shadow-sm border-0 bg-gradient-to-br from-green-50 to-green-100/50",children:[r.jsxs(we,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(Ne,{className:"text-sm font-medium text-green-900",children:"Active Tenants"}),r.jsx(my,{className:"h-4 w-4 text-green-600"})]}),r.jsxs(me,{children:[r.jsx("div",{className:"text-2xl font-bold text-green-900",children:df.activeTenants}),r.jsxs("p",{className:"text-xs text-green-600 flex items-center mt-1",children:[r.jsx(Td,{className:"h-3 w-3 mr-1"}),"Currently active"]})]})]}),r.jsxs(fe,{className:"shadow-sm border-0 bg-gradient-to-br from-purple-50 to-purple-100/50",children:[r.jsxs(we,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(Ne,{className:"text-sm font-medium text-purple-900",children:"Total Users"}),r.jsx($n,{className:"h-4 w-4 text-purple-600"})]}),r.jsxs(me,{children:[r.jsx("div",{className:"text-2xl font-bold text-purple-900",children:df.totalUsers}),r.jsxs("p",{className:"text-xs text-purple-600 flex items-center mt-1",children:[r.jsx($n,{className:"h-3 w-3 mr-1"}),"All users"]})]})]}),r.jsxs(fe,{className:"shadow-sm border-0 bg-gradient-to-br from-green-50 to-green-100/50",children:[r.jsxs(we,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(Ne,{className:"text-sm font-medium text-green-900",children:"System Uptime"}),r.jsx(Td,{className:"h-4 w-4 text-green-600"})]}),r.jsxs(me,{children:[r.jsx("div",{className:"text-2xl font-bold text-green-900",children:df.systemUptime}),r.jsxs("p",{className:"text-xs text-green-600 flex items-center mt-1",children:[r.jsx(Td,{className:"h-3 w-3 mr-1"}),"Excellent"]})]})]}),r.jsxs(fe,{className:"shadow-sm border-0 bg-gradient-to-br from-blue-50 to-blue-100/50",children:[r.jsxs(we,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(Ne,{className:"text-sm font-medium text-blue-900",children:"Avg Response"}),r.jsx(Td,{className:"h-4 w-4 text-blue-600"})]}),r.jsxs(me,{children:[r.jsx("div",{className:"text-2xl font-bold text-blue-900",children:df.avgResponseTime}),r.jsxs("p",{className:"text-xs text-blue-600 flex items-center mt-1",children:[r.jsx(Ot,{className:"h-3 w-3 mr-1"}),"Fast response"]})]})]}),r.jsxs(fe,{className:"shadow-sm border-0 bg-gradient-to-br from-green-50 to-green-100/50",children:[r.jsxs(we,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(Ne,{className:"text-sm font-medium text-green-900",children:"Error Rate"}),r.jsx(Ts,{className:"h-4 w-4 text-green-600"})]}),r.jsxs(me,{children:[r.jsx("div",{className:"text-2xl font-bold text-green-900",children:df.errorRate}),r.jsxs("p",{className:"text-xs text-green-600 flex items-center mt-1",children:[r.jsx(Ot,{className:"h-3 w-3 mr-1"}),"Very low"]})]})]})]})]})}function Jde({initialReportConfig:e,onGenerate:t,onExportCSV:n,isGenerating:a,hasData:s}){const{toast:i}=Ct(),[o,l]=w.useState({type:Rr.SALES,name:"Sales Report",dateRange:{startDate:"2023-01-01",endDate:new Date().toISOString().split("T")[0]},filters:{}}),c=f=>{if(f.preventDefault(),console.log("handleSubmit called from ReportGeneratorForm"),!o.name){i({title:"Validation Error",description:"Report name is required",variant:"destructive"});return}console.log("Calling onGenerate with config:",o),t(o)},d=f=>{let u="Custom Report";switch(f){case Rr.SALES:u="Sales Report";break;case Rr.INVENTORY:u="Inventory Report";break;case Rr.SERVICE:u="Service Report";break;case Rr.FINANCIAL:u="Financial Report";break}l(m=>({...m,type:f,name:u}))};return w.useEffect(()=>{e&&(console.log("ReportGeneratorForm useEffect triggered with initialReportConfig:",e),l(e))},[e]),r.jsxs(fe,{className:"shadow-sm",children:[r.jsx(we,{children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsxs(Ne,{className:"flex items-center",children:[r.jsx(Yn,{className:"h-5 w-5 mr-2 text-primary"}),"Generate Report"]}),r.jsx(Ue,{children:"Configure and generate custom reports"})]}),r.jsxs(J,{variant:"outline",size:"sm",onClick:n,children:[r.jsx(ms,{className:"h-4 w-4 mr-2"}),"Export CSV"]})]})}),r.jsx(me,{children:r.jsxs("form",{onSubmit:c,className:"space-y-4",children:[r.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"reportType",children:"Report Type"}),r.jsxs($e,{value:o.type,onValueChange:f=>d(f),children:[r.jsx(Fe,{children:r.jsx(Be,{})}),r.jsxs(Me,{children:[r.jsx(K,{value:Rr.SALES,children:"Sales Report"}),r.jsx(K,{value:Rr.INVENTORY,children:"Inventory Report"}),r.jsx(K,{value:Rr.SERVICE,children:"Service Report"}),r.jsx(K,{value:Rr.FINANCIAL,children:"Financial Report"}),r.jsx(K,{value:Rr.CUSTOM,children:"Custom Report"})]})]})]}),r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"reportName",children:"Report Name"}),r.jsx(je,{id:"reportName",value:o.name,onChange:f=>l(u=>({...u,name:f.target.value})),placeholder:"Enter report name"})]})]}),r.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"startDate",children:"Start Date"}),r.jsxs("div",{className:"relative",children:[r.jsx(Mr,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),r.jsx(je,{id:"startDate",type:"date",value:o.dateRange.startDate,onChange:f=>l(u=>({...u,dateRange:{...u.dateRange,startDate:f.target.value}})),className:"pl-10"})]})]}),r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"endDate",children:"End Date"}),r.jsxs("div",{className:"relative",children:[r.jsx(Mr,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),r.jsx(je,{id:"endDate",type:"date",value:o.dateRange.endDate,onChange:f=>l(u=>({...u,dateRange:{...u.dateRange,endDate:f.target.value}})),className:"pl-10"})]})]})]}),r.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"salesRep",children:"Sales Rep"}),r.jsxs($e,{value:o.filters.salesRep||"",onValueChange:f=>l(u=>({...u,filters:{...u.filters,salesRep:f||void 0}})),children:[r.jsx(Fe,{children:r.jsx(Be,{placeholder:"All Sales Reps"})}),r.jsxs(Me,{children:[r.jsx(K,{value:"",children:"All Sales Reps"}),r.jsx(K,{value:"rep-001",children:"John Smith"}),r.jsx(K,{value:"rep-002",children:"Sarah Johnson"}),r.jsx(K,{value:"rep-003",children:"Mike Davis"})]})]})]}),r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"status",children:"Status"}),r.jsxs($e,{value:o.filters.status||"",onValueChange:f=>l(u=>({...u,filters:{...u.filters,status:f||void 0}})),children:[r.jsx(Fe,{children:r.jsx(Be,{placeholder:"All Statuses"})}),r.jsxs(Me,{children:[r.jsx(K,{value:"",children:"All Statuses"}),r.jsx(K,{value:"active",children:"Active"}),r.jsx(K,{value:"completed",children:"Completed"}),r.jsx(K,{value:"cancelled",children:"Cancelled"})]})]})]}),r.jsxs("div",{children:[r.jsx(Z,{htmlFor:"location",children:"Location"}),r.jsxs($e,{value:o.filters.location||"",onValueChange:f=>l(u=>({...u,filters:{...u.filters,location:f||void 0}})),children:[r.jsx(Fe,{children:r.jsx(Be,{placeholder:"All Locations"})}),r.jsxs(Me,{children:[r.jsx(K,{value:"",children:"All Locations"}),r.jsx(K,{value:"north",children:"North Region"}),r.jsx(K,{value:"south",children:"South Region"}),r.jsx(K,{value:"east",children:"East Region"}),r.jsx(K,{value:"west",children:"West Region"})]})]})]})]}),r.jsxs("div",{className:"flex justify-between pt-4",children:[r.jsxs(J,{type:"button",variant:"outline",children:[r.jsx(hs,{className:"h-4 w-4 mr-2"}),"More Filters"]}),r.jsxs("div",{className:"flex space-x-2",children:[s&&r.jsxs(J,{type:"button",variant:"outline",onClick:n,children:[r.jsx(ms,{className:"h-4 w-4 mr-2"}),"Export CSV"]}),r.jsx(J,{type:"submit",disabled:a,children:a?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Generating..."]}):r.jsxs(r.Fragment,{children:[r.jsx(Yn,{className:"h-4 w-4 mr-2"}),"Generate Report"]})})]})]})]})})]})}const O8=w.forwardRef(({className:e,...t},n)=>r.jsx("div",{className:"relative w-full overflow-auto",children:r.jsx("table",{ref:n,className:He("w-full caption-bottom text-sm",e),...t})}));O8.displayName="Table";const _8=w.forwardRef(({className:e,...t},n)=>r.jsx("thead",{ref:n,className:He("[&_tr]:border-b",e),...t}));_8.displayName="TableHeader";const L8=w.forwardRef(({className:e,...t},n)=>r.jsx("tbody",{ref:n,className:He("[&_tr:last-child]:border-0",e),...t}));L8.displayName="TableBody";const Zde=w.forwardRef(({className:e,...t},n)=>r.jsx("tfoot",{ref:n,className:He("bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...t}));Zde.displayName="TableFooter";const B0=w.forwardRef(({className:e,...t},n)=>r.jsx("tr",{ref:n,className:He("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",e),...t}));B0.displayName="TableRow";const R8=w.forwardRef(({className:e,...t},n)=>r.jsx("th",{ref:n,className:He("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...t}));R8.displayName="TableHead";const lS=w.forwardRef(({className:e,...t},n)=>r.jsx("td",{ref:n,className:He("p-4 align-middle [&:has([role=checkbox])]:pr-0",e),...t}));lS.displayName="TableCell";const eue=w.forwardRef(({className:e,...t},n)=>r.jsx("caption",{ref:n,className:He("mt-4 text-sm text-muted-foreground",e),...t}));eue.displayName="TableCaption";function tue({reportType:e,reportName:t,data:n,columns:a,onExportCSV:s}){const[i,o]=w.useState(""),[l,c]=w.useState(null),[d,f]=w.useState("asc"),[u,m]=w.useState(1),h=10,g=[...n.filter(j=>Object.values(j).some(C=>C&&C.toString().toLowerCase().includes(i.toLowerCase())))].sort((j,C)=>{if(!l)return 0;const E=j[l],S=C[l];if(E===void 0||S===void 0)return 0;if(typeof E=="number"&&typeof S=="number")return d==="asc"?E-S:S-E;if(E instanceof Date&&S instanceof Date)return d==="asc"?E.getTime()-S.getTime():S.getTime()-E.getTime();const N=E.toString().toLowerCase(),I=S.toString().toLowerCase();return d==="asc"?N.localeCompare(I):I.localeCompare(N)}),p=Math.ceil(g.length/h),v=g.slice((u-1)*h,u*h),y=j=>{l===j?f(d==="asc"?"desc":"asc"):(c(j),f("asc"))},b=(j,C)=>{if(j==null)return"-";switch(C){case"currency":return De(j);case"date":return lt(j);case"boolean":return j?"Yes":"No";default:return j.toString()}};return r.jsxs(fe,{className:"shadow-sm",children:[r.jsx(we,{children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx(Ne,{children:t}),r.jsxs(Ue,{children:[n.length," records found"]})]}),r.jsxs(J,{variant:"outline",size:"sm",onClick:s,children:[r.jsx(ms,{className:"h-4 w-4 mr-2"}),"Export CSV"]})]})}),r.jsx(me,{children:r.jsxs("div",{className:"space-y-4",children:[r.jsx("div",{className:"flex items-center",children:r.jsxs("div",{className:"relative flex-1",children:[r.jsx(Jn,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),r.jsx(je,{placeholder:"Search results...",value:i,onChange:j=>{o(j.target.value),m(1)},className:"pl-10"})]})}),r.jsx("div",{className:"rounded-md border",children:r.jsxs(O8,{children:[r.jsx(_8,{children:r.jsx(B0,{children:a.map(j=>r.jsx(R8,{className:"cursor-pointer hover:bg-muted/50",onClick:()=>y(j.key),children:r.jsxs("div",{className:"flex items-center space-x-1",children:[r.jsx("span",{children:j.label}),l===j.key&&(d==="asc"?r.jsx(wo,{className:"h-3 w-3"}):r.jsx(jo,{className:"h-3 w-3"}))]})},j.key))})}),r.jsx(L8,{children:v.length>0?v.map((j,C)=>r.jsx(B0,{children:a.map(E=>r.jsx(lS,{children:b(j[E.key],E.type)},E.key))},C)):r.jsx(B0,{children:r.jsx(lS,{colSpan:a.length,className:"h-24 text-center",children:"No results found."})})})]})}),p>1&&r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"text-sm text-muted-foreground",children:["Showing ",(u-1)*h+1," to ",Math.min(u*h,g.length)," of ",g.length," results"]}),r.jsxs("div",{className:"flex space-x-2",children:[r.jsx(J,{variant:"outline",size:"sm",onClick:()=>m(j=>Math.max(j-1,1)),disabled:u===1,children:"Previous"}),r.jsx(J,{variant:"outline",size:"sm",onClick:()=>m(j=>Math.min(j+1,p)),disabled:u===p,children:"Next"})]})]})]})})]})}function rue(){const[e,t]=w.useState([]),[n,a]=w.useState([]),[s,i]=w.useState(!1),[o,l]=w.useState(null),{leads:c,salesReps:d}=ro(),{vehicles:f}=Ol(),{tickets:u}=l8(),{invoices:m,payments:h}=k8(),x=async j=>{i(!0),l(j);try{const C=new Date(j.dateRange.startDate),E=new Date(j.dateRange.endDate);let S=[],N=[];switch(j.type){case Rr.SALES:S=g(C,E,j.filters),N=[{key:"id",label:"ID"},{key:"customerName",label:"Customer"},{key:"date",label:"Date",type:"date"},{key:"product",label:"Product"},{key:"salesRep",label:"Sales Rep"},{key:"amount",label:"Amount",type:"currency"},{key:"status",label:"Status"}];break;case Rr.INVENTORY:S=p(j.filters),N=[{key:"id",label:"ID"},{key:"vin",label:"VIN"},{key:"make",label:"Make"},{key:"model",label:"Model"},{key:"year",label:"Year",type:"number"},{key:"type",label:"Type"},{key:"status",label:"Status"},{key:"price",label:"Price",type:"currency"},{key:"cost",label:"Cost",type:"currency"},{key:"location",label:"Location"}];break;case Rr.SERVICE:S=v(C,E,j.filters),N=[{key:"id",label:"Ticket ID"},{key:"title",label:"Title"},{key:"customer",label:"Customer"},{key:"vehicle",label:"Vehicle"},{key:"status",label:"Status"},{key:"createdAt",label:"Created",type:"date"},{key:"completedAt",label:"Completed",type:"date"},{key:"partsTotal",label:"Parts Total",type:"currency"},{key:"laborTotal",label:"Labor Total",type:"currency"},{key:"total",label:"Total",type:"currency"}];break;case Rr.FINANCIAL:S=y(C,E,j.filters),N=[{key:"date",label:"Date",type:"date"},{key:"type",label:"Type"},{key:"reference",label:"Reference"},{key:"customer",label:"Customer"},{key:"description",label:"Description"},{key:"income",label:"Income",type:"currency"},{key:"expense",label:"Expense",type:"currency"},{key:"balance",label:"Balance",type:"currency"}];break;default:S=[],N=[]}t(S),a(N)}catch(C){console.error("Error generating report:",C)}finally{i(!1)}},g=(j,C,E)=>c.filter(N=>{const I=new Date(N.createdAt),D=I>=j&&I<=C,T=!E.salesRep||N.assignedTo===E.salesRep,A=!E.status||N.status===E.status;return D&&T&&A}).map(N=>{var D,T;const I=d.find(A=>A.id===N.assignedTo);return{id:N.id,customerName:`${N.firstName} ${N.lastName}`,date:N.createdAt,product:((D=N.customFields)==null?void 0:D.interests)||"N/A",salesRep:(I==null?void 0:I.name)||"Unassigned",amount:(T=N.customFields)!=null&&T.budget&&parseFloat(N.customFields.budget.replace(/[^0-9.]/g,""))||0,status:N.status}}),p=j=>f.filter(E=>{const S=!j.location||E.location.toLowerCase().includes(j.location.toLowerCase()),N=!j.status||E.status===j.status;return S&&N}).map(E=>({id:E.id,vin:E.vin,make:E.make,model:E.model,year:E.year,type:E.type,status:E.status,price:E.price,cost:E.cost,location:E.location})),v=(j,C,E)=>u.filter(N=>{const I=new Date(N.createdAt),D=I>=j&&I<=C,T=!E.status||N.status===E.status;return D&&T}).map(N=>{const I=N.parts.reduce((T,A)=>T+A.total,0),D=N.labor.reduce((T,A)=>T+A.total,0);return{id:N.id,title:N.title,customer:N.customerId,vehicle:N.vehicleId||"N/A",status:N.status,createdAt:N.createdAt,completedAt:N.completedDate,partsTotal:I,laborTotal:D,total:I+D}}),y=(j,C,E)=>{const S=[];return m.forEach(N=>{const I=new Date(N.createdAt);I>=j&&I<=C&&S.push({date:N.createdAt,type:"Invoice",reference:N.number,customer:N.customerId,description:`Invoice #${N.number}`,income:N.total,expense:0,balance:N.total})}),h.forEach(N=>{var D;const I=new Date(N.processedDate);I>=j&&I<=C&&S.push({date:N.processedDate,type:"Payment",reference:N.id,customer:((D=m.find(T=>T.id===N.invoiceId))==null?void 0:D.customerId)||"Unknown",description:`Payment for Invoice #${N.invoiceId}`,income:0,expense:N.amount,balance:-N.amount})}),S.sort((N,I)=>new Date(N.date).getTime()-new Date(I.date).getTime())};return{reportData:e,reportColumns:n,loading:s,currentReportConfig:o,generateReport:x,exportToCSV:()=>{if(!e.length||!n.length)return;const j=n.map(D=>D.label),C=e.map(D=>n.map(T=>{const A=D[T.key];switch(T.type){case"currency":return typeof A=="number"?A.toFixed(2):A;case"date":return A instanceof Date?A.toISOString().split("T")[0]:A;default:return A}})),E=rm.unparse({fields:j,data:C}),S=new Blob([E],{type:"text/csv;charset=utf-8;"}),N=URL.createObjectURL(S),I=document.createElement("a");I.href=N,I.setAttribute("download",`${(o==null?void 0:o.name)||"report"}.csv`),document.body.appendChild(I),I.click(),document.body.removeChild(I)}}}function F8(e){var t,n,a="";if(typeof e=="string"||typeof e=="number")a+=e;else if(typeof e=="object")if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(n=F8(e[t]))&&(a&&(a+=" "),a+=n)}else for(n in e)e[n]&&(a&&(a+=" "),a+=n);return a}function vr(){for(var e,t,n=0,a="",s=arguments.length;n<s;n++)(e=arguments[n])&&(t=F8(e))&&(a&&(a+=" "),a+=t);return a}var nue=Array.isArray,vs=nue,aue=typeof fc=="object"&&fc&&fc.Object===Object&&fc,M8=aue,sue=M8,iue=typeof self=="object"&&self&&self.Object===Object&&self,oue=sue||iue||Function("return this")(),Wo=oue,lue=Wo,cue=lue.Symbol,Nx=cue,fD=Nx,$8=Object.prototype,due=$8.hasOwnProperty,uue=$8.toString,rp=fD?fD.toStringTag:void 0;function fue(e){var t=due.call(e,rp),n=e[rp];try{e[rp]=void 0;var a=!0}catch{}var s=uue.call(e);return a&&(t?e[rp]=n:delete e[rp]),s}var mue=fue,hue=Object.prototype,pue=hue.toString;function vue(e){return pue.call(e)}var xue=vue,mD=Nx,gue=mue,yue=xue,bue="[object Null]",jue="[object Undefined]",hD=mD?mD.toStringTag:void 0;function wue(e){return e==null?e===void 0?jue:bue:hD&&hD in Object(e)?gue(e):yue(e)}var _l=wue;function Nue(e){return e!=null&&typeof e=="object"}var Ll=Nue,Sue=_l,Cue=Ll,Aue="[object Symbol]";function Eue(e){return typeof e=="symbol"||Cue(e)&&Sue(e)==Aue}var Ym=Eue,Pue=vs,Tue=Ym,Iue=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Due=/^\w*$/;function kue(e,t){if(Pue(e))return!1;var n=typeof e;return n=="number"||n=="symbol"||n=="boolean"||e==null||Tue(e)?!0:Due.test(e)||!Iue.test(e)||t!=null&&e in Object(t)}var z4=kue;function Oue(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var Jc=Oue;const Xm=Er(Jc);var _ue=_l,Lue=Jc,Rue="[object AsyncFunction]",Fue="[object Function]",Mue="[object GeneratorFunction]",$ue="[object Proxy]";function Bue(e){if(!Lue(e))return!1;var t=_ue(e);return t==Fue||t==Mue||t==Rue||t==$ue}var U4=Bue;const Zt=Er(U4);var zue=Wo,Uue=zue["__core-js_shared__"],Vue=Uue,F2=Vue,pD=function(){var e=/[^.]+$/.exec(F2&&F2.keys&&F2.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function que(e){return!!pD&&pD in e}var Wue=que,Hue=Function.prototype,Gue=Hue.toString;function Kue(e){if(e!=null){try{return Gue.call(e)}catch{}try{return e+""}catch{}}return""}var B8=Kue,Yue=U4,Xue=Wue,Que=Jc,Jue=B8,Zue=/[\\^$.*+?()[\]{}|]/g,efe=/^\[object .+?Constructor\]$/,tfe=Function.prototype,rfe=Object.prototype,nfe=tfe.toString,afe=rfe.hasOwnProperty,sfe=RegExp("^"+nfe.call(afe).replace(Zue,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function ife(e){if(!Que(e)||Xue(e))return!1;var t=Yue(e)?sfe:efe;return t.test(Jue(e))}var ofe=ife;function lfe(e,t){return e==null?void 0:e[t]}var cfe=lfe,dfe=ofe,ufe=cfe;function ffe(e,t){var n=ufe(e,t);return dfe(n)?n:void 0}var wu=ffe,mfe=wu,hfe=mfe(Object,"create"),$1=hfe,vD=$1;function pfe(){this.__data__=vD?vD(null):{},this.size=0}var vfe=pfe;function xfe(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var gfe=xfe,yfe=$1,bfe="__lodash_hash_undefined__",jfe=Object.prototype,wfe=jfe.hasOwnProperty;function Nfe(e){var t=this.__data__;if(yfe){var n=t[e];return n===bfe?void 0:n}return wfe.call(t,e)?t[e]:void 0}var Sfe=Nfe,Cfe=$1,Afe=Object.prototype,Efe=Afe.hasOwnProperty;function Pfe(e){var t=this.__data__;return Cfe?t[e]!==void 0:Efe.call(t,e)}var Tfe=Pfe,Ife=$1,Dfe="__lodash_hash_undefined__";function kfe(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=Ife&&t===void 0?Dfe:t,this}var Ofe=kfe,_fe=vfe,Lfe=gfe,Rfe=Sfe,Ffe=Tfe,Mfe=Ofe;function Qm(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var a=e[t];this.set(a[0],a[1])}}Qm.prototype.clear=_fe;Qm.prototype.delete=Lfe;Qm.prototype.get=Rfe;Qm.prototype.has=Ffe;Qm.prototype.set=Mfe;var $fe=Qm;function Bfe(){this.__data__=[],this.size=0}var zfe=Bfe;function Ufe(e,t){return e===t||e!==e&&t!==t}var V4=Ufe,Vfe=V4;function qfe(e,t){for(var n=e.length;n--;)if(Vfe(e[n][0],t))return n;return-1}var B1=qfe,Wfe=B1,Hfe=Array.prototype,Gfe=Hfe.splice;function Kfe(e){var t=this.__data__,n=Wfe(t,e);if(n<0)return!1;var a=t.length-1;return n==a?t.pop():Gfe.call(t,n,1),--this.size,!0}var Yfe=Kfe,Xfe=B1;function Qfe(e){var t=this.__data__,n=Xfe(t,e);return n<0?void 0:t[n][1]}var Jfe=Qfe,Zfe=B1;function eme(e){return Zfe(this.__data__,e)>-1}var tme=eme,rme=B1;function nme(e,t){var n=this.__data__,a=rme(n,e);return a<0?(++this.size,n.push([e,t])):n[a][1]=t,this}var ame=nme,sme=zfe,ime=Yfe,ome=Jfe,lme=tme,cme=ame;function Jm(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var a=e[t];this.set(a[0],a[1])}}Jm.prototype.clear=sme;Jm.prototype.delete=ime;Jm.prototype.get=ome;Jm.prototype.has=lme;Jm.prototype.set=cme;var z1=Jm,dme=wu,ume=Wo,fme=dme(ume,"Map"),q4=fme,xD=$fe,mme=z1,hme=q4;function pme(){this.size=0,this.__data__={hash:new xD,map:new(hme||mme),string:new xD}}var vme=pme;function xme(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var gme=xme,yme=gme;function bme(e,t){var n=e.__data__;return yme(t)?n[typeof t=="string"?"string":"hash"]:n.map}var U1=bme,jme=U1;function wme(e){var t=jme(this,e).delete(e);return this.size-=t?1:0,t}var Nme=wme,Sme=U1;function Cme(e){return Sme(this,e).get(e)}var Ame=Cme,Eme=U1;function Pme(e){return Eme(this,e).has(e)}var Tme=Pme,Ime=U1;function Dme(e,t){var n=Ime(this,e),a=n.size;return n.set(e,t),this.size+=n.size==a?0:1,this}var kme=Dme,Ome=vme,_me=Nme,Lme=Ame,Rme=Tme,Fme=kme;function Zm(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var a=e[t];this.set(a[0],a[1])}}Zm.prototype.clear=Ome;Zm.prototype.delete=_me;Zm.prototype.get=Lme;Zm.prototype.has=Rme;Zm.prototype.set=Fme;var W4=Zm,z8=W4,Mme="Expected a function";function H4(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(Mme);var n=function(){var a=arguments,s=t?t.apply(this,a):a[0],i=n.cache;if(i.has(s))return i.get(s);var o=e.apply(this,a);return n.cache=i.set(s,o)||i,o};return n.cache=new(H4.Cache||z8),n}H4.Cache=z8;var U8=H4;const $me=Er(U8);var Bme=U8,zme=500;function Ume(e){var t=Bme(e,function(a){return n.size===zme&&n.clear(),a}),n=t.cache;return t}var Vme=Ume,qme=Vme,Wme=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Hme=/\\(\\)?/g,Gme=qme(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(Wme,function(n,a,s,i){t.push(s?i.replace(Hme,"$1"):a||n)}),t}),Kme=Gme;function Yme(e,t){for(var n=-1,a=e==null?0:e.length,s=Array(a);++n<a;)s[n]=t(e[n],n,e);return s}var G4=Yme,gD=Nx,Xme=G4,Qme=vs,Jme=Ym,Zme=1/0,yD=gD?gD.prototype:void 0,bD=yD?yD.toString:void 0;function V8(e){if(typeof e=="string")return e;if(Qme(e))return Xme(e,V8)+"";if(Jme(e))return bD?bD.call(e):"";var t=e+"";return t=="0"&&1/e==-Zme?"-0":t}var ehe=V8,the=ehe;function rhe(e){return e==null?"":the(e)}var q8=rhe,nhe=vs,ahe=z4,she=Kme,ihe=q8;function ohe(e,t){return nhe(e)?e:ahe(e,t)?[e]:she(ihe(e))}var W8=ohe,lhe=Ym,che=1/0;function dhe(e){if(typeof e=="string"||lhe(e))return e;var t=e+"";return t=="0"&&1/e==-che?"-0":t}var V1=dhe,uhe=W8,fhe=V1;function mhe(e,t){t=uhe(t,e);for(var n=0,a=t.length;e!=null&&n<a;)e=e[fhe(t[n++])];return n&&n==a?e:void 0}var K4=mhe,hhe=K4;function phe(e,t,n){var a=e==null?void 0:hhe(e,t);return a===void 0?n:a}var H8=phe;const fi=Er(H8);function vhe(e){return e==null}var xhe=vhe;const ir=Er(xhe);var ghe=_l,yhe=vs,bhe=Ll,jhe="[object String]";function whe(e){return typeof e=="string"||!yhe(e)&&bhe(e)&&ghe(e)==jhe}var Nhe=whe;const lu=Er(Nhe);var G8={exports:{}},Ir={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Y4=Symbol.for("react.element"),X4=Symbol.for("react.portal"),q1=Symbol.for("react.fragment"),W1=Symbol.for("react.strict_mode"),H1=Symbol.for("react.profiler"),G1=Symbol.for("react.provider"),K1=Symbol.for("react.context"),She=Symbol.for("react.server_context"),Y1=Symbol.for("react.forward_ref"),X1=Symbol.for("react.suspense"),Q1=Symbol.for("react.suspense_list"),J1=Symbol.for("react.memo"),Z1=Symbol.for("react.lazy"),Che=Symbol.for("react.offscreen"),K8;K8=Symbol.for("react.module.reference");function yi(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case Y4:switch(e=e.type,e){case q1:case H1:case W1:case X1:case Q1:return e;default:switch(e=e&&e.$$typeof,e){case She:case K1:case Y1:case Z1:case J1:case G1:return e;default:return t}}case X4:return t}}}Ir.ContextConsumer=K1;Ir.ContextProvider=G1;Ir.Element=Y4;Ir.ForwardRef=Y1;Ir.Fragment=q1;Ir.Lazy=Z1;Ir.Memo=J1;Ir.Portal=X4;Ir.Profiler=H1;Ir.StrictMode=W1;Ir.Suspense=X1;Ir.SuspenseList=Q1;Ir.isAsyncMode=function(){return!1};Ir.isConcurrentMode=function(){return!1};Ir.isContextConsumer=function(e){return yi(e)===K1};Ir.isContextProvider=function(e){return yi(e)===G1};Ir.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===Y4};Ir.isForwardRef=function(e){return yi(e)===Y1};Ir.isFragment=function(e){return yi(e)===q1};Ir.isLazy=function(e){return yi(e)===Z1};Ir.isMemo=function(e){return yi(e)===J1};Ir.isPortal=function(e){return yi(e)===X4};Ir.isProfiler=function(e){return yi(e)===H1};Ir.isStrictMode=function(e){return yi(e)===W1};Ir.isSuspense=function(e){return yi(e)===X1};Ir.isSuspenseList=function(e){return yi(e)===Q1};Ir.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===q1||e===H1||e===W1||e===X1||e===Q1||e===Che||typeof e=="object"&&e!==null&&(e.$$typeof===Z1||e.$$typeof===J1||e.$$typeof===G1||e.$$typeof===K1||e.$$typeof===Y1||e.$$typeof===K8||e.getModuleId!==void 0)};Ir.typeOf=yi;G8.exports=Ir;var Ahe=G8.exports,Ehe=_l,Phe=Ll,The="[object Number]";function Ihe(e){return typeof e=="number"||Phe(e)&&Ehe(e)==The}var Y8=Ihe;const Dhe=Er(Y8);var khe=Y8;function Ohe(e){return khe(e)&&e!=+e}var _he=Ohe;const eh=Er(_he);var Gi=function(t){return t===0?0:t>0?1:-1},Rd=function(t){return lu(t)&&t.indexOf("%")===t.length-1},dt=function(t){return Dhe(t)&&!eh(t)},Lhe=function(t){return ir(t)},Qn=function(t){return dt(t)||lu(t)},Rhe=0,Sx=function(t){var n=++Rhe;return"".concat(t||"").concat(n)},cu=function(t,n){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!dt(t)&&!lu(t))return a;var i;if(Rd(t)){var o=t.indexOf("%");i=n*parseFloat(t.slice(0,o))/100}else i=+t;return eh(i)&&(i=a),s&&i>n&&(i=n),i},pf=function(t){if(!t)return null;var n=Object.keys(t);return n&&n.length?t[n[0]]:null},Fhe=function(t){if(!Array.isArray(t))return!1;for(var n=t.length,a={},s=0;s<n;s++)if(!a[t[s]])a[t[s]]=!0;else return!0;return!1},si=function(t,n){return dt(t)&&dt(n)?function(a){return t+a*(n-t)}:function(){return n}};function Fy(e,t,n){return!e||!e.length?null:e.find(function(a){return a&&(typeof t=="function"?t(a):fi(a,t))===n})}var Mhe=function(t,n){return dt(t)&&dt(n)?t-n:lu(t)&&lu(n)?t.localeCompare(n):t instanceof Date&&n instanceof Date?t.getTime()-n.getTime():String(t).localeCompare(String(n))};function zf(e,t){for(var n in e)if({}.hasOwnProperty.call(e,n)&&(!{}.hasOwnProperty.call(t,n)||e[n]!==t[n]))return!1;for(var a in t)if({}.hasOwnProperty.call(t,a)&&!{}.hasOwnProperty.call(e,a))return!1;return!0}function cS(e){"@babel/helpers - typeof";return cS=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},cS(e)}var $he=["viewBox","children"],Bhe=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],jD=["points","pathLength"],M2={svg:$he,polygon:jD,polyline:jD},Q4=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],My=function(t,n){if(!t||typeof t=="function"||typeof t=="boolean")return null;var a=t;if(w.isValidElement(t)&&(a=t.props),!Xm(a))return null;var s={};return Object.keys(a).forEach(function(i){Q4.includes(i)&&(s[i]=n||function(o){return a[i](a,o)})}),s},zhe=function(t,n,a){return function(s){return t(n,a,s),null}},$y=function(t,n,a){if(!Xm(t)||cS(t)!=="object")return null;var s=null;return Object.keys(t).forEach(function(i){var o=t[i];Q4.includes(i)&&typeof o=="function"&&(s||(s={}),s[i]=zhe(o,n,a))}),s},Uhe=["children"],Vhe=["children"];function wD(e,t){if(e==null)return{};var n=qhe(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function qhe(e,t){if(e==null)return{};var n={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;n[a]=e[a]}return n}function dS(e){"@babel/helpers - typeof";return dS=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},dS(e)}var ND={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},xl=function(t){return typeof t=="string"?t:t?t.displayName||t.name||"Component":""},SD=null,$2=null,J4=function e(t){if(t===SD&&Array.isArray($2))return $2;var n=[];return w.Children.forEach(t,function(a){ir(a)||(Ahe.isFragment(a)?n=n.concat(e(a.props.children)):n.push(a))}),$2=n,SD=t,n};function Xi(e,t){var n=[],a=[];return Array.isArray(t)?a=t.map(function(s){return xl(s)}):a=[xl(t)],J4(e).forEach(function(s){var i=fi(s,"type.displayName")||fi(s,"type.name");a.indexOf(i)!==-1&&n.push(s)}),n}function Ss(e,t){var n=Xi(e,t);return n&&n[0]}var CD=function(t){if(!t||!t.props)return!1;var n=t.props,a=n.width,s=n.height;return!(!dt(a)||a<=0||!dt(s)||s<=0)},Whe=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],Hhe=function(t){return t&&t.type&&lu(t.type)&&Whe.indexOf(t.type)>=0},Ghe=function(t){return t&&dS(t)==="object"&&"clipDot"in t},Khe=function(t,n,a,s){var i,o=(i=M2==null?void 0:M2[s])!==null&&i!==void 0?i:[];return n.startsWith("data-")||!Zt(t)&&(s&&o.includes(n)||Bhe.includes(n))||a&&Q4.includes(n)},sr=function(t,n,a){if(!t||typeof t=="function"||typeof t=="boolean")return null;var s=t;if(w.isValidElement(t)&&(s=t.props),!Xm(s))return null;var i={};return Object.keys(s).forEach(function(o){var l;Khe((l=s)===null||l===void 0?void 0:l[o],o,n,a)&&(i[o]=s[o])}),i},uS=function e(t,n){if(t===n)return!0;var a=w.Children.count(t);if(a!==w.Children.count(n))return!1;if(a===0)return!0;if(a===1)return AD(Array.isArray(t)?t[0]:t,Array.isArray(n)?n[0]:n);for(var s=0;s<a;s++){var i=t[s],o=n[s];if(Array.isArray(i)||Array.isArray(o)){if(!e(i,o))return!1}else if(!AD(i,o))return!1}return!0},AD=function(t,n){if(ir(t)&&ir(n))return!0;if(!ir(t)&&!ir(n)){var a=t.props||{},s=a.children,i=wD(a,Uhe),o=n.props||{},l=o.children,c=wD(o,Vhe);return s&&l?zf(i,c)&&uS(s,l):!s&&!l?zf(i,c):!1}return!1},ED=function(t,n){var a=[],s={};return J4(t).forEach(function(i,o){if(Hhe(i))a.push(i);else if(i){var l=xl(i.type),c=n[l]||{},d=c.handler,f=c.once;if(d&&(!f||!s[l])){var u=d(i,l,o);a.push(u),s[l]=!0}}}),a},Yhe=function(t){var n=t&&t.type;return n&&ND[n]?ND[n]:null},Xhe=function(t,n){return J4(n).indexOf(t)},Qhe=["children","width","height","viewBox","className","style","title","desc"];function fS(){return fS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},fS.apply(this,arguments)}function Jhe(e,t){if(e==null)return{};var n=Zhe(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function Zhe(e,t){if(e==null)return{};var n={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;n[a]=e[a]}return n}function mS(e){var t=e.children,n=e.width,a=e.height,s=e.viewBox,i=e.className,o=e.style,l=e.title,c=e.desc,d=Jhe(e,Qhe),f=s||{width:n,height:a,x:0,y:0},u=vr("recharts-surface",i);return pe.createElement("svg",fS({},sr(d,!0,"svg"),{className:u,width:n,height:a,style:o,viewBox:"".concat(f.x," ").concat(f.y," ").concat(f.width," ").concat(f.height)}),pe.createElement("title",null,l),pe.createElement("desc",null,c),t)}var epe=["children","className"];function hS(){return hS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},hS.apply(this,arguments)}function tpe(e,t){if(e==null)return{};var n=rpe(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function rpe(e,t){if(e==null)return{};var n={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;n[a]=e[a]}return n}var fn=pe.forwardRef(function(e,t){var n=e.children,a=e.className,s=tpe(e,epe),i=vr("recharts-layer",a);return pe.createElement("g",hS({className:i},sr(s,!0),{ref:t}),n)}),Yd=function(t,n){for(var a=arguments.length,s=new Array(a>2?a-2:0),i=2;i<a;i++)s[i-2]=arguments[i]};function npe(e,t,n){var a=-1,s=e.length;t<0&&(t=-t>s?0:s+t),n=n>s?s:n,n<0&&(n+=s),s=t>n?0:n-t>>>0,t>>>=0;for(var i=Array(s);++a<s;)i[a]=e[a+t];return i}var ape=npe,spe=ape;function ipe(e,t,n){var a=e.length;return n=n===void 0?a:n,!t&&n>=a?e:spe(e,t,n)}var ope=ipe,lpe="\\ud800-\\udfff",cpe="\\u0300-\\u036f",dpe="\\ufe20-\\ufe2f",upe="\\u20d0-\\u20ff",fpe=cpe+dpe+upe,mpe="\\ufe0e\\ufe0f",hpe="\\u200d",ppe=RegExp("["+hpe+lpe+fpe+mpe+"]");function vpe(e){return ppe.test(e)}var X8=vpe;function xpe(e){return e.split("")}var gpe=xpe,Q8="\\ud800-\\udfff",ype="\\u0300-\\u036f",bpe="\\ufe20-\\ufe2f",jpe="\\u20d0-\\u20ff",wpe=ype+bpe+jpe,Npe="\\ufe0e\\ufe0f",Spe="["+Q8+"]",pS="["+wpe+"]",vS="\\ud83c[\\udffb-\\udfff]",Cpe="(?:"+pS+"|"+vS+")",J8="[^"+Q8+"]",Z8="(?:\\ud83c[\\udde6-\\uddff]){2}",e9="[\\ud800-\\udbff][\\udc00-\\udfff]",Ape="\\u200d",t9=Cpe+"?",r9="["+Npe+"]?",Epe="(?:"+Ape+"(?:"+[J8,Z8,e9].join("|")+")"+r9+t9+")*",Ppe=r9+t9+Epe,Tpe="(?:"+[J8+pS+"?",pS,Z8,e9,Spe].join("|")+")",Ipe=RegExp(vS+"(?="+vS+")|"+Tpe+Ppe,"g");function Dpe(e){return e.match(Ipe)||[]}var kpe=Dpe,Ope=gpe,_pe=X8,Lpe=kpe;function Rpe(e){return _pe(e)?Lpe(e):Ope(e)}var Fpe=Rpe,Mpe=ope,$pe=X8,Bpe=Fpe,zpe=q8;function Upe(e){return function(t){t=zpe(t);var n=$pe(t)?Bpe(t):void 0,a=n?n[0]:t.charAt(0),s=n?Mpe(n,1).join(""):t.slice(1);return a[e]()+s}}var Vpe=Upe,qpe=Vpe,Wpe=qpe("toUpperCase"),Hpe=Wpe;const ej=Er(Hpe);function qr(e){return function(){return e}}const n9=Math.cos,By=Math.sin,io=Math.sqrt,zy=Math.PI,tj=2*zy,xS=Math.PI,gS=2*xS,jd=1e-6,Gpe=gS-jd;function a9(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function Kpe(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return a9;const n=10**t;return function(a){this._+=a[0];for(let s=1,i=a.length;s<i;++s)this._+=Math.round(arguments[s]*n)/n+a[s]}}class Ype{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?a9:Kpe(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,a,s){this._append`Q${+t},${+n},${this._x1=+a},${this._y1=+s}`}bezierCurveTo(t,n,a,s,i,o){this._append`C${+t},${+n},${+a},${+s},${this._x1=+i},${this._y1=+o}`}arcTo(t,n,a,s,i){if(t=+t,n=+n,a=+a,s=+s,i=+i,i<0)throw new Error(`negative radius: ${i}`);let o=this._x1,l=this._y1,c=a-t,d=s-n,f=o-t,u=l-n,m=f*f+u*u;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(m>jd)if(!(Math.abs(u*c-d*f)>jd)||!i)this._append`L${this._x1=t},${this._y1=n}`;else{let h=a-o,x=s-l,g=c*c+d*d,p=h*h+x*x,v=Math.sqrt(g),y=Math.sqrt(m),b=i*Math.tan((xS-Math.acos((g+m-p)/(2*v*y)))/2),j=b/y,C=b/v;Math.abs(j-1)>jd&&this._append`L${t+j*f},${n+j*u}`,this._append`A${i},${i},0,0,${+(u*h>f*x)},${this._x1=t+C*c},${this._y1=n+C*d}`}}arc(t,n,a,s,i,o){if(t=+t,n=+n,a=+a,o=!!o,a<0)throw new Error(`negative radius: ${a}`);let l=a*Math.cos(s),c=a*Math.sin(s),d=t+l,f=n+c,u=1^o,m=o?s-i:i-s;this._x1===null?this._append`M${d},${f}`:(Math.abs(this._x1-d)>jd||Math.abs(this._y1-f)>jd)&&this._append`L${d},${f}`,a&&(m<0&&(m=m%gS+gS),m>Gpe?this._append`A${a},${a},0,1,${u},${t-l},${n-c}A${a},${a},0,1,${u},${this._x1=d},${this._y1=f}`:m>jd&&this._append`A${a},${a},0,${+(m>=xS)},${u},${this._x1=t+a*Math.cos(i)},${this._y1=n+a*Math.sin(i)}`)}rect(t,n,a,s){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${a=+a}v${+s}h${-a}Z`}toString(){return this._}}function Z4(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const a=Math.floor(n);if(!(a>=0))throw new RangeError(`invalid digits: ${n}`);t=a}return e},()=>new Ype(t)}function eE(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function s9(e){this._context=e}s9.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function rj(e){return new s9(e)}function i9(e){return e[0]}function o9(e){return e[1]}function l9(e,t){var n=qr(!0),a=null,s=rj,i=null,o=Z4(l);e=typeof e=="function"?e:e===void 0?i9:qr(e),t=typeof t=="function"?t:t===void 0?o9:qr(t);function l(c){var d,f=(c=eE(c)).length,u,m=!1,h;for(a==null&&(i=s(h=o())),d=0;d<=f;++d)!(d<f&&n(u=c[d],d,c))===m&&((m=!m)?i.lineStart():i.lineEnd()),m&&i.point(+e(u,d,c),+t(u,d,c));if(h)return i=null,h+""||null}return l.x=function(c){return arguments.length?(e=typeof c=="function"?c:qr(+c),l):e},l.y=function(c){return arguments.length?(t=typeof c=="function"?c:qr(+c),l):t},l.defined=function(c){return arguments.length?(n=typeof c=="function"?c:qr(!!c),l):n},l.curve=function(c){return arguments.length?(s=c,a!=null&&(i=s(a)),l):s},l.context=function(c){return arguments.length?(c==null?a=i=null:i=s(a=c),l):a},l}function s0(e,t,n){var a=null,s=qr(!0),i=null,o=rj,l=null,c=Z4(d);e=typeof e=="function"?e:e===void 0?i9:qr(+e),t=typeof t=="function"?t:qr(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?o9:qr(+n);function d(u){var m,h,x,g=(u=eE(u)).length,p,v=!1,y,b=new Array(g),j=new Array(g);for(i==null&&(l=o(y=c())),m=0;m<=g;++m){if(!(m<g&&s(p=u[m],m,u))===v)if(v=!v)h=m,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),x=m-1;x>=h;--x)l.point(b[x],j[x]);l.lineEnd(),l.areaEnd()}v&&(b[m]=+e(p,m,u),j[m]=+t(p,m,u),l.point(a?+a(p,m,u):b[m],n?+n(p,m,u):j[m]))}if(y)return l=null,y+""||null}function f(){return l9().defined(s).curve(o).context(i)}return d.x=function(u){return arguments.length?(e=typeof u=="function"?u:qr(+u),a=null,d):e},d.x0=function(u){return arguments.length?(e=typeof u=="function"?u:qr(+u),d):e},d.x1=function(u){return arguments.length?(a=u==null?null:typeof u=="function"?u:qr(+u),d):a},d.y=function(u){return arguments.length?(t=typeof u=="function"?u:qr(+u),n=null,d):t},d.y0=function(u){return arguments.length?(t=typeof u=="function"?u:qr(+u),d):t},d.y1=function(u){return arguments.length?(n=u==null?null:typeof u=="function"?u:qr(+u),d):n},d.lineX0=d.lineY0=function(){return f().x(e).y(t)},d.lineY1=function(){return f().x(e).y(n)},d.lineX1=function(){return f().x(a).y(t)},d.defined=function(u){return arguments.length?(s=typeof u=="function"?u:qr(!!u),d):s},d.curve=function(u){return arguments.length?(o=u,i!=null&&(l=o(i)),d):o},d.context=function(u){return arguments.length?(u==null?i=l=null:l=o(i=u),d):i},d}class c9{constructor(t,n){this._context=t,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,n){switch(t=+t,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,n,t,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,t,this._y0,t,n);break}}this._x0=t,this._y0=n}}function Xpe(e){return new c9(e,!0)}function Qpe(e){return new c9(e,!1)}const tE={draw(e,t){const n=io(t/zy);e.moveTo(n,0),e.arc(0,0,n,0,tj)}},Jpe={draw(e,t){const n=io(t/5)/2;e.moveTo(-3*n,-n),e.lineTo(-n,-n),e.lineTo(-n,-3*n),e.lineTo(n,-3*n),e.lineTo(n,-n),e.lineTo(3*n,-n),e.lineTo(3*n,n),e.lineTo(n,n),e.lineTo(n,3*n),e.lineTo(-n,3*n),e.lineTo(-n,n),e.lineTo(-3*n,n),e.closePath()}},d9=io(1/3),Zpe=d9*2,eve={draw(e,t){const n=io(t/Zpe),a=n*d9;e.moveTo(0,-n),e.lineTo(a,0),e.lineTo(0,n),e.lineTo(-a,0),e.closePath()}},tve={draw(e,t){const n=io(t),a=-n/2;e.rect(a,a,n,n)}},rve=.8908130915292852,u9=By(zy/10)/By(7*zy/10),nve=By(tj/10)*u9,ave=-n9(tj/10)*u9,sve={draw(e,t){const n=io(t*rve),a=nve*n,s=ave*n;e.moveTo(0,-n),e.lineTo(a,s);for(let i=1;i<5;++i){const o=tj*i/5,l=n9(o),c=By(o);e.lineTo(c*n,-l*n),e.lineTo(l*a-c*s,c*a+l*s)}e.closePath()}},B2=io(3),ive={draw(e,t){const n=-io(t/(B2*3));e.moveTo(0,n*2),e.lineTo(-B2*n,-n),e.lineTo(B2*n,-n),e.closePath()}},Qs=-.5,Js=io(3)/2,yS=1/io(12),ove=(yS/2+1)*3,lve={draw(e,t){const n=io(t/ove),a=n/2,s=n*yS,i=a,o=n*yS+n,l=-i,c=o;e.moveTo(a,s),e.lineTo(i,o),e.lineTo(l,c),e.lineTo(Qs*a-Js*s,Js*a+Qs*s),e.lineTo(Qs*i-Js*o,Js*i+Qs*o),e.lineTo(Qs*l-Js*c,Js*l+Qs*c),e.lineTo(Qs*a+Js*s,Qs*s-Js*a),e.lineTo(Qs*i+Js*o,Qs*o-Js*i),e.lineTo(Qs*l+Js*c,Qs*c-Js*l),e.closePath()}};function cve(e,t){let n=null,a=Z4(s);e=typeof e=="function"?e:qr(e||tE),t=typeof t=="function"?t:qr(t===void 0?64:+t);function s(){let i;if(n||(n=i=a()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),i)return n=null,i+""||null}return s.type=function(i){return arguments.length?(e=typeof i=="function"?i:qr(i),s):e},s.size=function(i){return arguments.length?(t=typeof i=="function"?i:qr(+i),s):t},s.context=function(i){return arguments.length?(n=i??null,s):n},s}function Uy(){}function Vy(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function f9(e){this._context=e}f9.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Vy(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Vy(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function dve(e){return new f9(e)}function m9(e){this._context=e}m9.prototype={areaStart:Uy,areaEnd:Uy,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:Vy(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function uve(e){return new m9(e)}function h9(e){this._context=e}h9.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,a=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,a):this._context.moveTo(n,a);break;case 3:this._point=4;default:Vy(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function fve(e){return new h9(e)}function p9(e){this._context=e}p9.prototype={areaStart:Uy,areaEnd:Uy,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function mve(e){return new p9(e)}function PD(e){return e<0?-1:1}function TD(e,t,n){var a=e._x1-e._x0,s=t-e._x1,i=(e._y1-e._y0)/(a||s<0&&-0),o=(n-e._y1)/(s||a<0&&-0),l=(i*s+o*a)/(a+s);return(PD(i)+PD(o))*Math.min(Math.abs(i),Math.abs(o),.5*Math.abs(l))||0}function ID(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function z2(e,t,n){var a=e._x0,s=e._y0,i=e._x1,o=e._y1,l=(i-a)/3;e._context.bezierCurveTo(a+l,s+l*t,i-l,o-l*n,i,o)}function qy(e){this._context=e}qy.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:z2(this,this._t0,ID(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,z2(this,ID(this,n=TD(this,e,t)),n);break;default:z2(this,this._t0,n=TD(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function v9(e){this._context=new x9(e)}(v9.prototype=Object.create(qy.prototype)).point=function(e,t){qy.prototype.point.call(this,t,e)};function x9(e){this._context=e}x9.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,a,s,i){this._context.bezierCurveTo(t,e,a,n,i,s)}};function hve(e){return new qy(e)}function pve(e){return new v9(e)}function g9(e){this._context=e}g9.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var a=DD(e),s=DD(t),i=0,o=1;o<n;++i,++o)this._context.bezierCurveTo(a[0][i],s[0][i],a[1][i],s[1][i],e[o],t[o]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function DD(e){var t,n=e.length-1,a,s=new Array(n),i=new Array(n),o=new Array(n);for(s[0]=0,i[0]=2,o[0]=e[0]+2*e[1],t=1;t<n-1;++t)s[t]=1,i[t]=4,o[t]=4*e[t]+2*e[t+1];for(s[n-1]=2,i[n-1]=7,o[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)a=s[t]/i[t-1],i[t]-=a,o[t]-=a*o[t-1];for(s[n-1]=o[n-1]/i[n-1],t=n-2;t>=0;--t)s[t]=(o[t]-s[t+1])/i[t];for(i[n-1]=(e[n]+s[n-1])/2,t=0;t<n-1;++t)i[t]=2*e[t+1]-s[t+1];return[s,i]}function vve(e){return new g9(e)}function nj(e,t){this._context=e,this._t=t}nj.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function xve(e){return new nj(e,.5)}function gve(e){return new nj(e,0)}function yve(e){return new nj(e,1)}function om(e,t){if((o=e.length)>1)for(var n=1,a,s,i=e[t[0]],o,l=i.length;n<o;++n)for(s=i,i=e[t[n]],a=0;a<l;++a)i[a][1]+=i[a][0]=isNaN(s[a][1])?s[a][0]:s[a][1]}function bS(e){for(var t=e.length,n=new Array(t);--t>=0;)n[t]=t;return n}function bve(e,t){return e[t]}function jve(e){const t=[];return t.key=e,t}function wve(){var e=qr([]),t=bS,n=om,a=bve;function s(i){var o=Array.from(e.apply(this,arguments),jve),l,c=o.length,d=-1,f;for(const u of i)for(l=0,++d;l<c;++l)(o[l][d]=[0,+a(u,o[l].key,d,i)]).data=u;for(l=0,f=eE(t(o));l<c;++l)o[f[l]].index=l;return n(o,f),o}return s.keys=function(i){return arguments.length?(e=typeof i=="function"?i:qr(Array.from(i)),s):e},s.value=function(i){return arguments.length?(a=typeof i=="function"?i:qr(+i),s):a},s.order=function(i){return arguments.length?(t=i==null?bS:typeof i=="function"?i:qr(Array.from(i)),s):t},s.offset=function(i){return arguments.length?(n=i??om,s):n},s}function Nve(e,t){if((a=e.length)>0){for(var n,a,s=0,i=e[0].length,o;s<i;++s){for(o=n=0;n<a;++n)o+=e[n][s][1]||0;if(o)for(n=0;n<a;++n)e[n][s][1]/=o}om(e,t)}}function Sve(e,t){if((s=e.length)>0){for(var n=0,a=e[t[0]],s,i=a.length;n<i;++n){for(var o=0,l=0;o<s;++o)l+=e[o][n][1]||0;a[n][1]+=a[n][0]=-l/2}om(e,t)}}function Cve(e,t){if(!(!((o=e.length)>0)||!((i=(s=e[t[0]]).length)>0))){for(var n=0,a=1,s,i,o;a<i;++a){for(var l=0,c=0,d=0;l<o;++l){for(var f=e[t[l]],u=f[a][1]||0,m=f[a-1][1]||0,h=(u-m)/2,x=0;x<l;++x){var g=e[t[x]],p=g[a][1]||0,v=g[a-1][1]||0;h+=p-v}c+=u,d+=h*u}s[a-1][1]+=s[a-1][0]=n,c&&(n-=d/c)}s[a-1][1]+=s[a-1][0]=n,om(e,t)}}function vv(e){"@babel/helpers - typeof";return vv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},vv(e)}var Ave=["type","size","sizeType"];function jS(){return jS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},jS.apply(this,arguments)}function kD(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function OD(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?kD(Object(n),!0).forEach(function(a){Eve(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):kD(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function Eve(e,t,n){return t=Pve(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Pve(e){var t=Tve(e,"string");return vv(t)=="symbol"?t:t+""}function Tve(e,t){if(vv(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t||"default");if(vv(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ive(e,t){if(e==null)return{};var n=Dve(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function Dve(e,t){if(e==null)return{};var n={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;n[a]=e[a]}return n}var y9={symbolCircle:tE,symbolCross:Jpe,symbolDiamond:eve,symbolSquare:tve,symbolStar:sve,symbolTriangle:ive,symbolWye:lve},kve=Math.PI/180,Ove=function(t){var n="symbol".concat(ej(t));return y9[n]||tE},_ve=function(t,n,a){if(n==="area")return t;switch(a){case"cross":return 5*t*t/9;case"diamond":return .5*t*t/Math.sqrt(3);case"square":return t*t;case"star":{var s=18*kve;return 1.25*t*t*(Math.tan(s)-Math.tan(s*2)*Math.pow(Math.tan(s),2))}case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}},Lve=function(t,n){y9["symbol".concat(ej(t))]=n},rE=function(t){var n=t.type,a=n===void 0?"circle":n,s=t.size,i=s===void 0?64:s,o=t.sizeType,l=o===void 0?"area":o,c=Ive(t,Ave),d=OD(OD({},c),{},{type:a,size:i,sizeType:l}),f=function(){var p=Ove(a),v=cve().type(p).size(_ve(i,l,a));return v()},u=d.className,m=d.cx,h=d.cy,x=sr(d,!0);return m===+m&&h===+h&&i===+i?pe.createElement("path",jS({},x,{className:vr("recharts-symbols",u),transform:"translate(".concat(m,", ").concat(h,")"),d:f()})):null};rE.registerSymbol=Lve;function lm(e){"@babel/helpers - typeof";return lm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},lm(e)}function wS(){return wS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},wS.apply(this,arguments)}function _D(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function Rve(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?_D(Object(n),!0).forEach(function(a){xv(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_D(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function Fve(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function LD(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,j9(a.key),a)}}function Mve(e,t,n){return t&&LD(e.prototype,t),n&&LD(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function $ve(e,t,n){return t=Wy(t),Bve(e,b9()?Reflect.construct(t,n||[],Wy(e).constructor):t.apply(e,n))}function Bve(e,t){if(t&&(lm(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return zve(e)}function zve(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b9(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(b9=function(){return!!e})()}function Wy(e){return Wy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Wy(e)}function Uve(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&NS(e,t)}function NS(e,t){return NS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},NS(e,t)}function xv(e,t,n){return t=j9(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function j9(e){var t=Vve(e,"string");return lm(t)=="symbol"?t:t+""}function Vve(e,t){if(lm(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t||"default");if(lm(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Zs=32,nE=function(e){function t(){return Fve(this,t),$ve(this,t,arguments)}return Uve(t,e),Mve(t,[{key:"renderIcon",value:function(a){var s=this.props.inactiveColor,i=Zs/2,o=Zs/6,l=Zs/3,c=a.inactive?s:a.color;if(a.type==="plainline")return pe.createElement("line",{strokeWidth:4,fill:"none",stroke:c,strokeDasharray:a.payload.strokeDasharray,x1:0,y1:i,x2:Zs,y2:i,className:"recharts-legend-icon"});if(a.type==="line")return pe.createElement("path",{strokeWidth:4,fill:"none",stroke:c,d:"M0,".concat(i,"h").concat(l,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(2*l,",").concat(i,`
            H`).concat(Zs,"M").concat(2*l,",").concat(i,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(l,",").concat(i),className:"recharts-legend-icon"});if(a.type==="rect")return pe.createElement("path",{stroke:"none",fill:c,d:"M0,".concat(Zs/8,"h").concat(Zs,"v").concat(Zs*3/4,"h").concat(-Zs,"z"),className:"recharts-legend-icon"});if(pe.isValidElement(a.legendIcon)){var d=Rve({},a);return delete d.legendIcon,pe.cloneElement(a.legendIcon,d)}return pe.createElement(rE,{fill:c,cx:i,cy:i,size:Zs,sizeType:"diameter",type:a.type})}},{key:"renderItems",value:function(){var a=this,s=this.props,i=s.payload,o=s.iconSize,l=s.layout,c=s.formatter,d=s.inactiveColor,f={x:0,y:0,width:Zs,height:Zs},u={display:l==="horizontal"?"inline-block":"block",marginRight:10},m={display:"inline-block",verticalAlign:"middle",marginRight:4};return i.map(function(h,x){var g=h.formatter||c,p=vr(xv(xv({"recharts-legend-item":!0},"legend-item-".concat(x),!0),"inactive",h.inactive));if(h.type==="none")return null;var v=Zt(h.value)?null:h.value;Yd(!Zt(h.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var y=h.inactive?d:h.color;return pe.createElement("li",wS({className:p,style:u,key:"legend-item-".concat(x)},$y(a.props,h,x)),pe.createElement(mS,{width:o,height:o,viewBox:f,style:m},a.renderIcon(h)),pe.createElement("span",{className:"recharts-legend-item-text",style:{color:y}},g?g(v,h,x):v))})}},{key:"render",value:function(){var a=this.props,s=a.payload,i=a.layout,o=a.align;if(!s||!s.length)return null;var l={padding:0,margin:0,textAlign:i==="horizontal"?o:"left"};return pe.createElement("ul",{className:"recharts-default-legend",style:l},this.renderItems())}}])}(w.PureComponent);xv(nE,"displayName","Legend");xv(nE,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var qve=z1;function Wve(){this.__data__=new qve,this.size=0}var Hve=Wve;function Gve(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}var Kve=Gve;function Yve(e){return this.__data__.get(e)}var Xve=Yve;function Qve(e){return this.__data__.has(e)}var Jve=Qve,Zve=z1,exe=q4,txe=W4,rxe=200;function nxe(e,t){var n=this.__data__;if(n instanceof Zve){var a=n.__data__;if(!exe||a.length<rxe-1)return a.push([e,t]),this.size=++n.size,this;n=this.__data__=new txe(a)}return n.set(e,t),this.size=n.size,this}var axe=nxe,sxe=z1,ixe=Hve,oxe=Kve,lxe=Xve,cxe=Jve,dxe=axe;function th(e){var t=this.__data__=new sxe(e);this.size=t.size}th.prototype.clear=ixe;th.prototype.delete=oxe;th.prototype.get=lxe;th.prototype.has=cxe;th.prototype.set=dxe;var w9=th,uxe="__lodash_hash_undefined__";function fxe(e){return this.__data__.set(e,uxe),this}var mxe=fxe;function hxe(e){return this.__data__.has(e)}var pxe=hxe,vxe=W4,xxe=mxe,gxe=pxe;function Hy(e){var t=-1,n=e==null?0:e.length;for(this.__data__=new vxe;++t<n;)this.add(e[t])}Hy.prototype.add=Hy.prototype.push=xxe;Hy.prototype.has=gxe;var N9=Hy;function yxe(e,t){for(var n=-1,a=e==null?0:e.length;++n<a;)if(t(e[n],n,e))return!0;return!1}var S9=yxe;function bxe(e,t){return e.has(t)}var C9=bxe,jxe=N9,wxe=S9,Nxe=C9,Sxe=1,Cxe=2;function Axe(e,t,n,a,s,i){var o=n&Sxe,l=e.length,c=t.length;if(l!=c&&!(o&&c>l))return!1;var d=i.get(e),f=i.get(t);if(d&&f)return d==t&&f==e;var u=-1,m=!0,h=n&Cxe?new jxe:void 0;for(i.set(e,t),i.set(t,e);++u<l;){var x=e[u],g=t[u];if(a)var p=o?a(g,x,u,t,e,i):a(x,g,u,e,t,i);if(p!==void 0){if(p)continue;m=!1;break}if(h){if(!wxe(t,function(v,y){if(!Nxe(h,y)&&(x===v||s(x,v,n,a,i)))return h.push(y)})){m=!1;break}}else if(!(x===g||s(x,g,n,a,i))){m=!1;break}}return i.delete(e),i.delete(t),m}var A9=Axe,Exe=Wo,Pxe=Exe.Uint8Array,Txe=Pxe;function Ixe(e){var t=-1,n=Array(e.size);return e.forEach(function(a,s){n[++t]=[s,a]}),n}var Dxe=Ixe;function kxe(e){var t=-1,n=Array(e.size);return e.forEach(function(a){n[++t]=a}),n}var aE=kxe,RD=Nx,FD=Txe,Oxe=V4,_xe=A9,Lxe=Dxe,Rxe=aE,Fxe=1,Mxe=2,$xe="[object Boolean]",Bxe="[object Date]",zxe="[object Error]",Uxe="[object Map]",Vxe="[object Number]",qxe="[object RegExp]",Wxe="[object Set]",Hxe="[object String]",Gxe="[object Symbol]",Kxe="[object ArrayBuffer]",Yxe="[object DataView]",MD=RD?RD.prototype:void 0,U2=MD?MD.valueOf:void 0;function Xxe(e,t,n,a,s,i,o){switch(n){case Yxe:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case Kxe:return!(e.byteLength!=t.byteLength||!i(new FD(e),new FD(t)));case $xe:case Bxe:case Vxe:return Oxe(+e,+t);case zxe:return e.name==t.name&&e.message==t.message;case qxe:case Hxe:return e==t+"";case Uxe:var l=Lxe;case Wxe:var c=a&Fxe;if(l||(l=Rxe),e.size!=t.size&&!c)return!1;var d=o.get(e);if(d)return d==t;a|=Mxe,o.set(e,t);var f=_xe(l(e),l(t),a,s,i,o);return o.delete(e),f;case Gxe:if(U2)return U2.call(e)==U2.call(t)}return!1}var Qxe=Xxe;function Jxe(e,t){for(var n=-1,a=t.length,s=e.length;++n<a;)e[s+n]=t[n];return e}var E9=Jxe,Zxe=E9,ege=vs;function tge(e,t,n){var a=t(e);return ege(e)?a:Zxe(a,n(e))}var rge=tge;function nge(e,t){for(var n=-1,a=e==null?0:e.length,s=0,i=[];++n<a;){var o=e[n];t(o,n,e)&&(i[s++]=o)}return i}var age=nge;function sge(){return[]}var ige=sge,oge=age,lge=ige,cge=Object.prototype,dge=cge.propertyIsEnumerable,$D=Object.getOwnPropertySymbols,uge=$D?function(e){return e==null?[]:(e=Object(e),oge($D(e),function(t){return dge.call(e,t)}))}:lge,fge=uge;function mge(e,t){for(var n=-1,a=Array(e);++n<e;)a[n]=t(n);return a}var hge=mge,pge=_l,vge=Ll,xge="[object Arguments]";function gge(e){return vge(e)&&pge(e)==xge}var yge=gge,BD=yge,bge=Ll,P9=Object.prototype,jge=P9.hasOwnProperty,wge=P9.propertyIsEnumerable,Nge=BD(function(){return arguments}())?BD:function(e){return bge(e)&&jge.call(e,"callee")&&!wge.call(e,"callee")},sE=Nge,Gy={exports:{}};function Sge(){return!1}var Cge=Sge;Gy.exports;(function(e,t){var n=Wo,a=Cge,s=t&&!t.nodeType&&t,i=s&&!0&&e&&!e.nodeType&&e,o=i&&i.exports===s,l=o?n.Buffer:void 0,c=l?l.isBuffer:void 0,d=c||a;e.exports=d})(Gy,Gy.exports);var T9=Gy.exports,Age=9007199254740991,Ege=/^(?:0|[1-9]\d*)$/;function Pge(e,t){var n=typeof e;return t=t??Age,!!t&&(n=="number"||n!="symbol"&&Ege.test(e))&&e>-1&&e%1==0&&e<t}var iE=Pge,Tge=9007199254740991;function Ige(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=Tge}var oE=Ige,Dge=_l,kge=oE,Oge=Ll,_ge="[object Arguments]",Lge="[object Array]",Rge="[object Boolean]",Fge="[object Date]",Mge="[object Error]",$ge="[object Function]",Bge="[object Map]",zge="[object Number]",Uge="[object Object]",Vge="[object RegExp]",qge="[object Set]",Wge="[object String]",Hge="[object WeakMap]",Gge="[object ArrayBuffer]",Kge="[object DataView]",Yge="[object Float32Array]",Xge="[object Float64Array]",Qge="[object Int8Array]",Jge="[object Int16Array]",Zge="[object Int32Array]",e0e="[object Uint8Array]",t0e="[object Uint8ClampedArray]",r0e="[object Uint16Array]",n0e="[object Uint32Array]",Yr={};Yr[Yge]=Yr[Xge]=Yr[Qge]=Yr[Jge]=Yr[Zge]=Yr[e0e]=Yr[t0e]=Yr[r0e]=Yr[n0e]=!0;Yr[_ge]=Yr[Lge]=Yr[Gge]=Yr[Rge]=Yr[Kge]=Yr[Fge]=Yr[Mge]=Yr[$ge]=Yr[Bge]=Yr[zge]=Yr[Uge]=Yr[Vge]=Yr[qge]=Yr[Wge]=Yr[Hge]=!1;function a0e(e){return Oge(e)&&kge(e.length)&&!!Yr[Dge(e)]}var s0e=a0e;function i0e(e){return function(t){return e(t)}}var I9=i0e,Ky={exports:{}};Ky.exports;(function(e,t){var n=M8,a=t&&!t.nodeType&&t,s=a&&!0&&e&&!e.nodeType&&e,i=s&&s.exports===a,o=i&&n.process,l=function(){try{var c=s&&s.require&&s.require("util").types;return c||o&&o.binding&&o.binding("util")}catch{}}();e.exports=l})(Ky,Ky.exports);var o0e=Ky.exports,l0e=s0e,c0e=I9,zD=o0e,UD=zD&&zD.isTypedArray,d0e=UD?c0e(UD):l0e,D9=d0e,u0e=hge,f0e=sE,m0e=vs,h0e=T9,p0e=iE,v0e=D9,x0e=Object.prototype,g0e=x0e.hasOwnProperty;function y0e(e,t){var n=m0e(e),a=!n&&f0e(e),s=!n&&!a&&h0e(e),i=!n&&!a&&!s&&v0e(e),o=n||a||s||i,l=o?u0e(e.length,String):[],c=l.length;for(var d in e)(t||g0e.call(e,d))&&!(o&&(d=="length"||s&&(d=="offset"||d=="parent")||i&&(d=="buffer"||d=="byteLength"||d=="byteOffset")||p0e(d,c)))&&l.push(d);return l}var b0e=y0e,j0e=Object.prototype;function w0e(e){var t=e&&e.constructor,n=typeof t=="function"&&t.prototype||j0e;return e===n}var N0e=w0e;function S0e(e,t){return function(n){return e(t(n))}}var k9=S0e,C0e=k9,A0e=C0e(Object.keys,Object),E0e=A0e,P0e=N0e,T0e=E0e,I0e=Object.prototype,D0e=I0e.hasOwnProperty;function k0e(e){if(!P0e(e))return T0e(e);var t=[];for(var n in Object(e))D0e.call(e,n)&&n!="constructor"&&t.push(n);return t}var O0e=k0e,_0e=U4,L0e=oE;function R0e(e){return e!=null&&L0e(e.length)&&!_0e(e)}var aj=R0e,F0e=b0e,M0e=O0e,$0e=aj;function B0e(e){return $0e(e)?F0e(e):M0e(e)}var lE=B0e,z0e=rge,U0e=fge,V0e=lE;function q0e(e){return z0e(e,V0e,U0e)}var W0e=q0e,VD=W0e,H0e=1,G0e=Object.prototype,K0e=G0e.hasOwnProperty;function Y0e(e,t,n,a,s,i){var o=n&H0e,l=VD(e),c=l.length,d=VD(t),f=d.length;if(c!=f&&!o)return!1;for(var u=c;u--;){var m=l[u];if(!(o?m in t:K0e.call(t,m)))return!1}var h=i.get(e),x=i.get(t);if(h&&x)return h==t&&x==e;var g=!0;i.set(e,t),i.set(t,e);for(var p=o;++u<c;){m=l[u];var v=e[m],y=t[m];if(a)var b=o?a(y,v,m,t,e,i):a(v,y,m,e,t,i);if(!(b===void 0?v===y||s(v,y,n,a,i):b)){g=!1;break}p||(p=m=="constructor")}if(g&&!p){var j=e.constructor,C=t.constructor;j!=C&&"constructor"in e&&"constructor"in t&&!(typeof j=="function"&&j instanceof j&&typeof C=="function"&&C instanceof C)&&(g=!1)}return i.delete(e),i.delete(t),g}var X0e=Y0e,Q0e=wu,J0e=Wo,Z0e=Q0e(J0e,"DataView"),eye=Z0e,tye=wu,rye=Wo,nye=tye(rye,"Promise"),aye=nye,sye=wu,iye=Wo,oye=sye(iye,"Set"),O9=oye,lye=wu,cye=Wo,dye=lye(cye,"WeakMap"),uye=dye,SS=eye,CS=q4,AS=aye,ES=O9,PS=uye,_9=_l,rh=B8,qD="[object Map]",fye="[object Object]",WD="[object Promise]",HD="[object Set]",GD="[object WeakMap]",KD="[object DataView]",mye=rh(SS),hye=rh(CS),pye=rh(AS),vye=rh(ES),xye=rh(PS),wd=_9;(SS&&wd(new SS(new ArrayBuffer(1)))!=KD||CS&&wd(new CS)!=qD||AS&&wd(AS.resolve())!=WD||ES&&wd(new ES)!=HD||PS&&wd(new PS)!=GD)&&(wd=function(e){var t=_9(e),n=t==fye?e.constructor:void 0,a=n?rh(n):"";if(a)switch(a){case mye:return KD;case hye:return qD;case pye:return WD;case vye:return HD;case xye:return GD}return t});var gye=wd,V2=w9,yye=A9,bye=Qxe,jye=X0e,YD=gye,XD=vs,QD=T9,wye=D9,Nye=1,JD="[object Arguments]",ZD="[object Array]",i0="[object Object]",Sye=Object.prototype,ek=Sye.hasOwnProperty;function Cye(e,t,n,a,s,i){var o=XD(e),l=XD(t),c=o?ZD:YD(e),d=l?ZD:YD(t);c=c==JD?i0:c,d=d==JD?i0:d;var f=c==i0,u=d==i0,m=c==d;if(m&&QD(e)){if(!QD(t))return!1;o=!0,f=!1}if(m&&!f)return i||(i=new V2),o||wye(e)?yye(e,t,n,a,s,i):bye(e,t,c,n,a,s,i);if(!(n&Nye)){var h=f&&ek.call(e,"__wrapped__"),x=u&&ek.call(t,"__wrapped__");if(h||x){var g=h?e.value():e,p=x?t.value():t;return i||(i=new V2),s(g,p,n,a,i)}}return m?(i||(i=new V2),jye(e,t,n,a,s,i)):!1}var Aye=Cye,Eye=Aye,tk=Ll;function L9(e,t,n,a,s){return e===t?!0:e==null||t==null||!tk(e)&&!tk(t)?e!==e&&t!==t:Eye(e,t,n,a,L9,s)}var cE=L9,Pye=w9,Tye=cE,Iye=1,Dye=2;function kye(e,t,n,a){var s=n.length,i=s,o=!a;if(e==null)return!i;for(e=Object(e);s--;){var l=n[s];if(o&&l[2]?l[1]!==e[l[0]]:!(l[0]in e))return!1}for(;++s<i;){l=n[s];var c=l[0],d=e[c],f=l[1];if(o&&l[2]){if(d===void 0&&!(c in e))return!1}else{var u=new Pye;if(a)var m=a(d,f,c,e,t,u);if(!(m===void 0?Tye(f,d,Iye|Dye,a,u):m))return!1}}return!0}var Oye=kye,_ye=Jc;function Lye(e){return e===e&&!_ye(e)}var R9=Lye,Rye=R9,Fye=lE;function Mye(e){for(var t=Fye(e),n=t.length;n--;){var a=t[n],s=e[a];t[n]=[a,s,Rye(s)]}return t}var $ye=Mye;function Bye(e,t){return function(n){return n==null?!1:n[e]===t&&(t!==void 0||e in Object(n))}}var F9=Bye,zye=Oye,Uye=$ye,Vye=F9;function qye(e){var t=Uye(e);return t.length==1&&t[0][2]?Vye(t[0][0],t[0][1]):function(n){return n===e||zye(n,e,t)}}var Wye=qye;function Hye(e,t){return e!=null&&t in Object(e)}var Gye=Hye,Kye=W8,Yye=sE,Xye=vs,Qye=iE,Jye=oE,Zye=V1;function ebe(e,t,n){t=Kye(t,e);for(var a=-1,s=t.length,i=!1;++a<s;){var o=Zye(t[a]);if(!(i=e!=null&&n(e,o)))break;e=e[o]}return i||++a!=s?i:(s=e==null?0:e.length,!!s&&Jye(s)&&Qye(o,s)&&(Xye(e)||Yye(e)))}var tbe=ebe,rbe=Gye,nbe=tbe;function abe(e,t){return e!=null&&nbe(e,t,rbe)}var sbe=abe,ibe=cE,obe=H8,lbe=sbe,cbe=z4,dbe=R9,ube=F9,fbe=V1,mbe=1,hbe=2;function pbe(e,t){return cbe(e)&&dbe(t)?ube(fbe(e),t):function(n){var a=obe(n,e);return a===void 0&&a===t?lbe(n,e):ibe(t,a,mbe|hbe)}}var vbe=pbe;function xbe(e){return e}var nh=xbe;function gbe(e){return function(t){return t==null?void 0:t[e]}}var ybe=gbe,bbe=K4;function jbe(e){return function(t){return bbe(t,e)}}var wbe=jbe,Nbe=ybe,Sbe=wbe,Cbe=z4,Abe=V1;function Ebe(e){return Cbe(e)?Nbe(Abe(e)):Sbe(e)}var Pbe=Ebe,Tbe=Wye,Ibe=vbe,Dbe=nh,kbe=vs,Obe=Pbe;function _be(e){return typeof e=="function"?e:e==null?Dbe:typeof e=="object"?kbe(e)?Ibe(e[0],e[1]):Tbe(e):Obe(e)}var ah=_be;function Lbe(e,t,n,a){for(var s=e.length,i=n+(a?1:-1);a?i--:++i<s;)if(t(e[i],i,e))return i;return-1}var Rbe=Lbe;function Fbe(e){return e!==e}var Mbe=Fbe;function $be(e,t,n){for(var a=n-1,s=e.length;++a<s;)if(e[a]===t)return a;return-1}var Bbe=$be,zbe=Rbe,Ube=Mbe,Vbe=Bbe;function qbe(e,t,n){return t===t?Vbe(e,t,n):zbe(e,Ube,n)}var Wbe=qbe,Hbe=Wbe;function Gbe(e,t){var n=e==null?0:e.length;return!!n&&Hbe(e,t,0)>-1}var Kbe=Gbe;function Ybe(e,t,n){for(var a=-1,s=e==null?0:e.length;++a<s;)if(n(t,e[a]))return!0;return!1}var Xbe=Ybe;function Qbe(){}var Jbe=Qbe,q2=O9,Zbe=Jbe,e1e=aE,t1e=1/0,r1e=q2&&1/e1e(new q2([,-0]))[1]==t1e?function(e){return new q2(e)}:Zbe,n1e=r1e,a1e=N9,s1e=Kbe,i1e=Xbe,o1e=C9,l1e=n1e,c1e=aE,d1e=200;function u1e(e,t,n){var a=-1,s=s1e,i=e.length,o=!0,l=[],c=l;if(n)o=!1,s=i1e;else if(i>=d1e){var d=t?null:l1e(e);if(d)return c1e(d);o=!1,s=o1e,c=new a1e}else c=t?[]:l;e:for(;++a<i;){var f=e[a],u=t?t(f):f;if(f=n||f!==0?f:0,o&&u===u){for(var m=c.length;m--;)if(c[m]===u)continue e;t&&c.push(u),l.push(f)}else s(c,u,n)||(c!==l&&c.push(u),l.push(f))}return l}var f1e=u1e,m1e=ah,h1e=f1e;function p1e(e,t){return e&&e.length?h1e(e,m1e(t)):[]}var v1e=p1e;const rk=Er(v1e);function M9(e,t,n){return t===!0?rk(e,n):Zt(t)?rk(e,t):e}function cm(e){"@babel/helpers - typeof";return cm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},cm(e)}var x1e=["ref"];function nk(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function sl(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?nk(Object(n),!0).forEach(function(a){sj(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nk(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function g1e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ak(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,B9(a.key),a)}}function y1e(e,t,n){return t&&ak(e.prototype,t),n&&ak(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function b1e(e,t,n){return t=Yy(t),j1e(e,$9()?Reflect.construct(t,n||[],Yy(e).constructor):t.apply(e,n))}function j1e(e,t){if(t&&(cm(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return w1e(e)}function w1e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function $9(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return($9=function(){return!!e})()}function Yy(e){return Yy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Yy(e)}function N1e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&TS(e,t)}function TS(e,t){return TS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},TS(e,t)}function sj(e,t,n){return t=B9(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function B9(e){var t=S1e(e,"string");return cm(t)=="symbol"?t:t+""}function S1e(e,t){if(cm(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t||"default");if(cm(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function C1e(e,t){if(e==null)return{};var n=A1e(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function A1e(e,t){if(e==null)return{};var n={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;n[a]=e[a]}return n}function E1e(e){return e.value}function P1e(e,t){if(pe.isValidElement(e))return pe.cloneElement(e,t);if(typeof e=="function")return pe.createElement(e,t);t.ref;var n=C1e(t,x1e);return pe.createElement(nE,n)}var sk=1,Uf=function(e){function t(){var n;g1e(this,t);for(var a=arguments.length,s=new Array(a),i=0;i<a;i++)s[i]=arguments[i];return n=b1e(this,t,[].concat(s)),sj(n,"lastBoundingBox",{width:-1,height:-1}),n}return N1e(t,e),y1e(t,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var a=this.wrapperNode.getBoundingClientRect();return a.height=this.wrapperNode.offsetHeight,a.width=this.wrapperNode.offsetWidth,a}return null}},{key:"updateBBox",value:function(){var a=this.props.onBBoxUpdate,s=this.getBBox();s?(Math.abs(s.width-this.lastBoundingBox.width)>sk||Math.abs(s.height-this.lastBoundingBox.height)>sk)&&(this.lastBoundingBox.width=s.width,this.lastBoundingBox.height=s.height,a&&a(s)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,a&&a(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?sl({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(a){var s=this.props,i=s.layout,o=s.align,l=s.verticalAlign,c=s.margin,d=s.chartWidth,f=s.chartHeight,u,m;if(!a||(a.left===void 0||a.left===null)&&(a.right===void 0||a.right===null))if(o==="center"&&i==="vertical"){var h=this.getBBoxSnapshot();u={left:((d||0)-h.width)/2}}else u=o==="right"?{right:c&&c.right||0}:{left:c&&c.left||0};if(!a||(a.top===void 0||a.top===null)&&(a.bottom===void 0||a.bottom===null))if(l==="middle"){var x=this.getBBoxSnapshot();m={top:((f||0)-x.height)/2}}else m=l==="bottom"?{bottom:c&&c.bottom||0}:{top:c&&c.top||0};return sl(sl({},u),m)}},{key:"render",value:function(){var a=this,s=this.props,i=s.content,o=s.width,l=s.height,c=s.wrapperStyle,d=s.payloadUniqBy,f=s.payload,u=sl(sl({position:"absolute",width:o||"auto",height:l||"auto"},this.getDefaultPosition(c)),c);return pe.createElement("div",{className:"recharts-legend-wrapper",style:u,ref:function(h){a.wrapperNode=h}},P1e(i,sl(sl({},this.props),{},{payload:M9(f,d,E1e)})))}}],[{key:"getWithHeight",value:function(a,s){var i=sl(sl({},this.defaultProps),a.props),o=i.layout;return o==="vertical"&&dt(a.props.height)?{height:a.props.height}:o==="horizontal"?{width:a.props.width||s}:null}}])}(w.PureComponent);sj(Uf,"displayName","Legend");sj(Uf,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var ik=Nx,T1e=sE,I1e=vs,ok=ik?ik.isConcatSpreadable:void 0;function D1e(e){return I1e(e)||T1e(e)||!!(ok&&e&&e[ok])}var k1e=D1e,O1e=E9,_1e=k1e;function z9(e,t,n,a,s){var i=-1,o=e.length;for(n||(n=_1e),s||(s=[]);++i<o;){var l=e[i];t>0&&n(l)?t>1?z9(l,t-1,n,a,s):O1e(s,l):a||(s[s.length]=l)}return s}var U9=z9;function L1e(e){return function(t,n,a){for(var s=-1,i=Object(t),o=a(t),l=o.length;l--;){var c=o[e?l:++s];if(n(i[c],c,i)===!1)break}return t}}var R1e=L1e,F1e=R1e,M1e=F1e(),$1e=M1e,B1e=$1e,z1e=lE;function U1e(e,t){return e&&B1e(e,t,z1e)}var V9=U1e,V1e=aj;function q1e(e,t){return function(n,a){if(n==null)return n;if(!V1e(n))return e(n,a);for(var s=n.length,i=t?s:-1,o=Object(n);(t?i--:++i<s)&&a(o[i],i,o)!==!1;);return n}}var W1e=q1e,H1e=V9,G1e=W1e,K1e=G1e(H1e),dE=K1e,Y1e=dE,X1e=aj;function Q1e(e,t){var n=-1,a=X1e(e)?Array(e.length):[];return Y1e(e,function(s,i,o){a[++n]=t(s,i,o)}),a}var q9=Q1e;function J1e(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}var Z1e=J1e,lk=Ym;function eje(e,t){if(e!==t){var n=e!==void 0,a=e===null,s=e===e,i=lk(e),o=t!==void 0,l=t===null,c=t===t,d=lk(t);if(!l&&!d&&!i&&e>t||i&&o&&c&&!l&&!d||a&&o&&c||!n&&c||!s)return 1;if(!a&&!i&&!d&&e<t||d&&n&&s&&!a&&!i||l&&n&&s||!o&&s||!c)return-1}return 0}var tje=eje,rje=tje;function nje(e,t,n){for(var a=-1,s=e.criteria,i=t.criteria,o=s.length,l=n.length;++a<o;){var c=rje(s[a],i[a]);if(c){if(a>=l)return c;var d=n[a];return c*(d=="desc"?-1:1)}}return e.index-t.index}var aje=nje,W2=G4,sje=K4,ije=ah,oje=q9,lje=Z1e,cje=I9,dje=aje,uje=nh,fje=vs;function mje(e,t,n){t.length?t=W2(t,function(i){return fje(i)?function(o){return sje(o,i.length===1?i[0]:i)}:i}):t=[uje];var a=-1;t=W2(t,cje(ije));var s=oje(e,function(i,o,l){var c=W2(t,function(d){return d(i)});return{criteria:c,index:++a,value:i}});return lje(s,function(i,o){return dje(i,o,n)})}var hje=mje;function pje(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}var vje=pje,xje=vje,ck=Math.max;function gje(e,t,n){return t=ck(t===void 0?e.length-1:t,0),function(){for(var a=arguments,s=-1,i=ck(a.length-t,0),o=Array(i);++s<i;)o[s]=a[t+s];s=-1;for(var l=Array(t+1);++s<t;)l[s]=a[s];return l[t]=n(o),xje(e,this,l)}}var yje=gje;function bje(e){return function(){return e}}var jje=bje,wje=wu,Nje=function(){try{var e=wje(Object,"defineProperty");return e({},"",{}),e}catch{}}(),W9=Nje,Sje=jje,dk=W9,Cje=nh,Aje=dk?function(e,t){return dk(e,"toString",{configurable:!0,enumerable:!1,value:Sje(t),writable:!0})}:Cje,Eje=Aje,Pje=800,Tje=16,Ije=Date.now;function Dje(e){var t=0,n=0;return function(){var a=Ije(),s=Tje-(a-n);if(n=a,s>0){if(++t>=Pje)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var kje=Dje,Oje=Eje,_je=kje,Lje=_je(Oje),Rje=Lje,Fje=nh,Mje=yje,$je=Rje;function Bje(e,t){return $je(Mje(e,t,Fje),e+"")}var zje=Bje,Uje=V4,Vje=aj,qje=iE,Wje=Jc;function Hje(e,t,n){if(!Wje(n))return!1;var a=typeof t;return(a=="number"?Vje(n)&&qje(t,n.length):a=="string"&&t in n)?Uje(n[t],e):!1}var ij=Hje,Gje=U9,Kje=hje,Yje=zje,uk=ij,Xje=Yje(function(e,t){if(e==null)return[];var n=t.length;return n>1&&uk(e,t[0],t[1])?t=[]:n>2&&uk(t[0],t[1],t[2])&&(t=[t[0]]),Kje(e,Gje(t,1),[])}),Qje=Xje;const uE=Er(Qje);function gv(e){"@babel/helpers - typeof";return gv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},gv(e)}function IS(){return IS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},IS.apply(this,arguments)}function Jje(e,t){return rwe(e)||twe(e,t)||ewe(e,t)||Zje()}function Zje(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ewe(e,t){if(e){if(typeof e=="string")return fk(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return fk(e,t)}}function fk(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function twe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var a,s,i,o,l=[],c=!0,d=!1;try{if(i=(n=n.call(e)).next,t===0){if(Object(n)!==n)return;c=!1}else for(;!(c=(a=i.call(n)).done)&&(l.push(a.value),l.length!==t);c=!0);}catch(f){d=!0,s=f}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw s}}return l}}function rwe(e){if(Array.isArray(e))return e}function mk(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function H2(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?mk(Object(n),!0).forEach(function(a){nwe(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mk(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function nwe(e,t,n){return t=awe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function awe(e){var t=swe(e,"string");return gv(t)=="symbol"?t:t+""}function swe(e,t){if(gv(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t||"default");if(gv(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function iwe(e){return Array.isArray(e)&&Qn(e[0])&&Qn(e[1])?e.join(" ~ "):e}var owe=function(t){var n=t.separator,a=n===void 0?" : ":n,s=t.contentStyle,i=s===void 0?{}:s,o=t.itemStyle,l=o===void 0?{}:o,c=t.labelStyle,d=c===void 0?{}:c,f=t.payload,u=t.formatter,m=t.itemSorter,h=t.wrapperClassName,x=t.labelClassName,g=t.label,p=t.labelFormatter,v=t.accessibilityLayer,y=v===void 0?!1:v,b=function(){if(f&&f.length){var A={padding:0,margin:0},_=(m?uE(f,m):f).map(function(k,L){if(k.type==="none")return null;var $=H2({display:"block",paddingTop:4,paddingBottom:4,color:k.color||"#000"},l),M=k.formatter||u||iwe,B=k.value,U=k.name,W=B,q=U;if(M&&W!=null&&q!=null){var R=M(B,U,k,L,f);if(Array.isArray(R)){var V=Jje(R,2);W=V[0],q=V[1]}else W=R}return pe.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(L),style:$},Qn(q)?pe.createElement("span",{className:"recharts-tooltip-item-name"},q):null,Qn(q)?pe.createElement("span",{className:"recharts-tooltip-item-separator"},a):null,pe.createElement("span",{className:"recharts-tooltip-item-value"},W),pe.createElement("span",{className:"recharts-tooltip-item-unit"},k.unit||""))});return pe.createElement("ul",{className:"recharts-tooltip-item-list",style:A},_)}return null},j=H2({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},i),C=H2({margin:0},d),E=!ir(g),S=E?g:"",N=vr("recharts-default-tooltip",h),I=vr("recharts-tooltip-label",x);E&&p&&f!==void 0&&f!==null&&(S=p(g,f));var D=y?{role:"status","aria-live":"assertive"}:{};return pe.createElement("div",IS({className:N,style:j},D),pe.createElement("p",{className:I,style:C},pe.isValidElement(S)?S:"".concat(S)),b())};function yv(e){"@babel/helpers - typeof";return yv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},yv(e)}function o0(e,t,n){return t=lwe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function lwe(e){var t=cwe(e,"string");return yv(t)=="symbol"?t:t+""}function cwe(e,t){if(yv(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t||"default");if(yv(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var np="recharts-tooltip-wrapper",dwe={visibility:"hidden"};function uwe(e){var t=e.coordinate,n=e.translateX,a=e.translateY;return vr(np,o0(o0(o0(o0({},"".concat(np,"-right"),dt(n)&&t&&dt(t.x)&&n>=t.x),"".concat(np,"-left"),dt(n)&&t&&dt(t.x)&&n<t.x),"".concat(np,"-bottom"),dt(a)&&t&&dt(t.y)&&a>=t.y),"".concat(np,"-top"),dt(a)&&t&&dt(t.y)&&a<t.y))}function hk(e){var t=e.allowEscapeViewBox,n=e.coordinate,a=e.key,s=e.offsetTopLeft,i=e.position,o=e.reverseDirection,l=e.tooltipDimension,c=e.viewBox,d=e.viewBoxDimension;if(i&&dt(i[a]))return i[a];var f=n[a]-l-s,u=n[a]+s;if(t[a])return o[a]?f:u;if(o[a]){var m=f,h=c[a];return m<h?Math.max(u,c[a]):Math.max(f,c[a])}var x=u+l,g=c[a]+d;return x>g?Math.max(f,c[a]):Math.max(u,c[a])}function fwe(e){var t=e.translateX,n=e.translateY,a=e.useTranslate3d;return{transform:a?"translate3d(".concat(t,"px, ").concat(n,"px, 0)"):"translate(".concat(t,"px, ").concat(n,"px)")}}function mwe(e){var t=e.allowEscapeViewBox,n=e.coordinate,a=e.offsetTopLeft,s=e.position,i=e.reverseDirection,o=e.tooltipBox,l=e.useTranslate3d,c=e.viewBox,d,f,u;return o.height>0&&o.width>0&&n?(f=hk({allowEscapeViewBox:t,coordinate:n,key:"x",offsetTopLeft:a,position:s,reverseDirection:i,tooltipDimension:o.width,viewBox:c,viewBoxDimension:c.width}),u=hk({allowEscapeViewBox:t,coordinate:n,key:"y",offsetTopLeft:a,position:s,reverseDirection:i,tooltipDimension:o.height,viewBox:c,viewBoxDimension:c.height}),d=fwe({translateX:f,translateY:u,useTranslate3d:l})):d=dwe,{cssProperties:d,cssClasses:uwe({translateX:f,translateY:u,coordinate:n})}}function dm(e){"@babel/helpers - typeof";return dm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},dm(e)}function pk(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function vk(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?pk(Object(n),!0).forEach(function(a){kS(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pk(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function hwe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function xk(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,G9(a.key),a)}}function pwe(e,t,n){return t&&xk(e.prototype,t),n&&xk(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function vwe(e,t,n){return t=Xy(t),xwe(e,H9()?Reflect.construct(t,n||[],Xy(e).constructor):t.apply(e,n))}function xwe(e,t){if(t&&(dm(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return gwe(e)}function gwe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function H9(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(H9=function(){return!!e})()}function Xy(e){return Xy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Xy(e)}function ywe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&DS(e,t)}function DS(e,t){return DS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},DS(e,t)}function kS(e,t,n){return t=G9(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function G9(e){var t=bwe(e,"string");return dm(t)=="symbol"?t:t+""}function bwe(e,t){if(dm(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t||"default");if(dm(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var gk=1,jwe=function(e){function t(){var n;hwe(this,t);for(var a=arguments.length,s=new Array(a),i=0;i<a;i++)s[i]=arguments[i];return n=vwe(this,t,[].concat(s)),kS(n,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),kS(n,"handleKeyDown",function(o){if(o.key==="Escape"){var l,c,d,f;n.setState({dismissed:!0,dismissedAtCoordinate:{x:(l=(c=n.props.coordinate)===null||c===void 0?void 0:c.x)!==null&&l!==void 0?l:0,y:(d=(f=n.props.coordinate)===null||f===void 0?void 0:f.y)!==null&&d!==void 0?d:0}})}}),n}return ywe(t,e),pwe(t,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var a=this.wrapperNode.getBoundingClientRect();(Math.abs(a.width-this.state.lastBoundingBox.width)>gk||Math.abs(a.height-this.state.lastBoundingBox.height)>gk)&&this.setState({lastBoundingBox:{width:a.width,height:a.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var a,s;this.props.active&&this.updateBBox(),this.state.dismissed&&(((a=this.props.coordinate)===null||a===void 0?void 0:a.x)!==this.state.dismissedAtCoordinate.x||((s=this.props.coordinate)===null||s===void 0?void 0:s.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var a=this,s=this.props,i=s.active,o=s.allowEscapeViewBox,l=s.animationDuration,c=s.animationEasing,d=s.children,f=s.coordinate,u=s.hasPayload,m=s.isAnimationActive,h=s.offset,x=s.position,g=s.reverseDirection,p=s.useTranslate3d,v=s.viewBox,y=s.wrapperStyle,b=mwe({allowEscapeViewBox:o,coordinate:f,offsetTopLeft:h,position:x,reverseDirection:g,tooltipBox:this.state.lastBoundingBox,useTranslate3d:p,viewBox:v}),j=b.cssClasses,C=b.cssProperties,E=vk(vk({transition:m&&i?"transform ".concat(l,"ms ").concat(c):void 0},C),{},{pointerEvents:"none",visibility:!this.state.dismissed&&i&&u?"visible":"hidden",position:"absolute",top:0,left:0},y);return pe.createElement("div",{tabIndex:-1,className:j,style:E,ref:function(N){a.wrapperNode=N}},d)}}])}(w.PureComponent),wwe=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},gl={isSsr:wwe(),get:function(t){return gl[t]},set:function(t,n){if(typeof t=="string")gl[t]=n;else{var a=Object.keys(t);a&&a.length&&a.forEach(function(s){gl[s]=t[s]})}}};function um(e){"@babel/helpers - typeof";return um=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},um(e)}function yk(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function bk(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?yk(Object(n),!0).forEach(function(a){fE(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yk(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function Nwe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function jk(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,Y9(a.key),a)}}function Swe(e,t,n){return t&&jk(e.prototype,t),n&&jk(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Cwe(e,t,n){return t=Qy(t),Awe(e,K9()?Reflect.construct(t,n||[],Qy(e).constructor):t.apply(e,n))}function Awe(e,t){if(t&&(um(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ewe(e)}function Ewe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function K9(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(K9=function(){return!!e})()}function Qy(e){return Qy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Qy(e)}function Pwe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&OS(e,t)}function OS(e,t){return OS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},OS(e,t)}function fE(e,t,n){return t=Y9(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Y9(e){var t=Twe(e,"string");return um(t)=="symbol"?t:t+""}function Twe(e,t){if(um(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t||"default");if(um(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Iwe(e){return e.dataKey}function Dwe(e,t){return pe.isValidElement(e)?pe.cloneElement(e,t):typeof e=="function"?pe.createElement(e,t):pe.createElement(owe,t)}var Bi=function(e){function t(){return Nwe(this,t),Cwe(this,t,arguments)}return Pwe(t,e),Swe(t,[{key:"render",value:function(){var a=this,s=this.props,i=s.active,o=s.allowEscapeViewBox,l=s.animationDuration,c=s.animationEasing,d=s.content,f=s.coordinate,u=s.filterNull,m=s.isAnimationActive,h=s.offset,x=s.payload,g=s.payloadUniqBy,p=s.position,v=s.reverseDirection,y=s.useTranslate3d,b=s.viewBox,j=s.wrapperStyle,C=x??[];u&&C.length&&(C=M9(x.filter(function(S){return S.value!=null&&(S.hide!==!0||a.props.includeHidden)}),g,Iwe));var E=C.length>0;return pe.createElement(jwe,{allowEscapeViewBox:o,animationDuration:l,animationEasing:c,isAnimationActive:m,active:i,coordinate:f,hasPayload:E,offset:h,position:p,reverseDirection:v,useTranslate3d:y,viewBox:b,wrapperStyle:j},Dwe(d,bk(bk({},this.props),{},{payload:C})))}}])}(w.PureComponent);fE(Bi,"displayName","Tooltip");fE(Bi,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!gl.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var kwe=Wo,Owe=function(){return kwe.Date.now()},_we=Owe,Lwe=/\s/;function Rwe(e){for(var t=e.length;t--&&Lwe.test(e.charAt(t)););return t}var Fwe=Rwe,Mwe=Fwe,$we=/^\s+/;function Bwe(e){return e&&e.slice(0,Mwe(e)+1).replace($we,"")}var zwe=Bwe,Uwe=zwe,wk=Jc,Vwe=Ym,Nk=0/0,qwe=/^[-+]0x[0-9a-f]+$/i,Wwe=/^0b[01]+$/i,Hwe=/^0o[0-7]+$/i,Gwe=parseInt;function Kwe(e){if(typeof e=="number")return e;if(Vwe(e))return Nk;if(wk(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=wk(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=Uwe(e);var n=Wwe.test(e);return n||Hwe.test(e)?Gwe(e.slice(2),n?2:8):qwe.test(e)?Nk:+e}var X9=Kwe,Ywe=Jc,G2=_we,Sk=X9,Xwe="Expected a function",Qwe=Math.max,Jwe=Math.min;function Zwe(e,t,n){var a,s,i,o,l,c,d=0,f=!1,u=!1,m=!0;if(typeof e!="function")throw new TypeError(Xwe);t=Sk(t)||0,Ywe(n)&&(f=!!n.leading,u="maxWait"in n,i=u?Qwe(Sk(n.maxWait)||0,t):i,m="trailing"in n?!!n.trailing:m);function h(E){var S=a,N=s;return a=s=void 0,d=E,o=e.apply(N,S),o}function x(E){return d=E,l=setTimeout(v,t),f?h(E):o}function g(E){var S=E-c,N=E-d,I=t-S;return u?Jwe(I,i-N):I}function p(E){var S=E-c,N=E-d;return c===void 0||S>=t||S<0||u&&N>=i}function v(){var E=G2();if(p(E))return y(E);l=setTimeout(v,g(E))}function y(E){return l=void 0,m&&a?h(E):(a=s=void 0,o)}function b(){l!==void 0&&clearTimeout(l),d=0,a=c=s=l=void 0}function j(){return l===void 0?o:y(G2())}function C(){var E=G2(),S=p(E);if(a=arguments,s=this,c=E,S){if(l===void 0)return x(c);if(u)return clearTimeout(l),l=setTimeout(v,t),h(c)}return l===void 0&&(l=setTimeout(v,t)),o}return C.cancel=b,C.flush=j,C}var e2e=Zwe,t2e=e2e,r2e=Jc,n2e="Expected a function";function a2e(e,t,n){var a=!0,s=!0;if(typeof e!="function")throw new TypeError(n2e);return r2e(n)&&(a="leading"in n?!!n.leading:a,s="trailing"in n?!!n.trailing:s),t2e(e,t,{leading:a,maxWait:t,trailing:s})}var s2e=a2e;const Q9=Er(s2e);function bv(e){"@babel/helpers - typeof";return bv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bv(e)}function Ck(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function l0(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Ck(Object(n),!0).forEach(function(a){i2e(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ck(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function i2e(e,t,n){return t=o2e(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o2e(e){var t=l2e(e,"string");return bv(t)=="symbol"?t:t+""}function l2e(e,t){if(bv(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t||"default");if(bv(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function c2e(e,t){return m2e(e)||f2e(e,t)||u2e(e,t)||d2e()}function d2e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function u2e(e,t){if(e){if(typeof e=="string")return Ak(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ak(e,t)}}function Ak(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function f2e(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var a,s,i,o,l=[],c=!0,d=!1;try{if(i=(n=n.call(e)).next,t===0){if(Object(n)!==n)return;c=!1}else for(;!(c=(a=i.call(n)).done)&&(l.push(a.value),l.length!==t);c=!0);}catch(f){d=!0,s=f}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw s}}return l}}function m2e(e){if(Array.isArray(e))return e}var Ek=w.forwardRef(function(e,t){var n=e.aspect,a=e.initialDimension,s=a===void 0?{width:-1,height:-1}:a,i=e.width,o=i===void 0?"100%":i,l=e.height,c=l===void 0?"100%":l,d=e.minWidth,f=d===void 0?0:d,u=e.minHeight,m=e.maxHeight,h=e.children,x=e.debounce,g=x===void 0?0:x,p=e.id,v=e.className,y=e.onResize,b=e.style,j=b===void 0?{}:b,C=w.useRef(null),E=w.useRef();E.current=y,w.useImperativeHandle(t,function(){return Object.defineProperty(C.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),C.current},configurable:!0})});var S=w.useState({containerWidth:s.width,containerHeight:s.height}),N=c2e(S,2),I=N[0],D=N[1],T=w.useCallback(function(_,k){D(function(L){var $=Math.round(_),M=Math.round(k);return L.containerWidth===$&&L.containerHeight===M?L:{containerWidth:$,containerHeight:M}})},[]);w.useEffect(function(){var _=function(U){var W,q=U[0].contentRect,R=q.width,V=q.height;T(R,V),(W=E.current)===null||W===void 0||W.call(E,R,V)};g>0&&(_=Q9(_,g,{trailing:!0,leading:!1}));var k=new ResizeObserver(_),L=C.current.getBoundingClientRect(),$=L.width,M=L.height;return T($,M),k.observe(C.current),function(){k.disconnect()}},[T,g]);var A=w.useMemo(function(){var _=I.containerWidth,k=I.containerHeight;if(_<0||k<0)return null;Yd(Rd(o)||Rd(c),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,o,c),Yd(!n||n>0,"The aspect(%s) must be greater than zero.",n);var L=Rd(o)?_:o,$=Rd(c)?k:c;n&&n>0&&(L?$=L/n:$&&(L=$*n),m&&$>m&&($=m)),Yd(L>0||$>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,L,$,o,c,f,u,n);var M=!Array.isArray(h)&&xl(h.type).endsWith("Chart");return pe.Children.map(h,function(B){return pe.isValidElement(B)?w.cloneElement(B,l0({width:L,height:$},M?{style:l0({height:"100%",width:"100%",maxHeight:$,maxWidth:L},B.props.style)}:{})):B})},[n,h,c,m,u,f,I,o]);return pe.createElement("div",{id:p?"".concat(p):void 0,className:vr("recharts-responsive-container",v),style:l0(l0({},j),{},{width:o,height:c,minWidth:f,minHeight:u,maxHeight:m}),ref:C},A)}),J9=function(t){return null};J9.displayName="Cell";function jv(e){"@babel/helpers - typeof";return jv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},jv(e)}function Pk(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function _S(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Pk(Object(n),!0).forEach(function(a){h2e(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Pk(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function h2e(e,t,n){return t=p2e(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p2e(e){var t=v2e(e,"string");return jv(t)=="symbol"?t:t+""}function v2e(e,t){if(jv(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t||"default");if(jv(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var uf={widthCache:{},cacheCount:0},x2e=2e3,g2e={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},Tk="recharts_measurement_span";function y2e(e){var t=_S({},e);return Object.keys(t).forEach(function(n){t[n]||delete t[n]}),t}var Lp=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||gl.isSsr)return{width:0,height:0};var a=y2e(n),s=JSON.stringify({text:t,copyStyle:a});if(uf.widthCache[s])return uf.widthCache[s];try{var i=document.getElementById(Tk);i||(i=document.createElement("span"),i.setAttribute("id",Tk),i.setAttribute("aria-hidden","true"),document.body.appendChild(i));var o=_S(_S({},g2e),a);Object.assign(i.style,o),i.textContent="".concat(t);var l=i.getBoundingClientRect(),c={width:l.width,height:l.height};return uf.widthCache[s]=c,++uf.cacheCount>x2e&&(uf.cacheCount=0,uf.widthCache={}),c}catch{return{width:0,height:0}}},b2e=function(t){return{top:t.top+window.scrollY-document.documentElement.clientTop,left:t.left+window.scrollX-document.documentElement.clientLeft}};function wv(e){"@babel/helpers - typeof";return wv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},wv(e)}function Jy(e,t){return S2e(e)||N2e(e,t)||w2e(e,t)||j2e()}function j2e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function w2e(e,t){if(e){if(typeof e=="string")return Ik(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ik(e,t)}}function Ik(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function N2e(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var a,s,i,o,l=[],c=!0,d=!1;try{if(i=(n=n.call(e)).next,t===0){if(Object(n)!==n)return;c=!1}else for(;!(c=(a=i.call(n)).done)&&(l.push(a.value),l.length!==t);c=!0);}catch(f){d=!0,s=f}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw s}}return l}}function S2e(e){if(Array.isArray(e))return e}function C2e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Dk(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,E2e(a.key),a)}}function A2e(e,t,n){return t&&Dk(e.prototype,t),n&&Dk(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function E2e(e){var t=P2e(e,"string");return wv(t)=="symbol"?t:t+""}function P2e(e,t){if(wv(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t||"default");if(wv(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var kk=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,Ok=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,T2e=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,I2e=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,Z9={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},D2e=Object.keys(Z9),Pf="NaN";function k2e(e,t){return e*Z9[t]}var c0=function(){function e(t,n){C2e(this,e),this.num=t,this.unit=n,this.num=t,this.unit=n,Number.isNaN(t)&&(this.unit=""),n!==""&&!T2e.test(n)&&(this.num=NaN,this.unit=""),D2e.includes(n)&&(this.num=k2e(t,n),this.unit="px")}return A2e(e,[{key:"add",value:function(n){return this.unit!==n.unit?new e(NaN,""):new e(this.num+n.num,this.unit)}},{key:"subtract",value:function(n){return this.unit!==n.unit?new e(NaN,""):new e(this.num-n.num,this.unit)}},{key:"multiply",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new e(NaN,""):new e(this.num*n.num,this.unit||n.unit)}},{key:"divide",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new e(NaN,""):new e(this.num/n.num,this.unit||n.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(n){var a,s=(a=I2e.exec(n))!==null&&a!==void 0?a:[],i=Jy(s,3),o=i[1],l=i[2];return new e(parseFloat(o),l??"")}}])}();function eB(e){if(e.includes(Pf))return Pf;for(var t=e;t.includes("*")||t.includes("/");){var n,a=(n=kk.exec(t))!==null&&n!==void 0?n:[],s=Jy(a,4),i=s[1],o=s[2],l=s[3],c=c0.parse(i??""),d=c0.parse(l??""),f=o==="*"?c.multiply(d):c.divide(d);if(f.isNaN())return Pf;t=t.replace(kk,f.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var u,m=(u=Ok.exec(t))!==null&&u!==void 0?u:[],h=Jy(m,4),x=h[1],g=h[2],p=h[3],v=c0.parse(x??""),y=c0.parse(p??""),b=g==="+"?v.add(y):v.subtract(y);if(b.isNaN())return Pf;t=t.replace(Ok,b.toString())}return t}var _k=/\(([^()]*)\)/;function O2e(e){for(var t=e;t.includes("(");){var n=_k.exec(t),a=Jy(n,2),s=a[1];t=t.replace(_k,eB(s))}return t}function _2e(e){var t=e.replace(/\s+/g,"");return t=O2e(t),t=eB(t),t}function L2e(e){try{return _2e(e)}catch{return Pf}}function K2(e){var t=L2e(e.slice(5,-1));return t===Pf?"":t}var R2e=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],F2e=["dx","dy","angle","className","breakAll"];function LS(){return LS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},LS.apply(this,arguments)}function Lk(e,t){if(e==null)return{};var n=M2e(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function M2e(e,t){if(e==null)return{};var n={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;n[a]=e[a]}return n}function Rk(e,t){return U2e(e)||z2e(e,t)||B2e(e,t)||$2e()}function $2e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function B2e(e,t){if(e){if(typeof e=="string")return Fk(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Fk(e,t)}}function Fk(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function z2e(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var a,s,i,o,l=[],c=!0,d=!1;try{if(i=(n=n.call(e)).next,t===0){if(Object(n)!==n)return;c=!1}else for(;!(c=(a=i.call(n)).done)&&(l.push(a.value),l.length!==t);c=!0);}catch(f){d=!0,s=f}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw s}}return l}}function U2e(e){if(Array.isArray(e))return e}var tB=/[ \f\n\r\t\v\u2028\u2029]+/,rB=function(t){var n=t.children,a=t.breakAll,s=t.style;try{var i=[];ir(n)||(a?i=n.toString().split(""):i=n.toString().split(tB));var o=i.map(function(c){return{word:c,width:Lp(c,s).width}}),l=a?0:Lp(" ",s).width;return{wordsWithComputedWidth:o,spaceWidth:l}}catch{return null}},V2e=function(t,n,a,s,i){var o=t.maxLines,l=t.children,c=t.style,d=t.breakAll,f=dt(o),u=l,m=function(){var L=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return L.reduce(function($,M){var B=M.word,U=M.width,W=$[$.length-1];if(W&&(s==null||i||W.width+U+a<Number(s)))W.words.push(B),W.width+=U+a;else{var q={words:[B],width:U};$.push(q)}return $},[])},h=m(n),x=function(L){return L.reduce(function($,M){return $.width>M.width?$:M})};if(!f)return h;for(var g="…",p=function(L){var $=u.slice(0,L),M=rB({breakAll:d,style:c,children:$+g}).wordsWithComputedWidth,B=m(M),U=B.length>o||x(B).width>Number(s);return[U,B]},v=0,y=u.length-1,b=0,j;v<=y&&b<=u.length-1;){var C=Math.floor((v+y)/2),E=C-1,S=p(E),N=Rk(S,2),I=N[0],D=N[1],T=p(C),A=Rk(T,1),_=A[0];if(!I&&!_&&(v=C+1),I&&_&&(y=C-1),!I&&_){j=D;break}b++}return j||h},Mk=function(t){var n=ir(t)?[]:t.toString().split(tB);return[{words:n}]},q2e=function(t){var n=t.width,a=t.scaleToFit,s=t.children,i=t.style,o=t.breakAll,l=t.maxLines;if((n||a)&&!gl.isSsr){var c,d,f=rB({breakAll:o,children:s,style:i});if(f){var u=f.wordsWithComputedWidth,m=f.spaceWidth;c=u,d=m}else return Mk(s);return V2e({breakAll:o,children:s,maxLines:l,style:i},c,d,n,a)}return Mk(s)},$k="#808080",Zy=function(t){var n=t.x,a=n===void 0?0:n,s=t.y,i=s===void 0?0:s,o=t.lineHeight,l=o===void 0?"1em":o,c=t.capHeight,d=c===void 0?"0.71em":c,f=t.scaleToFit,u=f===void 0?!1:f,m=t.textAnchor,h=m===void 0?"start":m,x=t.verticalAnchor,g=x===void 0?"end":x,p=t.fill,v=p===void 0?$k:p,y=Lk(t,R2e),b=w.useMemo(function(){return q2e({breakAll:y.breakAll,children:y.children,maxLines:y.maxLines,scaleToFit:u,style:y.style,width:y.width})},[y.breakAll,y.children,y.maxLines,u,y.style,y.width]),j=y.dx,C=y.dy,E=y.angle,S=y.className,N=y.breakAll,I=Lk(y,F2e);if(!Qn(a)||!Qn(i))return null;var D=a+(dt(j)?j:0),T=i+(dt(C)?C:0),A;switch(g){case"start":A=K2("calc(".concat(d,")"));break;case"middle":A=K2("calc(".concat((b.length-1)/2," * -").concat(l," + (").concat(d," / 2))"));break;default:A=K2("calc(".concat(b.length-1," * -").concat(l,")"));break}var _=[];if(u){var k=b[0].width,L=y.width;_.push("scale(".concat((dt(L)?L/k:1)/k,")"))}return E&&_.push("rotate(".concat(E,", ").concat(D,", ").concat(T,")")),_.length&&(I.transform=_.join(" ")),pe.createElement("text",LS({},sr(I,!0),{x:D,y:T,className:vr("recharts-text",S),textAnchor:h,fill:v.includes("url")?$k:v}),b.map(function($,M){var B=$.words.join(N?"":" ");return pe.createElement("tspan",{x:D,dy:M===0?A:l,key:"".concat(B,"-").concat(M)},B)}))};function _c(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function W2e(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function mE(e){let t,n,a;e.length!==2?(t=_c,n=(l,c)=>_c(e(l),c),a=(l,c)=>e(l)-c):(t=e===_c||e===W2e?e:H2e,n=e,a=e);function s(l,c,d=0,f=l.length){if(d<f){if(t(c,c)!==0)return f;do{const u=d+f>>>1;n(l[u],c)<0?d=u+1:f=u}while(d<f)}return d}function i(l,c,d=0,f=l.length){if(d<f){if(t(c,c)!==0)return f;do{const u=d+f>>>1;n(l[u],c)<=0?d=u+1:f=u}while(d<f)}return d}function o(l,c,d=0,f=l.length){const u=s(l,c,d,f-1);return u>d&&a(l[u-1],c)>-a(l[u],c)?u-1:u}return{left:s,center:o,right:i}}function H2e(){return 0}function nB(e){return e===null?NaN:+e}function*G2e(e,t){if(t===void 0)for(let n of e)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let a of e)(a=t(a,++n,e))!=null&&(a=+a)>=a&&(yield a)}}const K2e=mE(_c),Y2e=K2e.right;mE(nB).center;const Cx=Y2e;class Bk extends Map{constructor(t,n=J2e){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[a,s]of t)this.set(a,s)}get(t){return super.get(zk(this,t))}has(t){return super.has(zk(this,t))}set(t,n){return super.set(X2e(this,t),n)}delete(t){return super.delete(Q2e(this,t))}}function zk({_intern:e,_key:t},n){const a=t(n);return e.has(a)?e.get(a):n}function X2e({_intern:e,_key:t},n){const a=t(n);return e.has(a)?e.get(a):(e.set(a,n),n)}function Q2e({_intern:e,_key:t},n){const a=t(n);return e.has(a)&&(n=e.get(a),e.delete(a)),n}function J2e(e){return e!==null&&typeof e=="object"?e.valueOf():e}function Z2e(e=_c){if(e===_c)return aB;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const a=e(t,n);return a||a===0?a:(e(n,n)===0)-(e(t,t)===0)}}function aB(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const eNe=Math.sqrt(50),tNe=Math.sqrt(10),rNe=Math.sqrt(2);function eb(e,t,n){const a=(t-e)/Math.max(0,n),s=Math.floor(Math.log10(a)),i=a/Math.pow(10,s),o=i>=eNe?10:i>=tNe?5:i>=rNe?2:1;let l,c,d;return s<0?(d=Math.pow(10,-s)/o,l=Math.round(e*d),c=Math.round(t*d),l/d<e&&++l,c/d>t&&--c,d=-d):(d=Math.pow(10,s)*o,l=Math.round(e/d),c=Math.round(t/d),l*d<e&&++l,c*d>t&&--c),c<l&&.5<=n&&n<2?eb(e,t,n*2):[l,c,d]}function RS(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const a=t<e,[s,i,o]=a?eb(t,e,n):eb(e,t,n);if(!(i>=s))return[];const l=i-s+1,c=new Array(l);if(a)if(o<0)for(let d=0;d<l;++d)c[d]=(i-d)/-o;else for(let d=0;d<l;++d)c[d]=(i-d)*o;else if(o<0)for(let d=0;d<l;++d)c[d]=(s+d)/-o;else for(let d=0;d<l;++d)c[d]=(s+d)*o;return c}function FS(e,t,n){return t=+t,e=+e,n=+n,eb(e,t,n)[2]}function MS(e,t,n){t=+t,e=+e,n=+n;const a=t<e,s=a?FS(t,e,n):FS(e,t,n);return(a?-1:1)*(s<0?1/-s:s)}function Uk(e,t){let n;if(t===void 0)for(const a of e)a!=null&&(n<a||n===void 0&&a>=a)&&(n=a);else{let a=-1;for(let s of e)(s=t(s,++a,e))!=null&&(n<s||n===void 0&&s>=s)&&(n=s)}return n}function Vk(e,t){let n;if(t===void 0)for(const a of e)a!=null&&(n>a||n===void 0&&a>=a)&&(n=a);else{let a=-1;for(let s of e)(s=t(s,++a,e))!=null&&(n>s||n===void 0&&s>=s)&&(n=s)}return n}function sB(e,t,n=0,a=1/0,s){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),a=Math.floor(Math.min(e.length-1,a)),!(n<=t&&t<=a))return e;for(s=s===void 0?aB:Z2e(s);a>n;){if(a-n>600){const c=a-n+1,d=t-n+1,f=Math.log(c),u=.5*Math.exp(2*f/3),m=.5*Math.sqrt(f*u*(c-u)/c)*(d-c/2<0?-1:1),h=Math.max(n,Math.floor(t-d*u/c+m)),x=Math.min(a,Math.floor(t+(c-d)*u/c+m));sB(e,t,h,x,s)}const i=e[t];let o=n,l=a;for(ap(e,n,t),s(e[a],i)>0&&ap(e,n,a);o<l;){for(ap(e,o,l),++o,--l;s(e[o],i)<0;)++o;for(;s(e[l],i)>0;)--l}s(e[n],i)===0?ap(e,n,l):(++l,ap(e,l,a)),l<=t&&(n=l+1),t<=l&&(a=l-1)}return e}function ap(e,t,n){const a=e[t];e[t]=e[n],e[n]=a}function nNe(e,t,n){if(e=Float64Array.from(G2e(e,n)),!(!(a=e.length)||isNaN(t=+t))){if(t<=0||a<2)return Vk(e);if(t>=1)return Uk(e);var a,s=(a-1)*t,i=Math.floor(s),o=Uk(sB(e,i).subarray(0,i+1)),l=Vk(e.subarray(i+1));return o+(l-o)*(s-i)}}function aNe(e,t,n=nB){if(!(!(a=e.length)||isNaN(t=+t))){if(t<=0||a<2)return+n(e[0],0,e);if(t>=1)return+n(e[a-1],a-1,e);var a,s=(a-1)*t,i=Math.floor(s),o=+n(e[i],i,e),l=+n(e[i+1],i+1,e);return o+(l-o)*(s-i)}}function sNe(e,t,n){e=+e,t=+t,n=(s=arguments.length)<2?(t=e,e=0,1):s<3?1:+n;for(var a=-1,s=Math.max(0,Math.ceil((t-e)/n))|0,i=new Array(s);++a<s;)i[a]=e+a*n;return i}function bi(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Rl(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const $S=Symbol("implicit");function hE(){var e=new Bk,t=[],n=[],a=$S;function s(i){let o=e.get(i);if(o===void 0){if(a!==$S)return a;e.set(i,o=t.push(i)-1)}return n[o%n.length]}return s.domain=function(i){if(!arguments.length)return t.slice();t=[],e=new Bk;for(const o of i)e.has(o)||e.set(o,t.push(o)-1);return s},s.range=function(i){return arguments.length?(n=Array.from(i),s):n.slice()},s.unknown=function(i){return arguments.length?(a=i,s):a},s.copy=function(){return hE(t,n).unknown(a)},bi.apply(s,arguments),s}function Nv(){var e=hE().unknown(void 0),t=e.domain,n=e.range,a=0,s=1,i,o,l=!1,c=0,d=0,f=.5;delete e.unknown;function u(){var m=t().length,h=s<a,x=h?s:a,g=h?a:s;i=(g-x)/Math.max(1,m-c+d*2),l&&(i=Math.floor(i)),x+=(g-x-i*(m-c))*f,o=i*(1-c),l&&(x=Math.round(x),o=Math.round(o));var p=sNe(m).map(function(v){return x+i*v});return n(h?p.reverse():p)}return e.domain=function(m){return arguments.length?(t(m),u()):t()},e.range=function(m){return arguments.length?([a,s]=m,a=+a,s=+s,u()):[a,s]},e.rangeRound=function(m){return[a,s]=m,a=+a,s=+s,l=!0,u()},e.bandwidth=function(){return o},e.step=function(){return i},e.round=function(m){return arguments.length?(l=!!m,u()):l},e.padding=function(m){return arguments.length?(c=Math.min(1,d=+m),u()):c},e.paddingInner=function(m){return arguments.length?(c=Math.min(1,m),u()):c},e.paddingOuter=function(m){return arguments.length?(d=+m,u()):d},e.align=function(m){return arguments.length?(f=Math.max(0,Math.min(1,m)),u()):f},e.copy=function(){return Nv(t(),[a,s]).round(l).paddingInner(c).paddingOuter(d).align(f)},bi.apply(u(),arguments)}function iB(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return iB(t())},e}function Rp(){return iB(Nv.apply(null,arguments).paddingInner(1))}function pE(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function oB(e,t){var n=Object.create(e.prototype);for(var a in t)n[a]=t[a];return n}function Ax(){}var Sv=.7,tb=1/Sv,Vf="\\s*([+-]?\\d+)\\s*",Cv="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ro="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",iNe=/^#([0-9a-f]{3,8})$/,oNe=new RegExp(`^rgb\\(${Vf},${Vf},${Vf}\\)$`),lNe=new RegExp(`^rgb\\(${Ro},${Ro},${Ro}\\)$`),cNe=new RegExp(`^rgba\\(${Vf},${Vf},${Vf},${Cv}\\)$`),dNe=new RegExp(`^rgba\\(${Ro},${Ro},${Ro},${Cv}\\)$`),uNe=new RegExp(`^hsl\\(${Cv},${Ro},${Ro}\\)$`),fNe=new RegExp(`^hsla\\(${Cv},${Ro},${Ro},${Cv}\\)$`),qk={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};pE(Ax,Av,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Wk,formatHex:Wk,formatHex8:mNe,formatHsl:hNe,formatRgb:Hk,toString:Hk});function Wk(){return this.rgb().formatHex()}function mNe(){return this.rgb().formatHex8()}function hNe(){return lB(this).formatHsl()}function Hk(){return this.rgb().formatRgb()}function Av(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=iNe.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?Gk(t):n===3?new ls(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?d0(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?d0(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=oNe.exec(e))?new ls(t[1],t[2],t[3],1):(t=lNe.exec(e))?new ls(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=cNe.exec(e))?d0(t[1],t[2],t[3],t[4]):(t=dNe.exec(e))?d0(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=uNe.exec(e))?Xk(t[1],t[2]/100,t[3]/100,1):(t=fNe.exec(e))?Xk(t[1],t[2]/100,t[3]/100,t[4]):qk.hasOwnProperty(e)?Gk(qk[e]):e==="transparent"?new ls(NaN,NaN,NaN,0):null}function Gk(e){return new ls(e>>16&255,e>>8&255,e&255,1)}function d0(e,t,n,a){return a<=0&&(e=t=n=NaN),new ls(e,t,n,a)}function pNe(e){return e instanceof Ax||(e=Av(e)),e?(e=e.rgb(),new ls(e.r,e.g,e.b,e.opacity)):new ls}function BS(e,t,n,a){return arguments.length===1?pNe(e):new ls(e,t,n,a??1)}function ls(e,t,n,a){this.r=+e,this.g=+t,this.b=+n,this.opacity=+a}pE(ls,BS,oB(Ax,{brighter(e){return e=e==null?tb:Math.pow(tb,e),new ls(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Sv:Math.pow(Sv,e),new ls(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new ls(Xd(this.r),Xd(this.g),Xd(this.b),rb(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Kk,formatHex:Kk,formatHex8:vNe,formatRgb:Yk,toString:Yk}));function Kk(){return`#${Fd(this.r)}${Fd(this.g)}${Fd(this.b)}`}function vNe(){return`#${Fd(this.r)}${Fd(this.g)}${Fd(this.b)}${Fd((isNaN(this.opacity)?1:this.opacity)*255)}`}function Yk(){const e=rb(this.opacity);return`${e===1?"rgb(":"rgba("}${Xd(this.r)}, ${Xd(this.g)}, ${Xd(this.b)}${e===1?")":`, ${e})`}`}function rb(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Xd(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Fd(e){return e=Xd(e),(e<16?"0":"")+e.toString(16)}function Xk(e,t,n,a){return a<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new qi(e,t,n,a)}function lB(e){if(e instanceof qi)return new qi(e.h,e.s,e.l,e.opacity);if(e instanceof Ax||(e=Av(e)),!e)return new qi;if(e instanceof qi)return e;e=e.rgb();var t=e.r/255,n=e.g/255,a=e.b/255,s=Math.min(t,n,a),i=Math.max(t,n,a),o=NaN,l=i-s,c=(i+s)/2;return l?(t===i?o=(n-a)/l+(n<a)*6:n===i?o=(a-t)/l+2:o=(t-n)/l+4,l/=c<.5?i+s:2-i-s,o*=60):l=c>0&&c<1?0:o,new qi(o,l,c,e.opacity)}function xNe(e,t,n,a){return arguments.length===1?lB(e):new qi(e,t,n,a??1)}function qi(e,t,n,a){this.h=+e,this.s=+t,this.l=+n,this.opacity=+a}pE(qi,xNe,oB(Ax,{brighter(e){return e=e==null?tb:Math.pow(tb,e),new qi(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Sv:Math.pow(Sv,e),new qi(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,a=n+(n<.5?n:1-n)*t,s=2*n-a;return new ls(Y2(e>=240?e-240:e+120,s,a),Y2(e,s,a),Y2(e<120?e+240:e-120,s,a),this.opacity)},clamp(){return new qi(Qk(this.h),u0(this.s),u0(this.l),rb(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=rb(this.opacity);return`${e===1?"hsl(":"hsla("}${Qk(this.h)}, ${u0(this.s)*100}%, ${u0(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Qk(e){return e=(e||0)%360,e<0?e+360:e}function u0(e){return Math.max(0,Math.min(1,e||0))}function Y2(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const vE=e=>()=>e;function gNe(e,t){return function(n){return e+n*t}}function yNe(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(a){return Math.pow(e+a*t,n)}}function bNe(e){return(e=+e)==1?cB:function(t,n){return n-t?yNe(t,n,e):vE(isNaN(t)?n:t)}}function cB(e,t){var n=t-e;return n?gNe(e,n):vE(isNaN(e)?t:e)}const Jk=function e(t){var n=bNe(t);function a(s,i){var o=n((s=BS(s)).r,(i=BS(i)).r),l=n(s.g,i.g),c=n(s.b,i.b),d=cB(s.opacity,i.opacity);return function(f){return s.r=o(f),s.g=l(f),s.b=c(f),s.opacity=d(f),s+""}}return a.gamma=e,a}(1);function jNe(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,a=t.slice(),s;return function(i){for(s=0;s<n;++s)a[s]=e[s]*(1-i)+t[s]*i;return a}}function wNe(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function NNe(e,t){var n=t?t.length:0,a=e?Math.min(n,e.length):0,s=new Array(a),i=new Array(n),o;for(o=0;o<a;++o)s[o]=sh(e[o],t[o]);for(;o<n;++o)i[o]=t[o];return function(l){for(o=0;o<a;++o)i[o]=s[o](l);return i}}function SNe(e,t){var n=new Date;return e=+e,t=+t,function(a){return n.setTime(e*(1-a)+t*a),n}}function nb(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function CNe(e,t){var n={},a={},s;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(s in t)s in e?n[s]=sh(e[s],t[s]):a[s]=t[s];return function(i){for(s in n)a[s]=n[s](i);return a}}var zS=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,X2=new RegExp(zS.source,"g");function ANe(e){return function(){return e}}function ENe(e){return function(t){return e(t)+""}}function PNe(e,t){var n=zS.lastIndex=X2.lastIndex=0,a,s,i,o=-1,l=[],c=[];for(e=e+"",t=t+"";(a=zS.exec(e))&&(s=X2.exec(t));)(i=s.index)>n&&(i=t.slice(n,i),l[o]?l[o]+=i:l[++o]=i),(a=a[0])===(s=s[0])?l[o]?l[o]+=s:l[++o]=s:(l[++o]=null,c.push({i:o,x:nb(a,s)})),n=X2.lastIndex;return n<t.length&&(i=t.slice(n),l[o]?l[o]+=i:l[++o]=i),l.length<2?c[0]?ENe(c[0].x):ANe(t):(t=c.length,function(d){for(var f=0,u;f<t;++f)l[(u=c[f]).i]=u.x(d);return l.join("")})}function sh(e,t){var n=typeof t,a;return t==null||n==="boolean"?vE(t):(n==="number"?nb:n==="string"?(a=Av(t))?(t=a,Jk):PNe:t instanceof Av?Jk:t instanceof Date?SNe:wNe(t)?jNe:Array.isArray(t)?NNe:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?CNe:nb)(e,t)}function xE(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}function TNe(e,t){t===void 0&&(t=e,e=sh);for(var n=0,a=t.length-1,s=t[0],i=new Array(a<0?0:a);n<a;)i[n]=e(s,s=t[++n]);return function(o){var l=Math.max(0,Math.min(a-1,Math.floor(o*=a)));return i[l](o-l)}}function INe(e){return function(){return e}}function ab(e){return+e}var Zk=[0,1];function Wa(e){return e}function US(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:INe(isNaN(t)?NaN:.5)}function DNe(e,t){var n;return e>t&&(n=e,e=t,t=n),function(a){return Math.max(e,Math.min(t,a))}}function kNe(e,t,n){var a=e[0],s=e[1],i=t[0],o=t[1];return s<a?(a=US(s,a),i=n(o,i)):(a=US(a,s),i=n(i,o)),function(l){return i(a(l))}}function ONe(e,t,n){var a=Math.min(e.length,t.length)-1,s=new Array(a),i=new Array(a),o=-1;for(e[a]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<a;)s[o]=US(e[o],e[o+1]),i[o]=n(t[o],t[o+1]);return function(l){var c=Cx(e,l,1,a)-1;return i[c](s[c](l))}}function Ex(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function oj(){var e=Zk,t=Zk,n=sh,a,s,i,o=Wa,l,c,d;function f(){var m=Math.min(e.length,t.length);return o!==Wa&&(o=DNe(e[0],e[m-1])),l=m>2?ONe:kNe,c=d=null,u}function u(m){return m==null||isNaN(m=+m)?i:(c||(c=l(e.map(a),t,n)))(a(o(m)))}return u.invert=function(m){return o(s((d||(d=l(t,e.map(a),nb)))(m)))},u.domain=function(m){return arguments.length?(e=Array.from(m,ab),f()):e.slice()},u.range=function(m){return arguments.length?(t=Array.from(m),f()):t.slice()},u.rangeRound=function(m){return t=Array.from(m),n=xE,f()},u.clamp=function(m){return arguments.length?(o=m?!0:Wa,f()):o!==Wa},u.interpolate=function(m){return arguments.length?(n=m,f()):n},u.unknown=function(m){return arguments.length?(i=m,u):i},function(m,h){return a=m,s=h,f()}}function gE(){return oj()(Wa,Wa)}function _Ne(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function sb(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,a=e.slice(0,n);return[a.length>1?a[0]+a.slice(2):a,+e.slice(n+1)]}function fm(e){return e=sb(Math.abs(e)),e?e[1]:NaN}function LNe(e,t){return function(n,a){for(var s=n.length,i=[],o=0,l=e[0],c=0;s>0&&l>0&&(c+l+1>a&&(l=Math.max(1,a-c)),i.push(n.substring(s-=l,s+l)),!((c+=l+1)>a));)l=e[o=(o+1)%e.length];return i.reverse().join(t)}}function RNe(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var FNe=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Ev(e){if(!(t=FNe.exec(e)))throw new Error("invalid format: "+e);var t;return new yE({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Ev.prototype=yE.prototype;function yE(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}yE.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function MNe(e){e:for(var t=e.length,n=1,a=-1,s;n<t;++n)switch(e[n]){case".":a=s=n;break;case"0":a===0&&(a=n),s=n;break;default:if(!+e[n])break e;a>0&&(a=0);break}return a>0?e.slice(0,a)+e.slice(s+1):e}var dB;function $Ne(e,t){var n=sb(e,t);if(!n)return e+"";var a=n[0],s=n[1],i=s-(dB=Math.max(-8,Math.min(8,Math.floor(s/3)))*3)+1,o=a.length;return i===o?a:i>o?a+new Array(i-o+1).join("0"):i>0?a.slice(0,i)+"."+a.slice(i):"0."+new Array(1-i).join("0")+sb(e,Math.max(0,t+i-1))[0]}function eO(e,t){var n=sb(e,t);if(!n)return e+"";var a=n[0],s=n[1];return s<0?"0."+new Array(-s).join("0")+a:a.length>s+1?a.slice(0,s+1)+"."+a.slice(s+1):a+new Array(s-a.length+2).join("0")}const tO={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:_Ne,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>eO(e*100,t),r:eO,s:$Ne,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function rO(e){return e}var nO=Array.prototype.map,aO=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function BNe(e){var t=e.grouping===void 0||e.thousands===void 0?rO:LNe(nO.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",a=e.currency===void 0?"":e.currency[1]+"",s=e.decimal===void 0?".":e.decimal+"",i=e.numerals===void 0?rO:RNe(nO.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",l=e.minus===void 0?"−":e.minus+"",c=e.nan===void 0?"NaN":e.nan+"";function d(u){u=Ev(u);var m=u.fill,h=u.align,x=u.sign,g=u.symbol,p=u.zero,v=u.width,y=u.comma,b=u.precision,j=u.trim,C=u.type;C==="n"?(y=!0,C="g"):tO[C]||(b===void 0&&(b=12),j=!0,C="g"),(p||m==="0"&&h==="=")&&(p=!0,m="0",h="=");var E=g==="$"?n:g==="#"&&/[boxX]/.test(C)?"0"+C.toLowerCase():"",S=g==="$"?a:/[%p]/.test(C)?o:"",N=tO[C],I=/[defgprs%]/.test(C);b=b===void 0?6:/[gprs]/.test(C)?Math.max(1,Math.min(21,b)):Math.max(0,Math.min(20,b));function D(T){var A=E,_=S,k,L,$;if(C==="c")_=N(T)+_,T="";else{T=+T;var M=T<0||1/T<0;if(T=isNaN(T)?c:N(Math.abs(T),b),j&&(T=MNe(T)),M&&+T==0&&x!=="+"&&(M=!1),A=(M?x==="("?x:l:x==="-"||x==="("?"":x)+A,_=(C==="s"?aO[8+dB/3]:"")+_+(M&&x==="("?")":""),I){for(k=-1,L=T.length;++k<L;)if($=T.charCodeAt(k),48>$||$>57){_=($===46?s+T.slice(k+1):T.slice(k))+_,T=T.slice(0,k);break}}}y&&!p&&(T=t(T,1/0));var B=A.length+T.length+_.length,U=B<v?new Array(v-B+1).join(m):"";switch(y&&p&&(T=t(U+T,U.length?v-_.length:1/0),U=""),h){case"<":T=A+T+_+U;break;case"=":T=A+U+T+_;break;case"^":T=U.slice(0,B=U.length>>1)+A+T+_+U.slice(B);break;default:T=U+A+T+_;break}return i(T)}return D.toString=function(){return u+""},D}function f(u,m){var h=d((u=Ev(u),u.type="f",u)),x=Math.max(-8,Math.min(8,Math.floor(fm(m)/3)))*3,g=Math.pow(10,-x),p=aO[8+x/3];return function(v){return h(g*v)+p}}return{format:d,formatPrefix:f}}var f0,bE,uB;zNe({thousands:",",grouping:[3],currency:["$",""]});function zNe(e){return f0=BNe(e),bE=f0.format,uB=f0.formatPrefix,f0}function UNe(e){return Math.max(0,-fm(Math.abs(e)))}function VNe(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(fm(t)/3)))*3-fm(Math.abs(e)))}function qNe(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,fm(t)-fm(e))+1}function fB(e,t,n,a){var s=MS(e,t,n),i;switch(a=Ev(a??",f"),a.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return a.precision==null&&!isNaN(i=VNe(s,o))&&(a.precision=i),uB(a,o)}case"":case"e":case"g":case"p":case"r":{a.precision==null&&!isNaN(i=qNe(s,Math.max(Math.abs(e),Math.abs(t))))&&(a.precision=i-(a.type==="e"));break}case"f":case"%":{a.precision==null&&!isNaN(i=UNe(s))&&(a.precision=i-(a.type==="%")*2);break}}return bE(a)}function Zc(e){var t=e.domain;return e.ticks=function(n){var a=t();return RS(a[0],a[a.length-1],n??10)},e.tickFormat=function(n,a){var s=t();return fB(s[0],s[s.length-1],n??10,a)},e.nice=function(n){n==null&&(n=10);var a=t(),s=0,i=a.length-1,o=a[s],l=a[i],c,d,f=10;for(l<o&&(d=o,o=l,l=d,d=s,s=i,i=d);f-- >0;){if(d=FS(o,l,n),d===c)return a[s]=o,a[i]=l,t(a);if(d>0)o=Math.floor(o/d)*d,l=Math.ceil(l/d)*d;else if(d<0)o=Math.ceil(o*d)/d,l=Math.floor(l*d)/d;else break;c=d}return e},e}function ib(){var e=gE();return e.copy=function(){return Ex(e,ib())},bi.apply(e,arguments),Zc(e)}function mB(e){var t;function n(a){return a==null||isNaN(a=+a)?t:a}return n.invert=n,n.domain=n.range=function(a){return arguments.length?(e=Array.from(a,ab),n):e.slice()},n.unknown=function(a){return arguments.length?(t=a,n):t},n.copy=function(){return mB(e).unknown(t)},e=arguments.length?Array.from(e,ab):[0,1],Zc(n)}function hB(e,t){e=e.slice();var n=0,a=e.length-1,s=e[n],i=e[a],o;return i<s&&(o=n,n=a,a=o,o=s,s=i,i=o),e[n]=t.floor(s),e[a]=t.ceil(i),e}function sO(e){return Math.log(e)}function iO(e){return Math.exp(e)}function WNe(e){return-Math.log(-e)}function HNe(e){return-Math.exp(-e)}function GNe(e){return isFinite(e)?+("1e"+e):e<0?0:e}function KNe(e){return e===10?GNe:e===Math.E?Math.exp:t=>Math.pow(e,t)}function YNe(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function oO(e){return(t,n)=>-e(-t,n)}function jE(e){const t=e(sO,iO),n=t.domain;let a=10,s,i;function o(){return s=YNe(a),i=KNe(a),n()[0]<0?(s=oO(s),i=oO(i),e(WNe,HNe)):e(sO,iO),t}return t.base=function(l){return arguments.length?(a=+l,o()):a},t.domain=function(l){return arguments.length?(n(l),o()):n()},t.ticks=l=>{const c=n();let d=c[0],f=c[c.length-1];const u=f<d;u&&([d,f]=[f,d]);let m=s(d),h=s(f),x,g;const p=l==null?10:+l;let v=[];if(!(a%1)&&h-m<p){if(m=Math.floor(m),h=Math.ceil(h),d>0){for(;m<=h;++m)for(x=1;x<a;++x)if(g=m<0?x/i(-m):x*i(m),!(g<d)){if(g>f)break;v.push(g)}}else for(;m<=h;++m)for(x=a-1;x>=1;--x)if(g=m>0?x/i(-m):x*i(m),!(g<d)){if(g>f)break;v.push(g)}v.length*2<p&&(v=RS(d,f,p))}else v=RS(m,h,Math.min(h-m,p)).map(i);return u?v.reverse():v},t.tickFormat=(l,c)=>{if(l==null&&(l=10),c==null&&(c=a===10?"s":","),typeof c!="function"&&(!(a%1)&&(c=Ev(c)).precision==null&&(c.trim=!0),c=bE(c)),l===1/0)return c;const d=Math.max(1,a*l/t.ticks().length);return f=>{let u=f/i(Math.round(s(f)));return u*a<a-.5&&(u*=a),u<=d?c(f):""}},t.nice=()=>n(hB(n(),{floor:l=>i(Math.floor(s(l))),ceil:l=>i(Math.ceil(s(l)))})),t}function pB(){const e=jE(oj()).domain([1,10]);return e.copy=()=>Ex(e,pB()).base(e.base()),bi.apply(e,arguments),e}function lO(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function cO(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function wE(e){var t=1,n=e(lO(t),cO(t));return n.constant=function(a){return arguments.length?e(lO(t=+a),cO(t)):t},Zc(n)}function vB(){var e=wE(oj());return e.copy=function(){return Ex(e,vB()).constant(e.constant())},bi.apply(e,arguments)}function dO(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function XNe(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function QNe(e){return e<0?-e*e:e*e}function NE(e){var t=e(Wa,Wa),n=1;function a(){return n===1?e(Wa,Wa):n===.5?e(XNe,QNe):e(dO(n),dO(1/n))}return t.exponent=function(s){return arguments.length?(n=+s,a()):n},Zc(t)}function SE(){var e=NE(oj());return e.copy=function(){return Ex(e,SE()).exponent(e.exponent())},bi.apply(e,arguments),e}function JNe(){return SE.apply(null,arguments).exponent(.5)}function uO(e){return Math.sign(e)*e*e}function ZNe(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function xB(){var e=gE(),t=[0,1],n=!1,a;function s(i){var o=ZNe(e(i));return isNaN(o)?a:n?Math.round(o):o}return s.invert=function(i){return e.invert(uO(i))},s.domain=function(i){return arguments.length?(e.domain(i),s):e.domain()},s.range=function(i){return arguments.length?(e.range((t=Array.from(i,ab)).map(uO)),s):t.slice()},s.rangeRound=function(i){return s.range(i).round(!0)},s.round=function(i){return arguments.length?(n=!!i,s):n},s.clamp=function(i){return arguments.length?(e.clamp(i),s):e.clamp()},s.unknown=function(i){return arguments.length?(a=i,s):a},s.copy=function(){return xB(e.domain(),t).round(n).clamp(e.clamp()).unknown(a)},bi.apply(s,arguments),Zc(s)}function gB(){var e=[],t=[],n=[],a;function s(){var o=0,l=Math.max(1,t.length);for(n=new Array(l-1);++o<l;)n[o-1]=aNe(e,o/l);return i}function i(o){return o==null||isNaN(o=+o)?a:t[Cx(n,o)]}return i.invertExtent=function(o){var l=t.indexOf(o);return l<0?[NaN,NaN]:[l>0?n[l-1]:e[0],l<n.length?n[l]:e[e.length-1]]},i.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let l of o)l!=null&&!isNaN(l=+l)&&e.push(l);return e.sort(_c),s()},i.range=function(o){return arguments.length?(t=Array.from(o),s()):t.slice()},i.unknown=function(o){return arguments.length?(a=o,i):a},i.quantiles=function(){return n.slice()},i.copy=function(){return gB().domain(e).range(t).unknown(a)},bi.apply(i,arguments)}function yB(){var e=0,t=1,n=1,a=[.5],s=[0,1],i;function o(c){return c!=null&&c<=c?s[Cx(a,c,0,n)]:i}function l(){var c=-1;for(a=new Array(n);++c<n;)a[c]=((c+1)*t-(c-n)*e)/(n+1);return o}return o.domain=function(c){return arguments.length?([e,t]=c,e=+e,t=+t,l()):[e,t]},o.range=function(c){return arguments.length?(n=(s=Array.from(c)).length-1,l()):s.slice()},o.invertExtent=function(c){var d=s.indexOf(c);return d<0?[NaN,NaN]:d<1?[e,a[0]]:d>=n?[a[n-1],t]:[a[d-1],a[d]]},o.unknown=function(c){return arguments.length&&(i=c),o},o.thresholds=function(){return a.slice()},o.copy=function(){return yB().domain([e,t]).range(s).unknown(i)},bi.apply(Zc(o),arguments)}function bB(){var e=[.5],t=[0,1],n,a=1;function s(i){return i!=null&&i<=i?t[Cx(e,i,0,a)]:n}return s.domain=function(i){return arguments.length?(e=Array.from(i),a=Math.min(e.length,t.length-1),s):e.slice()},s.range=function(i){return arguments.length?(t=Array.from(i),a=Math.min(e.length,t.length-1),s):t.slice()},s.invertExtent=function(i){var o=t.indexOf(i);return[e[o-1],e[o]]},s.unknown=function(i){return arguments.length?(n=i,s):n},s.copy=function(){return bB().domain(e).range(t).unknown(n)},bi.apply(s,arguments)}const Q2=new Date,J2=new Date;function Zn(e,t,n,a){function s(i){return e(i=arguments.length===0?new Date:new Date(+i)),i}return s.floor=i=>(e(i=new Date(+i)),i),s.ceil=i=>(e(i=new Date(i-1)),t(i,1),e(i),i),s.round=i=>{const o=s(i),l=s.ceil(i);return i-o<l-i?o:l},s.offset=(i,o)=>(t(i=new Date(+i),o==null?1:Math.floor(o)),i),s.range=(i,o,l)=>{const c=[];if(i=s.ceil(i),l=l==null?1:Math.floor(l),!(i<o)||!(l>0))return c;let d;do c.push(d=new Date(+i)),t(i,l),e(i);while(d<i&&i<o);return c},s.filter=i=>Zn(o=>{if(o>=o)for(;e(o),!i(o);)o.setTime(o-1)},(o,l)=>{if(o>=o)if(l<0)for(;++l<=0;)for(;t(o,-1),!i(o););else for(;--l>=0;)for(;t(o,1),!i(o););}),n&&(s.count=(i,o)=>(Q2.setTime(+i),J2.setTime(+o),e(Q2),e(J2),Math.floor(n(Q2,J2))),s.every=i=>(i=Math.floor(i),!isFinite(i)||!(i>0)?null:i>1?s.filter(a?o=>a(o)%i===0:o=>s.count(0,o)%i===0):s)),s}const ob=Zn(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);ob.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Zn(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):ob);ob.range;const fl=1e3,li=fl*60,ml=li*60,Tl=ml*24,CE=Tl*7,fO=Tl*30,Z2=Tl*365,Md=Zn(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*fl)},(e,t)=>(t-e)/fl,e=>e.getUTCSeconds());Md.range;const AE=Zn(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*fl)},(e,t)=>{e.setTime(+e+t*li)},(e,t)=>(t-e)/li,e=>e.getMinutes());AE.range;const EE=Zn(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*li)},(e,t)=>(t-e)/li,e=>e.getUTCMinutes());EE.range;const PE=Zn(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*fl-e.getMinutes()*li)},(e,t)=>{e.setTime(+e+t*ml)},(e,t)=>(t-e)/ml,e=>e.getHours());PE.range;const TE=Zn(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*ml)},(e,t)=>(t-e)/ml,e=>e.getUTCHours());TE.range;const Px=Zn(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*li)/Tl,e=>e.getDate()-1);Px.range;const lj=Zn(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Tl,e=>e.getUTCDate()-1);lj.range;const jB=Zn(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Tl,e=>Math.floor(e/Tl));jB.range;function Nu(e){return Zn(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*li)/CE)}const cj=Nu(0),lb=Nu(1),e5e=Nu(2),t5e=Nu(3),mm=Nu(4),r5e=Nu(5),n5e=Nu(6);cj.range;lb.range;e5e.range;t5e.range;mm.range;r5e.range;n5e.range;function Su(e){return Zn(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/CE)}const dj=Su(0),cb=Su(1),a5e=Su(2),s5e=Su(3),hm=Su(4),i5e=Su(5),o5e=Su(6);dj.range;cb.range;a5e.range;s5e.range;hm.range;i5e.range;o5e.range;const IE=Zn(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());IE.range;const DE=Zn(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());DE.range;const Il=Zn(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Il.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Zn(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});Il.range;const Dl=Zn(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Dl.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Zn(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});Dl.range;function wB(e,t,n,a,s,i){const o=[[Md,1,fl],[Md,5,5*fl],[Md,15,15*fl],[Md,30,30*fl],[i,1,li],[i,5,5*li],[i,15,15*li],[i,30,30*li],[s,1,ml],[s,3,3*ml],[s,6,6*ml],[s,12,12*ml],[a,1,Tl],[a,2,2*Tl],[n,1,CE],[t,1,fO],[t,3,3*fO],[e,1,Z2]];function l(d,f,u){const m=f<d;m&&([d,f]=[f,d]);const h=u&&typeof u.range=="function"?u:c(d,f,u),x=h?h.range(d,+f+1):[];return m?x.reverse():x}function c(d,f,u){const m=Math.abs(f-d)/u,h=mE(([,,p])=>p).right(o,m);if(h===o.length)return e.every(MS(d/Z2,f/Z2,u));if(h===0)return ob.every(Math.max(MS(d,f,u),1));const[x,g]=o[m/o[h-1][2]<o[h][2]/m?h-1:h];return x.every(g)}return[l,c]}const[l5e,c5e]=wB(Dl,DE,dj,jB,TE,EE),[d5e,u5e]=wB(Il,IE,cj,Px,PE,AE);function eN(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function tN(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function sp(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function f5e(e){var t=e.dateTime,n=e.date,a=e.time,s=e.periods,i=e.days,o=e.shortDays,l=e.months,c=e.shortMonths,d=ip(s),f=op(s),u=ip(i),m=op(i),h=ip(o),x=op(o),g=ip(l),p=op(l),v=ip(c),y=op(c),b={a:M,A:B,b:U,B:W,c:null,d:gO,e:gO,f:L5e,g:W5e,G:G5e,H:k5e,I:O5e,j:_5e,L:NB,m:R5e,M:F5e,p:q,q:R,Q:jO,s:wO,S:M5e,u:$5e,U:B5e,V:z5e,w:U5e,W:V5e,x:null,X:null,y:q5e,Y:H5e,Z:K5e,"%":bO},j={a:V,A:G,b:ee,B:re,c:null,d:yO,e:yO,f:J5e,g:lSe,G:dSe,H:Y5e,I:X5e,j:Q5e,L:CB,m:Z5e,M:eSe,p:de,q:ue,Q:jO,s:wO,S:tSe,u:rSe,U:nSe,V:aSe,w:sSe,W:iSe,x:null,X:null,y:oSe,Y:cSe,Z:uSe,"%":bO},C={a:D,A:T,b:A,B:_,c:k,d:vO,e:vO,f:P5e,g:pO,G:hO,H:xO,I:xO,j:S5e,L:E5e,m:N5e,M:C5e,p:I,q:w5e,Q:I5e,s:D5e,S:A5e,u:x5e,U:g5e,V:y5e,w:v5e,W:b5e,x:L,X:$,y:pO,Y:hO,Z:j5e,"%":T5e};b.x=E(n,b),b.X=E(a,b),b.c=E(t,b),j.x=E(n,j),j.X=E(a,j),j.c=E(t,j);function E(oe,ge){return function(ve){var xe=[],Oe=-1,ye=0,le=oe.length,ne,Ae,Se;for(ve instanceof Date||(ve=new Date(+ve));++Oe<le;)oe.charCodeAt(Oe)===37&&(xe.push(oe.slice(ye,Oe)),(Ae=mO[ne=oe.charAt(++Oe)])!=null?ne=oe.charAt(++Oe):Ae=ne==="e"?" ":"0",(Se=ge[ne])&&(ne=Se(ve,Ae)),xe.push(ne),ye=Oe+1);return xe.push(oe.slice(ye,Oe)),xe.join("")}}function S(oe,ge){return function(ve){var xe=sp(1900,void 0,1),Oe=N(xe,oe,ve+="",0),ye,le;if(Oe!=ve.length)return null;if("Q"in xe)return new Date(xe.Q);if("s"in xe)return new Date(xe.s*1e3+("L"in xe?xe.L:0));if(ge&&!("Z"in xe)&&(xe.Z=0),"p"in xe&&(xe.H=xe.H%12+xe.p*12),xe.m===void 0&&(xe.m="q"in xe?xe.q:0),"V"in xe){if(xe.V<1||xe.V>53)return null;"w"in xe||(xe.w=1),"Z"in xe?(ye=tN(sp(xe.y,0,1)),le=ye.getUTCDay(),ye=le>4||le===0?cb.ceil(ye):cb(ye),ye=lj.offset(ye,(xe.V-1)*7),xe.y=ye.getUTCFullYear(),xe.m=ye.getUTCMonth(),xe.d=ye.getUTCDate()+(xe.w+6)%7):(ye=eN(sp(xe.y,0,1)),le=ye.getDay(),ye=le>4||le===0?lb.ceil(ye):lb(ye),ye=Px.offset(ye,(xe.V-1)*7),xe.y=ye.getFullYear(),xe.m=ye.getMonth(),xe.d=ye.getDate()+(xe.w+6)%7)}else("W"in xe||"U"in xe)&&("w"in xe||(xe.w="u"in xe?xe.u%7:"W"in xe?1:0),le="Z"in xe?tN(sp(xe.y,0,1)).getUTCDay():eN(sp(xe.y,0,1)).getDay(),xe.m=0,xe.d="W"in xe?(xe.w+6)%7+xe.W*7-(le+5)%7:xe.w+xe.U*7-(le+6)%7);return"Z"in xe?(xe.H+=xe.Z/100|0,xe.M+=xe.Z%100,tN(xe)):eN(xe)}}function N(oe,ge,ve,xe){for(var Oe=0,ye=ge.length,le=ve.length,ne,Ae;Oe<ye;){if(xe>=le)return-1;if(ne=ge.charCodeAt(Oe++),ne===37){if(ne=ge.charAt(Oe++),Ae=C[ne in mO?ge.charAt(Oe++):ne],!Ae||(xe=Ae(oe,ve,xe))<0)return-1}else if(ne!=ve.charCodeAt(xe++))return-1}return xe}function I(oe,ge,ve){var xe=d.exec(ge.slice(ve));return xe?(oe.p=f.get(xe[0].toLowerCase()),ve+xe[0].length):-1}function D(oe,ge,ve){var xe=h.exec(ge.slice(ve));return xe?(oe.w=x.get(xe[0].toLowerCase()),ve+xe[0].length):-1}function T(oe,ge,ve){var xe=u.exec(ge.slice(ve));return xe?(oe.w=m.get(xe[0].toLowerCase()),ve+xe[0].length):-1}function A(oe,ge,ve){var xe=v.exec(ge.slice(ve));return xe?(oe.m=y.get(xe[0].toLowerCase()),ve+xe[0].length):-1}function _(oe,ge,ve){var xe=g.exec(ge.slice(ve));return xe?(oe.m=p.get(xe[0].toLowerCase()),ve+xe[0].length):-1}function k(oe,ge,ve){return N(oe,t,ge,ve)}function L(oe,ge,ve){return N(oe,n,ge,ve)}function $(oe,ge,ve){return N(oe,a,ge,ve)}function M(oe){return o[oe.getDay()]}function B(oe){return i[oe.getDay()]}function U(oe){return c[oe.getMonth()]}function W(oe){return l[oe.getMonth()]}function q(oe){return s[+(oe.getHours()>=12)]}function R(oe){return 1+~~(oe.getMonth()/3)}function V(oe){return o[oe.getUTCDay()]}function G(oe){return i[oe.getUTCDay()]}function ee(oe){return c[oe.getUTCMonth()]}function re(oe){return l[oe.getUTCMonth()]}function de(oe){return s[+(oe.getUTCHours()>=12)]}function ue(oe){return 1+~~(oe.getUTCMonth()/3)}return{format:function(oe){var ge=E(oe+="",b);return ge.toString=function(){return oe},ge},parse:function(oe){var ge=S(oe+="",!1);return ge.toString=function(){return oe},ge},utcFormat:function(oe){var ge=E(oe+="",j);return ge.toString=function(){return oe},ge},utcParse:function(oe){var ge=S(oe+="",!0);return ge.toString=function(){return oe},ge}}}var mO={"-":"",_:" ",0:"0"},ca=/^\s*\d+/,m5e=/^%/,h5e=/[\\^$*+?|[\]().{}]/g;function gr(e,t,n){var a=e<0?"-":"",s=(a?-e:e)+"",i=s.length;return a+(i<n?new Array(n-i+1).join(t)+s:s)}function p5e(e){return e.replace(h5e,"\\$&")}function ip(e){return new RegExp("^(?:"+e.map(p5e).join("|")+")","i")}function op(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function v5e(e,t,n){var a=ca.exec(t.slice(n,n+1));return a?(e.w=+a[0],n+a[0].length):-1}function x5e(e,t,n){var a=ca.exec(t.slice(n,n+1));return a?(e.u=+a[0],n+a[0].length):-1}function g5e(e,t,n){var a=ca.exec(t.slice(n,n+2));return a?(e.U=+a[0],n+a[0].length):-1}function y5e(e,t,n){var a=ca.exec(t.slice(n,n+2));return a?(e.V=+a[0],n+a[0].length):-1}function b5e(e,t,n){var a=ca.exec(t.slice(n,n+2));return a?(e.W=+a[0],n+a[0].length):-1}function hO(e,t,n){var a=ca.exec(t.slice(n,n+4));return a?(e.y=+a[0],n+a[0].length):-1}function pO(e,t,n){var a=ca.exec(t.slice(n,n+2));return a?(e.y=+a[0]+(+a[0]>68?1900:2e3),n+a[0].length):-1}function j5e(e,t,n){var a=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return a?(e.Z=a[1]?0:-(a[2]+(a[3]||"00")),n+a[0].length):-1}function w5e(e,t,n){var a=ca.exec(t.slice(n,n+1));return a?(e.q=a[0]*3-3,n+a[0].length):-1}function N5e(e,t,n){var a=ca.exec(t.slice(n,n+2));return a?(e.m=a[0]-1,n+a[0].length):-1}function vO(e,t,n){var a=ca.exec(t.slice(n,n+2));return a?(e.d=+a[0],n+a[0].length):-1}function S5e(e,t,n){var a=ca.exec(t.slice(n,n+3));return a?(e.m=0,e.d=+a[0],n+a[0].length):-1}function xO(e,t,n){var a=ca.exec(t.slice(n,n+2));return a?(e.H=+a[0],n+a[0].length):-1}function C5e(e,t,n){var a=ca.exec(t.slice(n,n+2));return a?(e.M=+a[0],n+a[0].length):-1}function A5e(e,t,n){var a=ca.exec(t.slice(n,n+2));return a?(e.S=+a[0],n+a[0].length):-1}function E5e(e,t,n){var a=ca.exec(t.slice(n,n+3));return a?(e.L=+a[0],n+a[0].length):-1}function P5e(e,t,n){var a=ca.exec(t.slice(n,n+6));return a?(e.L=Math.floor(a[0]/1e3),n+a[0].length):-1}function T5e(e,t,n){var a=m5e.exec(t.slice(n,n+1));return a?n+a[0].length:-1}function I5e(e,t,n){var a=ca.exec(t.slice(n));return a?(e.Q=+a[0],n+a[0].length):-1}function D5e(e,t,n){var a=ca.exec(t.slice(n));return a?(e.s=+a[0],n+a[0].length):-1}function gO(e,t){return gr(e.getDate(),t,2)}function k5e(e,t){return gr(e.getHours(),t,2)}function O5e(e,t){return gr(e.getHours()%12||12,t,2)}function _5e(e,t){return gr(1+Px.count(Il(e),e),t,3)}function NB(e,t){return gr(e.getMilliseconds(),t,3)}function L5e(e,t){return NB(e,t)+"000"}function R5e(e,t){return gr(e.getMonth()+1,t,2)}function F5e(e,t){return gr(e.getMinutes(),t,2)}function M5e(e,t){return gr(e.getSeconds(),t,2)}function $5e(e){var t=e.getDay();return t===0?7:t}function B5e(e,t){return gr(cj.count(Il(e)-1,e),t,2)}function SB(e){var t=e.getDay();return t>=4||t===0?mm(e):mm.ceil(e)}function z5e(e,t){return e=SB(e),gr(mm.count(Il(e),e)+(Il(e).getDay()===4),t,2)}function U5e(e){return e.getDay()}function V5e(e,t){return gr(lb.count(Il(e)-1,e),t,2)}function q5e(e,t){return gr(e.getFullYear()%100,t,2)}function W5e(e,t){return e=SB(e),gr(e.getFullYear()%100,t,2)}function H5e(e,t){return gr(e.getFullYear()%1e4,t,4)}function G5e(e,t){var n=e.getDay();return e=n>=4||n===0?mm(e):mm.ceil(e),gr(e.getFullYear()%1e4,t,4)}function K5e(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+gr(t/60|0,"0",2)+gr(t%60,"0",2)}function yO(e,t){return gr(e.getUTCDate(),t,2)}function Y5e(e,t){return gr(e.getUTCHours(),t,2)}function X5e(e,t){return gr(e.getUTCHours()%12||12,t,2)}function Q5e(e,t){return gr(1+lj.count(Dl(e),e),t,3)}function CB(e,t){return gr(e.getUTCMilliseconds(),t,3)}function J5e(e,t){return CB(e,t)+"000"}function Z5e(e,t){return gr(e.getUTCMonth()+1,t,2)}function eSe(e,t){return gr(e.getUTCMinutes(),t,2)}function tSe(e,t){return gr(e.getUTCSeconds(),t,2)}function rSe(e){var t=e.getUTCDay();return t===0?7:t}function nSe(e,t){return gr(dj.count(Dl(e)-1,e),t,2)}function AB(e){var t=e.getUTCDay();return t>=4||t===0?hm(e):hm.ceil(e)}function aSe(e,t){return e=AB(e),gr(hm.count(Dl(e),e)+(Dl(e).getUTCDay()===4),t,2)}function sSe(e){return e.getUTCDay()}function iSe(e,t){return gr(cb.count(Dl(e)-1,e),t,2)}function oSe(e,t){return gr(e.getUTCFullYear()%100,t,2)}function lSe(e,t){return e=AB(e),gr(e.getUTCFullYear()%100,t,2)}function cSe(e,t){return gr(e.getUTCFullYear()%1e4,t,4)}function dSe(e,t){var n=e.getUTCDay();return e=n>=4||n===0?hm(e):hm.ceil(e),gr(e.getUTCFullYear()%1e4,t,4)}function uSe(){return"+0000"}function bO(){return"%"}function jO(e){return+e}function wO(e){return Math.floor(+e/1e3)}var ff,EB,PB;fSe({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function fSe(e){return ff=f5e(e),EB=ff.format,ff.parse,PB=ff.utcFormat,ff.utcParse,ff}function mSe(e){return new Date(e)}function hSe(e){return e instanceof Date?+e:+new Date(+e)}function kE(e,t,n,a,s,i,o,l,c,d){var f=gE(),u=f.invert,m=f.domain,h=d(".%L"),x=d(":%S"),g=d("%I:%M"),p=d("%I %p"),v=d("%a %d"),y=d("%b %d"),b=d("%B"),j=d("%Y");function C(E){return(c(E)<E?h:l(E)<E?x:o(E)<E?g:i(E)<E?p:a(E)<E?s(E)<E?v:y:n(E)<E?b:j)(E)}return f.invert=function(E){return new Date(u(E))},f.domain=function(E){return arguments.length?m(Array.from(E,hSe)):m().map(mSe)},f.ticks=function(E){var S=m();return e(S[0],S[S.length-1],E??10)},f.tickFormat=function(E,S){return S==null?C:d(S)},f.nice=function(E){var S=m();return(!E||typeof E.range!="function")&&(E=t(S[0],S[S.length-1],E??10)),E?m(hB(S,E)):f},f.copy=function(){return Ex(f,kE(e,t,n,a,s,i,o,l,c,d))},f}function pSe(){return bi.apply(kE(d5e,u5e,Il,IE,cj,Px,PE,AE,Md,EB).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function vSe(){return bi.apply(kE(l5e,c5e,Dl,DE,dj,lj,TE,EE,Md,PB).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function uj(){var e=0,t=1,n,a,s,i,o=Wa,l=!1,c;function d(u){return u==null||isNaN(u=+u)?c:o(s===0?.5:(u=(i(u)-n)*s,l?Math.max(0,Math.min(1,u)):u))}d.domain=function(u){return arguments.length?([e,t]=u,n=i(e=+e),a=i(t=+t),s=n===a?0:1/(a-n),d):[e,t]},d.clamp=function(u){return arguments.length?(l=!!u,d):l},d.interpolator=function(u){return arguments.length?(o=u,d):o};function f(u){return function(m){var h,x;return arguments.length?([h,x]=m,o=u(h,x),d):[o(0),o(1)]}}return d.range=f(sh),d.rangeRound=f(xE),d.unknown=function(u){return arguments.length?(c=u,d):c},function(u){return i=u,n=u(e),a=u(t),s=n===a?0:1/(a-n),d}}function ed(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function TB(){var e=Zc(uj()(Wa));return e.copy=function(){return ed(e,TB())},Rl.apply(e,arguments)}function IB(){var e=jE(uj()).domain([1,10]);return e.copy=function(){return ed(e,IB()).base(e.base())},Rl.apply(e,arguments)}function DB(){var e=wE(uj());return e.copy=function(){return ed(e,DB()).constant(e.constant())},Rl.apply(e,arguments)}function OE(){var e=NE(uj());return e.copy=function(){return ed(e,OE()).exponent(e.exponent())},Rl.apply(e,arguments)}function xSe(){return OE.apply(null,arguments).exponent(.5)}function kB(){var e=[],t=Wa;function n(a){if(a!=null&&!isNaN(a=+a))return t((Cx(e,a,1)-1)/(e.length-1))}return n.domain=function(a){if(!arguments.length)return e.slice();e=[];for(let s of a)s!=null&&!isNaN(s=+s)&&e.push(s);return e.sort(_c),n},n.interpolator=function(a){return arguments.length?(t=a,n):t},n.range=function(){return e.map((a,s)=>t(s/(e.length-1)))},n.quantiles=function(a){return Array.from({length:a+1},(s,i)=>nNe(e,i/a))},n.copy=function(){return kB(t).domain(e)},Rl.apply(n,arguments)}function fj(){var e=0,t=.5,n=1,a=1,s,i,o,l,c,d=Wa,f,u=!1,m;function h(g){return isNaN(g=+g)?m:(g=.5+((g=+f(g))-i)*(a*g<a*i?l:c),d(u?Math.max(0,Math.min(1,g)):g))}h.domain=function(g){return arguments.length?([e,t,n]=g,s=f(e=+e),i=f(t=+t),o=f(n=+n),l=s===i?0:.5/(i-s),c=i===o?0:.5/(o-i),a=i<s?-1:1,h):[e,t,n]},h.clamp=function(g){return arguments.length?(u=!!g,h):u},h.interpolator=function(g){return arguments.length?(d=g,h):d};function x(g){return function(p){var v,y,b;return arguments.length?([v,y,b]=p,d=TNe(g,[v,y,b]),h):[d(0),d(.5),d(1)]}}return h.range=x(sh),h.rangeRound=x(xE),h.unknown=function(g){return arguments.length?(m=g,h):m},function(g){return f=g,s=g(e),i=g(t),o=g(n),l=s===i?0:.5/(i-s),c=i===o?0:.5/(o-i),a=i<s?-1:1,h}}function OB(){var e=Zc(fj()(Wa));return e.copy=function(){return ed(e,OB())},Rl.apply(e,arguments)}function _B(){var e=jE(fj()).domain([.1,1,10]);return e.copy=function(){return ed(e,_B()).base(e.base())},Rl.apply(e,arguments)}function LB(){var e=wE(fj());return e.copy=function(){return ed(e,LB()).constant(e.constant())},Rl.apply(e,arguments)}function _E(){var e=NE(fj());return e.copy=function(){return ed(e,_E()).exponent(e.exponent())},Rl.apply(e,arguments)}function gSe(){return _E.apply(null,arguments).exponent(.5)}const NO=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:Nv,scaleDiverging:OB,scaleDivergingLog:_B,scaleDivergingPow:_E,scaleDivergingSqrt:gSe,scaleDivergingSymlog:LB,scaleIdentity:mB,scaleImplicit:$S,scaleLinear:ib,scaleLog:pB,scaleOrdinal:hE,scalePoint:Rp,scalePow:SE,scaleQuantile:gB,scaleQuantize:yB,scaleRadial:xB,scaleSequential:TB,scaleSequentialLog:IB,scaleSequentialPow:OE,scaleSequentialQuantile:kB,scaleSequentialSqrt:xSe,scaleSequentialSymlog:DB,scaleSqrt:JNe,scaleSymlog:vB,scaleThreshold:bB,scaleTime:pSe,scaleUtc:vSe,tickFormat:fB},Symbol.toStringTag,{value:"Module"}));var ySe=Ym;function bSe(e,t,n){for(var a=-1,s=e.length;++a<s;){var i=e[a],o=t(i);if(o!=null&&(l===void 0?o===o&&!ySe(o):n(o,l)))var l=o,c=i}return c}var RB=bSe;function jSe(e,t){return e>t}var wSe=jSe,NSe=RB,SSe=wSe,CSe=nh;function ASe(e){return e&&e.length?NSe(e,CSe,SSe):void 0}var ESe=ASe;const gc=Er(ESe);function PSe(e,t){return e<t}var TSe=PSe,ISe=RB,DSe=TSe,kSe=nh;function OSe(e){return e&&e.length?ISe(e,kSe,DSe):void 0}var _Se=OSe;const mj=Er(_Se);var LSe=G4,RSe=ah,FSe=q9,MSe=vs;function $Se(e,t){var n=MSe(e)?LSe:FSe;return n(e,RSe(t))}var BSe=$Se,zSe=U9,USe=BSe;function VSe(e,t){return zSe(USe(e,t),1)}var qSe=VSe;const WSe=Er(qSe);var HSe=cE;function GSe(e,t){return HSe(e,t)}var KSe=GSe;const Pv=Er(KSe);var ih=1e9,YSe={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},RE,sn=!0,xi="[DecimalError] ",Qd=xi+"Invalid argument: ",LE=xi+"Exponent out of range: ",oh=Math.floor,Nd=Math.pow,XSe=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Es,na=1e7,Xr=7,FB=9007199254740991,db=oh(FB/Xr),jt={};jt.absoluteValue=jt.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};jt.comparedTo=jt.cmp=function(e){var t,n,a,s,i=this;if(e=new i.constructor(e),i.s!==e.s)return i.s||-e.s;if(i.e!==e.e)return i.e>e.e^i.s<0?1:-1;for(a=i.d.length,s=e.d.length,t=0,n=a<s?a:s;t<n;++t)if(i.d[t]!==e.d[t])return i.d[t]>e.d[t]^i.s<0?1:-1;return a===s?0:a>s^i.s<0?1:-1};jt.decimalPlaces=jt.dp=function(){var e=this,t=e.d.length-1,n=(t-e.e)*Xr;if(t=e.d[t],t)for(;t%10==0;t/=10)n--;return n<0?0:n};jt.dividedBy=jt.div=function(e){return yl(this,new this.constructor(e))};jt.dividedToIntegerBy=jt.idiv=function(e){var t=this,n=t.constructor;return Fr(yl(t,new n(e),0,1),n.precision)};jt.equals=jt.eq=function(e){return!this.cmp(e)};jt.exponent=function(){return Bn(this)};jt.greaterThan=jt.gt=function(e){return this.cmp(e)>0};jt.greaterThanOrEqualTo=jt.gte=function(e){return this.cmp(e)>=0};jt.isInteger=jt.isint=function(){return this.e>this.d.length-2};jt.isNegative=jt.isneg=function(){return this.s<0};jt.isPositive=jt.ispos=function(){return this.s>0};jt.isZero=function(){return this.s===0};jt.lessThan=jt.lt=function(e){return this.cmp(e)<0};jt.lessThanOrEqualTo=jt.lte=function(e){return this.cmp(e)<1};jt.logarithm=jt.log=function(e){var t,n=this,a=n.constructor,s=a.precision,i=s+5;if(e===void 0)e=new a(10);else if(e=new a(e),e.s<1||e.eq(Es))throw Error(xi+"NaN");if(n.s<1)throw Error(xi+(n.s?"NaN":"-Infinity"));return n.eq(Es)?new a(0):(sn=!1,t=yl(Tv(n,i),Tv(e,i),i),sn=!0,Fr(t,s))};jt.minus=jt.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?BB(t,e):MB(t,(e.s=-e.s,e))};jt.modulo=jt.mod=function(e){var t,n=this,a=n.constructor,s=a.precision;if(e=new a(e),!e.s)throw Error(xi+"NaN");return n.s?(sn=!1,t=yl(n,e,0,1).times(e),sn=!0,n.minus(t)):Fr(new a(n),s)};jt.naturalExponential=jt.exp=function(){return $B(this)};jt.naturalLogarithm=jt.ln=function(){return Tv(this)};jt.negated=jt.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};jt.plus=jt.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?MB(t,e):BB(t,(e.s=-e.s,e))};jt.precision=jt.sd=function(e){var t,n,a,s=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(Qd+e);if(t=Bn(s)+1,a=s.d.length-1,n=a*Xr+1,a=s.d[a],a){for(;a%10==0;a/=10)n--;for(a=s.d[0];a>=10;a/=10)n++}return e&&t>n?t:n};jt.squareRoot=jt.sqrt=function(){var e,t,n,a,s,i,o,l=this,c=l.constructor;if(l.s<1){if(!l.s)return new c(0);throw Error(xi+"NaN")}for(e=Bn(l),sn=!1,s=Math.sqrt(+l),s==0||s==1/0?(t=To(l.d),(t.length+e)%2==0&&(t+="0"),s=Math.sqrt(t),e=oh((e+1)/2)-(e<0||e%2),s==1/0?t="5e"+e:(t=s.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),a=new c(t)):a=new c(s.toString()),n=c.precision,s=o=n+3;;)if(i=a,a=i.plus(yl(l,i,o+2)).times(.5),To(i.d).slice(0,o)===(t=To(a.d)).slice(0,o)){if(t=t.slice(o-3,o+1),s==o&&t=="4999"){if(Fr(i,n+1,0),i.times(i).eq(l)){a=i;break}}else if(t!="9999")break;o+=4}return sn=!0,Fr(a,n)};jt.times=jt.mul=function(e){var t,n,a,s,i,o,l,c,d,f=this,u=f.constructor,m=f.d,h=(e=new u(e)).d;if(!f.s||!e.s)return new u(0);for(e.s*=f.s,n=f.e+e.e,c=m.length,d=h.length,c<d&&(i=m,m=h,h=i,o=c,c=d,d=o),i=[],o=c+d,a=o;a--;)i.push(0);for(a=d;--a>=0;){for(t=0,s=c+a;s>a;)l=i[s]+h[a]*m[s-a-1]+t,i[s--]=l%na|0,t=l/na|0;i[s]=(i[s]+t)%na|0}for(;!i[--o];)i.pop();return t?++n:i.shift(),e.d=i,e.e=n,sn?Fr(e,u.precision):e};jt.toDecimalPlaces=jt.todp=function(e,t){var n=this,a=n.constructor;return n=new a(n),e===void 0?n:(Bo(e,0,ih),t===void 0?t=a.rounding:Bo(t,0,8),Fr(n,e+Bn(n)+1,t))};jt.toExponential=function(e,t){var n,a=this,s=a.constructor;return e===void 0?n=du(a,!0):(Bo(e,0,ih),t===void 0?t=s.rounding:Bo(t,0,8),a=Fr(new s(a),e+1,t),n=du(a,!0,e+1)),n};jt.toFixed=function(e,t){var n,a,s=this,i=s.constructor;return e===void 0?du(s):(Bo(e,0,ih),t===void 0?t=i.rounding:Bo(t,0,8),a=Fr(new i(s),e+Bn(s)+1,t),n=du(a.abs(),!1,e+Bn(a)+1),s.isneg()&&!s.isZero()?"-"+n:n)};jt.toInteger=jt.toint=function(){var e=this,t=e.constructor;return Fr(new t(e),Bn(e)+1,t.rounding)};jt.toNumber=function(){return+this};jt.toPower=jt.pow=function(e){var t,n,a,s,i,o,l=this,c=l.constructor,d=12,f=+(e=new c(e));if(!e.s)return new c(Es);if(l=new c(l),!l.s){if(e.s<1)throw Error(xi+"Infinity");return l}if(l.eq(Es))return l;if(a=c.precision,e.eq(Es))return Fr(l,a);if(t=e.e,n=e.d.length-1,o=t>=n,i=l.s,o){if((n=f<0?-f:f)<=FB){for(s=new c(Es),t=Math.ceil(a/Xr+4),sn=!1;n%2&&(s=s.times(l),CO(s.d,t)),n=oh(n/2),n!==0;)l=l.times(l),CO(l.d,t);return sn=!0,e.s<0?new c(Es).div(s):Fr(s,a)}}else if(i<0)throw Error(xi+"NaN");return i=i<0&&e.d[Math.max(t,n)]&1?-1:1,l.s=1,sn=!1,s=e.times(Tv(l,a+d)),sn=!0,s=$B(s),s.s=i,s};jt.toPrecision=function(e,t){var n,a,s=this,i=s.constructor;return e===void 0?(n=Bn(s),a=du(s,n<=i.toExpNeg||n>=i.toExpPos)):(Bo(e,1,ih),t===void 0?t=i.rounding:Bo(t,0,8),s=Fr(new i(s),e,t),n=Bn(s),a=du(s,e<=n||n<=i.toExpNeg,e)),a};jt.toSignificantDigits=jt.tosd=function(e,t){var n=this,a=n.constructor;return e===void 0?(e=a.precision,t=a.rounding):(Bo(e,1,ih),t===void 0?t=a.rounding:Bo(t,0,8)),Fr(new a(n),e,t)};jt.toString=jt.valueOf=jt.val=jt.toJSON=jt[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=Bn(e),n=e.constructor;return du(e,t<=n.toExpNeg||t>=n.toExpPos)};function MB(e,t){var n,a,s,i,o,l,c,d,f=e.constructor,u=f.precision;if(!e.s||!t.s)return t.s||(t=new f(e)),sn?Fr(t,u):t;if(c=e.d,d=t.d,o=e.e,s=t.e,c=c.slice(),i=o-s,i){for(i<0?(a=c,i=-i,l=d.length):(a=d,s=o,l=c.length),o=Math.ceil(u/Xr),l=o>l?o+1:l+1,i>l&&(i=l,a.length=1),a.reverse();i--;)a.push(0);a.reverse()}for(l=c.length,i=d.length,l-i<0&&(i=l,a=d,d=c,c=a),n=0;i;)n=(c[--i]=c[i]+d[i]+n)/na|0,c[i]%=na;for(n&&(c.unshift(n),++s),l=c.length;c[--l]==0;)c.pop();return t.d=c,t.e=s,sn?Fr(t,u):t}function Bo(e,t,n){if(e!==~~e||e<t||e>n)throw Error(Qd+e)}function To(e){var t,n,a,s=e.length-1,i="",o=e[0];if(s>0){for(i+=o,t=1;t<s;t++)a=e[t]+"",n=Xr-a.length,n&&(i+=oc(n)),i+=a;o=e[t],a=o+"",n=Xr-a.length,n&&(i+=oc(n))}else if(o===0)return"0";for(;o%10===0;)o/=10;return i+o}var yl=function(){function e(a,s){var i,o=0,l=a.length;for(a=a.slice();l--;)i=a[l]*s+o,a[l]=i%na|0,o=i/na|0;return o&&a.unshift(o),a}function t(a,s,i,o){var l,c;if(i!=o)c=i>o?1:-1;else for(l=c=0;l<i;l++)if(a[l]!=s[l]){c=a[l]>s[l]?1:-1;break}return c}function n(a,s,i){for(var o=0;i--;)a[i]-=o,o=a[i]<s[i]?1:0,a[i]=o*na+a[i]-s[i];for(;!a[0]&&a.length>1;)a.shift()}return function(a,s,i,o){var l,c,d,f,u,m,h,x,g,p,v,y,b,j,C,E,S,N,I=a.constructor,D=a.s==s.s?1:-1,T=a.d,A=s.d;if(!a.s)return new I(a);if(!s.s)throw Error(xi+"Division by zero");for(c=a.e-s.e,S=A.length,C=T.length,h=new I(D),x=h.d=[],d=0;A[d]==(T[d]||0);)++d;if(A[d]>(T[d]||0)&&--c,i==null?y=i=I.precision:o?y=i+(Bn(a)-Bn(s))+1:y=i,y<0)return new I(0);if(y=y/Xr+2|0,d=0,S==1)for(f=0,A=A[0],y++;(d<C||f)&&y--;d++)b=f*na+(T[d]||0),x[d]=b/A|0,f=b%A|0;else{for(f=na/(A[0]+1)|0,f>1&&(A=e(A,f),T=e(T,f),S=A.length,C=T.length),j=S,g=T.slice(0,S),p=g.length;p<S;)g[p++]=0;N=A.slice(),N.unshift(0),E=A[0],A[1]>=na/2&&++E;do f=0,l=t(A,g,S,p),l<0?(v=g[0],S!=p&&(v=v*na+(g[1]||0)),f=v/E|0,f>1?(f>=na&&(f=na-1),u=e(A,f),m=u.length,p=g.length,l=t(u,g,m,p),l==1&&(f--,n(u,S<m?N:A,m))):(f==0&&(l=f=1),u=A.slice()),m=u.length,m<p&&u.unshift(0),n(g,u,p),l==-1&&(p=g.length,l=t(A,g,S,p),l<1&&(f++,n(g,S<p?N:A,p))),p=g.length):l===0&&(f++,g=[0]),x[d++]=f,l&&g[0]?g[p++]=T[j]||0:(g=[T[j]],p=1);while((j++<C||g[0]!==void 0)&&y--)}return x[0]||x.shift(),h.e=c,Fr(h,o?i+Bn(h)+1:i)}}();function $B(e,t){var n,a,s,i,o,l,c=0,d=0,f=e.constructor,u=f.precision;if(Bn(e)>16)throw Error(LE+Bn(e));if(!e.s)return new f(Es);for(t==null?(sn=!1,l=u):l=t,o=new f(.03125);e.abs().gte(.1);)e=e.times(o),d+=5;for(a=Math.log(Nd(2,d))/Math.LN10*2+5|0,l+=a,n=s=i=new f(Es),f.precision=l;;){if(s=Fr(s.times(e),l),n=n.times(++c),o=i.plus(yl(s,n,l)),To(o.d).slice(0,l)===To(i.d).slice(0,l)){for(;d--;)i=Fr(i.times(i),l);return f.precision=u,t==null?(sn=!0,Fr(i,u)):i}i=o}}function Bn(e){for(var t=e.e*Xr,n=e.d[0];n>=10;n/=10)t++;return t}function rN(e,t,n){if(t>e.LN10.sd())throw sn=!0,n&&(e.precision=n),Error(xi+"LN10 precision limit exceeded");return Fr(new e(e.LN10),t)}function oc(e){for(var t="";e--;)t+="0";return t}function Tv(e,t){var n,a,s,i,o,l,c,d,f,u=1,m=10,h=e,x=h.d,g=h.constructor,p=g.precision;if(h.s<1)throw Error(xi+(h.s?"NaN":"-Infinity"));if(h.eq(Es))return new g(0);if(t==null?(sn=!1,d=p):d=t,h.eq(10))return t==null&&(sn=!0),rN(g,d);if(d+=m,g.precision=d,n=To(x),a=n.charAt(0),i=Bn(h),Math.abs(i)<15e14){for(;a<7&&a!=1||a==1&&n.charAt(1)>3;)h=h.times(e),n=To(h.d),a=n.charAt(0),u++;i=Bn(h),a>1?(h=new g("0."+n),i++):h=new g(a+"."+n.slice(1))}else return c=rN(g,d+2,p).times(i+""),h=Tv(new g(a+"."+n.slice(1)),d-m).plus(c),g.precision=p,t==null?(sn=!0,Fr(h,p)):h;for(l=o=h=yl(h.minus(Es),h.plus(Es),d),f=Fr(h.times(h),d),s=3;;){if(o=Fr(o.times(f),d),c=l.plus(yl(o,new g(s),d)),To(c.d).slice(0,d)===To(l.d).slice(0,d))return l=l.times(2),i!==0&&(l=l.plus(rN(g,d+2,p).times(i+""))),l=yl(l,new g(u),d),g.precision=p,t==null?(sn=!0,Fr(l,p)):l;l=c,s+=2}}function SO(e,t){var n,a,s;for((n=t.indexOf("."))>-1&&(t=t.replace(".","")),(a=t.search(/e/i))>0?(n<0&&(n=a),n+=+t.slice(a+1),t=t.substring(0,a)):n<0&&(n=t.length),a=0;t.charCodeAt(a)===48;)++a;for(s=t.length;t.charCodeAt(s-1)===48;)--s;if(t=t.slice(a,s),t){if(s-=a,n=n-a-1,e.e=oh(n/Xr),e.d=[],a=(n+1)%Xr,n<0&&(a+=Xr),a<s){for(a&&e.d.push(+t.slice(0,a)),s-=Xr;a<s;)e.d.push(+t.slice(a,a+=Xr));t=t.slice(a),a=Xr-t.length}else a-=s;for(;a--;)t+="0";if(e.d.push(+t),sn&&(e.e>db||e.e<-db))throw Error(LE+n)}else e.s=0,e.e=0,e.d=[0];return e}function Fr(e,t,n){var a,s,i,o,l,c,d,f,u=e.d;for(o=1,i=u[0];i>=10;i/=10)o++;if(a=t-o,a<0)a+=Xr,s=t,d=u[f=0];else{if(f=Math.ceil((a+1)/Xr),i=u.length,f>=i)return e;for(d=i=u[f],o=1;i>=10;i/=10)o++;a%=Xr,s=a-Xr+o}if(n!==void 0&&(i=Nd(10,o-s-1),l=d/i%10|0,c=t<0||u[f+1]!==void 0||d%i,c=n<4?(l||c)&&(n==0||n==(e.s<0?3:2)):l>5||l==5&&(n==4||c||n==6&&(a>0?s>0?d/Nd(10,o-s):0:u[f-1])%10&1||n==(e.s<0?8:7))),t<1||!u[0])return c?(i=Bn(e),u.length=1,t=t-i-1,u[0]=Nd(10,(Xr-t%Xr)%Xr),e.e=oh(-t/Xr)||0):(u.length=1,u[0]=e.e=e.s=0),e;if(a==0?(u.length=f,i=1,f--):(u.length=f+1,i=Nd(10,Xr-a),u[f]=s>0?(d/Nd(10,o-s)%Nd(10,s)|0)*i:0),c)for(;;)if(f==0){(u[0]+=i)==na&&(u[0]=1,++e.e);break}else{if(u[f]+=i,u[f]!=na)break;u[f--]=0,i=1}for(a=u.length;u[--a]===0;)u.pop();if(sn&&(e.e>db||e.e<-db))throw Error(LE+Bn(e));return e}function BB(e,t){var n,a,s,i,o,l,c,d,f,u,m=e.constructor,h=m.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new m(e),sn?Fr(t,h):t;if(c=e.d,u=t.d,a=t.e,d=e.e,c=c.slice(),o=d-a,o){for(f=o<0,f?(n=c,o=-o,l=u.length):(n=u,a=d,l=c.length),s=Math.max(Math.ceil(h/Xr),l)+2,o>s&&(o=s,n.length=1),n.reverse(),s=o;s--;)n.push(0);n.reverse()}else{for(s=c.length,l=u.length,f=s<l,f&&(l=s),s=0;s<l;s++)if(c[s]!=u[s]){f=c[s]<u[s];break}o=0}for(f&&(n=c,c=u,u=n,t.s=-t.s),l=c.length,s=u.length-l;s>0;--s)c[l++]=0;for(s=u.length;s>o;){if(c[--s]<u[s]){for(i=s;i&&c[--i]===0;)c[i]=na-1;--c[i],c[s]+=na}c[s]-=u[s]}for(;c[--l]===0;)c.pop();for(;c[0]===0;c.shift())--a;return c[0]?(t.d=c,t.e=a,sn?Fr(t,h):t):new m(0)}function du(e,t,n){var a,s=Bn(e),i=To(e.d),o=i.length;return t?(n&&(a=n-o)>0?i=i.charAt(0)+"."+i.slice(1)+oc(a):o>1&&(i=i.charAt(0)+"."+i.slice(1)),i=i+(s<0?"e":"e+")+s):s<0?(i="0."+oc(-s-1)+i,n&&(a=n-o)>0&&(i+=oc(a))):s>=o?(i+=oc(s+1-o),n&&(a=n-s-1)>0&&(i=i+"."+oc(a))):((a=s+1)<o&&(i=i.slice(0,a)+"."+i.slice(a)),n&&(a=n-o)>0&&(s+1===o&&(i+="."),i+=oc(a))),e.s<0?"-"+i:i}function CO(e,t){if(e.length>t)return e.length=t,!0}function zB(e){var t,n,a;function s(i){var o=this;if(!(o instanceof s))return new s(i);if(o.constructor=s,i instanceof s){o.s=i.s,o.e=i.e,o.d=(i=i.d)?i.slice():i;return}if(typeof i=="number"){if(i*0!==0)throw Error(Qd+i);if(i>0)o.s=1;else if(i<0)i=-i,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(i===~~i&&i<1e7){o.e=0,o.d=[i];return}return SO(o,i.toString())}else if(typeof i!="string")throw Error(Qd+i);if(i.charCodeAt(0)===45?(i=i.slice(1),o.s=-1):o.s=1,XSe.test(i))SO(o,i);else throw Error(Qd+i)}if(s.prototype=jt,s.ROUND_UP=0,s.ROUND_DOWN=1,s.ROUND_CEIL=2,s.ROUND_FLOOR=3,s.ROUND_HALF_UP=4,s.ROUND_HALF_DOWN=5,s.ROUND_HALF_EVEN=6,s.ROUND_HALF_CEIL=7,s.ROUND_HALF_FLOOR=8,s.clone=zB,s.config=s.set=QSe,e===void 0&&(e={}),e)for(a=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<a.length;)e.hasOwnProperty(n=a[t++])||(e[n]=this[n]);return s.config(e),s}function QSe(e){if(!e||typeof e!="object")throw Error(xi+"Object expected");var t,n,a,s=["precision",1,ih,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<s.length;t+=3)if((a=e[n=s[t]])!==void 0)if(oh(a)===a&&a>=s[t+1]&&a<=s[t+2])this[n]=a;else throw Error(Qd+n+": "+a);if((a=e[n="LN10"])!==void 0)if(a==Math.LN10)this[n]=new this(a);else throw Error(Qd+n+": "+a);return this}var RE=zB(YSe);Es=new RE(1);const Or=RE;function JSe(e){return rCe(e)||tCe(e)||eCe(e)||ZSe()}function ZSe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function eCe(e,t){if(e){if(typeof e=="string")return VS(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return VS(e,t)}}function tCe(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function rCe(e){if(Array.isArray(e))return VS(e)}function VS(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var nCe=function(t){return t},UB={"@@functional/placeholder":!0},VB=function(t){return t===UB},AO=function(t){return function n(){return arguments.length===0||arguments.length===1&&VB(arguments.length<=0?void 0:arguments[0])?n:t.apply(void 0,arguments)}},aCe=function e(t,n){return t===1?n:AO(function(){for(var a=arguments.length,s=new Array(a),i=0;i<a;i++)s[i]=arguments[i];var o=s.filter(function(l){return l!==UB}).length;return o>=t?n.apply(void 0,s):e(t-o,AO(function(){for(var l=arguments.length,c=new Array(l),d=0;d<l;d++)c[d]=arguments[d];var f=s.map(function(u){return VB(u)?c.shift():u});return n.apply(void 0,JSe(f).concat(c))}))})},hj=function(t){return aCe(t.length,t)},qS=function(t,n){for(var a=[],s=t;s<n;++s)a[s-t]=s;return a},sCe=hj(function(e,t){return Array.isArray(t)?t.map(e):Object.keys(t).map(function(n){return t[n]}).map(e)}),iCe=function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];if(!n.length)return nCe;var s=n.reverse(),i=s[0],o=s.slice(1);return function(){return o.reduce(function(l,c){return c(l)},i.apply(void 0,arguments))}},WS=function(t){return Array.isArray(t)?t.reverse():t.split("").reverse.join("")},qB=function(t){var n=null,a=null;return function(){for(var s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];return n&&i.every(function(l,c){return l===n[c]})||(n=i,a=t.apply(void 0,i)),a}};function oCe(e){var t;return e===0?t=1:t=Math.floor(new Or(e).abs().log(10).toNumber())+1,t}function lCe(e,t,n){for(var a=new Or(e),s=0,i=[];a.lt(t)&&s<1e5;)i.push(a.toNumber()),a=a.add(n),s++;return i}var cCe=hj(function(e,t,n){var a=+e,s=+t;return a+n*(s-a)}),dCe=hj(function(e,t,n){var a=t-+e;return a=a||1/0,(n-e)/a}),uCe=hj(function(e,t,n){var a=t-+e;return a=a||1/0,Math.max(0,Math.min(1,(n-e)/a))});const pj={rangeStep:lCe,getDigitCount:oCe,interpolateNumber:cCe,uninterpolateNumber:dCe,uninterpolateTruncation:uCe};function HS(e){return hCe(e)||mCe(e)||WB(e)||fCe()}function fCe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function mCe(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function hCe(e){if(Array.isArray(e))return GS(e)}function Iv(e,t){return xCe(e)||vCe(e,t)||WB(e,t)||pCe()}function pCe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function WB(e,t){if(e){if(typeof e=="string")return GS(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return GS(e,t)}}function GS(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function vCe(e,t){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(e)))){var n=[],a=!0,s=!1,i=void 0;try{for(var o=e[Symbol.iterator](),l;!(a=(l=o.next()).done)&&(n.push(l.value),!(t&&n.length===t));a=!0);}catch(c){s=!0,i=c}finally{try{!a&&o.return!=null&&o.return()}finally{if(s)throw i}}return n}}function xCe(e){if(Array.isArray(e))return e}function HB(e){var t=Iv(e,2),n=t[0],a=t[1],s=n,i=a;return n>a&&(s=a,i=n),[s,i]}function GB(e,t,n){if(e.lte(0))return new Or(0);var a=pj.getDigitCount(e.toNumber()),s=new Or(10).pow(a),i=e.div(s),o=a!==1?.05:.1,l=new Or(Math.ceil(i.div(o).toNumber())).add(n).mul(o),c=l.mul(s);return t?c:new Or(Math.ceil(c))}function gCe(e,t,n){var a=1,s=new Or(e);if(!s.isint()&&n){var i=Math.abs(e);i<1?(a=new Or(10).pow(pj.getDigitCount(e)-1),s=new Or(Math.floor(s.div(a).toNumber())).mul(a)):i>1&&(s=new Or(Math.floor(e)))}else e===0?s=new Or(Math.floor((t-1)/2)):n||(s=new Or(Math.floor(e)));var o=Math.floor((t-1)/2),l=iCe(sCe(function(c){return s.add(new Or(c-o).mul(a)).toNumber()}),qS);return l(0,t)}function KB(e,t,n,a){var s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((t-e)/(n-1)))return{step:new Or(0),tickMin:new Or(0),tickMax:new Or(0)};var i=GB(new Or(t).sub(e).div(n-1),a,s),o;e<=0&&t>=0?o=new Or(0):(o=new Or(e).add(t).div(2),o=o.sub(new Or(o).mod(i)));var l=Math.ceil(o.sub(e).div(i).toNumber()),c=Math.ceil(new Or(t).sub(o).div(i).toNumber()),d=l+c+1;return d>n?KB(e,t,n,a,s+1):(d<n&&(c=t>0?c+(n-d):c,l=t>0?l:l+(n-d)),{step:i,tickMin:o.sub(new Or(l).mul(i)),tickMax:o.add(new Or(c).mul(i))})}function yCe(e){var t=Iv(e,2),n=t[0],a=t[1],s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=Math.max(s,2),l=HB([n,a]),c=Iv(l,2),d=c[0],f=c[1];if(d===-1/0||f===1/0){var u=f===1/0?[d].concat(HS(qS(0,s-1).map(function(){return 1/0}))):[].concat(HS(qS(0,s-1).map(function(){return-1/0})),[f]);return n>a?WS(u):u}if(d===f)return gCe(d,s,i);var m=KB(d,f,o,i),h=m.step,x=m.tickMin,g=m.tickMax,p=pj.rangeStep(x,g.add(new Or(.1).mul(h)),h);return n>a?WS(p):p}function bCe(e,t){var n=Iv(e,2),a=n[0],s=n[1],i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=HB([a,s]),l=Iv(o,2),c=l[0],d=l[1];if(c===-1/0||d===1/0)return[a,s];if(c===d)return[c];var f=Math.max(t,2),u=GB(new Or(d).sub(c).div(f-1),i,0),m=[].concat(HS(pj.rangeStep(new Or(c),new Or(d).sub(new Or(.99).mul(u)),u)),[d]);return a>s?WS(m):m}var jCe=qB(yCe),wCe=qB(bCe),NCe=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function pm(e){"@babel/helpers - typeof";return pm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},pm(e)}function ub(){return ub=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},ub.apply(this,arguments)}function SCe(e,t){return PCe(e)||ECe(e,t)||ACe(e,t)||CCe()}function CCe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ACe(e,t){if(e){if(typeof e=="string")return EO(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return EO(e,t)}}function EO(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function ECe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var a,s,i,o,l=[],c=!0,d=!1;try{if(i=(n=n.call(e)).next,t===0){if(Object(n)!==n)return;c=!1}else for(;!(c=(a=i.call(n)).done)&&(l.push(a.value),l.length!==t);c=!0);}catch(f){d=!0,s=f}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw s}}return l}}function PCe(e){if(Array.isArray(e))return e}function TCe(e,t){if(e==null)return{};var n=ICe(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function ICe(e,t){if(e==null)return{};var n={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;n[a]=e[a]}return n}function DCe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function PO(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,QB(a.key),a)}}function kCe(e,t,n){return t&&PO(e.prototype,t),n&&PO(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function OCe(e,t,n){return t=fb(t),_Ce(e,YB()?Reflect.construct(t,n||[],fb(e).constructor):t.apply(e,n))}function _Ce(e,t){if(t&&(pm(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return LCe(e)}function LCe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function YB(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(YB=function(){return!!e})()}function fb(e){return fb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},fb(e)}function RCe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&KS(e,t)}function KS(e,t){return KS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},KS(e,t)}function XB(e,t,n){return t=QB(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function QB(e){var t=FCe(e,"string");return pm(t)=="symbol"?t:t+""}function FCe(e,t){if(pm(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t||"default");if(pm(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var vj=function(e){function t(){return DCe(this,t),OCe(this,t,arguments)}return RCe(t,e),kCe(t,[{key:"render",value:function(){var a=this.props,s=a.offset,i=a.layout,o=a.width,l=a.dataKey,c=a.data,d=a.dataPointFormatter,f=a.xAxis,u=a.yAxis,m=TCe(a,NCe),h=sr(m,!1);this.props.direction==="x"&&f.type!=="number"&&Uc(!1);var x=c.map(function(g){var p=d(g,l),v=p.x,y=p.y,b=p.value,j=p.errorVal;if(!j)return null;var C=[],E,S;if(Array.isArray(j)){var N=SCe(j,2);E=N[0],S=N[1]}else E=S=j;if(i==="vertical"){var I=f.scale,D=y+s,T=D+o,A=D-o,_=I(b-E),k=I(b+S);C.push({x1:k,y1:T,x2:k,y2:A}),C.push({x1:_,y1:D,x2:k,y2:D}),C.push({x1:_,y1:T,x2:_,y2:A})}else if(i==="horizontal"){var L=u.scale,$=v+s,M=$-o,B=$+o,U=L(b-E),W=L(b+S);C.push({x1:M,y1:W,x2:B,y2:W}),C.push({x1:$,y1:U,x2:$,y2:W}),C.push({x1:M,y1:U,x2:B,y2:U})}return pe.createElement(fn,ub({className:"recharts-errorBar",key:"bar-".concat(C.map(function(q){return"".concat(q.x1,"-").concat(q.x2,"-").concat(q.y1,"-").concat(q.y2)}))},h),C.map(function(q){return pe.createElement("line",ub({},q,{key:"line-".concat(q.x1,"-").concat(q.x2,"-").concat(q.y1,"-").concat(q.y2)}))}))});return pe.createElement(fn,{className:"recharts-errorBars"},x)}}])}(pe.Component);XB(vj,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});XB(vj,"displayName","ErrorBar");function Dv(e){"@babel/helpers - typeof";return Dv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Dv(e)}function TO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function vd(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?TO(Object(n),!0).forEach(function(a){MCe(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):TO(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function MCe(e,t,n){return t=$Ce(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function $Ce(e){var t=BCe(e,"string");return Dv(t)=="symbol"?t:t+""}function BCe(e,t){if(Dv(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t||"default");if(Dv(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var JB=function(t){var n=t.children,a=t.formattedGraphicalItems,s=t.legendWidth,i=t.legendContent,o=Ss(n,Uf);if(!o)return null;var l=Uf.defaultProps,c=l!==void 0?vd(vd({},l),o.props):{},d;return o.props&&o.props.payload?d=o.props&&o.props.payload:i==="children"?d=(a||[]).reduce(function(f,u){var m=u.item,h=u.props,x=h.sectors||h.data||[];return f.concat(x.map(function(g){return{type:o.props.iconType||m.props.legendType,value:g.name,color:g.fill,payload:g}}))},[]):d=(a||[]).map(function(f){var u=f.item,m=u.type.defaultProps,h=m!==void 0?vd(vd({},m),u.props):{},x=h.dataKey,g=h.name,p=h.legendType,v=h.hide;return{inactive:v,dataKey:x,type:c.iconType||p||"square",color:FE(u),value:g||x,payload:h}}),vd(vd(vd({},c),Uf.getWithHeight(o,s)),{},{payload:d,item:o})};function kv(e){"@babel/helpers - typeof";return kv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},kv(e)}function IO(e){return qCe(e)||VCe(e)||UCe(e)||zCe()}function zCe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function UCe(e,t){if(e){if(typeof e=="string")return YS(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return YS(e,t)}}function VCe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function qCe(e){if(Array.isArray(e))return YS(e)}function YS(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function DO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function jn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?DO(Object(n),!0).forEach(function(a){qf(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):DO(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function qf(e,t,n){return t=WCe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function WCe(e){var t=HCe(e,"string");return kv(t)=="symbol"?t:t+""}function HCe(e,t){if(kv(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t||"default");if(kv(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Fs(e,t,n){return ir(e)||ir(t)?n:Qn(t)?fi(e,t,n):Zt(t)?t(e):n}function Fp(e,t,n,a){var s=WSe(e,function(l){return Fs(l,t)});if(n==="number"){var i=s.filter(function(l){return dt(l)||parseFloat(l)});return i.length?[mj(i),gc(i)]:[1/0,-1/0]}var o=a?s.filter(function(l){return!ir(l)}):s;return o.map(function(l){return Qn(l)||l instanceof Date?l:""})}var GCe=function(t){var n,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],s=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,o=-1,l=(n=a==null?void 0:a.length)!==null&&n!==void 0?n:0;if(l<=1)return 0;if(i&&i.axisType==="angleAxis"&&Math.abs(Math.abs(i.range[1]-i.range[0])-360)<=1e-6)for(var c=i.range,d=0;d<l;d++){var f=d>0?s[d-1].coordinate:s[l-1].coordinate,u=s[d].coordinate,m=d>=l-1?s[0].coordinate:s[d+1].coordinate,h=void 0;if(Gi(u-f)!==Gi(m-u)){var x=[];if(Gi(m-u)===Gi(c[1]-c[0])){h=m;var g=u+c[1]-c[0];x[0]=Math.min(g,(g+f)/2),x[1]=Math.max(g,(g+f)/2)}else{h=f;var p=m+c[1]-c[0];x[0]=Math.min(u,(p+u)/2),x[1]=Math.max(u,(p+u)/2)}var v=[Math.min(u,(h+u)/2),Math.max(u,(h+u)/2)];if(t>v[0]&&t<=v[1]||t>=x[0]&&t<=x[1]){o=s[d].index;break}}else{var y=Math.min(f,m),b=Math.max(f,m);if(t>(y+u)/2&&t<=(b+u)/2){o=s[d].index;break}}}else for(var j=0;j<l;j++)if(j===0&&t<=(a[j].coordinate+a[j+1].coordinate)/2||j>0&&j<l-1&&t>(a[j].coordinate+a[j-1].coordinate)/2&&t<=(a[j].coordinate+a[j+1].coordinate)/2||j===l-1&&t>(a[j].coordinate+a[j-1].coordinate)/2){o=a[j].index;break}return o},FE=function(t){var n,a=t,s=a.type.displayName,i=(n=t.type)!==null&&n!==void 0&&n.defaultProps?jn(jn({},t.type.defaultProps),t.props):t.props,o=i.stroke,l=i.fill,c;switch(s){case"Line":c=o;break;case"Area":case"Radar":c=o&&o!=="none"?o:l;break;default:c=l;break}return c},KCe=function(t){var n=t.barSize,a=t.totalSize,s=t.stackGroups,i=s===void 0?{}:s;if(!i)return{};for(var o={},l=Object.keys(i),c=0,d=l.length;c<d;c++)for(var f=i[l[c]].stackGroups,u=Object.keys(f),m=0,h=u.length;m<h;m++){var x=f[u[m]],g=x.items,p=x.cateAxisId,v=g.filter(function(S){return xl(S.type).indexOf("Bar")>=0});if(v&&v.length){var y=v[0].type.defaultProps,b=y!==void 0?jn(jn({},y),v[0].props):v[0].props,j=b.barSize,C=b[p];o[C]||(o[C]=[]);var E=ir(j)?n:j;o[C].push({item:v[0],stackList:v.slice(1),barSize:ir(E)?void 0:cu(E,a,0)})}}return o},YCe=function(t){var n=t.barGap,a=t.barCategoryGap,s=t.bandSize,i=t.sizeList,o=i===void 0?[]:i,l=t.maxBarSize,c=o.length;if(c<1)return null;var d=cu(n,s,0,!0),f,u=[];if(o[0].barSize===+o[0].barSize){var m=!1,h=s/c,x=o.reduce(function(j,C){return j+C.barSize||0},0);x+=(c-1)*d,x>=s&&(x-=(c-1)*d,d=0),x>=s&&h>0&&(m=!0,h*=.9,x=c*h);var g=(s-x)/2>>0,p={offset:g-d,size:0};f=o.reduce(function(j,C){var E={item:C.item,position:{offset:p.offset+p.size+d,size:m?h:C.barSize}},S=[].concat(IO(j),[E]);return p=S[S.length-1].position,C.stackList&&C.stackList.length&&C.stackList.forEach(function(N){S.push({item:N,position:p})}),S},u)}else{var v=cu(a,s,0,!0);s-2*v-(c-1)*d<=0&&(d=0);var y=(s-2*v-(c-1)*d)/c;y>1&&(y>>=0);var b=l===+l?Math.min(y,l):y;f=o.reduce(function(j,C,E){var S=[].concat(IO(j),[{item:C.item,position:{offset:v+(y+d)*E+(y-b)/2,size:b}}]);return C.stackList&&C.stackList.length&&C.stackList.forEach(function(N){S.push({item:N,position:S[S.length-1].position})}),S},u)}return f},XCe=function(t,n,a,s){var i=a.children,o=a.width,l=a.margin,c=o-(l.left||0)-(l.right||0),d=JB({children:i,legendWidth:c});if(d){var f=s||{},u=f.width,m=f.height,h=d.align,x=d.verticalAlign,g=d.layout;if((g==="vertical"||g==="horizontal"&&x==="middle")&&h!=="center"&&dt(t[h]))return jn(jn({},t),{},qf({},h,t[h]+(u||0)));if((g==="horizontal"||g==="vertical"&&h==="center")&&x!=="middle"&&dt(t[x]))return jn(jn({},t),{},qf({},x,t[x]+(m||0)))}return t},QCe=function(t,n,a){return ir(n)?!0:t==="horizontal"?n==="yAxis":t==="vertical"||a==="x"?n==="xAxis":a==="y"?n==="yAxis":!0},ZB=function(t,n,a,s,i){var o=n.props.children,l=Xi(o,vj).filter(function(d){return QCe(s,i,d.props.direction)});if(l&&l.length){var c=l.map(function(d){return d.props.dataKey});return t.reduce(function(d,f){var u=Fs(f,a);if(ir(u))return d;var m=Array.isArray(u)?[mj(u),gc(u)]:[u,u],h=c.reduce(function(x,g){var p=Fs(f,g,0),v=m[0]-Math.abs(Array.isArray(p)?p[0]:p),y=m[1]+Math.abs(Array.isArray(p)?p[1]:p);return[Math.min(v,x[0]),Math.max(y,x[1])]},[1/0,-1/0]);return[Math.min(h[0],d[0]),Math.max(h[1],d[1])]},[1/0,-1/0])}return null},JCe=function(t,n,a,s,i){var o=n.map(function(l){return ZB(t,l,a,i,s)}).filter(function(l){return!ir(l)});return o&&o.length?o.reduce(function(l,c){return[Math.min(l[0],c[0]),Math.max(l[1],c[1])]},[1/0,-1/0]):null},ez=function(t,n,a,s,i){var o=n.map(function(c){var d=c.props.dataKey;return a==="number"&&d&&ZB(t,c,d,s)||Fp(t,d,a,i)});if(a==="number")return o.reduce(function(c,d){return[Math.min(c[0],d[0]),Math.max(c[1],d[1])]},[1/0,-1/0]);var l={};return o.reduce(function(c,d){for(var f=0,u=d.length;f<u;f++)l[d[f]]||(l[d[f]]=!0,c.push(d[f]));return c},[])},tz=function(t,n){return t==="horizontal"&&n==="xAxis"||t==="vertical"&&n==="yAxis"||t==="centric"&&n==="angleAxis"||t==="radial"&&n==="radiusAxis"},$d=function(t,n,a){if(!t)return null;var s=t.scale,i=t.duplicateDomain,o=t.type,l=t.range,c=t.realScaleType==="scaleBand"?s.bandwidth()/2:2,d=(n||a)&&o==="category"&&s.bandwidth?s.bandwidth()/c:0;if(d=t.axisType==="angleAxis"&&(l==null?void 0:l.length)>=2?Gi(l[0]-l[1])*2*d:d,n&&(t.ticks||t.niceTicks)){var f=(t.ticks||t.niceTicks).map(function(u){var m=i?i.indexOf(u):u;return{coordinate:s(m)+d,value:u,offset:d}});return f.filter(function(u){return!eh(u.coordinate)})}return t.isCategorical&&t.categoricalDomain?t.categoricalDomain.map(function(u,m){return{coordinate:s(u)+d,value:u,index:m,offset:d}}):s.ticks&&!a?s.ticks(t.tickCount).map(function(u){return{coordinate:s(u)+d,value:u,offset:d}}):s.domain().map(function(u,m){return{coordinate:s(u)+d,value:i?i[u]:u,index:m,offset:d}})},nN=new WeakMap,m0=function(t,n){if(typeof n!="function")return t;nN.has(t)||nN.set(t,new WeakMap);var a=nN.get(t);if(a.has(n))return a.get(n);var s=function(){t.apply(void 0,arguments),n.apply(void 0,arguments)};return a.set(n,s),s},ZCe=function(t,n,a){var s=t.scale,i=t.type,o=t.layout,l=t.axisType;if(s==="auto")return o==="radial"&&l==="radiusAxis"?{scale:Nv(),realScaleType:"band"}:o==="radial"&&l==="angleAxis"?{scale:ib(),realScaleType:"linear"}:i==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!a)?{scale:Rp(),realScaleType:"point"}:i==="category"?{scale:Nv(),realScaleType:"band"}:{scale:ib(),realScaleType:"linear"};if(lu(s)){var c="scale".concat(ej(s));return{scale:(NO[c]||Rp)(),realScaleType:NO[c]?c:"point"}}return Zt(s)?{scale:s}:{scale:Rp(),realScaleType:"point"}},kO=1e-4,eAe=function(t){var n=t.domain();if(!(!n||n.length<=2)){var a=n.length,s=t.range(),i=Math.min(s[0],s[1])-kO,o=Math.max(s[0],s[1])+kO,l=t(n[0]),c=t(n[a-1]);(l<i||l>o||c<i||c>o)&&t.domain([n[0],n[a-1]])}},tAe=function(t,n){if(!t)return null;for(var a=0,s=t.length;a<s;a++)if(t[a].item===n)return t[a].position;return null},rAe=function(t,n){if(!n||n.length!==2||!dt(n[0])||!dt(n[1]))return t;var a=Math.min(n[0],n[1]),s=Math.max(n[0],n[1]),i=[t[0],t[1]];return(!dt(t[0])||t[0]<a)&&(i[0]=a),(!dt(t[1])||t[1]>s)&&(i[1]=s),i[0]>s&&(i[0]=s),i[1]<a&&(i[1]=a),i},nAe=function(t){var n=t.length;if(!(n<=0))for(var a=0,s=t[0].length;a<s;++a)for(var i=0,o=0,l=0;l<n;++l){var c=eh(t[l][a][1])?t[l][a][0]:t[l][a][1];c>=0?(t[l][a][0]=i,t[l][a][1]=i+c,i=t[l][a][1]):(t[l][a][0]=o,t[l][a][1]=o+c,o=t[l][a][1])}},aAe=function(t){var n=t.length;if(!(n<=0))for(var a=0,s=t[0].length;a<s;++a)for(var i=0,o=0;o<n;++o){var l=eh(t[o][a][1])?t[o][a][0]:t[o][a][1];l>=0?(t[o][a][0]=i,t[o][a][1]=i+l,i=t[o][a][1]):(t[o][a][0]=0,t[o][a][1]=0)}},sAe={sign:nAe,expand:Nve,none:om,silhouette:Sve,wiggle:Cve,positive:aAe},iAe=function(t,n,a){var s=n.map(function(l){return l.props.dataKey}),i=sAe[a],o=wve().keys(s).value(function(l,c){return+Fs(l,c,0)}).order(bS).offset(i);return o(t)},oAe=function(t,n,a,s,i,o){if(!t)return null;var l=o?n.reverse():n,c={},d=l.reduce(function(u,m){var h,x=(h=m.type)!==null&&h!==void 0&&h.defaultProps?jn(jn({},m.type.defaultProps),m.props):m.props,g=x.stackId,p=x.hide;if(p)return u;var v=x[a],y=u[v]||{hasStack:!1,stackGroups:{}};if(Qn(g)){var b=y.stackGroups[g]||{numericAxisId:a,cateAxisId:s,items:[]};b.items.push(m),y.hasStack=!0,y.stackGroups[g]=b}else y.stackGroups[Sx("_stackId_")]={numericAxisId:a,cateAxisId:s,items:[m]};return jn(jn({},u),{},qf({},v,y))},c),f={};return Object.keys(d).reduce(function(u,m){var h=d[m];if(h.hasStack){var x={};h.stackGroups=Object.keys(h.stackGroups).reduce(function(g,p){var v=h.stackGroups[p];return jn(jn({},g),{},qf({},p,{numericAxisId:a,cateAxisId:s,items:v.items,stackedData:iAe(t,v.items,i)}))},x)}return jn(jn({},u),{},qf({},m,h))},f)},lAe=function(t,n){var a=n.realScaleType,s=n.type,i=n.tickCount,o=n.originalDomain,l=n.allowDecimals,c=a||n.scale;if(c!=="auto"&&c!=="linear")return null;if(i&&s==="number"&&o&&(o[0]==="auto"||o[1]==="auto")){var d=t.domain();if(!d.length)return null;var f=jCe(d,i,l);return t.domain([mj(f),gc(f)]),{niceTicks:f}}if(i&&s==="number"){var u=t.domain(),m=wCe(u,i,l);return{niceTicks:m}}return null};function OO(e){var t=e.axis,n=e.ticks,a=e.bandSize,s=e.entry,i=e.index,o=e.dataKey;if(t.type==="category"){if(!t.allowDuplicatedCategory&&t.dataKey&&!ir(s[t.dataKey])){var l=Fy(n,"value",s[t.dataKey]);if(l)return l.coordinate+a/2}return n[i]?n[i].coordinate+a/2:null}var c=Fs(s,ir(o)?t.dataKey:o);return ir(c)?null:t.scale(c)}var _O=function(t){var n=t.axis,a=t.ticks,s=t.offset,i=t.bandSize,o=t.entry,l=t.index;if(n.type==="category")return a[l]?a[l].coordinate+s:null;var c=Fs(o,n.dataKey,n.domain[l]);return ir(c)?null:n.scale(c)-i/2+s},cAe=function(t){var n=t.numericAxis,a=n.scale.domain();if(n.type==="number"){var s=Math.min(a[0],a[1]),i=Math.max(a[0],a[1]);return s<=0&&i>=0?0:i<0?i:s}return a[0]},dAe=function(t,n){var a,s=(a=t.type)!==null&&a!==void 0&&a.defaultProps?jn(jn({},t.type.defaultProps),t.props):t.props,i=s.stackId;if(Qn(i)){var o=n[i];if(o){var l=o.items.indexOf(t);return l>=0?o.stackedData[l]:null}}return null},uAe=function(t){return t.reduce(function(n,a){return[mj(a.concat([n[0]]).filter(dt)),gc(a.concat([n[1]]).filter(dt))]},[1/0,-1/0])},rz=function(t,n,a){return Object.keys(t).reduce(function(s,i){var o=t[i],l=o.stackedData,c=l.reduce(function(d,f){var u=uAe(f.slice(n,a+1));return[Math.min(d[0],u[0]),Math.max(d[1],u[1])]},[1/0,-1/0]);return[Math.min(c[0],s[0]),Math.max(c[1],s[1])]},[1/0,-1/0]).map(function(s){return s===1/0||s===-1/0?0:s})},LO=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,RO=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,XS=function(t,n,a){if(Zt(t))return t(n,a);if(!Array.isArray(t))return n;var s=[];if(dt(t[0]))s[0]=a?t[0]:Math.min(t[0],n[0]);else if(LO.test(t[0])){var i=+LO.exec(t[0])[1];s[0]=n[0]-i}else Zt(t[0])?s[0]=t[0](n[0]):s[0]=n[0];if(dt(t[1]))s[1]=a?t[1]:Math.max(t[1],n[1]);else if(RO.test(t[1])){var o=+RO.exec(t[1])[1];s[1]=n[1]+o}else Zt(t[1])?s[1]=t[1](n[1]):s[1]=n[1];return s},mb=function(t,n,a){if(t&&t.scale&&t.scale.bandwidth){var s=t.scale.bandwidth();if(!a||s>0)return s}if(t&&n&&n.length>=2){for(var i=uE(n,function(u){return u.coordinate}),o=1/0,l=1,c=i.length;l<c;l++){var d=i[l],f=i[l-1];o=Math.min((d.coordinate||0)-(f.coordinate||0),o)}return o===1/0?0:o}return a?void 0:0},FO=function(t,n,a){return!t||!t.length||Pv(t,fi(a,"type.defaultProps.domain"))?n:t},nz=function(t,n){var a=t.type.defaultProps?jn(jn({},t.type.defaultProps),t.props):t.props,s=a.dataKey,i=a.name,o=a.unit,l=a.formatter,c=a.tooltipType,d=a.chartType,f=a.hide;return jn(jn({},sr(t,!1)),{},{dataKey:s,unit:o,formatter:l,name:i||s,color:FE(t),value:Fs(n,s),type:c,payload:n,chartType:d,hide:f})};function Ov(e){"@babel/helpers - typeof";return Ov=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ov(e)}function MO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function $O(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?MO(Object(n),!0).forEach(function(a){fAe(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):MO(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function fAe(e,t,n){return t=mAe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function mAe(e){var t=hAe(e,"string");return Ov(t)=="symbol"?t:t+""}function hAe(e,t){if(Ov(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t||"default");if(Ov(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var hb=Math.PI/180,pAe=function(t){return t*180/Math.PI},ya=function(t,n,a,s){return{x:t+Math.cos(-hb*s)*a,y:n+Math.sin(-hb*s)*a}},vAe=function(t,n){var a=t.x,s=t.y,i=n.x,o=n.y;return Math.sqrt(Math.pow(a-i,2)+Math.pow(s-o,2))},xAe=function(t,n){var a=t.x,s=t.y,i=n.cx,o=n.cy,l=vAe({x:a,y:s},{x:i,y:o});if(l<=0)return{radius:l};var c=(a-i)/l,d=Math.acos(c);return s>o&&(d=2*Math.PI-d),{radius:l,angle:pAe(d),angleInRadian:d}},gAe=function(t){var n=t.startAngle,a=t.endAngle,s=Math.floor(n/360),i=Math.floor(a/360),o=Math.min(s,i);return{startAngle:n-o*360,endAngle:a-o*360}},yAe=function(t,n){var a=n.startAngle,s=n.endAngle,i=Math.floor(a/360),o=Math.floor(s/360),l=Math.min(i,o);return t+l*360},BO=function(t,n){var a=t.x,s=t.y,i=xAe({x:a,y:s},n),o=i.radius,l=i.angle,c=n.innerRadius,d=n.outerRadius;if(o<c||o>d)return!1;if(o===0)return!0;var f=gAe(n),u=f.startAngle,m=f.endAngle,h=l,x;if(u<=m){for(;h>m;)h-=360;for(;h<u;)h+=360;x=h>=u&&h<=m}else{for(;h>u;)h-=360;for(;h<m;)h+=360;x=h>=m&&h<=u}return x?$O($O({},n),{},{radius:o,angle:yAe(h,n)}):null};function _v(e){"@babel/helpers - typeof";return _v=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_v(e)}var bAe=["offset"];function jAe(e){return CAe(e)||SAe(e)||NAe(e)||wAe()}function wAe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function NAe(e,t){if(e){if(typeof e=="string")return QS(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return QS(e,t)}}function SAe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function CAe(e){if(Array.isArray(e))return QS(e)}function QS(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function AAe(e,t){if(e==null)return{};var n=EAe(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function EAe(e,t){if(e==null)return{};var n={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;n[a]=e[a]}return n}function zO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function Wn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?zO(Object(n),!0).forEach(function(a){PAe(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zO(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function PAe(e,t,n){return t=TAe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function TAe(e){var t=IAe(e,"string");return _v(t)=="symbol"?t:t+""}function IAe(e,t){if(_v(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t||"default");if(_v(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Lv(){return Lv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Lv.apply(this,arguments)}var DAe=function(t){var n=t.value,a=t.formatter,s=ir(t.children)?n:t.children;return Zt(a)?a(s):s},kAe=function(t,n){var a=Gi(n-t),s=Math.min(Math.abs(n-t),360);return a*s},OAe=function(t,n,a){var s=t.position,i=t.viewBox,o=t.offset,l=t.className,c=i,d=c.cx,f=c.cy,u=c.innerRadius,m=c.outerRadius,h=c.startAngle,x=c.endAngle,g=c.clockWise,p=(u+m)/2,v=kAe(h,x),y=v>=0?1:-1,b,j;s==="insideStart"?(b=h+y*o,j=g):s==="insideEnd"?(b=x-y*o,j=!g):s==="end"&&(b=x+y*o,j=g),j=v<=0?j:!j;var C=ya(d,f,p,b),E=ya(d,f,p,b+(j?1:-1)*359),S="M".concat(C.x,",").concat(C.y,`
    A`).concat(p,",").concat(p,",0,1,").concat(j?0:1,`,
    `).concat(E.x,",").concat(E.y),N=ir(t.id)?Sx("recharts-radial-line-"):t.id;return pe.createElement("text",Lv({},a,{dominantBaseline:"central",className:vr("recharts-radial-bar-label",l)}),pe.createElement("defs",null,pe.createElement("path",{id:N,d:S})),pe.createElement("textPath",{xlinkHref:"#".concat(N)},n))},_Ae=function(t){var n=t.viewBox,a=t.offset,s=t.position,i=n,o=i.cx,l=i.cy,c=i.innerRadius,d=i.outerRadius,f=i.startAngle,u=i.endAngle,m=(f+u)/2;if(s==="outside"){var h=ya(o,l,d+a,m),x=h.x,g=h.y;return{x,y:g,textAnchor:x>=o?"start":"end",verticalAnchor:"middle"}}if(s==="center")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"middle"};if(s==="centerTop")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"start"};if(s==="centerBottom")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"end"};var p=(c+d)/2,v=ya(o,l,p,m),y=v.x,b=v.y;return{x:y,y:b,textAnchor:"middle",verticalAnchor:"middle"}},LAe=function(t){var n=t.viewBox,a=t.parentViewBox,s=t.offset,i=t.position,o=n,l=o.x,c=o.y,d=o.width,f=o.height,u=f>=0?1:-1,m=u*s,h=u>0?"end":"start",x=u>0?"start":"end",g=d>=0?1:-1,p=g*s,v=g>0?"end":"start",y=g>0?"start":"end";if(i==="top"){var b={x:l+d/2,y:c-u*s,textAnchor:"middle",verticalAnchor:h};return Wn(Wn({},b),a?{height:Math.max(c-a.y,0),width:d}:{})}if(i==="bottom"){var j={x:l+d/2,y:c+f+m,textAnchor:"middle",verticalAnchor:x};return Wn(Wn({},j),a?{height:Math.max(a.y+a.height-(c+f),0),width:d}:{})}if(i==="left"){var C={x:l-p,y:c+f/2,textAnchor:v,verticalAnchor:"middle"};return Wn(Wn({},C),a?{width:Math.max(C.x-a.x,0),height:f}:{})}if(i==="right"){var E={x:l+d+p,y:c+f/2,textAnchor:y,verticalAnchor:"middle"};return Wn(Wn({},E),a?{width:Math.max(a.x+a.width-E.x,0),height:f}:{})}var S=a?{width:d,height:f}:{};return i==="insideLeft"?Wn({x:l+p,y:c+f/2,textAnchor:y,verticalAnchor:"middle"},S):i==="insideRight"?Wn({x:l+d-p,y:c+f/2,textAnchor:v,verticalAnchor:"middle"},S):i==="insideTop"?Wn({x:l+d/2,y:c+m,textAnchor:"middle",verticalAnchor:x},S):i==="insideBottom"?Wn({x:l+d/2,y:c+f-m,textAnchor:"middle",verticalAnchor:h},S):i==="insideTopLeft"?Wn({x:l+p,y:c+m,textAnchor:y,verticalAnchor:x},S):i==="insideTopRight"?Wn({x:l+d-p,y:c+m,textAnchor:v,verticalAnchor:x},S):i==="insideBottomLeft"?Wn({x:l+p,y:c+f-m,textAnchor:y,verticalAnchor:h},S):i==="insideBottomRight"?Wn({x:l+d-p,y:c+f-m,textAnchor:v,verticalAnchor:h},S):Xm(i)&&(dt(i.x)||Rd(i.x))&&(dt(i.y)||Rd(i.y))?Wn({x:l+cu(i.x,d),y:c+cu(i.y,f),textAnchor:"end",verticalAnchor:"end"},S):Wn({x:l+d/2,y:c+f/2,textAnchor:"middle",verticalAnchor:"middle"},S)},RAe=function(t){return"cx"in t&&dt(t.cx)};function Oa(e){var t=e.offset,n=t===void 0?5:t,a=AAe(e,bAe),s=Wn({offset:n},a),i=s.viewBox,o=s.position,l=s.value,c=s.children,d=s.content,f=s.className,u=f===void 0?"":f,m=s.textBreakAll;if(!i||ir(l)&&ir(c)&&!w.isValidElement(d)&&!Zt(d))return null;if(w.isValidElement(d))return w.cloneElement(d,s);var h;if(Zt(d)){if(h=w.createElement(d,s),w.isValidElement(h))return h}else h=DAe(s);var x=RAe(i),g=sr(s,!0);if(x&&(o==="insideStart"||o==="insideEnd"||o==="end"))return OAe(s,h,g);var p=x?_Ae(s):LAe(s);return pe.createElement(Zy,Lv({className:vr("recharts-label",u)},g,p,{breakAll:m}),h)}Oa.displayName="Label";var az=function(t){var n=t.cx,a=t.cy,s=t.angle,i=t.startAngle,o=t.endAngle,l=t.r,c=t.radius,d=t.innerRadius,f=t.outerRadius,u=t.x,m=t.y,h=t.top,x=t.left,g=t.width,p=t.height,v=t.clockWise,y=t.labelViewBox;if(y)return y;if(dt(g)&&dt(p)){if(dt(u)&&dt(m))return{x:u,y:m,width:g,height:p};if(dt(h)&&dt(x))return{x:h,y:x,width:g,height:p}}return dt(u)&&dt(m)?{x:u,y:m,width:0,height:0}:dt(n)&&dt(a)?{cx:n,cy:a,startAngle:i||s||0,endAngle:o||s||0,innerRadius:d||0,outerRadius:f||c||l||0,clockWise:v}:t.viewBox?t.viewBox:{}},FAe=function(t,n){return t?t===!0?pe.createElement(Oa,{key:"label-implicit",viewBox:n}):Qn(t)?pe.createElement(Oa,{key:"label-implicit",viewBox:n,value:t}):w.isValidElement(t)?t.type===Oa?w.cloneElement(t,{key:"label-implicit",viewBox:n}):pe.createElement(Oa,{key:"label-implicit",content:t,viewBox:n}):Zt(t)?pe.createElement(Oa,{key:"label-implicit",content:t,viewBox:n}):Xm(t)?pe.createElement(Oa,Lv({viewBox:n},t,{key:"label-implicit"})):null:null},MAe=function(t,n){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&a&&!t.label)return null;var s=t.children,i=az(t),o=Xi(s,Oa).map(function(c,d){return w.cloneElement(c,{viewBox:n||i,key:"label-".concat(d)})});if(!a)return o;var l=FAe(t.label,n||i);return[l].concat(jAe(o))};Oa.parseViewBox=az;Oa.renderCallByParent=MAe;function $Ae(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}var BAe=$Ae;const zAe=Er(BAe);function Rv(e){"@babel/helpers - typeof";return Rv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Rv(e)}var UAe=["valueAccessor"],VAe=["data","dataKey","clockWise","id","textBreakAll"];function qAe(e){return KAe(e)||GAe(e)||HAe(e)||WAe()}function WAe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function HAe(e,t){if(e){if(typeof e=="string")return JS(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return JS(e,t)}}function GAe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function KAe(e){if(Array.isArray(e))return JS(e)}function JS(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function pb(){return pb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},pb.apply(this,arguments)}function UO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function VO(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?UO(Object(n),!0).forEach(function(a){YAe(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):UO(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function YAe(e,t,n){return t=XAe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function XAe(e){var t=QAe(e,"string");return Rv(t)=="symbol"?t:t+""}function QAe(e,t){if(Rv(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t||"default");if(Rv(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function qO(e,t){if(e==null)return{};var n=JAe(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function JAe(e,t){if(e==null)return{};var n={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;n[a]=e[a]}return n}var ZAe=function(t){return Array.isArray(t.value)?zAe(t.value):t.value};function Lc(e){var t=e.valueAccessor,n=t===void 0?ZAe:t,a=qO(e,UAe),s=a.data,i=a.dataKey,o=a.clockWise,l=a.id,c=a.textBreakAll,d=qO(a,VAe);return!s||!s.length?null:pe.createElement(fn,{className:"recharts-label-list"},s.map(function(f,u){var m=ir(i)?n(f,u):Fs(f&&f.payload,i),h=ir(l)?{}:{id:"".concat(l,"-").concat(u)};return pe.createElement(Oa,pb({},sr(f,!0),d,h,{parentViewBox:f.parentViewBox,value:m,textBreakAll:c,viewBox:Oa.parseViewBox(ir(o)?f:VO(VO({},f),{},{clockWise:o})),key:"label-".concat(u),index:u}))}))}Lc.displayName="LabelList";function e4e(e,t){return e?e===!0?pe.createElement(Lc,{key:"labelList-implicit",data:t}):pe.isValidElement(e)||Zt(e)?pe.createElement(Lc,{key:"labelList-implicit",data:t,content:e}):Xm(e)?pe.createElement(Lc,pb({data:t},e,{key:"labelList-implicit"})):null:null}function t4e(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&n&&!e.label)return null;var a=e.children,s=Xi(a,Lc).map(function(o,l){return w.cloneElement(o,{data:t,key:"labelList-".concat(l)})});if(!n)return s;var i=e4e(e.label,t);return[i].concat(qAe(s))}Lc.renderCallByParent=t4e;function Fv(e){"@babel/helpers - typeof";return Fv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Fv(e)}function ZS(){return ZS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},ZS.apply(this,arguments)}function WO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function HO(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?WO(Object(n),!0).forEach(function(a){r4e(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):WO(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function r4e(e,t,n){return t=n4e(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function n4e(e){var t=a4e(e,"string");return Fv(t)=="symbol"?t:t+""}function a4e(e,t){if(Fv(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t||"default");if(Fv(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var s4e=function(t,n){var a=Gi(n-t),s=Math.min(Math.abs(n-t),359.999);return a*s},h0=function(t){var n=t.cx,a=t.cy,s=t.radius,i=t.angle,o=t.sign,l=t.isExternal,c=t.cornerRadius,d=t.cornerIsExternal,f=c*(l?1:-1)+s,u=Math.asin(c/f)/hb,m=d?i:i+o*u,h=ya(n,a,f,m),x=ya(n,a,s,m),g=d?i-o*u:i,p=ya(n,a,f*Math.cos(u*hb),g);return{center:h,circleTangency:x,lineTangency:p,theta:u}},sz=function(t){var n=t.cx,a=t.cy,s=t.innerRadius,i=t.outerRadius,o=t.startAngle,l=t.endAngle,c=s4e(o,l),d=o+c,f=ya(n,a,i,o),u=ya(n,a,i,d),m="M ".concat(f.x,",").concat(f.y,`
    A `).concat(i,",").concat(i,`,0,
    `).concat(+(Math.abs(c)>180),",").concat(+(o>d),`,
    `).concat(u.x,",").concat(u.y,`
  `);if(s>0){var h=ya(n,a,s,o),x=ya(n,a,s,d);m+="L ".concat(x.x,",").concat(x.y,`
            A `).concat(s,",").concat(s,`,0,
            `).concat(+(Math.abs(c)>180),",").concat(+(o<=d),`,
            `).concat(h.x,",").concat(h.y," Z")}else m+="L ".concat(n,",").concat(a," Z");return m},i4e=function(t){var n=t.cx,a=t.cy,s=t.innerRadius,i=t.outerRadius,o=t.cornerRadius,l=t.forceCornerRadius,c=t.cornerIsExternal,d=t.startAngle,f=t.endAngle,u=Gi(f-d),m=h0({cx:n,cy:a,radius:i,angle:d,sign:u,cornerRadius:o,cornerIsExternal:c}),h=m.circleTangency,x=m.lineTangency,g=m.theta,p=h0({cx:n,cy:a,radius:i,angle:f,sign:-u,cornerRadius:o,cornerIsExternal:c}),v=p.circleTangency,y=p.lineTangency,b=p.theta,j=c?Math.abs(d-f):Math.abs(d-f)-g-b;if(j<0)return l?"M ".concat(x.x,",").concat(x.y,`
        a`).concat(o,",").concat(o,",0,0,1,").concat(o*2,`,0
        a`).concat(o,",").concat(o,",0,0,1,").concat(-o*2,`,0
      `):sz({cx:n,cy:a,innerRadius:s,outerRadius:i,startAngle:d,endAngle:f});var C="M ".concat(x.x,",").concat(x.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(u<0),",").concat(h.x,",").concat(h.y,`
    A`).concat(i,",").concat(i,",0,").concat(+(j>180),",").concat(+(u<0),",").concat(v.x,",").concat(v.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(u<0),",").concat(y.x,",").concat(y.y,`
  `);if(s>0){var E=h0({cx:n,cy:a,radius:s,angle:d,sign:u,isExternal:!0,cornerRadius:o,cornerIsExternal:c}),S=E.circleTangency,N=E.lineTangency,I=E.theta,D=h0({cx:n,cy:a,radius:s,angle:f,sign:-u,isExternal:!0,cornerRadius:o,cornerIsExternal:c}),T=D.circleTangency,A=D.lineTangency,_=D.theta,k=c?Math.abs(d-f):Math.abs(d-f)-I-_;if(k<0&&o===0)return"".concat(C,"L").concat(n,",").concat(a,"Z");C+="L".concat(A.x,",").concat(A.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(u<0),",").concat(T.x,",").concat(T.y,`
      A`).concat(s,",").concat(s,",0,").concat(+(k>180),",").concat(+(u>0),",").concat(S.x,",").concat(S.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(u<0),",").concat(N.x,",").concat(N.y,"Z")}else C+="L".concat(n,",").concat(a,"Z");return C},o4e={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},iz=function(t){var n=HO(HO({},o4e),t),a=n.cx,s=n.cy,i=n.innerRadius,o=n.outerRadius,l=n.cornerRadius,c=n.forceCornerRadius,d=n.cornerIsExternal,f=n.startAngle,u=n.endAngle,m=n.className;if(o<i||f===u)return null;var h=vr("recharts-sector",m),x=o-i,g=cu(l,x,0,!0),p;return g>0&&Math.abs(f-u)<360?p=i4e({cx:a,cy:s,innerRadius:i,outerRadius:o,cornerRadius:Math.min(g,x/2),forceCornerRadius:c,cornerIsExternal:d,startAngle:f,endAngle:u}):p=sz({cx:a,cy:s,innerRadius:i,outerRadius:o,startAngle:f,endAngle:u}),pe.createElement("path",ZS({},sr(n,!0),{className:h,d:p,role:"img"}))};function Mv(e){"@babel/helpers - typeof";return Mv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Mv(e)}function eC(){return eC=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},eC.apply(this,arguments)}function GO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function KO(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?GO(Object(n),!0).forEach(function(a){l4e(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):GO(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function l4e(e,t,n){return t=c4e(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c4e(e){var t=d4e(e,"string");return Mv(t)=="symbol"?t:t+""}function d4e(e,t){if(Mv(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t||"default");if(Mv(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var YO={curveBasisClosed:uve,curveBasisOpen:fve,curveBasis:dve,curveBumpX:Xpe,curveBumpY:Qpe,curveLinearClosed:mve,curveLinear:rj,curveMonotoneX:hve,curveMonotoneY:pve,curveNatural:vve,curveStep:xve,curveStepAfter:yve,curveStepBefore:gve},p0=function(t){return t.x===+t.x&&t.y===+t.y},lp=function(t){return t.x},cp=function(t){return t.y},u4e=function(t,n){if(Zt(t))return t;var a="curve".concat(ej(t));return(a==="curveMonotone"||a==="curveBump")&&n?YO["".concat(a).concat(n==="vertical"?"Y":"X")]:YO[a]||rj},f4e=function(t){var n=t.type,a=n===void 0?"linear":n,s=t.points,i=s===void 0?[]:s,o=t.baseLine,l=t.layout,c=t.connectNulls,d=c===void 0?!1:c,f=u4e(a,l),u=d?i.filter(function(g){return p0(g)}):i,m;if(Array.isArray(o)){var h=d?o.filter(function(g){return p0(g)}):o,x=u.map(function(g,p){return KO(KO({},g),{},{base:h[p]})});return l==="vertical"?m=s0().y(cp).x1(lp).x0(function(g){return g.base.x}):m=s0().x(lp).y1(cp).y0(function(g){return g.base.y}),m.defined(p0).curve(f),m(x)}return l==="vertical"&&dt(o)?m=s0().y(cp).x1(lp).x0(o):dt(o)?m=s0().x(lp).y1(cp).y0(o):m=l9().x(lp).y(cp),m.defined(p0).curve(f),m(u)},Mp=function(t){var n=t.className,a=t.points,s=t.path,i=t.pathRef;if((!a||!a.length)&&!s)return null;var o=a&&a.length?f4e(t):s;return w.createElement("path",eC({},sr(t,!1),My(t),{className:vr("recharts-curve",n),d:o,ref:i}))},m4e=Object.getOwnPropertyNames,h4e=Object.getOwnPropertySymbols,p4e=Object.prototype.hasOwnProperty;function XO(e,t){return function(a,s,i){return e(a,s,i)&&t(a,s,i)}}function v0(e){return function(n,a,s){if(!n||!a||typeof n!="object"||typeof a!="object")return e(n,a,s);var i=s.cache,o=i.get(n),l=i.get(a);if(o&&l)return o===a&&l===n;i.set(n,a),i.set(a,n);var c=e(n,a,s);return i.delete(n),i.delete(a),c}}function QO(e){return m4e(e).concat(h4e(e))}var v4e=Object.hasOwn||function(e,t){return p4e.call(e,t)};function Cu(e,t){return e===t||!e&&!t&&e!==e&&t!==t}var x4e="__v",g4e="__o",y4e="_owner",JO=Object.getOwnPropertyDescriptor,ZO=Object.keys;function b4e(e,t,n){var a=e.length;if(t.length!==a)return!1;for(;a-- >0;)if(!n.equals(e[a],t[a],a,a,e,t,n))return!1;return!0}function j4e(e,t){return Cu(e.getTime(),t.getTime())}function w4e(e,t){return e.name===t.name&&e.message===t.message&&e.cause===t.cause&&e.stack===t.stack}function N4e(e,t){return e===t}function e_(e,t,n){var a=e.size;if(a!==t.size)return!1;if(!a)return!0;for(var s=new Array(a),i=e.entries(),o,l,c=0;(o=i.next())&&!o.done;){for(var d=t.entries(),f=!1,u=0;(l=d.next())&&!l.done;){if(s[u]){u++;continue}var m=o.value,h=l.value;if(n.equals(m[0],h[0],c,u,e,t,n)&&n.equals(m[1],h[1],m[0],h[0],e,t,n)){f=s[u]=!0;break}u++}if(!f)return!1;c++}return!0}var S4e=Cu;function C4e(e,t,n){var a=ZO(e),s=a.length;if(ZO(t).length!==s)return!1;for(;s-- >0;)if(!oz(e,t,n,a[s]))return!1;return!0}function dp(e,t,n){var a=QO(e),s=a.length;if(QO(t).length!==s)return!1;for(var i,o,l;s-- >0;)if(i=a[s],!oz(e,t,n,i)||(o=JO(e,i),l=JO(t,i),(o||l)&&(!o||!l||o.configurable!==l.configurable||o.enumerable!==l.enumerable||o.writable!==l.writable)))return!1;return!0}function A4e(e,t){return Cu(e.valueOf(),t.valueOf())}function E4e(e,t){return e.source===t.source&&e.flags===t.flags}function t_(e,t,n){var a=e.size;if(a!==t.size)return!1;if(!a)return!0;for(var s=new Array(a),i=e.values(),o,l;(o=i.next())&&!o.done;){for(var c=t.values(),d=!1,f=0;(l=c.next())&&!l.done;){if(!s[f]&&n.equals(o.value,l.value,o.value,l.value,e,t,n)){d=s[f]=!0;break}f++}if(!d)return!1}return!0}function P4e(e,t){var n=e.length;if(t.length!==n)return!1;for(;n-- >0;)if(e[n]!==t[n])return!1;return!0}function T4e(e,t){return e.hostname===t.hostname&&e.pathname===t.pathname&&e.protocol===t.protocol&&e.port===t.port&&e.hash===t.hash&&e.username===t.username&&e.password===t.password}function oz(e,t,n,a){return(a===y4e||a===g4e||a===x4e)&&(e.$$typeof||t.$$typeof)?!0:v4e(t,a)&&n.equals(e[a],t[a],a,a,e,t,n)}var I4e="[object Arguments]",D4e="[object Boolean]",k4e="[object Date]",O4e="[object Error]",_4e="[object Map]",L4e="[object Number]",R4e="[object Object]",F4e="[object RegExp]",M4e="[object Set]",$4e="[object String]",B4e="[object URL]",z4e=Array.isArray,r_=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,n_=Object.assign,U4e=Object.prototype.toString.call.bind(Object.prototype.toString);function V4e(e){var t=e.areArraysEqual,n=e.areDatesEqual,a=e.areErrorsEqual,s=e.areFunctionsEqual,i=e.areMapsEqual,o=e.areNumbersEqual,l=e.areObjectsEqual,c=e.arePrimitiveWrappersEqual,d=e.areRegExpsEqual,f=e.areSetsEqual,u=e.areTypedArraysEqual,m=e.areUrlsEqual;return function(x,g,p){if(x===g)return!0;if(x==null||g==null)return!1;var v=typeof x;if(v!==typeof g)return!1;if(v!=="object")return v==="number"?o(x,g,p):v==="function"?s(x,g,p):!1;var y=x.constructor;if(y!==g.constructor)return!1;if(y===Object)return l(x,g,p);if(z4e(x))return t(x,g,p);if(r_!=null&&r_(x))return u(x,g,p);if(y===Date)return n(x,g,p);if(y===RegExp)return d(x,g,p);if(y===Map)return i(x,g,p);if(y===Set)return f(x,g,p);var b=U4e(x);return b===k4e?n(x,g,p):b===F4e?d(x,g,p):b===_4e?i(x,g,p):b===M4e?f(x,g,p):b===R4e?typeof x.then!="function"&&typeof g.then!="function"&&l(x,g,p):b===B4e?m(x,g,p):b===O4e?a(x,g,p):b===I4e?l(x,g,p):b===D4e||b===L4e||b===$4e?c(x,g,p):!1}}function q4e(e){var t=e.circular,n=e.createCustomConfig,a=e.strict,s={areArraysEqual:a?dp:b4e,areDatesEqual:j4e,areErrorsEqual:w4e,areFunctionsEqual:N4e,areMapsEqual:a?XO(e_,dp):e_,areNumbersEqual:S4e,areObjectsEqual:a?dp:C4e,arePrimitiveWrappersEqual:A4e,areRegExpsEqual:E4e,areSetsEqual:a?XO(t_,dp):t_,areTypedArraysEqual:a?dp:P4e,areUrlsEqual:T4e};if(n&&(s=n_({},s,n(s))),t){var i=v0(s.areArraysEqual),o=v0(s.areMapsEqual),l=v0(s.areObjectsEqual),c=v0(s.areSetsEqual);s=n_({},s,{areArraysEqual:i,areMapsEqual:o,areObjectsEqual:l,areSetsEqual:c})}return s}function W4e(e){return function(t,n,a,s,i,o,l){return e(t,n,l)}}function H4e(e){var t=e.circular,n=e.comparator,a=e.createState,s=e.equals,i=e.strict;if(a)return function(c,d){var f=a(),u=f.cache,m=u===void 0?t?new WeakMap:void 0:u,h=f.meta;return n(c,d,{cache:m,equals:s,meta:h,strict:i})};if(t)return function(c,d){return n(c,d,{cache:new WeakMap,equals:s,meta:void 0,strict:i})};var o={cache:void 0,equals:s,meta:void 0,strict:i};return function(c,d){return n(c,d,o)}}var G4e=td();td({strict:!0});td({circular:!0});td({circular:!0,strict:!0});td({createInternalComparator:function(){return Cu}});td({strict:!0,createInternalComparator:function(){return Cu}});td({circular:!0,createInternalComparator:function(){return Cu}});td({circular:!0,createInternalComparator:function(){return Cu},strict:!0});function td(e){e===void 0&&(e={});var t=e.circular,n=t===void 0?!1:t,a=e.createInternalComparator,s=e.createState,i=e.strict,o=i===void 0?!1:i,l=q4e(e),c=V4e(l),d=a?a(c):W4e(c);return H4e({circular:n,comparator:c,createState:s,equals:d,strict:o})}function K4e(e){typeof requestAnimationFrame<"u"&&requestAnimationFrame(e)}function a_(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=-1,a=function s(i){n<0&&(n=i),i-n>t?(e(i),n=-1):K4e(s)};requestAnimationFrame(a)}function tC(e){"@babel/helpers - typeof";return tC=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},tC(e)}function Y4e(e){return Z4e(e)||J4e(e)||Q4e(e)||X4e()}function X4e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Q4e(e,t){if(e){if(typeof e=="string")return s_(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s_(e,t)}}function s_(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function J4e(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Z4e(e){if(Array.isArray(e))return e}function eEe(){var e={},t=function(){return null},n=!1,a=function s(i){if(!n){if(Array.isArray(i)){if(!i.length)return;var o=i,l=Y4e(o),c=l[0],d=l.slice(1);if(typeof c=="number"){a_(s.bind(null,d),c);return}s(c),a_(s.bind(null,d));return}tC(i)==="object"&&(e=i,t(e)),typeof i=="function"&&i()}};return{stop:function(){n=!0},start:function(i){n=!1,a(i)},subscribe:function(i){return t=i,function(){t=function(){return null}}}}}function $v(e){"@babel/helpers - typeof";return $v=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$v(e)}function i_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function o_(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?i_(Object(n),!0).forEach(function(a){lz(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i_(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function lz(e,t,n){return t=tEe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function tEe(e){var t=rEe(e,"string");return $v(t)==="symbol"?t:String(t)}function rEe(e,t){if($v(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t||"default");if($v(a)!=="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var nEe=function(t,n){return[Object.keys(t),Object.keys(n)].reduce(function(a,s){return a.filter(function(i){return s.includes(i)})})},aEe=function(t){return t},sEe=function(t){return t.replace(/([A-Z])/g,function(n){return"-".concat(n.toLowerCase())})},$p=function(t,n){return Object.keys(n).reduce(function(a,s){return o_(o_({},a),{},lz({},s,t(s,n[s])))},{})},l_=function(t,n,a){return t.map(function(s){return"".concat(sEe(s)," ").concat(n,"ms ").concat(a)}).join(",")};function iEe(e,t){return cEe(e)||lEe(e,t)||cz(e,t)||oEe()}function oEe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function lEe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var a,s,i,o,l=[],c=!0,d=!1;try{if(i=(n=n.call(e)).next,t===0){if(Object(n)!==n)return;c=!1}else for(;!(c=(a=i.call(n)).done)&&(l.push(a.value),l.length!==t);c=!0);}catch(f){d=!0,s=f}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw s}}return l}}function cEe(e){if(Array.isArray(e))return e}function dEe(e){return mEe(e)||fEe(e)||cz(e)||uEe()}function uEe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function cz(e,t){if(e){if(typeof e=="string")return rC(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return rC(e,t)}}function fEe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function mEe(e){if(Array.isArray(e))return rC(e)}function rC(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var vb=1e-4,dz=function(t,n){return[0,3*t,3*n-6*t,3*t-3*n+1]},uz=function(t,n){return t.map(function(a,s){return a*Math.pow(n,s)}).reduce(function(a,s){return a+s})},c_=function(t,n){return function(a){var s=dz(t,n);return uz(s,a)}},hEe=function(t,n){return function(a){var s=dz(t,n),i=[].concat(dEe(s.map(function(o,l){return o*l}).slice(1)),[0]);return uz(i,a)}},d_=function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];var s=n[0],i=n[1],o=n[2],l=n[3];if(n.length===1)switch(n[0]){case"linear":s=0,i=0,o=1,l=1;break;case"ease":s=.25,i=.1,o=.25,l=1;break;case"ease-in":s=.42,i=0,o=1,l=1;break;case"ease-out":s=.42,i=0,o=.58,l=1;break;case"ease-in-out":s=0,i=0,o=.58,l=1;break;default:{var c=n[0].split("(");if(c[0]==="cubic-bezier"&&c[1].split(")")[0].split(",").length===4){var d=c[1].split(")")[0].split(",").map(function(p){return parseFloat(p)}),f=iEe(d,4);s=f[0],i=f[1],o=f[2],l=f[3]}}}var u=c_(s,o),m=c_(i,l),h=hEe(s,o),x=function(v){return v>1?1:v<0?0:v},g=function(v){for(var y=v>1?1:v,b=y,j=0;j<8;++j){var C=u(b)-y,E=h(b);if(Math.abs(C-y)<vb||E<vb)return m(b);b=x(b-C/E)}return m(b)};return g.isStepper=!1,g},pEe=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=t.stiff,a=n===void 0?100:n,s=t.damping,i=s===void 0?8:s,o=t.dt,l=o===void 0?17:o,c=function(f,u,m){var h=-(f-u)*a,x=m*i,g=m+(h-x)*l/1e3,p=m*l/1e3+f;return Math.abs(p-u)<vb&&Math.abs(g)<vb?[u,0]:[p,g]};return c.isStepper=!0,c.dt=l,c},vEe=function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];var s=n[0];if(typeof s=="string")switch(s){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return d_(s);case"spring":return pEe();default:if(s.split("(")[0]==="cubic-bezier")return d_(s)}return typeof s=="function"?s:null};function Bv(e){"@babel/helpers - typeof";return Bv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Bv(e)}function u_(e){return yEe(e)||gEe(e)||fz(e)||xEe()}function xEe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function gEe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function yEe(e){if(Array.isArray(e))return aC(e)}function f_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function pa(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?f_(Object(n),!0).forEach(function(a){nC(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f_(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function nC(e,t,n){return t=bEe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function bEe(e){var t=jEe(e,"string");return Bv(t)==="symbol"?t:String(t)}function jEe(e,t){if(Bv(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t||"default");if(Bv(a)!=="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function wEe(e,t){return CEe(e)||SEe(e,t)||fz(e,t)||NEe()}function NEe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function fz(e,t){if(e){if(typeof e=="string")return aC(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return aC(e,t)}}function aC(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function SEe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var a,s,i,o,l=[],c=!0,d=!1;try{if(i=(n=n.call(e)).next,t===0){if(Object(n)!==n)return;c=!1}else for(;!(c=(a=i.call(n)).done)&&(l.push(a.value),l.length!==t);c=!0);}catch(f){d=!0,s=f}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw s}}return l}}function CEe(e){if(Array.isArray(e))return e}var xb=function(t,n,a){return t+(n-t)*a},sC=function(t){var n=t.from,a=t.to;return n!==a},AEe=function e(t,n,a){var s=$p(function(i,o){if(sC(o)){var l=t(o.from,o.to,o.velocity),c=wEe(l,2),d=c[0],f=c[1];return pa(pa({},o),{},{from:d,velocity:f})}return o},n);return a<1?$p(function(i,o){return sC(o)?pa(pa({},o),{},{velocity:xb(o.velocity,s[i].velocity,a),from:xb(o.from,s[i].from,a)}):o},n):e(t,s,a-1)};const EEe=function(e,t,n,a,s){var i=nEe(e,t),o=i.reduce(function(p,v){return pa(pa({},p),{},nC({},v,[e[v],t[v]]))},{}),l=i.reduce(function(p,v){return pa(pa({},p),{},nC({},v,{from:e[v],velocity:0,to:t[v]}))},{}),c=-1,d,f,u=function(){return null},m=function(){return $p(function(v,y){return y.from},l)},h=function(){return!Object.values(l).filter(sC).length},x=function(v){d||(d=v);var y=v-d,b=y/n.dt;l=AEe(n,l,b),s(pa(pa(pa({},e),t),m())),d=v,h()||(c=requestAnimationFrame(u))},g=function(v){f||(f=v);var y=(v-f)/a,b=$p(function(C,E){return xb.apply(void 0,u_(E).concat([n(y)]))},o);if(s(pa(pa(pa({},e),t),b)),y<1)c=requestAnimationFrame(u);else{var j=$p(function(C,E){return xb.apply(void 0,u_(E).concat([n(1)]))},o);s(pa(pa(pa({},e),t),j))}};return u=n.isStepper?x:g,function(){return requestAnimationFrame(u),function(){cancelAnimationFrame(c)}}};function vm(e){"@babel/helpers - typeof";return vm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},vm(e)}var PEe=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function TEe(e,t){if(e==null)return{};var n=IEe(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function IEe(e,t){if(e==null)return{};var n={},a=Object.keys(e),s,i;for(i=0;i<a.length;i++)s=a[i],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function aN(e){return _Ee(e)||OEe(e)||kEe(e)||DEe()}function DEe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function kEe(e,t){if(e){if(typeof e=="string")return iC(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return iC(e,t)}}function OEe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function _Ee(e){if(Array.isArray(e))return iC(e)}function iC(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function m_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function Li(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?m_(Object(n),!0).forEach(function(a){xp(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m_(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function xp(e,t,n){return t=mz(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function LEe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h_(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,mz(a.key),a)}}function REe(e,t,n){return t&&h_(e.prototype,t),n&&h_(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function mz(e){var t=FEe(e,"string");return vm(t)==="symbol"?t:String(t)}function FEe(e,t){if(vm(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t||"default");if(vm(a)!=="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function MEe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&oC(e,t)}function oC(e,t){return oC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},oC(e,t)}function $Ee(e){var t=BEe();return function(){var a=gb(e),s;if(t){var i=gb(this).constructor;s=Reflect.construct(a,arguments,i)}else s=a.apply(this,arguments);return lC(this,s)}}function lC(e,t){if(t&&(vm(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return cC(e)}function cC(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function BEe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function gb(e){return gb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},gb(e)}var xj=function(e){MEe(n,e);var t=$Ee(n);function n(a,s){var i;LEe(this,n),i=t.call(this,a,s);var o=i.props,l=o.isActive,c=o.attributeName,d=o.from,f=o.to,u=o.steps,m=o.children,h=o.duration;if(i.handleStyleChange=i.handleStyleChange.bind(cC(i)),i.changeStyle=i.changeStyle.bind(cC(i)),!l||h<=0)return i.state={style:{}},typeof m=="function"&&(i.state={style:f}),lC(i);if(u&&u.length)i.state={style:u[0].style};else if(d){if(typeof m=="function")return i.state={style:d},lC(i);i.state={style:c?xp({},c,d):d}}else i.state={style:{}};return i}return REe(n,[{key:"componentDidMount",value:function(){var s=this.props,i=s.isActive,o=s.canBegin;this.mounted=!0,!(!i||!o)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(s){var i=this.props,o=i.isActive,l=i.canBegin,c=i.attributeName,d=i.shouldReAnimate,f=i.to,u=i.from,m=this.state.style;if(l){if(!o){var h={style:c?xp({},c,f):f};this.state&&m&&(c&&m[c]!==f||!c&&m!==f)&&this.setState(h);return}if(!(G4e(s.to,f)&&s.canBegin&&s.isActive)){var x=!s.canBegin||!s.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var g=x||d?u:s.to;if(this.state&&m){var p={style:c?xp({},c,g):g};(c&&m[c]!==g||!c&&m!==g)&&this.setState(p)}this.runAnimation(Li(Li({},this.props),{},{from:g,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var s=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),s&&s()}},{key:"handleStyleChange",value:function(s){this.changeStyle(s)}},{key:"changeStyle",value:function(s){this.mounted&&this.setState({style:s})}},{key:"runJSAnimation",value:function(s){var i=this,o=s.from,l=s.to,c=s.duration,d=s.easing,f=s.begin,u=s.onAnimationEnd,m=s.onAnimationStart,h=EEe(o,l,vEe(d),c,this.changeStyle),x=function(){i.stopJSAnimation=h()};this.manager.start([m,f,x,c,u])}},{key:"runStepAnimation",value:function(s){var i=this,o=s.steps,l=s.begin,c=s.onAnimationStart,d=o[0],f=d.style,u=d.duration,m=u===void 0?0:u,h=function(g,p,v){if(v===0)return g;var y=p.duration,b=p.easing,j=b===void 0?"ease":b,C=p.style,E=p.properties,S=p.onAnimationEnd,N=v>0?o[v-1]:p,I=E||Object.keys(C);if(typeof j=="function"||j==="spring")return[].concat(aN(g),[i.runJSAnimation.bind(i,{from:N.style,to:C,duration:y,easing:j}),y]);var D=l_(I,y,j),T=Li(Li(Li({},N.style),C),{},{transition:D});return[].concat(aN(g),[T,y,S]).filter(aEe)};return this.manager.start([c].concat(aN(o.reduce(h,[f,Math.max(m,l)])),[s.onAnimationEnd]))}},{key:"runAnimation",value:function(s){this.manager||(this.manager=eEe());var i=s.begin,o=s.duration,l=s.attributeName,c=s.to,d=s.easing,f=s.onAnimationStart,u=s.onAnimationEnd,m=s.steps,h=s.children,x=this.manager;if(this.unSubscribe=x.subscribe(this.handleStyleChange),typeof d=="function"||typeof h=="function"||d==="spring"){this.runJSAnimation(s);return}if(m.length>1){this.runStepAnimation(s);return}var g=l?xp({},l,c):c,p=l_(Object.keys(g),o,d);x.start([f,i,Li(Li({},g),{},{transition:p}),o,u])}},{key:"render",value:function(){var s=this.props,i=s.children;s.begin;var o=s.duration;s.attributeName,s.easing;var l=s.isActive;s.steps,s.from,s.to,s.canBegin,s.onAnimationEnd,s.shouldReAnimate,s.onAnimationReStart;var c=TEe(s,PEe),d=w.Children.count(i),f=this.state.style;if(typeof i=="function")return i(f);if(!l||d===0||o<=0)return i;var u=function(h){var x=h.props,g=x.style,p=g===void 0?{}:g,v=x.className,y=w.cloneElement(h,Li(Li({},c),{},{style:Li(Li({},p),f),className:v}));return y};return d===1?u(w.Children.only(i)):pe.createElement("div",null,w.Children.map(i,function(m){return u(m)}))}}]),n}(w.PureComponent);xj.displayName="Animate";xj.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};xj.propTypes={from:Et.oneOfType([Et.object,Et.string]),to:Et.oneOfType([Et.object,Et.string]),attributeName:Et.string,duration:Et.number,begin:Et.number,easing:Et.oneOfType([Et.string,Et.func]),steps:Et.arrayOf(Et.shape({duration:Et.number.isRequired,style:Et.object.isRequired,easing:Et.oneOfType([Et.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),Et.func]),properties:Et.arrayOf("string"),onAnimationEnd:Et.func})),children:Et.oneOfType([Et.node,Et.func]),isActive:Et.bool,canBegin:Et.bool,onAnimationEnd:Et.func,shouldReAnimate:Et.bool,onAnimationStart:Et.func,onAnimationReStart:Et.func};const xm=xj;function zv(e){"@babel/helpers - typeof";return zv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zv(e)}function yb(){return yb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},yb.apply(this,arguments)}function zEe(e,t){return WEe(e)||qEe(e,t)||VEe(e,t)||UEe()}function UEe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function VEe(e,t){if(e){if(typeof e=="string")return p_(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return p_(e,t)}}function p_(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function qEe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var a,s,i,o,l=[],c=!0,d=!1;try{if(i=(n=n.call(e)).next,t===0){if(Object(n)!==n)return;c=!1}else for(;!(c=(a=i.call(n)).done)&&(l.push(a.value),l.length!==t);c=!0);}catch(f){d=!0,s=f}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw s}}return l}}function WEe(e){if(Array.isArray(e))return e}function v_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function x_(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?v_(Object(n),!0).forEach(function(a){HEe(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v_(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function HEe(e,t,n){return t=GEe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function GEe(e){var t=KEe(e,"string");return zv(t)=="symbol"?t:t+""}function KEe(e,t){if(zv(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t||"default");if(zv(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var g_=function(t,n,a,s,i){var o=Math.min(Math.abs(a)/2,Math.abs(s)/2),l=s>=0?1:-1,c=a>=0?1:-1,d=s>=0&&a>=0||s<0&&a<0?1:0,f;if(o>0&&i instanceof Array){for(var u=[0,0,0,0],m=0,h=4;m<h;m++)u[m]=i[m]>o?o:i[m];f="M".concat(t,",").concat(n+l*u[0]),u[0]>0&&(f+="A ".concat(u[0],",").concat(u[0],",0,0,").concat(d,",").concat(t+c*u[0],",").concat(n)),f+="L ".concat(t+a-c*u[1],",").concat(n),u[1]>0&&(f+="A ".concat(u[1],",").concat(u[1],",0,0,").concat(d,`,
        `).concat(t+a,",").concat(n+l*u[1])),f+="L ".concat(t+a,",").concat(n+s-l*u[2]),u[2]>0&&(f+="A ".concat(u[2],",").concat(u[2],",0,0,").concat(d,`,
        `).concat(t+a-c*u[2],",").concat(n+s)),f+="L ".concat(t+c*u[3],",").concat(n+s),u[3]>0&&(f+="A ".concat(u[3],",").concat(u[3],",0,0,").concat(d,`,
        `).concat(t,",").concat(n+s-l*u[3])),f+="Z"}else if(o>0&&i===+i&&i>0){var x=Math.min(o,i);f="M ".concat(t,",").concat(n+l*x,`
            A `).concat(x,",").concat(x,",0,0,").concat(d,",").concat(t+c*x,",").concat(n,`
            L `).concat(t+a-c*x,",").concat(n,`
            A `).concat(x,",").concat(x,",0,0,").concat(d,",").concat(t+a,",").concat(n+l*x,`
            L `).concat(t+a,",").concat(n+s-l*x,`
            A `).concat(x,",").concat(x,",0,0,").concat(d,",").concat(t+a-c*x,",").concat(n+s,`
            L `).concat(t+c*x,",").concat(n+s,`
            A `).concat(x,",").concat(x,",0,0,").concat(d,",").concat(t,",").concat(n+s-l*x," Z")}else f="M ".concat(t,",").concat(n," h ").concat(a," v ").concat(s," h ").concat(-a," Z");return f},YEe=function(t,n){if(!t||!n)return!1;var a=t.x,s=t.y,i=n.x,o=n.y,l=n.width,c=n.height;if(Math.abs(l)>0&&Math.abs(c)>0){var d=Math.min(i,i+l),f=Math.max(i,i+l),u=Math.min(o,o+c),m=Math.max(o,o+c);return a>=d&&a<=f&&s>=u&&s<=m}return!1},XEe={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},ME=function(t){var n=x_(x_({},XEe),t),a=w.useRef(),s=w.useState(-1),i=zEe(s,2),o=i[0],l=i[1];w.useEffect(function(){if(a.current&&a.current.getTotalLength)try{var j=a.current.getTotalLength();j&&l(j)}catch{}},[]);var c=n.x,d=n.y,f=n.width,u=n.height,m=n.radius,h=n.className,x=n.animationEasing,g=n.animationDuration,p=n.animationBegin,v=n.isAnimationActive,y=n.isUpdateAnimationActive;if(c!==+c||d!==+d||f!==+f||u!==+u||f===0||u===0)return null;var b=vr("recharts-rectangle",h);return y?pe.createElement(xm,{canBegin:o>0,from:{width:f,height:u,x:c,y:d},to:{width:f,height:u,x:c,y:d},duration:g,animationEasing:x,isActive:y},function(j){var C=j.width,E=j.height,S=j.x,N=j.y;return pe.createElement(xm,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:p,duration:g,isActive:v,easing:x},pe.createElement("path",yb({},sr(n,!0),{className:b,d:g_(S,N,C,E,m),ref:a})))}):pe.createElement("path",yb({},sr(n,!0),{className:b,d:g_(c,d,f,u,m)}))};function dC(){return dC=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},dC.apply(this,arguments)}var $E=function(t){var n=t.cx,a=t.cy,s=t.r,i=t.className,o=vr("recharts-dot",i);return n===+n&&a===+a&&s===+s?w.createElement("circle",dC({},sr(t,!1),My(t),{className:o,cx:n,cy:a,r:s})):null};function Uv(e){"@babel/helpers - typeof";return Uv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Uv(e)}var QEe=["x","y","top","left","width","height","className"];function uC(){return uC=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},uC.apply(this,arguments)}function y_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function JEe(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?y_(Object(n),!0).forEach(function(a){ZEe(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y_(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function ZEe(e,t,n){return t=e3e(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function e3e(e){var t=t3e(e,"string");return Uv(t)=="symbol"?t:t+""}function t3e(e,t){if(Uv(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t||"default");if(Uv(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function r3e(e,t){if(e==null)return{};var n=n3e(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function n3e(e,t){if(e==null)return{};var n={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;n[a]=e[a]}return n}var a3e=function(t,n,a,s,i,o){return"M".concat(t,",").concat(i,"v").concat(s,"M").concat(o,",").concat(n,"h").concat(a)},s3e=function(t){var n=t.x,a=n===void 0?0:n,s=t.y,i=s===void 0?0:s,o=t.top,l=o===void 0?0:o,c=t.left,d=c===void 0?0:c,f=t.width,u=f===void 0?0:f,m=t.height,h=m===void 0?0:m,x=t.className,g=r3e(t,QEe),p=JEe({x:a,y:i,top:l,left:d,width:u,height:h},g);return!dt(a)||!dt(i)||!dt(u)||!dt(h)||!dt(l)||!dt(d)?null:pe.createElement("path",uC({},sr(p,!0),{className:vr("recharts-cross",x),d:a3e(a,i,u,h,l,d)}))},i3e=k9,o3e=i3e(Object.getPrototypeOf,Object),l3e=o3e,c3e=_l,d3e=l3e,u3e=Ll,f3e="[object Object]",m3e=Function.prototype,h3e=Object.prototype,hz=m3e.toString,p3e=h3e.hasOwnProperty,v3e=hz.call(Object);function x3e(e){if(!u3e(e)||c3e(e)!=f3e)return!1;var t=d3e(e);if(t===null)return!0;var n=p3e.call(t,"constructor")&&t.constructor;return typeof n=="function"&&n instanceof n&&hz.call(n)==v3e}var g3e=x3e;const y3e=Er(g3e);var b3e=_l,j3e=Ll,w3e="[object Boolean]";function N3e(e){return e===!0||e===!1||j3e(e)&&b3e(e)==w3e}var S3e=N3e;const C3e=Er(S3e);function Vv(e){"@babel/helpers - typeof";return Vv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Vv(e)}function bb(){return bb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},bb.apply(this,arguments)}function A3e(e,t){return I3e(e)||T3e(e,t)||P3e(e,t)||E3e()}function E3e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function P3e(e,t){if(e){if(typeof e=="string")return b_(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return b_(e,t)}}function b_(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function T3e(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var a,s,i,o,l=[],c=!0,d=!1;try{if(i=(n=n.call(e)).next,t===0){if(Object(n)!==n)return;c=!1}else for(;!(c=(a=i.call(n)).done)&&(l.push(a.value),l.length!==t);c=!0);}catch(f){d=!0,s=f}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw s}}return l}}function I3e(e){if(Array.isArray(e))return e}function j_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function w_(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?j_(Object(n),!0).forEach(function(a){D3e(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):j_(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function D3e(e,t,n){return t=k3e(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function k3e(e){var t=O3e(e,"string");return Vv(t)=="symbol"?t:t+""}function O3e(e,t){if(Vv(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t||"default");if(Vv(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var N_=function(t,n,a,s,i){var o=a-s,l;return l="M ".concat(t,",").concat(n),l+="L ".concat(t+a,",").concat(n),l+="L ".concat(t+a-o/2,",").concat(n+i),l+="L ".concat(t+a-o/2-s,",").concat(n+i),l+="L ".concat(t,",").concat(n," Z"),l},_3e={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},L3e=function(t){var n=w_(w_({},_3e),t),a=w.useRef(),s=w.useState(-1),i=A3e(s,2),o=i[0],l=i[1];w.useEffect(function(){if(a.current&&a.current.getTotalLength)try{var b=a.current.getTotalLength();b&&l(b)}catch{}},[]);var c=n.x,d=n.y,f=n.upperWidth,u=n.lowerWidth,m=n.height,h=n.className,x=n.animationEasing,g=n.animationDuration,p=n.animationBegin,v=n.isUpdateAnimationActive;if(c!==+c||d!==+d||f!==+f||u!==+u||m!==+m||f===0&&u===0||m===0)return null;var y=vr("recharts-trapezoid",h);return v?pe.createElement(xm,{canBegin:o>0,from:{upperWidth:0,lowerWidth:0,height:m,x:c,y:d},to:{upperWidth:f,lowerWidth:u,height:m,x:c,y:d},duration:g,animationEasing:x,isActive:v},function(b){var j=b.upperWidth,C=b.lowerWidth,E=b.height,S=b.x,N=b.y;return pe.createElement(xm,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:p,duration:g,easing:x},pe.createElement("path",bb({},sr(n,!0),{className:y,d:N_(S,N,j,C,E),ref:a})))}):pe.createElement("g",null,pe.createElement("path",bb({},sr(n,!0),{className:y,d:N_(c,d,f,u,m)})))},R3e=["option","shapeType","propTransformer","activeClassName","isActive"];function qv(e){"@babel/helpers - typeof";return qv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},qv(e)}function F3e(e,t){if(e==null)return{};var n=M3e(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function M3e(e,t){if(e==null)return{};var n={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;n[a]=e[a]}return n}function S_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function jb(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?S_(Object(n),!0).forEach(function(a){$3e(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S_(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function $3e(e,t,n){return t=B3e(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function B3e(e){var t=z3e(e,"string");return qv(t)=="symbol"?t:t+""}function z3e(e,t){if(qv(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t||"default");if(qv(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function U3e(e,t){return jb(jb({},t),e)}function V3e(e,t){return e==="symbols"}function C_(e){var t=e.shapeType,n=e.elementProps;switch(t){case"rectangle":return pe.createElement(ME,n);case"trapezoid":return pe.createElement(L3e,n);case"sector":return pe.createElement(iz,n);case"symbols":if(V3e(t))return pe.createElement(rE,n);break;default:return null}}function q3e(e){return w.isValidElement(e)?e.props:e}function W3e(e){var t=e.option,n=e.shapeType,a=e.propTransformer,s=a===void 0?U3e:a,i=e.activeClassName,o=i===void 0?"recharts-active-shape":i,l=e.isActive,c=F3e(e,R3e),d;if(w.isValidElement(t))d=w.cloneElement(t,jb(jb({},c),q3e(t)));else if(Zt(t))d=t(c);else if(y3e(t)&&!C3e(t)){var f=s(t,c);d=pe.createElement(C_,{shapeType:n,elementProps:f})}else{var u=c;d=pe.createElement(C_,{shapeType:n,elementProps:u})}return l?pe.createElement(fn,{className:o},d):d}function gj(e,t){return t!=null&&"trapezoids"in e.props}function yj(e,t){return t!=null&&"sectors"in e.props}function Wv(e,t){return t!=null&&"points"in e.props}function H3e(e,t){var n,a,s=e.x===(t==null||(n=t.labelViewBox)===null||n===void 0?void 0:n.x)||e.x===t.x,i=e.y===(t==null||(a=t.labelViewBox)===null||a===void 0?void 0:a.y)||e.y===t.y;return s&&i}function G3e(e,t){var n=e.endAngle===t.endAngle,a=e.startAngle===t.startAngle;return n&&a}function K3e(e,t){var n=e.x===t.x,a=e.y===t.y,s=e.z===t.z;return n&&a&&s}function Y3e(e,t){var n;return gj(e,t)?n=H3e:yj(e,t)?n=G3e:Wv(e,t)&&(n=K3e),n}function X3e(e,t){var n;return gj(e,t)?n="trapezoids":yj(e,t)?n="sectors":Wv(e,t)&&(n="points"),n}function Q3e(e,t){if(gj(e,t)){var n;return(n=t.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}if(yj(e,t)){var a;return(a=t.tooltipPayload)===null||a===void 0||(a=a[0])===null||a===void 0||(a=a.payload)===null||a===void 0?void 0:a.payload}return Wv(e,t)?t.payload:{}}function J3e(e){var t=e.activeTooltipItem,n=e.graphicalItem,a=e.itemData,s=X3e(n,t),i=Q3e(n,t),o=a.filter(function(c,d){var f=Pv(i,c),u=n.props[s].filter(function(x){var g=Y3e(n,t);return g(x,t)}),m=n.props[s].indexOf(u[u.length-1]),h=d===m;return f&&h}),l=a.indexOf(o[o.length-1]);return l}var Z3e=Math.ceil,ePe=Math.max;function tPe(e,t,n,a){for(var s=-1,i=ePe(Z3e((t-e)/(n||1)),0),o=Array(i);i--;)o[a?i:++s]=e,e+=n;return o}var rPe=tPe,nPe=X9,A_=1/0,aPe=17976931348623157e292;function sPe(e){if(!e)return e===0?e:0;if(e=nPe(e),e===A_||e===-A_){var t=e<0?-1:1;return t*aPe}return e===e?e:0}var iPe=sPe,oPe=rPe,lPe=ij,sN=iPe;function cPe(e){return function(t,n,a){return a&&typeof a!="number"&&lPe(t,n,a)&&(n=a=void 0),t=sN(t),n===void 0?(n=t,t=0):n=sN(n),a=a===void 0?t<n?1:-1:sN(a),oPe(t,n,a,e)}}var dPe=cPe,uPe=dPe,fPe=uPe(),mPe=fPe;const wb=Er(mPe);function Hv(e){"@babel/helpers - typeof";return Hv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Hv(e)}function E_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function P_(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?E_(Object(n),!0).forEach(function(a){pz(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E_(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function pz(e,t,n){return t=hPe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function hPe(e){var t=pPe(e,"string");return Hv(t)=="symbol"?t:t+""}function pPe(e,t){if(Hv(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t||"default");if(Hv(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var vPe=["Webkit","Moz","O","ms"],xPe=function(t,n){if(!t)return null;var a=t.replace(/(\w)/,function(i){return i.toUpperCase()}),s=vPe.reduce(function(i,o){return P_(P_({},i),{},pz({},o+a,n))},{});return s[t]=n,s};function gm(e){"@babel/helpers - typeof";return gm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},gm(e)}function Nb(){return Nb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Nb.apply(this,arguments)}function T_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function iN(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?T_(Object(n),!0).forEach(function(a){ws(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T_(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function gPe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function I_(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,xz(a.key),a)}}function yPe(e,t,n){return t&&I_(e.prototype,t),n&&I_(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function bPe(e,t,n){return t=Sb(t),jPe(e,vz()?Reflect.construct(t,n||[],Sb(e).constructor):t.apply(e,n))}function jPe(e,t){if(t&&(gm(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return wPe(e)}function wPe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function vz(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(vz=function(){return!!e})()}function Sb(e){return Sb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Sb(e)}function NPe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&fC(e,t)}function fC(e,t){return fC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},fC(e,t)}function ws(e,t,n){return t=xz(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function xz(e){var t=SPe(e,"string");return gm(t)=="symbol"?t:t+""}function SPe(e,t){if(gm(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t||"default");if(gm(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var CPe=function(t){var n=t.data,a=t.startIndex,s=t.endIndex,i=t.x,o=t.width,l=t.travellerWidth;if(!n||!n.length)return{};var c=n.length,d=Rp().domain(wb(0,c)).range([i,i+o-l]),f=d.domain().map(function(u){return d(u)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:d(a),endX:d(s),scale:d,scaleValues:f}},D_=function(t){return t.changedTouches&&!!t.changedTouches.length},ym=function(e){function t(n){var a;return gPe(this,t),a=bPe(this,t,[n]),ws(a,"handleDrag",function(s){a.leaveTimer&&(clearTimeout(a.leaveTimer),a.leaveTimer=null),a.state.isTravellerMoving?a.handleTravellerMove(s):a.state.isSlideMoving&&a.handleSlideDrag(s)}),ws(a,"handleTouchMove",function(s){s.changedTouches!=null&&s.changedTouches.length>0&&a.handleDrag(s.changedTouches[0])}),ws(a,"handleDragEnd",function(){a.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var s=a.props,i=s.endIndex,o=s.onDragEnd,l=s.startIndex;o==null||o({endIndex:i,startIndex:l})}),a.detachDragEndListener()}),ws(a,"handleLeaveWrapper",function(){(a.state.isTravellerMoving||a.state.isSlideMoving)&&(a.leaveTimer=window.setTimeout(a.handleDragEnd,a.props.leaveTimeOut))}),ws(a,"handleEnterSlideOrTraveller",function(){a.setState({isTextActive:!0})}),ws(a,"handleLeaveSlideOrTraveller",function(){a.setState({isTextActive:!1})}),ws(a,"handleSlideDragStart",function(s){var i=D_(s)?s.changedTouches[0]:s;a.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:i.pageX}),a.attachDragEndListener()}),a.travellerDragStartHandlers={startX:a.handleTravellerDragStart.bind(a,"startX"),endX:a.handleTravellerDragStart.bind(a,"endX")},a.state={},a}return NPe(t,e),yPe(t,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(a){var s=a.startX,i=a.endX,o=this.state.scaleValues,l=this.props,c=l.gap,d=l.data,f=d.length-1,u=Math.min(s,i),m=Math.max(s,i),h=t.getIndexInRange(o,u),x=t.getIndexInRange(o,m);return{startIndex:h-h%c,endIndex:x===f?f:x-x%c}}},{key:"getTextOfTick",value:function(a){var s=this.props,i=s.data,o=s.tickFormatter,l=s.dataKey,c=Fs(i[a],l,a);return Zt(o)?o(c,a):c}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(a){var s=this.state,i=s.slideMoveStartX,o=s.startX,l=s.endX,c=this.props,d=c.x,f=c.width,u=c.travellerWidth,m=c.startIndex,h=c.endIndex,x=c.onChange,g=a.pageX-i;g>0?g=Math.min(g,d+f-u-l,d+f-u-o):g<0&&(g=Math.max(g,d-o,d-l));var p=this.getIndex({startX:o+g,endX:l+g});(p.startIndex!==m||p.endIndex!==h)&&x&&x(p),this.setState({startX:o+g,endX:l+g,slideMoveStartX:a.pageX})}},{key:"handleTravellerDragStart",value:function(a,s){var i=D_(s)?s.changedTouches[0]:s;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:a,brushMoveStartX:i.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(a){var s=this.state,i=s.brushMoveStartX,o=s.movingTravellerId,l=s.endX,c=s.startX,d=this.state[o],f=this.props,u=f.x,m=f.width,h=f.travellerWidth,x=f.onChange,g=f.gap,p=f.data,v={startX:this.state.startX,endX:this.state.endX},y=a.pageX-i;y>0?y=Math.min(y,u+m-h-d):y<0&&(y=Math.max(y,u-d)),v[o]=d+y;var b=this.getIndex(v),j=b.startIndex,C=b.endIndex,E=function(){var N=p.length-1;return o==="startX"&&(l>c?j%g===0:C%g===0)||l<c&&C===N||o==="endX"&&(l>c?C%g===0:j%g===0)||l>c&&C===N};this.setState(ws(ws({},o,d+y),"brushMoveStartX",a.pageX),function(){x&&E()&&x(b)})}},{key:"handleTravellerMoveKeyboard",value:function(a,s){var i=this,o=this.state,l=o.scaleValues,c=o.startX,d=o.endX,f=this.state[s],u=l.indexOf(f);if(u!==-1){var m=u+a;if(!(m===-1||m>=l.length)){var h=l[m];s==="startX"&&h>=d||s==="endX"&&h<=c||this.setState(ws({},s,h),function(){i.props.onChange(i.getIndex({startX:i.state.startX,endX:i.state.endX}))})}}}},{key:"renderBackground",value:function(){var a=this.props,s=a.x,i=a.y,o=a.width,l=a.height,c=a.fill,d=a.stroke;return pe.createElement("rect",{stroke:d,fill:c,x:s,y:i,width:o,height:l})}},{key:"renderPanorama",value:function(){var a=this.props,s=a.x,i=a.y,o=a.width,l=a.height,c=a.data,d=a.children,f=a.padding,u=w.Children.only(d);return u?pe.cloneElement(u,{x:s,y:i,width:o,height:l,margin:f,compact:!0,data:c}):null}},{key:"renderTravellerLayer",value:function(a,s){var i,o,l=this,c=this.props,d=c.y,f=c.travellerWidth,u=c.height,m=c.traveller,h=c.ariaLabel,x=c.data,g=c.startIndex,p=c.endIndex,v=Math.max(a,this.props.x),y=iN(iN({},sr(this.props,!1)),{},{x:v,y:d,width:f,height:u}),b=h||"Min value: ".concat((i=x[g])===null||i===void 0?void 0:i.name,", Max value: ").concat((o=x[p])===null||o===void 0?void 0:o.name);return pe.createElement(fn,{tabIndex:0,role:"slider","aria-label":b,"aria-valuenow":a,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[s],onTouchStart:this.travellerDragStartHandlers[s],onKeyDown:function(C){["ArrowLeft","ArrowRight"].includes(C.key)&&(C.preventDefault(),C.stopPropagation(),l.handleTravellerMoveKeyboard(C.key==="ArrowRight"?1:-1,s))},onFocus:function(){l.setState({isTravellerFocused:!0})},onBlur:function(){l.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},t.renderTraveller(m,y))}},{key:"renderSlide",value:function(a,s){var i=this.props,o=i.y,l=i.height,c=i.stroke,d=i.travellerWidth,f=Math.min(a,s)+d,u=Math.max(Math.abs(s-a)-d,0);return pe.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:c,fillOpacity:.2,x:f,y:o,width:u,height:l})}},{key:"renderText",value:function(){var a=this.props,s=a.startIndex,i=a.endIndex,o=a.y,l=a.height,c=a.travellerWidth,d=a.stroke,f=this.state,u=f.startX,m=f.endX,h=5,x={pointerEvents:"none",fill:d};return pe.createElement(fn,{className:"recharts-brush-texts"},pe.createElement(Zy,Nb({textAnchor:"end",verticalAnchor:"middle",x:Math.min(u,m)-h,y:o+l/2},x),this.getTextOfTick(s)),pe.createElement(Zy,Nb({textAnchor:"start",verticalAnchor:"middle",x:Math.max(u,m)+c+h,y:o+l/2},x),this.getTextOfTick(i)))}},{key:"render",value:function(){var a=this.props,s=a.data,i=a.className,o=a.children,l=a.x,c=a.y,d=a.width,f=a.height,u=a.alwaysShowText,m=this.state,h=m.startX,x=m.endX,g=m.isTextActive,p=m.isSlideMoving,v=m.isTravellerMoving,y=m.isTravellerFocused;if(!s||!s.length||!dt(l)||!dt(c)||!dt(d)||!dt(f)||d<=0||f<=0)return null;var b=vr("recharts-brush",i),j=pe.Children.count(o)===1,C=xPe("userSelect","none");return pe.createElement(fn,{className:b,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:C},this.renderBackground(),j&&this.renderPanorama(),this.renderSlide(h,x),this.renderTravellerLayer(h,"startX"),this.renderTravellerLayer(x,"endX"),(g||p||v||y||u)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(a){var s=a.x,i=a.y,o=a.width,l=a.height,c=a.stroke,d=Math.floor(i+l/2)-1;return pe.createElement(pe.Fragment,null,pe.createElement("rect",{x:s,y:i,width:o,height:l,fill:c,stroke:"none"}),pe.createElement("line",{x1:s+1,y1:d,x2:s+o-1,y2:d,fill:"none",stroke:"#fff"}),pe.createElement("line",{x1:s+1,y1:d+2,x2:s+o-1,y2:d+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(a,s){var i;return pe.isValidElement(a)?i=pe.cloneElement(a,s):Zt(a)?i=a(s):i=t.renderDefaultTraveller(s),i}},{key:"getDerivedStateFromProps",value:function(a,s){var i=a.data,o=a.width,l=a.x,c=a.travellerWidth,d=a.updateId,f=a.startIndex,u=a.endIndex;if(i!==s.prevData||d!==s.prevUpdateId)return iN({prevData:i,prevTravellerWidth:c,prevUpdateId:d,prevX:l,prevWidth:o},i&&i.length?CPe({data:i,width:o,x:l,travellerWidth:c,startIndex:f,endIndex:u}):{scale:null,scaleValues:null});if(s.scale&&(o!==s.prevWidth||l!==s.prevX||c!==s.prevTravellerWidth)){s.scale.range([l,l+o-c]);var m=s.scale.domain().map(function(h){return s.scale(h)});return{prevData:i,prevTravellerWidth:c,prevUpdateId:d,prevX:l,prevWidth:o,startX:s.scale(a.startIndex),endX:s.scale(a.endIndex),scaleValues:m}}return null}},{key:"getIndexInRange",value:function(a,s){for(var i=a.length,o=0,l=i-1;l-o>1;){var c=Math.floor((o+l)/2);a[c]>s?l=c:o=c}return s>=a[l]?l:o}}])}(w.PureComponent);ws(ym,"displayName","Brush");ws(ym,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var APe=dE;function EPe(e,t){var n;return APe(e,function(a,s,i){return n=t(a,s,i),!n}),!!n}var PPe=EPe,TPe=S9,IPe=ah,DPe=PPe,kPe=vs,OPe=ij;function _Pe(e,t,n){var a=kPe(e)?TPe:DPe;return n&&OPe(e,t,n)&&(t=void 0),a(e,IPe(t))}var LPe=_Pe;const RPe=Er(LPe);var Fo=function(t,n){var a=t.alwaysShow,s=t.ifOverflow;return a&&(s="extendDomain"),s===n},k_=W9;function FPe(e,t,n){t=="__proto__"&&k_?k_(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}var MPe=FPe,$Pe=MPe,BPe=V9,zPe=ah;function UPe(e,t){var n={};return t=zPe(t),BPe(e,function(a,s,i){$Pe(n,s,t(a,s,i))}),n}var VPe=UPe;const qPe=Er(VPe);function WPe(e,t){for(var n=-1,a=e==null?0:e.length;++n<a;)if(!t(e[n],n,e))return!1;return!0}var HPe=WPe,GPe=dE;function KPe(e,t){var n=!0;return GPe(e,function(a,s,i){return n=!!t(a,s,i),n}),n}var YPe=KPe,XPe=HPe,QPe=YPe,JPe=ah,ZPe=vs,eTe=ij;function tTe(e,t,n){var a=ZPe(e)?XPe:QPe;return n&&eTe(e,t,n)&&(t=void 0),a(e,JPe(t))}var rTe=tTe;const nTe=Er(rTe);var aTe=["x","y"];function Gv(e){"@babel/helpers - typeof";return Gv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Gv(e)}function mC(){return mC=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},mC.apply(this,arguments)}function O_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function up(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?O_(Object(n),!0).forEach(function(a){sTe(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O_(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function sTe(e,t,n){return t=iTe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function iTe(e){var t=oTe(e,"string");return Gv(t)=="symbol"?t:t+""}function oTe(e,t){if(Gv(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t||"default");if(Gv(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function lTe(e,t){if(e==null)return{};var n=cTe(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function cTe(e,t){if(e==null)return{};var n={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;n[a]=e[a]}return n}function dTe(e,t){var n=e.x,a=e.y,s=lTe(e,aTe),i="".concat(n),o=parseInt(i,10),l="".concat(a),c=parseInt(l,10),d="".concat(t.height||s.height),f=parseInt(d,10),u="".concat(t.width||s.width),m=parseInt(u,10);return up(up(up(up(up({},t),s),o?{x:o}:{}),c?{y:c}:{}),{},{height:f,width:m,name:t.name,radius:t.radius})}function __(e){return pe.createElement(W3e,mC({shapeType:"rectangle",propTransformer:dTe,activeClassName:"recharts-active-bar"},e))}var uTe=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(a,s){if(typeof t=="number")return t;var i=dt(a)||Lhe(a);return i?t(a,s):(i||Uc(!1),n)}},fTe=["value","background"],gz;function bm(e){"@babel/helpers - typeof";return bm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bm(e)}function mTe(e,t){if(e==null)return{};var n=hTe(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function hTe(e,t){if(e==null)return{};var n={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;n[a]=e[a]}return n}function Cb(){return Cb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Cb.apply(this,arguments)}function L_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function Fn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?L_(Object(n),!0).forEach(function(a){yc(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):L_(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function pTe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function R_(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,bz(a.key),a)}}function vTe(e,t,n){return t&&R_(e.prototype,t),n&&R_(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function xTe(e,t,n){return t=Ab(t),gTe(e,yz()?Reflect.construct(t,n||[],Ab(e).constructor):t.apply(e,n))}function gTe(e,t){if(t&&(bm(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return yTe(e)}function yTe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function yz(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(yz=function(){return!!e})()}function Ab(e){return Ab=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Ab(e)}function bTe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&hC(e,t)}function hC(e,t){return hC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},hC(e,t)}function yc(e,t,n){return t=bz(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function bz(e){var t=jTe(e,"string");return bm(t)=="symbol"?t:t+""}function jTe(e,t){if(bm(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t||"default");if(bm(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Au=function(e){function t(){var n;pTe(this,t);for(var a=arguments.length,s=new Array(a),i=0;i<a;i++)s[i]=arguments[i];return n=xTe(this,t,[].concat(s)),yc(n,"state",{isAnimationFinished:!1}),yc(n,"id",Sx("recharts-bar-")),yc(n,"handleAnimationEnd",function(){var o=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),o&&o()}),yc(n,"handleAnimationStart",function(){var o=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),o&&o()}),n}return bTe(t,e),vTe(t,[{key:"renderRectanglesStatically",value:function(a){var s=this,i=this.props,o=i.shape,l=i.dataKey,c=i.activeIndex,d=i.activeBar,f=sr(this.props,!1);return a&&a.map(function(u,m){var h=m===c,x=h?d:o,g=Fn(Fn(Fn({},f),u),{},{isActive:h,option:x,index:m,dataKey:l,onAnimationStart:s.handleAnimationStart,onAnimationEnd:s.handleAnimationEnd});return pe.createElement(fn,Cb({className:"recharts-bar-rectangle"},$y(s.props,u,m),{key:"rectangle-".concat(u==null?void 0:u.x,"-").concat(u==null?void 0:u.y,"-").concat(u==null?void 0:u.value,"-").concat(m)}),pe.createElement(__,g))})}},{key:"renderRectanglesWithAnimation",value:function(){var a=this,s=this.props,i=s.data,o=s.layout,l=s.isAnimationActive,c=s.animationBegin,d=s.animationDuration,f=s.animationEasing,u=s.animationId,m=this.state.prevData;return pe.createElement(xm,{begin:c,duration:d,isActive:l,easing:f,from:{t:0},to:{t:1},key:"bar-".concat(u),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(h){var x=h.t,g=i.map(function(p,v){var y=m&&m[v];if(y){var b=si(y.x,p.x),j=si(y.y,p.y),C=si(y.width,p.width),E=si(y.height,p.height);return Fn(Fn({},p),{},{x:b(x),y:j(x),width:C(x),height:E(x)})}if(o==="horizontal"){var S=si(0,p.height),N=S(x);return Fn(Fn({},p),{},{y:p.y+p.height-N,height:N})}var I=si(0,p.width),D=I(x);return Fn(Fn({},p),{},{width:D})});return pe.createElement(fn,null,a.renderRectanglesStatically(g))})}},{key:"renderRectangles",value:function(){var a=this.props,s=a.data,i=a.isAnimationActive,o=this.state.prevData;return i&&s&&s.length&&(!o||!Pv(o,s))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(s)}},{key:"renderBackground",value:function(){var a=this,s=this.props,i=s.data,o=s.dataKey,l=s.activeIndex,c=sr(this.props.background,!1);return i.map(function(d,f){d.value;var u=d.background,m=mTe(d,fTe);if(!u)return null;var h=Fn(Fn(Fn(Fn(Fn({},m),{},{fill:"#eee"},u),c),$y(a.props,d,f)),{},{onAnimationStart:a.handleAnimationStart,onAnimationEnd:a.handleAnimationEnd,dataKey:o,index:f,className:"recharts-bar-background-rectangle"});return pe.createElement(__,Cb({key:"background-bar-".concat(f),option:a.props.background,isActive:f===l},h))})}},{key:"renderErrorBar",value:function(a,s){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var i=this.props,o=i.data,l=i.xAxis,c=i.yAxis,d=i.layout,f=i.children,u=Xi(f,vj);if(!u)return null;var m=d==="vertical"?o[0].height/2:o[0].width/2,h=function(p,v){var y=Array.isArray(p.value)?p.value[1]:p.value;return{x:p.x,y:p.y,value:y,errorVal:Fs(p,v)}},x={clipPath:a?"url(#clipPath-".concat(s,")"):null};return pe.createElement(fn,x,u.map(function(g){return pe.cloneElement(g,{key:"error-bar-".concat(s,"-").concat(g.props.dataKey),data:o,xAxis:l,yAxis:c,layout:d,offset:m,dataPointFormatter:h})}))}},{key:"render",value:function(){var a=this.props,s=a.hide,i=a.data,o=a.className,l=a.xAxis,c=a.yAxis,d=a.left,f=a.top,u=a.width,m=a.height,h=a.isAnimationActive,x=a.background,g=a.id;if(s||!i||!i.length)return null;var p=this.state.isAnimationFinished,v=vr("recharts-bar",o),y=l&&l.allowDataOverflow,b=c&&c.allowDataOverflow,j=y||b,C=ir(g)?this.id:g;return pe.createElement(fn,{className:v},y||b?pe.createElement("defs",null,pe.createElement("clipPath",{id:"clipPath-".concat(C)},pe.createElement("rect",{x:y?d:d-u/2,y:b?f:f-m/2,width:y?u:u*2,height:b?m:m*2}))):null,pe.createElement(fn,{className:"recharts-bar-rectangles",clipPath:j?"url(#clipPath-".concat(C,")"):null},x?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(j,C),(!h||p)&&Lc.renderCallByParent(this.props,i))}}],[{key:"getDerivedStateFromProps",value:function(a,s){return a.animationId!==s.prevAnimationId?{prevAnimationId:a.animationId,curData:a.data,prevData:s.curData}:a.data!==s.curData?{curData:a.data}:null}}])}(w.PureComponent);gz=Au;yc(Au,"displayName","Bar");yc(Au,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!gl.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});yc(Au,"getComposedData",function(e){var t=e.props,n=e.item,a=e.barPosition,s=e.bandSize,i=e.xAxis,o=e.yAxis,l=e.xAxisTicks,c=e.yAxisTicks,d=e.stackedData,f=e.dataStartIndex,u=e.displayedData,m=e.offset,h=tAe(a,n);if(!h)return null;var x=t.layout,g=n.type.defaultProps,p=g!==void 0?Fn(Fn({},g),n.props):n.props,v=p.dataKey,y=p.children,b=p.minPointSize,j=x==="horizontal"?o:i,C=d?j.scale.domain():null,E=cAe({numericAxis:j}),S=Xi(y,J9),N=u.map(function(I,D){var T,A,_,k,L,$;d?T=rAe(d[f+D],C):(T=Fs(I,v),Array.isArray(T)||(T=[E,T]));var M=uTe(b,gz.defaultProps.minPointSize)(T[1],D);if(x==="horizontal"){var B,U=[o.scale(T[0]),o.scale(T[1])],W=U[0],q=U[1];A=_O({axis:i,ticks:l,bandSize:s,offset:h.offset,entry:I,index:D}),_=(B=q??W)!==null&&B!==void 0?B:void 0,k=h.size;var R=W-q;if(L=Number.isNaN(R)?0:R,$={x:A,y:o.y,width:k,height:o.height},Math.abs(M)>0&&Math.abs(L)<Math.abs(M)){var V=Gi(L||M)*(Math.abs(M)-Math.abs(L));_-=V,L+=V}}else{var G=[i.scale(T[0]),i.scale(T[1])],ee=G[0],re=G[1];if(A=ee,_=_O({axis:o,ticks:c,bandSize:s,offset:h.offset,entry:I,index:D}),k=re-ee,L=h.size,$={x:i.x,y:_,width:i.width,height:L},Math.abs(M)>0&&Math.abs(k)<Math.abs(M)){var de=Gi(k||M)*(Math.abs(M)-Math.abs(k));k+=de}}return Fn(Fn(Fn({},I),{},{x:A,y:_,width:k,height:L,value:d?T:T[1],payload:I,background:$},S&&S[D]&&S[D].props),{},{tooltipPayload:[nz(n,I)],tooltipPosition:{x:A+k/2,y:_+L/2}})});return Fn({data:N,layout:x},m)});function Kv(e){"@babel/helpers - typeof";return Kv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Kv(e)}function wTe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function F_(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,jz(a.key),a)}}function NTe(e,t,n){return t&&F_(e.prototype,t),n&&F_(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function M_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function zi(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?M_(Object(n),!0).forEach(function(a){bj(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):M_(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function bj(e,t,n){return t=jz(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function jz(e){var t=STe(e,"string");return Kv(t)=="symbol"?t:t+""}function STe(e,t){if(Kv(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t||"default");if(Kv(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var wz=function(t,n,a,s,i){var o=t.width,l=t.height,c=t.layout,d=t.children,f=Object.keys(n),u={left:a.left,leftMirror:a.left,right:o-a.right,rightMirror:o-a.right,top:a.top,topMirror:a.top,bottom:l-a.bottom,bottomMirror:l-a.bottom},m=!!Ss(d,Au);return f.reduce(function(h,x){var g=n[x],p=g.orientation,v=g.domain,y=g.padding,b=y===void 0?{}:y,j=g.mirror,C=g.reversed,E="".concat(p).concat(j?"Mirror":""),S,N,I,D,T;if(g.type==="number"&&(g.padding==="gap"||g.padding==="no-gap")){var A=v[1]-v[0],_=1/0,k=g.categoricalDomain.sort(Mhe);if(k.forEach(function(G,ee){ee>0&&(_=Math.min((G||0)-(k[ee-1]||0),_))}),Number.isFinite(_)){var L=_/A,$=g.layout==="vertical"?a.height:a.width;if(g.padding==="gap"&&(S=L*$/2),g.padding==="no-gap"){var M=cu(t.barCategoryGap,L*$),B=L*$/2;S=B-M-(B-M)/$*M}}}s==="xAxis"?N=[a.left+(b.left||0)+(S||0),a.left+a.width-(b.right||0)-(S||0)]:s==="yAxis"?N=c==="horizontal"?[a.top+a.height-(b.bottom||0),a.top+(b.top||0)]:[a.top+(b.top||0)+(S||0),a.top+a.height-(b.bottom||0)-(S||0)]:N=g.range,C&&(N=[N[1],N[0]]);var U=ZCe(g,i,m),W=U.scale,q=U.realScaleType;W.domain(v).range(N),eAe(W);var R=lAe(W,zi(zi({},g),{},{realScaleType:q}));s==="xAxis"?(T=p==="top"&&!j||p==="bottom"&&j,I=a.left,D=u[E]-T*g.height):s==="yAxis"&&(T=p==="left"&&!j||p==="right"&&j,I=u[E]-T*g.width,D=a.top);var V=zi(zi(zi({},g),R),{},{realScaleType:q,x:I,y:D,scale:W,width:s==="xAxis"?a.width:g.width,height:s==="yAxis"?a.height:g.height});return V.bandSize=mb(V,R),!g.hide&&s==="xAxis"?u[E]+=(T?-1:1)*V.height:g.hide||(u[E]+=(T?-1:1)*V.width),zi(zi({},h),{},bj({},x,V))},{})},Nz=function(t,n){var a=t.x,s=t.y,i=n.x,o=n.y;return{x:Math.min(a,i),y:Math.min(s,o),width:Math.abs(i-a),height:Math.abs(o-s)}},CTe=function(t){var n=t.x1,a=t.y1,s=t.x2,i=t.y2;return Nz({x:n,y:a},{x:s,y:i})},Sz=function(){function e(t){wTe(this,e),this.scale=t}return NTe(e,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(n){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=a.bandAware,i=a.position;if(n!==void 0){if(i)switch(i){case"start":return this.scale(n);case"middle":{var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+o}case"end":{var l=this.bandwidth?this.bandwidth():0;return this.scale(n)+l}default:return this.scale(n)}if(s){var c=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+c}return this.scale(n)}}},{key:"isInRange",value:function(n){var a=this.range(),s=a[0],i=a[a.length-1];return s<=i?n>=s&&n<=i:n>=i&&n<=s}}],[{key:"create",value:function(n){return new e(n)}}])}();bj(Sz,"EPS",1e-4);var BE=function(t){var n=Object.keys(t).reduce(function(a,s){return zi(zi({},a),{},bj({},s,Sz.create(t[s])))},{});return zi(zi({},n),{},{apply:function(s){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=i.bandAware,l=i.position;return qPe(s,function(c,d){return n[d].apply(c,{bandAware:o,position:l})})},isInRange:function(s){return nTe(s,function(i,o){return n[o].isInRange(i)})}})};function ATe(e){return(e%180+180)%180}var ETe=function(t){var n=t.width,a=t.height,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=ATe(s),o=i*Math.PI/180,l=Math.atan(a/n),c=o>l&&o<Math.PI-l?a/Math.sin(o):n/Math.cos(o);return Math.abs(c)},PTe=$me(function(e){return{x:e.left,y:e.top,width:e.width,height:e.height}},function(e){return["l",e.left,"t",e.top,"w",e.width,"h",e.height].join("")}),Cz=w.createContext(void 0),Az=w.createContext(void 0),Ez=w.createContext(void 0),TTe=w.createContext({}),Pz=w.createContext(void 0),Tz=w.createContext(0),Iz=w.createContext(0),$_=function(t){var n=t.state,a=n.xAxisMap,s=n.yAxisMap,i=n.offset,o=t.clipPathId,l=t.children,c=t.width,d=t.height,f=PTe(i);return pe.createElement(Cz.Provider,{value:a},pe.createElement(Az.Provider,{value:s},pe.createElement(TTe.Provider,{value:i},pe.createElement(Ez.Provider,{value:f},pe.createElement(Pz.Provider,{value:o},pe.createElement(Tz.Provider,{value:d},pe.createElement(Iz.Provider,{value:c},l)))))))},ITe=function(){return w.useContext(Pz)},Dz=function(t){var n=w.useContext(Cz);n==null&&Uc(!1);var a=n[t];return a==null&&Uc(!1),a},kz=function(t){var n=w.useContext(Az);n==null&&Uc(!1);var a=n[t];return a==null&&Uc(!1),a},DTe=function(){var t=w.useContext(Ez);return t},Oz=function(){return w.useContext(Iz)},_z=function(){return w.useContext(Tz)};function jm(e){"@babel/helpers - typeof";return jm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},jm(e)}function kTe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function B_(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,Rz(a.key),a)}}function OTe(e,t,n){return t&&B_(e.prototype,t),n&&B_(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function _Te(e,t,n){return t=Eb(t),LTe(e,Lz()?Reflect.construct(t,n||[],Eb(e).constructor):t.apply(e,n))}function LTe(e,t){if(t&&(jm(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return RTe(e)}function RTe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Lz(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Lz=function(){return!!e})()}function Eb(e){return Eb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Eb(e)}function FTe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&pC(e,t)}function pC(e,t){return pC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},pC(e,t)}function z_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function U_(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?z_(Object(n),!0).forEach(function(a){zE(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):z_(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function zE(e,t,n){return t=Rz(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Rz(e){var t=MTe(e,"string");return jm(t)=="symbol"?t:t+""}function MTe(e,t){if(jm(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t||"default");if(jm(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function $Te(e,t){return VTe(e)||UTe(e,t)||zTe(e,t)||BTe()}function BTe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function zTe(e,t){if(e){if(typeof e=="string")return V_(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return V_(e,t)}}function V_(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function UTe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var a,s,i,o,l=[],c=!0,d=!1;try{if(i=(n=n.call(e)).next,t===0){if(Object(n)!==n)return;c=!1}else for(;!(c=(a=i.call(n)).done)&&(l.push(a.value),l.length!==t);c=!0);}catch(f){d=!0,s=f}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw s}}return l}}function VTe(e){if(Array.isArray(e))return e}function vC(){return vC=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},vC.apply(this,arguments)}var qTe=function(t,n){var a;return pe.isValidElement(t)?a=pe.cloneElement(t,n):Zt(t)?a=t(n):a=pe.createElement("line",vC({},n,{className:"recharts-reference-line-line"})),a},WTe=function(t,n,a,s,i,o,l,c,d){var f=i.x,u=i.y,m=i.width,h=i.height;if(a){var x=d.y,g=t.y.apply(x,{position:o});if(Fo(d,"discard")&&!t.y.isInRange(g))return null;var p=[{x:f+m,y:g},{x:f,y:g}];return c==="left"?p.reverse():p}if(n){var v=d.x,y=t.x.apply(v,{position:o});if(Fo(d,"discard")&&!t.x.isInRange(y))return null;var b=[{x:y,y:u+h},{x:y,y:u}];return l==="top"?b.reverse():b}if(s){var j=d.segment,C=j.map(function(E){return t.apply(E,{position:o})});return Fo(d,"discard")&&RPe(C,function(E){return!t.isInRange(E)})?null:C}return null};function HTe(e){var t=e.x,n=e.y,a=e.segment,s=e.xAxisId,i=e.yAxisId,o=e.shape,l=e.className,c=e.alwaysShow,d=ITe(),f=Dz(s),u=kz(i),m=DTe();if(!d||!m)return null;Yd(c===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var h=BE({x:f.scale,y:u.scale}),x=Qn(t),g=Qn(n),p=a&&a.length===2,v=WTe(h,x,g,p,m,e.position,f.orientation,u.orientation,e);if(!v)return null;var y=$Te(v,2),b=y[0],j=b.x,C=b.y,E=y[1],S=E.x,N=E.y,I=Fo(e,"hidden")?"url(#".concat(d,")"):void 0,D=U_(U_({clipPath:I},sr(e,!0)),{},{x1:j,y1:C,x2:S,y2:N});return pe.createElement(fn,{className:vr("recharts-reference-line",l)},qTe(o,D),Oa.renderCallByParent(e,CTe({x1:j,y1:C,x2:S,y2:N})))}var UE=function(e){function t(){return kTe(this,t),_Te(this,t,arguments)}return FTe(t,e),OTe(t,[{key:"render",value:function(){return pe.createElement(HTe,this.props)}}])}(pe.Component);zE(UE,"displayName","ReferenceLine");zE(UE,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function xC(){return xC=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},xC.apply(this,arguments)}function wm(e){"@babel/helpers - typeof";return wm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},wm(e)}function q_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function W_(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?q_(Object(n),!0).forEach(function(a){jj(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):q_(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function GTe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function H_(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,Mz(a.key),a)}}function KTe(e,t,n){return t&&H_(e.prototype,t),n&&H_(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function YTe(e,t,n){return t=Pb(t),XTe(e,Fz()?Reflect.construct(t,n||[],Pb(e).constructor):t.apply(e,n))}function XTe(e,t){if(t&&(wm(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return QTe(e)}function QTe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Fz(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Fz=function(){return!!e})()}function Pb(e){return Pb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Pb(e)}function JTe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&gC(e,t)}function gC(e,t){return gC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},gC(e,t)}function jj(e,t,n){return t=Mz(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Mz(e){var t=ZTe(e,"string");return wm(t)=="symbol"?t:t+""}function ZTe(e,t){if(wm(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t||"default");if(wm(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var eIe=function(t){var n=t.x,a=t.y,s=t.xAxis,i=t.yAxis,o=BE({x:s.scale,y:i.scale}),l=o.apply({x:n,y:a},{bandAware:!0});return Fo(t,"discard")&&!o.isInRange(l)?null:l},wj=function(e){function t(){return GTe(this,t),YTe(this,t,arguments)}return JTe(t,e),KTe(t,[{key:"render",value:function(){var a=this.props,s=a.x,i=a.y,o=a.r,l=a.alwaysShow,c=a.clipPathId,d=Qn(s),f=Qn(i);if(Yd(l===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!d||!f)return null;var u=eIe(this.props);if(!u)return null;var m=u.x,h=u.y,x=this.props,g=x.shape,p=x.className,v=Fo(this.props,"hidden")?"url(#".concat(c,")"):void 0,y=W_(W_({clipPath:v},sr(this.props,!0)),{},{cx:m,cy:h});return pe.createElement(fn,{className:vr("recharts-reference-dot",p)},t.renderDot(g,y),Oa.renderCallByParent(this.props,{x:m-o,y:h-o,width:2*o,height:2*o}))}}])}(pe.Component);jj(wj,"displayName","ReferenceDot");jj(wj,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});jj(wj,"renderDot",function(e,t){var n;return pe.isValidElement(e)?n=pe.cloneElement(e,t):Zt(e)?n=e(t):n=pe.createElement($E,xC({},t,{cx:t.cx,cy:t.cy,className:"recharts-reference-dot-dot"})),n});function yC(){return yC=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},yC.apply(this,arguments)}function Nm(e){"@babel/helpers - typeof";return Nm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Nm(e)}function G_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function K_(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?G_(Object(n),!0).forEach(function(a){Nj(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):G_(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function tIe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Y_(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,Bz(a.key),a)}}function rIe(e,t,n){return t&&Y_(e.prototype,t),n&&Y_(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function nIe(e,t,n){return t=Tb(t),aIe(e,$z()?Reflect.construct(t,n||[],Tb(e).constructor):t.apply(e,n))}function aIe(e,t){if(t&&(Nm(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return sIe(e)}function sIe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function $z(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return($z=function(){return!!e})()}function Tb(e){return Tb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Tb(e)}function iIe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&bC(e,t)}function bC(e,t){return bC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},bC(e,t)}function Nj(e,t,n){return t=Bz(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Bz(e){var t=oIe(e,"string");return Nm(t)=="symbol"?t:t+""}function oIe(e,t){if(Nm(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t||"default");if(Nm(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var lIe=function(t,n,a,s,i){var o=i.x1,l=i.x2,c=i.y1,d=i.y2,f=i.xAxis,u=i.yAxis;if(!f||!u)return null;var m=BE({x:f.scale,y:u.scale}),h={x:t?m.x.apply(o,{position:"start"}):m.x.rangeMin,y:a?m.y.apply(c,{position:"start"}):m.y.rangeMin},x={x:n?m.x.apply(l,{position:"end"}):m.x.rangeMax,y:s?m.y.apply(d,{position:"end"}):m.y.rangeMax};return Fo(i,"discard")&&(!m.isInRange(h)||!m.isInRange(x))?null:Nz(h,x)},Sj=function(e){function t(){return tIe(this,t),nIe(this,t,arguments)}return iIe(t,e),rIe(t,[{key:"render",value:function(){var a=this.props,s=a.x1,i=a.x2,o=a.y1,l=a.y2,c=a.className,d=a.alwaysShow,f=a.clipPathId;Yd(d===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var u=Qn(s),m=Qn(i),h=Qn(o),x=Qn(l),g=this.props.shape;if(!u&&!m&&!h&&!x&&!g)return null;var p=lIe(u,m,h,x,this.props);if(!p&&!g)return null;var v=Fo(this.props,"hidden")?"url(#".concat(f,")"):void 0;return pe.createElement(fn,{className:vr("recharts-reference-area",c)},t.renderRect(g,K_(K_({clipPath:v},sr(this.props,!0)),p)),Oa.renderCallByParent(this.props,p))}}])}(pe.Component);Nj(Sj,"displayName","ReferenceArea");Nj(Sj,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});Nj(Sj,"renderRect",function(e,t){var n;return pe.isValidElement(e)?n=pe.cloneElement(e,t):Zt(e)?n=e(t):n=pe.createElement(ME,yC({},t,{className:"recharts-reference-area-rect"})),n});function zz(e,t,n){if(t<1)return[];if(t===1&&n===void 0)return e;for(var a=[],s=0;s<e.length;s+=t)if(n===void 0||n(e[s])===!0)a.push(e[s]);else return;return a}function cIe(e,t,n){var a={width:e.width+t.width,height:e.height+t.height};return ETe(a,n)}function dIe(e,t,n){var a=n==="width",s=e.x,i=e.y,o=e.width,l=e.height;return t===1?{start:a?s:i,end:a?s+o:i+l}:{start:a?s+o:i+l,end:a?s:i}}function Ib(e,t,n,a,s){if(e*t<e*a||e*t>e*s)return!1;var i=n();return e*(t-e*i/2-a)>=0&&e*(t+e*i/2-s)<=0}function uIe(e,t){return zz(e,t+1)}function fIe(e,t,n,a,s){for(var i=(a||[]).slice(),o=t.start,l=t.end,c=0,d=1,f=o,u=function(){var x=a==null?void 0:a[c];if(x===void 0)return{v:zz(a,d)};var g=c,p,v=function(){return p===void 0&&(p=n(x,g)),p},y=x.coordinate,b=c===0||Ib(e,y,v,f,l);b||(c=0,f=o,d+=1),b&&(f=y+e*(v()/2+s),c+=d)},m;d<=i.length;)if(m=u(),m)return m.v;return[]}function Yv(e){"@babel/helpers - typeof";return Yv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Yv(e)}function X_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function Da(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?X_(Object(n),!0).forEach(function(a){mIe(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):X_(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function mIe(e,t,n){return t=hIe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function hIe(e){var t=pIe(e,"string");return Yv(t)=="symbol"?t:t+""}function pIe(e,t){if(Yv(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t||"default");if(Yv(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function vIe(e,t,n,a,s){for(var i=(a||[]).slice(),o=i.length,l=t.start,c=t.end,d=function(m){var h=i[m],x,g=function(){return x===void 0&&(x=n(h,m)),x};if(m===o-1){var p=e*(h.coordinate+e*g()/2-c);i[m]=h=Da(Da({},h),{},{tickCoord:p>0?h.coordinate-p*e:h.coordinate})}else i[m]=h=Da(Da({},h),{},{tickCoord:h.coordinate});var v=Ib(e,h.tickCoord,g,l,c);v&&(c=h.tickCoord-e*(g()/2+s),i[m]=Da(Da({},h),{},{isShow:!0}))},f=o-1;f>=0;f--)d(f);return i}function xIe(e,t,n,a,s,i){var o=(a||[]).slice(),l=o.length,c=t.start,d=t.end;if(i){var f=a[l-1],u=n(f,l-1),m=e*(f.coordinate+e*u/2-d);o[l-1]=f=Da(Da({},f),{},{tickCoord:m>0?f.coordinate-m*e:f.coordinate});var h=Ib(e,f.tickCoord,function(){return u},c,d);h&&(d=f.tickCoord-e*(u/2+s),o[l-1]=Da(Da({},f),{},{isShow:!0}))}for(var x=i?l-1:l,g=function(y){var b=o[y],j,C=function(){return j===void 0&&(j=n(b,y)),j};if(y===0){var E=e*(b.coordinate-e*C()/2-c);o[y]=b=Da(Da({},b),{},{tickCoord:E<0?b.coordinate-E*e:b.coordinate})}else o[y]=b=Da(Da({},b),{},{tickCoord:b.coordinate});var S=Ib(e,b.tickCoord,C,c,d);S&&(c=b.tickCoord+e*(C()/2+s),o[y]=Da(Da({},b),{},{isShow:!0}))},p=0;p<x;p++)g(p);return o}function gIe(e,t,n){var a=e.tick,s=e.ticks,i=e.viewBox,o=e.minTickGap,l=e.orientation,c=e.interval,d=e.tickFormatter,f=e.unit,u=e.angle;if(!s||!s.length||!a)return[];if(dt(c)||gl.isSsr)return uIe(s,typeof c=="number"&&dt(c)?c:0);var m=[],h=l==="top"||l==="bottom"?"width":"height",x=f&&h==="width"?Lp(f,{fontSize:t,letterSpacing:n}):{width:0,height:0},g=function(b,j){var C=Zt(d)?d(b.value,j):b.value;return h==="width"?cIe(Lp(C,{fontSize:t,letterSpacing:n}),x,u):Lp(C,{fontSize:t,letterSpacing:n})[h]},p=s.length>=2?Gi(s[1].coordinate-s[0].coordinate):1,v=dIe(i,p,h);return c==="equidistantPreserveStart"?fIe(p,v,g,s,o):(c==="preserveStart"||c==="preserveStartEnd"?m=xIe(p,v,g,s,o,c==="preserveStartEnd"):m=vIe(p,v,g,s,o),m.filter(function(y){return y.isShow}))}var yIe=["viewBox"],bIe=["viewBox"],jIe=["ticks"];function Sm(e){"@babel/helpers - typeof";return Sm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Sm(e)}function Tf(){return Tf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Tf.apply(this,arguments)}function Q_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function qn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Q_(Object(n),!0).forEach(function(a){VE(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Q_(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function oN(e,t){if(e==null)return{};var n=wIe(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function wIe(e,t){if(e==null)return{};var n={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;n[a]=e[a]}return n}function NIe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function J_(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,Vz(a.key),a)}}function SIe(e,t,n){return t&&J_(e.prototype,t),n&&J_(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function CIe(e,t,n){return t=Db(t),AIe(e,Uz()?Reflect.construct(t,n||[],Db(e).constructor):t.apply(e,n))}function AIe(e,t){if(t&&(Sm(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return EIe(e)}function EIe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Uz(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Uz=function(){return!!e})()}function Db(e){return Db=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Db(e)}function PIe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&jC(e,t)}function jC(e,t){return jC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},jC(e,t)}function VE(e,t,n){return t=Vz(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Vz(e){var t=TIe(e,"string");return Sm(t)=="symbol"?t:t+""}function TIe(e,t){if(Sm(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t||"default");if(Sm(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Cj=function(e){function t(n){var a;return NIe(this,t),a=CIe(this,t,[n]),a.state={fontSize:"",letterSpacing:""},a}return PIe(t,e),SIe(t,[{key:"shouldComponentUpdate",value:function(a,s){var i=a.viewBox,o=oN(a,yIe),l=this.props,c=l.viewBox,d=oN(l,bIe);return!zf(i,c)||!zf(o,d)||!zf(s,this.state)}},{key:"componentDidMount",value:function(){var a=this.layerReference;if(a){var s=a.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];s&&this.setState({fontSize:window.getComputedStyle(s).fontSize,letterSpacing:window.getComputedStyle(s).letterSpacing})}}},{key:"getTickLineCoord",value:function(a){var s=this.props,i=s.x,o=s.y,l=s.width,c=s.height,d=s.orientation,f=s.tickSize,u=s.mirror,m=s.tickMargin,h,x,g,p,v,y,b=u?-1:1,j=a.tickSize||f,C=dt(a.tickCoord)?a.tickCoord:a.coordinate;switch(d){case"top":h=x=a.coordinate,p=o+ +!u*c,g=p-b*j,y=g-b*m,v=C;break;case"left":g=p=a.coordinate,x=i+ +!u*l,h=x-b*j,v=h-b*m,y=C;break;case"right":g=p=a.coordinate,x=i+ +u*l,h=x+b*j,v=h+b*m,y=C;break;default:h=x=a.coordinate,p=o+ +u*c,g=p+b*j,y=g+b*m,v=C;break}return{line:{x1:h,y1:g,x2:x,y2:p},tick:{x:v,y}}}},{key:"getTickTextAnchor",value:function(){var a=this.props,s=a.orientation,i=a.mirror,o;switch(s){case"left":o=i?"start":"end";break;case"right":o=i?"end":"start";break;default:o="middle";break}return o}},{key:"getTickVerticalAnchor",value:function(){var a=this.props,s=a.orientation,i=a.mirror,o="end";switch(s){case"left":case"right":o="middle";break;case"top":o=i?"start":"end";break;default:o=i?"end":"start";break}return o}},{key:"renderAxisLine",value:function(){var a=this.props,s=a.x,i=a.y,o=a.width,l=a.height,c=a.orientation,d=a.mirror,f=a.axisLine,u=qn(qn(qn({},sr(this.props,!1)),sr(f,!1)),{},{fill:"none"});if(c==="top"||c==="bottom"){var m=+(c==="top"&&!d||c==="bottom"&&d);u=qn(qn({},u),{},{x1:s,y1:i+m*l,x2:s+o,y2:i+m*l})}else{var h=+(c==="left"&&!d||c==="right"&&d);u=qn(qn({},u),{},{x1:s+h*o,y1:i,x2:s+h*o,y2:i+l})}return pe.createElement("line",Tf({},u,{className:vr("recharts-cartesian-axis-line",fi(f,"className"))}))}},{key:"renderTicks",value:function(a,s,i){var o=this,l=this.props,c=l.tickLine,d=l.stroke,f=l.tick,u=l.tickFormatter,m=l.unit,h=gIe(qn(qn({},this.props),{},{ticks:a}),s,i),x=this.getTickTextAnchor(),g=this.getTickVerticalAnchor(),p=sr(this.props,!1),v=sr(f,!1),y=qn(qn({},p),{},{fill:"none"},sr(c,!1)),b=h.map(function(j,C){var E=o.getTickLineCoord(j),S=E.line,N=E.tick,I=qn(qn(qn(qn({textAnchor:x,verticalAnchor:g},p),{},{stroke:"none",fill:d},v),N),{},{index:C,payload:j,visibleTicksCount:h.length,tickFormatter:u});return pe.createElement(fn,Tf({className:"recharts-cartesian-axis-tick",key:"tick-".concat(j.value,"-").concat(j.coordinate,"-").concat(j.tickCoord)},$y(o.props,j,C)),c&&pe.createElement("line",Tf({},y,S,{className:vr("recharts-cartesian-axis-tick-line",fi(c,"className"))})),f&&t.renderTickItem(f,I,"".concat(Zt(u)?u(j.value,C):j.value).concat(m||"")))});return pe.createElement("g",{className:"recharts-cartesian-axis-ticks"},b)}},{key:"render",value:function(){var a=this,s=this.props,i=s.axisLine,o=s.width,l=s.height,c=s.ticksGenerator,d=s.className,f=s.hide;if(f)return null;var u=this.props,m=u.ticks,h=oN(u,jIe),x=m;return Zt(c)&&(x=m&&m.length>0?c(this.props):c(h)),o<=0||l<=0||!x||!x.length?null:pe.createElement(fn,{className:vr("recharts-cartesian-axis",d),ref:function(p){a.layerReference=p}},i&&this.renderAxisLine(),this.renderTicks(x,this.state.fontSize,this.state.letterSpacing),Oa.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(a,s,i){var o,l=vr(s.className,"recharts-cartesian-axis-tick-value");return pe.isValidElement(a)?o=pe.cloneElement(a,qn(qn({},s),{},{className:l})):Zt(a)?o=a(qn(qn({},s),{},{className:l})):o=pe.createElement(Zy,Tf({},s,{className:"recharts-cartesian-axis-tick-value"}),i),o}}])}(w.Component);VE(Cj,"displayName","CartesianAxis");VE(Cj,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var IIe=["layout","type","stroke","connectNulls","isRange","ref"],DIe=["key"],qz;function Cm(e){"@babel/helpers - typeof";return Cm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Cm(e)}function Wz(e,t){if(e==null)return{};var n=kIe(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function kIe(e,t){if(e==null)return{};var n={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;n[a]=e[a]}return n}function Bd(){return Bd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Bd.apply(this,arguments)}function Z_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function ac(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Z_(Object(n),!0).forEach(function(a){Io(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Z_(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function OIe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function e6(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,Gz(a.key),a)}}function _Ie(e,t,n){return t&&e6(e.prototype,t),n&&e6(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function LIe(e,t,n){return t=kb(t),RIe(e,Hz()?Reflect.construct(t,n||[],kb(e).constructor):t.apply(e,n))}function RIe(e,t){if(t&&(Cm(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return FIe(e)}function FIe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Hz(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Hz=function(){return!!e})()}function kb(e){return kb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},kb(e)}function MIe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&wC(e,t)}function wC(e,t){return wC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},wC(e,t)}function Io(e,t,n){return t=Gz(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Gz(e){var t=$Ie(e,"string");return Cm(t)=="symbol"?t:t+""}function $Ie(e,t){if(Cm(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t||"default");if(Cm(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var rd=function(e){function t(){var n;OIe(this,t);for(var a=arguments.length,s=new Array(a),i=0;i<a;i++)s[i]=arguments[i];return n=LIe(this,t,[].concat(s)),Io(n,"state",{isAnimationFinished:!0}),Io(n,"id",Sx("recharts-area-")),Io(n,"handleAnimationEnd",function(){var o=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),Zt(o)&&o()}),Io(n,"handleAnimationStart",function(){var o=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),Zt(o)&&o()}),n}return MIe(t,e),_Ie(t,[{key:"renderDots",value:function(a,s,i){var o=this.props.isAnimationActive,l=this.state.isAnimationFinished;if(o&&!l)return null;var c=this.props,d=c.dot,f=c.points,u=c.dataKey,m=sr(this.props,!1),h=sr(d,!0),x=f.map(function(p,v){var y=ac(ac(ac({key:"dot-".concat(v),r:3},m),h),{},{index:v,cx:p.x,cy:p.y,dataKey:u,value:p.value,payload:p.payload,points:f});return t.renderDotItem(d,y)}),g={clipPath:a?"url(#clipPath-".concat(s?"":"dots-").concat(i,")"):null};return pe.createElement(fn,Bd({className:"recharts-area-dots"},g),x)}},{key:"renderHorizontalRect",value:function(a){var s=this.props,i=s.baseLine,o=s.points,l=s.strokeWidth,c=o[0].x,d=o[o.length-1].x,f=a*Math.abs(c-d),u=gc(o.map(function(m){return m.y||0}));return dt(i)&&typeof i=="number"?u=Math.max(i,u):i&&Array.isArray(i)&&i.length&&(u=Math.max(gc(i.map(function(m){return m.y||0})),u)),dt(u)?pe.createElement("rect",{x:c<d?c:c-f,y:0,width:f,height:Math.floor(u+(l?parseInt("".concat(l),10):1))}):null}},{key:"renderVerticalRect",value:function(a){var s=this.props,i=s.baseLine,o=s.points,l=s.strokeWidth,c=o[0].y,d=o[o.length-1].y,f=a*Math.abs(c-d),u=gc(o.map(function(m){return m.x||0}));return dt(i)&&typeof i=="number"?u=Math.max(i,u):i&&Array.isArray(i)&&i.length&&(u=Math.max(gc(i.map(function(m){return m.x||0})),u)),dt(u)?pe.createElement("rect",{x:0,y:c<d?c:c-f,width:u+(l?parseInt("".concat(l),10):1),height:Math.floor(f)}):null}},{key:"renderClipRect",value:function(a){var s=this.props.layout;return s==="vertical"?this.renderVerticalRect(a):this.renderHorizontalRect(a)}},{key:"renderAreaStatically",value:function(a,s,i,o){var l=this.props,c=l.layout,d=l.type,f=l.stroke,u=l.connectNulls,m=l.isRange;l.ref;var h=Wz(l,IIe);return pe.createElement(fn,{clipPath:i?"url(#clipPath-".concat(o,")"):null},pe.createElement(Mp,Bd({},sr(h,!0),{points:a,connectNulls:u,type:d,baseLine:s,layout:c,stroke:"none",className:"recharts-area-area"})),f!=="none"&&pe.createElement(Mp,Bd({},sr(this.props,!1),{className:"recharts-area-curve",layout:c,type:d,connectNulls:u,fill:"none",points:a})),f!=="none"&&m&&pe.createElement(Mp,Bd({},sr(this.props,!1),{className:"recharts-area-curve",layout:c,type:d,connectNulls:u,fill:"none",points:s})))}},{key:"renderAreaWithAnimation",value:function(a,s){var i=this,o=this.props,l=o.points,c=o.baseLine,d=o.isAnimationActive,f=o.animationBegin,u=o.animationDuration,m=o.animationEasing,h=o.animationId,x=this.state,g=x.prevPoints,p=x.prevBaseLine;return pe.createElement(xm,{begin:f,duration:u,isActive:d,easing:m,from:{t:0},to:{t:1},key:"area-".concat(h),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(v){var y=v.t;if(g){var b=g.length/l.length,j=l.map(function(N,I){var D=Math.floor(I*b);if(g[D]){var T=g[D],A=si(T.x,N.x),_=si(T.y,N.y);return ac(ac({},N),{},{x:A(y),y:_(y)})}return N}),C;if(dt(c)&&typeof c=="number"){var E=si(p,c);C=E(y)}else if(ir(c)||eh(c)){var S=si(p,0);C=S(y)}else C=c.map(function(N,I){var D=Math.floor(I*b);if(p[D]){var T=p[D],A=si(T.x,N.x),_=si(T.y,N.y);return ac(ac({},N),{},{x:A(y),y:_(y)})}return N});return i.renderAreaStatically(j,C,a,s)}return pe.createElement(fn,null,pe.createElement("defs",null,pe.createElement("clipPath",{id:"animationClipPath-".concat(s)},i.renderClipRect(y))),pe.createElement(fn,{clipPath:"url(#animationClipPath-".concat(s,")")},i.renderAreaStatically(l,c,a,s)))})}},{key:"renderArea",value:function(a,s){var i=this.props,o=i.points,l=i.baseLine,c=i.isAnimationActive,d=this.state,f=d.prevPoints,u=d.prevBaseLine,m=d.totalLength;return c&&o&&o.length&&(!f&&m>0||!Pv(f,o)||!Pv(u,l))?this.renderAreaWithAnimation(a,s):this.renderAreaStatically(o,l,a,s)}},{key:"render",value:function(){var a,s=this.props,i=s.hide,o=s.dot,l=s.points,c=s.className,d=s.top,f=s.left,u=s.xAxis,m=s.yAxis,h=s.width,x=s.height,g=s.isAnimationActive,p=s.id;if(i||!l||!l.length)return null;var v=this.state.isAnimationFinished,y=l.length===1,b=vr("recharts-area",c),j=u&&u.allowDataOverflow,C=m&&m.allowDataOverflow,E=j||C,S=ir(p)?this.id:p,N=(a=sr(o,!1))!==null&&a!==void 0?a:{r:3,strokeWidth:2},I=N.r,D=I===void 0?3:I,T=N.strokeWidth,A=T===void 0?2:T,_=Ghe(o)?o:{},k=_.clipDot,L=k===void 0?!0:k,$=D*2+A;return pe.createElement(fn,{className:b},j||C?pe.createElement("defs",null,pe.createElement("clipPath",{id:"clipPath-".concat(S)},pe.createElement("rect",{x:j?f:f-h/2,y:C?d:d-x/2,width:j?h:h*2,height:C?x:x*2})),!L&&pe.createElement("clipPath",{id:"clipPath-dots-".concat(S)},pe.createElement("rect",{x:f-$/2,y:d-$/2,width:h+$,height:x+$}))):null,y?null:this.renderArea(E,S),(o||y)&&this.renderDots(E,L,S),(!g||v)&&Lc.renderCallByParent(this.props,l))}}],[{key:"getDerivedStateFromProps",value:function(a,s){return a.animationId!==s.prevAnimationId?{prevAnimationId:a.animationId,curPoints:a.points,curBaseLine:a.baseLine,prevPoints:s.curPoints,prevBaseLine:s.curBaseLine}:a.points!==s.curPoints||a.baseLine!==s.curBaseLine?{curPoints:a.points,curBaseLine:a.baseLine}:null}}])}(w.PureComponent);qz=rd;Io(rd,"displayName","Area");Io(rd,"defaultProps",{stroke:"#3182bd",fill:"#3182bd",fillOpacity:.6,xAxisId:0,yAxisId:0,legendType:"line",connectNulls:!1,points:[],dot:!1,activeDot:!0,hide:!1,isAnimationActive:!gl.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"});Io(rd,"getBaseValue",function(e,t,n,a){var s=e.layout,i=e.baseValue,o=t.props.baseValue,l=o??i;if(dt(l)&&typeof l=="number")return l;var c=s==="horizontal"?a:n,d=c.scale.domain();if(c.type==="number"){var f=Math.max(d[0],d[1]),u=Math.min(d[0],d[1]);return l==="dataMin"?u:l==="dataMax"||f<0?f:Math.max(Math.min(d[0],d[1]),0)}return l==="dataMin"?d[0]:l==="dataMax"?d[1]:d[0]});Io(rd,"getComposedData",function(e){var t=e.props,n=e.item,a=e.xAxis,s=e.yAxis,i=e.xAxisTicks,o=e.yAxisTicks,l=e.bandSize,c=e.dataKey,d=e.stackedData,f=e.dataStartIndex,u=e.displayedData,m=e.offset,h=t.layout,x=d&&d.length,g=qz.getBaseValue(t,n,a,s),p=h==="horizontal",v=!1,y=u.map(function(j,C){var E;x?E=d[f+C]:(E=Fs(j,c),Array.isArray(E)?v=!0:E=[g,E]);var S=E[1]==null||x&&Fs(j,c)==null;return p?{x:OO({axis:a,ticks:i,bandSize:l,entry:j,index:C}),y:S?null:s.scale(E[1]),value:E,payload:j}:{x:S?null:a.scale(E[1]),y:OO({axis:s,ticks:o,bandSize:l,entry:j,index:C}),value:E,payload:j}}),b;return x||v?b=y.map(function(j){var C=Array.isArray(j.value)?j.value[0]:null;return p?{x:j.x,y:C!=null&&j.y!=null?s.scale(C):null}:{x:C!=null?a.scale(C):null,y:j.y}}):b=p?s.scale(g):a.scale(g),ac({points:y,baseLine:b,layout:h,isRange:v},m)});Io(rd,"renderDotItem",function(e,t){var n;if(pe.isValidElement(e))n=pe.cloneElement(e,t);else if(Zt(e))n=e(t);else{var a=vr("recharts-area-dot",typeof e!="boolean"?e.className:""),s=t.key,i=Wz(t,DIe);n=pe.createElement($E,Bd({},i,{key:s,className:a}))}return n});function Am(e){"@babel/helpers - typeof";return Am=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Am(e)}function BIe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t6(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,Xz(a.key),a)}}function zIe(e,t,n){return t&&t6(e.prototype,t),n&&t6(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function UIe(e,t,n){return t=Ob(t),VIe(e,Kz()?Reflect.construct(t,n||[],Ob(e).constructor):t.apply(e,n))}function VIe(e,t){if(t&&(Am(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return qIe(e)}function qIe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Kz(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Kz=function(){return!!e})()}function Ob(e){return Ob=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Ob(e)}function WIe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&NC(e,t)}function NC(e,t){return NC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},NC(e,t)}function Yz(e,t,n){return t=Xz(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Xz(e){var t=HIe(e,"string");return Am(t)=="symbol"?t:t+""}function HIe(e,t){if(Am(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t||"default");if(Am(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function SC(){return SC=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},SC.apply(this,arguments)}function GIe(e){var t=e.xAxisId,n=Oz(),a=_z(),s=Dz(t);return s==null?null:w.createElement(Cj,SC({},s,{className:vr("recharts-".concat(s.axisType," ").concat(s.axisType),s.className),viewBox:{x:0,y:0,width:n,height:a},ticksGenerator:function(o){return $d(o,!0)}}))}var Em=function(e){function t(){return BIe(this,t),UIe(this,t,arguments)}return WIe(t,e),zIe(t,[{key:"render",value:function(){return w.createElement(GIe,this.props)}}])}(w.Component);Yz(Em,"displayName","XAxis");Yz(Em,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function Pm(e){"@babel/helpers - typeof";return Pm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Pm(e)}function KIe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r6(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,Zz(a.key),a)}}function YIe(e,t,n){return t&&r6(e.prototype,t),n&&r6(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function XIe(e,t,n){return t=_b(t),QIe(e,Qz()?Reflect.construct(t,n||[],_b(e).constructor):t.apply(e,n))}function QIe(e,t){if(t&&(Pm(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return JIe(e)}function JIe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Qz(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Qz=function(){return!!e})()}function _b(e){return _b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},_b(e)}function ZIe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&CC(e,t)}function CC(e,t){return CC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},CC(e,t)}function Jz(e,t,n){return t=Zz(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Zz(e){var t=eDe(e,"string");return Pm(t)=="symbol"?t:t+""}function eDe(e,t){if(Pm(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t||"default");if(Pm(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function AC(){return AC=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},AC.apply(this,arguments)}var tDe=function(t){var n=t.yAxisId,a=Oz(),s=_z(),i=kz(n);return i==null?null:w.createElement(Cj,AC({},i,{className:vr("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:a,height:s},ticksGenerator:function(l){return $d(l,!0)}}))},Tm=function(e){function t(){return KIe(this,t),XIe(this,t,arguments)}return ZIe(t,e),YIe(t,[{key:"render",value:function(){return w.createElement(tDe,this.props)}}])}(w.Component);Jz(Tm,"displayName","YAxis");Jz(Tm,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function n6(e){return sDe(e)||aDe(e)||nDe(e)||rDe()}function rDe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function nDe(e,t){if(e){if(typeof e=="string")return EC(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return EC(e,t)}}function aDe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function sDe(e){if(Array.isArray(e))return EC(e)}function EC(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var PC=function(t,n,a,s,i){var o=Xi(t,UE),l=Xi(t,wj),c=[].concat(n6(o),n6(l)),d=Xi(t,Sj),f="".concat(s,"Id"),u=s[0],m=n;if(c.length&&(m=c.reduce(function(g,p){if(p.props[f]===a&&Fo(p.props,"extendDomain")&&dt(p.props[u])){var v=p.props[u];return[Math.min(g[0],v),Math.max(g[1],v)]}return g},m)),d.length){var h="".concat(u,"1"),x="".concat(u,"2");m=d.reduce(function(g,p){if(p.props[f]===a&&Fo(p.props,"extendDomain")&&dt(p.props[h])&&dt(p.props[x])){var v=p.props[h],y=p.props[x];return[Math.min(g[0],v,y),Math.max(g[1],v,y)]}return g},m)}return i&&i.length&&(m=i.reduce(function(g,p){return dt(p)?[Math.min(g[0],p),Math.max(g[1],p)]:g},m)),m},eU={exports:{}};(function(e){var t=Object.prototype.hasOwnProperty,n="~";function a(){}Object.create&&(a.prototype=Object.create(null),new a().__proto__||(n=!1));function s(c,d,f){this.fn=c,this.context=d,this.once=f||!1}function i(c,d,f,u,m){if(typeof f!="function")throw new TypeError("The listener must be a function");var h=new s(f,u||c,m),x=n?n+d:d;return c._events[x]?c._events[x].fn?c._events[x]=[c._events[x],h]:c._events[x].push(h):(c._events[x]=h,c._eventsCount++),c}function o(c,d){--c._eventsCount===0?c._events=new a:delete c._events[d]}function l(){this._events=new a,this._eventsCount=0}l.prototype.eventNames=function(){var d=[],f,u;if(this._eventsCount===0)return d;for(u in f=this._events)t.call(f,u)&&d.push(n?u.slice(1):u);return Object.getOwnPropertySymbols?d.concat(Object.getOwnPropertySymbols(f)):d},l.prototype.listeners=function(d){var f=n?n+d:d,u=this._events[f];if(!u)return[];if(u.fn)return[u.fn];for(var m=0,h=u.length,x=new Array(h);m<h;m++)x[m]=u[m].fn;return x},l.prototype.listenerCount=function(d){var f=n?n+d:d,u=this._events[f];return u?u.fn?1:u.length:0},l.prototype.emit=function(d,f,u,m,h,x){var g=n?n+d:d;if(!this._events[g])return!1;var p=this._events[g],v=arguments.length,y,b;if(p.fn){switch(p.once&&this.removeListener(d,p.fn,void 0,!0),v){case 1:return p.fn.call(p.context),!0;case 2:return p.fn.call(p.context,f),!0;case 3:return p.fn.call(p.context,f,u),!0;case 4:return p.fn.call(p.context,f,u,m),!0;case 5:return p.fn.call(p.context,f,u,m,h),!0;case 6:return p.fn.call(p.context,f,u,m,h,x),!0}for(b=1,y=new Array(v-1);b<v;b++)y[b-1]=arguments[b];p.fn.apply(p.context,y)}else{var j=p.length,C;for(b=0;b<j;b++)switch(p[b].once&&this.removeListener(d,p[b].fn,void 0,!0),v){case 1:p[b].fn.call(p[b].context);break;case 2:p[b].fn.call(p[b].context,f);break;case 3:p[b].fn.call(p[b].context,f,u);break;case 4:p[b].fn.call(p[b].context,f,u,m);break;default:if(!y)for(C=1,y=new Array(v-1);C<v;C++)y[C-1]=arguments[C];p[b].fn.apply(p[b].context,y)}}return!0},l.prototype.on=function(d,f,u){return i(this,d,f,u,!1)},l.prototype.once=function(d,f,u){return i(this,d,f,u,!0)},l.prototype.removeListener=function(d,f,u,m){var h=n?n+d:d;if(!this._events[h])return this;if(!f)return o(this,h),this;var x=this._events[h];if(x.fn)x.fn===f&&(!m||x.once)&&(!u||x.context===u)&&o(this,h);else{for(var g=0,p=[],v=x.length;g<v;g++)(x[g].fn!==f||m&&!x[g].once||u&&x[g].context!==u)&&p.push(x[g]);p.length?this._events[h]=p.length===1?p[0]:p:o(this,h)}return this},l.prototype.removeAllListeners=function(d){var f;return d?(f=n?n+d:d,this._events[f]&&o(this,f)):(this._events=new a,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=n,l.EventEmitter=l,e.exports=l})(eU);var iDe=eU.exports;const oDe=Er(iDe);var lN=new oDe,cN="recharts.syncMouseEvents";function Xv(e){"@babel/helpers - typeof";return Xv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xv(e)}function lDe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a6(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,tU(a.key),a)}}function cDe(e,t,n){return t&&a6(e.prototype,t),n&&a6(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function dN(e,t,n){return t=tU(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function tU(e){var t=dDe(e,"string");return Xv(t)=="symbol"?t:t+""}function dDe(e,t){if(Xv(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t||"default");if(Xv(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var uDe=function(){function e(){lDe(this,e),dN(this,"activeIndex",0),dN(this,"coordinateList",[]),dN(this,"layout","horizontal")}return cDe(e,[{key:"setDetails",value:function(n){var a,s=n.coordinateList,i=s===void 0?null:s,o=n.container,l=o===void 0?null:o,c=n.layout,d=c===void 0?null:c,f=n.offset,u=f===void 0?null:f,m=n.mouseHandlerCallback,h=m===void 0?null:m;this.coordinateList=(a=i??this.coordinateList)!==null&&a!==void 0?a:[],this.container=l??this.container,this.layout=d??this.layout,this.offset=u??this.offset,this.mouseHandlerCallback=h??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(n){if(this.coordinateList.length!==0)switch(n.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(n){this.activeIndex=n}},{key:"spoofMouse",value:function(){var n,a;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var s=this.container.getBoundingClientRect(),i=s.x,o=s.y,l=s.height,c=this.coordinateList[this.activeIndex].coordinate,d=((n=window)===null||n===void 0?void 0:n.scrollX)||0,f=((a=window)===null||a===void 0?void 0:a.scrollY)||0,u=i+c+d,m=o+this.offset.top+l/2+f;this.mouseHandlerCallback({pageX:u,pageY:m})}}}])}();function fDe(e,t,n){if(n==="number"&&t===!0&&Array.isArray(e)){var a=e==null?void 0:e[0],s=e==null?void 0:e[1];if(a&&s&&dt(a)&&dt(s))return!0}return!1}function mDe(e,t,n,a){var s=a/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-s:n.left+.5,y:e==="horizontal"?n.top+.5:t.y-s,width:e==="horizontal"?a:n.width-1,height:e==="horizontal"?n.height-1:a}}function rU(e){var t=e.cx,n=e.cy,a=e.radius,s=e.startAngle,i=e.endAngle,o=ya(t,n,a,s),l=ya(t,n,a,i);return{points:[o,l],cx:t,cy:n,radius:a,startAngle:s,endAngle:i}}function hDe(e,t,n){var a,s,i,o;if(e==="horizontal")a=t.x,i=a,s=n.top,o=n.top+n.height;else if(e==="vertical")s=t.y,o=s,a=n.left,i=n.left+n.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var l=t.cx,c=t.cy,d=t.innerRadius,f=t.outerRadius,u=t.angle,m=ya(l,c,d,u),h=ya(l,c,f,u);a=m.x,s=m.y,i=h.x,o=h.y}else return rU(t);return[{x:a,y:s},{x:i,y:o}]}function Qv(e){"@babel/helpers - typeof";return Qv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Qv(e)}function s6(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function x0(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?s6(Object(n),!0).forEach(function(a){pDe(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s6(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function pDe(e,t,n){return t=vDe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function vDe(e){var t=xDe(e,"string");return Qv(t)=="symbol"?t:t+""}function xDe(e,t){if(Qv(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t||"default");if(Qv(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function gDe(e){var t,n,a=e.element,s=e.tooltipEventType,i=e.isActive,o=e.activeCoordinate,l=e.activePayload,c=e.offset,d=e.activeTooltipIndex,f=e.tooltipAxisBandSize,u=e.layout,m=e.chartName,h=(t=a.props.cursor)!==null&&t!==void 0?t:(n=a.type.defaultProps)===null||n===void 0?void 0:n.cursor;if(!a||!h||!i||!o||m!=="ScatterChart"&&s!=="axis")return null;var x,g=Mp;if(m==="ScatterChart")x=o,g=s3e;else if(m==="BarChart")x=mDe(u,o,c,f),g=ME;else if(u==="radial"){var p=rU(o),v=p.cx,y=p.cy,b=p.radius,j=p.startAngle,C=p.endAngle;x={cx:v,cy:y,startAngle:j,endAngle:C,innerRadius:b,outerRadius:b},g=iz}else x={points:hDe(u,o,c)},g=Mp;var E=x0(x0(x0(x0({stroke:"#ccc",pointerEvents:"none"},c),x),sr(h,!1)),{},{payload:l,payloadIndex:d,className:vr("recharts-tooltip-cursor",h.className)});return w.isValidElement(h)?w.cloneElement(h,E):w.createElement(g,E)}var yDe=["item"],bDe=["children","className","width","height","style","compact","title","desc"];function Im(e){"@babel/helpers - typeof";return Im=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Im(e)}function If(){return If=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},If.apply(this,arguments)}function i6(e,t){return NDe(e)||wDe(e,t)||aU(e,t)||jDe()}function jDe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function wDe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var a,s,i,o,l=[],c=!0,d=!1;try{if(i=(n=n.call(e)).next,t===0){if(Object(n)!==n)return;c=!1}else for(;!(c=(a=i.call(n)).done)&&(l.push(a.value),l.length!==t);c=!0);}catch(f){d=!0,s=f}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw s}}return l}}function NDe(e){if(Array.isArray(e))return e}function o6(e,t){if(e==null)return{};var n=SDe(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function SDe(e,t){if(e==null)return{};var n={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;n[a]=e[a]}return n}function CDe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l6(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,sU(a.key),a)}}function ADe(e,t,n){return t&&l6(e.prototype,t),n&&l6(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function EDe(e,t,n){return t=Lb(t),PDe(e,nU()?Reflect.construct(t,n||[],Lb(e).constructor):t.apply(e,n))}function PDe(e,t){if(t&&(Im(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return TDe(e)}function TDe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function nU(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(nU=function(){return!!e})()}function Lb(e){return Lb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Lb(e)}function IDe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&TC(e,t)}function TC(e,t){return TC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},TC(e,t)}function Dm(e){return ODe(e)||kDe(e)||aU(e)||DDe()}function DDe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function aU(e,t){if(e){if(typeof e=="string")return IC(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return IC(e,t)}}function kDe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function ODe(e){if(Array.isArray(e))return IC(e)}function IC(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function c6(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function Ge(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?c6(Object(n),!0).forEach(function(a){Lt(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c6(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function Lt(e,t,n){return t=sU(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function sU(e){var t=_De(e,"string");return Im(t)=="symbol"?t:t+""}function _De(e,t){if(Im(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t||"default");if(Im(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var LDe={xAxis:["bottom","top"],yAxis:["left","right"]},RDe={width:"100%",height:"100%"},iU={x:0,y:0};function g0(e){return e}var FDe=function(t,n){return n==="horizontal"?t.x:n==="vertical"?t.y:n==="centric"?t.angle:t.radius},MDe=function(t,n,a,s){var i=n.find(function(f){return f&&f.index===a});if(i){if(t==="horizontal")return{x:i.coordinate,y:s.y};if(t==="vertical")return{x:s.x,y:i.coordinate};if(t==="centric"){var o=i.coordinate,l=s.radius;return Ge(Ge(Ge({},s),ya(s.cx,s.cy,l,o)),{},{angle:o,radius:l})}var c=i.coordinate,d=s.angle;return Ge(Ge(Ge({},s),ya(s.cx,s.cy,c,d)),{},{angle:d,radius:c})}return iU},Aj=function(t,n){var a=n.graphicalItems,s=n.dataStartIndex,i=n.dataEndIndex,o=(a??[]).reduce(function(l,c){var d=c.props.data;return d&&d.length?[].concat(Dm(l),Dm(d)):l},[]);return o.length>0?o:t&&t.length&&dt(s)&&dt(i)?t.slice(s,i+1):[]};function oU(e){return e==="number"?[0,"auto"]:void 0}var DC=function(t,n,a,s){var i=t.graphicalItems,o=t.tooltipAxis,l=Aj(n,t);return a<0||!i||!i.length||a>=l.length?null:i.reduce(function(c,d){var f,u=(f=d.props.data)!==null&&f!==void 0?f:n;u&&t.dataStartIndex+t.dataEndIndex!==0&&t.dataEndIndex-t.dataStartIndex>=a&&(u=u.slice(t.dataStartIndex,t.dataEndIndex+1));var m;if(o.dataKey&&!o.allowDuplicatedCategory){var h=u===void 0?l:u;m=Fy(h,o.dataKey,s)}else m=u&&u[a]||l[a];return m?[].concat(Dm(c),[nz(d,m)]):c},[])},d6=function(t,n,a,s){var i=s||{x:t.chartX,y:t.chartY},o=FDe(i,a),l=t.orderedTooltipTicks,c=t.tooltipAxis,d=t.tooltipTicks,f=GCe(o,l,d,c);if(f>=0&&d){var u=d[f]&&d[f].value,m=DC(t,n,f,u),h=MDe(a,l,f,i);return{activeTooltipIndex:f,activeLabel:u,activePayload:m,activeCoordinate:h}}return null},$De=function(t,n){var a=n.axes,s=n.graphicalItems,i=n.axisType,o=n.axisIdKey,l=n.stackGroups,c=n.dataStartIndex,d=n.dataEndIndex,f=t.layout,u=t.children,m=t.stackOffset,h=tz(f,i);return a.reduce(function(x,g){var p,v=g.type.defaultProps!==void 0?Ge(Ge({},g.type.defaultProps),g.props):g.props,y=v.type,b=v.dataKey,j=v.allowDataOverflow,C=v.allowDuplicatedCategory,E=v.scale,S=v.ticks,N=v.includeHidden,I=v[o];if(x[I])return x;var D=Aj(t.data,{graphicalItems:s.filter(function(R){var V,G=o in R.props?R.props[o]:(V=R.type.defaultProps)===null||V===void 0?void 0:V[o];return G===I}),dataStartIndex:c,dataEndIndex:d}),T=D.length,A,_,k;fDe(v.domain,j,y)&&(A=XS(v.domain,null,j),h&&(y==="number"||E!=="auto")&&(k=Fp(D,b,"category")));var L=oU(y);if(!A||A.length===0){var $,M=($=v.domain)!==null&&$!==void 0?$:L;if(b){if(A=Fp(D,b,y),y==="category"&&h){var B=Fhe(A);C&&B?(_=A,A=wb(0,T)):C||(A=FO(M,A,g).reduce(function(R,V){return R.indexOf(V)>=0?R:[].concat(Dm(R),[V])},[]))}else if(y==="category")C?A=A.filter(function(R){return R!==""&&!ir(R)}):A=FO(M,A,g).reduce(function(R,V){return R.indexOf(V)>=0||V===""||ir(V)?R:[].concat(Dm(R),[V])},[]);else if(y==="number"){var U=JCe(D,s.filter(function(R){var V,G,ee=o in R.props?R.props[o]:(V=R.type.defaultProps)===null||V===void 0?void 0:V[o],re="hide"in R.props?R.props.hide:(G=R.type.defaultProps)===null||G===void 0?void 0:G.hide;return ee===I&&(N||!re)}),b,i,f);U&&(A=U)}h&&(y==="number"||E!=="auto")&&(k=Fp(D,b,"category"))}else h?A=wb(0,T):l&&l[I]&&l[I].hasStack&&y==="number"?A=m==="expand"?[0,1]:rz(l[I].stackGroups,c,d):A=ez(D,s.filter(function(R){var V=o in R.props?R.props[o]:R.type.defaultProps[o],G="hide"in R.props?R.props.hide:R.type.defaultProps.hide;return V===I&&(N||!G)}),y,f,!0);if(y==="number")A=PC(u,A,I,i,S),M&&(A=XS(M,A,j));else if(y==="category"&&M){var W=M,q=A.every(function(R){return W.indexOf(R)>=0});q&&(A=W)}}return Ge(Ge({},x),{},Lt({},I,Ge(Ge({},v),{},{axisType:i,domain:A,categoricalDomain:k,duplicateDomain:_,originalDomain:(p=v.domain)!==null&&p!==void 0?p:L,isCategorical:h,layout:f})))},{})},BDe=function(t,n){var a=n.graphicalItems,s=n.Axis,i=n.axisType,o=n.axisIdKey,l=n.stackGroups,c=n.dataStartIndex,d=n.dataEndIndex,f=t.layout,u=t.children,m=Aj(t.data,{graphicalItems:a,dataStartIndex:c,dataEndIndex:d}),h=m.length,x=tz(f,i),g=-1;return a.reduce(function(p,v){var y=v.type.defaultProps!==void 0?Ge(Ge({},v.type.defaultProps),v.props):v.props,b=y[o],j=oU("number");if(!p[b]){g++;var C;return x?C=wb(0,h):l&&l[b]&&l[b].hasStack?(C=rz(l[b].stackGroups,c,d),C=PC(u,C,b,i)):(C=XS(j,ez(m,a.filter(function(E){var S,N,I=o in E.props?E.props[o]:(S=E.type.defaultProps)===null||S===void 0?void 0:S[o],D="hide"in E.props?E.props.hide:(N=E.type.defaultProps)===null||N===void 0?void 0:N.hide;return I===b&&!D}),"number",f),s.defaultProps.allowDataOverflow),C=PC(u,C,b,i)),Ge(Ge({},p),{},Lt({},b,Ge(Ge({axisType:i},s.defaultProps),{},{hide:!0,orientation:fi(LDe,"".concat(i,".").concat(g%2),null),domain:C,originalDomain:j,isCategorical:x,layout:f})))}return p},{})},zDe=function(t,n){var a=n.axisType,s=a===void 0?"xAxis":a,i=n.AxisComp,o=n.graphicalItems,l=n.stackGroups,c=n.dataStartIndex,d=n.dataEndIndex,f=t.children,u="".concat(s,"Id"),m=Xi(f,i),h={};return m&&m.length?h=$De(t,{axes:m,graphicalItems:o,axisType:s,axisIdKey:u,stackGroups:l,dataStartIndex:c,dataEndIndex:d}):o&&o.length&&(h=BDe(t,{Axis:i,graphicalItems:o,axisType:s,axisIdKey:u,stackGroups:l,dataStartIndex:c,dataEndIndex:d})),h},UDe=function(t){var n=pf(t),a=$d(n,!1,!0);return{tooltipTicks:a,orderedTooltipTicks:uE(a,function(s){return s.coordinate}),tooltipAxis:n,tooltipAxisBandSize:mb(n,a)}},u6=function(t){var n=t.children,a=t.defaultShowTooltip,s=Ss(n,ym),i=0,o=0;return t.data&&t.data.length!==0&&(o=t.data.length-1),s&&s.props&&(s.props.startIndex>=0&&(i=s.props.startIndex),s.props.endIndex>=0&&(o=s.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:i,dataEndIndex:o,activeTooltipIndex:-1,isTooltipActive:!!a}},VDe=function(t){return!t||!t.length?!1:t.some(function(n){var a=xl(n&&n.type);return a&&a.indexOf("Bar")>=0})},f6=function(t){return t==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:t==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:t==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},qDe=function(t,n){var a=t.props,s=t.graphicalItems,i=t.xAxisMap,o=i===void 0?{}:i,l=t.yAxisMap,c=l===void 0?{}:l,d=a.width,f=a.height,u=a.children,m=a.margin||{},h=Ss(u,ym),x=Ss(u,Uf),g=Object.keys(c).reduce(function(C,E){var S=c[E],N=S.orientation;return!S.mirror&&!S.hide?Ge(Ge({},C),{},Lt({},N,C[N]+S.width)):C},{left:m.left||0,right:m.right||0}),p=Object.keys(o).reduce(function(C,E){var S=o[E],N=S.orientation;return!S.mirror&&!S.hide?Ge(Ge({},C),{},Lt({},N,fi(C,"".concat(N))+S.height)):C},{top:m.top||0,bottom:m.bottom||0}),v=Ge(Ge({},p),g),y=v.bottom;h&&(v.bottom+=h.props.height||ym.defaultProps.height),x&&n&&(v=XCe(v,s,a,n));var b=d-v.left-v.right,j=f-v.top-v.bottom;return Ge(Ge({brushBottom:y},v),{},{width:Math.max(b,0),height:Math.max(j,0)})},WDe=function(t,n){if(n==="xAxis")return t[n].width;if(n==="yAxis")return t[n].height},lU=function(t){var n=t.chartName,a=t.GraphicalChild,s=t.defaultTooltipEventType,i=s===void 0?"axis":s,o=t.validateTooltipEventTypes,l=o===void 0?["axis"]:o,c=t.axisComponents,d=t.legendContent,f=t.formatAxisMap,u=t.defaultProps,m=function(v,y){var b=y.graphicalItems,j=y.stackGroups,C=y.offset,E=y.updateId,S=y.dataStartIndex,N=y.dataEndIndex,I=v.barSize,D=v.layout,T=v.barGap,A=v.barCategoryGap,_=v.maxBarSize,k=f6(D),L=k.numericAxisName,$=k.cateAxisName,M=VDe(b),B=[];return b.forEach(function(U,W){var q=Aj(v.data,{graphicalItems:[U],dataStartIndex:S,dataEndIndex:N}),R=U.type.defaultProps!==void 0?Ge(Ge({},U.type.defaultProps),U.props):U.props,V=R.dataKey,G=R.maxBarSize,ee=R["".concat(L,"Id")],re=R["".concat($,"Id")],de={},ue=c.reduce(function(nt,rt){var xt=y["".concat(rt.axisType,"Map")],Ve=R["".concat(rt.axisType,"Id")];xt&&xt[Ve]||rt.axisType==="zAxis"||Uc(!1);var et=xt[Ve];return Ge(Ge({},nt),{},Lt(Lt({},rt.axisType,et),"".concat(rt.axisType,"Ticks"),$d(et)))},de),oe=ue[$],ge=ue["".concat($,"Ticks")],ve=j&&j[ee]&&j[ee].hasStack&&dAe(U,j[ee].stackGroups),xe=xl(U.type).indexOf("Bar")>=0,Oe=mb(oe,ge),ye=[],le=M&&KCe({barSize:I,stackGroups:j,totalSize:WDe(ue,$)});if(xe){var ne,Ae,Se=ir(G)?_:G,be=(ne=(Ae=mb(oe,ge,!0))!==null&&Ae!==void 0?Ae:Se)!==null&&ne!==void 0?ne:0;ye=YCe({barGap:T,barCategoryGap:A,bandSize:be!==Oe?be:Oe,sizeList:le[re],maxBarSize:Se}),be!==Oe&&(ye=ye.map(function(nt){return Ge(Ge({},nt),{},{position:Ge(Ge({},nt.position),{},{offset:nt.position.offset-be/2})})}))}var Re=U&&U.type&&U.type.getComposedData;Re&&B.push({props:Ge(Ge({},Re(Ge(Ge({},ue),{},{displayedData:q,props:v,dataKey:V,item:U,bandSize:Oe,barPosition:ye,offset:C,stackedData:ve,layout:D,dataStartIndex:S,dataEndIndex:N}))),{},Lt(Lt(Lt({key:U.key||"item-".concat(W)},L,ue[L]),$,ue[$]),"animationId",E)),childIndex:Xhe(U,v.children),item:U})}),B},h=function(v,y){var b=v.props,j=v.dataStartIndex,C=v.dataEndIndex,E=v.updateId;if(!CD({props:b}))return null;var S=b.children,N=b.layout,I=b.stackOffset,D=b.data,T=b.reverseStackOrder,A=f6(N),_=A.numericAxisName,k=A.cateAxisName,L=Xi(S,a),$=oAe(D,L,"".concat(_,"Id"),"".concat(k,"Id"),I,T),M=c.reduce(function(R,V){var G="".concat(V.axisType,"Map");return Ge(Ge({},R),{},Lt({},G,zDe(b,Ge(Ge({},V),{},{graphicalItems:L,stackGroups:V.axisType===_&&$,dataStartIndex:j,dataEndIndex:C}))))},{}),B=qDe(Ge(Ge({},M),{},{props:b,graphicalItems:L}),y==null?void 0:y.legendBBox);Object.keys(M).forEach(function(R){M[R]=f(b,M[R],B,R.replace("Map",""),n)});var U=M["".concat(k,"Map")],W=UDe(U),q=m(b,Ge(Ge({},M),{},{dataStartIndex:j,dataEndIndex:C,updateId:E,graphicalItems:L,stackGroups:$,offset:B}));return Ge(Ge({formattedGraphicalItems:q,graphicalItems:L,offset:B,stackGroups:$},W),M)},x=function(p){function v(y){var b,j,C;return CDe(this,v),C=EDe(this,v,[y]),Lt(C,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),Lt(C,"accessibilityManager",new uDe),Lt(C,"handleLegendBBoxUpdate",function(E){if(E){var S=C.state,N=S.dataStartIndex,I=S.dataEndIndex,D=S.updateId;C.setState(Ge({legendBBox:E},h({props:C.props,dataStartIndex:N,dataEndIndex:I,updateId:D},Ge(Ge({},C.state),{},{legendBBox:E}))))}}),Lt(C,"handleReceiveSyncEvent",function(E,S,N){if(C.props.syncId===E){if(N===C.eventEmitterSymbol&&typeof C.props.syncMethod!="function")return;C.applySyncEvent(S)}}),Lt(C,"handleBrushChange",function(E){var S=E.startIndex,N=E.endIndex;if(S!==C.state.dataStartIndex||N!==C.state.dataEndIndex){var I=C.state.updateId;C.setState(function(){return Ge({dataStartIndex:S,dataEndIndex:N},h({props:C.props,dataStartIndex:S,dataEndIndex:N,updateId:I},C.state))}),C.triggerSyncEvent({dataStartIndex:S,dataEndIndex:N})}}),Lt(C,"handleMouseEnter",function(E){var S=C.getMouseInfo(E);if(S){var N=Ge(Ge({},S),{},{isTooltipActive:!0});C.setState(N),C.triggerSyncEvent(N);var I=C.props.onMouseEnter;Zt(I)&&I(N,E)}}),Lt(C,"triggeredAfterMouseMove",function(E){var S=C.getMouseInfo(E),N=S?Ge(Ge({},S),{},{isTooltipActive:!0}):{isTooltipActive:!1};C.setState(N),C.triggerSyncEvent(N);var I=C.props.onMouseMove;Zt(I)&&I(N,E)}),Lt(C,"handleItemMouseEnter",function(E){C.setState(function(){return{isTooltipActive:!0,activeItem:E,activePayload:E.tooltipPayload,activeCoordinate:E.tooltipPosition||{x:E.cx,y:E.cy}}})}),Lt(C,"handleItemMouseLeave",function(){C.setState(function(){return{isTooltipActive:!1}})}),Lt(C,"handleMouseMove",function(E){E.persist(),C.throttleTriggeredAfterMouseMove(E)}),Lt(C,"handleMouseLeave",function(E){C.throttleTriggeredAfterMouseMove.cancel();var S={isTooltipActive:!1};C.setState(S),C.triggerSyncEvent(S);var N=C.props.onMouseLeave;Zt(N)&&N(S,E)}),Lt(C,"handleOuterEvent",function(E){var S=Yhe(E),N=fi(C.props,"".concat(S));if(S&&Zt(N)){var I,D;/.*touch.*/i.test(S)?D=C.getMouseInfo(E.changedTouches[0]):D=C.getMouseInfo(E),N((I=D)!==null&&I!==void 0?I:{},E)}}),Lt(C,"handleClick",function(E){var S=C.getMouseInfo(E);if(S){var N=Ge(Ge({},S),{},{isTooltipActive:!0});C.setState(N),C.triggerSyncEvent(N);var I=C.props.onClick;Zt(I)&&I(N,E)}}),Lt(C,"handleMouseDown",function(E){var S=C.props.onMouseDown;if(Zt(S)){var N=C.getMouseInfo(E);S(N,E)}}),Lt(C,"handleMouseUp",function(E){var S=C.props.onMouseUp;if(Zt(S)){var N=C.getMouseInfo(E);S(N,E)}}),Lt(C,"handleTouchMove",function(E){E.changedTouches!=null&&E.changedTouches.length>0&&C.throttleTriggeredAfterMouseMove(E.changedTouches[0])}),Lt(C,"handleTouchStart",function(E){E.changedTouches!=null&&E.changedTouches.length>0&&C.handleMouseDown(E.changedTouches[0])}),Lt(C,"handleTouchEnd",function(E){E.changedTouches!=null&&E.changedTouches.length>0&&C.handleMouseUp(E.changedTouches[0])}),Lt(C,"handleDoubleClick",function(E){var S=C.props.onDoubleClick;if(Zt(S)){var N=C.getMouseInfo(E);S(N,E)}}),Lt(C,"handleContextMenu",function(E){var S=C.props.onContextMenu;if(Zt(S)){var N=C.getMouseInfo(E);S(N,E)}}),Lt(C,"triggerSyncEvent",function(E){C.props.syncId!==void 0&&lN.emit(cN,C.props.syncId,E,C.eventEmitterSymbol)}),Lt(C,"applySyncEvent",function(E){var S=C.props,N=S.layout,I=S.syncMethod,D=C.state.updateId,T=E.dataStartIndex,A=E.dataEndIndex;if(E.dataStartIndex!==void 0||E.dataEndIndex!==void 0)C.setState(Ge({dataStartIndex:T,dataEndIndex:A},h({props:C.props,dataStartIndex:T,dataEndIndex:A,updateId:D},C.state)));else if(E.activeTooltipIndex!==void 0){var _=E.chartX,k=E.chartY,L=E.activeTooltipIndex,$=C.state,M=$.offset,B=$.tooltipTicks;if(!M)return;if(typeof I=="function")L=I(B,E);else if(I==="value"){L=-1;for(var U=0;U<B.length;U++)if(B[U].value===E.activeLabel){L=U;break}}var W=Ge(Ge({},M),{},{x:M.left,y:M.top}),q=Math.min(_,W.x+W.width),R=Math.min(k,W.y+W.height),V=B[L]&&B[L].value,G=DC(C.state,C.props.data,L),ee=B[L]?{x:N==="horizontal"?B[L].coordinate:q,y:N==="horizontal"?R:B[L].coordinate}:iU;C.setState(Ge(Ge({},E),{},{activeLabel:V,activeCoordinate:ee,activePayload:G,activeTooltipIndex:L}))}else C.setState(E)}),Lt(C,"renderCursor",function(E){var S,N=C.state,I=N.isTooltipActive,D=N.activeCoordinate,T=N.activePayload,A=N.offset,_=N.activeTooltipIndex,k=N.tooltipAxisBandSize,L=C.getTooltipEventType(),$=(S=E.props.active)!==null&&S!==void 0?S:I,M=C.props.layout,B=E.key||"_recharts-cursor";return pe.createElement(gDe,{key:B,activeCoordinate:D,activePayload:T,activeTooltipIndex:_,chartName:n,element:E,isActive:$,layout:M,offset:A,tooltipAxisBandSize:k,tooltipEventType:L})}),Lt(C,"renderPolarAxis",function(E,S,N){var I=fi(E,"type.axisType"),D=fi(C.state,"".concat(I,"Map")),T=E.type.defaultProps,A=T!==void 0?Ge(Ge({},T),E.props):E.props,_=D&&D[A["".concat(I,"Id")]];return w.cloneElement(E,Ge(Ge({},_),{},{className:vr(I,_.className),key:E.key||"".concat(S,"-").concat(N),ticks:$d(_,!0)}))}),Lt(C,"renderPolarGrid",function(E){var S=E.props,N=S.radialLines,I=S.polarAngles,D=S.polarRadius,T=C.state,A=T.radiusAxisMap,_=T.angleAxisMap,k=pf(A),L=pf(_),$=L.cx,M=L.cy,B=L.innerRadius,U=L.outerRadius;return w.cloneElement(E,{polarAngles:Array.isArray(I)?I:$d(L,!0).map(function(W){return W.coordinate}),polarRadius:Array.isArray(D)?D:$d(k,!0).map(function(W){return W.coordinate}),cx:$,cy:M,innerRadius:B,outerRadius:U,key:E.key||"polar-grid",radialLines:N})}),Lt(C,"renderLegend",function(){var E=C.state.formattedGraphicalItems,S=C.props,N=S.children,I=S.width,D=S.height,T=C.props.margin||{},A=I-(T.left||0)-(T.right||0),_=JB({children:N,formattedGraphicalItems:E,legendWidth:A,legendContent:d});if(!_)return null;var k=_.item,L=o6(_,yDe);return w.cloneElement(k,Ge(Ge({},L),{},{chartWidth:I,chartHeight:D,margin:T,onBBoxUpdate:C.handleLegendBBoxUpdate}))}),Lt(C,"renderTooltip",function(){var E,S=C.props,N=S.children,I=S.accessibilityLayer,D=Ss(N,Bi);if(!D)return null;var T=C.state,A=T.isTooltipActive,_=T.activeCoordinate,k=T.activePayload,L=T.activeLabel,$=T.offset,M=(E=D.props.active)!==null&&E!==void 0?E:A;return w.cloneElement(D,{viewBox:Ge(Ge({},$),{},{x:$.left,y:$.top}),active:M,label:L,payload:M?k:[],coordinate:_,accessibilityLayer:I})}),Lt(C,"renderBrush",function(E){var S=C.props,N=S.margin,I=S.data,D=C.state,T=D.offset,A=D.dataStartIndex,_=D.dataEndIndex,k=D.updateId;return w.cloneElement(E,{key:E.key||"_recharts-brush",onChange:m0(C.handleBrushChange,E.props.onChange),data:I,x:dt(E.props.x)?E.props.x:T.left,y:dt(E.props.y)?E.props.y:T.top+T.height+T.brushBottom-(N.bottom||0),width:dt(E.props.width)?E.props.width:T.width,startIndex:A,endIndex:_,updateId:"brush-".concat(k)})}),Lt(C,"renderReferenceElement",function(E,S,N){if(!E)return null;var I=C,D=I.clipPathId,T=C.state,A=T.xAxisMap,_=T.yAxisMap,k=T.offset,L=E.type.defaultProps||{},$=E.props,M=$.xAxisId,B=M===void 0?L.xAxisId:M,U=$.yAxisId,W=U===void 0?L.yAxisId:U;return w.cloneElement(E,{key:E.key||"".concat(S,"-").concat(N),xAxis:A[B],yAxis:_[W],viewBox:{x:k.left,y:k.top,width:k.width,height:k.height},clipPathId:D})}),Lt(C,"renderActivePoints",function(E){var S=E.item,N=E.activePoint,I=E.basePoint,D=E.childIndex,T=E.isRange,A=[],_=S.props.key,k=S.item.type.defaultProps!==void 0?Ge(Ge({},S.item.type.defaultProps),S.item.props):S.item.props,L=k.activeDot,$=k.dataKey,M=Ge(Ge({index:D,dataKey:$,cx:N.x,cy:N.y,r:4,fill:FE(S.item),strokeWidth:2,stroke:"#fff",payload:N.payload,value:N.value},sr(L,!1)),My(L));return A.push(v.renderActiveDot(L,M,"".concat(_,"-activePoint-").concat(D))),I?A.push(v.renderActiveDot(L,Ge(Ge({},M),{},{cx:I.x,cy:I.y}),"".concat(_,"-basePoint-").concat(D))):T&&A.push(null),A}),Lt(C,"renderGraphicChild",function(E,S,N){var I=C.filterFormatItem(E,S,N);if(!I)return null;var D=C.getTooltipEventType(),T=C.state,A=T.isTooltipActive,_=T.tooltipAxis,k=T.activeTooltipIndex,L=T.activeLabel,$=C.props.children,M=Ss($,Bi),B=I.props,U=B.points,W=B.isRange,q=B.baseLine,R=I.item.type.defaultProps!==void 0?Ge(Ge({},I.item.type.defaultProps),I.item.props):I.item.props,V=R.activeDot,G=R.hide,ee=R.activeBar,re=R.activeShape,de=!!(!G&&A&&M&&(V||ee||re)),ue={};D!=="axis"&&M&&M.props.trigger==="click"?ue={onClick:m0(C.handleItemMouseEnter,E.props.onClick)}:D!=="axis"&&(ue={onMouseLeave:m0(C.handleItemMouseLeave,E.props.onMouseLeave),onMouseEnter:m0(C.handleItemMouseEnter,E.props.onMouseEnter)});var oe=w.cloneElement(E,Ge(Ge({},I.props),ue));function ge(rt){return typeof _.dataKey=="function"?_.dataKey(rt.payload):null}if(de)if(k>=0){var ve,xe;if(_.dataKey&&!_.allowDuplicatedCategory){var Oe=typeof _.dataKey=="function"?ge:"payload.".concat(_.dataKey.toString());ve=Fy(U,Oe,L),xe=W&&q&&Fy(q,Oe,L)}else ve=U==null?void 0:U[k],xe=W&&q&&q[k];if(re||ee){var ye=E.props.activeIndex!==void 0?E.props.activeIndex:k;return[w.cloneElement(E,Ge(Ge(Ge({},I.props),ue),{},{activeIndex:ye})),null,null]}if(!ir(ve))return[oe].concat(Dm(C.renderActivePoints({item:I,activePoint:ve,basePoint:xe,childIndex:k,isRange:W})))}else{var le,ne=(le=C.getItemByXY(C.state.activeCoordinate))!==null&&le!==void 0?le:{graphicalItem:oe},Ae=ne.graphicalItem,Se=Ae.item,be=Se===void 0?E:Se,Re=Ae.childIndex,nt=Ge(Ge(Ge({},I.props),ue),{},{activeIndex:Re});return[w.cloneElement(be,nt),null,null]}return W?[oe,null,null]:[oe,null]}),Lt(C,"renderCustomized",function(E,S,N){return w.cloneElement(E,Ge(Ge({key:"recharts-customized-".concat(N)},C.props),C.state))}),Lt(C,"renderMap",{CartesianGrid:{handler:g0,once:!0},ReferenceArea:{handler:C.renderReferenceElement},ReferenceLine:{handler:g0},ReferenceDot:{handler:C.renderReferenceElement},XAxis:{handler:g0},YAxis:{handler:g0},Brush:{handler:C.renderBrush,once:!0},Bar:{handler:C.renderGraphicChild},Line:{handler:C.renderGraphicChild},Area:{handler:C.renderGraphicChild},Radar:{handler:C.renderGraphicChild},RadialBar:{handler:C.renderGraphicChild},Scatter:{handler:C.renderGraphicChild},Pie:{handler:C.renderGraphicChild},Funnel:{handler:C.renderGraphicChild},Tooltip:{handler:C.renderCursor,once:!0},PolarGrid:{handler:C.renderPolarGrid,once:!0},PolarAngleAxis:{handler:C.renderPolarAxis},PolarRadiusAxis:{handler:C.renderPolarAxis},Customized:{handler:C.renderCustomized}}),C.clipPathId="".concat((b=y.id)!==null&&b!==void 0?b:Sx("recharts"),"-clip"),C.throttleTriggeredAfterMouseMove=Q9(C.triggeredAfterMouseMove,(j=y.throttleDelay)!==null&&j!==void 0?j:1e3/60),C.state={},C}return IDe(v,p),ADe(v,[{key:"componentDidMount",value:function(){var b,j;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(b=this.props.margin.left)!==null&&b!==void 0?b:0,top:(j=this.props.margin.top)!==null&&j!==void 0?j:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var b=this.props,j=b.children,C=b.data,E=b.height,S=b.layout,N=Ss(j,Bi);if(N){var I=N.props.defaultIndex;if(!(typeof I!="number"||I<0||I>this.state.tooltipTicks.length-1)){var D=this.state.tooltipTicks[I]&&this.state.tooltipTicks[I].value,T=DC(this.state,C,I,D),A=this.state.tooltipTicks[I].coordinate,_=(this.state.offset.top+E)/2,k=S==="horizontal",L=k?{x:A,y:_}:{y:A,x:_},$=this.state.formattedGraphicalItems.find(function(B){var U=B.item;return U.type.name==="Scatter"});$&&(L=Ge(Ge({},L),$.props.points[I].tooltipPosition),T=$.props.points[I].tooltipPayload);var M={activeTooltipIndex:I,isTooltipActive:!0,activeLabel:D,activePayload:T,activeCoordinate:L};this.setState(M),this.renderCursor(N),this.accessibilityManager.setIndex(I)}}}},{key:"getSnapshotBeforeUpdate",value:function(b,j){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==j.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==b.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==b.margin){var C,E;this.accessibilityManager.setDetails({offset:{left:(C=this.props.margin.left)!==null&&C!==void 0?C:0,top:(E=this.props.margin.top)!==null&&E!==void 0?E:0}})}return null}},{key:"componentDidUpdate",value:function(b){uS([Ss(b.children,Bi)],[Ss(this.props.children,Bi)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var b=Ss(this.props.children,Bi);if(b&&typeof b.props.shared=="boolean"){var j=b.props.shared?"axis":"item";return l.indexOf(j)>=0?j:i}return i}},{key:"getMouseInfo",value:function(b){if(!this.container)return null;var j=this.container,C=j.getBoundingClientRect(),E=b2e(C),S={chartX:Math.round(b.pageX-E.left),chartY:Math.round(b.pageY-E.top)},N=C.width/j.offsetWidth||1,I=this.inRange(S.chartX,S.chartY,N);if(!I)return null;var D=this.state,T=D.xAxisMap,A=D.yAxisMap,_=this.getTooltipEventType(),k=d6(this.state,this.props.data,this.props.layout,I);if(_!=="axis"&&T&&A){var L=pf(T).scale,$=pf(A).scale,M=L&&L.invert?L.invert(S.chartX):null,B=$&&$.invert?$.invert(S.chartY):null;return Ge(Ge({},S),{},{xValue:M,yValue:B},k)}return k?Ge(Ge({},S),k):null}},{key:"inRange",value:function(b,j){var C=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,E=this.props.layout,S=b/C,N=j/C;if(E==="horizontal"||E==="vertical"){var I=this.state.offset,D=S>=I.left&&S<=I.left+I.width&&N>=I.top&&N<=I.top+I.height;return D?{x:S,y:N}:null}var T=this.state,A=T.angleAxisMap,_=T.radiusAxisMap;if(A&&_){var k=pf(A);return BO({x:S,y:N},k)}return null}},{key:"parseEventsOfWrapper",value:function(){var b=this.props.children,j=this.getTooltipEventType(),C=Ss(b,Bi),E={};C&&j==="axis"&&(C.props.trigger==="click"?E={onClick:this.handleClick}:E={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var S=My(this.props,this.handleOuterEvent);return Ge(Ge({},S),E)}},{key:"addListener",value:function(){lN.on(cN,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){lN.removeListener(cN,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(b,j,C){for(var E=this.state.formattedGraphicalItems,S=0,N=E.length;S<N;S++){var I=E[S];if(I.item===b||I.props.key===b.key||j===xl(I.item.type)&&C===I.childIndex)return I}return null}},{key:"renderClipPath",value:function(){var b=this.clipPathId,j=this.state.offset,C=j.left,E=j.top,S=j.height,N=j.width;return pe.createElement("defs",null,pe.createElement("clipPath",{id:b},pe.createElement("rect",{x:C,y:E,height:S,width:N})))}},{key:"getXScales",value:function(){var b=this.state.xAxisMap;return b?Object.entries(b).reduce(function(j,C){var E=i6(C,2),S=E[0],N=E[1];return Ge(Ge({},j),{},Lt({},S,N.scale))},{}):null}},{key:"getYScales",value:function(){var b=this.state.yAxisMap;return b?Object.entries(b).reduce(function(j,C){var E=i6(C,2),S=E[0],N=E[1];return Ge(Ge({},j),{},Lt({},S,N.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(b){var j;return(j=this.state.xAxisMap)===null||j===void 0||(j=j[b])===null||j===void 0?void 0:j.scale}},{key:"getYScaleByAxisId",value:function(b){var j;return(j=this.state.yAxisMap)===null||j===void 0||(j=j[b])===null||j===void 0?void 0:j.scale}},{key:"getItemByXY",value:function(b){var j=this.state,C=j.formattedGraphicalItems,E=j.activeItem;if(C&&C.length)for(var S=0,N=C.length;S<N;S++){var I=C[S],D=I.props,T=I.item,A=T.type.defaultProps!==void 0?Ge(Ge({},T.type.defaultProps),T.props):T.props,_=xl(T.type);if(_==="Bar"){var k=(D.data||[]).find(function(B){return YEe(b,B)});if(k)return{graphicalItem:I,payload:k}}else if(_==="RadialBar"){var L=(D.data||[]).find(function(B){return BO(b,B)});if(L)return{graphicalItem:I,payload:L}}else if(gj(I,E)||yj(I,E)||Wv(I,E)){var $=J3e({graphicalItem:I,activeTooltipItem:E,itemData:A.data}),M=A.activeIndex===void 0?$:A.activeIndex;return{graphicalItem:Ge(Ge({},I),{},{childIndex:M}),payload:Wv(I,E)?A.data[$]:I.props.data[$]}}}return null}},{key:"render",value:function(){var b=this;if(!CD(this))return null;var j=this.props,C=j.children,E=j.className,S=j.width,N=j.height,I=j.style,D=j.compact,T=j.title,A=j.desc,_=o6(j,bDe),k=sr(_,!1);if(D)return pe.createElement($_,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},pe.createElement(mS,If({},k,{width:S,height:N,title:T,desc:A}),this.renderClipPath(),ED(C,this.renderMap)));if(this.props.accessibilityLayer){var L,$;k.tabIndex=(L=this.props.tabIndex)!==null&&L!==void 0?L:0,k.role=($=this.props.role)!==null&&$!==void 0?$:"application",k.onKeyDown=function(B){b.accessibilityManager.keyboardEvent(B)},k.onFocus=function(){b.accessibilityManager.focus()}}var M=this.parseEventsOfWrapper();return pe.createElement($_,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},pe.createElement("div",If({className:vr("recharts-wrapper",E),style:Ge({position:"relative",cursor:"default",width:S,height:N},I)},M,{ref:function(U){b.container=U}}),pe.createElement(mS,If({},k,{width:S,height:N,title:T,desc:A,style:RDe}),this.renderClipPath(),ED(C,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])}(w.Component);Lt(x,"displayName",n),Lt(x,"defaultProps",Ge({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},u)),Lt(x,"getDerivedStateFromProps",function(p,v){var y=p.dataKey,b=p.data,j=p.children,C=p.width,E=p.height,S=p.layout,N=p.stackOffset,I=p.margin,D=v.dataStartIndex,T=v.dataEndIndex;if(v.updateId===void 0){var A=u6(p);return Ge(Ge(Ge({},A),{},{updateId:0},h(Ge(Ge({props:p},A),{},{updateId:0}),v)),{},{prevDataKey:y,prevData:b,prevWidth:C,prevHeight:E,prevLayout:S,prevStackOffset:N,prevMargin:I,prevChildren:j})}if(y!==v.prevDataKey||b!==v.prevData||C!==v.prevWidth||E!==v.prevHeight||S!==v.prevLayout||N!==v.prevStackOffset||!zf(I,v.prevMargin)){var _=u6(p),k={chartX:v.chartX,chartY:v.chartY,isTooltipActive:v.isTooltipActive},L=Ge(Ge({},d6(v,b,S)),{},{updateId:v.updateId+1}),$=Ge(Ge(Ge({},_),k),L);return Ge(Ge(Ge({},$),h(Ge({props:p},$),v)),{},{prevDataKey:y,prevData:b,prevWidth:C,prevHeight:E,prevLayout:S,prevStackOffset:N,prevMargin:I,prevChildren:j})}if(!uS(j,v.prevChildren)){var M,B,U,W,q=Ss(j,ym),R=q&&(M=(B=q.props)===null||B===void 0?void 0:B.startIndex)!==null&&M!==void 0?M:D,V=q&&(U=(W=q.props)===null||W===void 0?void 0:W.endIndex)!==null&&U!==void 0?U:T,G=R!==D||V!==T,ee=!ir(b),re=ee&&!G?v.updateId:v.updateId+1;return Ge(Ge({updateId:re},h(Ge(Ge({props:p},v),{},{updateId:re,dataStartIndex:R,dataEndIndex:V}),v)),{},{prevChildren:j,dataStartIndex:R,dataEndIndex:V})}return null}),Lt(x,"renderActiveDot",function(p,v,y){var b;return w.isValidElement(p)?b=w.cloneElement(p,v):Zt(p)?b=p(v):b=pe.createElement($E,v),pe.createElement(fn,{className:"recharts-active-dot",key:y},b)});var g=w.forwardRef(function(v,y){return pe.createElement(x,If({},v,{ref:y}))});return g.displayName=x.displayName,g},HDe=lU({chartName:"BarChart",GraphicalChild:Au,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:Em},{axisType:"yAxis",AxisComp:Tm}],formatAxisMap:wz}),GDe=lU({chartName:"AreaChart",GraphicalChild:rd,axisComponents:[{axisType:"xAxis",AxisComp:Em},{axisType:"yAxis",AxisComp:Tm}],formatAxisMap:wz});function KDe(){const{toast:e}=Ct(),[t,n]=w.useState("30d"),[a,s]=w.useState(!1),[i,o]=w.useState("overview"),[l,c]=w.useState([{metric:"Total Leads",value:"2,651",change:"+4.75%",changePercent:"4.75%",category:"leads",trend:"up"},{metric:"Qualified Leads",value:"892",change:"+12.3%",changePercent:"12.3%",category:"leads",trend:"up"},{metric:"Conversion Rate",value:"24.5%",change:"-1.2%",changePercent:"1.2%",category:"leads",trend:"down"},{metric:"Avg Response Time",value:"3.2 hrs",change:"-0.8 hrs",changePercent:"20%",category:"leads",trend:"up"},{metric:"Total Revenue",value:"$1,245,890",change:"+8.3%",changePercent:"8.3%",category:"sales",trend:"up"},{metric:"Units Sold",value:"87",change:"+12.4%",changePercent:"12.4%",category:"sales",trend:"up"},{metric:"Avg Deal Size",value:"$14,320",change:"-2.1%",changePercent:"2.1%",category:"sales",trend:"down"},{metric:"Gross Profit Margin",value:"22.4%",change:"+1.5%",changePercent:"1.5%",category:"sales",trend:"up"}]),[d,f]=w.useState([{name:"Website",value:1245},{name:"Referral",value:654},{name:"Social Media",value:432},{name:"Trade Show",value:320}]),[u,m]=w.useState([{name:"Motorhomes",value:52e4},{name:"Travel Trailers",value:38e4},{name:"Fifth Wheels",value:245e3},{name:"Toy Haulers",value:1e5}]),h=async()=>{s(!0);try{await new Promise(p=>setTimeout(p,1500)),e({title:"Dashboard Refreshed",description:"Latest data has been loaded."})}catch{e({title:"Error",description:"Failed to refresh dashboard data.",variant:"destructive"})}finally{s(!1)}},x=()=>{e({title:"Export Started",description:"Your dashboard report is being prepared for download."}),setTimeout(()=>{e({title:"Export Complete",description:"Your dashboard report has been downloaded."})},2e3)},g=p=>{n(p),s(!0),setTimeout(()=>{s(!1)},1e3)};return r.jsx("div",{className:"space-y-6",children:r.jsxs(fe,{className:"shadow-sm",children:[r.jsx(we,{children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsxs(Ne,{className:"flex items-center",children:[r.jsx(Yn,{className:"h-5 w-5 mr-2 text-primary"}),"Dashboard Report"]}),r.jsx(Ue,{children:"Key performance indicators and business metrics"})]}),r.jsxs("div",{className:"flex space-x-2",children:[r.jsxs($e,{value:t,onValueChange:g,children:[r.jsxs(Fe,{className:"w-[150px]",children:[r.jsx(Mr,{className:"h-4 w-4 mr-2"}),r.jsx(Be,{})]}),r.jsxs(Me,{children:[r.jsx(K,{value:"7d",children:"Last 7 Days"}),r.jsx(K,{value:"30d",children:"Last 30 Days"}),r.jsx(K,{value:"90d",children:"Last 90 Days"}),r.jsx(K,{value:"ytd",children:"Year to Date"}),r.jsx(K,{value:"1y",children:"Last Year"})]})]}),r.jsxs(J,{variant:"outline",size:"sm",onClick:h,disabled:a,children:[a?r.jsx(f5,{className:"h-4 w-4 mr-2 animate-spin"}):r.jsx(f5,{className:"h-4 w-4 mr-2"}),"Refresh"]}),r.jsxs(J,{variant:"outline",size:"sm",onClick:x,children:[r.jsx(ms,{className:"h-4 w-4 mr-2"}),"Export"]})]})]})}),r.jsx(me,{children:r.jsxs(lr,{value:i,onValueChange:o,className:"space-y-4",children:[r.jsxs(or,{className:"grid w-full grid-cols-3",children:[r.jsx(Ke,{value:"overview",children:"Overview"}),r.jsx(Ke,{value:"leads",children:"Leads & Marketing"}),r.jsx(Ke,{value:"sales",children:"Sales & Revenue"})]}),r.jsxs(Je,{value:"overview",className:"space-y-4",children:[r.jsx("div",{className:"grid gap-4 md:grid-cols-4",children:l.filter(p=>p.category==="leads"||p.category==="sales").slice(0,4).map((p,v)=>r.jsx(fe,{className:"shadow-sm",children:r.jsxs(me,{className:"p-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:p.metric}),p.trend==="up"?r.jsx(Ot,{className:"h-4 w-4 text-green-500"}):r.jsx(Mf,{className:"h-4 w-4 text-red-500"})]}),r.jsxs("div",{className:"mt-2",children:[r.jsx("p",{className:"text-2xl font-bold",children:p.value}),r.jsxs("p",{className:He("text-xs",p.trend==="up"?"text-green-600":"text-red-600"),children:[p.change," from last period"]})]})]})},v))}),r.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[r.jsxs(fe,{className:"shadow-sm",children:[r.jsxs(we,{children:[r.jsx(Ne,{children:"Leads by Source"}),r.jsx(Ue,{children:"Distribution of leads across different sources"})]}),r.jsx(me,{className:"h-64",children:r.jsx(Ek,{width:"100%",height:"100%",children:r.jsxs(HDe,{data:d,children:[r.jsx(Em,{dataKey:"name",tick:{fontSize:10}}),r.jsx(Tm,{tickFormatter:p=>p.toLocaleString(),tick:{fontSize:10}}),r.jsx(Bi,{formatter:p=>p.toLocaleString()}),r.jsx(Au,{dataKey:"value",fill:"#8884d8"})]})})})]}),r.jsxs(fe,{className:"shadow-sm",children:[r.jsxs(we,{children:[r.jsx(Ne,{children:"Sales by Product Category"}),r.jsx(Ue,{children:"Revenue generated by different product categories"})]}),r.jsx(me,{className:"h-64",children:r.jsx(Ek,{width:"100%",height:"100%",children:r.jsxs(GDe,{data:u,children:[r.jsx(Em,{dataKey:"name",tick:{fontSize:10}}),r.jsx(Tm,{tickFormatter:p=>De(p),tick:{fontSize:10}}),r.jsx(Bi,{formatter:p=>De(p)}),r.jsx(rd,{type:"monotone",dataKey:"value",stroke:"#82ca9d",fill:"#82ca9d"})]})})})]})]})]}),r.jsxs(Je,{value:"leads",className:"space-y-4",children:[r.jsx("div",{className:"grid gap-4 md:grid-cols-4",children:l.filter(p=>p.category==="leads").map((p,v)=>r.jsx(fe,{className:"shadow-sm",children:r.jsxs(me,{className:"p-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:p.metric}),p.trend==="up"?r.jsx(Ot,{className:"h-4 w-4 text-green-500"}):r.jsx(Mf,{className:"h-4 w-4 text-red-500"})]}),r.jsxs("div",{className:"mt-2",children:[r.jsx("p",{className:"text-2xl font-bold",children:p.value}),r.jsxs("p",{className:He("text-xs",p.trend==="up"?"text-green-600":"text-red-600"),children:[p.change," from last period"]})]})]})},v))}),r.jsxs(fe,{className:"shadow-sm",children:[r.jsxs(we,{children:[r.jsx(Ne,{children:"Lead Conversion Funnel"}),r.jsx(Ue,{children:"Visual representation of lead progression"})]}),r.jsx(me,{children:r.jsx("div",{className:"h-64 flex items-center justify-center bg-muted/20 rounded-md",children:r.jsx("p",{className:"text-muted-foreground",children:"Funnel Chart Placeholder"})})})]})]}),r.jsxs(Je,{value:"sales",className:"space-y-4",children:[r.jsx("div",{className:"grid gap-4 md:grid-cols-4",children:l.filter(p=>p.category==="sales").map((p,v)=>r.jsx(fe,{className:"shadow-sm",children:r.jsxs(me,{className:"p-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:p.metric}),p.trend==="up"?r.jsx(Ot,{className:"h-4 w-4 text-green-500"}):r.jsx(Mf,{className:"h-4 w-4 text-red-500"})]}),r.jsxs("div",{className:"mt-2",children:[r.jsx("p",{className:"text-2xl font-bold",children:p.value}),r.jsxs("p",{className:He("text-xs",p.trend==="up"?"text-green-600":"text-red-600"),children:[p.change," from last period"]})]})]})},v))}),r.jsxs(fe,{className:"shadow-sm",children:[r.jsxs(we,{children:[r.jsx(Ne,{children:"Revenue Trend"}),r.jsx(Ue,{children:"Monthly revenue over the selected timeframe"})]}),r.jsx(me,{children:r.jsx("div",{className:"h-64 flex items-center justify-center bg-muted/20 rounded-md",children:r.jsx("p",{className:"text-muted-foreground",children:"Revenue Trend Chart Placeholder"})})})]})]})]})})]})})}const YDe=[{id:"1",name:"Monthly Sales Report",type:Rr.SALES,module:"sales",filters:[],columns:[],data:[],generatedAt:new Date("2024-01-20"),generatedBy:"admin"},{id:"2",name:"Inventory Valuation",type:Rr.INVENTORY,module:"inventory",filters:[],columns:[],data:[],generatedAt:new Date("2024-01-19"),generatedBy:"manager"},{id:"3",name:"Service Revenue Analysis",type:Rr.SERVICE,module:"service",filters:[],columns:[],data:[],generatedAt:new Date("2024-01-18"),generatedBy:"admin"}],m6=[{id:"sales-summary",name:"Sales Summary",description:"Overview of sales performance and metrics",type:Rr.SALES,icon:Mt,color:"from-green-50 to-green-100/50"},{id:"inventory-report",name:"Inventory Report",description:"Current inventory levels and valuation",type:Rr.INVENTORY,icon:Ra,color:"from-blue-50 to-blue-100/50"},{id:"customer-analysis",name:"Customer Analysis",description:"Customer demographics and behavior insights",type:Rr.CUSTOM,icon:$n,color:"from-purple-50 to-purple-100/50"},{id:"financial-overview",name:"Financial Overview",description:"Revenue, expenses, and profitability analysis",type:Rr.FINANCIAL,icon:Ot,color:"from-orange-50 to-orange-100/50"}];function h6(){const[e,t]=w.useState(YDe),{reportData:n,reportColumns:a,loading:s,currentReportConfig:i,generateReport:o,exportToCSV:l}=rue(),[c,d]=w.useState("dashboard"),[f,u]=w.useState(null),m=w.useRef(null),[h,x]=w.useState(!1),g=j=>{switch(j){case Rr.SALES:return"bg-green-50 text-green-700 border-green-200";case Rr.INVENTORY:return"bg-blue-50 text-blue-700 border-blue-200";case Rr.SERVICE:return"bg-purple-50 text-purple-700 border-purple-200";case Rr.FINANCIAL:return"bg-orange-50 text-orange-700 border-orange-200";case Rr.CUSTOM:return"bg-gray-50 text-gray-700 border-gray-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},p=j=>{o(j)},v=()=>{l()},y=j=>{const C={type:j.type,name:j.name,dateRange:{startDate:new Date(new Date().setDate(new Date().getDate()-30)).toISOString().split("T")[0],endDate:new Date().toISOString().split("T")[0]},filters:{}};console.log("handleGenerateTemplateReport called with config:",C),u(C),d("generator"),o(C)},b=()=>{d("generator"),u(null),x(!0),console.log("Create Report button clicked!")};return w.useEffect(()=>{h&&m.current&&(m.current.scrollIntoView({behavior:"smooth",block:"start"}),x(!1))},[h,m]),r.jsxs("div",{className:"space-y-8",children:[r.jsx("div",{className:"ri-page-header",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"ri-page-title",children:"Reporting Suite"}),r.jsx("p",{className:"ri-page-description",children:"Generate insights and analytics for your dealership"})]}),r.jsxs(J,{className:"shadow-sm",onClick:b,children:[r.jsx(Nt,{className:"h-4 w-4 mr-2"}),"Create Report"]})]})}),r.jsxs("div",{className:"ri-stats-grid",children:[r.jsxs(fe,{className:"shadow-sm border-0 bg-gradient-to-br from-blue-50 to-blue-100/50",children:[r.jsxs(we,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(Ne,{className:"text-sm font-medium text-blue-900",children:"Total Reports"}),r.jsx(Yn,{className:"h-4 w-4 text-blue-600"})]}),r.jsxs(me,{children:[r.jsx("div",{className:"text-2xl font-bold text-blue-900",children:e.length}),r.jsxs("p",{className:"text-xs text-blue-600 flex items-center mt-1",children:[r.jsx(Ot,{className:"h-3 w-3 mr-1"}),"All reports"]})]})]}),r.jsxs(fe,{className:"shadow-sm border-0 bg-gradient-to-br from-green-50 to-green-100/50",children:[r.jsxs(we,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(Ne,{className:"text-sm font-medium text-green-900",children:"This Month"}),r.jsx(Yn,{className:"h-4 w-4 text-green-600"})]}),r.jsxs(me,{children:[r.jsx("div",{className:"text-2xl font-bold text-green-900",children:e.filter(j=>j.generatedAt.getMonth()===new Date().getMonth()).length}),r.jsxs("p",{className:"text-xs text-green-600 flex items-center mt-1",children:[r.jsx(Ot,{className:"h-3 w-3 mr-1"}),"Generated this month"]})]})]}),r.jsxs(fe,{className:"shadow-sm border-0 bg-gradient-to-br from-yellow-50 to-yellow-100/50",children:[r.jsxs(we,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(Ne,{className:"text-sm font-medium text-yellow-900",children:"Scheduled"}),r.jsx(Yn,{className:"h-4 w-4 text-yellow-600"})]}),r.jsxs(me,{children:[r.jsx("div",{className:"text-2xl font-bold text-yellow-900",children:"5"}),r.jsxs("p",{className:"text-xs text-yellow-600 flex items-center mt-1",children:[r.jsx(Yn,{className:"h-3 w-3 mr-1"}),"Automated reports"]})]})]}),r.jsxs(fe,{className:"shadow-sm border-0 bg-gradient-to-br from-orange-50 to-orange-100/50",children:[r.jsxs(we,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(Ne,{className:"text-sm font-medium text-orange-900",children:"Templates"}),r.jsx(Yn,{className:"h-4 w-4 text-orange-600"})]}),r.jsxs(me,{children:[r.jsx("div",{className:"text-2xl font-bold text-orange-900",children:m6.length}),r.jsxs("p",{className:"text-xs text-orange-600 flex items-center mt-1",children:[r.jsx(Yn,{className:"h-3 w-3 mr-1"}),"Available templates"]})]})]})]}),r.jsxs(lr,{value:c,onValueChange:d,className:"space-y-6",children:[r.jsxs(or,{className:"grid w-full grid-cols-3",children:[r.jsx(Ke,{value:"dashboard",children:"Dashboard"}),r.jsx(Ke,{value:"generator",children:"Report Generator"}),r.jsx(Ke,{value:"saved",children:"Saved Reports"})]}),r.jsx(Je,{value:"dashboard",children:r.jsx(KDe,{})}),r.jsxs(Je,{value:"generator",children:[r.jsxs(fe,{className:"shadow-sm",children:[r.jsxs(we,{children:[r.jsx(Ne,{className:"text-xl",children:"Report Templates"}),r.jsx(Ue,{children:"Quick start templates for common reports"})]}),r.jsx(me,{children:r.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:m6.map(j=>r.jsx(fe,{className:He("overflow-hidden shadow-sm hover:shadow-md transition-shadow cursor-pointer border-0 bg-gradient-to-br",j.color),children:r.jsxs(me,{className:"p-6",children:[r.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[r.jsx(j.icon,{className:"h-8 w-8 text-primary"}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold text-foreground",children:j.name}),r.jsx(ze,{className:He("ri-badge-status mt-1",g(j.type)),children:j.type.toUpperCase()})]})]}),r.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:j.description}),r.jsx(J,{size:"sm",className:"w-full shadow-sm",onClick:()=>y(j),children:"Generate Report"})]})},j.id))})})]}),r.jsxs("div",{ref:m,children:[" ",r.jsx(Jde,{onGenerate:p,onExportCSV:v,isGenerating:s,hasData:n.length>0,initialReportConfig:f})]}),n.length>0&&i&&r.jsx(tue,{reportType:i.type,reportName:i.name,data:n,columns:a,onExportCSV:v})]}),r.jsx(Je,{value:"saved",children:e.length>0&&r.jsxs(fe,{className:"shadow-sm",children:[r.jsxs(we,{children:[r.jsx(Ne,{className:"text-xl",children:"Saved Reports"}),r.jsx(Ue,{children:"Previously generated reports"})]}),r.jsx(me,{children:r.jsx("div",{className:"text-center py-8 text-muted-foreground",children:r.jsx("p",{children:"Select a report template above to generate a new report"})})})]})})]})]})}function XDe(){return r.jsxs(Ka,{children:[r.jsx(Vt,{path:"/",element:r.jsx(h6,{})}),r.jsx(Vt,{path:"/*",element:r.jsx(h6,{})})]})}function QDe(){return r.jsx(pK,{defaultTheme:"light",storageKey:"renter-insight-theme",children:r.jsx(uK,{children:r.jsx(pH,{children:r.jsx(fK,{children:r.jsxs("div",{className:"min-h-screen bg-background",children:[r.jsxs(Ka,{children:[r.jsx(Vt,{path:"/login",element:r.jsx(Lee,{})}),r.jsx(Vt,{path:"/*",element:r.jsx(Ree,{children:r.jsx(hX,{children:r.jsxs(Ka,{children:[r.jsx(Vt,{path:"/",element:r.jsx(_ee,{})}),r.jsx(Vt,{path:"/crm/*",element:r.jsx(Gte,{})}),r.jsx(Vt,{path:"/inventory/*",element:r.jsx(Qre,{})}),r.jsx(Vt,{path:"/deals/*",element:r.jsx(Yle,{})}),r.jsx(Vt,{path:"/finance/*",element:r.jsx(ane,{})}),r.jsx(Vt,{path:"/quotes/*",element:r.jsx(ene,{})}),r.jsx(Vt,{path:"/agreements/*",element:r.jsx(Qle,{})}),r.jsx(Vt,{path:"/service/*",element:r.jsx(sde,{})}),r.jsx(Vt,{path:"/pdi/*",element:r.jsx(jde,{})}),r.jsx(Vt,{path:"/delivery/*",element:r.jsx(mde,{})}),r.jsx(Vt,{path:"/commissions/*",element:r.jsx(Tde,{})}),r.jsx(Vt,{path:"/portal/*",element:r.jsx(_de,{})}),r.jsx(Vt,{path:"/invoices/*",element:r.jsx($de,{})}),r.jsx(Vt,{path:"/settings/*",element:r.jsx(Hde,{})}),r.jsx(Vt,{path:"/admin/*",element:r.jsx(Qde,{})}),r.jsx(Vt,{path:"/admin/settings/*",element:r.jsx(wte,{})}),r.jsx(Vt,{path:"/reports/*",element:r.jsx(XDe,{})})]})})})})]}),r.jsx(dK,{})]})})})})})}uN.createRoot(document.getElementById("root")).render(r.jsx(QDe,{}));export{lne as _,fc as c,Er as g};
