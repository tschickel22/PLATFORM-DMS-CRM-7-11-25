var Hle=Object.defineProperty;var Wle=(t,e,n)=>e in t?Hle(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var ut=(t,e,n)=>(Wle(t,typeof e!="symbol"?e+"":e,n),n),Nk=(t,e,n)=>{if(!e.has(t))throw TypeError("Cannot "+n)};var S=(t,e,n)=>(Nk(t,e,"read from private field"),n?n.call(t):e.get(t)),G=(t,e,n)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,n)},Z=(t,e,n,r)=>(Nk(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n);var na=(t,e,n,r)=>({set _(i){Z(t,e,i,n)},get _(){return S(t,e,r)}}),se=(t,e,n)=>(Nk(t,e,"access private method"),n);function Gle(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const a=Object.getOwnPropertyDescriptor(r,i);a&&Object.defineProperty(t,i,a.get?a:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}})();var $f=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function $n(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Kle(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}),n}var mK={exports:{}},PI={},pK={exports:{}},bn={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nA=Symbol.for("react.element"),Yle=Symbol.for("react.portal"),Xle=Symbol.for("react.fragment"),Zle=Symbol.for("react.strict_mode"),Qle=Symbol.for("react.profiler"),Jle=Symbol.for("react.provider"),ece=Symbol.for("react.context"),tce=Symbol.for("react.forward_ref"),nce=Symbol.for("react.suspense"),rce=Symbol.for("react.memo"),sce=Symbol.for("react.lazy"),AB=Symbol.iterator;function ice(t){return t===null||typeof t!="object"?null:(t=AB&&t[AB]||t["@@iterator"],typeof t=="function"?t:null)}var gK={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},vK=Object.assign,xK={};function Fb(t,e,n){this.props=t,this.context=e,this.refs=xK,this.updater=n||gK}Fb.prototype.isReactComponent={};Fb.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Fb.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function yK(){}yK.prototype=Fb.prototype;function m6(t,e,n){this.props=t,this.context=e,this.refs=xK,this.updater=n||gK}var p6=m6.prototype=new yK;p6.constructor=m6;vK(p6,Fb.prototype);p6.isPureReactComponent=!0;var CB=Array.isArray,bK=Object.prototype.hasOwnProperty,g6={current:null},wK={key:!0,ref:!0,__self:!0,__source:!0};function jK(t,e,n){var r,i={},a=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(a=""+e.key),e)bK.call(e,r)&&!wK.hasOwnProperty(r)&&(i[r]=e[r]);var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){for(var c=Array(l),d=0;d<l;d++)c[d]=arguments[d+2];i.children=c}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)i[r]===void 0&&(i[r]=l[r]);return{$$typeof:nA,type:t,key:a,ref:o,props:i,_owner:g6.current}}function ace(t,e){return{$$typeof:nA,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function v6(t){return typeof t=="object"&&t!==null&&t.$$typeof===nA}function oce(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var EB=/\/+/g;function Sk(t,e){return typeof t=="object"&&t!==null&&t.key!=null?oce(""+t.key):e.toString(36)}function MC(t,e,n,r,i){var a=typeof t;(a==="undefined"||a==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(a){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case nA:case Yle:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+Sk(o,0):r,CB(i)?(n="",t!=null&&(n=t.replace(EB,"$&/")+"/"),MC(i,e,n,"",function(d){return d})):i!=null&&(v6(i)&&(i=ace(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(EB,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",CB(t))for(var l=0;l<t.length;l++){a=t[l];var c=r+Sk(a,l);o+=MC(a,e,n,c,i)}else if(c=ice(t),typeof c=="function")for(t=c.call(t),l=0;!(a=t.next()).done;)a=a.value,c=r+Sk(a,l++),o+=MC(a,e,n,c,i);else if(a==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function D5(t,e,n){if(t==null)return t;var r=[],i=0;return MC(t,r,"","",function(a){return e.call(n,a,i++)}),r}function lce(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var va={current:null},FC={transition:null},cce={ReactCurrentDispatcher:va,ReactCurrentBatchConfig:FC,ReactCurrentOwner:g6};function NK(){throw Error("act(...) is not supported in production builds of React.")}bn.Children={map:D5,forEach:function(t,e,n){D5(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return D5(t,function(){e++}),e},toArray:function(t){return D5(t,function(e){return e})||[]},only:function(t){if(!v6(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};bn.Component=Fb;bn.Fragment=Xle;bn.Profiler=Qle;bn.PureComponent=m6;bn.StrictMode=Zle;bn.Suspense=nce;bn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=cce;bn.act=NK;bn.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=vK({},t.props),i=t.key,a=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(a=e.ref,o=g6.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in e)bK.call(e,c)&&!wK.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&l!==void 0?l[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){l=Array(c);for(var d=0;d<c;d++)l[d]=arguments[d+2];r.children=l}return{$$typeof:nA,type:t.type,key:i,ref:a,props:r,_owner:o}};bn.createContext=function(t){return t={$$typeof:ece,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Jle,_context:t},t.Consumer=t};bn.createElement=jK;bn.createFactory=function(t){var e=jK.bind(null,t);return e.type=t,e};bn.createRef=function(){return{current:null}};bn.forwardRef=function(t){return{$$typeof:tce,render:t}};bn.isValidElement=v6;bn.lazy=function(t){return{$$typeof:sce,_payload:{_status:-1,_result:t},_init:lce}};bn.memo=function(t,e){return{$$typeof:rce,type:t,compare:e===void 0?null:e}};bn.startTransition=function(t){var e=FC.transition;FC.transition={};try{t()}finally{FC.transition=e}};bn.unstable_act=NK;bn.useCallback=function(t,e){return va.current.useCallback(t,e)};bn.useContext=function(t){return va.current.useContext(t)};bn.useDebugValue=function(){};bn.useDeferredValue=function(t){return va.current.useDeferredValue(t)};bn.useEffect=function(t,e){return va.current.useEffect(t,e)};bn.useId=function(){return va.current.useId()};bn.useImperativeHandle=function(t,e,n){return va.current.useImperativeHandle(t,e,n)};bn.useInsertionEffect=function(t,e){return va.current.useInsertionEffect(t,e)};bn.useLayoutEffect=function(t,e){return va.current.useLayoutEffect(t,e)};bn.useMemo=function(t,e){return va.current.useMemo(t,e)};bn.useReducer=function(t,e,n){return va.current.useReducer(t,e,n)};bn.useRef=function(t){return va.current.useRef(t)};bn.useState=function(t){return va.current.useState(t)};bn.useSyncExternalStore=function(t,e,n){return va.current.useSyncExternalStore(t,e,n)};bn.useTransition=function(){return va.current.useTransition()};bn.version="18.3.1";pK.exports=bn;var A=pK.exports;const ge=$n(A),$b=Gle({__proto__:null,default:ge},[A]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dce=A,uce=Symbol.for("react.element"),hce=Symbol.for("react.fragment"),fce=Object.prototype.hasOwnProperty,mce=dce.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,pce={key:!0,ref:!0,__self:!0,__source:!0};function SK(t,e,n){var r,i={},a=null,o=null;n!==void 0&&(a=""+n),e.key!==void 0&&(a=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)fce.call(e,r)&&!pce.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:uce,type:t,key:a,ref:o,props:i,_owner:mce.current}}PI.Fragment=hce;PI.jsx=SK;PI.jsxs=SK;mK.exports=PI;var s=mK.exports,DO={},AK={exports:{}},$o={},CK={exports:{}},EK={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(z,H){var W=z.length;z.push(H);e:for(;0<W;){var $=W-1>>>1,L=z[$];if(0<i(L,H))z[$]=H,z[W]=L,W=$;else break e}}function n(z){return z.length===0?null:z[0]}function r(z){if(z.length===0)return null;var H=z[0],W=z.pop();if(W!==H){z[0]=W;e:for(var $=0,L=z.length,q=L>>>1;$<q;){var Y=2*($+1)-1,J=z[Y],ne=Y+1,re=z[ne];if(0>i(J,W))ne<L&&0>i(re,J)?(z[$]=re,z[ne]=W,$=ne):(z[$]=J,z[Y]=W,$=Y);else if(ne<L&&0>i(re,W))z[$]=re,z[ne]=W,$=ne;else break e}}return H}function i(z,H){var W=z.sortIndex-H.sortIndex;return W!==0?W:z.id-H.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],d=[],u=1,h=null,f=3,m=!1,v=!1,p=!1,g=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(z){for(var H=n(d);H!==null;){if(H.callback===null)r(d);else if(H.startTime<=z)r(d),H.sortIndex=H.expirationTime,e(c,H);else break;H=n(d)}}function w(z){if(p=!1,b(z),!v)if(n(c)!==null)v=!0,U(N);else{var H=n(d);H!==null&&F(w,H.startTime-z)}}function N(z,H){v=!1,p&&(p=!1,x(j),j=-1),m=!0;var W=f;try{for(b(H),h=n(c);h!==null&&(!(h.expirationTime>H)||z&&!D());){var $=h.callback;if(typeof $=="function"){h.callback=null,f=h.priorityLevel;var L=$(h.expirationTime<=H);H=t.unstable_now(),typeof L=="function"?h.callback=L:h===n(c)&&r(c),b(H)}else r(c);h=n(c)}if(h!==null)var q=!0;else{var Y=n(d);Y!==null&&F(w,Y.startTime-H),q=!1}return q}finally{h=null,f=W,m=!1}}var E=!1,C=null,j=-1,I=5,k=-1;function D(){return!(t.unstable_now()-k<I)}function P(){if(C!==null){var z=t.unstable_now();k=z;var H=!0;try{H=C(!0,z)}finally{H?R():(E=!1,C=null)}}else E=!1}var R;if(typeof y=="function")R=function(){y(P)};else if(typeof MessageChannel<"u"){var _=new MessageChannel,M=_.port2;_.port1.onmessage=P,R=function(){M.postMessage(null)}}else R=function(){g(P,0)};function U(z){C=z,E||(E=!0,R())}function F(z,H){j=g(function(){z(t.unstable_now())},H)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(z){z.callback=null},t.unstable_continueExecution=function(){v||m||(v=!0,U(N))},t.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<z?Math.floor(1e3/z):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(z){switch(f){case 1:case 2:case 3:var H=3;break;default:H=f}var W=f;f=H;try{return z()}finally{f=W}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(z,H){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var W=f;f=z;try{return H()}finally{f=W}},t.unstable_scheduleCallback=function(z,H,W){var $=t.unstable_now();switch(typeof W=="object"&&W!==null?(W=W.delay,W=typeof W=="number"&&0<W?$+W:$):W=$,z){case 1:var L=-1;break;case 2:L=250;break;case 5:L=1073741823;break;case 4:L=1e4;break;default:L=5e3}return L=W+L,z={id:u++,callback:H,priorityLevel:z,startTime:W,expirationTime:L,sortIndex:-1},W>$?(z.sortIndex=W,e(d,z),n(c)===null&&z===n(d)&&(p?(x(j),j=-1):p=!0,F(w,W-$))):(z.sortIndex=L,e(c,z),v||m||(v=!0,U(N))),z},t.unstable_shouldYield=D,t.unstable_wrapCallback=function(z){var H=f;return function(){var W=f;f=H;try{return z.apply(this,arguments)}finally{f=W}}}})(EK);CK.exports=EK;var gce=CK.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vce=A,Fo=gce;function dt(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var PK=new Set,xj={};function bv(t,e){Yy(t,e),Yy(t+"Capture",e)}function Yy(t,e){for(xj[t]=e,t=0;t<e.length;t++)PK.add(e[t])}var Xu=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),kO=Object.prototype.hasOwnProperty,xce=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,PB={},TB={};function yce(t){return kO.call(TB,t)?!0:kO.call(PB,t)?!1:xce.test(t)?TB[t]=!0:(PB[t]=!0,!1)}function bce(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function wce(t,e,n,r){if(e===null||typeof e>"u"||bce(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function xa(t,e,n,r,i,a,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=a,this.removeEmptyString=o}var Di={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Di[t]=new xa(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Di[e]=new xa(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Di[t]=new xa(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Di[t]=new xa(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Di[t]=new xa(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Di[t]=new xa(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Di[t]=new xa(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Di[t]=new xa(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Di[t]=new xa(t,5,!1,t.toLowerCase(),null,!1,!1)});var x6=/[\-:]([a-z])/g;function y6(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(x6,y6);Di[e]=new xa(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(x6,y6);Di[e]=new xa(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(x6,y6);Di[e]=new xa(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Di[t]=new xa(t,1,!1,t.toLowerCase(),null,!1,!1)});Di.xlinkHref=new xa("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Di[t]=new xa(t,1,!1,t.toLowerCase(),null,!0,!0)});function b6(t,e,n,r){var i=Di.hasOwnProperty(e)?Di[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(wce(e,n,i,r)&&(n=null),r||i===null?yce(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var lh=vce.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,k5=Symbol.for("react.element"),Rx=Symbol.for("react.portal"),Mx=Symbol.for("react.fragment"),w6=Symbol.for("react.strict_mode"),_O=Symbol.for("react.profiler"),TK=Symbol.for("react.provider"),IK=Symbol.for("react.context"),j6=Symbol.for("react.forward_ref"),OO=Symbol.for("react.suspense"),LO=Symbol.for("react.suspense_list"),N6=Symbol.for("react.memo"),$h=Symbol.for("react.lazy"),DK=Symbol.for("react.offscreen"),IB=Symbol.iterator;function U1(t){return t===null||typeof t!="object"?null:(t=IB&&t[IB]||t["@@iterator"],typeof t=="function"?t:null)}var Hr=Object.assign,Ak;function xw(t){if(Ak===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Ak=e&&e[1]||""}return`
`+Ak+t}var Ck=!1;function Ek(t,e){if(!t||Ck)return"";Ck=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var r=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){r=d}t.call(e.prototype)}else{try{throw Error()}catch(d){r=d}t()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var i=d.stack.split(`
`),a=r.stack.split(`
`),o=i.length-1,l=a.length-1;1<=o&&0<=l&&i[o]!==a[l];)l--;for(;1<=o&&0<=l;o--,l--)if(i[o]!==a[l]){if(o!==1||l!==1)do if(o--,l--,0>l||i[o]!==a[l]){var c=`
`+i[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=l);break}}}finally{Ck=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?xw(t):""}function jce(t){switch(t.tag){case 5:return xw(t.type);case 16:return xw("Lazy");case 13:return xw("Suspense");case 19:return xw("SuspenseList");case 0:case 2:case 15:return t=Ek(t.type,!1),t;case 11:return t=Ek(t.type.render,!1),t;case 1:return t=Ek(t.type,!0),t;default:return""}}function RO(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Mx:return"Fragment";case Rx:return"Portal";case _O:return"Profiler";case w6:return"StrictMode";case OO:return"Suspense";case LO:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case IK:return(t.displayName||"Context")+".Consumer";case TK:return(t._context.displayName||"Context")+".Provider";case j6:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case N6:return e=t.displayName||null,e!==null?e:RO(t.type)||"Memo";case $h:e=t._payload,t=t._init;try{return RO(t(e))}catch{}}return null}function Nce(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return RO(e);case 8:return e===w6?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function dm(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function kK(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Sce(t){var e=kK(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,a=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,a.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function _5(t){t._valueTracker||(t._valueTracker=Sce(t))}function _K(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=kK(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function LE(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function MO(t,e){var n=e.checked;return Hr({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function DB(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=dm(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function OK(t,e){e=e.checked,e!=null&&b6(t,"checked",e,!1)}function FO(t,e){OK(t,e);var n=dm(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?$O(t,e.type,n):e.hasOwnProperty("defaultValue")&&$O(t,e.type,dm(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function kB(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function $O(t,e,n){(e!=="number"||LE(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var yw=Array.isArray;function s0(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+dm(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function BO(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(dt(91));return Hr({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function _B(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(dt(92));if(yw(n)){if(1<n.length)throw Error(dt(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:dm(n)}}function LK(t,e){var n=dm(e.value),r=dm(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function OB(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function RK(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function zO(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?RK(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var O5,MK=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(O5=O5||document.createElement("div"),O5.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=O5.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function yj(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Uw={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Ace=["Webkit","ms","Moz","O"];Object.keys(Uw).forEach(function(t){Ace.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Uw[e]=Uw[t]})});function FK(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Uw.hasOwnProperty(t)&&Uw[t]?(""+e).trim():e+"px"}function $K(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=FK(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var Cce=Hr({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function UO(t,e){if(e){if(Cce[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(dt(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(dt(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(dt(61))}if(e.style!=null&&typeof e.style!="object")throw Error(dt(62))}}function VO(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var qO=null;function S6(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var HO=null,i0=null,a0=null;function LB(t){if(t=iA(t)){if(typeof HO!="function")throw Error(dt(280));var e=t.stateNode;e&&(e=_I(e),HO(t.stateNode,t.type,e))}}function BK(t){i0?a0?a0.push(t):a0=[t]:i0=t}function zK(){if(i0){var t=i0,e=a0;if(a0=i0=null,LB(t),e)for(t=0;t<e.length;t++)LB(e[t])}}function UK(t,e){return t(e)}function VK(){}var Pk=!1;function qK(t,e,n){if(Pk)return t(e,n);Pk=!0;try{return UK(t,e,n)}finally{Pk=!1,(i0!==null||a0!==null)&&(VK(),zK())}}function bj(t,e){var n=t.stateNode;if(n===null)return null;var r=_I(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(dt(231,e,typeof n));return n}var WO=!1;if(Xu)try{var V1={};Object.defineProperty(V1,"passive",{get:function(){WO=!0}}),window.addEventListener("test",V1,V1),window.removeEventListener("test",V1,V1)}catch{WO=!1}function Ece(t,e,n,r,i,a,o,l,c){var d=Array.prototype.slice.call(arguments,3);try{e.apply(n,d)}catch(u){this.onError(u)}}var Vw=!1,RE=null,ME=!1,GO=null,Pce={onError:function(t){Vw=!0,RE=t}};function Tce(t,e,n,r,i,a,o,l,c){Vw=!1,RE=null,Ece.apply(Pce,arguments)}function Ice(t,e,n,r,i,a,o,l,c){if(Tce.apply(this,arguments),Vw){if(Vw){var d=RE;Vw=!1,RE=null}else throw Error(dt(198));ME||(ME=!0,GO=d)}}function wv(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function HK(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function RB(t){if(wv(t)!==t)throw Error(dt(188))}function Dce(t){var e=t.alternate;if(!e){if(e=wv(t),e===null)throw Error(dt(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var a=i.alternate;if(a===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return RB(i),t;if(a===r)return RB(i),e;a=a.sibling}throw Error(dt(188))}if(n.return!==r.return)n=i,r=a;else{for(var o=!1,l=i.child;l;){if(l===n){o=!0,n=i,r=a;break}if(l===r){o=!0,r=i,n=a;break}l=l.sibling}if(!o){for(l=a.child;l;){if(l===n){o=!0,n=a,r=i;break}if(l===r){o=!0,r=a,n=i;break}l=l.sibling}if(!o)throw Error(dt(189))}}if(n.alternate!==r)throw Error(dt(190))}if(n.tag!==3)throw Error(dt(188));return n.stateNode.current===n?t:e}function WK(t){return t=Dce(t),t!==null?GK(t):null}function GK(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=GK(t);if(e!==null)return e;t=t.sibling}return null}var KK=Fo.unstable_scheduleCallback,MB=Fo.unstable_cancelCallback,kce=Fo.unstable_shouldYield,_ce=Fo.unstable_requestPaint,fs=Fo.unstable_now,Oce=Fo.unstable_getCurrentPriorityLevel,A6=Fo.unstable_ImmediatePriority,YK=Fo.unstable_UserBlockingPriority,FE=Fo.unstable_NormalPriority,Lce=Fo.unstable_LowPriority,XK=Fo.unstable_IdlePriority,TI=null,gd=null;function Rce(t){if(gd&&typeof gd.onCommitFiberRoot=="function")try{gd.onCommitFiberRoot(TI,t,void 0,(t.current.flags&128)===128)}catch{}}var hc=Math.clz32?Math.clz32:$ce,Mce=Math.log,Fce=Math.LN2;function $ce(t){return t>>>=0,t===0?32:31-(Mce(t)/Fce|0)|0}var L5=64,R5=4194304;function bw(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function $E(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,a=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~i;l!==0?r=bw(l):(a&=o,a!==0&&(r=bw(a)))}else o=n&~i,o!==0?r=bw(o):a!==0&&(r=bw(a));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,a=e&-e,i>=a||i===16&&(a&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-hc(e),i=1<<n,r|=t[n],e&=~i;return r}function Bce(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function zce(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,a=t.pendingLanes;0<a;){var o=31-hc(a),l=1<<o,c=i[o];c===-1?(!(l&n)||l&r)&&(i[o]=Bce(l,e)):c<=e&&(t.expiredLanes|=l),a&=~l}}function KO(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function ZK(){var t=L5;return L5<<=1,!(L5&4194240)&&(L5=64),t}function Tk(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function rA(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-hc(e),t[e]=n}function Uce(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-hc(n),a=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~a}}function C6(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-hc(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var Qn=0;function QK(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var JK,E6,eY,tY,nY,YO=!1,M5=[],Wf=null,Gf=null,Kf=null,wj=new Map,jj=new Map,qh=[],Vce="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function FB(t,e){switch(t){case"focusin":case"focusout":Wf=null;break;case"dragenter":case"dragleave":Gf=null;break;case"mouseover":case"mouseout":Kf=null;break;case"pointerover":case"pointerout":wj.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":jj.delete(e.pointerId)}}function q1(t,e,n,r,i,a){return t===null||t.nativeEvent!==a?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},e!==null&&(e=iA(e),e!==null&&E6(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function qce(t,e,n,r,i){switch(e){case"focusin":return Wf=q1(Wf,t,e,n,r,i),!0;case"dragenter":return Gf=q1(Gf,t,e,n,r,i),!0;case"mouseover":return Kf=q1(Kf,t,e,n,r,i),!0;case"pointerover":var a=i.pointerId;return wj.set(a,q1(wj.get(a)||null,t,e,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,jj.set(a,q1(jj.get(a)||null,t,e,n,r,i)),!0}return!1}function rY(t){var e=mp(t.target);if(e!==null){var n=wv(e);if(n!==null){if(e=n.tag,e===13){if(e=HK(n),e!==null){t.blockedOn=e,nY(t.priority,function(){eY(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function $C(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=XO(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);qO=r,n.target.dispatchEvent(r),qO=null}else return e=iA(n),e!==null&&E6(e),t.blockedOn=n,!1;e.shift()}return!0}function $B(t,e,n){$C(t)&&n.delete(e)}function Hce(){YO=!1,Wf!==null&&$C(Wf)&&(Wf=null),Gf!==null&&$C(Gf)&&(Gf=null),Kf!==null&&$C(Kf)&&(Kf=null),wj.forEach($B),jj.forEach($B)}function H1(t,e){t.blockedOn===e&&(t.blockedOn=null,YO||(YO=!0,Fo.unstable_scheduleCallback(Fo.unstable_NormalPriority,Hce)))}function Nj(t){function e(i){return H1(i,t)}if(0<M5.length){H1(M5[0],t);for(var n=1;n<M5.length;n++){var r=M5[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Wf!==null&&H1(Wf,t),Gf!==null&&H1(Gf,t),Kf!==null&&H1(Kf,t),wj.forEach(e),jj.forEach(e),n=0;n<qh.length;n++)r=qh[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<qh.length&&(n=qh[0],n.blockedOn===null);)rY(n),n.blockedOn===null&&qh.shift()}var o0=lh.ReactCurrentBatchConfig,BE=!0;function Wce(t,e,n,r){var i=Qn,a=o0.transition;o0.transition=null;try{Qn=1,P6(t,e,n,r)}finally{Qn=i,o0.transition=a}}function Gce(t,e,n,r){var i=Qn,a=o0.transition;o0.transition=null;try{Qn=4,P6(t,e,n,r)}finally{Qn=i,o0.transition=a}}function P6(t,e,n,r){if(BE){var i=XO(t,e,n,r);if(i===null)$k(t,e,r,zE,n),FB(t,r);else if(qce(i,t,e,n,r))r.stopPropagation();else if(FB(t,r),e&4&&-1<Vce.indexOf(t)){for(;i!==null;){var a=iA(i);if(a!==null&&JK(a),a=XO(t,e,n,r),a===null&&$k(t,e,r,zE,n),a===i)break;i=a}i!==null&&r.stopPropagation()}else $k(t,e,r,null,n)}}var zE=null;function XO(t,e,n,r){if(zE=null,t=S6(r),t=mp(t),t!==null)if(e=wv(t),e===null)t=null;else if(n=e.tag,n===13){if(t=HK(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return zE=t,null}function sY(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Oce()){case A6:return 1;case YK:return 4;case FE:case Lce:return 16;case XK:return 536870912;default:return 16}default:return 16}}var Bf=null,T6=null,BC=null;function iY(){if(BC)return BC;var t,e=T6,n=e.length,r,i="value"in Bf?Bf.value:Bf.textContent,a=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[a-r];r++);return BC=i.slice(t,1<r?1-r:void 0)}function zC(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function F5(){return!0}function BB(){return!1}function Bo(t){function e(n,r,i,a,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=a,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(a):a[l]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?F5:BB,this.isPropagationStopped=BB,this}return Hr(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=F5)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=F5)},persist:function(){},isPersistent:F5}),e}var Bb={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},I6=Bo(Bb),sA=Hr({},Bb,{view:0,detail:0}),Kce=Bo(sA),Ik,Dk,W1,II=Hr({},sA,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:D6,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==W1&&(W1&&t.type==="mousemove"?(Ik=t.screenX-W1.screenX,Dk=t.screenY-W1.screenY):Dk=Ik=0,W1=t),Ik)},movementY:function(t){return"movementY"in t?t.movementY:Dk}}),zB=Bo(II),Yce=Hr({},II,{dataTransfer:0}),Xce=Bo(Yce),Zce=Hr({},sA,{relatedTarget:0}),kk=Bo(Zce),Qce=Hr({},Bb,{animationName:0,elapsedTime:0,pseudoElement:0}),Jce=Bo(Qce),ede=Hr({},Bb,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),tde=Bo(ede),nde=Hr({},Bb,{data:0}),UB=Bo(nde),rde={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},sde={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ide={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ade(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=ide[t])?!!e[t]:!1}function D6(){return ade}var ode=Hr({},sA,{key:function(t){if(t.key){var e=rde[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=zC(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?sde[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:D6,charCode:function(t){return t.type==="keypress"?zC(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?zC(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),lde=Bo(ode),cde=Hr({},II,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),VB=Bo(cde),dde=Hr({},sA,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:D6}),ude=Bo(dde),hde=Hr({},Bb,{propertyName:0,elapsedTime:0,pseudoElement:0}),fde=Bo(hde),mde=Hr({},II,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),pde=Bo(mde),gde=[9,13,27,32],k6=Xu&&"CompositionEvent"in window,qw=null;Xu&&"documentMode"in document&&(qw=document.documentMode);var vde=Xu&&"TextEvent"in window&&!qw,aY=Xu&&(!k6||qw&&8<qw&&11>=qw),qB=String.fromCharCode(32),HB=!1;function oY(t,e){switch(t){case"keyup":return gde.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function lY(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Fx=!1;function xde(t,e){switch(t){case"compositionend":return lY(e);case"keypress":return e.which!==32?null:(HB=!0,qB);case"textInput":return t=e.data,t===qB&&HB?null:t;default:return null}}function yde(t,e){if(Fx)return t==="compositionend"||!k6&&oY(t,e)?(t=iY(),BC=T6=Bf=null,Fx=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return aY&&e.locale!=="ko"?null:e.data;default:return null}}var bde={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function WB(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!bde[t.type]:e==="textarea"}function cY(t,e,n,r){BK(r),e=UE(e,"onChange"),0<e.length&&(n=new I6("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Hw=null,Sj=null;function wde(t){bY(t,0)}function DI(t){var e=zx(t);if(_K(e))return t}function jde(t,e){if(t==="change")return e}var dY=!1;if(Xu){var _k;if(Xu){var Ok="oninput"in document;if(!Ok){var GB=document.createElement("div");GB.setAttribute("oninput","return;"),Ok=typeof GB.oninput=="function"}_k=Ok}else _k=!1;dY=_k&&(!document.documentMode||9<document.documentMode)}function KB(){Hw&&(Hw.detachEvent("onpropertychange",uY),Sj=Hw=null)}function uY(t){if(t.propertyName==="value"&&DI(Sj)){var e=[];cY(e,Sj,t,S6(t)),qK(wde,e)}}function Nde(t,e,n){t==="focusin"?(KB(),Hw=e,Sj=n,Hw.attachEvent("onpropertychange",uY)):t==="focusout"&&KB()}function Sde(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return DI(Sj)}function Ade(t,e){if(t==="click")return DI(e)}function Cde(t,e){if(t==="input"||t==="change")return DI(e)}function Ede(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var gc=typeof Object.is=="function"?Object.is:Ede;function Aj(t,e){if(gc(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!kO.call(e,i)||!gc(t[i],e[i]))return!1}return!0}function YB(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function XB(t,e){var n=YB(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=YB(n)}}function hY(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?hY(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function fY(){for(var t=window,e=LE();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=LE(t.document)}return e}function _6(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Pde(t){var e=fY(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&hY(n.ownerDocument.documentElement,n)){if(r!==null&&_6(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=r.end===void 0?a:Math.min(r.end,i),!t.extend&&a>r&&(i=r,r=a,a=i),i=XB(n,a);var o=XB(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),a>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Tde=Xu&&"documentMode"in document&&11>=document.documentMode,$x=null,ZO=null,Ww=null,QO=!1;function ZB(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;QO||$x==null||$x!==LE(r)||(r=$x,"selectionStart"in r&&_6(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Ww&&Aj(Ww,r)||(Ww=r,r=UE(ZO,"onSelect"),0<r.length&&(e=new I6("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=$x)))}function $5(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Bx={animationend:$5("Animation","AnimationEnd"),animationiteration:$5("Animation","AnimationIteration"),animationstart:$5("Animation","AnimationStart"),transitionend:$5("Transition","TransitionEnd")},Lk={},mY={};Xu&&(mY=document.createElement("div").style,"AnimationEvent"in window||(delete Bx.animationend.animation,delete Bx.animationiteration.animation,delete Bx.animationstart.animation),"TransitionEvent"in window||delete Bx.transitionend.transition);function kI(t){if(Lk[t])return Lk[t];if(!Bx[t])return t;var e=Bx[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in mY)return Lk[t]=e[n];return t}var pY=kI("animationend"),gY=kI("animationiteration"),vY=kI("animationstart"),xY=kI("transitionend"),yY=new Map,QB="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Nm(t,e){yY.set(t,e),bv(e,[t])}for(var Rk=0;Rk<QB.length;Rk++){var Mk=QB[Rk],Ide=Mk.toLowerCase(),Dde=Mk[0].toUpperCase()+Mk.slice(1);Nm(Ide,"on"+Dde)}Nm(pY,"onAnimationEnd");Nm(gY,"onAnimationIteration");Nm(vY,"onAnimationStart");Nm("dblclick","onDoubleClick");Nm("focusin","onFocus");Nm("focusout","onBlur");Nm(xY,"onTransitionEnd");Yy("onMouseEnter",["mouseout","mouseover"]);Yy("onMouseLeave",["mouseout","mouseover"]);Yy("onPointerEnter",["pointerout","pointerover"]);Yy("onPointerLeave",["pointerout","pointerover"]);bv("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));bv("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));bv("onBeforeInput",["compositionend","keypress","textInput","paste"]);bv("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));bv("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));bv("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ww="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),kde=new Set("cancel close invalid load scroll toggle".split(" ").concat(ww));function JB(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,Ice(r,e,void 0,t),t.currentTarget=null}function bY(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var a=void 0;if(e)for(var o=r.length-1;0<=o;o--){var l=r[o],c=l.instance,d=l.currentTarget;if(l=l.listener,c!==a&&i.isPropagationStopped())break e;JB(i,l,d),a=c}else for(o=0;o<r.length;o++){if(l=r[o],c=l.instance,d=l.currentTarget,l=l.listener,c!==a&&i.isPropagationStopped())break e;JB(i,l,d),a=c}}}if(ME)throw t=GO,ME=!1,GO=null,t}function Sr(t,e){var n=e[rL];n===void 0&&(n=e[rL]=new Set);var r=t+"__bubble";n.has(r)||(wY(e,t,2,!1),n.add(r))}function Fk(t,e,n){var r=0;e&&(r|=4),wY(n,t,r,e)}var B5="_reactListening"+Math.random().toString(36).slice(2);function Cj(t){if(!t[B5]){t[B5]=!0,PK.forEach(function(n){n!=="selectionchange"&&(kde.has(n)||Fk(n,!1,t),Fk(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[B5]||(e[B5]=!0,Fk("selectionchange",!1,e))}}function wY(t,e,n,r){switch(sY(e)){case 1:var i=Wce;break;case 4:i=Gce;break;default:i=P6}n=i.bind(null,e,n,t),i=void 0,!WO||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function $k(t,e,n,r,i){var a=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===i||c.nodeType===8&&c.parentNode===i))return;o=o.return}for(;l!==null;){if(o=mp(l),o===null)return;if(c=o.tag,c===5||c===6){r=a=o;continue e}l=l.parentNode}}r=r.return}qK(function(){var d=a,u=S6(n),h=[];e:{var f=yY.get(t);if(f!==void 0){var m=I6,v=t;switch(t){case"keypress":if(zC(n)===0)break e;case"keydown":case"keyup":m=lde;break;case"focusin":v="focus",m=kk;break;case"focusout":v="blur",m=kk;break;case"beforeblur":case"afterblur":m=kk;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=zB;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=Xce;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=ude;break;case pY:case gY:case vY:m=Jce;break;case xY:m=fde;break;case"scroll":m=Kce;break;case"wheel":m=pde;break;case"copy":case"cut":case"paste":m=tde;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=VB}var p=(e&4)!==0,g=!p&&t==="scroll",x=p?f!==null?f+"Capture":null:f;p=[];for(var y=d,b;y!==null;){b=y;var w=b.stateNode;if(b.tag===5&&w!==null&&(b=w,x!==null&&(w=bj(y,x),w!=null&&p.push(Ej(y,w,b)))),g)break;y=y.return}0<p.length&&(f=new m(f,v,null,n,u),h.push({event:f,listeners:p}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",m=t==="mouseout"||t==="pointerout",f&&n!==qO&&(v=n.relatedTarget||n.fromElement)&&(mp(v)||v[Zu]))break e;if((m||f)&&(f=u.window===u?u:(f=u.ownerDocument)?f.defaultView||f.parentWindow:window,m?(v=n.relatedTarget||n.toElement,m=d,v=v?mp(v):null,v!==null&&(g=wv(v),v!==g||v.tag!==5&&v.tag!==6)&&(v=null)):(m=null,v=d),m!==v)){if(p=zB,w="onMouseLeave",x="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(p=VB,w="onPointerLeave",x="onPointerEnter",y="pointer"),g=m==null?f:zx(m),b=v==null?f:zx(v),f=new p(w,y+"leave",m,n,u),f.target=g,f.relatedTarget=b,w=null,mp(u)===d&&(p=new p(x,y+"enter",v,n,u),p.target=b,p.relatedTarget=g,w=p),g=w,m&&v)t:{for(p=m,x=v,y=0,b=p;b;b=hx(b))y++;for(b=0,w=x;w;w=hx(w))b++;for(;0<y-b;)p=hx(p),y--;for(;0<b-y;)x=hx(x),b--;for(;y--;){if(p===x||x!==null&&p===x.alternate)break t;p=hx(p),x=hx(x)}p=null}else p=null;m!==null&&e9(h,f,m,p,!1),v!==null&&g!==null&&e9(h,g,v,p,!0)}}e:{if(f=d?zx(d):window,m=f.nodeName&&f.nodeName.toLowerCase(),m==="select"||m==="input"&&f.type==="file")var N=jde;else if(WB(f))if(dY)N=Cde;else{N=Sde;var E=Nde}else(m=f.nodeName)&&m.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(N=Ade);if(N&&(N=N(t,d))){cY(h,N,n,u);break e}E&&E(t,f,d),t==="focusout"&&(E=f._wrapperState)&&E.controlled&&f.type==="number"&&$O(f,"number",f.value)}switch(E=d?zx(d):window,t){case"focusin":(WB(E)||E.contentEditable==="true")&&($x=E,ZO=d,Ww=null);break;case"focusout":Ww=ZO=$x=null;break;case"mousedown":QO=!0;break;case"contextmenu":case"mouseup":case"dragend":QO=!1,ZB(h,n,u);break;case"selectionchange":if(Tde)break;case"keydown":case"keyup":ZB(h,n,u)}var C;if(k6)e:{switch(t){case"compositionstart":var j="onCompositionStart";break e;case"compositionend":j="onCompositionEnd";break e;case"compositionupdate":j="onCompositionUpdate";break e}j=void 0}else Fx?oY(t,n)&&(j="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(j="onCompositionStart");j&&(aY&&n.locale!=="ko"&&(Fx||j!=="onCompositionStart"?j==="onCompositionEnd"&&Fx&&(C=iY()):(Bf=u,T6="value"in Bf?Bf.value:Bf.textContent,Fx=!0)),E=UE(d,j),0<E.length&&(j=new UB(j,t,null,n,u),h.push({event:j,listeners:E}),C?j.data=C:(C=lY(n),C!==null&&(j.data=C)))),(C=vde?xde(t,n):yde(t,n))&&(d=UE(d,"onBeforeInput"),0<d.length&&(u=new UB("onBeforeInput","beforeinput",null,n,u),h.push({event:u,listeners:d}),u.data=C))}bY(h,e)})}function Ej(t,e,n){return{instance:t,listener:e,currentTarget:n}}function UE(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,a=i.stateNode;i.tag===5&&a!==null&&(i=a,a=bj(t,n),a!=null&&r.unshift(Ej(t,a,i)),a=bj(t,e),a!=null&&r.push(Ej(t,a,i))),t=t.return}return r}function hx(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function e9(t,e,n,r,i){for(var a=e._reactName,o=[];n!==null&&n!==r;){var l=n,c=l.alternate,d=l.stateNode;if(c!==null&&c===r)break;l.tag===5&&d!==null&&(l=d,i?(c=bj(n,a),c!=null&&o.unshift(Ej(n,c,l))):i||(c=bj(n,a),c!=null&&o.push(Ej(n,c,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var _de=/\r\n?/g,Ode=/\u0000|\uFFFD/g;function t9(t){return(typeof t=="string"?t:""+t).replace(_de,`
`).replace(Ode,"")}function z5(t,e,n){if(e=t9(e),t9(t)!==e&&n)throw Error(dt(425))}function VE(){}var JO=null,eL=null;function tL(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var nL=typeof setTimeout=="function"?setTimeout:void 0,Lde=typeof clearTimeout=="function"?clearTimeout:void 0,n9=typeof Promise=="function"?Promise:void 0,Rde=typeof queueMicrotask=="function"?queueMicrotask:typeof n9<"u"?function(t){return n9.resolve(null).then(t).catch(Mde)}:nL;function Mde(t){setTimeout(function(){throw t})}function Bk(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Nj(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Nj(e)}function Yf(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function r9(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var zb=Math.random().toString(36).slice(2),cd="__reactFiber$"+zb,Pj="__reactProps$"+zb,Zu="__reactContainer$"+zb,rL="__reactEvents$"+zb,Fde="__reactListeners$"+zb,$de="__reactHandles$"+zb;function mp(t){var e=t[cd];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Zu]||n[cd]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=r9(t);t!==null;){if(n=t[cd])return n;t=r9(t)}return e}t=n,n=t.parentNode}return null}function iA(t){return t=t[cd]||t[Zu],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function zx(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(dt(33))}function _I(t){return t[Pj]||null}var sL=[],Ux=-1;function Sm(t){return{current:t}}function Pr(t){0>Ux||(t.current=sL[Ux],sL[Ux]=null,Ux--)}function br(t,e){Ux++,sL[Ux]=t.current,t.current=e}var um={},Qi=Sm(um),Ua=Sm(!1),nv=um;function Xy(t,e){var n=t.type.contextTypes;if(!n)return um;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},a;for(a in n)i[a]=e[a];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Va(t){return t=t.childContextTypes,t!=null}function qE(){Pr(Ua),Pr(Qi)}function s9(t,e,n){if(Qi.current!==um)throw Error(dt(168));br(Qi,e),br(Ua,n)}function jY(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(dt(108,Nce(t)||"Unknown",i));return Hr({},n,r)}function HE(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||um,nv=Qi.current,br(Qi,t),br(Ua,Ua.current),!0}function i9(t,e,n){var r=t.stateNode;if(!r)throw Error(dt(169));n?(t=jY(t,e,nv),r.__reactInternalMemoizedMergedChildContext=t,Pr(Ua),Pr(Qi),br(Qi,t)):Pr(Ua),br(Ua,n)}var ru=null,OI=!1,zk=!1;function NY(t){ru===null?ru=[t]:ru.push(t)}function Bde(t){OI=!0,NY(t)}function Am(){if(!zk&&ru!==null){zk=!0;var t=0,e=Qn;try{var n=ru;for(Qn=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}ru=null,OI=!1}catch(i){throw ru!==null&&(ru=ru.slice(t+1)),KK(A6,Am),i}finally{Qn=e,zk=!1}}return null}var Vx=[],qx=0,WE=null,GE=0,ul=[],hl=0,rv=null,zu=1,Uu="";function ep(t,e){Vx[qx++]=GE,Vx[qx++]=WE,WE=t,GE=e}function SY(t,e,n){ul[hl++]=zu,ul[hl++]=Uu,ul[hl++]=rv,rv=t;var r=zu;t=Uu;var i=32-hc(r)-1;r&=~(1<<i),n+=1;var a=32-hc(e)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,zu=1<<32-hc(e)+i|n<<i|r,Uu=a+t}else zu=1<<a|n<<i|r,Uu=t}function O6(t){t.return!==null&&(ep(t,1),SY(t,1,0))}function L6(t){for(;t===WE;)WE=Vx[--qx],Vx[qx]=null,GE=Vx[--qx],Vx[qx]=null;for(;t===rv;)rv=ul[--hl],ul[hl]=null,Uu=ul[--hl],ul[hl]=null,zu=ul[--hl],ul[hl]=null}var Io=null,Eo=null,_r=!1,oc=null;function AY(t,e){var n=ml(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function a9(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Io=t,Eo=Yf(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Io=t,Eo=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=rv!==null?{id:zu,overflow:Uu}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=ml(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Io=t,Eo=null,!0):!1;default:return!1}}function iL(t){return(t.mode&1)!==0&&(t.flags&128)===0}function aL(t){if(_r){var e=Eo;if(e){var n=e;if(!a9(t,e)){if(iL(t))throw Error(dt(418));e=Yf(n.nextSibling);var r=Io;e&&a9(t,e)?AY(r,n):(t.flags=t.flags&-4097|2,_r=!1,Io=t)}}else{if(iL(t))throw Error(dt(418));t.flags=t.flags&-4097|2,_r=!1,Io=t}}}function o9(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Io=t}function U5(t){if(t!==Io)return!1;if(!_r)return o9(t),_r=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!tL(t.type,t.memoizedProps)),e&&(e=Eo)){if(iL(t))throw CY(),Error(dt(418));for(;e;)AY(t,e),e=Yf(e.nextSibling)}if(o9(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(dt(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Eo=Yf(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Eo=null}}else Eo=Io?Yf(t.stateNode.nextSibling):null;return!0}function CY(){for(var t=Eo;t;)t=Yf(t.nextSibling)}function Zy(){Eo=Io=null,_r=!1}function R6(t){oc===null?oc=[t]:oc.push(t)}var zde=lh.ReactCurrentBatchConfig;function G1(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(dt(309));var r=n.stateNode}if(!r)throw Error(dt(147,t));var i=r,a=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===a?e.ref:(e=function(o){var l=i.refs;o===null?delete l[a]:l[a]=o},e._stringRef=a,e)}if(typeof t!="string")throw Error(dt(284));if(!n._owner)throw Error(dt(290,t))}return t}function V5(t,e){throw t=Object.prototype.toString.call(e),Error(dt(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function l9(t){var e=t._init;return e(t._payload)}function EY(t){function e(x,y){if(t){var b=x.deletions;b===null?(x.deletions=[y],x.flags|=16):b.push(y)}}function n(x,y){if(!t)return null;for(;y!==null;)e(x,y),y=y.sibling;return null}function r(x,y){for(x=new Map;y!==null;)y.key!==null?x.set(y.key,y):x.set(y.index,y),y=y.sibling;return x}function i(x,y){return x=Jf(x,y),x.index=0,x.sibling=null,x}function a(x,y,b){return x.index=b,t?(b=x.alternate,b!==null?(b=b.index,b<y?(x.flags|=2,y):b):(x.flags|=2,y)):(x.flags|=1048576,y)}function o(x){return t&&x.alternate===null&&(x.flags|=2),x}function l(x,y,b,w){return y===null||y.tag!==6?(y=Kk(b,x.mode,w),y.return=x,y):(y=i(y,b),y.return=x,y)}function c(x,y,b,w){var N=b.type;return N===Mx?u(x,y,b.props.children,w,b.key):y!==null&&(y.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===$h&&l9(N)===y.type)?(w=i(y,b.props),w.ref=G1(x,y,b),w.return=x,w):(w=KC(b.type,b.key,b.props,null,x.mode,w),w.ref=G1(x,y,b),w.return=x,w)}function d(x,y,b,w){return y===null||y.tag!==4||y.stateNode.containerInfo!==b.containerInfo||y.stateNode.implementation!==b.implementation?(y=Yk(b,x.mode,w),y.return=x,y):(y=i(y,b.children||[]),y.return=x,y)}function u(x,y,b,w,N){return y===null||y.tag!==7?(y=Kg(b,x.mode,w,N),y.return=x,y):(y=i(y,b),y.return=x,y)}function h(x,y,b){if(typeof y=="string"&&y!==""||typeof y=="number")return y=Kk(""+y,x.mode,b),y.return=x,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case k5:return b=KC(y.type,y.key,y.props,null,x.mode,b),b.ref=G1(x,null,y),b.return=x,b;case Rx:return y=Yk(y,x.mode,b),y.return=x,y;case $h:var w=y._init;return h(x,w(y._payload),b)}if(yw(y)||U1(y))return y=Kg(y,x.mode,b,null),y.return=x,y;V5(x,y)}return null}function f(x,y,b,w){var N=y!==null?y.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return N!==null?null:l(x,y,""+b,w);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case k5:return b.key===N?c(x,y,b,w):null;case Rx:return b.key===N?d(x,y,b,w):null;case $h:return N=b._init,f(x,y,N(b._payload),w)}if(yw(b)||U1(b))return N!==null?null:u(x,y,b,w,null);V5(x,b)}return null}function m(x,y,b,w,N){if(typeof w=="string"&&w!==""||typeof w=="number")return x=x.get(b)||null,l(y,x,""+w,N);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case k5:return x=x.get(w.key===null?b:w.key)||null,c(y,x,w,N);case Rx:return x=x.get(w.key===null?b:w.key)||null,d(y,x,w,N);case $h:var E=w._init;return m(x,y,b,E(w._payload),N)}if(yw(w)||U1(w))return x=x.get(b)||null,u(y,x,w,N,null);V5(y,w)}return null}function v(x,y,b,w){for(var N=null,E=null,C=y,j=y=0,I=null;C!==null&&j<b.length;j++){C.index>j?(I=C,C=null):I=C.sibling;var k=f(x,C,b[j],w);if(k===null){C===null&&(C=I);break}t&&C&&k.alternate===null&&e(x,C),y=a(k,y,j),E===null?N=k:E.sibling=k,E=k,C=I}if(j===b.length)return n(x,C),_r&&ep(x,j),N;if(C===null){for(;j<b.length;j++)C=h(x,b[j],w),C!==null&&(y=a(C,y,j),E===null?N=C:E.sibling=C,E=C);return _r&&ep(x,j),N}for(C=r(x,C);j<b.length;j++)I=m(C,x,j,b[j],w),I!==null&&(t&&I.alternate!==null&&C.delete(I.key===null?j:I.key),y=a(I,y,j),E===null?N=I:E.sibling=I,E=I);return t&&C.forEach(function(D){return e(x,D)}),_r&&ep(x,j),N}function p(x,y,b,w){var N=U1(b);if(typeof N!="function")throw Error(dt(150));if(b=N.call(b),b==null)throw Error(dt(151));for(var E=N=null,C=y,j=y=0,I=null,k=b.next();C!==null&&!k.done;j++,k=b.next()){C.index>j?(I=C,C=null):I=C.sibling;var D=f(x,C,k.value,w);if(D===null){C===null&&(C=I);break}t&&C&&D.alternate===null&&e(x,C),y=a(D,y,j),E===null?N=D:E.sibling=D,E=D,C=I}if(k.done)return n(x,C),_r&&ep(x,j),N;if(C===null){for(;!k.done;j++,k=b.next())k=h(x,k.value,w),k!==null&&(y=a(k,y,j),E===null?N=k:E.sibling=k,E=k);return _r&&ep(x,j),N}for(C=r(x,C);!k.done;j++,k=b.next())k=m(C,x,j,k.value,w),k!==null&&(t&&k.alternate!==null&&C.delete(k.key===null?j:k.key),y=a(k,y,j),E===null?N=k:E.sibling=k,E=k);return t&&C.forEach(function(P){return e(x,P)}),_r&&ep(x,j),N}function g(x,y,b,w){if(typeof b=="object"&&b!==null&&b.type===Mx&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case k5:e:{for(var N=b.key,E=y;E!==null;){if(E.key===N){if(N=b.type,N===Mx){if(E.tag===7){n(x,E.sibling),y=i(E,b.props.children),y.return=x,x=y;break e}}else if(E.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===$h&&l9(N)===E.type){n(x,E.sibling),y=i(E,b.props),y.ref=G1(x,E,b),y.return=x,x=y;break e}n(x,E);break}else e(x,E);E=E.sibling}b.type===Mx?(y=Kg(b.props.children,x.mode,w,b.key),y.return=x,x=y):(w=KC(b.type,b.key,b.props,null,x.mode,w),w.ref=G1(x,y,b),w.return=x,x=w)}return o(x);case Rx:e:{for(E=b.key;y!==null;){if(y.key===E)if(y.tag===4&&y.stateNode.containerInfo===b.containerInfo&&y.stateNode.implementation===b.implementation){n(x,y.sibling),y=i(y,b.children||[]),y.return=x,x=y;break e}else{n(x,y);break}else e(x,y);y=y.sibling}y=Yk(b,x.mode,w),y.return=x,x=y}return o(x);case $h:return E=b._init,g(x,y,E(b._payload),w)}if(yw(b))return v(x,y,b,w);if(U1(b))return p(x,y,b,w);V5(x,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,y!==null&&y.tag===6?(n(x,y.sibling),y=i(y,b),y.return=x,x=y):(n(x,y),y=Kk(b,x.mode,w),y.return=x,x=y),o(x)):n(x,y)}return g}var Qy=EY(!0),PY=EY(!1),KE=Sm(null),YE=null,Hx=null,M6=null;function F6(){M6=Hx=YE=null}function $6(t){var e=KE.current;Pr(KE),t._currentValue=e}function oL(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function l0(t,e){YE=t,M6=Hx=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&($a=!0),t.firstContext=null)}function bl(t){var e=t._currentValue;if(M6!==t)if(t={context:t,memoizedValue:e,next:null},Hx===null){if(YE===null)throw Error(dt(308));Hx=t,YE.dependencies={lanes:0,firstContext:t}}else Hx=Hx.next=t;return e}var pp=null;function B6(t){pp===null?pp=[t]:pp.push(t)}function TY(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,B6(e)):(n.next=i.next,i.next=n),e.interleaved=n,Qu(t,r)}function Qu(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Bh=!1;function z6(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function IY(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Gu(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Xf(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,_n&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Qu(t,n)}return i=r.interleaved,i===null?(e.next=e,B6(r)):(e.next=i.next,i.next=e),r.interleaved=e,Qu(t,n)}function UC(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,C6(t,n)}}function c9(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,a=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};a===null?i=a=o:a=a.next=o,n=n.next}while(n!==null);a===null?i=a=e:a=a.next=e}else i=a=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function XE(t,e,n,r){var i=t.updateQueue;Bh=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var c=l,d=c.next;c.next=null,o===null?a=d:o.next=d,o=c;var u=t.alternate;u!==null&&(u=u.updateQueue,l=u.lastBaseUpdate,l!==o&&(l===null?u.firstBaseUpdate=d:l.next=d,u.lastBaseUpdate=c))}if(a!==null){var h=i.baseState;o=0,u=d=c=null,l=a;do{var f=l.lane,m=l.eventTime;if((r&f)===f){u!==null&&(u=u.next={eventTime:m,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var v=t,p=l;switch(f=e,m=n,p.tag){case 1:if(v=p.payload,typeof v=="function"){h=v.call(m,h,f);break e}h=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=p.payload,f=typeof v=="function"?v.call(m,h,f):v,f==null)break e;h=Hr({},h,f);break e;case 2:Bh=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,f=i.effects,f===null?i.effects=[l]:f.push(l))}else m={eventTime:m,lane:f,tag:l.tag,payload:l.payload,callback:l.callback,next:null},u===null?(d=u=m,c=h):u=u.next=m,o|=f;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;f=l,l=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(1);if(u===null&&(c=h),i.baseState=c,i.firstBaseUpdate=d,i.lastBaseUpdate=u,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else a===null&&(i.shared.lanes=0);iv|=o,t.lanes=o,t.memoizedState=h}}function d9(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(dt(191,i));i.call(r)}}}var aA={},vd=Sm(aA),Tj=Sm(aA),Ij=Sm(aA);function gp(t){if(t===aA)throw Error(dt(174));return t}function U6(t,e){switch(br(Ij,e),br(Tj,t),br(vd,aA),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:zO(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=zO(e,t)}Pr(vd),br(vd,e)}function Jy(){Pr(vd),Pr(Tj),Pr(Ij)}function DY(t){gp(Ij.current);var e=gp(vd.current),n=zO(e,t.type);e!==n&&(br(Tj,t),br(vd,n))}function V6(t){Tj.current===t&&(Pr(vd),Pr(Tj))}var Vr=Sm(0);function ZE(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Uk=[];function q6(){for(var t=0;t<Uk.length;t++)Uk[t]._workInProgressVersionPrimary=null;Uk.length=0}var VC=lh.ReactCurrentDispatcher,Vk=lh.ReactCurrentBatchConfig,sv=0,qr=null,$s=null,ri=null,QE=!1,Gw=!1,Dj=0,Ude=0;function Li(){throw Error(dt(321))}function H6(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!gc(t[n],e[n]))return!1;return!0}function W6(t,e,n,r,i,a){if(sv=a,qr=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,VC.current=t===null||t.memoizedState===null?Wde:Gde,t=n(r,i),Gw){a=0;do{if(Gw=!1,Dj=0,25<=a)throw Error(dt(301));a+=1,ri=$s=null,e.updateQueue=null,VC.current=Kde,t=n(r,i)}while(Gw)}if(VC.current=JE,e=$s!==null&&$s.next!==null,sv=0,ri=$s=qr=null,QE=!1,e)throw Error(dt(300));return t}function G6(){var t=Dj!==0;return Dj=0,t}function Uc(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ri===null?qr.memoizedState=ri=t:ri=ri.next=t,ri}function wl(){if($s===null){var t=qr.alternate;t=t!==null?t.memoizedState:null}else t=$s.next;var e=ri===null?qr.memoizedState:ri.next;if(e!==null)ri=e,$s=t;else{if(t===null)throw Error(dt(310));$s=t,t={memoizedState:$s.memoizedState,baseState:$s.baseState,baseQueue:$s.baseQueue,queue:$s.queue,next:null},ri===null?qr.memoizedState=ri=t:ri=ri.next=t}return ri}function kj(t,e){return typeof e=="function"?e(t):e}function qk(t){var e=wl(),n=e.queue;if(n===null)throw Error(dt(311));n.lastRenderedReducer=t;var r=$s,i=r.baseQueue,a=n.pending;if(a!==null){if(i!==null){var o=i.next;i.next=a.next,a.next=o}r.baseQueue=i=a,n.pending=null}if(i!==null){a=i.next,r=r.baseState;var l=o=null,c=null,d=a;do{var u=d.lane;if((sv&u)===u)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:t(r,d.action);else{var h={lane:u,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(l=c=h,o=r):c=c.next=h,qr.lanes|=u,iv|=u}d=d.next}while(d!==null&&d!==a);c===null?o=r:c.next=l,gc(r,e.memoizedState)||($a=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do a=i.lane,qr.lanes|=a,iv|=a,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Hk(t){var e=wl(),n=e.queue;if(n===null)throw Error(dt(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,a=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do a=t(a,o.action),o=o.next;while(o!==i);gc(a,e.memoizedState)||($a=!0),e.memoizedState=a,e.baseQueue===null&&(e.baseState=a),n.lastRenderedState=a}return[a,r]}function kY(){}function _Y(t,e){var n=qr,r=wl(),i=e(),a=!gc(r.memoizedState,i);if(a&&(r.memoizedState=i,$a=!0),r=r.queue,K6(RY.bind(null,n,r,t),[t]),r.getSnapshot!==e||a||ri!==null&&ri.memoizedState.tag&1){if(n.flags|=2048,_j(9,LY.bind(null,n,r,i,e),void 0,null),ii===null)throw Error(dt(349));sv&30||OY(n,e,i)}return i}function OY(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=qr.updateQueue,e===null?(e={lastEffect:null,stores:null},qr.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function LY(t,e,n,r){e.value=n,e.getSnapshot=r,MY(e)&&FY(t)}function RY(t,e,n){return n(function(){MY(e)&&FY(t)})}function MY(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!gc(t,n)}catch{return!0}}function FY(t){var e=Qu(t,1);e!==null&&fc(e,t,1,-1)}function u9(t){var e=Uc();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:kj,lastRenderedState:t},e.queue=t,t=t.dispatch=Hde.bind(null,qr,t),[e.memoizedState,t]}function _j(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=qr.updateQueue,e===null?(e={lastEffect:null,stores:null},qr.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function $Y(){return wl().memoizedState}function qC(t,e,n,r){var i=Uc();qr.flags|=t,i.memoizedState=_j(1|e,n,void 0,r===void 0?null:r)}function LI(t,e,n,r){var i=wl();r=r===void 0?null:r;var a=void 0;if($s!==null){var o=$s.memoizedState;if(a=o.destroy,r!==null&&H6(r,o.deps)){i.memoizedState=_j(e,n,a,r);return}}qr.flags|=t,i.memoizedState=_j(1|e,n,a,r)}function h9(t,e){return qC(8390656,8,t,e)}function K6(t,e){return LI(2048,8,t,e)}function BY(t,e){return LI(4,2,t,e)}function zY(t,e){return LI(4,4,t,e)}function UY(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function VY(t,e,n){return n=n!=null?n.concat([t]):null,LI(4,4,UY.bind(null,e,t),n)}function Y6(){}function qY(t,e){var n=wl();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&H6(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function HY(t,e){var n=wl();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&H6(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function WY(t,e,n){return sv&21?(gc(n,e)||(n=ZK(),qr.lanes|=n,iv|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,$a=!0),t.memoizedState=n)}function Vde(t,e){var n=Qn;Qn=n!==0&&4>n?n:4,t(!0);var r=Vk.transition;Vk.transition={};try{t(!1),e()}finally{Qn=n,Vk.transition=r}}function GY(){return wl().memoizedState}function qde(t,e,n){var r=Qf(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},KY(t))YY(e,n);else if(n=TY(t,e,n,r),n!==null){var i=pa();fc(n,t,r,i),XY(n,e,r)}}function Hde(t,e,n){var r=Qf(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(KY(t))YY(e,i);else{var a=t.alternate;if(t.lanes===0&&(a===null||a.lanes===0)&&(a=e.lastRenderedReducer,a!==null))try{var o=e.lastRenderedState,l=a(o,n);if(i.hasEagerState=!0,i.eagerState=l,gc(l,o)){var c=e.interleaved;c===null?(i.next=i,B6(e)):(i.next=c.next,c.next=i),e.interleaved=i;return}}catch{}finally{}n=TY(t,e,i,r),n!==null&&(i=pa(),fc(n,t,r,i),XY(n,e,r))}}function KY(t){var e=t.alternate;return t===qr||e!==null&&e===qr}function YY(t,e){Gw=QE=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function XY(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,C6(t,n)}}var JE={readContext:bl,useCallback:Li,useContext:Li,useEffect:Li,useImperativeHandle:Li,useInsertionEffect:Li,useLayoutEffect:Li,useMemo:Li,useReducer:Li,useRef:Li,useState:Li,useDebugValue:Li,useDeferredValue:Li,useTransition:Li,useMutableSource:Li,useSyncExternalStore:Li,useId:Li,unstable_isNewReconciler:!1},Wde={readContext:bl,useCallback:function(t,e){return Uc().memoizedState=[t,e===void 0?null:e],t},useContext:bl,useEffect:h9,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,qC(4194308,4,UY.bind(null,e,t),n)},useLayoutEffect:function(t,e){return qC(4194308,4,t,e)},useInsertionEffect:function(t,e){return qC(4,2,t,e)},useMemo:function(t,e){var n=Uc();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Uc();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=qde.bind(null,qr,t),[r.memoizedState,t]},useRef:function(t){var e=Uc();return t={current:t},e.memoizedState=t},useState:u9,useDebugValue:Y6,useDeferredValue:function(t){return Uc().memoizedState=t},useTransition:function(){var t=u9(!1),e=t[0];return t=Vde.bind(null,t[1]),Uc().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=qr,i=Uc();if(_r){if(n===void 0)throw Error(dt(407));n=n()}else{if(n=e(),ii===null)throw Error(dt(349));sv&30||OY(r,e,n)}i.memoizedState=n;var a={value:n,getSnapshot:e};return i.queue=a,h9(RY.bind(null,r,a,t),[t]),r.flags|=2048,_j(9,LY.bind(null,r,a,n,e),void 0,null),n},useId:function(){var t=Uc(),e=ii.identifierPrefix;if(_r){var n=Uu,r=zu;n=(r&~(1<<32-hc(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Dj++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=Ude++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Gde={readContext:bl,useCallback:qY,useContext:bl,useEffect:K6,useImperativeHandle:VY,useInsertionEffect:BY,useLayoutEffect:zY,useMemo:HY,useReducer:qk,useRef:$Y,useState:function(){return qk(kj)},useDebugValue:Y6,useDeferredValue:function(t){var e=wl();return WY(e,$s.memoizedState,t)},useTransition:function(){var t=qk(kj)[0],e=wl().memoizedState;return[t,e]},useMutableSource:kY,useSyncExternalStore:_Y,useId:GY,unstable_isNewReconciler:!1},Kde={readContext:bl,useCallback:qY,useContext:bl,useEffect:K6,useImperativeHandle:VY,useInsertionEffect:BY,useLayoutEffect:zY,useMemo:HY,useReducer:Hk,useRef:$Y,useState:function(){return Hk(kj)},useDebugValue:Y6,useDeferredValue:function(t){var e=wl();return $s===null?e.memoizedState=t:WY(e,$s.memoizedState,t)},useTransition:function(){var t=Hk(kj)[0],e=wl().memoizedState;return[t,e]},useMutableSource:kY,useSyncExternalStore:_Y,useId:GY,unstable_isNewReconciler:!1};function Ul(t,e){if(t&&t.defaultProps){e=Hr({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function lL(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Hr({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var RI={isMounted:function(t){return(t=t._reactInternals)?wv(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=pa(),i=Qf(t),a=Gu(r,i);a.payload=e,n!=null&&(a.callback=n),e=Xf(t,a,i),e!==null&&(fc(e,t,i,r),UC(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=pa(),i=Qf(t),a=Gu(r,i);a.tag=1,a.payload=e,n!=null&&(a.callback=n),e=Xf(t,a,i),e!==null&&(fc(e,t,i,r),UC(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=pa(),r=Qf(t),i=Gu(n,r);i.tag=2,e!=null&&(i.callback=e),e=Xf(t,i,r),e!==null&&(fc(e,t,r,n),UC(e,t,r))}};function f9(t,e,n,r,i,a,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,a,o):e.prototype&&e.prototype.isPureReactComponent?!Aj(n,r)||!Aj(i,a):!0}function ZY(t,e,n){var r=!1,i=um,a=e.contextType;return typeof a=="object"&&a!==null?a=bl(a):(i=Va(e)?nv:Qi.current,r=e.contextTypes,a=(r=r!=null)?Xy(t,i):um),e=new e(n,a),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=RI,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=a),e}function m9(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&RI.enqueueReplaceState(e,e.state,null)}function cL(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},z6(t);var a=e.contextType;typeof a=="object"&&a!==null?i.context=bl(a):(a=Va(e)?nv:Qi.current,i.context=Xy(t,a)),i.state=t.memoizedState,a=e.getDerivedStateFromProps,typeof a=="function"&&(lL(t,e,a,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&RI.enqueueReplaceState(i,i.state,null),XE(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function eb(t,e){try{var n="",r=e;do n+=jce(r),r=r.return;while(r);var i=n}catch(a){i=`
Error generating stack: `+a.message+`
`+a.stack}return{value:t,source:e,stack:i,digest:null}}function Wk(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function dL(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var Yde=typeof WeakMap=="function"?WeakMap:Map;function QY(t,e,n){n=Gu(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){tP||(tP=!0,bL=r),dL(t,e)},n}function JY(t,e,n){n=Gu(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){dL(t,e)}}var a=t.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(n.callback=function(){dL(t,e),typeof r!="function"&&(Zf===null?Zf=new Set([this]):Zf.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function p9(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new Yde;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=cue.bind(null,t,e,n),e.then(t,t))}function g9(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function v9(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Gu(-1,1),e.tag=2,Xf(n,e,1))),n.lanes|=1),t)}var Xde=lh.ReactCurrentOwner,$a=!1;function da(t,e,n,r){e.child=t===null?PY(e,null,n,r):Qy(e,t.child,n,r)}function x9(t,e,n,r,i){n=n.render;var a=e.ref;return l0(e,i),r=W6(t,e,n,r,a,i),n=G6(),t!==null&&!$a?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Ju(t,e,i)):(_r&&n&&O6(e),e.flags|=1,da(t,e,r,i),e.child)}function y9(t,e,n,r,i){if(t===null){var a=n.type;return typeof a=="function"&&!r$(a)&&a.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=a,eX(t,e,a,r,i)):(t=KC(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(a=t.child,!(t.lanes&i)){var o=a.memoizedProps;if(n=n.compare,n=n!==null?n:Aj,n(o,r)&&t.ref===e.ref)return Ju(t,e,i)}return e.flags|=1,t=Jf(a,r),t.ref=e.ref,t.return=e,e.child=t}function eX(t,e,n,r,i){if(t!==null){var a=t.memoizedProps;if(Aj(a,r)&&t.ref===e.ref)if($a=!1,e.pendingProps=r=a,(t.lanes&i)!==0)t.flags&131072&&($a=!0);else return e.lanes=t.lanes,Ju(t,e,i)}return uL(t,e,n,r,i)}function tX(t,e,n){var r=e.pendingProps,i=r.children,a=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},br(Gx,bo),bo|=n;else{if(!(n&1073741824))return t=a!==null?a.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,br(Gx,bo),bo|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=a!==null?a.baseLanes:n,br(Gx,bo),bo|=r}else a!==null?(r=a.baseLanes|n,e.memoizedState=null):r=n,br(Gx,bo),bo|=r;return da(t,e,i,n),e.child}function nX(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function uL(t,e,n,r,i){var a=Va(n)?nv:Qi.current;return a=Xy(e,a),l0(e,i),n=W6(t,e,n,r,a,i),r=G6(),t!==null&&!$a?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Ju(t,e,i)):(_r&&r&&O6(e),e.flags|=1,da(t,e,n,i),e.child)}function b9(t,e,n,r,i){if(Va(n)){var a=!0;HE(e)}else a=!1;if(l0(e,i),e.stateNode===null)HC(t,e),ZY(e,n,r),cL(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var c=o.context,d=n.contextType;typeof d=="object"&&d!==null?d=bl(d):(d=Va(n)?nv:Qi.current,d=Xy(e,d));var u=n.getDerivedStateFromProps,h=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||c!==d)&&m9(e,o,r,d),Bh=!1;var f=e.memoizedState;o.state=f,XE(e,r,o,i),c=e.memoizedState,l!==r||f!==c||Ua.current||Bh?(typeof u=="function"&&(lL(e,n,u,r),c=e.memoizedState),(l=Bh||f9(e,n,l,r,f,c,d))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),o.props=r,o.state=c,o.context=d,r=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,IY(t,e),l=e.memoizedProps,d=e.type===e.elementType?l:Ul(e.type,l),o.props=d,h=e.pendingProps,f=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=bl(c):(c=Va(n)?nv:Qi.current,c=Xy(e,c));var m=n.getDerivedStateFromProps;(u=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==h||f!==c)&&m9(e,o,r,c),Bh=!1,f=e.memoizedState,o.state=f,XE(e,r,o,i);var v=e.memoizedState;l!==h||f!==v||Ua.current||Bh?(typeof m=="function"&&(lL(e,n,m,r),v=e.memoizedState),(d=Bh||f9(e,n,d,r,f,v,c)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,v,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,v,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=v),o.props=r,o.state=v,o.context=c,r=d):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return hL(t,e,n,r,a,i)}function hL(t,e,n,r,i,a){nX(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&i9(e,n,!1),Ju(t,e,a);r=e.stateNode,Xde.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Qy(e,t.child,null,a),e.child=Qy(e,null,l,a)):da(t,e,l,a),e.memoizedState=r.state,i&&i9(e,n,!0),e.child}function rX(t){var e=t.stateNode;e.pendingContext?s9(t,e.pendingContext,e.pendingContext!==e.context):e.context&&s9(t,e.context,!1),U6(t,e.containerInfo)}function w9(t,e,n,r,i){return Zy(),R6(i),e.flags|=256,da(t,e,n,r),e.child}var fL={dehydrated:null,treeContext:null,retryLane:0};function mL(t){return{baseLanes:t,cachePool:null,transitions:null}}function sX(t,e,n){var r=e.pendingProps,i=Vr.current,a=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(i&2)!==0),l?(a=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),br(Vr,i&1),t===null)return aL(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,a?(r=e.mode,a=e.child,o={mode:"hidden",children:o},!(r&1)&&a!==null?(a.childLanes=0,a.pendingProps=o):a=$I(o,r,0,null),t=Kg(t,r,n,null),a.return=e,t.return=e,a.sibling=t,e.child=a,e.child.memoizedState=mL(n),e.memoizedState=fL,t):X6(e,o));if(i=t.memoizedState,i!==null&&(l=i.dehydrated,l!==null))return Zde(t,e,o,r,l,i,n);if(a){a=r.fallback,o=e.mode,i=t.child,l=i.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=Jf(i,c),r.subtreeFlags=i.subtreeFlags&14680064),l!==null?a=Jf(l,a):(a=Kg(a,o,n,null),a.flags|=2),a.return=e,r.return=e,r.sibling=a,e.child=r,r=a,a=e.child,o=t.child.memoizedState,o=o===null?mL(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},a.memoizedState=o,a.childLanes=t.childLanes&~n,e.memoizedState=fL,r}return a=t.child,t=a.sibling,r=Jf(a,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function X6(t,e){return e=$I({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function q5(t,e,n,r){return r!==null&&R6(r),Qy(e,t.child,null,n),t=X6(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Zde(t,e,n,r,i,a,o){if(n)return e.flags&256?(e.flags&=-257,r=Wk(Error(dt(422))),q5(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(a=r.fallback,i=e.mode,r=$I({mode:"visible",children:r.children},i,0,null),a=Kg(a,i,o,null),a.flags|=2,r.return=e,a.return=e,r.sibling=a,e.child=r,e.mode&1&&Qy(e,t.child,null,o),e.child.memoizedState=mL(o),e.memoizedState=fL,a);if(!(e.mode&1))return q5(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var l=r.dgst;return r=l,a=Error(dt(419)),r=Wk(a,r,void 0),q5(t,e,o,r)}if(l=(o&t.childLanes)!==0,$a||l){if(r=ii,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==a.retryLane&&(a.retryLane=i,Qu(t,i),fc(r,t,i,-1))}return n$(),r=Wk(Error(dt(421))),q5(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=due.bind(null,t),i._reactRetry=e,null):(t=a.treeContext,Eo=Yf(i.nextSibling),Io=e,_r=!0,oc=null,t!==null&&(ul[hl++]=zu,ul[hl++]=Uu,ul[hl++]=rv,zu=t.id,Uu=t.overflow,rv=e),e=X6(e,r.children),e.flags|=4096,e)}function j9(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),oL(t.return,e,n)}function Gk(t,e,n,r,i){var a=t.memoizedState;a===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=e,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function iX(t,e,n){var r=e.pendingProps,i=r.revealOrder,a=r.tail;if(da(t,e,r.children,n),r=Vr.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&j9(t,n,e);else if(t.tag===19)j9(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(br(Vr,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&ZE(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Gk(e,!1,i,n,a);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&ZE(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Gk(e,!0,n,null,a);break;case"together":Gk(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function HC(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Ju(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),iv|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(dt(153));if(e.child!==null){for(t=e.child,n=Jf(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Jf(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Qde(t,e,n){switch(e.tag){case 3:rX(e),Zy();break;case 5:DY(e);break;case 1:Va(e.type)&&HE(e);break;case 4:U6(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;br(KE,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(br(Vr,Vr.current&1),e.flags|=128,null):n&e.child.childLanes?sX(t,e,n):(br(Vr,Vr.current&1),t=Ju(t,e,n),t!==null?t.sibling:null);br(Vr,Vr.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return iX(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),br(Vr,Vr.current),r)break;return null;case 22:case 23:return e.lanes=0,tX(t,e,n)}return Ju(t,e,n)}var aX,pL,oX,lX;aX=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};pL=function(){};oX=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,gp(vd.current);var a=null;switch(n){case"input":i=MO(t,i),r=MO(t,r),a=[];break;case"select":i=Hr({},i,{value:void 0}),r=Hr({},r,{value:void 0}),a=[];break;case"textarea":i=BO(t,i),r=BO(t,r),a=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=VE)}UO(n,r);var o;n=null;for(d in i)if(!r.hasOwnProperty(d)&&i.hasOwnProperty(d)&&i[d]!=null)if(d==="style"){var l=i[d];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(xj.hasOwnProperty(d)?a||(a=[]):(a=a||[]).push(d,null));for(d in r){var c=r[d];if(l=i!=null?i[d]:void 0,r.hasOwnProperty(d)&&c!==l&&(c!=null||l!=null))if(d==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(a||(a=[]),a.push(d,n)),n=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(a=a||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(a=a||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(xj.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&Sr("scroll",t),a||l===c||(a=[])):(a=a||[]).push(d,c))}n&&(a=a||[]).push("style",n);var d=a;(e.updateQueue=d)&&(e.flags|=4)}};lX=function(t,e,n,r){n!==r&&(e.flags|=4)};function K1(t,e){if(!_r)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Ri(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function Jde(t,e,n){var r=e.pendingProps;switch(L6(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ri(e),null;case 1:return Va(e.type)&&qE(),Ri(e),null;case 3:return r=e.stateNode,Jy(),Pr(Ua),Pr(Qi),q6(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(U5(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,oc!==null&&(NL(oc),oc=null))),pL(t,e),Ri(e),null;case 5:V6(e);var i=gp(Ij.current);if(n=e.type,t!==null&&e.stateNode!=null)oX(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(dt(166));return Ri(e),null}if(t=gp(vd.current),U5(e)){r=e.stateNode,n=e.type;var a=e.memoizedProps;switch(r[cd]=e,r[Pj]=a,t=(e.mode&1)!==0,n){case"dialog":Sr("cancel",r),Sr("close",r);break;case"iframe":case"object":case"embed":Sr("load",r);break;case"video":case"audio":for(i=0;i<ww.length;i++)Sr(ww[i],r);break;case"source":Sr("error",r);break;case"img":case"image":case"link":Sr("error",r),Sr("load",r);break;case"details":Sr("toggle",r);break;case"input":DB(r,a),Sr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},Sr("invalid",r);break;case"textarea":_B(r,a),Sr("invalid",r)}UO(n,a),i=null;for(var o in a)if(a.hasOwnProperty(o)){var l=a[o];o==="children"?typeof l=="string"?r.textContent!==l&&(a.suppressHydrationWarning!==!0&&z5(r.textContent,l,t),i=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(a.suppressHydrationWarning!==!0&&z5(r.textContent,l,t),i=["children",""+l]):xj.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&Sr("scroll",r)}switch(n){case"input":_5(r),kB(r,a,!0);break;case"textarea":_5(r),OB(r);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(r.onclick=VE)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=RK(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[cd]=e,t[Pj]=r,aX(t,e,!1,!1),e.stateNode=t;e:{switch(o=VO(n,r),n){case"dialog":Sr("cancel",t),Sr("close",t),i=r;break;case"iframe":case"object":case"embed":Sr("load",t),i=r;break;case"video":case"audio":for(i=0;i<ww.length;i++)Sr(ww[i],t);i=r;break;case"source":Sr("error",t),i=r;break;case"img":case"image":case"link":Sr("error",t),Sr("load",t),i=r;break;case"details":Sr("toggle",t),i=r;break;case"input":DB(t,r),i=MO(t,r),Sr("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Hr({},r,{value:void 0}),Sr("invalid",t);break;case"textarea":_B(t,r),i=BO(t,r),Sr("invalid",t);break;default:i=r}UO(n,i),l=i;for(a in l)if(l.hasOwnProperty(a)){var c=l[a];a==="style"?$K(t,c):a==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&MK(t,c)):a==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&yj(t,c):typeof c=="number"&&yj(t,""+c):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(xj.hasOwnProperty(a)?c!=null&&a==="onScroll"&&Sr("scroll",t):c!=null&&b6(t,a,c,o))}switch(n){case"input":_5(t),kB(t,r,!1);break;case"textarea":_5(t),OB(t);break;case"option":r.value!=null&&t.setAttribute("value",""+dm(r.value));break;case"select":t.multiple=!!r.multiple,a=r.value,a!=null?s0(t,!!r.multiple,a,!1):r.defaultValue!=null&&s0(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=VE)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Ri(e),null;case 6:if(t&&e.stateNode!=null)lX(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(dt(166));if(n=gp(Ij.current),gp(vd.current),U5(e)){if(r=e.stateNode,n=e.memoizedProps,r[cd]=e,(a=r.nodeValue!==n)&&(t=Io,t!==null))switch(t.tag){case 3:z5(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&z5(r.nodeValue,n,(t.mode&1)!==0)}a&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[cd]=e,e.stateNode=r}return Ri(e),null;case 13:if(Pr(Vr),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(_r&&Eo!==null&&e.mode&1&&!(e.flags&128))CY(),Zy(),e.flags|=98560,a=!1;else if(a=U5(e),r!==null&&r.dehydrated!==null){if(t===null){if(!a)throw Error(dt(318));if(a=e.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(dt(317));a[cd]=e}else Zy(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ri(e),a=!1}else oc!==null&&(NL(oc),oc=null),a=!0;if(!a)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Vr.current&1?Us===0&&(Us=3):n$())),e.updateQueue!==null&&(e.flags|=4),Ri(e),null);case 4:return Jy(),pL(t,e),t===null&&Cj(e.stateNode.containerInfo),Ri(e),null;case 10:return $6(e.type._context),Ri(e),null;case 17:return Va(e.type)&&qE(),Ri(e),null;case 19:if(Pr(Vr),a=e.memoizedState,a===null)return Ri(e),null;if(r=(e.flags&128)!==0,o=a.rendering,o===null)if(r)K1(a,!1);else{if(Us!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=ZE(t),o!==null){for(e.flags|=128,K1(a,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)a=n,t=r,a.flags&=14680066,o=a.alternate,o===null?(a.childLanes=0,a.lanes=t,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=o.childLanes,a.lanes=o.lanes,a.child=o.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=o.memoizedProps,a.memoizedState=o.memoizedState,a.updateQueue=o.updateQueue,a.type=o.type,t=o.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return br(Vr,Vr.current&1|2),e.child}t=t.sibling}a.tail!==null&&fs()>tb&&(e.flags|=128,r=!0,K1(a,!1),e.lanes=4194304)}else{if(!r)if(t=ZE(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),K1(a,!0),a.tail===null&&a.tailMode==="hidden"&&!o.alternate&&!_r)return Ri(e),null}else 2*fs()-a.renderingStartTime>tb&&n!==1073741824&&(e.flags|=128,r=!0,K1(a,!1),e.lanes=4194304);a.isBackwards?(o.sibling=e.child,e.child=o):(n=a.last,n!==null?n.sibling=o:e.child=o,a.last=o)}return a.tail!==null?(e=a.tail,a.rendering=e,a.tail=e.sibling,a.renderingStartTime=fs(),e.sibling=null,n=Vr.current,br(Vr,r?n&1|2:n&1),e):(Ri(e),null);case 22:case 23:return t$(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?bo&1073741824&&(Ri(e),e.subtreeFlags&6&&(e.flags|=8192)):Ri(e),null;case 24:return null;case 25:return null}throw Error(dt(156,e.tag))}function eue(t,e){switch(L6(e),e.tag){case 1:return Va(e.type)&&qE(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Jy(),Pr(Ua),Pr(Qi),q6(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return V6(e),null;case 13:if(Pr(Vr),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(dt(340));Zy()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Pr(Vr),null;case 4:return Jy(),null;case 10:return $6(e.type._context),null;case 22:case 23:return t$(),null;case 24:return null;default:return null}}var H5=!1,Ki=!1,tue=typeof WeakSet=="function"?WeakSet:Set,Ct=null;function Wx(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){ts(t,e,r)}else n.current=null}function gL(t,e,n){try{n()}catch(r){ts(t,e,r)}}var N9=!1;function nue(t,e){if(JO=BE,t=fY(),_6(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch{n=null;break e}var o=0,l=-1,c=-1,d=0,u=0,h=t,f=null;t:for(;;){for(var m;h!==n||i!==0&&h.nodeType!==3||(l=o+i),h!==a||r!==0&&h.nodeType!==3||(c=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(m=h.firstChild)!==null;)f=h,h=m;for(;;){if(h===t)break t;if(f===n&&++d===i&&(l=o),f===a&&++u===r&&(c=o),(m=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=m}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(eL={focusedElem:t,selectionRange:n},BE=!1,Ct=e;Ct!==null;)if(e=Ct,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Ct=t;else for(;Ct!==null;){e=Ct;try{var v=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var p=v.memoizedProps,g=v.memoizedState,x=e.stateNode,y=x.getSnapshotBeforeUpdate(e.elementType===e.type?p:Ul(e.type,p),g);x.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var b=e.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(dt(163))}}catch(w){ts(e,e.return,w)}if(t=e.sibling,t!==null){t.return=e.return,Ct=t;break}Ct=e.return}return v=N9,N9=!1,v}function Kw(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var a=i.destroy;i.destroy=void 0,a!==void 0&&gL(e,n,a)}i=i.next}while(i!==r)}}function MI(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function vL(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function cX(t){var e=t.alternate;e!==null&&(t.alternate=null,cX(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[cd],delete e[Pj],delete e[rL],delete e[Fde],delete e[$de])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function dX(t){return t.tag===5||t.tag===3||t.tag===4}function S9(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||dX(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function xL(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=VE));else if(r!==4&&(t=t.child,t!==null))for(xL(t,e,n),t=t.sibling;t!==null;)xL(t,e,n),t=t.sibling}function yL(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(yL(t,e,n),t=t.sibling;t!==null;)yL(t,e,n),t=t.sibling}var Si=null,sc=!1;function Ih(t,e,n){for(n=n.child;n!==null;)uX(t,e,n),n=n.sibling}function uX(t,e,n){if(gd&&typeof gd.onCommitFiberUnmount=="function")try{gd.onCommitFiberUnmount(TI,n)}catch{}switch(n.tag){case 5:Ki||Wx(n,e);case 6:var r=Si,i=sc;Si=null,Ih(t,e,n),Si=r,sc=i,Si!==null&&(sc?(t=Si,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Si.removeChild(n.stateNode));break;case 18:Si!==null&&(sc?(t=Si,n=n.stateNode,t.nodeType===8?Bk(t.parentNode,n):t.nodeType===1&&Bk(t,n),Nj(t)):Bk(Si,n.stateNode));break;case 4:r=Si,i=sc,Si=n.stateNode.containerInfo,sc=!0,Ih(t,e,n),Si=r,sc=i;break;case 0:case 11:case 14:case 15:if(!Ki&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var a=i,o=a.destroy;a=a.tag,o!==void 0&&(a&2||a&4)&&gL(n,e,o),i=i.next}while(i!==r)}Ih(t,e,n);break;case 1:if(!Ki&&(Wx(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){ts(n,e,l)}Ih(t,e,n);break;case 21:Ih(t,e,n);break;case 22:n.mode&1?(Ki=(r=Ki)||n.memoizedState!==null,Ih(t,e,n),Ki=r):Ih(t,e,n);break;default:Ih(t,e,n)}}function A9(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new tue),e.forEach(function(r){var i=uue.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Rl(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var a=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:Si=l.stateNode,sc=!1;break e;case 3:Si=l.stateNode.containerInfo,sc=!0;break e;case 4:Si=l.stateNode.containerInfo,sc=!0;break e}l=l.return}if(Si===null)throw Error(dt(160));uX(a,o,i),Si=null,sc=!1;var c=i.alternate;c!==null&&(c.return=null),i.return=null}catch(d){ts(i,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)hX(e,t),e=e.sibling}function hX(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Rl(e,t),Rc(t),r&4){try{Kw(3,t,t.return),MI(3,t)}catch(p){ts(t,t.return,p)}try{Kw(5,t,t.return)}catch(p){ts(t,t.return,p)}}break;case 1:Rl(e,t),Rc(t),r&512&&n!==null&&Wx(n,n.return);break;case 5:if(Rl(e,t),Rc(t),r&512&&n!==null&&Wx(n,n.return),t.flags&32){var i=t.stateNode;try{yj(i,"")}catch(p){ts(t,t.return,p)}}if(r&4&&(i=t.stateNode,i!=null)){var a=t.memoizedProps,o=n!==null?n.memoizedProps:a,l=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{l==="input"&&a.type==="radio"&&a.name!=null&&OK(i,a),VO(l,o);var d=VO(l,a);for(o=0;o<c.length;o+=2){var u=c[o],h=c[o+1];u==="style"?$K(i,h):u==="dangerouslySetInnerHTML"?MK(i,h):u==="children"?yj(i,h):b6(i,u,h,d)}switch(l){case"input":FO(i,a);break;case"textarea":LK(i,a);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var m=a.value;m!=null?s0(i,!!a.multiple,m,!1):f!==!!a.multiple&&(a.defaultValue!=null?s0(i,!!a.multiple,a.defaultValue,!0):s0(i,!!a.multiple,a.multiple?[]:"",!1))}i[Pj]=a}catch(p){ts(t,t.return,p)}}break;case 6:if(Rl(e,t),Rc(t),r&4){if(t.stateNode===null)throw Error(dt(162));i=t.stateNode,a=t.memoizedProps;try{i.nodeValue=a}catch(p){ts(t,t.return,p)}}break;case 3:if(Rl(e,t),Rc(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Nj(e.containerInfo)}catch(p){ts(t,t.return,p)}break;case 4:Rl(e,t),Rc(t);break;case 13:Rl(e,t),Rc(t),i=t.child,i.flags&8192&&(a=i.memoizedState!==null,i.stateNode.isHidden=a,!a||i.alternate!==null&&i.alternate.memoizedState!==null||(J6=fs())),r&4&&A9(t);break;case 22:if(u=n!==null&&n.memoizedState!==null,t.mode&1?(Ki=(d=Ki)||u,Rl(e,t),Ki=d):Rl(e,t),Rc(t),r&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!u&&t.mode&1)for(Ct=t,u=t.child;u!==null;){for(h=Ct=u;Ct!==null;){switch(f=Ct,m=f.child,f.tag){case 0:case 11:case 14:case 15:Kw(4,f,f.return);break;case 1:Wx(f,f.return);var v=f.stateNode;if(typeof v.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,v.props=e.memoizedProps,v.state=e.memoizedState,v.componentWillUnmount()}catch(p){ts(r,n,p)}}break;case 5:Wx(f,f.return);break;case 22:if(f.memoizedState!==null){E9(h);continue}}m!==null?(m.return=f,Ct=m):E9(h)}u=u.sibling}e:for(u=null,h=t;;){if(h.tag===5){if(u===null){u=h;try{i=h.stateNode,d?(a=i.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(l=h.stateNode,c=h.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=FK("display",o))}catch(p){ts(t,t.return,p)}}}else if(h.tag===6){if(u===null)try{h.stateNode.nodeValue=d?"":h.memoizedProps}catch(p){ts(t,t.return,p)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;u===h&&(u=null),h=h.return}u===h&&(u=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Rl(e,t),Rc(t),r&4&&A9(t);break;case 21:break;default:Rl(e,t),Rc(t)}}function Rc(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(dX(n)){var r=n;break e}n=n.return}throw Error(dt(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(yj(i,""),r.flags&=-33);var a=S9(t);yL(t,a,i);break;case 3:case 4:var o=r.stateNode.containerInfo,l=S9(t);xL(t,l,o);break;default:throw Error(dt(161))}}catch(c){ts(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function rue(t,e,n){Ct=t,fX(t)}function fX(t,e,n){for(var r=(t.mode&1)!==0;Ct!==null;){var i=Ct,a=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||H5;if(!o){var l=i.alternate,c=l!==null&&l.memoizedState!==null||Ki;l=H5;var d=Ki;if(H5=o,(Ki=c)&&!d)for(Ct=i;Ct!==null;)o=Ct,c=o.child,o.tag===22&&o.memoizedState!==null?P9(i):c!==null?(c.return=o,Ct=c):P9(i);for(;a!==null;)Ct=a,fX(a),a=a.sibling;Ct=i,H5=l,Ki=d}C9(t)}else i.subtreeFlags&8772&&a!==null?(a.return=i,Ct=a):C9(t)}}function C9(t){for(;Ct!==null;){var e=Ct;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Ki||MI(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Ki)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Ul(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=e.updateQueue;a!==null&&d9(e,a,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}d9(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var u=d.memoizedState;if(u!==null){var h=u.dehydrated;h!==null&&Nj(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(dt(163))}Ki||e.flags&512&&vL(e)}catch(f){ts(e,e.return,f)}}if(e===t){Ct=null;break}if(n=e.sibling,n!==null){n.return=e.return,Ct=n;break}Ct=e.return}}function E9(t){for(;Ct!==null;){var e=Ct;if(e===t){Ct=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Ct=n;break}Ct=e.return}}function P9(t){for(;Ct!==null;){var e=Ct;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{MI(4,e)}catch(c){ts(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(c){ts(e,i,c)}}var a=e.return;try{vL(e)}catch(c){ts(e,a,c)}break;case 5:var o=e.return;try{vL(e)}catch(c){ts(e,o,c)}}}catch(c){ts(e,e.return,c)}if(e===t){Ct=null;break}var l=e.sibling;if(l!==null){l.return=e.return,Ct=l;break}Ct=e.return}}var sue=Math.ceil,eP=lh.ReactCurrentDispatcher,Z6=lh.ReactCurrentOwner,xl=lh.ReactCurrentBatchConfig,_n=0,ii=null,Ps=null,Pi=0,bo=0,Gx=Sm(0),Us=0,Oj=null,iv=0,FI=0,Q6=0,Yw=null,Ra=null,J6=0,tb=1/0,Qd=null,tP=!1,bL=null,Zf=null,W5=!1,zf=null,nP=0,Xw=0,wL=null,WC=-1,GC=0;function pa(){return _n&6?fs():WC!==-1?WC:WC=fs()}function Qf(t){return t.mode&1?_n&2&&Pi!==0?Pi&-Pi:zde.transition!==null?(GC===0&&(GC=ZK()),GC):(t=Qn,t!==0||(t=window.event,t=t===void 0?16:sY(t.type)),t):1}function fc(t,e,n,r){if(50<Xw)throw Xw=0,wL=null,Error(dt(185));rA(t,n,r),(!(_n&2)||t!==ii)&&(t===ii&&(!(_n&2)&&(FI|=n),Us===4&&Hh(t,Pi)),qa(t,r),n===1&&_n===0&&!(e.mode&1)&&(tb=fs()+500,OI&&Am()))}function qa(t,e){var n=t.callbackNode;zce(t,e);var r=$E(t,t===ii?Pi:0);if(r===0)n!==null&&MB(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&MB(n),e===1)t.tag===0?Bde(T9.bind(null,t)):NY(T9.bind(null,t)),Rde(function(){!(_n&6)&&Am()}),n=null;else{switch(QK(r)){case 1:n=A6;break;case 4:n=YK;break;case 16:n=FE;break;case 536870912:n=XK;break;default:n=FE}n=wX(n,mX.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function mX(t,e){if(WC=-1,GC=0,_n&6)throw Error(dt(327));var n=t.callbackNode;if(c0()&&t.callbackNode!==n)return null;var r=$E(t,t===ii?Pi:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=rP(t,r);else{e=r;var i=_n;_n|=2;var a=gX();(ii!==t||Pi!==e)&&(Qd=null,tb=fs()+500,Gg(t,e));do try{oue();break}catch(l){pX(t,l)}while(1);F6(),eP.current=a,_n=i,Ps!==null?e=0:(ii=null,Pi=0,e=Us)}if(e!==0){if(e===2&&(i=KO(t),i!==0&&(r=i,e=jL(t,i))),e===1)throw n=Oj,Gg(t,0),Hh(t,r),qa(t,fs()),n;if(e===6)Hh(t,r);else{if(i=t.current.alternate,!(r&30)&&!iue(i)&&(e=rP(t,r),e===2&&(a=KO(t),a!==0&&(r=a,e=jL(t,a))),e===1))throw n=Oj,Gg(t,0),Hh(t,r),qa(t,fs()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(dt(345));case 2:tp(t,Ra,Qd);break;case 3:if(Hh(t,r),(r&130023424)===r&&(e=J6+500-fs(),10<e)){if($E(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){pa(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=nL(tp.bind(null,t,Ra,Qd),e);break}tp(t,Ra,Qd);break;case 4:if(Hh(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-hc(r);a=1<<o,o=e[o],o>i&&(i=o),r&=~a}if(r=i,r=fs()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*sue(r/1960))-r,10<r){t.timeoutHandle=nL(tp.bind(null,t,Ra,Qd),r);break}tp(t,Ra,Qd);break;case 5:tp(t,Ra,Qd);break;default:throw Error(dt(329))}}}return qa(t,fs()),t.callbackNode===n?mX.bind(null,t):null}function jL(t,e){var n=Yw;return t.current.memoizedState.isDehydrated&&(Gg(t,e).flags|=256),t=rP(t,e),t!==2&&(e=Ra,Ra=n,e!==null&&NL(e)),t}function NL(t){Ra===null?Ra=t:Ra.push.apply(Ra,t)}function iue(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!gc(a(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Hh(t,e){for(e&=~Q6,e&=~FI,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-hc(e),r=1<<n;t[n]=-1,e&=~r}}function T9(t){if(_n&6)throw Error(dt(327));c0();var e=$E(t,0);if(!(e&1))return qa(t,fs()),null;var n=rP(t,e);if(t.tag!==0&&n===2){var r=KO(t);r!==0&&(e=r,n=jL(t,r))}if(n===1)throw n=Oj,Gg(t,0),Hh(t,e),qa(t,fs()),n;if(n===6)throw Error(dt(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,tp(t,Ra,Qd),qa(t,fs()),null}function e$(t,e){var n=_n;_n|=1;try{return t(e)}finally{_n=n,_n===0&&(tb=fs()+500,OI&&Am())}}function av(t){zf!==null&&zf.tag===0&&!(_n&6)&&c0();var e=_n;_n|=1;var n=xl.transition,r=Qn;try{if(xl.transition=null,Qn=1,t)return t()}finally{Qn=r,xl.transition=n,_n=e,!(_n&6)&&Am()}}function t$(){bo=Gx.current,Pr(Gx)}function Gg(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,Lde(n)),Ps!==null)for(n=Ps.return;n!==null;){var r=n;switch(L6(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&qE();break;case 3:Jy(),Pr(Ua),Pr(Qi),q6();break;case 5:V6(r);break;case 4:Jy();break;case 13:Pr(Vr);break;case 19:Pr(Vr);break;case 10:$6(r.type._context);break;case 22:case 23:t$()}n=n.return}if(ii=t,Ps=t=Jf(t.current,null),Pi=bo=e,Us=0,Oj=null,Q6=FI=iv=0,Ra=Yw=null,pp!==null){for(e=0;e<pp.length;e++)if(n=pp[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,a=n.pending;if(a!==null){var o=a.next;a.next=i,r.next=o}n.pending=r}pp=null}return t}function pX(t,e){do{var n=Ps;try{if(F6(),VC.current=JE,QE){for(var r=qr.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}QE=!1}if(sv=0,ri=$s=qr=null,Gw=!1,Dj=0,Z6.current=null,n===null||n.return===null){Us=1,Oj=e,Ps=null;break}e:{var a=t,o=n.return,l=n,c=e;if(e=Pi,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,u=l,h=u.tag;if(!(u.mode&1)&&(h===0||h===11||h===15)){var f=u.alternate;f?(u.updateQueue=f.updateQueue,u.memoizedState=f.memoizedState,u.lanes=f.lanes):(u.updateQueue=null,u.memoizedState=null)}var m=g9(o);if(m!==null){m.flags&=-257,v9(m,o,l,a,e),m.mode&1&&p9(a,d,e),e=m,c=d;var v=e.updateQueue;if(v===null){var p=new Set;p.add(c),e.updateQueue=p}else v.add(c);break e}else{if(!(e&1)){p9(a,d,e),n$();break e}c=Error(dt(426))}}else if(_r&&l.mode&1){var g=g9(o);if(g!==null){!(g.flags&65536)&&(g.flags|=256),v9(g,o,l,a,e),R6(eb(c,l));break e}}a=c=eb(c,l),Us!==4&&(Us=2),Yw===null?Yw=[a]:Yw.push(a),a=o;do{switch(a.tag){case 3:a.flags|=65536,e&=-e,a.lanes|=e;var x=QY(a,c,e);c9(a,x);break e;case 1:l=c;var y=a.type,b=a.stateNode;if(!(a.flags&128)&&(typeof y.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(Zf===null||!Zf.has(b)))){a.flags|=65536,e&=-e,a.lanes|=e;var w=JY(a,l,e);c9(a,w);break e}}a=a.return}while(a!==null)}xX(n)}catch(N){e=N,Ps===n&&n!==null&&(Ps=n=n.return);continue}break}while(1)}function gX(){var t=eP.current;return eP.current=JE,t===null?JE:t}function n$(){(Us===0||Us===3||Us===2)&&(Us=4),ii===null||!(iv&268435455)&&!(FI&268435455)||Hh(ii,Pi)}function rP(t,e){var n=_n;_n|=2;var r=gX();(ii!==t||Pi!==e)&&(Qd=null,Gg(t,e));do try{aue();break}catch(i){pX(t,i)}while(1);if(F6(),_n=n,eP.current=r,Ps!==null)throw Error(dt(261));return ii=null,Pi=0,Us}function aue(){for(;Ps!==null;)vX(Ps)}function oue(){for(;Ps!==null&&!kce();)vX(Ps)}function vX(t){var e=bX(t.alternate,t,bo);t.memoizedProps=t.pendingProps,e===null?xX(t):Ps=e,Z6.current=null}function xX(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=eue(n,e),n!==null){n.flags&=32767,Ps=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Us=6,Ps=null;return}}else if(n=Jde(n,e,bo),n!==null){Ps=n;return}if(e=e.sibling,e!==null){Ps=e;return}Ps=e=t}while(e!==null);Us===0&&(Us=5)}function tp(t,e,n){var r=Qn,i=xl.transition;try{xl.transition=null,Qn=1,lue(t,e,n,r)}finally{xl.transition=i,Qn=r}return null}function lue(t,e,n,r){do c0();while(zf!==null);if(_n&6)throw Error(dt(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(dt(177));t.callbackNode=null,t.callbackPriority=0;var a=n.lanes|n.childLanes;if(Uce(t,a),t===ii&&(Ps=ii=null,Pi=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||W5||(W5=!0,wX(FE,function(){return c0(),null})),a=(n.flags&15990)!==0,n.subtreeFlags&15990||a){a=xl.transition,xl.transition=null;var o=Qn;Qn=1;var l=_n;_n|=4,Z6.current=null,nue(t,n),hX(n,t),Pde(eL),BE=!!JO,eL=JO=null,t.current=n,rue(n),_ce(),_n=l,Qn=o,xl.transition=a}else t.current=n;if(W5&&(W5=!1,zf=t,nP=i),a=t.pendingLanes,a===0&&(Zf=null),Rce(n.stateNode),qa(t,fs()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(tP)throw tP=!1,t=bL,bL=null,t;return nP&1&&t.tag!==0&&c0(),a=t.pendingLanes,a&1?t===wL?Xw++:(Xw=0,wL=t):Xw=0,Am(),null}function c0(){if(zf!==null){var t=QK(nP),e=xl.transition,n=Qn;try{if(xl.transition=null,Qn=16>t?16:t,zf===null)var r=!1;else{if(t=zf,zf=null,nP=0,_n&6)throw Error(dt(331));var i=_n;for(_n|=4,Ct=t.current;Ct!==null;){var a=Ct,o=a.child;if(Ct.flags&16){var l=a.deletions;if(l!==null){for(var c=0;c<l.length;c++){var d=l[c];for(Ct=d;Ct!==null;){var u=Ct;switch(u.tag){case 0:case 11:case 15:Kw(8,u,a)}var h=u.child;if(h!==null)h.return=u,Ct=h;else for(;Ct!==null;){u=Ct;var f=u.sibling,m=u.return;if(cX(u),u===d){Ct=null;break}if(f!==null){f.return=m,Ct=f;break}Ct=m}}}var v=a.alternate;if(v!==null){var p=v.child;if(p!==null){v.child=null;do{var g=p.sibling;p.sibling=null,p=g}while(p!==null)}}Ct=a}}if(a.subtreeFlags&2064&&o!==null)o.return=a,Ct=o;else e:for(;Ct!==null;){if(a=Ct,a.flags&2048)switch(a.tag){case 0:case 11:case 15:Kw(9,a,a.return)}var x=a.sibling;if(x!==null){x.return=a.return,Ct=x;break e}Ct=a.return}}var y=t.current;for(Ct=y;Ct!==null;){o=Ct;var b=o.child;if(o.subtreeFlags&2064&&b!==null)b.return=o,Ct=b;else e:for(o=y;Ct!==null;){if(l=Ct,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:MI(9,l)}}catch(N){ts(l,l.return,N)}if(l===o){Ct=null;break e}var w=l.sibling;if(w!==null){w.return=l.return,Ct=w;break e}Ct=l.return}}if(_n=i,Am(),gd&&typeof gd.onPostCommitFiberRoot=="function")try{gd.onPostCommitFiberRoot(TI,t)}catch{}r=!0}return r}finally{Qn=n,xl.transition=e}}return!1}function I9(t,e,n){e=eb(n,e),e=QY(t,e,1),t=Xf(t,e,1),e=pa(),t!==null&&(rA(t,1,e),qa(t,e))}function ts(t,e,n){if(t.tag===3)I9(t,t,n);else for(;e!==null;){if(e.tag===3){I9(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Zf===null||!Zf.has(r))){t=eb(n,t),t=JY(e,t,1),e=Xf(e,t,1),t=pa(),e!==null&&(rA(e,1,t),qa(e,t));break}}e=e.return}}function cue(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=pa(),t.pingedLanes|=t.suspendedLanes&n,ii===t&&(Pi&n)===n&&(Us===4||Us===3&&(Pi&130023424)===Pi&&500>fs()-J6?Gg(t,0):Q6|=n),qa(t,e)}function yX(t,e){e===0&&(t.mode&1?(e=R5,R5<<=1,!(R5&130023424)&&(R5=4194304)):e=1);var n=pa();t=Qu(t,e),t!==null&&(rA(t,e,n),qa(t,n))}function due(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),yX(t,n)}function uue(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(dt(314))}r!==null&&r.delete(e),yX(t,n)}var bX;bX=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Ua.current)$a=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return $a=!1,Qde(t,e,n);$a=!!(t.flags&131072)}else $a=!1,_r&&e.flags&1048576&&SY(e,GE,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;HC(t,e),t=e.pendingProps;var i=Xy(e,Qi.current);l0(e,n),i=W6(null,e,r,t,i,n);var a=G6();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Va(r)?(a=!0,HE(e)):a=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,z6(e),i.updater=RI,e.stateNode=i,i._reactInternals=e,cL(e,r,t,n),e=hL(null,e,r,!0,a,n)):(e.tag=0,_r&&a&&O6(e),da(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(HC(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=fue(r),t=Ul(r,t),i){case 0:e=uL(null,e,r,t,n);break e;case 1:e=b9(null,e,r,t,n);break e;case 11:e=x9(null,e,r,t,n);break e;case 14:e=y9(null,e,r,Ul(r.type,t),n);break e}throw Error(dt(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ul(r,i),uL(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ul(r,i),b9(t,e,r,i,n);case 3:e:{if(rX(e),t===null)throw Error(dt(387));r=e.pendingProps,a=e.memoizedState,i=a.element,IY(t,e),XE(e,r,null,n);var o=e.memoizedState;if(r=o.element,a.isDehydrated)if(a={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=a,e.memoizedState=a,e.flags&256){i=eb(Error(dt(423)),e),e=w9(t,e,r,n,i);break e}else if(r!==i){i=eb(Error(dt(424)),e),e=w9(t,e,r,n,i);break e}else for(Eo=Yf(e.stateNode.containerInfo.firstChild),Io=e,_r=!0,oc=null,n=PY(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Zy(),r===i){e=Ju(t,e,n);break e}da(t,e,r,n)}e=e.child}return e;case 5:return DY(e),t===null&&aL(e),r=e.type,i=e.pendingProps,a=t!==null?t.memoizedProps:null,o=i.children,tL(r,i)?o=null:a!==null&&tL(r,a)&&(e.flags|=32),nX(t,e),da(t,e,o,n),e.child;case 6:return t===null&&aL(e),null;case 13:return sX(t,e,n);case 4:return U6(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Qy(e,null,r,n):da(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ul(r,i),x9(t,e,r,i,n);case 7:return da(t,e,e.pendingProps,n),e.child;case 8:return da(t,e,e.pendingProps.children,n),e.child;case 12:return da(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,a=e.memoizedProps,o=i.value,br(KE,r._currentValue),r._currentValue=o,a!==null)if(gc(a.value,o)){if(a.children===i.children&&!Ua.current){e=Ju(t,e,n);break e}}else for(a=e.child,a!==null&&(a.return=e);a!==null;){var l=a.dependencies;if(l!==null){o=a.child;for(var c=l.firstContext;c!==null;){if(c.context===r){if(a.tag===1){c=Gu(-1,n&-n),c.tag=2;var d=a.updateQueue;if(d!==null){d=d.shared;var u=d.pending;u===null?c.next=c:(c.next=u.next,u.next=c),d.pending=c}}a.lanes|=n,c=a.alternate,c!==null&&(c.lanes|=n),oL(a.return,n,e),l.lanes|=n;break}c=c.next}}else if(a.tag===10)o=a.type===e.type?null:a.child;else if(a.tag===18){if(o=a.return,o===null)throw Error(dt(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),oL(o,n,e),o=a.sibling}else o=a.child;if(o!==null)o.return=a;else for(o=a;o!==null;){if(o===e){o=null;break}if(a=o.sibling,a!==null){a.return=o.return,o=a;break}o=o.return}a=o}da(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,l0(e,n),i=bl(i),r=r(i),e.flags|=1,da(t,e,r,n),e.child;case 14:return r=e.type,i=Ul(r,e.pendingProps),i=Ul(r.type,i),y9(t,e,r,i,n);case 15:return eX(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ul(r,i),HC(t,e),e.tag=1,Va(r)?(t=!0,HE(e)):t=!1,l0(e,n),ZY(e,r,i),cL(e,r,i,n),hL(null,e,r,!0,t,n);case 19:return iX(t,e,n);case 22:return tX(t,e,n)}throw Error(dt(156,e.tag))};function wX(t,e){return KK(t,e)}function hue(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ml(t,e,n,r){return new hue(t,e,n,r)}function r$(t){return t=t.prototype,!(!t||!t.isReactComponent)}function fue(t){if(typeof t=="function")return r$(t)?1:0;if(t!=null){if(t=t.$$typeof,t===j6)return 11;if(t===N6)return 14}return 2}function Jf(t,e){var n=t.alternate;return n===null?(n=ml(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function KC(t,e,n,r,i,a){var o=2;if(r=t,typeof t=="function")r$(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Mx:return Kg(n.children,i,a,e);case w6:o=8,i|=8;break;case _O:return t=ml(12,n,e,i|2),t.elementType=_O,t.lanes=a,t;case OO:return t=ml(13,n,e,i),t.elementType=OO,t.lanes=a,t;case LO:return t=ml(19,n,e,i),t.elementType=LO,t.lanes=a,t;case DK:return $I(n,i,a,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case TK:o=10;break e;case IK:o=9;break e;case j6:o=11;break e;case N6:o=14;break e;case $h:o=16,r=null;break e}throw Error(dt(130,t==null?t:typeof t,""))}return e=ml(o,n,e,i),e.elementType=t,e.type=r,e.lanes=a,e}function Kg(t,e,n,r){return t=ml(7,t,r,e),t.lanes=n,t}function $I(t,e,n,r){return t=ml(22,t,r,e),t.elementType=DK,t.lanes=n,t.stateNode={isHidden:!1},t}function Kk(t,e,n){return t=ml(6,t,null,e),t.lanes=n,t}function Yk(t,e,n){return e=ml(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function mue(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Tk(0),this.expirationTimes=Tk(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Tk(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function s$(t,e,n,r,i,a,o,l,c){return t=new mue(t,e,n,l,c),e===1?(e=1,a===!0&&(e|=8)):e=0,a=ml(3,null,null,e),t.current=a,a.stateNode=t,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},z6(a),t}function pue(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Rx,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function jX(t){if(!t)return um;t=t._reactInternals;e:{if(wv(t)!==t||t.tag!==1)throw Error(dt(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Va(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(dt(171))}if(t.tag===1){var n=t.type;if(Va(n))return jY(t,n,e)}return e}function NX(t,e,n,r,i,a,o,l,c){return t=s$(n,r,!0,t,i,a,o,l,c),t.context=jX(null),n=t.current,r=pa(),i=Qf(n),a=Gu(r,i),a.callback=e??null,Xf(n,a,i),t.current.lanes=i,rA(t,i,r),qa(t,r),t}function BI(t,e,n,r){var i=e.current,a=pa(),o=Qf(i);return n=jX(n),e.context===null?e.context=n:e.pendingContext=n,e=Gu(a,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Xf(i,e,o),t!==null&&(fc(t,i,o,a),UC(t,i,o)),o}function sP(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function D9(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function i$(t,e){D9(t,e),(t=t.alternate)&&D9(t,e)}function gue(){return null}var SX=typeof reportError=="function"?reportError:function(t){console.error(t)};function a$(t){this._internalRoot=t}zI.prototype.render=a$.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(dt(409));BI(t,e,null,null)};zI.prototype.unmount=a$.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;av(function(){BI(null,t,null,null)}),e[Zu]=null}};function zI(t){this._internalRoot=t}zI.prototype.unstable_scheduleHydration=function(t){if(t){var e=tY();t={blockedOn:null,target:t,priority:e};for(var n=0;n<qh.length&&e!==0&&e<qh[n].priority;n++);qh.splice(n,0,t),n===0&&rY(t)}};function o$(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function UI(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function k9(){}function vue(t,e,n,r,i){if(i){if(typeof r=="function"){var a=r;r=function(){var d=sP(o);a.call(d)}}var o=NX(e,r,t,0,null,!1,!1,"",k9);return t._reactRootContainer=o,t[Zu]=o.current,Cj(t.nodeType===8?t.parentNode:t),av(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var l=r;r=function(){var d=sP(c);l.call(d)}}var c=s$(t,0,!1,null,null,!1,!1,"",k9);return t._reactRootContainer=c,t[Zu]=c.current,Cj(t.nodeType===8?t.parentNode:t),av(function(){BI(e,c,n,r)}),c}function VI(t,e,n,r,i){var a=n._reactRootContainer;if(a){var o=a;if(typeof i=="function"){var l=i;i=function(){var c=sP(o);l.call(c)}}BI(e,o,t,i)}else o=vue(n,e,t,i,r);return sP(o)}JK=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=bw(e.pendingLanes);n!==0&&(C6(e,n|1),qa(e,fs()),!(_n&6)&&(tb=fs()+500,Am()))}break;case 13:av(function(){var r=Qu(t,1);if(r!==null){var i=pa();fc(r,t,1,i)}}),i$(t,1)}};E6=function(t){if(t.tag===13){var e=Qu(t,134217728);if(e!==null){var n=pa();fc(e,t,134217728,n)}i$(t,134217728)}};eY=function(t){if(t.tag===13){var e=Qf(t),n=Qu(t,e);if(n!==null){var r=pa();fc(n,t,e,r)}i$(t,e)}};tY=function(){return Qn};nY=function(t,e){var n=Qn;try{return Qn=t,e()}finally{Qn=n}};HO=function(t,e,n){switch(e){case"input":if(FO(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=_I(r);if(!i)throw Error(dt(90));_K(r),FO(r,i)}}}break;case"textarea":LK(t,n);break;case"select":e=n.value,e!=null&&s0(t,!!n.multiple,e,!1)}};UK=e$;VK=av;var xue={usingClientEntryPoint:!1,Events:[iA,zx,_I,BK,zK,e$]},Y1={findFiberByHostInstance:mp,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},yue={bundleType:Y1.bundleType,version:Y1.version,rendererPackageName:Y1.rendererPackageName,rendererConfig:Y1.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:lh.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=WK(t),t===null?null:t.stateNode},findFiberByHostInstance:Y1.findFiberByHostInstance||gue,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var G5=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!G5.isDisabled&&G5.supportsFiber)try{TI=G5.inject(yue),gd=G5}catch{}}$o.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=xue;$o.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!o$(e))throw Error(dt(200));return pue(t,e,null,n)};$o.createRoot=function(t,e){if(!o$(t))throw Error(dt(299));var n=!1,r="",i=SX;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=s$(t,1,!1,null,null,n,!1,r,i),t[Zu]=e.current,Cj(t.nodeType===8?t.parentNode:t),new a$(e)};$o.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(dt(188)):(t=Object.keys(t).join(","),Error(dt(268,t)));return t=WK(e),t=t===null?null:t.stateNode,t};$o.flushSync=function(t){return av(t)};$o.hydrate=function(t,e,n){if(!UI(e))throw Error(dt(200));return VI(null,t,e,!0,n)};$o.hydrateRoot=function(t,e,n){if(!o$(t))throw Error(dt(405));var r=n!=null&&n.hydratedSources||null,i=!1,a="",o=SX;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(a=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=NX(e,null,t,1,n??null,i,!1,a,o),t[Zu]=e.current,Cj(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new zI(e)};$o.render=function(t,e,n){if(!UI(e))throw Error(dt(200));return VI(null,t,e,!1,n)};$o.unmountComponentAtNode=function(t){if(!UI(t))throw Error(dt(40));return t._reactRootContainer?(av(function(){VI(null,null,t,!1,function(){t._reactRootContainer=null,t[Zu]=null})}),!0):!1};$o.unstable_batchedUpdates=e$;$o.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!UI(n))throw Error(dt(200));if(t==null||t._reactInternals===void 0)throw Error(dt(38));return VI(t,e,n,!1,r)};$o.version="18.3.1-next-f1338f8080-20240426";function AX(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(AX)}catch(t){console.error(t)}}AX(),AK.exports=$o;var ch=AK.exports;const qI=$n(ch);var _9=ch;DO.createRoot=_9.createRoot,DO.hydrateRoot=_9.hydrateRoot;const bue="modulepreload",wue=function(t){return"/"+t},O9={},Lj=function(e,n,r){if(!n||n.length===0)return e();const i=document.getElementsByTagName("link");return Promise.all(n.map(a=>{if(a=wue(a),a in O9)return;O9[a]=!0;const o=a.endsWith(".css"),l=o?'[rel="stylesheet"]':"";if(!!r)for(let u=i.length-1;u>=0;u--){const h=i[u];if(h.href===a&&(!o||h.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${a}"]${l}`))return;const d=document.createElement("link");if(d.rel=o?"stylesheet":bue,o||(d.as="script",d.crossOrigin=""),d.href=a,document.head.appendChild(d),o)return new Promise((u,h)=>{d.addEventListener("load",u),d.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${a}`)))})})).then(()=>e()).catch(a=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=a,window.dispatchEvent(o),!o.defaultPrevented)throw a})},ca=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),SL=[.001,0,0,.001,0,0],Xk=1.35,yo={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},$u={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},CX="pdfjs_internal_editor_",en={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,SIGNATURE:101},Nn={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32,HIGHLIGHT_THICKNESS:33,HIGHLIGHT_FREE:34,HIGHLIGHT_SHOW_ALL:35,DRAW_STEP:41},EX={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},zi={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},Zw={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},ls={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},Cx={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},oA={ERRORS:0,WARNINGS:1,INFOS:5},Rj={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},K5={moveTo:0,lineTo:1,curveTo:2,closePath:3},PX={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let HI=oA.WARNINGS;function jue(t){Number.isInteger(t)&&(HI=t)}function Nue(){return HI}function WI(t){HI>=oA.INFOS&&console.log(`Info: ${t}`)}function an(t){HI>=oA.WARNINGS&&console.log(`Warning: ${t}`)}function ir(t){throw new Error(t)}function Ts(t,e){t||ir(e)}function Sue(t){switch(t==null?void 0:t.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function l$(t,e=null,n=null){if(!t)return null;if(n&&typeof t=="string"){if(n.addDefaultProtocol&&t.startsWith("www.")){const i=t.match(/\./g);(i==null?void 0:i.length)>=2&&(t=`http://${t}`)}if(n.tryConvertEncoding)try{t=Tue(t)}catch{}}const r=e?URL.parse(t,e):URL.parse(t);return Sue(r)?r:null}function c$(t,e,n=!1){const r=URL.parse(t);return r?(r.hash=e,r.href):n&&l$(t,"http://example.com")?t.split("#",1)[0]+`${e?`#${e}`:""}`:""}function xn(t,e,n,r=!1){return Object.defineProperty(t,e,{value:n,enumerable:!r,configurable:!0,writable:!1}),n}const jv=function(){function e(n,r){this.message=n,this.name=r}return e.prototype=new Error,e.constructor=e,e}();class L9 extends jv{constructor(e,n){super(e,"PasswordException"),this.code=n}}class Zk extends jv{constructor(e,n){super(e,"UnknownErrorException"),this.details=n}}class iP extends jv{constructor(e){super(e,"InvalidPDFException")}}class Mj extends jv{constructor(e,n,r){super(e,"ResponseException"),this.status=n,this.missing=r}}class Aue extends jv{constructor(e){super(e,"FormatError")}}class eh extends jv{constructor(e){super(e,"AbortException")}}function TX(t){(typeof t!="object"||(t==null?void 0:t.length)===void 0)&&ir("Invalid argument for bytesToString");const e=t.length,n=8192;if(e<n)return String.fromCharCode.apply(null,t);const r=[];for(let i=0;i<e;i+=n){const a=Math.min(i+n,e),o=t.subarray(i,a);r.push(String.fromCharCode.apply(null,o))}return r.join("")}function lA(t){typeof t!="string"&&ir("Invalid argument for stringToBytes");const e=t.length,n=new Uint8Array(e);for(let r=0;r<e;++r)n[r]=t.charCodeAt(r)&255;return n}function Cue(t){return String.fromCharCode(t>>24&255,t>>16&255,t>>8&255,t&255)}function Eue(){const t=new Uint8Array(4);return t[0]=1,new Uint32Array(t.buffer,0,1)[0]===1}function Pue(){try{return new Function(""),!0}catch{return!1}}class ai{static get isLittleEndian(){return xn(this,"isLittleEndian",Eue())}static get isEvalSupported(){return xn(this,"isEvalSupported",Pue())}static get isOffscreenCanvasSupported(){return xn(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return xn(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get platform(){const{platform:e,userAgent:n}=navigator;return xn(this,"platform",{isAndroid:n.includes("Android"),isLinux:e.includes("Linux"),isMac:e.includes("Mac"),isWindows:e.includes("Win"),isFirefox:n.includes("Firefox")})}static get isCSSRoundSupported(){var e,n;return xn(this,"isCSSRoundSupported",(n=(e=globalThis.CSS)==null?void 0:e.supports)==null?void 0:n.call(e,"width: round(1.5px, 1px)"))}}const Qk=Array.from(Array(256).keys(),t=>t.toString(16).padStart(2,"0"));var v0,YC,$2,AL;class kt{static makeHexColor(e,n,r){return`#${Qk[e]}${Qk[n]}${Qk[r]}`}static scaleMinMax(e,n){let r;e[0]?(e[0]<0&&(r=n[0],n[0]=n[2],n[2]=r),n[0]*=e[0],n[2]*=e[0],e[3]<0&&(r=n[1],n[1]=n[3],n[3]=r),n[1]*=e[3],n[3]*=e[3]):(r=n[0],n[0]=n[1],n[1]=r,r=n[2],n[2]=n[3],n[3]=r,e[1]<0&&(r=n[1],n[1]=n[3],n[3]=r),n[1]*=e[1],n[3]*=e[1],e[2]<0&&(r=n[0],n[0]=n[2],n[2]=r),n[0]*=e[2],n[2]*=e[2]),n[0]+=e[4],n[1]+=e[5],n[2]+=e[4],n[3]+=e[5]}static transform(e,n){return[e[0]*n[0]+e[2]*n[1],e[1]*n[0]+e[3]*n[1],e[0]*n[2]+e[2]*n[3],e[1]*n[2]+e[3]*n[3],e[0]*n[4]+e[2]*n[5]+e[4],e[1]*n[4]+e[3]*n[5]+e[5]]}static applyTransform(e,n,r=0){const i=e[r],a=e[r+1];e[r]=i*n[0]+a*n[2]+n[4],e[r+1]=i*n[1]+a*n[3]+n[5]}static applyTransformToBezier(e,n,r=0){const i=n[0],a=n[1],o=n[2],l=n[3],c=n[4],d=n[5];for(let u=0;u<6;u+=2){const h=e[r+u],f=e[r+u+1];e[r+u]=h*i+f*o+c,e[r+u+1]=h*a+f*l+d}}static applyInverseTransform(e,n){const r=e[0],i=e[1],a=n[0]*n[3]-n[1]*n[2];e[0]=(r*n[3]-i*n[2]+n[2]*n[5]-n[4]*n[3])/a,e[1]=(-r*n[1]+i*n[0]+n[4]*n[1]-n[5]*n[0])/a}static axialAlignedBoundingBox(e,n,r){const i=n[0],a=n[1],o=n[2],l=n[3],c=n[4],d=n[5],u=e[0],h=e[1],f=e[2],m=e[3];let v=i*u+c,p=v,g=i*f+c,x=g,y=l*h+d,b=y,w=l*m+d,N=w;if(a!==0||o!==0){const E=a*u,C=a*f,j=o*h,I=o*m;v+=j,x+=j,g+=I,p+=I,y+=E,N+=E,w+=C,b+=C}r[0]=Math.min(r[0],v,g,p,x),r[1]=Math.min(r[1],y,w,b,N),r[2]=Math.max(r[2],v,g,p,x),r[3]=Math.max(r[3],y,w,b,N)}static inverseTransform(e){const n=e[0]*e[3]-e[1]*e[2];return[e[3]/n,-e[1]/n,-e[2]/n,e[0]/n,(e[2]*e[5]-e[4]*e[3])/n,(e[4]*e[1]-e[5]*e[0])/n]}static singularValueDecompose2dScale(e,n){const r=e[0],i=e[1],a=e[2],o=e[3],l=r**2+i**2,c=r*a+i*o,d=a**2+o**2,u=(l+d)/2,h=Math.sqrt(u**2-(l*d-c**2));n[0]=Math.sqrt(u+h||1),n[1]=Math.sqrt(u-h||1)}static normalizeRect(e){const n=e.slice(0);return e[0]>e[2]&&(n[0]=e[2],n[2]=e[0]),e[1]>e[3]&&(n[1]=e[3],n[3]=e[1]),n}static intersect(e,n){const r=Math.max(Math.min(e[0],e[2]),Math.min(n[0],n[2])),i=Math.min(Math.max(e[0],e[2]),Math.max(n[0],n[2]));if(r>i)return null;const a=Math.max(Math.min(e[1],e[3]),Math.min(n[1],n[3])),o=Math.min(Math.max(e[1],e[3]),Math.max(n[1],n[3]));return a>o?null:[r,a,i,o]}static pointBoundingBox(e,n,r){r[0]=Math.min(r[0],e),r[1]=Math.min(r[1],n),r[2]=Math.max(r[2],e),r[3]=Math.max(r[3],n)}static rectBoundingBox(e,n,r,i,a){a[0]=Math.min(a[0],e,r),a[1]=Math.min(a[1],n,i),a[2]=Math.max(a[2],e,r),a[3]=Math.max(a[3],n,i)}static bezierBoundingBox(e,n,r,i,a,o,l,c,d){d[0]=Math.min(d[0],e,l),d[1]=Math.min(d[1],n,c),d[2]=Math.max(d[2],e,l),d[3]=Math.max(d[3],n,c),se(this,$2,AL).call(this,e,r,a,l,n,i,o,c,3*(-e+3*(r-a)+l),6*(e-2*r+a),3*(r-e),d),se(this,$2,AL).call(this,e,r,a,l,n,i,o,c,3*(-n+3*(i-o)+c),6*(n-2*i+o),3*(i-n),d)}}v0=new WeakSet,YC=function(e,n,r,i,a,o,l,c,d,u){if(d<=0||d>=1)return;const h=1-d,f=d*d,m=f*d,v=h*(h*(h*e+3*d*n)+3*f*r)+m*i,p=h*(h*(h*a+3*d*o)+3*f*l)+m*c;u[0]=Math.min(u[0],v),u[1]=Math.min(u[1],p),u[2]=Math.max(u[2],v),u[3]=Math.max(u[3],p)},$2=new WeakSet,AL=function(e,n,r,i,a,o,l,c,d,u,h,f){if(Math.abs(d)<1e-12){Math.abs(u)>=1e-12&&se(this,v0,YC).call(this,e,n,r,i,a,o,l,c,-h/u,f);return}const m=u**2-4*h*d;if(m<0)return;const v=Math.sqrt(m),p=2*d;se(this,v0,YC).call(this,e,n,r,i,a,o,l,c,(-u+v)/p,f),se(this,v0,YC).call(this,e,n,r,i,a,o,l,c,(-u-v)/p,f)},G(kt,v0),G(kt,$2);function Tue(t){return decodeURIComponent(escape(t))}let Jk=null,R9=null;function IX(t){return Jk||(Jk=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,R9=new Map([["","t"]])),t.replaceAll(Jk,(e,n,r)=>n?n.normalize("NFKC"):R9.get(r))}function d$(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const t=new Uint8Array(32);return crypto.getRandomValues(t),TX(t)}const u$="pdfjs_internal_id_";function Iue(t,e,n){if(!Array.isArray(n)||n.length<2)return!1;const[r,i,...a]=n;if(!t(r)&&!Number.isInteger(r)||!e(i))return!1;const o=a.length;let l=!0;switch(i.name){case"XYZ":if(o<2||o>3)return!1;break;case"Fit":case"FitB":return o===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(o>1)return!1;break;case"FitR":if(o!==4)return!1;l=!1;break;default:return!1}for(const c of a)if(!(typeof c=="number"||l&&c===null))return!1;return!0}function Wi(t,e,n){return Math.min(Math.max(t,e),n)}function DX(t){return Uint8Array.prototype.toBase64?t.toBase64():btoa(TX(t))}function Due(t){return Uint8Array.fromBase64?Uint8Array.fromBase64(t):lA(atob(t))}typeof Promise.try!="function"&&(Promise.try=function(t,...e){return new Promise(n=>{n(t(...e))})});typeof Math.sumPrecise!="function"&&(Math.sumPrecise=function(t){return t.reduce((e,n)=>e+n,0)});const Yd="http://www.w3.org/2000/svg",hp=class hp{};ut(hp,"CSS",96),ut(hp,"PDF",72),ut(hp,"PDF_TO_CSS_UNITS",hp.CSS/hp.PDF);let th=hp;async function Ub(t,e="text"){if(jw(t,document.baseURI)){const n=await fetch(t);if(!n.ok)throw new Error(n.statusText);switch(e){case"arraybuffer":return n.arrayBuffer();case"blob":return n.blob();case"json":return n.json()}return n.text()}return new Promise((n,r)=>{const i=new XMLHttpRequest;i.open("GET",t,!0),i.responseType=e,i.onreadystatechange=()=>{if(i.readyState===XMLHttpRequest.DONE){if(i.status===200||i.status===0){switch(e){case"arraybuffer":case"blob":case"json":n(i.response);return}n(i.responseText);return}r(new Error(i.statusText))}},i.send(null)})}class cA{constructor({viewBox:e,userUnit:n,scale:r,rotation:i,offsetX:a=0,offsetY:o=0,dontFlip:l=!1}){this.viewBox=e,this.userUnit=n,this.scale=r,this.rotation=i,this.offsetX=a,this.offsetY=o,r*=n;const c=(e[2]+e[0])/2,d=(e[3]+e[1])/2;let u,h,f,m;switch(i%=360,i<0&&(i+=360),i){case 180:u=-1,h=0,f=0,m=1;break;case 90:u=0,h=1,f=1,m=0;break;case 270:u=0,h=-1,f=-1,m=0;break;case 0:u=1,h=0,f=0,m=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}l&&(f=-f,m=-m);let v,p,g,x;u===0?(v=Math.abs(d-e[1])*r+a,p=Math.abs(c-e[0])*r+o,g=(e[3]-e[1])*r,x=(e[2]-e[0])*r):(v=Math.abs(c-e[0])*r+a,p=Math.abs(d-e[1])*r+o,g=(e[2]-e[0])*r,x=(e[3]-e[1])*r),this.transform=[u*r,h*r,f*r,m*r,v-u*r*c-f*r*d,p-h*r*c-m*r*d],this.width=g,this.height=x}get rawDims(){const e=this.viewBox;return xn(this,"rawDims",{pageWidth:e[2]-e[0],pageHeight:e[3]-e[1],pageX:e[0],pageY:e[1]})}clone({scale:e=this.scale,rotation:n=this.rotation,offsetX:r=this.offsetX,offsetY:i=this.offsetY,dontFlip:a=!1}={}){return new cA({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:e,rotation:n,offsetX:r,offsetY:i,dontFlip:a})}convertToViewportPoint(e,n){const r=[e,n];return kt.applyTransform(r,this.transform),r}convertToViewportRectangle(e){const n=[e[0],e[1]];kt.applyTransform(n,this.transform);const r=[e[2],e[3]];return kt.applyTransform(r,this.transform),[n[0],n[1],r[0],r[1]]}convertToPdfPoint(e,n){const r=[e,n];return kt.applyInverseTransform(r,this.transform),r}}class GI extends jv{constructor(e,n=0){super(e,"RenderingCancelledException"),this.extraDelay=n}}function dA(t){const e=t.length;let n=0;for(;n<e&&t[n].trim()==="";)n++;return t.substring(n,n+5).toLowerCase()==="data:"}function KI(t){return typeof t=="string"&&/\.pdf$/i.test(t)}function kX(t){return[t]=t.split(/[#?]/,1),t.substring(t.lastIndexOf("/")+1)}function _X(t,e="document.pdf"){if(typeof t!="string")return e;if(dA(t))return an('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),e;const r=(l=>{try{return new URL(l)}catch{try{return new URL(decodeURIComponent(l))}catch{try{return new URL(l,"https://foo.bar")}catch{try{return new URL(decodeURIComponent(l),"https://foo.bar")}catch{return null}}}}})(t);if(!r)return e;const i=l=>{try{let c=decodeURIComponent(l);return c.includes("/")?(c=c.split("/").at(-1),c.test(/^\.pdf$/i)?c:l):c}catch{return l}},a=/\.pdf$/i,o=r.pathname.split("/").at(-1);if(a.test(o))return i(o);if(r.searchParams.size>0){const l=Array.from(r.searchParams.values()).reverse();for(const d of l)if(a.test(d))return i(d);const c=Array.from(r.searchParams.keys()).reverse();for(const d of c)if(a.test(d))return i(d)}if(r.hash){const c=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i.exec(r.hash);if(c)return i(c[0])}return e}class M9{constructor(){ut(this,"started",Object.create(null));ut(this,"times",[])}time(e){e in this.started&&an(`Timer is already running for ${e}`),this.started[e]=Date.now()}timeEnd(e){e in this.started||an(`Timer has not been started for ${e}`),this.times.push({name:e,start:this.started[e],end:Date.now()}),delete this.started[e]}toString(){const e=[];let n=0;for(const{name:r}of this.times)n=Math.max(r.length,n);for(const{name:r,start:i,end:a}of this.times)e.push(`${r.padEnd(n)} ${a-i}ms
`);return e.join("")}}function jw(t,e){const n=e?URL.parse(t,e):URL.parse(t);return(n==null?void 0:n.protocol)==="http:"||(n==null?void 0:n.protocol)==="https:"}function jl(t){t.preventDefault()}function hs(t){t.preventDefault(),t.stopPropagation()}function kue(t){console.log("Deprecated API usage: "+t)}var B2;class YI{static toDateObject(e){if(!e||typeof e!="string")return null;S(this,B2)||Z(this,B2,new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const n=S(this,B2).exec(e);if(!n)return null;const r=parseInt(n[1],10);let i=parseInt(n[2],10);i=i>=1&&i<=12?i-1:0;let a=parseInt(n[3],10);a=a>=1&&a<=31?a:1;let o=parseInt(n[4],10);o=o>=0&&o<=23?o:0;let l=parseInt(n[5],10);l=l>=0&&l<=59?l:0;let c=parseInt(n[6],10);c=c>=0&&c<=59?c:0;const d=n[7]||"Z";let u=parseInt(n[8],10);u=u>=0&&u<=23?u:0;let h=parseInt(n[9],10)||0;return h=h>=0&&h<=59?h:0,d==="-"?(o+=u,l+=h):d==="+"&&(o-=u,l-=h),new Date(Date.UTC(r,i,a,o,l,c))}}B2=new WeakMap,G(YI,B2,void 0);function OX(t,{scale:e=1,rotation:n=0}){const{width:r,height:i}=t.attributes.style,a=[0,0,parseInt(r),parseInt(i)];return new cA({viewBox:a,userUnit:1,scale:e,rotation:n})}function h$(t){if(t.startsWith("#")){const e=parseInt(t.slice(1),16);return[(e&16711680)>>16,(e&65280)>>8,e&255]}return t.startsWith("rgb(")?t.slice(4,-1).split(",").map(e=>parseInt(e)):t.startsWith("rgba(")?t.slice(5,-1).split(",").map(e=>parseInt(e)).slice(0,3):(an(`Not a valid color format: "${t}"`),[0,0,0])}function _ue(t){const e=document.createElement("span");e.style.visibility="hidden",e.style.colorScheme="only light",document.body.append(e);for(const n of t.keys()){e.style.color=n;const r=window.getComputedStyle(e).color;t.set(n,h$(r))}e.remove()}function $r(t){const{a:e,b:n,c:r,d:i,e:a,f:o}=t.getTransform();return[e,n,r,i,a,o]}function Mc(t){const{a:e,b:n,c:r,d:i,e:a,f:o}=t.getTransform().invertSelf();return[e,n,r,i,a,o]}function hm(t,e,n=!1,r=!0){if(e instanceof cA){const{pageWidth:i,pageHeight:a}=e.rawDims,{style:o}=t,l=ai.isCSSRoundSupported,c=`var(--total-scale-factor) * ${i}px`,d=`var(--total-scale-factor) * ${a}px`,u=l?`round(down, ${c}, var(--scale-round-x))`:`calc(${c})`,h=l?`round(down, ${d}, var(--scale-round-y))`:`calc(${d})`;!n||e.rotation%180===0?(o.width=u,o.height=h):(o.width=h,o.height=u)}r&&t.setAttribute("data-main-rotation",e.rotation)}class vc{constructor(){const{pixelRatio:e}=vc;this.sx=e,this.sy=e}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}limitCanvas(e,n,r,i,a=-1){let o=1/0,l=1/0,c=1/0;r=vc.capPixels(r,a),r>0&&(o=Math.sqrt(r/(e*n))),i!==-1&&(l=i/e,c=i/n);const d=Math.min(o,l,c);return this.sx>d||this.sy>d?(this.sx=d,this.sy=d,!0):!1}static get pixelRatio(){return globalThis.devicePixelRatio||1}static capPixels(e,n){if(n>=0){const r=Math.ceil(window.screen.availWidth*window.screen.availHeight*this.pixelRatio**2*(1+n/100));return e>0?Math.min(e,r):r}return e}}const aP=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];var Xh,Sp,rl,Zh,z2,x0,U2,M4,LX,F4,RX,$4,MX,Ap,Nw,y0,XC;const tu=class tu{constructor(e){G(this,F4);G(this,$4);G(this,Ap);G(this,y0);G(this,Xh,null);G(this,Sp,null);G(this,rl,void 0);G(this,Zh,null);G(this,z2,null);G(this,x0,null);Z(this,rl,e),S(tu,U2)||Z(tu,U2,Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"}))}render(){const e=Z(this,Xh,document.createElement("div"));e.classList.add("editToolbar","hidden"),e.setAttribute("role","toolbar");const n=S(this,rl)._uiManager._signal;e.addEventListener("contextmenu",jl,{signal:n}),e.addEventListener("pointerdown",se(tu,M4,LX),{signal:n});const r=Z(this,Zh,document.createElement("div"));r.className="buttons",e.append(r);const i=S(this,rl).toolbarPosition;if(i){const{style:a}=e,o=S(this,rl)._uiManager.direction==="ltr"?1-i[0]:i[0];a.insetInlineEnd=`${100*o}%`,a.top=`calc(${100*i[1]}% + var(--editor-toolbar-vert-offset))`}return e}get div(){return S(this,Xh)}hide(){var e;S(this,Xh).classList.add("hidden"),(e=S(this,Sp))==null||e.hideDropdown()}show(){var e;S(this,Xh).classList.remove("hidden"),(e=S(this,z2))==null||e.shown()}addDeleteButton(){const{editorType:e,_uiManager:n}=S(this,rl),r=document.createElement("button");r.className="delete",r.tabIndex=0,r.setAttribute("data-l10n-id",S(tu,U2)[e]),se(this,Ap,Nw).call(this,r),r.addEventListener("click",i=>{n.delete()},{signal:n._signal}),S(this,Zh).append(r)}async addAltText(e){const n=await e.render();se(this,Ap,Nw).call(this,n),S(this,Zh).append(n,S(this,y0,XC)),Z(this,z2,e)}addColorPicker(e){Z(this,Sp,e);const n=e.renderButton();se(this,Ap,Nw).call(this,n),S(this,Zh).append(n,S(this,y0,XC))}async addEditSignatureButton(e){const n=Z(this,x0,await e.renderEditButton(S(this,rl)));se(this,Ap,Nw).call(this,n),S(this,Zh).append(n,S(this,y0,XC))}async addButton(e,n){switch(e){case"colorPicker":this.addColorPicker(n);break;case"altText":await this.addAltText(n);break;case"editSignature":await this.addEditSignatureButton(n);break;case"delete":this.addDeleteButton();break}}updateEditSignatureButton(e){S(this,x0)&&(S(this,x0).title=e)}remove(){var e;S(this,Xh).remove(),(e=S(this,Sp))==null||e.destroy(),Z(this,Sp,null)}};Xh=new WeakMap,Sp=new WeakMap,rl=new WeakMap,Zh=new WeakMap,z2=new WeakMap,x0=new WeakMap,U2=new WeakMap,M4=new WeakSet,LX=function(e){e.stopPropagation()},F4=new WeakSet,RX=function(e){S(this,rl)._focusEventsAllowed=!1,hs(e)},$4=new WeakSet,MX=function(e){S(this,rl)._focusEventsAllowed=!0,hs(e)},Ap=new WeakSet,Nw=function(e){const n=S(this,rl)._uiManager._signal;e.addEventListener("focusin",se(this,F4,RX).bind(this),{capture:!0,signal:n}),e.addEventListener("focusout",se(this,$4,MX).bind(this),{capture:!0,signal:n}),e.addEventListener("contextmenu",jl,{signal:n})},y0=new WeakSet,XC=function(){const e=document.createElement("div");return e.className="divider",e},G(tu,M4),G(tu,U2,null);let CL=tu;var V2,Cp,Ep,B4,FX,z4,$X,U4,BX;class Oue{constructor(e){G(this,B4);G(this,z4);G(this,U4);G(this,V2,null);G(this,Cp,null);G(this,Ep,void 0);Z(this,Ep,e)}show(e,n,r){const[i,a]=se(this,z4,$X).call(this,n,r),{style:o}=S(this,Cp)||Z(this,Cp,se(this,B4,FX).call(this));e.append(S(this,Cp)),o.insetInlineEnd=`${100*i}%`,o.top=`calc(${100*a}% + var(--editor-toolbar-vert-offset))`}hide(){S(this,Cp).remove()}}V2=new WeakMap,Cp=new WeakMap,Ep=new WeakMap,B4=new WeakSet,FX=function(){const e=Z(this,Cp,document.createElement("div"));e.className="editToolbar",e.setAttribute("role","toolbar"),e.addEventListener("contextmenu",jl,{signal:S(this,Ep)._signal});const n=Z(this,V2,document.createElement("div"));return n.className="buttons",e.append(n),se(this,U4,BX).call(this),e},z4=new WeakSet,$X=function(e,n){let r=0,i=0;for(const a of e){const o=a.y+a.height;if(o<r)continue;const l=a.x+(n?a.width:0);if(o>r){i=l,r=o;continue}n?l>i&&(i=l):l<i&&(i=l)}return[n?1-i:i,r]},U4=new WeakSet,BX=function(){const e=document.createElement("button");e.className="highlightButton",e.tabIndex=0,e.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");const n=document.createElement("span");e.append(n),n.className="visuallyHidden",n.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label");const r=S(this,Ep)._signal;e.addEventListener("contextmenu",jl,{signal:r}),e.addEventListener("click",()=>{S(this,Ep).highlightSelection("floating_button")},{signal:r}),S(this,V2).append(e)};function zX(t,e,n){for(const r of n)e.addEventListener(r,t[r].bind(t))}var V4;class Lue{constructor(){G(this,V4,0)}get id(){return`${CX}${na(this,V4)._++}`}}V4=new WeakMap;var b0,q2,Vi,w0,ZC;const W7=class W7{constructor(){G(this,w0);G(this,b0,d$());G(this,q2,0);G(this,Vi,null)}static get _isSVGFittingCanvas(){const e='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',r=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),i=new Image;i.src=e;const a=i.decode().then(()=>(r.drawImage(i,0,0,1,1,0,0,1,3),new Uint32Array(r.getImageData(0,0,1,1).data.buffer)[0]===0));return xn(this,"_isSVGFittingCanvas",a)}async getFromFile(e){const{lastModified:n,name:r,size:i,type:a}=e;return se(this,w0,ZC).call(this,`${n}_${r}_${i}_${a}`,e)}async getFromUrl(e){return se(this,w0,ZC).call(this,e,e)}async getFromBlob(e,n){const r=await n;return se(this,w0,ZC).call(this,e,r)}async getFromId(e){S(this,Vi)||Z(this,Vi,new Map);const n=S(this,Vi).get(e);if(!n)return null;if(n.bitmap)return n.refCounter+=1,n;if(n.file)return this.getFromFile(n.file);if(n.blobPromise){const{blobPromise:r}=n;return delete n.blobPromise,this.getFromBlob(n.id,r)}return this.getFromUrl(n.url)}getFromCanvas(e,n){S(this,Vi)||Z(this,Vi,new Map);let r=S(this,Vi).get(e);if(r!=null&&r.bitmap)return r.refCounter+=1,r;const i=new OffscreenCanvas(n.width,n.height);return i.getContext("2d").drawImage(n,0,0),r={bitmap:i.transferToImageBitmap(),id:`image_${S(this,b0)}_${na(this,q2)._++}`,refCounter:1,isSvg:!1},S(this,Vi).set(e,r),S(this,Vi).set(r.id,r),r}getSvgUrl(e){const n=S(this,Vi).get(e);return n!=null&&n.isSvg?n.svgUrl:null}deleteId(e){var i;S(this,Vi)||Z(this,Vi,new Map);const n=S(this,Vi).get(e);if(!n||(n.refCounter-=1,n.refCounter!==0))return;const{bitmap:r}=n;if(!n.url&&!n.file){const a=new OffscreenCanvas(r.width,r.height);a.getContext("bitmaprenderer").transferFromImageBitmap(r),n.blobPromise=a.convertToBlob()}(i=r.close)==null||i.call(r),n.bitmap=null}isValidId(e){return e.startsWith(`image_${S(this,b0)}_`)}};b0=new WeakMap,q2=new WeakMap,Vi=new WeakMap,w0=new WeakSet,ZC=async function(e,n){S(this,Vi)||Z(this,Vi,new Map);let r=S(this,Vi).get(e);if(r===null)return null;if(r!=null&&r.bitmap)return r.refCounter+=1,r;try{r||(r={bitmap:null,id:`image_${S(this,b0)}_${na(this,q2)._++}`,refCounter:0,isSvg:!1});let i;if(typeof n=="string"?(r.url=n,i=await Ub(n,"blob")):n instanceof File?i=r.file=n:n instanceof Blob&&(i=n),i.type==="image/svg+xml"){const a=W7._isSVGFittingCanvas,o=new FileReader,l=new Image,c=new Promise((d,u)=>{l.onload=()=>{r.bitmap=l,r.isSvg=!0,d()},o.onload=async()=>{const h=r.svgUrl=o.result;l.src=await a?`${h}#svgView(preserveAspectRatio(none))`:h},l.onerror=o.onerror=u});o.readAsDataURL(i),await c}else r.bitmap=await createImageBitmap(i);r.refCounter=1}catch(i){an(i),r=null}return S(this,Vi).set(e,r),r&&S(this,Vi).set(r.id,r),r};let EL=W7;var cs,Qh,H2,Fr;class Rue{constructor(e=128){G(this,cs,[]);G(this,Qh,!1);G(this,H2,void 0);G(this,Fr,-1);Z(this,H2,e)}add({cmd:e,undo:n,post:r,mustExec:i,type:a=NaN,overwriteIfSameType:o=!1,keepUndo:l=!1}){if(i&&e(),S(this,Qh))return;const c={cmd:e,undo:n,post:r,type:a};if(S(this,Fr)===-1){S(this,cs).length>0&&(S(this,cs).length=0),Z(this,Fr,0),S(this,cs).push(c);return}if(o&&S(this,cs)[S(this,Fr)].type===a){l&&(c.undo=S(this,cs)[S(this,Fr)].undo),S(this,cs)[S(this,Fr)]=c;return}const d=S(this,Fr)+1;d===S(this,H2)?S(this,cs).splice(0,1):(Z(this,Fr,d),d<S(this,cs).length&&S(this,cs).splice(d)),S(this,cs).push(c)}undo(){if(S(this,Fr)===-1)return;Z(this,Qh,!0);const{undo:e,post:n}=S(this,cs)[S(this,Fr)];e(),n==null||n(),Z(this,Qh,!1),Z(this,Fr,S(this,Fr)-1)}redo(){if(S(this,Fr)<S(this,cs).length-1){Z(this,Fr,S(this,Fr)+1),Z(this,Qh,!0);const{cmd:e,post:n}=S(this,cs)[S(this,Fr)];e(),n==null||n(),Z(this,Qh,!1)}}hasSomethingToUndo(){return S(this,Fr)!==-1}hasSomethingToRedo(){return S(this,Fr)<S(this,cs).length-1}cleanType(e){if(S(this,Fr)!==-1){for(let n=S(this,Fr);n>=0;n--)if(S(this,cs)[n].type!==e){S(this,cs).splice(n+1,S(this,Fr)-n),Z(this,Fr,n);return}S(this,cs).length=0,Z(this,Fr,-1)}}destroy(){Z(this,cs,null)}}cs=new WeakMap,Qh=new WeakMap,H2=new WeakMap,Fr=new WeakMap;var q4,UX;class uA{constructor(e){G(this,q4);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:n}=ai.platform;for(const[r,i,a={}]of e)for(const o of r){const l=o.startsWith("mac+");n&&l?(this.callbacks.set(o.slice(4),{callback:i,options:a}),this.allKeys.add(o.split("+").at(-1))):!n&&!l&&(this.callbacks.set(o,{callback:i,options:a}),this.allKeys.add(o.split("+").at(-1)))}}exec(e,n){if(!this.allKeys.has(n.key))return;const r=this.callbacks.get(se(this,q4,UX).call(this,n));if(!r)return;const{callback:i,options:{bubbles:a=!1,args:o=[],checker:l=null}}=r;l&&!l(e,n)||(i.bind(e,...o,n)(),a||hs(n))}}q4=new WeakSet,UX=function(e){e.altKey&&this.buffer.push("alt"),e.ctrlKey&&this.buffer.push("ctrl"),e.metaKey&&this.buffer.push("meta"),e.shiftKey&&this.buffer.push("shift"),this.buffer.push(e.key);const n=this.buffer.join("+");return this.buffer.length=0,n};const H4=class H4{get _colors(){const e=new Map([["CanvasText",null],["Canvas",null]]);return _ue(e),xn(this,"_colors",e)}convert(e){const n=h$(e);if(!window.matchMedia("(forced-colors: active)").matches)return n;for(const[r,i]of this._colors)if(i.every((a,o)=>a===n[o]))return H4._colorsMapping.get(r);return n}getHexCode(e){const n=this._colors.get(e);return n?kt.makeHexColor(...n):e}};ut(H4,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let PL=H4;var j0,so,Ms,vi,N0,au,S0,sl,Jh,ef,A0,Pp,Vc,ql,Tp,W2,G2,C0,K2,qc,tf,E0,nf,Hc,W4,rf,Y2,sf,Ip,Dp,af,X2,Ks,Yn,ou,of,kp,Z2,Q2,lf,Wc,lu,J2,eN,il,P0,QC,tN,TL,G4,VX,K4,qX,T0,JC,Y4,HX,X4,WX,Z4,GX,nN,IL,Q4,KX,rN,DL,sN,kL,J4,YX,xi,sa,Hl,Xd,eT,XX,tT,ZX,iN,_L,nT,QX,_p,Sw,aN,OL;const n0=class n0{constructor(e,n,r,i,a,o,l,c,d,u,h,f,m,v,p){G(this,P0);G(this,tN);G(this,G4);G(this,K4);G(this,T0);G(this,Y4);G(this,X4);G(this,Z4);G(this,nN);G(this,Q4);G(this,rN);G(this,sN);G(this,J4);G(this,xi);G(this,Hl);G(this,eT);G(this,tT);G(this,iN);G(this,nT);G(this,_p);G(this,aN);G(this,j0,new AbortController);G(this,so,null);G(this,Ms,new Map);G(this,vi,new Map);G(this,N0,null);G(this,au,null);G(this,S0,null);G(this,sl,new Rue);G(this,Jh,null);G(this,ef,null);G(this,A0,0);G(this,Pp,new Set);G(this,Vc,null);G(this,ql,null);G(this,Tp,new Set);ut(this,"_editorUndoBar",null);G(this,W2,!1);G(this,G2,!1);G(this,C0,!1);G(this,K2,null);G(this,qc,null);G(this,tf,null);G(this,E0,null);G(this,nf,!1);G(this,Hc,null);G(this,W4,new Lue);G(this,rf,!1);G(this,Y2,!1);G(this,sf,null);G(this,Ip,null);G(this,Dp,null);G(this,af,null);G(this,X2,null);G(this,Ks,en.NONE);G(this,Yn,new Set);G(this,ou,null);G(this,of,null);G(this,kp,null);G(this,Z2,null);G(this,Q2,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1});G(this,lf,[0,0]);G(this,Wc,null);G(this,lu,null);G(this,J2,null);G(this,eN,null);G(this,il,null);const g=this._signal=S(this,j0).signal;Z(this,lu,e),Z(this,J2,n),Z(this,eN,r),Z(this,N0,i),Z(this,of,a),this._eventBus=o,o._on("editingaction",this.onEditingAction.bind(this),{signal:g}),o._on("pagechanging",this.onPageChanging.bind(this),{signal:g}),o._on("scalechanging",this.onScaleChanging.bind(this),{signal:g}),o._on("rotationchanging",this.onRotationChanging.bind(this),{signal:g}),o._on("setpreference",this.onSetPreference.bind(this),{signal:g}),o._on("switchannotationeditorparams",x=>this.updateParams(x.type,x.value),{signal:g}),se(this,Y4,HX).call(this),se(this,J4,YX).call(this),se(this,nN,IL).call(this),Z(this,au,l.annotationStorage),Z(this,K2,l.filterFactory),Z(this,kp,c),Z(this,E0,d||null),Z(this,W2,u),Z(this,G2,h),Z(this,C0,f),Z(this,X2,m||null),this.viewParameters={realScale:th.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=v||null,this._supportsPinchToZoom=p!==!1}static get _keyboardManager(){const e=n0.prototype,n=o=>S(o,lu).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&o.hasSomethingToControl(),r=(o,{target:l})=>{if(l instanceof HTMLInputElement){const{type:c}=l;return c!=="text"&&c!=="number"}return!0},i=this.TRANSLATE_SMALL,a=this.TRANSLATE_BIG;return xn(this,"_keyboardManager",new uA([[["ctrl+a","mac+meta+a"],e.selectAll,{checker:r}],[["ctrl+z","mac+meta+z"],e.undo,{checker:r}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],e.redo,{checker:r}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],e.delete,{checker:r}],[["Enter","mac+Enter"],e.addNewEditorFromKeyboard,{checker:(o,{target:l})=>!(l instanceof HTMLButtonElement)&&S(o,lu).contains(l)&&!o.isEnterHandled}],[[" ","mac+ "],e.addNewEditorFromKeyboard,{checker:(o,{target:l})=>!(l instanceof HTMLButtonElement)&&S(o,lu).contains(document.activeElement)}],[["Escape","mac+Escape"],e.unselectAll],[["ArrowLeft","mac+ArrowLeft"],e.translateSelectedEditors,{args:[-i,0],checker:n}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e.translateSelectedEditors,{args:[-a,0],checker:n}],[["ArrowRight","mac+ArrowRight"],e.translateSelectedEditors,{args:[i,0],checker:n}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e.translateSelectedEditors,{args:[a,0],checker:n}],[["ArrowUp","mac+ArrowUp"],e.translateSelectedEditors,{args:[0,-i],checker:n}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e.translateSelectedEditors,{args:[0,-a],checker:n}],[["ArrowDown","mac+ArrowDown"],e.translateSelectedEditors,{args:[0,i],checker:n}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e.translateSelectedEditors,{args:[0,a],checker:n}]]))}destroy(){var e,n,r,i,a,o,l,c;(e=S(this,il))==null||e.resolve(),Z(this,il,null),(n=S(this,j0))==null||n.abort(),Z(this,j0,null),this._signal=null;for(const d of S(this,vi).values())d.destroy();S(this,vi).clear(),S(this,Ms).clear(),S(this,Tp).clear(),(r=S(this,af))==null||r.clear(),Z(this,so,null),S(this,Yn).clear(),S(this,sl).destroy(),(i=S(this,N0))==null||i.destroy(),(a=S(this,of))==null||a.destroy(),(o=S(this,Hc))==null||o.hide(),Z(this,Hc,null),(l=S(this,Dp))==null||l.destroy(),Z(this,Dp,null),S(this,qc)&&(clearTimeout(S(this,qc)),Z(this,qc,null)),S(this,Wc)&&(clearTimeout(S(this,Wc)),Z(this,Wc,null)),(c=this._editorUndoBar)==null||c.destroy()}combinedSignal(e){return AbortSignal.any([this._signal,e.signal])}get mlManager(){return S(this,X2)}get useNewAltTextFlow(){return S(this,G2)}get useNewAltTextWhenAddingImage(){return S(this,C0)}get hcmFilter(){return xn(this,"hcmFilter",S(this,kp)?S(this,K2).addHCMFilter(S(this,kp).foreground,S(this,kp).background):"none")}get direction(){return xn(this,"direction",getComputedStyle(S(this,lu)).direction)}get highlightColors(){return xn(this,"highlightColors",S(this,E0)?new Map(S(this,E0).split(",").map(e=>(e=e.split("=").map(n=>n.trim()),e[1]=e[1].toUpperCase(),e))):null)}get highlightColorNames(){return xn(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,e=>e.reverse())):null)}setCurrentDrawingSession(e){e?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),Z(this,ef,e)}setMainHighlightColorPicker(e){Z(this,Dp,e)}editAltText(e,n=!1){var r;(r=S(this,N0))==null||r.editAltText(this,e,n)}getSignature(e){var n;(n=S(this,of))==null||n.getSignature({uiManager:this,editor:e})}get signatureManager(){return S(this,of)}switchToMode(e,n){this._eventBus.on("annotationeditormodechanged",n,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:e})}setPreference(e,n){this._eventBus.dispatch("setpreference",{source:this,name:e,value:n})}onSetPreference({name:e,value:n}){switch(e){case"enableNewAltTextWhenAddingImage":Z(this,C0,n);break}}onPageChanging({pageNumber:e}){Z(this,A0,e-1)}focusMainContainer(){S(this,lu).focus()}findParent(e,n){for(const r of S(this,vi).values()){const{x:i,y:a,width:o,height:l}=r.div.getBoundingClientRect();if(e>=i&&e<=i+o&&n>=a&&n<=a+l)return r}return null}disableUserSelect(e=!1){S(this,J2).classList.toggle("noUserSelect",e)}addShouldRescale(e){S(this,Tp).add(e)}removeShouldRescale(e){S(this,Tp).delete(e)}onScaleChanging({scale:e}){var n;this.commitOrRemove(),this.viewParameters.realScale=e*th.PDF_TO_CSS_UNITS;for(const r of S(this,Tp))r.onScaleChanging();(n=S(this,ef))==null||n.onScaleChanging()}onRotationChanging({pagesRotation:e}){this.commitOrRemove(),this.viewParameters.rotation=e}highlightSelection(e=""){const n=document.getSelection();if(!n||n.isCollapsed)return;const{anchorNode:r,anchorOffset:i,focusNode:a,focusOffset:o}=n,l=n.toString(),d=se(this,P0,QC).call(this,n).closest(".textLayer"),u=this.getSelectionBoxes(d);if(!u)return;n.empty();const h=se(this,tN,TL).call(this,d),f=S(this,Ks)===en.NONE,m=()=>{h==null||h.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:e,boxes:u,anchorNode:r,anchorOffset:i,focusNode:a,focusOffset:o,text:l}),f&&this.showAllEditors("highlight",!0,!0)};if(f){this.switchToMode(en.HIGHLIGHT,m);return}m()}addToAnnotationStorage(e){!e.isEmpty()&&S(this,au)&&!S(this,au).has(e.id)&&S(this,au).setValue(e.id,e)}a11yAlert(e,n=null){const r=S(this,eN);r&&(r.setAttribute("data-l10n-id",e),n?r.setAttribute("data-l10n-args",JSON.stringify(n)):r.removeAttribute("data-l10n-args"))}blur(){if(this.isShiftKeyDown=!1,S(this,nf)&&(Z(this,nf,!1),se(this,T0,JC).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:e}=document;for(const n of S(this,Yn))if(n.div.contains(e)){Z(this,Ip,[n,e]),n._focusEventsAllowed=!1;break}}focus(){if(!S(this,Ip))return;const[e,n]=S(this,Ip);Z(this,Ip,null),n.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this._signal}),n.focus()}addEditListeners(){se(this,nN,IL).call(this),se(this,rN,DL).call(this)}removeEditListeners(){se(this,Q4,KX).call(this),se(this,sN,kL).call(this)}dragOver(e){for(const{type:n}of e.dataTransfer.items)for(const r of S(this,ql))if(r.isHandlingMimeForPasting(n)){e.dataTransfer.dropEffect="copy",e.preventDefault();return}}drop(e){for(const n of e.dataTransfer.items)for(const r of S(this,ql))if(r.isHandlingMimeForPasting(n.type)){r.paste(n,this.currentLayer),e.preventDefault();return}}copy(e){var r;if(e.preventDefault(),(r=S(this,so))==null||r.commitOrRemove(),!this.hasSelection)return;const n=[];for(const i of S(this,Yn)){const a=i.serialize(!0);a&&n.push(a)}n.length!==0&&e.clipboardData.setData("application/pdfjs",JSON.stringify(n))}cut(e){this.copy(e),this.delete()}async paste(e){e.preventDefault();const{clipboardData:n}=e;for(const a of n.items)for(const o of S(this,ql))if(o.isHandlingMimeForPasting(a.type)){o.paste(a,this.currentLayer);return}let r=n.getData("application/pdfjs");if(!r)return;try{r=JSON.parse(r)}catch(a){an(`paste: "${a.message}".`);return}if(!Array.isArray(r))return;this.unselectAll();const i=this.currentLayer;try{const a=[];for(const c of r){const d=await i.deserialize(c);if(!d)return;a.push(d)}const o=()=>{for(const c of a)se(this,iN,_L).call(this,c);se(this,aN,OL).call(this,a)},l=()=>{for(const c of a)c.remove()};this.addCommands({cmd:o,undo:l,mustExec:!0})}catch(a){an(`paste: "${a.message}".`)}}keydown(e){!this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!0),S(this,Ks)!==en.NONE&&!this.isEditorHandlingKeyboard&&n0._keyboardManager.exec(this,e)}keyup(e){this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!1,S(this,nf)&&(Z(this,nf,!1),se(this,T0,JC).call(this,"main_toolbar")))}onEditingAction({name:e}){switch(e){case"undo":case"redo":case"delete":case"selectAll":this[e]();break;case"highlightSelection":this.highlightSelection("context_menu");break}}setEditingState(e){e?(se(this,X4,WX).call(this),se(this,rN,DL).call(this),se(this,xi,sa).call(this,{isEditing:S(this,Ks)!==en.NONE,isEmpty:se(this,_p,Sw).call(this),hasSomethingToUndo:S(this,sl).hasSomethingToUndo(),hasSomethingToRedo:S(this,sl).hasSomethingToRedo(),hasSelectedEditor:!1})):(se(this,Z4,GX).call(this),se(this,sN,kL).call(this),se(this,xi,sa).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(e){if(!S(this,ql)){Z(this,ql,e);for(const n of S(this,ql))se(this,Hl,Xd).call(this,n.defaultPropertiesToUpdate)}}getId(){return S(this,W4).id}get currentLayer(){return S(this,vi).get(S(this,A0))}getLayer(e){return S(this,vi).get(e)}get currentPageIndex(){return S(this,A0)}addLayer(e){S(this,vi).set(e.pageIndex,e),S(this,rf)?e.enable():e.disable()}removeLayer(e){S(this,vi).delete(e.pageIndex)}async updateMode(e,n=null,r=!1,i=!1){var a,o,l;if(S(this,Ks)!==e&&!(S(this,il)&&(await S(this,il).promise,!S(this,il)))){if(Z(this,il,Promise.withResolvers()),(a=S(this,ef))==null||a.commitOrRemove(),Z(this,Ks,e),e===en.NONE){this.setEditingState(!1),se(this,tT,ZX).call(this),(o=this._editorUndoBar)==null||o.hide(),S(this,il).resolve();return}e===en.SIGNATURE&&await((l=S(this,of))==null?void 0:l.loadSignatures()),this.setEditingState(!0),await se(this,eT,XX).call(this),this.unselectAll();for(const c of S(this,vi).values())c.updateMode(e);if(!n){r&&this.addNewEditorFromKeyboard(),S(this,il).resolve();return}for(const c of S(this,Ms).values())c.annotationElementId===n||c.id===n?(this.setSelected(c),i&&c.enterInEditMode()):c.unselect();S(this,il).resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(e){e.mode!==S(this,Ks)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,...e})}updateParams(e,n){var r;if(S(this,ql)){switch(e){case Nn.CREATE:this.currentLayer.addNewEditor(n);return;case Nn.HIGHLIGHT_DEFAULT_COLOR:(r=S(this,Dp))==null||r.updateColor(n);break;case Nn.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(S(this,Z2)||Z(this,Z2,new Map)).set(e,n),this.showAllEditors("highlight",n);break}for(const i of S(this,Yn))i.updateParams(e,n);for(const i of S(this,ql))i.updateDefaultParams(e,n)}}showAllEditors(e,n,r=!1){var a;for(const o of S(this,Ms).values())o.editorType===e&&o.show(n);(((a=S(this,Z2))==null?void 0:a.get(Nn.HIGHLIGHT_SHOW_ALL))??!0)!==n&&se(this,Hl,Xd).call(this,[[Nn.HIGHLIGHT_SHOW_ALL,n]])}enableWaiting(e=!1){if(S(this,Y2)!==e){Z(this,Y2,e);for(const n of S(this,vi).values())e?n.disableClick():n.enableClick(),n.div.classList.toggle("waiting",e)}}getEditors(e){const n=[];for(const r of S(this,Ms).values())r.pageIndex===e&&n.push(r);return n}getEditor(e){return S(this,Ms).get(e)}addEditor(e){S(this,Ms).set(e.id,e)}removeEditor(e){var n,r;e.div.contains(document.activeElement)&&(S(this,qc)&&clearTimeout(S(this,qc)),Z(this,qc,setTimeout(()=>{this.focusMainContainer(),Z(this,qc,null)},0))),S(this,Ms).delete(e.id),e.annotationElementId&&((n=S(this,af))==null||n.delete(e.annotationElementId)),this.unselect(e),(!e.annotationElementId||!S(this,Pp).has(e.annotationElementId))&&((r=S(this,au))==null||r.remove(e.id))}addDeletedAnnotationElement(e){S(this,Pp).add(e.annotationElementId),this.addChangedExistingAnnotation(e),e.deleted=!0}isDeletedAnnotationElement(e){return S(this,Pp).has(e)}removeDeletedAnnotationElement(e){S(this,Pp).delete(e.annotationElementId),this.removeChangedExistingAnnotation(e),e.deleted=!1}setActiveEditor(e){S(this,so)!==e&&(Z(this,so,e),e&&se(this,Hl,Xd).call(this,e.propertiesToUpdate))}updateUI(e){S(this,nT,QX)===e&&se(this,Hl,Xd).call(this,e.propertiesToUpdate)}updateUIForDefaultProperties(e){se(this,Hl,Xd).call(this,e.defaultPropertiesToUpdate)}toggleSelected(e){if(S(this,Yn).has(e)){S(this,Yn).delete(e),e.unselect(),se(this,xi,sa).call(this,{hasSelectedEditor:this.hasSelection});return}S(this,Yn).add(e),e.select(),se(this,Hl,Xd).call(this,e.propertiesToUpdate),se(this,xi,sa).call(this,{hasSelectedEditor:!0})}setSelected(e){var n;this.updateToolbar({mode:e.mode,editId:e.id}),(n=S(this,ef))==null||n.commitOrRemove();for(const r of S(this,Yn))r!==e&&r.unselect();S(this,Yn).clear(),S(this,Yn).add(e),e.select(),se(this,Hl,Xd).call(this,e.propertiesToUpdate),se(this,xi,sa).call(this,{hasSelectedEditor:!0})}isSelected(e){return S(this,Yn).has(e)}get firstSelectedEditor(){return S(this,Yn).values().next().value}unselect(e){e.unselect(),S(this,Yn).delete(e),se(this,xi,sa).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return S(this,Yn).size!==0}get isEnterHandled(){return S(this,Yn).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){var e;S(this,sl).undo(),se(this,xi,sa).call(this,{hasSomethingToUndo:S(this,sl).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:se(this,_p,Sw).call(this)}),(e=this._editorUndoBar)==null||e.hide()}redo(){S(this,sl).redo(),se(this,xi,sa).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:S(this,sl).hasSomethingToRedo(),isEmpty:se(this,_p,Sw).call(this)})}addCommands(e){S(this,sl).add(e),se(this,xi,sa).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:se(this,_p,Sw).call(this)})}cleanUndoStack(e){S(this,sl).cleanType(e)}delete(){var a;this.commitOrRemove();const e=(a=this.currentLayer)==null?void 0:a.endDrawingSession(!0);if(!this.hasSelection&&!e)return;const n=e?[e]:[...S(this,Yn)],r=()=>{var o;(o=this._editorUndoBar)==null||o.show(i,n.length===1?n[0].editorType:n.length);for(const l of n)l.remove()},i=()=>{for(const o of n)se(this,iN,_L).call(this,o)};this.addCommands({cmd:r,undo:i,mustExec:!0})}commitOrRemove(){var e;(e=S(this,so))==null||e.commitOrRemove()}hasSomethingToControl(){return S(this,so)||this.hasSelection}selectAll(){for(const e of S(this,Yn))e.commit();se(this,aN,OL).call(this,S(this,Ms).values())}unselectAll(){var e;if(!(S(this,so)&&(S(this,so).commitOrRemove(),S(this,Ks)!==en.NONE))&&!((e=S(this,ef))!=null&&e.commitOrRemove())&&this.hasSelection){for(const n of S(this,Yn))n.unselect();S(this,Yn).clear(),se(this,xi,sa).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(e,n,r=!1){if(r||this.commitOrRemove(),!this.hasSelection)return;S(this,lf)[0]+=e,S(this,lf)[1]+=n;const[i,a]=S(this,lf),o=[...S(this,Yn)],l=1e3;S(this,Wc)&&clearTimeout(S(this,Wc)),Z(this,Wc,setTimeout(()=>{Z(this,Wc,null),S(this,lf)[0]=S(this,lf)[1]=0,this.addCommands({cmd:()=>{for(const c of o)S(this,Ms).has(c.id)&&(c.translateInPage(i,a),c.translationDone())},undo:()=>{for(const c of o)S(this,Ms).has(c.id)&&(c.translateInPage(-i,-a),c.translationDone())},mustExec:!1})},l));for(const c of o)c.translateInPage(e,n),c.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),Z(this,Vc,new Map);for(const e of S(this,Yn))S(this,Vc).set(e,{savedX:e.x,savedY:e.y,savedPageIndex:e.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!S(this,Vc))return!1;this.disableUserSelect(!1);const e=S(this,Vc);Z(this,Vc,null);let n=!1;for(const[{x:i,y:a,pageIndex:o},l]of e)l.newX=i,l.newY=a,l.newPageIndex=o,n||(n=i!==l.savedX||a!==l.savedY||o!==l.savedPageIndex);if(!n)return!1;const r=(i,a,o,l)=>{if(S(this,Ms).has(i.id)){const c=S(this,vi).get(l);c?i._setParentAndPosition(c,a,o):(i.pageIndex=l,i.x=a,i.y=o)}};return this.addCommands({cmd:()=>{for(const[i,{newX:a,newY:o,newPageIndex:l}]of e)r(i,a,o,l)},undo:()=>{for(const[i,{savedX:a,savedY:o,savedPageIndex:l}]of e)r(i,a,o,l)},mustExec:!0}),!0}dragSelectedEditors(e,n){if(S(this,Vc))for(const r of S(this,Vc).keys())r.drag(e,n)}rebuild(e){if(e.parent===null){const n=this.getLayer(e.pageIndex);n?(n.changeParent(e),n.addOrRebuild(e)):(this.addEditor(e),this.addToAnnotationStorage(e),e.rebuild())}else e.parent.addOrRebuild(e)}get isEditorHandlingKeyboard(){var e;return((e=this.getActive())==null?void 0:e.shouldGetKeyboardEvents())||S(this,Yn).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(e){return S(this,so)===e}getActive(){return S(this,so)}getMode(){return S(this,Ks)}get imageManager(){return xn(this,"imageManager",new EL)}getSelectionBoxes(e){if(!e)return null;const n=document.getSelection();for(let d=0,u=n.rangeCount;d<u;d++)if(!e.contains(n.getRangeAt(d).commonAncestorContainer))return null;const{x:r,y:i,width:a,height:o}=e.getBoundingClientRect();let l;switch(e.getAttribute("data-main-rotation")){case"90":l=(d,u,h,f)=>({x:(u-i)/o,y:1-(d+h-r)/a,width:f/o,height:h/a});break;case"180":l=(d,u,h,f)=>({x:1-(d+h-r)/a,y:1-(u+f-i)/o,width:h/a,height:f/o});break;case"270":l=(d,u,h,f)=>({x:1-(u+f-i)/o,y:(d-r)/a,width:f/o,height:h/a});break;default:l=(d,u,h,f)=>({x:(d-r)/a,y:(u-i)/o,width:h/a,height:f/o});break}const c=[];for(let d=0,u=n.rangeCount;d<u;d++){const h=n.getRangeAt(d);if(!h.collapsed)for(const{x:f,y:m,width:v,height:p}of h.getClientRects())v===0||p===0||c.push(l(f,m,v,p))}return c.length===0?null:c}addChangedExistingAnnotation({annotationElementId:e,id:n}){(S(this,S0)||Z(this,S0,new Map)).set(e,n)}removeChangedExistingAnnotation({annotationElementId:e}){var n;(n=S(this,S0))==null||n.delete(e)}renderAnnotationElement(e){var i;const n=(i=S(this,S0))==null?void 0:i.get(e.data.id);if(!n)return;const r=S(this,au).getRawValue(n);r&&(S(this,Ks)===en.NONE&&!r.hasBeenModified||r.renderAnnotationElement(e))}setMissingCanvas(e,n,r){var a;const i=(a=S(this,af))==null?void 0:a.get(e);i&&(i.setCanvas(n,r),S(this,af).delete(e))}addMissingCanvas(e,n){(S(this,af)||Z(this,af,new Map)).set(e,n)}};j0=new WeakMap,so=new WeakMap,Ms=new WeakMap,vi=new WeakMap,N0=new WeakMap,au=new WeakMap,S0=new WeakMap,sl=new WeakMap,Jh=new WeakMap,ef=new WeakMap,A0=new WeakMap,Pp=new WeakMap,Vc=new WeakMap,ql=new WeakMap,Tp=new WeakMap,W2=new WeakMap,G2=new WeakMap,C0=new WeakMap,K2=new WeakMap,qc=new WeakMap,tf=new WeakMap,E0=new WeakMap,nf=new WeakMap,Hc=new WeakMap,W4=new WeakMap,rf=new WeakMap,Y2=new WeakMap,sf=new WeakMap,Ip=new WeakMap,Dp=new WeakMap,af=new WeakMap,X2=new WeakMap,Ks=new WeakMap,Yn=new WeakMap,ou=new WeakMap,of=new WeakMap,kp=new WeakMap,Z2=new WeakMap,Q2=new WeakMap,lf=new WeakMap,Wc=new WeakMap,lu=new WeakMap,J2=new WeakMap,eN=new WeakMap,il=new WeakMap,P0=new WeakSet,QC=function({anchorNode:e}){return e.nodeType===Node.TEXT_NODE?e.parentElement:e},tN=new WeakSet,TL=function(e){const{currentLayer:n}=this;if(n.hasTextLayer(e))return n;for(const r of S(this,vi).values())if(r.hasTextLayer(e))return r;return null},G4=new WeakSet,VX=function(){const e=document.getSelection();if(!e||e.isCollapsed)return;const r=se(this,P0,QC).call(this,e).closest(".textLayer"),i=this.getSelectionBoxes(r);i&&(S(this,Hc)||Z(this,Hc,new Oue(this)),S(this,Hc).show(r,i,this.direction==="ltr"))},K4=new WeakSet,qX=function(){var a,o,l;const e=document.getSelection();if(!e||e.isCollapsed){S(this,ou)&&((a=S(this,Hc))==null||a.hide(),Z(this,ou,null),se(this,xi,sa).call(this,{hasSelectedText:!1}));return}const{anchorNode:n}=e;if(n===S(this,ou))return;const i=se(this,P0,QC).call(this,e).closest(".textLayer");if(!i){S(this,ou)&&((o=S(this,Hc))==null||o.hide(),Z(this,ou,null),se(this,xi,sa).call(this,{hasSelectedText:!1}));return}if((l=S(this,Hc))==null||l.hide(),Z(this,ou,n),se(this,xi,sa).call(this,{hasSelectedText:!0}),!(S(this,Ks)!==en.HIGHLIGHT&&S(this,Ks)!==en.NONE)&&(S(this,Ks)===en.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),Z(this,nf,this.isShiftKeyDown),!this.isShiftKeyDown)){const c=S(this,Ks)===en.HIGHLIGHT?se(this,tN,TL).call(this,i):null;c==null||c.toggleDrawing();const d=new AbortController,u=this.combinedSignal(d),h=f=>{f.type==="pointerup"&&f.button!==0||(d.abort(),c==null||c.toggleDrawing(!0),f.type==="pointerup"&&se(this,T0,JC).call(this,"main_toolbar"))};window.addEventListener("pointerup",h,{signal:u}),window.addEventListener("blur",h,{signal:u})}},T0=new WeakSet,JC=function(e=""){S(this,Ks)===en.HIGHLIGHT?this.highlightSelection(e):S(this,W2)&&se(this,G4,VX).call(this)},Y4=new WeakSet,HX=function(){document.addEventListener("selectionchange",se(this,K4,qX).bind(this),{signal:this._signal})},X4=new WeakSet,WX=function(){if(S(this,tf))return;Z(this,tf,new AbortController);const e=this.combinedSignal(S(this,tf));window.addEventListener("focus",this.focus.bind(this),{signal:e}),window.addEventListener("blur",this.blur.bind(this),{signal:e})},Z4=new WeakSet,GX=function(){var e;(e=S(this,tf))==null||e.abort(),Z(this,tf,null)},nN=new WeakSet,IL=function(){if(S(this,sf))return;Z(this,sf,new AbortController);const e=this.combinedSignal(S(this,sf));window.addEventListener("keydown",this.keydown.bind(this),{signal:e}),window.addEventListener("keyup",this.keyup.bind(this),{signal:e})},Q4=new WeakSet,KX=function(){var e;(e=S(this,sf))==null||e.abort(),Z(this,sf,null)},rN=new WeakSet,DL=function(){if(S(this,Jh))return;Z(this,Jh,new AbortController);const e=this.combinedSignal(S(this,Jh));document.addEventListener("copy",this.copy.bind(this),{signal:e}),document.addEventListener("cut",this.cut.bind(this),{signal:e}),document.addEventListener("paste",this.paste.bind(this),{signal:e})},sN=new WeakSet,kL=function(){var e;(e=S(this,Jh))==null||e.abort(),Z(this,Jh,null)},J4=new WeakSet,YX=function(){const e=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:e}),document.addEventListener("drop",this.drop.bind(this),{signal:e})},xi=new WeakSet,sa=function(e){Object.entries(e).some(([r,i])=>S(this,Q2)[r]!==i)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(S(this,Q2),e)}),S(this,Ks)===en.HIGHLIGHT&&e.hasSelectedEditor===!1&&se(this,Hl,Xd).call(this,[[Nn.HIGHLIGHT_FREE,!0]]))},Hl=new WeakSet,Xd=function(e){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:e})},eT=new WeakSet,XX=async function(){if(!S(this,rf)){Z(this,rf,!0);const e=[];for(const n of S(this,vi).values())e.push(n.enable());await Promise.all(e);for(const n of S(this,Ms).values())n.enable()}},tT=new WeakSet,ZX=function(){if(this.unselectAll(),S(this,rf)){Z(this,rf,!1);for(const e of S(this,vi).values())e.disable();for(const e of S(this,Ms).values())e.disable()}},iN=new WeakSet,_L=function(e){const n=S(this,vi).get(e.pageIndex);n?n.addOrRebuild(e):(this.addEditor(e),this.addToAnnotationStorage(e))},nT=new WeakSet,QX=function(){let e=null;for(e of S(this,Yn));return e},_p=new WeakSet,Sw=function(){if(S(this,Ms).size===0)return!0;if(S(this,Ms).size===1)for(const e of S(this,Ms).values())return e.isEmpty();return!1},aN=new WeakSet,OL=function(e){for(const n of S(this,Yn))n.unselect();S(this,Yn).clear();for(const n of e)n.isEmpty()||(S(this,Yn).add(n),n.select());se(this,xi,sa).call(this,{hasSelectedEditor:this.hasSelection})},ut(n0,"TRANSLATE_SMALL",1),ut(n0,"TRANSLATE_BIG",10);let fm=n0;var Ys,Gc,Wl,I0,Kc,io,D0,Yc,Ia,cu,Op,Xc,cf,Lp,Aw,k0,eE;const ia=class ia{constructor(e){G(this,Lp);G(this,k0);G(this,Ys,null);G(this,Gc,!1);G(this,Wl,null);G(this,I0,null);G(this,Kc,null);G(this,io,null);G(this,D0,!1);G(this,Yc,null);G(this,Ia,null);G(this,cu,null);G(this,Op,null);G(this,Xc,!1);Z(this,Ia,e),Z(this,Xc,e._uiManager.useNewAltTextFlow),S(ia,cf)||Z(ia,cf,Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"}))}static initialize(e){ia._l10n??(ia._l10n=e)}async render(){const e=Z(this,Wl,document.createElement("button"));e.className="altText",e.tabIndex="0";const n=Z(this,I0,document.createElement("span"));e.append(n),S(this,Xc)?(e.classList.add("new"),e.setAttribute("data-l10n-id",S(ia,cf).missing),n.setAttribute("data-l10n-id",S(ia,cf)["missing-label"])):(e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),n.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const r=S(this,Ia)._uiManager._signal;e.addEventListener("contextmenu",jl,{signal:r}),e.addEventListener("pointerdown",a=>a.stopPropagation(),{signal:r});const i=a=>{a.preventDefault(),S(this,Ia)._uiManager.editAltText(S(this,Ia)),S(this,Xc)&&S(this,Ia)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:S(this,Lp,Aw)}})};return e.addEventListener("click",i,{capture:!0,signal:r}),e.addEventListener("keydown",a=>{a.target===e&&a.key==="Enter"&&(Z(this,D0,!0),i(a))},{signal:r}),await se(this,k0,eE).call(this),e}finish(){S(this,Wl)&&(S(this,Wl).focus({focusVisible:S(this,D0)}),Z(this,D0,!1))}isEmpty(){return S(this,Xc)?S(this,Ys)===null:!S(this,Ys)&&!S(this,Gc)}hasData(){return S(this,Xc)?S(this,Ys)!==null||!!S(this,cu):this.isEmpty()}get guessedText(){return S(this,cu)}async setGuessedText(e){S(this,Ys)===null&&(Z(this,cu,e),Z(this,Op,await ia._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:e})),se(this,k0,eE).call(this))}toggleAltTextBadge(e=!1){var n;if(!S(this,Xc)||S(this,Ys)){(n=S(this,Yc))==null||n.remove(),Z(this,Yc,null);return}if(!S(this,Yc)){const r=Z(this,Yc,document.createElement("div"));r.className="noAltTextBadge",S(this,Ia).div.append(r)}S(this,Yc).classList.toggle("hidden",!e)}serialize(e){let n=S(this,Ys);return!e&&S(this,cu)===n&&(n=S(this,Op)),{altText:n,decorative:S(this,Gc),guessedText:S(this,cu),textWithDisclaimer:S(this,Op)}}get data(){return{altText:S(this,Ys),decorative:S(this,Gc)}}set data({altText:e,decorative:n,guessedText:r,textWithDisclaimer:i,cancel:a=!1}){r&&(Z(this,cu,r),Z(this,Op,i)),!(S(this,Ys)===e&&S(this,Gc)===n)&&(a||(Z(this,Ys,e),Z(this,Gc,n)),se(this,k0,eE).call(this))}toggle(e=!1){S(this,Wl)&&(!e&&S(this,io)&&(clearTimeout(S(this,io)),Z(this,io,null)),S(this,Wl).disabled=!e)}shown(){S(this,Ia)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:S(this,Lp,Aw)}})}destroy(){var e,n;(e=S(this,Wl))==null||e.remove(),Z(this,Wl,null),Z(this,I0,null),Z(this,Kc,null),(n=S(this,Yc))==null||n.remove(),Z(this,Yc,null)}};Ys=new WeakMap,Gc=new WeakMap,Wl=new WeakMap,I0=new WeakMap,Kc=new WeakMap,io=new WeakMap,D0=new WeakMap,Yc=new WeakMap,Ia=new WeakMap,cu=new WeakMap,Op=new WeakMap,Xc=new WeakMap,cf=new WeakMap,Lp=new WeakSet,Aw=function(){return S(this,Ys)&&"added"||S(this,Ys)===null&&this.guessedText&&"review"||"missing"},k0=new WeakSet,eE=async function(){var i,a,o;const e=S(this,Wl);if(!e)return;if(S(this,Xc)){if(e.classList.toggle("done",!!S(this,Ys)),e.setAttribute("data-l10n-id",S(ia,cf)[S(this,Lp,Aw)]),(i=S(this,I0))==null||i.setAttribute("data-l10n-id",S(ia,cf)[`${S(this,Lp,Aw)}-label`]),!S(this,Ys)){(a=S(this,Kc))==null||a.remove();return}}else{if(!S(this,Ys)&&!S(this,Gc)){e.classList.remove("done"),(o=S(this,Kc))==null||o.remove();return}e.classList.add("done"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let n=S(this,Kc);if(!n){Z(this,Kc,n=document.createElement("span")),n.className="tooltip",n.setAttribute("role","tooltip"),n.id=`alt-text-tooltip-${S(this,Ia).id}`;const l=100,c=S(this,Ia)._uiManager._signal;c.addEventListener("abort",()=>{clearTimeout(S(this,io)),Z(this,io,null)},{once:!0}),e.addEventListener("mouseenter",()=>{Z(this,io,setTimeout(()=>{Z(this,io,null),S(this,Kc).classList.add("show"),S(this,Ia)._reportTelemetry({action:"alt_text_tooltip"})},l))},{signal:c}),e.addEventListener("mouseleave",()=>{var d;S(this,io)&&(clearTimeout(S(this,io)),Z(this,io,null)),(d=S(this,Kc))==null||d.classList.remove("show")},{signal:c})}S(this,Gc)?n.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(n.removeAttribute("data-l10n-id"),n.textContent=S(this,Ys)),n.parentNode||e.append(n);const r=S(this,Ia).getElementForAltText();r==null||r.setAttribute("aria-describedby",n.id)},G(ia,cf,null),ut(ia,"_l10n",null);let oP=ia;var _0,Rp,oN,lN,cN,dN,uN,du,Mp,uu,Fp,hu,rT,JX,sT,eZ,iT,tZ;const G7=class G7{constructor({container:e,isPinchingDisabled:n=null,isPinchingStopped:r=null,onPinchStart:i=null,onPinching:a=null,onPinchEnd:o=null,signal:l}){G(this,rT);G(this,sT);G(this,iT);G(this,_0,void 0);G(this,Rp,!1);G(this,oN,null);G(this,lN,void 0);G(this,cN,void 0);G(this,dN,void 0);G(this,uN,void 0);G(this,du,null);G(this,Mp,void 0);G(this,uu,null);G(this,Fp,void 0);G(this,hu,null);Z(this,_0,e),Z(this,oN,r),Z(this,lN,n),Z(this,cN,i),Z(this,dN,a),Z(this,uN,o),Z(this,Fp,new AbortController),Z(this,Mp,AbortSignal.any([l,S(this,Fp).signal])),e.addEventListener("touchstart",se(this,rT,JX).bind(this),{passive:!1,signal:S(this,Mp)})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/vc.pixelRatio}destroy(){var e,n;(e=S(this,Fp))==null||e.abort(),Z(this,Fp,null),(n=S(this,du))==null||n.abort(),Z(this,du,null)}};_0=new WeakMap,Rp=new WeakMap,oN=new WeakMap,lN=new WeakMap,cN=new WeakMap,dN=new WeakMap,uN=new WeakMap,du=new WeakMap,Mp=new WeakMap,uu=new WeakMap,Fp=new WeakMap,hu=new WeakMap,rT=new WeakSet,JX=function(e){var i,a,o;if((i=S(this,lN))!=null&&i.call(this))return;if(e.touches.length===1){if(S(this,du))return;const l=Z(this,du,new AbortController),c=AbortSignal.any([S(this,Mp),l.signal]),d=S(this,_0),u={capture:!0,signal:c,passive:!1},h=f=>{var m;f.pointerType==="touch"&&((m=S(this,du))==null||m.abort(),Z(this,du,null))};d.addEventListener("pointerdown",f=>{f.pointerType==="touch"&&(hs(f),h(f))},u),d.addEventListener("pointerup",h,u),d.addEventListener("pointercancel",h,u);return}if(!S(this,hu)){Z(this,hu,new AbortController);const l=AbortSignal.any([S(this,Mp),S(this,hu).signal]),c=S(this,_0),d={signal:l,capture:!1,passive:!1};c.addEventListener("touchmove",se(this,sT,eZ).bind(this),d);const u=se(this,iT,tZ).bind(this);c.addEventListener("touchend",u,d),c.addEventListener("touchcancel",u,d),d.capture=!0,c.addEventListener("pointerdown",hs,d),c.addEventListener("pointermove",hs,d),c.addEventListener("pointercancel",hs,d),c.addEventListener("pointerup",hs,d),(a=S(this,cN))==null||a.call(this)}if(hs(e),e.touches.length!==2||(o=S(this,oN))!=null&&o.call(this)){Z(this,uu,null);return}let[n,r]=e.touches;n.identifier>r.identifier&&([n,r]=[r,n]),Z(this,uu,{touch0X:n.screenX,touch0Y:n.screenY,touch1X:r.screenX,touch1Y:r.screenY})},sT=new WeakSet,eZ=function(e){var w;if(!S(this,uu)||e.touches.length!==2)return;hs(e);let[n,r]=e.touches;n.identifier>r.identifier&&([n,r]=[r,n]);const{screenX:i,screenY:a}=n,{screenX:o,screenY:l}=r,c=S(this,uu),{touch0X:d,touch0Y:u,touch1X:h,touch1Y:f}=c,m=h-d,v=f-u,p=o-i,g=l-a,x=Math.hypot(p,g)||1,y=Math.hypot(m,v)||1;if(!S(this,Rp)&&Math.abs(y-x)<=G7.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(c.touch0X=i,c.touch0Y=a,c.touch1X=o,c.touch1Y=l,!S(this,Rp)){Z(this,Rp,!0);return}const b=[(i+o)/2,(a+l)/2];(w=S(this,dN))==null||w.call(this,b,y,x)},iT=new WeakSet,tZ=function(e){var n;e.touches.length>=2||(S(this,hu)&&(S(this,hu).abort(),Z(this,hu,null),(n=S(this,uN))==null||n.call(this)),S(this,uu)&&(hs(e),Z(this,uu,null),Z(this,Rp,!1)))};let Fj=G7;var $p,Gl,Dr,O0,df,hN,Bp,yi,zp,fu,uf,fN,Up,ao,mN,Vp,mu,Zc,L0,R0,al,qp,pN,aT,gN,LL,vN,RL,M0,tE,oT,nZ,lT,rZ,xN,ML,F0,nE,yN,FL,cT,sZ,dT,iZ,uT,aZ,bN,$L,hT,oZ,wN,BL,fT,lZ,mT,cZ,pT,dZ,jN,zL,Hp,Cw;const mn=class mn{constructor(e){G(this,gN);G(this,M0);G(this,oT);G(this,lT);G(this,xN);G(this,F0);G(this,yN);G(this,cT);G(this,dT);G(this,uT);G(this,bN);G(this,hT);G(this,wN);G(this,fT);G(this,mT);G(this,pT);G(this,jN);G(this,Hp);G(this,$p,null);G(this,Gl,null);G(this,Dr,null);G(this,O0,!1);G(this,df,null);G(this,hN,"");G(this,Bp,!1);G(this,yi,null);G(this,zp,null);G(this,fu,null);G(this,uf,null);G(this,fN,"");G(this,Up,!1);G(this,ao,null);G(this,mN,!1);G(this,Vp,!1);G(this,mu,!1);G(this,Zc,null);G(this,L0,0);G(this,R0,0);G(this,al,null);G(this,qp,null);ut(this,"isSelected",!1);ut(this,"_isCopy",!1);ut(this,"_editToolbar",null);ut(this,"_initialOptions",Object.create(null));ut(this,"_initialData",null);ut(this,"_isVisible",!0);ut(this,"_uiManager",null);ut(this,"_focusEventsAllowed",!0);G(this,pN,!1);G(this,aT,mn._zIndex++);this.parent=e.parent,this.id=e.id,this.width=this.height=null,this.pageIndex=e.parent.pageIndex,this.name=e.name,this.div=null,this._uiManager=e.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=e.isCentered,this._structTreeParentId=null,this.annotationElementId=e.annotationElementId||null;const{rotation:n,rawDims:{pageWidth:r,pageHeight:i,pageX:a,pageY:o}}=this.parent.viewport;this.rotation=n,this.pageRotation=(360+n-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[r,i],this.pageTranslation=[a,o];const[l,c]=this.parentDimensions;this.x=e.x/l,this.y=e.y/c,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const e=mn.prototype._resizeWithKeyboard,n=fm.TRANSLATE_SMALL,r=fm.TRANSLATE_BIG;return xn(this,"_resizerKeyboardManager",new uA([[["ArrowLeft","mac+ArrowLeft"],e,{args:[-n,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e,{args:[-r,0]}],[["ArrowRight","mac+ArrowRight"],e,{args:[n,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e,{args:[r,0]}],[["ArrowUp","mac+ArrowUp"],e,{args:[0,-n]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e,{args:[0,-r]}],[["ArrowDown","mac+ArrowDown"],e,{args:[0,n]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e,{args:[0,r]}],[["Escape","mac+Escape"],mn.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}get mode(){return Object.getPrototypeOf(this).constructor._editorType}static get isDrawer(){return!1}static get _defaultLineColor(){return xn(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(e){const n=new Mue({id:e.parent.getNextId(),parent:e.parent,uiManager:e._uiManager});n.annotationElementId=e.annotationElementId,n.deleted=!0,n._uiManager.addToAnnotationStorage(n)}static initialize(e,n){if(mn._l10n??(mn._l10n=e),mn._l10nResizer||(mn._l10nResizer=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"})),mn._borderLineWidth!==-1)return;const r=getComputedStyle(document.documentElement);mn._borderLineWidth=parseFloat(r.getPropertyValue("--outline-width"))||0}static updateDefaultParams(e,n){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(e){return!1}static paste(e,n){ir("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return S(this,pN)}set _isDraggable(e){var n;Z(this,pN,e),(n=this.div)==null||n.classList.toggle("draggable",e)}get isEnterHandled(){return!0}center(){const[e,n]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*n/(e*2),this.y+=this.width*e/(n*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*n/(e*2),this.y-=this.width*e/(n*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(e){this._uiManager.addCommands(e)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=S(this,aT)}setParent(e){e!==null?(this.pageIndex=e.pageIndex,this.pageDimensions=e.pageDimensions):se(this,Hp,Cw).call(this),this.parent=e}focusin(e){this._focusEventsAllowed&&(S(this,Up)?Z(this,Up,!1):this.parent.setSelected(this))}focusout(e){var r;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const n=e.relatedTarget;n!=null&&n.closest(`#${this.id}`)||(e.preventDefault(),(r=this.parent)!=null&&r.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.isInEditMode()&&this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(e,n,r,i){const[a,o]=this.parentDimensions;[r,i]=this.screenToPageTranslation(r,i),this.x=(e+r)/a,this.y=(n+i)/o,this.fixAndSetPosition()}_moveAfterPaste(e,n){const[r,i]=this.parentDimensions;this.setAt(e*r,n*i,this.width*r,this.height*i),this._onTranslated()}translate(e,n){se(this,gN,LL).call(this,this.parentDimensions,e,n)}translateInPage(e,n){S(this,ao)||Z(this,ao,[this.x,this.y,this.width,this.height]),se(this,gN,LL).call(this,this.pageDimensions,e,n),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(e,n){S(this,ao)||Z(this,ao,[this.x,this.y,this.width,this.height]);const{div:r,parentDimensions:[i,a]}=this;if(this.x+=e/i,this.y+=n/a,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:h,y:f}=this.div.getBoundingClientRect();this.parent.findNewParent(this,h,f)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:o,y:l}=this;const[c,d]=this.getBaseTranslation();o+=c,l+=d;const{style:u}=r;u.left=`${(100*o).toFixed(2)}%`,u.top=`${(100*l).toFixed(2)}%`,this._onTranslating(o,l),r.scrollIntoView({block:"nearest"})}_onTranslating(e,n){}_onTranslated(e,n){}get _hasBeenMoved(){return!!S(this,ao)&&(S(this,ao)[0]!==this.x||S(this,ao)[1]!==this.y)}get _hasBeenResized(){return!!S(this,ao)&&(S(this,ao)[2]!==this.width||S(this,ao)[3]!==this.height)}getBaseTranslation(){const[e,n]=this.parentDimensions,{_borderLineWidth:r}=mn,i=r/e,a=r/n;switch(this.rotation){case 90:return[-i,a];case 180:return[i,a];case 270:return[i,-a];default:return[-i,-a]}}get _mustFixPosition(){return!0}fixAndSetPosition(e=this.rotation){const{div:{style:n},pageDimensions:[r,i]}=this;let{x:a,y:o,width:l,height:c}=this;if(l*=r,c*=i,a*=r,o*=i,this._mustFixPosition)switch(e){case 0:a=Wi(a,0,r-l),o=Wi(o,0,i-c);break;case 90:a=Wi(a,0,r-c),o=Wi(o,l,i);break;case 180:a=Wi(a,l,r),o=Wi(o,c,i);break;case 270:a=Wi(a,c,r),o=Wi(o,0,i-l);break}this.x=a/=r,this.y=o/=i;const[d,u]=this.getBaseTranslation();a+=d,o+=u,n.left=`${(100*a).toFixed(2)}%`,n.top=`${(100*o).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(e,n){var r;return se(r=mn,vN,RL).call(r,e,n,this.parentRotation)}pageTranslationToScreen(e,n){var r;return se(r=mn,vN,RL).call(r,e,n,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:e,pageDimensions:[n,r]}=this;return[n*e,r*e]}setDims(e,n){const[r,i]=this.parentDimensions,{style:a}=this.div;a.width=`${(100*e/r).toFixed(2)}%`,S(this,Bp)||(a.height=`${(100*n/i).toFixed(2)}%`)}fixDims(){const{style:e}=this.div,{height:n,width:r}=e,i=r.endsWith("%"),a=!S(this,Bp)&&n.endsWith("%");if(i&&a)return;const[o,l]=this.parentDimensions;i||(e.width=`${(100*parseFloat(r)/o).toFixed(2)}%`),!S(this,Bp)&&!a&&(e.height=`${(100*parseFloat(n)/l).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}_onResized(){}static _round(e){return Math.round(e*1e4)/1e4}_onResizing(){}altTextFinish(){var e;(e=S(this,Dr))==null||e.finish()}get toolbarButtons(){return null}async addEditToolbar(){if(this._editToolbar||S(this,Vp))return this._editToolbar;this._editToolbar=new CL(this),this.div.append(this._editToolbar.render());const{toolbarButtons:e}=this;if(e)for(const[n,r]of e)await this._editToolbar.addButton(n,r);return this._editToolbar.addButton("delete"),this._editToolbar}removeEditToolbar(){var e;this._editToolbar&&(this._editToolbar.remove(),this._editToolbar=null,(e=S(this,Dr))==null||e.destroy())}addContainer(e){var r;const n=(r=this._editToolbar)==null?void 0:r.div;n?n.before(e):this.div.append(e)}getClientDimensions(){return this.div.getBoundingClientRect()}createAltText(){return S(this,Dr)||(oP.initialize(mn._l10n),Z(this,Dr,new oP(this)),S(this,$p)&&(S(this,Dr).data=S(this,$p),Z(this,$p,null))),S(this,Dr)}get altTextData(){var e;return(e=S(this,Dr))==null?void 0:e.data}set altTextData(e){S(this,Dr)&&(S(this,Dr).data=e)}get guessedAltText(){var e;return(e=S(this,Dr))==null?void 0:e.guessedText}async setGuessedAltText(e){var n;await((n=S(this,Dr))==null?void 0:n.setGuessedText(e))}serializeAltText(e){var n;return(n=S(this,Dr))==null?void 0:n.serialize(e)}hasAltText(){return!!S(this,Dr)&&!S(this,Dr).isEmpty()}hasAltTextData(){var e;return((e=S(this,Dr))==null?void 0:e.hasData())??!1}render(){var o;const e=this.div=document.createElement("div");e.setAttribute("data-editor-rotation",(360-this.rotation)%360),e.className=this.name,e.setAttribute("id",this.id),e.tabIndex=S(this,O0)?-1:0,e.setAttribute("role","application"),this.defaultL10nId&&e.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||e.classList.add("hidden"),this.setInForeground(),se(this,wN,BL).call(this);const[n,r]=this.parentDimensions;this.parentRotation%180!==0&&(e.style.maxWidth=`${(100*r/n).toFixed(2)}%`,e.style.maxHeight=`${(100*n/r).toFixed(2)}%`);const[i,a]=this.getInitialTranslation();return this.translate(i,a),zX(this,e,["keydown","pointerdown","dblclick"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(S(this,qp)||Z(this,qp,new Fj({container:e,isPinchingDisabled:()=>!this.isSelected,onPinchStart:se(this,cT,sZ).bind(this),onPinching:se(this,dT,iZ).bind(this),onPinchEnd:se(this,uT,aZ).bind(this),signal:this._uiManager._signal}))),(o=this._uiManager._editorUndoBar)==null||o.hide(),e}pointerdown(e){const{isMac:n}=ai.platform;if(e.button!==0||e.ctrlKey&&n){e.preventDefault();return}if(Z(this,Up,!0),this._isDraggable){se(this,hT,oZ).call(this,e);return}se(this,bN,$L).call(this,e)}_onStartDragging(){}_onStopDragging(){}moveInDOM(){S(this,Zc)&&clearTimeout(S(this,Zc)),Z(this,Zc,setTimeout(()=>{var e;Z(this,Zc,null),(e=this.parent)==null||e.moveEditorInDOM(this)},0))}_setParentAndPosition(e,n,r){e.changeParent(this),this.x=n,this.y=r,this.fixAndSetPosition(),this._onTranslated()}getRect(e,n,r=this.rotation){const i=this.parentScale,[a,o]=this.pageDimensions,[l,c]=this.pageTranslation,d=e/i,u=n/i,h=this.x*a,f=this.y*o,m=this.width*a,v=this.height*o;switch(r){case 0:return[h+d+l,o-f-u-v+c,h+d+m+l,o-f-u+c];case 90:return[h+u+l,o-f+d+c,h+u+v+l,o-f+d+m+c];case 180:return[h-d-m+l,o-f+u+c,h-d+l,o-f+u+v+c];case 270:return[h-u-v+l,o-f-d-m+c,h-u+l,o-f-d+c];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(e,n){const[r,i,a,o]=e,l=a-r,c=o-i;switch(this.rotation){case 0:return[r,n-o,l,c];case 90:return[r,n-i,c,l];case 180:return[a,n-i,l,c];case 270:return[a,n-o,c,l];default:throw new Error("Invalid rotation")}}onceAdded(e){}isEmpty(){return!1}enableEditMode(){return this.isInEditMode()?!1:(this.parent.setEditingState(!1),Z(this,Vp,!0),!0)}disableEditMode(){return this.isInEditMode()?(this.parent.setEditingState(!0),Z(this,Vp,!1),!0):!1}isInEditMode(){return S(this,Vp)}shouldGetKeyboardEvents(){return S(this,mu)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:e,left:n,bottom:r,right:i}=this.getClientDimensions(),{innerHeight:a,innerWidth:o}=window;return n<o&&i>0&&e<a&&r>0}rebuild(){se(this,wN,BL).call(this)}rotate(e){}resize(){}serializeDeleted(){var e;return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:((e=this._initialData)==null?void 0:e.popupRef)||""}}serialize(e=!1,n=null){ir("An editor must be serializable")}static async deserialize(e,n,r){const i=new this.prototype.constructor({parent:n,id:n.getNextId(),uiManager:r,annotationElementId:e.annotationElementId});i.rotation=e.rotation,Z(i,$p,e.accessibilityData),i._isCopy=e.isCopy||!1;const[a,o]=i.pageDimensions,[l,c,d,u]=i.getRectInCurrentCoords(e.rect,o);return i.x=l/a,i.y=c/o,i.width=d/a,i.height=u/o,i}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){var e,n;if((e=S(this,uf))==null||e.abort(),Z(this,uf,null),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),S(this,Zc)&&(clearTimeout(S(this,Zc)),Z(this,Zc,null)),se(this,Hp,Cw).call(this),this.removeEditToolbar(),S(this,al)){for(const r of S(this,al).values())clearTimeout(r);Z(this,al,null)}this.parent=null,(n=S(this,qp))==null||n.destroy(),Z(this,qp,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(se(this,oT,nZ).call(this),S(this,yi).classList.remove("hidden"))}get toolbarPosition(){return null}keydown(e){if(!this.isResizable||e.target!==this.div||e.key!=="Enter")return;this._uiManager.setSelected(this),Z(this,fu,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const n=S(this,yi).children;if(!S(this,Gl)){Z(this,Gl,Array.from(n));const o=se(this,fT,lZ).bind(this),l=se(this,mT,cZ).bind(this),c=this._uiManager._signal;for(const d of S(this,Gl)){const u=d.getAttribute("data-resizer-name");d.setAttribute("role","spinbutton"),d.addEventListener("keydown",o,{signal:c}),d.addEventListener("blur",l,{signal:c}),d.addEventListener("focus",se(this,pT,dZ).bind(this,u),{signal:c}),d.setAttribute("data-l10n-id",mn._l10nResizer[u])}}const r=S(this,Gl)[0];let i=0;for(const o of n){if(o===r)break;i++}const a=(360-this.rotation+this.parentRotation)%360/90*(S(this,Gl).length/4);if(a!==i){if(a<i)for(let l=0;l<i-a;l++)S(this,yi).append(S(this,yi).firstChild);else if(a>i)for(let l=0;l<a-i;l++)S(this,yi).firstChild.before(S(this,yi).lastChild);let o=0;for(const l of n){const d=S(this,Gl)[o++].getAttribute("data-resizer-name");l.setAttribute("data-l10n-id",mn._l10nResizer[d])}}se(this,jN,zL).call(this,0),Z(this,mu,!0),S(this,yi).firstChild.focus({focusVisible:!0}),e.preventDefault(),e.stopImmediatePropagation()}_resizeWithKeyboard(e,n){S(this,mu)&&se(this,yN,FL).call(this,S(this,fN),{deltaX:e,deltaY:n,fromKeyboard:!0})}_stopResizingWithKeyboard(){se(this,Hp,Cw).call(this),this.div.focus()}select(){var e,n,r;if(!(this.isSelected&&this._editToolbar)){if(this.isSelected=!0,this.makeResizable(),(e=this.div)==null||e.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{var i,a;(i=this.div)!=null&&i.classList.contains("selectedEditor")&&((a=this._editToolbar)==null||a.show())});return}(n=this._editToolbar)==null||n.show(),(r=S(this,Dr))==null||r.toggleAltTextBadge(!1)}}unselect(){var e,n,r,i,a;this.isSelected&&(this.isSelected=!1,(e=S(this,yi))==null||e.classList.add("hidden"),(n=this.div)==null||n.classList.remove("selectedEditor"),(r=this.div)!=null&&r.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),(i=this._editToolbar)==null||i.hide(),(a=S(this,Dr))==null||a.toggleAltTextBadge(!0))}updateParams(e,n){}disableEditing(){}enableEditing(){}get canChangeContent(){return!1}enterInEditMode(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}dblclick(e){this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.id})}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return S(this,mN)}set isEditing(e){Z(this,mN,e),this.parent&&(e?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(e,n){Z(this,Bp,!0);const r=e/n,{style:i}=this.div;i.aspectRatio=r,i.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(e,n=!1){if(n){S(this,al)||Z(this,al,new Map);const{action:r}=e;let i=S(this,al).get(r);i&&clearTimeout(i),i=setTimeout(()=>{this._reportTelemetry(e),S(this,al).delete(r),S(this,al).size===0&&Z(this,al,null)},mn._telemetryTimeout),S(this,al).set(r,i);return}e.type||(e.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:e}})}show(e=this._isVisible){this.div.classList.toggle("hidden",!e),this._isVisible=e}enable(){this.div&&(this.div.tabIndex=0),Z(this,O0,!1)}disable(){this.div&&(this.div.tabIndex=-1),Z(this,O0,!0)}renderAnnotationElement(e){let n=e.container.querySelector(".annotationContent");if(!n)n=document.createElement("div"),n.classList.add("annotationContent",this.editorType),e.container.prepend(n);else if(n.nodeName==="CANVAS"){const r=n;n=document.createElement("div"),n.classList.add("annotationContent",this.editorType),r.before(n)}return n}resetAnnotationElement(e){const{firstChild:n}=e.container;(n==null?void 0:n.nodeName)==="DIV"&&n.classList.contains("annotationContent")&&n.remove()}};$p=new WeakMap,Gl=new WeakMap,Dr=new WeakMap,O0=new WeakMap,df=new WeakMap,hN=new WeakMap,Bp=new WeakMap,yi=new WeakMap,zp=new WeakMap,fu=new WeakMap,uf=new WeakMap,fN=new WeakMap,Up=new WeakMap,ao=new WeakMap,mN=new WeakMap,Vp=new WeakMap,mu=new WeakMap,Zc=new WeakMap,L0=new WeakMap,R0=new WeakMap,al=new WeakMap,qp=new WeakMap,pN=new WeakMap,aT=new WeakMap,gN=new WeakSet,LL=function([e,n],r,i){[r,i]=this.screenToPageTranslation(r,i),this.x+=r/e,this.y+=i/n,this._onTranslating(this.x,this.y),this.fixAndSetPosition()},vN=new WeakSet,RL=function(e,n,r){switch(r){case 90:return[n,-e];case 180:return[-e,-n];case 270:return[-n,e];default:return[e,n]}},M0=new WeakSet,tE=function(e){switch(e){case 90:{const[n,r]=this.pageDimensions;return[0,-n/r,r/n,0]}case 180:return[-1,0,0,-1];case 270:{const[n,r]=this.pageDimensions;return[0,n/r,-r/n,0]}default:return[1,0,0,1]}},oT=new WeakSet,nZ=function(){if(S(this,yi))return;Z(this,yi,document.createElement("div")),S(this,yi).classList.add("resizers");const e=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],n=this._uiManager._signal;for(const r of e){const i=document.createElement("div");S(this,yi).append(i),i.classList.add("resizer",r),i.setAttribute("data-resizer-name",r),i.addEventListener("pointerdown",se(this,lT,rZ).bind(this,r),{signal:n}),i.addEventListener("contextmenu",jl,{signal:n}),i.tabIndex=-1}this.div.prepend(S(this,yi))},lT=new WeakSet,rZ=function(e,n){var u;n.preventDefault();const{isMac:r}=ai.platform;if(n.button!==0||n.ctrlKey&&r)return;(u=S(this,Dr))==null||u.toggle(!1);const i=this._isDraggable;this._isDraggable=!1,Z(this,zp,[n.screenX,n.screenY]);const a=new AbortController,o=this._uiManager.combinedSignal(a);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",se(this,yN,FL).bind(this,e),{passive:!0,capture:!0,signal:o}),window.addEventListener("touchmove",hs,{passive:!1,signal:o}),window.addEventListener("contextmenu",jl,{signal:o}),Z(this,fu,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const l=this.parent.div.style.cursor,c=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(n.target).cursor;const d=()=>{var h;a.abort(),this.parent.togglePointerEvents(!0),(h=S(this,Dr))==null||h.toggle(!0),this._isDraggable=i,this.parent.div.style.cursor=l,this.div.style.cursor=c,se(this,F0,nE).call(this)};window.addEventListener("pointerup",d,{signal:o}),window.addEventListener("blur",d,{signal:o})},xN=new WeakSet,ML=function(e,n,r,i){this.width=r,this.height=i,this.x=e,this.y=n;const[a,o]=this.parentDimensions;this.setDims(a*r,o*i),this.fixAndSetPosition(),this._onResized()},F0=new WeakSet,nE=function(){if(!S(this,fu))return;const{savedX:e,savedY:n,savedWidth:r,savedHeight:i}=S(this,fu);Z(this,fu,null);const a=this.x,o=this.y,l=this.width,c=this.height;a===e&&o===n&&l===r&&c===i||this.addCommands({cmd:se(this,xN,ML).bind(this,a,o,l,c),undo:se(this,xN,ML).bind(this,e,n,r,i),mustExec:!0})},yN=new WeakSet,FL=function(e,n){const[r,i]=this.parentDimensions,a=this.x,o=this.y,l=this.width,c=this.height,d=mn.MIN_SIZE/r,u=mn.MIN_SIZE/i,h=se(this,M0,tE).call(this,this.rotation),f=(U,F)=>[h[0]*U+h[2]*F,h[1]*U+h[3]*F],m=se(this,M0,tE).call(this,360-this.rotation),v=(U,F)=>[m[0]*U+m[2]*F,m[1]*U+m[3]*F];let p,g,x=!1,y=!1;switch(e){case"topLeft":x=!0,p=(U,F)=>[0,0],g=(U,F)=>[U,F];break;case"topMiddle":p=(U,F)=>[U/2,0],g=(U,F)=>[U/2,F];break;case"topRight":x=!0,p=(U,F)=>[U,0],g=(U,F)=>[0,F];break;case"middleRight":y=!0,p=(U,F)=>[U,F/2],g=(U,F)=>[0,F/2];break;case"bottomRight":x=!0,p=(U,F)=>[U,F],g=(U,F)=>[0,0];break;case"bottomMiddle":p=(U,F)=>[U/2,F],g=(U,F)=>[U/2,0];break;case"bottomLeft":x=!0,p=(U,F)=>[0,F],g=(U,F)=>[U,0];break;case"middleLeft":y=!0,p=(U,F)=>[0,F/2],g=(U,F)=>[U,F/2];break}const b=p(l,c),w=g(l,c);let N=f(...w);const E=mn._round(a+N[0]),C=mn._round(o+N[1]);let j=1,I=1,k,D;if(n.fromKeyboard)({deltaX:k,deltaY:D}=n);else{const{screenX:U,screenY:F}=n,[z,H]=S(this,zp);[k,D]=this.screenToPageTranslation(U-z,F-H),S(this,zp)[0]=U,S(this,zp)[1]=F}if([k,D]=v(k/r,D/i),x){const U=Math.hypot(l,c);j=I=Math.max(Math.min(Math.hypot(w[0]-b[0]-k,w[1]-b[1]-D)/U,1/l,1/c),d/l,u/c)}else y?j=Wi(Math.abs(w[0]-b[0]-k),d,1)/l:I=Wi(Math.abs(w[1]-b[1]-D),u,1)/c;const P=mn._round(l*j),R=mn._round(c*I);N=f(...g(P,R));const _=E-N[0],M=C-N[1];S(this,ao)||Z(this,ao,[this.x,this.y,this.width,this.height]),this.width=P,this.height=R,this.x=_,this.y=M,this.setDims(r*P,i*R),this.fixAndSetPosition(),this._onResizing()},cT=new WeakSet,sZ=function(){var e;Z(this,fu,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height}),(e=S(this,Dr))==null||e.toggle(!1),this.parent.togglePointerEvents(!1)},dT=new WeakSet,iZ=function(e,n,r){let a=.7*(r/n)+1-.7;if(a===1)return;const o=se(this,M0,tE).call(this,this.rotation),l=(E,C)=>[o[0]*E+o[2]*C,o[1]*E+o[3]*C],[c,d]=this.parentDimensions,u=this.x,h=this.y,f=this.width,m=this.height,v=mn.MIN_SIZE/c,p=mn.MIN_SIZE/d;a=Math.max(Math.min(a,1/f,1/m),v/f,p/m);const g=mn._round(f*a),x=mn._round(m*a);if(g===f&&x===m)return;S(this,ao)||Z(this,ao,[u,h,f,m]);const y=l(f/2,m/2),b=mn._round(u+y[0]),w=mn._round(h+y[1]),N=l(g/2,x/2);this.x=b-N[0],this.y=w-N[1],this.width=g,this.height=x,this.setDims(c*g,d*x),this.fixAndSetPosition(),this._onResizing()},uT=new WeakSet,aZ=function(){var e;(e=S(this,Dr))==null||e.toggle(!0),this.parent.togglePointerEvents(!0),se(this,F0,nE).call(this)},bN=new WeakSet,$L=function(e){const{isMac:n}=ai.platform;e.ctrlKey&&!n||e.shiftKey||e.metaKey&&n?this.parent.toggleSelected(this):this.parent.setSelected(this)},hT=new WeakSet,oZ=function(e){const{isSelected:n}=this;this._uiManager.setUpDragSession();let r=!1;const i=new AbortController,a=this._uiManager.combinedSignal(i),o={capture:!0,passive:!1,signal:a},l=d=>{i.abort(),Z(this,df,null),Z(this,Up,!1),this._uiManager.endDragSession()||se(this,bN,$L).call(this,d),r&&this._onStopDragging()};n&&(Z(this,L0,e.clientX),Z(this,R0,e.clientY),Z(this,df,e.pointerId),Z(this,hN,e.pointerType),window.addEventListener("pointermove",d=>{r||(r=!0,this._onStartDragging());const{clientX:u,clientY:h,pointerId:f}=d;if(f!==S(this,df)){hs(d);return}const[m,v]=this.screenToPageTranslation(u-S(this,L0),h-S(this,R0));Z(this,L0,u),Z(this,R0,h),this._uiManager.dragSelectedEditors(m,v)},o),window.addEventListener("touchmove",hs,o),window.addEventListener("pointerdown",d=>{d.pointerType===S(this,hN)&&(S(this,qp)||d.isPrimary)&&l(d),hs(d)},o));const c=d=>{if(!S(this,df)||S(this,df)===d.pointerId){l(d);return}hs(d)};window.addEventListener("pointerup",c,{signal:a}),window.addEventListener("blur",c,{signal:a})},wN=new WeakSet,BL=function(){if(S(this,uf)||!this.div)return;Z(this,uf,new AbortController);const e=this._uiManager.combinedSignal(S(this,uf));this.div.addEventListener("focusin",this.focusin.bind(this),{signal:e}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:e})},fT=new WeakSet,lZ=function(e){mn._resizerKeyboardManager.exec(this,e)},mT=new WeakSet,cZ=function(e){var n;S(this,mu)&&((n=e.relatedTarget)==null?void 0:n.parentNode)!==S(this,yi)&&se(this,Hp,Cw).call(this)},pT=new WeakSet,dZ=function(e){Z(this,fN,S(this,mu)?e:"")},jN=new WeakSet,zL=function(e){if(S(this,Gl))for(const n of S(this,Gl))n.tabIndex=e},Hp=new WeakSet,Cw=function(){Z(this,mu,!1),se(this,jN,zL).call(this,-1),se(this,F0,nE).call(this)},G(mn,vN),ut(mn,"_l10n",null),ut(mn,"_l10nResizer",null),ut(mn,"_borderLineWidth",-1),ut(mn,"_colorManager",new PL),ut(mn,"_zIndex",1),ut(mn,"_telemetryTimeout",1e3);let wr=mn;class Mue extends wr{constructor(e){super(e),this.annotationElementId=e.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const F9=3285377520,Xo=4294901760,Fc=65535;class uZ{constructor(e){this.h1=e?e&4294967295:F9,this.h2=e?e&4294967295:F9}update(e){let n,r;if(typeof e=="string"){n=new Uint8Array(e.length*2),r=0;for(let p=0,g=e.length;p<g;p++){const x=e.charCodeAt(p);x<=255?n[r++]=x:(n[r++]=x>>>8,n[r++]=x&255)}}else if(ArrayBuffer.isView(e))n=e.slice(),r=n.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const i=r>>2,a=r-i*4,o=new Uint32Array(n.buffer,0,i);let l=0,c=0,d=this.h1,u=this.h2;const h=3432918353,f=461845907,m=h&Fc,v=f&Fc;for(let p=0;p<i;p++)p&1?(l=o[p],l=l*h&Xo|l*m&Fc,l=l<<15|l>>>17,l=l*f&Xo|l*v&Fc,d^=l,d=d<<13|d>>>19,d=d*5+3864292196):(c=o[p],c=c*h&Xo|c*m&Fc,c=c<<15|c>>>17,c=c*f&Xo|c*v&Fc,u^=c,u=u<<13|u>>>19,u=u*5+3864292196);switch(l=0,a){case 3:l^=n[i*4+2]<<16;case 2:l^=n[i*4+1]<<8;case 1:l^=n[i*4],l=l*h&Xo|l*m&Fc,l=l<<15|l>>>17,l=l*f&Xo|l*v&Fc,i&1?d^=l:u^=l}this.h1=d,this.h2=u}hexdigest(){let e=this.h1,n=this.h2;return e^=n>>>1,e=e*3981806797&Xo|e*36045&Fc,n=n*4283543511&Xo|((n<<16|e>>>16)*2950163797&Xo)>>>16,e^=n>>>1,e=e*444984403&Xo|e*60499&Fc,n=n*3301882366&Xo|((n<<16|e>>>16)*3120437893&Xo)>>>16,e^=n>>>1,(e>>>0).toString(16).padStart(8,"0")+(n>>>0).toString(16).padStart(8,"0")}}const UL=Object.freeze({map:null,hash:"",transfer:void 0});var Wp,Gp,bi,gT,hZ;class f${constructor(){G(this,gT);G(this,Wp,!1);G(this,Gp,null);G(this,bi,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(e,n){const r=S(this,bi).get(e);return r===void 0?n:Object.assign(n,r)}getRawValue(e){return S(this,bi).get(e)}remove(e){if(S(this,bi).delete(e),S(this,bi).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const n of S(this,bi).values())if(n instanceof wr)return;this.onAnnotationEditor(null)}}setValue(e,n){const r=S(this,bi).get(e);let i=!1;if(r!==void 0)for(const[a,o]of Object.entries(n))r[a]!==o&&(i=!0,r[a]=o);else i=!0,S(this,bi).set(e,n);i&&se(this,gT,hZ).call(this),n instanceof wr&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(n.constructor._type)}has(e){return S(this,bi).has(e)}get size(){return S(this,bi).size}resetModified(){S(this,Wp)&&(Z(this,Wp,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new fZ(this)}get serializable(){if(S(this,bi).size===0)return UL;const e=new Map,n=new uZ,r=[],i=Object.create(null);let a=!1;for(const[o,l]of S(this,bi)){const c=l instanceof wr?l.serialize(!1,i):l;c&&(e.set(o,c),n.update(`${o}:${JSON.stringify(c)}`),a||(a=!!c.bitmap))}if(a)for(const o of e.values())o.bitmap&&r.push(o.bitmap);return e.size>0?{map:e,hash:n.hexdigest(),transfer:r}:UL}get editorStats(){let e=null;const n=new Map;for(const r of S(this,bi).values()){if(!(r instanceof wr))continue;const i=r.telemetryFinalData;if(!i)continue;const{type:a}=i;n.has(a)||n.set(a,Object.getPrototypeOf(r).constructor),e||(e=Object.create(null));const o=e[a]||(e[a]=new Map);for(const[l,c]of Object.entries(i)){if(l==="type")continue;let d=o.get(l);d||(d=new Map,o.set(l,d));const u=d.get(c)??0;d.set(c,u+1)}}for(const[r,i]of n)e[r]=i.computeTelemetryFinalData(e[r]);return e}resetModifiedIds(){Z(this,Gp,null)}get modifiedIds(){if(S(this,Gp))return S(this,Gp);const e=[];for(const n of S(this,bi).values())!(n instanceof wr)||!n.annotationElementId||!n.serialize()||e.push(n.annotationElementId);return Z(this,Gp,{ids:new Set(e),hash:e.join(",")})}[Symbol.iterator](){return S(this,bi).entries()}}Wp=new WeakMap,Gp=new WeakMap,bi=new WeakMap,gT=new WeakSet,hZ=function(){S(this,Wp)||(Z(this,Wp,!0),typeof this.onSetModified=="function"&&this.onSetModified())};var NN;class fZ extends f${constructor(n){super();G(this,NN,void 0);const{map:r,hash:i,transfer:a}=n.serializable,o=structuredClone(r,a?{transfer:a}:null);Z(this,NN,{map:o,hash:i,transfer:a})}get print(){ir("Should not call PrintAnnotationStorage.print")}get serializable(){return S(this,NN)}get modifiedIds(){return xn(this,"modifiedIds",{ids:new Set,hash:""})}}NN=new WeakMap;var $0;class Fue{constructor({ownerDocument:e=globalThis.document,styleElement:n=null}){G(this,$0,new Set);this._document=e,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(e){this.nativeFontFaces.add(e),this._document.fonts.add(e)}removeNativeFontFace(e){this.nativeFontFaces.delete(e),this._document.fonts.delete(e)}insertRule(e){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const n=this.styleElement.sheet;n.insertRule(e,n.cssRules.length)}clear(){for(const e of this.nativeFontFaces)this._document.fonts.delete(e);this.nativeFontFaces.clear(),S(this,$0).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:e,disableFontFace:n,_inspectFont:r}){if(!(!e||S(this,$0).has(e.loadedName))){if(Ts(!n,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:i,src:a,style:o}=e,l=new FontFace(i,a,o);this.addNativeFontFace(l);try{await l.load(),S(this,$0).add(i),r==null||r(e)}catch{an(`Cannot load system font: ${e.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(l)}return}ir("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(e){if(e.attached||e.missingFile&&!e.systemFontInfo)return;if(e.attached=!0,e.systemFontInfo){await this.loadSystemFont(e);return}if(this.isFontLoadingAPISupported){const r=e.createNativeFontFace();if(r){this.addNativeFontFace(r);try{await r.loaded}catch(i){throw an(`Failed to load font '${r.family}': '${i}'.`),e.disableFontFace=!0,i}}return}const n=e.createFontFaceRule();if(n){if(this.insertRule(n),this.isSyncFontLoadingSupported)return;await new Promise(r=>{const i=this._queueLoadingCallback(r);this._prepareFontLoadEvent(e,i)})}}get isFontLoadingAPISupported(){var n;const e=!!((n=this._document)!=null&&n.fonts);return xn(this,"isFontLoadingAPISupported",e)}get isSyncFontLoadingSupported(){return xn(this,"isSyncFontLoadingSupported",ca||ai.platform.isFirefox)}_queueLoadingCallback(e){function n(){for(Ts(!i.done,"completeRequest() cannot be called twice."),i.done=!0;r.length>0&&r[0].done;){const a=r.shift();setTimeout(a.callback,0)}}const{loadingRequests:r}=this,i={done:!1,complete:n,callback:e};return r.push(i),i}get _loadTestFont(){const e=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return xn(this,"_loadTestFont",e)}_prepareFontLoadEvent(e,n){function r(w,N){return w.charCodeAt(N)<<24|w.charCodeAt(N+1)<<16|w.charCodeAt(N+2)<<8|w.charCodeAt(N+3)&255}function i(w,N,E,C){const j=w.substring(0,N),I=w.substring(N+E);return j+C+I}let a,o;const l=this._document.createElement("canvas");l.width=1,l.height=1;const c=l.getContext("2d");let d=0;function u(w,N){if(++d>30){an("Load test font never loaded."),N();return}if(c.font="30px "+w,c.fillText(".",0,20),c.getImageData(0,0,1,1).data[3]>0){N();return}setTimeout(u.bind(null,w,N))}const h=`lt${Date.now()}${this.loadTestFontId++}`;let f=this._loadTestFont;f=i(f,976,h.length,h);const v=16,p=1482184792;let g=r(f,v);for(a=0,o=h.length-3;a<o;a+=4)g=g-p+r(h,a)|0;a<h.length&&(g=g-p+r(h+"XXX",a)|0),f=i(f,v,4,Cue(g));const x=`url(data:font/opentype;base64,${btoa(f)});`,y=`@font-face {font-family:"${h}";src:${x}}`;this.insertRule(y);const b=this._document.createElement("div");b.style.visibility="hidden",b.style.width=b.style.height="10px",b.style.position="absolute",b.style.top=b.style.left="0px";for(const w of[e.loadedName,h]){const N=this._document.createElement("span");N.textContent="Hi",N.style.fontFamily=w,b.append(N)}this._document.body.append(b),u(h,()=>{b.remove(),n.complete()})}}$0=new WeakMap;class $ue{constructor(e,n=null){this.compiledGlyphs=Object.create(null);for(const r in e)this[r]=e[r];this._inspectFont=n}createNativeFontFace(){var n;if(!this.data||this.disableFontFace)return null;let e;if(!this.cssFontInfo)e=new FontFace(this.loadedName,this.data,{});else{const r={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(r.style=`oblique ${this.cssFontInfo.italicAngle}deg`),e=new FontFace(this.cssFontInfo.fontFamily,this.data,r)}return(n=this._inspectFont)==null||n.call(this,this),e}createFontFaceRule(){var r;if(!this.data||this.disableFontFace)return null;const e=`url(data:${this.mimetype};base64,${DX(this.data)});`;let n;if(!this.cssFontInfo)n=`@font-face {font-family:"${this.loadedName}";src:${e}}`;else{let i=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(i+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),n=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${i}src:${e}}`}return(r=this._inspectFont)==null||r.call(this,this,e),n}getPathGenerator(e,n){if(this.compiledGlyphs[n]!==void 0)return this.compiledGlyphs[n];const r=this.loadedName+"_path_"+n;let i;try{i=e.get(r)}catch(o){an(`getPathGenerator - ignoring character: "${o}".`)}const a=new Path2D(i||"");return this.fontExtraProperties||e.delete(r),this.compiledGlyphs[n]=a}}function Bue(t){if(t instanceof URL)return t.href;if(typeof t=="string"){if(ca)return t;const e=URL.parse(t,window.location);if(e)return e.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function zue(t){if(ca&&typeof Buffer<"u"&&t instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(t instanceof Uint8Array&&t.byteLength===t.buffer.byteLength)return t;if(typeof t=="string")return lA(t);if(t instanceof ArrayBuffer||ArrayBuffer.isView(t)||typeof t=="object"&&!isNaN(t==null?void 0:t.length))return new Uint8Array(t);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function Y5(t){if(typeof t!="string")return null;if(t.endsWith("/"))return t;throw new Error(`Invalid factory url: "${t}" must include trailing slash.`)}const VL=t=>typeof t=="object"&&Number.isInteger(t==null?void 0:t.num)&&t.num>=0&&Number.isInteger(t==null?void 0:t.gen)&&t.gen>=0,Uue=t=>typeof t=="object"&&typeof(t==null?void 0:t.name)=="string",mZ=Iue.bind(null,VL,Uue);var pu,vT;class Vue{constructor(){G(this,pu,new Map);G(this,vT,Promise.resolve())}postMessage(e,n){const r={data:structuredClone(e,n?{transfer:n}:null)};S(this,vT).then(()=>{for(const[i]of S(this,pu))i.call(this,r)})}addEventListener(e,n,r=null){let i=null;if((r==null?void 0:r.signal)instanceof AbortSignal){const{signal:a}=r;if(a.aborted){an("LoopbackPort - cannot use an `aborted` signal.");return}const o=()=>this.removeEventListener(e,n);i=()=>a.removeEventListener("abort",o),a.addEventListener("abort",o)}S(this,pu).set(n,i)}removeEventListener(e,n){const r=S(this,pu).get(n);r==null||r(),S(this,pu).delete(n)}terminate(){for(const[,e]of S(this,pu))e==null||e();S(this,pu).clear()}}pu=new WeakMap,vT=new WeakMap;const X5={DATA:1,ERROR:2},As={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function $9(){}function Ea(t){if(t instanceof eh||t instanceof iP||t instanceof L9||t instanceof Mj||t instanceof Zk)return t;switch(t instanceof Error||typeof t=="object"&&t!==null||ir('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),t.name){case"AbortException":return new eh(t.message);case"InvalidPDFException":return new iP(t.message);case"PasswordException":return new L9(t.message,t.code);case"ResponseException":return new Mj(t.message,t.status,t.missing);case"UnknownErrorException":return new Zk(t.message,t.details)}return new Zk(t.message,t.toString())}var B0,xT,pZ,yT,gZ,bT,vZ,z0,rE;class Ew{constructor(e,n,r){G(this,xT);G(this,yT);G(this,bT);G(this,z0);G(this,B0,new AbortController);this.sourceName=e,this.targetName=n,this.comObj=r,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),r.addEventListener("message",se(this,xT,pZ).bind(this),{signal:S(this,B0).signal})}on(e,n){const r=this.actionHandler;if(r[e])throw new Error(`There is already an actionName called "${e}"`);r[e]=n}send(e,n,r){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:n},r)}sendWithPromise(e,n,r){const i=this.callbackId++,a=Promise.withResolvers();this.callbackCapabilities[i]=a;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:i,data:n},r)}catch(o){a.reject(o)}return a.promise}sendWithStream(e,n,r,i){const a=this.streamId++,o=this.sourceName,l=this.targetName,c=this.comObj;return new ReadableStream({start:d=>{const u=Promise.withResolvers();return this.streamControllers[a]={controller:d,startCall:u,pullCall:null,cancelCall:null,isClosed:!1},c.postMessage({sourceName:o,targetName:l,action:e,streamId:a,data:n,desiredSize:d.desiredSize},i),u.promise},pull:d=>{const u=Promise.withResolvers();return this.streamControllers[a].pullCall=u,c.postMessage({sourceName:o,targetName:l,stream:As.PULL,streamId:a,desiredSize:d.desiredSize}),u.promise},cancel:d=>{Ts(d instanceof Error,"cancel must have a valid reason");const u=Promise.withResolvers();return this.streamControllers[a].cancelCall=u,this.streamControllers[a].isClosed=!0,c.postMessage({sourceName:o,targetName:l,stream:As.CANCEL,streamId:a,reason:Ea(d)}),u.promise}},r)}destroy(){var e;(e=S(this,B0))==null||e.abort(),Z(this,B0,null)}}B0=new WeakMap,xT=new WeakSet,pZ=function({data:e}){if(e.targetName!==this.sourceName)return;if(e.stream){se(this,bT,vZ).call(this,e);return}if(e.callback){const r=e.callbackId,i=this.callbackCapabilities[r];if(!i)throw new Error(`Cannot resolve callback ${r}`);if(delete this.callbackCapabilities[r],e.callback===X5.DATA)i.resolve(e.data);else if(e.callback===X5.ERROR)i.reject(Ea(e.reason));else throw new Error("Unexpected callback case");return}const n=this.actionHandler[e.action];if(!n)throw new Error(`Unknown action from worker: ${e.action}`);if(e.callbackId){const r=this.sourceName,i=e.sourceName,a=this.comObj;Promise.try(n,e.data).then(function(o){a.postMessage({sourceName:r,targetName:i,callback:X5.DATA,callbackId:e.callbackId,data:o})},function(o){a.postMessage({sourceName:r,targetName:i,callback:X5.ERROR,callbackId:e.callbackId,reason:Ea(o)})});return}if(e.streamId){se(this,yT,gZ).call(this,e);return}n(e.data)},yT=new WeakSet,gZ=function(e){const n=e.streamId,r=this.sourceName,i=e.sourceName,a=this.comObj,o=this,l=this.actionHandler[e.action],c={enqueue(d,u=1,h){if(this.isCancelled)return;const f=this.desiredSize;this.desiredSize-=u,f>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),a.postMessage({sourceName:r,targetName:i,stream:As.ENQUEUE,streamId:n,chunk:d},h)},close(){this.isCancelled||(this.isCancelled=!0,a.postMessage({sourceName:r,targetName:i,stream:As.CLOSE,streamId:n}),delete o.streamSinks[n])},error(d){Ts(d instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,a.postMessage({sourceName:r,targetName:i,stream:As.ERROR,streamId:n,reason:Ea(d)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:e.desiredSize,ready:null};c.sinkCapability.resolve(),c.ready=c.sinkCapability.promise,this.streamSinks[n]=c,Promise.try(l,e.data,c).then(function(){a.postMessage({sourceName:r,targetName:i,stream:As.START_COMPLETE,streamId:n,success:!0})},function(d){a.postMessage({sourceName:r,targetName:i,stream:As.START_COMPLETE,streamId:n,reason:Ea(d)})})},bT=new WeakSet,vZ=function(e){const n=e.streamId,r=this.sourceName,i=e.sourceName,a=this.comObj,o=this.streamControllers[n],l=this.streamSinks[n];switch(e.stream){case As.START_COMPLETE:e.success?o.startCall.resolve():o.startCall.reject(Ea(e.reason));break;case As.PULL_COMPLETE:e.success?o.pullCall.resolve():o.pullCall.reject(Ea(e.reason));break;case As.PULL:if(!l){a.postMessage({sourceName:r,targetName:i,stream:As.PULL_COMPLETE,streamId:n,success:!0});break}l.desiredSize<=0&&e.desiredSize>0&&l.sinkCapability.resolve(),l.desiredSize=e.desiredSize,Promise.try(l.onPull||$9).then(function(){a.postMessage({sourceName:r,targetName:i,stream:As.PULL_COMPLETE,streamId:n,success:!0})},function(d){a.postMessage({sourceName:r,targetName:i,stream:As.PULL_COMPLETE,streamId:n,reason:Ea(d)})});break;case As.ENQUEUE:if(Ts(o,"enqueue should have stream controller"),o.isClosed)break;o.controller.enqueue(e.chunk);break;case As.CLOSE:if(Ts(o,"close should have stream controller"),o.isClosed)break;o.isClosed=!0,o.controller.close(),se(this,z0,rE).call(this,o,n);break;case As.ERROR:Ts(o,"error should have stream controller"),o.controller.error(Ea(e.reason)),se(this,z0,rE).call(this,o,n);break;case As.CANCEL_COMPLETE:e.success?o.cancelCall.resolve():o.cancelCall.reject(Ea(e.reason)),se(this,z0,rE).call(this,o,n);break;case As.CANCEL:if(!l)break;const c=Ea(e.reason);Promise.try(l.onCancel||$9,c).then(function(){a.postMessage({sourceName:r,targetName:i,stream:As.CANCEL_COMPLETE,streamId:n,success:!0})},function(d){a.postMessage({sourceName:r,targetName:i,stream:As.CANCEL_COMPLETE,streamId:n,reason:Ea(d)})}),l.sinkCapability.reject(c),l.isCancelled=!0,delete this.streamSinks[n];break;default:throw new Error("Unexpected stream case")}},z0=new WeakSet,rE=async function(e,n){var r,i,a;await Promise.allSettled([(r=e.startCall)==null?void 0:r.promise,(i=e.pullCall)==null?void 0:i.promise,(a=e.cancelCall)==null?void 0:a.promise]),delete this.streamControllers[n]};var SN;class xZ{constructor({enableHWA:e=!1}){G(this,SN,!1);Z(this,SN,e)}create(e,n){if(e<=0||n<=0)throw new Error("Invalid canvas size");const r=this._createCanvas(e,n);return{canvas:r,context:r.getContext("2d",{willReadFrequently:!S(this,SN)})}}reset(e,n,r){if(!e.canvas)throw new Error("Canvas is not specified");if(n<=0||r<=0)throw new Error("Invalid canvas size");e.canvas.width=n,e.canvas.height=r}destroy(e){if(!e.canvas)throw new Error("Canvas is not specified");e.canvas.width=0,e.canvas.height=0,e.canvas=null,e.context=null}_createCanvas(e,n){ir("Abstract method `_createCanvas` called.")}}SN=new WeakMap;class que extends xZ{constructor({ownerDocument:e=globalThis.document,enableHWA:n=!1}){super({enableHWA:n}),this._document=e}_createCanvas(e,n){const r=this._document.createElement("canvas");return r.width=e,r.height=n,r}}class yZ{constructor({baseUrl:e=null,isCompressed:n=!0}){this.baseUrl=e,this.isCompressed=n}async fetch({name:e}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!e)throw new Error("CMap name must be specified.");const n=this.baseUrl+e+(this.isCompressed?".bcmap":"");return this._fetch(n).then(r=>({cMapData:r,isCompressed:this.isCompressed})).catch(r=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${n}`)})}async _fetch(e){ir("Abstract method `_fetch` called.")}}class B9 extends yZ{async _fetch(e){const n=await Ub(e,this.isCompressed?"arraybuffer":"text");return n instanceof ArrayBuffer?new Uint8Array(n):lA(n)}}class bZ{addFilter(e){return"none"}addHCMFilter(e,n){return"none"}addAlphaFilter(e){return"none"}addLuminosityFilter(e){return"none"}addHighlightHCMFilter(e,n,r,i,a){return"none"}destroy(e=!1){}}var Kp,U0,gu,vu,qi,Yp,Xp,Xs,Ui,Zp,Pw,hf,Ex,V0,sE,ff,Px,wT,wZ,AN,qL,mf,Tx,Qp,Tw,Jp,Iw,CN,HL,eg,Dw;class Hue extends bZ{constructor({docId:n,ownerDocument:r=globalThis.document}){super();G(this,Xs);G(this,Zp);G(this,hf);G(this,V0);G(this,ff);G(this,wT);G(this,AN);G(this,mf);G(this,Qp);G(this,Jp);G(this,CN);G(this,eg);G(this,Kp,void 0);G(this,U0,void 0);G(this,gu,void 0);G(this,vu,void 0);G(this,qi,void 0);G(this,Yp,void 0);G(this,Xp,0);Z(this,vu,n),Z(this,qi,r)}addFilter(n){if(!n)return"none";let r=S(this,Xs,Ui).get(n);if(r)return r;const[i,a,o]=se(this,V0,sE).call(this,n),l=n.length===1?i:`${i}${a}${o}`;if(r=S(this,Xs,Ui).get(l),r)return S(this,Xs,Ui).set(n,r),r;const c=`g_${S(this,vu)}_transfer_map_${na(this,Xp)._++}`,d=se(this,ff,Px).call(this,c);S(this,Xs,Ui).set(n,d),S(this,Xs,Ui).set(l,d);const u=se(this,mf,Tx).call(this,c);return se(this,Jp,Iw).call(this,i,a,o,u),d}addHCMFilter(n,r){var v;const i=`${n}-${r}`,a="base";let o=S(this,Zp,Pw).get(a);if((o==null?void 0:o.key)===i||(o?((v=o.filter)==null||v.remove(),o.key=i,o.url="none",o.filter=null):(o={key:i,url:"none",filter:null},S(this,Zp,Pw).set(a,o)),!n||!r))return o.url;const l=se(this,eg,Dw).call(this,n);n=kt.makeHexColor(...l);const c=se(this,eg,Dw).call(this,r);if(r=kt.makeHexColor(...c),S(this,hf,Ex).style.color="",n==="#000000"&&r==="#ffffff"||n===r)return o.url;const d=new Array(256);for(let p=0;p<=255;p++){const g=p/255;d[p]=g<=.03928?g/12.92:((g+.055)/1.055)**2.4}const u=d.join(","),h=`g_${S(this,vu)}_hcm_filter`,f=o.filter=se(this,mf,Tx).call(this,h);se(this,Jp,Iw).call(this,u,u,u,f),se(this,AN,qL).call(this,f);const m=(p,g)=>{const x=l[p]/255,y=c[p]/255,b=new Array(g+1);for(let w=0;w<=g;w++)b[w]=x+w/g*(y-x);return b.join(",")};return se(this,Jp,Iw).call(this,m(0,5),m(1,5),m(2,5),f),o.url=se(this,ff,Px).call(this,h),o.url}addAlphaFilter(n){let r=S(this,Xs,Ui).get(n);if(r)return r;const[i]=se(this,V0,sE).call(this,[n]),a=`alpha_${i}`;if(r=S(this,Xs,Ui).get(a),r)return S(this,Xs,Ui).set(n,r),r;const o=`g_${S(this,vu)}_alpha_map_${na(this,Xp)._++}`,l=se(this,ff,Px).call(this,o);S(this,Xs,Ui).set(n,l),S(this,Xs,Ui).set(a,l);const c=se(this,mf,Tx).call(this,o);return se(this,CN,HL).call(this,i,c),l}addLuminosityFilter(n){let r=S(this,Xs,Ui).get(n||"luminosity");if(r)return r;let i,a;if(n?([i]=se(this,V0,sE).call(this,[n]),a=`luminosity_${i}`):a="luminosity",r=S(this,Xs,Ui).get(a),r)return S(this,Xs,Ui).set(n,r),r;const o=`g_${S(this,vu)}_luminosity_map_${na(this,Xp)._++}`,l=se(this,ff,Px).call(this,o);S(this,Xs,Ui).set(n,l),S(this,Xs,Ui).set(a,l);const c=se(this,mf,Tx).call(this,o);return se(this,wT,wZ).call(this,c),n&&se(this,CN,HL).call(this,i,c),l}addHighlightHCMFilter(n,r,i,a,o){var y;const l=`${r}-${i}-${a}-${o}`;let c=S(this,Zp,Pw).get(n);if((c==null?void 0:c.key)===l||(c?((y=c.filter)==null||y.remove(),c.key=l,c.url="none",c.filter=null):(c={key:l,url:"none",filter:null},S(this,Zp,Pw).set(n,c)),!r||!i))return c.url;const[d,u]=[r,i].map(se(this,eg,Dw).bind(this));let h=Math.round(.2126*d[0]+.7152*d[1]+.0722*d[2]),f=Math.round(.2126*u[0]+.7152*u[1]+.0722*u[2]),[m,v]=[a,o].map(se(this,eg,Dw).bind(this));f<h&&([h,f,m,v]=[f,h,v,m]),S(this,hf,Ex).style.color="";const p=(b,w,N)=>{const E=new Array(256),C=(f-h)/N,j=b/255,I=(w-b)/(255*N);let k=0;for(let D=0;D<=N;D++){const P=Math.round(h+D*C),R=j+D*I;for(let _=k;_<=P;_++)E[_]=R;k=P+1}for(let D=k;D<256;D++)E[D]=E[k-1];return E.join(",")},g=`g_${S(this,vu)}_hcm_${n}_filter`,x=c.filter=se(this,mf,Tx).call(this,g);return se(this,AN,qL).call(this,x),se(this,Jp,Iw).call(this,p(m[0],v[0],5),p(m[1],v[1],5),p(m[2],v[2],5),x),c.url=se(this,ff,Px).call(this,g),c.url}destroy(n=!1){var r,i,a,o;n&&((r=S(this,Yp))!=null&&r.size)||((i=S(this,gu))==null||i.parentNode.parentNode.remove(),Z(this,gu,null),(a=S(this,U0))==null||a.clear(),Z(this,U0,null),(o=S(this,Yp))==null||o.clear(),Z(this,Yp,null),Z(this,Xp,0))}}Kp=new WeakMap,U0=new WeakMap,gu=new WeakMap,vu=new WeakMap,qi=new WeakMap,Yp=new WeakMap,Xp=new WeakMap,Xs=new WeakSet,Ui=function(){return S(this,U0)||Z(this,U0,new Map)},Zp=new WeakSet,Pw=function(){return S(this,Yp)||Z(this,Yp,new Map)},hf=new WeakSet,Ex=function(){if(!S(this,gu)){const n=S(this,qi).createElement("div"),{style:r}=n;r.visibility="hidden",r.contain="strict",r.width=r.height=0,r.position="absolute",r.top=r.left=0,r.zIndex=-1;const i=S(this,qi).createElementNS(Yd,"svg");i.setAttribute("width",0),i.setAttribute("height",0),Z(this,gu,S(this,qi).createElementNS(Yd,"defs")),n.append(i),i.append(S(this,gu)),S(this,qi).body.append(n)}return S(this,gu)},V0=new WeakSet,sE=function(n){if(n.length===1){const d=n[0],u=new Array(256);for(let f=0;f<256;f++)u[f]=d[f]/255;const h=u.join(",");return[h,h,h]}const[r,i,a]=n,o=new Array(256),l=new Array(256),c=new Array(256);for(let d=0;d<256;d++)o[d]=r[d]/255,l[d]=i[d]/255,c[d]=a[d]/255;return[o.join(","),l.join(","),c.join(",")]},ff=new WeakSet,Px=function(n){if(S(this,Kp)===void 0){Z(this,Kp,"");const r=S(this,qi).URL;r!==S(this,qi).baseURI&&(dA(r)?an('#createUrl: ignore "data:"-URL for performance reasons.'):Z(this,Kp,c$(r,"")))}return`url(${S(this,Kp)}#${n})`},wT=new WeakSet,wZ=function(n){const r=S(this,qi).createElementNS(Yd,"feColorMatrix");r.setAttribute("type","matrix"),r.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),n.append(r)},AN=new WeakSet,qL=function(n){const r=S(this,qi).createElementNS(Yd,"feColorMatrix");r.setAttribute("type","matrix"),r.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),n.append(r)},mf=new WeakSet,Tx=function(n){const r=S(this,qi).createElementNS(Yd,"filter");return r.setAttribute("color-interpolation-filters","sRGB"),r.setAttribute("id",n),S(this,hf,Ex).append(r),r},Qp=new WeakSet,Tw=function(n,r,i){const a=S(this,qi).createElementNS(Yd,r);a.setAttribute("type","discrete"),a.setAttribute("tableValues",i),n.append(a)},Jp=new WeakSet,Iw=function(n,r,i,a){const o=S(this,qi).createElementNS(Yd,"feComponentTransfer");a.append(o),se(this,Qp,Tw).call(this,o,"feFuncR",n),se(this,Qp,Tw).call(this,o,"feFuncG",r),se(this,Qp,Tw).call(this,o,"feFuncB",i)},CN=new WeakSet,HL=function(n,r){const i=S(this,qi).createElementNS(Yd,"feComponentTransfer");r.append(i),se(this,Qp,Tw).call(this,i,"feFuncA",n)},eg=new WeakSet,Dw=function(n){return S(this,hf,Ex).style.color=n,h$(getComputedStyle(S(this,hf,Ex)).getPropertyValue("color"))};class jZ{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!e)throw new Error("Font filename must be specified.");const n=`${this.baseUrl}${e}`;return this._fetch(n).catch(r=>{throw new Error(`Unable to load font data at: ${n}`)})}async _fetch(e){ir("Abstract method `_fetch` called.")}}class z9 extends jZ{async _fetch(e){const n=await Ub(e,"arraybuffer");return new Uint8Array(n)}}class NZ{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!e)throw new Error("Wasm filename must be specified.");const n=`${this.baseUrl}${e}`;return this._fetch(n).catch(r=>{throw new Error(`Unable to load wasm data at: ${n}`)})}async _fetch(e){ir("Abstract method `_fetch` called.")}}class U9 extends NZ{async _fetch(e){const n=await Ub(e,"arraybuffer");return new Uint8Array(n)}}ca&&an("Please use the `legacy` build in Node.js environments.");async function m$(t){const n=await process.getBuiltinModule("fs").promises.readFile(t);return new Uint8Array(n)}class Wue extends bZ{}class Gue extends xZ{_createCanvas(e,n){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(e,n)}}class Kue extends yZ{async _fetch(e){return m$(e)}}class Yue extends jZ{async _fetch(e){return m$(e)}}class Xue extends NZ{async _fetch(e){return m$(e)}}const Ai={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function WL(t,e){if(!e)return;const n=e[2]-e[0],r=e[3]-e[1],i=new Path2D;i.rect(e[0],e[1],n,r),t.clip(i)}class p${isModifyingCurrentTransform(){return!1}getPattern(){ir("Abstract method `getPattern` called.")}}class Zue extends p${constructor(e){super(),this._type=e[1],this._bbox=e[2],this._colorStops=e[3],this._p0=e[4],this._p1=e[5],this._r0=e[6],this._r1=e[7],this.matrix=null}_createGradient(e){let n;this._type==="axial"?n=e.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(n=e.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const r of this._colorStops)n.addColorStop(r[0],r[1]);return n}getPattern(e,n,r,i){let a;if(i===Ai.STROKE||i===Ai.FILL){const o=n.current.getClippedPathBoundingBox(i,$r(e))||[0,0,0,0],l=Math.ceil(o[2]-o[0])||1,c=Math.ceil(o[3]-o[1])||1,d=n.cachedCanvases.getCanvas("pattern",l,c),u=d.context;u.clearRect(0,0,u.canvas.width,u.canvas.height),u.beginPath(),u.rect(0,0,u.canvas.width,u.canvas.height),u.translate(-o[0],-o[1]),r=kt.transform(r,[1,0,0,1,o[0],o[1]]),u.transform(...n.baseTransform),this.matrix&&u.transform(...this.matrix),WL(u,this._bbox),u.fillStyle=this._createGradient(u),u.fill(),a=e.createPattern(d.canvas,"no-repeat");const h=new DOMMatrix(r);a.setTransform(h)}else WL(e,this._bbox),a=this._createGradient(e);return a}}function e_(t,e,n,r,i,a,o,l){const c=e.coords,d=e.colors,u=t.data,h=t.width*4;let f;c[n+1]>c[r+1]&&(f=n,n=r,r=f,f=a,a=o,o=f),c[r+1]>c[i+1]&&(f=r,r=i,i=f,f=o,o=l,l=f),c[n+1]>c[r+1]&&(f=n,n=r,r=f,f=a,a=o,o=f);const m=(c[n]+e.offsetX)*e.scaleX,v=(c[n+1]+e.offsetY)*e.scaleY,p=(c[r]+e.offsetX)*e.scaleX,g=(c[r+1]+e.offsetY)*e.scaleY,x=(c[i]+e.offsetX)*e.scaleX,y=(c[i+1]+e.offsetY)*e.scaleY;if(v>=y)return;const b=d[a],w=d[a+1],N=d[a+2],E=d[o],C=d[o+1],j=d[o+2],I=d[l],k=d[l+1],D=d[l+2],P=Math.round(v),R=Math.round(y);let _,M,U,F,z,H,W,$;for(let L=P;L<=R;L++){if(L<g){const re=L<v?0:(v-L)/(v-g);_=m-(m-p)*re,M=b-(b-E)*re,U=w-(w-C)*re,F=N-(N-j)*re}else{let re;L>y?re=1:g===y?re=0:re=(g-L)/(g-y),_=p-(p-x)*re,M=E-(E-I)*re,U=C-(C-k)*re,F=j-(j-D)*re}let q;L<v?q=0:L>y?q=1:q=(v-L)/(v-y),z=m-(m-x)*q,H=b-(b-I)*q,W=w-(w-k)*q,$=N-(N-D)*q;const Y=Math.round(Math.min(_,z)),J=Math.round(Math.max(_,z));let ne=h*L+Y*4;for(let re=Y;re<=J;re++)q=(_-re)/(_-z),q<0?q=0:q>1&&(q=1),u[ne++]=M-(M-H)*q|0,u[ne++]=U-(U-W)*q|0,u[ne++]=F-(F-$)*q|0,u[ne++]=255}}function Que(t,e,n){const r=e.coords,i=e.colors;let a,o;switch(e.type){case"lattice":const l=e.verticesPerRow,c=Math.floor(r.length/l)-1,d=l-1;for(a=0;a<c;a++){let u=a*l;for(let h=0;h<d;h++,u++)e_(t,n,r[u],r[u+1],r[u+l],i[u],i[u+1],i[u+l]),e_(t,n,r[u+l+1],r[u+1],r[u+l],i[u+l+1],i[u+1],i[u+l])}break;case"triangles":for(a=0,o=r.length;a<o;a+=3)e_(t,n,r[a],r[a+1],r[a+2],i[a],i[a+1],i[a+2]);break;default:throw new Error("illegal figure")}}class Jue extends p${constructor(e){super(),this._coords=e[2],this._colors=e[3],this._figures=e[4],this._bounds=e[5],this._bbox=e[6],this._background=e[7],this.matrix=null}_createMeshCanvas(e,n,r){const l=Math.floor(this._bounds[0]),c=Math.floor(this._bounds[1]),d=Math.ceil(this._bounds[2])-l,u=Math.ceil(this._bounds[3])-c,h=Math.min(Math.ceil(Math.abs(d*e[0]*1.1)),3e3),f=Math.min(Math.ceil(Math.abs(u*e[1]*1.1)),3e3),m=d/h,v=u/f,p={coords:this._coords,colors:this._colors,offsetX:-l,offsetY:-c,scaleX:1/m,scaleY:1/v},g=h+2*2,x=f+2*2,y=r.getCanvas("mesh",g,x),b=y.context,w=b.createImageData(h,f);if(n){const E=w.data;for(let C=0,j=E.length;C<j;C+=4)E[C]=n[0],E[C+1]=n[1],E[C+2]=n[2],E[C+3]=255}for(const E of this._figures)Que(w,E,p);return b.putImageData(w,2,2),{canvas:y.canvas,offsetX:l-2*m,offsetY:c-2*v,scaleX:m,scaleY:v}}isModifyingCurrentTransform(){return!0}getPattern(e,n,r,i){WL(e,this._bbox);const a=new Float32Array(2);if(i===Ai.SHADING)kt.singularValueDecompose2dScale($r(e),a);else if(this.matrix){kt.singularValueDecompose2dScale(this.matrix,a);const[l,c]=a;kt.singularValueDecompose2dScale(n.baseTransform,a),a[0]*=l,a[1]*=c}else kt.singularValueDecompose2dScale(n.baseTransform,a);const o=this._createMeshCanvas(a,i===Ai.SHADING?null:this._background,n.cachedCanvases);return i!==Ai.SHADING&&(e.setTransform(...n.baseTransform),this.matrix&&e.transform(...this.matrix)),e.translate(o.offsetX,o.offsetY),e.scale(o.scaleX,o.scaleY),e.createPattern(o.canvas,"no-repeat")}}class ehe extends p${getPattern(){return"hotpink"}}function the(t){switch(t[0]){case"RadialAxial":return new Zue(t);case"Mesh":return new Jue(t);case"Dummy":return new ehe}throw new Error(`Unknown IR type: ${t[0]}`)}const V9={COLORED:1,UNCOLORED:2},jT=class jT{constructor(e,n,r,i){this.color=e[1],this.operatorList=e[2],this.matrix=e[3],this.bbox=e[4],this.xstep=e[5],this.ystep=e[6],this.paintType=e[7],this.tilingType=e[8],this.ctx=n,this.canvasGraphicsFactory=r,this.baseTransform=i}createPatternCanvas(e){const{bbox:n,operatorList:r,paintType:i,tilingType:a,color:o,canvasGraphicsFactory:l}=this;let{xstep:c,ystep:d}=this;c=Math.abs(c),d=Math.abs(d),WI("TilingType: "+a);const u=n[0],h=n[1],f=n[2],m=n[3],v=f-u,p=m-h,g=new Float32Array(2);kt.singularValueDecompose2dScale(this.matrix,g);const[x,y]=g;kt.singularValueDecompose2dScale(this.baseTransform,g);const b=x*g[0],w=y*g[1];let N=v,E=p,C=!1,j=!1;const I=Math.ceil(c*b),k=Math.ceil(d*w),D=Math.ceil(v*b),P=Math.ceil(p*w);I>=D?N=c:C=!0,k>=P?E=d:j=!0;const R=this.getSizeAndScale(N,this.ctx.canvas.width,b),_=this.getSizeAndScale(E,this.ctx.canvas.height,w),M=e.cachedCanvases.getCanvas("pattern",R.size,_.size),U=M.context,F=l.createCanvasGraphics(U);if(F.groupLevel=e.groupLevel,this.setFillAndStrokeStyleToContext(F,i,o),U.translate(-R.scale*u,-_.scale*h),F.transform(R.scale,0,0,_.scale,0,0),U.save(),this.clipBbox(F,u,h,f,m),F.baseTransform=$r(F.ctx),F.executeOperatorList(r),F.endDrawing(),U.restore(),C||j){const z=M.canvas;C&&(N=c),j&&(E=d);const H=this.getSizeAndScale(N,this.ctx.canvas.width,b),W=this.getSizeAndScale(E,this.ctx.canvas.height,w),$=H.size,L=W.size,q=e.cachedCanvases.getCanvas("pattern-workaround",$,L),Y=q.context,J=C?Math.floor(v/c):0,ne=j?Math.floor(p/d):0;for(let re=0;re<=J;re++)for(let pe=0;pe<=ne;pe++)Y.drawImage(z,$*re,L*pe,$,L,0,0,$,L);return{canvas:q.canvas,scaleX:H.scale,scaleY:W.scale,offsetX:u,offsetY:h}}return{canvas:M.canvas,scaleX:R.scale,scaleY:_.scale,offsetX:u,offsetY:h}}getSizeAndScale(e,n,r){const i=Math.max(jT.MAX_PATTERN_SIZE,n);let a=Math.ceil(e*r);return a>=i?a=i:r=a/e,{scale:r,size:a}}clipBbox(e,n,r,i,a){const o=i-n,l=a-r;e.ctx.rect(n,r,o,l),kt.axialAlignedBoundingBox([n,r,i,a],$r(e.ctx),e.current.minMax),e.clip(),e.endPath()}setFillAndStrokeStyleToContext(e,n,r){const i=e.ctx,a=e.current;switch(n){case V9.COLORED:const{fillStyle:o,strokeStyle:l}=this.ctx;i.fillStyle=a.fillColor=o,i.strokeStyle=a.strokeColor=l;break;case V9.UNCOLORED:i.fillStyle=i.strokeStyle=r,a.fillColor=a.strokeColor=r;break;default:throw new Aue(`Unsupported paint type: ${n}`)}}isModifyingCurrentTransform(){return!1}getPattern(e,n,r,i){let a=r;i!==Ai.SHADING&&(a=kt.transform(a,n.baseTransform),this.matrix&&(a=kt.transform(a,this.matrix)));const o=this.createPatternCanvas(n);let l=new DOMMatrix(a);l=l.translate(o.offsetX,o.offsetY),l=l.scale(1/o.scaleX,1/o.scaleY);const c=e.createPattern(o.canvas,"repeat");return c.setTransform(l),c}};ut(jT,"MAX_PATTERN_SIZE",3e3);let GL=jT;function nhe({src:t,srcPos:e=0,dest:n,width:r,height:i,nonBlackColor:a=4294967295,inverseDecode:o=!1}){const l=ai.isLittleEndian?4278190080:255,[c,d]=o?[a,l]:[l,a],u=r>>3,h=r&7,f=t.length;n=new Uint32Array(n.buffer);let m=0;for(let v=0;v<i;v++){for(const g=e+u;e<g;e++){const x=e<f?t[e]:255;n[m++]=x&128?d:c,n[m++]=x&64?d:c,n[m++]=x&32?d:c,n[m++]=x&16?d:c,n[m++]=x&8?d:c,n[m++]=x&4?d:c,n[m++]=x&2?d:c,n[m++]=x&1?d:c}if(h===0)continue;const p=e<f?t[e++]:255;for(let g=0;g<h;g++)n[m++]=p&1<<7-g?d:c}return{srcPos:e,destPos:m}}const q9=16,H9=100,rhe=15,W9=10,_a=16,t_=new DOMMatrix,jo=new Float32Array(2),Kx=new Float32Array([1/0,1/0,-1/0,-1/0]);function she(t,e){if(t._removeMirroring)throw new Error("Context is already forwarding operations.");t.__originalSave=t.save,t.__originalRestore=t.restore,t.__originalRotate=t.rotate,t.__originalScale=t.scale,t.__originalTranslate=t.translate,t.__originalTransform=t.transform,t.__originalSetTransform=t.setTransform,t.__originalResetTransform=t.resetTransform,t.__originalClip=t.clip,t.__originalMoveTo=t.moveTo,t.__originalLineTo=t.lineTo,t.__originalBezierCurveTo=t.bezierCurveTo,t.__originalRect=t.rect,t.__originalClosePath=t.closePath,t.__originalBeginPath=t.beginPath,t._removeMirroring=()=>{t.save=t.__originalSave,t.restore=t.__originalRestore,t.rotate=t.__originalRotate,t.scale=t.__originalScale,t.translate=t.__originalTranslate,t.transform=t.__originalTransform,t.setTransform=t.__originalSetTransform,t.resetTransform=t.__originalResetTransform,t.clip=t.__originalClip,t.moveTo=t.__originalMoveTo,t.lineTo=t.__originalLineTo,t.bezierCurveTo=t.__originalBezierCurveTo,t.rect=t.__originalRect,t.closePath=t.__originalClosePath,t.beginPath=t.__originalBeginPath,delete t._removeMirroring},t.save=function(){e.save(),this.__originalSave()},t.restore=function(){e.restore(),this.__originalRestore()},t.translate=function(n,r){e.translate(n,r),this.__originalTranslate(n,r)},t.scale=function(n,r){e.scale(n,r),this.__originalScale(n,r)},t.transform=function(n,r,i,a,o,l){e.transform(n,r,i,a,o,l),this.__originalTransform(n,r,i,a,o,l)},t.setTransform=function(n,r,i,a,o,l){e.setTransform(n,r,i,a,o,l),this.__originalSetTransform(n,r,i,a,o,l)},t.resetTransform=function(){e.resetTransform(),this.__originalResetTransform()},t.rotate=function(n){e.rotate(n),this.__originalRotate(n)},t.clip=function(n){e.clip(n),this.__originalClip(n)},t.moveTo=function(n,r){e.moveTo(n,r),this.__originalMoveTo(n,r)},t.lineTo=function(n,r){e.lineTo(n,r),this.__originalLineTo(n,r)},t.bezierCurveTo=function(n,r,i,a,o,l){e.bezierCurveTo(n,r,i,a,o,l),this.__originalBezierCurveTo(n,r,i,a,o,l)},t.rect=function(n,r,i,a){e.rect(n,r,i,a),this.__originalRect(n,r,i,a)},t.closePath=function(){e.closePath(),this.__originalClosePath()},t.beginPath=function(){e.beginPath(),this.__originalBeginPath()}}class ihe{constructor(e){this.canvasFactory=e,this.cache=Object.create(null)}getCanvas(e,n,r){let i;return this.cache[e]!==void 0?(i=this.cache[e],this.canvasFactory.reset(i,n,r)):(i=this.canvasFactory.create(n,r),this.cache[e]=i),i}delete(e){delete this.cache[e]}clear(){for(const e in this.cache){const n=this.cache[e];this.canvasFactory.destroy(n),delete this.cache[e]}}}function Z5(t,e,n,r,i,a,o,l,c,d){const[u,h,f,m,v,p]=$r(t);if(h===0&&f===0){const y=o*u+v,b=Math.round(y),w=l*m+p,N=Math.round(w),E=(o+c)*u+v,C=Math.abs(Math.round(E)-b)||1,j=(l+d)*m+p,I=Math.abs(Math.round(j)-N)||1;return t.setTransform(Math.sign(u),0,0,Math.sign(m),b,N),t.drawImage(e,n,r,i,a,0,0,C,I),t.setTransform(u,h,f,m,v,p),[C,I]}if(u===0&&m===0){const y=l*f+v,b=Math.round(y),w=o*h+p,N=Math.round(w),E=(l+d)*f+v,C=Math.abs(Math.round(E)-b)||1,j=(o+c)*h+p,I=Math.abs(Math.round(j)-N)||1;return t.setTransform(0,Math.sign(h),Math.sign(f),0,b,N),t.drawImage(e,n,r,i,a,0,0,I,C),t.setTransform(u,h,f,m,v,p),[I,C]}t.drawImage(e,n,r,i,a,o,l,c,d);const g=Math.hypot(u,h),x=Math.hypot(f,m);return[g*c,x*d]}class G9{constructor(e,n){ut(this,"alphaIsShape",!1);ut(this,"fontSize",0);ut(this,"fontSizeScale",1);ut(this,"textMatrix",null);ut(this,"textMatrixScale",1);ut(this,"fontMatrix",SL);ut(this,"leading",0);ut(this,"x",0);ut(this,"y",0);ut(this,"lineX",0);ut(this,"lineY",0);ut(this,"charSpacing",0);ut(this,"wordSpacing",0);ut(this,"textHScale",1);ut(this,"textRenderingMode",zi.FILL);ut(this,"textRise",0);ut(this,"fillColor","#000000");ut(this,"strokeColor","#000000");ut(this,"patternFill",!1);ut(this,"patternStroke",!1);ut(this,"fillAlpha",1);ut(this,"strokeAlpha",1);ut(this,"lineWidth",1);ut(this,"activeSMask",null);ut(this,"transferMaps","none");this.clipBox=new Float32Array([0,0,e,n]),this.minMax=Kx.slice()}clone(){const e=Object.create(this);return e.clipBox=this.clipBox.slice(),e.minMax=this.minMax.slice(),e}getPathBoundingBox(e=Ai.FILL,n=null){const r=this.minMax.slice();if(e===Ai.STROKE){n||ir("Stroke bounding box must include transform."),kt.singularValueDecompose2dScale(n,jo);const i=jo[0]*this.lineWidth/2,a=jo[1]*this.lineWidth/2;r[0]-=i,r[1]-=a,r[2]+=i,r[3]+=a}return r}updateClipFromPath(){const e=kt.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(e||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(e){this.clipBox.set(e,0),this.minMax.set(Kx,0)}getClippedPathBoundingBox(e=Ai.FILL,n=null){return kt.intersect(this.clipBox,this.getPathBoundingBox(e,n))}}function K9(t,e){if(e instanceof ImageData){t.putImageData(e,0,0);return}const n=e.height,r=e.width,i=n%_a,a=(n-i)/_a,o=i===0?a:a+1,l=t.createImageData(r,_a);let c=0,d;const u=e.data,h=l.data;let f,m,v,p;if(e.kind===Zw.GRAYSCALE_1BPP){const g=u.byteLength,x=new Uint32Array(h.buffer,0,h.byteLength>>2),y=x.length,b=r+7>>3,w=4294967295,N=ai.isLittleEndian?4278190080:255;for(f=0;f<o;f++){for(v=f<a?_a:i,d=0,m=0;m<v;m++){const E=g-c;let C=0;const j=E>b?r:E*8-7,I=j&-8;let k=0,D=0;for(;C<I;C+=8)D=u[c++],x[d++]=D&128?w:N,x[d++]=D&64?w:N,x[d++]=D&32?w:N,x[d++]=D&16?w:N,x[d++]=D&8?w:N,x[d++]=D&4?w:N,x[d++]=D&2?w:N,x[d++]=D&1?w:N;for(;C<j;C++)k===0&&(D=u[c++],k=128),x[d++]=D&k?w:N,k>>=1}for(;d<y;)x[d++]=0;t.putImageData(l,0,f*_a)}}else if(e.kind===Zw.RGBA_32BPP){for(m=0,p=r*_a*4,f=0;f<a;f++)h.set(u.subarray(c,c+p)),c+=p,t.putImageData(l,0,m),m+=_a;f<o&&(p=r*i*4,h.set(u.subarray(c,c+p)),t.putImageData(l,0,m))}else if(e.kind===Zw.RGB_24BPP)for(v=_a,p=r*v,f=0;f<o;f++){for(f>=a&&(v=i,p=r*v),d=0,m=p;m--;)h[d++]=u[c++],h[d++]=u[c++],h[d++]=u[c++],h[d++]=255;t.putImageData(l,0,f*_a)}else throw new Error(`bad image kind: ${e.kind}`)}function Y9(t,e){if(e.bitmap){t.drawImage(e.bitmap,0,0);return}const n=e.height,r=e.width,i=n%_a,a=(n-i)/_a,o=i===0?a:a+1,l=t.createImageData(r,_a);let c=0;const d=e.data,u=l.data;for(let h=0;h<o;h++){const f=h<a?_a:i;({srcPos:c}=nhe({src:d,srcPos:c,dest:u,width:r,height:f,nonBlackColor:0})),t.putImageData(l,0,h*_a)}}function X1(t,e){const n=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const r of n)t[r]!==void 0&&(e[r]=t[r]);t.setLineDash!==void 0&&(e.setLineDash(t.getLineDash()),e.lineDashOffset=t.lineDashOffset)}function Q5(t){t.strokeStyle=t.fillStyle="#000000",t.fillRule="nonzero",t.globalAlpha=1,t.lineWidth=1,t.lineCap="butt",t.lineJoin="miter",t.miterLimit=10,t.globalCompositeOperation="source-over",t.font="10px sans-serif",t.setLineDash!==void 0&&(t.setLineDash([]),t.lineDashOffset=0);const{filter:e}=t;e!=="none"&&e!==""&&(t.filter="none")}function X9(t,e){if(e)return!0;kt.singularValueDecompose2dScale(t,jo);const n=Math.fround(vc.pixelRatio*th.PDF_TO_CSS_UNITS);return jo[0]<=n&&jo[1]<=n}const ahe=["butt","round","square"],ohe=["miter","round","bevel"],lhe={},Z9={};var EN,KL,PN,YL,TN,XL;const K7=class K7{constructor(e,n,r,i,a,{optionalContentConfig:o,markedContentStack:l=null},c,d){G(this,EN);G(this,PN);G(this,TN);this.ctx=e,this.current=new G9(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=n,this.objs=r,this.canvasFactory=i,this.filterFactory=a,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=l||[],this.optionalContentConfig=o,this.cachedCanvases=new ihe(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=c,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=d,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(e,n=null){return typeof e=="string"?e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e):n}beginDrawing({transform:e,viewport:n,transparency:r=!1,background:i=null}){const a=this.ctx.canvas.width,o=this.ctx.canvas.height,l=this.ctx.fillStyle;if(this.ctx.fillStyle=i||"#ffffff",this.ctx.fillRect(0,0,a,o),this.ctx.fillStyle=l,r){const c=this.cachedCanvases.getCanvas("transparent",a,o);this.compositeCtx=this.ctx,this.transparentCanvas=c.canvas,this.ctx=c.context,this.ctx.save(),this.ctx.transform(...$r(this.compositeCtx))}this.ctx.save(),Q5(this.ctx),e&&(this.ctx.transform(...e),this.outputScaleX=e[0],this.outputScaleY=e[0]),this.ctx.transform(...n.transform),this.viewportScale=n.scale,this.baseTransform=$r(this.ctx)}executeOperatorList(e,n,r,i){const a=e.argsArray,o=e.fnArray;let l=n||0;const c=a.length;if(c===l)return l;const d=c-l>W9&&typeof r=="function",u=d?Date.now()+rhe:0;let h=0;const f=this.commonObjs,m=this.objs;let v;for(;;){if(i!==void 0&&l===i.nextBreakPoint)return i.breakIt(l,r),l;if(v=o[l],v!==Rj.dependency)this[v].apply(this,a[l]);else for(const p of a[l]){const g=p.startsWith("g_")?f:m;if(!g.has(p))return g.get(p,r),l}if(l++,l===c)return l;if(d&&++h>W9){if(Date.now()>u)return r(),l;h=0}}}endDrawing(){se(this,EN,KL).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const e of this._cachedBitmapsMap.values()){for(const n of e.values())typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement&&(n.width=n.height=0);e.clear()}this._cachedBitmapsMap.clear(),se(this,PN,YL).call(this)}_scaleImage(e,n){const r=e.width??e.displayWidth,i=e.height??e.displayHeight;let a=Math.max(Math.hypot(n[0],n[1]),1),o=Math.max(Math.hypot(n[2],n[3]),1),l=r,c=i,d="prescale1",u,h;for(;a>2&&l>1||o>2&&c>1;){let f=l,m=c;a>2&&l>1&&(f=l>=16384?Math.floor(l/2)-1||1:Math.ceil(l/2),a/=l/f),o>2&&c>1&&(m=c>=16384?Math.floor(c/2)-1||1:Math.ceil(c)/2,o/=c/m),u=this.cachedCanvases.getCanvas(d,f,m),h=u.context,h.clearRect(0,0,f,m),h.drawImage(e,0,0,l,c,0,0,f,m),e=u.canvas,l=f,c=m,d=d==="prescale1"?"prescale2":"prescale1"}return{img:e,paintWidth:l,paintHeight:c}}_createMaskCanvas(e){const n=this.ctx,{width:r,height:i}=e,a=this.current.fillColor,o=this.current.patternFill,l=$r(n);let c,d,u,h;if((e.bitmap||e.data)&&e.count>1){const I=e.bitmap||e.data.buffer;d=JSON.stringify(o?l:[l.slice(0,4),a]),c=this._cachedBitmapsMap.get(I),c||(c=new Map,this._cachedBitmapsMap.set(I,c));const k=c.get(d);if(k&&!o){const D=Math.round(Math.min(l[0],l[2])+l[4]),P=Math.round(Math.min(l[1],l[3])+l[5]);return{canvas:k,offsetX:D,offsetY:P}}u=k}u||(h=this.cachedCanvases.getCanvas("maskCanvas",r,i),Y9(h.context,e));let f=kt.transform(l,[1/r,0,0,-1/i,0,0]);f=kt.transform(f,[1,0,0,1,0,-i]);const m=Kx.slice();kt.axialAlignedBoundingBox([0,0,r,i],f,m);const[v,p,g,x]=m,y=Math.round(g-v)||1,b=Math.round(x-p)||1,w=this.cachedCanvases.getCanvas("fillCanvas",y,b),N=w.context,E=v,C=p;N.translate(-E,-C),N.transform(...f),u||(u=this._scaleImage(h.canvas,Mc(N)),u=u.img,c&&o&&c.set(d,u)),N.imageSmoothingEnabled=X9($r(N),e.interpolate),Z5(N,u,0,0,u.width,u.height,0,0,r,i),N.globalCompositeOperation="source-in";const j=kt.transform(Mc(N),[1,0,0,1,-E,-C]);return N.fillStyle=o?a.getPattern(n,this,j,Ai.FILL):a,N.fillRect(0,0,r,i),c&&!o&&(this.cachedCanvases.delete("fillCanvas"),c.set(d,w.canvas)),{canvas:w.canvas,offsetX:Math.round(E),offsetY:Math.round(C)}}setLineWidth(e){e!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=e,this.ctx.lineWidth=e}setLineCap(e){this.ctx.lineCap=ahe[e]}setLineJoin(e){this.ctx.lineJoin=ohe[e]}setMiterLimit(e){this.ctx.miterLimit=e}setDash(e,n){const r=this.ctx;r.setLineDash!==void 0&&(r.setLineDash(e),r.lineDashOffset=n)}setRenderingIntent(e){}setFlatness(e){}setGState(e){for(const[n,r]of e)switch(n){case"LW":this.setLineWidth(r);break;case"LC":this.setLineCap(r);break;case"LJ":this.setLineJoin(r);break;case"ML":this.setMiterLimit(r);break;case"D":this.setDash(r[0],r[1]);break;case"RI":this.setRenderingIntent(r);break;case"FL":this.setFlatness(r);break;case"Font":this.setFont(r[0],r[1]);break;case"CA":this.current.strokeAlpha=r;break;case"ca":this.ctx.globalAlpha=this.current.fillAlpha=r;break;case"BM":this.ctx.globalCompositeOperation=r;break;case"SMask":this.current.activeSMask=r?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(r);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const e=this.inSMaskMode;this.current.activeSMask&&!e?this.beginSMaskMode():!this.current.activeSMask&&e&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const e=this.ctx.canvas.width,n=this.ctx.canvas.height,r="smaskGroupAt"+this.groupLevel,i=this.cachedCanvases.getCanvas(r,e,n);this.suspendedCtx=this.ctx;const a=this.ctx=i.context;a.setTransform(this.suspendedCtx.getTransform()),X1(this.suspendedCtx,a),she(a,this.suspendedCtx),this.setGState([["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),X1(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(e){if(!this.current.activeSMask)return;e?(e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.ceil(e[2]),e[3]=Math.ceil(e[3])):e=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const n=this.current.activeSMask,r=this.suspendedCtx;this.composeSMask(r,n,this.ctx,e),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(e,n,r,i){const a=i[0],o=i[1],l=i[2]-a,c=i[3]-o;l===0||c===0||(this.genericComposeSMask(n.context,r,l,c,n.subtype,n.backdrop,n.transferMap,a,o,n.offsetX,n.offsetY),e.save(),e.globalAlpha=1,e.globalCompositeOperation="source-over",e.setTransform(1,0,0,1,0,0),e.drawImage(r.canvas,0,0),e.restore())}genericComposeSMask(e,n,r,i,a,o,l,c,d,u,h){let f=e.canvas,m=c-u,v=d-h;if(o)if(m<0||v<0||m+r>f.width||v+i>f.height){const g=this.cachedCanvases.getCanvas("maskExtension",r,i),x=g.context;x.drawImage(f,-m,-v),x.globalCompositeOperation="destination-atop",x.fillStyle=o,x.fillRect(0,0,r,i),x.globalCompositeOperation="source-over",f=g.canvas,m=v=0}else{e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0);const g=new Path2D;g.rect(m,v,r,i),e.clip(g),e.globalCompositeOperation="destination-atop",e.fillStyle=o,e.fillRect(m,v,r,i),e.restore()}n.save(),n.globalAlpha=1,n.setTransform(1,0,0,1,0,0),a==="Alpha"&&l?n.filter=this.filterFactory.addAlphaFilter(l):a==="Luminosity"&&(n.filter=this.filterFactory.addLuminosityFilter(l));const p=new Path2D;p.rect(c,d,r,i),n.clip(p),n.globalCompositeOperation="destination-in",n.drawImage(f,m,v,r,i,c,d,r,i),n.restore()}save(){this.inSMaskMode&&X1(this.ctx,this.suspendedCtx),this.ctx.save();const e=this.current;this.stateStack.push(e),this.current=e.clone()}restore(){if(this.stateStack.length===0){this.inSMaskMode&&this.endSMaskMode();return}this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&X1(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}transform(e,n,r,i,a,o){this.ctx.transform(e,n,r,i,a,o),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(e,n,r){let[i]=n;if(!r){i||(i=n[0]=new Path2D),this[e](i);return}if(!(i instanceof Path2D)){const a=n[0]=new Path2D;for(let o=0,l=i.length;o<l;)switch(i[o++]){case K5.moveTo:a.moveTo(i[o++],i[o++]);break;case K5.lineTo:a.lineTo(i[o++],i[o++]);break;case K5.curveTo:a.bezierCurveTo(i[o++],i[o++],i[o++],i[o++],i[o++],i[o++]);break;case K5.closePath:a.closePath();break;default:an(`Unrecognized drawing path operator: ${i[o-1]}`);break}i=a}kt.axialAlignedBoundingBox(r,$r(this.ctx),this.current.minMax),this[e](i)}closePath(){this.ctx.closePath()}stroke(e,n=!0){const r=this.ctx,i=this.current.strokeColor;if(r.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof i=="object"&&(i!=null&&i.getPattern)){const a=i.isModifyingCurrentTransform()?r.getTransform():null;if(r.save(),r.strokeStyle=i.getPattern(r,this,Mc(r),Ai.STROKE),a){const o=new Path2D;o.addPath(e,r.getTransform().invertSelf().multiplySelf(a)),e=o}this.rescaleAndStroke(e,!1),r.restore()}else this.rescaleAndStroke(e,!0);n&&this.consumePath(e,this.current.getClippedPathBoundingBox(Ai.STROKE,$r(this.ctx))),r.globalAlpha=this.current.fillAlpha}closeStroke(e){this.stroke(e)}fill(e,n=!0){const r=this.ctx,i=this.current.fillColor,a=this.current.patternFill;let o=!1;if(a){const c=i.isModifyingCurrentTransform()?r.getTransform():null;if(r.save(),r.fillStyle=i.getPattern(r,this,Mc(r),Ai.FILL),c){const d=new Path2D;d.addPath(e,r.getTransform().invertSelf().multiplySelf(c)),e=d}o=!0}const l=this.current.getClippedPathBoundingBox();this.contentVisible&&l!==null&&(this.pendingEOFill?(r.fill(e,"evenodd"),this.pendingEOFill=!1):r.fill(e)),o&&r.restore(),n&&this.consumePath(e,l)}eoFill(e){this.pendingEOFill=!0,this.fill(e)}fillStroke(e){this.fill(e,!1),this.stroke(e,!1),this.consumePath(e)}eoFillStroke(e){this.pendingEOFill=!0,this.fillStroke(e)}closeFillStroke(e){this.fillStroke(e)}closeEOFillStroke(e){this.pendingEOFill=!0,this.fillStroke(e)}endPath(e){this.consumePath(e)}rawFillPath(e){this.ctx.fill(e)}clip(){this.pendingClip=lhe}eoClip(){this.pendingClip=Z9}beginText(){this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const e=this.pendingTextPaths,n=this.ctx;if(e===void 0)return;const r=new Path2D,i=n.getTransform().invertSelf();for(const{transform:a,x:o,y:l,fontSize:c,path:d}of e)r.addPath(d,new DOMMatrix(a).preMultiplySelf(i).translate(o,l).scale(c,-c));n.clip(r),delete this.pendingTextPaths}setCharSpacing(e){this.current.charSpacing=e}setWordSpacing(e){this.current.wordSpacing=e}setHScale(e){this.current.textHScale=e/100}setLeading(e){this.current.leading=-e}setFont(e,n){var u;const r=this.commonObjs.get(e),i=this.current;if(!r)throw new Error(`Can't find font for ${e}`);if(i.fontMatrix=r.fontMatrix||SL,(i.fontMatrix[0]===0||i.fontMatrix[3]===0)&&an("Invalid font matrix for font "+e),n<0?(n=-n,i.fontDirection=-1):i.fontDirection=1,this.current.font=r,this.current.fontSize=n,r.isType3Font)return;const a=r.loadedName||"sans-serif",o=((u=r.systemFontInfo)==null?void 0:u.css)||`"${a}", ${r.fallbackName}`;let l="normal";r.black?l="900":r.bold&&(l="bold");const c=r.italic?"italic":"normal";let d=n;n<q9?d=q9:n>H9&&(d=H9),this.current.fontSizeScale=n/d,this.ctx.font=`${c} ${l} ${d}px ${o}`}setTextRenderingMode(e){this.current.textRenderingMode=e}setTextRise(e){this.current.textRise=e}moveText(e,n){this.current.x=this.current.lineX+=e,this.current.y=this.current.lineY+=n}setLeadingMoveText(e,n){this.setLeading(-n),this.moveText(e,n)}setTextMatrix(e){const{current:n}=this;n.textMatrix=e,n.textMatrixScale=Math.hypot(e[0],e[1]),n.x=n.lineX=0,n.y=n.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(e,n,r,i,a){const o=this.ctx,l=this.current,c=l.font,d=l.textRenderingMode,u=l.fontSize/l.fontSizeScale,h=d&zi.FILL_STROKE_MASK,f=!!(d&zi.ADD_TO_PATH_FLAG),m=l.patternFill&&!c.missingFile,v=l.patternStroke&&!c.missingFile;let p;if((c.disableFontFace||f||m||v)&&(p=c.getPathGenerator(this.commonObjs,e)),c.disableFontFace||m||v){o.save(),o.translate(n,r),o.scale(u,-u);let g;if((h===zi.FILL||h===zi.FILL_STROKE)&&(i?(g=o.getTransform(),o.setTransform(...i),o.fill(se(this,TN,XL).call(this,p,g,i))):o.fill(p)),h===zi.STROKE||h===zi.FILL_STROKE)if(a){g||(g=o.getTransform()),o.setTransform(...a);const{a:x,b:y,c:b,d:w}=g,N=kt.inverseTransform(a),E=kt.transform([x,y,b,w,0,0],N);kt.singularValueDecompose2dScale(E,jo),o.lineWidth*=Math.max(jo[0],jo[1])/u,o.stroke(se(this,TN,XL).call(this,p,g,a))}else o.lineWidth/=u,o.stroke(p);o.restore()}else(h===zi.FILL||h===zi.FILL_STROKE)&&o.fillText(e,n,r),(h===zi.STROKE||h===zi.FILL_STROKE)&&o.strokeText(e,n,r);f&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:$r(o),x:n,y:r,fontSize:u,path:p})}get isFontSubpixelAAEnabled(){const{context:e}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);e.scale(1.5,1),e.fillText("I",0,10);const n=e.getImageData(0,0,10,10).data;let r=!1;for(let i=3;i<n.length;i+=4)if(n[i]>0&&n[i]<255){r=!0;break}return xn(this,"isFontSubpixelAAEnabled",r)}showText(e){const n=this.current,r=n.font;if(r.isType3Font)return this.showType3Text(e);const i=n.fontSize;if(i===0)return;const a=this.ctx,o=n.fontSizeScale,l=n.charSpacing,c=n.wordSpacing,d=n.fontDirection,u=n.textHScale*d,h=e.length,f=r.vertical,m=f?1:-1,v=r.defaultVMetrics,p=i*n.fontMatrix[0],g=n.textRenderingMode===zi.FILL&&!r.disableFontFace&&!n.patternFill;a.save(),n.textMatrix&&a.transform(...n.textMatrix),a.translate(n.x,n.y+n.textRise),d>0?a.scale(u,-1):a.scale(u,1);let x,y;if(n.patternFill){a.save();const C=n.fillColor.getPattern(a,this,Mc(a),Ai.FILL);x=$r(a),a.restore(),a.fillStyle=C}if(n.patternStroke){a.save();const C=n.strokeColor.getPattern(a,this,Mc(a),Ai.STROKE);y=$r(a),a.restore(),a.strokeStyle=C}let b=n.lineWidth;const w=n.textMatrixScale;if(w===0||b===0){const C=n.textRenderingMode&zi.FILL_STROKE_MASK;(C===zi.STROKE||C===zi.FILL_STROKE)&&(b=this.getSinglePixelWidth())}else b/=w;if(o!==1&&(a.scale(o,o),b/=o),a.lineWidth=b,r.isInvalidPDFjsFont){const C=[];let j=0;for(const I of e)C.push(I.unicode),j+=I.width;a.fillText(C.join(""),0,0),n.x+=j*p*u,a.restore(),this.compose();return}let N=0,E;for(E=0;E<h;++E){const C=e[E];if(typeof C=="number"){N+=m*C*i/1e3;continue}let j=!1;const I=(C.isSpace?c:0)+l,k=C.fontChar,D=C.accent;let P,R,_=C.width;if(f){const U=C.vmetric||v,F=-(C.vmetric?U[1]:_*.5)*p,z=U[2]*p;_=U?-U[0]:_,P=F/o,R=(N+z)/o}else P=N/o,R=0;if(r.remeasure&&_>0){const U=a.measureText(k).width*1e3/i*o;if(_<U&&this.isFontSubpixelAAEnabled){const F=_/U;j=!0,a.save(),a.scale(F,1),P/=F}else _!==U&&(P+=(_-U)/2e3*i/o)}if(this.contentVisible&&(C.isInFont||r.missingFile)){if(g&&!D)a.fillText(k,P,R);else if(this.paintChar(k,P,R,x,y),D){const U=P+i*D.offset.x/o,F=R-i*D.offset.y/o;this.paintChar(D.fontChar,U,F,x,y)}}const M=f?_*p-I*d:_*p+I*d;N+=M,j&&a.restore()}f?n.y-=N:n.x+=N*u,a.restore(),this.compose()}showType3Text(e){const n=this.ctx,r=this.current,i=r.font,a=r.fontSize,o=r.fontDirection,l=i.vertical?1:-1,c=r.charSpacing,d=r.wordSpacing,u=r.textHScale*o,h=r.fontMatrix||SL,f=e.length,m=r.textRenderingMode===zi.INVISIBLE;let v,p,g,x;if(!(m||a===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,n.save(),r.textMatrix&&n.transform(...r.textMatrix),n.translate(r.x,r.y+r.textRise),n.scale(u,o),v=0;v<f;++v){if(p=e[v],typeof p=="number"){x=l*p*a/1e3,this.ctx.translate(x,0),r.x+=x*u;continue}const y=(p.isSpace?d:0)+c,b=i.charProcOperatorList[p.operatorListId];b?this.contentVisible&&(this.save(),n.scale(a,a),n.transform(...h),this.executeOperatorList(b),this.restore()):an(`Type3 character "${p.operatorListId}" is not available.`);const w=[p.width,0];kt.applyTransform(w,h),g=w[0]*a+y,n.translate(g,0),r.x+=g*u}n.restore()}}setCharWidth(e,n){}setCharWidthAndBounds(e,n,r,i,a,o){const l=new Path2D;l.rect(r,i,a-r,o-i),this.ctx.clip(l),this.endPath()}getColorN_Pattern(e){let n;if(e[0]==="TilingPattern"){const r=this.baseTransform||$r(this.ctx),i={createCanvasGraphics:a=>new K7(a,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};n=new GL(e,this.ctx,i,r)}else n=this._getPattern(e[1],e[2]);return n}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments),this.current.patternStroke=!0}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(e){this.ctx.strokeStyle=this.current.strokeColor=e,this.current.patternStroke=!1}setStrokeTransparent(){this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(e){this.ctx.fillStyle=this.current.fillColor=e,this.current.patternFill=!1}setFillTransparent(){this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(e,n=null){let r;return this.cachedPatterns.has(e)?r=this.cachedPatterns.get(e):(r=the(this.getObject(e)),this.cachedPatterns.set(e,r)),n&&(r.matrix=n),r}shadingFill(e){if(!this.contentVisible)return;const n=this.ctx;this.save();const r=this._getPattern(e);n.fillStyle=r.getPattern(n,this,Mc(n),Ai.SHADING);const i=Mc(n);if(i){const{width:a,height:o}=n.canvas,l=Kx.slice();kt.axialAlignedBoundingBox([0,0,a,o],i,l);const[c,d,u,h]=l;this.ctx.fillRect(c,d,u-c,h-d)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){ir("Should not call beginInlineImage")}beginImageData(){ir("Should not call beginImageData")}paintFormXObjectBegin(e,n){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),e&&this.transform(...e),this.baseTransform=$r(this.ctx),n)){kt.axialAlignedBoundingBox(n,this.baseTransform,this.current.minMax);const[r,i,a,o]=n,l=new Path2D;l.rect(r,i,a-r,o-i),this.ctx.clip(l),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(e){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const n=this.ctx;e.isolated||WI("TODO: Support non-isolated groups."),e.knockout&&an("Knockout groups not supported.");const r=$r(n);if(e.matrix&&n.transform(...e.matrix),!e.bbox)throw new Error("Bounding box is required.");let i=Kx.slice();kt.axialAlignedBoundingBox(e.bbox,$r(n),i);const a=[0,0,n.canvas.width,n.canvas.height];i=kt.intersect(i,a)||[0,0,0,0];const o=Math.floor(i[0]),l=Math.floor(i[1]),c=Math.max(Math.ceil(i[2])-o,1),d=Math.max(Math.ceil(i[3])-l,1);this.current.startNewPathAndClipBox([0,0,c,d]);let u="groupAt"+this.groupLevel;e.smask&&(u+="_smask_"+this.smaskCounter++%2);const h=this.cachedCanvases.getCanvas(u,c,d),f=h.context;f.translate(-o,-l),f.transform(...r);let m=new Path2D;const[v,p,g,x]=e.bbox;if(m.rect(v,p,g-v,x-p),e.matrix){const y=new Path2D;y.addPath(m,new DOMMatrix(e.matrix)),m=y}f.clip(m),e.smask?this.smaskStack.push({canvas:h.canvas,context:f,offsetX:o,offsetY:l,subtype:e.smask.subtype,backdrop:e.smask.backdrop,transferMap:e.smask.transferMap||null,startTransformInverse:null}):(n.setTransform(1,0,0,1,0,0),n.translate(o,l),n.save()),X1(n,f),this.ctx=f,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(n),this.groupLevel++}endGroup(e){if(!this.contentVisible)return;this.groupLevel--;const n=this.ctx,r=this.groupStack.pop();if(this.ctx=r,this.ctx.imageSmoothingEnabled=!1,e.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const i=$r(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...i);const a=Kx.slice();kt.axialAlignedBoundingBox([0,0,n.canvas.width,n.canvas.height],i,a),this.ctx.drawImage(n.canvas,0,0),this.ctx.restore(),this.compose(a)}}beginAnnotation(e,n,r,i,a){if(se(this,EN,KL).call(this),Q5(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),n){const o=n[2]-n[0],l=n[3]-n[1];if(a&&this.annotationCanvasMap){r=r.slice(),r[4]-=n[0],r[5]-=n[1],n=n.slice(),n[0]=n[1]=0,n[2]=o,n[3]=l,kt.singularValueDecompose2dScale($r(this.ctx),jo);const{viewportScale:c}=this,d=Math.ceil(o*this.outputScaleX*c),u=Math.ceil(l*this.outputScaleY*c);this.annotationCanvas=this.canvasFactory.create(d,u);const{canvas:h,context:f}=this.annotationCanvas;this.annotationCanvasMap.set(e,h),this.annotationCanvas.savedCtx=this.ctx,this.ctx=f,this.ctx.save(),this.ctx.setTransform(jo[0],0,0,-jo[1],0,l*jo[1]),Q5(this.ctx)}else{Q5(this.ctx),this.endPath();const c=new Path2D;c.rect(n[0],n[1],o,l),this.ctx.clip(c)}}this.current=new G9(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...r),this.transform(...i)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),se(this,PN,YL).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(e){if(!this.contentVisible)return;const n=e.count;e=this.getObject(e.data,e),e.count=n;const r=this.ctx,i=this._createMaskCanvas(e),a=i.canvas;r.save(),r.setTransform(1,0,0,1,0,0),r.drawImage(a,i.offsetX,i.offsetY),r.restore(),this.compose()}paintImageMaskXObjectRepeat(e,n,r=0,i=0,a,o){if(!this.contentVisible)return;e=this.getObject(e.data,e);const l=this.ctx;l.save();const c=$r(l);l.transform(n,r,i,a,0,0);const d=this._createMaskCanvas(e);l.setTransform(1,0,0,1,d.offsetX-c[4],d.offsetY-c[5]);for(let u=0,h=o.length;u<h;u+=2){const f=kt.transform(c,[n,r,i,a,o[u],o[u+1]]);l.drawImage(d.canvas,f[4],f[5])}l.restore(),this.compose()}paintImageMaskXObjectGroup(e){if(!this.contentVisible)return;const n=this.ctx,r=this.current.fillColor,i=this.current.patternFill;for(const a of e){const{data:o,width:l,height:c,transform:d}=a,u=this.cachedCanvases.getCanvas("maskCanvas",l,c),h=u.context;h.save();const f=this.getObject(o,a);Y9(h,f),h.globalCompositeOperation="source-in",h.fillStyle=i?r.getPattern(h,this,Mc(n),Ai.FILL):r,h.fillRect(0,0,l,c),h.restore(),n.save(),n.transform(...d),n.scale(1,-1),Z5(n,u.canvas,0,0,l,c,0,-1,1,1),n.restore()}this.compose()}paintImageXObject(e){if(!this.contentVisible)return;const n=this.getObject(e);if(!n){an("Dependent image isn't ready yet");return}this.paintInlineImageXObject(n)}paintImageXObjectRepeat(e,n,r,i){if(!this.contentVisible)return;const a=this.getObject(e);if(!a){an("Dependent image isn't ready yet");return}const o=a.width,l=a.height,c=[];for(let d=0,u=i.length;d<u;d+=2)c.push({transform:[n,0,0,r,i[d],i[d+1]],x:0,y:0,w:o,h:l});this.paintInlineImageXObjectGroup(a,c)}applyTransferMapsToCanvas(e){return this.current.transferMaps!=="none"&&(e.filter=this.current.transferMaps,e.drawImage(e.canvas,0,0),e.filter="none"),e.canvas}applyTransferMapsToBitmap(e){if(this.current.transferMaps==="none")return e.bitmap;const{bitmap:n,width:r,height:i}=e,a=this.cachedCanvases.getCanvas("inlineImage",r,i),o=a.context;return o.filter=this.current.transferMaps,o.drawImage(n,0,0),o.filter="none",a.canvas}paintInlineImageXObject(e){if(!this.contentVisible)return;const n=e.width,r=e.height,i=this.ctx;this.save();const{filter:a}=i;a!=="none"&&a!==""&&(i.filter="none"),i.scale(1/n,-1/r);let o;if(e.bitmap)o=this.applyTransferMapsToBitmap(e);else if(typeof HTMLElement=="function"&&e instanceof HTMLElement||!e.data)o=e;else{const d=this.cachedCanvases.getCanvas("inlineImage",n,r).context;K9(d,e),o=this.applyTransferMapsToCanvas(d)}const l=this._scaleImage(o,Mc(i));i.imageSmoothingEnabled=X9($r(i),e.interpolate),Z5(i,l.img,0,0,l.paintWidth,l.paintHeight,0,-r,n,r),this.compose(),this.restore()}paintInlineImageXObjectGroup(e,n){if(!this.contentVisible)return;const r=this.ctx;let i;if(e.bitmap)i=e.bitmap;else{const a=e.width,o=e.height,c=this.cachedCanvases.getCanvas("inlineImage",a,o).context;K9(c,e),i=this.applyTransferMapsToCanvas(c)}for(const a of n)r.save(),r.transform(...a.transform),r.scale(1,-1),Z5(r,i,a.x,a.y,a.w,a.h,0,-1,1,1),r.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(e){}markPointProps(e,n){}beginMarkedContent(e){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(e,n){e==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(n)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(e,n){const r=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(n);const i=this.ctx;this.pendingClip&&(r||(this.pendingClip===Z9?i.clip(e,"evenodd"):i.clip(e)),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const e=$r(this.ctx);if(e[1]===0&&e[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(e[0]),Math.abs(e[3]));else{const n=Math.abs(e[0]*e[3]-e[2]*e[1]),r=Math.hypot(e[0],e[2]),i=Math.hypot(e[1],e[3]);this._cachedGetSinglePixelWidth=Math.max(r,i)/n}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:e}=this.current,{a:n,b:r,c:i,d:a}=this.ctx.getTransform();let o,l;if(r===0&&i===0){const c=Math.abs(n),d=Math.abs(a);if(c===d)if(e===0)o=l=1/c;else{const u=c*e;o=l=u<1?1/u:1}else if(e===0)o=1/c,l=1/d;else{const u=c*e,h=d*e;o=u<1?1/u:1,l=h<1?1/h:1}}else{const c=Math.abs(n*a-r*i),d=Math.hypot(n,r),u=Math.hypot(i,a);if(e===0)o=u/c,l=d/c;else{const h=e*c;o=u>h?u/h:1,l=d>h?d/h:1}}this._cachedScaleForStroking[0]=o,this._cachedScaleForStroking[1]=l}return this._cachedScaleForStroking}rescaleAndStroke(e,n){const{ctx:r,current:{lineWidth:i}}=this,[a,o]=this.getScaleForStroking();if(a===o){r.lineWidth=(i||1)*a,r.stroke(e);return}const l=r.getLineDash();n&&r.save(),r.scale(a,o),t_.a=1/a,t_.d=1/o;const c=new Path2D;if(c.addPath(e,t_),l.length>0){const d=Math.max(a,o);r.setLineDash(l.map(u=>u/d)),r.lineDashOffset/=d}r.lineWidth=i||1,r.stroke(c),n&&r.restore()}isContentVisible(){for(let e=this.markedContentStack.length-1;e>=0;e--)if(!this.markedContentStack[e].visible)return!1;return!0}};EN=new WeakSet,KL=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},PN=new WeakSet,YL=function(){if(this.pageColors){const e=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(e!=="none"){const n=this.ctx.filter;this.ctx.filter=e,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=n}}},TN=new WeakSet,XL=function(e,n,r){const i=new Path2D;return i.addPath(e,new DOMMatrix(r).invertSelf().multiplySelf(n)),i};let d0=K7;for(const t in Rj)d0.prototype[t]!==void 0&&(d0.prototype[Rj[t]]=d0.prototype[t]);var IN,DN;class lc{static get workerPort(){return S(this,IN)}static set workerPort(e){if(!(typeof Worker<"u"&&e instanceof Worker)&&e!==null)throw new Error("Invalid `workerPort` type.");Z(this,IN,e)}static get workerSrc(){return S(this,DN)}static set workerSrc(e){if(typeof e!="string")throw new Error("Invalid `workerSrc` type.");Z(this,DN,e)}}IN=new WeakMap,DN=new WeakMap,G(lc,IN,null),G(lc,DN,"");var q0,kN;class che{constructor({parsedData:e,rawData:n}){G(this,q0,void 0);G(this,kN,void 0);Z(this,q0,e),Z(this,kN,n)}getRaw(){return S(this,kN)}get(e){return S(this,q0).get(e)??null}[Symbol.iterator](){return S(this,q0).entries()}}q0=new WeakMap,kN=new WeakMap;const Ix=Symbol("INTERNAL");var _N,ON,LN,H0;class dhe{constructor(e,{name:n,intent:r,usage:i,rbGroups:a}){G(this,_N,!1);G(this,ON,!1);G(this,LN,!1);G(this,H0,!0);Z(this,_N,!!(e&yo.DISPLAY)),Z(this,ON,!!(e&yo.PRINT)),this.name=n,this.intent=r,this.usage=i,this.rbGroups=a}get visible(){if(S(this,LN))return S(this,H0);if(!S(this,H0))return!1;const{print:e,view:n}=this.usage;return S(this,_N)?(n==null?void 0:n.viewState)!=="OFF":S(this,ON)?(e==null?void 0:e.printState)!=="OFF":!0}_setVisible(e,n,r=!1){e!==Ix&&ir("Internal method `_setVisible` called."),Z(this,LN,r),Z(this,H0,n)}}_N=new WeakMap,ON=new WeakMap,LN=new WeakMap,H0=new WeakMap;var pf,rr,W0,G0,RN,ZL;class uhe{constructor(e,n=yo.DISPLAY){G(this,RN);G(this,pf,null);G(this,rr,new Map);G(this,W0,null);G(this,G0,null);if(this.renderingIntent=n,this.name=null,this.creator=null,e!==null){this.name=e.name,this.creator=e.creator,Z(this,G0,e.order);for(const r of e.groups)S(this,rr).set(r.id,new dhe(n,r));if(e.baseState==="OFF")for(const r of S(this,rr).values())r._setVisible(Ix,!1);for(const r of e.on)S(this,rr).get(r)._setVisible(Ix,!0);for(const r of e.off)S(this,rr).get(r)._setVisible(Ix,!1);Z(this,W0,this.getHash())}}isVisible(e){if(S(this,rr).size===0)return!0;if(!e)return WI("Optional content group not defined."),!0;if(e.type==="OCG")return S(this,rr).has(e.id)?S(this,rr).get(e.id).visible:(an(`Optional content group not found: ${e.id}`),!0);if(e.type==="OCMD"){if(e.expression)return se(this,RN,ZL).call(this,e.expression);if(!e.policy||e.policy==="AnyOn"){for(const n of e.ids){if(!S(this,rr).has(n))return an(`Optional content group not found: ${n}`),!0;if(S(this,rr).get(n).visible)return!0}return!1}else if(e.policy==="AllOn"){for(const n of e.ids){if(!S(this,rr).has(n))return an(`Optional content group not found: ${n}`),!0;if(!S(this,rr).get(n).visible)return!1}return!0}else if(e.policy==="AnyOff"){for(const n of e.ids){if(!S(this,rr).has(n))return an(`Optional content group not found: ${n}`),!0;if(!S(this,rr).get(n).visible)return!0}return!1}else if(e.policy==="AllOff"){for(const n of e.ids){if(!S(this,rr).has(n))return an(`Optional content group not found: ${n}`),!0;if(S(this,rr).get(n).visible)return!1}return!0}return an(`Unknown optional content policy ${e.policy}.`),!0}return an(`Unknown group type ${e.type}.`),!0}setVisibility(e,n=!0,r=!0){var a;const i=S(this,rr).get(e);if(!i){an(`Optional content group not found: ${e}`);return}if(r&&n&&i.rbGroups.length)for(const o of i.rbGroups)for(const l of o)l!==e&&((a=S(this,rr).get(l))==null||a._setVisible(Ix,!1,!0));i._setVisible(Ix,!!n,!0),Z(this,pf,null)}setOCGState({state:e,preserveRB:n}){let r;for(const i of e){switch(i){case"ON":case"OFF":case"Toggle":r=i;continue}const a=S(this,rr).get(i);if(a)switch(r){case"ON":this.setVisibility(i,!0,n);break;case"OFF":this.setVisibility(i,!1,n);break;case"Toggle":this.setVisibility(i,!a.visible,n);break}}Z(this,pf,null)}get hasInitialVisibility(){return S(this,W0)===null||this.getHash()===S(this,W0)}getOrder(){return S(this,rr).size?S(this,G0)?S(this,G0).slice():[...S(this,rr).keys()]:null}getGroup(e){return S(this,rr).get(e)||null}getHash(){if(S(this,pf)!==null)return S(this,pf);const e=new uZ;for(const[n,r]of S(this,rr))e.update(`${n}:${r.visible}`);return Z(this,pf,e.hexdigest())}[Symbol.iterator](){return S(this,rr).entries()}}pf=new WeakMap,rr=new WeakMap,W0=new WeakMap,G0=new WeakMap,RN=new WeakSet,ZL=function(e){const n=e.length;if(n<2)return!0;const r=e[0];for(let i=1;i<n;i++){const a=e[i];let o;if(Array.isArray(a))o=se(this,RN,ZL).call(this,a);else if(S(this,rr).has(a))o=S(this,rr).get(a).visible;else return an(`Optional content group not found: ${a}`),!0;switch(r){case"And":if(!o)return!1;break;case"Or":if(o)return!0;break;case"Not":return!o;default:return!0}}return r==="And"};class hhe{constructor(e,{disableRange:n=!1,disableStream:r=!1}){Ts(e,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:i,initialData:a,progressiveDone:o,contentDispositionFilename:l}=e;if(this._queuedChunks=[],this._progressiveDone=o,this._contentDispositionFilename=l,(a==null?void 0:a.length)>0){const c=a instanceof Uint8Array&&a.byteLength===a.buffer.byteLength?a.buffer:new Uint8Array(a).buffer;this._queuedChunks.push(c)}this._pdfDataRangeTransport=e,this._isStreamingSupported=!r,this._isRangeSupported=!n,this._contentLength=i,this._fullRequestReader=null,this._rangeReaders=[],e.addRangeListener((c,d)=>{this._onReceiveData({begin:c,chunk:d})}),e.addProgressListener((c,d)=>{this._onProgress({loaded:c,total:d})}),e.addProgressiveReadListener(c=>{this._onReceiveData({chunk:c})}),e.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),e.transportReady()}_onReceiveData({begin:e,chunk:n}){const r=n instanceof Uint8Array&&n.byteLength===n.buffer.byteLength?n.buffer:new Uint8Array(n).buffer;if(e===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(r):this._queuedChunks.push(r);else{const i=this._rangeReaders.some(function(a){return a._begin!==e?!1:(a._enqueue(r),!0)});Ts(i,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}_onProgress(e){var n,r,i,a;e.total===void 0?(r=(n=this._rangeReaders[0])==null?void 0:n.onProgress)==null||r.call(n,{loaded:e.loaded}):(a=(i=this._fullRequestReader)==null?void 0:i.onProgress)==null||a.call(i,{loaded:e.loaded,total:e.total})}_onProgressiveDone(){var e;(e=this._fullRequestReader)==null||e.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(e){const n=this._rangeReaders.indexOf(e);n>=0&&this._rangeReaders.splice(n,1)}getFullReader(){Ts(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const e=this._queuedChunks;return this._queuedChunks=null,new fhe(this,e,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(e,n){if(n<=this._progressiveDataLength)return null;const r=new mhe(this,e,n);return this._pdfDataRangeTransport.requestDataRange(e,n),this._rangeReaders.push(r),r}cancelAllRequests(e){var n;(n=this._fullRequestReader)==null||n.cancel(e);for(const r of this._rangeReaders.slice(0))r.cancel(e);this._pdfDataRangeTransport.abort()}}class fhe{constructor(e,n,r=!1,i=null){this._stream=e,this._done=r||!1,this._filename=KI(i)?i:null,this._queuedChunks=n||[],this._loaded=0;for(const a of this._queuedChunks)this._loaded+=a.byteLength;this._requests=[],this._headersReady=Promise.resolve(),e._fullRequestReader=this,this.onProgress=null}_enqueue(e){this._done||(this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunks.push(e),this._loaded+=e.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class mhe{constructor(e,n,r){this._stream=e,this._begin=n,this._end=r,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(e){if(!this._done){if(this._requests.length===0)this._queuedChunk=e;else{this._requests.shift().resolve({value:e,done:!1});for(const r of this._requests)r.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const n=this._queuedChunk;return this._queuedChunk=null,{value:n,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function phe(t){let e=!0,n=r("filename\\*","i").exec(t);if(n){n=n[1];let u=l(n);return u=unescape(u),u=c(u),u=d(u),a(u)}if(n=o(t),n){const u=d(n);return a(u)}if(n=r("filename","i").exec(t),n){n=n[1];let u=l(n);return u=d(u),a(u)}function r(u,h){return new RegExp("(?:^|;)\\s*"+u+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',h)}function i(u,h){if(u){if(!/^[\x00-\xFF]+$/.test(h))return h;try{const f=new TextDecoder(u,{fatal:!0}),m=lA(h);h=f.decode(m),e=!1}catch{}}return h}function a(u){return e&&/[\x80-\xff]/.test(u)&&(u=i("utf-8",u),e&&(u=i("iso-8859-1",u))),u}function o(u){const h=[];let f;const m=r("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(f=m.exec(u))!==null;){let[,p,g,x]=f;if(p=parseInt(p,10),p in h){if(p===0)break;continue}h[p]=[g,x]}const v=[];for(let p=0;p<h.length&&p in h;++p){let[g,x]=h[p];x=l(x),g&&(x=unescape(x),p===0&&(x=c(x))),v.push(x)}return v.join("")}function l(u){if(u.startsWith('"')){const h=u.slice(1).split('\\"');for(let f=0;f<h.length;++f){const m=h[f].indexOf('"');m!==-1&&(h[f]=h[f].slice(0,m),h.length=f+1),h[f]=h[f].replaceAll(/\\(.)/g,"$1")}u=h.join('"')}return u}function c(u){const h=u.indexOf("'");if(h===-1)return u;const f=u.slice(0,h),v=u.slice(h+1).replace(/^[^']*'/,"");return i(f,v)}function d(u){return!u.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(u)?u:u.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(h,f,m,v){if(m==="q"||m==="Q")return v=v.replaceAll("_"," "),v=v.replaceAll(/=([0-9a-fA-F]{2})/g,function(p,g){return String.fromCharCode(parseInt(g,16))}),i(f,v);try{v=atob(v)}catch{}return i(f,v)})}return""}function SZ(t,e){const n=new Headers;if(!t||!e||typeof e!="object")return n;for(const r in e){const i=e[r];i!==void 0&&n.append(r,i)}return n}function XI(t){var e;return((e=URL.parse(t))==null?void 0:e.origin)??null}function AZ({responseHeaders:t,isHttp:e,rangeChunkSize:n,disableRange:r}){const i={allowRangeRequests:!1,suggestedLength:void 0},a=parseInt(t.get("Content-Length"),10);return!Number.isInteger(a)||(i.suggestedLength=a,a<=2*n)||r||!e||t.get("Accept-Ranges")!=="bytes"||(t.get("Content-Encoding")||"identity")!=="identity"||(i.allowRangeRequests=!0),i}function CZ(t){const e=t.get("Content-Disposition");if(e){let n=phe(e);if(n.includes("%"))try{n=decodeURIComponent(n)}catch{}if(KI(n))return n}return null}function hA(t,e){return new Mj(`Unexpected server response (${t}) while retrieving PDF "${e}".`,t,t===404||t===0&&e.startsWith("file:"))}function EZ(t){return t===200||t===206}function PZ(t,e,n){return{method:"GET",headers:t,signal:n.signal,mode:"cors",credentials:e?"include":"same-origin",redirect:"follow"}}function TZ(t){return t instanceof Uint8Array?t.buffer:t instanceof ArrayBuffer?t:(an(`getArrayBuffer - unexpected data format: ${t}`),new Uint8Array(t).buffer)}class ghe{constructor(e){ut(this,"_responseOrigin",null);this.source=e,this.isHttp=/^https?:/i.test(e.url),this.headers=SZ(this.isHttp,e.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return Ts(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new vhe(this),this._fullRequestReader}getRangeReader(e,n){if(n<=this._progressiveDataLength)return null;const r=new xhe(this,e,n);return this._rangeRequestReaders.push(r),r}cancelAllRequests(e){var n;(n=this._fullRequestReader)==null||n.cancel(e);for(const r of this._rangeRequestReaders.slice(0))r.cancel(e)}}class vhe{constructor(e){this._stream=e,this._reader=null,this._loaded=0,this._filename=null;const n=e.source;this._withCredentials=n.withCredentials||!1,this._contentLength=n.length,this._headersCapability=Promise.withResolvers(),this._disableRange=n.disableRange||!1,this._rangeChunkSize=n.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!n.disableStream,this._isRangeSupported=!n.disableRange;const r=new Headers(e.headers),i=n.url;fetch(i,PZ(r,this._withCredentials,this._abortController)).then(a=>{if(e._responseOrigin=XI(a.url),!EZ(a.status))throw hA(a.status,i);this._reader=a.body.getReader(),this._headersCapability.resolve();const o=a.headers,{allowRangeRequests:l,suggestedLength:c}=AZ({responseHeaders:o,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=l,this._contentLength=c||this._contentLength,this._filename=CZ(o),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new eh("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var r;await this._headersCapability.promise;const{value:e,done:n}=await this._reader.read();return n?{value:e,done:n}:(this._loaded+=e.byteLength,(r=this.onProgress)==null||r.call(this,{loaded:this._loaded,total:this._contentLength}),{value:TZ(e),done:!1})}cancel(e){var n;(n=this._reader)==null||n.cancel(e),this._abortController.abort()}}class xhe{constructor(e,n,r){this._stream=e,this._reader=null,this._loaded=0;const i=e.source;this._withCredentials=i.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!i.disableStream,this._abortController=new AbortController;const a=new Headers(e.headers);a.append("Range",`bytes=${n}-${r-1}`);const o=i.url;fetch(o,PZ(a,this._withCredentials,this._abortController)).then(l=>{const c=XI(l.url);if(c!==e._responseOrigin)throw new Error(`Expected range response-origin "${c}" to match "${e._responseOrigin}".`);if(!EZ(l.status))throw hA(l.status,o);this._readCapability.resolve(),this._reader=l.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var r;await this._readCapability.promise;const{value:e,done:n}=await this._reader.read();return n?{value:e,done:n}:(this._loaded+=e.byteLength,(r=this.onProgress)==null||r.call(this,{loaded:this._loaded}),{value:TZ(e),done:!1})}cancel(e){var n;(n=this._reader)==null||n.cancel(e),this._abortController.abort()}}const n_=200,r_=206;function yhe(t){const e=t.response;return typeof e!="string"?e:lA(e).buffer}class bhe{constructor({url:e,httpHeaders:n,withCredentials:r}){ut(this,"_responseOrigin",null);this.url=e,this.isHttp=/^https?:/i.test(e),this.headers=SZ(this.isHttp,n),this.withCredentials=r||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(e){const n=new XMLHttpRequest,r=this.currXhrId++,i=this.pendingRequests[r]={xhr:n};n.open("GET",this.url),n.withCredentials=this.withCredentials;for(const[a,o]of this.headers)n.setRequestHeader(a,o);return this.isHttp&&"begin"in e&&"end"in e?(n.setRequestHeader("Range",`bytes=${e.begin}-${e.end-1}`),i.expectedStatus=r_):i.expectedStatus=n_,n.responseType="arraybuffer",Ts(e.onError,"Expected `onError` callback to be provided."),n.onerror=()=>{e.onError(n.status)},n.onreadystatechange=this.onStateChange.bind(this,r),n.onprogress=this.onProgress.bind(this,r),i.onHeadersReceived=e.onHeadersReceived,i.onDone=e.onDone,i.onError=e.onError,i.onProgress=e.onProgress,n.send(null),r}onProgress(e,n){var i;const r=this.pendingRequests[e];r&&((i=r.onProgress)==null||i.call(r,n))}onStateChange(e,n){const r=this.pendingRequests[e];if(!r)return;const i=r.xhr;if(i.readyState>=2&&r.onHeadersReceived&&(r.onHeadersReceived(),delete r.onHeadersReceived),i.readyState!==4||!(e in this.pendingRequests))return;if(delete this.pendingRequests[e],i.status===0&&this.isHttp){r.onError(i.status);return}const a=i.status||n_;if(!(a===n_&&r.expectedStatus===r_)&&a!==r.expectedStatus){r.onError(i.status);return}const l=yhe(i);if(a===r_){const c=i.getResponseHeader("Content-Range"),d=/bytes (\d+)-(\d+)\/(\d+)/.exec(c);d?r.onDone({begin:parseInt(d[1],10),chunk:l}):(an('Missing or invalid "Content-Range" header.'),r.onError(0))}else l?r.onDone({begin:0,chunk:l}):r.onError(i.status)}getRequestXhr(e){return this.pendingRequests[e].xhr}isPendingRequest(e){return e in this.pendingRequests}abortRequest(e){const n=this.pendingRequests[e].xhr;delete this.pendingRequests[e],n.abort()}}class whe{constructor(e){this._source=e,this._manager=new bhe(e),this._rangeChunkSize=e.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(e){const n=this._rangeRequestReaders.indexOf(e);n>=0&&this._rangeRequestReaders.splice(n,1)}getFullReader(){return Ts(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new jhe(this._manager,this._source),this._fullRequestReader}getRangeReader(e,n){const r=new Nhe(this._manager,e,n);return r.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(r),r}cancelAllRequests(e){var n;(n=this._fullRequestReader)==null||n.cancel(e);for(const r of this._rangeRequestReaders.slice(0))r.cancel(e)}}class jhe{constructor(e,n){this._manager=e,this._url=n.url,this._fullRequestId=e.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=n.disableRange||!1,this._contentLength=n.length,this._rangeChunkSize=n.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const e=this._fullRequestId,n=this._manager.getRequestXhr(e);this._manager._responseOrigin=XI(n.responseURL);const r=n.getAllResponseHeaders(),i=new Headers(r?r.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(l=>{const[c,...d]=l.split(": ");return[c,d.join(": ")]}):[]),{allowRangeRequests:a,suggestedLength:o}=AZ({responseHeaders:i,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});a&&(this._isRangeSupported=!0),this._contentLength=o||this._contentLength,this._filename=CZ(i),this._isRangeSupported&&this._manager.abortRequest(e),this._headersCapability.resolve()}_onDone(e){if(e&&(this._requests.length>0?this._requests.shift().resolve({value:e.chunk,done:!1}):this._cachedChunks.push(e.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(e){this._storedError=hA(e,this._url),this._headersCapability.reject(this._storedError);for(const n of this._requests)n.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(e){var n;(n=this.onProgress)==null||n.call(this,{loaded:e.loaded,total:e.lengthComputable?e.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0,this._headersCapability.reject(e);for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class Nhe{constructor(e,n,r){this._manager=e,this._url=e.url,this._requestId=e.request({begin:n,end:r,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){var n;const e=XI((n=this._manager.getRequestXhr(this._requestId))==null?void 0:n.responseURL);e!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${e}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){var e;(e=this.onClosed)==null||e.call(this,this)}_onDone(e){const n=e.chunk;this._requests.length>0?this._requests.shift().resolve({value:n,done:!1}):this._queuedChunk=n,this._done=!0;for(const r of this._requests)r.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(e){this._storedError??(this._storedError=hA(e,this._url));for(const n of this._requests)n.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(e){var n;this.isStreamingSupported||(n=this.onProgress)==null||n.call(this,{loaded:e.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const n=this._queuedChunk;return this._queuedChunk=null,{value:n,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const She=/^[a-z][a-z0-9\-+.]+:/i;function Ahe(t){if(She.test(t))return new URL(t);const e=process.getBuiltinModule("url");return new URL(e.pathToFileURL(t))}class Che{constructor(e){this.source=e,this.url=Ahe(e.url),Ts(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return Ts(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new Ehe(this),this._fullRequestReader}getRangeReader(e,n){if(n<=this._progressiveDataLength)return null;const r=new Phe(this,e,n);return this._rangeRequestReaders.push(r),r}cancelAllRequests(e){var n;(n=this._fullRequestReader)==null||n.cancel(e);for(const r of this._rangeRequestReaders.slice(0))r.cancel(e)}}class Ehe{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null;const n=e.source;this._contentLength=n.length,this._loaded=0,this._filename=null,this._disableRange=n.disableRange||!1,this._rangeChunkSize=n.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!n.disableStream,this._isRangeSupported=!n.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const r=process.getBuiltinModule("fs");r.promises.lstat(this._url).then(i=>{this._contentLength=i.size,this._setReadableStream(r.createReadStream(this._url)),this._headersCapability.resolve()},i=>{i.code==="ENOENT"&&(i=hA(0,this._url.href)),this._storedError=i,this._headersCapability.reject(i)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var r;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(r=this.onProgress)==null||r.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",n=>{this._error(n)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new eh("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class Phe{constructor(e,n,r){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const i=e.source;this._isStreamingSupported=!i.disableStream;const a=process.getBuiltinModule("fs");this._setReadableStream(a.createReadStream(this._url,{start:n,end:r-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){var r;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(r=this.onProgress)==null||r.call(this,{loaded:this._loaded}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",n=>{this._error(n)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const Z1=Symbol("INITIAL_DATA");var oo,MN,QL;class IZ{constructor(){G(this,MN);G(this,oo,Object.create(null))}get(e,n=null){if(n){const i=se(this,MN,QL).call(this,e);return i.promise.then(()=>n(i.data)),null}const r=S(this,oo)[e];if(!r||r.data===Z1)throw new Error(`Requesting object that isn't resolved yet ${e}.`);return r.data}has(e){const n=S(this,oo)[e];return!!n&&n.data!==Z1}delete(e){const n=S(this,oo)[e];return!n||n.data===Z1?!1:(delete S(this,oo)[e],!0)}resolve(e,n=null){const r=se(this,MN,QL).call(this,e);r.data=n,r.resolve()}clear(){var e;for(const n in S(this,oo)){const{data:r}=S(this,oo)[n];(e=r==null?void 0:r.bitmap)==null||e.close()}Z(this,oo,Object.create(null))}*[Symbol.iterator](){for(const e in S(this,oo)){const{data:n}=S(this,oo)[e];n!==Z1&&(yield[e,n])}}}oo=new WeakMap,MN=new WeakSet,QL=function(e){var n;return(n=S(this,oo))[e]||(n[e]={...Promise.withResolvers(),data:Z1})};const The=1e5,Q9=30;var fK,gf,Da,FN,$N,tg,xu,BN,zN,ng,K0,Y0,vf,X0,UN,Z0,rg,VN,qN,Q0,sg,HN,xf,J0,NT,DZ,ST,kZ,WN,JL,ey,iE,GN,eR,AT,_Z,CT,OZ;const Qr=class Qr{constructor({textContentSource:e,container:n,viewport:r}){G(this,NT);G(this,ST);G(this,WN);G(this,gf,Promise.withResolvers());G(this,Da,null);G(this,FN,!1);G(this,$N,!!((fK=globalThis.FontInspector)!=null&&fK.enabled));G(this,tg,null);G(this,xu,null);G(this,BN,0);G(this,zN,0);G(this,ng,null);G(this,K0,null);G(this,Y0,0);G(this,vf,0);G(this,X0,Object.create(null));G(this,UN,[]);G(this,Z0,null);G(this,rg,[]);G(this,VN,new WeakMap);G(this,qN,null);var c;if(e instanceof ReadableStream)Z(this,Z0,e);else if(typeof e=="object")Z(this,Z0,new ReadableStream({start(d){d.enqueue(e),d.close()}}));else throw new Error('No "textContentSource" parameter specified.');Z(this,Da,Z(this,K0,n)),Z(this,vf,r.scale*vc.pixelRatio),Z(this,Y0,r.rotation),Z(this,xu,{div:null,properties:null,ctx:null});const{pageWidth:i,pageHeight:a,pageX:o,pageY:l}=r.rawDims;Z(this,qN,[1,0,0,-1,-o,l+a]),Z(this,zN,i),Z(this,BN,a),se(c=Qr,AT,_Z).call(c),hm(n,r),S(this,gf).promise.finally(()=>{S(Qr,J0).delete(this),Z(this,xu,null),Z(this,X0,null)}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:e,isFirefox:n}=ai.platform;return xn(this,"fontFamilyMap",new Map([["sans-serif",`${e&&n?"Calibri, ":""}sans-serif`],["monospace",`${e&&n?"Lucida Console, ":""}monospace`]]))}render(){const e=()=>{S(this,ng).read().then(({value:n,done:r})=>{if(r){S(this,gf).resolve();return}S(this,tg)??Z(this,tg,n.lang),Object.assign(S(this,X0),n.styles),se(this,NT,DZ).call(this,n.items),e()},S(this,gf).reject)};return Z(this,ng,S(this,Z0).getReader()),S(Qr,J0).add(this),e(),S(this,gf).promise}update({viewport:e,onBefore:n=null}){var a;const r=e.scale*vc.pixelRatio,i=e.rotation;if(i!==S(this,Y0)&&(n==null||n(),Z(this,Y0,i),hm(S(this,K0),{rotation:i})),r!==S(this,vf)){n==null||n(),Z(this,vf,r);const o={div:null,properties:null,ctx:se(a=Qr,ey,iE).call(a,S(this,tg))};for(const l of S(this,rg))o.properties=S(this,VN).get(l),o.div=l,se(this,WN,JL).call(this,o)}}cancel(){var n;const e=new eh("TextLayer task cancelled.");(n=S(this,ng))==null||n.cancel(e).catch(()=>{}),Z(this,ng,null),S(this,gf).reject(e)}get textDivs(){return S(this,rg)}get textContentItemsStr(){return S(this,UN)}static cleanup(){if(!(S(this,J0).size>0)){S(this,Q0).clear();for(const{canvas:e}of S(this,sg).values())e.remove();S(this,sg).clear()}}};gf=new WeakMap,Da=new WeakMap,FN=new WeakMap,$N=new WeakMap,tg=new WeakMap,xu=new WeakMap,BN=new WeakMap,zN=new WeakMap,ng=new WeakMap,K0=new WeakMap,Y0=new WeakMap,vf=new WeakMap,X0=new WeakMap,UN=new WeakMap,Z0=new WeakMap,rg=new WeakMap,VN=new WeakMap,qN=new WeakMap,Q0=new WeakMap,sg=new WeakMap,HN=new WeakMap,xf=new WeakMap,J0=new WeakMap,NT=new WeakSet,DZ=function(e){var i,a;if(S(this,FN))return;(a=S(this,xu)).ctx??(a.ctx=se(i=Qr,ey,iE).call(i,S(this,tg)));const n=S(this,rg),r=S(this,UN);for(const o of e){if(n.length>The){an("Ignoring additional textDivs for performance reasons."),Z(this,FN,!0);return}if(o.str===void 0){if(o.type==="beginMarkedContentProps"||o.type==="beginMarkedContent"){const l=S(this,Da);Z(this,Da,document.createElement("span")),S(this,Da).classList.add("markedContent"),o.id!==null&&S(this,Da).setAttribute("id",`${o.id}`),l.append(S(this,Da))}else o.type==="endMarkedContent"&&Z(this,Da,S(this,Da).parentNode);continue}r.push(o.str),se(this,ST,kZ).call(this,o)}},ST=new WeakSet,kZ=function(e){var p;const n=document.createElement("span"),r={angle:0,canvasWidth:0,hasText:e.str!=="",hasEOL:e.hasEOL,fontSize:0};S(this,rg).push(n);const i=kt.transform(S(this,qN),e.transform);let a=Math.atan2(i[1],i[0]);const o=S(this,X0)[e.fontName];o.vertical&&(a+=Math.PI/2);let l=S(this,$N)&&o.fontSubstitution||o.fontFamily;l=Qr.fontFamilyMap.get(l)||l;const c=Math.hypot(i[2],i[3]),d=c*se(p=Qr,CT,OZ).call(p,l,o,S(this,tg));let u,h;a===0?(u=i[4],h=i[5]-d):(u=i[4]+d*Math.sin(a),h=i[5]-d*Math.cos(a));const f="calc(var(--total-scale-factor) *",m=n.style;S(this,Da)===S(this,K0)?(m.left=`${(100*u/S(this,zN)).toFixed(2)}%`,m.top=`${(100*h/S(this,BN)).toFixed(2)}%`):(m.left=`${f}${u.toFixed(2)}px)`,m.top=`${f}${h.toFixed(2)}px)`),m.fontSize=`${f}${(S(Qr,xf)*c).toFixed(2)}px)`,m.fontFamily=l,r.fontSize=c,n.setAttribute("role","presentation"),n.textContent=e.str,n.dir=e.dir,S(this,$N)&&(n.dataset.fontName=o.fontSubstitutionLoadedName||e.fontName),a!==0&&(r.angle=a*(180/Math.PI));let v=!1;if(e.str.length>1)v=!0;else if(e.str!==" "&&e.transform[0]!==e.transform[3]){const g=Math.abs(e.transform[0]),x=Math.abs(e.transform[3]);g!==x&&Math.max(g,x)/Math.min(g,x)>1.5&&(v=!0)}if(v&&(r.canvasWidth=o.vertical?e.height:e.width),S(this,VN).set(n,r),S(this,xu).div=n,S(this,xu).properties=r,se(this,WN,JL).call(this,S(this,xu)),r.hasText&&S(this,Da).append(n),r.hasEOL){const g=document.createElement("br");g.setAttribute("role","presentation"),S(this,Da).append(g)}},WN=new WeakSet,JL=function(e){var l;const{div:n,properties:r,ctx:i}=e,{style:a}=n;let o="";if(S(Qr,xf)>1&&(o=`scale(${1/S(Qr,xf)})`),r.canvasWidth!==0&&r.hasText){const{fontFamily:c}=a,{canvasWidth:d,fontSize:u}=r;se(l=Qr,GN,eR).call(l,i,u*S(this,vf),c);const{width:h}=i.measureText(n.textContent);h>0&&(o=`scaleX(${d*S(this,vf)/h}) ${o}`)}r.angle!==0&&(o=`rotate(${r.angle}deg) ${o}`),o.length>0&&(a.transform=o)},ey=new WeakSet,iE=function(e=null){let n=S(this,sg).get(e||(e=""));if(!n){const r=document.createElement("canvas");r.className="hiddenCanvasElement",r.lang=e,document.body.append(r),n=r.getContext("2d",{alpha:!1,willReadFrequently:!0}),S(this,sg).set(e,n),S(this,HN).set(n,{size:0,family:""})}return n},GN=new WeakSet,eR=function(e,n,r){const i=S(this,HN).get(e);n===i.size&&r===i.family||(e.font=`${n}px ${r}`,i.size=n,i.family=r)},AT=new WeakSet,_Z=function(){if(S(this,xf)!==null)return;const e=document.createElement("div");e.style.opacity=0,e.style.lineHeight=1,e.style.fontSize="1px",e.style.position="absolute",e.textContent="X",document.body.append(e),Z(this,xf,e.getBoundingClientRect().height),e.remove()},CT=new WeakSet,OZ=function(e,n,r){const i=S(this,Q0).get(e);if(i)return i;const a=se(this,ey,iE).call(this,r);a.canvas.width=a.canvas.height=Q9,se(this,GN,eR).call(this,a,Q9,e);const o=a.measureText(""),l=o.fontBoundingBoxAscent,c=Math.abs(o.fontBoundingBoxDescent);a.canvas.width=a.canvas.height=0;let d=.8;return l?d=l/(l+c):(ai.platform.isFirefox&&an("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),n.ascent?d=n.ascent:n.descent&&(d=1+n.descent)),S(this,Q0).set(e,d),d},G(Qr,ey),G(Qr,GN),G(Qr,AT),G(Qr,CT),G(Qr,Q0,new Map),G(Qr,sg,new Map),G(Qr,HN,new WeakMap),G(Qr,xf,null),G(Qr,J0,new Set);let nb=Qr;class $j{static textContent(e){const n=[],r={items:n,styles:Object.create(null)};function i(a){var c;if(!a)return;let o=null;const l=a.name;if(l==="#text")o=a.value;else if($j.shouldBuildText(l))(c=a==null?void 0:a.attributes)!=null&&c.textContent?o=a.attributes.textContent:a.value&&(o=a.value);else return;if(o!==null&&n.push({str:o}),!!a.children)for(const d of a.children)i(d)}return i(e),r}static shouldBuildText(e){return!(e==="textarea"||e==="input"||e==="option"||e==="select")}}const Ihe=100;function LZ(t={}){typeof t=="string"||t instanceof URL?t={url:t}:(t instanceof ArrayBuffer||ArrayBuffer.isView(t))&&(t={data:t});const e=new tR,{docId:n}=e,r=t.url?Bue(t.url):null,i=t.data?zue(t.data):null,a=t.httpHeaders||null,o=t.withCredentials===!0,l=t.password??null,c=t.range instanceof g$?t.range:null,d=Number.isInteger(t.rangeChunkSize)&&t.rangeChunkSize>0?t.rangeChunkSize:2**16;let u=t.worker instanceof rb?t.worker:null;const h=t.verbosity,f=typeof t.docBaseUrl=="string"&&!dA(t.docBaseUrl)?t.docBaseUrl:null,m=Y5(t.cMapUrl),v=t.cMapPacked!==!1,p=t.CMapReaderFactory||(ca?Kue:B9),g=Y5(t.iccUrl),x=Y5(t.standardFontDataUrl),y=t.StandardFontDataFactory||(ca?Yue:z9),b=Y5(t.wasmUrl),w=t.WasmFactory||(ca?Xue:U9),N=t.stopAtErrors!==!0,E=Number.isInteger(t.maxImageSize)&&t.maxImageSize>-1?t.maxImageSize:-1,C=t.isEvalSupported!==!1,j=typeof t.isOffscreenCanvasSupported=="boolean"?t.isOffscreenCanvasSupported:!ca,I=typeof t.isImageDecoderSupported=="boolean"?t.isImageDecoderSupported:!ca&&(ai.platform.isFirefox||!globalThis.chrome),k=Number.isInteger(t.canvasMaxAreaInBytes)?t.canvasMaxAreaInBytes:-1,D=typeof t.disableFontFace=="boolean"?t.disableFontFace:ca,P=t.fontExtraProperties===!0,R=t.enableXfa===!0,_=t.ownerDocument||globalThis.document,M=t.disableRange===!0,U=t.disableStream===!0,F=t.disableAutoFetch===!0,z=t.pdfBug===!0,H=t.CanvasFactory||(ca?Gue:que),W=t.FilterFactory||(ca?Wue:Hue),$=t.enableHWA===!0,L=t.useWasm!==!1,q=c?c.length:t.length??NaN,Y=typeof t.useSystemFonts=="boolean"?t.useSystemFonts:!ca&&!D,J=typeof t.useWorkerFetch=="boolean"?t.useWorkerFetch:!!(p===B9&&y===z9&&w===U9&&m&&x&&b&&jw(m,document.baseURI)&&jw(x,document.baseURI)&&jw(b,document.baseURI)),ne=null;jue(h);const re={canvasFactory:new H({ownerDocument:_,enableHWA:$}),filterFactory:new W({docId:n,ownerDocument:_}),cMapReaderFactory:J?null:new p({baseUrl:m,isCompressed:v}),standardFontDataFactory:J?null:new y({baseUrl:x}),wasmFactory:J?null:new w({baseUrl:b})};u||(u=rb.create({verbosity:h,port:lc.workerPort}),e._worker=u);const pe={docId:n,apiVersion:"5.3.93",data:i,password:l,disableAutoFetch:F,rangeChunkSize:d,length:q,docBaseUrl:f,enableXfa:R,evaluatorOptions:{maxImageSize:E,disableFontFace:D,ignoreErrors:N,isEvalSupported:C,isOffscreenCanvasSupported:j,isImageDecoderSupported:I,canvasMaxAreaInBytes:k,fontExtraProperties:P,useSystemFonts:Y,useWasm:L,useWorkerFetch:J,cMapUrl:m,iccUrl:g,standardFontDataUrl:x,wasmUrl:b}},ue={ownerDocument:_,pdfBug:z,styleElement:ne,loadingParams:{disableAutoFetch:F,enableXfa:R}};return u.promise.then(function(){if(e.destroyed)throw new Error("Loading aborted");if(u.destroyed)throw new Error("Worker was destroyed");const xe=u.messageHandler.sendWithPromise("GetDocRequest",pe,i?[i.buffer]:null);let Ne;if(c)Ne=new hhe(c,{disableRange:M,disableStream:U});else if(!i){if(!r)throw new Error("getDocument - no `url` parameter provided.");const je=jw(r)?ghe:ca?Che:whe;Ne=new je({url:r,length:q,httpHeaders:a,withCredentials:o,rangeChunkSize:d,disableRange:M,disableStream:U})}return xe.then(je=>{if(e.destroyed)throw new Error("Loading aborted");if(u.destroyed)throw new Error("Worker was destroyed");const $e=new Ew(n,je,u.port),ze=new _he($e,e,Ne,ue,re);e._transport=ze,$e.send("Ready",null)})}).catch(e._capability.reject),e}var ET;const PT=class PT{constructor(){ut(this,"_capability",Promise.withResolvers());ut(this,"_transport",null);ut(this,"_worker",null);ut(this,"docId",`d${na(PT,ET)._++}`);ut(this,"destroyed",!1);ut(this,"onPassword",null);ut(this,"onProgress",null)}get promise(){return this._capability.promise}async destroy(){var e,n,r,i;this.destroyed=!0;try{(e=this._worker)!=null&&e.port&&(this._worker._pendingDestroy=!0),await((n=this._transport)==null?void 0:n.destroy())}catch(a){throw(r=this._worker)!=null&&r.port&&delete this._worker._pendingDestroy,a}this._transport=null,(i=this._worker)==null||i.destroy(),this._worker=null}async getData(){return this._transport.getData()}};ET=new WeakMap,G(PT,ET,0);let tR=PT;var ig,KN,YN,XN,ZN;class g${constructor(e,n,r=!1,i=null){G(this,ig,Promise.withResolvers());G(this,KN,[]);G(this,YN,[]);G(this,XN,[]);G(this,ZN,[]);this.length=e,this.initialData=n,this.progressiveDone=r,this.contentDispositionFilename=i}addRangeListener(e){S(this,ZN).push(e)}addProgressListener(e){S(this,XN).push(e)}addProgressiveReadListener(e){S(this,YN).push(e)}addProgressiveDoneListener(e){S(this,KN).push(e)}onDataRange(e,n){for(const r of S(this,ZN))r(e,n)}onDataProgress(e,n){S(this,ig).promise.then(()=>{for(const r of S(this,XN))r(e,n)})}onDataProgressiveRead(e){S(this,ig).promise.then(()=>{for(const n of S(this,YN))n(e)})}onDataProgressiveDone(){S(this,ig).promise.then(()=>{for(const e of S(this,KN))e()})}transportReady(){S(this,ig).resolve()}requestDataRange(e,n){ir("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}ig=new WeakMap,KN=new WeakMap,YN=new WeakMap,XN=new WeakMap,ZN=new WeakMap;class Dhe{constructor(e,n){this._pdfInfo=e,this._transport=n}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return xn(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:e="display"}={}){const{renderingIntent:n}=this._transport.getRenderingIntent(e);return this._transport.getOptionalContentConfig(n)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(e=!1){return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(e){return this._transport.cachedPageNumber(e)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var yu,ag,kw;class khe{constructor(e,n,r,i=!1){G(this,ag);G(this,yu,!1);this._pageIndex=e,this._pageInfo=n,this._transport=r,this._stats=i?new M9:null,this._pdfBug=i,this.commonObjs=r.commonObjs,this.objs=new IZ,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:e,rotation:n=this.rotate,offsetX:r=0,offsetY:i=0,dontFlip:a=!1}={}){return new cA({viewBox:this.view,userUnit:this.userUnit,scale:e,rotation:n,offsetX:r,offsetY:i,dontFlip:a})}getAnnotations({intent:e="display"}={}){const{renderingIntent:n}=this._transport.getRenderingIntent(e);return this._transport.getAnnotations(this._pageIndex,n)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return xn(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var e;return((e=this._transport._htmlForXfa)==null?void 0:e.children[this._pageIndex])||null}render({canvasContext:e,viewport:n,intent:r="display",annotationMode:i=$u.ENABLE,transform:a=null,background:o=null,optionalContentConfigPromise:l=null,annotationCanvasMap:c=null,pageColors:d=null,printAnnotationStorage:u=null,isEditing:h=!1}){var w,N;(w=this._stats)==null||w.time("Overall");const f=this._transport.getRenderingIntent(r,i,u,h),{renderingIntent:m,cacheKey:v}=f;Z(this,yu,!1),l||(l=this._transport.getOptionalContentConfig(m));let p=this._intentStates.get(v);p||(p=Object.create(null),this._intentStates.set(v,p)),p.streamReaderCancelTimeout&&(clearTimeout(p.streamReaderCancelTimeout),p.streamReaderCancelTimeout=null);const g=!!(m&yo.PRINT);p.displayReadyCapability||(p.displayReadyCapability=Promise.withResolvers(),p.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(N=this._stats)==null||N.time("Page Request"),this._pumpOperatorList(f));const x=E=>{var C;p.renderTasks.delete(y),g&&Z(this,yu,!0),se(this,ag,kw).call(this),E?(y.capability.reject(E),this._abortOperatorList({intentState:p,reason:E instanceof Error?E:new Error(E)})):y.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),(C=globalThis.Stats)!=null&&C.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},y=new nR({callback:x,params:{canvasContext:e,viewport:n,transform:a,background:o},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:c,operatorList:p.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!g,pdfBug:this._pdfBug,pageColors:d});(p.renderTasks||(p.renderTasks=new Set)).add(y);const b=y.task;return Promise.all([p.displayReadyCapability.promise,l]).then(([E,C])=>{var j;if(this.destroyed){x();return}if((j=this._stats)==null||j.time("Rendering"),!(C.renderingIntent&m))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");y.initializeGraphics({transparency:E,optionalContentConfig:C}),y.operatorListChanged()}).catch(x),b}getOperatorList({intent:e="display",annotationMode:n=$u.ENABLE,printAnnotationStorage:r=null,isEditing:i=!1}={}){var d;function a(){l.operatorList.lastChunk&&(l.opListReadCapability.resolve(l.operatorList),l.renderTasks.delete(c))}const o=this._transport.getRenderingIntent(e,n,r,i,!0);let l=this._intentStates.get(o.cacheKey);l||(l=Object.create(null),this._intentStates.set(o.cacheKey,l));let c;return l.opListReadCapability||(c=Object.create(null),c.operatorListChanged=a,l.opListReadCapability=Promise.withResolvers(),(l.renderTasks||(l.renderTasks=new Set)).add(c),l.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(d=this._stats)==null||d.time("Page Request"),this._pumpOperatorList(o)),l.opListReadCapability.promise}streamTextContent({includeMarkedContent:e=!1,disableNormalization:n=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:e===!0,disableNormalization:n===!0},{highWaterMark:100,size(i){return i.items.length}})}getTextContent(e={}){if(this._transport._htmlForXfa)return this.getXfa().then(r=>$j.textContent(r));const n=this.streamTextContent(e);return new Promise(function(r,i){function a(){o.read().then(function({value:c,done:d}){if(d){r(l);return}l.lang??(l.lang=c.lang),Object.assign(l.styles,c.styles),l.items.push(...c.items),a()},i)}const o=n.getReader(),l={items:[],styles:Object.create(null),lang:null};a()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const e=[];for(const n of this._intentStates.values())if(this._abortOperatorList({intentState:n,reason:new Error("Page was destroyed."),force:!0}),!n.opListReadCapability)for(const r of n.renderTasks)e.push(r.completed),r.cancel();return this.objs.clear(),Z(this,yu,!1),Promise.all(e)}cleanup(e=!1){Z(this,yu,!0);const n=se(this,ag,kw).call(this);return e&&n&&this._stats&&(this._stats=new M9),n}_startRenderPage(e,n){var i,a;const r=this._intentStates.get(n);r&&((i=this._stats)==null||i.timeEnd("Page Request"),(a=r.displayReadyCapability)==null||a.resolve(e))}_renderPageChunk(e,n){for(let r=0,i=e.length;r<i;r++)n.operatorList.fnArray.push(e.fnArray[r]),n.operatorList.argsArray.push(e.argsArray[r]);n.operatorList.lastChunk=e.lastChunk,n.operatorList.separateAnnots=e.separateAnnots;for(const r of n.renderTasks)r.operatorListChanged();e.lastChunk&&se(this,ag,kw).call(this)}_pumpOperatorList({renderingIntent:e,cacheKey:n,annotationStorageSerializable:r,modifiedIds:i}){const{map:a,transfer:o}=r,c=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:e,cacheKey:n,annotationStorage:a,modifiedIds:i},o).getReader(),d=this._intentStates.get(n);d.streamReader=c;const u=()=>{c.read().then(({value:h,done:f})=>{if(f){d.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(h,d),u())},h=>{if(d.streamReader=null,!this._transport.destroyed){if(d.operatorList){d.operatorList.lastChunk=!0;for(const f of d.renderTasks)f.operatorListChanged();se(this,ag,kw).call(this)}if(d.displayReadyCapability)d.displayReadyCapability.reject(h);else if(d.opListReadCapability)d.opListReadCapability.reject(h);else throw h}})};u()}_abortOperatorList({intentState:e,reason:n,force:r=!1}){if(e.streamReader){if(e.streamReaderCancelTimeout&&(clearTimeout(e.streamReaderCancelTimeout),e.streamReaderCancelTimeout=null),!r){if(e.renderTasks.size>0)return;if(n instanceof GI){let i=Ihe;n.extraDelay>0&&n.extraDelay<1e3&&(i+=n.extraDelay),e.streamReaderCancelTimeout=setTimeout(()=>{e.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:e,reason:n,force:!0})},i);return}}if(e.streamReader.cancel(new eh(n.message)).catch(()=>{}),e.streamReader=null,!this._transport.destroyed){for(const[i,a]of this._intentStates)if(a===e){this._intentStates.delete(i);break}this.cleanup()}}}get stats(){return this._stats}}yu=new WeakMap,ag=new WeakSet,kw=function(){if(!S(this,yu)||this.destroyed)return!1;for(const{renderTasks:e,operatorList:n}of this._intentStates.values())if(e.size>0||!n.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),Z(this,yu,!1),!0};var yf,Kl,bu,og,TT,lg,cg,ty,aE,IT,RZ,DT,MZ,dg,_w,ny,oE;const Ir=class Ir{constructor({name:e=null,port:n=null,verbosity:r=Nue()}={}){G(this,ty);G(this,IT);G(this,DT);G(this,dg);G(this,yf,Promise.withResolvers());G(this,Kl,null);G(this,bu,null);G(this,og,null);if(this.name=e,this.destroyed=!1,this.verbosity=r,n){if(S(Ir,cg).has(n))throw new Error("Cannot use more than one PDFWorker per port.");S(Ir,cg).set(n,this),se(this,IT,RZ).call(this,n)}else se(this,DT,MZ).call(this)}get promise(){return S(this,yf).promise}get port(){return S(this,bu)}get messageHandler(){return S(this,Kl)}destroy(){var e,n;this.destroyed=!0,(e=S(this,og))==null||e.terminate(),Z(this,og,null),S(Ir,cg).delete(S(this,bu)),Z(this,bu,null),(n=S(this,Kl))==null||n.destroy(),Z(this,Kl,null)}static create(e){const n=S(this,cg).get(e==null?void 0:e.port);if(n){if(n._pendingDestroy)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return n}return new Ir(e)}static get workerSrc(){if(lc.workerSrc)return lc.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return xn(this,"_setupFakeWorkerGlobal",(async()=>S(this,ny,oE)?S(this,ny,oE):(await Lj(()=>import(this.workerSrc),[])).WorkerMessageHandler)())}};yf=new WeakMap,Kl=new WeakMap,bu=new WeakMap,og=new WeakMap,TT=new WeakMap,lg=new WeakMap,cg=new WeakMap,ty=new WeakSet,aE=function(){S(this,yf).resolve(),S(this,Kl).send("configure",{verbosity:this.verbosity})},IT=new WeakSet,RZ=function(e){Z(this,bu,e),Z(this,Kl,new Ew("main","worker",e)),S(this,Kl).on("ready",()=>{}),se(this,ty,aE).call(this)},DT=new WeakSet,MZ=function(){if(S(Ir,lg)||S(Ir,ny,oE)){se(this,dg,_w).call(this);return}let{workerSrc:e}=Ir;try{Ir._isSameOrigin(window.location,e)||(e=Ir._createCDNWrapper(new URL(e,window.location).href));const n=new Worker(e,{type:"module"}),r=new Ew("main","worker",n),i=()=>{a.abort(),r.destroy(),n.terminate(),this.destroyed?S(this,yf).reject(new Error("Worker was destroyed")):se(this,dg,_w).call(this)},a=new AbortController;n.addEventListener("error",()=>{S(this,og)||i()},{signal:a.signal}),r.on("test",l=>{if(a.abort(),this.destroyed||!l){i();return}Z(this,Kl,r),Z(this,bu,n),Z(this,og,n),se(this,ty,aE).call(this)}),r.on("ready",l=>{if(a.abort(),this.destroyed){i();return}try{o()}catch{se(this,dg,_w).call(this)}});const o=()=>{const l=new Uint8Array;r.send("test",l,[l.buffer])};o();return}catch{WI("The worker has been disabled.")}se(this,dg,_w).call(this)},dg=new WeakSet,_w=function(){S(Ir,lg)||(an("Setting up fake worker."),Z(Ir,lg,!0)),Ir._setupFakeWorkerGlobal.then(e=>{if(this.destroyed){S(this,yf).reject(new Error("Worker was destroyed"));return}const n=new Vue;Z(this,bu,n);const r=`fake${na(Ir,TT)._++}`,i=new Ew(r+"_worker",r,n);e.setup(i,n),Z(this,Kl,new Ew(r,r+"_worker",n)),se(this,ty,aE).call(this)}).catch(e=>{S(this,yf).reject(new Error(`Setting up fake worker failed: "${e.message}".`))})},ny=new WeakSet,oE=function(){var e;try{return((e=globalThis.pdfjsWorker)==null?void 0:e.WorkerMessageHandler)||null}catch{return null}},G(Ir,ny),G(Ir,TT,0),G(Ir,lg,!1),G(Ir,cg,new WeakMap),ca&&(Z(Ir,lg,!0),lc.workerSrc||(lc.workerSrc="./pdf.worker.mjs")),Ir._isSameOrigin=(e,n)=>{const r=URL.parse(e);if(!(r!=null&&r.origin)||r.origin==="null")return!1;const i=new URL(n,r);return r.origin===i.origin},Ir._createCDNWrapper=e=>{const n=`await import("${e}");`;return URL.createObjectURL(new Blob([n],{type:"text/javascript"}))},Ir.fromPort=e=>{if(kue("`PDFWorker.fromPort` - please use `PDFWorker.create` instead."),!(e!=null&&e.port))throw new Error("PDFWorker.fromPort - invalid method signature.");return Ir.create(e)};let rb=Ir;var wu,Qc,ry,sy,ju,ug,Ow;class _he{constructor(e,n,r,i,a){G(this,ug);G(this,wu,new Map);G(this,Qc,new Map);G(this,ry,new Map);G(this,sy,new Map);G(this,ju,null);this.messageHandler=e,this.loadingTask=n,this.commonObjs=new IZ,this.fontLoader=new Fue({ownerDocument:i.ownerDocument,styleElement:i.styleElement}),this.loadingParams=i.loadingParams,this._params=i,this.canvasFactory=a.canvasFactory,this.filterFactory=a.filterFactory,this.cMapReaderFactory=a.cMapReaderFactory,this.standardFontDataFactory=a.standardFontDataFactory,this.wasmFactory=a.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=r,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.setupMessageHandler()}get annotationStorage(){return xn(this,"annotationStorage",new f$)}getRenderingIntent(e,n=$u.ENABLE,r=null,i=!1,a=!1){let o=yo.DISPLAY,l=UL;switch(e){case"any":o=yo.ANY;break;case"display":break;case"print":o=yo.PRINT;break;default:an(`getRenderingIntent - invalid intent: ${e}`)}const c=o&yo.PRINT&&r instanceof fZ?r:this.annotationStorage;switch(n){case $u.DISABLE:o+=yo.ANNOTATIONS_DISABLE;break;case $u.ENABLE:break;case $u.ENABLE_FORMS:o+=yo.ANNOTATIONS_FORMS;break;case $u.ENABLE_STORAGE:o+=yo.ANNOTATIONS_STORAGE,l=c.serializable;break;default:an(`getRenderingIntent - invalid annotationMode: ${n}`)}i&&(o+=yo.IS_EDITING),a&&(o+=yo.OPLIST);const{ids:d,hash:u}=c.modifiedIds,h=[o,l.hash,u];return{renderingIntent:o,cacheKey:h.join("_"),annotationStorageSerializable:l,modifiedIds:d}}destroy(){var r;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),(r=S(this,ju))==null||r.reject(new Error("Worker was destroyed during onPassword callback"));const e=[];for(const i of S(this,Qc).values())e.push(i._destroy());S(this,Qc).clear(),S(this,ry).clear(),S(this,sy).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const n=this.messageHandler.sendWithPromise("Terminate",null);return e.push(n),Promise.all(e).then(()=>{var i,a;this.commonObjs.clear(),this.fontLoader.clear(),S(this,wu).clear(),this.filterFactory.destroy(),nb.cleanup(),(i=this._networkStream)==null||i.cancelAllRequests(new eh("Worker was terminated.")),(a=this.messageHandler)==null||a.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:e,loadingTask:n}=this;e.on("GetReader",(r,i)=>{Ts(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=a=>{this._lastProgress={loaded:a.loaded,total:a.total}},i.onPull=()=>{this._fullReader.read().then(function({value:a,done:o}){if(o){i.close();return}Ts(a instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),i.enqueue(new Uint8Array(a),1,[a])}).catch(a=>{i.error(a)})},i.onCancel=a=>{this._fullReader.cancel(a),i.ready.catch(o=>{if(!this.destroyed)throw o})}}),e.on("ReaderHeadersReady",async r=>{var l;await this._fullReader.headersReady;const{isStreamingSupported:i,isRangeSupported:a,contentLength:o}=this._fullReader;return(!i||!a)&&(this._lastProgress&&((l=n.onProgress)==null||l.call(n,this._lastProgress)),this._fullReader.onProgress=c=>{var d;(d=n.onProgress)==null||d.call(n,{loaded:c.loaded,total:c.total})}),{isStreamingSupported:i,isRangeSupported:a,contentLength:o}}),e.on("GetRangeReader",(r,i)=>{Ts(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const a=this._networkStream.getRangeReader(r.begin,r.end);if(!a){i.close();return}i.onPull=()=>{a.read().then(function({value:o,done:l}){if(l){i.close();return}Ts(o instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),i.enqueue(new Uint8Array(o),1,[o])}).catch(o=>{i.error(o)})},i.onCancel=o=>{a.cancel(o),i.ready.catch(l=>{if(!this.destroyed)throw l})}}),e.on("GetDoc",({pdfInfo:r})=>{this._numPages=r.numPages,this._htmlForXfa=r.htmlForXfa,delete r.htmlForXfa,n._capability.resolve(new Dhe(r,this))}),e.on("DocException",r=>{n._capability.reject(Ea(r))}),e.on("PasswordRequest",r=>{Z(this,ju,Promise.withResolvers());try{if(!n.onPassword)throw Ea(r);const i=a=>{a instanceof Error?S(this,ju).reject(a):S(this,ju).resolve({password:a})};n.onPassword(i,r.code)}catch(i){S(this,ju).reject(i)}return S(this,ju).promise}),e.on("DataLoaded",r=>{var i;(i=n.onProgress)==null||i.call(n,{loaded:r.length,total:r.length}),this.downloadInfoCapability.resolve(r)}),e.on("StartRenderPage",r=>{if(this.destroyed)return;S(this,Qc).get(r.pageIndex)._startRenderPage(r.transparency,r.cacheKey)}),e.on("commonobj",([r,i,a])=>{var o;if(this.destroyed||this.commonObjs.has(r))return null;switch(i){case"Font":if("error"in a){const u=a.error;an(`Error during font loading: ${u}`),this.commonObjs.resolve(r,u);break}const l=this._params.pdfBug&&((o=globalThis.FontInspector)!=null&&o.enabled)?(u,h)=>globalThis.FontInspector.fontAdded(u,h):null,c=new $ue(a,l);this.fontLoader.bind(c).catch(()=>e.sendWithPromise("FontFallback",{id:r})).finally(()=>{!c.fontExtraProperties&&c.data&&(c.data=null),this.commonObjs.resolve(r,c)});break;case"CopyLocalImage":const{imageRef:d}=a;Ts(d,"The imageRef must be defined.");for(const u of S(this,Qc).values())for(const[,h]of u.objs)if((h==null?void 0:h.ref)===d)return h.dataLen?(this.commonObjs.resolve(r,structuredClone(h)),h.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(r,a);break;default:throw new Error(`Got unknown common object type ${i}`)}return null}),e.on("obj",([r,i,a,o])=>{var c;if(this.destroyed)return;const l=S(this,Qc).get(i);if(!l.objs.has(r)){if(l._intentStates.size===0){(c=o==null?void 0:o.bitmap)==null||c.close();return}switch(a){case"Image":case"Pattern":l.objs.resolve(r,o);break;default:throw new Error(`Got unknown object type ${a}`)}}}),e.on("DocProgress",r=>{var i;this.destroyed||(i=n.onProgress)==null||i.call(n,{loaded:r.loaded,total:r.total})}),e.on("FetchBinaryData",async r=>{if(this.destroyed)throw new Error("Worker was destroyed.");const i=this[r.type];if(!i)throw new Error(`${r.type} not initialized, see the \`useWorkerFetch\` parameter.`);return i.fetch(r)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var r;this.annotationStorage.size<=0&&an("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:e,transfer:n}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:e,filename:((r=this._fullReader)==null?void 0:r.filename)??null},n).finally(()=>{this.annotationStorage.resetModified()})}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request."));const n=e-1,r=S(this,ry).get(n);if(r)return r;const i=this.messageHandler.sendWithPromise("GetPage",{pageIndex:n}).then(a=>{if(this.destroyed)throw new Error("Transport destroyed");a.refStr&&S(this,sy).set(a.refStr,e);const o=new khe(n,a,this,this._params.pdfBug);return S(this,Qc).set(n,o),o});return S(this,ry).set(n,i),i}getPageIndex(e){return VL(e)?this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(e,n){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:n})}getFieldObjects(){return se(this,ug,Ow).call(this,"GetFieldObjects")}hasJSActions(){return se(this,ug,Ow).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return typeof e!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return se(this,ug,Ow).call(this,"GetDocJSActions")}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(e){return se(this,ug,Ow).call(this,"GetOptionalContentConfig").then(n=>new uhe(n,e))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const e="GetMetadata",n=S(this,wu).get(e);if(n)return n;const r=this.messageHandler.sendWithPromise(e,null).then(i=>{var a,o;return{info:i[0],metadata:i[1]?new che(i[1]):null,contentDispositionFilename:((a=this._fullReader)==null?void 0:a.filename)??null,contentLength:((o=this._fullReader)==null?void 0:o.contentLength)??null}});return S(this,wu).set(e,r),r}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(e=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const n of S(this,Qc).values())if(!n.cleanup())throw new Error(`startCleanup: Page ${n.pageNumber} is currently rendering.`);this.commonObjs.clear(),e||this.fontLoader.clear(),S(this,wu).clear(),this.filterFactory.destroy(!0),nb.cleanup()}}cachedPageNumber(e){if(!VL(e))return null;const n=e.gen===0?`${e.num}R`:`${e.num}R${e.gen}`;return S(this,sy).get(n)??null}}wu=new WeakMap,Qc=new WeakMap,ry=new WeakMap,sy=new WeakMap,ju=new WeakMap,ug=new WeakSet,Ow=function(e,n=null){const r=S(this,wu).get(e);if(r)return r;const i=this.messageHandler.sendWithPromise(e,n);return S(this,wu).set(e,i),i};var bf;class Ohe{constructor(e){G(this,bf,null);ut(this,"onContinue",null);ut(this,"onError",null);Z(this,bf,e)}get promise(){return S(this,bf).capability.promise}cancel(e=0){S(this,bf).cancel(null,e)}get separateAnnots(){const{separateAnnots:e}=S(this,bf).operatorList;if(!e)return!1;const{annotationCanvasMap:n}=S(this,bf);return e.form||e.canvas&&(n==null?void 0:n.size)>0}}bf=new WeakMap;var wf,hg;const fp=class fp{constructor({callback:e,params:n,objs:r,commonObjs:i,annotationCanvasMap:a,operatorList:o,pageIndex:l,canvasFactory:c,filterFactory:d,useRequestAnimationFrame:u=!1,pdfBug:h=!1,pageColors:f=null}){G(this,wf,null);this.callback=e,this.params=n,this.objs=r,this.commonObjs=i,this.annotationCanvasMap=a,this.operatorListIdx=null,this.operatorList=o,this._pageIndex=l,this.canvasFactory=c,this.filterFactory=d,this._pdfBug=h,this.pageColors=f,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=u===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new Ohe(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=n.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:e=!1,optionalContentConfig:n}){var l,c;if(this.cancelled)return;if(this._canvas){if(S(fp,hg).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");S(fp,hg).add(this._canvas)}this._pdfBug&&((l=globalThis.StepperManager)!=null&&l.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:r,viewport:i,transform:a,background:o}=this.params;this.gfx=new d0(r,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:n},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:a,viewport:i,transparency:e,background:o}),this.operatorListIdx=0,this.graphicsReady=!0,(c=this.graphicsReadyCallback)==null||c.call(this)}cancel(e=null,n=0){var r,i,a;this.running=!1,this.cancelled=!0,(r=this.gfx)==null||r.endDrawing(),S(this,wf)&&(window.cancelAnimationFrame(S(this,wf)),Z(this,wf,null)),S(fp,hg).delete(this._canvas),e||(e=new GI(`Rendering cancelled, page ${this._pageIndex+1}`,n)),this.callback(e),(a=(i=this.task).onError)==null||a.call(i,e)}operatorListChanged(){var e;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(e=this.stepper)==null||e.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?Z(this,wf,window.requestAnimationFrame(()=>{Z(this,wf,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),S(fp,hg).delete(this._canvas),this.callback())))}};wf=new WeakMap,hg=new WeakMap,G(fp,hg,new WeakSet);let nR=fp;const FZ="5.3.93",$Z="cbeef3233";function J9(t){return Math.floor(Math.max(0,Math.min(1,t))*255).toString(16).padStart(2,"0")}function Q1(t){return Math.max(0,Math.min(255,255*t))}class ez{static CMYK_G([e,n,r,i]){return["G",1-Math.min(1,.3*e+.59*r+.11*n+i)]}static G_CMYK([e]){return["CMYK",0,0,0,1-e]}static G_RGB([e]){return["RGB",e,e,e]}static G_rgb([e]){return e=Q1(e),[e,e,e]}static G_HTML([e]){const n=J9(e);return`#${n}${n}${n}`}static RGB_G([e,n,r]){return["G",.3*e+.59*n+.11*r]}static RGB_rgb(e){return e.map(Q1)}static RGB_HTML(e){return`#${e.map(J9).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([e,n,r,i]){return["RGB",1-Math.min(1,e+i),1-Math.min(1,r+i),1-Math.min(1,n+i)]}static CMYK_rgb([e,n,r,i]){return[Q1(1-Math.min(1,e+i)),Q1(1-Math.min(1,r+i)),Q1(1-Math.min(1,n+i))]}static CMYK_HTML(e){const n=this.CMYK_RGB(e).slice(1);return this.RGB_HTML(n)}static RGB_CMYK([e,n,r]){const i=1-e,a=1-n,o=1-r,l=Math.min(i,a,o);return["CMYK",i,a,o,l]}}class Lhe{create(e,n,r=!1){if(e<=0||n<=0)throw new Error("Invalid SVG dimensions");const i=this._createSVG("svg:svg");return i.setAttribute("version","1.1"),r||(i.setAttribute("width",`${e}px`),i.setAttribute("height",`${n}px`)),i.setAttribute("preserveAspectRatio","none"),i.setAttribute("viewBox",`0 0 ${e} ${n}`),i}createElement(e){if(typeof e!="string")throw new Error("Invalid SVG element type");return this._createSVG(e)}_createSVG(e){ir("Abstract method `_createSVG` called.")}}class Bj extends Lhe{_createSVG(e){return document.createElementNS(Yd,e)}}class v${static setupStorage(e,n,r,i,a){const o=i.getValue(n,{value:null});switch(r.name){case"textarea":if(o.value!==null&&(e.textContent=o.value),a==="print")break;e.addEventListener("input",l=>{i.setValue(n,{value:l.target.value})});break;case"input":if(r.attributes.type==="radio"||r.attributes.type==="checkbox"){if(o.value===r.attributes.xfaOn?e.setAttribute("checked",!0):o.value===r.attributes.xfaOff&&e.removeAttribute("checked"),a==="print")break;e.addEventListener("change",l=>{i.setValue(n,{value:l.target.checked?l.target.getAttribute("xfaOn"):l.target.getAttribute("xfaOff")})})}else{if(o.value!==null&&e.setAttribute("value",o.value),a==="print")break;e.addEventListener("input",l=>{i.setValue(n,{value:l.target.value})})}break;case"select":if(o.value!==null){e.setAttribute("value",o.value);for(const l of r.children)l.attributes.value===o.value?l.attributes.selected=!0:l.attributes.hasOwnProperty("selected")&&delete l.attributes.selected}e.addEventListener("input",l=>{const c=l.target.options,d=c.selectedIndex===-1?"":c[c.selectedIndex].value;i.setValue(n,{value:d})});break}}static setAttributes({html:e,element:n,storage:r=null,intent:i,linkService:a}){const{attributes:o}=n,l=e instanceof HTMLAnchorElement;o.type==="radio"&&(o.name=`${o.name}-${i}`);for(const[c,d]of Object.entries(o))if(d!=null)switch(c){case"class":d.length&&e.setAttribute(c,d.join(" "));break;case"dataId":break;case"id":e.setAttribute("data-element-id",d);break;case"style":Object.assign(e.style,d);break;case"textContent":e.textContent=d;break;default:(!l||c!=="href"&&c!=="newWindow")&&e.setAttribute(c,d)}l&&a.addLinkAttributes(e,o.href,o.newWindow),r&&o.dataId&&this.setupStorage(e,o.dataId,n,r)}static render(e){var h,f;const n=e.annotationStorage,r=e.linkService,i=e.xfaHtml,a=e.intent||"display",o=document.createElement(i.name);i.attributes&&this.setAttributes({html:o,element:i,intent:a,linkService:r});const l=a!=="richText",c=e.div;if(c.append(o),e.viewport){const m=`matrix(${e.viewport.transform.join(",")})`;c.style.transform=m}l&&c.setAttribute("class","xfaLayer xfaFont");const d=[];if(i.children.length===0){if(i.value){const m=document.createTextNode(i.value);o.append(m),l&&$j.shouldBuildText(i.name)&&d.push(m)}return{textDivs:d}}const u=[[i,-1,o]];for(;u.length>0;){const[m,v,p]=u.at(-1);if(v+1===m.children.length){u.pop();continue}const g=m.children[++u.at(-1)[1]];if(g===null)continue;const{name:x}=g;if(x==="#text"){const b=document.createTextNode(g.value);d.push(b),p.append(b);continue}const y=(h=g==null?void 0:g.attributes)!=null&&h.xmlns?document.createElementNS(g.attributes.xmlns,x):document.createElement(x);if(p.append(y),g.attributes&&this.setAttributes({html:y,element:g,storage:n,intent:a,linkService:r}),((f=g.children)==null?void 0:f.length)>0)u.push([g,-1,y]);else if(g.value){const b=document.createTextNode(g.value);l&&$j.shouldBuildText(x)&&d.push(b),y.append(b)}}for(const m of c.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))m.setAttribute("readOnly",!0);return{textDivs:d}}static update(e){const n=`matrix(${e.viewport.transform.join(",")})`;e.div.style.transform=n,e.div.hidden=!1}}const Rhe=9,ov=new WeakSet;class tz{static create(e){switch(e.data.annotationType){case ls.LINK:return new BZ(e);case ls.TEXT:return new Mhe(e);case ls.WIDGET:switch(e.data.fieldType){case"Tx":return new Fhe(e);case"Btn":return e.data.radioButton?new VZ(e):e.data.checkBox?new Bhe(e):new zhe(e);case"Ch":return new Uhe(e);case"Sig":return new $he(e)}return new Nv(e);case ls.POPUP:return new sR(e);case ls.FREETEXT:return new KZ(e);case ls.LINE:return new qhe(e);case ls.SQUARE:return new Hhe(e);case ls.CIRCLE:return new Whe(e);case ls.POLYLINE:return new YZ(e);case ls.CARET:return new Khe(e);case ls.INK:return new x$(e);case ls.POLYGON:return new Ghe(e);case ls.HIGHLIGHT:return new XZ(e);case ls.UNDERLINE:return new Yhe(e);case ls.SQUIGGLY:return new Xhe(e);case ls.STRIKEOUT:return new Zhe(e);case ls.STAMP:return new ZZ(e);case ls.FILEATTACHMENT:return new Qhe(e);default:return new bs(e)}}}var fg,iy,ay,QN,rR;const Y7=class Y7{constructor(e,{isRenderable:n=!1,ignoreBorder:r=!1,createQuadrilaterals:i=!1}={}){G(this,QN);G(this,fg,null);G(this,iy,!1);G(this,ay,null);this.isRenderable=n,this.data=e.data,this.layer=e.layer,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderForms=e.renderForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._fieldObjects=e.fieldObjects,this.parent=e.parent,n&&(this.container=this._createContainer(r)),i&&this._createQuadrilaterals()}static _hasPopupData({contentsObj:e,richText:n}){return!!(e!=null&&e.str||n!=null&&n.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return Y7._hasPopupData(this.data)}updateEdited(e){var r;if(!this.container)return;S(this,fg)||Z(this,fg,{rect:this.data.rect.slice(0)});const{rect:n}=e;n&&se(this,QN,rR).call(this,n),(r=S(this,ay))==null||r.popup.updateEdited(e)}resetEdited(){var e;S(this,fg)&&(se(this,QN,rR).call(this,S(this,fg).rect),(e=S(this,ay))==null||e.popup.resetEdited(),Z(this,fg,null))}_createContainer(e){const{data:n,parent:{page:r,viewport:i}}=this,a=document.createElement("section");a.setAttribute("data-annotation-id",n.id),this instanceof Nv||(a.tabIndex=0);const{style:o}=a;if(o.zIndex=this.parent.zIndex++,n.alternativeText&&(a.title=n.alternativeText),n.noRotate&&a.classList.add("norotate"),!n.rect||this instanceof sR){const{rotation:p}=n;return!n.hasOwnCanvas&&p!==0&&this.setRotation(p,a),a}const{width:l,height:c}=this;if(!e&&n.borderStyle.width>0){o.borderWidth=`${n.borderStyle.width}px`;const p=n.borderStyle.horizontalCornerRadius,g=n.borderStyle.verticalCornerRadius;if(p>0||g>0){const y=`calc(${p}px * var(--total-scale-factor)) / calc(${g}px * var(--total-scale-factor))`;o.borderRadius=y}else if(this instanceof VZ){const y=`calc(${l}px * var(--total-scale-factor)) / calc(${c}px * var(--total-scale-factor))`;o.borderRadius=y}switch(n.borderStyle.style){case Cx.SOLID:o.borderStyle="solid";break;case Cx.DASHED:o.borderStyle="dashed";break;case Cx.BEVELED:an("Unimplemented border style: beveled");break;case Cx.INSET:an("Unimplemented border style: inset");break;case Cx.UNDERLINE:o.borderBottomStyle="solid";break}const x=n.borderColor||null;x?(Z(this,iy,!0),o.borderColor=kt.makeHexColor(x[0]|0,x[1]|0,x[2]|0)):o.borderWidth=0}const d=kt.normalizeRect([n.rect[0],r.view[3]-n.rect[1]+r.view[1],n.rect[2],r.view[3]-n.rect[3]+r.view[1]]),{pageWidth:u,pageHeight:h,pageX:f,pageY:m}=i.rawDims;o.left=`${100*(d[0]-f)/u}%`,o.top=`${100*(d[1]-m)/h}%`;const{rotation:v}=n;return n.hasOwnCanvas||v===0?(o.width=`${100*l/u}%`,o.height=`${100*c/h}%`):this.setRotation(v,a),a}setRotation(e,n=this.container){if(!this.data.rect)return;const{pageWidth:r,pageHeight:i}=this.parent.viewport.rawDims;let{width:a,height:o}=this;e%180!==0&&([a,o]=[o,a]),n.style.width=`${100*a/r}%`,n.style.height=`${100*o/i}%`,n.setAttribute("data-main-rotation",(360-e)%360)}get _commonActions(){const e=(n,r,i)=>{const a=i.detail[n],o=a[0],l=a.slice(1);i.target.style[r]=ez[`${o}_HTML`](l),this.annotationStorage.setValue(this.data.id,{[r]:ez[`${o}_rgb`](l)})};return xn(this,"_commonActions",{display:n=>{const{display:r}=n.detail,i=r%2===1;this.container.style.visibility=i?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:i,noPrint:r===1||r===2})},print:n=>{this.annotationStorage.setValue(this.data.id,{noPrint:!n.detail.print})},hidden:n=>{const{hidden:r}=n.detail;this.container.style.visibility=r?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:r,noView:r})},focus:n=>{setTimeout(()=>n.target.focus({preventScroll:!1}),0)},userName:n=>{n.target.title=n.detail.userName},readonly:n=>{n.target.disabled=n.detail.readonly},required:n=>{this._setRequired(n.target,n.detail.required)},bgColor:n=>{e("bgColor","backgroundColor",n)},fillColor:n=>{e("fillColor","backgroundColor",n)},fgColor:n=>{e("fgColor","color",n)},textColor:n=>{e("textColor","color",n)},borderColor:n=>{e("borderColor","borderColor",n)},strokeColor:n=>{e("strokeColor","borderColor",n)},rotation:n=>{const r=n.detail.rotation;this.setRotation(r),this.annotationStorage.setValue(this.data.id,{rotation:r})}})}_dispatchEventFromSandbox(e,n){const r=this._commonActions;for(const i of Object.keys(n.detail)){const a=e[i]||r[i];a==null||a(n)}}_setDefaultPropertiesFromJS(e){if(!this.enableScripting)return;const n=this.annotationStorage.getRawValue(this.data.id);if(!n)return;const r=this._commonActions;for(const[i,a]of Object.entries(n)){const o=r[i];if(o){const l={detail:{[i]:a},target:e};o(l),delete n[i]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:e}=this.data;if(!e)return;const[n,r,i,a]=this.data.rect.map(p=>Math.fround(p));if(e.length===8){const[p,g,x,y]=e.subarray(2,6);if(i===p&&a===g&&n===x&&r===y)return}const{style:o}=this.container;let l;if(S(this,iy)){const{borderColor:p,borderWidth:g}=o;o.borderWidth=0,l=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${p}" stroke-width="${g}">`],this.container.classList.add("hasBorder")}const c=i-n,d=a-r,{svgFactory:u}=this,h=u.createElement("svg");h.classList.add("quadrilateralsContainer"),h.setAttribute("width",0),h.setAttribute("height",0),h.role="none";const f=u.createElement("defs");h.append(f);const m=u.createElement("clipPath"),v=`clippath_${this.data.id}`;m.setAttribute("id",v),m.setAttribute("clipPathUnits","objectBoundingBox"),f.append(m);for(let p=2,g=e.length;p<g;p+=8){const x=e[p],y=e[p+1],b=e[p+2],w=e[p+3],N=u.createElement("rect"),E=(b-n)/c,C=(a-y)/d,j=(x-b)/c,I=(y-w)/d;N.setAttribute("x",E),N.setAttribute("y",C),N.setAttribute("width",j),N.setAttribute("height",I),m.append(N),l==null||l.push(`<rect vector-effect="non-scaling-stroke" x="${E}" y="${C}" width="${j}" height="${I}"/>`)}S(this,iy)&&(l.push("</g></svg>')"),o.backgroundImage=l.join("")),this.container.append(h),this.container.style.clipPath=`url(#${v})`}_createPopup(){const{data:e}=this,n=Z(this,ay,new sR({data:{color:e.color,titleObj:e.titleObj,modificationDate:e.modificationDate,contentsObj:e.contentsObj,richText:e.richText,parentRect:e.rect,borderStyle:0,id:`popup_${e.id}`,rotation:e.rotation,noRotate:!0},parent:this.parent,elements:[this]}));this.parent.div.append(n.render())}render(){ir("Abstract method `AnnotationElement.render` called")}_getElementsByName(e,n=null){const r=[];if(this._fieldObjects){const i=this._fieldObjects[e];if(i)for(const{page:a,id:o,exportValues:l}of i){if(a===-1||o===n)continue;const c=typeof l=="string"?l:null,d=document.querySelector(`[data-element-id="${o}"]`);if(d&&!ov.has(d)){an(`_getElementsByName - element not allowed: ${o}`);continue}r.push({id:o,exportValue:c,domElement:d})}return r}for(const i of document.getElementsByName(e)){const{exportValue:a}=i,o=i.getAttribute("data-element-id");o!==n&&ov.has(i)&&r.push({id:o,exportValue:a,domElement:i})}return r}show(){var e;this.container&&(this.container.hidden=!1),(e=this.popup)==null||e.maybeShow()}hide(){var e;this.container&&(this.container.hidden=!0),(e=this.popup)==null||e.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const e=this.getElementsToTriggerPopup();if(Array.isArray(e))for(const n of e)n.classList.add("highlightArea");else e.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:e,data:{id:n}}=this;this.container.addEventListener("dblclick",()=>{var r;(r=this.linkService.eventBus)==null||r.dispatch("switchannotationeditormode",{source:this,mode:e,editId:n,mustEnterInEditMode:!0})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}};fg=new WeakMap,iy=new WeakMap,ay=new WeakMap,QN=new WeakSet,rR=function(e){const{container:{style:n},data:{rect:r,rotation:i},parent:{viewport:{rawDims:{pageWidth:a,pageHeight:o,pageX:l,pageY:c}}}}=this;r==null||r.splice(0,4,...e),n.left=`${100*(e[0]-l)/a}%`,n.top=`${100*(o-e[3]+c)/o}%`,i===0?(n.width=`${100*(e[2]-e[0])/a}%`,n.height=`${100*(e[3]-e[1])/o}%`):this.setRotation(i)};let bs=Y7;var Nu,np,kT,zZ,_T,UZ;class BZ extends bs{constructor(n,r=null){super(n,{isRenderable:!0,ignoreBorder:!!(r!=null&&r.ignoreBorder),createQuadrilaterals:!0});G(this,Nu);G(this,kT);G(this,_T);this.isTooltipOnly=n.data.isTooltipOnly}render(){const{data:n,linkService:r}=this,i=document.createElement("a");i.setAttribute("data-element-id",n.id);let a=!1;return n.url?(r.addLinkAttributes(i,n.url,n.newWindow),a=!0):n.action?(this._bindNamedAction(i,n.action),a=!0):n.attachment?(se(this,kT,zZ).call(this,i,n.attachment,n.attachmentDest),a=!0):n.setOCGState?(se(this,_T,UZ).call(this,i,n.setOCGState),a=!0):n.dest?(this._bindLink(i,n.dest),a=!0):(n.actions&&(n.actions.Action||n.actions["Mouse Up"]||n.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(i,n),a=!0),n.resetForm?(this._bindResetFormAction(i,n.resetForm),a=!0):this.isTooltipOnly&&!a&&(this._bindLink(i,""),a=!0)),this.container.classList.add("linkAnnotation"),a&&this.container.append(i),this.container}_bindLink(n,r){n.href=this.linkService.getDestinationHash(r),n.onclick=()=>(r&&this.linkService.goToDestination(r),!1),(r||r==="")&&se(this,Nu,np).call(this)}_bindNamedAction(n,r){n.href=this.linkService.getAnchorUrl(""),n.onclick=()=>(this.linkService.executeNamedAction(r),!1),se(this,Nu,np).call(this)}_bindJSAction(n,r){n.href=this.linkService.getAnchorUrl("");const i=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const a of Object.keys(r.actions)){const o=i.get(a);o&&(n[o]=()=>{var l;return(l=this.linkService.eventBus)==null||l.dispatch("dispatcheventinsandbox",{source:this,detail:{id:r.id,name:a}}),!1})}n.onclick||(n.onclick=()=>!1),se(this,Nu,np).call(this)}_bindResetFormAction(n,r){const i=n.onclick;if(i||(n.href=this.linkService.getAnchorUrl("")),se(this,Nu,np).call(this),!this._fieldObjects){an('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),i||(n.onclick=()=>!1);return}n.onclick=()=>{var h;i==null||i();const{fields:a,refs:o,include:l}=r,c=[];if(a.length!==0||o.length!==0){const f=new Set(o);for(const m of a){const v=this._fieldObjects[m]||[];for(const{id:p}of v)f.add(p)}for(const m of Object.values(this._fieldObjects))for(const v of m)f.has(v.id)===l&&c.push(v)}else for(const f of Object.values(this._fieldObjects))c.push(...f);const d=this.annotationStorage,u=[];for(const f of c){const{id:m}=f;switch(u.push(m),f.type){case"text":{const p=f.defaultValue||"";d.setValue(m,{value:p});break}case"checkbox":case"radiobutton":{const p=f.defaultValue===f.exportValues;d.setValue(m,{value:p});break}case"combobox":case"listbox":{const p=f.defaultValue||"";d.setValue(m,{value:p});break}default:continue}const v=document.querySelector(`[data-element-id="${m}"]`);if(v){if(!ov.has(v)){an(`_bindResetFormAction - element not allowed: ${m}`);continue}}else continue;v.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((h=this.linkService.eventBus)==null||h.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:u,name:"ResetForm"}})),!1}}}Nu=new WeakSet,np=function(){this.container.setAttribute("data-internal-link","")},kT=new WeakSet,zZ=function(n,r,i=null){n.href=this.linkService.getAnchorUrl(""),r.description&&(n.title=r.description),n.onclick=()=>{var a;return(a=this.downloadManager)==null||a.openOrDownloadData(r.content,r.filename,i),!1},se(this,Nu,np).call(this)},_T=new WeakSet,UZ=function(n,r){n.href=this.linkService.getAnchorUrl(""),n.onclick=()=>(this.linkService.executeSetOCGState(r),!1),se(this,Nu,np).call(this)};class Mhe extends bs{constructor(e){super(e,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const e=document.createElement("img");return e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),e.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(e),this.container}}class Nv extends bs{render(){return this.container}showElementAndHideCanvas(e){var n;this.data.hasOwnCanvas&&(((n=e.previousSibling)==null?void 0:n.nodeName)==="CANVAS"&&(e.previousSibling.hidden=!0),e.hidden=!1)}_getKeyModifier(e){return ai.platform.isMac?e.metaKey:e.ctrlKey}_setEventListener(e,n,r,i,a){r.includes("mouse")?e.addEventListener(r,o=>{var l;(l=this.linkService.eventBus)==null||l.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:a(o),shift:o.shiftKey,modifier:this._getKeyModifier(o)}})}):e.addEventListener(r,o=>{var l;if(r==="blur"){if(!n.focused||!o.relatedTarget)return;n.focused=!1}else if(r==="focus"){if(n.focused)return;n.focused=!0}a&&((l=this.linkService.eventBus)==null||l.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:a(o)}}))})}_setEventListeners(e,n,r,i){var a,o,l;for(const[c,d]of r)(d==="Action"||(a=this.data.actions)!=null&&a[d])&&((d==="Focus"||d==="Blur")&&(n||(n={focused:!1})),this._setEventListener(e,n,c,d,i),d==="Focus"&&!((o=this.data.actions)!=null&&o.Blur)?this._setEventListener(e,n,"blur","Blur",null):d==="Blur"&&!((l=this.data.actions)!=null&&l.Focus)&&this._setEventListener(e,n,"focus","Focus",null))}_setBackgroundColor(e){const n=this.data.backgroundColor||null;e.style.backgroundColor=n===null?"transparent":kt.makeHexColor(n[0],n[1],n[2])}_setTextStyle(e){const n=["left","center","right"],{fontColor:r}=this.data.defaultAppearanceData,i=this.data.defaultAppearanceData.fontSize||Rhe,a=e.style;let o;const l=2,c=d=>Math.round(10*d)/10;if(this.data.multiLine){const d=Math.abs(this.data.rect[3]-this.data.rect[1]-l),u=Math.round(d/(Xk*i))||1,h=d/u;o=Math.min(i,c(h/Xk))}else{const d=Math.abs(this.data.rect[3]-this.data.rect[1]-l);o=Math.min(i,c(d/Xk))}a.fontSize=`calc(${o}px * var(--total-scale-factor))`,a.color=kt.makeHexColor(r[0],r[1],r[2]),this.data.textAlignment!==null&&(a.textAlign=n[this.data.textAlignment])}_setRequired(e,n){n?e.setAttribute("required",!0):e.removeAttribute("required"),e.setAttribute("aria-required",n)}}class Fhe extends Nv{constructor(e){const n=e.renderForms||e.data.hasOwnCanvas||!e.data.hasAppearance&&!!e.data.fieldValue;super(e,{isRenderable:n})}setPropertyOnSiblings(e,n,r,i){const a=this.annotationStorage;for(const o of this._getElementsByName(e.name,e.id))o.domElement&&(o.domElement[n]=r),a.setValue(o.id,{[i]:r})}render(){var i,a;const e=this.annotationStorage,n=this.data.id;this.container.classList.add("textWidgetAnnotation");let r=null;if(this.renderForms){const o=e.getValue(n,{value:this.data.fieldValue});let l=o.value||"";const c=e.getValue(n,{charLimit:this.data.maxLen}).charLimit;c&&l.length>c&&(l=l.slice(0,c));let d=o.formattedValue||((i=this.data.textContent)==null?void 0:i.join(`
`))||null;d&&this.data.comb&&(d=d.replaceAll(/\s+/g,""));const u={userValue:l,formattedValue:d,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(r=document.createElement("textarea"),r.textContent=d??l,this.data.doNotScroll&&(r.style.overflowY="hidden")):(r=document.createElement("input"),r.type=this.data.password?"password":"text",r.setAttribute("value",d??l),this.data.doNotScroll&&(r.style.overflowX="hidden")),this.data.hasOwnCanvas&&(r.hidden=!0),ov.add(r),r.setAttribute("data-element-id",n),r.disabled=this.data.readOnly,r.name=this.data.fieldName,r.tabIndex=0;const h=this.data.dateFormat||this.data.timeFormat;h&&(r.title=h),this._setRequired(r,this.data.required),c&&(r.maxLength=c),r.addEventListener("input",m=>{e.setValue(n,{value:m.target.value}),this.setPropertyOnSiblings(r,"value",m.target.value,"value"),u.formattedValue=null}),r.addEventListener("resetform",m=>{const v=this.data.defaultFieldValue??"";r.value=u.userValue=v,u.formattedValue=null});let f=m=>{const{formattedValue:v}=u;v!=null&&(m.target.value=v),m.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){r.addEventListener("focus",v=>{var g;if(u.focused)return;const{target:p}=v;u.userValue&&(p.value=u.userValue),u.lastCommittedValue=p.value,u.commitKey=1,(g=this.data.actions)!=null&&g.Focus||(u.focused=!0)}),r.addEventListener("updatefromsandbox",v=>{this.showElementAndHideCanvas(v.target);const p={value(g){u.userValue=g.detail.value??"",e.setValue(n,{value:u.userValue.toString()}),g.target.value=u.userValue},formattedValue(g){const{formattedValue:x}=g.detail;u.formattedValue=x,x!=null&&g.target!==document.activeElement&&(g.target.value=x),e.setValue(n,{formattedValue:x})},selRange(g){g.target.setSelectionRange(...g.detail.selRange)},charLimit:g=>{var w;const{charLimit:x}=g.detail,{target:y}=g;if(x===0){y.removeAttribute("maxLength");return}y.setAttribute("maxLength",x);let b=u.userValue;!b||b.length<=x||(b=b.slice(0,x),y.value=u.userValue=b,e.setValue(n,{value:b}),(w=this.linkService.eventBus)==null||w.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n,name:"Keystroke",value:b,willCommit:!0,commitKey:1,selStart:y.selectionStart,selEnd:y.selectionEnd}}))}};this._dispatchEventFromSandbox(p,v)}),r.addEventListener("keydown",v=>{var x;u.commitKey=1;let p=-1;if(v.key==="Escape"?p=0:v.key==="Enter"&&!this.data.multiLine?p=2:v.key==="Tab"&&(u.commitKey=3),p===-1)return;const{value:g}=v.target;u.lastCommittedValue!==g&&(u.lastCommittedValue=g,u.userValue=g,(x=this.linkService.eventBus)==null||x.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n,name:"Keystroke",value:g,willCommit:!0,commitKey:p,selStart:v.target.selectionStart,selEnd:v.target.selectionEnd}}))});const m=f;f=null,r.addEventListener("blur",v=>{var g,x;if(!u.focused||!v.relatedTarget)return;(g=this.data.actions)!=null&&g.Blur||(u.focused=!1);const{value:p}=v.target;u.userValue=p,u.lastCommittedValue!==p&&((x=this.linkService.eventBus)==null||x.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n,name:"Keystroke",value:p,willCommit:!0,commitKey:u.commitKey,selStart:v.target.selectionStart,selEnd:v.target.selectionEnd}})),m(v)}),(a=this.data.actions)!=null&&a.Keystroke&&r.addEventListener("beforeinput",v=>{var E;u.lastCommittedValue=null;const{data:p,target:g}=v,{value:x,selectionStart:y,selectionEnd:b}=g;let w=y,N=b;switch(v.inputType){case"deleteWordBackward":{const C=x.substring(0,y).match(/\w*[^\w]*$/);C&&(w-=C[0].length);break}case"deleteWordForward":{const C=x.substring(y).match(/^[^\w]*\w*/);C&&(N+=C[0].length);break}case"deleteContentBackward":y===b&&(w-=1);break;case"deleteContentForward":y===b&&(N+=1);break}v.preventDefault(),(E=this.linkService.eventBus)==null||E.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n,name:"Keystroke",value:x,change:p||"",willCommit:!1,selStart:w,selEnd:N}})}),this._setEventListeners(r,u,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],v=>v.target.value)}if(f&&r.addEventListener("blur",f),this.data.comb){const v=(this.data.rect[2]-this.data.rect[0])/c;r.classList.add("comb"),r.style.letterSpacing=`calc(${v}px * var(--total-scale-factor) - 1ch)`}}else r=document.createElement("div"),r.textContent=this.data.fieldValue,r.style.verticalAlign="middle",r.style.display="table-cell",this.data.hasOwnCanvas&&(r.hidden=!0);return this._setTextStyle(r),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class $he extends Nv{constructor(e){super(e,{isRenderable:!!e.data.hasOwnCanvas})}}class Bhe extends Nv{constructor(e){super(e,{isRenderable:e.renderForms})}render(){const e=this.annotationStorage,n=this.data,r=n.id;let i=e.getValue(r,{value:n.exportValue===n.fieldValue}).value;typeof i=="string"&&(i=i!=="Off",e.setValue(r,{value:i})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const a=document.createElement("input");return ov.add(a),a.setAttribute("data-element-id",r),a.disabled=n.readOnly,this._setRequired(a,this.data.required),a.type="checkbox",a.name=n.fieldName,i&&a.setAttribute("checked",!0),a.setAttribute("exportValue",n.exportValue),a.tabIndex=0,a.addEventListener("change",o=>{const{name:l,checked:c}=o.target;for(const d of this._getElementsByName(l,r)){const u=c&&d.exportValue===n.exportValue;d.domElement&&(d.domElement.checked=u),e.setValue(d.id,{value:u})}e.setValue(r,{value:c})}),a.addEventListener("resetform",o=>{const l=n.defaultFieldValue||"Off";o.target.checked=l===n.exportValue}),this.enableScripting&&this.hasJSActions&&(a.addEventListener("updatefromsandbox",o=>{const l={value(c){c.target.checked=c.detail.value!=="Off",e.setValue(r,{value:c.target.checked})}};this._dispatchEventFromSandbox(l,o)}),this._setEventListeners(a,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],o=>o.target.checked)),this._setBackgroundColor(a),this._setDefaultPropertiesFromJS(a),this.container.append(a),this.container}}class VZ extends Nv{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const e=this.annotationStorage,n=this.data,r=n.id;let i=e.getValue(r,{value:n.fieldValue===n.buttonValue}).value;if(typeof i=="string"&&(i=i!==n.buttonValue,e.setValue(r,{value:i})),i)for(const o of this._getElementsByName(n.fieldName,r))e.setValue(o.id,{value:!1});const a=document.createElement("input");if(ov.add(a),a.setAttribute("data-element-id",r),a.disabled=n.readOnly,this._setRequired(a,this.data.required),a.type="radio",a.name=n.fieldName,i&&a.setAttribute("checked",!0),a.tabIndex=0,a.addEventListener("change",o=>{const{name:l,checked:c}=o.target;for(const d of this._getElementsByName(l,r))e.setValue(d.id,{value:!1});e.setValue(r,{value:c})}),a.addEventListener("resetform",o=>{const l=n.defaultFieldValue;o.target.checked=l!=null&&l===n.buttonValue}),this.enableScripting&&this.hasJSActions){const o=n.buttonValue;a.addEventListener("updatefromsandbox",l=>{const c={value:d=>{const u=o===d.detail.value;for(const h of this._getElementsByName(d.target.name)){const f=u&&h.id===r;h.domElement&&(h.domElement.checked=f),e.setValue(h.id,{value:f})}}};this._dispatchEventFromSandbox(c,l)}),this._setEventListeners(a,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],l=>l.target.checked)}return this._setBackgroundColor(a),this._setDefaultPropertiesFromJS(a),this.container.append(a),this.container}}class zhe extends BZ{constructor(e){super(e,{ignoreBorder:e.data.hasAppearance})}render(){const e=super.render();e.classList.add("buttonWidgetAnnotation","pushButton");const n=e.lastChild;return this.enableScripting&&this.hasJSActions&&n&&(this._setDefaultPropertiesFromJS(n),n.addEventListener("updatefromsandbox",r=>{this._dispatchEventFromSandbox({},r)})),e}}class Uhe extends Nv{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const e=this.annotationStorage,n=this.data.id,r=e.getValue(n,{value:this.data.fieldValue}),i=document.createElement("select");ov.add(i),i.setAttribute("data-element-id",n),i.disabled=this.data.readOnly,this._setRequired(i,this.data.required),i.name=this.data.fieldName,i.tabIndex=0;let a=this.data.combo&&this.data.options.length>0;this.data.combo||(i.size=this.data.options.length,this.data.multiSelect&&(i.multiple=!0)),i.addEventListener("resetform",u=>{const h=this.data.defaultFieldValue;for(const f of i.options)f.selected=f.value===h});for(const u of this.data.options){const h=document.createElement("option");h.textContent=u.displayValue,h.value=u.exportValue,r.value.includes(u.exportValue)&&(h.setAttribute("selected",!0),a=!1),i.append(h)}let o=null;if(a){const u=document.createElement("option");u.value=" ",u.setAttribute("hidden",!0),u.setAttribute("selected",!0),i.prepend(u),o=()=>{u.remove(),i.removeEventListener("input",o),o=null},i.addEventListener("input",o)}const l=u=>{const h=u?"value":"textContent",{options:f,multiple:m}=i;return m?Array.prototype.filter.call(f,v=>v.selected).map(v=>v[h]):f.selectedIndex===-1?null:f[f.selectedIndex][h]};let c=l(!1);const d=u=>{const h=u.target.options;return Array.prototype.map.call(h,f=>({displayValue:f.textContent,exportValue:f.value}))};return this.enableScripting&&this.hasJSActions?(i.addEventListener("updatefromsandbox",u=>{const h={value(f){o==null||o();const m=f.detail.value,v=new Set(Array.isArray(m)?m:[m]);for(const p of i.options)p.selected=v.has(p.value);e.setValue(n,{value:l(!0)}),c=l(!1)},multipleSelection(f){i.multiple=!0},remove(f){const m=i.options,v=f.detail.remove;m[v].selected=!1,i.remove(v),m.length>0&&Array.prototype.findIndex.call(m,g=>g.selected)===-1&&(m[0].selected=!0),e.setValue(n,{value:l(!0),items:d(f)}),c=l(!1)},clear(f){for(;i.length!==0;)i.remove(0);e.setValue(n,{value:null,items:[]}),c=l(!1)},insert(f){const{index:m,displayValue:v,exportValue:p}=f.detail.insert,g=i.children[m],x=document.createElement("option");x.textContent=v,x.value=p,g?g.before(x):i.append(x),e.setValue(n,{value:l(!0),items:d(f)}),c=l(!1)},items(f){const{items:m}=f.detail;for(;i.length!==0;)i.remove(0);for(const v of m){const{displayValue:p,exportValue:g}=v,x=document.createElement("option");x.textContent=p,x.value=g,i.append(x)}i.options.length>0&&(i.options[0].selected=!0),e.setValue(n,{value:l(!0),items:d(f)}),c=l(!1)},indices(f){const m=new Set(f.detail.indices);for(const v of f.target.options)v.selected=m.has(v.index);e.setValue(n,{value:l(!0)}),c=l(!1)},editable(f){f.target.disabled=!f.detail.editable}};this._dispatchEventFromSandbox(h,u)}),i.addEventListener("input",u=>{var m;const h=l(!0),f=l(!1);e.setValue(n,{value:h}),u.preventDefault(),(m=this.linkService.eventBus)==null||m.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n,name:"Keystroke",value:c,change:f,changeEx:h,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(i,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],u=>u.target.value)):i.addEventListener("input",function(u){e.setValue(n,{value:l(!0)})}),this.data.combo&&this._setTextStyle(i),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class sR extends bs{constructor(e){const{data:n,elements:r}=e;super(e,{isRenderable:bs._hasPopupData(n)}),this.elements=r,this.popup=null}render(){const{container:e}=this;e.classList.add("popupAnnotation"),e.role="comment";const n=this.popup=new Vhe({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),r=[];for(const i of this.elements)i.popup=n,i.container.ariaHasPopup="dialog",r.push(i.data.id),i.addHighlightArea();return this.container.setAttribute("aria-controls",r.map(i=>`${u$}${i}`).join(",")),this.container}}var oy,OT,LT,ly,cy,Jr,Su,mg,JN,eS,dy,Au,Yl,Cu,tS,Eu,nS,pg,gg,uy,lE,rS,iR,RT,qZ,MT,HZ,FT,WZ,$T,GZ,hy,cE,fy,dE,sS,aR;class Vhe{constructor({container:e,color:n,elements:r,titleObj:i,modificationDate:a,contentsObj:o,richText:l,parent:c,rect:d,parentRect:u,open:h}){G(this,uy);G(this,rS);G(this,RT);G(this,MT);G(this,FT);G(this,$T);G(this,hy);G(this,fy);G(this,sS);G(this,oy,se(this,FT,WZ).bind(this));G(this,OT,se(this,sS,aR).bind(this));G(this,LT,se(this,fy,dE).bind(this));G(this,ly,se(this,hy,cE).bind(this));G(this,cy,null);G(this,Jr,null);G(this,Su,null);G(this,mg,null);G(this,JN,null);G(this,eS,null);G(this,dy,null);G(this,Au,!1);G(this,Yl,null);G(this,Cu,null);G(this,tS,null);G(this,Eu,null);G(this,nS,null);G(this,pg,null);G(this,gg,!1);var f;Z(this,Jr,e),Z(this,nS,i),Z(this,Su,o),Z(this,Eu,l),Z(this,eS,c),Z(this,cy,n),Z(this,tS,d),Z(this,dy,u),Z(this,JN,r),Z(this,mg,YI.toDateObject(a)),this.trigger=r.flatMap(m=>m.getElementsToTriggerPopup());for(const m of this.trigger)m.addEventListener("click",S(this,ly)),m.addEventListener("mouseenter",S(this,LT)),m.addEventListener("mouseleave",S(this,OT)),m.classList.add("popupTriggerArea");for(const m of r)(f=m.container)==null||f.addEventListener("keydown",S(this,oy));S(this,Jr).hidden=!0,h&&se(this,hy,cE).call(this)}render(){if(S(this,Yl))return;const e=Z(this,Yl,document.createElement("div"));if(e.className="popup",S(this,cy)){const a=e.style.outlineColor=kt.makeHexColor(...S(this,cy));e.style.backgroundColor=`color-mix(in srgb, ${a} 30%, white)`}const n=document.createElement("span");n.className="header";const r=document.createElement("h1");if(n.append(r),{dir:r.dir,str:r.textContent}=S(this,nS),e.append(n),S(this,mg)){const a=document.createElement("time");a.classList.add("popupDate"),a.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),a.setAttribute("data-l10n-args",JSON.stringify({dateObj:S(this,mg).valueOf()})),a.dateTime=S(this,mg).toISOString(),n.append(a)}const i=S(this,uy,lE);if(i)v$.render({xfaHtml:i,intent:"richText",div:e}),e.lastChild.classList.add("richText","popupContent");else{const a=this._formatContents(S(this,Su));e.append(a)}S(this,Jr).append(e)}_formatContents({str:e,dir:n}){const r=document.createElement("p");r.classList.add("popupContent"),r.dir=n;const i=e.split(/(?:\r\n?|\n)/);for(let a=0,o=i.length;a<o;++a){const l=i[a];r.append(document.createTextNode(l)),a<o-1&&r.append(document.createElement("br"))}return r}updateEdited({rect:e,popupContent:n}){var r;S(this,pg)||Z(this,pg,{contentsObj:S(this,Su),richText:S(this,Eu)}),e&&Z(this,Cu,null),n&&(Z(this,Eu,se(this,MT,HZ).call(this,n)),Z(this,Su,null)),(r=S(this,Yl))==null||r.remove(),Z(this,Yl,null)}resetEdited(){var e;S(this,pg)&&({contentsObj:na(this,Su)._,richText:na(this,Eu)._}=S(this,pg),Z(this,pg,null),(e=S(this,Yl))==null||e.remove(),Z(this,Yl,null),Z(this,Cu,null))}forceHide(){Z(this,gg,this.isVisible),S(this,gg)&&(S(this,Jr).hidden=!0)}maybeShow(){S(this,gg)&&(S(this,Yl)||se(this,fy,dE).call(this),Z(this,gg,!1),S(this,Jr).hidden=!1)}get isVisible(){return S(this,Jr).hidden===!1}}oy=new WeakMap,OT=new WeakMap,LT=new WeakMap,ly=new WeakMap,cy=new WeakMap,Jr=new WeakMap,Su=new WeakMap,mg=new WeakMap,JN=new WeakMap,eS=new WeakMap,dy=new WeakMap,Au=new WeakMap,Yl=new WeakMap,Cu=new WeakMap,tS=new WeakMap,Eu=new WeakMap,nS=new WeakMap,pg=new WeakMap,gg=new WeakMap,uy=new WeakSet,lE=function(){const e=S(this,Eu),n=S(this,Su);return e!=null&&e.str&&(!(n!=null&&n.str)||n.str===e.str)&&S(this,Eu).html||null},rS=new WeakSet,iR=function(){var e,n,r;return((r=(n=(e=S(this,uy,lE))==null?void 0:e.attributes)==null?void 0:n.style)==null?void 0:r.fontSize)||0},RT=new WeakSet,qZ=function(){var e,n,r;return((r=(n=(e=S(this,uy,lE))==null?void 0:e.attributes)==null?void 0:n.style)==null?void 0:r.color)||null},MT=new WeakSet,HZ=function(e){const n=[],r={str:e,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:n}]}},i={style:{color:S(this,RT,qZ),fontSize:S(this,rS,iR)?`calc(${S(this,rS,iR)}px * var(--total-scale-factor))`:""}};for(const a of e.split(`
`))n.push({name:"span",value:a,attributes:i});return r},FT=new WeakSet,WZ=function(e){e.altKey||e.shiftKey||e.ctrlKey||e.metaKey||(e.key==="Enter"||e.key==="Escape"&&S(this,Au))&&se(this,hy,cE).call(this)},$T=new WeakSet,GZ=function(){if(S(this,Cu)!==null)return;const{page:{view:e},viewport:{rawDims:{pageWidth:n,pageHeight:r,pageX:i,pageY:a}}}=S(this,eS);let o=!!S(this,dy),l=o?S(this,dy):S(this,tS);for(const v of S(this,JN))if(!l||kt.intersect(v.data.rect,l)!==null){l=v.data.rect,o=!0;break}const c=kt.normalizeRect([l[0],e[3]-l[1]+e[1],l[2],e[3]-l[3]+e[1]]),d=5,u=o?l[2]-l[0]+d:0,h=c[0]+u,f=c[1];Z(this,Cu,[100*(h-i)/n,100*(f-a)/r]);const{style:m}=S(this,Jr);m.left=`${S(this,Cu)[0]}%`,m.top=`${S(this,Cu)[1]}%`},hy=new WeakSet,cE=function(){Z(this,Au,!S(this,Au)),S(this,Au)?(se(this,fy,dE).call(this),S(this,Jr).addEventListener("click",S(this,ly)),S(this,Jr).addEventListener("keydown",S(this,oy))):(se(this,sS,aR).call(this),S(this,Jr).removeEventListener("click",S(this,ly)),S(this,Jr).removeEventListener("keydown",S(this,oy)))},fy=new WeakSet,dE=function(){S(this,Yl)||this.render(),this.isVisible?S(this,Au)&&S(this,Jr).classList.add("focused"):(se(this,$T,GZ).call(this),S(this,Jr).hidden=!1,S(this,Jr).style.zIndex=parseInt(S(this,Jr).style.zIndex)+1e3)},sS=new WeakSet,aR=function(){S(this,Jr).classList.remove("focused"),!(S(this,Au)||!this.isVisible)&&(S(this,Jr).hidden=!0,S(this,Jr).style.zIndex=parseInt(S(this,Jr).style.zIndex)-1e3)};class KZ extends bs{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.textContent=e.data.textContent,this.textPosition=e.data.textPosition,this.annotationEditorType=en.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const e=document.createElement("div");e.classList.add("annotationTextContent"),e.setAttribute("role","comment");for(const n of this.textContent){const r=document.createElement("span");r.textContent=n,e.append(r)}this.container.append(e)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var iS;class qhe extends bs{constructor(n){super(n,{isRenderable:!0,ignoreBorder:!0});G(this,iS,null)}render(){this.container.classList.add("lineAnnotation");const{data:n,width:r,height:i}=this,a=this.svgFactory.create(r,i,!0),o=Z(this,iS,this.svgFactory.createElement("svg:line"));return o.setAttribute("x1",n.rect[2]-n.lineCoordinates[0]),o.setAttribute("y1",n.rect[3]-n.lineCoordinates[1]),o.setAttribute("x2",n.rect[2]-n.lineCoordinates[2]),o.setAttribute("y2",n.rect[3]-n.lineCoordinates[3]),o.setAttribute("stroke-width",n.borderStyle.width||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),a.append(o),this.container.append(a),!n.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return S(this,iS)}addHighlightArea(){this.container.classList.add("highlightArea")}}iS=new WeakMap;var aS;class Hhe extends bs{constructor(n){super(n,{isRenderable:!0,ignoreBorder:!0});G(this,aS,null)}render(){this.container.classList.add("squareAnnotation");const{data:n,width:r,height:i}=this,a=this.svgFactory.create(r,i,!0),o=n.borderStyle.width,l=Z(this,aS,this.svgFactory.createElement("svg:rect"));return l.setAttribute("x",o/2),l.setAttribute("y",o/2),l.setAttribute("width",r-o),l.setAttribute("height",i-o),l.setAttribute("stroke-width",o||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","transparent"),a.append(l),this.container.append(a),!n.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return S(this,aS)}addHighlightArea(){this.container.classList.add("highlightArea")}}aS=new WeakMap;var oS;class Whe extends bs{constructor(n){super(n,{isRenderable:!0,ignoreBorder:!0});G(this,oS,null)}render(){this.container.classList.add("circleAnnotation");const{data:n,width:r,height:i}=this,a=this.svgFactory.create(r,i,!0),o=n.borderStyle.width,l=Z(this,oS,this.svgFactory.createElement("svg:ellipse"));return l.setAttribute("cx",r/2),l.setAttribute("cy",i/2),l.setAttribute("rx",r/2-o/2),l.setAttribute("ry",i/2-o/2),l.setAttribute("stroke-width",o||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","transparent"),a.append(l),this.container.append(a),!n.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return S(this,oS)}addHighlightArea(){this.container.classList.add("highlightArea")}}oS=new WeakMap;var lS;class YZ extends bs{constructor(n){super(n,{isRenderable:!0,ignoreBorder:!0});G(this,lS,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:n,vertices:r,borderStyle:i,popupRef:a},width:o,height:l}=this;if(!r)return this.container;const c=this.svgFactory.create(o,l,!0);let d=[];for(let h=0,f=r.length;h<f;h+=2){const m=r[h]-n[0],v=n[3]-r[h+1];d.push(`${m},${v}`)}d=d.join(" ");const u=Z(this,lS,this.svgFactory.createElement(this.svgElementName));return u.setAttribute("points",d),u.setAttribute("stroke-width",i.width||1),u.setAttribute("stroke","transparent"),u.setAttribute("fill","transparent"),c.append(u),this.container.append(c),!a&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return S(this,lS)}addHighlightArea(){this.container.classList.add("highlightArea")}}lS=new WeakMap;class Ghe extends YZ{constructor(e){super(e),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class Khe extends bs{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var cS,vg,dS,oR;class x$ extends bs{constructor(n){super(n,{isRenderable:!0,ignoreBorder:!0});G(this,dS);G(this,cS,null);G(this,vg,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?en.HIGHLIGHT:en.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:n,rotation:r,inkLists:i,borderStyle:a,popupRef:o}}=this,{transform:l,width:c,height:d}=se(this,dS,oR).call(this,r,n),u=this.svgFactory.create(c,d,!0),h=Z(this,cS,this.svgFactory.createElement("svg:g"));u.append(h),h.setAttribute("stroke-width",a.width||1),h.setAttribute("stroke-linecap","round"),h.setAttribute("stroke-linejoin","round"),h.setAttribute("stroke-miterlimit",10),h.setAttribute("stroke","transparent"),h.setAttribute("fill","transparent"),h.setAttribute("transform",l);for(let f=0,m=i.length;f<m;f++){const v=this.svgFactory.createElement(this.svgElementName);S(this,vg).push(v),v.setAttribute("points",i[f].join(",")),h.append(v)}return!o&&this.hasPopupData&&this._createPopup(),this.container.append(u),this._editOnDoubleClick(),this.container}updateEdited(n){super.updateEdited(n);const{thickness:r,points:i,rect:a}=n,o=S(this,cS);if(r>=0&&o.setAttribute("stroke-width",r||1),i)for(let l=0,c=S(this,vg).length;l<c;l++)S(this,vg)[l].setAttribute("points",i[l].join(","));if(a){const{transform:l,width:c,height:d}=se(this,dS,oR).call(this,this.data.rotation,a);o.parentElement.setAttribute("viewBox",`0 0 ${c} ${d}`),o.setAttribute("transform",l)}}getElementsToTriggerPopup(){return S(this,vg)}addHighlightArea(){this.container.classList.add("highlightArea")}}cS=new WeakMap,vg=new WeakMap,dS=new WeakSet,oR=function(n,r){switch(n){case 90:return{transform:`rotate(90) translate(${-r[0]},${r[1]}) scale(1,-1)`,width:r[3]-r[1],height:r[2]-r[0]};case 180:return{transform:`rotate(180) translate(${-r[2]},${r[1]}) scale(1,-1)`,width:r[2]-r[0],height:r[3]-r[1]};case 270:return{transform:`rotate(270) translate(${-r[2]},${r[3]}) scale(1,-1)`,width:r[3]-r[1],height:r[2]-r[0]};default:return{transform:`translate(${-r[0]},${r[3]}) scale(1,-1)`,width:r[2]-r[0],height:r[3]-r[1]}}};class XZ extends bs{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=en.HIGHLIGHT}render(){const{data:{overlaidText:e,popupRef:n}}=this;if(!n&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),e){const r=document.createElement("mark");r.classList.add("overlaidText"),r.textContent=e,this.container.append(r)}return this.container}}class Yhe extends bs{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:n}}=this;if(!n&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),e){const r=document.createElement("u");r.classList.add("overlaidText"),r.textContent=e,this.container.append(r)}return this.container}}class Xhe extends bs{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:n}}=this;if(!n&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),e){const r=document.createElement("u");r.classList.add("overlaidText"),r.textContent=e,this.container.append(r)}return this.container}}class Zhe extends bs{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:n}}=this;if(!n&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),e){const r=document.createElement("s");r.classList.add("overlaidText"),r.textContent=e,this.container.append(r)}return this.container}}class ZZ extends bs{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=en.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var uS,hS,lR;class Qhe extends bs{constructor(n){var i;super(n,{isRenderable:!0});G(this,hS);G(this,uS,null);const{file:r}=this.data;this.filename=r.filename,this.content=r.content,(i=this.linkService.eventBus)==null||i.dispatch("fileattachmentannotation",{source:this,...r})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:n,data:r}=this;let i;r.hasAppearance||r.fillAlpha===0?i=document.createElement("div"):(i=document.createElement("img"),i.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(r.name)?"paperclip":"pushpin"}.svg`,r.fillAlpha&&r.fillAlpha<1&&(i.style=`filter: opacity(${Math.round(r.fillAlpha*100)}%);`)),i.addEventListener("dblclick",se(this,hS,lR).bind(this)),Z(this,uS,i);const{isMac:a}=ai.platform;return n.addEventListener("keydown",o=>{o.key==="Enter"&&(a?o.metaKey:o.ctrlKey)&&se(this,hS,lR).call(this)}),!r.popupRef&&this.hasPopupData?this._createPopup():i.classList.add("popupTriggerArea"),n.append(i),n}getElementsToTriggerPopup(){return S(this,uS)}addHighlightArea(){this.container.classList.add("highlightArea")}}uS=new WeakMap,hS=new WeakSet,lR=function(){var n;(n=this.downloadManager)==null||n.openOrDownloadData(this.content,this.filename)};var fS,xg,jf,mS,pS,cR,gS,dR;const X7=class X7{constructor({div:e,accessibilityManager:n,annotationCanvasMap:r,annotationEditorUIManager:i,page:a,viewport:o,structTreeLayer:l}){G(this,pS);G(this,gS);G(this,fS,null);G(this,xg,null);G(this,jf,new Map);G(this,mS,null);this.div=e,Z(this,fS,n),Z(this,xg,r),Z(this,mS,l||null),this.page=a,this.viewport=o,this.zIndex=0,this._annotationEditorUIManager=i}hasEditableAnnotations(){return S(this,jf).size>0}async render(e){var o;const{annotations:n}=e,r=this.div;hm(r,this.viewport);const i=new Map,a={data:null,layer:r,linkService:e.linkService,downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderForms:e.renderForms!==!1,svgFactory:new Bj,annotationStorage:e.annotationStorage||new f$,enableScripting:e.enableScripting===!0,hasJSActions:e.hasJSActions,fieldObjects:e.fieldObjects,parent:this,elements:null};for(const l of n){if(l.noHTML)continue;const c=l.annotationType===ls.POPUP;if(c){const h=i.get(l.id);if(!h)continue;a.elements=h}else if(l.rect[2]===l.rect[0]||l.rect[3]===l.rect[1])continue;a.data=l;const d=tz.create(a);if(!d.isRenderable)continue;if(!c&&l.popupRef){const h=i.get(l.popupRef);h?h.push(d):i.set(l.popupRef,[d])}const u=d.render();l.hidden&&(u.style.visibility="hidden"),await se(this,pS,cR).call(this,u,l.id,a.elements),d._isEditable&&(S(this,jf).set(d.data.id,d),(o=this._annotationEditorUIManager)==null||o.renderAnnotationElement(d))}se(this,gS,dR).call(this)}async addLinkAnnotations(e,n){const r={data:null,layer:this.div,linkService:n,svgFactory:new Bj,parent:this};for(const i of e){i.borderStyle||(i.borderStyle=X7._defaultBorderStyle),r.data=i;const a=tz.create(r);if(!a.isRenderable)continue;const o=a.render();await se(this,pS,cR).call(this,o,i.id,null)}}update({viewport:e}){const n=this.div;this.viewport=e,hm(n,{rotation:e.rotation}),se(this,gS,dR).call(this),n.hidden=!1}getEditableAnnotations(){return Array.from(S(this,jf).values())}getEditableAnnotation(e){return S(this,jf).get(e)}static get _defaultBorderStyle(){return xn(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:Cx.SOLID,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}};fS=new WeakMap,xg=new WeakMap,jf=new WeakMap,mS=new WeakMap,pS=new WeakSet,cR=async function(e,n,r){var l,c;const i=e.firstChild||e,a=i.id=`${u$}${n}`,o=await((l=S(this,mS))==null?void 0:l.getAriaAttributes(a));if(o)for(const[d,u]of o)i.setAttribute(d,u);r?r.at(-1).container.after(e):(this.div.append(e),(c=S(this,fS))==null||c.moveElementInDOM(this.div,e,i,!1))},gS=new WeakSet,dR=function(){var n;if(!S(this,xg))return;const e=this.div;for(const[r,i]of S(this,xg)){const a=e.querySelector(`[data-annotation-id="${r}"]`);if(!a)continue;i.className="annotationContent";const{firstChild:o}=a;o?o.nodeName==="CANVAS"?o.replaceWith(i):o.classList.contains("annotationContent")?o.after(i):o.before(i):a.append(i);const l=S(this,jf).get(r);l&&(l._hasNoCanvas?((n=this._annotationEditorUIManager)==null||n.setMissingCanvas(r,a.id,i),l._hasNoCanvas=!1):l.canvas=i)}S(this,xg).clear()};let lP=X7;const J5=/\r\n?|\n/g;var Xl,lo,vS,yg,co,BT,QZ,zT,JZ,UT,eQ,my,uE,py,hE,gy,fE,VT,tQ,xS,hR,qT,nQ;const lr=class lr extends wr{constructor(n){super({...n,name:"freeTextEditor"});G(this,BT);G(this,zT);G(this,UT);G(this,my);G(this,gy);G(this,VT);G(this,qT);G(this,Xl,void 0);G(this,lo,"");G(this,vS,`${this.id}-editor`);G(this,yg,null);G(this,co,void 0);Z(this,Xl,n.color||lr._defaultColor||wr._defaultLineColor),Z(this,co,n.fontSize||lr._defaultFontSize),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-freetext-added-alert")}static get _keyboardManager(){const n=lr.prototype,r=o=>o.isEmpty(),i=fm.TRANSLATE_SMALL,a=fm.TRANSLATE_BIG;return xn(this,"_keyboardManager",new uA([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],n.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],n.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],n._translateEmpty,{args:[-i,0],checker:r}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],n._translateEmpty,{args:[-a,0],checker:r}],[["ArrowRight","mac+ArrowRight"],n._translateEmpty,{args:[i,0],checker:r}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],n._translateEmpty,{args:[a,0],checker:r}],[["ArrowUp","mac+ArrowUp"],n._translateEmpty,{args:[0,-i],checker:r}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],n._translateEmpty,{args:[0,-a],checker:r}],[["ArrowDown","mac+ArrowDown"],n._translateEmpty,{args:[0,i],checker:r}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],n._translateEmpty,{args:[0,a],checker:r}]]))}static initialize(n,r){wr.initialize(n,r);const i=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(i.getPropertyValue("--freetext-padding"))}static updateDefaultParams(n,r){switch(n){case Nn.FREETEXT_SIZE:lr._defaultFontSize=r;break;case Nn.FREETEXT_COLOR:lr._defaultColor=r;break}}updateParams(n,r){switch(n){case Nn.FREETEXT_SIZE:se(this,BT,QZ).call(this,r);break;case Nn.FREETEXT_COLOR:se(this,zT,JZ).call(this,r);break}}static get defaultPropertiesToUpdate(){return[[Nn.FREETEXT_SIZE,lr._defaultFontSize],[Nn.FREETEXT_COLOR,lr._defaultColor||wr._defaultLineColor]]}get propertiesToUpdate(){return[[Nn.FREETEXT_SIZE,S(this,co)],[Nn.FREETEXT_COLOR,S(this,Xl)]]}_translateEmpty(n,r){this._uiManager.translateSelectedEditors(n,r,!0)}getInitialTranslation(){const n=this.parentScale;return[-lr._internalPadding*n,-(lr._internalPadding+S(this,co))*n]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(!super.enableEditMode())return!1;this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),Z(this,yg,new AbortController);const n=this._uiManager.combinedSignal(S(this,yg));return this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:n}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:n}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:n}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:n}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:n}),!0}disableEditMode(){var n;return super.disableEditMode()?(this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",S(this,vS)),this._isDraggable=!0,(n=S(this,yg))==null||n.abort(),Z(this,yg,null),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"),!0):!1}focusin(n){this._focusEventsAllowed&&(super.focusin(n),n.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(n){var r;this.width||(this.enableEditMode(),n&&this.editorDiv.focus(),(r=this._initialOptions)!=null&&r.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const n=S(this,lo),r=Z(this,lo,se(this,UT,eQ).call(this).trimEnd());if(n===r)return;const i=a=>{if(Z(this,lo,a),!a){this.remove();return}se(this,gy,fE).call(this),this._uiManager.rebuild(this),se(this,my,uE).call(this)};this.addCommands({cmd:()=>{i(r)},undo:()=>{i(n)},mustExec:!1}),se(this,my,uE).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}keydown(n){n.target===this.div&&n.key==="Enter"&&(this.enterInEditMode(),n.preventDefault())}editorDivKeydown(n){lr._keyboardManager.exec(this,n)}editorDivFocus(n){this.isEditing=!0}editorDivBlur(n){this.isEditing=!1}editorDivInput(n){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}get canChangeContent(){return!0}render(){if(this.div)return this.div;let n,r;(this._isCopy||this.annotationElementId)&&(n=this.x,r=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",S(this,vS)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:i}=this.editorDiv;if(i.fontSize=`calc(${S(this,co)}px * var(--total-scale-factor))`,i.color=S(this,Xl),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){const[a,o]=this.parentDimensions;if(this.annotationElementId){const{position:l}=this._initialData;let[c,d]=this.getInitialTranslation();[c,d]=this.pageTranslationToScreen(c,d);const[u,h]=this.pageDimensions,[f,m]=this.pageTranslation;let v,p;switch(this.rotation){case 0:v=n+(l[0]-f)/u,p=r+this.height-(l[1]-m)/h;break;case 90:v=n+(l[0]-f)/u,p=r-(l[1]-m)/h,[c,d]=[d,-c];break;case 180:v=n-this.width+(l[0]-f)/u,p=r-(l[1]-m)/h,[c,d]=[-c,-d];break;case 270:v=n+(l[0]-f-this.height*h)/u,p=r+(l[1]-m-this.width*u)/h,[c,d]=[-d,c];break}this.setAt(v*a,p*o,c,d)}else this._moveAfterPaste(n,r);se(this,gy,fE).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(n){var v,p,g;const r=n.clipboardData||window.clipboardData,{types:i}=r;if(i.length===1&&i[0]==="text/plain")return;n.preventDefault();const a=se(v=lr,xS,hR).call(v,r.getData("text")||"").replaceAll(J5,`
`);if(!a)return;const o=window.getSelection();if(!o.rangeCount)return;this.editorDiv.normalize(),o.deleteFromDocument();const l=o.getRangeAt(0);if(!a.includes(`
`)){l.insertNode(document.createTextNode(a)),this.editorDiv.normalize(),o.collapseToStart();return}const{startContainer:c,startOffset:d}=l,u=[],h=[];if(c.nodeType===Node.TEXT_NODE){const x=c.parentElement;if(h.push(c.nodeValue.slice(d).replaceAll(J5,"")),x!==this.editorDiv){let y=u;for(const b of this.editorDiv.childNodes){if(b===x){y=h;continue}y.push(se(p=lr,py,hE).call(p,b))}}u.push(c.nodeValue.slice(0,d).replaceAll(J5,""))}else if(c===this.editorDiv){let x=u,y=0;for(const b of this.editorDiv.childNodes)y++===d&&(x=h),x.push(se(g=lr,py,hE).call(g,b))}Z(this,lo,`${u.join(`
`)}${a}${h.join(`
`)}`),se(this,gy,fE).call(this);const f=new Range;let m=Math.sumPrecise(u.map(x=>x.length));for(const{firstChild:x}of this.editorDiv.childNodes)if(x.nodeType===Node.TEXT_NODE){const y=x.nodeValue.length;if(m<=y){f.setStart(x,m),f.setEnd(x,m);break}m-=y}o.removeAllRanges(),o.addRange(f)}get contentDiv(){return this.editorDiv}static async deserialize(n,r,i){var l;let a=null;if(n instanceof KZ){const{data:{defaultAppearanceData:{fontSize:c,fontColor:d},rect:u,rotation:h,id:f,popupRef:m},textContent:v,textPosition:p,parent:{page:{pageNumber:g}}}=n;if(!v||v.length===0)return null;a=n={annotationType:en.FREETEXT,color:Array.from(d),fontSize:c,value:v.join(`
`),position:p,pageIndex:g-1,rect:u.slice(0),rotation:h,annotationElementId:f,id:f,deleted:!1,popupRef:m}}const o=await super.deserialize(n,r,i);return Z(o,co,n.fontSize),Z(o,Xl,kt.makeHexColor(...n.color)),Z(o,lo,se(l=lr,xS,hR).call(l,n.value)),o._initialData=a,o}serialize(n=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const r=lr._internalPadding*this.parentScale,i=this.getRect(r,r),a=wr._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:S(this,Xl)),o={annotationType:en.FREETEXT,color:a,fontSize:S(this,co),value:se(this,VT,tQ).call(this),pageIndex:this.pageIndex,rect:i,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return n?(o.isCopy=!0,o):this.annotationElementId&&!se(this,qT,nQ).call(this,o)?null:(o.id=this.annotationElementId,o)}renderAnnotationElement(n){const r=super.renderAnnotationElement(n);if(this.deleted)return r;const{style:i}=r;i.fontSize=`calc(${S(this,co)}px * var(--total-scale-factor))`,i.color=S(this,Xl),r.replaceChildren();for(const o of S(this,lo).split(`
`)){const l=document.createElement("div");l.append(o?document.createTextNode(o):document.createElement("br")),r.append(l)}const a=lr._internalPadding*this.parentScale;return n.updateEdited({rect:this.getRect(a,a),popupContent:S(this,lo)}),r}resetAnnotationElement(n){super.resetAnnotationElement(n),n.resetEdited()}};Xl=new WeakMap,lo=new WeakMap,vS=new WeakMap,yg=new WeakMap,co=new WeakMap,BT=new WeakSet,QZ=function(n){const r=a=>{this.editorDiv.style.fontSize=`calc(${a}px * var(--total-scale-factor))`,this.translate(0,-(a-S(this,co))*this.parentScale),Z(this,co,a),se(this,my,uE).call(this)},i=S(this,co);this.addCommands({cmd:r.bind(this,n),undo:r.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Nn.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},zT=new WeakSet,JZ=function(n){const r=a=>{Z(this,Xl,this.editorDiv.style.color=a)},i=S(this,Xl);this.addCommands({cmd:r.bind(this,n),undo:r.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Nn.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},UT=new WeakSet,eQ=function(){var i;const n=[];this.editorDiv.normalize();let r=null;for(const a of this.editorDiv.childNodes)(r==null?void 0:r.nodeType)===Node.TEXT_NODE&&a.nodeName==="BR"||(n.push(se(i=lr,py,hE).call(i,a)),r=a);return n.join(`
`)},my=new WeakSet,uE=function(){const[n,r]=this.parentDimensions;let i;if(this.isAttachedToDOM)i=this.div.getBoundingClientRect();else{const{currentLayer:a,div:o}=this,l=o.style.display,c=o.classList.contains("hidden");o.classList.remove("hidden"),o.style.display="hidden",a.div.append(this.div),i=o.getBoundingClientRect(),o.remove(),o.style.display=l,o.classList.toggle("hidden",c)}this.rotation%180===this.parentRotation%180?(this.width=i.width/n,this.height=i.height/r):(this.width=i.height/n,this.height=i.width/r),this.fixAndSetPosition()},py=new WeakSet,hE=function(n){return(n.nodeType===Node.TEXT_NODE?n.nodeValue:n.innerText).replaceAll(J5,"")},gy=new WeakSet,fE=function(){if(this.editorDiv.replaceChildren(),!!S(this,lo))for(const n of S(this,lo).split(`
`)){const r=document.createElement("div");r.append(n?document.createTextNode(n):document.createElement("br")),this.editorDiv.append(r)}},VT=new WeakSet,tQ=function(){return S(this,lo).replaceAll(""," ")},xS=new WeakSet,hR=function(n){return n.replaceAll(" ","")},qT=new WeakSet,nQ=function(n){const{value:r,fontSize:i,color:a,pageIndex:o}=this._initialData;return this._hasBeenMoved||n.value!==r||n.fontSize!==i||n.color.some((l,c)=>l!==a[c])||n.pageIndex!==o},G(lr,py),G(lr,xS),ut(lr,"_freeTextDefaultContent",""),ut(lr,"_internalPadding",0),ut(lr,"_defaultColor",null),ut(lr,"_defaultFontSize",10),ut(lr,"_type","freetext"),ut(lr,"_editorType",en.FREETEXT);let uR=lr;class St{toSVGPath(){ir("Abstract method `toSVGPath` must be implemented.")}get box(){ir("Abstract getter `box` must be implemented.")}serialize(e,n){ir("Abstract method `serialize` must be implemented.")}static _rescale(e,n,r,i,a,o){o||(o=new Float32Array(e.length));for(let l=0,c=e.length;l<c;l+=2)o[l]=n+e[l]*i,o[l+1]=r+e[l+1]*a;return o}static _rescaleAndSwap(e,n,r,i,a,o){o||(o=new Float32Array(e.length));for(let l=0,c=e.length;l<c;l+=2)o[l]=n+e[l+1]*i,o[l+1]=r+e[l]*a;return o}static _translate(e,n,r,i){i||(i=new Float32Array(e.length));for(let a=0,o=e.length;a<o;a+=2)i[a]=n+e[a],i[a+1]=r+e[a+1];return i}static svgRound(e){return Math.round(e*1e4)}static _normalizePoint(e,n,r,i,a){switch(a){case 90:return[1-n/r,e/i];case 180:return[1-e/r,1-n/i];case 270:return[n/r,1-e/i];default:return[e/r,n/i]}}static _normalizePagePoint(e,n,r){switch(r){case 90:return[1-n,e];case 180:return[1-e,1-n];case 270:return[n,1-e];default:return[e,n]}}static createBezierPoints(e,n,r,i,a,o){return[(e+5*r)/6,(n+5*i)/6,(5*r+a)/6,(5*i+o)/6,(r+a)/2,(i+o)/2]}}ut(St,"PRECISION",1e-4);var uo,Zl,vy,xy,Jc,vn,bg,wg,yS,bS,yy,by,Nf,wS,HT,WT,jg,Lw,GT,rQ,KT,sQ,YT,iQ,XT,aQ,ZT,oQ,QT,lQ;const nu=class nu{constructor({x:e,y:n},r,i,a,o,l=0){G(this,jg);G(this,GT);G(this,KT);G(this,YT);G(this,XT);G(this,ZT);G(this,QT);G(this,uo,void 0);G(this,Zl,[]);G(this,vy,void 0);G(this,xy,void 0);G(this,Jc,[]);G(this,vn,new Float32Array(18));G(this,bg,void 0);G(this,wg,void 0);G(this,yS,void 0);G(this,bS,void 0);G(this,yy,void 0);G(this,by,void 0);G(this,Nf,[]);Z(this,uo,r),Z(this,by,a*i),Z(this,xy,o),S(this,vn).set([NaN,NaN,NaN,NaN,e,n],6),Z(this,vy,l),Z(this,bS,S(nu,wS)*i),Z(this,yS,S(nu,WT)*i),Z(this,yy,i),S(this,Nf).push(e,n)}isEmpty(){return isNaN(S(this,vn)[8])}add({x:e,y:n}){var I;Z(this,bg,e),Z(this,wg,n);const[r,i,a,o]=S(this,uo);let[l,c,d,u]=S(this,vn).subarray(8,12);const h=e-d,f=n-u,m=Math.hypot(h,f);if(m<S(this,yS))return!1;const v=m-S(this,bS),p=v/m,g=p*h,x=p*f;let y=l,b=c;l=d,c=u,d+=g,u+=x,(I=S(this,Nf))==null||I.push(e,n);const w=-x/v,N=g/v,E=w*S(this,by),C=N*S(this,by);return S(this,vn).set(S(this,vn).subarray(2,8),0),S(this,vn).set([d+E,u+C],4),S(this,vn).set(S(this,vn).subarray(14,18),12),S(this,vn).set([d-E,u-C],16),isNaN(S(this,vn)[6])?(S(this,Jc).length===0&&(S(this,vn).set([l+E,c+C],2),S(this,Jc).push(NaN,NaN,NaN,NaN,(l+E-r)/a,(c+C-i)/o),S(this,vn).set([l-E,c-C],14),S(this,Zl).push(NaN,NaN,NaN,NaN,(l-E-r)/a,(c-C-i)/o)),S(this,vn).set([y,b,l,c,d,u],6),!this.isEmpty()):(S(this,vn).set([y,b,l,c,d,u],6),Math.abs(Math.atan2(b-c,y-l)-Math.atan2(x,g))<Math.PI/2?([l,c,d,u]=S(this,vn).subarray(2,6),S(this,Jc).push(NaN,NaN,NaN,NaN,((l+d)/2-r)/a,((c+u)/2-i)/o),[l,c,y,b]=S(this,vn).subarray(14,18),S(this,Zl).push(NaN,NaN,NaN,NaN,((y+l)/2-r)/a,((b+c)/2-i)/o),!0):([y,b,l,c,d,u]=S(this,vn).subarray(0,6),S(this,Jc).push(((y+5*l)/6-r)/a,((b+5*c)/6-i)/o,((5*l+d)/6-r)/a,((5*c+u)/6-i)/o,((l+d)/2-r)/a,((c+u)/2-i)/o),[d,u,l,c,y,b]=S(this,vn).subarray(12,18),S(this,Zl).push(((y+5*l)/6-r)/a,((b+5*c)/6-i)/o,((5*l+d)/6-r)/a,((5*c+u)/6-i)/o,((l+d)/2-r)/a,((c+u)/2-i)/o),!0))}toSVGPath(){if(this.isEmpty())return"";const e=S(this,Jc),n=S(this,Zl);if(isNaN(S(this,vn)[6])&&!this.isEmpty())return se(this,GT,rQ).call(this);const r=[];r.push(`M${e[4]} ${e[5]}`);for(let i=6;i<e.length;i+=6)isNaN(e[i])?r.push(`L${e[i+4]} ${e[i+5]}`):r.push(`C${e[i]} ${e[i+1]} ${e[i+2]} ${e[i+3]} ${e[i+4]} ${e[i+5]}`);se(this,YT,iQ).call(this,r);for(let i=n.length-6;i>=6;i-=6)isNaN(n[i])?r.push(`L${n[i+4]} ${n[i+5]}`):r.push(`C${n[i]} ${n[i+1]} ${n[i+2]} ${n[i+3]} ${n[i+4]} ${n[i+5]}`);return se(this,KT,sQ).call(this,r),r.join(" ")}newFreeDrawOutline(e,n,r,i,a,o){return new cQ(e,n,r,i,a,o)}getOutlines(){var h;const e=S(this,Jc),n=S(this,Zl),r=S(this,vn),[i,a,o,l]=S(this,uo),c=new Float32Array((((h=S(this,Nf))==null?void 0:h.length)??0)+2);for(let f=0,m=c.length-2;f<m;f+=2)c[f]=(S(this,Nf)[f]-i)/o,c[f+1]=(S(this,Nf)[f+1]-a)/l;if(c[c.length-2]=(S(this,bg)-i)/o,c[c.length-1]=(S(this,wg)-a)/l,isNaN(r[6])&&!this.isEmpty())return se(this,XT,aQ).call(this,c);const d=new Float32Array(S(this,Jc).length+24+S(this,Zl).length);let u=e.length;for(let f=0;f<u;f+=2){if(isNaN(e[f])){d[f]=d[f+1]=NaN;continue}d[f]=e[f],d[f+1]=e[f+1]}u=se(this,QT,lQ).call(this,d,u);for(let f=n.length-6;f>=6;f-=6)for(let m=0;m<6;m+=2){if(isNaN(n[f+m])){d[u]=d[u+1]=NaN,u+=2;continue}d[u]=n[f+m],d[u+1]=n[f+m+1],u+=2}return se(this,ZT,oQ).call(this,d,u),this.newFreeDrawOutline(d,c,S(this,uo),S(this,yy),S(this,vy),S(this,xy))}};uo=new WeakMap,Zl=new WeakMap,vy=new WeakMap,xy=new WeakMap,Jc=new WeakMap,vn=new WeakMap,bg=new WeakMap,wg=new WeakMap,yS=new WeakMap,bS=new WeakMap,yy=new WeakMap,by=new WeakMap,Nf=new WeakMap,wS=new WeakMap,HT=new WeakMap,WT=new WeakMap,jg=new WeakSet,Lw=function(){const e=S(this,vn).subarray(4,6),n=S(this,vn).subarray(16,18),[r,i,a,o]=S(this,uo);return[(S(this,bg)+(e[0]-n[0])/2-r)/a,(S(this,wg)+(e[1]-n[1])/2-i)/o,(S(this,bg)+(n[0]-e[0])/2-r)/a,(S(this,wg)+(n[1]-e[1])/2-i)/o]},GT=new WeakSet,rQ=function(){const[e,n,r,i]=S(this,uo),[a,o,l,c]=se(this,jg,Lw).call(this);return`M${(S(this,vn)[2]-e)/r} ${(S(this,vn)[3]-n)/i} L${(S(this,vn)[4]-e)/r} ${(S(this,vn)[5]-n)/i} L${a} ${o} L${l} ${c} L${(S(this,vn)[16]-e)/r} ${(S(this,vn)[17]-n)/i} L${(S(this,vn)[14]-e)/r} ${(S(this,vn)[15]-n)/i} Z`},KT=new WeakSet,sQ=function(e){const n=S(this,Zl);e.push(`L${n[4]} ${n[5]} Z`)},YT=new WeakSet,iQ=function(e){const[n,r,i,a]=S(this,uo),o=S(this,vn).subarray(4,6),l=S(this,vn).subarray(16,18),[c,d,u,h]=se(this,jg,Lw).call(this);e.push(`L${(o[0]-n)/i} ${(o[1]-r)/a} L${c} ${d} L${u} ${h} L${(l[0]-n)/i} ${(l[1]-r)/a}`)},XT=new WeakSet,aQ=function(e){const n=S(this,vn),[r,i,a,o]=S(this,uo),[l,c,d,u]=se(this,jg,Lw).call(this),h=new Float32Array(36);return h.set([NaN,NaN,NaN,NaN,(n[2]-r)/a,(n[3]-i)/o,NaN,NaN,NaN,NaN,(n[4]-r)/a,(n[5]-i)/o,NaN,NaN,NaN,NaN,l,c,NaN,NaN,NaN,NaN,d,u,NaN,NaN,NaN,NaN,(n[16]-r)/a,(n[17]-i)/o,NaN,NaN,NaN,NaN,(n[14]-r)/a,(n[15]-i)/o],0),this.newFreeDrawOutline(h,e,S(this,uo),S(this,yy),S(this,vy),S(this,xy))},ZT=new WeakSet,oQ=function(e,n){const r=S(this,Zl);return e.set([NaN,NaN,NaN,NaN,r[4],r[5]],n),n+=6},QT=new WeakSet,lQ=function(e,n){const r=S(this,vn).subarray(4,6),i=S(this,vn).subarray(16,18),[a,o,l,c]=S(this,uo),[d,u,h,f]=se(this,jg,Lw).call(this);return e.set([NaN,NaN,NaN,NaN,(r[0]-a)/l,(r[1]-o)/c,NaN,NaN,NaN,NaN,d,u,NaN,NaN,NaN,NaN,h,f,NaN,NaN,NaN,NaN,(i[0]-a)/l,(i[1]-o)/c],n),n+=24},G(nu,wS,8),G(nu,HT,2),G(nu,WT,S(nu,wS)+S(nu,HT));let cP=nu;var wy,Ng,Pu,jS,ho,NS,ds,JT,dQ;class cQ extends St{constructor(n,r,i,a,o,l){super();G(this,JT);G(this,wy,void 0);G(this,Ng,new Float32Array(4));G(this,Pu,void 0);G(this,jS,void 0);G(this,ho,void 0);G(this,NS,void 0);G(this,ds,void 0);Z(this,ds,n),Z(this,ho,r),Z(this,wy,i),Z(this,NS,a),Z(this,Pu,o),Z(this,jS,l),this.lastPoint=[NaN,NaN],se(this,JT,dQ).call(this,l);const[c,d,u,h]=S(this,Ng);for(let f=0,m=n.length;f<m;f+=2)n[f]=(n[f]-c)/u,n[f+1]=(n[f+1]-d)/h;for(let f=0,m=r.length;f<m;f+=2)r[f]=(r[f]-c)/u,r[f+1]=(r[f+1]-d)/h}toSVGPath(){const n=[`M${S(this,ds)[4]} ${S(this,ds)[5]}`];for(let r=6,i=S(this,ds).length;r<i;r+=6){if(isNaN(S(this,ds)[r])){n.push(`L${S(this,ds)[r+4]} ${S(this,ds)[r+5]}`);continue}n.push(`C${S(this,ds)[r]} ${S(this,ds)[r+1]} ${S(this,ds)[r+2]} ${S(this,ds)[r+3]} ${S(this,ds)[r+4]} ${S(this,ds)[r+5]}`)}return n.push("Z"),n.join(" ")}serialize([n,r,i,a],o){const l=i-n,c=a-r;let d,u;switch(o){case 0:d=St._rescale(S(this,ds),n,a,l,-c),u=St._rescale(S(this,ho),n,a,l,-c);break;case 90:d=St._rescaleAndSwap(S(this,ds),n,r,l,c),u=St._rescaleAndSwap(S(this,ho),n,r,l,c);break;case 180:d=St._rescale(S(this,ds),i,r,-l,c),u=St._rescale(S(this,ho),i,r,-l,c);break;case 270:d=St._rescaleAndSwap(S(this,ds),i,a,-l,-c),u=St._rescaleAndSwap(S(this,ho),i,a,-l,-c);break}return{outline:Array.from(d),points:[Array.from(u)]}}get box(){return S(this,Ng)}newOutliner(n,r,i,a,o,l=0){return new cP(n,r,i,a,o,l)}getNewOutline(n,r){const[i,a,o,l]=S(this,Ng),[c,d,u,h]=S(this,wy),f=o*u,m=l*h,v=i*u+c,p=a*h+d,g=this.newOutliner({x:S(this,ho)[0]*f+v,y:S(this,ho)[1]*m+p},S(this,wy),S(this,NS),n,S(this,jS),r??S(this,Pu));for(let x=2;x<S(this,ho).length;x+=2)g.add({x:S(this,ho)[x]*f+v,y:S(this,ho)[x+1]*m+p});return g.getOutlines()}}wy=new WeakMap,Ng=new WeakMap,Pu=new WeakMap,jS=new WeakMap,ho=new WeakMap,NS=new WeakMap,ds=new WeakMap,JT=new WeakSet,dQ=function(n){const r=S(this,ds);let i=r[4],a=r[5];const o=[i,a,i,a];let l=i,c=a;const d=n?Math.max:Math.min;for(let h=6,f=r.length;h<f;h+=6){const m=r[h+4],v=r[h+5];if(isNaN(r[h]))kt.pointBoundingBox(m,v,o),c<v?(l=m,c=v):c===v&&(l=d(l,m));else{const p=[1/0,1/0,-1/0,-1/0];kt.bezierBoundingBox(i,a,...r.slice(h,h+6),p),kt.rectBoundingBox(...p,o),c<p[3]?(l=p[2],c=p[3]):c===p[3]&&(l=d(l,p[2]))}i=m,a=v}const u=S(this,Ng);u[0]=o[0]-S(this,Pu),u[1]=o[1]-S(this,Pu),u[2]=o[2]-o[0]+2*S(this,Pu),u[3]=o[3]-o[1]+2*S(this,Pu),this.lastPoint=[l,c]};var SS,AS,Sf,Ql,eI,uQ,jy,mE,tI,hQ,nI,fQ,CS,mR;class fR{constructor(e,n=0,r=0,i=!0){G(this,eI);G(this,jy);G(this,tI);G(this,nI);G(this,CS);G(this,SS,void 0);G(this,AS,void 0);G(this,Sf,[]);G(this,Ql,[]);const a=[1/0,1/0,-1/0,-1/0],l=10**-4;for(const{x:v,y:p,width:g,height:x}of e){const y=Math.floor((v-n)/l)*l,b=Math.ceil((v+g+n)/l)*l,w=Math.floor((p-n)/l)*l,N=Math.ceil((p+x+n)/l)*l,E=[y,w,N,!0],C=[b,w,N,!1];S(this,Sf).push(E,C),kt.rectBoundingBox(y,w,b,N,a)}const c=a[2]-a[0]+2*r,d=a[3]-a[1]+2*r,u=a[0]-r,h=a[1]-r,f=S(this,Sf).at(i?-1:-2),m=[f[0],f[2]];for(const v of S(this,Sf)){const[p,g,x]=v;v[0]=(p-u)/c,v[1]=(g-h)/d,v[2]=(x-h)/d}Z(this,SS,new Float32Array([u,h,c,d])),Z(this,AS,m)}getOutlines(){S(this,Sf).sort((n,r)=>n[0]-r[0]||n[1]-r[1]||n[2]-r[2]);const e=[];for(const n of S(this,Sf))n[3]?(e.push(...se(this,CS,mR).call(this,n)),se(this,tI,hQ).call(this,n)):(se(this,nI,fQ).call(this,n),e.push(...se(this,CS,mR).call(this,n)));return se(this,eI,uQ).call(this,e)}}SS=new WeakMap,AS=new WeakMap,Sf=new WeakMap,Ql=new WeakMap,eI=new WeakSet,uQ=function(e){const n=[],r=new Set;for(const o of e){const[l,c,d]=o;n.push([l,c,o],[l,d,o])}n.sort((o,l)=>o[1]-l[1]||o[0]-l[0]);for(let o=0,l=n.length;o<l;o+=2){const c=n[o][2],d=n[o+1][2];c.push(d),d.push(c),r.add(c),r.add(d)}const i=[];let a;for(;r.size>0;){const o=r.values().next().value;let[l,c,d,u,h]=o;r.delete(o);let f=l,m=c;for(a=[l,d],i.push(a);;){let v;if(r.has(u))v=u;else if(r.has(h))v=h;else break;r.delete(v),[l,c,d,u,h]=v,f!==l&&(a.push(f,m,l,m===c?c:d),f=l),m=m===c?d:c}a.push(f,m)}return new Jhe(i,S(this,SS),S(this,AS))},jy=new WeakSet,mE=function(e){const n=S(this,Ql);let r=0,i=n.length-1;for(;r<=i;){const a=r+i>>1,o=n[a][0];if(o===e)return a;o<e?r=a+1:i=a-1}return i+1},tI=new WeakSet,hQ=function([,e,n]){const r=se(this,jy,mE).call(this,e);S(this,Ql).splice(r,0,[e,n])},nI=new WeakSet,fQ=function([,e,n]){const r=se(this,jy,mE).call(this,e);for(let i=r;i<S(this,Ql).length;i++){const[a,o]=S(this,Ql)[i];if(a!==e)break;if(a===e&&o===n){S(this,Ql).splice(i,1);return}}for(let i=r-1;i>=0;i--){const[a,o]=S(this,Ql)[i];if(a!==e)break;if(a===e&&o===n){S(this,Ql).splice(i,1);return}}},CS=new WeakSet,mR=function(e){const[n,r,i]=e,a=[[n,r,i]],o=se(this,jy,mE).call(this,i);for(let l=0;l<o;l++){const[c,d]=S(this,Ql)[l];for(let u=0,h=a.length;u<h;u++){const[,f,m]=a[u];if(!(d<=f||m<=c)){if(f>=c){if(m>d)a[u][1]=d;else{if(h===1)return[];a.splice(u,1),u--,h--}continue}a[u][2]=c,m>d&&a.push([n,d,m])}}}return a};var ES,Ny;class Jhe extends St{constructor(n,r,i){super();G(this,ES,void 0);G(this,Ny,void 0);Z(this,Ny,n),Z(this,ES,r),this.lastPoint=i}toSVGPath(){const n=[];for(const r of S(this,Ny)){let[i,a]=r;n.push(`M${i} ${a}`);for(let o=2;o<r.length;o+=2){const l=r[o],c=r[o+1];l===i?(n.push(`V${c}`),a=c):c===a&&(n.push(`H${l}`),i=l)}n.push("Z")}return n.join(" ")}serialize([n,r,i,a],o){const l=[],c=i-n,d=a-r;for(const u of S(this,Ny)){const h=new Array(u.length);for(let f=0;f<u.length;f+=2)h[f]=n+u[f]*c,h[f+1]=a-u[f+1]*d;l.push(h)}return l}get box(){return S(this,ES)}get classNamesForOutlining(){return["highlightOutline"]}}ES=new WeakMap,Ny=new WeakMap;class pR extends cP{newFreeDrawOutline(e,n,r,i,a,o){return new efe(e,n,r,i,a,o)}}class efe extends cQ{newOutliner(e,n,r,i,a,o=0){return new pR(e,n,r,i,a,o)}}var fo,Sg,Sy,Fs,PS,Ay,Tu,TS,Af,Jl,Cy,IS,DS,gR,kS,vR,_S,xR,Iu,rp,rI,mQ,ed,Oh;const Ta=class Ta{constructor({editor:e=null,uiManager:n=null}){G(this,DS);G(this,kS);G(this,_S);G(this,Iu);G(this,rI);G(this,ed);G(this,fo,null);G(this,Sg,null);G(this,Sy,void 0);G(this,Fs,null);G(this,PS,!1);G(this,Ay,!1);G(this,Tu,null);G(this,TS,void 0);G(this,Af,null);G(this,Jl,null);G(this,Cy,void 0);var r,i;e?(Z(this,Ay,!1),Z(this,Cy,Nn.HIGHLIGHT_COLOR),Z(this,Tu,e)):(Z(this,Ay,!0),Z(this,Cy,Nn.HIGHLIGHT_DEFAULT_COLOR)),Z(this,Jl,(e==null?void 0:e._uiManager)||n),Z(this,TS,S(this,Jl)._eventBus),Z(this,Sy,((r=e==null?void 0:e.color)==null?void 0:r.toUpperCase())||((i=S(this,Jl))==null?void 0:i.highlightColors.values().next().value)||"#FFFF98"),S(Ta,IS)||Z(Ta,IS,Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"}))}static get _keyboardManager(){return xn(this,"_keyboardManager",new uA([[["Escape","mac+Escape"],Ta.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],Ta.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],Ta.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],Ta.prototype._moveToPrevious],[["Home","mac+Home"],Ta.prototype._moveToBeginning],[["End","mac+End"],Ta.prototype._moveToEnd]]))}renderButton(){const e=Z(this,fo,document.createElement("button"));e.className="colorPicker",e.tabIndex="0",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),e.ariaHasPopup="true",S(this,Tu)&&(e.ariaControls=`${S(this,Tu).id}_colorpicker_dropdown`);const n=S(this,Jl)._signal;e.addEventListener("click",se(this,Iu,rp).bind(this),{signal:n}),e.addEventListener("keydown",se(this,_S,xR).bind(this),{signal:n});const r=Z(this,Sg,document.createElement("span"));return r.className="swatch",r.ariaHidden="true",r.style.backgroundColor=S(this,Sy),e.append(r),e}renderMainDropdown(){const e=Z(this,Fs,se(this,DS,gR).call(this));return e.ariaOrientation="horizontal",e.ariaLabelledBy="highlightColorPickerLabel",e}_colorSelectFromKeyboard(e){if(e.target===S(this,fo)){se(this,Iu,rp).call(this,e);return}const n=e.target.getAttribute("data-color");n&&se(this,kS,vR).call(this,n,e)}_moveToNext(e){var n,r;if(!S(this,ed,Oh)){se(this,Iu,rp).call(this,e);return}if(e.target===S(this,fo)){(n=S(this,Fs).firstChild)==null||n.focus();return}(r=e.target.nextSibling)==null||r.focus()}_moveToPrevious(e){var n,r;if(e.target===((n=S(this,Fs))==null?void 0:n.firstChild)||e.target===S(this,fo)){S(this,ed,Oh)&&this._hideDropdownFromKeyboard();return}S(this,ed,Oh)||se(this,Iu,rp).call(this,e),(r=e.target.previousSibling)==null||r.focus()}_moveToBeginning(e){var n;if(!S(this,ed,Oh)){se(this,Iu,rp).call(this,e);return}(n=S(this,Fs).firstChild)==null||n.focus()}_moveToEnd(e){var n;if(!S(this,ed,Oh)){se(this,Iu,rp).call(this,e);return}(n=S(this,Fs).lastChild)==null||n.focus()}hideDropdown(){var e,n;(e=S(this,Fs))==null||e.classList.add("hidden"),S(this,fo).ariaExpanded="false",(n=S(this,Af))==null||n.abort(),Z(this,Af,null)}_hideDropdownFromKeyboard(){var e;if(!S(this,Ay)){if(!S(this,ed,Oh)){(e=S(this,Tu))==null||e.unselect();return}this.hideDropdown(),S(this,fo).focus({preventScroll:!0,focusVisible:S(this,PS)})}}updateColor(e){if(S(this,Sg)&&(S(this,Sg).style.backgroundColor=e),!S(this,Fs))return;const n=S(this,Jl).highlightColors.values();for(const r of S(this,Fs).children)r.ariaSelected=n.next().value===e.toUpperCase()}destroy(){var e,n;(e=S(this,fo))==null||e.remove(),Z(this,fo,null),Z(this,Sg,null),(n=S(this,Fs))==null||n.remove(),Z(this,Fs,null)}};fo=new WeakMap,Sg=new WeakMap,Sy=new WeakMap,Fs=new WeakMap,PS=new WeakMap,Ay=new WeakMap,Tu=new WeakMap,TS=new WeakMap,Af=new WeakMap,Jl=new WeakMap,Cy=new WeakMap,IS=new WeakMap,DS=new WeakSet,gR=function(){const e=document.createElement("div"),n=S(this,Jl)._signal;e.addEventListener("contextmenu",jl,{signal:n}),e.className="dropdown",e.role="listbox",e.ariaMultiSelectable="false",e.ariaOrientation="vertical",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown"),S(this,Tu)&&(e.id=`${S(this,Tu).id}_colorpicker_dropdown`);for(const[r,i]of S(this,Jl).highlightColors){const a=document.createElement("button");a.tabIndex="0",a.role="option",a.setAttribute("data-color",i),a.title=r,a.setAttribute("data-l10n-id",S(Ta,IS)[r]);const o=document.createElement("span");a.append(o),o.className="swatch",o.style.backgroundColor=i,a.ariaSelected=i===S(this,Sy),a.addEventListener("click",se(this,kS,vR).bind(this,i),{signal:n}),e.append(a)}return e.addEventListener("keydown",se(this,_S,xR).bind(this),{signal:n}),e},kS=new WeakSet,vR=function(e,n){n.stopPropagation(),S(this,TS).dispatch("switchannotationeditorparams",{source:this,type:S(this,Cy),value:e})},_S=new WeakSet,xR=function(e){Ta._keyboardManager.exec(this,e)},Iu=new WeakSet,rp=function(e){if(S(this,ed,Oh)){this.hideDropdown();return}if(Z(this,PS,e.detail===0),S(this,Af)||(Z(this,Af,new AbortController),window.addEventListener("pointerdown",se(this,rI,mQ).bind(this),{signal:S(this,Jl).combinedSignal(S(this,Af))})),S(this,fo).ariaExpanded="true",S(this,Fs)){S(this,Fs).classList.remove("hidden");return}const n=Z(this,Fs,se(this,DS,gR).call(this));S(this,fo).append(n)},rI=new WeakSet,mQ=function(e){var n;(n=S(this,Fs))!=null&&n.contains(e.target)||this.hideDropdown()},ed=new WeakSet,Oh=function(){return S(this,Fs)&&!S(this,Fs).classList.contains("hidden")},G(Ta,IS,null);let zj=Ta;var Ey,OS,Du,Ag,LS,ka,RS,MS,Cg,ol,mo,wi,Py,ku,Hi,Ty,ll,FS,$S,yR,Iy,pE,sI,pQ,iI,gQ,aI,vQ,BS,bR,_u,sp,Cf,Dx,oI,xQ,Dy,gE,Eg,Rw,lI,yQ,cI,bQ,dI,wQ,uI,jQ,hI,NQ;const Tn=class Tn extends wr{constructor(n){super({...n,name:"highlightEditor"});G(this,$S);G(this,Iy);G(this,sI);G(this,iI);G(this,aI);G(this,BS);G(this,_u);G(this,oI);G(this,Dy);G(this,Eg);G(this,lI);G(this,cI);G(this,hI);G(this,Ey,null);G(this,OS,0);G(this,Du,void 0);G(this,Ag,null);G(this,LS,null);G(this,ka,null);G(this,RS,null);G(this,MS,0);G(this,Cg,null);G(this,ol,null);G(this,mo,null);G(this,wi,!1);G(this,Py,null);G(this,ku,void 0);G(this,Hi,null);G(this,Ty,"");G(this,ll,void 0);G(this,FS,"");this.color=n.color||Tn._defaultColor,Z(this,ll,n.thickness||Tn._defaultThickness),Z(this,ku,n.opacity||Tn._defaultOpacity),Z(this,Du,n.boxes||null),Z(this,FS,n.methodOfCreation||""),Z(this,Ty,n.text||""),this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",n.highlightId>-1?(Z(this,wi,!0),se(this,Iy,pE).call(this,n),se(this,_u,sp).call(this)):S(this,Du)&&(Z(this,Ey,n.anchorNode),Z(this,OS,n.anchorOffset),Z(this,RS,n.focusNode),Z(this,MS,n.focusOffset),se(this,$S,yR).call(this),se(this,_u,sp).call(this),this.rotate(this.rotation)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-highlight-added-alert")}static get _keyboardManager(){const n=Tn.prototype;return xn(this,"_keyboardManager",new uA([[["ArrowLeft","mac+ArrowLeft"],n._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],n._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],n._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],n._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:S(this,wi)?"free_highlight":"highlight",color:this._uiManager.highlightColorNames.get(this.color),thickness:S(this,ll),methodOfCreation:S(this,FS)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.highlightColorNames.get(this.color)}}static computeTelemetryFinalData(n){return{numberOfColors:n.get("color").size}}static initialize(n,r){var i;wr.initialize(n,r),Tn._defaultColor||(Tn._defaultColor=((i=r.highlightColors)==null?void 0:i.values().next().value)||"#fff066")}static updateDefaultParams(n,r){switch(n){case Nn.HIGHLIGHT_DEFAULT_COLOR:Tn._defaultColor=r;break;case Nn.HIGHLIGHT_THICKNESS:Tn._defaultThickness=r;break}}translateInPage(n,r){}get toolbarPosition(){return S(this,Py)}updateParams(n,r){switch(n){case Nn.HIGHLIGHT_COLOR:se(this,sI,pQ).call(this,r);break;case Nn.HIGHLIGHT_THICKNESS:se(this,iI,gQ).call(this,r);break}}static get defaultPropertiesToUpdate(){return[[Nn.HIGHLIGHT_DEFAULT_COLOR,Tn._defaultColor],[Nn.HIGHLIGHT_THICKNESS,Tn._defaultThickness]]}get propertiesToUpdate(){return[[Nn.HIGHLIGHT_COLOR,this.color||Tn._defaultColor],[Nn.HIGHLIGHT_THICKNESS,S(this,ll)||Tn._defaultThickness],[Nn.HIGHLIGHT_FREE,S(this,wi)]]}get toolbarButtons(){return this._uiManager.highlightColors?[["colorPicker",Z(this,LS,new zj({editor:this}))]]:super.toolbarButtons}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(se(this,Eg,Rw).call(this))}getBaseTranslation(){return[0,0]}getRect(n,r){return super.getRect(n,r,se(this,Eg,Rw).call(this))}onceAdded(n){this.annotationElementId||this.parent.addUndoableEditor(this),n&&this.div.focus()}remove(){se(this,BS,bR).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(se(this,_u,sp).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(n){var i;let r=!1;this.parent&&!n?se(this,BS,bR).call(this):n&&(se(this,_u,sp).call(this,n),r=!this.parent&&((i=this.div)==null?void 0:i.classList.contains("selectedEditor"))),super.setParent(n),this.show(this._isVisible),r&&this.select()}rotate(n){var a,o,l;const{drawLayer:r}=this.parent;let i;S(this,wi)?(n=(n-this.rotation+360)%360,i=se(a=Tn,Cf,Dx).call(a,S(this,ol).box,n)):i=se(o=Tn,Cf,Dx).call(o,[this.x,this.y,this.width,this.height],n),r.updateProperties(S(this,mo),{bbox:i,root:{"data-main-rotation":n}}),r.updateProperties(S(this,Hi),{bbox:se(l=Tn,Cf,Dx).call(l,S(this,ka).box,n),root:{"data-main-rotation":n}})}render(){if(this.div)return this.div;const n=super.render();S(this,Ty)&&(n.setAttribute("aria-label",S(this,Ty)),n.setAttribute("role","mark")),S(this,wi)?n.classList.add("free"):this.div.addEventListener("keydown",se(this,oI,xQ).bind(this),{signal:this._uiManager._signal});const r=Z(this,Cg,document.createElement("div"));n.append(r),r.setAttribute("aria-hidden","true"),r.className="internal",r.style.clipPath=S(this,Ag);const[i,a]=this.parentDimensions;return this.setDims(this.width*i,this.height*a),zX(this,S(this,Cg),["pointerover","pointerleave"]),this.enableEditing(),n}pointerover(){var n;this.isSelected||(n=this.parent)==null||n.drawLayer.updateProperties(S(this,Hi),{rootClass:{hovered:!0}})}pointerleave(){var n;this.isSelected||(n=this.parent)==null||n.drawLayer.updateProperties(S(this,Hi),{rootClass:{hovered:!1}})}_moveCaret(n){switch(this.parent.unselect(this),n){case 0:case 2:se(this,Dy,gE).call(this,!0);break;case 1:case 3:se(this,Dy,gE).call(this,!1);break}}select(){var n;super.select(),S(this,Hi)&&((n=this.parent)==null||n.drawLayer.updateProperties(S(this,Hi),{rootClass:{hovered:!1,selected:!0}}))}unselect(){var n;super.unselect(),S(this,Hi)&&((n=this.parent)==null||n.drawLayer.updateProperties(S(this,Hi),{rootClass:{selected:!1}}),S(this,wi)||se(this,Dy,gE).call(this,!1))}get _mustFixPosition(){return!S(this,wi)}show(n=this._isVisible){super.show(n),this.parent&&(this.parent.drawLayer.updateProperties(S(this,mo),{rootClass:{hidden:!n}}),this.parent.drawLayer.updateProperties(S(this,Hi),{rootClass:{hidden:!n}}))}static startHighlighting(n,r,{target:i,x:a,y:o}){const{x:l,y:c,width:d,height:u}=i.getBoundingClientRect(),h=new AbortController,f=n.combinedSignal(h),m=v=>{h.abort(),se(this,uI,jQ).call(this,n,v)};window.addEventListener("blur",m,{signal:f}),window.addEventListener("pointerup",m,{signal:f}),window.addEventListener("pointerdown",hs,{capture:!0,passive:!1,signal:f}),window.addEventListener("contextmenu",jl,{signal:f}),i.addEventListener("pointermove",se(this,dI,wQ).bind(this,n),{signal:f}),this._freeHighlight=new pR({x:a,y:o},[l,c,d,u],n.scale,this._defaultThickness/2,r,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=n.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static async deserialize(n,r,i){var p,g,x,y;let a=null;if(n instanceof XZ){const{data:{quadPoints:b,rect:w,rotation:N,id:E,color:C,opacity:j,popupRef:I},parent:{page:{pageNumber:k}}}=n;a=n={annotationType:en.HIGHLIGHT,color:Array.from(C),opacity:j,quadPoints:b,boxes:null,pageIndex:k-1,rect:w.slice(0),rotation:N,annotationElementId:E,id:E,deleted:!1,popupRef:I}}else if(n instanceof x$){const{data:{inkLists:b,rect:w,rotation:N,id:E,color:C,borderStyle:{rawWidth:j},popupRef:I},parent:{page:{pageNumber:k}}}=n;a=n={annotationType:en.HIGHLIGHT,color:Array.from(C),thickness:j,inkLists:b,boxes:null,pageIndex:k-1,rect:w.slice(0),rotation:N,annotationElementId:E,id:E,deleted:!1,popupRef:I}}const{color:o,quadPoints:l,inkLists:c,opacity:d}=n,u=await super.deserialize(n,r,i);u.color=kt.makeHexColor(...o),Z(u,ku,d||1),c&&Z(u,ll,n.thickness),u._initialData=a;const[h,f]=u.pageDimensions,[m,v]=u.pageTranslation;if(l){const b=Z(u,Du,[]);for(let w=0;w<l.length;w+=8)b.push({x:(l[w]-m)/h,y:1-(l[w+1]-v)/f,width:(l[w+2]-l[w])/h,height:(l[w+1]-l[w+5])/f});se(p=u,$S,yR).call(p),se(g=u,_u,sp).call(g),u.rotate(u.rotation)}else if(c){Z(u,wi,!0);const b=c[0],w={x:b[0]-m,y:f-(b[1]-v)},N=new pR(w,[0,0,h,f],1,S(u,ll)/2,!0,.001);for(let j=0,I=b.length;j<I;j+=2)w.x=b[j]-m,w.y=f-(b[j+1]-v),N.add(w);const{id:E,clipPathId:C}=r.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:u.color,"fill-opacity":u._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:N.toSVGPath()}},!0,!0);se(x=u,Iy,pE).call(x,{highlightOutlines:N.getOutlines(),highlightId:E,clipPathId:C}),se(y=u,_u,sp).call(y),u.rotate(u.parentRotation)}return u}serialize(n=!1){if(this.isEmpty()||n)return null;if(this.deleted)return this.serializeDeleted();const r=this.getRect(0,0),i=wr._colorManager.convert(this.color),a={annotationType:en.HIGHLIGHT,color:i,opacity:S(this,ku),thickness:S(this,ll),quadPoints:se(this,lI,yQ).call(this),outlines:se(this,cI,bQ).call(this,r),pageIndex:this.pageIndex,rect:r,rotation:se(this,Eg,Rw).call(this),structTreeParentId:this._structTreeParentId};return this.annotationElementId&&!se(this,hI,NQ).call(this,a)?null:(a.id=this.annotationElementId,a)}renderAnnotationElement(n){return n.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}};Ey=new WeakMap,OS=new WeakMap,Du=new WeakMap,Ag=new WeakMap,LS=new WeakMap,ka=new WeakMap,RS=new WeakMap,MS=new WeakMap,Cg=new WeakMap,ol=new WeakMap,mo=new WeakMap,wi=new WeakMap,Py=new WeakMap,ku=new WeakMap,Hi=new WeakMap,Ty=new WeakMap,ll=new WeakMap,FS=new WeakMap,$S=new WeakSet,yR=function(){const n=new fR(S(this,Du),.001);Z(this,ol,n.getOutlines()),[this.x,this.y,this.width,this.height]=S(this,ol).box;const r=new fR(S(this,Du),.0025,.001,this._uiManager.direction==="ltr");Z(this,ka,r.getOutlines());const{lastPoint:i}=S(this,ka);Z(this,Py,[(i[0]-this.x)/this.width,(i[1]-this.y)/this.height])},Iy=new WeakSet,pE=function({highlightOutlines:n,highlightId:r,clipPathId:i}){var h,f;Z(this,ol,n);const a=1.5;if(Z(this,ka,n.getNewOutline(S(this,ll)/2+a,.0025)),r>=0)Z(this,mo,r),Z(this,Ag,i),this.parent.drawLayer.finalizeDraw(r,{bbox:n.box,path:{d:n.toSVGPath()}}),Z(this,Hi,this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:S(this,ka).box,path:{d:S(this,ka).toSVGPath()}},!0));else if(this.parent){const m=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(S(this,mo),{bbox:se(h=Tn,Cf,Dx).call(h,S(this,ol).box,(m-this.rotation+360)%360),path:{d:n.toSVGPath()}}),this.parent.drawLayer.updateProperties(S(this,Hi),{bbox:se(f=Tn,Cf,Dx).call(f,S(this,ka).box,m),path:{d:S(this,ka).toSVGPath()}})}const[o,l,c,d]=n.box;switch(this.rotation){case 0:this.x=o,this.y=l,this.width=c,this.height=d;break;case 90:{const[m,v]=this.parentDimensions;this.x=l,this.y=1-o,this.width=c*v/m,this.height=d*m/v;break}case 180:this.x=1-o,this.y=1-l,this.width=c,this.height=d;break;case 270:{const[m,v]=this.parentDimensions;this.x=1-l,this.y=o,this.width=c*v/m,this.height=d*m/v;break}}const{lastPoint:u}=S(this,ka);Z(this,Py,[(u[0]-o)/c,(u[1]-l)/d])},sI=new WeakSet,pQ=function(n){const r=(o,l)=>{var c,d;this.color=o,Z(this,ku,l),(c=this.parent)==null||c.drawLayer.updateProperties(S(this,mo),{root:{fill:o,"fill-opacity":l}}),(d=S(this,LS))==null||d.updateColor(o)},i=this.color,a=S(this,ku);this.addCommands({cmd:r.bind(this,n,Tn._defaultOpacity),undo:r.bind(this,i,a),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Nn.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.highlightColorNames.get(n)},!0)},iI=new WeakSet,gQ=function(n){const r=S(this,ll),i=a=>{Z(this,ll,a),se(this,aI,vQ).call(this,a)};this.addCommands({cmd:i.bind(this,n),undo:i.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Nn.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:n},!0)},aI=new WeakSet,vQ=function(n){if(!S(this,wi))return;se(this,Iy,pE).call(this,{highlightOutlines:S(this,ol).getNewOutline(n/2)}),this.fixAndSetPosition();const[r,i]=this.parentDimensions;this.setDims(this.width*r,this.height*i)},BS=new WeakSet,bR=function(){S(this,mo)===null||!this.parent||(this.parent.drawLayer.remove(S(this,mo)),Z(this,mo,null),this.parent.drawLayer.remove(S(this,Hi)),Z(this,Hi,null))},_u=new WeakSet,sp=function(n=this.parent){S(this,mo)===null&&({id:na(this,mo)._,clipPathId:na(this,Ag)._}=n.drawLayer.draw({bbox:S(this,ol).box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":S(this,ku)},rootClass:{highlight:!0,free:S(this,wi)},path:{d:S(this,ol).toSVGPath()}},!1,!0),Z(this,Hi,n.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:S(this,wi)},bbox:S(this,ka).box,path:{d:S(this,ka).toSVGPath()}},S(this,wi))),S(this,Cg)&&(S(this,Cg).style.clipPath=S(this,Ag)))},Cf=new WeakSet,Dx=function([n,r,i,a],o){switch(o){case 90:return[1-r-a,n,a,i];case 180:return[1-n-i,1-r-a,i,a];case 270:return[r,1-n-i,a,i]}return[n,r,i,a]},oI=new WeakSet,xQ=function(n){Tn._keyboardManager.exec(this,n)},Dy=new WeakSet,gE=function(n){if(!S(this,Ey))return;const r=window.getSelection();n?r.setPosition(S(this,Ey),S(this,OS)):r.setPosition(S(this,RS),S(this,MS))},Eg=new WeakSet,Rw=function(){return S(this,wi)?this.rotation:0},lI=new WeakSet,yQ=function(){if(S(this,wi))return null;const[n,r]=this.pageDimensions,[i,a]=this.pageTranslation,o=S(this,Du),l=new Float32Array(o.length*8);let c=0;for(const{x:d,y:u,width:h,height:f}of o){const m=d*n+i,v=(1-u)*r+a;l[c]=l[c+4]=m,l[c+1]=l[c+3]=v,l[c+2]=l[c+6]=m+h*n,l[c+5]=l[c+7]=v-f*r,c+=8}return l},cI=new WeakSet,bQ=function(n){return S(this,ol).serialize(n,se(this,Eg,Rw).call(this))},dI=new WeakSet,wQ=function(n,r){this._freeHighlight.add(r)&&n.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})},uI=new WeakSet,jQ=function(n,r){this._freeHighlight.isEmpty()?n.drawLayer.remove(this._freeHighlightId):n.createAndAddNewEditor(r,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},hI=new WeakSet,NQ=function(n){const{color:r}=this._initialData;return n.color.some((i,a)=>i!==r[a])},G(Tn,Cf),G(Tn,dI),G(Tn,uI),ut(Tn,"_defaultColor",null),ut(Tn,"_defaultOpacity",1),ut(Tn,"_defaultThickness",12),ut(Tn,"_type","highlight"),ut(Tn,"_editorType",en.HIGHLIGHT),ut(Tn,"_freeHighlightId",-1),ut(Tn,"_freeHighlight",null),ut(Tn,"_freeHighlightClipId","");let dP=Tn;var Pg;class SQ{constructor(){G(this,Pg,Object.create(null))}updateProperty(e,n){this[e]=n,this.updateSVGProperty(e,n)}updateProperties(e){if(e)for(const[n,r]of Object.entries(e))n.startsWith("_")||this.updateProperty(n,r)}updateSVGProperty(e,n){S(this,Pg)[e]=n}toSVGProperties(){const e=S(this,Pg);return Z(this,Pg,Object.create(null)),{root:e}}reset(){Z(this,Pg,Object.create(null))}updateAll(e=this){this.updateProperties(e)}clone(){ir("Not implemented")}}Pg=new WeakMap;var po,ky,Zs,Tg,Ig,Ef,Pf,Tf,Dg,zS,wR,US,jR,VS,NR,kg,Mw,fI,AQ,_y,vE,_g,Fw,If,kx;const Pt=class Pt extends wr{constructor(n){super(n);G(this,zS);G(this,US);G(this,VS);G(this,kg);G(this,fI);G(this,_y);G(this,_g);G(this,If);G(this,po,null);G(this,ky,void 0);ut(this,"_drawId",null);Z(this,ky,n.mustBeCommitted||!1),this._addOutlines(n)}_addOutlines(n){n.drawOutlines&&(se(this,zS,wR).call(this,n),se(this,kg,Mw).call(this))}static _mergeSVGProperties(n,r){const i=new Set(Object.keys(n));for(const[a,o]of Object.entries(r))i.has(a)?Object.assign(n[a],o):n[a]=o;return n}static getDefaultDrawingOptions(n){ir("Not implemented")}static get typesMap(){ir("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(n,r){const i=this.typesMap.get(n);i&&this._defaultDrawingOptions.updateProperty(i,r),this._currentParent&&(S(Pt,Zs).updateProperty(i,r),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(n,r){const i=this.constructor.typesMap.get(n);i&&this._updateProperty(n,i,r)}static get defaultPropertiesToUpdate(){const n=[],r=this._defaultDrawingOptions;for(const[i,a]of this.typesMap)n.push([i,r[a]]);return n}get propertiesToUpdate(){const n=[],{_drawingOptions:r}=this;for(const[i,a]of this.constructor.typesMap)n.push([i,r[a]]);return n}_updateProperty(n,r,i){const a=this._drawingOptions,o=a[r],l=c=>{var u;a.updateProperty(r,c);const d=S(this,po).updateProperty(r,c);d&&se(this,_g,Fw).call(this,d),(u=this.parent)==null||u.drawLayer.updateProperties(this._drawId,a.toSVGProperties())};this.addCommands({cmd:l.bind(this,i),undo:l.bind(this,o),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:n,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){var n;(n=this.parent)==null||n.drawLayer.updateProperties(this._drawId,Pt._mergeSVGProperties(S(this,po).getPathResizingSVGProperties(se(this,_y,vE).call(this)),{bbox:se(this,If,kx).call(this)}))}_onResized(){var n;(n=this.parent)==null||n.drawLayer.updateProperties(this._drawId,Pt._mergeSVGProperties(S(this,po).getPathResizedSVGProperties(se(this,_y,vE).call(this)),{bbox:se(this,If,kx).call(this)}))}_onTranslating(n,r){var i;(i=this.parent)==null||i.drawLayer.updateProperties(this._drawId,{bbox:se(this,If,kx).call(this)})}_onTranslated(){var n;(n=this.parent)==null||n.drawLayer.updateProperties(this._drawId,Pt._mergeSVGProperties(S(this,po).getPathTranslatedSVGProperties(se(this,_y,vE).call(this),this.parentDimensions),{bbox:se(this,If,kx).call(this)}))}_onStartDragging(){var n;(n=this.parent)==null||n.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){var n;(n=this.parent)==null||n.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(n){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,S(this,ky)&&(Z(this,ky,!1),this.commit(),this.parent.setSelected(this),n&&this.isOnScreen&&this.div.focus())}remove(){se(this,VS,NR).call(this),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(se(this,kg,Mw).call(this),se(this,_g,Fw).call(this,S(this,po).box),this.isAttachedToDOM||this.parent.add(this)))}setParent(n){var i;let r=!1;this.parent&&!n?(this._uiManager.removeShouldRescale(this),se(this,VS,NR).call(this)):n&&(this._uiManager.addShouldRescale(this),se(this,kg,Mw).call(this,n),r=!this.parent&&((i=this.div)==null?void 0:i.classList.contains("selectedEditor"))),super.setParent(n),r&&this.select()}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,Pt._mergeSVGProperties({bbox:se(this,If,kx).call(this)},S(this,po).updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&se(this,_g,Fw).call(this,S(this,po).updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let n,r;this._isCopy&&(n=this.x,r=this.y);const i=super.render();i.classList.add("draw");const a=document.createElement("div");i.append(a),a.setAttribute("aria-hidden","true"),a.className="internal";const[o,l]=this.parentDimensions;return this.setDims(this.width*o,this.height*l),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(n,r),i}static createDrawerInstance(n,r,i,a,o){ir("Not implemented")}static startDrawing(n,r,i,a){var g;const{target:o,offsetX:l,offsetY:c,pointerId:d,pointerType:u}=a;if(S(Pt,Pf)&&S(Pt,Pf)!==u)return;const{viewport:{rotation:h}}=n,{width:f,height:m}=o.getBoundingClientRect(),v=Z(Pt,Tg,new AbortController),p=n.combinedSignal(v);if(S(Pt,Ef)||Z(Pt,Ef,d),S(Pt,Pf)??Z(Pt,Pf,u),window.addEventListener("pointerup",x=>{var y;S(Pt,Ef)===x.pointerId?this._endDraw(x):(y=S(Pt,Tf))==null||y.delete(x.pointerId)},{signal:p}),window.addEventListener("pointercancel",x=>{var y;S(Pt,Ef)===x.pointerId?this._currentParent.endDrawingSession():(y=S(Pt,Tf))==null||y.delete(x.pointerId)},{signal:p}),window.addEventListener("pointerdown",x=>{S(Pt,Pf)===x.pointerType&&((S(Pt,Tf)||Z(Pt,Tf,new Set)).add(x.pointerId),S(Pt,Zs).isCancellable()&&(S(Pt,Zs).removeLastElement(),S(Pt,Zs).isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:p}),window.addEventListener("contextmenu",jl,{signal:p}),o.addEventListener("pointermove",this._drawMove.bind(this),{signal:p}),o.addEventListener("touchmove",x=>{x.timeStamp===S(Pt,Dg)&&hs(x)},{signal:p}),n.toggleDrawing(),(g=r._editorUndoBar)==null||g.hide(),S(Pt,Zs)){n.drawLayer.updateProperties(this._currentDrawId,S(Pt,Zs).startNew(l,c,f,m,h));return}r.updateUIForDefaultProperties(this),Z(Pt,Zs,this.createDrawerInstance(l,c,f,m,h)),Z(Pt,Ig,this.getDefaultDrawingOptions()),this._currentParent=n,{id:this._currentDrawId}=n.drawLayer.draw(this._mergeSVGProperties(S(Pt,Ig).toSVGProperties(),S(Pt,Zs).defaultSVGProperties),!0,!1)}static _drawMove(n){var o;if(Z(Pt,Dg,-1),!S(Pt,Zs))return;const{offsetX:r,offsetY:i,pointerId:a}=n;if(S(Pt,Ef)===a){if(((o=S(Pt,Tf))==null?void 0:o.size)>=1){this._endDraw(n);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,S(Pt,Zs).add(r,i)),Z(Pt,Dg,n.timeStamp),hs(n)}}static _cleanup(n){n&&(this._currentDrawId=-1,this._currentParent=null,Z(Pt,Zs,null),Z(Pt,Ig,null),Z(Pt,Pf,null),Z(Pt,Dg,NaN)),S(Pt,Tg)&&(S(Pt,Tg).abort(),Z(Pt,Tg,null),Z(Pt,Ef,NaN),Z(Pt,Tf,null))}static _endDraw(n){const r=this._currentParent;if(r){if(r.toggleDrawing(!0),this._cleanup(!1),(n==null?void 0:n.target)===r.div&&r.drawLayer.updateProperties(this._currentDrawId,S(Pt,Zs).end(n.offsetX,n.offsetY)),this.supportMultipleDrawings){const i=S(Pt,Zs),a=this._currentDrawId,o=i.getLastElement();r.addCommands({cmd:()=>{r.drawLayer.updateProperties(a,i.setLastElement(o))},undo:()=>{r.drawLayer.updateProperties(a,i.removeLastElement())},mustExec:!1,type:Nn.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(n){const r=this._currentParent;if(!r)return null;if(r.toggleDrawing(!0),r.cleanUndoStack(Nn.DRAW_STEP),!S(Pt,Zs).isEmpty()){const{pageDimensions:[i,a],scale:o}=r,l=r.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:S(Pt,Zs).getOutlines(i*o,a*o,o,this._INNER_MARGIN),drawingOptions:S(Pt,Ig),mustBeCommitted:!n});return this._cleanup(!0),l}return r.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(n){}static deserializeDraw(n,r,i,a,o,l){ir("Not implemented")}static async deserialize(n,r,i){var h,f;const{rawDims:{pageWidth:a,pageHeight:o,pageX:l,pageY:c}}=r.viewport,d=this.deserializeDraw(l,c,a,o,this._INNER_MARGIN,n),u=await super.deserialize(n,r,i);return u.createDrawingOptions(n),se(h=u,zS,wR).call(h,{drawOutlines:d}),se(f=u,kg,Mw).call(f),u.onScaleChanging(),u.rotate(),u}serializeDraw(n){const[r,i]=this.pageTranslation,[a,o]=this.pageDimensions;return S(this,po).serialize([r,i,a,o],n)}renderAnnotationElement(n){return n.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}};po=new WeakMap,ky=new WeakMap,Zs=new WeakMap,Tg=new WeakMap,Ig=new WeakMap,Ef=new WeakMap,Pf=new WeakMap,Tf=new WeakMap,Dg=new WeakMap,zS=new WeakSet,wR=function({drawOutlines:n,drawId:r,drawingOptions:i}){Z(this,po,n),this._drawingOptions||(this._drawingOptions=i),this.annotationElementId||this._uiManager.a11yAlert(`pdfjs-editor-${this.editorType}-added-alert`),r>=0?(this._drawId=r,this.parent.drawLayer.finalizeDraw(r,n.defaultProperties)):this._drawId=se(this,US,jR).call(this,n,this.parent),se(this,_g,Fw).call(this,n.box)},US=new WeakSet,jR=function(n,r){const{id:i}=r.drawLayer.draw(Pt._mergeSVGProperties(this._drawingOptions.toSVGProperties(),n.defaultSVGProperties),!1,!1);return i},VS=new WeakSet,NR=function(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())},kg=new WeakSet,Mw=function(n=this.parent){if(!(this._drawId!==null&&this.parent===n)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,n.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=se(this,US,jR).call(this,S(this,po),n)}},fI=new WeakSet,AQ=function([n,r,i,a]){const{parentDimensions:[o,l],rotation:c}=this;switch(c){case 90:return[r,1-n,i*(l/o),a*(o/l)];case 180:return[1-n,1-r,i,a];case 270:return[1-r,n,i*(l/o),a*(o/l)];default:return[n,r,i,a]}},_y=new WeakSet,vE=function(){const{x:n,y:r,width:i,height:a,parentDimensions:[o,l],rotation:c}=this;switch(c){case 90:return[1-r,n,i*(o/l),a*(l/o)];case 180:return[1-n,1-r,i,a];case 270:return[r,1-n,i*(o/l),a*(l/o)];default:return[n,r,i,a]}},_g=new WeakSet,Fw=function(n){if([this.x,this.y,this.width,this.height]=se(this,fI,AQ).call(this,n),this.div){this.fixAndSetPosition();const[r,i]=this.parentDimensions;this.setDims(this.width*r,this.height*i)}this._onResized()},If=new WeakSet,kx=function(){const{x:n,y:r,width:i,height:a,rotation:o,parentRotation:l,parentDimensions:[c,d]}=this;switch((o*4+l)/90){case 1:return[1-r-a,n,a,i];case 2:return[1-n-i,1-r-a,i,a];case 3:return[r,1-n-i,a,i];case 4:return[n,r-i*(c/d),a*(d/c),i*(c/d)];case 5:return[1-r,n,i*(c/d),a*(d/c)];case 6:return[1-n-a*(d/c),1-r,a*(d/c),i*(c/d)];case 7:return[r-i*(c/d),1-n-a*(d/c),i*(c/d),a*(d/c)];case 8:return[n-i,r-a,i,a];case 9:return[1-r,n-i,a,i];case 10:return[1-n,1-r,i,a];case 11:return[r-a,1-n,a,i];case 12:return[n-a*(d/c),r,a*(d/c),i*(c/d)];case 13:return[1-r-i*(c/d),n-a*(d/c),i*(c/d),a*(d/c)];case 14:return[1-n,1-r-i*(c/d),a*(d/c),i*(c/d)];case 15:return[r,1-n,i*(c/d),a*(d/c)];default:return[n,r,i,a]}},ut(Pt,"_currentDrawId",-1),ut(Pt,"_currentParent",null),G(Pt,Zs,null),G(Pt,Tg,null),G(Pt,Ig,null),G(Pt,Ef,NaN),G(Pt,Pf,null),G(Pt,Tf,null),G(Pt,Dg,NaN),ut(Pt,"_INNER_MARGIN",3);let uP=Pt;var td,Qs,Js,Og,Oy,aa,ji,cl,Lg,Rg,Mg,Ly,xE;class tfe{constructor(e,n,r,i,a,o){G(this,Ly);G(this,td,new Float64Array(6));G(this,Qs,void 0);G(this,Js,void 0);G(this,Og,void 0);G(this,Oy,void 0);G(this,aa,void 0);G(this,ji,"");G(this,cl,0);G(this,Lg,new fA);G(this,Rg,void 0);G(this,Mg,void 0);Z(this,Rg,r),Z(this,Mg,i),Z(this,Og,a),Z(this,Oy,o),[e,n]=se(this,Ly,xE).call(this,e,n);const l=Z(this,Qs,[NaN,NaN,NaN,NaN,e,n]);Z(this,aa,[e,n]),Z(this,Js,[{line:l,points:S(this,aa)}]),S(this,td).set(l,0)}updateProperty(e,n){e==="stroke-width"&&Z(this,Oy,n)}isEmpty(){return!S(this,Js)||S(this,Js).length===0}isCancellable(){return S(this,aa).length<=10}add(e,n){[e,n]=se(this,Ly,xE).call(this,e,n);const[r,i,a,o]=S(this,td).subarray(2,6),l=e-a,c=n-o;return Math.hypot(S(this,Rg)*l,S(this,Mg)*c)<=2?null:(S(this,aa).push(e,n),isNaN(r)?(S(this,td).set([a,o,e,n],2),S(this,Qs).push(NaN,NaN,NaN,NaN,e,n),{path:{d:this.toSVGPath()}}):(isNaN(S(this,td)[0])&&S(this,Qs).splice(6,6),S(this,td).set([r,i,a,o,e,n],0),S(this,Qs).push(...St.createBezierPoints(r,i,a,o,e,n)),{path:{d:this.toSVGPath()}}))}end(e,n){const r=this.add(e,n);return r||(S(this,aa).length===2?{path:{d:this.toSVGPath()}}:null)}startNew(e,n,r,i,a){Z(this,Rg,r),Z(this,Mg,i),Z(this,Og,a),[e,n]=se(this,Ly,xE).call(this,e,n);const o=Z(this,Qs,[NaN,NaN,NaN,NaN,e,n]);Z(this,aa,[e,n]);const l=S(this,Js).at(-1);return l&&(l.line=new Float32Array(l.line),l.points=new Float32Array(l.points)),S(this,Js).push({line:o,points:S(this,aa)}),S(this,td).set(o,0),Z(this,cl,0),this.toSVGPath(),null}getLastElement(){return S(this,Js).at(-1)}setLastElement(e){return S(this,Js)?(S(this,Js).push(e),Z(this,Qs,e.line),Z(this,aa,e.points),Z(this,cl,0),{path:{d:this.toSVGPath()}}):S(this,Lg).setLastElement(e)}removeLastElement(){if(!S(this,Js))return S(this,Lg).removeLastElement();S(this,Js).pop(),Z(this,ji,"");for(let e=0,n=S(this,Js).length;e<n;e++){const{line:r,points:i}=S(this,Js)[e];Z(this,Qs,r),Z(this,aa,i),Z(this,cl,0),this.toSVGPath()}return{path:{d:S(this,ji)}}}toSVGPath(){const e=St.svgRound(S(this,Qs)[4]),n=St.svgRound(S(this,Qs)[5]);if(S(this,aa).length===2)return Z(this,ji,`${S(this,ji)} M ${e} ${n} Z`),S(this,ji);if(S(this,aa).length<=6){const i=S(this,ji).lastIndexOf("M");Z(this,ji,`${S(this,ji).slice(0,i)} M ${e} ${n}`),Z(this,cl,6)}if(S(this,aa).length===4){const i=St.svgRound(S(this,Qs)[10]),a=St.svgRound(S(this,Qs)[11]);return Z(this,ji,`${S(this,ji)} L ${i} ${a}`),Z(this,cl,12),S(this,ji)}const r=[];S(this,cl)===0&&(r.push(`M ${e} ${n}`),Z(this,cl,6));for(let i=S(this,cl),a=S(this,Qs).length;i<a;i+=6){const[o,l,c,d,u,h]=S(this,Qs).slice(i,i+6).map(St.svgRound);r.push(`C${o} ${l} ${c} ${d} ${u} ${h}`)}return Z(this,ji,S(this,ji)+r.join(" ")),Z(this,cl,S(this,Qs).length),S(this,ji)}getOutlines(e,n,r,i){const a=S(this,Js).at(-1);return a.line=new Float32Array(a.line),a.points=new Float32Array(a.points),S(this,Lg).build(S(this,Js),e,n,r,S(this,Og),S(this,Oy),i),Z(this,td,null),Z(this,Qs,null),Z(this,Js,null),Z(this,ji,null),S(this,Lg)}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}td=new WeakMap,Qs=new WeakMap,Js=new WeakMap,Og=new WeakMap,Oy=new WeakMap,aa=new WeakMap,ji=new WeakMap,cl=new WeakMap,Lg=new WeakMap,Rg=new WeakMap,Mg=new WeakMap,Ly=new WeakSet,xE=function(e,n){return St._normalizePoint(e,n,S(this,Rg),S(this,Mg),S(this,Og))};var oa,qS,HS,go,nd,rd,Ry,My,Fg,ec,Zd,mI,CQ,pI,EQ,gI,PQ;class fA extends St{constructor(){super(...arguments);G(this,ec);G(this,mI);G(this,pI);G(this,gI);G(this,oa,void 0);G(this,qS,0);G(this,HS,void 0);G(this,go,void 0);G(this,nd,void 0);G(this,rd,void 0);G(this,Ry,void 0);G(this,My,void 0);G(this,Fg,void 0)}build(n,r,i,a,o,l,c){Z(this,nd,r),Z(this,rd,i),Z(this,Ry,a),Z(this,My,o),Z(this,Fg,l),Z(this,HS,c??0),Z(this,go,n),se(this,pI,EQ).call(this)}get thickness(){return S(this,Fg)}setLastElement(n){return S(this,go).push(n),{path:{d:this.toSVGPath()}}}removeLastElement(){return S(this,go).pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const n=[];for(const{line:r}of S(this,go)){if(n.push(`M${St.svgRound(r[4])} ${St.svgRound(r[5])}`),r.length===6){n.push("Z");continue}if(r.length===12&&isNaN(r[6])){n.push(`L${St.svgRound(r[10])} ${St.svgRound(r[11])}`);continue}for(let i=6,a=r.length;i<a;i+=6){const[o,l,c,d,u,h]=r.subarray(i,i+6).map(St.svgRound);n.push(`C${o} ${l} ${c} ${d} ${u} ${h}`)}}return n.join("")}serialize([n,r,i,a],o){const l=[],c=[],[d,u,h,f]=se(this,mI,CQ).call(this);let m,v,p,g,x,y,b,w,N;switch(S(this,My)){case 0:N=St._rescale,m=n,v=r+a,p=i,g=-a,x=n+d*i,y=r+(1-u-f)*a,b=n+(d+h)*i,w=r+(1-u)*a;break;case 90:N=St._rescaleAndSwap,m=n,v=r,p=i,g=a,x=n+u*i,y=r+d*a,b=n+(u+f)*i,w=r+(d+h)*a;break;case 180:N=St._rescale,m=n+i,v=r,p=-i,g=a,x=n+(1-d-h)*i,y=r+u*a,b=n+(1-d)*i,w=r+(u+f)*a;break;case 270:N=St._rescaleAndSwap,m=n+i,v=r+a,p=-i,g=-a,x=n+(1-u-f)*i,y=r+(1-d-h)*a,b=n+(1-u)*i,w=r+(1-d)*a;break}for(const{line:E,points:C}of S(this,go))l.push(N(E,m,v,p,g,o?new Array(E.length):null)),c.push(N(C,m,v,p,g,o?new Array(C.length):null));return{lines:l,points:c,rect:[x,y,b,w]}}static deserialize(n,r,i,a,o,{paths:{lines:l,points:c},rotation:d,thickness:u}){const h=[];let f,m,v,p,g;switch(d){case 0:g=St._rescale,f=-n/i,m=r/a+1,v=1/i,p=-1/a;break;case 90:g=St._rescaleAndSwap,f=-r/a,m=-n/i,v=1/a,p=1/i;break;case 180:g=St._rescale,f=n/i+1,m=-r/a,v=-1/i,p=1/a;break;case 270:g=St._rescaleAndSwap,f=r/a+1,m=n/i+1,v=-1/a,p=-1/i;break}if(!l){l=[];for(const y of c){const b=y.length;if(b===2){l.push(new Float32Array([NaN,NaN,NaN,NaN,y[0],y[1]]));continue}if(b===4){l.push(new Float32Array([NaN,NaN,NaN,NaN,y[0],y[1],NaN,NaN,NaN,NaN,y[2],y[3]]));continue}const w=new Float32Array(3*(b-2));l.push(w);let[N,E,C,j]=y.subarray(0,4);w.set([NaN,NaN,NaN,NaN,N,E],0);for(let I=4;I<b;I+=2){const k=y[I],D=y[I+1];w.set(St.createBezierPoints(N,E,C,j,k,D),(I-2)*3),[N,E,C,j]=[C,j,k,D]}}}for(let y=0,b=l.length;y<b;y++)h.push({line:g(l[y].map(w=>w??NaN),f,m,v,p),points:g(c[y].map(w=>w??NaN),f,m,v,p)});const x=new this.prototype.constructor;return x.build(h,i,a,1,d,u,o),x}get box(){return S(this,oa)}updateProperty(n,r){return n==="stroke-width"?se(this,gI,PQ).call(this,r):null}updateParentDimensions([n,r],i){const[a,o]=se(this,ec,Zd).call(this);Z(this,nd,n),Z(this,rd,r),Z(this,Ry,i);const[l,c]=se(this,ec,Zd).call(this),d=l-a,u=c-o,h=S(this,oa);return h[0]-=d,h[1]-=u,h[2]+=2*d,h[3]+=2*u,h}updateRotation(n){return Z(this,qS,n),{path:{transform:this.rotationTransform}}}get viewBox(){return S(this,oa).map(St.svgRound).join(" ")}get defaultProperties(){const[n,r]=S(this,oa);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${St.svgRound(n)} ${St.svgRound(r)}`}}}get rotationTransform(){const[,,n,r]=S(this,oa);let i=0,a=0,o=0,l=0,c=0,d=0;switch(S(this,qS)){case 90:a=r/n,o=-n/r,c=n;break;case 180:i=-1,l=-1,c=n,d=r;break;case 270:a=-r/n,o=n/r,d=r;break;default:return""}return`matrix(${i} ${a} ${o} ${l} ${St.svgRound(c)} ${St.svgRound(d)})`}getPathResizingSVGProperties([n,r,i,a]){const[o,l]=se(this,ec,Zd).call(this),[c,d,u,h]=S(this,oa);if(Math.abs(u-o)<=St.PRECISION||Math.abs(h-l)<=St.PRECISION){const g=n+i/2-(c+u/2),x=r+a/2-(d+h/2);return{path:{"transform-origin":`${St.svgRound(n)} ${St.svgRound(r)}`,transform:`${this.rotationTransform} translate(${g} ${x})`}}}const f=(i-2*o)/(u-2*o),m=(a-2*l)/(h-2*l),v=u/i,p=h/a;return{path:{"transform-origin":`${St.svgRound(c)} ${St.svgRound(d)}`,transform:`${this.rotationTransform} scale(${v} ${p}) translate(${St.svgRound(o)} ${St.svgRound(l)}) scale(${f} ${m}) translate(${St.svgRound(-o)} ${St.svgRound(-l)})`}}}getPathResizedSVGProperties([n,r,i,a]){const[o,l]=se(this,ec,Zd).call(this),c=S(this,oa),[d,u,h,f]=c;if(c[0]=n,c[1]=r,c[2]=i,c[3]=a,Math.abs(h-o)<=St.PRECISION||Math.abs(f-l)<=St.PRECISION){const x=n+i/2-(d+h/2),y=r+a/2-(u+f/2);for(const{line:b,points:w}of S(this,go))St._translate(b,x,y,b),St._translate(w,x,y,w);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${St.svgRound(n)} ${St.svgRound(r)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const m=(i-2*o)/(h-2*o),v=(a-2*l)/(f-2*l),p=-m*(d+o)+n+o,g=-v*(u+l)+r+l;if(m!==1||v!==1||p!==0||g!==0)for(const{line:x,points:y}of S(this,go))St._rescale(x,p,g,m,v,x),St._rescale(y,p,g,m,v,y);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${St.svgRound(n)} ${St.svgRound(r)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([n,r],i){const[a,o]=i,l=S(this,oa),c=n-l[0],d=r-l[1];if(S(this,nd)===a&&S(this,rd)===o)for(const{line:u,points:h}of S(this,go))St._translate(u,c,d,u),St._translate(h,c,d,h);else{const u=S(this,nd)/a,h=S(this,rd)/o;Z(this,nd,a),Z(this,rd,o);for(const{line:f,points:m}of S(this,go))St._rescale(f,c,d,u,h,f),St._rescale(m,c,d,u,h,m);l[2]*=u,l[3]*=h}return l[0]=n,l[1]=r,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${St.svgRound(n)} ${St.svgRound(r)}`}}}get defaultSVGProperties(){const n=S(this,oa);return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${St.svgRound(n[0])} ${St.svgRound(n[1])}`,transform:this.rotationTransform||null},bbox:n}}}oa=new WeakMap,qS=new WeakMap,HS=new WeakMap,go=new WeakMap,nd=new WeakMap,rd=new WeakMap,Ry=new WeakMap,My=new WeakMap,Fg=new WeakMap,ec=new WeakSet,Zd=function(n=S(this,Fg)){const r=S(this,HS)+n/2*S(this,Ry);return S(this,My)%180===0?[r/S(this,nd),r/S(this,rd)]:[r/S(this,rd),r/S(this,nd)]},mI=new WeakSet,CQ=function(){const[n,r,i,a]=S(this,oa),[o,l]=se(this,ec,Zd).call(this,0);return[n+o,r+l,i-2*o,a-2*l]},pI=new WeakSet,EQ=function(){const n=Z(this,oa,new Float32Array([1/0,1/0,-1/0,-1/0]));for(const{line:a}of S(this,go)){if(a.length<=12){for(let c=4,d=a.length;c<d;c+=6)kt.pointBoundingBox(a[c],a[c+1],n);continue}let o=a[4],l=a[5];for(let c=6,d=a.length;c<d;c+=6){const[u,h,f,m,v,p]=a.subarray(c,c+6);kt.bezierBoundingBox(o,l,u,h,f,m,v,p,n),o=v,l=p}}const[r,i]=se(this,ec,Zd).call(this);n[0]=Wi(n[0]-r,0,1),n[1]=Wi(n[1]-i,0,1),n[2]=Wi(n[2]+r,0,1),n[3]=Wi(n[3]+i,0,1),n[2]-=n[0],n[3]-=n[1]},gI=new WeakSet,PQ=function(n){const[r,i]=se(this,ec,Zd).call(this);Z(this,Fg,n);const[a,o]=se(this,ec,Zd).call(this),[l,c]=[a-r,o-i],d=S(this,oa);return d[0]-=l,d[1]-=c,d[2]+=2*l,d[3]+=2*c,d};class ZI extends SQ{constructor(e){super(),this._viewParameters=e,super.updateProperties({fill:"none",stroke:wr._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(e,n){e==="stroke-width"&&(n??(n=this["stroke-width"]),n*=this._viewParameters.realScale),super.updateSVGProperty(e,n)}clone(){const e=new ZI(this._viewParameters);return e.updateAll(this),e}}var vI,TQ;const r0=class r0 extends uP{constructor(n){super({...n,name:"inkEditor"});G(this,vI);this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(n,r){wr.initialize(n,r),this._defaultDrawingOptions=new ZI(r.viewParameters)}static getDefaultDrawingOptions(n){const r=this._defaultDrawingOptions.clone();return r.updateProperties(n),r}static get supportMultipleDrawings(){return!0}static get typesMap(){return xn(this,"typesMap",new Map([[Nn.INK_THICKNESS,"stroke-width"],[Nn.INK_COLOR,"stroke"],[Nn.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(n,r,i,a,o){return new tfe(n,r,i,a,o,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(n,r,i,a,o,l){return fA.deserialize(n,r,i,a,o,l)}static async deserialize(n,r,i){let a=null;if(n instanceof x$){const{data:{inkLists:l,rect:c,rotation:d,id:u,color:h,opacity:f,borderStyle:{rawWidth:m},popupRef:v},parent:{page:{pageNumber:p}}}=n;a=n={annotationType:en.INK,color:Array.from(h),thickness:m,opacity:f,paths:{points:l},boxes:null,pageIndex:p-1,rect:c.slice(0),rotation:d,annotationElementId:u,id:u,deleted:!1,popupRef:v}}const o=await super.deserialize(n,r,i);return o._initialData=a,o}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:n,_drawingOptions:r,parent:i}=this;r.updateSVGProperty("stroke-width"),i.drawLayer.updateProperties(n,r.toSVGProperties())}static onScaleChangingWhenDrawing(){const n=this._currentParent;n&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),n.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:n,thickness:r,opacity:i}){this._drawingOptions=r0.getDefaultDrawingOptions({stroke:kt.makeHexColor(...n),"stroke-width":r,"stroke-opacity":i})}serialize(n=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:r,points:i,rect:a}=this.serializeDraw(n),{_drawingOptions:{stroke:o,"stroke-opacity":l,"stroke-width":c}}=this,d={annotationType:en.INK,color:wr._colorManager.convert(o),opacity:l,thickness:c,paths:{lines:r,points:i},pageIndex:this.pageIndex,rect:a,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return n?(d.isCopy=!0,d):this.annotationElementId&&!se(this,vI,TQ).call(this,d)?null:(d.id=this.annotationElementId,d)}renderAnnotationElement(n){const{points:r,rect:i}=this.serializeDraw(!1);return n.updateEdited({rect:i,thickness:this._drawingOptions["stroke-width"],points:r}),null}};vI=new WeakSet,TQ=function(n){const{color:r,thickness:i,opacity:a,pageIndex:o}=this._initialData;return this._hasBeenMoved||this._hasBeenResized||n.color.some((l,c)=>l!==r[c])||n.thickness!==i||n.opacity!==a||n.pageIndex!==o},ut(r0,"_type","ink"),ut(r0,"_editorType",en.INK),ut(r0,"_defaultDrawingOptions",null);let SR=r0;class AR extends fA{toSVGPath(){let e=super.toSVGPath();return e.endsWith("Z")||(e+="Z"),e}}const eC=8,J1=3;var $g,WS,CR,tc,xI,IQ,yI,DQ,GS,ER,Fy,yE,bI,kQ,wI,_Q,jI,OQ,KS,PR,YS,TR,NI,LQ;class Es{static extractContoursFromText(e,{fontFamily:n,fontStyle:r,fontWeight:i},a,o,l,c){let d=new OffscreenCanvas(1,1),u=d.getContext("2d",{alpha:!1});const h=200,f=u.font=`${r} ${i} ${h}px ${n}`,{actualBoundingBoxLeft:m,actualBoundingBoxRight:v,actualBoundingBoxAscent:p,actualBoundingBoxDescent:g,fontBoundingBoxAscent:x,fontBoundingBoxDescent:y,width:b}=u.measureText(e),w=1.5,N=Math.ceil(Math.max(Math.abs(m)+Math.abs(v)||0,b)*w),E=Math.ceil(Math.max(Math.abs(p)+Math.abs(g)||h,Math.abs(x)+Math.abs(y)||h)*w);d=new OffscreenCanvas(N,E),u=d.getContext("2d",{alpha:!0,willReadFrequently:!0}),u.font=f,u.filter="grayscale(1)",u.fillStyle="white",u.fillRect(0,0,N,E),u.fillStyle="black",u.fillText(e,N*(w-1)/2,E*(3-w)/2);const C=se(this,KS,PR).call(this,u.getImageData(0,0,N,E).data),j=se(this,jI,OQ).call(this,C),I=se(this,YS,TR).call(this,j),k=se(this,GS,ER).call(this,C,N,E,I);return this.processDrawnLines({lines:{curves:k,width:N,height:E},pageWidth:a,pageHeight:o,rotation:l,innerMargin:c,mustSmooth:!0,areContours:!0})}static process(e,n,r,i,a){const[o,l,c]=se(this,NI,LQ).call(this,e),[d,u]=se(this,wI,_Q).call(this,o,l,c,Math.hypot(l,c)*S(this,$g).sigmaSFactor,S(this,$g).sigmaR,S(this,$g).kernelSize),h=se(this,YS,TR).call(this,u),f=se(this,GS,ER).call(this,d,l,c,h);return this.processDrawnLines({lines:{curves:f,width:l,height:c},pageWidth:n,pageHeight:r,rotation:i,innerMargin:a,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:e,pageWidth:n,pageHeight:r,rotation:i,innerMargin:a,mustSmooth:o,areContours:l}){i%180!==0&&([n,r]=[r,n]);const{curves:c,width:d,height:u}=e,h=e.thickness??0,f=[],m=Math.min(n/d,r/u),v=m/n,p=m/r,g=[];for(const{points:y}of c){const b=o?se(this,bI,kQ).call(this,y):y;if(!b)continue;g.push(b);const w=b.length,N=new Float32Array(w),E=new Float32Array(3*(w===2?2:w-2));if(f.push({line:E,points:N}),w===2){N[0]=b[0]*v,N[1]=b[1]*p,E.set([NaN,NaN,NaN,NaN,N[0],N[1]],0);continue}let[C,j,I,k]=b;C*=v,j*=p,I*=v,k*=p,N.set([C,j,I,k],0),E.set([NaN,NaN,NaN,NaN,C,j],0);for(let D=4;D<w;D+=2){const P=N[D]=b[D]*v,R=N[D+1]=b[D+1]*p;E.set(St.createBezierPoints(C,j,I,k,P,R),(D-2)*3),[C,j,I,k]=[I,k,P,R]}}if(f.length===0)return null;const x=l?new AR:new fA;return x.build(f,n,r,1,i,l?0:h,a),{outline:x,newCurves:g,areContours:l,thickness:h,width:d,height:u}}static async compressSignature({outlines:e,areContours:n,thickness:r,width:i,height:a}){let o=1/0,l=-1/0,c=0;for(const b of e){c+=b.length;for(let w=2,N=b.length;w<N;w++){const E=b[w]-b[w-2];o=Math.min(o,E),l=Math.max(l,E)}}let d;o>=-128&&l<=127?d=Int8Array:o>=-32768&&l<=32767?d=Int16Array:d=Int32Array;const u=e.length,h=eC+J1*u,f=new Uint32Array(h);let m=0;f[m++]=h*Uint32Array.BYTES_PER_ELEMENT+(c-2*u)*d.BYTES_PER_ELEMENT,f[m++]=0,f[m++]=i,f[m++]=a,f[m++]=n?0:1,f[m++]=Math.max(0,Math.floor(r??0)),f[m++]=u,f[m++]=d.BYTES_PER_ELEMENT;for(const b of e)f[m++]=b.length-2,f[m++]=b[0],f[m++]=b[1];const v=new CompressionStream("deflate-raw"),p=v.writable.getWriter();await p.ready,p.write(f);const g=d.prototype.constructor;for(const b of e){const w=new g(b.length-2);for(let N=2,E=b.length;N<E;N++)w[N-2]=b[N]-b[N-2];p.write(w)}p.close();const x=await new Response(v.readable).arrayBuffer(),y=new Uint8Array(x);return DX(y)}static async decompressSignature(e){try{const n=Due(e),{readable:r,writable:i}=new DecompressionStream("deflate-raw"),a=i.getWriter();await a.ready,a.write(n).then(async()=>{await a.ready,await a.close()}).catch(()=>{});let o=null,l=0;for await(const b of r)o||(o=new Uint8Array(new Uint32Array(b.buffer,0,4)[0])),o.set(b,l),l+=b.length;const c=new Uint32Array(o.buffer,0,o.length>>2),d=c[1];if(d!==0)throw new Error(`Invalid version: ${d}`);const u=c[2],h=c[3],f=c[4]===0,m=c[5],v=c[6],p=c[7],g=[],x=(eC+J1*v)*Uint32Array.BYTES_PER_ELEMENT;let y;switch(p){case Int8Array.BYTES_PER_ELEMENT:y=new Int8Array(o.buffer,x);break;case Int16Array.BYTES_PER_ELEMENT:y=new Int16Array(o.buffer,x);break;case Int32Array.BYTES_PER_ELEMENT:y=new Int32Array(o.buffer,x);break}l=0;for(let b=0;b<v;b++){const w=c[J1*b+eC],N=new Float32Array(w+2);g.push(N);for(let E=0;E<J1-1;E++)N[E]=c[J1*b+eC+E+1];for(let E=0;E<w;E++)N[E+2]=N[E]+y[l++]}return{areContours:f,thickness:m,outlines:g,width:u,height:h}}catch(n){return an(`decompressSignature: ${n}`),null}}}$g=new WeakMap,WS=new WeakSet,CR=function(e,n,r,i){return r-=e,i-=n,r===0?i>0?0:4:r===1?i+6:2-i},tc=new WeakMap,xI=new WeakSet,IQ=function(e,n,r,i,a,o,l){const c=se(this,WS,CR).call(this,r,i,a,o);for(let d=0;d<8;d++){const u=(-d+c-l+16)%8,h=S(this,tc)[2*u],f=S(this,tc)[2*u+1];if(e[(r+h)*n+(i+f)]!==0)return u}return-1},yI=new WeakSet,DQ=function(e,n,r,i,a,o,l){const c=se(this,WS,CR).call(this,r,i,a,o);for(let d=0;d<8;d++){const u=(d+c+l+16)%8,h=S(this,tc)[2*u],f=S(this,tc)[2*u+1];if(e[(r+h)*n+(i+f)]!==0)return u}return-1},GS=new WeakSet,ER=function(e,n,r,i){const a=e.length,o=new Int32Array(a);for(let u=0;u<a;u++)o[u]=e[u]<=i?1:0;for(let u=1;u<r-1;u++)o[u*n]=o[u*n+n-1]=0;for(let u=0;u<n;u++)o[u]=o[n*r-1-u]=0;let l=1,c;const d=[];for(let u=1;u<r-1;u++){c=1;for(let h=1;h<n-1;h++){const f=u*n+h,m=o[f];if(m===0)continue;let v=u,p=h;if(m===1&&o[f-1]===0)l+=1,p-=1;else if(m>=1&&o[f+1]===0)l+=1,p+=1,m>1&&(c=m);else{m!==1&&(c=Math.abs(m));continue}const g=[h,u],x=p===h+1,y={isHole:x,points:g,id:l,parent:0};d.push(y);let b;for(const D of d)if(D.id===c){b=D;break}b?b.isHole?y.parent=x?b.parent:c:y.parent=x?c:b.parent:y.parent=x?c:0;const w=se(this,xI,IQ).call(this,o,n,u,h,v,p,0);if(w===-1){o[f]=-l,o[f]!==1&&(c=Math.abs(o[f]));continue}let N=S(this,tc)[2*w],E=S(this,tc)[2*w+1];const C=u+N,j=h+E;v=C,p=j;let I=u,k=h;for(;;){const D=se(this,yI,DQ).call(this,o,n,I,k,v,p,1);N=S(this,tc)[2*D],E=S(this,tc)[2*D+1];const P=I+N,R=k+E;g.push(R,P);const _=I*n+k;if(o[_+1]===0?o[_]=-l:o[_]===1&&(o[_]=l),P===u&&R===h&&I===C&&k===j){o[f]!==1&&(c=Math.abs(o[f]));break}else v=I,p=k,I=P,k=R}}}return d},Fy=new WeakSet,yE=function(e,n,r,i){if(r-n<=4){for(let C=n;C<r-2;C+=2)i.push(e[C],e[C+1]);return}const a=e[n],o=e[n+1],l=e[r-4]-a,c=e[r-3]-o,d=Math.hypot(l,c),u=l/d,h=c/d,f=u*o-h*a,m=c/l,v=1/d,p=Math.atan(m),g=Math.cos(p),x=Math.sin(p),y=v*(Math.abs(g)+Math.abs(x)),b=v*(1-y+y**2),w=Math.max(Math.atan(Math.abs(x+g)*b),Math.atan(Math.abs(x-g)*b));let N=0,E=n;for(let C=n+2;C<r-2;C+=2){const j=Math.abs(f-u*e[C+1]+h*e[C]);j>N&&(E=C,N=j)}N>(d*w)**2?(se(this,Fy,yE).call(this,e,n,E+2,i),se(this,Fy,yE).call(this,e,E,r,i)):i.push(a,o)},bI=new WeakSet,kQ=function(e){const n=[],r=e.length;return se(this,Fy,yE).call(this,e,0,r,n),n.push(e[r-2],e[r-1]),n.length<=4?null:n},wI=new WeakSet,_Q=function(e,n,r,i,a,o){const l=new Float32Array(o**2),c=-2*i**2,d=o>>1;for(let p=0;p<o;p++){const g=(p-d)**2;for(let x=0;x<o;x++)l[p*o+x]=Math.exp((g+(x-d)**2)/c)}const u=new Float32Array(256),h=-2*a**2;for(let p=0;p<256;p++)u[p]=Math.exp(p**2/h);const f=e.length,m=new Uint8Array(f),v=new Uint32Array(256);for(let p=0;p<r;p++)for(let g=0;g<n;g++){const x=p*n+g,y=e[x];let b=0,w=0;for(let E=0;E<o;E++){const C=p+E-d;if(!(C<0||C>=r))for(let j=0;j<o;j++){const I=g+j-d;if(I<0||I>=n)continue;const k=e[C*n+I],D=l[E*o+j]*u[Math.abs(k-y)];b+=k*D,w+=D}}const N=m[x]=Math.round(b/w);v[N]++}return[m,v]},jI=new WeakSet,OQ=function(e){const n=new Uint32Array(256);for(const r of e)n[r]++;return n},KS=new WeakSet,PR=function(e){const n=e.length,r=new Uint8ClampedArray(n>>2);let i=-1/0,a=1/0;for(let l=0,c=r.length;l<c;l++){if(e[(l<<2)+3]===0){i=r[l]=255;continue}const u=r[l]=e[l<<2];u>i&&(i=u),u<a&&(a=u)}const o=255/(i-a);for(let l=0;l<n;l++)r[l]=(r[l]-a)*o;return r},YS=new WeakSet,TR=function(e){let n,r=-1/0,i=-1/0;const a=e.findIndex(c=>c!==0);let o=a,l=a;for(n=a;n<256;n++){const c=e[n];c>r&&(n-o>i&&(i=n-o,l=n-1),r=c,o=n)}for(n=l-1;n>=0&&!(e[n]>e[n+1]);n--);return n},NI=new WeakSet,LQ=function(e){const n=e,{width:r,height:i}=e,{maxDim:a}=S(this,$g);let o=r,l=i;if(r>a||i>a){let f=r,m=i,v=Math.log2(Math.max(r,i)/a);const p=Math.floor(v);v=v===p?p-1:p;for(let x=0;x<v;x++){o=Math.ceil(f/2),l=Math.ceil(m/2);const y=new OffscreenCanvas(o,l);y.getContext("2d").drawImage(e,0,0,f,m,0,0,o,l),f=o,m=l,e!==n&&e.close(),e=y.transferToImageBitmap()}const g=Math.min(a/o,a/l);o=Math.round(o*g),l=Math.round(l*g)}const d=new OffscreenCanvas(o,l).getContext("2d",{willReadFrequently:!0});d.filter="grayscale(1)",d.drawImage(e,0,0,e.width,e.height,0,0,o,l);const u=d.getImageData(0,0,o,l).data;return[se(this,KS,PR).call(this,u),o,l]},G(Es,WS),G(Es,xI),G(Es,yI),G(Es,GS),G(Es,Fy),G(Es,bI),G(Es,wI),G(Es,jI),G(Es,KS),G(Es,YS),G(Es,NI),G(Es,$g,{maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16}),G(Es,tc,new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]));class y$ extends SQ{constructor(){super(),super.updateProperties({fill:wr._defaultLineColor,"stroke-width":0})}clone(){const e=new y$;return e.updateAll(this),e}}class b$ extends ZI{constructor(e){super(e),super.updateProperties({stroke:wr._defaultLineColor,"stroke-width":1})}clone(){const e=new b$(this._viewParameters);return e.updateAll(this),e}}var Df,sd,kf,Bg;const to=class to extends uP{constructor(n){super({...n,mustBeCommitted:!0,name:"signatureEditor"});G(this,Df,!1);G(this,sd,null);G(this,kf,null);G(this,Bg,null);this._willKeepAspectRatio=!0,Z(this,kf,n.signatureData||null),Z(this,sd,null),this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(n,r){wr.initialize(n,r),this._defaultDrawingOptions=new y$,this._defaultDrawnSignatureOptions=new b$(r.viewParameters)}static getDefaultDrawingOptions(n){const r=this._defaultDrawingOptions.clone();return r.updateProperties(n),r}static get supportMultipleDrawings(){return!1}static get typesMap(){return xn(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!S(this,sd)}}static computeTelemetryFinalData(n){const r=n.get("hasDescription");return{hasAltText:r.get(!0)??0,hasNoAltText:r.get(!1)??0}}get isResizable(){return!0}onScaleChanging(){this._drawId!==null&&super.onScaleChanging()}render(){if(this.div)return this.div;let n,r;const{_isCopy:i}=this;if(i&&(this._isCopy=!1,n=this.x,r=this.y),super.render(),this._drawId===null)if(S(this,kf)){const{lines:a,mustSmooth:o,areContours:l,description:c,uuid:d,heightInPage:u}=S(this,kf),{rawDims:{pageWidth:h,pageHeight:f},rotation:m}=this.parent.viewport,v=Es.processDrawnLines({lines:a,pageWidth:h,pageHeight:f,rotation:m,innerMargin:to._INNER_MARGIN,mustSmooth:o,areContours:l});this.addSignature(v,u,c,d)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);return i&&(this._isCopy=!0,this._moveAfterPaste(n,r)),this.div}setUuid(n){Z(this,Bg,n),this.addEditToolbar()}getUuid(){return S(this,Bg)}get description(){return S(this,sd)}set description(n){Z(this,sd,n),super.addEditToolbar().then(r=>{r==null||r.updateEditSignatureButton(n)})}getSignaturePreview(){const{newCurves:n,areContours:r,thickness:i,width:a,height:o}=S(this,kf),l=Math.max(a,o),c=Es.processDrawnLines({lines:{curves:n.map(d=>({points:d})),thickness:i,width:a,height:o},pageWidth:l,pageHeight:l,rotation:0,innerMargin:0,mustSmooth:!1,areContours:r});return{areContours:r,outline:c.outline}}get toolbarButtons(){return this._uiManager.signatureManager?[["editSignature",this._uiManager.signatureManager]]:super.toolbarButtons}addSignature(n,r,i,a){const{x:o,y:l}=this,{outline:c}=Z(this,kf,n);Z(this,Df,c instanceof AR),this.description=i,this.div.setAttribute("data-l10n-args",JSON.stringify({description:i}));let d;S(this,Df)?d=to.getDefaultDrawingOptions():(d=to._defaultDrawnSignatureOptions.clone(),d.updateProperties({"stroke-width":c.thickness})),this._addOutlines({drawOutlines:c,drawingOptions:d});const[u,h]=this.parentDimensions,[,f]=this.pageDimensions;let m=r/f;m=m>=1?.5:m,this.width*=m/this.height,this.width>=1&&(m*=.9/this.width,this.width=.9),this.height=m,this.setDims(u*this.width,h*this.height),this.x=o,this.y=l,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(a),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!a,hasDescription:!!i}}),this.div.hidden=!1}getFromImage(n){const{rawDims:{pageWidth:r,pageHeight:i},rotation:a}=this.parent.viewport;return Es.process(n,r,i,a,to._INNER_MARGIN)}getFromText(n,r){const{rawDims:{pageWidth:i,pageHeight:a},rotation:o}=this.parent.viewport;return Es.extractContoursFromText(n,r,i,a,o,to._INNER_MARGIN)}getDrawnSignature(n){const{rawDims:{pageWidth:r,pageHeight:i},rotation:a}=this.parent.viewport;return Es.processDrawnLines({lines:n,pageWidth:r,pageHeight:i,rotation:a,innerMargin:to._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:n,thickness:r}){n?this._drawingOptions=to.getDefaultDrawingOptions():(this._drawingOptions=to._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":r}))}serialize(n=!1){if(this.isEmpty())return null;const{lines:r,points:i,rect:a}=this.serializeDraw(n),{_drawingOptions:{"stroke-width":o}}=this,l={annotationType:en.SIGNATURE,isSignature:!0,areContours:S(this,Df),color:[0,0,0],thickness:S(this,Df)?0:o,pageIndex:this.pageIndex,rect:a,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return n?(l.paths={lines:r,points:i},l.uuid=S(this,Bg),l.isCopy=!0):l.lines=r,S(this,sd)&&(l.accessibilityData={type:"Figure",alt:S(this,sd)}),l}static deserializeDraw(n,r,i,a,o,l){return l.areContours?AR.deserialize(n,r,i,a,o,l):fA.deserialize(n,r,i,a,o,l)}static async deserialize(n,r,i){var o;const a=await super.deserialize(n,r,i);return Z(a,Df,n.areContours),Z(a,sd,((o=n.accessibilityData)==null?void 0:o.alt)||""),Z(a,Bg,n.uuid),a}};Df=new WeakMap,sd=new WeakMap,kf=new WeakMap,Bg=new WeakMap,ut(to,"_type","signature"),ut(to,"_editorType",en.SIGNATURE),ut(to,"_defaultDrawingOptions",null);let IR=to;var kr,ei,_f,Ou,Of,$y,Lu,zg,id,vo,By,Ug,$w,Vg,Bw,zy,bE,Uy,wE,Vy,jE,XS,kR,qy,NE,SI,RQ;class DR extends wr{constructor(n){super({...n,name:"stampEditor"});G(this,Ug);G(this,Vg);G(this,zy);G(this,Uy);G(this,Vy);G(this,XS);G(this,qy);G(this,SI);G(this,kr,null);G(this,ei,null);G(this,_f,null);G(this,Ou,null);G(this,Of,null);G(this,$y,"");G(this,Lu,null);G(this,zg,!1);G(this,id,null);G(this,vo,!1);G(this,By,!1);Z(this,Ou,n.bitmapUrl),Z(this,Of,n.bitmapFile),this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(n,r){wr.initialize(n,r)}static isHandlingMimeForPasting(n){return aP.includes(n)}static paste(n,r){r.pasteEditor({mode:en.STAMP},{bitmapFile:n.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){var n;return{type:"stamp",hasAltText:!!((n=this.altTextData)!=null&&n.altText)}}static computeTelemetryFinalData(n){const r=n.get("hasAltText");return{hasAltText:r.get(!0)??0,hasNoAltText:r.get(!1)??0}}async mlGuessAltText(n=null,r=!0){if(this.hasAltTextData())return null;const{mlManager:i}=this._uiManager;if(!i)throw new Error("No ML.");if(!await i.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:a,width:o,height:l}=n||this.copyCanvas(null,null,!0).imageData,c=await i.guess({name:"altText",request:{data:a,width:o,height:l,channels:a.length/(o*l)}});if(!c)throw new Error("No response from the AI service.");if(c.error)throw new Error("Error from the AI service.");if(c.cancel)return null;if(!c.output)throw new Error("No valid response from the AI service.");const d=c.output;return await this.setGuessedAltText(d),r&&!this.hasAltTextData()&&(this.altTextData={alt:d,decorative:!1}),d}remove(){var n;S(this,ei)&&(Z(this,kr,null),this._uiManager.imageManager.deleteId(S(this,ei)),(n=S(this,Lu))==null||n.remove(),Z(this,Lu,null),S(this,id)&&(clearTimeout(S(this,id)),Z(this,id,null))),super.remove()}rebuild(){if(!this.parent){S(this,ei)&&se(this,zy,bE).call(this);return}super.rebuild(),this.div!==null&&(S(this,ei)&&S(this,Lu)===null&&se(this,zy,bE).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(n){this._isDraggable=!0,n&&this.div.focus()}isEmpty(){return!(S(this,_f)||S(this,kr)||S(this,Ou)||S(this,Of)||S(this,ei)||S(this,zg))}get toolbarButtons(){return[["altText",this.createAltText()]]}get isResizable(){return!0}render(){if(this.div)return this.div;let n,r;return this._isCopy&&(n=this.x,r=this.y),super.render(),this.div.hidden=!0,this.createAltText(),S(this,zg)||(S(this,kr)?se(this,Uy,wE).call(this):se(this,zy,bE).call(this)),this._isCopy&&this._moveAfterPaste(n,r),this._uiManager.addShouldRescale(this),this.div}setCanvas(n,r){const{id:i,bitmap:a}=this._uiManager.imageManager.getFromCanvas(n,r);r.remove(),i&&this._uiManager.imageManager.isValidId(i)&&(Z(this,ei,i),a&&Z(this,kr,a),Z(this,zg,!1),se(this,Uy,wE).call(this))}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;S(this,id)!==null&&clearTimeout(S(this,id)),Z(this,id,setTimeout(()=>{Z(this,id,null),se(this,XS,kR).call(this)},200))}copyCanvas(n,r,i=!1){var m;n||(n=224);const{width:a,height:o}=S(this,kr),l=new vc;let c=S(this,kr),d=a,u=o,h=null;if(r){if(a>r||o>r){const j=Math.min(r/a,r/o);d=Math.floor(a*j),u=Math.floor(o*j)}h=document.createElement("canvas");const v=h.width=Math.ceil(d*l.sx),p=h.height=Math.ceil(u*l.sy);S(this,vo)||(c=se(this,Vy,jE).call(this,v,p));const g=h.getContext("2d");g.filter=this._uiManager.hcmFilter;let x="white",y="#cfcfd8";this._uiManager.hcmFilter!=="none"?y="black":(m=window.matchMedia)!=null&&m.call(window,"(prefers-color-scheme: dark)").matches&&(x="#8f8f9d",y="#42414d");const b=15,w=b*l.sx,N=b*l.sy,E=new OffscreenCanvas(w*2,N*2),C=E.getContext("2d");C.fillStyle=x,C.fillRect(0,0,w*2,N*2),C.fillStyle=y,C.fillRect(0,0,w,N),C.fillRect(w,N,w,N),g.fillStyle=g.createPattern(E,"repeat"),g.fillRect(0,0,v,p),g.drawImage(c,0,0,c.width,c.height,0,0,v,p)}let f=null;if(i){let v,p;if(l.symmetric&&c.width<n&&c.height<n)v=c.width,p=c.height;else if(c=S(this,kr),a>n||o>n){const y=Math.min(n/a,n/o);v=Math.floor(a*y),p=Math.floor(o*y),S(this,vo)||(c=se(this,Vy,jE).call(this,v,p))}const x=new OffscreenCanvas(v,p).getContext("2d",{willReadFrequently:!0});x.drawImage(c,0,0,c.width,c.height,0,0,v,p),f={width:v,height:p,data:x.getImageData(0,0,v,p).data}}return{canvas:h,width:d,height:u,imageData:f}}static async deserialize(n,r,i){var g;let a=null,o=!1;if(n instanceof ZZ){const{data:{rect:x,rotation:y,id:b,structParent:w,popupRef:N},container:E,parent:{page:{pageNumber:C}},canvas:j}=n;let I,k;j?(delete n.canvas,{id:I,bitmap:k}=i.imageManager.getFromCanvas(E.id,j),j.remove()):(o=!0,n._hasNoCanvas=!0);const D=((g=await r._structTree.getAriaAttributes(`${u$}${b}`))==null?void 0:g.get("aria-label"))||"";a=n={annotationType:en.STAMP,bitmapId:I,bitmap:k,pageIndex:C-1,rect:x.slice(0),rotation:y,annotationElementId:b,id:b,deleted:!1,accessibilityData:{decorative:!1,altText:D},isSvg:!1,structParent:w,popupRef:N}}const l=await super.deserialize(n,r,i),{rect:c,bitmap:d,bitmapUrl:u,bitmapId:h,isSvg:f,accessibilityData:m}=n;o?(i.addMissingCanvas(n.id,l),Z(l,zg,!0)):h&&i.imageManager.isValidId(h)?(Z(l,ei,h),d&&Z(l,kr,d)):Z(l,Ou,u),Z(l,vo,f);const[v,p]=l.pageDimensions;return l.width=(c[2]-c[0])/v,l.height=(c[3]-c[1])/p,m&&(l.altTextData=m),l._initialData=a,Z(l,By,!!a),l}serialize(n=!1,r=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const i={annotationType:en.STAMP,bitmapId:S(this,ei),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:S(this,vo),structTreeParentId:this._structTreeParentId};if(n)return i.bitmapUrl=se(this,qy,NE).call(this,!0),i.accessibilityData=this.serializeAltText(!0),i.isCopy=!0,i;const{decorative:a,altText:o}=this.serializeAltText(!1);if(!a&&o&&(i.accessibilityData={type:"Figure",alt:o}),this.annotationElementId){const c=se(this,SI,RQ).call(this,i);if(c.isSame)return null;c.isSameAltText?delete i.accessibilityData:i.accessibilityData.structParent=this._initialData.structParent??-1}if(i.id=this.annotationElementId,r===null)return i;r.stamps||(r.stamps=new Map);const l=S(this,vo)?(i.rect[2]-i.rect[0])*(i.rect[3]-i.rect[1]):null;if(!r.stamps.has(S(this,ei)))r.stamps.set(S(this,ei),{area:l,serialized:i}),i.bitmap=se(this,qy,NE).call(this,!1);else if(S(this,vo)){const c=r.stamps.get(S(this,ei));l>c.area&&(c.area=l,c.serialized.bitmap.close(),c.serialized.bitmap=se(this,qy,NE).call(this,!1))}return i}renderAnnotationElement(n){return n.updateEdited({rect:this.getRect(0,0)}),null}}kr=new WeakMap,ei=new WeakMap,_f=new WeakMap,Ou=new WeakMap,Of=new WeakMap,$y=new WeakMap,Lu=new WeakMap,zg=new WeakMap,id=new WeakMap,vo=new WeakMap,By=new WeakMap,Ug=new WeakSet,$w=function(n,r=!1){if(!n){this.remove();return}Z(this,kr,n.bitmap),r||(Z(this,ei,n.id),Z(this,vo,n.isSvg)),n.file&&Z(this,$y,n.file.name),se(this,Uy,wE).call(this)},Vg=new WeakSet,Bw=function(){if(Z(this,_f,null),this._uiManager.enableWaiting(!1),!!S(this,Lu)){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&S(this,kr)){this.addEditToolbar().then(()=>{this._editToolbar.hide(),this._uiManager.editAltText(this,!0)});return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&S(this,kr)){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}},zy=new WeakSet,bE=function(){if(S(this,ei)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(S(this,ei)).then(i=>se(this,Ug,$w).call(this,i,!0)).finally(()=>se(this,Vg,Bw).call(this));return}if(S(this,Ou)){const i=S(this,Ou);Z(this,Ou,null),this._uiManager.enableWaiting(!0),Z(this,_f,this._uiManager.imageManager.getFromUrl(i).then(a=>se(this,Ug,$w).call(this,a)).finally(()=>se(this,Vg,Bw).call(this)));return}if(S(this,Of)){const i=S(this,Of);Z(this,Of,null),this._uiManager.enableWaiting(!0),Z(this,_f,this._uiManager.imageManager.getFromFile(i).then(a=>se(this,Ug,$w).call(this,a)).finally(()=>se(this,Vg,Bw).call(this)));return}const n=document.createElement("input");n.type="file",n.accept=aP.join(",");const r=this._uiManager._signal;Z(this,_f,new Promise(i=>{n.addEventListener("change",async()=>{if(!n.files||n.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const a=await this._uiManager.imageManager.getFromFile(n.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),se(this,Ug,$w).call(this,a)}i()},{signal:r}),n.addEventListener("cancel",()=>{this.remove(),i()},{signal:r})}).finally(()=>se(this,Vg,Bw).call(this))),n.click()},Uy=new WeakSet,wE=function(){var h;const{div:n}=this;let{width:r,height:i}=S(this,kr);const[a,o]=this.pageDimensions,l=.75;if(this.width)r=this.width*a,i=this.height*o;else if(r>l*a||i>l*o){const f=Math.min(l*a/r,l*o/i);r*=f,i*=f}const[c,d]=this.parentDimensions;this.setDims(r*c/a,i*d/o),this._uiManager.enableWaiting(!1);const u=Z(this,Lu,document.createElement("canvas"));u.setAttribute("role","img"),this.addContainer(u),this.width=r/a,this.height=i/o,(h=this._initialOptions)!=null&&h.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(n.hidden=!1),se(this,XS,kR).call(this),S(this,By)||(this.parent.addUndoableEditor(this),Z(this,By,!0)),this._reportTelemetry({action:"inserted_image"}),S(this,$y)&&this.div.setAttribute("aria-description",S(this,$y)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-stamp-added-alert")},Vy=new WeakSet,jE=function(n,r){const{width:i,height:a}=S(this,kr);let o=i,l=a,c=S(this,kr);for(;o>2*n||l>2*r;){const d=o,u=l;o>2*n&&(o=o>=16384?Math.floor(o/2)-1:Math.ceil(o/2)),l>2*r&&(l=l>=16384?Math.floor(l/2)-1:Math.ceil(l/2));const h=new OffscreenCanvas(o,l);h.getContext("2d").drawImage(c,0,0,d,u,0,0,o,l),c=h.transferToImageBitmap()}return c},XS=new WeakSet,kR=function(){const[n,r]=this.parentDimensions,{width:i,height:a}=this,o=new vc,l=Math.ceil(i*n*o.sx),c=Math.ceil(a*r*o.sy),d=S(this,Lu);if(!d||d.width===l&&d.height===c)return;d.width=l,d.height=c;const u=S(this,vo)?S(this,kr):se(this,Vy,jE).call(this,l,c),h=d.getContext("2d");h.filter=this._uiManager.hcmFilter,h.drawImage(u,0,0,u.width,u.height,0,0,l,c)},qy=new WeakSet,NE=function(n){if(n){if(S(this,vo)){const a=this._uiManager.imageManager.getSvgUrl(S(this,ei));if(a)return a}const r=document.createElement("canvas");return{width:r.width,height:r.height}=S(this,kr),r.getContext("2d").drawImage(S(this,kr),0,0),r.toDataURL()}if(S(this,vo)){const[r,i]=this.pageDimensions,a=Math.round(this.width*r*th.PDF_TO_CSS_UNITS),o=Math.round(this.height*i*th.PDF_TO_CSS_UNITS),l=new OffscreenCanvas(a,o);return l.getContext("2d").drawImage(S(this,kr),0,0,S(this,kr).width,S(this,kr).height,0,0,a,o),l.transferToImageBitmap()}return structuredClone(S(this,kr))},SI=new WeakSet,RQ=function(n){var l;const{pageIndex:r,accessibilityData:{altText:i}}=this._initialData,a=n.pageIndex===r,o=(((l=n.accessibilityData)==null?void 0:l.alt)||"")===i;return{isSame:!this._hasBeenMoved&&!this._hasBeenResized&&a&&o,isSameAltText:o}},ut(DR,"_type","stamp"),ut(DR,"_editorType",en.STAMP);var qg,Hy,ad,Lf,Ru,xo,Rf,Wy,Hg,nc,Mu,ti,Fu,Mf,Gy,Dt,Ff,AI,MQ,dl,Bc,ZS,_R,QS,OR,Ky,SE;const zl=class zl{constructor({uiManager:e,pageIndex:n,div:r,structTreeLayer:i,accessibilityManager:a,annotationLayer:o,drawLayer:l,textLayer:c,viewport:d,l10n:u}){G(this,AI);G(this,dl);G(this,ZS);G(this,QS);G(this,Ky);G(this,qg,void 0);G(this,Hy,!1);G(this,ad,null);G(this,Lf,null);G(this,Ru,null);G(this,xo,new Map);G(this,Rf,!1);G(this,Wy,!1);G(this,Hg,!1);G(this,nc,null);G(this,Mu,null);G(this,ti,null);G(this,Fu,null);G(this,Mf,null);G(this,Gy,-1);G(this,Dt,void 0);const h=[...S(zl,Ff).values()];if(!zl._initialized){zl._initialized=!0;for(const f of h)f.initialize(u,e)}e.registerEditorTypes(h),Z(this,Dt,e),this.pageIndex=n,this.div=r,Z(this,qg,a),Z(this,ad,o),this.viewport=d,Z(this,ti,c),this.drawLayer=l,this._structTree=i,S(this,Dt).addLayer(this)}get isEmpty(){return S(this,xo).size===0}get isInvisible(){return this.isEmpty&&S(this,Dt).getMode()===en.NONE}updateToolbar(e){S(this,Dt).updateToolbar(e)}updateMode(e=S(this,Dt).getMode()){switch(se(this,Ky,SE).call(this),e){case en.NONE:this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case en.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case en.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:n}=this.div;for(const r of S(zl,Ff).values())n.toggle(`${r._type}Editing`,e===r._editorType);this.div.hidden=!1}hasTextLayer(e){var n;return e===((n=S(this,ti))==null?void 0:n.div)}setEditingState(e){S(this,Dt).setEditingState(e)}addCommands(e){S(this,Dt).addCommands(e)}cleanUndoStack(e){S(this,Dt).cleanUndoStack(e)}toggleDrawing(e=!1){this.div.classList.toggle("drawing",!e)}togglePointerEvents(e=!1){this.div.classList.toggle("disabled",!e)}toggleAnnotationLayerPointerEvents(e=!1){var n;(n=S(this,ad))==null||n.div.classList.toggle("disabled",!e)}async enable(){var r;Z(this,Hg,!0),this.div.tabIndex=0,this.togglePointerEvents(!0),(r=S(this,Mf))==null||r.abort(),Z(this,Mf,null);const e=new Set;for(const i of S(this,xo).values())i.enableEditing(),i.show(!0),i.annotationElementId&&(S(this,Dt).removeChangedExistingAnnotation(i),e.add(i.annotationElementId));if(!S(this,ad)){Z(this,Hg,!1);return}const n=S(this,ad).getEditableAnnotations();for(const i of n){if(i.hide(),S(this,Dt).isDeletedAnnotationElement(i.data.id)||e.has(i.data.id))continue;const a=await this.deserialize(i);a&&(this.addOrRebuild(a),a.enableEditing())}Z(this,Hg,!1)}disable(){var i;if(Z(this,Wy,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1),S(this,ti)&&!S(this,Mf)){Z(this,Mf,new AbortController);const a=S(this,Dt).combinedSignal(S(this,Mf));S(this,ti).div.addEventListener("pointerdown",o=>{const{clientX:c,clientY:d,timeStamp:u}=o,h=S(this,Gy);if(u-h>500){Z(this,Gy,u);return}Z(this,Gy,-1);const{classList:f}=this.div;f.toggle("getElements",!0);const m=document.elementsFromPoint(c,d);if(f.toggle("getElements",!1),!this.div.contains(m[0]))return;let v;const p=new RegExp(`^${CX}[0-9]+$`);for(const x of m)if(p.test(x.id)){v=x.id;break}if(!v)return;const g=S(this,xo).get(v);(g==null?void 0:g.annotationElementId)===null&&(o.stopPropagation(),o.preventDefault(),g.dblclick())},{signal:a,capture:!0})}const e=new Map,n=new Map;for(const a of S(this,xo).values())if(a.disableEditing(),!!a.annotationElementId){if(a.serialize()!==null){e.set(a.annotationElementId,a);continue}else n.set(a.annotationElementId,a);(i=this.getEditableAnnotation(a.annotationElementId))==null||i.show(),a.remove()}if(S(this,ad)){const a=S(this,ad).getEditableAnnotations();for(const o of a){const{id:l}=o.data;if(S(this,Dt).isDeletedAnnotationElement(l))continue;let c=n.get(l);if(c){c.resetAnnotationElement(o),c.show(!1),o.show();continue}c=e.get(l),c&&(S(this,Dt).addChangedExistingAnnotation(c),c.renderAnnotationElement(o)&&c.show(!1)),o.show()}}se(this,Ky,SE).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:r}=this.div;for(const a of S(zl,Ff).values())r.remove(`${a._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),Z(this,Wy,!1)}getEditableAnnotation(e){var n;return((n=S(this,ad))==null?void 0:n.getEditableAnnotation(e))||null}setActiveEditor(e){S(this,Dt).getActive()!==e&&S(this,Dt).setActiveEditor(e)}enableTextSelection(){var e;if(this.div.tabIndex=-1,(e=S(this,ti))!=null&&e.div&&!S(this,Fu)){Z(this,Fu,new AbortController);const n=S(this,Dt).combinedSignal(S(this,Fu));S(this,ti).div.addEventListener("pointerdown",se(this,AI,MQ).bind(this),{signal:n}),S(this,ti).div.classList.add("highlighting")}}disableTextSelection(){var e;this.div.tabIndex=0,(e=S(this,ti))!=null&&e.div&&S(this,Fu)&&(S(this,Fu).abort(),Z(this,Fu,null),S(this,ti).div.classList.remove("highlighting"))}enableClick(){if(S(this,Lf))return;Z(this,Lf,new AbortController);const e=S(this,Dt).combinedSignal(S(this,Lf));this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:e});const n=this.pointerup.bind(this);this.div.addEventListener("pointerup",n,{signal:e}),this.div.addEventListener("pointercancel",n,{signal:e})}disableClick(){var e;(e=S(this,Lf))==null||e.abort(),Z(this,Lf,null)}attach(e){S(this,xo).set(e.id,e);const{annotationElementId:n}=e;n&&S(this,Dt).isDeletedAnnotationElement(n)&&S(this,Dt).removeDeletedAnnotationElement(e)}detach(e){var n;S(this,xo).delete(e.id),(n=S(this,qg))==null||n.removePointerInTextLayer(e.contentDiv),!S(this,Wy)&&e.annotationElementId&&S(this,Dt).addDeletedAnnotationElement(e)}remove(e){this.detach(e),S(this,Dt).removeEditor(e),e.div.remove(),e.isAttachedToDOM=!1}changeParent(e){var n;e.parent!==this&&(e.parent&&e.annotationElementId&&(S(this,Dt).addDeletedAnnotationElement(e.annotationElementId),wr.deleteAnnotationElement(e),e.annotationElementId=null),this.attach(e),(n=e.parent)==null||n.detach(e),e.setParent(this),e.div&&e.isAttachedToDOM&&(e.div.remove(),this.div.append(e.div)))}add(e){if(!(e.parent===this&&e.isAttachedToDOM)){if(this.changeParent(e),S(this,Dt).addEditor(e),this.attach(e),!e.isAttachedToDOM){const n=e.render();this.div.append(n),e.isAttachedToDOM=!0}e.fixAndSetPosition(),e.onceAdded(!S(this,Hg)),S(this,Dt).addToAnnotationStorage(e),e._reportTelemetry(e.telemetryInitialData)}}moveEditorInDOM(e){var r;if(!e.isAttachedToDOM)return;const{activeElement:n}=document;e.div.contains(n)&&!S(this,Ru)&&(e._focusEventsAllowed=!1,Z(this,Ru,setTimeout(()=>{Z(this,Ru,null),e.div.contains(document.activeElement)?e._focusEventsAllowed=!0:(e.div.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:S(this,Dt)._signal}),n.focus())},0))),e._structTreeParentId=(r=S(this,qg))==null?void 0:r.moveElementInDOM(this.div,e.div,e.contentDiv,!0)}addOrRebuild(e){e.needsToBeRebuilt()?(e.parent||(e.parent=this),e.rebuild(),e.show()):this.add(e)}addUndoableEditor(e){const n=()=>e._uiManager.rebuild(e),r=()=>{e.remove()};this.addCommands({cmd:n,undo:r,mustExec:!1})}getNextId(){return S(this,Dt).getId()}combinedSignal(e){return S(this,Dt).combinedSignal(e)}canCreateNewEmptyEditor(){var e;return(e=S(this,dl,Bc))==null?void 0:e.canCreateNewEmptyEditor()}async pasteEditor(e,n){this.updateToolbar(e),await S(this,Dt).updateMode(e.mode);const{offsetX:r,offsetY:i}=se(this,QS,OR).call(this),a=this.getNextId(),o=se(this,ZS,_R).call(this,{parent:this,id:a,x:r,y:i,uiManager:S(this,Dt),isCentered:!0,...n});o&&this.add(o)}async deserialize(e){var n;return await((n=S(zl,Ff).get(e.annotationType??e.annotationEditorType))==null?void 0:n.deserialize(e,this,S(this,Dt)))||null}createAndAddNewEditor(e,n,r={}){const i=this.getNextId(),a=se(this,ZS,_R).call(this,{parent:this,id:i,x:e.offsetX,y:e.offsetY,uiManager:S(this,Dt),isCentered:n,...r});return a&&this.add(a),a}addNewEditor(e={}){this.createAndAddNewEditor(se(this,QS,OR).call(this),!0,e)}setSelected(e){S(this,Dt).setSelected(e)}toggleSelected(e){S(this,Dt).toggleSelected(e)}unselect(e){S(this,Dt).unselect(e)}pointerup(e){var i;const{isMac:n}=ai.platform;if(e.button!==0||e.ctrlKey&&n||e.target!==this.div||!S(this,Rf)||(Z(this,Rf,!1),(i=S(this,dl,Bc))!=null&&i.isDrawer&&S(this,dl,Bc).supportMultipleDrawings))return;if(!S(this,Hy)){Z(this,Hy,!0);return}const r=S(this,Dt).getMode();if(r===en.STAMP||r===en.SIGNATURE){S(this,Dt).unselectAll();return}this.createAndAddNewEditor(e,!1)}pointerdown(e){var i;if(S(this,Dt).getMode()===en.HIGHLIGHT&&this.enableTextSelection(),S(this,Rf)){Z(this,Rf,!1);return}const{isMac:n}=ai.platform;if(e.button!==0||e.ctrlKey&&n||e.target!==this.div)return;if(Z(this,Rf,!0),(i=S(this,dl,Bc))!=null&&i.isDrawer){this.startDrawingSession(e);return}const r=S(this,Dt).getActive();Z(this,Hy,!r||r.isEmpty())}startDrawingSession(e){if(this.div.focus({preventScroll:!0}),S(this,nc)){S(this,dl,Bc).startDrawing(this,S(this,Dt),!1,e);return}S(this,Dt).setCurrentDrawingSession(this),Z(this,nc,new AbortController);const n=S(this,Dt).combinedSignal(S(this,nc));this.div.addEventListener("blur",({relatedTarget:r})=>{r&&!this.div.contains(r)&&(Z(this,Mu,null),this.commitOrRemove())},{signal:n}),S(this,dl,Bc).startDrawing(this,S(this,Dt),!1,e)}pause(e){if(e){const{activeElement:n}=document;this.div.contains(n)&&Z(this,Mu,n);return}S(this,Mu)&&setTimeout(()=>{var n;(n=S(this,Mu))==null||n.focus(),Z(this,Mu,null)},0)}endDrawingSession(e=!1){return S(this,nc)?(S(this,Dt).setCurrentDrawingSession(null),S(this,nc).abort(),Z(this,nc,null),Z(this,Mu,null),S(this,dl,Bc).endDrawing(e)):null}findNewParent(e,n,r){const i=S(this,Dt).findParent(n,r);return i===null||i===this?!1:(i.changeParent(e),!0)}commitOrRemove(){return S(this,nc)?(this.endDrawingSession(),!0):!1}onScaleChanging(){S(this,nc)&&S(this,dl,Bc).onScaleChangingWhenDrawing(this)}destroy(){var e,n;this.commitOrRemove(),((e=S(this,Dt).getActive())==null?void 0:e.parent)===this&&(S(this,Dt).commitOrRemove(),S(this,Dt).setActiveEditor(null)),S(this,Ru)&&(clearTimeout(S(this,Ru)),Z(this,Ru,null));for(const r of S(this,xo).values())(n=S(this,qg))==null||n.removePointerInTextLayer(r.contentDiv),r.setParent(null),r.isAttachedToDOM=!1,r.div.remove();this.div=null,S(this,xo).clear(),S(this,Dt).removeLayer(this)}render({viewport:e}){this.viewport=e,hm(this.div,e);for(const n of S(this,Dt).getEditors(this.pageIndex))this.add(n),n.rebuild();this.updateMode()}update({viewport:e}){S(this,Dt).commitOrRemove(),se(this,Ky,SE).call(this);const n=this.viewport.rotation,r=e.rotation;if(this.viewport=e,hm(this.div,{rotation:r}),n!==r)for(const i of S(this,xo).values())i.rotate(r)}get pageDimensions(){const{pageWidth:e,pageHeight:n}=this.viewport.rawDims;return[e,n]}get scale(){return S(this,Dt).viewParameters.realScale}};qg=new WeakMap,Hy=new WeakMap,ad=new WeakMap,Lf=new WeakMap,Ru=new WeakMap,xo=new WeakMap,Rf=new WeakMap,Wy=new WeakMap,Hg=new WeakMap,nc=new WeakMap,Mu=new WeakMap,ti=new WeakMap,Fu=new WeakMap,Mf=new WeakMap,Gy=new WeakMap,Dt=new WeakMap,Ff=new WeakMap,AI=new WeakSet,MQ=function(e){S(this,Dt).unselectAll();const{target:n}=e;if(n===S(this,ti).div||(n.getAttribute("role")==="img"||n.classList.contains("endOfContent"))&&S(this,ti).div.contains(n)){const{isMac:r}=ai.platform;if(e.button!==0||e.ctrlKey&&r)return;S(this,Dt).showAllEditors("highlight",!0,!0),S(this,ti).div.classList.add("free"),this.toggleDrawing(),dP.startHighlighting(this,S(this,Dt).direction==="ltr",{target:S(this,ti).div,x:e.x,y:e.y}),S(this,ti).div.addEventListener("pointerup",()=>{S(this,ti).div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:S(this,Dt)._signal}),e.preventDefault()}},dl=new WeakSet,Bc=function(){return S(zl,Ff).get(S(this,Dt).getMode())},ZS=new WeakSet,_R=function(e){const n=S(this,dl,Bc);return n?new n.prototype.constructor(e):null},QS=new WeakSet,OR=function(){const{x:e,y:n,width:r,height:i}=this.div.getBoundingClientRect(),a=Math.max(0,e),o=Math.max(0,n),l=Math.min(window.innerWidth,e+r),c=Math.min(window.innerHeight,n+i),d=(a+l)/2-e,u=(o+c)/2-n,[h,f]=this.viewport.rotation%180===0?[d,u]:[u,d];return{offsetX:h,offsetY:f}},Ky=new WeakSet,SE=function(){for(const e of S(this,xo).values())e.isEmpty()&&e.remove()},ut(zl,"_initialized",!1),G(zl,Ff,new Map([uR,SR,DR,dP,IR].map(e=>[e._editorType,e])));let hP=zl;var rc,la,Wg,JS,CI,FQ,eA,LR,EI,$Q,tA,RR;const Rs=class Rs{constructor({pageIndex:e}){G(this,eA);G(this,EI);G(this,tA);G(this,rc,null);G(this,la,new Map);G(this,Wg,new Map);this.pageIndex=e}setParent(e){if(!S(this,rc)){Z(this,rc,e);return}if(S(this,rc)!==e){if(S(this,la).size>0)for(const n of S(this,la).values())n.remove(),e.append(n);Z(this,rc,e)}}static get _svgFactory(){return xn(this,"_svgFactory",new Bj)}draw(e,n=!1,r=!1){const i=na(Rs,JS)._++,a=se(this,eA,LR).call(this),o=Rs._svgFactory.createElement("defs");a.append(o);const l=Rs._svgFactory.createElement("path");o.append(l);const c=`path_p${this.pageIndex}_${i}`;l.setAttribute("id",c),l.setAttribute("vector-effect","non-scaling-stroke"),n&&S(this,Wg).set(i,l);const d=r?se(this,EI,$Q).call(this,o,c):null,u=Rs._svgFactory.createElement("use");return a.append(u),u.setAttribute("href",`#${c}`),this.updateProperties(a,e),S(this,la).set(i,a),{id:i,clipPathId:`url(#${d})`}}drawOutline(e,n){const r=na(Rs,JS)._++,i=se(this,eA,LR).call(this),a=Rs._svgFactory.createElement("defs");i.append(a);const o=Rs._svgFactory.createElement("path");a.append(o);const l=`path_p${this.pageIndex}_${r}`;o.setAttribute("id",l),o.setAttribute("vector-effect","non-scaling-stroke");let c;if(n){const h=Rs._svgFactory.createElement("mask");a.append(h),c=`mask_p${this.pageIndex}_${r}`,h.setAttribute("id",c),h.setAttribute("maskUnits","objectBoundingBox");const f=Rs._svgFactory.createElement("rect");h.append(f),f.setAttribute("width","1"),f.setAttribute("height","1"),f.setAttribute("fill","white");const m=Rs._svgFactory.createElement("use");h.append(m),m.setAttribute("href",`#${l}`),m.setAttribute("stroke","none"),m.setAttribute("fill","black"),m.setAttribute("fill-rule","nonzero"),m.classList.add("mask")}const d=Rs._svgFactory.createElement("use");i.append(d),d.setAttribute("href",`#${l}`),c&&d.setAttribute("mask",`url(#${c})`);const u=d.cloneNode();return i.append(u),d.classList.add("mainOutline"),u.classList.add("secondaryOutline"),this.updateProperties(i,e),S(this,la).set(r,i),r}finalizeDraw(e,n){S(this,Wg).delete(e),this.updateProperties(e,n)}updateProperties(e,n){var c;if(!n)return;const{root:r,bbox:i,rootClass:a,path:o}=n,l=typeof e=="number"?S(this,la).get(e):e;if(l){if(r&&se(this,tA,RR).call(this,l,r),i&&se(c=Rs,CI,FQ).call(c,l,i),a){const{classList:d}=l;for(const[u,h]of Object.entries(a))d.toggle(u,h)}if(o){const u=l.firstChild.firstChild;se(this,tA,RR).call(this,u,o)}}}updateParent(e,n){if(n===this)return;const r=S(this,la).get(e);r&&(S(n,rc).append(r),S(this,la).delete(e),S(n,la).set(e,r))}remove(e){S(this,Wg).delete(e),S(this,rc)!==null&&(S(this,la).get(e).remove(),S(this,la).delete(e))}destroy(){Z(this,rc,null);for(const e of S(this,la).values())e.remove();S(this,la).clear(),S(this,Wg).clear()}};rc=new WeakMap,la=new WeakMap,Wg=new WeakMap,JS=new WeakMap,CI=new WeakSet,FQ=function(e,[n,r,i,a]){const{style:o}=e;o.top=`${100*r}%`,o.left=`${100*n}%`,o.width=`${100*i}%`,o.height=`${100*a}%`},eA=new WeakSet,LR=function(){const e=Rs._svgFactory.create(1,1,!0);return S(this,rc).append(e),e.setAttribute("aria-hidden",!0),e},EI=new WeakSet,$Q=function(e,n){const r=Rs._svgFactory.createElement("clipPath");e.append(r);const i=`clip_${n}`;r.setAttribute("id",i),r.setAttribute("clipPathUnits","objectBoundingBox");const a=Rs._svgFactory.createElement("use");return r.append(a),a.setAttribute("href",`#${n}`),a.classList.add("clip"),i},tA=new WeakSet,RR=function(e,n){for(const[r,i]of Object.entries(n))i===null?e.removeAttribute(r):e.setAttribute(r,i)},G(Rs,CI),G(Rs,JS,0);let fP=Rs;globalThis._pdfjsTestingUtils={HighlightOutliner:fR};globalThis.pdfjsLib={AbortException:eh,AnnotationEditorLayer:hP,AnnotationEditorParamsType:Nn,AnnotationEditorType:en,AnnotationEditorUIManager:fm,AnnotationLayer:lP,AnnotationMode:$u,AnnotationType:ls,build:$Z,ColorPicker:zj,createValidAbsoluteUrl:l$,DOMSVGFactory:Bj,DrawLayer:fP,FeatureTest:ai,fetchData:Ub,getDocument:LZ,getFilenameFromUrl:kX,getPdfFilenameFromUrl:_X,getUuid:d$,getXfaPageViewport:OX,GlobalWorkerOptions:lc,ImageKind:Zw,InvalidPDFException:iP,isDataScheme:dA,isPdfFile:KI,isValidExplicitDest:mZ,MathClamp:Wi,noContextMenu:jl,normalizeUnicode:IX,OPS:Rj,OutputScale:vc,PasswordResponses:PX,PDFDataRangeTransport:g$,PDFDateString:YI,PDFWorker:rb,PermissionFlag:EX,PixelsPerInch:th,RenderingCancelledException:GI,ResponseException:Mj,setLayerDimensions:hm,shadow:xn,SignatureExtractor:Es,stopEvent:hs,SupportedImageMimeTypes:aP,TextLayer:nb,TouchManager:Fj,updateUrlHash:c$,Util:kt,VerbosityLevel:oA,version:FZ,XfaLayer:v$};const nfe=Object.freeze(Object.defineProperty({__proto__:null,AbortException:eh,AnnotationEditorLayer:hP,AnnotationEditorParamsType:Nn,AnnotationEditorType:en,AnnotationEditorUIManager:fm,AnnotationLayer:lP,AnnotationMode:$u,AnnotationType:ls,ColorPicker:zj,DOMSVGFactory:Bj,DrawLayer:fP,FeatureTest:ai,GlobalWorkerOptions:lc,ImageKind:Zw,InvalidPDFException:iP,MathClamp:Wi,OPS:Rj,OutputScale:vc,PDFDataRangeTransport:g$,PDFDateString:YI,PDFWorker:rb,PasswordResponses:PX,PermissionFlag:EX,PixelsPerInch:th,RenderingCancelledException:GI,ResponseException:Mj,SignatureExtractor:Es,SupportedImageMimeTypes:aP,TextLayer:nb,TouchManager:Fj,Util:kt,VerbosityLevel:oA,XfaLayer:v$,build:$Z,createValidAbsoluteUrl:l$,fetchData:Ub,getDocument:LZ,getFilenameFromUrl:kX,getPdfFilenameFromUrl:_X,getUuid:d$,getXfaPageViewport:OX,isDataScheme:dA,isPdfFile:KI,isValidExplicitDest:mZ,noContextMenu:jl,normalizeUnicode:IX,setLayerDimensions:hm,shadow:xn,stopEvent:hs,updateUrlHash:c$,version:FZ},Symbol.toStringTag,{value:"Module"}));/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Uj(){return Uj=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Uj.apply(this,arguments)}var Uf;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Uf||(Uf={}));const nz="popstate";function rfe(t){t===void 0&&(t={});function e(r,i){let{pathname:a,search:o,hash:l}=r.location;return MR("",{pathname:a,search:o,hash:l},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:mP(i)}return ife(e,n,null,t)}function ys(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function BQ(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function sfe(){return Math.random().toString(36).substr(2,8)}function rz(t,e){return{usr:t.state,key:t.key,idx:e}}function MR(t,e,n,r){return n===void 0&&(n=null),Uj({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Vb(e):e,{state:n,key:e&&e.key||r||sfe()})}function mP(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Vb(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function ife(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:a=!1}=r,o=i.history,l=Uf.Pop,c=null,d=u();d==null&&(d=0,o.replaceState(Uj({},o.state,{idx:d}),""));function u(){return(o.state||{idx:null}).idx}function h(){l=Uf.Pop;let g=u(),x=g==null?null:g-d;d=g,c&&c({action:l,location:p.location,delta:x})}function f(g,x){l=Uf.Push;let y=MR(p.location,g,x);n&&n(y,g),d=u()+1;let b=rz(y,d),w=p.createHref(y);try{o.pushState(b,"",w)}catch(N){if(N instanceof DOMException&&N.name==="DataCloneError")throw N;i.location.assign(w)}a&&c&&c({action:l,location:p.location,delta:1})}function m(g,x){l=Uf.Replace;let y=MR(p.location,g,x);n&&n(y,g),d=u();let b=rz(y,d),w=p.createHref(y);o.replaceState(b,"",w),a&&c&&c({action:l,location:p.location,delta:0})}function v(g){let x=i.location.origin!=="null"?i.location.origin:i.location.href,y=typeof g=="string"?g:mP(g);return y=y.replace(/ $/,"%20"),ys(x,"No window.location.(origin|href) available to create URL for href: "+y),new URL(y,x)}let p={get action(){return l},get location(){return t(i,o)},listen(g){if(c)throw new Error("A history only accepts one active listener");return i.addEventListener(nz,h),c=g,()=>{i.removeEventListener(nz,h),c=null}},createHref(g){return e(i,g)},createURL:v,encodeLocation(g){let x=v(g);return{pathname:x.pathname,search:x.search,hash:x.hash}},push:f,replace:m,go(g){return o.go(g)}};return p}var sz;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(sz||(sz={}));function afe(t,e,n){return n===void 0&&(n="/"),ofe(t,e,n,!1)}function ofe(t,e,n,r){let i=typeof e=="string"?Vb(e):e,a=w$(i.pathname||"/",n);if(a==null)return null;let o=zQ(t);lfe(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let d=yfe(a);l=vfe(o[c],d,r)}return l}function zQ(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(a,o,l)=>{let c={relativePath:l===void 0?a.path||"":l,caseSensitive:a.caseSensitive===!0,childrenIndex:o,route:a};c.relativePath.startsWith("/")&&(ys(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let d=em([r,c.relativePath]),u=n.concat(c);a.children&&a.children.length>0&&(ys(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),zQ(a.children,e,u,d)),!(a.path==null&&!a.index)&&e.push({path:d,score:pfe(d,a.index),routesMeta:u})};return t.forEach((a,o)=>{var l;if(a.path===""||!((l=a.path)!=null&&l.includes("?")))i(a,o);else for(let c of UQ(a.path))i(a,o,c)}),e}function UQ(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),a=n.replace(/\?$/,"");if(r.length===0)return i?[a,""]:[a];let o=UQ(r.join("/")),l=[];return l.push(...o.map(c=>c===""?a:[a,c].join("/"))),i&&l.push(...o),l.map(c=>t.startsWith("/")&&c===""?"/":c)}function lfe(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:gfe(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const cfe=/^:[\w-]+$/,dfe=3,ufe=2,hfe=1,ffe=10,mfe=-2,iz=t=>t==="*";function pfe(t,e){let n=t.split("/"),r=n.length;return n.some(iz)&&(r+=mfe),e&&(r+=ufe),n.filter(i=>!iz(i)).reduce((i,a)=>i+(cfe.test(a)?dfe:a===""?hfe:ffe),r)}function gfe(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function vfe(t,e,n){n===void 0&&(n=!1);let{routesMeta:r}=t,i={},a="/",o=[];for(let l=0;l<r.length;++l){let c=r[l],d=l===r.length-1,u=a==="/"?e:e.slice(a.length)||"/",h=az({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},u),f=c.route;if(!h&&d&&n&&!r[r.length-1].route.index&&(h=az({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},u)),!h)return null;Object.assign(i,h.params),o.push({params:i,pathname:em([a,h.pathname]),pathnameBase:Nfe(em([a,h.pathnameBase])),route:f}),h.pathnameBase!=="/"&&(a=em([a,h.pathnameBase]))}return o}function az(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=xfe(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let a=i[0],o=a.replace(/(.)\/+$/,"$1"),l=i.slice(1);return{params:r.reduce((d,u,h)=>{let{paramName:f,isOptional:m}=u;if(f==="*"){let p=l[h]||"";o=a.slice(0,a.length-p.length).replace(/(.)\/+$/,"$1")}const v=l[h];return m&&!v?d[f]=void 0:d[f]=(v||"").replace(/%2F/g,"/"),d},{}),pathname:a,pathnameBase:o,pattern:t}}function xfe(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),BQ(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(r.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function yfe(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return BQ(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function w$(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function bfe(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?Vb(t):t;return{pathname:n?n.startsWith("/")?n:wfe(n,e):e,search:Sfe(r),hash:Afe(i)}}function wfe(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function s_(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function jfe(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function j$(t,e){let n=jfe(t);return e?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function N$(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=Vb(t):(i=Uj({},t),ys(!i.pathname||!i.pathname.includes("?"),s_("?","pathname","search",i)),ys(!i.pathname||!i.pathname.includes("#"),s_("#","pathname","hash",i)),ys(!i.search||!i.search.includes("#"),s_("#","search","hash",i)));let a=t===""||i.pathname==="",o=a?"/":i.pathname,l;if(o==null)l=n;else{let h=e.length-1;if(!r&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),h-=1;i.pathname=f.join("/")}l=h>=0?e[h]:"/"}let c=bfe(i,l),d=o&&o!=="/"&&o.endsWith("/"),u=(a||o===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(d||u)&&(c.pathname+="/"),c}const em=t=>t.join("/").replace(/\/\/+/g,"/"),Nfe=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),Sfe=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,Afe=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function Cfe(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const VQ=["post","put","patch","delete"];new Set(VQ);const Efe=["get",...VQ];new Set(Efe);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Vj(){return Vj=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Vj.apply(this,arguments)}const S$=A.createContext(null),Pfe=A.createContext(null),Cm=A.createContext(null),QI=A.createContext(null),dh=A.createContext({outlet:null,matches:[],isDataRoute:!1}),qQ=A.createContext(null);function Tfe(t,e){let{relative:n}=e===void 0?{}:e;qb()||ys(!1);let{basename:r,navigator:i}=A.useContext(Cm),{hash:a,pathname:o,search:l}=WQ(t,{relative:n}),c=o;return r!=="/"&&(c=o==="/"?r:em([r,o])),i.createHref({pathname:c,search:l,hash:a})}function qb(){return A.useContext(QI)!=null}function Em(){return qb()||ys(!1),A.useContext(QI).location}function HQ(t){A.useContext(Cm).static||A.useLayoutEffect(t)}function Pm(){let{isDataRoute:t}=A.useContext(dh);return t?Vfe():Ife()}function Ife(){qb()||ys(!1);let t=A.useContext(S$),{basename:e,future:n,navigator:r}=A.useContext(Cm),{matches:i}=A.useContext(dh),{pathname:a}=Em(),o=JSON.stringify(j$(i,n.v7_relativeSplatPath)),l=A.useRef(!1);return HQ(()=>{l.current=!0}),A.useCallback(function(d,u){if(u===void 0&&(u={}),!l.current)return;if(typeof d=="number"){r.go(d);return}let h=N$(d,JSON.parse(o),a,u.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:em([e,h.pathname])),(u.replace?r.replace:r.push)(h,u.state,u)},[e,r,o,a,t])}function Dfe(){let{matches:t}=A.useContext(dh),e=t[t.length-1];return e?e.params:{}}function WQ(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=A.useContext(Cm),{matches:i}=A.useContext(dh),{pathname:a}=Em(),o=JSON.stringify(j$(i,r.v7_relativeSplatPath));return A.useMemo(()=>N$(t,JSON.parse(o),a,n==="path"),[t,o,a,n])}function kfe(t,e){return _fe(t,e)}function _fe(t,e,n,r){qb()||ys(!1);let{navigator:i}=A.useContext(Cm),{matches:a}=A.useContext(dh),o=a[a.length-1],l=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let d=Em(),u;if(e){var h;let g=typeof e=="string"?Vb(e):e;c==="/"||(h=g.pathname)!=null&&h.startsWith(c)||ys(!1),u=g}else u=d;let f=u.pathname||"/",m=f;if(c!=="/"){let g=c.replace(/^\//,"").split("/");m="/"+f.replace(/^\//,"").split("/").slice(g.length).join("/")}let v=afe(t,{pathname:m}),p=Ffe(v&&v.map(g=>Object.assign({},g,{params:Object.assign({},l,g.params),pathname:em([c,i.encodeLocation?i.encodeLocation(g.pathname).pathname:g.pathname]),pathnameBase:g.pathnameBase==="/"?c:em([c,i.encodeLocation?i.encodeLocation(g.pathnameBase).pathname:g.pathnameBase])})),a,n,r);return e&&p?A.createElement(QI.Provider,{value:{location:Vj({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:Uf.Pop}},p):p}function Ofe(){let t=Ufe(),e=Cfe(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},a=null;return A.createElement(A.Fragment,null,A.createElement("h2",null,"Unexpected Application Error!"),A.createElement("h3",{style:{fontStyle:"italic"}},e),n?A.createElement("pre",{style:i},n):null,a)}const Lfe=A.createElement(Ofe,null);class Rfe extends A.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?A.createElement(dh.Provider,{value:this.props.routeContext},A.createElement(qQ.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Mfe(t){let{routeContext:e,match:n,children:r}=t,i=A.useContext(S$);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),A.createElement(dh.Provider,{value:e},r)}function Ffe(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var a;if(!n)return null;if(n.errors)t=n.matches;else if((a=r)!=null&&a.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,l=(i=n)==null?void 0:i.errors;if(l!=null){let u=o.findIndex(h=>h.route.id&&(l==null?void 0:l[h.route.id])!==void 0);u>=0||ys(!1),o=o.slice(0,Math.min(o.length,u+1))}let c=!1,d=-1;if(n&&r&&r.v7_partialHydration)for(let u=0;u<o.length;u++){let h=o[u];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(d=u),h.route.id){let{loaderData:f,errors:m}=n,v=h.route.loader&&f[h.route.id]===void 0&&(!m||m[h.route.id]===void 0);if(h.route.lazy||v){c=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}return o.reduceRight((u,h,f)=>{let m,v=!1,p=null,g=null;n&&(m=l&&h.route.id?l[h.route.id]:void 0,p=h.route.errorElement||Lfe,c&&(d<0&&f===0?(qfe("route-fallback",!1),v=!0,g=null):d===f&&(v=!0,g=h.route.hydrateFallbackElement||null)));let x=e.concat(o.slice(0,f+1)),y=()=>{let b;return m?b=p:v?b=g:h.route.Component?b=A.createElement(h.route.Component,null):h.route.element?b=h.route.element:b=u,A.createElement(Mfe,{match:h,routeContext:{outlet:u,matches:x,isDataRoute:n!=null},children:b})};return n&&(h.route.ErrorBoundary||h.route.errorElement||f===0)?A.createElement(Rfe,{location:n.location,revalidation:n.revalidation,component:p,error:m,children:y(),routeContext:{outlet:null,matches:x,isDataRoute:!0}}):y()},null)}var GQ=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(GQ||{}),pP=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(pP||{});function $fe(t){let e=A.useContext(S$);return e||ys(!1),e}function Bfe(t){let e=A.useContext(Pfe);return e||ys(!1),e}function zfe(t){let e=A.useContext(dh);return e||ys(!1),e}function KQ(t){let e=zfe(),n=e.matches[e.matches.length-1];return n.route.id||ys(!1),n.route.id}function Ufe(){var t;let e=A.useContext(qQ),n=Bfe(pP.UseRouteError),r=KQ(pP.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function Vfe(){let{router:t}=$fe(GQ.UseNavigateStable),e=KQ(pP.UseNavigateStable),n=A.useRef(!1);return HQ(()=>{n.current=!0}),A.useCallback(function(i,a){a===void 0&&(a={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,Vj({fromRouteId:e},a)))},[t,e])}const oz={};function qfe(t,e,n){!e&&!oz[t]&&(oz[t]=!0)}function Hfe(t,e){t==null||t.v7_startTransition,(t==null?void 0:t.v7_relativeSplatPath)===void 0&&(!e||e.v7_relativeSplatPath),e&&(e.v7_fetcherPersist,e.v7_normalizeFormMethod,e.v7_partialHydration,e.v7_skipActionErrorRevalidation)}function Wfe(t){let{to:e,replace:n,state:r,relative:i}=t;qb()||ys(!1);let{future:a,static:o}=A.useContext(Cm),{matches:l}=A.useContext(dh),{pathname:c}=Em(),d=Pm(),u=N$(e,j$(l,a.v7_relativeSplatPath),c,i==="path"),h=JSON.stringify(u);return A.useEffect(()=>d(JSON.parse(h),{replace:n,state:r,relative:i}),[d,h,i,n,r]),null}function It(t){ys(!1)}function Gfe(t){let{basename:e="/",children:n=null,location:r,navigationType:i=Uf.Pop,navigator:a,static:o=!1,future:l}=t;qb()&&ys(!1);let c=e.replace(/^\/*/,"/"),d=A.useMemo(()=>({basename:c,navigator:a,static:o,future:Vj({v7_relativeSplatPath:!1},l)}),[c,l,a,o]);typeof r=="string"&&(r=Vb(r));let{pathname:u="/",search:h="",hash:f="",state:m=null,key:v="default"}=r,p=A.useMemo(()=>{let g=w$(u,c);return g==null?null:{location:{pathname:g,search:h,hash:f,state:m,key:v},navigationType:i}},[c,u,h,f,m,v,i]);return p==null?null:A.createElement(Cm.Provider,{value:d},A.createElement(QI.Provider,{children:n,value:p}))}function ki(t){let{children:e,location:n}=t;return kfe(FR(e),n)}new Promise(()=>{});function FR(t,e){e===void 0&&(e=[]);let n=[];return A.Children.forEach(t,(r,i)=>{if(!A.isValidElement(r))return;let a=[...e,i];if(r.type===A.Fragment){n.push.apply(n,FR(r.props.children,a));return}r.type!==It&&ys(!1),!r.props.index||!r.props.children||ys(!1);let o={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=FR(r.props.children,a)),n.push(o)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function $R(){return $R=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},$R.apply(this,arguments)}function Kfe(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,a;for(a=0;a<r.length;a++)i=r[a],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function Yfe(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function Xfe(t,e){return t.button===0&&(!e||e==="_self")&&!Yfe(t)}function BR(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let r=t[n];return e.concat(Array.isArray(r)?r.map(i=>[n,i]):[[n,r]])},[]))}function Zfe(t,e){let n=BR(t);return e&&e.forEach((r,i)=>{n.has(i)||e.getAll(i).forEach(a=>{n.append(i,a)})}),n}const Qfe=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],Jfe="6";try{window.__reactRouterVersion=Jfe}catch{}const eme="startTransition",lz=$b[eme];function tme(t){let{basename:e,children:n,future:r,window:i}=t,a=A.useRef();a.current==null&&(a.current=rfe({window:i,v5Compat:!0}));let o=a.current,[l,c]=A.useState({action:o.action,location:o.location}),{v7_startTransition:d}=r||{},u=A.useCallback(h=>{d&&lz?lz(()=>c(h)):c(h)},[c,d]);return A.useLayoutEffect(()=>o.listen(u),[o,u]),A.useEffect(()=>Hfe(r),[r]),A.createElement(Gfe,{basename:e,children:n,location:l.location,navigationType:l.action,navigator:o,future:r})}const nme=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",rme=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,zR=A.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:a,replace:o,state:l,target:c,to:d,preventScrollReset:u,viewTransition:h}=e,f=Kfe(e,Qfe),{basename:m}=A.useContext(Cm),v,p=!1;if(typeof d=="string"&&rme.test(d)&&(v=d,nme))try{let b=new URL(window.location.href),w=d.startsWith("//")?new URL(b.protocol+d):new URL(d),N=w$(w.pathname,m);w.origin===b.origin&&N!=null?d=N+w.search+w.hash:p=!0}catch{}let g=Tfe(d,{relative:i}),x=sme(d,{replace:o,state:l,target:c,preventScrollReset:u,relative:i,viewTransition:h});function y(b){r&&r(b),b.defaultPrevented||x(b)}return A.createElement("a",$R({},f,{href:v||g,onClick:p||a?r:y,ref:n,target:c}))});var cz;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(cz||(cz={}));var dz;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(dz||(dz={}));function sme(t,e){let{target:n,replace:r,state:i,preventScrollReset:a,relative:o,viewTransition:l}=e===void 0?{}:e,c=Pm(),d=Em(),u=WQ(t,{relative:o});return A.useCallback(h=>{if(Xfe(h,n)){h.preventDefault();let f=r!==void 0?r:mP(d)===mP(u);c(t,{replace:f,state:i,preventScrollReset:a,relative:o,viewTransition:l})}},[d,c,u,r,i,n,t,a,o,l])}function ime(t){let e=A.useRef(BR(t)),n=A.useRef(!1),r=Em(),i=A.useMemo(()=>Zfe(r.search,n.current?null:e.current),[r.search]),a=Pm(),o=A.useCallback((l,c)=>{const d=BR(typeof l=="function"?l(i):l);n.current=!0,a("?"+d,c)},[a,i]);return[i,o]}function On(t,e,{checkForDefaultPrevented:n=!0}={}){return function(i){if(t==null||t(i),n===!1||!i.defaultPrevented)return e==null?void 0:e(i)}}function uz(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function YQ(...t){return e=>{let n=!1;const r=t.map(i=>{const a=uz(i,e);return!n&&typeof a=="function"&&(n=!0),a});if(n)return()=>{for(let i=0;i<r.length;i++){const a=r[i];typeof a=="function"?a():uz(t[i],null)}}}}function li(...t){return A.useCallback(YQ(...t),t)}function ame(t,e){const n=A.createContext(e),r=a=>{const{children:o,...l}=a,c=A.useMemo(()=>l,Object.values(l));return s.jsx(n.Provider,{value:c,children:o})};r.displayName=t+"Provider";function i(a){const o=A.useContext(n);if(o)return o;if(e!==void 0)return e;throw new Error(`\`${a}\` must be used within \`${t}\``)}return[r,i]}function Tm(t,e=[]){let n=[];function r(a,o){const l=A.createContext(o),c=n.length;n=[...n,o];const d=h=>{var x;const{scope:f,children:m,...v}=h,p=((x=f==null?void 0:f[t])==null?void 0:x[c])||l,g=A.useMemo(()=>v,Object.values(v));return s.jsx(p.Provider,{value:g,children:m})};d.displayName=a+"Provider";function u(h,f){var p;const m=((p=f==null?void 0:f[t])==null?void 0:p[c])||l,v=A.useContext(m);if(v)return v;if(o!==void 0)return o;throw new Error(`\`${h}\` must be used within \`${a}\``)}return[d,u]}const i=()=>{const a=n.map(o=>A.createContext(o));return function(l){const c=(l==null?void 0:l[t])||a;return A.useMemo(()=>({[`__scope${t}`]:{...l,[t]:c}}),[l,c])}};return i.scopeName=t,[r,ome(i,...e)]}function ome(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(a){const o=r.reduce((l,{useScope:c,scopeName:d})=>{const h=c(a)[`__scope${d}`];return{...l,...h}},{});return A.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}function lv(t){const e=cme(t),n=A.forwardRef((r,i)=>{const{children:a,...o}=r,l=A.Children.toArray(a),c=l.find(ume);if(c){const d=c.props.children,u=l.map(h=>h===c?A.Children.count(d)>1?A.Children.only(null):A.isValidElement(d)?d.props.children:null:h);return s.jsx(e,{...o,ref:i,children:A.isValidElement(d)?A.cloneElement(d,void 0,u):null})}return s.jsx(e,{...o,ref:i,children:a})});return n.displayName=`${t}.Slot`,n}var lme=lv("Slot");function cme(t){const e=A.forwardRef((n,r)=>{const{children:i,...a}=n;if(A.isValidElement(i)){const o=fme(i),l=hme(a,i.props);return i.type!==A.Fragment&&(l.ref=r?YQ(r,o):o),A.cloneElement(i,l)}return A.Children.count(i)>1?A.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var dme=Symbol("radix.slottable");function ume(t){return A.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===dme}function hme(t,e){const n={...e};for(const r in e){const i=t[r],a=e[r];/^on[A-Z]/.test(r)?i&&a?n[r]=(...l)=>{const c=a(...l);return i(...l),c}:i&&(n[r]=i):r==="style"?n[r]={...i,...a}:r==="className"&&(n[r]=[i,a].filter(Boolean).join(" "))}return{...t,...n}}function fme(t){var r,i;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function mme(t){const e=t+"CollectionProvider",[n,r]=Tm(e),[i,a]=n(e,{collectionRef:{current:null},itemMap:new Map}),o=p=>{const{scope:g,children:x}=p,y=ge.useRef(null),b=ge.useRef(new Map).current;return s.jsx(i,{scope:g,itemMap:b,collectionRef:y,children:x})};o.displayName=e;const l=t+"CollectionSlot",c=lv(l),d=ge.forwardRef((p,g)=>{const{scope:x,children:y}=p,b=a(l,x),w=li(g,b.collectionRef);return s.jsx(c,{ref:w,children:y})});d.displayName=l;const u=t+"CollectionItemSlot",h="data-radix-collection-item",f=lv(u),m=ge.forwardRef((p,g)=>{const{scope:x,children:y,...b}=p,w=ge.useRef(null),N=li(g,w),E=a(u,x);return ge.useEffect(()=>(E.itemMap.set(w,{ref:w,...b}),()=>void E.itemMap.delete(w))),s.jsx(f,{[h]:"",ref:N,children:y})});m.displayName=u;function v(p){const g=a(t+"CollectionConsumer",p);return ge.useCallback(()=>{const y=g.collectionRef.current;if(!y)return[];const b=Array.from(y.querySelectorAll(`[${h}]`));return Array.from(g.itemMap.values()).sort((E,C)=>b.indexOf(E.ref.current)-b.indexOf(C.ref.current))},[g.collectionRef,g.itemMap])}return[{Provider:o,Slot:d,ItemSlot:m},v,r]}var pme=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],qn=pme.reduce((t,e)=>{const n=lv(`Primitive.${e}`),r=A.forwardRef((i,a)=>{const{asChild:o,...l}=i,c=o?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),s.jsx(c,{...l,ref:a})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{});function A$(t,e){t&&ch.flushSync(()=>t.dispatchEvent(e))}function cv(t){const e=A.useRef(t);return A.useEffect(()=>{e.current=t}),A.useMemo(()=>(...n)=>{var r;return(r=e.current)==null?void 0:r.call(e,...n)},[])}function gme(t,e=globalThis==null?void 0:globalThis.document){const n=cv(t);A.useEffect(()=>{const r=i=>{i.key==="Escape"&&n(i)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[n,e])}var vme="DismissableLayer",UR="dismissableLayer.update",xme="dismissableLayer.pointerDownOutside",yme="dismissableLayer.focusOutside",hz,XQ=A.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),ZQ=A.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:i,onFocusOutside:a,onInteractOutside:o,onDismiss:l,...c}=t,d=A.useContext(XQ),[u,h]=A.useState(null),f=(u==null?void 0:u.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,m]=A.useState({}),v=li(e,C=>h(C)),p=Array.from(d.layers),[g]=[...d.layersWithOutsidePointerEventsDisabled].slice(-1),x=p.indexOf(g),y=u?p.indexOf(u):-1,b=d.layersWithOutsidePointerEventsDisabled.size>0,w=y>=x,N=wme(C=>{const j=C.target,I=[...d.branches].some(k=>k.contains(j));!w||I||(i==null||i(C),o==null||o(C),C.defaultPrevented||l==null||l())},f),E=jme(C=>{const j=C.target;[...d.branches].some(k=>k.contains(j))||(a==null||a(C),o==null||o(C),C.defaultPrevented||l==null||l())},f);return gme(C=>{y===d.layers.size-1&&(r==null||r(C),!C.defaultPrevented&&l&&(C.preventDefault(),l()))},f),A.useEffect(()=>{if(u)return n&&(d.layersWithOutsidePointerEventsDisabled.size===0&&(hz=f.body.style.pointerEvents,f.body.style.pointerEvents="none"),d.layersWithOutsidePointerEventsDisabled.add(u)),d.layers.add(u),fz(),()=>{n&&d.layersWithOutsidePointerEventsDisabled.size===1&&(f.body.style.pointerEvents=hz)}},[u,f,n,d]),A.useEffect(()=>()=>{u&&(d.layers.delete(u),d.layersWithOutsidePointerEventsDisabled.delete(u),fz())},[u,d]),A.useEffect(()=>{const C=()=>m({});return document.addEventListener(UR,C),()=>document.removeEventListener(UR,C)},[]),s.jsx(qn.div,{...c,ref:v,style:{pointerEvents:b?w?"auto":"none":void 0,...t.style},onFocusCapture:On(t.onFocusCapture,E.onFocusCapture),onBlurCapture:On(t.onBlurCapture,E.onBlurCapture),onPointerDownCapture:On(t.onPointerDownCapture,N.onPointerDownCapture)})});ZQ.displayName=vme;var bme="DismissableLayerBranch",QQ=A.forwardRef((t,e)=>{const n=A.useContext(XQ),r=A.useRef(null),i=li(e,r);return A.useEffect(()=>{const a=r.current;if(a)return n.branches.add(a),()=>{n.branches.delete(a)}},[n.branches]),s.jsx(qn.div,{...t,ref:i})});QQ.displayName=bme;function wme(t,e=globalThis==null?void 0:globalThis.document){const n=cv(t),r=A.useRef(!1),i=A.useRef(()=>{});return A.useEffect(()=>{const a=l=>{if(l.target&&!r.current){let c=function(){JQ(xme,n,d,{discrete:!0})};const d={originalEvent:l};l.pointerType==="touch"?(e.removeEventListener("click",i.current),i.current=c,e.addEventListener("click",i.current,{once:!0})):c()}else e.removeEventListener("click",i.current);r.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",a)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",a),e.removeEventListener("click",i.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function jme(t,e=globalThis==null?void 0:globalThis.document){const n=cv(t),r=A.useRef(!1);return A.useEffect(()=>{const i=a=>{a.target&&!r.current&&JQ(yme,n,{originalEvent:a},{discrete:!1})};return e.addEventListener("focusin",i),()=>e.removeEventListener("focusin",i)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function fz(){const t=new CustomEvent(UR);document.dispatchEvent(t)}function JQ(t,e,n,{discrete:r}){const i=n.originalEvent.target,a=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&i.addEventListener(t,e,{once:!0}),r?A$(i,a):i.dispatchEvent(a)}var Nme=ZQ,Sme=QQ,Sd=globalThis!=null&&globalThis.document?A.useLayoutEffect:()=>{},Ame="Portal",eJ=A.forwardRef((t,e)=>{var l;const{container:n,...r}=t,[i,a]=A.useState(!1);Sd(()=>a(!0),[]);const o=n||i&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return o?qI.createPortal(s.jsx(qn.div,{...r,ref:e}),o):null});eJ.displayName=Ame;function Cme(t,e){return A.useReducer((n,r)=>e[n][r]??n,t)}var Sv=t=>{const{present:e,children:n}=t,r=Eme(e),i=typeof n=="function"?n({present:r.isPresent}):A.Children.only(n),a=li(r.ref,Pme(i));return typeof n=="function"||r.isPresent?A.cloneElement(i,{ref:a}):null};Sv.displayName="Presence";function Eme(t){const[e,n]=A.useState(),r=A.useRef(null),i=A.useRef(t),a=A.useRef("none"),o=t?"mounted":"unmounted",[l,c]=Cme(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return A.useEffect(()=>{const d=tC(r.current);a.current=l==="mounted"?d:"none"},[l]),Sd(()=>{const d=r.current,u=i.current;if(u!==t){const f=a.current,m=tC(d);t?c("MOUNT"):m==="none"||(d==null?void 0:d.display)==="none"?c("UNMOUNT"):c(u&&f!==m?"ANIMATION_OUT":"UNMOUNT"),i.current=t}},[t,c]),Sd(()=>{if(e){let d;const u=e.ownerDocument.defaultView??window,h=m=>{const p=tC(r.current).includes(m.animationName);if(m.target===e&&p&&(c("ANIMATION_END"),!i.current)){const g=e.style.animationFillMode;e.style.animationFillMode="forwards",d=u.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=g)})}},f=m=>{m.target===e&&(a.current=tC(r.current))};return e.addEventListener("animationstart",f),e.addEventListener("animationcancel",h),e.addEventListener("animationend",h),()=>{u.clearTimeout(d),e.removeEventListener("animationstart",f),e.removeEventListener("animationcancel",h),e.removeEventListener("animationend",h)}}else c("ANIMATION_END")},[e,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:A.useCallback(d=>{r.current=d?getComputedStyle(d):null,n(d)},[])}}function tC(t){return(t==null?void 0:t.animationName)||"none"}function Pme(t){var r,i;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var Tme=$b[" useInsertionEffect ".trim().toString()]||Sd;function mA({prop:t,defaultProp:e,onChange:n=()=>{},caller:r}){const[i,a,o]=Ime({defaultProp:e,onChange:n}),l=t!==void 0,c=l?t:i;{const u=A.useRef(t!==void 0);A.useEffect(()=>{const h=u.current;h!==l&&console.warn(`${r} is changing from ${h?"controlled":"uncontrolled"} to ${l?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),u.current=l},[l,r])}const d=A.useCallback(u=>{var h;if(l){const f=Dme(u)?u(t):u;f!==t&&((h=o.current)==null||h.call(o,f))}else a(u)},[l,t,a,o]);return[c,d]}function Ime({defaultProp:t,onChange:e}){const[n,r]=A.useState(t),i=A.useRef(n),a=A.useRef(e);return Tme(()=>{a.current=e},[e]),A.useEffect(()=>{var o;i.current!==n&&((o=a.current)==null||o.call(a,n),i.current=n)},[n,i]),[n,r,a]}function Dme(t){return typeof t=="function"}var kme=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),_me="VisuallyHidden",C$=A.forwardRef((t,e)=>s.jsx(qn.span,{...t,ref:e,style:{...kme,...t.style}}));C$.displayName=_me;var E$="ToastProvider",[P$,Ome,Lme]=mme("Toast"),[tJ,DXe]=Tm("Toast",[Lme]),[Rme,JI]=tJ(E$),nJ=t=>{const{__scopeToast:e,label:n="Notification",duration:r=5e3,swipeDirection:i="right",swipeThreshold:a=50,children:o}=t,[l,c]=A.useState(null),[d,u]=A.useState(0),h=A.useRef(!1),f=A.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${E$}\`. Expected non-empty \`string\`.`),s.jsx(P$.Provider,{scope:e,children:s.jsx(Rme,{scope:e,label:n,duration:r,swipeDirection:i,swipeThreshold:a,toastCount:d,viewport:l,onViewportChange:c,onToastAdd:A.useCallback(()=>u(m=>m+1),[]),onToastRemove:A.useCallback(()=>u(m=>m-1),[]),isFocusedToastEscapeKeyDownRef:h,isClosePausedRef:f,children:o})})};nJ.displayName=E$;var rJ="ToastViewport",Mme=["F8"],VR="toast.viewportPause",qR="toast.viewportResume",sJ=A.forwardRef((t,e)=>{const{__scopeToast:n,hotkey:r=Mme,label:i="Notifications ({hotkey})",...a}=t,o=JI(rJ,n),l=Ome(n),c=A.useRef(null),d=A.useRef(null),u=A.useRef(null),h=A.useRef(null),f=li(e,h,o.onViewportChange),m=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),v=o.toastCount>0;A.useEffect(()=>{const g=x=>{var b;r.length!==0&&r.every(w=>x[w]||x.code===w)&&((b=h.current)==null||b.focus())};return document.addEventListener("keydown",g),()=>document.removeEventListener("keydown",g)},[r]),A.useEffect(()=>{const g=c.current,x=h.current;if(v&&g&&x){const y=()=>{if(!o.isClosePausedRef.current){const E=new CustomEvent(VR);x.dispatchEvent(E),o.isClosePausedRef.current=!0}},b=()=>{if(o.isClosePausedRef.current){const E=new CustomEvent(qR);x.dispatchEvent(E),o.isClosePausedRef.current=!1}},w=E=>{!g.contains(E.relatedTarget)&&b()},N=()=>{g.contains(document.activeElement)||b()};return g.addEventListener("focusin",y),g.addEventListener("focusout",w),g.addEventListener("pointermove",y),g.addEventListener("pointerleave",N),window.addEventListener("blur",y),window.addEventListener("focus",b),()=>{g.removeEventListener("focusin",y),g.removeEventListener("focusout",w),g.removeEventListener("pointermove",y),g.removeEventListener("pointerleave",N),window.removeEventListener("blur",y),window.removeEventListener("focus",b)}}},[v,o.isClosePausedRef]);const p=A.useCallback(({tabbingDirection:g})=>{const y=l().map(b=>{const w=b.ref.current,N=[w,...Xme(w)];return g==="forwards"?N:N.reverse()});return(g==="forwards"?y.reverse():y).flat()},[l]);return A.useEffect(()=>{const g=h.current;if(g){const x=y=>{var N,E,C;const b=y.altKey||y.ctrlKey||y.metaKey;if(y.key==="Tab"&&!b){const j=document.activeElement,I=y.shiftKey;if(y.target===g&&I){(N=d.current)==null||N.focus();return}const P=p({tabbingDirection:I?"backwards":"forwards"}),R=P.findIndex(_=>_===j);i_(P.slice(R+1))?y.preventDefault():I?(E=d.current)==null||E.focus():(C=u.current)==null||C.focus()}};return g.addEventListener("keydown",x),()=>g.removeEventListener("keydown",x)}},[l,p]),s.jsxs(Sme,{ref:c,role:"region","aria-label":i.replace("{hotkey}",m),tabIndex:-1,style:{pointerEvents:v?void 0:"none"},children:[v&&s.jsx(HR,{ref:d,onFocusFromOutsideViewport:()=>{const g=p({tabbingDirection:"forwards"});i_(g)}}),s.jsx(P$.Slot,{scope:n,children:s.jsx(qn.ol,{tabIndex:-1,...a,ref:f})}),v&&s.jsx(HR,{ref:u,onFocusFromOutsideViewport:()=>{const g=p({tabbingDirection:"backwards"});i_(g)}})]})});sJ.displayName=rJ;var iJ="ToastFocusProxy",HR=A.forwardRef((t,e)=>{const{__scopeToast:n,onFocusFromOutsideViewport:r,...i}=t,a=JI(iJ,n);return s.jsx(C$,{"aria-hidden":!0,tabIndex:0,...i,ref:e,style:{position:"fixed"},onFocus:o=>{var d;const l=o.relatedTarget;!((d=a.viewport)!=null&&d.contains(l))&&r()}})});HR.displayName=iJ;var pA="Toast",Fme="toast.swipeStart",$me="toast.swipeMove",Bme="toast.swipeCancel",zme="toast.swipeEnd",aJ=A.forwardRef((t,e)=>{const{forceMount:n,open:r,defaultOpen:i,onOpenChange:a,...o}=t,[l,c]=mA({prop:r,defaultProp:i??!0,onChange:a,caller:pA});return s.jsx(Sv,{present:n||l,children:s.jsx(qme,{open:l,...o,ref:e,onClose:()=>c(!1),onPause:cv(t.onPause),onResume:cv(t.onResume),onSwipeStart:On(t.onSwipeStart,d=>{d.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:On(t.onSwipeMove,d=>{const{x:u,y:h}=d.detail.delta;d.currentTarget.setAttribute("data-swipe","move"),d.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${u}px`),d.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${h}px`)}),onSwipeCancel:On(t.onSwipeCancel,d=>{d.currentTarget.setAttribute("data-swipe","cancel"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),d.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:On(t.onSwipeEnd,d=>{const{x:u,y:h}=d.detail.delta;d.currentTarget.setAttribute("data-swipe","end"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),d.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${u}px`),d.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${h}px`),c(!1)})})})});aJ.displayName=pA;var[Ume,Vme]=tJ(pA,{onClose(){}}),qme=A.forwardRef((t,e)=>{const{__scopeToast:n,type:r="foreground",duration:i,open:a,onClose:o,onEscapeKeyDown:l,onPause:c,onResume:d,onSwipeStart:u,onSwipeMove:h,onSwipeCancel:f,onSwipeEnd:m,...v}=t,p=JI(pA,n),[g,x]=A.useState(null),y=li(e,_=>x(_)),b=A.useRef(null),w=A.useRef(null),N=i||p.duration,E=A.useRef(0),C=A.useRef(N),j=A.useRef(0),{onToastAdd:I,onToastRemove:k}=p,D=cv(()=>{var M;(g==null?void 0:g.contains(document.activeElement))&&((M=p.viewport)==null||M.focus()),o()}),P=A.useCallback(_=>{!_||_===1/0||(window.clearTimeout(j.current),E.current=new Date().getTime(),j.current=window.setTimeout(D,_))},[D]);A.useEffect(()=>{const _=p.viewport;if(_){const M=()=>{P(C.current),d==null||d()},U=()=>{const F=new Date().getTime()-E.current;C.current=C.current-F,window.clearTimeout(j.current),c==null||c()};return _.addEventListener(VR,U),_.addEventListener(qR,M),()=>{_.removeEventListener(VR,U),_.removeEventListener(qR,M)}}},[p.viewport,N,c,d,P]),A.useEffect(()=>{a&&!p.isClosePausedRef.current&&P(N)},[a,N,p.isClosePausedRef,P]),A.useEffect(()=>(I(),()=>k()),[I,k]);const R=A.useMemo(()=>g?fJ(g):null,[g]);return p.viewport?s.jsxs(s.Fragment,{children:[R&&s.jsx(Hme,{__scopeToast:n,role:"status","aria-live":r==="foreground"?"assertive":"polite","aria-atomic":!0,children:R}),s.jsx(Ume,{scope:n,onClose:D,children:ch.createPortal(s.jsx(P$.ItemSlot,{scope:n,children:s.jsx(Nme,{asChild:!0,onEscapeKeyDown:On(l,()=>{p.isFocusedToastEscapeKeyDownRef.current||D(),p.isFocusedToastEscapeKeyDownRef.current=!1}),children:s.jsx(qn.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":a?"open":"closed","data-swipe-direction":p.swipeDirection,...v,ref:y,style:{userSelect:"none",touchAction:"none",...t.style},onKeyDown:On(t.onKeyDown,_=>{_.key==="Escape"&&(l==null||l(_.nativeEvent),_.nativeEvent.defaultPrevented||(p.isFocusedToastEscapeKeyDownRef.current=!0,D()))}),onPointerDown:On(t.onPointerDown,_=>{_.button===0&&(b.current={x:_.clientX,y:_.clientY})}),onPointerMove:On(t.onPointerMove,_=>{if(!b.current)return;const M=_.clientX-b.current.x,U=_.clientY-b.current.y,F=!!w.current,z=["left","right"].includes(p.swipeDirection),H=["left","up"].includes(p.swipeDirection)?Math.min:Math.max,W=z?H(0,M):0,$=z?0:H(0,U),L=_.pointerType==="touch"?10:2,q={x:W,y:$},Y={originalEvent:_,delta:q};F?(w.current=q,nC($me,h,Y,{discrete:!1})):mz(q,p.swipeDirection,L)?(w.current=q,nC(Fme,u,Y,{discrete:!1}),_.target.setPointerCapture(_.pointerId)):(Math.abs(M)>L||Math.abs(U)>L)&&(b.current=null)}),onPointerUp:On(t.onPointerUp,_=>{const M=w.current,U=_.target;if(U.hasPointerCapture(_.pointerId)&&U.releasePointerCapture(_.pointerId),w.current=null,b.current=null,M){const F=_.currentTarget,z={originalEvent:_,delta:M};mz(M,p.swipeDirection,p.swipeThreshold)?nC(zme,m,z,{discrete:!0}):nC(Bme,f,z,{discrete:!0}),F.addEventListener("click",H=>H.preventDefault(),{once:!0})}})})})}),p.viewport)})]}):null}),Hme=t=>{const{__scopeToast:e,children:n,...r}=t,i=JI(pA,e),[a,o]=A.useState(!1),[l,c]=A.useState(!1);return Kme(()=>o(!0)),A.useEffect(()=>{const d=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(d)},[]),l?null:s.jsx(eJ,{asChild:!0,children:s.jsx(C$,{...r,children:a&&s.jsxs(s.Fragment,{children:[i.label," ",n]})})})},Wme="ToastTitle",oJ=A.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return s.jsx(qn.div,{...r,ref:e})});oJ.displayName=Wme;var Gme="ToastDescription",lJ=A.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return s.jsx(qn.div,{...r,ref:e})});lJ.displayName=Gme;var cJ="ToastAction",dJ=A.forwardRef((t,e)=>{const{altText:n,...r}=t;return n.trim()?s.jsx(hJ,{altText:n,asChild:!0,children:s.jsx(T$,{...r,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${cJ}\`. Expected non-empty \`string\`.`),null)});dJ.displayName=cJ;var uJ="ToastClose",T$=A.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t,i=Vme(uJ,n);return s.jsx(hJ,{asChild:!0,children:s.jsx(qn.button,{type:"button",...r,ref:e,onClick:On(t.onClick,i.onClose)})})});T$.displayName=uJ;var hJ=A.forwardRef((t,e)=>{const{__scopeToast:n,altText:r,...i}=t;return s.jsx(qn.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...i,ref:e})});function fJ(t){const e=[];return Array.from(t.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&e.push(r.textContent),Yme(r)){const i=r.ariaHidden||r.hidden||r.style.display==="none",a=r.dataset.radixToastAnnounceExclude==="";if(!i)if(a){const o=r.dataset.radixToastAnnounceAlt;o&&e.push(o)}else e.push(...fJ(r))}}),e}function nC(t,e,n,{discrete:r}){const i=n.originalEvent.currentTarget,a=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:n});e&&i.addEventListener(t,e,{once:!0}),r?A$(i,a):i.dispatchEvent(a)}var mz=(t,e,n=0)=>{const r=Math.abs(t.x),i=Math.abs(t.y),a=r>i;return e==="left"||e==="right"?a&&r>n:!a&&i>n};function Kme(t=()=>{}){const e=cv(t);Sd(()=>{let n=0,r=0;return n=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(r)}},[e])}function Yme(t){return t.nodeType===t.ELEMENT_NODE}function Xme(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function i_(t){const e=document.activeElement;return t.some(n=>n===e?!0:(n.focus(),document.activeElement!==e))}var Zme=nJ,mJ=sJ,pJ=aJ,gJ=oJ,vJ=lJ,xJ=dJ,yJ=T$;function bJ(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t))for(e=0;e<t.length;e++)t[e]&&(n=bJ(t[e]))&&(r&&(r+=" "),r+=n);else for(e in t)t[e]&&(r&&(r+=" "),r+=e);return r}function wJ(){for(var t,e,n=0,r="";n<arguments.length;)(t=arguments[n++])&&(e=bJ(t))&&(r&&(r+=" "),r+=e);return r}const pz=t=>typeof t=="boolean"?"".concat(t):t===0?"0":t,gz=wJ,gA=(t,e)=>n=>{var r;if((e==null?void 0:e.variants)==null)return gz(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:i,defaultVariants:a}=e,o=Object.keys(i).map(d=>{const u=n==null?void 0:n[d],h=a==null?void 0:a[d];if(u===null)return null;const f=pz(u)||pz(h);return i[d][f]}),l=n&&Object.entries(n).reduce((d,u)=>{let[h,f]=u;return f===void 0||(d[h]=f),d},{}),c=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((d,u)=>{let{class:h,className:f,...m}=u;return Object.entries(m).every(v=>{let[p,g]=v;return Array.isArray(g)?g.includes({...a,...l}[p]):{...a,...l}[p]===g})?[...d,h,f]:d},[]);return gz(t,o,c,n==null?void 0:n.class,n==null?void 0:n.className)};var Qme={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const Jme=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),epe=(t,e)=>{const n=A.forwardRef(({color:r="currentColor",size:i=24,strokeWidth:a=2,absoluteStrokeWidth:o,children:l,...c},d)=>A.createElement("svg",{ref:d,...Qme,width:i,height:i,stroke:r,strokeWidth:o?Number(a)*24/Number(i):a,className:`lucide lucide-${Jme(t)}`,...c},[...e.map(([u,h])=>A.createElement(u,h)),...(Array.isArray(l)?l:[l])||[]]));return n.displayName=`${t}`,n};var pt=epe;const Yx=pt("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]),mm=pt("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),Ba=pt("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),zh=pt("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]),WR=pt("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),I$=pt("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),Uh=pt("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]),ms=pt("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]),D$=pt("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]),od=pt("Brain",[["path",{d:"M9.5 2A2.5 2.5 0 0 1 12 4.5v15a2.5 2.5 0 0 1-4.96.44 2.5 2.5 0 0 1-2.96-3.08 3 3 0 0 1-.34-5.58 2.5 2.5 0 0 1 1.32-4.24 2.5 2.5 0 0 1 1.98-3A2.5 2.5 0 0 1 9.5 2Z",key:"1mhkh5"}],["path",{d:"M14.5 2A2.5 2.5 0 0 0 12 4.5v15a2.5 2.5 0 0 0 4.96.44 2.5 2.5 0 0 0 2.96-3.08 3 3 0 0 0 .34-5.58 2.5 2.5 0 0 0-1.32-4.24 2.5 2.5 0 0 0-1.98-3A2.5 2.5 0 0 0 14.5 2Z",key:"1d6s00"}]]),sb=pt("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]),dv=pt("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]),Sn=pt("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]),ud=pt("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]),Rn=pt("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["polyline",{points:"22 4 12 14.01 9 11.01",key:"6xbx8j"}]]),e3=pt("CheckSquare",[["polyline",{points:"9 11 12 14 22 4",key:"19ybtz"}],["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11",key:"1jnkn4"}]]),t3=pt("Check",[["polyline",{points:"20 6 9 17 4 12",key:"10jjfj"}]]),k$=pt("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),tpe=pt("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),npe=pt("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]),qj=pt("ClipboardCheck",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"m9 14 2 2 4-4",key:"df797q"}]]),GR=pt("Clipboard",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}]]),gn=pt("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),n3=pt("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]),ga=pt("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]),Vt=pt("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]),Ha=pt("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),vz=pt("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]),Wr=pt("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),xz=pt("FileCheck",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]]),Zt=pt("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]),rpe=pt("File",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}]]),bc=pt("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]),_$=pt("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"2",x2:"22",y1:"12",y2:"12",key:"1dnqot"}],["path",{d:"M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z",key:"nb9nel"}]]),jJ=pt("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]),a_=pt("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]),NJ=pt("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]),Hj=pt("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]),spe=pt("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]),o_=pt("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]),SJ=pt("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),Ti=pt("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]),Ad=pt("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]),ipe=pt("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]),ss=pt("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]),Ii=pt("Package",[["path",{d:"M16.5 9.4 7.55 4.24",key:"10qotr"}],["path",{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z",key:"yt0hxn"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["line",{x1:"12",x2:"12",y1:"22",y2:"12",key:"a4e8g8"}]]),AJ=pt("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",key:"1xcu5"}],["circle",{cx:"17.5",cy:"10.5",r:".5",key:"736e4u"}],["circle",{cx:"8.5",cy:"7.5",r:".5",key:"clrty"}],["circle",{cx:"6.5",cy:"12.5",r:".5",key:"1s4xz9"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]),ape=pt("Pause",[["rect",{width:"4",height:"16",x:"6",y:"4",key:"iffhe4"}],["rect",{width:"4",height:"16",x:"14",y:"4",key:"sjin7j"}]]),ar=pt("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]),ope=pt("PenTool",[["path",{d:"m12 19 7-7 3 3-7 7-3-3z",key:"rklqx2"}],["path",{d:"m18 13-1.5-7.5L2 2l3.5 14.5L13 18l5-5z",key:"1et58u"}],["path",{d:"m2 2 7.586 7.586",key:"etlp93"}],["circle",{cx:"11",cy:"11",r:"2",key:"xmgehs"}]]),r3=pt("Percent",[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]]),vA=pt("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]),lpe=pt("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]),yt=pt("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),s3=pt("Printer",[["polyline",{points:"6 9 6 2 18 2 18 9",key:"1306q4"}],["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["rect",{width:"12",height:"8",x:"6",y:"14",key:"5ipwut"}]]),cpe=pt("QrCode",[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]]),Ma=pt("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1-2-1Z",key:"wqdwcb"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17V7",key:"pyj7ub"}]]),CJ=pt("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),EJ=pt("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]),Wn=pt("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]),Rr=pt("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),Do=pt("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]),Wa=pt("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),O$=pt("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z",key:"3xmgem"}]]),dpe=pt("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]),L$=pt("Tag",[["path",{d:"M12 2H2v10l9.29 9.29c.94.94 2.48.94 3.42 0l6.58-6.58c.94-.94.94-2.48 0-3.42L12 2Z",key:"14b2ls"}],["path",{d:"M7 7h.01",key:"7u93v4"}]]),xd=pt("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]),upe=pt("ThumbsDown",[["path",{d:"M17 14V2",key:"8ymqnk"}],["path",{d:"M9 18.12 10 14H4.17a2 2 0 0 1-1.92-2.56l2.33-8A2 2 0 0 1 6.5 2H20a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-2.76a2 2 0 0 0-1.79 1.11L12 22h0a3.13 3.13 0 0 1-3-3.88Z",key:"s6e0r"}]]),hpe=pt("ThumbsUp",[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2h0a3.13 3.13 0 0 1 3 3.88Z",key:"y3tblf"}]]),Tr=pt("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),AE=pt("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]),tn=pt("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),Fa=pt("Truck",[["path",{d:"M10 17h4V5H2v12h3",key:"1jq12e"}],["path",{d:"M20 17h2v-3.34a4 4 0 0 0-1.17-2.83L19 9h-5",key:"1xb3ft"}],["path",{d:"M14 17h1",key:"nufu4t"}],["circle",{cx:"7.5",cy:"17.5",r:"2.5",key:"a7aife"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]]),yz=pt("Type",[["polyline",{points:"4 7 4 4 20 4 20 7",key:"1nosan"}],["line",{x1:"9",x2:"15",y1:"20",y2:"20",key:"swin9y"}],["line",{x1:"12",x2:"12",y1:"4",y2:"20",key:"1tx1rr"}]]),fpe=pt("Unlink",[["path",{d:"m18.84 12.25 1.72-1.71h-.02a5.004 5.004 0 0 0-.12-7.07 5.006 5.006 0 0 0-6.95 0l-1.72 1.71",key:"yqzxt4"}],["path",{d:"m5.17 11.75-1.71 1.71a5.004 5.004 0 0 0 .12 7.07 5.006 5.006 0 0 0 6.95 0l1.71-1.71",key:"4qinb0"}],["line",{x1:"8",x2:"8",y1:"2",y2:"5",key:"1041cp"}],["line",{x1:"2",x2:"5",y1:"8",y2:"8",key:"14m1p5"}],["line",{x1:"16",x2:"16",y1:"19",y2:"22",key:"rzdirn"}],["line",{x1:"19",x2:"22",y1:"16",y2:"16",key:"ox905f"}]]),Cd=pt("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),Gr=pt("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),Lr=pt("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),mpe=pt("Video",[["path",{d:"m22 8-6 4 6 4V8Z",key:"50v9me"}],["rect",{width:"14",height:"12",x:"2",y:"6",rx:"2",ry:"2",key:"1rqjg6"}]]),bz=pt("Webhook",[["path",{d:"M18 16.98h-5.99c-1.1 0-1.95.94-2.48 1.9A4 4 0 0 1 2 17c.01-.7.2-1.4.57-2",key:"q3hayz"}],["path",{d:"m6 17 3.13-5.78c.53-.97.1-2.18-.5-3.1a4 4 0 1 1 6.89-4.06",key:"1go1hn"}],["path",{d:"m12 6 3.13 5.73C15.66 12.7 16.9 13 18 13a4 4 0 0 1 0 8",key:"qlwsc0"}]]),pl=pt("Wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]]),ko=pt("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),on=pt("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function ppe(){for(var t=0,e,n,r="";t<arguments.length;)(e=arguments[t++])&&(n=PJ(e))&&(r&&(r+=" "),r+=n);return r}function PJ(t){if(typeof t=="string")return t;for(var e,n="",r=0;r<t.length;r++)t[r]&&(e=PJ(t[r]))&&(n&&(n+=" "),n+=e);return n}var R$="-";function gpe(t){var e=xpe(t),n=t.conflictingClassGroups,r=t.conflictingClassGroupModifiers,i=r===void 0?{}:r;function a(l){var c=l.split(R$);return c[0]===""&&c.length!==1&&c.shift(),TJ(c,e)||vpe(l)}function o(l,c){var d=n[l]||[];return c&&i[l]?[].concat(d,i[l]):d}return{getClassGroupId:a,getConflictingClassGroupIds:o}}function TJ(t,e){var o;if(t.length===0)return e.classGroupId;var n=t[0],r=e.nextPart.get(n),i=r?TJ(t.slice(1),r):void 0;if(i)return i;if(e.validators.length!==0){var a=t.join(R$);return(o=e.validators.find(function(l){var c=l.validator;return c(a)}))==null?void 0:o.classGroupId}}var wz=/^\[(.+)\]$/;function vpe(t){if(wz.test(t)){var e=wz.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}}function xpe(t){var e=t.theme,n=t.prefix,r={nextPart:new Map,validators:[]},i=bpe(Object.entries(t.classGroups),n);return i.forEach(function(a){var o=a[0],l=a[1];KR(l,r,o,e)}),r}function KR(t,e,n,r){t.forEach(function(i){if(typeof i=="string"){var a=i===""?e:jz(e,i);a.classGroupId=n;return}if(typeof i=="function"){if(ype(i)){KR(i(r),e,n,r);return}e.validators.push({validator:i,classGroupId:n});return}Object.entries(i).forEach(function(o){var l=o[0],c=o[1];KR(c,jz(e,l),n,r)})})}function jz(t,e){var n=t;return e.split(R$).forEach(function(r){n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n}function ype(t){return t.isThemeGetter}function bpe(t,e){return e?t.map(function(n){var r=n[0],i=n[1],a=i.map(function(o){return typeof o=="string"?e+o:typeof o=="object"?Object.fromEntries(Object.entries(o).map(function(l){var c=l[0],d=l[1];return[e+c,d]})):o});return[r,a]}):t}function wpe(t){if(t<1)return{get:function(){},set:function(){}};var e=0,n=new Map,r=new Map;function i(a,o){n.set(a,o),e++,e>t&&(e=0,r=n,n=new Map)}return{get:function(o){var l=n.get(o);if(l!==void 0)return l;if((l=r.get(o))!==void 0)return i(o,l),l},set:function(o,l){n.has(o)?n.set(o,l):i(o,l)}}}var IJ="!";function jpe(t){var e=t.separator||":",n=e.length===1,r=e[0],i=e.length;return function(o){for(var l=[],c=0,d=0,u,h=0;h<o.length;h++){var f=o[h];if(c===0){if(f===r&&(n||o.slice(h,h+i)===e)){l.push(o.slice(d,h)),d=h+i;continue}if(f==="/"){u=h;continue}}f==="["?c++:f==="]"&&c--}var m=l.length===0?o:o.substring(d),v=m.startsWith(IJ),p=v?m.substring(1):m,g=u&&u>d?u-d:void 0;return{modifiers:l,hasImportantModifier:v,baseClassName:p,maybePostfixModifierPosition:g}}}function Npe(t){if(t.length<=1)return t;var e=[],n=[];return t.forEach(function(r){var i=r[0]==="[";i?(e.push.apply(e,n.sort().concat([r])),n=[]):n.push(r)}),e.push.apply(e,n.sort()),e}function Spe(t){return{cache:wpe(t.cacheSize),splitModifiers:jpe(t),...gpe(t)}}var Ape=/\s+/;function Cpe(t,e){var n=e.splitModifiers,r=e.getClassGroupId,i=e.getConflictingClassGroupIds,a=new Set;return t.trim().split(Ape).map(function(o){var l=n(o),c=l.modifiers,d=l.hasImportantModifier,u=l.baseClassName,h=l.maybePostfixModifierPosition,f=r(h?u.substring(0,h):u),m=!!h;if(!f){if(!h)return{isTailwindClass:!1,originalClassName:o};if(f=r(u),!f)return{isTailwindClass:!1,originalClassName:o};m=!1}var v=Npe(c).join(":"),p=d?v+IJ:v;return{isTailwindClass:!0,modifierId:p,classGroupId:f,originalClassName:o,hasPostfixModifier:m}}).reverse().filter(function(o){if(!o.isTailwindClass)return!0;var l=o.modifierId,c=o.classGroupId,d=o.hasPostfixModifier,u=l+c;return a.has(u)?!1:(a.add(u),i(c,d).forEach(function(h){return a.add(l+h)}),!0)}).reverse().map(function(o){return o.originalClassName}).join(" ")}function Epe(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r,i,a,o=l;function l(d){var u=e[0],h=e.slice(1),f=h.reduce(function(m,v){return v(m)},u());return r=Spe(f),i=r.cache.get,a=r.cache.set,o=c,c(d)}function c(d){var u=i(d);if(u)return u;var h=Cpe(d,r);return a(d,h),h}return function(){return o(ppe.apply(null,arguments))}}function Nr(t){var e=function(r){return r[t]||[]};return e.isThemeGetter=!0,e}var DJ=/^\[(?:([a-z-]+):)?(.+)\]$/i,Ppe=/^\d+\/\d+$/,Tpe=new Set(["px","full","screen"]),Ipe=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Dpe=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,kpe=/^-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/;function Ml(t){return vp(t)||Tpe.has(t)||Ppe.test(t)||YR(t)}function YR(t){return Av(t,"length",Fpe)}function _pe(t){return Av(t,"size",kJ)}function Ope(t){return Av(t,"position",kJ)}function Lpe(t){return Av(t,"url",$pe)}function rC(t){return Av(t,"number",vp)}function vp(t){return!Number.isNaN(Number(t))}function Rpe(t){return t.endsWith("%")&&vp(t.slice(0,-1))}function ew(t){return Nz(t)||Av(t,"number",Nz)}function jn(t){return DJ.test(t)}function tw(){return!0}function Dh(t){return Ipe.test(t)}function Mpe(t){return Av(t,"",Bpe)}function Av(t,e,n){var r=DJ.exec(t);return r?r[1]?r[1]===e:n(r[2]):!1}function Fpe(t){return Dpe.test(t)}function kJ(){return!1}function $pe(t){return t.startsWith("url(")}function Nz(t){return Number.isInteger(Number(t))}function Bpe(t){return kpe.test(t)}function zpe(){var t=Nr("colors"),e=Nr("spacing"),n=Nr("blur"),r=Nr("brightness"),i=Nr("borderColor"),a=Nr("borderRadius"),o=Nr("borderSpacing"),l=Nr("borderWidth"),c=Nr("contrast"),d=Nr("grayscale"),u=Nr("hueRotate"),h=Nr("invert"),f=Nr("gap"),m=Nr("gradientColorStops"),v=Nr("gradientColorStopPositions"),p=Nr("inset"),g=Nr("margin"),x=Nr("opacity"),y=Nr("padding"),b=Nr("saturate"),w=Nr("scale"),N=Nr("sepia"),E=Nr("skew"),C=Nr("space"),j=Nr("translate"),I=function(){return["auto","contain","none"]},k=function(){return["auto","hidden","clip","visible","scroll"]},D=function(){return["auto",jn,e]},P=function(){return[jn,e]},R=function(){return["",Ml]},_=function(){return["auto",vp,jn]},M=function(){return["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"]},U=function(){return["solid","dashed","dotted","double","none"]},F=function(){return["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity","plus-lighter"]},z=function(){return["start","end","center","between","around","evenly","stretch"]},H=function(){return["","0",jn]},W=function(){return["auto","avoid","all","avoid-page","page","left","right","column"]},$=function(){return[vp,rC]},L=function(){return[vp,jn]};return{cacheSize:500,theme:{colors:[tw],spacing:[Ml],blur:["none","",Dh,jn],brightness:$(),borderColor:[t],borderRadius:["none","","full",Dh,jn],borderSpacing:P(),borderWidth:R(),contrast:$(),grayscale:H(),hueRotate:L(),invert:H(),gap:P(),gradientColorStops:[t],gradientColorStopPositions:[Rpe,YR],inset:D(),margin:D(),opacity:$(),padding:P(),saturate:$(),scale:$(),sepia:H(),skew:L(),space:P(),translate:P()},classGroups:{aspect:[{aspect:["auto","square","video",jn]}],container:["container"],columns:[{columns:[Dh]}],"break-after":[{"break-after":W()}],"break-before":[{"break-before":W()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none"]}],clear:[{clear:["left","right","both","none"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[].concat(M(),[jn])}],overflow:[{overflow:k()}],"overflow-x":[{"overflow-x":k()}],"overflow-y":[{"overflow-y":k()}],overscroll:[{overscroll:I()}],"overscroll-x":[{"overscroll-x":I()}],"overscroll-y":[{"overscroll-y":I()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[p]}],"inset-x":[{"inset-x":[p]}],"inset-y":[{"inset-y":[p]}],start:[{start:[p]}],end:[{end:[p]}],top:[{top:[p]}],right:[{right:[p]}],bottom:[{bottom:[p]}],left:[{left:[p]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",ew]}],basis:[{basis:D()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",jn]}],grow:[{grow:H()}],shrink:[{shrink:H()}],order:[{order:["first","last","none",ew]}],"grid-cols":[{"grid-cols":[tw]}],"col-start-end":[{col:["auto",{span:["full",ew]},jn]}],"col-start":[{"col-start":_()}],"col-end":[{"col-end":_()}],"grid-rows":[{"grid-rows":[tw]}],"row-start-end":[{row:["auto",{span:[ew]},jn]}],"row-start":[{"row-start":_()}],"row-end":[{"row-end":_()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",jn]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",jn]}],gap:[{gap:[f]}],"gap-x":[{"gap-x":[f]}],"gap-y":[{"gap-y":[f]}],"justify-content":[{justify:["normal"].concat(z())}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal"].concat(z(),["baseline"])}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[].concat(z(),["baseline"])}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[y]}],px:[{px:[y]}],py:[{py:[y]}],ps:[{ps:[y]}],pe:[{pe:[y]}],pt:[{pt:[y]}],pr:[{pr:[y]}],pb:[{pb:[y]}],pl:[{pl:[y]}],m:[{m:[g]}],mx:[{mx:[g]}],my:[{my:[g]}],ms:[{ms:[g]}],me:[{me:[g]}],mt:[{mt:[g]}],mr:[{mr:[g]}],mb:[{mb:[g]}],ml:[{ml:[g]}],"space-x":[{"space-x":[C]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[C]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit",jn,e]}],"min-w":[{"min-w":["min","max","fit",jn,Ml]}],"max-w":[{"max-w":["0","none","full","min","max","fit","prose",{screen:[Dh]},Dh,jn]}],h:[{h:[jn,e,"auto","min","max","fit"]}],"min-h":[{"min-h":["min","max","fit",jn,Ml]}],"max-h":[{"max-h":[jn,e,"min","max","fit"]}],"font-size":[{text:["base",Dh,YR]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",rC]}],"font-family":[{font:[tw]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",jn]}],"line-clamp":[{"line-clamp":["none",vp,rC]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",jn,Ml]}],"list-image":[{"list-image":["none",jn]}],"list-style-type":[{list:["none","disc","decimal",jn]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[x]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[x]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[].concat(U(),["wavy"])}],"text-decoration-thickness":[{decoration:["auto","from-font",Ml]}],"underline-offset":[{"underline-offset":["auto",jn,Ml]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],indent:[{indent:P()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",jn]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",jn]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[x]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[].concat(M(),[Ope])}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",_pe]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},Lpe]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[v]}],"gradient-via-pos":[{via:[v]}],"gradient-to-pos":[{to:[v]}],"gradient-from":[{from:[m]}],"gradient-via":[{via:[m]}],"gradient-to":[{to:[m]}],rounded:[{rounded:[a]}],"rounded-s":[{"rounded-s":[a]}],"rounded-e":[{"rounded-e":[a]}],"rounded-t":[{"rounded-t":[a]}],"rounded-r":[{"rounded-r":[a]}],"rounded-b":[{"rounded-b":[a]}],"rounded-l":[{"rounded-l":[a]}],"rounded-ss":[{"rounded-ss":[a]}],"rounded-se":[{"rounded-se":[a]}],"rounded-ee":[{"rounded-ee":[a]}],"rounded-es":[{"rounded-es":[a]}],"rounded-tl":[{"rounded-tl":[a]}],"rounded-tr":[{"rounded-tr":[a]}],"rounded-br":[{"rounded-br":[a]}],"rounded-bl":[{"rounded-bl":[a]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[x]}],"border-style":[{border:[].concat(U(),["hidden"])}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[x]}],"divide-style":[{divide:U()}],"border-color":[{border:[i]}],"border-color-x":[{"border-x":[i]}],"border-color-y":[{"border-y":[i]}],"border-color-t":[{"border-t":[i]}],"border-color-r":[{"border-r":[i]}],"border-color-b":[{"border-b":[i]}],"border-color-l":[{"border-l":[i]}],"divide-color":[{divide:[i]}],"outline-style":[{outline:[""].concat(U())}],"outline-offset":[{"outline-offset":[jn,Ml]}],"outline-w":[{outline:[Ml]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:R()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[x]}],"ring-offset-w":[{"ring-offset":[Ml]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",Dh,Mpe]}],"shadow-color":[{shadow:[tw]}],opacity:[{opacity:[x]}],"mix-blend":[{"mix-blend":F()}],"bg-blend":[{"bg-blend":F()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",Dh,jn]}],grayscale:[{grayscale:[d]}],"hue-rotate":[{"hue-rotate":[u]}],invert:[{invert:[h]}],saturate:[{saturate:[b]}],sepia:[{sepia:[N]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[d]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[u]}],"backdrop-invert":[{"backdrop-invert":[h]}],"backdrop-opacity":[{"backdrop-opacity":[x]}],"backdrop-saturate":[{"backdrop-saturate":[b]}],"backdrop-sepia":[{"backdrop-sepia":[N]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",jn]}],duration:[{duration:L()}],ease:[{ease:["linear","in","out","in-out",jn]}],delay:[{delay:L()}],animate:[{animate:["none","spin","ping","pulse","bounce",jn]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[w]}],"scale-x":[{"scale-x":[w]}],"scale-y":[{"scale-y":[w]}],rotate:[{rotate:[ew,jn]}],"translate-x":[{"translate-x":[j]}],"translate-y":[{"translate-y":[j]}],"skew-x":[{"skew-x":[E]}],"skew-y":[{"skew-y":[E]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",jn]}],accent:[{accent:["auto",t]}],appearance:["appearance-none"],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",jn]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":P()}],"scroll-mx":[{"scroll-mx":P()}],"scroll-my":[{"scroll-my":P()}],"scroll-ms":[{"scroll-ms":P()}],"scroll-me":[{"scroll-me":P()}],"scroll-mt":[{"scroll-mt":P()}],"scroll-mr":[{"scroll-mr":P()}],"scroll-mb":[{"scroll-mb":P()}],"scroll-ml":[{"scroll-ml":P()}],"scroll-p":[{"scroll-p":P()}],"scroll-px":[{"scroll-px":P()}],"scroll-py":[{"scroll-py":P()}],"scroll-ps":[{"scroll-ps":P()}],"scroll-pe":[{"scroll-pe":P()}],"scroll-pt":[{"scroll-pt":P()}],"scroll-pr":[{"scroll-pr":P()}],"scroll-pb":[{"scroll-pb":P()}],"scroll-pl":[{"scroll-pl":P()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","pinch-zoom","manipulation",{pan:["x","left","right","y","up","down"]}]}],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",jn]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[Ml,rC]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}}var Upe=Epe(zpe);function st(...t){return Upe(wJ(t))}function Le(t){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(t)}function ht(t){return new Intl.DateTimeFormat("en-US",{year:"numeric",month:"short",day:"numeric"}).format(new Date(t))}function Qw(t){return new Intl.DateTimeFormat("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}).format(new Date(t))}function Dn(t,e){try{localStorage.setItem(t,JSON.stringify(e))}catch(n){console.error("Failed to save to localStorage:",n)}}function yr(t,e){try{const n=localStorage.getItem(t);return n?JSON.parse(n):e}catch(n){return console.error("Failed to load from localStorage:",n),e}}function Vpe(t){try{localStorage.removeItem(t)}catch(e){console.error("Failed to remove from localStorage:",e)}}function qpe(t){const e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return e?{r:parseInt(e[1],16),g:parseInt(e[2],16),b:parseInt(e[3],16)}:null}function XR(t){const e=qpe(t);return e?(.299*e.r+.587*e.g+.114*e.b)/255>.5:!1}const Hpe=Zme,_J=A.forwardRef(({className:t,...e},n)=>s.jsx(mJ,{ref:n,className:st("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",t),...e}));_J.displayName=mJ.displayName;const Wpe=gA("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),OJ=A.forwardRef(({className:t,variant:e,...n},r)=>s.jsx(pJ,{ref:r,className:st(Wpe({variant:e}),t),...n}));OJ.displayName=pJ.displayName;const Gpe=A.forwardRef(({className:t,...e},n)=>s.jsx(xJ,{ref:n,className:st("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",t),...e}));Gpe.displayName=xJ.displayName;const LJ=A.forwardRef(({className:t,...e},n)=>s.jsx(yJ,{ref:n,className:st("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",t),"toast-close":"",...e,children:s.jsx(on,{className:"h-4 w-4"})}));LJ.displayName=yJ.displayName;const RJ=A.forwardRef(({className:t,...e},n)=>s.jsx(gJ,{ref:n,className:st("text-sm font-semibold",t),...e}));RJ.displayName=gJ.displayName;const MJ=A.forwardRef(({className:t,...e},n)=>s.jsx(vJ,{ref:n,className:st("text-sm opacity-90",t),...e}));MJ.displayName=vJ.displayName;const Kpe=1,Ype=1e6;let l_=0;function Xpe(){return l_=(l_+1)%Number.MAX_SAFE_INTEGER,l_.toString()}const c_=new Map,Sz=t=>{if(c_.has(t))return;const e=setTimeout(()=>{c_.delete(t),Jw({type:"REMOVE_TOAST",toastId:t})},Ype);c_.set(t,e)},Zpe=(t,e)=>{switch(e.type){case"ADD_TOAST":return{...t,toasts:[e.toast,...t.toasts].slice(0,Kpe)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(n=>n.id===e.toast.id?{...n,...e.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=e;return n?Sz(n):t.toasts.forEach(r=>{Sz(r.id)}),{...t,toasts:t.toasts.map(r=>r.id===n||n===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(n=>n.id!==e.toastId)}}},CE=[];let EE={toasts:[]};function Jw(t){EE=Zpe(EE,t),CE.forEach(e=>{e(EE)})}function Qpe({...t}){const e=Xpe(),n=i=>Jw({type:"UPDATE_TOAST",toast:{...i,id:e}}),r=()=>Jw({type:"DISMISS_TOAST",toastId:e});return Jw({type:"ADD_TOAST",toast:{...t,id:e,open:!0,onOpenChange:i=>{i||r()}}}),{id:e,dismiss:r,update:n}}function Ot(){const[t,e]=A.useState(EE);return A.useEffect(()=>(CE.push(e),()=>{const n=CE.indexOf(e);n>-1&&CE.splice(n,1)}),[t]),{...t,toast:Qpe,dismiss:n=>Jw({type:"DISMISS_TOAST",toastId:n})}}function Jpe(){const{toasts:t}=Ot();return s.jsxs(Hpe,{children:[t.map(function({id:e,title:n,description:r,action:i,...a}){return s.jsxs(OJ,{...a,children:[s.jsxs("div",{className:"grid gap-1",children:[n&&s.jsx(RJ,{children:n}),r&&s.jsx(MJ,{children:r})]}),i,s.jsx(LJ,{})]},e)}),s.jsx(_J,{})]})}var ej=(t=>(t.ADMIN="admin",t.MANAGER="manager",t.SALES="sales",t.SERVICE="service",t.USER="user",t))(ej||{}),tl=(t=>(t.TEXT="text",t.NUMBER="number",t.DATE="date",t.BOOLEAN="boolean",t.SELECT="select",t.MULTISELECT="multiselect",t))(tl||{}),gi=(t=>(t.NEW="new",t.CONTACTED="contacted",t.QUALIFIED="qualified",t.PROPOSAL="proposal",t.NEGOTIATION="negotiation",t.CLOSED_WON="closed_won",t.CLOSED_LOST="closed_lost",t))(gi||{}),pn=(t=>(t.RV="rv",t.MOTORHOME="motorhome",t.TRAVEL_TRAILER="travel_trailer",t.FIFTH_WHEEL="fifth_wheel",t.TOY_HAULER="toy_hauler",t.SINGLE_WIDE="single_wide",t.DOUBLE_WIDE="double_wide",t.TRIPLE_WIDE="triple_wide",t.PARK_MODEL="park_model",t.MODULAR_HOME="modular_home",t))(pn||{}),En=(t=>(t.AVAILABLE="available",t.RESERVED="reserved",t.SOLD="sold",t.SERVICE="service",t.DELIVERED="delivered",t))(En||{}),nl=(t=>(t.DRAFT="draft",t.SENT="sent",t.VIEWED="viewed",t.ACCEPTED="accepted",t.REJECTED="rejected",t.EXPIRED="expired",t))(nl||{}),Ci=(t=>(t.LOW="low",t.MEDIUM="medium",t.HIGH="high",t.URGENT="urgent",t))(Ci||{}),Ur=(t=>(t.OPEN="open",t.IN_PROGRESS="in_progress",t.WAITING_PARTS="waiting_parts",t.COMPLETED="completed",t.CANCELLED="cancelled",t))(Ur||{}),cn=(t=>(t.SCHEDULED="scheduled",t.IN_TRANSIT="in_transit",t.DELIVERED="delivered",t.CANCELLED="cancelled",t))(cn||{}),In=(t=>(t.FLAT="flat",t.PERCENTAGE="percentage",t.TIERED="tiered",t))(In||{}),Gt=(t=>(t.PENDING="pending",t.APPROVED="approved",t.PAID="paid",t.CANCELLED="cancelled",t))(Gt||{}),Xt=(t=>(t.DRAFT="draft",t.SENT="sent",t.VIEWED="viewed",t.PAID="paid",t.OVERDUE="overdue",t.CANCELLED="cancelled",t))(Xt||{}),ld=(t=>(t.CASH="cash",t.CHECK="check",t.CREDIT_CARD="credit_card",t.BANK_TRANSFER="bank_transfer",t.FINANCING="financing",t))(ld||{}),Vu=(t=>(t.PENDING="pending",t.PROCESSING="processing",t.COMPLETED="completed",t.FAILED="failed",t.REFUNDED="refunded",t))(Vu||{}),No=(t=>(t.ACTIVE="active",t.CURRENT="current",t.LATE="late",t.DEFAULT="default",t.PAID_OFF="paid_off",t.CANCELLED="cancelled",t))(No||{}),su=(t=>(t.PAYMENT="payment",t.STATUS_CHANGE="status_change",t.RATE_CHANGE="rate_change",t.NOTE_ADDED="note_added",t.LATE_FEE="late_fee",t.PAYOFF="payoff",t))(su||{}),dr=(t=>(t.SALES="sales",t.INVENTORY="inventory",t.SERVICE="service",t.FINANCIAL="financial",t.CUSTOM="custom",t))(dr||{});const FJ=A.createContext(void 0);function Hb(){const t=A.useContext(FJ);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t}function ege({children:t}){const[e,n]=A.useState(null),[r,i]=A.useState(!0);A.useEffect(()=>{yr("auth_token",null)&&n({id:"1",email:"admin@renterinsight.com",name:"Admin User",role:ej.ADMIN,tenantId:"tenant-1",permissions:[{id:"1",name:"All Access",resource:"*",action:"*"}],createdAt:new Date,updatedAt:new Date}),i(!1)},[]);const d={user:e,login:async(u,h)=>{i(!0);try{if(await new Promise(f=>setTimeout(f,1e3)),u==="admin@renterinsight.com"&&h==="password"){const f={id:"1",email:u,name:"Admin User",role:ej.ADMIN,tenantId:"tenant-1",permissions:[{id:"1",name:"All Access",resource:"*",action:"*"}],createdAt:new Date,updatedAt:new Date};n(f),Dn("auth_token","mock-token")}else throw new Error("Invalid credentials")}catch(f){throw console.error("Login error:",f),new Error("Login failed")}finally{i(!1)}},logout:()=>{n(null),Vpe("auth_token")},isLoading:r,hasPermission:(u,h)=>e?e.permissions.some(f=>(f.resource==="*"||f.resource===u)&&(f.action==="*"||f.action===h)):!1,hasRole:u=>e?e.role===u||e.role===ej.ADMIN:!1};return s.jsx(FJ.Provider,{value:d,children:t})}const $J=A.createContext(void 0);function ya(){const t=A.useContext($J);if(t===void 0)throw new Error("useTenant must be used within a TenantProvider");return t}function tge({children:t}){const[e,n]=A.useState(null);A.useEffect(()=>{const d=yr("tenant",null);if(d)n(d);else{const u={id:"tenant-1",name:"Demo RV Dealership",domain:"demo.renterinsight.com",settings:{timezone:"America/New_York",currency:"USD",dateFormat:"MM/dd/yyyy",businessHours:{monday:{open:"09:00",close:"18:00",closed:!1},tuesday:{open:"09:00",close:"18:00",closed:!1},wednesday:{open:"09:00",close:"18:00",closed:!1},thursday:{open:"09:00",close:"18:00",closed:!1},friday:{open:"09:00",close:"18:00",closed:!1},saturday:{open:"09:00",close:"17:00",closed:!1},sunday:{open:"12:00",close:"17:00",closed:!1}},features:{crm:!0,inventory:!0,quotes:!0,agreements:!0,service:!0,delivery:!0,commissions:!0,portal:!0,invoices:!0,reports:!0,landManagement:!0}},customFields:[],branding:{primaryColor:"#3b82f6",secondaryColor:"#64748b",fontFamily:"Inter"},createdAt:new Date,updatedAt:new Date};n(u),Dn("tenant",u)}},[]),A.useEffect(()=>{e&&Dn("tenant",e)},[e]);const c={tenant:e,getCustomFields:(d,u)=>(e==null?void 0:e.customFields.filter(h=>h.module===d&&(u?h.section===u:!0)))||[],updateTenant:async d=>{if(!e)return;const u={...e,...d,settings:d.settings?{...e.settings,...d.settings}:e.settings,branding:d.branding?{...e.branding,...d.branding}:e.branding,customFields:d.customFields||e.customFields,updatedAt:new Date};n(u)},addCustomField:async d=>{if(!e)return;const u={...d,id:Math.random().toString(36).substr(2,9)},h={...e,customFields:[...e.customFields,u],updatedAt:new Date};n(h)},updateCustomField:async(d,u)=>{if(!e)return;const h=e.customFields.map(m=>m.id===d?{...m,...u}:m),f={...e,customFields:h,updatedAt:new Date};n(f)},deleteCustomField:async d=>{if(!e)return;const u=e.customFields.filter(f=>f.id!==d),h={...e,customFields:u,updatedAt:new Date};n(h)}};return s.jsx($J.Provider,{value:c,children:t})}const nge={theme:"system",setTheme:()=>null},rge=A.createContext(nge);function sge({children:t,defaultTheme:e="system",storageKey:n="vite-ui-theme",...r}){const[i,a]=A.useState(()=>localStorage.getItem(n)||e);A.useEffect(()=>{const l=window.document.documentElement;if(l.classList.remove("light","dark"),i==="system"){const c=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";l.classList.add(c);return}l.classList.add(i)},[i]);const o={theme:i,setTheme:l=>{localStorage.setItem(n,l),a(l)}};return s.jsx(rge.Provider,{...r,value:o,children:t})}const ige=[{id:"crm-sales",title:"CRM & Sales",icon:Lr,hasSubmenu:!0,items:[{title:"Prospecting",href:"/crm",icon:Lr},{title:"Sales Deals",href:"/deals",icon:Zt},{title:"Quote Builder",href:"/quotes",icon:Zt}]},{id:"inventory-operations",title:"Inventory & Operations",icon:Ii,hasSubmenu:!0,items:[{title:"Inventory",href:"/inventory",icon:Ii},{title:"PDI Checklist",href:"/pdi",icon:qj},{title:"Delivery Tracker",href:"/delivery",icon:Fa}]},{id:"finance-agreements",title:"Finance & Agreements",icon:Vt,hasSubmenu:!0,items:[{title:"Finance",href:"/finance",icon:Vt},{title:"Client Applications",href:"/client-applications",icon:xz},{title:"Agreements",href:"/agreements",icon:xz},{title:"Invoices",href:"/invoices",icon:Ma}]},{id:"service-support",title:"Service & Support",icon:pl,hasSubmenu:!0,items:[{title:"Service Ops",href:"/service",icon:pl},{title:"Client Portal Admin",href:"/portal",icon:_$}]},{id:"management",title:"Management",icon:ms,hasSubmenu:!0,items:[{title:"Commission Engine",href:"/commissions",icon:r3},{title:"Reporting Suite",href:"/reports",icon:ms}]},{id:"administration",title:"Administration",icon:Wa,hasSubmenu:!0,items:[{title:"Company Settings",href:"/settings",icon:sb},{title:"Platform Admin",href:"/admin",icon:O$}]}];function age(){var u,h,f,m,v;const{tenant:t}=ya(),e=Em(),[n,r]=A.useState(null),i=((u=t==null?void 0:t.branding)==null?void 0:u.sideMenuColor)===null||!((h=t==null?void 0:t.branding)!=null&&h.sideMenuColor),a=i?"var(--background)":(f=t==null?void 0:t.branding)==null?void 0:f.sideMenuColor,o=i||(m=t==null?void 0:t.branding)!=null&&m.sideMenuColor&&XR(t.branding.sideMenuColor)?"var(--foreground)":"white",l=i||(t==null?void 0:t.branding.sideMenuColor)&&XR(t.branding.sideMenuColor),c=p=>{r(n===p?null:p)},d=p=>e.pathname===p||e.pathname.startsWith(p+"/");return s.jsxs("div",{className:"w-64 h-full border-r flex flex-col",style:{backgroundColor:a,color:o},children:[s.jsx("div",{className:"px-4 py-4 border-b",children:(v=t==null?void 0:t.branding)!=null&&v.logo?s.jsx("img",{src:t.branding.logo,alt:"Company Logo",className:"max-h-10 object-contain h-8 w-auto"}):s.jsx("div",{className:"text-lg font-semibold",children:(t==null?void 0:t.name)||"Renter Insight"})}),s.jsxs("nav",{className:"flex-1 space-y-1 px-2 py-4",children:[s.jsxs(zR,{to:"/",className:st("group flex items-center px-2 py-2 text-sm font-medium rounded-md transition-colors",d("/")&&e.pathname==="/"?"bg-slate-800 text-white":l?"text-foreground hover:bg-accent hover:text-accent-foreground":"text-white/80 hover:bg-white/10 hover:text-white"),children:[s.jsx(ms,{className:"mr-3 h-5 w-5"}),"Dashboard"]}),ige.map(p=>{var g;return s.jsxs("div",{children:[s.jsxs("button",{onClick:()=>c(p.id),className:st("group flex w-full items-center justify-between px-2 py-2 text-left text-sm font-medium rounded-md transition-colors",n===p.id?"bg-slate-800 text-white":l?"text-foreground hover:bg-accent hover:text-accent-foreground":"text-white/80 hover:bg-white/10 hover:text-white"),children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx(p.icon,{className:"mr-3 h-5 w-5"}),p.title]}),p.hasSubmenu&&(n===p.id?s.jsx(k$,{className:"h-4 w-4"}):s.jsx(tpe,{className:"h-4 w-4"}))]}),p.hasSubmenu&&n===p.id&&s.jsx("div",{className:"ml-4 mt-1 space-y-1",children:(g=p.items)==null?void 0:g.map(x=>s.jsxs(zR,{to:x.href,className:st("group flex items-center px-2 py-2 text-sm rounded-md transition-colors",d(x.href)?"bg-slate-700 text-white":l?"text-foreground hover:bg-accent hover:text-accent-foreground":"text-white/80 hover:bg-white/10 hover:text-white"),children:[s.jsx(x.icon,{className:"mr-3 h-4 w-4"}),x.title]},x.href))})]},p.id)})]})]})}const oge=gA("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),Q=A.forwardRef(({className:t,variant:e,size:n,asChild:r=!1,...i},a)=>{const o=r?lme:"button";return s.jsx(o,{className:st(oge({variant:e,size:n,className:t})),ref:a,...i})});Q.displayName="Button";const Ae=A.forwardRef(({className:t,type:e,...n},r)=>s.jsx("input",{type:e,className:st("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:r,...n}));Ae.displayName="Input";function lge(){ya();const{user:t,logout:e}=Hb();return s.jsx("header",{className:"bg-white border-b border-gray-200 px-6 py-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("div",{className:"flex items-center space-x-4",children:s.jsxs("div",{className:"relative",children:[s.jsx(Rr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),s.jsx(Ae,{type:"text",placeholder:"Search...",className:"pl-10 w-80 bg-gray-50 border-gray-200 focus:bg-white"})]})}),s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx(Q,{variant:"ghost",size:"sm",children:s.jsx(D$,{className:"h-5 w-5"})}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center",children:s.jsx(Gr,{className:"h-4 w-4 text-white"})}),s.jsxs("div",{className:"hidden md:block",children:[s.jsx("p",{className:"text-sm font-medium text-gray-900",children:t==null?void 0:t.name}),s.jsx("p",{className:"text-xs text-gray-500",children:t==null?void 0:t.email})]})]}),s.jsx(Q,{variant:"ghost",size:"sm",onClick:e,children:s.jsx(SJ,{className:"h-4 w-4"})})]})]})]})})}function cge({children:t}){const[e,n]=A.useState(!1);return s.jsxs("div",{className:"flex h-screen overflow-hidden",children:[s.jsx(age,{isOpen:e,onClose:()=>n(!1)}),s.jsxs("div",{className:"flex flex-1 flex-col overflow-hidden",children:[s.jsx(lge,{onMenuButtonClick:()=>n(!0)}),s.jsx("main",{className:"flex-1 overflow-y-auto bg-background py-6",children:s.jsx("div",{className:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8",children:t})})]})]})}const he=A.forwardRef(({className:t,...e},n)=>s.jsx("div",{ref:n,className:st("rounded-lg border bg-card text-card-foreground shadow-sm",t),...e}));he.displayName="Card";const ye=A.forwardRef(({className:t,...e},n)=>s.jsx("div",{ref:n,className:st("flex flex-col space-y-1.5 p-6",t),...e}));ye.displayName="CardHeader";const be=A.forwardRef(({className:t,...e},n)=>s.jsx("h3",{ref:n,className:st("text-2xl font-semibold leading-none tracking-tight",t),...e}));be.displayName="CardTitle";const Be=A.forwardRef(({className:t,...e},n)=>s.jsx("p",{ref:n,className:st("text-sm text-muted-foreground",t),...e}));Be.displayName="CardDescription";const fe=A.forwardRef(({className:t,...e},n)=>s.jsx("div",{ref:n,className:st("p-6 pt-0",t),...e}));fe.displayName="CardContent";const dge=A.forwardRef(({className:t,...e},n)=>s.jsx("div",{ref:n,className:st("flex items-center p-6 pt-0",t),...e}));dge.displayName="CardFooter";const un=A.forwardRef(({className:t,...e},n)=>s.jsx("textarea",{className:st("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:n,...e}));un.displayName="Textarea";function lt(){return lt=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},lt.apply(null,arguments)}function Az(t,[e,n]){return Math.min(n,Math.max(e,t))}function ua(t,e,{checkForDefaultPrevented:n=!0}={}){return function(i){if(t==null||t(i),n===!1||!i.defaultPrevented)return e==null?void 0:e(i)}}function uge(t,e=[]){let n=[];function r(a,o){const l=A.createContext(o),c=n.length;n=[...n,o];function d(h){const{scope:f,children:m,...v}=h,p=(f==null?void 0:f[t][c])||l,g=A.useMemo(()=>v,Object.values(v));return A.createElement(p.Provider,{value:g},m)}function u(h,f){const m=(f==null?void 0:f[t][c])||l,v=A.useContext(m);if(v)return v;if(o!==void 0)return o;throw new Error(`\`${h}\` must be used within \`${a}\``)}return d.displayName=a+"Provider",[d,u]}const i=()=>{const a=n.map(o=>A.createContext(o));return function(l){const c=(l==null?void 0:l[t])||a;return A.useMemo(()=>({[`__scope${t}`]:{...l,[t]:c}}),[l,c])}};return i.scopeName=t,[r,hge(i,...e)]}function hge(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(a){const o=r.reduce((l,{useScope:c,scopeName:d})=>{const h=c(a)[`__scope${d}`];return{...l,...h}},{});return A.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}function fge(t,e){typeof t=="function"?t(e):t!=null&&(t.current=e)}function BJ(...t){return e=>t.forEach(n=>fge(n,e))}function Cz(...t){return A.useCallback(BJ(...t),t)}const ZR=A.forwardRef((t,e)=>{const{children:n,...r}=t,i=A.Children.toArray(n),a=i.find(pge);if(a){const o=a.props.children,l=i.map(c=>c===a?A.Children.count(o)>1?A.Children.only(null):A.isValidElement(o)?o.props.children:null:c);return A.createElement(QR,lt({},r,{ref:e}),A.isValidElement(o)?A.cloneElement(o,void 0,l):null)}return A.createElement(QR,lt({},r,{ref:e}),n)});ZR.displayName="Slot";const QR=A.forwardRef((t,e)=>{const{children:n,...r}=t;return A.isValidElement(n)?A.cloneElement(n,{...gge(r,n.props),ref:e?BJ(e,n.ref):n.ref}):A.Children.count(n)>1?A.Children.only(null):null});QR.displayName="SlotClone";const mge=({children:t})=>A.createElement(A.Fragment,null,t);function pge(t){return A.isValidElement(t)&&t.type===mge}function gge(t,e){const n={...e};for(const r in e){const i=t[r],a=e[r];/^on[A-Z]/.test(r)?i&&a?n[r]=(...l)=>{a(...l),i(...l)}:i&&(n[r]=i):r==="style"?n[r]={...i,...a}:r==="className"&&(n[r]=[i,a].filter(Boolean).join(" "))}return{...t,...n}}function vge(t){const e=t+"CollectionProvider",[n,r]=uge(e),[i,a]=n(e,{collectionRef:{current:null},itemMap:new Map}),o=m=>{const{scope:v,children:p}=m,g=ge.useRef(null),x=ge.useRef(new Map).current;return ge.createElement(i,{scope:v,itemMap:x,collectionRef:g},p)},l=t+"CollectionSlot",c=ge.forwardRef((m,v)=>{const{scope:p,children:g}=m,x=a(l,p),y=Cz(v,x.collectionRef);return ge.createElement(ZR,{ref:y},g)}),d=t+"CollectionItemSlot",u="data-radix-collection-item",h=ge.forwardRef((m,v)=>{const{scope:p,children:g,...x}=m,y=ge.useRef(null),b=Cz(v,y),w=a(d,p);return ge.useEffect(()=>(w.itemMap.set(y,{ref:y,...x}),()=>void w.itemMap.delete(y))),ge.createElement(ZR,{[u]:"",ref:b},g)});function f(m){const v=a(t+"CollectionConsumer",m);return ge.useCallback(()=>{const g=v.collectionRef.current;if(!g)return[];const x=Array.from(g.querySelectorAll(`[${u}]`));return Array.from(v.itemMap.values()).sort((w,N)=>x.indexOf(w.ref.current)-x.indexOf(N.ref.current))},[v.collectionRef,v.itemMap])}return[{Provider:o,Slot:c,ItemSlot:h},f,r]}function xge(t,e){typeof t=="function"?t(e):t!=null&&(t.current=e)}function zJ(...t){return e=>t.forEach(n=>xge(n,e))}function Id(...t){return A.useCallback(zJ(...t),t)}function yge(t,e=[]){let n=[];function r(a,o){const l=A.createContext(o),c=n.length;n=[...n,o];function d(h){const{scope:f,children:m,...v}=h,p=(f==null?void 0:f[t][c])||l,g=A.useMemo(()=>v,Object.values(v));return A.createElement(p.Provider,{value:g},m)}function u(h,f){const m=(f==null?void 0:f[t][c])||l,v=A.useContext(m);if(v)return v;if(o!==void 0)return o;throw new Error(`\`${h}\` must be used within \`${a}\``)}return d.displayName=a+"Provider",[d,u]}const i=()=>{const a=n.map(o=>A.createContext(o));return function(l){const c=(l==null?void 0:l[t])||a;return A.useMemo(()=>({[`__scope${t}`]:{...l,[t]:c}}),[l,c])}};return i.scopeName=t,[r,bge(i,...e)]}function bge(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(a){const o=r.reduce((l,{useScope:c,scopeName:d})=>{const h=c(a)[`__scope${d}`];return{...l,...h}},{});return A.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}const wge=A.createContext(void 0);function jge(t){const e=A.useContext(wge);return t||e||"ltr"}function d_(t,e,{checkForDefaultPrevented:n=!0}={}){return function(i){if(t==null||t(i),n===!1||!i.defaultPrevented)return e==null?void 0:e(i)}}function Nge(t,e){typeof t=="function"?t(e):t!=null&&(t.current=e)}function UJ(...t){return e=>t.forEach(n=>Nge(n,e))}function Sge(...t){return A.useCallback(UJ(...t),t)}const VJ=A.forwardRef((t,e)=>{const{children:n,...r}=t,i=A.Children.toArray(n),a=i.find(Cge);if(a){const o=a.props.children,l=i.map(c=>c===a?A.Children.count(o)>1?A.Children.only(null):A.isValidElement(o)?o.props.children:null:c);return A.createElement(JR,lt({},r,{ref:e}),A.isValidElement(o)?A.cloneElement(o,void 0,l):null)}return A.createElement(JR,lt({},r,{ref:e}),n)});VJ.displayName="Slot";const JR=A.forwardRef((t,e)=>{const{children:n,...r}=t;return A.isValidElement(n)?A.cloneElement(n,{...Ege(r,n.props),ref:e?UJ(e,n.ref):n.ref}):A.Children.count(n)>1?A.Children.only(null):null});JR.displayName="SlotClone";const Age=({children:t})=>A.createElement(A.Fragment,null,t);function Cge(t){return A.isValidElement(t)&&t.type===Age}function Ege(t,e){const n={...e};for(const r in e){const i=t[r],a=e[r];/^on[A-Z]/.test(r)?i&&a?n[r]=(...l)=>{a(...l),i(...l)}:i&&(n[r]=i):r==="style"?n[r]={...i,...a}:r==="className"&&(n[r]=[i,a].filter(Boolean).join(" "))}return{...t,...n}}const Pge=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],Tge=Pge.reduce((t,e)=>{const n=A.forwardRef((r,i)=>{const{asChild:a,...o}=r,l=a?VJ:e;return A.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),A.createElement(l,lt({},o,{ref:i}))});return n.displayName=`Primitive.${e}`,{...t,[e]:n}},{});function Ige(t,e){t&&ch.flushSync(()=>t.dispatchEvent(e))}function nh(t){const e=A.useRef(t);return A.useEffect(()=>{e.current=t}),A.useMemo(()=>(...n)=>{var r;return(r=e.current)===null||r===void 0?void 0:r.call(e,...n)},[])}function Dge(t,e=globalThis==null?void 0:globalThis.document){const n=nh(t);A.useEffect(()=>{const r=i=>{i.key==="Escape"&&n(i)};return e.addEventListener("keydown",r),()=>e.removeEventListener("keydown",r)},[n,e])}const eM="dismissableLayer.update",kge="dismissableLayer.pointerDownOutside",_ge="dismissableLayer.focusOutside";let Ez;const Oge=A.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Lge=A.forwardRef((t,e)=>{var n;const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:i,onPointerDownOutside:a,onFocusOutside:o,onInteractOutside:l,onDismiss:c,...d}=t,u=A.useContext(Oge),[h,f]=A.useState(null),m=(n=h==null?void 0:h.ownerDocument)!==null&&n!==void 0?n:globalThis==null?void 0:globalThis.document,[,v]=A.useState({}),p=Sge(e,j=>f(j)),g=Array.from(u.layers),[x]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),y=g.indexOf(x),b=h?g.indexOf(h):-1,w=u.layersWithOutsidePointerEventsDisabled.size>0,N=b>=y,E=Rge(j=>{const I=j.target,k=[...u.branches].some(D=>D.contains(I));!N||k||(a==null||a(j),l==null||l(j),j.defaultPrevented||c==null||c())},m),C=Mge(j=>{const I=j.target;[...u.branches].some(D=>D.contains(I))||(o==null||o(j),l==null||l(j),j.defaultPrevented||c==null||c())},m);return Dge(j=>{b===u.layers.size-1&&(i==null||i(j),!j.defaultPrevented&&c&&(j.preventDefault(),c()))},m),A.useEffect(()=>{if(h)return r&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(Ez=m.body.style.pointerEvents,m.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(h)),u.layers.add(h),Pz(),()=>{r&&u.layersWithOutsidePointerEventsDisabled.size===1&&(m.body.style.pointerEvents=Ez)}},[h,m,r,u]),A.useEffect(()=>()=>{h&&(u.layers.delete(h),u.layersWithOutsidePointerEventsDisabled.delete(h),Pz())},[h,u]),A.useEffect(()=>{const j=()=>v({});return document.addEventListener(eM,j),()=>document.removeEventListener(eM,j)},[]),A.createElement(Tge.div,lt({},d,{ref:p,style:{pointerEvents:w?N?"auto":"none":void 0,...t.style},onFocusCapture:d_(t.onFocusCapture,C.onFocusCapture),onBlurCapture:d_(t.onBlurCapture,C.onBlurCapture),onPointerDownCapture:d_(t.onPointerDownCapture,E.onPointerDownCapture)}))});function Rge(t,e=globalThis==null?void 0:globalThis.document){const n=nh(t),r=A.useRef(!1),i=A.useRef(()=>{});return A.useEffect(()=>{const a=l=>{if(l.target&&!r.current){let d=function(){qJ(kge,n,c,{discrete:!0})};const c={originalEvent:l};l.pointerType==="touch"?(e.removeEventListener("click",i.current),i.current=d,e.addEventListener("click",i.current,{once:!0})):d()}r.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",a)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",a),e.removeEventListener("click",i.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function Mge(t,e=globalThis==null?void 0:globalThis.document){const n=nh(t),r=A.useRef(!1);return A.useEffect(()=>{const i=a=>{a.target&&!r.current&&qJ(_ge,n,{originalEvent:a},{discrete:!1})};return e.addEventListener("focusin",i),()=>e.removeEventListener("focusin",i)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function Pz(){const t=new CustomEvent(eM);document.dispatchEvent(t)}function qJ(t,e,n,{discrete:r}){const i=n.originalEvent.target,a=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&i.addEventListener(t,e,{once:!0}),r?Ige(i,a):i.dispatchEvent(a)}let u_=0;function Fge(){A.useEffect(()=>{var t,e;const n=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",(t=n[0])!==null&&t!==void 0?t:Tz()),document.body.insertAdjacentElement("beforeend",(e=n[1])!==null&&e!==void 0?e:Tz()),u_++,()=>{u_===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(r=>r.remove()),u_--}},[])}function Tz(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.cssText="outline: none; opacity: 0; position: fixed; pointer-events: none",t}function $ge(t,e){typeof t=="function"?t(e):t!=null&&(t.current=e)}function HJ(...t){return e=>t.forEach(n=>$ge(n,e))}function Bge(...t){return A.useCallback(HJ(...t),t)}const WJ=A.forwardRef((t,e)=>{const{children:n,...r}=t,i=A.Children.toArray(n),a=i.find(Uge);if(a){const o=a.props.children,l=i.map(c=>c===a?A.Children.count(o)>1?A.Children.only(null):A.isValidElement(o)?o.props.children:null:c);return A.createElement(tM,lt({},r,{ref:e}),A.isValidElement(o)?A.cloneElement(o,void 0,l):null)}return A.createElement(tM,lt({},r,{ref:e}),n)});WJ.displayName="Slot";const tM=A.forwardRef((t,e)=>{const{children:n,...r}=t;return A.isValidElement(n)?A.cloneElement(n,{...Vge(r,n.props),ref:e?HJ(e,n.ref):n.ref}):A.Children.count(n)>1?A.Children.only(null):null});tM.displayName="SlotClone";const zge=({children:t})=>A.createElement(A.Fragment,null,t);function Uge(t){return A.isValidElement(t)&&t.type===zge}function Vge(t,e){const n={...e};for(const r in e){const i=t[r],a=e[r];/^on[A-Z]/.test(r)?i&&a?n[r]=(...l)=>{a(...l),i(...l)}:i&&(n[r]=i):r==="style"?n[r]={...i,...a}:r==="className"&&(n[r]=[i,a].filter(Boolean).join(" "))}return{...t,...n}}const qge=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],Hge=qge.reduce((t,e)=>{const n=A.forwardRef((r,i)=>{const{asChild:a,...o}=r,l=a?WJ:e;return A.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),A.createElement(l,lt({},o,{ref:i}))});return n.displayName=`Primitive.${e}`,{...t,[e]:n}},{}),h_="focusScope.autoFocusOnMount",f_="focusScope.autoFocusOnUnmount",Iz={bubbles:!1,cancelable:!0},Wge=A.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:i,onUnmountAutoFocus:a,...o}=t,[l,c]=A.useState(null),d=nh(i),u=nh(a),h=A.useRef(null),f=Bge(e,p=>c(p)),m=A.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;A.useEffect(()=>{if(r){let p=function(b){if(m.paused||!l)return;const w=b.target;l.contains(w)?h.current=w:Lh(h.current,{select:!0})},g=function(b){if(m.paused||!l)return;const w=b.relatedTarget;w!==null&&(l.contains(w)||Lh(h.current,{select:!0}))},x=function(b){const w=document.activeElement;for(const N of b)N.removedNodes.length>0&&(l!=null&&l.contains(w)||Lh(l))};document.addEventListener("focusin",p),document.addEventListener("focusout",g);const y=new MutationObserver(x);return l&&y.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",p),document.removeEventListener("focusout",g),y.disconnect()}}},[r,l,m.paused]),A.useEffect(()=>{if(l){kz.add(m);const p=document.activeElement;if(!l.contains(p)){const x=new CustomEvent(h_,Iz);l.addEventListener(h_,d),l.dispatchEvent(x),x.defaultPrevented||(Gge(Qge(GJ(l)),{select:!0}),document.activeElement===p&&Lh(l))}return()=>{l.removeEventListener(h_,d),setTimeout(()=>{const x=new CustomEvent(f_,Iz);l.addEventListener(f_,u),l.dispatchEvent(x),x.defaultPrevented||Lh(p??document.body,{select:!0}),l.removeEventListener(f_,u),kz.remove(m)},0)}}},[l,d,u,m]);const v=A.useCallback(p=>{if(!n&&!r||m.paused)return;const g=p.key==="Tab"&&!p.altKey&&!p.ctrlKey&&!p.metaKey,x=document.activeElement;if(g&&x){const y=p.currentTarget,[b,w]=Kge(y);b&&w?!p.shiftKey&&x===w?(p.preventDefault(),n&&Lh(b,{select:!0})):p.shiftKey&&x===b&&(p.preventDefault(),n&&Lh(w,{select:!0})):x===y&&p.preventDefault()}},[n,r,m.paused]);return A.createElement(Hge.div,lt({tabIndex:-1},o,{ref:f,onKeyDown:v}))});function Gge(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(Lh(r,{select:e}),document.activeElement!==n)return}function Kge(t){const e=GJ(t),n=Dz(e,t),r=Dz(e.reverse(),t);return[n,r]}function GJ(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function Dz(t,e){for(const n of t)if(!Yge(n,{upTo:e}))return n}function Yge(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function Xge(t){return t instanceof HTMLInputElement&&"select"in t}function Lh(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&Xge(t)&&e&&t.select()}}const kz=Zge();function Zge(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=_z(t,e),t.unshift(e)},remove(e){var n;t=_z(t,e),(n=t[0])===null||n===void 0||n.resume()}}}function _z(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function Qge(t){return t.filter(e=>e.tagName!=="A")}const Jge=globalThis!=null&&globalThis.document?A.useLayoutEffect:()=>{},eve=$b["useId".toString()]||(()=>{});let tve=0;function KJ(t){const[e,n]=A.useState(eve());return Jge(()=>{t||n(r=>r??String(tve++))},[t]),t||(e?`radix-${e}`:"")}const nve=["top","right","bottom","left"],pm=Math.min,Ao=Math.max,gP=Math.round,sC=Math.floor,yd=t=>({x:t,y:t}),rve={left:"right",right:"left",bottom:"top",top:"bottom"},sve={start:"end",end:"start"};function nM(t,e,n){return Ao(t,pm(e,n))}function rh(t,e){return typeof t=="function"?t(e):t}function sh(t){return t.split("-")[0]}function Wb(t){return t.split("-")[1]}function M$(t){return t==="x"?"y":"x"}function F$(t){return t==="y"?"height":"width"}const ive=new Set(["top","bottom"]);function hd(t){return ive.has(sh(t))?"y":"x"}function $$(t){return M$(hd(t))}function ave(t,e,n){n===void 0&&(n=!1);const r=Wb(t),i=$$(t),a=F$(i);let o=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[a]>e.floating[a]&&(o=vP(o)),[o,vP(o)]}function ove(t){const e=vP(t);return[rM(t),e,rM(e)]}function rM(t){return t.replace(/start|end/g,e=>sve[e])}const Oz=["left","right"],Lz=["right","left"],lve=["top","bottom"],cve=["bottom","top"];function dve(t,e,n){switch(t){case"top":case"bottom":return n?e?Lz:Oz:e?Oz:Lz;case"left":case"right":return e?lve:cve;default:return[]}}function uve(t,e,n,r){const i=Wb(t);let a=dve(sh(t),n==="start",r);return i&&(a=a.map(o=>o+"-"+i),e&&(a=a.concat(a.map(rM)))),a}function vP(t){return t.replace(/left|right|bottom|top/g,e=>rve[e])}function hve(t){return{top:0,right:0,bottom:0,left:0,...t}}function YJ(t){return typeof t!="number"?hve(t):{top:t,right:t,bottom:t,left:t}}function xP(t){const{x:e,y:n,width:r,height:i}=t;return{width:r,height:i,top:n,left:e,right:e+r,bottom:n+i,x:e,y:n}}function Rz(t,e,n){let{reference:r,floating:i}=t;const a=hd(e),o=$$(e),l=F$(o),c=sh(e),d=a==="y",u=r.x+r.width/2-i.width/2,h=r.y+r.height/2-i.height/2,f=r[l]/2-i[l]/2;let m;switch(c){case"top":m={x:u,y:r.y-i.height};break;case"bottom":m={x:u,y:r.y+r.height};break;case"right":m={x:r.x+r.width,y:h};break;case"left":m={x:r.x-i.width,y:h};break;default:m={x:r.x,y:r.y}}switch(Wb(e)){case"start":m[o]-=f*(n&&d?-1:1);break;case"end":m[o]+=f*(n&&d?-1:1);break}return m}const fve=async(t,e,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:a=[],platform:o}=n,l=a.filter(Boolean),c=await(o.isRTL==null?void 0:o.isRTL(e));let d=await o.getElementRects({reference:t,floating:e,strategy:i}),{x:u,y:h}=Rz(d,r,c),f=r,m={},v=0;for(let p=0;p<l.length;p++){const{name:g,fn:x}=l[p],{x:y,y:b,data:w,reset:N}=await x({x:u,y:h,initialPlacement:r,placement:f,strategy:i,middlewareData:m,rects:d,platform:o,elements:{reference:t,floating:e}});u=y??u,h=b??h,m={...m,[g]:{...m[g],...w}},N&&v<=50&&(v++,typeof N=="object"&&(N.placement&&(f=N.placement),N.rects&&(d=N.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:i}):N.rects),{x:u,y:h}=Rz(d,f,c)),p=-1)}return{x:u,y:h,placement:f,strategy:i,middlewareData:m}};async function Wj(t,e){var n;e===void 0&&(e={});const{x:r,y:i,platform:a,rects:o,elements:l,strategy:c}=t,{boundary:d="clippingAncestors",rootBoundary:u="viewport",elementContext:h="floating",altBoundary:f=!1,padding:m=0}=rh(e,t),v=YJ(m),g=l[f?h==="floating"?"reference":"floating":h],x=xP(await a.getClippingRect({element:(n=await(a.isElement==null?void 0:a.isElement(g)))==null||n?g:g.contextElement||await(a.getDocumentElement==null?void 0:a.getDocumentElement(l.floating)),boundary:d,rootBoundary:u,strategy:c})),y=h==="floating"?{x:r,y:i,width:o.floating.width,height:o.floating.height}:o.reference,b=await(a.getOffsetParent==null?void 0:a.getOffsetParent(l.floating)),w=await(a.isElement==null?void 0:a.isElement(b))?await(a.getScale==null?void 0:a.getScale(b))||{x:1,y:1}:{x:1,y:1},N=xP(a.convertOffsetParentRelativeRectToViewportRelativeRect?await a.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:y,offsetParent:b,strategy:c}):y);return{top:(x.top-N.top+v.top)/w.y,bottom:(N.bottom-x.bottom+v.bottom)/w.y,left:(x.left-N.left+v.left)/w.x,right:(N.right-x.right+v.right)/w.x}}const mve=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:i,rects:a,platform:o,elements:l,middlewareData:c}=e,{element:d,padding:u=0}=rh(t,e)||{};if(d==null)return{};const h=YJ(u),f={x:n,y:r},m=$$(i),v=F$(m),p=await o.getDimensions(d),g=m==="y",x=g?"top":"left",y=g?"bottom":"right",b=g?"clientHeight":"clientWidth",w=a.reference[v]+a.reference[m]-f[m]-a.floating[v],N=f[m]-a.reference[m],E=await(o.getOffsetParent==null?void 0:o.getOffsetParent(d));let C=E?E[b]:0;(!C||!await(o.isElement==null?void 0:o.isElement(E)))&&(C=l.floating[b]||a.floating[v]);const j=w/2-N/2,I=C/2-p[v]/2-1,k=pm(h[x],I),D=pm(h[y],I),P=k,R=C-p[v]-D,_=C/2-p[v]/2+j,M=nM(P,_,R),U=!c.arrow&&Wb(i)!=null&&_!==M&&a.reference[v]/2-(_<P?k:D)-p[v]/2<0,F=U?_<P?_-P:_-R:0;return{[m]:f[m]+F,data:{[m]:M,centerOffset:_-M-F,...U&&{alignmentOffset:F}},reset:U}}}),pve=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:i,middlewareData:a,rects:o,initialPlacement:l,platform:c,elements:d}=e,{mainAxis:u=!0,crossAxis:h=!0,fallbackPlacements:f,fallbackStrategy:m="bestFit",fallbackAxisSideDirection:v="none",flipAlignment:p=!0,...g}=rh(t,e);if((n=a.arrow)!=null&&n.alignmentOffset)return{};const x=sh(i),y=hd(l),b=sh(l)===l,w=await(c.isRTL==null?void 0:c.isRTL(d.floating)),N=f||(b||!p?[vP(l)]:ove(l)),E=v!=="none";!f&&E&&N.push(...uve(l,p,v,w));const C=[l,...N],j=await Wj(e,g),I=[];let k=((r=a.flip)==null?void 0:r.overflows)||[];if(u&&I.push(j[x]),h){const _=ave(i,o,w);I.push(j[_[0]],j[_[1]])}if(k=[...k,{placement:i,overflows:I}],!I.every(_=>_<=0)){var D,P;const _=(((D=a.flip)==null?void 0:D.index)||0)+1,M=C[_];if(M&&(!(h==="alignment"?y!==hd(M):!1)||k.every(z=>z.overflows[0]>0&&hd(z.placement)===y)))return{data:{index:_,overflows:k},reset:{placement:M}};let U=(P=k.filter(F=>F.overflows[0]<=0).sort((F,z)=>F.overflows[1]-z.overflows[1])[0])==null?void 0:P.placement;if(!U)switch(m){case"bestFit":{var R;const F=(R=k.filter(z=>{if(E){const H=hd(z.placement);return H===y||H==="y"}return!0}).map(z=>[z.placement,z.overflows.filter(H=>H>0).reduce((H,W)=>H+W,0)]).sort((z,H)=>z[1]-H[1])[0])==null?void 0:R[0];F&&(U=F);break}case"initialPlacement":U=l;break}if(i!==U)return{reset:{placement:U}}}return{}}}};function Mz(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function Fz(t){return nve.some(e=>t[e]>=0)}const gve=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...i}=rh(t,e);switch(r){case"referenceHidden":{const a=await Wj(e,{...i,elementContext:"reference"}),o=Mz(a,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:Fz(o)}}}case"escaped":{const a=await Wj(e,{...i,altBoundary:!0}),o=Mz(a,n.floating);return{data:{escapedOffsets:o,escaped:Fz(o)}}}default:return{}}}}},XJ=new Set(["left","top"]);async function vve(t,e){const{placement:n,platform:r,elements:i}=t,a=await(r.isRTL==null?void 0:r.isRTL(i.floating)),o=sh(n),l=Wb(n),c=hd(n)==="y",d=XJ.has(o)?-1:1,u=a&&c?-1:1,h=rh(e,t);let{mainAxis:f,crossAxis:m,alignmentAxis:v}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return l&&typeof v=="number"&&(m=l==="end"?v*-1:v),c?{x:m*u,y:f*d}:{x:f*d,y:m*u}}const xve=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:i,y:a,placement:o,middlewareData:l}=e,c=await vve(e,t);return o===((n=l.offset)==null?void 0:n.placement)&&(r=l.arrow)!=null&&r.alignmentOffset?{}:{x:i+c.x,y:a+c.y,data:{...c,placement:o}}}}},yve=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:i}=e,{mainAxis:a=!0,crossAxis:o=!1,limiter:l={fn:g=>{let{x,y}=g;return{x,y}}},...c}=rh(t,e),d={x:n,y:r},u=await Wj(e,c),h=hd(sh(i)),f=M$(h);let m=d[f],v=d[h];if(a){const g=f==="y"?"top":"left",x=f==="y"?"bottom":"right",y=m+u[g],b=m-u[x];m=nM(y,m,b)}if(o){const g=h==="y"?"top":"left",x=h==="y"?"bottom":"right",y=v+u[g],b=v-u[x];v=nM(y,v,b)}const p=l.fn({...e,[f]:m,[h]:v});return{...p,data:{x:p.x-n,y:p.y-r,enabled:{[f]:a,[h]:o}}}}}},bve=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:i,rects:a,middlewareData:o}=e,{offset:l=0,mainAxis:c=!0,crossAxis:d=!0}=rh(t,e),u={x:n,y:r},h=hd(i),f=M$(h);let m=u[f],v=u[h];const p=rh(l,e),g=typeof p=="number"?{mainAxis:p,crossAxis:0}:{mainAxis:0,crossAxis:0,...p};if(c){const b=f==="y"?"height":"width",w=a.reference[f]-a.floating[b]+g.mainAxis,N=a.reference[f]+a.reference[b]-g.mainAxis;m<w?m=w:m>N&&(m=N)}if(d){var x,y;const b=f==="y"?"width":"height",w=XJ.has(sh(i)),N=a.reference[h]-a.floating[b]+(w&&((x=o.offset)==null?void 0:x[h])||0)+(w?0:g.crossAxis),E=a.reference[h]+a.reference[b]+(w?0:((y=o.offset)==null?void 0:y[h])||0)-(w?g.crossAxis:0);v<N?v=N:v>E&&(v=E)}return{[f]:m,[h]:v}}}},wve=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:i,rects:a,platform:o,elements:l}=e,{apply:c=()=>{},...d}=rh(t,e),u=await Wj(e,d),h=sh(i),f=Wb(i),m=hd(i)==="y",{width:v,height:p}=a.floating;let g,x;h==="top"||h==="bottom"?(g=h,x=f===(await(o.isRTL==null?void 0:o.isRTL(l.floating))?"start":"end")?"left":"right"):(x=h,g=f==="end"?"top":"bottom");const y=p-u.top-u.bottom,b=v-u.left-u.right,w=pm(p-u[g],y),N=pm(v-u[x],b),E=!e.middlewareData.shift;let C=w,j=N;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(j=b),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(C=y),E&&!f){const k=Ao(u.left,0),D=Ao(u.right,0),P=Ao(u.top,0),R=Ao(u.bottom,0);m?j=v-2*(k!==0||D!==0?k+D:Ao(u.left,u.right)):C=p-2*(P!==0||R!==0?P+R:Ao(u.top,u.bottom))}await c({...e,availableWidth:j,availableHeight:C});const I=await o.getDimensions(l.floating);return v!==I.width||p!==I.height?{reset:{rects:!0}}:{}}}};function i3(){return typeof window<"u"}function Gb(t){return ZJ(t)?(t.nodeName||"").toLowerCase():"#document"}function _o(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function Dd(t){var e;return(e=(ZJ(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function ZJ(t){return i3()?t instanceof Node||t instanceof _o(t).Node:!1}function xc(t){return i3()?t instanceof Element||t instanceof _o(t).Element:!1}function Ed(t){return i3()?t instanceof HTMLElement||t instanceof _o(t).HTMLElement:!1}function $z(t){return!i3()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof _o(t).ShadowRoot}const jve=new Set(["inline","contents"]);function xA(t){const{overflow:e,overflowX:n,overflowY:r,display:i}=yc(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!jve.has(i)}const Nve=new Set(["table","td","th"]);function Sve(t){return Nve.has(Gb(t))}const Ave=[":popover-open",":modal"];function a3(t){return Ave.some(e=>{try{return t.matches(e)}catch{return!1}})}const Cve=["transform","translate","scale","rotate","perspective"],Eve=["transform","translate","scale","rotate","perspective","filter"],Pve=["paint","layout","strict","content"];function B$(t){const e=z$(),n=xc(t)?yc(t):t;return Cve.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||Eve.some(r=>(n.willChange||"").includes(r))||Pve.some(r=>(n.contain||"").includes(r))}function Tve(t){let e=gm(t);for(;Ed(e)&&!ib(e);){if(B$(e))return e;if(a3(e))return null;e=gm(e)}return null}function z$(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const Ive=new Set(["html","body","#document"]);function ib(t){return Ive.has(Gb(t))}function yc(t){return _o(t).getComputedStyle(t)}function o3(t){return xc(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function gm(t){if(Gb(t)==="html")return t;const e=t.assignedSlot||t.parentNode||$z(t)&&t.host||Dd(t);return $z(e)?e.host:e}function QJ(t){const e=gm(t);return ib(e)?t.ownerDocument?t.ownerDocument.body:t.body:Ed(e)&&xA(e)?e:QJ(e)}function Gj(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const i=QJ(t),a=i===((r=t.ownerDocument)==null?void 0:r.body),o=_o(i);if(a){const l=sM(o);return e.concat(o,o.visualViewport||[],xA(i)?i:[],l&&n?Gj(l):[])}return e.concat(i,Gj(i,[],n))}function sM(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function JJ(t){const e=yc(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const i=Ed(t),a=i?t.offsetWidth:n,o=i?t.offsetHeight:r,l=gP(n)!==a||gP(r)!==o;return l&&(n=a,r=o),{width:n,height:r,$:l}}function U$(t){return xc(t)?t:t.contextElement}function u0(t){const e=U$(t);if(!Ed(e))return yd(1);const n=e.getBoundingClientRect(),{width:r,height:i,$:a}=JJ(e);let o=(a?gP(n.width):n.width)/r,l=(a?gP(n.height):n.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!l||!Number.isFinite(l))&&(l=1),{x:o,y:l}}const Dve=yd(0);function eee(t){const e=_o(t);return!z$()||!e.visualViewport?Dve:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function kve(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==_o(t)?!1:e}function uv(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const i=t.getBoundingClientRect(),a=U$(t);let o=yd(1);e&&(r?xc(r)&&(o=u0(r)):o=u0(t));const l=kve(a,n,r)?eee(a):yd(0);let c=(i.left+l.x)/o.x,d=(i.top+l.y)/o.y,u=i.width/o.x,h=i.height/o.y;if(a){const f=_o(a),m=r&&xc(r)?_o(r):r;let v=f,p=sM(v);for(;p&&r&&m!==v;){const g=u0(p),x=p.getBoundingClientRect(),y=yc(p),b=x.left+(p.clientLeft+parseFloat(y.paddingLeft))*g.x,w=x.top+(p.clientTop+parseFloat(y.paddingTop))*g.y;c*=g.x,d*=g.y,u*=g.x,h*=g.y,c+=b,d+=w,v=_o(p),p=sM(v)}}return xP({width:u,height:h,x:c,y:d})}function V$(t,e){const n=o3(t).scrollLeft;return e?e.left+n:uv(Dd(t)).left+n}function tee(t,e,n){n===void 0&&(n=!1);const r=t.getBoundingClientRect(),i=r.left+e.scrollLeft-(n?0:V$(t,r)),a=r.top+e.scrollTop;return{x:i,y:a}}function _ve(t){let{elements:e,rect:n,offsetParent:r,strategy:i}=t;const a=i==="fixed",o=Dd(r),l=e?a3(e.floating):!1;if(r===o||l&&a)return n;let c={scrollLeft:0,scrollTop:0},d=yd(1);const u=yd(0),h=Ed(r);if((h||!h&&!a)&&((Gb(r)!=="body"||xA(o))&&(c=o3(r)),Ed(r))){const m=uv(r);d=u0(r),u.x=m.x+r.clientLeft,u.y=m.y+r.clientTop}const f=o&&!h&&!a?tee(o,c,!0):yd(0);return{width:n.width*d.x,height:n.height*d.y,x:n.x*d.x-c.scrollLeft*d.x+u.x+f.x,y:n.y*d.y-c.scrollTop*d.y+u.y+f.y}}function Ove(t){return Array.from(t.getClientRects())}function Lve(t){const e=Dd(t),n=o3(t),r=t.ownerDocument.body,i=Ao(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),a=Ao(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+V$(t);const l=-n.scrollTop;return yc(r).direction==="rtl"&&(o+=Ao(e.clientWidth,r.clientWidth)-i),{width:i,height:a,x:o,y:l}}function Rve(t,e){const n=_o(t),r=Dd(t),i=n.visualViewport;let a=r.clientWidth,o=r.clientHeight,l=0,c=0;if(i){a=i.width,o=i.height;const d=z$();(!d||d&&e==="fixed")&&(l=i.offsetLeft,c=i.offsetTop)}return{width:a,height:o,x:l,y:c}}const Mve=new Set(["absolute","fixed"]);function Fve(t,e){const n=uv(t,!0,e==="fixed"),r=n.top+t.clientTop,i=n.left+t.clientLeft,a=Ed(t)?u0(t):yd(1),o=t.clientWidth*a.x,l=t.clientHeight*a.y,c=i*a.x,d=r*a.y;return{width:o,height:l,x:c,y:d}}function Bz(t,e,n){let r;if(e==="viewport")r=Rve(t,n);else if(e==="document")r=Lve(Dd(t));else if(xc(e))r=Fve(e,n);else{const i=eee(t);r={x:e.x-i.x,y:e.y-i.y,width:e.width,height:e.height}}return xP(r)}function nee(t,e){const n=gm(t);return n===e||!xc(n)||ib(n)?!1:yc(n).position==="fixed"||nee(n,e)}function $ve(t,e){const n=e.get(t);if(n)return n;let r=Gj(t,[],!1).filter(l=>xc(l)&&Gb(l)!=="body"),i=null;const a=yc(t).position==="fixed";let o=a?gm(t):t;for(;xc(o)&&!ib(o);){const l=yc(o),c=B$(o);!c&&l.position==="fixed"&&(i=null),(a?!c&&!i:!c&&l.position==="static"&&!!i&&Mve.has(i.position)||xA(o)&&!c&&nee(t,o))?r=r.filter(u=>u!==o):i=l,o=gm(o)}return e.set(t,r),r}function Bve(t){let{element:e,boundary:n,rootBoundary:r,strategy:i}=t;const o=[...n==="clippingAncestors"?a3(e)?[]:$ve(e,this._c):[].concat(n),r],l=o[0],c=o.reduce((d,u)=>{const h=Bz(e,u,i);return d.top=Ao(h.top,d.top),d.right=pm(h.right,d.right),d.bottom=pm(h.bottom,d.bottom),d.left=Ao(h.left,d.left),d},Bz(e,l,i));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function zve(t){const{width:e,height:n}=JJ(t);return{width:e,height:n}}function Uve(t,e,n){const r=Ed(e),i=Dd(e),a=n==="fixed",o=uv(t,!0,a,e);let l={scrollLeft:0,scrollTop:0};const c=yd(0);function d(){c.x=V$(i)}if(r||!r&&!a)if((Gb(e)!=="body"||xA(i))&&(l=o3(e)),r){const m=uv(e,!0,a,e);c.x=m.x+e.clientLeft,c.y=m.y+e.clientTop}else i&&d();a&&!r&&i&&d();const u=i&&!r&&!a?tee(i,l):yd(0),h=o.left+l.scrollLeft-c.x-u.x,f=o.top+l.scrollTop-c.y-u.y;return{x:h,y:f,width:o.width,height:o.height}}function m_(t){return yc(t).position==="static"}function zz(t,e){if(!Ed(t)||yc(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return Dd(t)===n&&(n=n.ownerDocument.body),n}function ree(t,e){const n=_o(t);if(a3(t))return n;if(!Ed(t)){let i=gm(t);for(;i&&!ib(i);){if(xc(i)&&!m_(i))return i;i=gm(i)}return n}let r=zz(t,e);for(;r&&Sve(r)&&m_(r);)r=zz(r,e);return r&&ib(r)&&m_(r)&&!B$(r)?n:r||Tve(t)||n}const Vve=async function(t){const e=this.getOffsetParent||ree,n=this.getDimensions,r=await n(t.floating);return{reference:Uve(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function qve(t){return yc(t).direction==="rtl"}const Hve={convertOffsetParentRelativeRectToViewportRelativeRect:_ve,getDocumentElement:Dd,getClippingRect:Bve,getOffsetParent:ree,getElementRects:Vve,getClientRects:Ove,getDimensions:zve,getScale:u0,isElement:xc,isRTL:qve};function see(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function Wve(t,e){let n=null,r;const i=Dd(t);function a(){var l;clearTimeout(r),(l=n)==null||l.disconnect(),n=null}function o(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),a();const d=t.getBoundingClientRect(),{left:u,top:h,width:f,height:m}=d;if(l||e(),!f||!m)return;const v=sC(h),p=sC(i.clientWidth-(u+f)),g=sC(i.clientHeight-(h+m)),x=sC(u),b={rootMargin:-v+"px "+-p+"px "+-g+"px "+-x+"px",threshold:Ao(0,pm(1,c))||1};let w=!0;function N(E){const C=E[0].intersectionRatio;if(C!==c){if(!w)return o();C?o(!1,C):r=setTimeout(()=>{o(!1,1e-7)},1e3)}C===1&&!see(d,t.getBoundingClientRect())&&o(),w=!1}try{n=new IntersectionObserver(N,{...b,root:i.ownerDocument})}catch{n=new IntersectionObserver(N,b)}n.observe(t)}return o(!0),a}function Gve(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:a=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=r,d=U$(t),u=i||a?[...d?Gj(d):[],...Gj(e)]:[];u.forEach(x=>{i&&x.addEventListener("scroll",n,{passive:!0}),a&&x.addEventListener("resize",n)});const h=d&&l?Wve(d,n):null;let f=-1,m=null;o&&(m=new ResizeObserver(x=>{let[y]=x;y&&y.target===d&&m&&(m.unobserve(e),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var b;(b=m)==null||b.observe(e)})),n()}),d&&!c&&m.observe(d),m.observe(e));let v,p=c?uv(t):null;c&&g();function g(){const x=uv(t);p&&!see(p,x)&&n(),p=x,v=requestAnimationFrame(g)}return n(),()=>{var x;u.forEach(y=>{i&&y.removeEventListener("scroll",n),a&&y.removeEventListener("resize",n)}),h==null||h(),(x=m)==null||x.disconnect(),m=null,c&&cancelAnimationFrame(v)}}const Kve=xve,Yve=yve,Xve=pve,Zve=wve,Qve=gve,Uz=mve,Jve=bve,exe=(t,e,n)=>{const r=new Map,i={platform:Hve,...n},a={...i.platform,_c:r};return fve(t,e,{...i,platform:a})};var txe=typeof document<"u",nxe=function(){},PE=txe?A.useLayoutEffect:nxe;function yP(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,i;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!yP(t[r],e[r]))return!1;return!0}if(i=Object.keys(t),n=i.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,i[r]))return!1;for(r=n;r--!==0;){const a=i[r];if(!(a==="_owner"&&t.$$typeof)&&!yP(t[a],e[a]))return!1}return!0}return t!==t&&e!==e}function iee(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function Vz(t,e){const n=iee(t);return Math.round(e*n)/n}function p_(t){const e=A.useRef(t);return PE(()=>{e.current=t}),e}function rxe(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:i,elements:{reference:a,floating:o}={},transform:l=!0,whileElementsMounted:c,open:d}=t,[u,h]=A.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[f,m]=A.useState(r);yP(f,r)||m(r);const[v,p]=A.useState(null),[g,x]=A.useState(null),y=A.useCallback(z=>{z!==E.current&&(E.current=z,p(z))},[]),b=A.useCallback(z=>{z!==C.current&&(C.current=z,x(z))},[]),w=a||v,N=o||g,E=A.useRef(null),C=A.useRef(null),j=A.useRef(u),I=c!=null,k=p_(c),D=p_(i),P=p_(d),R=A.useCallback(()=>{if(!E.current||!C.current)return;const z={placement:e,strategy:n,middleware:f};D.current&&(z.platform=D.current),exe(E.current,C.current,z).then(H=>{const W={...H,isPositioned:P.current!==!1};_.current&&!yP(j.current,W)&&(j.current=W,ch.flushSync(()=>{h(W)}))})},[f,e,n,D,P]);PE(()=>{d===!1&&j.current.isPositioned&&(j.current.isPositioned=!1,h(z=>({...z,isPositioned:!1})))},[d]);const _=A.useRef(!1);PE(()=>(_.current=!0,()=>{_.current=!1}),[]),PE(()=>{if(w&&(E.current=w),N&&(C.current=N),w&&N){if(k.current)return k.current(w,N,R);R()}},[w,N,R,k,I]);const M=A.useMemo(()=>({reference:E,floating:C,setReference:y,setFloating:b}),[y,b]),U=A.useMemo(()=>({reference:w,floating:N}),[w,N]),F=A.useMemo(()=>{const z={position:n,left:0,top:0};if(!U.floating)return z;const H=Vz(U.floating,u.x),W=Vz(U.floating,u.y);return l?{...z,transform:"translate("+H+"px, "+W+"px)",...iee(U.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:H,top:W}},[n,l,U.floating,u.x,u.y]);return A.useMemo(()=>({...u,update:R,refs:M,elements:U,floatingStyles:F}),[u,R,M,U,F])}const sxe=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:i}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?Uz({element:r.current,padding:i}).fn(n):{}:r?Uz({element:r,padding:i}).fn(n):{}}}},ixe=(t,e)=>({...Kve(t),options:[t,e]}),axe=(t,e)=>({...Yve(t),options:[t,e]}),oxe=(t,e)=>({...Jve(t),options:[t,e]}),lxe=(t,e)=>({...Xve(t),options:[t,e]}),cxe=(t,e)=>({...Zve(t),options:[t,e]}),dxe=(t,e)=>({...Qve(t),options:[t,e]}),uxe=(t,e)=>({...sxe(t),options:[t,e]});function hxe(t,e){typeof t=="function"?t(e):t!=null&&(t.current=e)}function aee(...t){return e=>t.forEach(n=>hxe(n,e))}function oee(...t){return A.useCallback(aee(...t),t)}function fxe(t,e=[]){let n=[];function r(a,o){const l=A.createContext(o),c=n.length;n=[...n,o];function d(h){const{scope:f,children:m,...v}=h,p=(f==null?void 0:f[t][c])||l,g=A.useMemo(()=>v,Object.values(v));return A.createElement(p.Provider,{value:g},m)}function u(h,f){const m=(f==null?void 0:f[t][c])||l,v=A.useContext(m);if(v)return v;if(o!==void 0)return o;throw new Error(`\`${h}\` must be used within \`${a}\``)}return d.displayName=a+"Provider",[d,u]}const i=()=>{const a=n.map(o=>A.createContext(o));return function(l){const c=(l==null?void 0:l[t])||a;return A.useMemo(()=>({[`__scope${t}`]:{...l,[t]:c}}),[l,c])}};return i.scopeName=t,[r,mxe(i,...e)]}function mxe(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(a){const o=r.reduce((l,{useScope:c,scopeName:d})=>{const h=c(a)[`__scope${d}`];return{...l,...h}},{});return A.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}const lee=A.forwardRef((t,e)=>{const{children:n,...r}=t,i=A.Children.toArray(n),a=i.find(gxe);if(a){const o=a.props.children,l=i.map(c=>c===a?A.Children.count(o)>1?A.Children.only(null):A.isValidElement(o)?o.props.children:null:c);return A.createElement(iM,lt({},r,{ref:e}),A.isValidElement(o)?A.cloneElement(o,void 0,l):null)}return A.createElement(iM,lt({},r,{ref:e}),n)});lee.displayName="Slot";const iM=A.forwardRef((t,e)=>{const{children:n,...r}=t;return A.isValidElement(n)?A.cloneElement(n,{...vxe(r,n.props),ref:e?aee(e,n.ref):n.ref}):A.Children.count(n)>1?A.Children.only(null):null});iM.displayName="SlotClone";const pxe=({children:t})=>A.createElement(A.Fragment,null,t);function gxe(t){return A.isValidElement(t)&&t.type===pxe}function vxe(t,e){const n={...e};for(const r in e){const i=t[r],a=e[r];/^on[A-Z]/.test(r)?i&&a?n[r]=(...l)=>{a(...l),i(...l)}:i&&(n[r]=i):r==="style"?n[r]={...i,...a}:r==="className"&&(n[r]=[i,a].filter(Boolean).join(" "))}return{...t,...n}}const xxe=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],cee=xxe.reduce((t,e)=>{const n=A.forwardRef((r,i)=>{const{asChild:a,...o}=r,l=a?lee:e;return A.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),A.createElement(l,lt({},o,{ref:i}))});return n.displayName=`Primitive.${e}`,{...t,[e]:n}},{}),aM=globalThis!=null&&globalThis.document?A.useLayoutEffect:()=>{};function yxe(t){const[e,n]=A.useState(void 0);return aM(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const a=i[0];let o,l;if("borderBoxSize"in a){const c=a.borderBoxSize,d=Array.isArray(c)?c[0]:c;o=d.inlineSize,l=d.blockSize}else o=t.offsetWidth,l=t.offsetHeight;n({width:o,height:l})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}const dee="Popper",[uee,hee]=fxe(dee),[bxe,fee]=uee(dee),wxe=t=>{const{__scopePopper:e,children:n}=t,[r,i]=A.useState(null);return A.createElement(bxe,{scope:e,anchor:r,onAnchorChange:i},n)},jxe="PopperAnchor",Nxe=A.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...i}=t,a=fee(jxe,n),o=A.useRef(null),l=oee(e,o);return A.useEffect(()=>{a.onAnchorChange((r==null?void 0:r.current)||o.current)}),r?null:A.createElement(cee.div,lt({},i,{ref:l}))}),mee="PopperContent",[Sxe,kXe]=uee(mee),Axe=A.forwardRef((t,e)=>{var n,r,i,a,o,l,c,d;const{__scopePopper:u,side:h="bottom",sideOffset:f=0,align:m="center",alignOffset:v=0,arrowPadding:p=0,collisionBoundary:g=[],collisionPadding:x=0,sticky:y="partial",hideWhenDetached:b=!1,avoidCollisions:w=!0,onPlaced:N,...E}=t,C=fee(mee,u),[j,I]=A.useState(null),k=oee(e,ze=>I(ze)),[D,P]=A.useState(null),R=yxe(D),_=(n=R==null?void 0:R.width)!==null&&n!==void 0?n:0,M=(r=R==null?void 0:R.height)!==null&&r!==void 0?r:0,U=h+(m!=="center"?"-"+m:""),F=typeof x=="number"?x:{top:0,right:0,bottom:0,left:0,...x},z=Array.isArray(g)?g:[g],H=z.length>0,W={padding:F,boundary:z.filter(Cxe),altBoundary:H},{refs:$,floatingStyles:L,placement:q,isPositioned:Y,middlewareData:J}=rxe({strategy:"fixed",placement:U,whileElementsMounted:Gve,elements:{reference:C.anchor},middleware:[ixe({mainAxis:f+M,alignmentAxis:v}),w&&axe({mainAxis:!0,crossAxis:!1,limiter:y==="partial"?oxe():void 0,...W}),w&&lxe({...W}),cxe({...W,apply:({elements:ze,rects:De,availableWidth:ce,availableHeight:Te})=>{const{width:Ce,height:Se}=De.reference,Ue=ze.floating.style;Ue.setProperty("--radix-popper-available-width",`${ce}px`),Ue.setProperty("--radix-popper-available-height",`${Te}px`),Ue.setProperty("--radix-popper-anchor-width",`${Ce}px`),Ue.setProperty("--radix-popper-anchor-height",`${Se}px`)}}),D&&uxe({element:D,padding:p}),Exe({arrowWidth:_,arrowHeight:M}),b&&dxe({strategy:"referenceHidden"})]}),[ne,re]=pee(q),pe=nh(N);aM(()=>{Y&&(pe==null||pe())},[Y,pe]);const ue=(i=J.arrow)===null||i===void 0?void 0:i.x,xe=(a=J.arrow)===null||a===void 0?void 0:a.y,Ne=((o=J.arrow)===null||o===void 0?void 0:o.centerOffset)!==0,[je,$e]=A.useState();return aM(()=>{j&&$e(window.getComputedStyle(j).zIndex)},[j]),A.createElement("div",{ref:$.setFloating,"data-radix-popper-content-wrapper":"",style:{...L,transform:Y?L.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:je,"--radix-popper-transform-origin":[(l=J.transformOrigin)===null||l===void 0?void 0:l.x,(c=J.transformOrigin)===null||c===void 0?void 0:c.y].join(" ")},dir:t.dir},A.createElement(Sxe,{scope:u,placedSide:ne,onArrowChange:P,arrowX:ue,arrowY:xe,shouldHideArrow:Ne},A.createElement(cee.div,lt({"data-side":ne,"data-align":re},E,{ref:k,style:{...E.style,animation:Y?void 0:"none",opacity:(d=J.hide)!==null&&d!==void 0&&d.referenceHidden?0:void 0}}))))});function Cxe(t){return t!==null}const Exe=t=>({name:"transformOrigin",options:t,fn(e){var n,r,i,a,o;const{placement:l,rects:c,middlewareData:d}=e,h=((n=d.arrow)===null||n===void 0?void 0:n.centerOffset)!==0,f=h?0:t.arrowWidth,m=h?0:t.arrowHeight,[v,p]=pee(l),g={start:"0%",center:"50%",end:"100%"}[p],x=((r=(i=d.arrow)===null||i===void 0?void 0:i.x)!==null&&r!==void 0?r:0)+f/2,y=((a=(o=d.arrow)===null||o===void 0?void 0:o.y)!==null&&a!==void 0?a:0)+m/2;let b="",w="";return v==="bottom"?(b=h?g:`${x}px`,w=`${-m}px`):v==="top"?(b=h?g:`${x}px`,w=`${c.floating.height+m}px`):v==="right"?(b=`${-m}px`,w=h?g:`${y}px`):v==="left"&&(b=`${c.floating.width+m}px`,w=h?g:`${y}px`),{data:{x:b,y:w}}}});function pee(t){const[e,n="center"]=t.split("-");return[e,n]}const Pxe=wxe,Txe=Nxe,Ixe=Axe;function Dxe(t,e){typeof t=="function"?t(e):t!=null&&(t.current=e)}function kxe(...t){return e=>t.forEach(n=>Dxe(n,e))}const gee=A.forwardRef((t,e)=>{const{children:n,...r}=t,i=A.Children.toArray(n),a=i.find(Oxe);if(a){const o=a.props.children,l=i.map(c=>c===a?A.Children.count(o)>1?A.Children.only(null):A.isValidElement(o)?o.props.children:null:c);return A.createElement(oM,lt({},r,{ref:e}),A.isValidElement(o)?A.cloneElement(o,void 0,l):null)}return A.createElement(oM,lt({},r,{ref:e}),n)});gee.displayName="Slot";const oM=A.forwardRef((t,e)=>{const{children:n,...r}=t;return A.isValidElement(n)?A.cloneElement(n,{...Lxe(r,n.props),ref:e?kxe(e,n.ref):n.ref}):A.Children.count(n)>1?A.Children.only(null):null});oM.displayName="SlotClone";const _xe=({children:t})=>A.createElement(A.Fragment,null,t);function Oxe(t){return A.isValidElement(t)&&t.type===_xe}function Lxe(t,e){const n={...e};for(const r in e){const i=t[r],a=e[r];/^on[A-Z]/.test(r)?i&&a?n[r]=(...l)=>{a(...l),i(...l)}:i&&(n[r]=i):r==="style"?n[r]={...i,...a}:r==="className"&&(n[r]=[i,a].filter(Boolean).join(" "))}return{...t,...n}}const Rxe=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],Mxe=Rxe.reduce((t,e)=>{const n=A.forwardRef((r,i)=>{const{asChild:a,...o}=r,l=a?gee:e;return A.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),A.createElement(l,lt({},o,{ref:i}))});return n.displayName=`Primitive.${e}`,{...t,[e]:n}},{}),Fxe=A.forwardRef((t,e)=>{var n;const{container:r=globalThis==null||(n=globalThis.document)===null||n===void 0?void 0:n.body,...i}=t;return r?qI.createPortal(A.createElement(Mxe.div,lt({},i,{ref:e})),r):null}),q$=A.forwardRef((t,e)=>{const{children:n,...r}=t,i=A.Children.toArray(n),a=i.find(Bxe);if(a){const o=a.props.children,l=i.map(c=>c===a?A.Children.count(o)>1?A.Children.only(null):A.isValidElement(o)?o.props.children:null:c);return A.createElement(lM,lt({},r,{ref:e}),A.isValidElement(o)?A.cloneElement(o,void 0,l):null)}return A.createElement(lM,lt({},r,{ref:e}),n)});q$.displayName="Slot";const lM=A.forwardRef((t,e)=>{const{children:n,...r}=t;return A.isValidElement(n)?A.cloneElement(n,{...zxe(r,n.props),ref:e?zJ(e,n.ref):n.ref}):A.Children.count(n)>1?A.Children.only(null):null});lM.displayName="SlotClone";const $xe=({children:t})=>A.createElement(A.Fragment,null,t);function Bxe(t){return A.isValidElement(t)&&t.type===$xe}function zxe(t,e){const n={...e};for(const r in e){const i=t[r],a=e[r];/^on[A-Z]/.test(r)?i&&a?n[r]=(...l)=>{a(...l),i(...l)}:i&&(n[r]=i):r==="style"?n[r]={...i,...a}:r==="className"&&(n[r]=[i,a].filter(Boolean).join(" "))}return{...t,...n}}const Uxe=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],wc=Uxe.reduce((t,e)=>{const n=A.forwardRef((r,i)=>{const{asChild:a,...o}=r,l=a?q$:e;return A.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),A.createElement(l,lt({},o,{ref:i}))});return n.displayName=`Primitive.${e}`,{...t,[e]:n}},{});function qz({prop:t,defaultProp:e,onChange:n=()=>{}}){const[r,i]=Vxe({defaultProp:e,onChange:n}),a=t!==void 0,o=a?t:r,l=nh(n),c=A.useCallback(d=>{if(a){const h=typeof d=="function"?d(t):d;h!==t&&l(h)}else i(d)},[a,t,i,l]);return[o,c]}function Vxe({defaultProp:t,onChange:e}){const n=A.useState(t),[r]=n,i=A.useRef(r),a=nh(e);return A.useEffect(()=>{i.current!==r&&(a(r),i.current=r)},[r,i,a]),n}const vm=globalThis!=null&&globalThis.document?A.useLayoutEffect:()=>{};function qxe(t){const e=A.useRef({value:t,previous:t});return A.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}function Hxe(t,e){typeof t=="function"?t(e):t!=null&&(t.current=e)}function Wxe(...t){return e=>t.forEach(n=>Hxe(n,e))}const vee=A.forwardRef((t,e)=>{const{children:n,...r}=t,i=A.Children.toArray(n),a=i.find(Kxe);if(a){const o=a.props.children,l=i.map(c=>c===a?A.Children.count(o)>1?A.Children.only(null):A.isValidElement(o)?o.props.children:null:c);return A.createElement(cM,lt({},r,{ref:e}),A.isValidElement(o)?A.cloneElement(o,void 0,l):null)}return A.createElement(cM,lt({},r,{ref:e}),n)});vee.displayName="Slot";const cM=A.forwardRef((t,e)=>{const{children:n,...r}=t;return A.isValidElement(n)?A.cloneElement(n,{...Yxe(r,n.props),ref:e?Wxe(e,n.ref):n.ref}):A.Children.count(n)>1?A.Children.only(null):null});cM.displayName="SlotClone";const Gxe=({children:t})=>A.createElement(A.Fragment,null,t);function Kxe(t){return A.isValidElement(t)&&t.type===Gxe}function Yxe(t,e){const n={...e};for(const r in e){const i=t[r],a=e[r];/^on[A-Z]/.test(r)?i&&a?n[r]=(...l)=>{a(...l),i(...l)}:i&&(n[r]=i):r==="style"?n[r]={...i,...a}:r==="className"&&(n[r]=[i,a].filter(Boolean).join(" "))}return{...t,...n}}const Xxe=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],Zxe=Xxe.reduce((t,e)=>{const n=A.forwardRef((r,i)=>{const{asChild:a,...o}=r,l=a?vee:e;return A.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),A.createElement(l,lt({},o,{ref:i}))});return n.displayName=`Primitive.${e}`,{...t,[e]:n}},{}),Qxe=A.forwardRef((t,e)=>A.createElement(Zxe.span,lt({},t,{ref:e,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...t.style}})));var Jxe=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},fx=new WeakMap,iC=new WeakMap,aC={},g_=0,xee=function(t){return t&&(t.host||xee(t.parentNode))},e0e=function(t,e){return e.map(function(n){if(t.contains(n))return n;var r=xee(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},t0e=function(t,e,n,r){var i=e0e(e,Array.isArray(t)?t:[t]);aC[n]||(aC[n]=new WeakMap);var a=aC[n],o=[],l=new Set,c=new Set(i),d=function(h){!h||l.has(h)||(l.add(h),d(h.parentNode))};i.forEach(d);var u=function(h){!h||c.has(h)||Array.prototype.forEach.call(h.children,function(f){if(l.has(f))u(f);else try{var m=f.getAttribute(r),v=m!==null&&m!=="false",p=(fx.get(f)||0)+1,g=(a.get(f)||0)+1;fx.set(f,p),a.set(f,g),o.push(f),p===1&&v&&iC.set(f,!0),g===1&&f.setAttribute(n,"true"),v||f.setAttribute(r,"true")}catch(x){console.error("aria-hidden: cannot operate on ",f,x)}})};return u(e),l.clear(),g_++,function(){o.forEach(function(h){var f=fx.get(h)-1,m=a.get(h)-1;fx.set(h,f),a.set(h,m),f||(iC.has(h)||h.removeAttribute(r),iC.delete(h)),m||h.removeAttribute(n)}),g_--,g_||(fx=new WeakMap,fx=new WeakMap,iC=new WeakMap,aC={})}},yee=function(t,e,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),i=e||Jxe(t);return i?(r.push.apply(r,Array.from(i.querySelectorAll("[aria-live], script"))),t0e(r,i,n,"aria-hidden")):function(){return null}},Xi=function(){return Xi=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Xi.apply(this,arguments)};function H$(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function Cv(t,e,n,r){function i(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function l(u){try{d(r.next(u))}catch(h){o(h)}}function c(u){try{d(r.throw(u))}catch(h){o(h)}}function d(u){u.done?a(u.value):i(u.value).then(l,c)}d((r=r.apply(t,e||[])).next())})}function bee(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,a;r<i;r++)(a||!(r in e))&&(a||(a=Array.prototype.slice.call(e,0,r)),a[r]=e[r]);return t.concat(a||Array.prototype.slice.call(e))}var tj="right-scroll-bar-position",nj="width-before-scroll-bar",n0e="with-scroll-bars-hidden",r0e="--removed-body-scroll-bar-size";function v_(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function s0e(t,e){var n=A.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(r){var i=n.value;i!==r&&(n.value=r,n.callback(r,i))}}}})[0];return n.callback=e,n.facade}var i0e=typeof window<"u"?A.useLayoutEffect:A.useEffect,Hz=new WeakMap;function wee(t,e){var n=s0e(e||null,function(r){return t.forEach(function(i){return v_(i,r)})});return i0e(function(){var r=Hz.get(n);if(r){var i=new Set(r),a=new Set(t),o=n.current;i.forEach(function(l){a.has(l)||v_(l,null)}),a.forEach(function(l){i.has(l)||v_(l,o)})}Hz.set(n,t)},[t]),n}function a0e(t){return t}function o0e(t,e){e===void 0&&(e=a0e);var n=[],r=!1,i={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(a){var o=e(a,r);return n.push(o),function(){n=n.filter(function(l){return l!==o})}},assignSyncMedium:function(a){for(r=!0;n.length;){var o=n;n=[],o.forEach(a)}n={push:function(l){return a(l)},filter:function(){return n}}},assignMedium:function(a){r=!0;var o=[];if(n.length){var l=n;n=[],l.forEach(a),o=n}var c=function(){var u=o;o=[],u.forEach(a)},d=function(){return Promise.resolve().then(c)};d(),n={push:function(u){o.push(u),d()},filter:function(u){return o=o.filter(u),n}}}};return i}function jee(t){t===void 0&&(t={});var e=o0e(null);return e.options=Xi({async:!0,ssr:!1},t),e}var Nee=function(t){var e=t.sideCar,n=H$(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return A.createElement(r,Xi({},n))};Nee.isSideCarExport=!0;function See(t,e){return t.useMedium(e),Nee}var Aee=jee(),x_=function(){},l3=A.forwardRef(function(t,e){var n=A.useRef(null),r=A.useState({onScrollCapture:x_,onWheelCapture:x_,onTouchMoveCapture:x_}),i=r[0],a=r[1],o=t.forwardProps,l=t.children,c=t.className,d=t.removeScrollBar,u=t.enabled,h=t.shards,f=t.sideCar,m=t.noIsolation,v=t.inert,p=t.allowPinchZoom,g=t.as,x=g===void 0?"div":g,y=H$(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as"]),b=f,w=wee([n,e]),N=Xi(Xi({},y),i);return A.createElement(A.Fragment,null,u&&A.createElement(b,{sideCar:Aee,removeScrollBar:d,shards:h,noIsolation:m,inert:v,setCallbacks:a,allowPinchZoom:!!p,lockRef:n}),o?A.cloneElement(A.Children.only(l),Xi(Xi({},N),{ref:w})):A.createElement(x,Xi({},N,{className:c,ref:w}),l))});l3.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};l3.classNames={fullWidth:nj,zeroRight:tj};var Wz,l0e=function(){if(Wz)return Wz;if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function c0e(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=l0e();return e&&t.setAttribute("nonce",e),t}function d0e(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function u0e(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var h0e=function(){var t=0,e=null;return{add:function(n){t==0&&(e=c0e())&&(d0e(e,n),u0e(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},f0e=function(){var t=h0e();return function(e,n){A.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},W$=function(){var t=f0e(),e=function(n){var r=n.styles,i=n.dynamic;return t(r,i),null};return e},m0e={left:0,top:0,right:0,gap:0},y_=function(t){return parseInt(t||"",10)||0},p0e=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],r=e[t==="padding"?"paddingTop":"marginTop"],i=e[t==="padding"?"paddingRight":"marginRight"];return[y_(n),y_(r),y_(i)]},g0e=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return m0e;var e=p0e(t),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-n+e[2]-e[0])}},v0e=W$(),h0="data-scroll-locked",x0e=function(t,e,n,r){var i=t.left,a=t.top,o=t.right,l=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(n0e,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(l,"px ").concat(r,`;
  }
  body[`).concat(h0,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(a,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(l,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(tj,` {
    right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(nj,` {
    margin-right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(tj," .").concat(tj,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(nj," .").concat(nj,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(h0,`] {
    `).concat(r0e,": ").concat(l,`px;
  }
`)},Gz=function(){var t=parseInt(document.body.getAttribute(h0)||"0",10);return isFinite(t)?t:0},y0e=function(){A.useEffect(function(){return document.body.setAttribute(h0,(Gz()+1).toString()),function(){var t=Gz()-1;t<=0?document.body.removeAttribute(h0):document.body.setAttribute(h0,t.toString())}},[])},Cee=function(t){var e=t.noRelative,n=t.noImportant,r=t.gapMode,i=r===void 0?"margin":r;y0e();var a=A.useMemo(function(){return g0e(i)},[i]);return A.createElement(v0e,{styles:x0e(a,!e,i,n?"":"!important")})},dM=!1;if(typeof window<"u")try{var oC=Object.defineProperty({},"passive",{get:function(){return dM=!0,!0}});window.addEventListener("test",oC,oC),window.removeEventListener("test",oC,oC)}catch{dM=!1}var mx=dM?{passive:!1}:!1,b0e=function(t){return t.tagName==="TEXTAREA"},Eee=function(t,e){var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!b0e(t)&&n[e]==="visible")},w0e=function(t){return Eee(t,"overflowY")},j0e=function(t){return Eee(t,"overflowX")},Kz=function(t,e){var n=e;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var r=Pee(t,n);if(r){var i=Tee(t,n),a=i[1],o=i[2];if(a>o)return!0}n=n.parentNode}while(n&&n!==document.body);return!1},N0e=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},S0e=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},Pee=function(t,e){return t==="v"?w0e(e):j0e(e)},Tee=function(t,e){return t==="v"?N0e(e):S0e(e)},A0e=function(t,e){return t==="h"&&e==="rtl"?-1:1},C0e=function(t,e,n,r,i){var a=A0e(t,window.getComputedStyle(e).direction),o=a*r,l=n.target,c=e.contains(l),d=!1,u=o>0,h=0,f=0;do{var m=Tee(t,l),v=m[0],p=m[1],g=m[2],x=p-g-a*v;(v||x)&&Pee(t,l)&&(h+=x,f+=v),l=l.parentNode}while(!c&&l!==document.body||c&&(e.contains(l)||e===l));return(u&&(i&&h===0||!i&&o>h)||!u&&(i&&f===0||!i&&-o>f))&&(d=!0),d},lC=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},Yz=function(t){return[t.deltaX,t.deltaY]},Xz=function(t){return t&&"current"in t?t.current:t},E0e=function(t,e){return t[0]===e[0]&&t[1]===e[1]},P0e=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},T0e=0,px=[];function I0e(t){var e=A.useRef([]),n=A.useRef([0,0]),r=A.useRef(),i=A.useState(T0e++)[0],a=A.useState(function(){return W$()})[0],o=A.useRef(t);A.useEffect(function(){o.current=t},[t]),A.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(i));var p=bee([t.lockRef.current],(t.shards||[]).map(Xz),!0).filter(Boolean);return p.forEach(function(g){return g.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),p.forEach(function(g){return g.classList.remove("allow-interactivity-".concat(i))})}}},[t.inert,t.lockRef.current,t.shards]);var l=A.useCallback(function(p,g){if("touches"in p&&p.touches.length===2)return!o.current.allowPinchZoom;var x=lC(p),y=n.current,b="deltaX"in p?p.deltaX:y[0]-x[0],w="deltaY"in p?p.deltaY:y[1]-x[1],N,E=p.target,C=Math.abs(b)>Math.abs(w)?"h":"v";if("touches"in p&&C==="h"&&E.type==="range")return!1;var j=Kz(C,E);if(!j)return!0;if(j?N=C:(N=C==="v"?"h":"v",j=Kz(C,E)),!j)return!1;if(!r.current&&"changedTouches"in p&&(b||w)&&(r.current=N),!N)return!0;var I=r.current||N;return C0e(I,g,p,I==="h"?b:w,!0)},[]),c=A.useCallback(function(p){var g=p;if(!(!px.length||px[px.length-1]!==a)){var x="deltaY"in g?Yz(g):lC(g),y=e.current.filter(function(N){return N.name===g.type&&N.target===g.target&&E0e(N.delta,x)})[0];if(y&&y.should){g.cancelable&&g.preventDefault();return}if(!y){var b=(o.current.shards||[]).map(Xz).filter(Boolean).filter(function(N){return N.contains(g.target)}),w=b.length>0?l(g,b[0]):!o.current.noIsolation;w&&g.cancelable&&g.preventDefault()}}},[]),d=A.useCallback(function(p,g,x,y){var b={name:p,delta:g,target:x,should:y};e.current.push(b),setTimeout(function(){e.current=e.current.filter(function(w){return w!==b})},1)},[]),u=A.useCallback(function(p){n.current=lC(p),r.current=void 0},[]),h=A.useCallback(function(p){d(p.type,Yz(p),p.target,l(p,t.lockRef.current))},[]),f=A.useCallback(function(p){d(p.type,lC(p),p.target,l(p,t.lockRef.current))},[]);A.useEffect(function(){return px.push(a),t.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:f}),document.addEventListener("wheel",c,mx),document.addEventListener("touchmove",c,mx),document.addEventListener("touchstart",u,mx),function(){px=px.filter(function(p){return p!==a}),document.removeEventListener("wheel",c,mx),document.removeEventListener("touchmove",c,mx),document.removeEventListener("touchstart",u,mx)}},[]);var m=t.removeScrollBar,v=t.inert;return A.createElement(A.Fragment,null,v?A.createElement(a,{styles:P0e(i)}):null,m?A.createElement(Cee,{gapMode:"margin"}):null)}const D0e=See(Aee,I0e);var Iee=A.forwardRef(function(t,e){return A.createElement(l3,Xi({},t,{ref:e,sideCar:D0e}))});Iee.classNames=l3.classNames;const k0e=Iee,_0e=[" ","Enter","ArrowUp","ArrowDown"],O0e=[" ","Enter"],c3="Select",[d3,u3,L0e]=vge(c3),[Kb,_Xe]=yge(c3,[L0e,hee]),G$=hee(),[R0e,Ev]=Kb(c3),[M0e,F0e]=Kb(c3),$0e=t=>{const{__scopeSelect:e,children:n,open:r,defaultOpen:i,onOpenChange:a,value:o,defaultValue:l,onValueChange:c,dir:d,name:u,autoComplete:h,disabled:f,required:m}=t,v=G$(e),[p,g]=A.useState(null),[x,y]=A.useState(null),[b,w]=A.useState(!1),N=jge(d),[E=!1,C]=qz({prop:r,defaultProp:i,onChange:a}),[j,I]=qz({prop:o,defaultProp:l,onChange:c}),k=A.useRef(null),D=p?!!p.closest("form"):!0,[P,R]=A.useState(new Set),_=Array.from(P).map(M=>M.props.value).join(";");return A.createElement(Pxe,v,A.createElement(R0e,{required:m,scope:e,trigger:p,onTriggerChange:g,valueNode:x,onValueNodeChange:y,valueNodeHasChildren:b,onValueNodeHasChildrenChange:w,contentId:KJ(),value:j,onValueChange:I,open:E,onOpenChange:C,dir:N,triggerPointerDownPosRef:k,disabled:f},A.createElement(d3.Provider,{scope:e},A.createElement(M0e,{scope:t.__scopeSelect,onNativeOptionAdd:A.useCallback(M=>{R(U=>new Set(U).add(M))},[]),onNativeOptionRemove:A.useCallback(M=>{R(U=>{const F=new Set(U);return F.delete(M),F})},[])},n)),D?A.createElement(Oee,{key:_,"aria-hidden":!0,required:m,tabIndex:-1,name:u,autoComplete:h,value:j,onChange:M=>I(M.target.value),disabled:f},j===void 0?A.createElement("option",{value:""}):null,Array.from(P)):null))},B0e="SelectTrigger",z0e=A.forwardRef((t,e)=>{const{__scopeSelect:n,disabled:r=!1,...i}=t,a=G$(n),o=Ev(B0e,n),l=o.disabled||r,c=Id(e,o.onTriggerChange),d=u3(n),[u,h,f]=Lee(v=>{const p=d().filter(y=>!y.disabled),g=p.find(y=>y.value===o.value),x=Ree(p,v,g);x!==void 0&&o.onValueChange(x.value)}),m=()=>{l||(o.onOpenChange(!0),f())};return A.createElement(Txe,lt({asChild:!0},a),A.createElement(wc.button,lt({type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":o.value===void 0?"":void 0},i,{ref:c,onClick:ua(i.onClick,v=>{v.currentTarget.focus()}),onPointerDown:ua(i.onPointerDown,v=>{const p=v.target;p.hasPointerCapture(v.pointerId)&&p.releasePointerCapture(v.pointerId),v.button===0&&v.ctrlKey===!1&&(m(),o.triggerPointerDownPosRef.current={x:Math.round(v.pageX),y:Math.round(v.pageY)},v.preventDefault())}),onKeyDown:ua(i.onKeyDown,v=>{const p=u.current!=="";!(v.ctrlKey||v.altKey||v.metaKey)&&v.key.length===1&&h(v.key),!(p&&v.key===" ")&&_0e.includes(v.key)&&(m(),v.preventDefault())})})))}),U0e="SelectValue",V0e=A.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:i,children:a,placeholder:o,...l}=t,c=Ev(U0e,n),{onValueNodeHasChildrenChange:d}=c,u=a!==void 0,h=Id(e,c.onValueNodeChange);return vm(()=>{d(u)},[d,u]),A.createElement(wc.span,lt({},l,{ref:h,style:{pointerEvents:"none"}}),c.value===void 0&&o!==void 0?o:a)}),q0e=A.forwardRef((t,e)=>{const{__scopeSelect:n,children:r,...i}=t;return A.createElement(wc.span,lt({"aria-hidden":!0},i,{ref:e}),r||"")}),H0e=t=>A.createElement(Fxe,lt({asChild:!0},t)),ab="SelectContent",W0e=A.forwardRef((t,e)=>{const n=Ev(ab,t.__scopeSelect),[r,i]=A.useState();if(vm(()=>{i(new DocumentFragment)},[]),!n.open){const a=r;return a?ch.createPortal(A.createElement(Dee,{scope:t.__scopeSelect},A.createElement(d3.Slot,{scope:t.__scopeSelect},A.createElement("div",null,t.children))),a):null}return A.createElement(G0e,lt({},t,{ref:e}))}),Jd=10,[Dee,Pv]=Kb(ab),G0e=A.forwardRef((t,e)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:i,onEscapeKeyDown:a,onPointerDownOutside:o,side:l,sideOffset:c,align:d,alignOffset:u,arrowPadding:h,collisionBoundary:f,collisionPadding:m,sticky:v,hideWhenDetached:p,avoidCollisions:g,...x}=t,y=Ev(ab,n),[b,w]=A.useState(null),[N,E]=A.useState(null),C=Id(e,re=>w(re)),[j,I]=A.useState(null),[k,D]=A.useState(null),P=u3(n),[R,_]=A.useState(!1),M=A.useRef(!1);A.useEffect(()=>{if(b)return yee(b)},[b]),Fge();const U=A.useCallback(re=>{const[pe,...ue]=P().map(je=>je.ref.current),[xe]=ue.slice(-1),Ne=document.activeElement;for(const je of re)if(je===Ne||(je==null||je.scrollIntoView({block:"nearest"}),je===pe&&N&&(N.scrollTop=0),je===xe&&N&&(N.scrollTop=N.scrollHeight),je==null||je.focus(),document.activeElement!==Ne))return},[P,N]),F=A.useCallback(()=>U([j,b]),[U,j,b]);A.useEffect(()=>{R&&F()},[R,F]);const{onOpenChange:z,triggerPointerDownPosRef:H}=y;A.useEffect(()=>{if(b){let re={x:0,y:0};const pe=xe=>{var Ne,je,$e,ze;re={x:Math.abs(Math.round(xe.pageX)-((Ne=(je=H.current)===null||je===void 0?void 0:je.x)!==null&&Ne!==void 0?Ne:0)),y:Math.abs(Math.round(xe.pageY)-(($e=(ze=H.current)===null||ze===void 0?void 0:ze.y)!==null&&$e!==void 0?$e:0))}},ue=xe=>{re.x<=10&&re.y<=10?xe.preventDefault():b.contains(xe.target)||z(!1),document.removeEventListener("pointermove",pe),H.current=null};return H.current!==null&&(document.addEventListener("pointermove",pe),document.addEventListener("pointerup",ue,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",pe),document.removeEventListener("pointerup",ue,{capture:!0})}}},[b,z,H]),A.useEffect(()=>{const re=()=>z(!1);return window.addEventListener("blur",re),window.addEventListener("resize",re),()=>{window.removeEventListener("blur",re),window.removeEventListener("resize",re)}},[z]);const[W,$]=Lee(re=>{const pe=P().filter(Ne=>!Ne.disabled),ue=pe.find(Ne=>Ne.ref.current===document.activeElement),xe=Ree(pe,re,ue);xe&&setTimeout(()=>xe.ref.current.focus())}),L=A.useCallback((re,pe,ue)=>{const xe=!M.current&&!ue;(y.value!==void 0&&y.value===pe||xe)&&(I(re),xe&&(M.current=!0))},[y.value]),q=A.useCallback(()=>b==null?void 0:b.focus(),[b]),Y=A.useCallback((re,pe,ue)=>{const xe=!M.current&&!ue;(y.value!==void 0&&y.value===pe||xe)&&D(re)},[y.value]),J=r==="popper"?Zz:K0e,ne=J===Zz?{side:l,sideOffset:c,align:d,alignOffset:u,arrowPadding:h,collisionBoundary:f,collisionPadding:m,sticky:v,hideWhenDetached:p,avoidCollisions:g}:{};return A.createElement(Dee,{scope:n,content:b,viewport:N,onViewportChange:E,itemRefCallback:L,selectedItem:j,onItemLeave:q,itemTextRefCallback:Y,focusSelectedItem:F,selectedItemText:k,position:r,isPositioned:R,searchRef:W},A.createElement(k0e,{as:q$,allowPinchZoom:!0},A.createElement(Wge,{asChild:!0,trapped:y.open,onMountAutoFocus:re=>{re.preventDefault()},onUnmountAutoFocus:ua(i,re=>{var pe;(pe=y.trigger)===null||pe===void 0||pe.focus({preventScroll:!0}),re.preventDefault()})},A.createElement(Lge,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:a,onPointerDownOutside:o,onFocusOutside:re=>re.preventDefault(),onDismiss:()=>y.onOpenChange(!1)},A.createElement(J,lt({role:"listbox",id:y.contentId,"data-state":y.open?"open":"closed",dir:y.dir,onContextMenu:re=>re.preventDefault()},x,ne,{onPlaced:()=>_(!0),ref:C,style:{display:"flex",flexDirection:"column",outline:"none",...x.style},onKeyDown:ua(x.onKeyDown,re=>{const pe=re.ctrlKey||re.altKey||re.metaKey;if(re.key==="Tab"&&re.preventDefault(),!pe&&re.key.length===1&&$(re.key),["ArrowUp","ArrowDown","Home","End"].includes(re.key)){let xe=P().filter(Ne=>!Ne.disabled).map(Ne=>Ne.ref.current);if(["ArrowUp","End"].includes(re.key)&&(xe=xe.slice().reverse()),["ArrowUp","ArrowDown"].includes(re.key)){const Ne=re.target,je=xe.indexOf(Ne);xe=xe.slice(je+1)}setTimeout(()=>U(xe)),re.preventDefault()}})}))))))}),K0e=A.forwardRef((t,e)=>{const{__scopeSelect:n,onPlaced:r,...i}=t,a=Ev(ab,n),o=Pv(ab,n),[l,c]=A.useState(null),[d,u]=A.useState(null),h=Id(e,C=>u(C)),f=u3(n),m=A.useRef(!1),v=A.useRef(!0),{viewport:p,selectedItem:g,selectedItemText:x,focusSelectedItem:y}=o,b=A.useCallback(()=>{if(a.trigger&&a.valueNode&&l&&d&&p&&g&&x){const C=a.trigger.getBoundingClientRect(),j=d.getBoundingClientRect(),I=a.valueNode.getBoundingClientRect(),k=x.getBoundingClientRect();if(a.dir!=="rtl"){const Ne=k.left-j.left,je=I.left-Ne,$e=C.left-je,ze=C.width+$e,De=Math.max(ze,j.width),ce=window.innerWidth-Jd,Te=Az(je,[Jd,ce-De]);l.style.minWidth=ze+"px",l.style.left=Te+"px"}else{const Ne=j.right-k.right,je=window.innerWidth-I.right-Ne,$e=window.innerWidth-C.right-je,ze=C.width+$e,De=Math.max(ze,j.width),ce=window.innerWidth-Jd,Te=Az(je,[Jd,ce-De]);l.style.minWidth=ze+"px",l.style.right=Te+"px"}const D=f(),P=window.innerHeight-Jd*2,R=p.scrollHeight,_=window.getComputedStyle(d),M=parseInt(_.borderTopWidth,10),U=parseInt(_.paddingTop,10),F=parseInt(_.borderBottomWidth,10),z=parseInt(_.paddingBottom,10),H=M+U+R+z+F,W=Math.min(g.offsetHeight*5,H),$=window.getComputedStyle(p),L=parseInt($.paddingTop,10),q=parseInt($.paddingBottom,10),Y=C.top+C.height/2-Jd,J=P-Y,ne=g.offsetHeight/2,re=g.offsetTop+ne,pe=M+U+re,ue=H-pe;if(pe<=Y){const Ne=g===D[D.length-1].ref.current;l.style.bottom="0px";const je=d.clientHeight-p.offsetTop-p.offsetHeight,$e=Math.max(J,ne+(Ne?q:0)+je+F),ze=pe+$e;l.style.height=ze+"px"}else{const Ne=g===D[0].ref.current;l.style.top="0px";const $e=Math.max(Y,M+p.offsetTop+(Ne?L:0)+ne)+ue;l.style.height=$e+"px",p.scrollTop=pe-Y+p.offsetTop}l.style.margin=`${Jd}px 0`,l.style.minHeight=W+"px",l.style.maxHeight=P+"px",r==null||r(),requestAnimationFrame(()=>m.current=!0)}},[f,a.trigger,a.valueNode,l,d,p,g,x,a.dir,r]);vm(()=>b(),[b]);const[w,N]=A.useState();vm(()=>{d&&N(window.getComputedStyle(d).zIndex)},[d]);const E=A.useCallback(C=>{C&&v.current===!0&&(b(),y==null||y(),v.current=!1)},[b,y]);return A.createElement(Y0e,{scope:n,contentWrapper:l,shouldExpandOnScrollRef:m,onScrollButtonChange:E},A.createElement("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:w}},A.createElement(wc.div,lt({},i,{ref:h,style:{boxSizing:"border-box",maxHeight:"100%",...i.style}}))))}),Zz=A.forwardRef((t,e)=>{const{__scopeSelect:n,align:r="start",collisionPadding:i=Jd,...a}=t,o=G$(n);return A.createElement(Ixe,lt({},o,a,{ref:e,align:r,collisionPadding:i,style:{boxSizing:"border-box",...a.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}}))}),[Y0e,K$]=Kb(ab,{}),Qz="SelectViewport",X0e=A.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,i=Pv(Qz,n),a=K$(Qz,n),o=Id(e,i.onViewportChange),l=A.useRef(0);return A.createElement(A.Fragment,null,A.createElement("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"}}),A.createElement(d3.Slot,{scope:n},A.createElement(wc.div,lt({"data-radix-select-viewport":"",role:"presentation"},r,{ref:o,style:{position:"relative",flex:1,overflow:"auto",...r.style},onScroll:ua(r.onScroll,c=>{const d=c.currentTarget,{contentWrapper:u,shouldExpandOnScrollRef:h}=a;if(h!=null&&h.current&&u){const f=Math.abs(l.current-d.scrollTop);if(f>0){const m=window.innerHeight-Jd*2,v=parseFloat(u.style.minHeight),p=parseFloat(u.style.height),g=Math.max(v,p);if(g<m){const x=g+f,y=Math.min(m,x),b=x-y;u.style.height=y+"px",u.style.bottom==="0px"&&(d.scrollTop=b>0?b:0,u.style.justifyContent="flex-end")}}}l.current=d.scrollTop})}))))}),Z0e="SelectGroup",[OXe,Q0e]=Kb(Z0e),J0e="SelectLabel",eye=A.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,i=Q0e(J0e,n);return A.createElement(wc.div,lt({id:i.id},r,{ref:e}))}),uM="SelectItem",[tye,kee]=Kb(uM),nye=A.forwardRef((t,e)=>{const{__scopeSelect:n,value:r,disabled:i=!1,textValue:a,...o}=t,l=Ev(uM,n),c=Pv(uM,n),d=l.value===r,[u,h]=A.useState(a??""),[f,m]=A.useState(!1),v=Id(e,x=>{var y;return(y=c.itemRefCallback)===null||y===void 0?void 0:y.call(c,x,r,i)}),p=KJ(),g=()=>{i||(l.onValueChange(r),l.onOpenChange(!1))};return A.createElement(tye,{scope:n,value:r,disabled:i,textId:p,isSelected:d,onItemTextChange:A.useCallback(x=>{h(y=>{var b;return y||((b=x==null?void 0:x.textContent)!==null&&b!==void 0?b:"").trim()})},[])},A.createElement(d3.ItemSlot,{scope:n,value:r,disabled:i,textValue:u},A.createElement(wc.div,lt({role:"option","aria-labelledby":p,"data-highlighted":f?"":void 0,"aria-selected":d&&f,"data-state":d?"checked":"unchecked","aria-disabled":i||void 0,"data-disabled":i?"":void 0,tabIndex:i?void 0:-1},o,{ref:v,onFocus:ua(o.onFocus,()=>m(!0)),onBlur:ua(o.onBlur,()=>m(!1)),onPointerUp:ua(o.onPointerUp,g),onPointerMove:ua(o.onPointerMove,x=>{if(i){var y;(y=c.onItemLeave)===null||y===void 0||y.call(c)}else x.currentTarget.focus({preventScroll:!0})}),onPointerLeave:ua(o.onPointerLeave,x=>{if(x.currentTarget===document.activeElement){var y;(y=c.onItemLeave)===null||y===void 0||y.call(c)}}),onKeyDown:ua(o.onKeyDown,x=>{var y;((y=c.searchRef)===null||y===void 0?void 0:y.current)!==""&&x.key===" "||(O0e.includes(x.key)&&g(),x.key===" "&&x.preventDefault())})}))))}),cC="SelectItemText",rye=A.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:i,...a}=t,o=Ev(cC,n),l=Pv(cC,n),c=kee(cC,n),d=F0e(cC,n),[u,h]=A.useState(null),f=Id(e,x=>h(x),c.onItemTextChange,x=>{var y;return(y=l.itemTextRefCallback)===null||y===void 0?void 0:y.call(l,x,c.value,c.disabled)}),m=u==null?void 0:u.textContent,v=A.useMemo(()=>A.createElement("option",{key:c.value,value:c.value,disabled:c.disabled},m),[c.disabled,c.value,m]),{onNativeOptionAdd:p,onNativeOptionRemove:g}=d;return vm(()=>(p(v),()=>g(v)),[p,g,v]),A.createElement(A.Fragment,null,A.createElement(wc.span,lt({id:c.textId},a,{ref:f})),c.isSelected&&o.valueNode&&!o.valueNodeHasChildren?ch.createPortal(a.children,o.valueNode):null)}),sye="SelectItemIndicator",iye=A.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return kee(sye,n).isSelected?A.createElement(wc.span,lt({"aria-hidden":!0},r,{ref:e})):null}),Jz="SelectScrollUpButton",aye=A.forwardRef((t,e)=>{const n=Pv(Jz,t.__scopeSelect),r=K$(Jz,t.__scopeSelect),[i,a]=A.useState(!1),o=Id(e,r.onScrollButtonChange);return vm(()=>{if(n.viewport&&n.isPositioned){let c=function(){const d=l.scrollTop>0;a(d)};const l=n.viewport;return c(),l.addEventListener("scroll",c),()=>l.removeEventListener("scroll",c)}},[n.viewport,n.isPositioned]),i?A.createElement(_ee,lt({},t,{ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=n;l&&c&&(l.scrollTop=l.scrollTop-c.offsetHeight)}})):null}),eU="SelectScrollDownButton",oye=A.forwardRef((t,e)=>{const n=Pv(eU,t.__scopeSelect),r=K$(eU,t.__scopeSelect),[i,a]=A.useState(!1),o=Id(e,r.onScrollButtonChange);return vm(()=>{if(n.viewport&&n.isPositioned){let c=function(){const d=l.scrollHeight-l.clientHeight,u=Math.ceil(l.scrollTop)<d;a(u)};const l=n.viewport;return c(),l.addEventListener("scroll",c),()=>l.removeEventListener("scroll",c)}},[n.viewport,n.isPositioned]),i?A.createElement(_ee,lt({},t,{ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=n;l&&c&&(l.scrollTop=l.scrollTop+c.offsetHeight)}})):null}),_ee=A.forwardRef((t,e)=>{const{__scopeSelect:n,onAutoScroll:r,...i}=t,a=Pv("SelectScrollButton",n),o=A.useRef(null),l=u3(n),c=A.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return A.useEffect(()=>()=>c(),[c]),vm(()=>{var d;const u=l().find(h=>h.ref.current===document.activeElement);u==null||(d=u.ref.current)===null||d===void 0||d.scrollIntoView({block:"nearest"})},[l]),A.createElement(wc.div,lt({"aria-hidden":!0},i,{ref:e,style:{flexShrink:0,...i.style},onPointerDown:ua(i.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(r,50))}),onPointerMove:ua(i.onPointerMove,()=>{var d;(d=a.onItemLeave)===null||d===void 0||d.call(a),o.current===null&&(o.current=window.setInterval(r,50))}),onPointerLeave:ua(i.onPointerLeave,()=>{c()})}))}),lye=A.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return A.createElement(wc.div,lt({"aria-hidden":!0},r,{ref:e}))}),Oee=A.forwardRef((t,e)=>{const{value:n,...r}=t,i=A.useRef(null),a=Id(e,i),o=qxe(n);return A.useEffect(()=>{const l=i.current,c=window.HTMLSelectElement.prototype,u=Object.getOwnPropertyDescriptor(c,"value").set;if(o!==n&&u){const h=new Event("change",{bubbles:!0});u.call(l,n),l.dispatchEvent(h)}},[o,n]),A.createElement(Qxe,{asChild:!0},A.createElement("select",lt({},r,{ref:a,defaultValue:n})))});Oee.displayName="BubbleSelect";function Lee(t){const e=nh(t),n=A.useRef(""),r=A.useRef(0),i=A.useCallback(o=>{const l=n.current+o;e(l),function c(d){n.current=d,window.clearTimeout(r.current),d!==""&&(r.current=window.setTimeout(()=>c(""),1e3))}(l)},[e]),a=A.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return A.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,i,a]}function Ree(t,e,n){const i=e.length>1&&Array.from(e).every(d=>d===e[0])?e[0]:e,a=n?t.indexOf(n):-1;let o=cye(t,Math.max(a,0));i.length===1&&(o=o.filter(d=>d!==n));const c=o.find(d=>d.textValue.toLowerCase().startsWith(i.toLowerCase()));return c!==n?c:void 0}function cye(t,e){return t.map((n,r)=>t[(e+r)%t.length])}const dye=$0e,Mee=z0e,uye=V0e,hye=q0e,fye=H0e,Fee=W0e,mye=X0e,$ee=eye,Bee=nye,pye=rye,gye=iye,zee=aye,Uee=oye,Vee=lye,Ke=dye,Ye=uye,He=A.forwardRef(({className:t,children:e,...n},r)=>s.jsxs(Mee,{ref:r,className:st("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...n,children:[e,s.jsx(hye,{asChild:!0,children:s.jsx(k$,{className:"h-4 w-4 opacity-50"})})]}));He.displayName=Mee.displayName;const qee=A.forwardRef(({className:t,...e},n)=>s.jsx(zee,{ref:n,className:st("flex cursor-default items-center justify-center py-1",t),...e,children:s.jsx(npe,{className:"h-4 w-4"})}));qee.displayName=zee.displayName;const Hee=A.forwardRef(({className:t,...e},n)=>s.jsx(Uee,{ref:n,className:st("flex cursor-default items-center justify-center py-1",t),...e,children:s.jsx(k$,{className:"h-4 w-4"})}));Hee.displayName=Uee.displayName;const We=A.forwardRef(({className:t,children:e,position:n="popper",...r},i)=>s.jsx(fye,{children:s.jsxs(Fee,{ref:i,className:st("relative z-50 max-h-96 min-w-[8rem] overflow-auto rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:n,...r,children:[s.jsx(qee,{}),s.jsx(mye,{className:st("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),s.jsx(Hee,{})]})}));We.displayName=Fee.displayName;const vye=A.forwardRef(({className:t,...e},n)=>s.jsx($ee,{ref:n,className:st("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...e}));vye.displayName=$ee.displayName;const le=A.forwardRef(({className:t,children:e,...n},r)=>s.jsxs(Bee,{ref:r,className:st("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[s.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:s.jsx(gye,{children:s.jsx(t3,{className:"h-4 w-4"})})}),s.jsx(pye,{children:e})]}));le.displayName=Bee.displayName;const xye=A.forwardRef(({className:t,...e},n)=>s.jsx(Vee,{ref:n,className:st("-mx-1 my-1 h-px bg-muted",t),...e}));xye.displayName=Vee.displayName;var yye="Label",Wee=A.forwardRef((t,e)=>s.jsx(qn.label,{...t,ref:e,onMouseDown:n=>{var i;n.target.closest("button, input, select, textarea")||((i=t.onMouseDown)==null||i.call(t,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));Wee.displayName=yye;var Gee=Wee;const bye=gA("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),ae=A.forwardRef(({className:t,...e},n)=>s.jsx(Gee,{ref:n,className:st(bye(),t),...e}));ae.displayName=Gee.displayName;var TE=(t=>(t.NEW="new",t.CONTACTED="contacted",t.QUALIFIED="qualified",t.PROPOSAL="proposal",t.NEGOTIATION="negotiation",t.CLOSED_WON="closed_won",t.CLOSED_LOST="closed_lost",t))(TE||{});function uh(){const[t,e]=A.useState([]),[n,r]=A.useState([]),[i,a]=A.useState([]),[o,l]=A.useState([]),[c,d]=A.useState([]),[u,h]=A.useState([]),[f,m]=A.useState(!1);A.useEffect(()=>{v()},[]);const v=()=>{const P=[{id:"1",name:"Website Contact Form",type:"website",isActive:!0,trackingCode:"WEB_CONTACT",conversionRate:15.5,createdAt:new Date("2024-01-01")},{id:"2",name:"Facebook Ads",type:"advertising",isActive:!0,trackingCode:"FB_ADS",conversionRate:8.2,createdAt:new Date("2024-01-01")},{id:"3",name:"Customer Referral",type:"referral",isActive:!0,conversionRate:35.8,createdAt:new Date("2024-01-01")},{id:"4",name:"RV Show",type:"event",isActive:!0,trackingCode:"RV_SHOW_2024",conversionRate:22.1,createdAt:new Date("2024-01-01")},{id:"5",name:"Google Ads",type:"advertising",isActive:!0,trackingCode:"GOOGLE_ADS",conversionRate:12.3,createdAt:new Date("2024-01-01")},{id:"6",name:"Walk-in",type:"other",isActive:!0,conversionRate:45.2,createdAt:new Date("2024-01-01")}],R=[{id:"rep-001",name:"John Smith",email:"john.smith@dealership.com",phone:"(555) 123-4567",territory:"North Region",isActive:!0,targets:{monthly:10,quarterly:30,annual:120}},{id:"rep-002",name:"Sarah Johnson",email:"sarah.johnson@dealership.com",phone:"(555) 987-6543",territory:"South Region",isActive:!0,targets:{monthly:12,quarterly:36,annual:144}},{id:"rep-003",name:"Mike Davis",email:"mike.davis@dealership.com",phone:"(555) 456-7890",territory:"East Region",isActive:!0,targets:{monthly:8,quarterly:24,annual:96}}],_=yr("renter-insight-leads",[{id:"1",firstName:"John",lastName:"Smith",email:"john.smith@email.com",phone:"(555) 123-4567",source:"Website Contact Form",sourceId:"1",status:TE.NEW,assignedTo:"rep-001",notes:"Interested in Class A Motorhome, budget $150k-200k",score:85,lastActivity:new Date("2024-01-20"),customFields:{budget:"$150k-200k",timeframe:"3-6 months",experience:"First-time buyer"},createdAt:new Date("2024-01-15"),updatedAt:new Date("2024-01-20")},{id:"2",firstName:"Sarah",lastName:"Johnson",email:"sarah.j@email.com",phone:"(555) 987-6543",source:"Customer Referral",sourceId:"3",status:TE.QUALIFIED,assignedTo:"rep-002",notes:"Looking for travel trailer under $50k, referred by Mike Davis",score:92,lastActivity:new Date("2024-01-18"),customFields:{budget:"Under $50k",timeframe:"1-3 months",experience:"Experienced RVer"},createdAt:new Date("2024-01-14"),updatedAt:new Date("2024-01-18")}]),M=yr("renter-insight-activities",[{id:"1",leadId:"1",type:"call",description:"Initial qualification call",outcome:"positive",duration:25,completedDate:new Date("2024-01-20"),userId:"rep-001",createdAt:new Date("2024-01-20")},{id:"2",leadId:"2",type:"email",description:"Sent product brochures",outcome:"positive",completedDate:new Date("2024-01-18"),userId:"rep-002",createdAt:new Date("2024-01-18")}]),U=[{leadId:"1",totalScore:85,demographicScore:30,behaviorScore:25,engagementScore:30,lastCalculated:new Date("2024-01-20"),factors:[{factor:"Budget Match",points:25,reason:"Budget aligns with inventory"},{factor:"Response Time",points:20,reason:"Quick response to outreach"},{factor:"Engagement Level",points:15,reason:"High email open rates"}]}],F=[{id:"1",leadId:"1",userId:"rep-001",type:"follow_up",title:"Follow up on motorhome interest",description:"Schedule showroom visit",dueDate:new Date("2024-01-25"),isCompleted:!1,priority:"high",createdAt:new Date("2024-01-20")}];r(P),h(R),e(_),a(M),l(U),d(F)},p=P=>{Dn("renter-insight-leads",P)},g=P=>{Dn("renter-insight-activities",P)},x=async P=>{m(!0);try{const R={id:Math.random().toString(36).substr(2,9),firstName:P.firstName||"",lastName:P.lastName||"",email:P.email||"",phone:P.phone||"",source:P.source||"",sourceId:P.sourceId||"",status:TE.NEW,assignedTo:P.assignedTo,notes:P.notes||"",score:0,lastActivity:new Date,customFields:P.customFields||{},createdAt:new Date,updatedAt:new Date},_=[...t,R];return e(_),p(_),await w({leadId:R.id,type:"note",description:`Lead created from ${R.source}`,userId:"current-user"}),await N(R.id),R}finally{m(!1)}},y=async(P,R)=>{const _=t.map(M=>M.id===P?{...M,status:R,updatedAt:new Date}:M);e(_),p(_),await w({leadId:P,type:"status_change",description:`Status changed to ${R}`,userId:"current-user"})},b=async(P,R)=>{var M;const _=t.map(U=>U.id===P?{...U,assignedTo:R,updatedAt:new Date}:U);e(_),p(_),await w({leadId:P,type:"note",description:`Lead assigned to ${(M=u.find(U=>U.id===R))==null?void 0:M.name}`,userId:"current-user"})},w=async P=>{const R={id:Math.random().toString(36).substr(2,9),leadId:P.leadId||"",type:P.type||"note",description:P.description||"",outcome:P.outcome,duration:P.duration,scheduledDate:P.scheduledDate,completedDate:P.completedDate||new Date,userId:P.userId||"current-user",metadata:P.metadata,createdAt:new Date},_=[...i,R];a(_),g(_);const M=t.map(U=>U.id===R.leadId?{...U,lastActivity:new Date,updatedAt:new Date}:U);e(M),p(M),await N(R.leadId)},N=async P=>{var ne,re,pe;const R=t.find(ue=>ue.id===P);if(!R)return;const _=i.filter(ue=>ue.leadId===P);let M=0,U=0,F=0;const z=[];(ne=R.customFields)!=null&&ne.budget&&(M+=20,z.push({factor:"Budget Provided",points:20,reason:"Customer provided budget information"})),((re=R.customFields)==null?void 0:re.timeframe)==="1-3 months"?(M+=25,z.push({factor:"Short Timeframe",points:25,reason:"Ready to purchase soon"})):((pe=R.customFields)==null?void 0:pe.timeframe)==="3-6 months"&&(M+=15,z.push({factor:"Medium Timeframe",points:15,reason:"Moderate purchase timeline"})),_.filter(ue=>ue.type==="call").length>0&&(U+=30,z.push({factor:"Phone Engagement",points:30,reason:"Participated in phone calls"})),_.filter(ue=>ue.type==="email").length>2&&(U+=20,z.push({factor:"Email Engagement",points:20,reason:"Active email communication"})),_.filter(ue=>new Date(ue.createdAt).getTime()>Date.now()-7*24*60*60*1e3).length>0&&(F+=25,z.push({factor:"Recent Activity",points:25,reason:"Active in the last 7 days"}));const L=_.filter(ue=>ue.outcome==="positive").length;L>0&&(F+=L*10,z.push({factor:"Positive Interactions",points:L*10,reason:`${L} positive interactions`}));const q=M+U+F,Y={leadId:P,totalScore:q,demographicScore:M,behaviorScore:U,engagementScore:F,lastCalculated:new Date,factors:z};l(ue=>ue.filter(xe=>xe.leadId!==P).concat(Y));const J=t.map(ue=>ue.id===P?{...ue,score:q,updatedAt:new Date}:ue);e(J),p(J)};return{leads:t,sources:n,activities:i,scores:o,reminders:c,salesReps:u,loading:f,createLead:x,updateLeadStatus:y,assignLead:b,logActivity:w,calculateLeadScore:N,createReminder:async P=>{const R={id:Math.random().toString(36).substr(2,9),leadId:P.leadId||"",userId:P.userId||"current-user",type:P.type||"follow_up",title:P.title||"",description:P.description||"",dueDate:P.dueDate||new Date,isCompleted:!1,priority:P.priority||"medium",createdAt:new Date};return d(_=>[..._,R]),R},completeReminder:async P=>{d(R=>R.map(_=>_.id===P?{..._,isCompleted:!0}:_))},getLeadsByRep:P=>t.filter(R=>R.assignedTo===P),getActivitiesByLead:P=>i.filter(R=>R.leadId===P),getRemindersByUser:P=>c.filter(R=>R.userId===P&&!R.isCompleted),getLeadScore:P=>o.find(R=>R.leadId===P)}}function Yb({onClose:t,onSuccess:e}){const{sources:n,salesReps:r,createLead:i}=uh(),{toast:a}=Ot(),[o,l]=A.useState(!1),[c,d]=A.useState({firstName:"",lastName:"",email:"",phone:"",source:"",sourceId:"",assignedTo:"",notes:"",customFields:{budget:"",timeframe:"",experience:"",interests:"",preferredContact:"email"}}),[u,h]=A.useState({}),f=()=>{const g={};return c.firstName.trim()||(g.firstName="First name is required"),c.lastName.trim()||(g.lastName="Last name is required"),c.email.trim()?/\S+@\S+\.\S+/.test(c.email)||(g.email="Please enter a valid email address"):g.email="Email is required",c.phone.trim()||(g.phone="Phone number is required"),c.sourceId||(g.sourceId="Lead source is required"),h(g),Object.keys(g).length===0},m=async g=>{if(g.preventDefault(),!f()){a({title:"Validation Error",description:"Please fill in all required fields correctly.",variant:"destructive"});return}l(!0);try{const x=n.find(w=>w.id===c.sourceId),y={firstName:c.firstName.trim(),lastName:c.lastName.trim(),email:c.email.trim().toLowerCase(),phone:c.phone.trim(),source:(x==null?void 0:x.name)||"",sourceId:c.sourceId,assignedTo:c.assignedTo||void 0,notes:c.notes.trim(),customFields:{...c.customFields,interests:c.customFields.interests.trim()}},b=await i(y);a({title:"Lead Created Successfully!",description:`${b.firstName} ${b.lastName} has been added to your CRM.`,variant:"default"}),e(b),t()}catch(x){console.error("Error creating lead:",x),a({title:"Error Creating Lead",description:"There was a problem creating the lead. Please try again.",variant:"destructive"})}finally{l(!1)}},v=(g,x)=>{d(y=>({...y,[g]:x})),u[g]&&h(y=>({...y,[g]:""}))},p=(g,x)=>{d(y=>({...y,customFields:{...y.customFields,[g]:x}}))};return s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:s.jsxs(he,{className:"w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[s.jsx(ye,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsxs(be,{className:"text-xl flex items-center",children:[s.jsx(Gr,{className:"h-5 w-5 mr-2 text-blue-500"}),"Add New Lead"]}),s.jsx(Be,{children:"Create a new lead and start the sales process"})]}),s.jsx(Q,{variant:"ghost",size:"sm",onClick:t,children:s.jsx(on,{className:"h-4 w-4"})})]})}),s.jsx(fe,{children:s.jsxs("form",{onSubmit:m,className:"space-y-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("h3",{className:"text-lg font-semibold flex items-center",children:[s.jsx(Gr,{className:"h-4 w-4 mr-2"}),"Contact Information"]}),s.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"firstName",children:"First Name *"}),s.jsx(Ae,{id:"firstName",value:c.firstName,onChange:g=>v("firstName",g.target.value),placeholder:"Enter first name",className:u.firstName?"border-red-500":""}),u.firstName&&s.jsx("p",{className:"text-sm text-red-500 mt-1",children:u.firstName})]}),s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"lastName",children:"Last Name *"}),s.jsx(Ae,{id:"lastName",value:c.lastName,onChange:g=>v("lastName",g.target.value),placeholder:"Enter last name",className:u.lastName?"border-red-500":""}),u.lastName&&s.jsx("p",{className:"text-sm text-red-500 mt-1",children:u.lastName})]})]}),s.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"email",children:"Email Address *"}),s.jsxs("div",{className:"relative",children:[s.jsx(Ti,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),s.jsx(Ae,{id:"email",type:"email",value:c.email,onChange:g=>v("email",g.target.value),placeholder:"Enter email address",className:`pl-10 ${u.email?"border-red-500":""}`})]}),u.email&&s.jsx("p",{className:"text-sm text-red-500 mt-1",children:u.email})]}),s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"phone",children:"Phone Number *"}),s.jsxs("div",{className:"relative",children:[s.jsx(vA,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),s.jsx(Ae,{id:"phone",type:"tel",value:c.phone,onChange:g=>v("phone",g.target.value),placeholder:"Enter phone number",className:`pl-10 ${u.phone?"border-red-500":""}`})]}),u.phone&&s.jsx("p",{className:"text-sm text-red-500 mt-1",children:u.phone})]})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("h3",{className:"text-lg font-semibold flex items-center",children:[s.jsx(L$,{className:"h-4 w-4 mr-2"}),"Lead Details"]}),s.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"source",children:"Lead Source *"}),s.jsxs(Ke,{value:c.sourceId,onValueChange:g=>v("sourceId",g),children:[s.jsx(He,{className:u.sourceId?"border-red-500":"",children:s.jsx(Ye,{placeholder:"Select lead source"})}),s.jsx(We,{children:n.map(g=>s.jsx(le,{value:g.id,children:g.name},g.id))})]}),u.sourceId&&s.jsx("p",{className:"text-sm text-red-500 mt-1",children:u.sourceId})]}),s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"assignedTo",children:"Assign to Sales Rep"}),s.jsxs(Ke,{value:c.assignedTo,onValueChange:g=>v("assignedTo",g),children:[s.jsx(He,{children:s.jsx(Ye,{placeholder:"Select sales rep (optional)"})}),s.jsxs(We,{children:[s.jsx(le,{value:"",children:"Unassigned"}),r.map(g=>s.jsx(le,{value:g.id,children:g.name},g.id))]})]})]})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("h3",{className:"text-lg font-semibold flex items-center",children:[s.jsx(Vt,{className:"h-4 w-4 mr-2"}),"Additional Information"]}),s.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"budget",children:"Budget Range"}),s.jsxs(Ke,{value:c.customFields.budget,onValueChange:g=>p("budget",g),children:[s.jsx(He,{children:s.jsx(Ye,{placeholder:"Select budget range"})}),s.jsxs(We,{children:[s.jsx(le,{value:"Under $50k",children:"Under $50k"}),s.jsx(le,{value:"$50k-$100k",children:"$50k-$100k"}),s.jsx(le,{value:"$100k-$150k",children:"$100k-$150k"}),s.jsx(le,{value:"$150k-$200k",children:"$150k-$200k"}),s.jsx(le,{value:"$200k+",children:"$200k+"})]})]})]}),s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"timeframe",children:"Purchase Timeframe"}),s.jsxs(Ke,{value:c.customFields.timeframe,onValueChange:g=>p("timeframe",g),children:[s.jsx(He,{children:s.jsx(Ye,{placeholder:"Select timeframe"})}),s.jsxs(We,{children:[s.jsx(le,{value:"Immediate",children:"Immediate (within 1 month)"}),s.jsx(le,{value:"1-3 months",children:"1-3 months"}),s.jsx(le,{value:"3-6 months",children:"3-6 months"}),s.jsx(le,{value:"6-12 months",children:"6-12 months"}),s.jsx(le,{value:"12+ months",children:"12+ months"})]})]})]})]}),s.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"experience",children:"RV Experience"}),s.jsxs(Ke,{value:c.customFields.experience,onValueChange:g=>p("experience",g),children:[s.jsx(He,{children:s.jsx(Ye,{placeholder:"Select experience level"})}),s.jsxs(We,{children:[s.jsx(le,{value:"First-time buyer",children:"First-time buyer"}),s.jsx(le,{value:"Some experience",children:"Some experience"}),s.jsx(le,{value:"Experienced RVer",children:"Experienced RVer"}),s.jsx(le,{value:"Expert/Full-timer",children:"Expert/Full-timer"})]})]})]}),s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"preferredContact",children:"Preferred Contact Method"}),s.jsxs(Ke,{value:c.customFields.preferredContact,onValueChange:g=>p("preferredContact",g),children:[s.jsx(He,{children:s.jsx(Ye,{placeholder:"Select contact method"})}),s.jsxs(We,{children:[s.jsx(le,{value:"email",children:"Email"}),s.jsx(le,{value:"phone",children:"Phone"}),s.jsx(le,{value:"text",children:"Text/SMS"}),s.jsx(le,{value:"any",children:"Any method"})]})]})]})]}),s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"interests",children:"Interests/Requirements"}),s.jsx(Ae,{id:"interests",value:c.customFields.interests,onChange:g=>p("interests",g.target.value),placeholder:"e.g., Class A Motorhome, Solar panels, Pet-friendly"})]})]}),s.jsx("div",{className:"space-y-4",children:s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"notes",children:"Notes"}),s.jsx(un,{id:"notes",value:c.notes,onChange:g=>v("notes",g.target.value),placeholder:"Add any additional notes about this lead...",rows:3})]})}),s.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t",children:[s.jsx(Q,{type:"button",variant:"outline",onClick:t,disabled:o,children:"Cancel"}),s.jsx(Q,{type:"submit",disabled:o,children:o?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Creating Lead..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Wn,{className:"h-4 w-4 mr-2"}),"Create Lead"]})})]})]})})]})})}const wye=[{name:"Total Leads",value:"2,651",change:"+4.75%",changeType:"positive",icon:Lr},{name:"Inventory Units",value:"847",change:"+54.02%",changeType:"positive",icon:Ii},{name:"Active Quotes",value:"124",change:"-1.39%",changeType:"negative",icon:Zt},{name:"Monthly Revenue",value:"$405,091",change:"+10.18%",changeType:"positive",icon:Vt}],jye=[{id:1,type:"lead",title:"New lead from website",description:"John Smith interested in Class A Motorhome",time:"2 minutes ago"},{id:2,type:"quote",title:"Quote sent to customer",description:"Quote #Q-2024-001 sent to Sarah Johnson",time:"15 minutes ago"},{id:3,type:"service",title:"Service appointment scheduled",description:"Annual maintenance for RV #VIN123456",time:"1 hour ago"},{id:4,type:"delivery",title:"Delivery completed",description:"Travel Trailer delivered to Mike Davis",time:"2 hours ago"}];function Nye(){const[t,e]=A.useState(!1),n=i=>{console.log("New lead created from dashboard:",i)},r=i=>{switch(i){case"add-lead":e(!0);break;case"add-inventory":window.location.href="/inventory";break;case"create-quote":window.location.href="/quotes";break;case"schedule-service":window.location.href="/service";break}};return s.jsxs("div",{className:"space-y-6",children:[t&&s.jsx(Yb,{onClose:()=>e(!1),onSuccess:n}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Dashboard"}),s.jsx("p",{className:"text-muted-foreground",children:"Welcome to your Renter Insight CRM/DMS dashboard"})]}),s.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:wye.map(i=>s.jsxs(he,{children:[s.jsxs(ye,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(be,{className:"text-sm font-medium",children:i.name}),s.jsx(i.icon,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsxs(fe,{children:[s.jsx("div",{className:"text-2xl font-bold",children:i.value}),s.jsxs("p",{className:`text-xs ${i.changeType==="positive"?"text-green-600":"text-red-600"}`,children:[i.change," from last month"]})]})]},i.name))}),s.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[s.jsxs(he,{children:[s.jsxs(ye,{children:[s.jsx(be,{children:"Recent Activity"}),s.jsx(Be,{children:"Latest updates from your dealership"})]}),s.jsx(fe,{children:s.jsx("div",{className:"space-y-4",children:jye.map(i=>s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("div",{className:"h-2 w-2 bg-primary rounded-full mt-2"})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"text-sm font-medium text-foreground",children:i.title}),s.jsx("p",{className:"text-sm text-muted-foreground",children:i.description}),s.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:i.time})]})]},i.id))})})]}),s.jsxs(he,{children:[s.jsxs(ye,{children:[s.jsx(be,{children:"Quick Actions"}),s.jsx(Be,{children:"Common tasks and shortcuts"})]}),s.jsx(fe,{children:s.jsxs("div",{className:"grid gap-3",children:[s.jsxs("button",{onClick:()=>r("add-lead"),className:"flex items-center justify-between p-3 text-left border rounded-lg hover:bg-accent transition-colors",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(Lr,{className:"h-5 w-5 text-primary"}),s.jsx("span",{className:"font-medium",children:"Add New Lead"})]}),s.jsx(yt,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsxs("button",{onClick:()=>r("add-inventory"),className:"flex items-center justify-between p-3 text-left border rounded-lg hover:bg-accent transition-colors",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(Ii,{className:"h-5 w-5 text-primary"}),s.jsx("span",{className:"font-medium",children:"Add Inventory"})]}),s.jsx("span",{className:"text-muted-foreground",children:""})]}),s.jsxs("button",{onClick:()=>r("create-quote"),className:"flex items-center justify-between p-3 text-left border rounded-lg hover:bg-accent transition-colors",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(Zt,{className:"h-5 w-5 text-primary"}),s.jsx("span",{className:"font-medium",children:"Create Quote"})]}),s.jsx("span",{className:"text-muted-foreground",children:""})]}),s.jsxs("button",{onClick:()=>r("schedule-service"),className:"flex items-center justify-between p-3 text-left border rounded-lg hover:bg-accent transition-colors",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(Sn,{className:"h-5 w-5 text-primary"}),s.jsx("span",{className:"font-medium",children:"Schedule Service"})]}),s.jsx("span",{className:"text-muted-foreground",children:""})]})]})})]})]})]})}function Sye(){const[t,e]=A.useState("admin@renterinsight.com"),[n,r]=A.useState("password"),{login:i,isLoading:a}=Hb(),{toast:o}=Ot(),l=Pm(),c=async d=>{d.preventDefault();try{await i(t,n),l("/")}catch{o({title:"Login Failed",description:"Invalid email or password",variant:"destructive"})}};return s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background px-4",children:s.jsxs(he,{className:"w-full max-w-md",children:[s.jsxs(ye,{className:"text-center",children:[s.jsx(be,{className:"text-2xl font-bold text-primary",children:"Renter Insight CRM/DMS"}),s.jsx(Be,{children:"Sign in to your account to continue"})]}),s.jsxs(fe,{children:[s.jsxs("form",{onSubmit:c,className:"space-y-4",children:[s.jsx("div",{children:s.jsx(Ae,{type:"email",placeholder:"Email",value:t,onChange:d=>e(d.target.value),required:!0,autoComplete:"username"})}),s.jsx("div",{children:s.jsx(Ae,{type:"password",placeholder:"Password",value:n,onChange:d=>r(d.target.value),required:!0,autoComplete:"current-password"})}),s.jsx(Q,{type:"submit",className:"w-full",disabled:a,children:a?"Signing in...":"Sign In"})]}),s.jsx("div",{className:"mt-4 text-center text-sm text-muted-foreground",children:"Demo credentials: admin@renterinsight.com / password"})]})]})})}function Aye({children:t}){const{user:e,isLoading:n}=Hb();return n?s.jsx("div",{className:"min-h-screen flex items-center justify-center",children:s.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-primary"})}):e?s.jsx(s.Fragment,{children:t}):s.jsx(Wfe,{to:"/login",replace:!0})}function Cye(t){const e=t+"CollectionProvider",[n,r]=Tm(e),[i,a]=n(e,{collectionRef:{current:null},itemMap:new Map}),o=p=>{const{scope:g,children:x}=p,y=ge.useRef(null),b=ge.useRef(new Map).current;return s.jsx(i,{scope:g,itemMap:b,collectionRef:y,children:x})};o.displayName=e;const l=t+"CollectionSlot",c=lv(l),d=ge.forwardRef((p,g)=>{const{scope:x,children:y}=p,b=a(l,x),w=li(g,b.collectionRef);return s.jsx(c,{ref:w,children:y})});d.displayName=l;const u=t+"CollectionItemSlot",h="data-radix-collection-item",f=lv(u),m=ge.forwardRef((p,g)=>{const{scope:x,children:y,...b}=p,w=ge.useRef(null),N=li(g,w),E=a(u,x);return ge.useEffect(()=>(E.itemMap.set(w,{ref:w,...b}),()=>void E.itemMap.delete(w))),s.jsx(f,{[h]:"",ref:N,children:y})});m.displayName=u;function v(p){const g=a(t+"CollectionConsumer",p);return ge.useCallback(()=>{const y=g.collectionRef.current;if(!y)return[];const b=Array.from(y.querySelectorAll(`[${h}]`));return Array.from(g.itemMap.values()).sort((E,C)=>b.indexOf(E.ref.current)-b.indexOf(C.ref.current))},[g.collectionRef,g.itemMap])}return[{Provider:o,Slot:d,ItemSlot:m},v,r]}var Eye=$b[" useId ".trim().toString()]||(()=>{}),Pye=0;function Tye(t){const[e,n]=A.useState(Eye());return Sd(()=>{t||n(r=>r??String(Pye++))},[t]),t||(e?`radix-${e}`:"")}function Iye(t){const e=A.useRef(t);return A.useEffect(()=>{e.current=t}),A.useMemo(()=>(...n)=>{var r;return(r=e.current)==null?void 0:r.call(e,...n)},[])}var Dye=A.createContext(void 0);function kye(t){const e=A.useContext(Dye);return t||e||"ltr"}var b_="rovingFocusGroup.onEntryFocus",_ye={bubbles:!1,cancelable:!0},yA="RovingFocusGroup",[hM,Kee,Oye]=Cye(yA),[Lye,Yee]=Tm(yA,[Oye]),[Rye,Mye]=Lye(yA),Xee=A.forwardRef((t,e)=>s.jsx(hM.Provider,{scope:t.__scopeRovingFocusGroup,children:s.jsx(hM.Slot,{scope:t.__scopeRovingFocusGroup,children:s.jsx(Fye,{...t,ref:e})})}));Xee.displayName=yA;var Fye=A.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:i=!1,dir:a,currentTabStopId:o,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:d,preventScrollOnEntryFocus:u=!1,...h}=t,f=A.useRef(null),m=li(e,f),v=kye(a),[p,g]=mA({prop:o,defaultProp:l??null,onChange:c,caller:yA}),[x,y]=A.useState(!1),b=Iye(d),w=Kee(n),N=A.useRef(!1),[E,C]=A.useState(0);return A.useEffect(()=>{const j=f.current;if(j)return j.addEventListener(b_,b),()=>j.removeEventListener(b_,b)},[b]),s.jsx(Rye,{scope:n,orientation:r,dir:v,loop:i,currentTabStopId:p,onItemFocus:A.useCallback(j=>g(j),[g]),onItemShiftTab:A.useCallback(()=>y(!0),[]),onFocusableItemAdd:A.useCallback(()=>C(j=>j+1),[]),onFocusableItemRemove:A.useCallback(()=>C(j=>j-1),[]),children:s.jsx(qn.div,{tabIndex:x||E===0?-1:0,"data-orientation":r,...h,ref:m,style:{outline:"none",...t.style},onMouseDown:On(t.onMouseDown,()=>{N.current=!0}),onFocus:On(t.onFocus,j=>{const I=!N.current;if(j.target===j.currentTarget&&I&&!x){const k=new CustomEvent(b_,_ye);if(j.currentTarget.dispatchEvent(k),!k.defaultPrevented){const D=w().filter(U=>U.focusable),P=D.find(U=>U.active),R=D.find(U=>U.id===p),M=[P,R,...D].filter(Boolean).map(U=>U.ref.current);Jee(M,u)}}N.current=!1}),onBlur:On(t.onBlur,()=>y(!1))})})}),Zee="RovingFocusGroupItem",Qee=A.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:i=!1,tabStopId:a,children:o,...l}=t,c=Tye(),d=a||c,u=Mye(Zee,n),h=u.currentTabStopId===d,f=Kee(n),{onFocusableItemAdd:m,onFocusableItemRemove:v,currentTabStopId:p}=u;return A.useEffect(()=>{if(r)return m(),()=>v()},[r,m,v]),s.jsx(hM.ItemSlot,{scope:n,id:d,focusable:r,active:i,children:s.jsx(qn.span,{tabIndex:h?0:-1,"data-orientation":u.orientation,...l,ref:e,onMouseDown:On(t.onMouseDown,g=>{r?u.onItemFocus(d):g.preventDefault()}),onFocus:On(t.onFocus,()=>u.onItemFocus(d)),onKeyDown:On(t.onKeyDown,g=>{if(g.key==="Tab"&&g.shiftKey){u.onItemShiftTab();return}if(g.target!==g.currentTarget)return;const x=zye(g,u.orientation,u.dir);if(x!==void 0){if(g.metaKey||g.ctrlKey||g.altKey||g.shiftKey)return;g.preventDefault();let b=f().filter(w=>w.focusable).map(w=>w.ref.current);if(x==="last")b.reverse();else if(x==="prev"||x==="next"){x==="prev"&&b.reverse();const w=b.indexOf(g.currentTarget);b=u.loop?Uye(b,w+1):b.slice(w+1)}setTimeout(()=>Jee(b))}}),children:typeof o=="function"?o({isCurrentTabStop:h,hasTabStop:p!=null}):o})})});Qee.displayName=Zee;var $ye={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function Bye(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function zye(t,e,n){const r=Bye(t.key,n);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return $ye[r]}function Jee(t,e=!1){const n=document.activeElement;for(const r of t)if(r===n||(r.focus({preventScroll:e}),document.activeElement!==n))return}function Uye(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var Vye=Xee,qye=Qee,Hye=A.createContext(void 0);function Wye(t){const e=A.useContext(Hye);return t||e||"ltr"}var Gye=$b[" useId ".trim().toString()]||(()=>{}),Kye=0;function Yye(t){const[e,n]=A.useState(Gye());return Sd(()=>{t||n(r=>r??String(Kye++))},[t]),t||(e?`radix-${e}`:"")}var h3="Tabs",[Xye,LXe]=Tm(h3,[Yee]),ete=Yee(),[Zye,Y$]=Xye(h3),tte=A.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,onValueChange:i,defaultValue:a,orientation:o="horizontal",dir:l,activationMode:c="automatic",...d}=t,u=Wye(l),[h,f]=mA({prop:r,onChange:i,defaultProp:a??"",caller:h3});return s.jsx(Zye,{scope:n,baseId:Yye(),value:h,onValueChange:f,orientation:o,dir:u,activationMode:c,children:s.jsx(qn.div,{dir:u,"data-orientation":o,...d,ref:e})})});tte.displayName=h3;var nte="TabsList",rte=A.forwardRef((t,e)=>{const{__scopeTabs:n,loop:r=!0,...i}=t,a=Y$(nte,n),o=ete(n);return s.jsx(Vye,{asChild:!0,...o,orientation:a.orientation,dir:a.dir,loop:r,children:s.jsx(qn.div,{role:"tablist","aria-orientation":a.orientation,...i,ref:e})})});rte.displayName=nte;var ste="TabsTrigger",ite=A.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,disabled:i=!1,...a}=t,o=Y$(ste,n),l=ete(n),c=lte(o.baseId,r),d=cte(o.baseId,r),u=r===o.value;return s.jsx(qye,{asChild:!0,...l,focusable:!i,active:u,children:s.jsx(qn.button,{type:"button",role:"tab","aria-selected":u,"aria-controls":d,"data-state":u?"active":"inactive","data-disabled":i?"":void 0,disabled:i,id:c,...a,ref:e,onMouseDown:On(t.onMouseDown,h=>{!i&&h.button===0&&h.ctrlKey===!1?o.onValueChange(r):h.preventDefault()}),onKeyDown:On(t.onKeyDown,h=>{[" ","Enter"].includes(h.key)&&o.onValueChange(r)}),onFocus:On(t.onFocus,()=>{const h=o.activationMode!=="manual";!u&&!i&&h&&o.onValueChange(r)})})})});ite.displayName=ste;var ate="TabsContent",ote=A.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,forceMount:i,children:a,...o}=t,l=Y$(ate,n),c=lte(l.baseId,r),d=cte(l.baseId,r),u=r===l.value,h=A.useRef(u);return A.useEffect(()=>{const f=requestAnimationFrame(()=>h.current=!1);return()=>cancelAnimationFrame(f)},[]),s.jsx(Sv,{present:i||u,children:({present:f})=>s.jsx(qn.div,{"data-state":u?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":c,hidden:!f,id:d,tabIndex:0,...o,ref:e,style:{...t.style,animationDuration:h.current?"0s":void 0},children:f&&a})})});ote.displayName=ate;function lte(t,e){return`${t}-trigger-${e}`}function cte(t,e){return`${t}-content-${e}`}var Qye=tte,dte=rte,ute=ite,hte=ote;const Vn=Qye,Mn=A.forwardRef(({className:t,...e},n)=>s.jsx(dte,{ref:n,className:st("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t),...e}));Mn.displayName=dte.displayName;const tt=A.forwardRef(({className:t,...e},n)=>s.jsx(ute,{ref:n,className:st("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",t),...e}));tt.displayName=ute.displayName;const rt=A.forwardRef(({className:t,...e},n)=>s.jsx(hte,{ref:n,className:st("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...e}));rt.displayName=hte.displayName;function Jye(t){const e=A.useRef({value:t,previous:t});return A.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}function ebe(t){const[e,n]=A.useState(void 0);return Sd(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const a=i[0];let o,l;if("borderBoxSize"in a){const c=a.borderBoxSize,d=Array.isArray(c)?c[0]:c;o=d.inlineSize,l=d.blockSize}else o=t.offsetWidth,l=t.offsetHeight;n({width:o,height:l})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}var f3="Checkbox",[tbe,RXe]=Tm(f3),[nbe,X$]=tbe(f3);function rbe(t){const{__scopeCheckbox:e,checked:n,children:r,defaultChecked:i,disabled:a,form:o,name:l,onCheckedChange:c,required:d,value:u="on",internal_do_not_use_render:h}=t,[f,m]=mA({prop:n,defaultProp:i??!1,onChange:c,caller:f3}),[v,p]=A.useState(null),[g,x]=A.useState(null),y=A.useRef(!1),b=v?!!o||!!v.closest("form"):!0,w={checked:f,disabled:a,setChecked:m,control:v,setControl:p,name:l,form:o,value:u,hasConsumerStoppedPropagationRef:y,required:d,defaultChecked:tm(i)?!1:i,isFormControl:b,bubbleInput:g,setBubbleInput:x};return s.jsx(nbe,{scope:e,...w,children:sbe(h)?h(w):r})}var fte="CheckboxTrigger",mte=A.forwardRef(({__scopeCheckbox:t,onKeyDown:e,onClick:n,...r},i)=>{const{control:a,value:o,disabled:l,checked:c,required:d,setControl:u,setChecked:h,hasConsumerStoppedPropagationRef:f,isFormControl:m,bubbleInput:v}=X$(fte,t),p=li(i,u),g=A.useRef(c);return A.useEffect(()=>{const x=a==null?void 0:a.form;if(x){const y=()=>h(g.current);return x.addEventListener("reset",y),()=>x.removeEventListener("reset",y)}},[a,h]),s.jsx(qn.button,{type:"button",role:"checkbox","aria-checked":tm(c)?"mixed":c,"aria-required":d,"data-state":yte(c),"data-disabled":l?"":void 0,disabled:l,value:o,...r,ref:p,onKeyDown:On(e,x=>{x.key==="Enter"&&x.preventDefault()}),onClick:On(n,x=>{h(y=>tm(y)?!0:!y),v&&m&&(f.current=x.isPropagationStopped(),f.current||x.stopPropagation())})})});mte.displayName=fte;var Z$=A.forwardRef((t,e)=>{const{__scopeCheckbox:n,name:r,checked:i,defaultChecked:a,required:o,disabled:l,value:c,onCheckedChange:d,form:u,...h}=t;return s.jsx(rbe,{__scopeCheckbox:n,checked:i,defaultChecked:a,disabled:l,required:o,onCheckedChange:d,name:r,form:u,value:c,internal_do_not_use_render:({isFormControl:f})=>s.jsxs(s.Fragment,{children:[s.jsx(mte,{...h,ref:e,__scopeCheckbox:n}),f&&s.jsx(xte,{__scopeCheckbox:n})]})})});Z$.displayName=f3;var pte="CheckboxIndicator",gte=A.forwardRef((t,e)=>{const{__scopeCheckbox:n,forceMount:r,...i}=t,a=X$(pte,n);return s.jsx(Sv,{present:r||tm(a.checked)||a.checked===!0,children:s.jsx(qn.span,{"data-state":yte(a.checked),"data-disabled":a.disabled?"":void 0,...i,ref:e,style:{pointerEvents:"none",...t.style}})})});gte.displayName=pte;var vte="CheckboxBubbleInput",xte=A.forwardRef(({__scopeCheckbox:t,...e},n)=>{const{control:r,hasConsumerStoppedPropagationRef:i,checked:a,defaultChecked:o,required:l,disabled:c,name:d,value:u,form:h,bubbleInput:f,setBubbleInput:m}=X$(vte,t),v=li(n,m),p=Jye(a),g=ebe(r);A.useEffect(()=>{const y=f;if(!y)return;const b=window.HTMLInputElement.prototype,N=Object.getOwnPropertyDescriptor(b,"checked").set,E=!i.current;if(p!==a&&N){const C=new Event("click",{bubbles:E});y.indeterminate=tm(a),N.call(y,tm(a)?!1:a),y.dispatchEvent(C)}},[f,p,a,i]);const x=A.useRef(tm(a)?!1:a);return s.jsx(qn.input,{type:"checkbox","aria-hidden":!0,defaultChecked:o??x.current,required:l,disabled:c,name:d,value:u,form:h,...e,tabIndex:-1,ref:v,style:{...e.style,...g,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});xte.displayName=vte;function sbe(t){return typeof t=="function"}function tm(t){return t==="indeterminate"}function yte(t){return tm(t)?"indeterminate":t?"checked":"unchecked"}const $t=A.forwardRef(({className:t,...e},n)=>s.jsx(Z$,{ref:n,className:st("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",t),...e,children:s.jsx(gte,{className:st("flex items-center justify-center text-current"),children:s.jsx(t3,{className:"h-4 w-4"})})}));$t.displayName=Z$.displayName;function ibe({settings:t,onChange:e}){const n=(o,l)=>{e({[o]:l})},r=[{value:"America/New_York",label:"Eastern Time (ET)"},{value:"America/Chicago",label:"Central Time (CT)"},{value:"America/Denver",label:"Mountain Time (MT)"},{value:"America/Los_Angeles",label:"Pacific Time (PT)"},{value:"America/Anchorage",label:"Alaska Time (AKT)"},{value:"Pacific/Honolulu",label:"Hawaii Time (HT)"},{value:"UTC",label:"Universal Time (UTC)"}],i=[{value:"user",label:"User"},{value:"sales",label:"Sales"},{value:"service",label:"Service"},{value:"manager",label:"Manager"},{value:"admin",label:"Admin"}],a=[{value:"minimal",label:"Minimal"},{value:"standard",label:"Standard"},{value:"verbose",label:"Verbose"}];return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold mb-4",children:"System Information"}),s.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"systemName",children:"System Name"}),s.jsx(Ae,{id:"systemName",value:t.systemName||"",onChange:o=>n("systemName",o.target.value),className:"max-w-md"})]}),s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"systemVersion",children:"System Version"}),s.jsx(Ae,{id:"systemVersion",value:t.systemVersion||"",onChange:o=>n("systemVersion",o.target.value),className:"max-w-md"})]}),s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"supportEmail",children:"Support Email"}),s.jsx(Ae,{id:"supportEmail",type:"email",value:t.supportEmail||"",onChange:o=>n("supportEmail",o.target.value),className:"max-w-md"})]}),s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"supportPhone",children:"Support Phone"}),s.jsx(Ae,{id:"supportPhone",value:t.supportPhone||"",onChange:o=>n("supportPhone",o.target.value),className:"max-w-md"})]}),s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"timezone",children:"Default Timezone"}),s.jsxs(Ke,{value:t.timezone||"America/New_York",onValueChange:o=>n("timezone",o),children:[s.jsx(He,{className:"max-w-md",children:s.jsx(Ye,{})}),s.jsx(We,{children:r.map(o=>s.jsx(le,{value:o.value,children:o.label},o.value))})]})]}),s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"defaultUserRole",children:"Default User Role"}),s.jsxs(Ke,{value:t.defaultUserRole||"user",onValueChange:o=>n("defaultUserRole",o),children:[s.jsx(He,{className:"max-w-md",children:s.jsx(Ye,{})}),s.jsx(We,{children:i.map(o=>s.jsx(le,{value:o.value,children:o.label},o.value))})]})]})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Maintenance Mode"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx($t,{id:"maintenanceMode",checked:t.maintenanceMode||!1,onCheckedChange:o=>n("maintenanceMode",!!o)}),s.jsx(ae,{htmlFor:"maintenanceMode",children:"Enable Maintenance Mode"})]}),t.maintenanceMode&&s.jsxs("div",{className:"bg-yellow-50 p-4 rounded-md flex items-start space-x-2",children:[s.jsx(Ba,{className:"h-5 w-5 text-yellow-600 mt-0.5"}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-yellow-800",children:"Warning"}),s.jsx("p",{className:"text-sm text-yellow-700 mt-1",children:"Enabling maintenance mode will prevent all users from accessing the system except for administrators."})]})]}),s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"maintenanceMessage",children:"Maintenance Message"}),s.jsx(un,{id:"maintenanceMessage",value:t.maintenanceMessage||"",onChange:o=>n("maintenanceMessage",o.target.value),placeholder:"Enter message to display during maintenance",className:"max-w-md"})]})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Audit Logging"}),s.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"auditLogRetentionDays",children:"Audit Log Retention (Days)"}),s.jsx(Ae,{id:"auditLogRetentionDays",type:"number",value:t.auditLogRetentionDays||0,onChange:o=>n("auditLogRetentionDays",parseInt(o.target.value)),className:"max-w-md"})]}),s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"auditLogLevel",children:"Audit Log Level"}),s.jsxs(Ke,{value:t.auditLogLevel||"standard",onValueChange:o=>n("auditLogLevel",o),children:[s.jsx(He,{className:"max-w-md",children:s.jsx(Ye,{})}),s.jsx(We,{children:a.map(o=>s.jsx(le,{value:o.value,children:o.label},o.value))})]})]})]})]})]})}function abe({settings:t,onChange:e}){const n=(a,o)=>{e({[a]:o})},r=[{value:"USD",label:"US Dollar (USD)"},{value:"EUR",label:"Euro (EUR)"},{value:"GBP",label:"British Pound (GBP)"},{value:"CAD",label:"Canadian Dollar (CAD)"},{value:"AUD",label:"Australian Dollar (AUD)"}],i=[{value:"none",label:"None"},{value:"stripe",label:"Stripe"},{value:"paypal",label:"PayPal"}];return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Currency Settings"}),s.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"currency",children:"Default Currency"}),s.jsxs(Ke,{value:t.currency||"USD",onValueChange:a=>n("currency",a),children:[s.jsx(He,{className:"max-w-md",children:s.jsx(Ye,{})}),s.jsx(We,{children:r.map(a=>s.jsx(le,{value:a.value,children:a.label},a.value))})]})]}),s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"currencySymbol",children:"Currency Symbol"}),s.jsx(Ae,{id:"currencySymbol",value:t.currencySymbol||"$",onChange:a=>n("currencySymbol",a.target.value),className:"max-w-md"})]}),s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"taxRate",children:"Default Tax Rate (%)"}),s.jsx(Ae,{id:"taxRate",type:"number",step:"0.01",value:t.taxRate*100||0,onChange:a=>n("taxRate",parseFloat(a.target.value)/100),className:"max-w-md"})]})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Payment Gateway Integration"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"paymentGateway",children:"Select Payment Gateway"}),s.jsxs(Ke,{value:t.paymentGateway||"none",onValueChange:a=>n("paymentGateway",a),children:[s.jsx(He,{className:"max-w-md",children:s.jsx(Ye,{})}),s.jsx(We,{children:i.map(a=>s.jsx(le,{value:a.value,children:a.label},a.value))})]})]}),t.paymentGateway==="stripe"&&s.jsxs("div",{className:"space-y-4 border p-4 rounded-md",children:[s.jsx("h4",{className:"font-medium",children:"Stripe Configuration"}),s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"stripePublishableKey",children:"Stripe Publishable Key"}),s.jsx(Ae,{id:"stripePublishableKey",value:t.stripePublishableKey||"",onChange:a=>n("stripePublishableKey",a.target.value),className:"max-w-md"})]}),s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"stripeSecretKey",children:"Stripe Secret Key"}),s.jsx(Ae,{id:"stripeSecretKey",type:"password",value:t.stripeSecretKey||"",onChange:a=>n("stripeSecretKey",a.target.value),className:"max-w-md"})]})]}),t.paymentGateway==="paypal"&&s.jsxs("div",{className:"space-y-4 border p-4 rounded-md",children:[s.jsx("h4",{className:"font-medium",children:"PayPal Configuration"}),s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"paypalClientId",children:"PayPal Client ID"}),s.jsx(Ae,{id:"paypalClientId",value:t.paypalClientId||"",onChange:a=>n("paypalClientId",a.target.value),className:"max-w-md"})]}),s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"paypalClientSecret",children:"PayPal Client Secret"}),s.jsx(Ae,{id:"paypalClientSecret",type:"password",value:t.paypalClientSecret||"",onChange:a=>n("paypalClientSecret",a.target.value),className:"max-w-md"})]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx($t,{id:"enableSubscriptions",checked:t.enableSubscriptions||!1,onCheckedChange:a=>n("enableSubscriptions",!!a)}),s.jsx(ae,{htmlFor:"enableSubscriptions",children:"Enable Subscription Payments"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx($t,{id:"enableInvoiceGeneration",checked:t.enableInvoiceGeneration||!1,onCheckedChange:a=>n("enableInvoiceGeneration",!!a)}),s.jsx(ae,{htmlFor:"enableInvoiceGeneration",children:"Enable Automatic Invoice Generation"})]})]})]})]})}function obe({settings:t,onChange:e}){const n=(i,a)=>{e({[i]:a})},r=[{value:"none",label:"None"},{value:"twilio",label:"Twilio"},{value:"messagebird",label:"MessageBird"},{value:"vonage",label:"Vonage (Nexmo)"}];return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold mb-4",children:"SMS Provider Configuration"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"smsProvider",children:"SMS Provider"}),s.jsxs(Ke,{value:t.smsProvider||"none",onValueChange:i=>n("smsProvider",i),children:[s.jsx(He,{className:"max-w-md",children:s.jsx(Ye,{})}),s.jsx(We,{children:r.map(i=>s.jsx(le,{value:i.value,children:i.label},i.value))})]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx($t,{id:"smsEnabled",checked:t.smsEnabled||!1,onCheckedChange:i=>n("smsEnabled",!!i)}),s.jsx(ae,{htmlFor:"smsEnabled",children:"Enable SMS Notifications"})]}),t.smsProvider==="twilio"&&s.jsxs("div",{className:"space-y-4 border p-4 rounded-md",children:[s.jsx("h4",{className:"font-medium",children:"Twilio Configuration"}),s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"twilioAccountSid",children:"Twilio Account SID"}),s.jsx(Ae,{id:"twilioAccountSid",value:t.twilioAccountSid||"",onChange:i=>n("twilioAccountSid",i.target.value),className:"max-w-md"})]}),s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"twilioAuthToken",children:"Twilio Auth Token"}),s.jsx(Ae,{id:"twilioAuthToken",type:"password",value:t.twilioAuthToken||"",onChange:i=>n("twilioAuthToken",i.target.value),className:"max-w-md"})]}),s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"twilioPhoneNumber",children:"Twilio Phone Number"}),s.jsx(Ae,{id:"twilioPhoneNumber",value:t.twilioPhoneNumber||"",onChange:i=>n("twilioPhoneNumber",i.target.value),placeholder:"+15551234567",className:"max-w-md"}),s.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Must be in E.164 format (e.g., +15551234567)"})]})]})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold mb-4",children:"SMS Templates"}),s.jsx("div",{className:"bg-muted/30 p-4 rounded-md",children:s.jsxs("div",{className:"flex items-start space-x-2",children:[s.jsx(ss,{className:"h-5 w-5 text-blue-600 mt-0.5"}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-blue-800",children:"SMS Templates"}),s.jsx("p",{className:"text-sm text-blue-700 mt-1",children:"SMS templates can be configured in the Company Settings area under Notification Templates."})]})]})})]})]})}function lbe({settings:t,onChange:e}){const n=(i,a)=>{e({[i]:a})},r=[{value:"none",label:"None"},{value:"smtp",label:"SMTP"},{value:"sendgrid",label:"SendGrid"},{value:"mailgun",label:"Mailgun"},{value:"ses",label:"Amazon SES"}];return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Email Provider Configuration"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"emailProvider",children:"Email Provider"}),s.jsxs(Ke,{value:t.emailProvider||"none",onValueChange:i=>n("emailProvider",i),children:[s.jsx(He,{className:"max-w-md",children:s.jsx(Ye,{})}),s.jsx(We,{children:r.map(i=>s.jsx(le,{value:i.value,children:i.label},i.value))})]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx($t,{id:"emailEnabled",checked:t.emailEnabled||!1,onCheckedChange:i=>n("emailEnabled",!!i)}),s.jsx(ae,{htmlFor:"emailEnabled",children:"Enable Email Notifications"})]}),t.emailProvider==="smtp"&&s.jsxs("div",{className:"space-y-4 border p-4 rounded-md",children:[s.jsx("h4",{className:"font-medium",children:"SMTP Configuration"}),s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"smtpHost",children:"SMTP Host"}),s.jsx(Ae,{id:"smtpHost",value:t.smtpHost||"",onChange:i=>n("smtpHost",i.target.value),className:"max-w-md"})]}),s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"smtpPort",children:"SMTP Port"}),s.jsx(Ae,{id:"smtpPort",type:"number",value:t.smtpPort||587,onChange:i=>n("smtpPort",parseInt(i.target.value)),className:"max-w-md"})]}),s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"smtpUsername",children:"SMTP Username"}),s.jsx(Ae,{id:"smtpUsername",value:t.smtpUsername||"",onChange:i=>n("smtpUsername",i.target.value),className:"max-w-md"})]}),s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"smtpPassword",children:"SMTP Password"}),s.jsx(Ae,{id:"smtpPassword",type:"password",value:t.smtpPassword||"",onChange:i=>n("smtpPassword",i.target.value),className:"max-w-md"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx($t,{id:"smtpSecure",checked:t.smtpSecure||!1,onCheckedChange:i=>n("smtpSecure",!!i)}),s.jsx(ae,{htmlFor:"smtpSecure",children:"Use SSL/TLS (Secure Connection)"})]})]}),s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"emailFromAddress",children:"From Email Address"}),s.jsx(Ae,{id:"emailFromAddress",type:"email",value:t.emailFromAddress||"",onChange:i=>n("emailFromAddress",i.target.value),placeholder:"noreply@example.com",className:"max-w-md"})]}),s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"emailFromName",children:"From Name"}),s.jsx(Ae,{id:"emailFromName",value:t.emailFromName||"",onChange:i=>n("emailFromName",i.target.value),placeholder:"Your Company Name",className:"max-w-md"})]})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Email Templates"}),s.jsx("div",{className:"bg-muted/30 p-4 rounded-md",children:s.jsxs("div",{className:"flex items-start space-x-2",children:[s.jsx(Ti,{className:"h-5 w-5 text-blue-600 mt-0.5"}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-blue-800",children:"Email Templates"}),s.jsx("p",{className:"text-sm text-blue-700 mt-1",children:"Email templates can be configured in the Company Settings area under Notification Templates."})]})]})})]})]})}function cbe({settings:t,onChange:e}){const n=(i,a)=>{e({[i]:a})},r=[{value:"none",label:"None"},{value:"twilio",label:"Twilio"}];return s.jsx("div",{className:"space-y-6",children:s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Voice Provider Configuration"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"voiceProvider",children:"Voice Provider"}),s.jsxs(Ke,{value:t.voiceProvider||"none",onValueChange:i=>n("voiceProvider",i),children:[s.jsx(He,{className:"max-w-md",children:s.jsx(Ye,{})}),s.jsx(We,{children:r.map(i=>s.jsx(le,{value:i.value,children:i.label},i.value))})]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx($t,{id:"voiceEnabled",checked:t.voiceEnabled||!1,onCheckedChange:i=>n("voiceEnabled",!!i)}),s.jsx(ae,{htmlFor:"voiceEnabled",children:"Enable Voice Features"})]}),t.voiceProvider==="twilio"&&s.jsxs("div",{className:"space-y-4 border p-4 rounded-md",children:[s.jsx("h4",{className:"font-medium",children:"Twilio Voice Configuration"}),s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"twilioVoiceSid",children:"Twilio Account SID"}),s.jsx(Ae,{id:"twilioVoiceSid",value:t.twilioVoiceSid||"",onChange:i=>n("twilioVoiceSid",i.target.value),className:"max-w-md"})]}),s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"twilioVoiceAuthToken",children:"Twilio Auth Token"}),s.jsx(Ae,{id:"twilioVoiceAuthToken",type:"password",value:t.twilioVoiceAuthToken||"",onChange:i=>n("twilioVoiceAuthToken",i.target.value),className:"max-w-md"})]}),s.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"This is typically the same Account SID and Auth Token used for SMS, but can be different if needed."})]})]})]})})}const w_={appName:"Renter Insight",appLogo:"/logo.svg",contactEmail:"support@renterinsight.com",contactPhone:"+1 (555) 123-4567",address:"123 Main St, Anytown, USA",website:"https://www.renterinsight.com",timezone:"America/Los_Angeles",dateFormat:"MM/DD/YYYY",timeFormat:"hh:mm A",currency:"USD",currencySymbol:"$",language:"en",maintenanceMode:!1,welcomeMessage:"Welcome to Renter Insight!",paymentGateway:"stripe",stripePublishableKey:"",stripeSecretKey:"",paypalClientId:"",paypalClientSecret:"",enableSubscriptions:!0,taxRate:.05,enableInvoiceGeneration:!0,smsProvider:"twilio",twilioAccountSid:"",twilioAuthToken:"",twilioPhoneNumber:"",smsEnabled:!0,smsTemplates:[],emailProvider:"smtp",smtpHost:"",smtpPort:587,smtpUsername:"",smtpPassword:"",smtpSecure:!1,emailFromAddress:"noreply@example.com",emailFromName:"Renter Insight",emailEnabled:!0,emailTemplates:[],voiceProvider:"twilio",twilioVoiceSid:"",twilioVoiceAuthToken:"",voiceEnabled:!1,passwordMinLength:8,passwordRequiresUppercase:!0,passwordRequiresLowercase:!0,passwordRequiresNumber:!0,passwordRequiresSymbol:!0,twoFactorAuthEnabled:!1,sessionTimeout:3600,failedLoginAttemptsLockout:5,lockoutDuration:300,googleMapsApiKey:"",slackWebhookUrl:"",googleAnalyticsTrackingId:"",mixpanelProjectId:"",primaryColor:"#4F46E5",secondaryColor:"#10B981",fontFamily:"Inter, sans-serif",termsOfServiceUrl:"/terms",privacyPolicyUrl:"/privacy",supportPageUrl:"/support"};function dbe(){const[t,e]=A.useState(w_),[n,r]=A.useState(!0),[i,a]=A.useState(null);A.useEffect(()=>{try{const c=localStorage.getItem("platformSettings");c&&e({...w_,...JSON.parse(c)})}catch(c){console.error("Failed to load settings from local storage",c),a("Failed to load settings.")}finally{r(!1)}},[]);const o=A.useCallback(c=>{e(d=>{const u={...d,...c};try{localStorage.setItem("platformSettings",JSON.stringify(u))}catch(h){console.error("Failed to save settings to local storage",h),a("Failed to save settings.")}return u})},[]),l=A.useCallback(()=>{e(w_);try{localStorage.removeItem("platformSettings")}catch(c){console.error("Failed to clear settings from local storage",c),a("Failed to reset settings.")}},[]);return{settings:t,updateSettings:o,resetSettings:l,loading:n,error:i}}function ube(){const{settings:t,updateSettings:e,resetSettings:n,loading:r,error:i}=dbe(),{toast:a}=Ot(),[o,l]=A.useState("general"),c=h=>{e(h)},d=()=>{console.log("Saving settings:",t),a({title:"Settings Saved",description:"Your platform settings have been updated."})},u=()=>{n(),a({title:"Settings Reset",description:"All settings have been reset to their default values."})};return r?s.jsx("div",{children:"Loading settings..."}):i?s.jsxs("div",{className:"text-red-500",children:["Error: ",i]}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold",children:"Platform Settings"}),s.jsx("p",{className:"text-muted-foreground",children:"Manage global platform configurations."})]}),s.jsxs("div",{className:"space-x-2",children:[s.jsx(Q,{variant:"outline",onClick:u,children:"Reset to Defaults"}),s.jsx(Q,{onClick:d,children:"Save Changes"})]})]}),s.jsxs(he,{children:[s.jsx(ye,{children:s.jsx(be,{children:"Configuration"})}),s.jsx(fe,{children:s.jsxs(Vn,{value:o,onValueChange:l,className:"w-full",children:[s.jsxs(Mn,{className:"grid w-full grid-cols-5",children:[" ",s.jsx(tt,{value:"general",children:"General"}),s.jsx(tt,{value:"payment",children:"Payment"}),s.jsx(tt,{value:"sms",children:"SMS"}),s.jsx(tt,{value:"email",children:"Email"}),s.jsx(tt,{value:"voice",children:"Voice"})]}),s.jsx(rt,{value:"general",children:s.jsx(ibe,{settings:t,onChange:c})}),s.jsx(rt,{value:"payment",children:s.jsx(abe,{settings:t,onChange:c})}),s.jsx(rt,{value:"sms",children:s.jsx(obe,{settings:t,onChange:c})}),s.jsx(rt,{value:"email",children:s.jsx(lbe,{settings:t,onChange:c})}),s.jsx(rt,{value:"voice",children:s.jsx(cbe,{settings:t,onChange:c})})]})})]})]})}const bte=A.createContext(void 0);function Tv(){const t=A.useContext(bte);if(t===void 0)throw new Error("usePortal must be used within a PortalProvider");return t}function hbe({children:t,impersonatedUser:e,fallbackUser:n}){const r=e?{id:e.id,name:e.name,email:e.email}:null,i=!!r;A.useEffect(()=>{console.log("PortalProvider rendered/re-rendered."),console.log("Received impersonatedUser prop:",e),console.log("Calculated proxiedClient:",r),console.log("Is proxying:",i)},[e,r,i]);const c={proxiedClient:r,isProxying:i,getDisplayName:()=>r?r.name:(n==null?void 0:n.name)||"User",getDisplayEmail:()=>r?r.email:(n==null?void 0:n.email)||"",getCustomerId:()=>r?r.id:"portal-customer-001"};return s.jsx(bte.Provider,{value:c,children:t})}let wte=class extends A.Component{constructor(n){super(n);ut(this,"handleReload",()=>{this.setState({hasError:!1,error:void 0,errorInfo:void 0}),window.location.reload()});ut(this,"handleReset",()=>{this.setState({hasError:!1,error:void 0,errorInfo:void 0})});this.state={hasError:!1}}static getDerivedStateFromError(n){return{hasError:!0,error:n}}componentDidCatch(n,r){console.error("ErrorBoundary caught an error:",n,r),this.setState({error:n,errorInfo:r})}render(){return this.state.hasError?this.props.fallback?this.props.fallback:s.jsx("div",{className:"min-h-screen flex items-center justify-center p-4",children:s.jsxs(he,{className:"w-full max-w-md",children:[s.jsxs(ye,{className:"text-center",children:[s.jsx("div",{className:"mx-auto w-12 h-12 bg-red-100 rounded-full flex items-center justify-center mb-4",children:s.jsx(Ba,{className:"h-6 w-6 text-red-600"})}),s.jsx(be,{className:"text-xl text-red-900",children:"Something went wrong"}),s.jsx(Be,{children:"An unexpected error occurred while rendering this component."})]}),s.jsxs(fe,{className:"space-y-4",children:[this.state.error&&s.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-md p-3",children:[s.jsx("p",{className:"text-sm text-red-800 font-medium",children:"Error:"}),s.jsx("p",{className:"text-sm text-red-700 mt-1",children:this.state.error.message})]}),s.jsxs("div",{className:"flex space-x-3",children:[s.jsx(Q,{onClick:this.handleReset,variant:"outline",className:"flex-1",children:"Try Again"}),s.jsxs(Q,{onClick:this.handleReload,className:"flex-1",children:[s.jsx(CJ,{className:"h-4 w-4 mr-2"}),"Reload Page"]})]}),s.jsx("div",{className:"text-center",children:s.jsx("p",{className:"text-xs text-muted-foreground",children:"If this problem persists, please contact support."})})]})]})}):this.props.children}};const Q$={sampleUsers:[{id:"user-1",name:"John Smith",email:"john.smith@example.com",phone:"(555) 123-4567",role:"customer",status:"Active",createdAt:"2024-01-10T09:30:00Z",updatedAt:"2024-01-15T14:30:00Z"},{id:"user-2",name:"Sarah Johnson",email:"sarah@example.com",phone:"(555) 987-6543",role:"customer",status:"Active",createdAt:"2024-01-12T11:15:00Z",updatedAt:"2024-01-18T16:45:00Z"},{id:"user-3",name:"Michael Davis",email:"michael.d@example.com",phone:"(555) 456-7890",role:"customer",status:"Inactive",createdAt:"2024-01-08T13:20:00Z",updatedAt:"2024-01-22T10:30:00Z"}]};var fbe=$b[" useId ".trim().toString()]||(()=>{}),mbe=0;function j_(t){const[e,n]=A.useState(fbe());return Sd(()=>{t||n(r=>r??String(mbe++))},[t]),t||(e?`radix-${e}`:"")}function Kj(t){const e=A.useRef(t);return A.useEffect(()=>{e.current=t}),A.useMemo(()=>(...n)=>{var r;return(r=e.current)==null?void 0:r.call(e,...n)},[])}function pbe(t,e=globalThis==null?void 0:globalThis.document){const n=Kj(t);A.useEffect(()=>{const r=i=>{i.key==="Escape"&&n(i)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[n,e])}var gbe="DismissableLayer",fM="dismissableLayer.update",vbe="dismissableLayer.pointerDownOutside",xbe="dismissableLayer.focusOutside",tU,jte=A.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Nte=A.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:i,onFocusOutside:a,onInteractOutside:o,onDismiss:l,...c}=t,d=A.useContext(jte),[u,h]=A.useState(null),f=(u==null?void 0:u.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,m]=A.useState({}),v=li(e,C=>h(C)),p=Array.from(d.layers),[g]=[...d.layersWithOutsidePointerEventsDisabled].slice(-1),x=p.indexOf(g),y=u?p.indexOf(u):-1,b=d.layersWithOutsidePointerEventsDisabled.size>0,w=y>=x,N=wbe(C=>{const j=C.target,I=[...d.branches].some(k=>k.contains(j));!w||I||(i==null||i(C),o==null||o(C),C.defaultPrevented||l==null||l())},f),E=jbe(C=>{const j=C.target;[...d.branches].some(k=>k.contains(j))||(a==null||a(C),o==null||o(C),C.defaultPrevented||l==null||l())},f);return pbe(C=>{y===d.layers.size-1&&(r==null||r(C),!C.defaultPrevented&&l&&(C.preventDefault(),l()))},f),A.useEffect(()=>{if(u)return n&&(d.layersWithOutsidePointerEventsDisabled.size===0&&(tU=f.body.style.pointerEvents,f.body.style.pointerEvents="none"),d.layersWithOutsidePointerEventsDisabled.add(u)),d.layers.add(u),nU(),()=>{n&&d.layersWithOutsidePointerEventsDisabled.size===1&&(f.body.style.pointerEvents=tU)}},[u,f,n,d]),A.useEffect(()=>()=>{u&&(d.layers.delete(u),d.layersWithOutsidePointerEventsDisabled.delete(u),nU())},[u,d]),A.useEffect(()=>{const C=()=>m({});return document.addEventListener(fM,C),()=>document.removeEventListener(fM,C)},[]),s.jsx(qn.div,{...c,ref:v,style:{pointerEvents:b?w?"auto":"none":void 0,...t.style},onFocusCapture:On(t.onFocusCapture,E.onFocusCapture),onBlurCapture:On(t.onBlurCapture,E.onBlurCapture),onPointerDownCapture:On(t.onPointerDownCapture,N.onPointerDownCapture)})});Nte.displayName=gbe;var ybe="DismissableLayerBranch",bbe=A.forwardRef((t,e)=>{const n=A.useContext(jte),r=A.useRef(null),i=li(e,r);return A.useEffect(()=>{const a=r.current;if(a)return n.branches.add(a),()=>{n.branches.delete(a)}},[n.branches]),s.jsx(qn.div,{...t,ref:i})});bbe.displayName=ybe;function wbe(t,e=globalThis==null?void 0:globalThis.document){const n=Kj(t),r=A.useRef(!1),i=A.useRef(()=>{});return A.useEffect(()=>{const a=l=>{if(l.target&&!r.current){let c=function(){Ste(vbe,n,d,{discrete:!0})};const d={originalEvent:l};l.pointerType==="touch"?(e.removeEventListener("click",i.current),i.current=c,e.addEventListener("click",i.current,{once:!0})):c()}else e.removeEventListener("click",i.current);r.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",a)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",a),e.removeEventListener("click",i.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function jbe(t,e=globalThis==null?void 0:globalThis.document){const n=Kj(t),r=A.useRef(!1);return A.useEffect(()=>{const i=a=>{a.target&&!r.current&&Ste(xbe,n,{originalEvent:a},{discrete:!1})};return e.addEventListener("focusin",i),()=>e.removeEventListener("focusin",i)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function nU(){const t=new CustomEvent(fM);document.dispatchEvent(t)}function Ste(t,e,n,{discrete:r}){const i=n.originalEvent.target,a=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&i.addEventListener(t,e,{once:!0}),r?A$(i,a):i.dispatchEvent(a)}var N_="focusScope.autoFocusOnMount",S_="focusScope.autoFocusOnUnmount",rU={bubbles:!1,cancelable:!0},Nbe="FocusScope",Ate=A.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:i,onUnmountAutoFocus:a,...o}=t,[l,c]=A.useState(null),d=Kj(i),u=Kj(a),h=A.useRef(null),f=li(e,p=>c(p)),m=A.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;A.useEffect(()=>{if(r){let p=function(b){if(m.paused||!l)return;const w=b.target;l.contains(w)?h.current=w:Rh(h.current,{select:!0})},g=function(b){if(m.paused||!l)return;const w=b.relatedTarget;w!==null&&(l.contains(w)||Rh(h.current,{select:!0}))},x=function(b){if(document.activeElement===document.body)for(const N of b)N.removedNodes.length>0&&Rh(l)};document.addEventListener("focusin",p),document.addEventListener("focusout",g);const y=new MutationObserver(x);return l&&y.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",p),document.removeEventListener("focusout",g),y.disconnect()}}},[r,l,m.paused]),A.useEffect(()=>{if(l){iU.add(m);const p=document.activeElement;if(!l.contains(p)){const x=new CustomEvent(N_,rU);l.addEventListener(N_,d),l.dispatchEvent(x),x.defaultPrevented||(Sbe(Tbe(Cte(l)),{select:!0}),document.activeElement===p&&Rh(l))}return()=>{l.removeEventListener(N_,d),setTimeout(()=>{const x=new CustomEvent(S_,rU);l.addEventListener(S_,u),l.dispatchEvent(x),x.defaultPrevented||Rh(p??document.body,{select:!0}),l.removeEventListener(S_,u),iU.remove(m)},0)}}},[l,d,u,m]);const v=A.useCallback(p=>{if(!n&&!r||m.paused)return;const g=p.key==="Tab"&&!p.altKey&&!p.ctrlKey&&!p.metaKey,x=document.activeElement;if(g&&x){const y=p.currentTarget,[b,w]=Abe(y);b&&w?!p.shiftKey&&x===w?(p.preventDefault(),n&&Rh(b,{select:!0})):p.shiftKey&&x===b&&(p.preventDefault(),n&&Rh(w,{select:!0})):x===y&&p.preventDefault()}},[n,r,m.paused]);return s.jsx(qn.div,{tabIndex:-1,...o,ref:f,onKeyDown:v})});Ate.displayName=Nbe;function Sbe(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(Rh(r,{select:e}),document.activeElement!==n)return}function Abe(t){const e=Cte(t),n=sU(e,t),r=sU(e.reverse(),t);return[n,r]}function Cte(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function sU(t,e){for(const n of t)if(!Cbe(n,{upTo:e}))return n}function Cbe(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function Ebe(t){return t instanceof HTMLInputElement&&"select"in t}function Rh(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&Ebe(t)&&e&&t.select()}}var iU=Pbe();function Pbe(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=aU(t,e),t.unshift(e)},remove(e){var n;t=aU(t,e),(n=t[0])==null||n.resume()}}}function aU(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function Tbe(t){return t.filter(e=>e.tagName!=="A")}var Ibe="Portal",Ete=A.forwardRef((t,e)=>{var l;const{container:n,...r}=t,[i,a]=A.useState(!1);Sd(()=>a(!0),[]);const o=n||i&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return o?qI.createPortal(s.jsx(qn.div,{...r,ref:e}),o):null});Ete.displayName=Ibe;var A_=0;function Dbe(){A.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??oU()),document.body.insertAdjacentElement("beforeend",t[1]??oU()),A_++,()=>{A_===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),A_--}},[])}function oU(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var Pte=jee(),C_=function(){},m3=A.forwardRef(function(t,e){var n=A.useRef(null),r=A.useState({onScrollCapture:C_,onWheelCapture:C_,onTouchMoveCapture:C_}),i=r[0],a=r[1],o=t.forwardProps,l=t.children,c=t.className,d=t.removeScrollBar,u=t.enabled,h=t.shards,f=t.sideCar,m=t.noRelative,v=t.noIsolation,p=t.inert,g=t.allowPinchZoom,x=t.as,y=x===void 0?"div":x,b=t.gapMode,w=H$(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),N=f,E=wee([n,e]),C=Xi(Xi({},w),i);return A.createElement(A.Fragment,null,u&&A.createElement(N,{sideCar:Pte,removeScrollBar:d,shards:h,noRelative:m,noIsolation:v,inert:p,setCallbacks:a,allowPinchZoom:!!g,lockRef:n,gapMode:b}),o?A.cloneElement(A.Children.only(l),Xi(Xi({},C),{ref:E})):A.createElement(y,Xi({},C,{className:c,ref:E}),l))});m3.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};m3.classNames={fullWidth:nj,zeroRight:tj};var mM=!1;if(typeof window<"u")try{var dC=Object.defineProperty({},"passive",{get:function(){return mM=!0,!0}});window.addEventListener("test",dC,dC),window.removeEventListener("test",dC,dC)}catch{mM=!1}var gx=mM?{passive:!1}:!1,kbe=function(t){return t.tagName==="TEXTAREA"},Tte=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!kbe(t)&&n[e]==="visible")},_be=function(t){return Tte(t,"overflowY")},Obe=function(t){return Tte(t,"overflowX")},lU=function(t,e){var n=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var i=Ite(t,r);if(i){var a=Dte(t,r),o=a[1],l=a[2];if(o>l)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},Lbe=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},Rbe=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},Ite=function(t,e){return t==="v"?_be(e):Obe(e)},Dte=function(t,e){return t==="v"?Lbe(e):Rbe(e)},Mbe=function(t,e){return t==="h"&&e==="rtl"?-1:1},Fbe=function(t,e,n,r,i){var a=Mbe(t,window.getComputedStyle(e).direction),o=a*r,l=n.target,c=e.contains(l),d=!1,u=o>0,h=0,f=0;do{if(!l)break;var m=Dte(t,l),v=m[0],p=m[1],g=m[2],x=p-g-a*v;(v||x)&&Ite(t,l)&&(h+=x,f+=v);var y=l.parentNode;l=y&&y.nodeType===Node.DOCUMENT_FRAGMENT_NODE?y.host:y}while(!c&&l!==document.body||c&&(e.contains(l)||e===l));return(u&&(i&&Math.abs(h)<1||!i&&o>h)||!u&&(i&&Math.abs(f)<1||!i&&-o>f))&&(d=!0),d},uC=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},cU=function(t){return[t.deltaX,t.deltaY]},dU=function(t){return t&&"current"in t?t.current:t},$be=function(t,e){return t[0]===e[0]&&t[1]===e[1]},Bbe=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},zbe=0,vx=[];function Ube(t){var e=A.useRef([]),n=A.useRef([0,0]),r=A.useRef(),i=A.useState(zbe++)[0],a=A.useState(W$)[0],o=A.useRef(t);A.useEffect(function(){o.current=t},[t]),A.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(i));var p=bee([t.lockRef.current],(t.shards||[]).map(dU),!0).filter(Boolean);return p.forEach(function(g){return g.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),p.forEach(function(g){return g.classList.remove("allow-interactivity-".concat(i))})}}},[t.inert,t.lockRef.current,t.shards]);var l=A.useCallback(function(p,g){if("touches"in p&&p.touches.length===2||p.type==="wheel"&&p.ctrlKey)return!o.current.allowPinchZoom;var x=uC(p),y=n.current,b="deltaX"in p?p.deltaX:y[0]-x[0],w="deltaY"in p?p.deltaY:y[1]-x[1],N,E=p.target,C=Math.abs(b)>Math.abs(w)?"h":"v";if("touches"in p&&C==="h"&&E.type==="range")return!1;var j=lU(C,E);if(!j)return!0;if(j?N=C:(N=C==="v"?"h":"v",j=lU(C,E)),!j)return!1;if(!r.current&&"changedTouches"in p&&(b||w)&&(r.current=N),!N)return!0;var I=r.current||N;return Fbe(I,g,p,I==="h"?b:w,!0)},[]),c=A.useCallback(function(p){var g=p;if(!(!vx.length||vx[vx.length-1]!==a)){var x="deltaY"in g?cU(g):uC(g),y=e.current.filter(function(N){return N.name===g.type&&(N.target===g.target||g.target===N.shadowParent)&&$be(N.delta,x)})[0];if(y&&y.should){g.cancelable&&g.preventDefault();return}if(!y){var b=(o.current.shards||[]).map(dU).filter(Boolean).filter(function(N){return N.contains(g.target)}),w=b.length>0?l(g,b[0]):!o.current.noIsolation;w&&g.cancelable&&g.preventDefault()}}},[]),d=A.useCallback(function(p,g,x,y){var b={name:p,delta:g,target:x,should:y,shadowParent:Vbe(x)};e.current.push(b),setTimeout(function(){e.current=e.current.filter(function(w){return w!==b})},1)},[]),u=A.useCallback(function(p){n.current=uC(p),r.current=void 0},[]),h=A.useCallback(function(p){d(p.type,cU(p),p.target,l(p,t.lockRef.current))},[]),f=A.useCallback(function(p){d(p.type,uC(p),p.target,l(p,t.lockRef.current))},[]);A.useEffect(function(){return vx.push(a),t.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:f}),document.addEventListener("wheel",c,gx),document.addEventListener("touchmove",c,gx),document.addEventListener("touchstart",u,gx),function(){vx=vx.filter(function(p){return p!==a}),document.removeEventListener("wheel",c,gx),document.removeEventListener("touchmove",c,gx),document.removeEventListener("touchstart",u,gx)}},[]);var m=t.removeScrollBar,v=t.inert;return A.createElement(A.Fragment,null,v?A.createElement(a,{styles:Bbe(i)}):null,m?A.createElement(Cee,{noRelative:t.noRelative,gapMode:t.gapMode}):null)}function Vbe(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const qbe=See(Pte,Ube);var kte=A.forwardRef(function(t,e){return A.createElement(m3,Xi({},t,{ref:e,sideCar:qbe}))});kte.classNames=m3.classNames;const Hbe=kte;var p3="Dialog",[_te,FXe]=Tm(p3),[Wbe,jc]=_te(p3),Ote=t=>{const{__scopeDialog:e,children:n,open:r,defaultOpen:i,onOpenChange:a,modal:o=!0}=t,l=A.useRef(null),c=A.useRef(null),[d,u]=mA({prop:r,defaultProp:i??!1,onChange:a,caller:p3});return s.jsx(Wbe,{scope:e,triggerRef:l,contentRef:c,contentId:j_(),titleId:j_(),descriptionId:j_(),open:d,onOpenChange:u,onOpenToggle:A.useCallback(()=>u(h=>!h),[u]),modal:o,children:n})};Ote.displayName=p3;var Lte="DialogTrigger",Rte=A.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=jc(Lte,n),a=li(e,i.triggerRef);return s.jsx(qn.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":t8(i.open),...r,ref:a,onClick:On(t.onClick,i.onOpenToggle)})});Rte.displayName=Lte;var J$="DialogPortal",[Gbe,Mte]=_te(J$,{forceMount:void 0}),Fte=t=>{const{__scopeDialog:e,forceMount:n,children:r,container:i}=t,a=jc(J$,e);return s.jsx(Gbe,{scope:e,forceMount:n,children:A.Children.map(r,o=>s.jsx(Sv,{present:n||a.open,children:s.jsx(Ete,{asChild:!0,container:i,children:o})}))})};Fte.displayName=J$;var bP="DialogOverlay",$te=A.forwardRef((t,e)=>{const n=Mte(bP,t.__scopeDialog),{forceMount:r=n.forceMount,...i}=t,a=jc(bP,t.__scopeDialog);return a.modal?s.jsx(Sv,{present:r||a.open,children:s.jsx(Ybe,{...i,ref:e})}):null});$te.displayName=bP;var Kbe=lv("DialogOverlay.RemoveScroll"),Ybe=A.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=jc(bP,n);return s.jsx(Hbe,{as:Kbe,allowPinchZoom:!0,shards:[i.contentRef],children:s.jsx(qn.div,{"data-state":t8(i.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),hv="DialogContent",Bte=A.forwardRef((t,e)=>{const n=Mte(hv,t.__scopeDialog),{forceMount:r=n.forceMount,...i}=t,a=jc(hv,t.__scopeDialog);return s.jsx(Sv,{present:r||a.open,children:a.modal?s.jsx(Xbe,{...i,ref:e}):s.jsx(Zbe,{...i,ref:e})})});Bte.displayName=hv;var Xbe=A.forwardRef((t,e)=>{const n=jc(hv,t.__scopeDialog),r=A.useRef(null),i=li(e,n.contentRef,r);return A.useEffect(()=>{const a=r.current;if(a)return yee(a)},[]),s.jsx(zte,{...t,ref:i,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:On(t.onCloseAutoFocus,a=>{var o;a.preventDefault(),(o=n.triggerRef.current)==null||o.focus()}),onPointerDownOutside:On(t.onPointerDownOutside,a=>{const o=a.detail.originalEvent,l=o.button===0&&o.ctrlKey===!0;(o.button===2||l)&&a.preventDefault()}),onFocusOutside:On(t.onFocusOutside,a=>a.preventDefault())})}),Zbe=A.forwardRef((t,e)=>{const n=jc(hv,t.__scopeDialog),r=A.useRef(!1),i=A.useRef(!1);return s.jsx(zte,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:a=>{var o,l;(o=t.onCloseAutoFocus)==null||o.call(t,a),a.defaultPrevented||(r.current||(l=n.triggerRef.current)==null||l.focus(),a.preventDefault()),r.current=!1,i.current=!1},onInteractOutside:a=>{var c,d;(c=t.onInteractOutside)==null||c.call(t,a),a.defaultPrevented||(r.current=!0,a.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const o=a.target;((d=n.triggerRef.current)==null?void 0:d.contains(o))&&a.preventDefault(),a.detail.originalEvent.type==="focusin"&&i.current&&a.preventDefault()}})}),zte=A.forwardRef((t,e)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:i,onCloseAutoFocus:a,...o}=t,l=jc(hv,n),c=A.useRef(null),d=li(e,c);return Dbe(),s.jsxs(s.Fragment,{children:[s.jsx(Ate,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:i,onUnmountAutoFocus:a,children:s.jsx(Nte,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":t8(l.open),...o,ref:d,onDismiss:()=>l.onOpenChange(!1)})}),s.jsxs(s.Fragment,{children:[s.jsx(Qbe,{titleId:l.titleId}),s.jsx(e1e,{contentRef:c,descriptionId:l.descriptionId})]})]})}),e8="DialogTitle",Ute=A.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=jc(e8,n);return s.jsx(qn.h2,{id:i.titleId,...r,ref:e})});Ute.displayName=e8;var Vte="DialogDescription",qte=A.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=jc(Vte,n);return s.jsx(qn.p,{id:i.descriptionId,...r,ref:e})});qte.displayName=Vte;var Hte="DialogClose",Wte=A.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=jc(Hte,n);return s.jsx(qn.button,{type:"button",...r,ref:e,onClick:On(t.onClick,()=>i.onOpenChange(!1))})});Wte.displayName=Hte;function t8(t){return t?"open":"closed"}var Gte="DialogTitleWarning",[$Xe,Kte]=ame(Gte,{contentName:hv,titleName:e8,docsSlug:"dialog"}),Qbe=({titleId:t})=>{const e=Kte(Gte),n=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return A.useEffect(()=>{t&&(document.getElementById(t)||console.error(n))},[n,t]),null},Jbe="DialogDescriptionWarning",e1e=({contentRef:t,descriptionId:e})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${Kte(Jbe).contentName}}.`;return A.useEffect(()=>{var a;const i=(a=t.current)==null?void 0:a.getAttribute("aria-describedby");e&&i&&(document.getElementById(e)||console.warn(r))},[r,t,e]),null},t1e=Ote,n1e=Rte,r1e=Fte,Yte=$te,Xte=Bte,Zte=Ute,Qte=qte,s1e=Wte;const uU=t1e,i1e=n1e,a1e=r1e,o1e=gA("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),Jte=A.forwardRef(({side:t="right",className:e,children:n,...r},i)=>s.jsxs(a1e,{children:[s.jsx(ene,{}),s.jsxs(Xte,{ref:i,className:st(o1e({side:t}),e),...r,children:[n,s.jsxs(s1e,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[s.jsx(on,{className:"h-4 w-4"}),s.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Jte.displayName=Xte.displayName;const ene=A.forwardRef(({className:t,...e},n)=>s.jsx(Yte,{className:st("fixed inset-0 z-50 bg-background/80 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e,ref:n}));ene.displayName=Yte.displayName;const l1e=A.forwardRef(({className:t,...e},n)=>s.jsx(Zte,{ref:n,className:st("text-lg font-semibold text-foreground",t),...e}));l1e.displayName=Zte.displayName;const c1e=A.forwardRef(({className:t,...e},n)=>s.jsx(Qte,{ref:n,className:st("text-sm text-muted-foreground",t),...e}));c1e.displayName=Qte.displayName;const Oa={termOptions:[12,24,36,48,60,72],interestRates:[5,6.5,7.25,8,9.99],paymentFrequencies:["Monthly","Bi-Weekly","Weekly"],statusOptions:["Current","Late","Default","Paid Off"],defaultLoan:{amount:25e3,rate:7.25,termMonths:60,downPayment:3e3,startDate:"2023-01-01"},sampleLoans:[{id:"loan-001",customerId:"cust-001",customerName:"John Smith",customerEmail:"john.smith@email.com",customerPhone:"(555) 123-4567",vehicleId:"vh-001",vehicleInfo:"2020 Forest River Cherokee 274RK",loanAmount:45e3,downPayment:5e3,interestRate:7.25,termMonths:60,monthlyPayment:895.5,startDate:"2023-06-15T00:00:00Z",status:"Current",remainingBalance:38750,nextPaymentDate:"2024-02-15T00:00:00Z",totalPaid:11250,paymentsRemaining:43,createdAt:"2023-06-10T14:30:00Z",updatedAt:"2024-01-15T09:20:00Z"},{id:"loan-002",customerId:"cust-002",customerName:"Maria Rodriguez",customerEmail:"maria.rodriguez@email.com",customerPhone:"(555) 987-6543",vehicleId:"vh-002",vehicleInfo:"2019 Keystone Montana 3761FL",loanAmount:62e3,downPayment:8e3,interestRate:6.5,termMonths:72,monthlyPayment:1025.75,startDate:"2023-03-01T00:00:00Z",status:"Current",remainingBalance:51200,nextPaymentDate:"2024-02-01T00:00:00Z",totalPaid:18900,paymentsRemaining:61,createdAt:"2023-02-25T11:15:00Z",updatedAt:"2024-01-01T16:45:00Z"}],samplePayments:[{id:"pmt-001",loanId:"loan-001",paymentDate:"2024-01-15T00:00:00Z",amount:895.5,principalAmount:645.3,interestAmount:250.2,status:"Completed",paymentMethod:"ACH",transactionId:"TXN-20240115-001",processedDate:"2024-01-15T08:30:00Z",notes:"Automatic payment processed successfully"},{id:"pmt-002",loanId:"loan-001",paymentDate:"2023-12-15T00:00:00Z",amount:895.5,principalAmount:641.85,interestAmount:253.65,status:"Completed",paymentMethod:"ACH",transactionId:"TXN-20231215-001",processedDate:"2023-12-15T08:30:00Z",notes:"Automatic payment processed successfully"},{id:"pmt-003",loanId:"loan-002",paymentDate:"2024-01-01T00:00:00Z",amount:1025.75,principalAmount:692.4,interestAmount:333.35,status:"Completed",paymentMethod:"Check",transactionId:"CHK-20240101-002",processedDate:"2024-01-02T10:15:00Z",notes:"Check payment deposited"},{id:"pmt-004",loanId:"loan-001",paymentDate:"2024-02-15T00:00:00Z",amount:895.5,principalAmount:648.8,interestAmount:246.7,status:"Pending",paymentMethod:"ACH",transactionId:null,processedDate:null,notes:"Scheduled automatic payment"}],formDefaults:{loanAmount:25e3,downPayment:3e3,interestRate:7.25,termMonths:60,paymentFrequency:"Monthly",startDate:"",customerId:"",vehicleId:"",notes:""},paymentMethods:["ACH","Check","Credit Card","Cash","Wire Transfer"],loanTypes:["Purchase","Refinance","Equity"],statusColors:{Current:"bg-green-100 text-green-800",Late:"bg-yellow-100 text-yellow-800",Default:"bg-red-100 text-red-800","Paid Off":"bg-blue-100 text-blue-800"},paymentStatusColors:{Completed:"bg-green-100 text-green-800",Pending:"bg-yellow-100 text-yellow-800",Failed:"bg-red-100 text-red-800",Cancelled:"bg-gray-100 text-gray-800"},calculatorDefaults:{loanAmount:25e3,downPayment:3e3,interestRate:7.25,termMonths:60},amortizationSample:[{paymentNumber:1,paymentDate:"2024-02-15",paymentAmount:895.5,principalAmount:645.3,interestAmount:250.2,remainingBalance:24354.7},{paymentNumber:2,paymentDate:"2024-03-15",paymentAmount:895.5,principalAmount:648.85,interestAmount:246.65,remainingBalance:23705.85},{paymentNumber:3,paymentDate:"2024-04-15",paymentAmount:895.5,principalAmount:652.42,interestAmount:243.08,remainingBalance:23053.43}]},d1e={loans:{id:"loans",name:"Loans",description:"Customer loan accounts and payment history",component:"ClientLoansView",mockDataSources:[{path:"@/mocks/financeMock",exportName:"mockFinance",dataKey:"sampleLoans",description:"Customer loan accounts",customerIdField:"customerId",customerNameField:"customerName"}]},loanPayments:{id:"loanPayments",name:"Loan Payments",description:"Customer loan payment history",component:"ClientLoansView",mockDataSources:[{path:"@/mocks/financeMock",exportName:"mockFinance",dataKey:"samplePayments",description:"Loan payment history",filterFunction:(t,e,n)=>{const{mockFinance:r}=require("@/mocks/financeMock");return r.sampleLoans.filter(a=>a.customerId===e||a.customerName===n).some(a=>a.id===t.loanId)}}]},agreements:{id:"agreements",name:"Agreements",description:"Customer agreements and contracts",component:"ClientAgreements",mockDataSources:[{path:"@/mocks/agreementsMock",exportName:"mockAgreements",dataKey:"sampleAgreements",description:"Customer agreements and contracts",customerIdField:"customerId",customerNameField:"customerName"}]},financeApplications:{id:"finance-applications",name:"Finance Applications",description:"Customer finance application submissions",component:"PortalApplicationView",mockDataSources:[{path:"@/modules/finance-application/mocks/financeApplicationMock",exportName:"mockFinanceApplications",dataKey:"sampleApplications",description:"Finance application submissions",customerIdField:"customerId",customerNameField:"customerName"}]},serviceTickets:{id:"service-tickets",name:"Service Tickets",description:"Customer service requests and tickets",component:"ClientServiceTickets",mockDataSources:[{path:"@/mocks/serviceOpsMock",exportName:"mockServiceOps",dataKey:"sampleTickets",description:"Service tickets and requests",customerIdField:"customerId",customerNameField:"customerName"}]},quotes:{id:"quotes",name:"Quotes",description:"Customer quotes and estimates",component:"ClientQuotes",mockDataSources:[{path:"@/mocks/quoteBuilderMock",exportName:"mockQuoteBuilder",dataKey:"sampleQuotes",description:"Customer quotes and estimates",customerIdField:"customerId",customerNameField:"customerName"}]},invoices:{id:"invoices",name:"Invoices",description:"Customer invoices and billing",component:"ClientInvoices",mockDataSources:[{path:"@/mocks/invoiceMock",exportName:"mockInvoice",dataKey:"sampleInvoices",description:"Customer invoices and billing",customerNameField:"customerName"}]},deliveries:{id:"deliveries",name:"Deliveries",description:"Customer delivery tracking",component:"ClientDeliveries",mockDataSources:[{path:"@/mocks/deliveryMock",exportName:"mockDelivery",dataKey:"sampleDeliveries",description:"Delivery tracking and status",customerIdField:"customerId",customerNameField:"customerName"}]}};function u1e(t,e){const n={};return Object.entries(d1e).forEach(([r,i])=>{n[r]=[],i.mockDataSources.forEach(a=>{try{const d=(require(a.path)[a.exportName][a.dataKey]||[]).filter(u=>{if(a.filterFunction)return a.filterFunction(u,t,e);const h=a.customerIdField&&u[a.customerIdField]===t,f=a.customerNameField&&u[a.customerNameField]===e;return h||f});n[r].push(...d)}catch(o){console.warn(`Failed to load mock data from ${a.path}:`,o)}})}),n}function n8(t,e){const[n,r]=ge.useState({}),[i,a]=ge.useState(!0);return ge.useEffect(()=>{a(!0);try{const o=u1e(t,e);r(o)}catch(o){console.error("Failed to discover customer data:",o)}finally{a(!1)}},[t,e]),{customerData:n,loading:i,getSectionData:o=>n[o]||[],getSectionCount:o=>{var l;return((l=n[o])==null?void 0:l.length)||0},hasDataForSection:o=>{var l;return(((l=n[o])==null?void 0:l.length)||0)>0}}}function h1e({children:t}){var h;const{tenant:e}=ya(),{getDisplayName:n,getDisplayEmail:r,isProxying:i,proxiedClient:a}=Tv(),[o,l]=A.useState(!1),c=Em(),d=[{name:"Dashboard",path:"",icon:NJ},{name:"Loans",path:"loans",icon:Vt},{name:"Agreements",path:"agreements",icon:Zt},{name:"Finance Applications",path:"finance-applications",icon:ga},{name:"Service Tickets",path:"service-tickets",icon:pl},{name:"Settings",path:"settings",icon:Wa}],u=()=>{var f;return s.jsxs("div",{className:"flex flex-col h-full",children:[s.jsx("div",{className:"flex items-center px-4 py-6",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"h-8 w-8 bg-primary rounded-lg flex items-center justify-center",children:s.jsx("span",{className:"text-primary-foreground font-bold text-sm",children:((f=e==null?void 0:e.name)==null?void 0:f.charAt(0))||"T"})}),s.jsx("span",{className:"ml-2 text-lg font-semibold",children:(e==null?void 0:e.name)||"Portal"})]})}),s.jsx("nav",{className:"flex-1 px-4 space-y-1",children:d.map(m=>{const v=m.path===""?"/portalclient":`/portalclient/${m.path}`,p=c.pathname===v||m.path===""&&c.pathname==="/portalclient/";return s.jsxs(zR,{to:m.path,className:`
              group flex items-center px-2 py-2 text-sm font-medium rounded-md
              ${p?"bg-primary text-primary-foreground":"text-muted-foreground hover:bg-accent hover:text-accent-foreground"}
            `,children:[s.jsx(m.icon,{className:`mr-3 flex-shrink-0 h-5 w-5 ${p?"text-primary-foreground":"text-muted-foreground"}`}),m.name]},m.name)})}),s.jsxs("div",{className:"border-t p-4",children:[i&&a&&s.jsx("div",{className:"mb-3 p-2 bg-blue-50 border border-blue-200 rounded-md",children:s.jsxs("p",{className:"text-xs text-blue-700 font-medium",children:["Viewing as: ",n()]})}),s.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[s.jsx("div",{className:"h-8 w-8 rounded-full bg-primary/10 flex items-center justify-center",children:s.jsx(Gr,{className:"h-4 w-4"})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"text-sm font-medium truncate",children:n()}),s.jsx("p",{className:"text-xs text-muted-foreground truncate",children:r()})]})]}),s.jsxs(Q,{variant:"ghost",size:"sm",className:"w-full justify-start",onClick:()=>window.location.href="/login",children:[s.jsx(SJ,{className:"mr-2 h-4 w-4"}),"Sign out"]})]})]})};return s.jsxs("div",{className:"flex h-screen bg-background",children:[s.jsx("div",{className:"hidden md:flex md:w-64 md:flex-col",children:s.jsx("div",{className:"flex flex-col flex-grow border-r bg-card",children:s.jsx(u,{})})}),s.jsx(uU,{open:o,onOpenChange:l,children:s.jsx(Jte,{side:"left",className:"p-0 w-64",children:s.jsx(u,{})})}),s.jsxs("div",{className:"flex flex-col flex-1 overflow-hidden",children:[s.jsxs("div",{className:"md:hidden flex items-center justify-between p-4 border-b bg-card",children:[s.jsx(uU,{open:o,onOpenChange:l,children:s.jsx(i1e,{asChild:!0,children:s.jsx(Q,{variant:"ghost",size:"sm",children:s.jsx(ipe,{className:"h-5 w-5"})})})}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"h-6 w-6 bg-primary rounded flex items-center justify-center",children:s.jsx("span",{className:"text-primary-foreground font-bold text-xs",children:((h=e==null?void 0:e.name)==null?void 0:h.charAt(0))||"T"})}),s.jsx("span",{className:"ml-2 font-semibold",children:(e==null?void 0:e.name)||"Portal"})]})]}),s.jsx("main",{className:"flex-1 overflow-y-auto p-6",children:t})]})]})}function f1e({children:t}){return s.jsx(h1e,{children:t})}const m1e=gA("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function Re({className:t,variant:e,...n}){return s.jsx("div",{className:st(m1e({variant:e}),t),...n})}var r8="Progress",s8=100,[p1e,BXe]=Tm(r8),[g1e,v1e]=p1e(r8),tne=A.forwardRef((t,e)=>{const{__scopeProgress:n,value:r=null,max:i,getValueLabel:a=x1e,...o}=t;(i||i===0)&&!hU(i)&&console.error(y1e(`${i}`,"Progress"));const l=hU(i)?i:s8;r!==null&&!fU(r,l)&&console.error(b1e(`${r}`,"Progress"));const c=fU(r,l)?r:null,d=wP(c)?a(c,l):void 0;return s.jsx(g1e,{scope:n,value:c,max:l,children:s.jsx(qn.div,{"aria-valuemax":l,"aria-valuemin":0,"aria-valuenow":wP(c)?c:void 0,"aria-valuetext":d,role:"progressbar","data-state":sne(c,l),"data-value":c??void 0,"data-max":l,...o,ref:e})})});tne.displayName=r8;var nne="ProgressIndicator",rne=A.forwardRef((t,e)=>{const{__scopeProgress:n,...r}=t,i=v1e(nne,n);return s.jsx(qn.div,{"data-state":sne(i.value,i.max),"data-value":i.value??void 0,"data-max":i.max,...r,ref:e})});rne.displayName=nne;function x1e(t,e){return`${Math.round(t/e*100)}%`}function sne(t,e){return t==null?"indeterminate":t===e?"complete":"loading"}function wP(t){return typeof t=="number"}function hU(t){return wP(t)&&!isNaN(t)&&t>0}function fU(t,e){return wP(t)&&!isNaN(t)&&t<=e&&t>=0}function y1e(t,e){return`Invalid prop \`max\` of value \`${t}\` supplied to \`${e}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${s8}\`.`}function b1e(t,e){return`Invalid prop \`value\` of value \`${t}\` supplied to \`${e}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${s8} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var ine=tne,w1e=rne;const Pd=A.forwardRef(({className:t,value:e,...n},r)=>s.jsx(ine,{ref:r,className:st("relative h-4 w-full overflow-hidden rounded-full bg-secondary",t),...n,children:s.jsx(w1e,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(e||0)}%)`}})}));Pd.displayName=ine.displayName;function j1e(){const{getCustomerId:t,getDisplayName:e}=Tv(),n=t(),r=e(),{customerData:i,loading:a,getSectionCount:o}=n8(n,r),[l,c]=A.useState(null),d=i.loans||[],u=i.loanPayments||[],h=d.filter(g=>["Current","Active"].includes(g.status)),f=h.reduce((g,x)=>g+x.remainingBalance,0),m=h.reduce((g,x)=>g+x.monthlyPayment,0),v=g=>{switch(g){case"Current":case"Active":return"bg-green-100 text-green-800";case"Late":return"bg-yellow-100 text-yellow-800";case"Default":return"bg-red-100 text-red-800";case"Paid Off":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}},p=g=>u.filter(x=>x.loanId===g).sort((x,y)=>new Date(y.paymentDate).getTime()-new Date(x.paymentDate).getTime());if(a)return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"animate-pulse",children:[s.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/4 mb-2"}),s.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2"})]}),s.jsx("div",{className:"grid gap-4 md:grid-cols-3",children:[1,2,3].map(g=>s.jsx("div",{className:"animate-pulse",children:s.jsx("div",{className:"h-32 bg-gray-200 rounded"})},g))})]});if(l){const g=p(l.id),x=(l.termMonths-l.paymentsRemaining)/l.termMonths*100;return s.jsxs("div",{className:"space-y-6",children:[s.jsx(Q,{variant:"ghost",onClick:()=>c(null),children:" Back to Loans"}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("h1",{className:"text-2xl font-bold",children:"Loan Details"}),s.jsx("p",{className:"text-muted-foreground",children:l.vehicleInfo})]}),s.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[s.jsx(he,{children:s.jsx(fe,{className:"pt-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Remaining Balance"}),s.jsx("p",{className:"text-2xl font-bold",children:Le(l.remainingBalance)})]}),s.jsx(Vt,{className:"h-8 w-8 text-muted-foreground"})]})})}),s.jsx(he,{children:s.jsx(fe,{className:"pt-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Monthly Payment"}),s.jsx("p",{className:"text-2xl font-bold",children:Le(l.monthlyPayment)})]}),s.jsx(Sn,{className:"h-8 w-8 text-muted-foreground"})]})})}),s.jsx(he,{children:s.jsx(fe,{className:"pt-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Next Payment"}),s.jsx("p",{className:"text-2xl font-bold",children:ht(l.nextPaymentDate)})]}),s.jsx(Sn,{className:"h-8 w-8 text-muted-foreground"})]})})}),s.jsx(he,{children:s.jsx(fe,{className:"pt-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Payments Remaining"}),s.jsx("p",{className:"text-2xl font-bold",children:l.paymentsRemaining})]}),s.jsx(Zt,{className:"h-8 w-8 text-muted-foreground"})]})})})]}),s.jsxs(he,{children:[s.jsxs(ye,{children:[s.jsx(be,{children:"Payment Progress"}),s.jsxs(Be,{children:[l.termMonths-l.paymentsRemaining," of ",l.termMonths," payments completed"]})]}),s.jsx(fe,{children:s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{children:"Progress"}),s.jsxs("span",{children:[Math.round(x),"%"]})]}),s.jsx(Pd,{value:x,className:"h-3"}),s.jsxs("div",{className:"flex justify-between text-sm text-muted-foreground",children:[s.jsxs("span",{children:["Started: ",ht(l.startDate)]}),s.jsxs("span",{children:["Total Paid: ",Le(l.totalPaid)]})]})]})})]}),s.jsxs(he,{children:[s.jsxs(ye,{children:[s.jsx(be,{children:"Recent Payments"}),s.jsx(Be,{children:"Your payment history for this loan"})]}),s.jsx(fe,{children:s.jsxs("div",{className:"space-y-4",children:[g.slice(0,5).map(y=>s.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("div",{className:`w-3 h-3 rounded-full ${y.status==="Completed"?"bg-green-500":y.status==="Pending"?"bg-yellow-500":"bg-red-500"}`}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:Le(y.amount)}),s.jsxs("p",{className:"text-sm text-muted-foreground",children:[ht(y.paymentDate),"  ",y.paymentMethod]})]})]}),s.jsx(Re,{className:y.status==="Completed"?"bg-green-100 text-green-800":y.status==="Pending"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800",children:y.status})]},y.id)),g.length===0&&s.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[s.jsx(Zt,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),s.jsx("p",{children:"No payment history available"})]})]})})]})]})}return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("h1",{className:"text-2xl font-bold",children:"My Loans"}),s.jsx("p",{className:"text-muted-foreground",children:"Manage your loan accounts and payment history"})]}),h.length>0&&s.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[s.jsx(he,{children:s.jsx(fe,{className:"pt-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Total Balance"}),s.jsx("p",{className:"text-2xl font-bold",children:Le(f)})]}),s.jsx(Vt,{className:"h-8 w-8 text-muted-foreground"})]})})}),s.jsx(he,{children:s.jsx(fe,{className:"pt-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Monthly Payment"}),s.jsx("p",{className:"text-2xl font-bold",children:Le(m)})]}),s.jsx(Sn,{className:"h-8 w-8 text-muted-foreground"})]})})}),s.jsx(he,{children:s.jsx(fe,{className:"pt-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Active Loans"}),s.jsx("p",{className:"text-2xl font-bold",children:h.length})]}),s.jsx(ga,{className:"h-8 w-8 text-muted-foreground"})]})})})]}),s.jsxs(he,{children:[s.jsxs(ye,{children:[s.jsx(be,{children:"Your Loans"}),s.jsx(Be,{children:"View details and payment history for your loans"})]}),s.jsx(fe,{children:s.jsxs("div",{className:"space-y-4",children:[d.map(g=>{const x=(g.termMonths-g.paymentsRemaining)/g.termMonths*100;return s.jsx("div",{className:"border rounded-lg p-4 hover:bg-accent/50 transition-colors",children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex-1 space-y-3",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold",children:g.vehicleInfo}),s.jsxs("p",{className:"text-sm text-muted-foreground",children:["Loan #",g.id.slice(-6).toUpperCase()]})]}),s.jsx(Re,{className:v(g.status),children:g.status})]}),s.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Remaining Balance"}),s.jsx("p",{className:"font-semibold",children:Le(g.remainingBalance)})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Monthly Payment"}),s.jsx("p",{className:"font-semibold",children:Le(g.monthlyPayment)})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Next Payment"}),s.jsx("p",{className:"font-semibold",children:ht(g.nextPaymentDate)})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{children:"Payment Progress"}),s.jsxs("span",{children:[Math.round(x),"%"]})]}),s.jsx(Pd,{value:x,className:"h-2"}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:[g.termMonths-g.paymentsRemaining," of ",g.termMonths," payments completed"]})]})]}),s.jsx("div",{className:"flex items-center space-x-2 ml-4",children:s.jsxs(Q,{variant:"outline",size:"sm",onClick:()=>c(g),children:[s.jsx(Wr,{className:"h-4 w-4 mr-2"}),"View Details"]})})]})},g.id)}),d.length===0&&s.jsxs("div",{className:"text-center py-12",children:[s.jsx(ga,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),s.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Loans Found"}),s.jsx("p",{className:"text-muted-foreground",children:"You don't have any loans associated with your account."})]})]})})]})]})}function ane(){const{getCustomerId:t,getDisplayName:e}=Tv(),n=t(),r=e(),{customerData:i,loading:a}=n8(n,r),[o,l]=A.useState(null),c=i.agreements||[],d=h=>{switch(h){case"DRAFT":return"bg-gray-100 text-gray-800";case"PENDING":return"bg-yellow-100 text-yellow-800";case"SIGNED":return"bg-blue-100 text-blue-800";case"ACTIVE":return"bg-green-100 text-green-800";case"EXPIRED":return"bg-red-100 text-red-800";case"CANCELLED":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},u=h=>{switch(h){case"PURCHASE":return s.jsx(Vt,{className:"h-4 w-4"});case"LEASE":return s.jsx(Sn,{className:"h-4 w-4"});case"SERVICE":return s.jsx(Zt,{className:"h-4 w-4"});case"WARRANTY":return s.jsx(Zt,{className:"h-4 w-4"});default:return s.jsx(Zt,{className:"h-4 w-4"})}};return a?s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"animate-pulse",children:[s.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/4 mb-2"}),s.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2"})]}),s.jsx("div",{className:"space-y-4",children:[1,2,3].map(h=>s.jsx("div",{className:"animate-pulse",children:s.jsx("div",{className:"h-32 bg-gray-200 rounded"})},h))})]}):o?s.jsxs("div",{className:"space-y-6",children:[s.jsx(Q,{variant:"ghost",onClick:()=>l(null),children:" Back to Agreements"}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[u(o.type),s.jsxs("h1",{className:"text-2xl font-bold",children:[o.type.charAt(0)+o.type.slice(1).toLowerCase()," Agreement"]}),s.jsx(Re,{className:d(o.status),children:o.status})]}),s.jsx("p",{className:"text-muted-foreground",children:o.vehicleInfo})]}),s.jsxs(he,{children:[s.jsx(ye,{children:s.jsx(be,{children:"Agreement Details"})}),s.jsxs(fe,{className:"space-y-6",children:[s.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium mb-3",children:"Basic Information"}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Agreement ID"}),s.jsx("p",{className:"font-medium",children:o.id})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Type"}),s.jsx("p",{className:"font-medium",children:o.type})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Status"}),s.jsx(Re,{className:d(o.status),children:o.status})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Created"}),s.jsx("p",{className:"font-medium",children:ht(o.createdAt)})]})]})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium mb-3",children:"Financial Details"}),s.jsxs("div",{className:"space-y-2",children:[o.totalAmount&&s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Amount"}),s.jsx("p",{className:"font-medium",children:Le(o.totalAmount)})]}),o.downPayment&&s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Down Payment"}),s.jsx("p",{className:"font-medium",children:Le(o.downPayment)})]}),o.monthlyPayment&&s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Monthly Payment"}),s.jsx("p",{className:"font-medium",children:Le(o.monthlyPayment)})]}),o.annualFee&&s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Annual Fee"}),s.jsx("p",{className:"font-medium",children:Le(o.annualFee)})]})]})]})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium mb-3",children:"Important Dates"}),s.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Effective Date"}),s.jsx("p",{className:"font-medium",children:ht(o.effectiveDate)})]}),o.expirationDate&&s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Expiration Date"}),s.jsx("p",{className:"font-medium",children:ht(o.expirationDate)})]}),o.signedAt&&s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Signed Date"}),s.jsx("p",{className:"font-medium",children:ht(o.signedAt)})]})]})]}),o.terms&&s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium mb-3",children:"Terms & Conditions"}),s.jsx("div",{className:"bg-muted/50 p-4 rounded-lg",children:s.jsx("p",{className:"text-sm",children:o.terms})})]}),o.signedBy&&s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium mb-3",children:"Signature Information"}),s.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Signed By"}),s.jsx("p",{className:"font-medium",children:o.signedBy})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"IP Address"}),s.jsx("p",{className:"font-medium",children:o.ipAddress||"Not recorded"})]})]})]})]})]}),o.documents&&o.documents.length>0&&s.jsxs(he,{children:[s.jsxs(ye,{children:[s.jsx(be,{children:"Documents"}),s.jsx(Be,{children:"Agreement documents and attachments"})]}),s.jsx(fe,{children:s.jsx("div",{className:"space-y-3",children:o.documents.map(h=>s.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(Zt,{className:"h-5 w-5 text-muted-foreground"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:h.name}),s.jsxs("p",{className:"text-sm text-muted-foreground",children:[(h.size/1024/1024).toFixed(2)," MB  Uploaded ",ht(h.uploadedAt)]})]})]}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsxs(Q,{variant:"outline",size:"sm",children:[s.jsx(Wr,{className:"h-4 w-4 mr-2"}),"View"]}),s.jsxs(Q,{variant:"outline",size:"sm",children:[s.jsx(Ha,{className:"h-4 w-4 mr-2"}),"Download"]})]})]},h.id))})})]})]}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("h1",{className:"text-2xl font-bold",children:"My Agreements"}),s.jsx("p",{className:"text-muted-foreground",children:"View and manage your agreements and contracts"})]}),c.length>0&&s.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[s.jsx(he,{children:s.jsx(fe,{className:"pt-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Total Agreements"}),s.jsx("p",{className:"text-2xl font-bold",children:c.length})]}),s.jsx(Zt,{className:"h-8 w-8 text-muted-foreground"})]})})}),s.jsx(he,{children:s.jsx(fe,{className:"pt-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Active"}),s.jsx("p",{className:"text-2xl font-bold",children:c.filter(h=>h.status==="ACTIVE").length})]}),s.jsx(Gr,{className:"h-8 w-8 text-muted-foreground"})]})})}),s.jsx(he,{children:s.jsx(fe,{className:"pt-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Pending Signature"}),s.jsx("p",{className:"text-2xl font-bold",children:c.filter(h=>h.status==="PENDING").length})]}),s.jsx(Sn,{className:"h-8 w-8 text-muted-foreground"})]})})})]}),s.jsxs(he,{children:[s.jsxs(ye,{children:[s.jsx(be,{children:"Your Agreements"}),s.jsx(Be,{children:"View details and status of your agreements"})]}),s.jsx(fe,{children:s.jsxs("div",{className:"space-y-4",children:[c.map(h=>s.jsx("div",{className:"border rounded-lg p-4 hover:bg-accent/50 transition-colors",children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex-1 space-y-3",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[u(h.type),s.jsxs("div",{children:[s.jsxs("h4",{className:"font-semibold",children:[h.type.charAt(0)+h.type.slice(1).toLowerCase()," Agreement"]}),s.jsx("p",{className:"text-sm text-muted-foreground",children:h.vehicleInfo})]}),s.jsx(Re,{className:d(h.status),children:h.status})]}),s.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Effective Date"}),s.jsx("p",{className:"font-semibold",children:ht(h.effectiveDate)})]}),h.expirationDate&&s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Expiration Date"}),s.jsx("p",{className:"font-semibold",children:ht(h.expirationDate)})]}),(h.totalAmount||h.monthlyPayment||h.annualFee)&&s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:h.totalAmount?"Total Amount":h.monthlyPayment?"Monthly Payment":"Annual Fee"}),s.jsx("p",{className:"font-semibold",children:Le(h.totalAmount||h.monthlyPayment||h.annualFee)})]})]}),h.status==="PENDING"&&s.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-md p-3",children:s.jsxs("p",{className:"text-sm text-yellow-800",children:[s.jsx("strong",{children:"Action Required:"})," This agreement is waiting for your signature."]})})]}),s.jsxs("div",{className:"flex items-center space-x-2 ml-4",children:[s.jsxs(Q,{variant:"outline",size:"sm",onClick:()=>l(h),children:[s.jsx(Wr,{className:"h-4 w-4 mr-2"}),"View Details"]}),h.status==="PENDING"&&s.jsx(Q,{size:"sm",children:"Sign Agreement"})]})]})},h.id)),c.length===0&&s.jsxs("div",{className:"text-center py-12",children:[s.jsx(Zt,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),s.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Agreements Found"}),s.jsx("p",{className:"text-muted-foreground",children:"You don't have any agreements associated with your account."})]})]})})]})]})}const Bu={sampleApplications:[{id:"app-001",customerId:"cust-001",customerName:"John Smith",customerEmail:"john.smith@email.com",customerPhone:"(555) 123-4567",templateId:"template-001",status:"under_review",data:{"personal-info":{"first-name":"John","last-name":"Smith",email:"john.smith@email.com",phone:"(555) 123-4567",ssn:"***-**-1234","date-of-birth":"1985-06-15"},employment:{"employer-name":"ABC Corporation","job-title":"Software Engineer","employment-length":"3 years","monthly-income":"8500","employment-type":"full-time"},residence:{address:"123 Main St",city:"Anytown",state:"CA",zip:"12345","housing-status":"rent","monthly-payment":"2200"}},uploadedFiles:[{id:"file-001",fieldId:"pay-stubs",name:"paystub-march-2024.pdf",type:"application/pdf",size:245760,url:"/mock/paystub.pdf",uploadedAt:"2024-01-15T10:30:00Z"}],history:[{id:"hist-001",timestamp:"2024-01-10T09:30:00Z",action:"Application Created",userId:"system",userName:"System",details:"Application created with status: draft"},{id:"hist-002",timestamp:"2024-01-12T16:45:00Z",action:"Application Submitted",userId:"cust-001",userName:"John Smith",details:"Application submitted for review"},{id:"hist-003",timestamp:"2024-01-15T10:30:00Z",action:"Document Uploaded",userId:"cust-001",userName:"John Smith",details:"1 document(s) uploaded"},{id:"hist-004",timestamp:"2024-01-15T14:22:00Z",action:"Status Changed",userId:"admin-001",userName:"Finance Admin",details:"Status changed from submitted to under_review",oldValue:"submitted",newValue:"under_review"}],fraudCheckStatus:"verified",createdAt:"2024-01-10T09:30:00Z",updatedAt:"2024-01-15T14:22:00Z",submittedAt:"2024-01-12T16:45:00Z",notes:"Strong credit profile, employment verified"},{id:"app-002",customerId:"cust-002",customerName:"Maria Rodriguez",customerEmail:"maria.rodriguez@email.com",customerPhone:"(555) 987-6543",templateId:"template-001",status:"draft",data:{"personal-info":{"first-name":"Maria","last-name":"Rodriguez",email:"maria.rodriguez@email.com",phone:"(555) 987-6543"}},uploadedFiles:[],fraudCheckStatus:"pending",createdAt:"2024-01-18T11:15:00Z",updatedAt:"2024-01-18T11:15:00Z",notes:""},{id:"app-003",customerId:"cust-003",customerName:"Sarah Wilson",customerEmail:"sarah.wilson@email.com",customerPhone:"(555) 234-5678",templateId:"template-001",status:"submitted",data:{"personal-info":{"first-name":"Sarah","last-name":"Wilson",email:"sarah.wilson@email.com",phone:"(555) 234-5678",ssn:"***-**-5678","date-of-birth":"1990-03-22"},employment:{"employer-name":"Tech Solutions Inc","job-title":"Marketing Manager","employment-length":"2 years","monthly-income":"7200","employment-type":"full-time"}},uploadedFiles:[],fraudCheckStatus:"pending",createdAt:"2024-01-20T10:15:00Z",updatedAt:"2024-01-22T09:30:00Z",submittedAt:"2024-01-22T09:30:00Z",notes:"Application submitted, awaiting initial review"},{id:"app-004",customerId:"cust-004",customerName:"Michael Chen",customerEmail:"michael.chen@email.com",customerPhone:"(555) 345-6789",templateId:"template-001",status:"under_review",data:{"personal-info":{"first-name":"Michael","last-name":"Chen",email:"michael.chen@email.com",phone:"(555) 345-6789",ssn:"***-**-6789","date-of-birth":"1988-11-10"},employment:{"employer-name":"Global Manufacturing","job-title":"Operations Supervisor","employment-length":"5 years","monthly-income":"9500","employment-type":"full-time"}},uploadedFiles:[{id:"file-002",fieldId:"pay-stubs",name:"paystub-january-2024.pdf",type:"application/pdf",size:198432,url:"/mock/paystub-chen.pdf",uploadedAt:"2024-01-18T11:45:00Z"}],fraudCheckStatus:"verified",createdAt:"2024-01-16T14:20:00Z",updatedAt:"2024-01-23T16:15:00Z",submittedAt:"2024-01-18T12:00:00Z",reviewedAt:"2024-01-23T16:15:00Z",reviewedBy:"finance@company.com",notes:"Under review by finance team, credit check in progress",adminNotes:"Credit score: 720. Employment verified. Waiting for final bank statements."},{id:"app-005",customerId:"cust-005",customerName:"Emily Davis",customerEmail:"emily.davis@email.com",customerPhone:"(555) 456-7890",templateId:"template-001",status:"approved",data:{"personal-info":{"first-name":"Emily","last-name":"Davis",email:"emily.davis@email.com",phone:"(555) 456-7890",ssn:"***-**-7890","date-of-birth":"1985-07-14"},employment:{"employer-name":"Healthcare Partners","job-title":"Registered Nurse","employment-length":"8 years","monthly-income":"8800","employment-type":"full-time"}},uploadedFiles:[{id:"file-003",fieldId:"pay-stubs",name:"paystub-december-2023.pdf",type:"application/pdf",size:223456,url:"/mock/paystub-davis.pdf",uploadedAt:"2024-01-08T15:30:00Z"},{id:"file-004",fieldId:"tax-returns",name:"tax-return-2023.pdf",type:"application/pdf",size:445678,url:"/mock/tax-return-davis.pdf",uploadedAt:"2024-01-08T15:35:00Z"}],fraudCheckStatus:"verified",createdAt:"2024-01-05T08:45:00Z",updatedAt:"2024-01-25T10:30:00Z",submittedAt:"2024-01-08T16:00:00Z",reviewedAt:"2024-01-25T10:30:00Z",reviewedBy:"finance@company.com",notes:"Excellent credit score and stable employment history. Approved for full amount.",adminNotes:"Credit score: 785. 8 years stable employment. Debt-to-income ratio: 28%. Approved for $65,000 at 6.5% APR."},{id:"app-006",customerId:"cust-006",customerName:"Robert Taylor",customerEmail:"robert.taylor@email.com",customerPhone:"(555) 567-8901",templateId:"template-001",status:"denied",data:{"personal-info":{"first-name":"Robert","last-name":"Taylor",email:"robert.taylor@email.com",phone:"(555) 567-8901",ssn:"***-**-8901","date-of-birth":"1992-12-05"},employment:{"employer-name":"Freelance Consulting","job-title":"Independent Contractor","employment-length":"6 months","monthly-income":"4500","employment-type":"self-employed"}},uploadedFiles:[],fraudCheckStatus:"flagged",createdAt:"2024-01-12T13:20:00Z",updatedAt:"2024-01-26T14:45:00Z",submittedAt:"2024-01-14T10:15:00Z",reviewedAt:"2024-01-26T14:45:00Z",reviewedBy:"finance@company.com",notes:"Insufficient employment history and income verification. Credit score below minimum requirements.",adminNotes:"Credit score: 580 (below 620 minimum). Only 6 months employment history. Self-employed income not verifiable. Recommend denial."},{id:"app-007",customerId:"cust-007",customerName:"Jennifer Brown",customerEmail:"jennifer.brown@email.com",customerPhone:"(555) 678-9012",templateId:"template-001",status:"completed",data:{"personal-info":{"first-name":"Jennifer","last-name":"Brown",email:"jennifer.brown@email.com",phone:"(555) 678-9012",ssn:"***-**-9012","date-of-birth":"1987-04-18"},employment:{"employer-name":"City School District","job-title":"Elementary Teacher","employment-length":"12 years","monthly-income":"6800","employment-type":"full-time"}},uploadedFiles:[{id:"file-005",fieldId:"pay-stubs",name:"paystub-november-2023.pdf",type:"application/pdf",size:187654,url:"/mock/paystub-brown.pdf",uploadedAt:"2023-12-15T09:20:00Z"}],fraudCheckStatus:"verified",createdAt:"2023-12-10T11:30:00Z",updatedAt:"2024-01-15T13:45:00Z",submittedAt:"2023-12-15T10:00:00Z",reviewedAt:"2023-12-20T15:30:00Z",reviewedBy:"finance@company.com",notes:"Application approved and loan funded. Customer has received financing.",adminNotes:"Credit score: 742. 12 years stable employment in education. Loan funded at $45,000 at 7.25% APR for 15 years."},{id:"app-008",customerId:"cust-008",customerName:"David Wilson",customerEmail:"david.wilson@email.com",customerPhone:"(555) 789-0123",templateId:"template-001",status:"conditionally_approved",data:{"personal-info":{"first-name":"David","last-name":"Wilson",email:"david.wilson@email.com",phone:"(555) 789-0123",ssn:"***-**-0123","date-of-birth":"1983-09-25"},employment:{"employer-name":"Regional Bank","job-title":"Loan Officer","employment-length":"4 years","monthly-income":"7800","employment-type":"full-time"}},uploadedFiles:[{id:"file-006",fieldId:"pay-stubs",name:"paystub-february-2024.pdf",type:"application/pdf",size:201234,url:"/mock/paystub-wilson.pdf",uploadedAt:"2024-01-22T14:20:00Z"}],history:[{id:"hist-027",timestamp:"2024-01-20T13:45:00Z",action:"Application Created",userId:"system",userName:"System",details:"Application created with status: draft"},{id:"hist-028",timestamp:"2024-01-22T14:20:00Z",action:"Document Uploaded",userId:"cust-008",userName:"David Wilson",details:"1 document(s) uploaded"},{id:"hist-029",timestamp:"2024-01-22T15:00:00Z",action:"Application Submitted",userId:"cust-008",userName:"David Wilson",details:"Application submitted for review"},{id:"hist-030",timestamp:"2024-01-27T11:30:00Z",action:"Status Changed",userId:"admin-001",userName:"Finance Admin",details:"Status changed from under_review to conditionally_approved",oldValue:"under_review",newValue:"conditionally_approved"},{id:"hist-031",timestamp:"2024-01-27T11:30:00Z",action:"Admin Notes Updated",userId:"admin-001",userName:"Finance Admin",details:"Admin notes added/updated"}],fraudCheckStatus:"verified",createdAt:"2024-01-20T13:45:00Z",updatedAt:"2024-01-27T11:30:00Z",submittedAt:"2024-01-22T15:00:00Z",reviewedAt:"2024-01-27T11:30:00Z",reviewedBy:"finance@company.com",notes:"Conditionally approved pending additional documentation.",adminNotes:"Credit score: 695. Good employment history but needs co-signer due to recent credit inquiry. Approved for $40,000 with co-signer requirement."}],defaultTemplates:[{id:"template-001",name:"Standard Finance Application",description:"Complete finance application for manufactured homes and RVs",sections:[{id:"personal-info",title:"Personal Information",description:"Basic personal and contact information",order:1,fields:[{id:"first-name",type:"text",label:"First Name",placeholder:"Enter your first name",required:!0,order:1,validation:{minLength:2,maxLength:50}},{id:"last-name",type:"text",label:"Last Name",placeholder:"Enter your last name",required:!0,order:2,validation:{minLength:2,maxLength:50}},{id:"email",type:"email",label:"Email Address",placeholder:"Enter your email address",required:!0,order:3},{id:"phone",type:"phone",label:"Phone Number",placeholder:"(555) 123-4567",required:!0,order:4},{id:"ssn",type:"text",label:"Social Security Number",placeholder:"***-**-****",required:!0,order:5,validation:{pattern:"^\\d{3}-\\d{2}-\\d{4}$"}},{id:"date-of-birth",type:"date",label:"Date of Birth",required:!0,order:6}]},{id:"employment",title:"Employment Information",description:"Current employment and income details",order:2,fields:[{id:"employment-type",type:"select",label:"Employment Type",required:!0,order:1,options:["full-time","part-time","self-employed","retired","unemployed"]},{id:"employer-name",type:"text",label:"Employer Name",placeholder:"Enter employer name",required:!0,order:2,conditionalLogic:{dependsOn:"employment-type",condition:"not_equals",value:"unemployed"}},{id:"job-title",type:"text",label:"Job Title",placeholder:"Enter your job title",required:!0,order:3,conditionalLogic:{dependsOn:"employment-type",condition:"not_equals",value:"unemployed"}},{id:"employment-length",type:"text",label:"Length of Employment",placeholder:"e.g., 2 years 6 months",required:!0,order:4,conditionalLogic:{dependsOn:"employment-type",condition:"not_equals",value:"unemployed"}},{id:"monthly-income",type:"currency",label:"Monthly Gross Income",placeholder:"0.00",required:!0,order:5,validation:{min:0}}]},{id:"co-applicant",title:"Co-Applicant Information",description:"Information about co-applicant (if applicable)",order:3,fields:[{id:"has-co-applicant",type:"radio",label:"Do you have a co-applicant?",required:!0,order:1,options:["yes","no"]},{id:"co-first-name",type:"text",label:"Co-Applicant First Name",placeholder:"Enter first name",required:!1,order:2,conditionalLogic:{dependsOn:"has-co-applicant",condition:"equals",value:"yes"}},{id:"co-last-name",type:"text",label:"Co-Applicant Last Name",placeholder:"Enter last name",required:!1,order:3,conditionalLogic:{dependsOn:"has-co-applicant",condition:"equals",value:"yes"}},{id:"co-ssn",type:"text",label:"Co-Applicant SSN",placeholder:"***-**-****",required:!1,order:4,conditionalLogic:{dependsOn:"has-co-applicant",condition:"equals",value:"yes"}}]},{id:"residence",title:"Residence Information",description:"Current housing situation and address",order:4,fields:[{id:"address",type:"text",label:"Street Address",placeholder:"Enter your street address",required:!0,order:1},{id:"city",type:"text",label:"City",placeholder:"Enter city",required:!0,order:2},{id:"state",type:"select",label:"State",required:!0,order:3,options:["AL","AK","AZ","AR","CA","CO","CT","DE","FL","GA","HI","ID","IL","IN","IA","KS","KY","LA","ME","MD","MA","MI","MN","MS","MO","MT","NE","NV","NH","NJ","NM","NY","NC","ND","OH","OK","OR","PA","RI","SC","SD","TN","TX","UT","VT","VA","WA","WV","WI","WY"]},{id:"zip",type:"text",label:"ZIP Code",placeholder:"12345",required:!0,order:4,validation:{pattern:"^\\d{5}(-\\d{4})?$"}},{id:"housing-status",type:"select",label:"Housing Status",required:!0,order:5,options:["own","rent","live-with-family","other"]},{id:"monthly-payment",type:"currency",label:"Monthly Housing Payment",placeholder:"0.00",required:!0,order:6,validation:{min:0}}]},{id:"obligations",title:"Monthly Obligations",description:"Other monthly financial obligations",order:5,fields:[{id:"credit-cards",type:"currency",label:"Credit Card Payments",placeholder:"0.00",required:!1,order:1,validation:{min:0}},{id:"auto-loans",type:"currency",label:"Auto Loan Payments",placeholder:"0.00",required:!1,order:2,validation:{min:0}},{id:"student-loans",type:"currency",label:"Student Loan Payments",placeholder:"0.00",required:!1,order:3,validation:{min:0}},{id:"other-debts",type:"currency",label:"Other Monthly Debt Payments",placeholder:"0.00",required:!1,order:4,validation:{min:0}}]},{id:"documents",title:"Required Documents",description:"Upload required financial documents",order:6,fields:[{id:"pay-stubs",type:"file",label:"Recent Pay Stubs (Last 2 months)",required:!0,order:1,validation:{fileTypes:["pdf","jpg","jpeg","png"],maxFileSize:5242880}},{id:"tax-returns",type:"file",label:"Tax Returns (Last 2 years)",required:!0,order:2,validation:{fileTypes:["pdf"],maxFileSize:10485760}},{id:"bank-statements",type:"file",label:"Bank Statements (Last 3 months)",required:!0,order:3,validation:{fileTypes:["pdf","jpg","jpeg","png"],maxFileSize:5242880}}]},{id:"consent",title:"Consent and Authorization",description:"Required consents and authorizations",order:7,fields:[{id:"credit-check-consent",type:"checkbox",label:"I authorize a credit check to be performed",required:!0,order:1},{id:"terms-agreement",type:"checkbox",label:"I agree to the terms and conditions",required:!0,order:2},{id:"signature",type:"signature",label:"Electronic Signature",required:!0,order:3}]}],isActive:!0,createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"}],fieldTypes:[{value:"text",label:"Text Input"},{value:"email",label:"Email"},{value:"phone",label:"Phone Number"},{value:"number",label:"Number"},{value:"currency",label:"Currency"},{value:"date",label:"Date"},{value:"select",label:"Dropdown"},{value:"radio",label:"Radio Buttons"},{value:"checkbox",label:"Checkbox"},{value:"textarea",label:"Text Area"},{value:"file",label:"File Upload"},{value:"signature",label:"Electronic Signature"}],statusOptions:[{value:"draft",label:"Draft",color:"bg-gray-100 text-gray-800"},{value:"submitted",label:"Submitted",color:"bg-blue-100 text-blue-800"},{value:"under_review",label:"Under Review",color:"bg-yellow-100 text-yellow-800"},{value:"approved",label:"Approved",color:"bg-green-100 text-green-800"},{value:"conditionally_approved",label:"Conditionally Approved",color:"bg-orange-100 text-orange-800"},{value:"denied",label:"Denied",color:"bg-red-100 text-red-800"},{value:"completed",label:"Completed",color:"bg-emerald-100 text-emerald-800"}],fraudCheckStatuses:[{value:"pending",label:"Pending",color:"bg-yellow-100 text-yellow-800"},{value:"verified",label:"Verified",color:"bg-green-100 text-green-800"},{value:"flagged",label:"Flagged",color:"bg-red-100 text-red-800"}]};function bA(){const[t,e]=A.useState([]),[n,r]=A.useState([]);A.useEffect(()=>{e(Bu.sampleApplications),r(Bu.defaultTemplates)},[]),A.useEffect(()=>{Dn("financeApplications",t)},[t]),A.useEffect(()=>{Dn("applicationTemplates",n)},[n]);const i=g=>{var y;const x={id:`app-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,customerId:g.customerId||"",customerName:g.customerName||"",customerEmail:g.customerEmail||"",customerPhone:g.customerPhone||"",templateId:g.templateId||((y=n[0])==null?void 0:y.id)||"",status:g.status||"draft",data:g.data||{},uploadedFiles:g.uploadedFiles||[],history:[{id:`hist-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,timestamp:new Date().toISOString(),action:"Application Created",userId:"current-user",userName:"Current User",details:`Application created with status: ${g.status||"draft"}`}],fraudCheckStatus:"pending",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),notes:g.notes||""};return e(b=>[x,...b]),x},a=(g,x)=>{e(y=>y.map(b=>b.id===g?{...b,...x,updatedAt:new Date().toISOString(),submittedAt:x.status==="submitted"&&!b.submittedAt?new Date().toISOString():b.submittedAt,history:[...b.history,...p(b,x)]}:b))},o=g=>{e(x=>x.filter(y=>y.id!==g))},l=g=>t.find(x=>x.id===g),c=g=>t.filter(x=>x.customerId===g),d=g=>{const x={id:`template-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,name:g.name||"New Template",description:g.description||"",sections:g.sections||[],isActive:g.isActive!==void 0?g.isActive:!0,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};return r(y=>[x,...y]),x},u=(g,x)=>{r(y=>y.map(b=>b.id===g?{...b,...x,updatedAt:new Date().toISOString()}:b))},h=g=>{r(x=>x.filter(y=>y.id!==g))},f=g=>n.find(x=>x.id===g),m=(g,x,y)=>new Promise(b=>{var N;const w={id:`file-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,fieldId:x,name:y.name,type:y.type,size:y.size,url:URL.createObjectURL(y),uploadedAt:new Date().toISOString()};a(g,{uploadedFiles:[...((N=l(g))==null?void 0:N.uploadedFiles)||[],w]}),b(w)}),v=(g,x)=>{const y=l(g);if(y){const b=y.uploadedFiles.filter(w=>w.id!==x);a(g,{uploadedFiles:b})}},p=(g,x)=>{const y=[],b=new Date().toISOString(),w="current-user",N="Current User";if(x.status&&x.status!==g.status&&y.push({id:`hist-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,timestamp:b,action:"Status Changed",userId:w,userName:N,details:`Status changed from ${g.status} to ${x.status}`,oldValue:g.status,newValue:x.status}),x.adminNotes!==void 0&&x.adminNotes!==g.adminNotes&&y.push({id:`hist-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,timestamp:b,action:"Admin Notes Updated",userId:w,userName:N,details:x.adminNotes?"Admin notes added/updated":"Admin notes cleared",oldValue:g.adminNotes||"",newValue:x.adminNotes||""}),x.status==="submitted"&&!g.submittedAt&&y.push({id:`hist-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,timestamp:b,action:"Application Submitted",userId:w,userName:N,details:"Application submitted for review"}),x.uploadedFiles){const E=g.uploadedFiles.length,C=x.uploadedFiles.length;C>E?y.push({id:`hist-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,timestamp:b,action:"Document Uploaded",userId:w,userName:N,details:`${C-E} document(s) uploaded`}):C<E&&y.push({id:`hist-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,timestamp:b,action:"Document Removed",userId:w,userName:N,details:`${E-C} document(s) removed`})}return y};return{applications:t,templates:n,createApplication:i,updateApplication:a,deleteApplication:o,getApplicationById:l,getApplicationsByCustomer:c,createTemplate:d,updateTemplate:u,deleteTemplate:h,getTemplateById:f,uploadFile:m,removeFile:v}}function N1e({fieldId:t,applicationId:e,validation:n,multiple:r=!1}){var b;const{getApplicationById:i,uploadFile:a,removeFile:o}=bA(),{toast:l}=Ot(),c=A.useRef(null),[d,u]=A.useState(!1),h=i(e),f=(h==null?void 0:h.uploadedFiles.filter(w=>w.fieldId===t))||[],m=w=>{var N;if(n!=null&&n.maxFileSize&&w.size>n.maxFileSize)return`File size must be less than ${Math.round(n.maxFileSize/1024/1024)}MB`;if(n!=null&&n.fileTypes){const E=(N=w.name.split(".").pop())==null?void 0:N.toLowerCase();if(E&&!n.fileTypes.includes(E))return`File type must be one of: ${n.fileTypes.join(", ")}`}return null},v=async w=>{const N=Array.from(w.target.files||[]);if(N.length!==0){u(!0);try{for(const E of N){const C=m(E);if(C){l({title:"File Validation Error",description:`${E.name}: ${C}`,variant:"destructive"});continue}await a(e,t,E)}l({title:"Files Uploaded",description:`${N.length} file(s) uploaded successfully`})}catch{l({title:"Upload Error",description:"Failed to upload files. Please try again.",variant:"destructive"})}finally{u(!1),c.current&&(c.current.value="")}}},p=w=>{o(e,w),l({title:"File Removed",description:"File has been removed successfully"})},g=w=>{window.open(w.url,"_blank")},x=w=>{if(w===0)return"0 Bytes";const N=1024,E=["Bytes","KB","MB","GB"],C=Math.floor(Math.log(w)/Math.log(N));return parseFloat((w/Math.pow(N,C)).toFixed(2))+" "+E[C]},y=w=>{var N;return(N=w.split(".").pop())==null||N.toLowerCase(),s.jsx(rpe,{className:"h-4 w-4"})};return s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"border-2 border-dashed border-muted-foreground/25 rounded-lg p-6",children:s.jsxs("div",{className:"text-center",children:[s.jsx(Cd,{className:"h-8 w-8 mx-auto mb-4 text-muted-foreground"}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:r?"Drop files here or click to browse":"Drop file here or click to browse"}),(n==null?void 0:n.fileTypes)&&s.jsxs("p",{className:"text-xs text-muted-foreground",children:["Accepted formats: ",n.fileTypes.join(", ").toUpperCase()]}),(n==null?void 0:n.maxFileSize)&&s.jsxs("p",{className:"text-xs text-muted-foreground",children:["Max file size: ",Math.round(n.maxFileSize/1024/1024),"MB"]})]}),s.jsx(Q,{type:"button",variant:"outline",className:"mt-4",onClick:()=>{var w;return(w=c.current)==null?void 0:w.click()},disabled:d,children:d?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-current mr-2"}),"Uploading..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Cd,{className:"h-4 w-4 mr-2"}),"Choose ",r?"Files":"File"]})}),s.jsx("input",{ref:c,type:"file",className:"hidden",multiple:r,accept:(b=n==null?void 0:n.fileTypes)==null?void 0:b.map(w=>`.${w}`).join(","),onChange:v})]})}),f.length>0&&s.jsxs("div",{className:"space-y-2",children:[s.jsx("h4",{className:"text-sm font-medium",children:"Uploaded Files"}),s.jsx("div",{className:"space-y-2",children:f.map(w=>s.jsx(he,{children:s.jsx(fe,{className:"p-3",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[y(w.name),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium",children:w.name}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:[x(w.size),"  Uploaded ",new Date(w.uploadedAt).toLocaleDateString()]})]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Q,{type:"button",variant:"ghost",size:"sm",onClick:()=>g(w),children:s.jsx(Wr,{className:"h-4 w-4"})}),s.jsx(Q,{type:"button",variant:"ghost",size:"sm",onClick:()=>p(w.id),children:s.jsx(on,{className:"h-4 w-4"})})]})]})})},w.id))})]})]})}function S1e({section:t,data:e,onChange:n,validationErrors:r,applicationId:i}){const a=t.fields.sort((d,u)=>d.order-u.order),o=(d,u)=>{n({...e,[d]:u})},l=d=>{if(!d.conditionalLogic)return!0;const u=e[d.conditionalLogic.dependsOn],h=d.conditionalLogic.condition,f=d.conditionalLogic.value;switch(h){case"equals":return u===f;case"not_equals":return u!==f;case"contains":return u&&u.includes(f);case"greater_than":return Number(u)>Number(f);case"less_than":return Number(u)<Number(f);default:return!0}},c=d=>{var v,p,g,x;const u=`${t.id}.${d.id}`,h=r[u],f=e[d.id]||"";if(!l(d))return null;const m={id:d.id,value:f,onChange:y=>o(d.id,y.target.value),placeholder:d.placeholder,className:h?"border-red-500":""};switch(d.type){case"text":case"email":case"phone":return s.jsxs("div",{className:"space-y-2",children:[s.jsxs(ae,{htmlFor:d.id,children:[d.label,d.required&&s.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),s.jsx(Ae,{...m,type:d.type==="email"?"email":d.type==="phone"?"tel":"text"}),h&&s.jsx("p",{className:"text-sm text-red-500",children:r[u]})]},d.id);case"number":case"currency":return s.jsxs("div",{className:"space-y-2",children:[s.jsxs(ae,{htmlFor:d.id,children:[d.label,d.required&&s.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),s.jsxs("div",{className:"relative",children:[d.type==="currency"&&s.jsx("span",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground",children:"$"}),s.jsx(Ae,{...m,type:"number",className:`${h?"border-red-500":""} ${d.type==="currency"?"pl-8":""}`,min:(v=d.validation)==null?void 0:v.min,max:(p=d.validation)==null?void 0:p.max,step:d.type==="currency"?"0.01":"1"})]}),h&&s.jsx("p",{className:"text-sm text-red-500",children:r[u]})]},d.id);case"date":return s.jsxs("div",{className:"space-y-2",children:[s.jsxs(ae,{htmlFor:d.id,children:[d.label,d.required&&s.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),s.jsx(Ae,{...m,type:"date"}),h&&s.jsx("p",{className:"text-sm text-red-500",children:r[u]})]},d.id);case"select":return s.jsxs("div",{className:"space-y-2",children:[s.jsxs(ae,{htmlFor:d.id,children:[d.label,d.required&&s.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),s.jsxs(Ke,{value:f,onValueChange:y=>o(d.id,y),children:[s.jsx(He,{className:h?"border-red-500":"",children:s.jsx(Ye,{placeholder:d.placeholder||`Select ${d.label.toLowerCase()}`})}),s.jsx(We,{children:(g=d.options)==null?void 0:g.map(y=>s.jsx(le,{value:y,children:y.replace("-"," ").replace(/\b\w/g,b=>b.toUpperCase())},y))})]}),h&&s.jsx("p",{className:"text-sm text-red-500",children:r[u]})]},d.id);case"radio":return s.jsxs("div",{className:"space-y-3",children:[s.jsxs(ae,{children:[d.label,d.required&&s.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),s.jsx("div",{className:"space-y-2",children:(x=d.options)==null?void 0:x.map(y=>s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("input",{type:"radio",id:`${d.id}-${y}`,name:d.id,value:y,checked:f===y,onChange:b=>o(d.id,b.target.value),className:"h-4 w-4"}),s.jsx(ae,{htmlFor:`${d.id}-${y}`,className:"font-normal",children:y.replace("-"," ").replace(/\b\w/g,b=>b.toUpperCase())})]},y))}),h&&s.jsx("p",{className:"text-sm text-red-500",children:r[u]})]},d.id);case"checkbox":return s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx($t,{id:d.id,checked:f===!0,onCheckedChange:y=>o(d.id,y)}),s.jsxs(ae,{htmlFor:d.id,className:"font-normal",children:[d.label,d.required&&s.jsx("span",{className:"text-red-500 ml-1",children:"*"})]})]}),h&&s.jsx("p",{className:"text-sm text-red-500",children:r[u]})]},d.id);case"textarea":return s.jsxs("div",{className:"space-y-2",children:[s.jsxs(ae,{htmlFor:d.id,children:[d.label,d.required&&s.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),s.jsx(un,{id:d.id,value:f,onChange:y=>o(d.id,y.target.value),placeholder:d.placeholder,className:h?"border-red-500":"",rows:4}),h&&s.jsx("p",{className:"text-sm text-red-500",children:r[u]})]},d.id);case"file":return s.jsxs("div",{className:"space-y-2",children:[s.jsxs(ae,{children:[d.label,d.required&&s.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),s.jsx(N1e,{fieldId:d.id,applicationId:i,validation:d.validation,multiple:!0}),h&&s.jsx("p",{className:"text-sm text-red-500",children:r[u]})]},d.id);case"signature":return s.jsxs("div",{className:"space-y-2",children:[s.jsxs(ae,{htmlFor:d.id,children:[d.label,d.required&&s.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),s.jsxs("div",{className:"border-2 border-dashed border-muted-foreground/25 rounded-lg p-8 text-center",children:[s.jsx("p",{className:"text-muted-foreground mb-4",children:"Electronic signature will be captured here"}),s.jsx(Q,{variant:"outline",type:"button",children:"Add Signature"})]}),h&&s.jsx("p",{className:"text-sm text-red-500",children:r[u]})]},d.id);default:return null}};return s.jsx("div",{className:"space-y-6",children:a.map(c)})}function one({application:t,onSave:e,onCancel:n,onSubmit:r}){const{tenant:i}=ya(),{getTemplateById:a}=bA(),[o,l]=A.useState(0),[c,d]=A.useState(t.data||{}),[u,h]=A.useState(!1),[f,m]=A.useState({}),v=a(t.templateId);if(!v)return s.jsxs("div",{className:"text-center py-12",children:[s.jsx(Zt,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),s.jsx("p",{className:"text-muted-foreground",children:"Template not found"}),s.jsx(Q,{onClick:n,className:"mt-4",children:"Go Back"})]});const p=v.sections.sort((I,k)=>I.order-k.order),g=p[o],x=(o+1)/p.length*100,y=()=>{var D,P;const I=((D=i==null?void 0:i.settings)==null?void 0:D.platformType)||"mh",k=((P=i==null?void 0:i.settings)==null?void 0:P.labelOverrides)||{};if(k["finance.application"])return k["finance.application"];switch(I){case"rv":return"RV Loan Application";case"auto":return"Auto Loan Application";case"mh":default:return"MH Finance Application"}},b=(I,k)=>{const D={...c,[I]:{...c[I],...k}};d(D)},w=()=>{const I={},k=c[g.id]||{};return g.fields.forEach(D=>{if(D.required&&!k[D.id]&&(I[`${g.id}.${D.id}`]=`${D.label} is required`),k[D.id]&&D.validation){const P=k[D.id],R=D.validation;R.minLength&&P.length<R.minLength&&(I[`${g.id}.${D.id}`]=`${D.label} must be at least ${R.minLength} characters`),R.maxLength&&P.length>R.maxLength&&(I[`${g.id}.${D.id}`]=`${D.label} must be no more than ${R.maxLength} characters`),R.pattern&&!new RegExp(R.pattern).test(P)&&(I[`${g.id}.${D.id}`]=`${D.label} format is invalid`),D.type==="email"&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(P)&&(I[`${g.id}.${D.id}`]="Please enter a valid email address")}}),m(I),Object.keys(I).length===0},N=()=>{w()&&o<p.length-1&&l(o+1)},E=()=>{o>0&&l(o-1)},C=()=>{e({data:c,status:"draft"})},j=async()=>{let I=!0;const k={};for(let D=0;D<p.length;D++){const P=p[D],R=c[P.id]||{};P.fields.forEach(_=>{_.required&&!R[_.id]&&(k[`${P.id}.${_.id}`]=`${_.label} is required`,I=!1)})}if(!I){m(k);const D=p.findIndex(P=>Object.keys(k).some(R=>R.startsWith(P.id)));D!==-1&&l(D);return}h(!0),await new Promise(D=>setTimeout(D,1e3)),r({data:c,status:"submitted",submittedAt:new Date().toISOString()}),h(!1)};return s.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsxs(Q,{variant:"ghost",onClick:n,children:[s.jsx(WR,{className:"h-4 w-4 mr-2"}),"Back"]}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold",children:y()}),s.jsx("p",{className:"text-muted-foreground",children:t.customerName||"New Application"})]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Re,{variant:"outline",children:t.status.replace("_"," ").toUpperCase()}),t.fraudCheckStatus&&s.jsxs(Re,{variant:"secondary",children:["IDV: ",t.fraudCheckStatus.charAt(0).toUpperCase()+t.fraudCheckStatus.slice(1)]})]})]}),s.jsx(he,{children:s.jsx(fe,{className:"pt-6",children:s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsxs("span",{children:["Step ",o+1," of ",p.length]}),s.jsxs("span",{children:[Math.round(x),"% Complete"]})]}),s.jsx(Pd,{value:x,className:"h-2"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:g.title})]})})}),s.jsxs(he,{children:[s.jsxs(ye,{children:[s.jsx(be,{children:g.title}),g.description&&s.jsx(Be,{children:g.description})]}),s.jsx(fe,{children:s.jsx(S1e,{section:g,data:c[g.id]||{},onChange:I=>b(g.id,I),validationErrors:f,applicationId:t.id})})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsxs(Q,{variant:"outline",onClick:E,disabled:o===0,children:[s.jsx(WR,{className:"h-4 w-4 mr-2"}),"Previous"]}),s.jsxs("div",{className:"flex space-x-3",children:[s.jsxs(Q,{variant:"outline",onClick:C,children:[s.jsx(Wn,{className:"h-4 w-4 mr-2"}),"Save Draft"]}),o===p.length-1?s.jsx(Q,{onClick:j,disabled:u,children:u?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Submitting..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Do,{className:"h-4 w-4 mr-2"}),"Submit Application"]})}):s.jsxs(Q,{onClick:N,children:["Next",s.jsx(I$,{className:"h-4 w-4 ml-2"})]})]})]})]})}function lne(){const{tenant:t}=ya(),{getCustomerId:e,getDisplayName:n,getDisplayEmail:r}=Tv(),{toast:i}=Ot(),{applications:a,templates:o,createApplication:l,updateApplication:c,getApplicationsByCustomer:d}=bA(),[u,h]=A.useState(null),[f,m]=A.useState(!1),v=e(),p=d(v),g=()=>{var k,D;const j=((k=t==null?void 0:t.settings)==null?void 0:k.platformType)||"mh",I=((D=t==null?void 0:t.settings)==null?void 0:D.labelOverrides)||{};if(I["finance.application"])return I["finance.application"];switch(j){case"rv":return"RV Loan Application";case"auto":return"Auto Loan Application";case"mh":default:return"MH Finance Application"}},x=j=>{switch(j){case"draft":return s.jsx(ar,{className:"h-4 w-4"});case"submitted":case"under_review":return s.jsx(gn,{className:"h-4 w-4"});case"approved":case"completed":return s.jsx(Rn,{className:"h-4 w-4"});case"denied":return s.jsx(ko,{className:"h-4 w-4"});default:return s.jsx(Zt,{className:"h-4 w-4"})}},y=j=>{switch(j){case"draft":return"bg-gray-100 text-gray-800";case"submitted":return"bg-blue-100 text-blue-800";case"under_review":return"bg-yellow-100 text-yellow-800";case"approved":return"bg-green-100 text-green-800";case"denied":return"bg-red-100 text-red-800";case"completed":return"bg-emerald-100 text-emerald-800";default:return"bg-gray-100 text-gray-800"}},b=j=>{const I=o.find(P=>P.id===j.templateId);if(!I)return 0;const k=I.sections.reduce((P,R)=>P+R.fields.filter(_=>_.required).length,0),D=I.sections.reduce((P,R)=>{const _=j.data[R.id]||{};return P+R.fields.filter(M=>M.required&&_[M.id]).length},0);return k>0?D/k*100:0},w=()=>{const j=o.find(k=>k.isActive)||o[0];if(!j){i({title:"No Templates Available",description:"Please contact support to set up application templates.",variant:"destructive"});return}const I=l({customerId:v,customerName:n(),customerEmail:r(),templateId:j.id,status:"draft"});h(I),m(!0)},N=j=>{h(j),m(j.status==="draft")},E=j=>{u&&(c(u.id,j),i({title:"Application Saved",description:"Your application has been saved successfully."}))},C=j=>{u&&(c(u.id,{...j,status:"submitted"}),h(null),m(!1),i({title:"Application Submitted",description:"Your application has been submitted for review. You will be notified of the decision."}))};return f&&u?s.jsx(one,{application:u,onSave:E,onCancel:()=>{h(null),m(!1)},onSubmit:C}):s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"space-y-2",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold",children:"Applications"}),s.jsxs("p",{className:"text-muted-foreground",children:["Manage your ",g().toLowerCase(),"s"]})]}),s.jsxs(Q,{onClick:w,children:[s.jsx(yt,{className:"h-4 w-4 mr-2"}),"New Application"]})]})}),p.length>0&&s.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[s.jsx(he,{children:s.jsx(fe,{className:"pt-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Total Applications"}),s.jsx("p",{className:"text-2xl font-bold",children:p.length})]}),s.jsx(Zt,{className:"h-8 w-8 text-muted-foreground"})]})})}),s.jsx(he,{children:s.jsx(fe,{className:"pt-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"In Review"}),s.jsx("p",{className:"text-2xl font-bold",children:p.filter(j=>["submitted","under_review"].includes(j.status)).length})]}),s.jsx(gn,{className:"h-8 w-8 text-muted-foreground"})]})})}),s.jsx(he,{children:s.jsx(fe,{className:"pt-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Approved"}),s.jsx("p",{className:"text-2xl font-bold",children:p.filter(j=>["approved","completed"].includes(j.status)).length})]}),s.jsx(Rn,{className:"h-8 w-8 text-green-600"})]})})})]}),s.jsxs(he,{children:[s.jsxs(ye,{children:[s.jsx(be,{children:"Your Applications"}),s.jsx(Be,{children:"View and manage your finance applications"})]}),s.jsx(fe,{children:s.jsxs("div",{className:"space-y-4",children:[p.map(j=>{const I=b(j);return s.jsx("div",{className:"border rounded-lg p-4 hover:bg-accent/50 transition-colors",children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex-1 space-y-3",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[x(j.status),s.jsxs("div",{children:[s.jsxs("h4",{className:"font-semibold",children:[g()," #",j.id.slice(-6).toUpperCase()]}),s.jsxs("p",{className:"text-sm text-muted-foreground",children:["Created ",new Date(j.createdAt).toLocaleDateString(),j.submittedAt&&s.jsxs("span",{children:["  Submitted ",new Date(j.submittedAt).toLocaleDateString()]})]})]})]}),s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx(Re,{className:y(j.status),children:j.status.replace("_"," ").toUpperCase()}),j.fraudCheckStatus&&s.jsxs(Re,{variant:"outline",children:["IDV: ",j.fraudCheckStatus.charAt(0).toUpperCase()+j.fraudCheckStatus.slice(1)]})]}),j.status==="draft"&&s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{children:"Completion Progress"}),s.jsxs("span",{children:[Math.round(I),"%"]})]}),s.jsx(Pd,{value:I,className:"h-2"})]}),j.notes&&s.jsx("div",{className:"bg-muted/50 p-3 rounded-md",children:s.jsx("p",{className:"text-sm",children:j.notes})})]}),s.jsx("div",{className:"flex items-center space-x-2 ml-4",children:s.jsx(Q,{variant:"outline",size:"sm",onClick:()=>N(j),children:j.status==="draft"?s.jsxs(s.Fragment,{children:[s.jsx(ar,{className:"h-4 w-4 mr-2"}),"Continue"]}):s.jsxs(s.Fragment,{children:[s.jsx(Wr,{className:"h-4 w-4 mr-2"}),"View"]})})})]})},j.id)}),p.length===0&&s.jsxs("div",{className:"text-center py-12",children:[s.jsx(Zt,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),s.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Applications Yet"}),s.jsx("p",{className:"text-muted-foreground mb-6",children:"Get started by creating your first finance application"}),s.jsxs(Q,{onClick:w,children:[s.jsx(yt,{className:"h-4 w-4 mr-2"}),"Create Application"]})]})]})})]}),s.jsxs(he,{children:[s.jsx(ye,{children:s.jsx(be,{children:"Need Help?"})}),s.jsx(fe,{children:s.jsx("div",{className:"space-y-4",children:s.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("h4",{className:"font-medium",children:"Application Process"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Learn about our finance application process and requirements"}),s.jsx(Q,{variant:"outline",size:"sm",children:"View Guide"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("h4",{className:"font-medium",children:"Contact Support"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Have questions? Our finance team is here to help"}),s.jsx(Q,{variant:"outline",size:"sm",children:"Contact Us"})]})]})})})]})]})}function A1e(){var f,m,v,p,g,x;const{getCustomerId:t,getDisplayName:e}=Tv(),n=t(),r=e(),{customerData:i,loading:a}=n8(n,r),[o,l]=A.useState(null),c=i.serviceTickets||[],d=y=>{switch(y){case"Open":return"bg-blue-100 text-blue-800";case"In Progress":return"bg-yellow-100 text-yellow-800";case"Waiting for Parts":return"bg-orange-100 text-orange-800";case"Customer Review":return"bg-purple-100 text-purple-800";case"Completed":return"bg-green-100 text-green-800";case"Cancelled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},u=y=>{switch(y){case"Low":return"bg-gray-100 text-gray-800";case"Medium":return"bg-blue-100 text-blue-800";case"High":return"bg-orange-100 text-orange-800";case"Urgent":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},h=y=>{switch(y){case"Completed":return s.jsx(Rn,{className:"h-4 w-4"});case"In Progress":return s.jsx(gn,{className:"h-4 w-4"});case"Open":return s.jsx(mm,{className:"h-4 w-4"});default:return s.jsx(pl,{className:"h-4 w-4"})}};if(a)return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"animate-pulse",children:[s.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/4 mb-2"}),s.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2"})]}),s.jsx("div",{className:"space-y-4",children:[1,2,3].map(y=>s.jsx("div",{className:"animate-pulse",children:s.jsx("div",{className:"h-32 bg-gray-200 rounded"})},y))})]});if(o){const y=o.totalCost||0,b=((f=o.parts)==null?void 0:f.reduce((N,E)=>N+E.cost*E.quantity,0))||0,w=((m=o.labor)==null?void 0:m.reduce((N,E)=>N+E.hours*E.rate,0))||0;return s.jsxs("div",{className:"space-y-6",children:[s.jsx(Q,{variant:"ghost",onClick:()=>l(null),children:" Back to Service Tickets"}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[h(o.status),s.jsx("h1",{className:"text-2xl font-bold",children:o.title}),s.jsx(Re,{className:d(o.status),children:o.status}),s.jsxs(Re,{className:u(o.priority),children:[o.priority," Priority"]})]}),s.jsxs("p",{className:"text-muted-foreground",children:["Ticket #",o.id.slice(-6).toUpperCase(),"  ",o.vehicleInfo]})]}),s.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[s.jsx(he,{children:s.jsx(fe,{className:"pt-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Category"}),s.jsx("p",{className:"text-lg font-bold",children:o.category})]}),s.jsx(pl,{className:"h-8 w-8 text-muted-foreground"})]})})}),s.jsx(he,{children:s.jsx(fe,{className:"pt-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Assigned To"}),s.jsx("p",{className:"text-lg font-bold",children:o.assignedTechName||"Unassigned"})]}),s.jsx(Gr,{className:"h-8 w-8 text-muted-foreground"})]})})}),s.jsx(he,{children:s.jsx(fe,{className:"pt-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Scheduled Date"}),s.jsx("p",{className:"text-lg font-bold",children:o.scheduledDate?ht(o.scheduledDate):"TBD"})]}),s.jsx(Sn,{className:"h-8 w-8 text-muted-foreground"})]})})}),s.jsx(he,{children:s.jsx(fe,{className:"pt-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Estimated Cost"}),s.jsx("p",{className:"text-lg font-bold",children:Le(y)})]}),s.jsx(Rn,{className:"h-8 w-8 text-muted-foreground"})]})})})]}),s.jsxs(he,{children:[s.jsx(ye,{children:s.jsx(be,{children:"Service Description"})}),s.jsxs(fe,{children:[s.jsx("p",{className:"text-sm",children:o.description}),o.notes&&s.jsxs("div",{className:"mt-4 p-3 bg-muted/50 rounded-lg",children:[s.jsx("h4",{className:"font-medium mb-2",children:"Additional Notes"}),s.jsx("p",{className:"text-sm",children:o.notes})]})]})]}),(((v=o.parts)==null?void 0:v.length)>0||((p=o.labor)==null?void 0:p.length)>0)&&s.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[((g=o.parts)==null?void 0:g.length)>0&&s.jsxs(he,{children:[s.jsxs(ye,{children:[s.jsx(be,{children:"Parts"}),s.jsx(Be,{children:"Parts used for this service"})]}),s.jsx(fe,{children:s.jsxs("div",{className:"space-y-3",children:[o.parts.map(N=>s.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:N.name}),s.jsxs("p",{className:"text-sm text-muted-foreground",children:["Qty: ",N.quantity,"  ",Le(N.cost)]})]}),s.jsx("p",{className:"font-semibold",children:Le(N.quantity*N.cost)})]},N.id)),s.jsx("div",{className:"border-t pt-3",children:s.jsxs("div",{className:"flex justify-between font-semibold",children:[s.jsx("span",{children:"Parts Total:"}),s.jsx("span",{children:Le(b)})]})})]})})]}),((x=o.labor)==null?void 0:x.length)>0&&s.jsxs(he,{children:[s.jsxs(ye,{children:[s.jsx(be,{children:"Labor"}),s.jsx(Be,{children:"Labor charges for this service"})]}),s.jsx(fe,{children:s.jsxs("div",{className:"space-y-3",children:[o.labor.map(N=>s.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:N.description}),s.jsxs("p",{className:"text-sm text-muted-foreground",children:[N.hours," hrs  ",Le(N.rate),"/hr"]})]}),s.jsx("p",{className:"font-semibold",children:Le(N.hours*N.rate)})]},N.id)),s.jsx("div",{className:"border-t pt-3",children:s.jsxs("div",{className:"flex justify-between font-semibold",children:[s.jsx("span",{children:"Labor Total:"}),s.jsx("span",{children:Le(w)})]})})]})})]})]}),o.timeline&&s.jsxs(he,{children:[s.jsxs(ye,{children:[s.jsx(be,{children:"Service Timeline"}),s.jsx(Be,{children:"Progress updates for this service ticket"})]}),s.jsx(fe,{children:s.jsx("div",{className:"space-y-4",children:o.timeline.sort((N,E)=>new Date(E.timestamp).getTime()-new Date(N.timestamp).getTime()).map(N=>s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx("div",{className:"flex-shrink-0 mt-1",children:s.jsx("div",{className:"w-8 h-8 bg-primary/10 rounded-full flex items-center justify-center",children:s.jsx("div",{className:"w-3 h-3 bg-primary rounded-full"})})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h4",{className:"text-sm font-medium",children:N.action}),s.jsx("span",{className:"text-xs text-muted-foreground",children:ht(N.timestamp)})]}),s.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:N.details}),s.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["by ",N.user]})]})]},N.id))})})]})]})}return s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"space-y-2",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold",children:"Service Tickets"}),s.jsx("p",{className:"text-muted-foreground",children:"Track your service requests and maintenance history"})]}),s.jsxs(Q,{children:[s.jsx(yt,{className:"h-4 w-4 mr-2"}),"New Service Request"]})]})}),c.length>0&&s.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[s.jsx(he,{children:s.jsx(fe,{className:"pt-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Total Tickets"}),s.jsx("p",{className:"text-2xl font-bold",children:c.length})]}),s.jsx(pl,{className:"h-8 w-8 text-muted-foreground"})]})})}),s.jsx(he,{children:s.jsx(fe,{className:"pt-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"In Progress"}),s.jsx("p",{className:"text-2xl font-bold",children:c.filter(y=>y.status==="In Progress").length})]}),s.jsx(gn,{className:"h-8 w-8 text-muted-foreground"})]})})}),s.jsx(he,{children:s.jsx(fe,{className:"pt-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Completed"}),s.jsx("p",{className:"text-2xl font-bold",children:c.filter(y=>y.status==="Completed").length})]}),s.jsx(Rn,{className:"h-8 w-8 text-green-600"})]})})})]}),s.jsxs(he,{children:[s.jsxs(ye,{children:[s.jsx(be,{children:"Your Service Tickets"}),s.jsx(Be,{children:"View and track your service requests"})]}),s.jsx(fe,{children:s.jsxs("div",{className:"space-y-4",children:[c.map(y=>s.jsx("div",{className:"border rounded-lg p-4 hover:bg-accent/50 transition-colors",children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex-1 space-y-3",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[h(y.status),s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold",children:y.title}),s.jsxs("p",{className:"text-sm text-muted-foreground",children:["Ticket #",y.id.slice(-6).toUpperCase(),"  ",y.vehicleInfo]})]}),s.jsx(Re,{className:d(y.status),children:y.status}),s.jsx(Re,{className:u(y.priority),children:y.priority})]}),s.jsx("p",{className:"text-sm text-muted-foreground",children:y.description}),s.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Category"}),s.jsx("p",{className:"font-semibold",children:y.category})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Assigned To"}),s.jsx("p",{className:"font-semibold",children:y.assignedTechName||"Unassigned"})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:y.status==="Completed"?"Completed":"Scheduled"}),s.jsx("p",{className:"font-semibold",children:y.status==="Completed"&&y.completedDate?ht(y.completedDate):y.scheduledDate?ht(y.scheduledDate):"TBD"})]})]}),y.totalCost&&s.jsxs("div",{className:"bg-muted/50 p-3 rounded-lg",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-sm font-medium",children:"Estimated Cost:"}),s.jsx("span",{className:"font-semibold",children:Le(y.totalCost)})]}),y.customerApproved&&s.jsx("p",{className:"text-xs text-green-600 mt-1",children:" Approved by customer"})]})]}),s.jsx("div",{className:"flex items-center space-x-2 ml-4",children:s.jsxs(Q,{variant:"outline",size:"sm",onClick:()=>l(y),children:[s.jsx(Wr,{className:"h-4 w-4 mr-2"}),"View Details"]})})]})},y.id)),c.length===0&&s.jsxs("div",{className:"text-center py-12",children:[s.jsx(pl,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),s.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Service Tickets"}),s.jsx("p",{className:"text-muted-foreground mb-6",children:"You don't have any service tickets yet."}),s.jsxs(Q,{children:[s.jsx(yt,{className:"h-4 w-4 mr-2"}),"Create Service Request"]})]})]})})]})]})}function C1e(){const{getDisplayName:t,getDisplayEmail:e,getCustomerId:n}=Tv(),{toast:r}=Ot(),[i,a]=A.useState(!1),[o,l]=A.useState(!1),[c,d]=A.useState(!1),[u,h]=A.useState({name:t(),email:e(),phone:"(555) 123-4567",address:"123 Main St",city:"Anytown",state:"CA",zipCode:"12345"}),[f,m]=A.useState({emailNotifications:!0,smsNotifications:!1,paymentReminders:!0,serviceUpdates:!0,agreementUpdates:!0,marketingEmails:!1}),[v,p]=A.useState({currentPassword:"",newPassword:"",confirmPassword:"",twoFactorEnabled:!1}),g=async()=>{a(!0);try{await new Promise(b=>setTimeout(b,1e3)),r({title:"Profile Updated",description:"Your profile information has been saved successfully."})}catch{r({title:"Error",description:"Failed to update profile. Please try again.",variant:"destructive"})}finally{a(!1)}},x=async()=>{a(!0);try{await new Promise(b=>setTimeout(b,1e3)),r({title:"Notifications Updated",description:"Your notification preferences have been saved."})}catch{r({title:"Error",description:"Failed to update notifications. Please try again.",variant:"destructive"})}finally{a(!1)}},y=async()=>{if(!v.currentPassword||!v.newPassword){r({title:"Validation Error",description:"Please fill in all password fields.",variant:"destructive"});return}if(v.newPassword!==v.confirmPassword){r({title:"Validation Error",description:"New passwords do not match.",variant:"destructive"});return}if(v.newPassword.length<8){r({title:"Validation Error",description:"Password must be at least 8 characters long.",variant:"destructive"});return}a(!0);try{await new Promise(b=>setTimeout(b,1e3)),p({currentPassword:"",newPassword:"",confirmPassword:"",twoFactorEnabled:v.twoFactorEnabled}),r({title:"Password Changed",description:"Your password has been updated successfully."})}catch{r({title:"Error",description:"Failed to change password. Please try again.",variant:"destructive"})}finally{a(!1)}};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("h1",{className:"text-2xl font-bold",children:"Account Settings"}),s.jsx("p",{className:"text-muted-foreground",children:"Manage your account preferences and security settings"})]}),s.jsxs(Vn,{defaultValue:"profile",className:"space-y-6",children:[s.jsxs(Mn,{className:"grid w-full grid-cols-3",children:[s.jsxs(tt,{value:"profile",className:"flex items-center space-x-2",children:[s.jsx(Gr,{className:"h-4 w-4"}),s.jsx("span",{children:"Profile"})]}),s.jsxs(tt,{value:"notifications",className:"flex items-center space-x-2",children:[s.jsx(D$,{className:"h-4 w-4"}),s.jsx("span",{children:"Notifications"})]}),s.jsxs(tt,{value:"security",className:"flex items-center space-x-2",children:[s.jsx(O$,{className:"h-4 w-4"}),s.jsx("span",{children:"Security"})]})]}),s.jsx(rt,{value:"profile",children:s.jsxs(he,{children:[s.jsxs(ye,{children:[s.jsx(be,{children:"Profile Information"}),s.jsx(Be,{children:"Update your personal information and contact details"})]}),s.jsxs(fe,{className:"space-y-6",children:[s.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"name",children:"Full Name"}),s.jsx(Ae,{id:"name",value:u.name,onChange:b=>h({...u,name:b.target.value})})]}),s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"email",children:"Email Address"}),s.jsx(Ae,{id:"email",type:"email",value:u.email,onChange:b=>h({...u,email:b.target.value})})]})]}),s.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"phone",children:"Phone Number"}),s.jsx(Ae,{id:"phone",type:"tel",value:u.phone,onChange:b=>h({...u,phone:b.target.value})})]}),s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"customerId",children:"Customer ID"}),s.jsx(Ae,{id:"customerId",value:n(),disabled:!0,className:"bg-muted"})]})]}),s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"address",children:"Street Address"}),s.jsx(Ae,{id:"address",value:u.address,onChange:b=>h({...u,address:b.target.value})})]}),s.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"city",children:"City"}),s.jsx(Ae,{id:"city",value:u.city,onChange:b=>h({...u,city:b.target.value})})]}),s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"state",children:"State"}),s.jsxs(Ke,{value:u.state,onValueChange:b=>h({...u,state:b}),children:[s.jsx(He,{children:s.jsx(Ye,{})}),s.jsxs(We,{children:[s.jsx(le,{value:"CA",children:"California"}),s.jsx(le,{value:"TX",children:"Texas"}),s.jsx(le,{value:"FL",children:"Florida"}),s.jsx(le,{value:"NY",children:"New York"})]})]})]}),s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"zipCode",children:"ZIP Code"}),s.jsx(Ae,{id:"zipCode",value:u.zipCode,onChange:b=>h({...u,zipCode:b.target.value})})]})]}),s.jsx("div",{className:"flex justify-end",children:s.jsx(Q,{onClick:g,disabled:i,children:i?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Saving..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Wn,{className:"h-4 w-4 mr-2"}),"Save Profile"]})})})]})]})}),s.jsx(rt,{value:"notifications",children:s.jsxs(he,{children:[s.jsxs(ye,{children:[s.jsx(be,{children:"Notification Preferences"}),s.jsx(Be,{children:"Choose how you'd like to receive notifications"})]}),s.jsxs(fe,{className:"space-y-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium",children:"Email Notifications"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Receive notifications via email"})]}),s.jsx($t,{checked:f.emailNotifications,onCheckedChange:b=>m({...f,emailNotifications:!!b})})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium",children:"SMS Notifications"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Receive notifications via text message"})]}),s.jsx($t,{checked:f.smsNotifications,onCheckedChange:b=>m({...f,smsNotifications:!!b})})]}),s.jsxs("div",{className:"border-t pt-4",children:[s.jsx("h4",{className:"font-medium mb-4",children:"Notification Types"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Payment Reminders"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Reminders for upcoming loan payments"})]}),s.jsx($t,{checked:f.paymentReminders,onCheckedChange:b=>m({...f,paymentReminders:!!b})})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Service Updates"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Updates on service ticket progress"})]}),s.jsx($t,{checked:f.serviceUpdates,onCheckedChange:b=>m({...f,serviceUpdates:!!b})})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Agreement Updates"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Notifications about agreement status changes"})]}),s.jsx($t,{checked:f.agreementUpdates,onCheckedChange:b=>m({...f,agreementUpdates:!!b})})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Marketing Emails"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Promotional offers and company updates"})]}),s.jsx($t,{checked:f.marketingEmails,onCheckedChange:b=>m({...f,marketingEmails:!!b})})]})]})]})]}),s.jsx("div",{className:"flex justify-end",children:s.jsx(Q,{onClick:x,disabled:i,children:i?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Saving..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Wn,{className:"h-4 w-4 mr-2"}),"Save Preferences"]})})})]})]})}),s.jsx(rt,{value:"security",children:s.jsxs("div",{className:"space-y-6",children:[s.jsxs(he,{children:[s.jsxs(ye,{children:[s.jsx(be,{children:"Change Password"}),s.jsx(Be,{children:"Update your account password"})]}),s.jsxs(fe,{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"currentPassword",children:"Current Password"}),s.jsxs("div",{className:"relative",children:[s.jsx(Ae,{id:"currentPassword",type:o?"text":"password",value:v.currentPassword,onChange:b=>p({...v,currentPassword:b.target.value})}),s.jsx(Q,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3",onClick:()=>l(!o),children:o?s.jsx(vz,{className:"h-4 w-4"}):s.jsx(Wr,{className:"h-4 w-4"})})]})]}),s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"newPassword",children:"New Password"}),s.jsxs("div",{className:"relative",children:[s.jsx(Ae,{id:"newPassword",type:c?"text":"password",value:v.newPassword,onChange:b=>p({...v,newPassword:b.target.value})}),s.jsx(Q,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3",onClick:()=>d(!c),children:c?s.jsx(vz,{className:"h-4 w-4"}):s.jsx(Wr,{className:"h-4 w-4"})})]})]}),s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"confirmPassword",children:"Confirm New Password"}),s.jsx(Ae,{id:"confirmPassword",type:"password",value:v.confirmPassword,onChange:b=>p({...v,confirmPassword:b.target.value})})]}),s.jsx("div",{className:"flex justify-end",children:s.jsx(Q,{onClick:y,disabled:i,children:i?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Changing..."]}):"Change Password"})})]})]}),s.jsxs(he,{children:[s.jsxs(ye,{children:[s.jsx(be,{children:"Two-Factor Authentication"}),s.jsx(Be,{children:"Add an extra layer of security to your account"})]}),s.jsxs(fe,{children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium",children:"Enable Two-Factor Authentication"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Require a verification code in addition to your password"})]}),s.jsx($t,{checked:v.twoFactorEnabled,onCheckedChange:b=>p({...v,twoFactorEnabled:!!b})})]}),v.twoFactorEnabled&&s.jsx("div",{className:"mt-4 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:s.jsx("p",{className:"text-sm text-blue-800",children:"Two-factor authentication is enabled. You'll receive a verification code via SMS when logging in."})})]})]}),s.jsxs(he,{children:[s.jsxs(ye,{children:[s.jsx(be,{children:"Recent Login Activity"}),s.jsx(Be,{children:"Monitor recent access to your account"})]}),s.jsx(fe,{children:s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Current Session"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Chrome on Windows  192.168.1.100"})]}),s.jsx(Re,{variant:"outline",className:"bg-green-50 text-green-700 border-green-200",children:"Active"})]}),s.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Yesterday, 3:24 PM"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Safari on iPhone  10.0.0.50"})]}),s.jsx(Re,{variant:"outline",children:"Ended"})]}),s.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"January 20, 2:15 PM"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Chrome on Windows  192.168.1.100"})]}),s.jsx(Re,{variant:"outline",children:"Ended"})]})]})})]})]})})]})]})}const _x={agreementTypes:[{value:"PURCHASE",label:"Purchase Agreement"},{value:"LEASE",label:"Lease Agreement"},{value:"SERVICE",label:"Service Agreement"},{value:"WARRANTY",label:"Warranty Agreement"}],agreementStatuses:[{value:"DRAFT",label:"Draft",color:"bg-gray-100 text-gray-800"},{value:"PENDING",label:"Pending Signature",color:"bg-yellow-100 text-yellow-800"},{value:"SIGNED",label:"Signed",color:"bg-blue-100 text-blue-800"},{value:"ACTIVE",label:"Active",color:"bg-green-100 text-green-800"},{value:"EXPIRED",label:"Expired",color:"bg-red-100 text-red-800"},{value:"CANCELLED",label:"Cancelled",color:"bg-red-100 text-red-800"}],sampleAgreements:[{id:"agr-001",type:"PURCHASE",status:"SIGNED",customerId:"cust-001",customerName:"John Smith",customerEmail:"john.smith@email.com",vehicleId:"veh-001",vehicleInfo:"2023 Forest River Cherokee 274RK",quoteId:"quote-001",terms:"Standard purchase agreement terms and conditions. Vehicle sold as-is with manufacturer warranty.",effectiveDate:"2024-01-15T00:00:00Z",expirationDate:null,signedBy:"John Smith",signedAt:"2024-01-15T14:30:00Z",ipAddress:"192.168.1.100",signatureData:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjEwMCI+PHBhdGggZD0iTTEwIDUwIEw1MCAzMCBMOTAgNzAiIHN0cm9rZT0iYmxhY2siIGZpbGw9Im5vbmUiLz48L3N2Zz4=",documents:[{id:"doc-001",name:"Purchase Agreement.pdf",type:"application/pdf",url:"/mock/purchase-agreement.pdf",size:245760,uploadedAt:"2024-01-10T10:00:00Z"},{id:"doc-002",name:"Vehicle Inspection Report.pdf",type:"application/pdf",url:"/mock/inspection-report.pdf",size:156432,uploadedAt:"2024-01-10T10:15:00Z"}],createdAt:"2024-01-10T09:30:00Z",updatedAt:"2024-01-15T14:30:00Z",createdBy:"sales@company.com",totalAmount:35e3,downPayment:5e3,financingAmount:3e4},{id:"agr-002",type:"LEASE",status:"PENDING",customerId:"cust-002",customerName:"Maria Rodriguez",customerEmail:"maria.rodriguez@email.com",vehicleId:"veh-002",vehicleInfo:"2024 Keystone Montana 3761FL",quoteId:"quote-002",terms:"Lease agreement for 24 months with option to purchase. Monthly payment includes maintenance.",effectiveDate:"2024-02-01T00:00:00Z",expirationDate:"2026-02-01T00:00:00Z",signedBy:null,signedAt:null,ipAddress:null,signatureData:null,documents:[{id:"doc-003",name:"Lease Agreement.pdf",type:"application/pdf",url:"/mock/lease-agreement.pdf",size:198432,uploadedAt:"2024-01-20T11:00:00Z"}],createdAt:"2024-01-20T10:30:00Z",updatedAt:"2024-01-20T11:00:00Z",createdBy:"sales@company.com",totalAmount:62e3,monthlyPayment:1250,securityDeposit:2500},{id:"agr-003",type:"SERVICE",status:"ACTIVE",customerId:"cust-003",customerName:"David Johnson",customerEmail:"david.johnson@email.com",vehicleId:"veh-003",vehicleInfo:"2022 Grand Design Solitude 310GK",quoteId:null,terms:"Annual service agreement covering routine maintenance and emergency repairs.",effectiveDate:"2024-01-01T00:00:00Z",expirationDate:"2024-12-31T23:59:59Z",signedBy:"David Johnson",signedAt:"2023-12-28T16:45:00Z",ipAddress:"10.0.0.50",signatureData:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjEwMCI+PHBhdGggZD0iTTIwIDMwIEw2MCA2MCBMMTIwIDIwIiBzdHJva2U9ImJsYWNrIiBmaWxsPSJub25lIi8+PC9zdmc+",documents:[{id:"doc-004",name:"Service Agreement.pdf",type:"application/pdf",url:"/mock/service-agreement.pdf",size:134567,uploadedAt:"2023-12-20T14:00:00Z"}],createdAt:"2023-12-20T13:30:00Z",updatedAt:"2023-12-28T16:45:00Z",createdBy:"service@company.com",annualFee:1200,coverageLevel:"Comprehensive"}],sampleCustomers:[{id:"user-3",name:"David Johnson",email:"david.johnson@example.com"}],sampleVehicles:[{id:"veh-001",info:"2023 Forest River Cherokee 274RK"},{id:"veh-002",info:"2024 Keystone Montana 3761FL"},{id:"veh-003",info:"2022 Grand Design Solitude 310GK"}],sampleQuotes:[{id:"quote-001",number:"Q-2024-001",amount:35e3},{id:"quote-002",number:"Q-2024-002",amount:62e3},{id:"quote-003",number:"Q-2024-003",amount:48e3}],defaultAgreement:{type:"PURCHASE",status:"DRAFT",customerId:"",vehicleId:"",quoteId:"",terms:"",effectiveDate:new Date().toISOString().split("T")[0],expirationDate:"",documents:[]},signatureRequestTemplates:{email:{subject:"Signature Required: {{agreement_type}} Agreement",body:`Dear {{customer_name}},

Your {{agreement_type}} agreement is ready for signature. Please click the link below to review and sign the document:

{{signature_link}}

Agreement Details:
- Type: {{agreement_type}}
- Vehicle: {{vehicle_info}}
- Effective Date: {{effective_date}}

If you have any questions, please contact us at {{company_phone}} or reply to this email.

Best regards,
{{company_name}} Team`},sms:{message:"Hi {{customer_name}}, your {{agreement_type}} agreement is ready for signature. Click here to sign: {{signature_link}} - {{company_name}}"}},documentTemplates:[{id:"template-purchase",name:"Standard Purchase Agreement",type:"PURCHASE",description:"Standard vehicle purchase agreement template"},{id:"template-lease",name:"Standard Lease Agreement",type:"LEASE",description:"Standard vehicle lease agreement template"},{name:"Service Agreement",type:"SERVICE",description:"Annual service agreement template"},{id:"template-warranty",name:"Extended Warranty",type:"WARRANTY",description:"Extended warranty agreement template"}],signatureSettings:{requireIPAddress:!0,requireTimestamp:!0,allowElectronicSignature:!0,signatureExpirationDays:30,reminderIntervalDays:3,maxReminders:3}},La={defaultStatuses:["Open","In Progress","Waiting for Parts","Customer Review","Completed","Cancelled"],formDefaults:{title:"",description:"",category:"Maintenance",priority:"Medium",status:"Open",assignedTo:"",customerId:"",vehicleId:"",scheduledDate:"",estimatedHours:2,notes:""},categoryOptions:["Maintenance","Repair","Inspection","Warranty","Installation","Emergency"],priorityOptions:["Low","Medium","High","Urgent"],technicianOptions:[{id:"tech-001",name:"Mike Johnson",specialties:["Electrical","Plumbing"]},{id:"tech-002",name:"Sarah Davis",specialties:["HVAC","Appliances"]},{id:"tech-003",name:"Tom Wilson",specialties:["Structural","Roofing"]},{id:"tech-004",name:"Lisa Chen",specialties:["General Maintenance"]}],sampleTickets:[{id:"ticket-001",title:"AC Unit Not Cooling Properly",description:"Customer reports that the air conditioning unit is running but not cooling the home effectively. Temperature differential is only 5 degrees.",category:"Repair",priority:"High",status:"In Progress",customerId:"cust-001",customerName:"John Smith",customerPhone:"(555) 123-4567",customerEmail:"john.smith@email.com",vehicleId:"vh-001",vehicleInfo:"2020 Forest River Cherokee 274RK",assignedTo:"tech-002",assignedTechName:"Sarah Davis",scheduledDate:"2024-01-15T10:00:00Z",createdAt:"2024-01-12T09:30:00Z",updatedAt:"2024-01-14T14:20:00Z",estimatedHours:4,actualHours:2.5,parts:[{id:"part-001",name:"AC Capacitor",quantity:1,cost:45.99},{id:"part-002",name:"Refrigerant R410A",quantity:2,cost:89.5}],labor:[{id:"labor-001",description:"Diagnostic and testing",hours:1,rate:85},{id:"labor-002",description:"Capacitor replacement",hours:1.5,rate:85}],timeline:[{id:"timeline-001",timestamp:"2024-01-12T09:30:00Z",action:"Ticket Created",user:"System",details:"Service ticket created by customer portal"},{id:"timeline-002",timestamp:"2024-01-12T11:15:00Z",action:"Assigned",user:"Manager",details:"Assigned to Sarah Davis - HVAC specialist"},{id:"timeline-003",timestamp:"2024-01-14T10:00:00Z",action:"Status Updated",user:"Sarah Davis",details:"Started diagnostic work - found faulty capacitor"},{id:"timeline-004",timestamp:"2024-01-14T14:20:00Z",action:"Parts Ordered",user:"Sarah Davis",details:"Ordered replacement capacitor and refrigerant"}],notes:"Customer mentioned the issue started about a week ago. Unit is 3 years old, still under extended warranty for parts.",totalCost:347.49,customerApproved:!0},{id:"ticket-002",title:"Annual Safety Inspection",description:"Scheduled annual safety inspection including electrical, plumbing, and structural components.",category:"Inspection",priority:"Medium",status:"Completed",customerId:"cust-002",customerName:"Maria Rodriguez",customerPhone:"(555) 987-6543",customerEmail:"maria.rodriguez@email.com",vehicleId:"vh-002",vehicleInfo:"2019 Keystone Montana 3761FL",assignedTo:"tech-003",assignedTechName:"Tom Wilson",scheduledDate:"2024-01-10T08:00:00Z",createdAt:"2024-01-05T16:45:00Z",updatedAt:"2024-01-10T16:30:00Z",estimatedHours:3,actualHours:2.5,parts:[],labor:[{id:"labor-003",description:"Complete safety inspection",hours:2.5,rate:75}],timeline:[{id:"timeline-005",timestamp:"2024-01-05T16:45:00Z",action:"Ticket Created",user:"System",details:"Annual inspection scheduled"},{id:"timeline-006",timestamp:"2024-01-08T09:00:00Z",action:"Assigned",user:"Manager",details:"Assigned to Tom Wilson for structural inspection"},{id:"timeline-007",timestamp:"2024-01-10T08:00:00Z",action:"Started",user:"Tom Wilson",details:"Beginning comprehensive safety inspection"},{id:"timeline-008",timestamp:"2024-01-10T16:30:00Z",action:"Completed",user:"Tom Wilson",details:"Inspection completed - all systems passed"}],notes:"All safety systems checked and verified. Minor recommendation to replace smoke detector batteries within 6 months.",totalCost:187.5,customerApproved:!0}],statusColors:{Open:"bg-blue-100 text-blue-800","In Progress":"bg-yellow-100 text-yellow-800","Waiting for Parts":"bg-orange-100 text-orange-800","Customer Review":"bg-purple-100 text-purple-800",Completed:"bg-green-100 text-green-800",Cancelled:"bg-red-100 text-red-800"},priorityColors:{Low:"bg-gray-100 text-gray-800",Medium:"bg-blue-100 text-blue-800",High:"bg-orange-100 text-orange-800",Urgent:"bg-red-100 text-red-800"}};function E1e({searchParams:t}){const{getDisplayName:e,getDisplayEmail:n,getCustomerId:r,isProxying:i,proxiedClient:a}=Tv();Pm();const o=r(),l=Oa.sampleLoans.filter(v=>v.customerId===o||v.customerName===e()),c=_x.sampleAgreements.filter(v=>v.customerId===o||v.customerName===e());Bu.sampleApplications.filter(v=>v.customerId===o||v.customerName===e());const d=La.sampleTickets.filter(v=>v.customerId===o||v.customerName===e()),u=l.filter(v=>["Current","Active"].includes(v.status)),h=l.filter(v=>v.status==="Paid Off"),f=c.filter(v=>v.status==="PENDING"),m=d.filter(v=>v.status==="In Progress");return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsxs("h1",{className:"text-2xl font-bold",children:["Welcome back, ",e().split(" ")[0],"!"]}),s.jsx("p",{className:"text-muted-foreground",children:"Here's what's happening with your account"})]}),s.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[s.jsxs(he,{children:[s.jsxs(ye,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(be,{className:"text-sm font-medium",children:"Total Loans"}),s.jsx(Vt,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsxs(fe,{children:[s.jsx("div",{className:"text-2xl font-bold",children:l.length}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:[u.length," active, ",h.length," paid off"]})]})]}),s.jsxs(he,{children:[s.jsxs(ye,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(be,{className:"text-sm font-medium",children:"Active Agreements"}),s.jsx(Zt,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsxs(fe,{children:[s.jsx("div",{className:"text-2xl font-bold",children:c.length}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:[f.length," pending signature"]})]})]}),s.jsxs(he,{children:[s.jsxs(ye,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(be,{className:"text-sm font-medium",children:"Service Tickets"}),s.jsx(Sn,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsxs(fe,{children:[s.jsx("div",{className:"text-2xl font-bold",children:d.length}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:[m.length," in progress"]})]})]})]})]})}function P1e({fallbackUser:t}){const[e,n]=ime(),r=e.get("impersonateClientId"),i=()=>{const o=new URLSearchParams(e);o.delete("impersonateClientId"),n(o)},a=r?Q$.sampleUsers.find(o=>o.id===r):null;return s.jsx(hbe,{impersonatedUser:a,fallbackUser:{name:"Portal Customer",email:"customer@portal.com"},children:s.jsx(wte,{children:s.jsxs(f1e,{children:[a&&s.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-md p-3 flex items-center justify-between mb-6",children:[s.jsxs("p",{className:"text-sm text-blue-700",children:[s.jsx("strong",{children:"Admin View:"})," You are viewing the portal as ",a.name," (",a.email,")"]}),s.jsxs(Q,{variant:"outline",size:"sm",onClick:i,className:"text-blue-700 border-blue-300 hover:bg-blue-100",children:[s.jsx(on,{className:"h-4 w-4 mr-2"}),"Exit Impersonation"]})]}),s.jsxs(ki,{children:[s.jsx(It,{path:"/",element:s.jsx(E1e,{searchParams:e})}),s.jsx(It,{path:"/loans",element:s.jsx(j1e,{})}),s.jsx(It,{path:"/agreements",element:s.jsx(ane,{})}),s.jsx(It,{path:"/finance-applications",element:s.jsx(lne,{})}),s.jsx(It,{path:"/service-tickets",element:s.jsx(A1e,{})}),s.jsx(It,{path:"/settings",element:s.jsx(C1e,{})}),s.jsx(It,{path:"/*",element:s.jsx("div",{children:"Portal Dashboard"})})]})]})})})}const Yj={leadSources:["Walk-In","Referral","Website","Phone Call","Social Media","Trade Show"],leadStatuses:["New","Contacted","Qualified","Lost","Converted"],preferredContactMethods:["Phone","Email","Text"],tags:["First-time Buyer","Investor","Out-of-State","Follow-up Needed"],pipelines:["New Inquiry","In Progress","Negotiation","Closed Won","Closed Lost"],sequences:["Initial Outreach","Second Touch","Final Attempt"],nurtureSequences:[{id:"seq-001",name:"Initial Outreach",description:"Welcome new leads and introduce our services",steps:[{id:"step-001",type:"email",delay:0,subject:"Welcome to our dealership!",template:"welcome-email"},{id:"step-002",type:"sms",delay:1,message:"Thanks for your interest! Call us at (555) 123-4567",template:"welcome-sms"},{id:"step-003",type:"email",delay:3,subject:"See our latest inventory",template:"inventory-showcase"},{id:"step-004",type:"call",delay:7,notes:"Follow up call to discuss needs",template:"discovery-call"}],isActive:!0},{id:"seq-002",name:"Second Touch",description:"Re-engage leads who showed initial interest",steps:[{id:"step-005",type:"email",delay:0,subject:"Still looking for the perfect RV?",template:"reengagement-email"},{id:"step-006",type:"sms",delay:2,message:"Special financing options available this month!",template:"financing-sms"},{id:"step-007",type:"email",delay:5,subject:"Customer testimonials",template:"testimonials-email"}],isActive:!0},{id:"seq-003",name:"Final Attempt",description:"Last chance to convert before marking as lost",steps:[{id:"step-008",type:"email",delay:0,subject:"Last chance - exclusive offer inside",template:"final-offer-email"},{id:"step-009",type:"call",delay:3,notes:"Personal call to address any concerns",template:"final-call"}],isActive:!0}],nurtureLeads:[{id:"lead-001",firstName:"John",lastName:"Smith",name:"John Smith",email:"john.smith@email.com",phone:"(555) 123-4567",source:"Website",status:"New",assignedTo:"sales-rep-1",notes:"Interested in Class A Motorhome, budget around $150k",score:85,lastActivity:"2024-01-20T14:30:00Z",sequenceId:"seq-001",sequenceStatus:"active",sequenceStep:2,sequenceType:"email",nextSequenceAction:"2024-01-22T09:00:00Z",customFields:{pipelineStage:"New Inquiry",estimatedValue:15e4,expectedCloseDate:"2024-03-15",vehicleType:"Class A Motorhome",budget:15e4,timeframe:"3-6 months"},createdAt:"2024-01-15T09:00:00Z",updatedAt:"2024-01-20T14:30:00Z"},{id:"lead-002",firstName:"Sarah",lastName:"Johnson",name:"Sarah Johnson",email:"sarah.johnson@email.com",phone:"(555) 987-6543",source:"Referral",status:"Contacted",assignedTo:"sales-rep-2",notes:"Looking for travel trailer for family trips, has financing pre-approval",score:92,lastActivity:"2024-01-22T10:15:00Z",sequenceId:"seq-002",sequenceStatus:"paused",sequenceStep:1,sequenceType:"sms",nextSequenceAction:"2024-01-25T14:00:00Z",customFields:{pipelineStage:"In Progress",estimatedValue:45e3,expectedCloseDate:"2024-02-28",vehicleType:"Travel Trailer",budget:5e4,timeframe:"1-2 months"},createdAt:"2024-01-10T11:30:00Z",updatedAt:"2024-01-22T10:15:00Z"},{id:"lead-003",firstName:"Michael",lastName:"Davis",name:"Michael Davis",email:"michael.davis@email.com",phone:"(555) 456-7890",source:"Trade Show",status:"Qualified",assignedTo:"sales-rep-1",notes:"Serious buyer, looking at Fifth Wheel options, cash purchase",score:95,lastActivity:"2024-01-23T16:45:00Z",sequenceId:"seq-003",sequenceStatus:"completed",sequenceStep:2,sequenceType:"call",nextSequenceAction:null,customFields:{pipelineStage:"Negotiation",estimatedValue:85e3,expectedCloseDate:"2024-02-15",vehicleType:"Fifth Wheel",budget:9e4,timeframe:"2-4 weeks"},createdAt:"2024-01-08T14:20:00Z",updatedAt:"2024-01-23T16:45:00Z"},{id:"lead-004",firstName:"Lisa",lastName:"Wilson",name:"Lisa Wilson",email:"lisa.wilson@email.com",phone:"(555) 234-5678",source:"Social Media",status:"New",assignedTo:"sales-rep-3",notes:"First-time RV buyer, needs education on different types",score:78,lastActivity:"2024-01-21T13:20:00Z",sequenceId:null,sequenceStatus:null,sequenceStep:null,sequenceType:null,nextSequenceAction:null,customFields:{pipelineStage:"New Inquiry",estimatedValue:65e3,expectedCloseDate:"2024-03-30",vehicleType:"Class C Motorhome",budget:7e4,timeframe:"3-4 months"},createdAt:"2024-01-12T08:45:00Z",updatedAt:"2024-01-21T13:20:00Z"},{id:"lead-005",firstName:"Robert",lastName:"Brown",name:"Robert Brown",email:"robert.brown@email.com",phone:"(555) 345-6789",source:"Walk-In",status:"Contacted",assignedTo:"sales-rep-2",notes:"Interested in travel trailer, comparing options",score:88,lastActivity:"2024-01-19T15:30:00Z",sequenceId:"seq-001",sequenceStatus:"active",sequenceStep:3,sequenceType:"email",nextSequenceAction:"2024-01-24T10:00:00Z",customFields:{pipelineStage:"In Progress",estimatedValue:55e3,expectedCloseDate:"2024-02-20",vehicleType:"Travel Trailer",budget:55e3,timeframe:"1-2 months"},createdAt:"2024-01-05T10:15:00Z",updatedAt:"2024-01-19T15:30:00Z"},{id:"lead-006",firstName:"Jennifer",lastName:"Garcia",name:"Jennifer Garcia",email:"jennifer.garcia@email.com",phone:"(555) 567-8901",source:"Phone Call",status:"New",assignedTo:"sales-rep-1",notes:"Interested in luxury motorhome for retirement travel",score:82,lastActivity:"2024-01-18T12:00:00Z",sequenceId:"seq-002",sequenceStatus:"active",sequenceStep:1,sequenceType:"email",nextSequenceAction:"2024-01-23T11:00:00Z",customFields:{pipelineStage:"New Inquiry",estimatedValue:175e3,expectedCloseDate:"2024-04-01",vehicleType:"Class A Motorhome",budget:18e4,timeframe:"4-6 months"},createdAt:"2024-01-03T09:30:00Z",updatedAt:"2024-01-18T12:00:00Z"}],pipelineLeads:[{id:"lead-001",firstName:"John",lastName:"Smith",name:"John Smith",email:"john.smith@email.com",phone:"(555) 123-4567",source:"Website",status:"New",assignedTo:"sales-rep-1",notes:"Interested in Class A Motorhome, budget around $150k",score:85,lastActivity:"2024-01-20T14:30:00Z",customFields:{pipelineStage:"New Inquiry",estimatedValue:15e4,expectedCloseDate:"2024-03-15",vehicleType:"Class A Motorhome",budget:15e4,timeframe:"3-6 months"},createdAt:"2024-01-15T09:00:00Z",updatedAt:"2024-01-20T14:30:00Z"},{id:"lead-002",firstName:"Sarah",lastName:"Johnson",name:"Sarah Johnson",email:"sarah.johnson@email.com",phone:"(555) 987-6543",source:"Referral",status:"Contacted",assignedTo:"sales-rep-2",notes:"Looking for travel trailer for family trips, has financing pre-approval",score:92,lastActivity:"2024-01-22T10:15:00Z",customFields:{pipelineStage:"In Progress",estimatedValue:45e3,expectedCloseDate:"2024-02-28",vehicleType:"Travel Trailer",budget:5e4,timeframe:"1-2 months"},createdAt:"2024-01-10T11:30:00Z",updatedAt:"2024-01-22T10:15:00Z"},{id:"lead-003",firstName:"Michael",lastName:"Davis",name:"Michael Davis",email:"michael.davis@email.com",phone:"(555) 456-7890",source:"Trade Show",status:"Qualified",assignedTo:"sales-rep-1",notes:"Serious buyer, looking at Fifth Wheel options, cash purchase",score:95,lastActivity:"2024-01-23T16:45:00Z",customFields:{pipelineStage:"Negotiation",estimatedValue:85e3,expectedCloseDate:"2024-02-15",vehicleType:"Fifth Wheel",budget:9e4,timeframe:"2-4 weeks"},createdAt:"2024-01-08T14:20:00Z",updatedAt:"2024-01-23T16:45:00Z"},{id:"lead-004",firstName:"Lisa",lastName:"Wilson",name:"Lisa Wilson",email:"lisa.wilson@email.com",phone:"(555) 234-5678",source:"Social Media",status:"Qualified",assignedTo:"sales-rep-3",notes:"First-time RV buyer, needs education on different types",score:78,lastActivity:"2024-01-21T13:20:00Z",customFields:{pipelineStage:"In Progress",estimatedValue:65e3,expectedCloseDate:"2024-03-30",vehicleType:"Class C Motorhome",budget:7e4,timeframe:"3-4 months"},createdAt:"2024-01-12T08:45:00Z",updatedAt:"2024-01-21T13:20:00Z"},{id:"lead-005",firstName:"Robert",lastName:"Brown",name:"Robert Brown",email:"robert.brown@email.com",phone:"(555) 345-6789",source:"Walk-In",status:"Converted",assignedTo:"sales-rep-2",notes:"Purchased 2023 Forest River Cherokee, excellent experience",score:100,lastActivity:"2024-01-19T15:30:00Z",customFields:{pipelineStage:"Closed Won",estimatedValue:55e3,expectedCloseDate:"2024-01-19",vehicleType:"Travel Trailer",budget:55e3,timeframe:"Immediate"},createdAt:"2024-01-05T10:15:00Z",updatedAt:"2024-01-19T15:30:00Z"},{id:"lead-006",firstName:"Jennifer",lastName:"Garcia",name:"Jennifer Garcia",email:"jennifer.garcia@email.com",phone:"(555) 567-8901",source:"Phone Call",status:"Lost",assignedTo:"sales-rep-1",notes:"Decided to go with competitor due to pricing",score:45,lastActivity:"2024-01-18T12:00:00Z",customFields:{pipelineStage:"Closed Lost",estimatedValue:75e3,expectedCloseDate:"2024-01-18",vehicleType:"Class A Motorhome",budget:75e3,timeframe:"1-2 months"},createdAt:"2024-01-03T09:30:00Z",updatedAt:"2024-01-18T12:00:00Z"},{id:"lead-007",firstName:"David",lastName:"Martinez",name:"David Martinez",email:"david.martinez@email.com",phone:"(555) 678-9012",source:"Website",status:"New",assignedTo:"sales-rep-3",notes:"Interested in toy hauler for motorcycle trips",score:70,lastActivity:"2024-01-24T09:15:00Z",customFields:{pipelineStage:"New Inquiry",estimatedValue:95e3,expectedCloseDate:"2024-04-15",vehicleType:"Toy Hauler",budget:1e5,timeframe:"4-6 months"},createdAt:"2024-01-24T09:15:00Z",updatedAt:"2024-01-24T09:15:00Z"},{id:"lead-008",firstName:"Amanda",lastName:"Taylor",name:"Amanda Taylor",email:"amanda.taylor@email.com",phone:"(555) 789-0123",source:"Referral",status:"Contacted",assignedTo:"sales-rep-2",notes:"Upgrading from tent camping, needs beginner-friendly option",score:82,lastActivity:"2024-01-23T11:45:00Z",customFields:{pipelineStage:"In Progress",estimatedValue:35e3,expectedCloseDate:"2024-03-01",vehicleType:"Travel Trailer",budget:4e4,timeframe:"2-3 months"},createdAt:"2024-01-16T14:30:00Z",updatedAt:"2024-01-23T11:45:00Z"},{id:"lead-009",firstName:"Christopher",lastName:"Anderson",name:"Christopher Anderson",email:"chris.anderson@email.com",phone:"(555) 890-1234",source:"Trade Show",status:"Qualified",assignedTo:"sales-rep-1",notes:"Looking for luxury fifth wheel, high-end features required",score:88,lastActivity:"2024-01-22T14:20:00Z",customFields:{pipelineStage:"Negotiation",estimatedValue:125e3,expectedCloseDate:"2024-02-20",vehicleType:"Fifth Wheel",budget:13e4,timeframe:"3-4 weeks"},createdAt:"2024-01-09T16:00:00Z",updatedAt:"2024-01-22T14:20:00Z"},{id:"lead-010",firstName:"Michelle",lastName:"Thomas",name:"Michelle Thomas",email:"michelle.thomas@email.com",phone:"(555) 901-2345",source:"Website",status:"New",assignedTo:"sales-rep-3",notes:"Retirement planning, looking for full-time living option",score:75,lastActivity:"2024-01-25T08:30:00Z",customFields:{pipelineStage:"New Inquiry",estimatedValue:18e4,expectedCloseDate:"2024-05-01",vehicleType:"Class A Motorhome",budget:2e5,timeframe:"6+ months"},createdAt:"2024-01-25T08:30:00Z",updatedAt:"2024-01-25T08:30:00Z"}]};function T1e({leads:t,onLeadMove:e}){const n=Yj.pipelines,r=t||Yj.pipelineLeads||[],[i,a]=A.useState([]);A.useEffect(()=>{const c=n.map(d=>{const u=r.filter(f=>{var m;return((m=f.customFields)==null?void 0:m.pipelineStage)===d}),h=u.reduce((f,m)=>{var v;return f+(((v=m.customFields)==null?void 0:v.estimatedValue)||0)},0);return{stage:d,count:u.length,value:h,conversionRate:u.length>0?u.length/r.length*100:0}});a(c)},[r,n]);const o=i.reduce((c,d)=>c+d.value,0),l=i.reduce((c,d)=>c+d.count,0);return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[s.jsxs(he,{children:[s.jsxs(ye,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(be,{className:"text-sm font-medium",children:"Total Pipeline Value"}),s.jsx(Vt,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsxs(fe,{children:[s.jsx("div",{className:"text-2xl font-bold",children:Le(o)}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:[s.jsx(tn,{className:"inline h-3 w-3 mr-1"}),"+12% from last month"]})]})]}),s.jsxs(he,{children:[s.jsxs(ye,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(be,{className:"text-sm font-medium",children:"Active Leads"}),s.jsx(Lr,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsxs(fe,{children:[s.jsx("div",{className:"text-2xl font-bold",children:l}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:[s.jsx(tn,{className:"inline h-3 w-3 mr-1"}),"+5% from last month"]})]})]}),s.jsxs(he,{children:[s.jsxs(ye,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(be,{className:"text-sm font-medium",children:"Conversion Rate"}),s.jsx(tn,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsxs(fe,{children:[s.jsx("div",{className:"text-2xl font-bold",children:"24.5%"}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:[s.jsx(tn,{className:"inline h-3 w-3 mr-1"}),"+2.1% from last month"]})]})]}),s.jsxs(he,{children:[s.jsxs(ye,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(be,{className:"text-sm font-medium",children:"Avg. Deal Size"}),s.jsx(Vt,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsxs(fe,{children:[s.jsx("div",{className:"text-2xl font-bold",children:Le(o/Math.max(l,1))}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:[s.jsx(tn,{className:"inline h-3 w-3 mr-1"}),"+8% from last month"]})]})]})]}),s.jsxs(he,{children:[s.jsxs(ye,{children:[s.jsx(be,{children:"Sales Pipeline"}),s.jsx(Be,{children:"Track leads through your sales process"})]}),s.jsx(fe,{children:s.jsx("div",{className:"grid gap-4 md:grid-cols-5",children:n.map((c,d)=>{const u=i.find(f=>f.stage===c),h=d===n.length-1;return s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"flex-1",children:s.jsx(he,{className:"h-32",children:s.jsxs(fe,{className:"p-4 h-full flex flex-col justify-between",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-sm mb-1",children:c}),s.jsx("div",{className:"text-2xl font-bold",children:(u==null?void 0:u.count)||0})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-sm text-muted-foreground",children:Le((u==null?void 0:u.value)||0)}),s.jsx(Pd,{value:(u==null?void 0:u.conversionRate)||0,className:"h-1 mt-1"})]})]})})}),!h&&s.jsx("div",{className:"mx-2 flex-shrink-0",children:s.jsx(I$,{className:"h-4 w-4 text-muted-foreground"})})]},c)})})})]}),s.jsxs(he,{children:[s.jsxs(ye,{children:[s.jsx(be,{children:"Recent Pipeline Activity"}),s.jsx(Be,{children:"Latest updates and movements in your pipeline"})]}),s.jsx(fe,{children:s.jsxs("div",{className:"space-y-4",children:[r.slice(0,5).map(c=>{var d,u;return s.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:c.name}),s.jsxs("p",{className:"font-medium",children:[c.firstName," ",c.lastName]})]}),s.jsx(Re,{variant:"secondary",children:((d=c.customFields)==null?void 0:d.pipelineStage)||"New Inquiry"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("span",{className:"text-sm font-medium",children:Le(((u=c.customFields)==null?void 0:u.estimatedValue)||0)}),s.jsxs(Q,{variant:"outline",size:"sm",children:[s.jsx(Sn,{className:"h-3 w-3 mr-1"}),"Schedule"]})]})]},c.id)}),r.length===0&&s.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[s.jsx("p",{children:"No recent pipeline activity"}),s.jsx("p",{className:"text-sm",children:"Leads will appear here once they're added to the pipeline"})]})]})})]})]})}function I1e({lead:t,onScoreUpdate:e}){const[n,r]=A.useState(t.score||0),[i,a]=A.useState([]);A.useEffect(()=>{const c=[{name:"Email Engagement",weight:.3,value:t.emailEngagement||0},{name:"Website Activity",weight:.25,value:t.websiteActivity||0},{name:"Budget Match",weight:.2,value:t.budgetMatch||0},{name:"Timeline Urgency",weight:.15,value:t.timelineUrgency||0},{name:"Location Preference",weight:.1,value:t.locationMatch||0}];a(c);const d=c.reduce((h,f)=>h+f.value*f.weight*100,0),u=Math.min(Math.round(d),100);r(u),e&&u!==t.score&&e(t.id,u)},[t,e]);const o=c=>c>=80?"text-green-600":c>=60?"text-yellow-600":c>=40?"text-orange-600":"text-red-600",l=c=>c>=80?"Hot Lead":c>=60?"Warm Lead":c>=40?"Cool Lead":"Cold Lead";return s.jsxs(he,{children:[s.jsx(ye,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsxs(be,{className:"flex items-center gap-2",children:[s.jsx(dpe,{className:"h-5 w-5"}),"Lead Score"]}),s.jsx(Be,{children:"Automatically calculated based on engagement and fit"})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("div",{className:`text-3xl font-bold ${o(n)}`,children:n}),s.jsx(Re,{variant:n>=60?"default":"secondary",children:l(n)})]})]})}),s.jsxs(fe,{className:"space-y-6",children:[s.jsxs("div",{className:"space-y-3",children:[s.jsx("h4",{className:"font-medium",children:"Score Breakdown"}),i.map((c,d)=>s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm",children:c.name}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Pd,{value:c.value*100,className:"w-20"}),s.jsx("span",{className:"text-sm font-medium w-8",children:Math.round(c.value*c.weight*100)})]})]},d))]}),s.jsxs("div",{className:"space-y-3",children:[s.jsx("h4",{className:"font-medium",children:"Lead Tags"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:Yj.tags.map(c=>{var d,u;return s.jsx(Re,{variant:(u=(d=t.customFields)==null?void 0:d.tags)!=null&&u.includes(c)?"default":"outline",className:"cursor-pointer",children:c},c)})})]}),s.jsxs("div",{className:"bg-blue-50 p-3 rounded-lg",children:[s.jsxs("h4",{className:"font-medium text-blue-900 mb-2 flex items-center gap-2",children:[s.jsx(mm,{className:"h-4 w-4"}),"Recommendations"]}),s.jsxs("div",{className:"space-y-1 text-sm text-blue-700",children:[n>=80&&s.jsx("p",{children:" High priority lead - schedule immediate follow-up"}),n>=60&&n<80&&s.jsx("p",{children:" Good potential - maintain regular contact"}),n>=40&&n<60&&s.jsx("p",{children:" Nurture with educational content"}),n<40&&s.jsx("p",{children:" Low priority - add to drip campaign"})]})]})]})]})}function D1e({leadId:t,activities:e}){const{logActivity:n}=uh(),[r,i]=A.useState(!1),[a,o]=A.useState({type:"note",description:"",outcome:void 0,duration:void 0,scheduledDate:void 0}),l=f=>{switch(f){case"call":return vA;case"email":return Ti;case"meeting":return Sn;case"note":return ss;case"status_change":return Gr;default:return ss}},c=f=>{switch(f){case"call":return"text-green-500";case"email":return"text-blue-500";case"meeting":return"text-purple-500";case"note":return"text-gray-500";case"status_change":return"text-orange-500";default:return"text-gray-500"}},d=f=>{switch(f){case"positive":return"bg-green-50 text-green-700 border-green-200";case"neutral":return"bg-yellow-50 text-yellow-700 border-yellow-200";case"negative":return"bg-red-50 text-red-700 border-red-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},u=async()=>{a.description.trim()&&(await n({leadId:t,type:a.type,description:a.description,outcome:a.outcome,duration:a.duration,scheduledDate:a.scheduledDate,userId:"current-user"}),o({type:"note",description:"",outcome:void 0,duration:void 0,scheduledDate:void 0}),i(!1))},h=[...e].sort((f,m)=>new Date(m.createdAt).getTime()-new Date(f.createdAt).getTime());return s.jsxs(he,{className:"shadow-sm",children:[s.jsx(ye,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx(be,{className:"text-lg",children:"Activity Timeline"}),s.jsx(Be,{children:"Track all interactions and activities for this lead"})]}),s.jsxs(Q,{onClick:()=>i(!0),size:"sm",children:[s.jsx(yt,{className:"h-4 w-4 mr-2"}),"Add Activity"]})]})}),s.jsxs(fe,{children:[r&&s.jsx(he,{className:"mb-6 border-dashed",children:s.jsx(fe,{className:"pt-6",children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium",children:"Activity Type"}),s.jsxs(Ke,{value:a.type,onValueChange:f=>o(m=>({...m,type:f})),children:[s.jsx(He,{children:s.jsx(Ye,{})}),s.jsxs(We,{children:[s.jsx(le,{value:"call",children:"Phone Call"}),s.jsx(le,{value:"email",children:"Email"}),s.jsx(le,{value:"meeting",children:"Meeting"}),s.jsx(le,{value:"note",children:"Note"})]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium",children:"Outcome"}),s.jsxs(Ke,{value:a.outcome||"",onValueChange:f=>o(m=>({...m,outcome:f||void 0})),children:[s.jsx(He,{children:s.jsx(Ye,{placeholder:"Select outcome"})}),s.jsxs(We,{children:[s.jsx(le,{value:"positive",children:"Positive"}),s.jsx(le,{value:"neutral",children:"Neutral"}),s.jsx(le,{value:"negative",children:"Negative"})]})]})]})]}),a.type==="call"&&s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium",children:"Duration (minutes)"}),s.jsx(Ae,{type:"number",value:a.duration||"",onChange:f=>o(m=>({...m,duration:f.target.value?parseInt(f.target.value):void 0})),placeholder:"e.g., 15"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium",children:"Description"}),s.jsx(un,{value:a.description,onChange:f=>o(m=>({...m,description:f.target.value})),placeholder:"Describe the activity...",rows:3})]}),s.jsxs("div",{className:"flex justify-end space-x-2",children:[s.jsx(Q,{variant:"outline",onClick:()=>i(!1),children:"Cancel"}),s.jsx(Q,{onClick:u,children:"Add Activity"})]})]})})}),s.jsx("div",{className:"space-y-4",children:h.length===0?s.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No activities recorded yet"}):h.map((f,m)=>{const v=l(f.type),p=m===h.length-1;return s.jsxs("div",{className:"relative",children:[!p&&s.jsx("div",{className:"absolute left-4 top-8 bottom-0 w-px bg-border"}),s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx("div",{className:st("flex-shrink-0 w-8 h-8 rounded-full bg-background border-2 flex items-center justify-center",c(f.type)),children:s.jsx(v,{className:"h-4 w-4"})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center justify-between mb-1",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("span",{className:"font-medium text-sm capitalize",children:f.type.replace("_"," ")}),f.outcome&&s.jsx(Re,{className:st("ri-badge-status text-xs",d(f.outcome)),children:f.outcome}),f.duration&&s.jsxs(Re,{variant:"secondary",className:"text-xs",children:[s.jsx(gn,{className:"h-3 w-3 mr-1"}),f.duration,"m"]})]}),s.jsx("span",{className:"text-xs text-muted-foreground",children:ht(f.createdAt)})]}),s.jsx("p",{className:"text-sm text-muted-foreground",children:f.description}),f.scheduledDate&&s.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Scheduled for: ",ht(f.scheduledDate)]})]})]})]},f.id)})})]})]})}function k1e({leadId:t,reminders:e}){const{createReminder:n,completeReminder:r}=uh(),[i,a]=A.useState(!1),[o,l]=A.useState({type:"follow_up",title:"",description:"",dueDate:"",priority:"medium"}),c=p=>{switch(p){case"urgent":return"bg-red-50 text-red-700 border-red-200";case"high":return"bg-orange-50 text-orange-700 border-orange-200";case"medium":return"bg-yellow-50 text-yellow-700 border-yellow-200";case"low":return"bg-green-50 text-green-700 border-green-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},d=p=>{switch(p){case"call":return"";case"email":return"";case"meeting":return"";case"deadline":return"";default:return""}},u=p=>new Date(p)<new Date,h=async()=>{!o.title.trim()||!o.dueDate||(await n({leadId:t,type:o.type,title:o.title,description:o.description,dueDate:new Date(o.dueDate),priority:o.priority,userId:"current-user"}),l({type:"follow_up",title:"",description:"",dueDate:"",priority:"medium"}),a(!1))},f=async p=>{await r(p)},m=e.filter(p=>!p.isCompleted),v=e.filter(p=>p.isCompleted);return s.jsxs(he,{className:"shadow-sm",children:[s.jsx(ye,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsxs(be,{className:"text-lg flex items-center",children:[s.jsx(D$,{className:"h-5 w-5 mr-2"}),"Reminders"]}),s.jsx(Be,{children:"Set follow-up reminders and track completion"})]}),s.jsxs(Q,{onClick:()=>a(!0),size:"sm",children:[s.jsx(yt,{className:"h-4 w-4 mr-2"}),"Add Reminder"]})]})}),s.jsxs(fe,{children:[i&&s.jsx(he,{className:"mb-6 border-dashed",children:s.jsx(fe,{className:"pt-6",children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium",children:"Reminder Type"}),s.jsxs(Ke,{value:o.type,onValueChange:p=>l(g=>({...g,type:p})),children:[s.jsx(He,{children:s.jsx(Ye,{})}),s.jsxs(We,{children:[s.jsx(le,{value:"follow_up",children:"Follow Up"}),s.jsx(le,{value:"call",children:"Call"}),s.jsx(le,{value:"email",children:"Email"}),s.jsx(le,{value:"meeting",children:"Meeting"}),s.jsx(le,{value:"deadline",children:"Deadline"})]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium",children:"Priority"}),s.jsxs(Ke,{value:o.priority,onValueChange:p=>l(g=>({...g,priority:p})),children:[s.jsx(He,{children:s.jsx(Ye,{})}),s.jsxs(We,{children:[s.jsx(le,{value:"low",children:"Low"}),s.jsx(le,{value:"medium",children:"Medium"}),s.jsx(le,{value:"high",children:"High"}),s.jsx(le,{value:"urgent",children:"Urgent"})]})]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium",children:"Title"}),s.jsx(Ae,{value:o.title,onChange:p=>l(g=>({...g,title:p.target.value})),placeholder:"e.g., Follow up on pricing questions"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium",children:"Due Date"}),s.jsx(Ae,{type:"datetime-local",value:o.dueDate,onChange:p=>l(g=>({...g,dueDate:p.target.value}))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium",children:"Description"}),s.jsx(un,{value:o.description,onChange:p=>l(g=>({...g,description:p.target.value})),placeholder:"Additional details...",rows:2})]}),s.jsxs("div",{className:"flex justify-end space-x-2",children:[s.jsx(Q,{variant:"outline",onClick:()=>a(!1),children:"Cancel"}),s.jsx(Q,{onClick:h,children:"Add Reminder"})]})]})})}),s.jsxs("div",{className:"space-y-6",children:[m.length>0&&s.jsxs("div",{children:[s.jsxs("h4",{className:"font-semibold text-sm mb-3 flex items-center",children:[s.jsx(gn,{className:"h-4 w-4 mr-2"}),"Active Reminders (",m.length,")"]}),s.jsx("div",{className:"space-y-3",children:m.sort((p,g)=>new Date(p.dueDate).getTime()-new Date(g.dueDate).getTime()).map(p=>s.jsxs("div",{className:st("flex items-start space-x-3 p-3 border rounded-lg",u(p.dueDate)?"border-red-200 bg-red-50":"hover:bg-accent/50"),children:[s.jsx($t,{checked:!1,onCheckedChange:()=>f(p.id),className:"mt-1"}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[s.jsx("span",{className:"text-lg",children:d(p.type)}),s.jsx("span",{className:"font-medium text-sm",children:p.title}),s.jsx(Re,{className:st("ri-badge-status text-xs",c(p.priority)),children:p.priority}),u(p.dueDate)&&s.jsxs(Re,{className:"bg-red-50 text-red-700 border-red-200 text-xs",children:[s.jsx(Ba,{className:"h-3 w-3 mr-1"}),"Overdue"]})]}),s.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:p.description}),s.jsxs("div",{className:"flex items-center space-x-2 text-xs text-muted-foreground",children:[s.jsx(Sn,{className:"h-3 w-3"}),s.jsxs("span",{children:["Due: ",ht(p.dueDate)]})]})]})]},p.id))})]}),v.length>0&&s.jsxs("div",{children:[s.jsxs("h4",{className:"font-semibold text-sm mb-3 text-muted-foreground",children:["Completed (",v.length,")"]}),s.jsx("div",{className:"space-y-2",children:v.sort((p,g)=>new Date(g.dueDate).getTime()-new Date(p.dueDate).getTime()).slice(0,5).map(p=>s.jsxs("div",{className:"flex items-center space-x-3 p-2 text-sm text-muted-foreground",children:[s.jsx($t,{checked:!0,disabled:!0}),s.jsx("span",{className:"line-through",children:p.title}),s.jsx("span",{className:"text-xs",children:ht(p.dueDate)})]},p.id))})]}),m.length===0&&v.length===0&&s.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No reminders set for this lead"})]})]})]})}const mU=({leads:t,onSequenceStart:e=()=>{},onSequencePause:n=()=>{},onSequenceReset:r=()=>{}})=>{const i=Yj.nurtureSequences,a=t||[],[o,l]=A.useState(""),c=a.length>0?a:Yj.nurtureLeads,d=h=>{switch(h){case"email":return Ti;case"sms":return ss;case"call":return vA;default:return Ti}},u=h=>{switch(h){case"active":return"bg-green-100 text-green-800";case"paused":return"bg-yellow-100 text-yellow-800";case"completed":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h3",{className:"text-lg font-semibold",children:"Nurture Sequences"}),s.jsx("div",{className:"flex items-center space-x-2",children:s.jsxs(Ke,{value:o,onValueChange:l,children:[s.jsx(He,{children:s.jsx(Ye,{placeholder:"Select sequence"})}),s.jsx(We,{children:i.map(h=>s.jsx(le,{value:h.id,children:h.name},h.id))})]})})]}),s.jsx("div",{className:"grid gap-4",children:c.length>0?c.map(h=>{const f=d(h.sequenceType||"email"),m=i.find(v=>v.id===h.sequenceId);return s.jsx(he,{children:s.jsx(fe,{className:"p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(f,{className:"h-5 w-5 text-muted-foreground"}),s.jsxs("div",{children:[s.jsxs("p",{className:"font-medium",children:[h.firstName," ",h.lastName]}),s.jsx("p",{className:"text-sm text-muted-foreground",children:h.email}),m&&s.jsxs("p",{className:"text-xs text-muted-foreground",children:[m.name," - Step ",h.sequenceStep||1]})]})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[h.sequenceStatus&&s.jsx(Re,{className:u(h.sequenceStatus),children:h.sequenceStatus.charAt(0).toUpperCase()+h.sequenceStatus.slice(1)}),h.nextSequenceAction&&s.jsxs("div",{className:"text-xs text-muted-foreground",children:["Next: ",new Date(h.nextSequenceAction).toLocaleDateString()]}),s.jsxs("div",{className:"flex items-center space-x-1",children:[!h.sequenceStatus&&s.jsxs(Q,{size:"sm",onClick:()=>o&&e(h.id,o),disabled:!o,children:[s.jsx(lpe,{className:"h-4 w-4 mr-1"}),"Start"]}),h.sequenceStatus==="active"&&s.jsxs(Q,{size:"sm",variant:"outline",onClick:()=>n(h.id),children:[s.jsx(ape,{className:"h-4 w-4 mr-1"}),"Pause"]}),h.sequenceStatus&&s.jsxs(Q,{size:"sm",variant:"outline",onClick:()=>r(h.id),children:[s.jsx(EJ,{className:"h-4 w-4 mr-1"}),"Reset"]})]})]})]})})},h.id)}):s.jsx(he,{children:s.jsxs(fe,{className:"py-12 text-center",children:[s.jsx("p",{className:"text-muted-foreground",children:"No leads available for nurturing sequences"}),s.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Leads will appear here when they are added to the system"})]})})})]})};function cne(){const[t,e]=A.useState([]),[n,r]=A.useState([]),[i,a]=A.useState([]),[o,l]=A.useState([]),[c,d]=A.useState([]),[u,h]=A.useState([]),[f,m]=A.useState([]),[v,p]=A.useState([]),[g,x]=A.useState(!1);A.useEffect(()=>{y()},[]);const y=()=>{const W=yr("renter-insight-email-templates",[]),$=yr("renter-insight-sms-templates",[]),L=yr("renter-insight-sequences",[]),q=yr("renter-insight-enrollments",[]),Y=yr("renter-insight-communication-logs",[]),J=yr("renter-insight-ai-insights",[]);if(W.length===0){const ne=[{id:"1",name:"Welcome New Lead",subject:"Welcome to {{company_name}}, {{first_name}}!",body:`Hi {{first_name}},

Thank you for your interest in our RV inventory! We're excited to help you find the perfect recreational vehicle for your adventures.

Here's what happens next:
- One of our RV specialists will contact you within 24 hours
- We'll schedule a personalized tour of our showroom
- You'll receive our latest inventory updates and special offers

In the meantime, feel free to browse our current inventory at {{website_url}}.

Best regards,
{{rep_name}}
{{company_name}}`,type:"welcome",variables:["first_name","company_name","website_url","rep_name"],isActive:!0,createdAt:new Date("2024-01-01")},{id:"2",name:"Follow-up After 3 Days",subject:"Still looking for the perfect RV, {{first_name}}?",body:`Hi {{first_name}},

I wanted to follow up on your recent inquiry about our RV inventory. Have you had a chance to think about what type of RV would best suit your needs?

Based on your interests, I'd love to show you:
- {{suggested_models}}

We also have some exciting financing options that might interest you. Would you like to schedule a call this week to discuss your options?

You can reply to this email or call me directly at {{rep_phone}}.

Best regards,
{{rep_name}}`,type:"follow_up",variables:["first_name","suggested_models","rep_phone","rep_name"],isActive:!0,createdAt:new Date("2024-01-01")}];a(ne),Dn("renter-insight-email-templates",ne)}else a(W);if($.length===0){const ne=[{id:"1",name:"Quick Follow-up",message:"Hi {{first_name}}! This is {{rep_name}} from {{company_name}}. Just wanted to check if you have any questions about the RVs you viewed. Reply STOP to opt out.",type:"follow_up",variables:["first_name","rep_name","company_name"],isActive:!0,createdAt:new Date("2024-01-01")},{id:"2",name:"Appointment Reminder",message:"Hi {{first_name}}! Reminder: Your RV showroom appointment is tomorrow at {{appointment_time}}. See you then! - {{rep_name}}",type:"reminder",variables:["first_name","appointment_time","rep_name"],isActive:!0,createdAt:new Date("2024-01-01")}];l(ne),Dn("renter-insight-sms-templates",ne)}else l($);if(L.length===0){const ne=[{id:"1",name:"New Lead Welcome Series",description:"Automated welcome sequence for new leads",triggerConditions:[{type:"lead_status",operator:"equals",value:"new"}],steps:[{id:"1",sequenceId:"1",order:1,type:"email",delay:0,content:{subject:"Welcome to {{company_name}}, {{first_name}}!",body:mockEmailTemplates[0].body,template:"1"},isActive:!0},{id:"2",sequenceId:"1",order:2,type:"wait",delay:72,content:{body:"Wait 3 days"},isActive:!0},{id:"3",sequenceId:"1",order:3,type:"email",delay:0,content:{subject:"Still looking for the perfect RV, {{first_name}}?",body:mockEmailTemplates[1].body,template:"2"},isActive:!0},{id:"4",sequenceId:"1",order:4,type:"sms",delay:48,content:{body:mockSmsTemplates[0].message},isActive:!0}],isActive:!0,targetAudience:"New website leads",createdBy:"admin",createdAt:new Date("2024-01-01"),updatedAt:new Date("2024-01-01")}];e(ne),Dn("renter-insight-sequences",ne)}else e(L);if(J.length===0){const ne=[{id:"1",leadId:"1",type:"next_action",title:"Optimal Contact Time Identified",description:"Based on lead behavior patterns, the best time to contact this lead is Tuesday-Thursday between 2-4 PM.",confidence:85,actionable:!0,suggestedActions:["Schedule call for Tuesday 2-4 PM","Send follow-up email on Wednesday morning","Avoid Friday afternoon contact"],metadata:{timeZone:"EST",preferredDays:["Tuesday","Wednesday","Thursday"],preferredHours:[14,15,16]},generatedAt:new Date("2024-01-20"),isRead:!1},{id:"2",leadId:"1",type:"communication_style",title:"Communication Preference Analysis",description:"This lead responds better to detailed, educational content rather than high-pressure sales tactics.",confidence:78,actionable:!0,suggestedActions:["Share educational RV buying guides","Focus on features and benefits","Provide comparison charts","Avoid aggressive closing techniques"],metadata:{preferredStyle:"educational",responseRate:.65,engagementType:"content-focused"},generatedAt:new Date("2024-01-20"),isRead:!1}];h(ne),Dn("renter-insight-ai-insights",ne)}else h(J);r(q),d(Y)},b=async(W,$)=>{var L,q;x(!0);try{const Y={id:Math.random().toString(36).substr(2,9),leadId:W,sequenceId:$,currentStepId:((q=(L=t.find(J=>J.id===$))==null?void 0:L.steps[0])==null?void 0:q.id)||"",status:"active",enrolledAt:new Date,nextActionAt:new Date};return r(J=>[...J,Y]),await w(Y),Y}finally{x(!1)}},w=async W=>{const $=t.find(Y=>Y.id===W.sequenceId);if(!$)return;const L=$.steps.find(Y=>Y.id===W.currentStepId);if(!L)return;switch(L.type){case"email":await N(W.leadId,L);break;case"sms":await E(W.leadId,L);break;case"wait":const Y=new Date;Y.setHours(Y.getHours()+L.delay),r(J=>J.map(ne=>ne.id===W.id?{...ne,nextActionAt:Y}:ne));break}const q=$.steps.findIndex(Y=>Y.id===L.id)+1;if(q<$.steps.length){const Y=$.steps[q];r(J=>J.map(ne=>ne.id===W.id?{...ne,currentStepId:Y.id}:ne))}else r(Y=>Y.map(J=>J.id===W.id?{...J,status:"completed",completedAt:new Date}:J))},N=async(W,$)=>{const L={id:Math.random().toString(36).substr(2,9),leadId:W,type:"email",direction:"outbound",subject:$.content.subject,content:$.content.body,status:"sent",sentAt:new Date,metadata:{sequenceStep:$.id,template:$.content.template}};d(q=>[...q,L]),setTimeout(()=>{d(q=>q.map(Y=>Y.id===L.id?{...Y,status:"delivered",deliveredAt:new Date}:Y))},2e3),setTimeout(()=>{d(q=>q.map(Y=>Y.id===L.id?{...Y,status:"opened",openedAt:new Date}:Y))},5e3)},E=async(W,$)=>{const L={id:Math.random().toString(36).substr(2,9),leadId:W,type:"sms",direction:"outbound",content:$.content.body,status:"sent",sentAt:new Date,metadata:{sequenceStep:$.id}};d(q=>[...q,L]),setTimeout(()=>{d(q=>q.map(Y=>Y.id===L.id?{...Y,status:"delivered",deliveredAt:new Date}:Y))},1e3)};return{sequences:t,enrollments:n,emailTemplates:i,smsTemplates:o,communicationLogs:c,aiInsights:u,automationRules:f,analytics:v,loading:g,enrollLeadInSequence:b,processNextStep:w,generateAIInsights:async(W,$)=>{var L;x(!0);try{const q=[];$.score>70&&q.push({id:Math.random().toString(36).substr(2,9),leadId:W,type:"next_action",title:"High-Priority Lead - Immediate Action Recommended",description:"This lead has a high score and recent activity. Schedule a personal call within 24 hours.",confidence:92,actionable:!0,suggestedActions:["Schedule personal phone call","Send personalized video message","Invite to exclusive showroom tour"],generatedAt:new Date,isRead:!1});const Y=new Date($.lastActivity),J=Math.floor((Date.now()-Y.getTime())/(1e3*60*60*24));return J>7&&q.push({id:Math.random().toString(36).substr(2,9),leadId:W,type:"timing",title:"Re-engagement Opportunity",description:`No activity for ${J} days. Consider a re-engagement campaign.`,confidence:75,actionable:!0,suggestedActions:['Send "We miss you" email',"Offer special incentive","Share new inventory updates"],generatedAt:new Date,isRead:!1}),(L=$.customFields)!=null&&L.budget&&q.push({id:Math.random().toString(36).substr(2,9),leadId:W,type:"content_suggestion",title:"Personalized Content Recommendation",description:`Based on budget range ${$.customFields.budget}, suggest specific RV models and financing options.`,confidence:88,actionable:!0,suggestedActions:["Send budget-specific inventory","Share financing calculator","Provide trade-in valuation"],generatedAt:new Date,isRead:!1}),h(ne=>[...ne.filter(re=>re.leadId!==W),...q]),q}finally{x(!1)}},createEmailTemplate:async W=>{const $={id:Math.random().toString(36).substr(2,9),name:W.name||"",subject:W.subject||"",body:W.body||"",type:W.type||"custom",variables:W.variables||[],isActive:!0,createdAt:new Date},L=[...i,$];return a(L),Dn("renter-insight-email-templates",L),$},createSMSTemplate:async W=>{const $={id:Math.random().toString(36).substr(2,9),name:W.name||"",message:W.message||"",type:W.type||"custom",variables:W.variables||[],isActive:!0,createdAt:new Date},L=[...o,$];return l(L),Dn("renter-insight-sms-templates",L),$},createNurtureSequence:async W=>{const $={id:Math.random().toString(36).substr(2,9),name:W.name||"",description:W.description||"",triggerConditions:W.triggerConditions||[],steps:W.steps||[],isActive:!0,targetAudience:W.targetAudience||"",createdBy:"current-user",createdAt:new Date,updatedAt:new Date},L=[...t,$];return e(L),Dn("renter-insight-sequences",L),$},updateNurtureSequence:async(W,$)=>{const L=t.map(q=>q.id===W?{...q,...$,updatedAt:new Date}:q);e(L),Dn("renter-insight-sequences",L)},updateEmailTemplate:async(W,$)=>{const L=i.map(q=>q.id===W?{...q,...$}:q);a(L),Dn("renter-insight-email-templates",L)},updateSMSTemplate:async(W,$)=>{const L=o.map(q=>q.id===W?{...q,...$}:q);l(L),Dn("renter-insight-sms-templates",L)},getEnrollmentsByLead:W=>n.filter($=>$.leadId===W),getCommunicationHistory:W=>c.filter($=>$.leadId===W).sort(($,L)=>new Date(L.sentAt).getTime()-new Date($.sentAt).getTime()),getAIInsightsByLead:W=>u.filter($=>$.leadId===W&&!$.isRead),markInsightAsRead:async W=>{h($=>$.map(L=>L.id===W?{...L,isRead:!0}:L))},pauseEnrollment:async W=>{r($=>$.map(L=>L.id===W?{...L,status:"paused"}:L))},resumeEnrollment:async W=>{r($=>$.map(L=>L.id===W?{...L,status:"active"}:L))}}}function _1e({leadId:t,leadData:e}){var N,E,C;const{aiInsights:n,generateAIInsights:r,markInsightAsRead:i,enrollLeadInSequence:a,sequences:o}=cne(),[l,c]=A.useState(!1),[d,u]=A.useState("insights"),h=n.filter(j=>j.leadId===t),f=h.filter(j=>!j.isRead),m=j=>{switch(j){case"next_action":return xd;case"communication_style":return ss;case"timing":return gn;case"content_suggestion":return spe;case"risk_assessment":return tn;default:return od}},v=j=>{switch(j){case"next_action":return"from-blue-50 to-blue-100/50";case"communication_style":return"from-green-50 to-green-100/50";case"timing":return"from-orange-50 to-orange-100/50";case"content_suggestion":return"from-purple-50 to-purple-100/50";case"risk_assessment":return"from-red-50 to-red-100/50";default:return"from-gray-50 to-gray-100/50"}},p=j=>j>=80?"text-green-600 bg-green-50":j>=60?"text-yellow-600 bg-yellow-50":"text-orange-600 bg-orange-50",g=async()=>{c(!0);try{await r(t,e)}finally{c(!1)}},x=async j=>{await i(j)},y=async j=>{await a(t,j)},w=(j=>{var D;const I=[];if(j.score>80?I.push({type:"High Priority Action",suggestion:"This lead has excellent potential. Schedule a personal call within 24 hours and prepare a customized presentation.",confidence:95,actions:["Schedule immediate call","Prepare custom presentation","Send calendar invite"]}):j.score>60?I.push({type:"Warm Lead Nurturing",suggestion:"Good engagement level. Send educational content about RV ownership and schedule a follow-up in 3-5 days.",confidence:85,actions:["Send RV buying guide","Share customer testimonials","Schedule follow-up"]}):I.push({type:"Lead Warming",suggestion:"Lower engagement detected. Enroll in nurture sequence and focus on value-driven content.",confidence:75,actions:["Enroll in email sequence","Send value content","Monitor engagement"]}),(D=j.customFields)!=null&&D.budget){const P=j.customFields.budget;I.push({type:"Budget-Matched Recommendations",suggestion:`Based on ${P} budget, focus on specific inventory that matches their price range and financing options.`,confidence:90,actions:["Send matching inventory","Discuss financing","Offer trade-in evaluation"]})}const k=Math.floor((Date.now()-new Date(j.createdAt).getTime())/(1e3*60*60*24));return k>7&&I.push({type:"Re-engagement Strategy",suggestion:`Lead is ${k} days old. Implement re-engagement tactics with special offers or new inventory alerts.`,confidence:80,actions:["Send special offer","Share new arrivals","Offer exclusive preview"]}),j.source.toLowerCase().includes("website")&&I.push({type:"Digital-First Approach",suggestion:"Lead came from website - they prefer digital communication. Use email and video messages before phone calls.",confidence:85,actions:["Send welcome email","Create video message","Share virtual tour"]}),I})(e);return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsxs("h3",{className:"text-lg font-semibold flex items-center",children:[s.jsx(od,{className:"h-5 w-5 mr-2 text-purple-500"}),"AI Insights & Suggestions"]}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"AI-powered recommendations for lead engagement"})]}),s.jsxs(Q,{onClick:g,disabled:l,size:"sm",children:[s.jsx(od,{className:"h-4 w-4 mr-2"}),l?"Analyzing...":"Generate Insights"]})]}),s.jsxs(Vn,{value:d,onValueChange:u,className:"space-y-4",children:[s.jsxs(Mn,{className:"grid w-full grid-cols-3",children:[s.jsxs(tt,{value:"insights",className:"relative",children:["AI Insights",f.length>0&&s.jsx(Re,{className:"ml-2 h-5 w-5 rounded-full p-0 text-xs bg-red-500",children:f.length})]}),s.jsx(tt,{value:"chatgpt",children:"ChatGPT Suggestions"}),s.jsx(tt,{value:"automation",children:"Automation"})]}),s.jsx(rt,{value:"insights",className:"space-y-4",children:h.length===0?s.jsx(he,{className:"shadow-sm",children:s.jsxs(fe,{className:"flex flex-col items-center justify-center py-12",children:[s.jsx(od,{className:"h-12 w-12 text-muted-foreground mb-4"}),s.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No AI Insights Yet"}),s.jsx("p",{className:"text-muted-foreground text-center mb-4",children:"Generate AI-powered insights to get personalized recommendations for this lead."}),s.jsxs(Q,{onClick:g,disabled:l,children:[s.jsx(od,{className:"h-4 w-4 mr-2"}),"Generate First Insights"]})]})}):s.jsx("div",{className:"space-y-4",children:h.sort((j,I)=>new Date(I.generatedAt).getTime()-new Date(j.generatedAt).getTime()).map(j=>{const I=m(j.type);return s.jsxs(he,{className:st("shadow-sm border-0 bg-gradient-to-br",v(j.type),!j.isRead&&"ring-2 ring-blue-200"),children:[s.jsx(ye,{children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx(I,{className:"h-6 w-6 text-primary mt-1"}),s.jsxs("div",{children:[s.jsx(be,{className:"text-lg",children:j.title}),s.jsx(Be,{className:"mt-1",children:j.description})]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsxs(Re,{className:st("ri-badge-status",p(j.confidence)),children:[j.confidence,"% confidence"]}),!j.isRead&&s.jsxs(Q,{variant:"outline",size:"sm",onClick:()=>x(j.id),children:[s.jsx(Rn,{className:"h-3 w-3 mr-1"}),"Mark Read"]})]})]})}),j.actionable&&j.suggestedActions&&s.jsx(fe,{children:s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold text-sm mb-2",children:"Suggested Actions:"}),s.jsx("div",{className:"space-y-2",children:j.suggestedActions.map((k,D)=>s.jsxs("div",{className:"flex items-center justify-between p-2 bg-white/50 rounded-md",children:[s.jsx("span",{className:"text-sm",children:k}),s.jsx(Q,{variant:"outline",size:"sm",children:"Execute"})]},D))})]})})]},j.id)})})}),s.jsxs(rt,{value:"chatgpt",className:"space-y-4",children:[s.jsxs(he,{className:"shadow-sm border-0 bg-gradient-to-br from-green-50 to-green-100/50",children:[s.jsx(ye,{children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"w-8 h-8 bg-green-500 rounded-full flex items-center justify-center",children:s.jsx(od,{className:"h-4 w-4 text-white"})}),s.jsxs("div",{children:[s.jsx(be,{className:"text-green-900",children:"ChatGPT Analysis"}),s.jsx(Be,{className:"text-green-700",children:"AI-powered lead analysis and action recommendations"})]})]})}),s.jsx(fe,{children:s.jsx("div",{className:"space-y-4",children:w.map((j,I)=>s.jsxs("div",{className:"bg-white/70 p-4 rounded-lg",children:[s.jsxs("div",{className:"flex items-start justify-between mb-2",children:[s.jsx("h4",{className:"font-semibold text-green-900",children:j.type}),s.jsxs(Re,{className:"bg-green-100 text-green-700 border-green-200",children:[j.confidence,"% confidence"]})]}),s.jsx("p",{className:"text-sm text-green-800 mb-3",children:j.suggestion}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("h5",{className:"text-xs font-semibold text-green-900 uppercase tracking-wide",children:"Recommended Actions:"}),s.jsx("div",{className:"grid gap-2 md:grid-cols-3",children:j.actions.map((k,D)=>s.jsx(Q,{variant:"outline",size:"sm",className:"justify-start text-xs bg-white/50 hover:bg-white/80",children:k},D))})]})]},I))})})]}),s.jsxs(he,{className:"shadow-sm",children:[s.jsx(ye,{children:s.jsxs(be,{className:"flex items-center",children:[s.jsx(xd,{className:"h-5 w-5 mr-2 text-blue-500"}),"Lead Scoring Analysis"]})}),s.jsx(fe,{children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between p-3 bg-blue-50 rounded-lg",children:[s.jsxs("div",{children:[s.jsxs("h4",{className:"font-semibold text-blue-900",children:["Current Score: ",e.score]}),s.jsx("p",{className:"text-sm text-blue-700",children:e.score>=80?"Hot Lead - High Priority":e.score>=60?"Warm Lead - Good Potential":e.score>=40?"Cool Lead - Needs Nurturing":"Cold Lead - Long-term Nurturing"})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("div",{className:"text-2xl font-bold text-blue-600",children:e.score}),s.jsx("div",{className:"text-xs text-blue-500",children:"/ 100"})]})]}),s.jsxs("div",{className:"grid gap-3 md:grid-cols-2",children:[s.jsxs("div",{className:"p-3 bg-green-50 rounded-lg",children:[s.jsx("h5",{className:"font-semibold text-green-900 mb-1",children:"Strengths"}),s.jsxs("ul",{className:"text-sm text-green-700 space-y-1",children:[((N=e.customFields)==null?void 0:N.budget)&&s.jsx("li",{children:" Budget information provided"}),((E=e.customFields)==null?void 0:E.timeframe)&&s.jsx("li",{children:" Clear purchase timeline"}),e.score>60&&s.jsx("li",{children:" Good engagement level"}),e.source==="Customer Referral"&&s.jsx("li",{children:" High-quality referral source"})]})]}),s.jsxs("div",{className:"p-3 bg-orange-50 rounded-lg",children:[s.jsx("h5",{className:"font-semibold text-orange-900 mb-1",children:"Improvement Areas"}),s.jsxs("ul",{className:"text-sm text-orange-700 space-y-1",children:[!((C=e.customFields)!=null&&C.budget)&&s.jsx("li",{children:" No budget information"}),e.score<60&&s.jsx("li",{children:" Low engagement level"}),!e.assignedTo&&s.jsx("li",{children:" No sales rep assigned"}),s.jsx("li",{children:" Limited activity history"})]})]})]})]})})]})]}),s.jsxs(rt,{value:"automation",className:"space-y-4",children:[s.jsxs(he,{className:"shadow-sm",children:[s.jsxs(ye,{children:[s.jsxs(be,{className:"flex items-center",children:[s.jsx(ss,{className:"h-5 w-5 mr-2 text-purple-500"}),"Nurture Sequences"]}),s.jsx(Be,{children:"Enroll this lead in automated nurturing sequences"})]}),s.jsx(fe,{children:s.jsx("div",{className:"space-y-4",children:o.filter(j=>j.isActive).map(j=>s.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-accent/50 transition-colors",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("h4",{className:"font-semibold",children:j.name}),s.jsx("p",{className:"text-sm text-muted-foreground",children:j.description}),s.jsxs("div",{className:"flex items-center space-x-2 mt-2",children:[s.jsxs(Re,{variant:"secondary",className:"text-xs",children:[j.steps.length," steps"]}),s.jsx(Re,{variant:"outline",className:"text-xs",children:j.targetAudience})]})]}),s.jsx(Q,{onClick:()=>y(j.id),size:"sm",children:"Enroll Lead"})]},j.id))})})]}),s.jsxs(he,{className:"shadow-sm",children:[s.jsx(ye,{children:s.jsxs(be,{className:"flex items-center",children:[s.jsx(gn,{className:"h-5 w-5 mr-2 text-orange-500"}),"Smart Timing Recommendations"]})}),s.jsx(fe,{children:s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"p-3 bg-blue-50 rounded-lg",children:[s.jsx("h4",{className:"font-semibold text-blue-900",children:"Best Contact Times"}),s.jsx("p",{className:"text-sm text-blue-700",children:"Based on lead behavior: Tuesday-Thursday, 2-4 PM"})]}),s.jsxs("div",{className:"p-3 bg-green-50 rounded-lg",children:[s.jsx("h4",{className:"font-semibold text-green-900",children:"Email Timing"}),s.jsx("p",{className:"text-sm text-green-700",children:"Send emails Tuesday/Wednesday mornings for best open rates"})]}),s.jsxs("div",{className:"p-3 bg-purple-50 rounded-lg",children:[s.jsx("h4",{className:"font-semibold text-purple-900",children:"Follow-up Schedule"}),s.jsx("p",{className:"text-sm text-purple-700",children:"Next follow-up recommended in 2-3 days based on engagement"})]})]})})]})]})]})]})}function O1e({leadId:t,leadData:e}){const{emailTemplates:n,smsTemplates:r,communicationLogs:i,getCommunicationHistory:a}=cne(),[o,l]=A.useState("history"),[c,d]=A.useState(""),[u,h]=A.useState(""),[f,m]=A.useState(""),[v,p]=A.useState(""),[g,x]=A.useState(""),[y,b]=A.useState(!1),w=a(t),N=D=>{switch(D){case"sent":return s.jsx(Do,{className:"h-3 w-3 text-blue-500"});case"delivered":return s.jsx(Rn,{className:"h-3 w-3 text-green-500"});case"opened":return s.jsx(Ti,{className:"h-3 w-3 text-purple-500"});case"clicked":return s.jsx(Rn,{className:"h-3 w-3 text-green-600"});case"replied":return s.jsx(ss,{className:"h-3 w-3 text-blue-600"});case"failed":return s.jsx(mm,{className:"h-3 w-3 text-red-500"});default:return s.jsx(gn,{className:"h-3 w-3 text-gray-500"})}},E=D=>{switch(D){case"sent":return"bg-blue-50 text-blue-700 border-blue-200";case"delivered":return"bg-green-50 text-green-700 border-green-200";case"opened":return"bg-purple-50 text-purple-700 border-purple-200";case"clicked":return"bg-green-50 text-green-700 border-green-200";case"replied":return"bg-blue-50 text-blue-700 border-blue-200";case"failed":return"bg-red-50 text-red-700 border-red-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},C=(D,P)=>{var R;return D.replace(/\{\{first_name\}\}/g,P.firstName).replace(/\{\{last_name\}\}/g,P.lastName).replace(/\{\{company_name\}\}/g,"Renter Insight RV").replace(/\{\{rep_name\}\}/g,"Your Sales Representative").replace(/\{\{rep_phone\}\}/g,"(555) 123-4567").replace(/\{\{website_url\}\}/g,"https://renterinsight.com").replace(/\{\{budget\}\}/g,((R=P.customFields)==null?void 0:R.budget)||"your budget")},j=async()=>{b(!0);try{let D=f,P=v;if(c){const R=n.find(_=>_.id===c);R&&(D=C(R.subject,e),P=C(R.body,e))}await new Promise(R=>setTimeout(R,2e3)),m(""),p(""),d(""),console.log("Email sent:",{subject:D,body:P,to:e.email})}finally{b(!1)}},I=async()=>{b(!0);try{let D=g;if(u){const P=r.find(R=>R.id===u);P&&(D=C(P.message,e))}await new Promise(P=>setTimeout(P,1500)),x(""),h(""),console.log("SMS sent:",{message:D,to:e.phone})}finally{b(!1)}},k=(D,P)=>{if(P==="email"){d(D);const R=n.find(_=>_.id===D);R&&(m(C(R.subject,e)),p(C(R.body,e)))}else{h(D);const R=r.find(_=>_.id===D);R&&x(C(R.message,e))}};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsxs("h3",{className:"text-lg font-semibold flex items-center",children:[s.jsx(ss,{className:"h-5 w-5 mr-2 text-blue-500"}),"Communication Center"]}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Send emails, SMS, and track communication history"})]}),s.jsxs(Vn,{value:o,onValueChange:l,className:"space-y-4",children:[s.jsxs(Mn,{className:"grid w-full grid-cols-3",children:[s.jsx(tt,{value:"history",children:"History"}),s.jsx(tt,{value:"email",children:"Send Email"}),s.jsx(tt,{value:"sms",children:"Send SMS"})]}),s.jsx(rt,{value:"history",className:"space-y-4",children:s.jsxs(he,{className:"shadow-sm",children:[s.jsxs(ye,{children:[s.jsxs(be,{className:"flex items-center",children:[s.jsx(gn,{className:"h-5 w-5 mr-2"}),"Communication History"]}),s.jsx(Be,{children:"All email and SMS communications with this lead"})]}),s.jsx(fe,{children:w.length===0?s.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[s.jsx(ss,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),s.jsx("p",{children:"No communication history yet"}),s.jsx("p",{className:"text-sm",children:"Start by sending an email or SMS"})]}):s.jsx("div",{className:"space-y-4",children:w.map((D,P)=>s.jsxs("div",{className:"relative",children:[P<w.length-1&&s.jsx("div",{className:"absolute left-4 top-12 bottom-0 w-px bg-border"}),s.jsxs("div",{className:"flex items-start space-x-4",children:[s.jsx("div",{className:st("flex-shrink-0 w-8 h-8 rounded-full border-2 bg-background flex items-center justify-center",D.type==="email"?"border-blue-200":"border-green-200"),children:D.type==="email"?s.jsx(Ti,{className:"h-4 w-4 text-blue-500"}):s.jsx(ss,{className:"h-4 w-4 text-green-500"})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsxs("span",{className:"font-medium text-sm capitalize",children:[D.type," ",D.direction]}),s.jsxs(Re,{className:st("ri-badge-status text-xs",E(D.status)),children:[N(D.status),s.jsx("span",{className:"ml-1",children:D.status})]})]}),s.jsx("span",{className:"text-xs text-muted-foreground",children:ht(D.sentAt)})]}),D.subject&&s.jsx("p",{className:"font-medium text-sm mb-1",children:D.subject}),s.jsx("div",{className:"bg-muted/30 p-3 rounded-md",children:s.jsx("p",{className:"text-sm text-muted-foreground whitespace-pre-wrap",children:D.content})}),s.jsxs("div",{className:"flex items-center space-x-4 mt-2 text-xs text-muted-foreground",children:[s.jsxs("span",{children:["Sent: ",ht(D.sentAt)]}),D.deliveredAt&&s.jsxs("span",{children:["Delivered: ",ht(D.deliveredAt)]}),D.openedAt&&s.jsxs("span",{children:["Opened: ",ht(D.openedAt)]}),D.clickedAt&&s.jsxs("span",{children:["Clicked: ",ht(D.clickedAt)]})]})]})]})]},D.id))})})]})}),s.jsx(rt,{value:"email",className:"space-y-4",children:s.jsxs(he,{className:"shadow-sm",children:[s.jsxs(ye,{children:[s.jsxs(be,{className:"flex items-center",children:[s.jsx(Ti,{className:"h-5 w-5 mr-2 text-blue-500"}),"Send Email"]}),s.jsx(Be,{children:"Send personalized emails using templates or custom content"})]}),s.jsxs(fe,{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium",children:"Email Template (Optional)"}),s.jsxs(Ke,{value:c,onValueChange:D=>k(D,"email"),children:[s.jsx(He,{children:s.jsx(Ye,{placeholder:"Choose a template or write custom email"})}),s.jsxs(We,{children:[s.jsx(le,{value:"",children:"Custom Email"}),n.filter(D=>D.isActive).map(D=>s.jsxs(le,{value:D.id,children:[D.name," (",D.type,")"]},D.id))]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium",children:"To"}),s.jsx(Ae,{value:e.email,disabled:!0,className:"bg-muted/50"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium",children:"Subject"}),s.jsx(Ae,{value:f,onChange:D=>m(D.target.value),placeholder:"Enter email subject"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium",children:"Message"}),s.jsx(un,{value:v,onChange:D=>p(D.target.value),placeholder:"Enter your email message",rows:8})]}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{className:"text-xs text-muted-foreground",children:["Available variables: ",{first_name},", ",{last_name},", ",{company_name},", ",{rep_name}]}),s.jsxs(Q,{onClick:j,disabled:y||!f||!v,children:[s.jsx(Do,{className:"h-4 w-4 mr-2"}),y?"Sending...":"Send Email"]})]})]})]})}),s.jsx(rt,{value:"sms",className:"space-y-4",children:s.jsxs(he,{className:"shadow-sm",children:[s.jsxs(ye,{children:[s.jsxs(be,{className:"flex items-center",children:[s.jsx(ss,{className:"h-5 w-5 mr-2 text-green-500"}),"Send SMS"]}),s.jsx(Be,{children:"Send text messages using templates or custom content"})]}),s.jsxs(fe,{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium",children:"SMS Template (Optional)"}),s.jsxs(Ke,{value:u,onValueChange:D=>k(D,"sms"),children:[s.jsx(He,{children:s.jsx(Ye,{placeholder:"Choose a template or write custom SMS"})}),s.jsxs(We,{children:[s.jsx(le,{value:"",children:"Custom SMS"}),r.filter(D=>D.isActive).map(D=>s.jsxs(le,{value:D.id,children:[D.name," (",D.type,")"]},D.id))]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium",children:"To"}),s.jsx(Ae,{value:e.phone,disabled:!0,className:"bg-muted/50"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium",children:"Message"}),s.jsx(un,{value:g,onChange:D=>x(D.target.value),placeholder:"Enter your SMS message",rows:4,maxLength:160}),s.jsxs("div",{className:"flex justify-between items-center mt-1",children:[s.jsxs("div",{className:"text-xs text-muted-foreground",children:[g.length,"/160 characters"]}),s.jsx("div",{className:st("text-xs",g.length>160?"text-red-500":"text-muted-foreground"),children:g.length>160&&"Message too long"})]})]}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{className:"text-xs text-muted-foreground",children:["Available variables: ",{first_name},", ",{company_name},", ",{rep_name}]}),s.jsxs(Q,{onClick:I,disabled:y||!g||g.length>160,children:[s.jsx(Do,{className:"h-4 w-4 mr-2"}),y?"Sending...":"Send SMS"]})]})]})]})})]})]})}var dne={exports:{}};/* @license
Papa Parse
v5.5.3
https://github.com/mholt/PapaParse
License: MIT
*/(function(t,e){((n,r)=>{t.exports=r()})($f,function n(){var r=typeof self<"u"?self:typeof window<"u"?window:r!==void 0?r:{},i,a=!r.document&&!!r.postMessage,o=r.IS_PAPA_WORKER||!1,l={},c=0,d={};function u(j){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(I){var k=N(I);k.chunkSize=parseInt(k.chunkSize),I.step||I.chunk||(k.chunkSize=null),this._handle=new p(k),(this._handle.streamer=this)._config=k}).call(this,j),this.parseChunk=function(I,k){var D=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<D){let R=this._config.newline;R||(P=this._config.quoteChar||'"',R=this._handle.guessLineEndings(I,P)),I=[...I.split(R).slice(D)].join(R)}this.isFirstChunk&&C(this._config.beforeFirstChunk)&&(P=this._config.beforeFirstChunk(I))!==void 0&&(I=P),this.isFirstChunk=!1,this._halted=!1;var D=this._partialLine+I,P=(this._partialLine="",this._handle.parse(D,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(I=P.meta.cursor,D=(this._finished||(this._partialLine=D.substring(I-this._baseIndex),this._baseIndex=I),P&&P.data&&(this._rowCount+=P.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),o)r.postMessage({results:P,workerId:d.WORKER_ID,finished:D});else if(C(this._config.chunk)&&!k){if(this._config.chunk(P,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=P=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(P.data),this._completeResults.errors=this._completeResults.errors.concat(P.errors),this._completeResults.meta=P.meta),this._completed||!D||!C(this._config.complete)||P&&P.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),D||P&&P.meta.paused||this._nextChunk(),P}this._halted=!0},this._sendError=function(I){C(this._config.error)?this._config.error(I):o&&this._config.error&&r.postMessage({workerId:d.WORKER_ID,error:I,finished:!1})}}function h(j){var I;(j=j||{}).chunkSize||(j.chunkSize=d.RemoteChunkSize),u.call(this,j),this._nextChunk=a?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(k){this._input=k,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(I=new XMLHttpRequest,this._config.withCredentials&&(I.withCredentials=this._config.withCredentials),a||(I.onload=E(this._chunkLoaded,this),I.onerror=E(this._chunkError,this)),I.open(this._config.downloadRequestBody?"POST":"GET",this._input,!a),this._config.downloadRequestHeaders){var k,D=this._config.downloadRequestHeaders;for(k in D)I.setRequestHeader(k,D[k])}var P;this._config.chunkSize&&(P=this._start+this._config.chunkSize-1,I.setRequestHeader("Range","bytes="+this._start+"-"+P));try{I.send(this._config.downloadRequestBody)}catch(R){this._chunkError(R.message)}a&&I.status===0&&this._chunkError()}},this._chunkLoaded=function(){I.readyState===4&&(I.status<200||400<=I.status?this._chunkError():(this._start+=this._config.chunkSize||I.responseText.length,this._finished=!this._config.chunkSize||this._start>=(k=>(k=k.getResponseHeader("Content-Range"))!==null?parseInt(k.substring(k.lastIndexOf("/")+1)):-1)(I),this.parseChunk(I.responseText)))},this._chunkError=function(k){k=I.statusText||k,this._sendError(new Error(k))}}function f(j){(j=j||{}).chunkSize||(j.chunkSize=d.LocalChunkSize),u.call(this,j);var I,k,D=typeof FileReader<"u";this.stream=function(P){this._input=P,k=P.slice||P.webkitSlice||P.mozSlice,D?((I=new FileReader).onload=E(this._chunkLoaded,this),I.onerror=E(this._chunkError,this)):I=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var P=this._input,R=(this._config.chunkSize&&(R=Math.min(this._start+this._config.chunkSize,this._input.size),P=k.call(P,this._start,R)),I.readAsText(P,this._config.encoding));D||this._chunkLoaded({target:{result:R}})},this._chunkLoaded=function(P){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(P.target.result)},this._chunkError=function(){this._sendError(I.error)}}function m(j){var I;u.call(this,j=j||{}),this.stream=function(k){return I=k,this._nextChunk()},this._nextChunk=function(){var k,D;if(!this._finished)return k=this._config.chunkSize,I=k?(D=I.substring(0,k),I.substring(k)):(D=I,""),this._finished=!I,this.parseChunk(D)}}function v(j){u.call(this,j=j||{});var I=[],k=!0,D=!1;this.pause=function(){u.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){u.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(P){this._input=P,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){D&&I.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),I.length?this.parseChunk(I.shift()):k=!0},this._streamData=E(function(P){try{I.push(typeof P=="string"?P:P.toString(this._config.encoding)),k&&(k=!1,this._checkIsFinished(),this.parseChunk(I.shift()))}catch(R){this._streamError(R)}},this),this._streamError=E(function(P){this._streamCleanUp(),this._sendError(P)},this),this._streamEnd=E(function(){this._streamCleanUp(),D=!0,this._streamData("")},this),this._streamCleanUp=E(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function p(j){var I,k,D,P,R=Math.pow(2,53),_=-R,M=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,U=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,F=this,z=0,H=0,W=!1,$=!1,L=[],q={data:[],errors:[],meta:{}};function Y(pe){return j.skipEmptyLines==="greedy"?pe.join("").trim()==="":pe.length===1&&pe[0].length===0}function J(){if(q&&D&&(re("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+d.DefaultDelimiter+"'"),D=!1),j.skipEmptyLines&&(q.data=q.data.filter(function(Ne){return!Y(Ne)})),ne()){let Ne=function(je,$e){C(j.transformHeader)&&(je=j.transformHeader(je,$e)),L.push(je)};if(q)if(Array.isArray(q.data[0])){for(var pe=0;ne()&&pe<q.data.length;pe++)q.data[pe].forEach(Ne);q.data.splice(0,1)}else q.data.forEach(Ne)}function ue(Ne,je){for(var $e=j.header?{}:[],ze=0;ze<Ne.length;ze++){var De=ze,ce=Ne[ze],ce=((Te,Ce)=>(Se=>(j.dynamicTypingFunction&&j.dynamicTyping[Se]===void 0&&(j.dynamicTyping[Se]=j.dynamicTypingFunction(Se)),(j.dynamicTyping[Se]||j.dynamicTyping)===!0))(Te)?Ce==="true"||Ce==="TRUE"||Ce!=="false"&&Ce!=="FALSE"&&((Se=>{if(M.test(Se)&&(Se=parseFloat(Se),_<Se&&Se<R))return 1})(Ce)?parseFloat(Ce):U.test(Ce)?new Date(Ce):Ce===""?null:Ce):Ce)(De=j.header?ze>=L.length?"__parsed_extra":L[ze]:De,ce=j.transform?j.transform(ce,De):ce);De==="__parsed_extra"?($e[De]=$e[De]||[],$e[De].push(ce)):$e[De]=ce}return j.header&&(ze>L.length?re("FieldMismatch","TooManyFields","Too many fields: expected "+L.length+" fields but parsed "+ze,H+je):ze<L.length&&re("FieldMismatch","TooFewFields","Too few fields: expected "+L.length+" fields but parsed "+ze,H+je)),$e}var xe;q&&(j.header||j.dynamicTyping||j.transform)&&(xe=1,!q.data.length||Array.isArray(q.data[0])?(q.data=q.data.map(ue),xe=q.data.length):q.data=ue(q.data,0),j.header&&q.meta&&(q.meta.fields=L),H+=xe)}function ne(){return j.header&&L.length===0}function re(pe,ue,xe,Ne){pe={type:pe,code:ue,message:xe},Ne!==void 0&&(pe.row=Ne),q.errors.push(pe)}C(j.step)&&(P=j.step,j.step=function(pe){q=pe,ne()?J():(J(),q.data.length!==0&&(z+=pe.data.length,j.preview&&z>j.preview?k.abort():(q.data=q.data[0],P(q,F))))}),this.parse=function(pe,ue,xe){var Ne=j.quoteChar||'"',Ne=(j.newline||(j.newline=this.guessLineEndings(pe,Ne)),D=!1,j.delimiter?C(j.delimiter)&&(j.delimiter=j.delimiter(pe),q.meta.delimiter=j.delimiter):((Ne=((je,$e,ze,De,ce)=>{var Te,Ce,Se,Ue;ce=ce||[",","	","|",";",d.RECORD_SEP,d.UNIT_SEP];for(var ot=0;ot<ce.length;ot++){for(var at,jt=ce[ot],Ve=0,nt=0,vt=0,Nt=(Se=void 0,new x({comments:De,delimiter:jt,newline:$e,preview:10}).parse(je)),zt=0;zt<Nt.data.length;zt++)ze&&Y(Nt.data[zt])?vt++:(at=Nt.data[zt].length,nt+=at,Se===void 0?Se=at:0<at&&(Ve+=Math.abs(at-Se),Se=at));0<Nt.data.length&&(nt/=Nt.data.length-vt),(Ce===void 0||Ve<=Ce)&&(Ue===void 0||Ue<nt)&&1.99<nt&&(Ce=Ve,Te=jt,Ue=nt)}return{successful:!!(j.delimiter=Te),bestDelimiter:Te}})(pe,j.newline,j.skipEmptyLines,j.comments,j.delimitersToGuess)).successful?j.delimiter=Ne.bestDelimiter:(D=!0,j.delimiter=d.DefaultDelimiter),q.meta.delimiter=j.delimiter),N(j));return j.preview&&j.header&&Ne.preview++,I=pe,k=new x(Ne),q=k.parse(I,ue,xe),J(),W?{meta:{paused:!0}}:q||{meta:{paused:!1}}},this.paused=function(){return W},this.pause=function(){W=!0,k.abort(),I=C(j.chunk)?"":I.substring(k.getCharIndex())},this.resume=function(){F.streamer._halted?(W=!1,F.streamer.parseChunk(I,!0)):setTimeout(F.resume,3)},this.aborted=function(){return $},this.abort=function(){$=!0,k.abort(),q.meta.aborted=!0,C(j.complete)&&j.complete(q),I=""},this.guessLineEndings=function(je,Ne){je=je.substring(0,1048576);var Ne=new RegExp(g(Ne)+"([^]*?)"+g(Ne),"gm"),xe=(je=je.replace(Ne,"")).split("\r"),Ne=je.split(`
`),je=1<Ne.length&&Ne[0].length<xe[0].length;if(xe.length===1||je)return`
`;for(var $e=0,ze=0;ze<xe.length;ze++)xe[ze][0]===`
`&&$e++;return $e>=xe.length/2?`\r
`:"\r"}}function g(j){return j.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function x(j){var I=(j=j||{}).delimiter,k=j.newline,D=j.comments,P=j.step,R=j.preview,_=j.fastMode,M=null,U=!1,F=j.quoteChar==null?'"':j.quoteChar,z=F;if(j.escapeChar!==void 0&&(z=j.escapeChar),(typeof I!="string"||-1<d.BAD_DELIMITERS.indexOf(I))&&(I=","),D===I)throw new Error("Comment character same as delimiter");D===!0?D="#":(typeof D!="string"||-1<d.BAD_DELIMITERS.indexOf(D))&&(D=!1),k!==`
`&&k!=="\r"&&k!==`\r
`&&(k=`
`);var H=0,W=!1;this.parse=function($,L,q){if(typeof $!="string")throw new Error("Input must be a string");var Y=$.length,J=I.length,ne=k.length,re=D.length,pe=C(P),ue=[],xe=[],Ne=[],je=H=0;if(!$)return Ve();if(_||_!==!1&&$.indexOf(F)===-1){for(var $e=$.split(k),ze=0;ze<$e.length;ze++){if(Ne=$e[ze],H+=Ne.length,ze!==$e.length-1)H+=k.length;else if(q)return Ve();if(!D||Ne.substring(0,re)!==D){if(pe){if(ue=[],Ue(Ne.split(I)),nt(),W)return Ve()}else Ue(Ne.split(I));if(R&&R<=ze)return ue=ue.slice(0,R),Ve(!0)}}return Ve()}for(var De=$.indexOf(I,H),ce=$.indexOf(k,H),Te=new RegExp(g(z)+g(F),"g"),Ce=$.indexOf(F,H);;)if($[H]===F)for(Ce=H,H++;;){if((Ce=$.indexOf(F,Ce+1))===-1)return q||xe.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:ue.length,index:H}),at();if(Ce===Y-1)return at($.substring(H,Ce).replace(Te,F));if(F===z&&$[Ce+1]===z)Ce++;else if(F===z||Ce===0||$[Ce-1]!==z){De!==-1&&De<Ce+1&&(De=$.indexOf(I,Ce+1));var Se=ot((ce=ce!==-1&&ce<Ce+1?$.indexOf(k,Ce+1):ce)===-1?De:Math.min(De,ce));if($.substr(Ce+1+Se,J)===I){Ne.push($.substring(H,Ce).replace(Te,F)),$[H=Ce+1+Se+J]!==F&&(Ce=$.indexOf(F,H)),De=$.indexOf(I,H),ce=$.indexOf(k,H);break}if(Se=ot(ce),$.substring(Ce+1+Se,Ce+1+Se+ne)===k){if(Ne.push($.substring(H,Ce).replace(Te,F)),jt(Ce+1+Se+ne),De=$.indexOf(I,H),Ce=$.indexOf(F,H),pe&&(nt(),W))return Ve();if(R&&ue.length>=R)return Ve(!0);break}xe.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:ue.length,index:H}),Ce++}}else if(D&&Ne.length===0&&$.substring(H,H+re)===D){if(ce===-1)return Ve();H=ce+ne,ce=$.indexOf(k,H),De=$.indexOf(I,H)}else if(De!==-1&&(De<ce||ce===-1))Ne.push($.substring(H,De)),H=De+J,De=$.indexOf(I,H);else{if(ce===-1)break;if(Ne.push($.substring(H,ce)),jt(ce+ne),pe&&(nt(),W))return Ve();if(R&&ue.length>=R)return Ve(!0)}return at();function Ue(vt){ue.push(vt),je=H}function ot(vt){var Nt=0;return Nt=vt!==-1&&(vt=$.substring(Ce+1,vt))&&vt.trim()===""?vt.length:Nt}function at(vt){return q||(vt===void 0&&(vt=$.substring(H)),Ne.push(vt),H=Y,Ue(Ne),pe&&nt()),Ve()}function jt(vt){H=vt,Ue(Ne),Ne=[],ce=$.indexOf(k,H)}function Ve(vt){if(j.header&&!L&&ue.length&&!U){var Nt=ue[0],zt=Object.create(null),Lt=new Set(Nt);let Yt=!1;for(let mt=0;mt<Nt.length;mt++){let Bn=Nt[mt];if(zt[Bn=C(j.transformHeader)?j.transformHeader(Bn,mt):Bn]){let hn,Ds=zt[Bn];for(;hn=Bn+"_"+Ds,Ds++,Lt.has(hn););Lt.add(hn),Nt[mt]=hn,zt[Bn]++,Yt=!0,(M=M===null?{}:M)[hn]=Bn}else zt[Bn]=1,Nt[mt]=Bn;Lt.add(Bn)}Yt&&console.warn("Duplicate headers found and renamed."),U=!0}return{data:ue,errors:xe,meta:{delimiter:I,linebreak:k,aborted:W,truncated:!!vt,cursor:je+(L||0),renamedHeaders:M}}}function nt(){P(Ve()),ue=[],xe=[]}},this.abort=function(){W=!0},this.getCharIndex=function(){return H}}function y(j){var I=j.data,k=l[I.workerId],D=!1;if(I.error)k.userError(I.error,I.file);else if(I.results&&I.results.data){var P={abort:function(){D=!0,b(I.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:w,resume:w};if(C(k.userStep)){for(var R=0;R<I.results.data.length&&(k.userStep({data:I.results.data[R],errors:I.results.errors,meta:I.results.meta},P),!D);R++);delete I.results}else C(k.userChunk)&&(k.userChunk(I.results,P,I.file),delete I.results)}I.finished&&!D&&b(I.workerId,I.results)}function b(j,I){var k=l[j];C(k.userComplete)&&k.userComplete(I),k.terminate(),delete l[j]}function w(){throw new Error("Not implemented.")}function N(j){if(typeof j!="object"||j===null)return j;var I,k=Array.isArray(j)?[]:{};for(I in j)k[I]=N(j[I]);return k}function E(j,I){return function(){j.apply(I,arguments)}}function C(j){return typeof j=="function"}return d.parse=function(j,I){var k=(I=I||{}).dynamicTyping||!1;if(C(k)&&(I.dynamicTypingFunction=k,k={}),I.dynamicTyping=k,I.transform=!!C(I.transform)&&I.transform,!I.worker||!d.WORKERS_SUPPORTED)return k=null,d.NODE_STREAM_INPUT,typeof j=="string"?(j=(D=>D.charCodeAt(0)!==65279?D:D.slice(1))(j),k=new(I.download?h:m)(I)):j.readable===!0&&C(j.read)&&C(j.on)?k=new v(I):(r.File&&j instanceof File||j instanceof Object)&&(k=new f(I)),k.stream(j);(k=(()=>{var D;return!!d.WORKERS_SUPPORTED&&(D=(()=>{var P=r.URL||r.webkitURL||null,R=n.toString();return d.BLOB_URL||(d.BLOB_URL=P.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",R,")();"],{type:"text/javascript"})))})(),(D=new r.Worker(D)).onmessage=y,D.id=c++,l[D.id]=D)})()).userStep=I.step,k.userChunk=I.chunk,k.userComplete=I.complete,k.userError=I.error,I.step=C(I.step),I.chunk=C(I.chunk),I.complete=C(I.complete),I.error=C(I.error),delete I.worker,k.postMessage({input:j,config:I,workerId:k.id})},d.unparse=function(j,I){var k=!1,D=!0,P=",",R=`\r
`,_='"',M=_+_,U=!1,F=null,z=!1,H=((()=>{if(typeof I=="object"){if(typeof I.delimiter!="string"||d.BAD_DELIMITERS.filter(function(L){return I.delimiter.indexOf(L)!==-1}).length||(P=I.delimiter),typeof I.quotes!="boolean"&&typeof I.quotes!="function"&&!Array.isArray(I.quotes)||(k=I.quotes),typeof I.skipEmptyLines!="boolean"&&typeof I.skipEmptyLines!="string"||(U=I.skipEmptyLines),typeof I.newline=="string"&&(R=I.newline),typeof I.quoteChar=="string"&&(_=I.quoteChar),typeof I.header=="boolean"&&(D=I.header),Array.isArray(I.columns)){if(I.columns.length===0)throw new Error("Option columns is empty");F=I.columns}I.escapeChar!==void 0&&(M=I.escapeChar+_),I.escapeFormulae instanceof RegExp?z=I.escapeFormulae:typeof I.escapeFormulae=="boolean"&&I.escapeFormulae&&(z=/^[=+\-@\t\r].*$/)}})(),new RegExp(g(_),"g"));if(typeof j=="string"&&(j=JSON.parse(j)),Array.isArray(j)){if(!j.length||Array.isArray(j[0]))return W(null,j,U);if(typeof j[0]=="object")return W(F||Object.keys(j[0]),j,U)}else if(typeof j=="object")return typeof j.data=="string"&&(j.data=JSON.parse(j.data)),Array.isArray(j.data)&&(j.fields||(j.fields=j.meta&&j.meta.fields||F),j.fields||(j.fields=Array.isArray(j.data[0])?j.fields:typeof j.data[0]=="object"?Object.keys(j.data[0]):[]),Array.isArray(j.data[0])||typeof j.data[0]=="object"||(j.data=[j.data])),W(j.fields||[],j.data||[],U);throw new Error("Unable to serialize unrecognized input");function W(L,q,Y){var J="",ne=(typeof L=="string"&&(L=JSON.parse(L)),typeof q=="string"&&(q=JSON.parse(q)),Array.isArray(L)&&0<L.length),re=!Array.isArray(q[0]);if(ne&&D){for(var pe=0;pe<L.length;pe++)0<pe&&(J+=P),J+=$(L[pe],pe);0<q.length&&(J+=R)}for(var ue=0;ue<q.length;ue++){var xe=(ne?L:q[ue]).length,Ne=!1,je=ne?Object.keys(q[ue]).length===0:q[ue].length===0;if(Y&&!ne&&(Ne=Y==="greedy"?q[ue].join("").trim()==="":q[ue].length===1&&q[ue][0].length===0),Y==="greedy"&&ne){for(var $e=[],ze=0;ze<xe;ze++){var De=re?L[ze]:ze;$e.push(q[ue][De])}Ne=$e.join("").trim()===""}if(!Ne){for(var ce=0;ce<xe;ce++){0<ce&&!je&&(J+=P);var Te=ne&&re?L[ce]:ce;J+=$(q[ue][Te],ce)}ue<q.length-1&&(!Y||0<xe&&!je)&&(J+=R)}}return J}function $(L,q){var Y,J;return L==null?"":L.constructor===Date?JSON.stringify(L).slice(1,25):(J=!1,z&&typeof L=="string"&&z.test(L)&&(L="'"+L,J=!0),Y=L.toString().replace(H,M),(J=J||k===!0||typeof k=="function"&&k(L,q)||Array.isArray(k)&&k[q]||((ne,re)=>{for(var pe=0;pe<re.length;pe++)if(-1<ne.indexOf(re[pe]))return!0;return!1})(Y,d.BAD_DELIMITERS)||-1<Y.indexOf(P)||Y.charAt(0)===" "||Y.charAt(Y.length-1)===" ")?_+Y+_:Y)}},d.RECORD_SEP=String.fromCharCode(30),d.UNIT_SEP=String.fromCharCode(31),d.BYTE_ORDER_MARK="\uFEFF",d.BAD_DELIMITERS=["\r",`
`,'"',d.BYTE_ORDER_MARK],d.WORKERS_SUPPORTED=!a&&!!r.Worker,d.NODE_STREAM_INPUT=1,d.LocalChunkSize=10485760,d.RemoteChunkSize=5242880,d.DefaultDelimiter=",",d.Parser=x,d.ParserHandle=p,d.NetworkStreamer=h,d.FileStreamer=f,d.StringStreamer=m,d.ReadableStreamStreamer=v,r.jQuery&&((i=r.jQuery).fn.parse=function(j){var I=j.config||{},k=[];return this.each(function(R){if(!(i(this).prop("tagName").toUpperCase()==="INPUT"&&i(this).attr("type").toLowerCase()==="file"&&r.FileReader)||!this.files||this.files.length===0)return!0;for(var _=0;_<this.files.length;_++)k.push({file:this.files[_],inputElem:this,instanceConfig:i.extend({},I)})}),D(),this;function D(){if(k.length===0)C(j.complete)&&j.complete();else{var R,_,M,U,F=k[0];if(C(j.before)){var z=j.before(F.file,F.inputElem);if(typeof z=="object"){if(z.action==="abort")return R="AbortError",_=F.file,M=F.inputElem,U=z.reason,void(C(j.error)&&j.error({name:R},_,M,U));if(z.action==="skip")return void P();typeof z.config=="object"&&(F.instanceConfig=i.extend(F.instanceConfig,z.config))}else if(z==="skip")return void P()}var H=F.instanceConfig.complete;F.instanceConfig.complete=function(W){C(H)&&H(W,F.file,F.inputElem),P()},d.parse(F.file,F.instanceConfig)}}function P(){k.splice(0,1),D()}}),o&&(r.onmessage=function(j){j=j.data,d.WORKER_ID===void 0&&j&&(d.WORKER_ID=j.workerId),typeof j.input=="string"?r.postMessage({workerId:d.WORKER_ID,results:d.parse(j.input,j.config),finished:!0}):(r.File&&j.input instanceof File||j.input instanceof Object)&&(j=d.parse(j.input,j.config))&&r.postMessage({workerId:d.WORKER_ID,results:j,finished:!0})}),(h.prototype=Object.create(u.prototype)).constructor=h,(f.prototype=Object.create(u.prototype)).constructor=f,(m.prototype=Object.create(m.prototype)).constructor=m,(v.prototype=Object.create(u.prototype)).constructor=v,d})})(dne);var L1e=dne.exports;const ob=$n(L1e);function Im(){const[t,e]=A.useState([]),[n,r]=A.useState(!1);A.useEffect(()=>{i()},[]);const i=()=>{const m=yr("renter-insight-vehicles",[{id:"1",vin:"1FDXE4FS8KDC12345",make:"Forest River",model:"Georgetown",year:2024,type:pn.MOTORHOME,status:En.AVAILABLE,price:125e3,cost:95e3,location:"Lot A-15",features:["Slide-out","Generator","Solar Panel"],images:["https://images.pexels.com/photos/1319515/pexels-photo-1319515.jpeg"],customFields:{},createdAt:new Date("2024-01-10"),updatedAt:new Date("2024-01-15")},{id:"2",vin:"1FDXE4FS8KDC67890",make:"Winnebago",model:"View",year:2023,type:pn.RV,status:En.AVAILABLE,price:89e3,cost:72e3,location:"Lot B-08",features:["Compact Design","Fuel Efficient"],images:["https://images.pexels.com/photos/2506923/pexels-photo-2506923.jpeg"],customFields:{},createdAt:new Date("2024-01-08"),updatedAt:new Date("2024-01-12")},{id:"3",vin:"1FDXE4FS8KDC11111",make:"Jayco",model:"Eagle",year:2024,type:pn.FIFTH_WHEEL,status:En.AVAILABLE,price:75e3,cost:58e3,location:"Lot C-12",features:["Bunk Beds","Outdoor Kitchen","Fireplace"],images:["https://images.pexels.com/photos/1319515/pexels-photo-1319515.jpeg"],customFields:{},createdAt:new Date("2024-01-05"),updatedAt:new Date("2024-01-10")},{id:"4",vin:"1FDXE4FS8KDC22222",make:"Airstream",model:"Flying Cloud",year:2024,type:pn.TRAVEL_TRAILER,status:En.AVAILABLE,price:95e3,cost:78e3,location:"Lot D-05",features:["Aluminum Construction","Premium Interior","Smart Technology"],images:["https://images.pexels.com/photos/2506923/pexels-photo-2506923.jpeg"],customFields:{},createdAt:new Date("2024-01-03"),updatedAt:new Date("2024-01-08")},{id:"5",vin:"1FDXE4FS8KDC33333",make:"Grand Design",model:"Momentum",year:2023,type:pn.TOY_HAULER,status:En.AVAILABLE,price:11e4,cost:88e3,location:"Lot E-18",features:["Garage Space","Fuel Station","Generator"],images:["https://images.pexels.com/photos/1319515/pexels-photo-1319515.jpeg"],customFields:{},createdAt:new Date("2024-01-01"),updatedAt:new Date("2024-01-05")},{id:"6",vin:"MH12345678901234",make:"Clayton Homes",model:"Inspiration",year:2024,type:pn.DOUBLE_WIDE,status:En.AVAILABLE,price:125e3,cost:95e3,location:"MH Section A-10",features:["3 Bedroom","2 Bathroom","Open Floor Plan","Energy Efficient"],images:["https://images.pexels.com/photos/2506923/pexels-photo-2506923.jpeg"],customFields:{length:"76",width:"28",squareFootage:"2128",constructionType:"Manufactured",roofType:"Shingle",exteriorSiding:"Vinyl",insulationRating:"R-21"},createdAt:new Date("2024-01-15"),updatedAt:new Date("2024-01-15")}]);e(m)},a=m=>{Dn("renter-insight-vehicles",m)};return{vehicles:t,loading:n,getAvailableVehicles:()=>t.filter(m=>m.status===En.AVAILABLE),getVehicleById:m=>t.find(v=>v.id===m),updateVehicleStatus:async(m,v)=>{const p=t.map(g=>g.id===m?{...g,status:v,updatedAt:new Date}:g);e(p),a(p)},createVehicle:async m=>{r(!0);try{const v={id:Math.random().toString(36).substr(2,9),vin:m.vin||"",make:m.make||"",model:m.model||"",year:m.year||new Date().getFullYear(),type:m.type||pn.RV,status:En.AVAILABLE,price:m.price||0,cost:m.cost||0,location:m.location||"",features:m.features||[],images:m.images||[],customFields:m.customFields||{},createdAt:new Date,updatedAt:new Date},p=[...t,v];return e(p),a(p),v}finally{r(!1)}},deleteVehicle:async m=>{const v=t.filter(p=>p.id!==m);e(v),a(v)},importVehiclesFromCSV:async m=>new Promise((v,p)=>{ob.parse(m,{header:!0,skipEmptyLines:!0,complete:g=>{const x=g.data.map(y=>({vin:y.vin||"",make:y.make||"",model:y.model||"",year:parseInt(y.year)||new Date().getFullYear(),type:y.type||pn.RV,status:y.status||En.AVAILABLE,price:parseFloat(y.price)||0,cost:parseFloat(y.cost)||0,location:y.location||"",features:y.features?y.features.split(",").map(b=>b.trim()):[],images:[],customFields:{exteriorColor:y.exteriorColor||"",interiorColor:y.interiorColor||"",length:y.length||"",weight:y.weight||"",sleeps:y.sleeps||"",slideouts:y.slideouts||"",fuelType:y.fuelType||"",mileage:y.mileage||"",condition:y.condition||"New"}}));v(x)},error:g=>{p(g)}})}),exportVehiclesToCSV:()=>{const m=t.map(p=>{var g,x,y,b,w,N,E,C,j;return{id:p.id,vin:p.vin,make:p.make,model:p.model,year:p.year,type:p.type,status:p.status,price:p.price,cost:p.cost,location:p.location,features:p.features.join(", "),exteriorColor:((g=p.customFields)==null?void 0:g.exteriorColor)||"",interiorColor:((x=p.customFields)==null?void 0:x.interiorColor)||"",length:((y=p.customFields)==null?void 0:y.length)||"",weight:((b=p.customFields)==null?void 0:b.weight)||"",sleeps:((w=p.customFields)==null?void 0:w.sleeps)||"",slideouts:((N=p.customFields)==null?void 0:N.slideouts)||"",fuelType:((E=p.customFields)==null?void 0:E.fuelType)||"",mileage:((C=p.customFields)==null?void 0:C.mileage)||"",condition:((j=p.customFields)==null?void 0:j.condition)||""}});return ob.unparse(m)}}}const nw=[{id:"1",name:"2024 Forest River Georgetown",description:"Class A Motorhome with premium features",price:125e3,category:"motorhome"},{id:"2",name:"Extended Warranty",description:"3-year comprehensive warranty coverage",price:2500,category:"warranty"},{id:"3",name:"Solar Panel Package",description:"400W solar panel system with inverter",price:3500,category:"accessory"},{id:"4",name:"Premium Package",description:"Includes extended warranty, solar panels, and premium interior",price:8e3,category:"bundle",isBundle:!0,bundleItems:[{productId:"2",quantity:1},{productId:"3",quantity:1},{productId:"5",quantity:1}]},{id:"5",name:"Premium Interior Upgrade",description:"Leather seating and premium finishes",price:2200,category:"upgrade"}],R1e=[{id:"1",name:"Bulk Accessory Discount",type:"quantity_discount",conditions:{minQuantity:3},discount:{type:"percentage",value:10},isActive:!0},{id:"2",name:"Premium Bundle Discount",type:"bundle_discount",conditions:{productIds:["4"]},discount:{type:"fixed",value:500},isActive:!0}];function une({quote:t,customerId:e,onSave:n,onCancel:r}){const{toast:i}=Ot(),{getAvailableVehicles:a,getVehicleById:o}=Im(),[l,c]=A.useState(!1),[d,u]=A.useState("items"),[h,f]=A.useState({customerId:e,validUntil:new Date(Date.now()+30*24*60*60*1e3),notes:"",terms:"Payment due within 30 days. All sales final.",items:[],subtotal:0,totalDiscount:0,tax:0,taxRate:.08,total:0}),[m,v]=A.useState(""),[p,g]=A.useState(!1),[x,y]=A.useState(""),[b,w]=A.useState({description:"",quantity:1,unitPrice:0,discount:0,discountType:"percentage"}),N=a();A.useEffect(()=>{t&&f(F=>({...F,...t}))},[t]),A.useEffect(()=>{E()},[h.items,h.taxRate]);const E=()=>{const F=h.items.reduce((L,q)=>L+q.total,0),z=h.items.reduce((L,q)=>{const Y=q.discountType==="percentage"?q.quantity*q.unitPrice*q.discount/100:q.discount*q.quantity;return L+Y},0),H=F-z,W=H*h.taxRate,$=H+W;f(L=>({...L,subtotal:F,totalDiscount:z,tax:W,total:$}))},C=()=>{if(!b.description||!b.unitPrice){i({title:"Validation Error",description:"Description and unit price are required",variant:"destructive"});return}const F={id:Math.random().toString(36).substr(2,9),description:b.description,quantity:b.quantity||1,unitPrice:b.unitPrice||0,discount:b.discount||0,discountType:b.discountType||"percentage",total:k(b)};f(z=>({...z,items:[...z.items,F]})),w({description:"",quantity:1,unitPrice:0,discount:0,discountType:"percentage"}),v(""),g(!1)},j=F=>{const z=o(F);if(!z)return;const H={id:Math.random().toString(36).substr(2,9),productId:z.id,description:`${z.year} ${z.make} ${z.model}`,quantity:1,unitPrice:z.price,discount:0,discountType:"percentage",total:z.price};f(W=>({...W,items:[...W.items,H]})),y(""),i({title:"Vehicle Added",description:`${z.year} ${z.make} ${z.model} added to quote`})},I=F=>{const z=nw.find(H=>H.id===F);if(z){if(z.isBundle&&z.bundleItems){const H={id:Math.random().toString(36).substr(2,9),productId:z.id,description:z.description,quantity:1,unitPrice:z.price,discount:0,discountType:"percentage",total:z.price,isBundle:!0,bundleItems:z.bundleItems.map(W=>{const $=nw.find(L=>L.id===W.productId);return{id:Math.random().toString(36).substr(2,9),productId:W.productId,description:($==null?void 0:$.name)||"",quantity:W.quantity,unitPrice:($==null?void 0:$.price)||0,discount:0,discountType:"percentage",total:(($==null?void 0:$.price)||0)*W.quantity}})};f(W=>({...W,items:[...W.items,H]}))}else{const H={id:Math.random().toString(36).substr(2,9),productId:z.id,description:z.name,quantity:1,unitPrice:z.price,discount:0,discountType:"percentage",total:z.price};f(W=>({...W,items:[...W.items,H]}))}R()}},k=F=>{const z=F.quantity*F.unitPrice,H=F.discountType==="percentage"?z*(F.discount/100):F.discount*F.quantity;return z-H},D=(F,z)=>{f(H=>({...H,items:H.items.map(W=>{if(W.id===F){const $={...W,...z};return $.total=k($),$}return W})}))},P=F=>{f(z=>({...z,items:z.items.filter(H=>H.id!==F)}))},R=()=>{const F=h.items.filter(H=>{var W;return((W=nw.find($=>$.id===H.productId))==null?void 0:W.category)==="accessory"});F.length>=3&&F.forEach(H=>{D(H.id,{discount:10,discountType:"percentage"})}),h.items.filter(H=>H.isBundle).forEach(H=>{D(H.id,{discount:500,discountType:"fixed"})})},_=async()=>{c(!0);try{await new Promise($=>setTimeout($,2e3));const F=M(),z=new Blob([F],{type:"text/plain"}),H=URL.createObjectURL(z),W=document.createElement("a");W.href=H,W.download=`quote-${Date.now()}.txt`,document.body.appendChild(W),W.click(),document.body.removeChild(W),URL.revokeObjectURL(H),i({title:"PDF Generated",description:"Quote PDF has been downloaded successfully"})}catch{i({title:"Error",description:"Failed to generate PDF",variant:"destructive"})}finally{c(!1)}},M=()=>`
QUOTE DOCUMENT
==============

Customer ID: ${h.customerId}
Valid Until: ${h.validUntil.toLocaleDateString()}

LINE ITEMS:
-----------
${h.items.map(F=>{var z;return`
${F.description}
Quantity: ${F.quantity} x ${Le(F.unitPrice)}
${F.discount>0?`Discount: ${F.discount}${F.discountType==="percentage"?"%":" fixed"}`:""}
Total: ${Le(F.total)}
${F.isBundle?`
  Bundle Items:
  ${((z=F.bundleItems)==null?void 0:z.map(H=>`  - ${H.description} (${H.quantity}x)`).join(`
  `))||""}
`:""}
`}).join(`
`)}

TOTALS:
-------
Subtotal: ${Le(h.subtotal)}
Total Discount: ${Le(h.totalDiscount)}
Tax (${(h.taxRate*100).toFixed(1)}%): ${Le(h.tax)}
TOTAL: ${Le(h.total)}

Notes: ${h.notes}
Terms: ${h.terms}
    `,U=async()=>{if(h.items.length===0){i({title:"Validation Error",description:"At least one line item is required",variant:"destructive"});return}c(!0);try{const F={...h,customerId:h.customerId||e};await n(F),i({title:"Success",description:"Quote saved successfully"})}catch{i({title:"Error",description:"Failed to save quote",variant:"destructive"})}finally{c(!1)}};return s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:s.jsxs(he,{className:"w-full max-w-6xl max-h-[90vh] overflow-y-auto",children:[s.jsx(ye,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsxs(be,{className:"text-xl flex items-center",children:[s.jsx(Zt,{className:"h-5 w-5 mr-2 text-blue-500"}),t?"Edit Quote":"Create Quote"]}),s.jsx(Be,{children:"Build a detailed quote with line items, pricing rules, and bundled products"})]}),s.jsx(Q,{variant:"ghost",size:"sm",onClick:r,children:s.jsx(on,{className:"h-4 w-4"})})]})}),s.jsxs(fe,{children:[s.jsxs(Vn,{value:d,onValueChange:u,className:"space-y-6",children:[s.jsxs(Mn,{className:"grid w-full grid-cols-4",children:[s.jsx(tt,{value:"items",children:"Line Items"}),s.jsx(tt,{value:"products",children:"Products"}),s.jsx(tt,{value:"pricing",children:"Pricing Rules"}),s.jsx(tt,{value:"details",children:"Quote Details"})]}),s.jsxs(rt,{value:"items",className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h3",{className:"text-lg font-semibold",children:"Quote Line Items"}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsxs(Ke,{value:x,onValueChange:y,children:[s.jsx(He,{className:"w-64",children:s.jsx(Ye,{placeholder:"Add vehicle from inventory"})}),s.jsx(We,{children:N.map(F=>s.jsxs(le,{value:F.id,children:[F.year," ",F.make," ",F.model," - ",Le(F.price)]},F.id))})]}),x&&s.jsxs(Q,{onClick:()=>j(x),size:"sm",children:[s.jsx(yt,{className:"h-4 w-4 mr-2"}),"Add Vehicle"]}),s.jsxs(Q,{onClick:()=>g(!0),size:"sm",variant:"outline",children:[s.jsx(yt,{className:"h-4 w-4 mr-2"}),"Custom Item"]})]})]}),p&&s.jsx(he,{className:"border-dashed",children:s.jsxs(fe,{className:"pt-6",children:[s.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[s.jsxs("div",{children:[s.jsx(ae,{children:"Description"}),s.jsx(Ae,{value:b.description||"",onChange:F=>w(z=>({...z,description:F.target.value})),placeholder:"Item description"})]}),s.jsxs("div",{children:[s.jsx(ae,{children:"Unit Price"}),s.jsx(Ae,{type:"number",value:b.unitPrice||"",onChange:F=>w(z=>({...z,unitPrice:parseFloat(F.target.value)||0})),placeholder:"0.00"})]}),s.jsxs("div",{children:[s.jsx(ae,{children:"Quantity"}),s.jsx(Ae,{type:"number",value:b.quantity||1,onChange:F=>w(z=>({...z,quantity:parseInt(F.target.value)||1})),min:"1"})]}),s.jsxs("div",{children:[s.jsx(ae,{children:"Discount"}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsx(Ae,{type:"number",value:b.discount||0,onChange:F=>w(z=>({...z,discount:parseFloat(F.target.value)||0})),placeholder:"0"}),s.jsxs(Ke,{value:b.discountType,onValueChange:F=>w(z=>({...z,discountType:F})),children:[s.jsx(He,{className:"w-32",children:s.jsx(Ye,{})}),s.jsxs(We,{children:[s.jsx(le,{value:"percentage",children:"%"}),s.jsx(le,{value:"fixed",children:"$"})]})]})]})]})]}),s.jsxs("div",{className:"flex justify-end space-x-2 mt-4",children:[s.jsx(Q,{variant:"outline",onClick:()=>g(!1),children:"Cancel"}),s.jsx(Q,{onClick:C,children:"Add Item"})]})]})}),s.jsxs("div",{className:"space-y-4",children:[h.items.map((F,z)=>s.jsx(he,{className:"shadow-sm",children:s.jsxs(fe,{className:"pt-6",children:[s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex-1 grid gap-4 md:grid-cols-4",children:[s.jsxs("div",{children:[s.jsx(ae,{children:"Description"}),s.jsx(Ae,{value:F.description,onChange:H=>D(F.id,{description:H.target.value})}),F.isBundle&&s.jsxs(Re,{className:"mt-1 bg-purple-50 text-purple-700 border-purple-200",children:[s.jsx(Ii,{className:"h-3 w-3 mr-1"}),"Bundle"]})]}),s.jsxs("div",{children:[s.jsx(ae,{children:"Quantity"}),s.jsx(Ae,{type:"number",value:F.quantity,onChange:H=>D(F.id,{quantity:parseInt(H.target.value)||1}),min:"1"})]}),s.jsxs("div",{children:[s.jsx(ae,{children:"Unit Price"}),s.jsx(Ae,{type:"number",value:F.unitPrice,onChange:H=>D(F.id,{unitPrice:parseFloat(H.target.value)||0}),step:"0.01"})]}),s.jsxs("div",{children:[s.jsx(ae,{children:"Discount"}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsx(Ae,{type:"number",value:F.discount,onChange:H=>D(F.id,{discount:parseFloat(H.target.value)||0}),step:"0.01"}),s.jsxs(Ke,{value:F.discountType,onValueChange:H=>D(F.id,{discountType:H}),children:[s.jsx(He,{className:"w-16",children:s.jsx(Ye,{})}),s.jsxs(We,{children:[s.jsx(le,{value:"percentage",children:"%"}),s.jsx(le,{value:"fixed",children:"$"})]})]})]})]})]}),s.jsxs("div",{className:"flex items-center space-x-3 ml-4",children:[s.jsxs("div",{className:"text-right",children:[s.jsx("div",{className:"text-sm text-muted-foreground",children:"Total"}),s.jsx("div",{className:"font-bold text-lg",children:Le(F.total)})]}),s.jsx(Q,{variant:"outline",size:"sm",onClick:()=>P(F.id),children:s.jsx(Tr,{className:"h-4 w-4"})})]})]}),F.isBundle&&F.bundleItems&&s.jsxs("div",{className:"mt-4 pl-4 border-l-2 border-purple-200",children:[s.jsx("h4",{className:"text-sm font-semibold text-purple-700 mb-2",children:"Bundle Contents:"}),s.jsx("div",{className:"space-y-2",children:F.bundleItems.map(H=>s.jsxs("div",{className:"flex items-center justify-between text-sm bg-purple-50 p-2 rounded",children:[s.jsx("span",{children:H.description}),s.jsxs("span",{children:[H.quantity,"x ",Le(H.unitPrice)]})]},H.id))})]})]})},F.id)),h.items.length===0&&s.jsxs("div",{className:"text-center py-12 text-muted-foreground border-2 border-dashed rounded-lg",children:[s.jsx(Zt,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),s.jsx("p",{children:"No line items added yet"}),s.jsx("p",{className:"text-sm",children:"Add products or custom items to build your quote"})]})]}),h.items.length>0&&s.jsx(he,{className:"bg-muted/30",children:s.jsx(fe,{className:"pt-6",children:s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Subtotal:"}),s.jsx("span",{children:Le(h.subtotal)})]}),s.jsxs("div",{className:"flex justify-between text-red-600",children:[s.jsx("span",{children:"Total Discount:"}),s.jsxs("span",{children:["-",Le(h.totalDiscount)]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsxs("span",{children:["Tax (",(h.taxRate*100).toFixed(1),"%):"]}),s.jsx("span",{children:Le(h.tax)})]}),s.jsxs("div",{className:"flex justify-between text-lg font-bold border-t pt-2",children:[s.jsx("span",{children:"Total:"}),s.jsx("span",{children:Le(h.total)})]})]})})})]}),s.jsx(rt,{value:"products",className:"space-y-6",children:s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Available Inventory & Products"}),s.jsxs("div",{className:"mb-8",children:[s.jsx("h4",{className:"text-md font-semibold mb-3 text-blue-600",children:"Available Vehicles"}),s.jsx("div",{className:"grid gap-4 md:grid-cols-2",children:N.map(F=>s.jsx(he,{className:"shadow-sm hover:shadow-md transition-shadow cursor-pointer",children:s.jsx(fe,{className:"pt-6",children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[s.jsxs("h4",{className:"font-semibold",children:[F.year," ",F.make," ",F.model]}),s.jsx(Re,{className:"bg-blue-50 text-blue-700 border-blue-200",children:F.type.replace("_"," ").toUpperCase()})]}),s.jsxs("p",{className:"text-sm text-muted-foreground mb-2",children:["VIN: ",F.vin]}),s.jsxs("p",{className:"text-sm text-muted-foreground mb-2",children:["Location: ",F.location]}),s.jsx("div",{className:"text-lg font-bold text-primary",children:Le(F.price)}),F.features.length>0&&s.jsx("div",{className:"mt-3",children:s.jsxs("div",{className:"flex flex-wrap gap-1",children:[F.features.slice(0,3).map((z,H)=>s.jsx(Re,{variant:"outline",className:"text-xs",children:z},H)),F.features.length>3&&s.jsxs(Re,{variant:"outline",className:"text-xs",children:["+",F.features.length-3," more"]})]})})]}),s.jsxs(Q,{onClick:()=>j(F.id),size:"sm",className:"ml-4",children:[s.jsx(yt,{className:"h-4 w-4 mr-1"}),"Add"]})]})})},F.id))})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-md font-semibold mb-3 text-green-600",children:"Available Products & Services"}),s.jsx("div",{className:"grid gap-4 md:grid-cols-2",children:nw.map(F=>s.jsx(he,{className:"shadow-sm hover:shadow-md transition-shadow cursor-pointer",children:s.jsx(fe,{className:"pt-6",children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[s.jsx("h4",{className:"font-semibold",children:F.name}),F.isBundle&&s.jsxs(Re,{className:"bg-purple-50 text-purple-700 border-purple-200",children:[s.jsx(Ii,{className:"h-3 w-3 mr-1"}),"Bundle"]})]}),s.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:F.description}),s.jsx("div",{className:"text-lg font-bold text-primary",children:Le(F.price)}),F.isBundle&&F.bundleItems&&s.jsxs("div",{className:"mt-3 p-2 bg-purple-50 rounded",children:[s.jsx("div",{className:"text-xs font-semibold text-purple-700 mb-1",children:"Includes:"}),F.bundleItems.map(z=>{const H=nw.find(W=>W.id===z.productId);return s.jsxs("div",{className:"text-xs text-purple-600",children:[" ",H==null?void 0:H.name," (",z.quantity,"x)"]},z.productId)})]})]}),s.jsxs(Q,{onClick:()=>I(F.id),size:"sm",className:"ml-4",children:[s.jsx(yt,{className:"h-4 w-4 mr-1"}),"Add"]})]})})},F.id))})]})]})}),s.jsx(rt,{value:"pricing",className:"space-y-6",children:s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Active Pricing Rules"}),s.jsx("div",{className:"space-y-4",children:R1e.filter(F=>F.isActive).map(F=>s.jsx(he,{className:"shadow-sm",children:s.jsx(fe,{className:"pt-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold",children:F.name}),s.jsxs("p",{className:"text-sm text-muted-foreground",children:[F.type==="quantity_discount"&&`Min quantity: ${F.conditions.minQuantity}`,F.type==="bundle_discount"&&"Applied to bundle products",F.type==="customer_discount"&&`Customer type: ${F.conditions.customerType}`]}),s.jsx("div",{className:"flex items-center space-x-2 mt-2",children:s.jsxs(Re,{className:"bg-green-50 text-green-700 border-green-200",children:[s.jsx(r3,{className:"h-3 w-3 mr-1"}),F.discount.type==="percentage"?`${F.discount.value}%`:Le(F.discount.value)," off"]})})]}),s.jsxs(Q,{variant:"outline",size:"sm",onClick:()=>R(),children:[s.jsx(dv,{className:"h-4 w-4 mr-1"}),"Apply"]})]})})},F.id))})]})}),s.jsxs(rt,{value:"details",className:"space-y-6",children:[s.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"validUntil",children:"Valid Until"}),s.jsx(Ae,{id:"validUntil",type:"date",value:h.validUntil.toISOString().split("T")[0],onChange:F=>f(z=>({...z,validUntil:new Date(F.target.value)}))})]}),s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"taxRate",children:"Tax Rate (%)"}),s.jsx(Ae,{id:"taxRate",type:"number",value:(h.taxRate*100).toFixed(2),onChange:F=>f(z=>({...z,taxRate:parseFloat(F.target.value)/100||0})),step:"0.01",min:"0",max:"100"})]})]}),s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"notes",children:"Notes"}),s.jsx(un,{id:"notes",value:h.notes,onChange:F=>f(z=>({...z,notes:F.target.value})),placeholder:"Additional notes for the customer...",rows:3})]}),s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"terms",children:"Terms & Conditions"}),s.jsx(un,{id:"terms",value:h.terms,onChange:F=>f(z=>({...z,terms:F.target.value})),placeholder:"Terms and conditions...",rows:4})]})]})]}),s.jsxs("div",{className:"flex justify-between items-center pt-6 border-t",children:[s.jsx("div",{className:"flex space-x-2",children:s.jsxs(Q,{variant:"outline",onClick:_,disabled:l||h.items.length===0,children:[s.jsx(Ha,{className:"h-4 w-4 mr-2"}),l?"Generating...":"Export PDF"]})}),s.jsxs("div",{className:"flex space-x-3",children:[s.jsx(Q,{variant:"outline",onClick:r,disabled:l,children:"Cancel"}),s.jsx(Q,{onClick:U,disabled:l,children:l?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Saving..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Wn,{className:"h-4 w-4 mr-2"}),"Save Quote"]})})]})]})]})]})})}function M1e(){const[t,e]=A.useState([]),[n,r]=A.useState([]),[i,a]=A.useState([]),[o,l]=A.useState(!1);A.useEffect(()=>{c()},[]);const c=()=>{const E=yr("renter-insight-quotes",[]);e(E);const C=[{id:"1",name:"2024 Forest River Georgetown",description:"Class A Motorhome with premium features",price:125e3,category:"motorhome"},{id:"2",name:"Extended Warranty",description:"3-year comprehensive warranty coverage",price:2500,category:"warranty"},{id:"3",name:"Solar Panel Package",description:"400W solar panel system with inverter",price:3500,category:"accessory"},{id:"4",name:"Premium Package",description:"Includes extended warranty, solar panels, and premium interior",price:8e3,category:"bundle",isBundle:!0,bundleItems:[{productId:"2",quantity:1},{productId:"3",quantity:1},{productId:"5",quantity:1}]},{id:"5",name:"Premium Interior Upgrade",description:"Leather seating and premium finishes",price:2200,category:"upgrade"},{id:"6",name:"Backup Camera System",description:"Wireless backup camera with monitor",price:450,category:"accessory"},{id:"7",name:"Awning Package",description:"Electric awning with LED lighting",price:1200,category:"accessory"}],j=[{id:"1",name:"Bulk Accessory Discount",type:"quantity_discount",conditions:{minQuantity:3},discount:{type:"percentage",value:10},isActive:!0},{id:"2",name:"Premium Bundle Discount",type:"bundle_discount",conditions:{productIds:["4"]},discount:{type:"fixed",value:500},isActive:!0},{id:"3",name:"First-Time Buyer Discount",type:"customer_discount",conditions:{customerType:"first_time"},discount:{type:"percentage",value:5},isActive:!0}];r(C),a(j)},d=E=>{Dn("renter-insight-quotes",E)},u=async E=>{l(!0);try{const C={id:Math.random().toString(36).substr(2,9),customerId:E.customerId||"",items:E.items||[],subtotal:E.subtotal||0,totalDiscount:E.totalDiscount||0,tax:E.tax||0,taxRate:E.taxRate||.08,total:E.total||0,status:"draft",validUntil:E.validUntil||new Date(Date.now()+2592e6),notes:E.notes||"",terms:E.terms||"",createdAt:new Date,updatedAt:new Date},j=[...t,C];return e(j),d(j),C}finally{l(!1)}},h=async(E,C)=>{l(!0);try{const j=t.map(I=>I.id===E?{...I,...C,updatedAt:new Date}:I);return e(j),d(j),j.find(I=>I.id===E)}finally{l(!1)}};return{quotes:t,products:n,pricingRules:i,loading:o,createQuote:u,updateQuote:h,deleteQuote:async E=>{const C=t.filter(j=>j.id!==E);e(C),d(C)},duplicateQuote:async E=>{const C=t.find(k=>k.id===E);if(!C)return;const j={...C,id:Math.random().toString(36).substr(2,9),status:"draft",createdAt:new Date,updatedAt:new Date},I=[...t,j];return e(I),d(I),j},sendQuote:async E=>h(E,{status:"sent"}),acceptQuote:async E=>h(E,{status:"accepted"}),rejectQuote:async E=>h(E,{status:"rejected"}),calculateQuoteTotals:(E,C=.08)=>{const j=E.reduce((R,_)=>R+_.total,0),I=E.reduce((R,_)=>{const M=_.discountType==="percentage"?_.quantity*_.unitPrice*_.discount/100:_.discount*_.quantity;return R+M},0),k=j-I,D=k*C,P=k+D;return{subtotal:j,totalDiscount:I,tax:D,total:P}},applyPricingRules:(E,C)=>{let j=[...E];return i.forEach(I=>{if(I.isActive)switch(I.type){case"quantity_discount":if(I.conditions.minQuantity){const k=j.filter(D=>{var P;return((P=n.find(R=>R.id===D.productId))==null?void 0:P.category)==="accessory"});k.length>=I.conditions.minQuantity&&(j=j.map(D=>k.includes(D)?{...D,discount:I.discount.value,discountType:I.discount.type}:D))}break;case"bundle_discount":I.conditions.productIds&&(j=j.map(k=>{var D;return k.isBundle&&((D=I.conditions.productIds)!=null&&D.includes(k.productId||""))?{...k,discount:I.discount.value,discountType:I.discount.type}:k}));break}}),j},getQuotesByCustomer:E=>t.filter(C=>C.customerId===E),getQuotesByStatus:E=>t.filter(C=>C.status===E),getExpiredQuotes:()=>{const E=new Date;return t.filter(C=>new Date(C.validUntil)<E&&C.status!=="accepted")}}}function F1e({quote:t,onClose:e,onEdit:n}){const r=i=>{switch(i){case"draft":return"bg-gray-50 text-gray-700 border-gray-200";case"sent":return"bg-blue-50 text-blue-700 border-blue-200";case"viewed":return"bg-yellow-50 text-yellow-700 border-yellow-200";case"accepted":return"bg-green-50 text-green-700 border-green-200";case"rejected":return"bg-red-50 text-red-700 border-red-200";case"expired":return"bg-orange-50 text-orange-700 border-orange-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}};return s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:s.jsxs(he,{className:"w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[s.jsx(ye,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsxs(be,{className:"text-xl",children:["Quote #",t.id]}),s.jsx(Be,{children:"Quote details and line items"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsxs(Q,{onClick:()=>n(t),size:"sm",children:[s.jsx(ar,{className:"h-4 w-4 mr-2"}),"Edit Quote"]}),s.jsx(Q,{variant:"ghost",size:"sm",onClick:e,children:s.jsx(on,{className:"h-4 w-4"})})]})]})}),s.jsxs(fe,{className:"space-y-6",children:[s.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Customer ID"}),s.jsx("p",{className:"font-medium",children:t.customerId})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Status"}),s.jsx("div",{className:"mt-1",children:s.jsx(Re,{className:st("ri-badge-status",r(t.status)),children:t.status.toUpperCase()})})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Created Date"}),s.jsx("p",{className:"font-medium",children:ht(t.createdAt)})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Valid Until"}),s.jsx("p",{className:"font-medium",children:ht(t.validUntil)})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Line Items"}),s.jsx("div",{className:"space-y-3",children:Array.isArray(t.items)&&t.items.length>0?t.items.map((i,a)=>s.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("h4",{className:"font-medium",children:i.description}),s.jsxs("p",{className:"text-sm text-muted-foreground",children:["Quantity: ",i.quantity,"  ",Le(i.unitPrice)]})]}),s.jsx("div",{className:"text-right",children:s.jsx("div",{className:"font-bold text-lg",children:Le(i.total)})})]},i.id)):s.jsx("p",{className:"text-sm text-muted-foreground",children:"No items in this quote."})})]}),s.jsx("div",{className:"bg-muted/30 p-4 rounded-lg",children:s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Subtotal:"}),s.jsx("span",{children:Le(t.subtotal)})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Tax:"}),s.jsx("span",{children:Le(t.tax)})]}),s.jsxs("div",{className:"flex justify-between text-lg font-bold border-t pt-2",children:[s.jsx("span",{children:"Total:"}),s.jsx("span",{children:Le(t.total)})]})]})}),t.notes&&s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Notes"}),s.jsx("div",{className:"mt-1 p-3 bg-muted/30 rounded-md",children:s.jsx("p",{className:"text-sm",children:t.notes})})]})]})]})})}function $1e(){const{quotes:t,createQuote:e,updateQuote:n,deleteQuote:r,duplicateQuote:i,sendQuote:a}=M1e(),{toast:o}=Ot(),[l,c]=A.useState(""),[d,u]=A.useState("all"),[h,f]=A.useState(!1),[m,v]=A.useState(null),[p,g]=A.useState(null),[x,y]=A.useState(""),[b,w]=A.useState(null);A.useEffect(()=>{!p&&b&&(v(b),y(b.customerId),f(!0),w(null))},[p,b]);const N=M=>{switch(M){case"draft":return"bg-gray-50 text-gray-700 border-gray-200";case"sent":return"bg-blue-50 text-blue-700 border-blue-200";case"viewed":return"bg-yellow-50 text-yellow-700 border-yellow-200";case"accepted":return"bg-green-50 text-green-700 border-green-200";case"rejected":return"bg-red-50 text-red-700 border-red-200";case"expired":return"bg-orange-50 text-orange-700 border-orange-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},E=Array.isArray(t)?t.filter(M=>{var z,H,W,$;const U=((H=(z=M.id)==null?void 0:z.toLowerCase())==null?void 0:H.includes(l.toLowerCase()))||(($=(W=M.customerId)==null?void 0:W.toLowerCase())==null?void 0:$.includes(l.toLowerCase())),F=d==="all"||M.status===d;return U&&F}):[],C=()=>{v(null),y(""),f(!0)},j=M=>{g(null),w(M)},I=M=>{g(M)},k=()=>g(null),D=async M=>{try{m?(await n(m.id,M),o({title:"Success",description:"Quote updated successfully"})):(await e(M),o({title:"Success",description:"Quote created successfully"})),f(!1),v(null)}catch(U){console.error("Error saving quote:",U),o({title:"Error",description:"Failed to save quote",variant:"destructive"})}},P=async M=>{try{await a(M),o({title:"Success",description:"Quote sent to customer"})}catch(U){console.error("Error sending quote:",U),o({title:"Error",description:"Failed to send quote",variant:"destructive"})}},R=async M=>{try{await i(M),o({title:"Success",description:"Quote duplicated successfully"})}catch(U){console.error("Error duplicating quote:",U),o({title:"Error",description:"Failed to duplicate quote",variant:"destructive"})}},_=async M=>{if(window.confirm("Are you sure you want to delete this quote?"))try{await r(M),o({title:"Success",description:"Quote deleted successfully"})}catch(U){console.error("Error deleting quote:",U),o({title:"Error",description:"Failed to delete quote",variant:"destructive"})}};return E.length,E.filter(M=>M.status==="draft").length,E.filter(M=>M.status==="sent").length,E.filter(M=>M.status==="accepted").length,E.reduce((M,U)=>M+(U.total||0),0),E.filter(M=>M.status==="accepted").reduce((M,U)=>M+(U.total||0),0),s.jsxs("div",{className:"space-y-8",children:[h&&s.jsx(une,{quote:m,customerId:x,onSave:D,onCancel:()=>{f(!1),v(null)}}),p&&s.jsx(F1e,{quote:p,onClose:k,onEdit:j}),s.jsx("div",{className:"ri-page-header",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"ri-page-title",children:"Quote Builder"}),s.jsx("p",{className:"ri-page-description",children:"Create and manage customer quotes with advanced pricing rules"})]}),s.jsxs(Q,{className:"shadow-sm",onClick:C,children:[s.jsx(yt,{className:"h-4 w-4 mr-2"}),"New Quote"]})]})}),s.jsx("div",{className:"ri-stats-grid"}),s.jsxs("div",{className:"flex gap-4",children:[s.jsxs("div",{className:"ri-search-bar",children:[s.jsx(Rr,{className:"ri-search-icon"}),s.jsx(Ae,{placeholder:"Search quotes...",value:l,onChange:M=>c(M.target.value),className:"ri-search-input shadow-sm"})]}),s.jsxs(Ke,{value:d,onValueChange:u,children:[s.jsx(He,{className:"w-40",children:s.jsx(Ye,{placeholder:"Status"})}),s.jsxs(We,{children:[s.jsx(le,{value:"all",children:"All Status"}),s.jsx(le,{value:"draft",children:"Draft"}),s.jsx(le,{value:"sent",children:"Sent"}),s.jsx(le,{value:"viewed",children:"Viewed"}),s.jsx(le,{value:"accepted",children:"Accepted"}),s.jsx(le,{value:"rejected",children:"Rejected"}),s.jsx(le,{value:"expired",children:"Expired"})]})]}),s.jsxs(Q,{variant:"outline",className:"shadow-sm",children:[s.jsx(bc,{className:"h-4 w-4 mr-2"}),"Filter"]})]}),s.jsxs(he,{className:"shadow-sm",children:[s.jsxs(ye,{children:[s.jsxs(be,{className:"text-xl",children:["Quotes (",E.length,")"]}),s.jsx(Be,{children:"Manage customer quotes with advanced pricing and bundling"})]}),s.jsx(fe,{children:s.jsx("div",{className:"space-y-4",children:Array.isArray(E)&&E.length>0?E.map(M=>s.jsxs("div",{className:"ri-table-row",children:[s.jsx("div",{className:"flex items-center space-x-4 flex-1",children:s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[s.jsxs("h3",{className:"font-semibold text-foreground",children:["Quote #",M.id]}),s.jsx(Re,{className:st("ri-badge-status",N(M.status)),children:M.status.toUpperCase()})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm text-muted-foreground",children:[s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Customer:"})," ",M.customerId]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Total:"})," ",s.jsx("span",{className:"ml-1 font-bold text-primary",children:Le(M.total)})]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Created:"})," ",ht(M.createdAt)]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Valid Until:"})," ",ht(M.validUntil)]})]})]})}),s.jsxs("div",{className:"ri-action-buttons",children:[s.jsxs(Q,{variant:"outline",size:"sm",className:"shadow-sm",onClick:()=>I(M),children:[s.jsx(Wr,{className:"h-3 w-3 mr-1"}),"View"]}),s.jsxs(Q,{variant:"outline",size:"sm",className:"shadow-sm",onClick:()=>j(M),children:[s.jsx(ar,{className:"h-3 w-3 mr-1"}),"Edit"]}),M.status==="draft"&&s.jsxs(Q,{variant:"outline",size:"sm",className:"shadow-sm",onClick:()=>P(M.id),children:[s.jsx(Do,{className:"h-3 w-3 mr-1"}),"Send"]}),s.jsxs(Q,{variant:"outline",size:"sm",className:"shadow-sm",onClick:()=>R(M.id),children:[s.jsx(n3,{className:"h-3 w-3 mr-1"}),"Copy"]}),s.jsx(Q,{variant:"outline",size:"sm",className:"shadow-sm text-red-600 hover:text-red-700",onClick:()=>_(M.id),children:s.jsx(Tr,{className:"h-3 w-3"})})]})]},M.id)):s.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[s.jsx(Zt,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),s.jsx("p",{children:"No quotes found"}),s.jsx("p",{className:"text-sm",children:"Create your first quote to get started"})]})})})]})]})}function pU(){var I;const{leads:t,sources:e,activities:n,salesReps:r,updateLeadStatus:i,assignLead:a,getActivitiesByLead:o,getRemindersByUser:l,getLeadScore:c}=uh(),[d,u]=A.useState(""),[h,f]=A.useState("all"),[m,v]=A.useState("all"),[p,g]=A.useState("all"),[x,y]=A.useState(null),[b,w]=A.useState(!1),N=k=>{switch(k){case gi.NEW:return"bg-blue-50 text-blue-700 border-blue-200";case gi.CONTACTED:return"bg-yellow-50 text-yellow-700 border-yellow-200";case gi.QUALIFIED:return"bg-green-50 text-green-700 border-green-200";case gi.PROPOSAL:return"bg-purple-50 text-purple-700 border-purple-200";case gi.NEGOTIATION:return"bg-orange-50 text-orange-700 border-orange-200";case gi.CLOSED_WON:return"bg-emerald-50 text-emerald-700 border-emerald-200";case gi.CLOSED_LOST:return"bg-red-50 text-red-700 border-red-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},E=k=>k>=80?"text-green-600 bg-green-50":k>=60?"text-yellow-600 bg-yellow-50":k>=40?"text-orange-600 bg-orange-50":"text-red-600 bg-red-50",C=t.filter(k=>{const D=`${k.firstName} ${k.lastName}`.toLowerCase().includes(d.toLowerCase())||k.email.toLowerCase().includes(d.toLowerCase())||k.phone.includes(d),P=h==="all"||k.status===h,R=m==="all"||k.sourceId===m,_=p==="all"||k.assignedTo===p;return D&&P&&R&&_}),j=k=>{console.log("New lead created:",k)};if(x){const k=o(x.id),D=l("current-user").filter(R=>R.leadId===x.id),P=c(x.id);return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx(Q,{variant:"outline",onClick:()=>y(null),className:"mb-4",children:" Back to Leads"}),s.jsxs("h1",{className:"ri-page-title",children:[x.firstName," ",x.lastName]}),s.jsx("p",{className:"ri-page-description",children:"Lead details and activity management"})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(Re,{className:st("ri-badge-status",N(x.status)),children:x.status.replace("_"," ").toUpperCase()}),x.score&&s.jsxs(Re,{className:st("ri-badge-status",E(x.score)),children:["Score: ",x.score]})]})]}),s.jsxs(Vn,{defaultValue:"overview",className:"space-y-6",children:[s.jsxs(Mn,{className:"grid w-full grid-cols-6",children:[s.jsx(tt,{value:"overview",children:"Overview"}),s.jsx(tt,{value:"activity",children:"Activity"}),s.jsx(tt,{value:"communication",children:"Communication"}),s.jsx(tt,{value:"ai-insights",children:"AI Insights"}),s.jsx(tt,{value:"nurturing",children:"Nurturing"}),s.jsx(tt,{value:"reminders",children:"Reminders"})]}),s.jsx(rt,{value:"overview",className:"space-y-6",children:s.jsxs("div",{className:"grid gap-6 md:grid-cols-3",children:[s.jsx("div",{className:"md:col-span-2",children:s.jsxs(he,{className:"shadow-sm",children:[s.jsx(ye,{children:s.jsx(be,{children:"Lead Information"})}),s.jsxs(fe,{children:[s.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Email"}),s.jsx("p",{className:"font-medium",children:x.email})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Phone"}),s.jsx("p",{className:"font-medium",children:x.phone})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Source"}),s.jsx("p",{className:"font-medium",children:x.source})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Assigned To"}),s.jsx("p",{className:"font-medium",children:((I=r.find(R=>R.id===x.assignedTo))==null?void 0:I.name)||"Unassigned"})]}),Object.entries(x.customFields||{}).map(([R,_])=>s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-muted-foreground capitalize",children:R.replace(/([A-Z])/g," $1").trim()}),s.jsx("p",{className:"font-medium",children:_})]},R))]}),x.notes&&s.jsxs("div",{className:"mt-4",children:[s.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Notes"}),s.jsx("p",{className:"mt-1 p-3 bg-muted/30 rounded-md",children:x.notes})]})]})]})}),s.jsx("div",{className:"space-y-6",children:P&&s.jsx(I1e,{score:P})})]})}),s.jsx(rt,{value:"activity",children:s.jsx(D1e,{leadId:x.id,activities:k})}),s.jsx(rt,{value:"communication",children:s.jsx(O1e,{leadId:x.id,leadData:x})}),s.jsx(rt,{value:"ai-insights",children:s.jsx(_1e,{leadId:x.id,leadData:x})}),s.jsx(rt,{value:"nurturing",children:s.jsx("div",{className:"space-y-6",children:s.jsx(mU,{})})}),s.jsx(rt,{value:"reminders",children:s.jsx(k1e,{leadId:x.id,reminders:D})})]})]})}return s.jsxs("div",{className:"space-y-8",children:[b&&s.jsx(Yb,{onClose:()=>w(!1),onSuccess:j}),s.jsx("div",{className:"ri-page-header",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"ri-page-title",children:"CRM & Prospecting"}),s.jsx("p",{className:"ri-page-description",children:"Manage leads, track activities, and monitor sales pipeline with AI-powered insights"})]}),s.jsxs(Q,{className:"shadow-sm",onClick:()=>w(!0),children:[s.jsx(yt,{className:"h-4 w-4 mr-2"}),"Add Lead"]})]})}),s.jsxs("div",{className:"ri-stats-grid",children:[s.jsxs(he,{className:"shadow-sm border-0 bg-gradient-to-br from-blue-50 to-blue-100/50",children:[s.jsxs(ye,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(be,{className:"text-sm font-medium text-blue-900",children:"Total Leads"}),s.jsx(Lr,{className:"h-4 w-4 text-blue-600"})]}),s.jsxs(fe,{children:[s.jsx("div",{className:"text-2xl font-bold text-blue-900",children:t.length}),s.jsxs("p",{className:"text-xs text-blue-600 flex items-center mt-1",children:[s.jsx(tn,{className:"h-3 w-3 mr-1"}),"+12% from last month"]})]})]}),s.jsxs(he,{className:"shadow-sm border-0 bg-gradient-to-br from-yellow-50 to-yellow-100/50",children:[s.jsxs(ye,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(be,{className:"text-sm font-medium text-yellow-900",children:"New Leads"}),s.jsx(Lr,{className:"h-4 w-4 text-yellow-600"})]}),s.jsxs(fe,{children:[s.jsx("div",{className:"text-2xl font-bold text-yellow-900",children:t.filter(k=>k.status===gi.NEW).length}),s.jsxs("p",{className:"text-xs text-yellow-600 flex items-center mt-1",children:[s.jsx(tn,{className:"h-3 w-3 mr-1"}),"+8% from last week"]})]})]}),s.jsxs(he,{className:"shadow-sm border-0 bg-gradient-to-br from-green-50 to-green-100/50",children:[s.jsxs(ye,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(be,{className:"text-sm font-medium text-green-900",children:"Qualified"}),s.jsx(xd,{className:"h-4 w-4 text-green-600"})]}),s.jsxs(fe,{children:[s.jsx("div",{className:"text-2xl font-bold text-green-900",children:t.filter(k=>k.status===gi.QUALIFIED).length}),s.jsxs("p",{className:"text-xs text-green-600 flex items-center mt-1",children:[s.jsx(tn,{className:"h-3 w-3 mr-1"}),"+15% from last month"]})]})]}),s.jsxs(he,{className:"shadow-sm border-0 bg-gradient-to-br from-purple-50 to-purple-100/50",children:[s.jsxs(ye,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(be,{className:"text-sm font-medium text-purple-900",children:"AI Insights"}),s.jsx(od,{className:"h-4 w-4 text-purple-600"})]}),s.jsxs(fe,{children:[s.jsx("div",{className:"text-2xl font-bold text-purple-900",children:"47"}),s.jsxs("p",{className:"text-xs text-purple-600 flex items-center mt-1",children:[s.jsx(od,{className:"h-3 w-3 mr-1"}),"Active recommendations"]})]})]})]}),s.jsxs(Vn,{defaultValue:"leads",className:"space-y-6",children:[s.jsxs(Mn,{className:"grid w-full grid-cols-6",children:[s.jsx(tt,{value:"leads",children:"Leads"}),s.jsx(tt,{value:"pipeline",children:"Pipeline"}),s.jsx(tt,{value:"quotes",children:"Quotes"}),s.jsx(tt,{value:"nurturing",children:"Nurturing"}),s.jsx(tt,{value:"forms",children:"Intake Forms"}),s.jsx(tt,{value:"sources",children:"Sources"})]}),s.jsxs(rt,{value:"leads",className:"space-y-6",children:[s.jsxs("div",{className:"flex gap-4",children:[s.jsxs("div",{className:"ri-search-bar",children:[s.jsx(Rr,{className:"ri-search-icon"}),s.jsx(Ae,{placeholder:"Search leads...",value:d,onChange:k=>u(k.target.value),className:"ri-search-input shadow-sm"})]}),s.jsxs(Ke,{value:h,onValueChange:f,children:[s.jsx(He,{className:"w-40",children:s.jsx(Ye,{placeholder:"Status"})}),s.jsxs(We,{children:[s.jsx(le,{value:"all",children:"All Status"}),s.jsx(le,{value:gi.NEW,children:"New"}),s.jsx(le,{value:gi.CONTACTED,children:"Contacted"}),s.jsx(le,{value:gi.QUALIFIED,children:"Qualified"}),s.jsx(le,{value:gi.PROPOSAL,children:"Proposal"}),s.jsx(le,{value:gi.NEGOTIATION,children:"Negotiation"}),s.jsx(le,{value:gi.CLOSED_WON,children:"Closed Won"}),s.jsx(le,{value:gi.CLOSED_LOST,children:"Closed Lost"})]})]}),s.jsxs(Ke,{value:m,onValueChange:v,children:[s.jsx(He,{className:"w-40",children:s.jsx(Ye,{placeholder:"Source"})}),s.jsxs(We,{children:[s.jsx(le,{value:"all",children:"All Sources"}),e.map(k=>s.jsx(le,{value:k.id,children:k.name},k.id))]})]}),s.jsxs(Ke,{value:p,onValueChange:g,children:[s.jsx(He,{className:"w-40",children:s.jsx(Ye,{placeholder:"Assignee"})}),s.jsxs(We,{children:[s.jsx(le,{value:"all",children:"All Reps"}),r.map(k=>s.jsx(le,{value:k.id,children:k.name},k.id))]})]}),s.jsxs(Q,{onClick:()=>w(!0),className:"shadow-sm",children:[s.jsx(yt,{className:"h-4 w-4 mr-2"}),"Add Lead"]})]}),s.jsxs(he,{className:"shadow-sm",children:[s.jsx(ye,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsxs(be,{className:"text-xl",children:["Leads (",C.length,")"]}),s.jsx(Be,{children:"Manage your sales prospects with AI-powered insights and automated nurturing"})]}),s.jsxs(Q,{onClick:()=>w(!0),variant:"outline",className:"shadow-sm",children:[s.jsx(yt,{className:"h-4 w-4 mr-2"}),"Add Lead"]})]})}),s.jsx(fe,{children:s.jsx("div",{className:"space-y-4",children:C.map(k=>{var D;return s.jsxs("div",{className:"ri-table-row cursor-pointer",onClick:()=>y(k),children:[s.jsx("div",{className:"flex items-center space-x-4 flex-1",children:s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[s.jsxs("h3",{className:"font-semibold text-foreground",children:[k.firstName," ",k.lastName]}),s.jsx(Re,{className:st("ri-badge-status",N(k.status)),children:k.status.replace("_"," ").toUpperCase()}),k.score&&s.jsx(Re,{className:st("ri-badge-status",E(k.score)),children:k.score}),s.jsxs(Re,{variant:"outline",className:"text-xs",children:[s.jsx(od,{className:"h-3 w-3 mr-1"}),"AI Ready"]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-2 text-sm text-muted-foreground",children:[s.jsxs("span",{className:"flex items-center",children:[s.jsx(Ti,{className:"h-3 w-3 mr-2 text-blue-500"}),k.email]}),s.jsxs("span",{className:"flex items-center",children:[s.jsx(vA,{className:"h-3 w-3 mr-2 text-green-500"}),k.phone]}),s.jsxs("span",{className:"flex items-center",children:[s.jsx(Lr,{className:"h-3 w-3 mr-2 text-purple-500"}),((D=r.find(P=>P.id===k.assignedTo))==null?void 0:D.name)||"Unassigned"]}),s.jsxs("span",{className:"flex items-center",children:[s.jsx(Sn,{className:"h-3 w-3 mr-2 text-orange-500"}),ht(k.createdAt)]})]}),k.notes&&s.jsx("p",{className:"text-sm text-muted-foreground mt-2 bg-muted/30 p-2 rounded-md",children:k.notes})]})}),s.jsxs("div",{className:"ri-action-buttons",children:[s.jsxs(Q,{variant:"outline",size:"sm",className:"shadow-sm",onClick:P=>{P.stopPropagation()},children:[s.jsx(ss,{className:"h-3 w-3 mr-1"}),"Contact"]}),s.jsxs(Q,{variant:"outline",size:"sm",className:"shadow-sm",onClick:P=>{P.stopPropagation(),y(k)},children:[s.jsx(od,{className:"h-3 w-3 mr-1"}),"AI Insights"]})]})]},k.id)})})})]})]}),s.jsx(rt,{value:"pipeline",children:s.jsx(T1e,{})}),s.jsx(rt,{value:"quotes",children:s.jsx($1e,{})}),s.jsx(rt,{value:"nurturing",children:s.jsx(mU,{})}),s.jsx(rt,{value:"forms",children:s.jsxs(he,{className:"shadow-sm",children:[s.jsxs(ye,{children:[s.jsx(be,{children:"Lead Intake Forms"}),s.jsx(Be,{children:"Create and manage dynamic lead capture forms"})]}),s.jsx(fe,{children:s.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"Form builder coming soon..."})})]})}),s.jsx(rt,{value:"sources",children:s.jsxs(he,{className:"shadow-sm",children:[s.jsxs(ye,{children:[s.jsx(be,{children:"Lead Sources"}),s.jsx(Be,{children:"Manage and track lead source performance"})]}),s.jsx(fe,{children:s.jsx("div",{className:"space-y-4",children:e.map(k=>s.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-accent/50 transition-colors",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold",children:k.name}),s.jsxs("p",{className:"text-sm text-muted-foreground",children:["Type: ",k.type,"  Conversion: ",k.conversionRate,"%",k.trackingCode&&`  Code: ${k.trackingCode}`]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Re,{className:k.isActive?"bg-green-50 text-green-700 border-green-200":"bg-gray-50 text-gray-700 border-gray-200",children:k.isActive?"Active":"Inactive"}),s.jsx(Q,{variant:"outline",size:"sm",children:s.jsx(Wa,{className:"h-3 w-3"})})]})]},k.id))})})]})})]})]})}function B1e(){return s.jsxs(ki,{children:[s.jsx(It,{path:"/",element:s.jsx(pU,{})}),s.jsx(It,{path:"/*",element:s.jsx(pU,{})})]})}const IE={vehicleTypes:["Single Wide","Double Wide","Fifth Wheel","Travel Trailer","Park Model","Motorhome"],conditions:["New","Used","Refurbished"],statuses:["Available","Pending","Sold","On Hold"],locations:["Main Lot","Overflow Lot","Service Bay","Offsite"],features:["AC","Washer/Dryer","Solar Prep","Porch","Skirting","Appliances Included"],csvFields:["stockNumber","vin","year","make","model","type","condition","status","location","price","cost","features"],exampleInventory:[{stockNumber:"RV-001",type:"Fifth Wheel",condition:"Used",status:"Available",location:"Main Lot",year:2022,make:"Forest River",model:"Flagstaff 832IKRL"}]};function z1e({vehicles:t,onEdit:e,onDelete:n,onView:r,onStatusChange:i}){const{toast:a}=Ot(),[o,l]=A.useState(""),[c,d]=A.useState("all"),[u,h]=A.useState("all"),[f,m]=A.useState("all"),[v,p]=A.useState([]),[g,x]=A.useState("updatedAt"),[y,b]=A.useState("desc"),w=Array.from(new Set(t.map(_=>_.location))),N=_=>{switch(_){case En.AVAILABLE:return"bg-green-50 text-green-700 border-green-200";case En.RESERVED:return"bg-yellow-50 text-yellow-700 border-yellow-200";case En.SOLD:return"bg-blue-50 text-blue-700 border-blue-200";case En.SERVICE:return"bg-orange-50 text-orange-700 border-orange-200";case En.DELIVERED:return"bg-purple-50 text-purple-700 border-purple-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},E=_=>_.replace("_"," ").toUpperCase(),j=(t.length>0?t:IE.exampleInventory.map(_=>({id:"1",vin:"MOCK123456789",make:_.make,model:_.model,year:_.year,type:_.type,status:_.status,price:45e3,cost:35e3,location:_.location,features:["AC","Solar Prep"],images:[],customFields:{},createdAt:new Date,updatedAt:new Date}))).filter(_=>{const M=`${_.make} ${_.model}`.toLowerCase().includes(o.toLowerCase())||_.vin.toLowerCase().includes(o.toLowerCase())||_.year.toString().includes(o),U=c==="all"||_.status===c,F=u==="all"||_.type===u,z=f==="all"||_.location===f;return M&&U&&F&&z}).sort((_,M)=>{let U=_[g],F=M[g];return U instanceof Date&&F instanceof Date&&(U=U.getTime(),F=F.getTime()),typeof U=="string"&&typeof F=="string"&&(U=U.toLowerCase(),F=F.toLowerCase()),U<F?y==="asc"?-1:1:U>F?y==="asc"?1:-1:0}),I=_=>{g===_?b(y==="asc"?"desc":"asc"):(x(_),b("asc"))},k=_=>{p(_?j.map(M=>M.id):[])},D=_=>{v.includes(_)?p(v.filter(M=>M!==_)):p([...v,_])},P=()=>{const M=(v.length>0?t.filter(W=>v.includes(W.id)):j).map(W=>({id:W.id,vin:W.vin,make:W.make,model:W.model,year:W.year,type:W.type,status:W.status,price:W.price,cost:W.cost,location:W.location,features:W.features.join(", "),createdAt:W.createdAt.toISOString(),updatedAt:W.updatedAt.toISOString()})),U=ob.unparse(M),F=new Blob([U],{type:"text/csv;charset=utf-8;"}),z=URL.createObjectURL(F),H=document.createElement("a");H.href=z,H.setAttribute("download",`inventory_export_${new Date().toISOString().split("T")[0]}.csv`),document.body.appendChild(H),H.click(),document.body.removeChild(H),a({title:"Export Successful",description:`Exported ${M.length} vehicles to CSV`})},R=_=>{if(v.length===0){a({title:"No Vehicles Selected",description:"Please select vehicles to update",variant:"destructive"});return}v.forEach(M=>{i(M,_)}),a({title:"Status Updated",description:`Updated ${v.length} vehicles to ${_}`})};return s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[s.jsxs("div",{className:"ri-search-bar flex-1",children:[s.jsx(Rr,{className:"ri-search-icon"}),s.jsx(Ae,{placeholder:"Search by make, model, VIN...",value:o,onChange:_=>l(_.target.value),className:"ri-search-input shadow-sm"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(Ke,{value:c,onValueChange:d,children:[s.jsx(He,{className:"w-[130px]",children:s.jsx(Ye,{placeholder:"Status"})}),s.jsxs(We,{children:[s.jsx(le,{value:"all",children:"All Status"}),s.jsx(le,{value:En.AVAILABLE,children:"Available"}),s.jsx(le,{value:En.RESERVED,children:"Reserved"}),s.jsx(le,{value:En.SOLD,children:"Sold"}),s.jsx(le,{value:En.SERVICE,children:"Service"}),s.jsx(le,{value:En.DELIVERED,children:"Delivered"})]})]}),s.jsxs(Ke,{value:u,onValueChange:h,children:[s.jsx(He,{className:"w-[130px]",children:s.jsx(Ye,{placeholder:"Type"})}),s.jsxs(We,{children:[s.jsx(le,{value:"all",children:"All Types"}),s.jsx(le,{value:pn.RV,children:"RV"}),s.jsx(le,{value:pn.MOTORHOME,children:"Motorhome"}),s.jsx(le,{value:pn.TRAVEL_TRAILER,children:"Travel Trailer"}),s.jsx(le,{value:pn.FIFTH_WHEEL,children:"Fifth Wheel"}),s.jsx(le,{value:pn.TOY_HAULER,children:"Toy Hauler"})]})]}),s.jsxs(Ke,{value:f,onValueChange:m,children:[s.jsx(He,{className:"w-[130px]",children:s.jsx(Ye,{placeholder:"Location"})}),s.jsxs(We,{children:[s.jsx(le,{value:"all",children:"All Locations"}),w.map(_=>s.jsx(le,{value:_,children:_},_))]})]})]})]}),v.length>0&&s.jsxs("div",{className:"flex items-center justify-between bg-muted/30 p-2 rounded-lg",children:[s.jsxs("div",{className:"text-sm font-medium",children:[v.length," vehicles selected"]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(Ke,{onValueChange:_=>R(_),children:[s.jsx(He,{className:"w-[150px]",children:s.jsx(Ye,{placeholder:"Change Status"})}),s.jsxs(We,{children:[s.jsx(le,{value:En.AVAILABLE,children:"Available"}),s.jsx(le,{value:En.RESERVED,children:"Reserved"}),s.jsx(le,{value:En.SOLD,children:"Sold"}),s.jsx(le,{value:En.SERVICE,children:"Service"}),s.jsx(le,{value:En.DELIVERED,children:"Delivered"}),s.jsx(le,{value:pn.SINGLE_WIDE,children:"Single Wide MH"}),s.jsx(le,{value:pn.DOUBLE_WIDE,children:"Double Wide MH"}),s.jsx(le,{value:pn.TRIPLE_WIDE,children:"Triple Wide MH"}),s.jsx(le,{value:pn.PARK_MODEL,children:"Park Model"}),s.jsx(le,{value:pn.MODULAR_HOME,children:"Modular Home"})]})]}),s.jsxs(Q,{variant:"outline",size:"sm",onClick:P,children:[s.jsx(Ha,{className:"h-4 w-4 mr-2"}),"Export Selected"]}),s.jsxs(Q,{variant:"outline",size:"sm",onClick:()=>p([]),children:[s.jsx(on,{className:"h-4 w-4 mr-2"}),"Clear Selection"]})]})]}),s.jsxs(he,{className:"shadow-sm",children:[s.jsx(ye,{className:"pb-3",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsxs(be,{className:"text-xl",children:["Inventory (",j.length,")"]}),s.jsx(Be,{children:"Manage your RV and motorhome inventory"})]}),s.jsx("div",{className:"flex gap-2",children:s.jsxs(Q,{variant:"outline",size:"sm",onClick:P,children:[s.jsx(Ha,{className:"h-4 w-4 mr-2"}),"Export CSV"]})})]})}),s.jsx(fe,{children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full border-collapse",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"border-b",children:[s.jsx("th",{className:"p-2 text-left",children:s.jsx($t,{checked:v.length===j.length&&j.length>0,onCheckedChange:k})}),s.jsx("th",{className:"p-2 text-left cursor-pointer hover:bg-muted/30",onClick:()=>I("make"),children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("span",{children:"Make/Model"}),g==="make"&&s.jsx("span",{className:"ml-1",children:y==="asc"?"":""})]})}),s.jsx("th",{className:"p-2 text-left cursor-pointer hover:bg-muted/30",onClick:()=>I("year"),children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("span",{children:"Year"}),g==="year"&&s.jsx("span",{className:"ml-1",children:y==="asc"?"":""})]})}),s.jsx("th",{className:"p-2 text-left cursor-pointer hover:bg-muted/30",onClick:()=>I("vin"),children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("span",{children:"VIN"}),g==="vin"&&s.jsx("span",{className:"ml-1",children:y==="asc"?"":""})]})}),s.jsx("th",{className:"p-2 text-left cursor-pointer hover:bg-muted/30",onClick:()=>I("type"),children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("span",{children:"Type"}),g==="type"&&s.jsx("span",{className:"ml-1",children:y==="asc"?"":""})]})}),s.jsx("th",{className:"p-2 text-left cursor-pointer hover:bg-muted/30",onClick:()=>I("status"),children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("span",{children:"Status"}),g==="status"&&s.jsx("span",{className:"ml-1",children:y==="asc"?"":""})]})}),s.jsx("th",{className:"p-2 text-left cursor-pointer hover:bg-muted/30",onClick:()=>I("location"),children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("span",{children:"Location"}),g==="location"&&s.jsx("span",{className:"ml-1",children:y==="asc"?"":""})]})}),s.jsx("th",{className:"p-2 text-left cursor-pointer hover:bg-muted/30",onClick:()=>I("price"),children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("span",{children:"Price"}),g==="price"&&s.jsx("span",{className:"ml-1",children:y==="asc"?"":""})]})}),s.jsx("th",{className:"p-2 text-left",children:"Media"}),s.jsx("th",{className:"p-2 text-left",children:"Actions"})]})}),s.jsxs("tbody",{children:[j.map(_=>s.jsxs("tr",{className:"border-b hover:bg-muted/10",children:[s.jsx("td",{className:"p-2",children:s.jsx($t,{checked:v.includes(_.id),onCheckedChange:()=>D(_.id)})}),s.jsx("td",{className:"p-2",children:s.jsxs("div",{className:"font-medium",children:[_.make," ",_.model]})}),s.jsx("td",{className:"p-2",children:_.year}),s.jsx("td",{className:"p-2",children:s.jsx("span",{className:"font-mono text-xs",children:_.vin})}),s.jsx("td",{className:"p-2",children:s.jsx("span",{className:"text-sm",children:E(_.type)})}),s.jsx("td",{className:"p-2",children:s.jsx(Re,{className:st("ri-badge-status",N(_.status)),children:_.status.toUpperCase()})}),s.jsx("td",{className:"p-2",children:_.location}),s.jsx("td",{className:"p-2 font-medium text-primary",children:Le(_.price)}),s.jsx("td",{className:"p-2",children:s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsxs(Re,{variant:"outline",className:"text-xs",children:[s.jsx(Hj,{className:"h-3 w-3 mr-1"}),_.images.length]}),_.customFields.videos&&s.jsxs(Re,{variant:"outline",className:"text-xs",children:[s.jsx(mpe,{className:"h-3 w-3 mr-1"}),_.customFields.videos.length||0]})]})}),s.jsx("td",{className:"p-2",children:s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx(Q,{variant:"ghost",size:"sm",onClick:()=>r(_),children:s.jsx(Wr,{className:"h-4 w-4"})}),s.jsx(Q,{variant:"ghost",size:"sm",onClick:()=>e(_),children:s.jsx(ar,{className:"h-4 w-4"})}),s.jsx(Q,{variant:"ghost",size:"sm",onClick:()=>n(_.id),children:s.jsx(Tr,{className:"h-4 w-4"})})]})})]},_.id)),j.length===0&&s.jsx("tr",{children:s.jsxs("td",{colSpan:10,className:"p-8 text-center text-muted-foreground",children:[s.jsx(Ii,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),s.jsx("p",{children:"No vehicles found"}),s.jsx("p",{className:"text-sm",children:"Try adjusting your search or filters"})]})})]})]})})})]})]})}function U1e({vehicle:t,onSave:e,onCancel:n}){const{toast:r}=Ot(),[i,a]=A.useState(!1),[o,l]=A.useState({vin:(t==null?void 0:t.vin)||"",make:(t==null?void 0:t.make)||"",model:(t==null?void 0:t.model)||"",year:(t==null?void 0:t.year)||new Date().getFullYear(),type:(t==null?void 0:t.type)||pn.RV,status:(t==null?void 0:t.status)||En.AVAILABLE,price:(t==null?void 0:t.price)||0,cost:(t==null?void 0:t.cost)||0,location:(t==null?void 0:t.location)||IE.locations[0],features:(t==null?void 0:t.features)||[],images:(t==null?void 0:t.images)||[],customFields:(t==null?void 0:t.customFields)||{}}),c=async u=>{if(u.preventDefault(),!o.vin||!o.make||!o.model){r({title:"Validation Error",description:"Please fill in all required fields",variant:"destructive"});return}a(!0);try{await e(o),r({title:"Success",description:`Vehicle ${t?"updated":"created"} successfully`})}catch{r({title:"Error",description:`Failed to ${t?"update":"create"} vehicle`,variant:"destructive"})}finally{a(!1)}},d=u=>{const h=o.features||[],f=h.includes(u)?h.filter(m=>m!==u):[...h,u];l({...o,features:f})};return s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:s.jsxs(he,{className:"w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[s.jsx(ye,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx(be,{children:t?"Edit Vehicle":"Add New Vehicle"}),s.jsx(Be,{children:t?"Update vehicle information":"Enter vehicle details"})]}),s.jsx(Q,{variant:"ghost",size:"sm",onClick:n,children:s.jsx(on,{className:"h-4 w-4"})})]})}),s.jsx(fe,{children:s.jsxs("form",{onSubmit:c,className:"space-y-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-semibold",children:"Basic Information"}),s.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"vin",children:"VIN *"}),s.jsx(Ae,{id:"vin",value:o.vin,onChange:u=>l({...o,vin:u.target.value}),placeholder:"Enter VIN number",required:!0})]}),s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"year",children:"Year *"}),s.jsx(Ae,{id:"year",type:"number",value:o.year,onChange:u=>l({...o,year:parseInt(u.target.value)}),min:"1900",max:new Date().getFullYear()+1,required:!0})]})]}),s.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"make",children:"Make *"}),s.jsx(Ae,{id:"make",value:o.make,onChange:u=>l({...o,make:u.target.value}),placeholder:"Enter make",required:!0})]}),s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"model",children:"Model *"}),s.jsx(Ae,{id:"model",value:o.model,onChange:u=>l({...o,model:u.target.value}),placeholder:"Enter model",required:!0})]})]}),s.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"type",children:"Type"}),s.jsxs(Ke,{value:o.type,onValueChange:u=>l({...o,type:u}),children:[s.jsx(He,{children:s.jsx(Ye,{placeholder:"Select type"})}),s.jsx(We,{children:Object.values(pn).map(u=>s.jsx(le,{value:u,children:u.replace("_"," ").replace(/\b\w/g,h=>h.toUpperCase())},u))})]})]}),s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"status",children:"Status"}),s.jsxs(Ke,{value:o.status,onValueChange:u=>l({...o,status:u}),children:[s.jsx(He,{children:s.jsx(Ye,{placeholder:"Select status"})}),s.jsx(We,{children:Object.values(En).map(u=>s.jsx(le,{value:u,children:u.replace("_"," ").replace(/\b\w/g,h=>h.toUpperCase())},u))})]})]})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-semibold",children:"Pricing"}),s.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"price",children:"Sale Price"}),s.jsx(Ae,{id:"price",type:"number",value:o.price,onChange:u=>l({...o,price:parseFloat(u.target.value)||0}),placeholder:"0.00",step:"0.01",min:"0"})]}),s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"cost",children:"Cost"}),s.jsx(Ae,{id:"cost",type:"number",value:o.cost,onChange:u=>l({...o,cost:parseFloat(u.target.value)||0}),placeholder:"0.00",step:"0.01",min:"0"})]})]})]}),s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"location",children:"Location"}),s.jsxs(Ke,{value:o.location,onValueChange:u=>l({...o,location:u}),children:[s.jsx(He,{children:s.jsx(Ye,{placeholder:"Select location"})}),s.jsx(We,{children:IE.locations.map(u=>s.jsx(le,{value:u,children:u},u))})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-semibold",children:"Features"}),s.jsx("div",{className:"grid gap-3 md:grid-cols-2",children:IE.features.map(u=>{var h;return s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx($t,{id:u,checked:((h=o.features)==null?void 0:h.includes(u))||!1,onCheckedChange:()=>d(u)}),s.jsx(ae,{htmlFor:u,className:"font-normal",children:u})]},u)})})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-semibold",children:"Images"}),s.jsx("div",{className:"border-2 border-dashed border-muted-foreground/25 rounded-lg p-6",children:s.jsxs("div",{className:"text-center",children:[s.jsx(Cd,{className:"h-8 w-8 mx-auto mb-4 text-muted-foreground"}),s.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Drop images here or click to browse"}),s.jsxs(Q,{type:"button",variant:"outline",children:[s.jsx(Cd,{className:"h-4 w-4 mr-2"}),"Choose Images"]})]})})]}),s.jsxs("div",{className:"flex justify-end space-x-3 pt-6",children:[s.jsx(Q,{type:"button",variant:"outline",onClick:n,children:"Cancel"}),s.jsx(Q,{type:"submit",disabled:i,children:i?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),t?"Updating...":"Creating..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Wn,{className:"h-4 w-4 mr-2"}),t?"Update":"Create"," Vehicle"]})})]})]})})]})})}const hne="renter-insight-land-assets";function gU(t){try{localStorage.setItem(hne,JSON.stringify(t))}catch(e){console.error("Failed to save land assets to localStorage:",e)}}function V1e(){try{const t=localStorage.getItem(hne);return t?JSON.parse(t):[]}catch(t){return console.error("Failed to load land assets from localStorage:",t),[]}}function q1e(){return`land-${Date.now()}-${Math.random().toString(36).substr(2,9)}`}const E_={sampleLandAssets:[{id:"land-001",label:"Sunset Ridge Lot 15",parcelNumber:"SR-015-2024",address:"1500 Sunset Ridge Drive, Lot 15, Clearwater, FL 33755",lotSizeSqFt:8500,zoningType:"Residential Mobile Home",utilityStatus:"Full Hookups Available",ownershipStatus:"Dealer-Owned",linkedInventoryId:null,pricing:{salePrice:45e3,leaseRate:850,rentToOwn:!0},status:"Available",createdAt:"2024-01-10T09:30:00Z",updatedAt:"2024-01-15T14:22:00Z"},{id:"land-002",label:"Pine Valley Community Lot 8",parcelNumber:"PV-008-2024",address:"2200 Pine Valley Road, Lot 8, Lakeland, FL 33801",lotSizeSqFt:12e3,zoningType:"Manufactured Housing",utilityStatus:"Electric & Water Ready",ownershipStatus:"Third-Party",linkedInventoryId:"vh-002",pricing:{salePrice:62e3,leaseRate:1200,rentToOwn:!1},status:"Bundled",createdAt:"2024-01-05T11:15:00Z",updatedAt:"2024-01-18T16:45:00Z"},{id:"land-003",label:"Oak Grove Estate Lot 22",parcelNumber:"OG-022-2024",address:"3300 Oak Grove Boulevard, Lot 22, Tampa, FL 33612",lotSizeSqFt:10500,zoningType:"Single Family Residential",utilityStatus:"Full Utilities Connected",ownershipStatus:"Dealer-Owned",linkedInventoryId:null,pricing:{salePrice:78e3,leaseRate:1450,rentToOwn:!0},status:"Available",createdAt:"2024-01-08T13:20:00Z",updatedAt:"2024-01-22T10:30:00Z"},{id:"land-004",label:"Meadowbrook Park Lot 5",parcelNumber:"MB-005-2024",address:"4400 Meadowbrook Parkway, Lot 5, Orlando, FL 32801",lotSizeSqFt:7200,zoningType:"Mobile Home Park",utilityStatus:"Sewer Connection Pending",ownershipStatus:"Leased",linkedInventoryId:null,pricing:{salePrice:null,leaseRate:750,rentToOwn:!1},status:"Available",createdAt:"2024-01-12T08:45:00Z",updatedAt:"2024-01-20T15:30:00Z"},{id:"land-005",label:"Heritage Hills Lot 31",parcelNumber:"HH-031-2024",address:"5500 Heritage Hills Circle, Lot 31, St. Petersburg, FL 33710",lotSizeSqFt:9800,zoningType:"Planned Unit Development",utilityStatus:"All Utilities Active",ownershipStatus:"Dealer-Owned",linkedInventoryId:"vh-001",pricing:{salePrice:55e3,leaseRate:1050,rentToOwn:!0},status:"Bundled",createdAt:"2024-01-03T16:00:00Z",updatedAt:"2024-01-25T12:15:00Z"},{id:"land-006",label:"Riverside Commons Lot 12",parcelNumber:"RC-012-2024",address:"6600 Riverside Drive, Lot 12, Jacksonville, FL 32207",lotSizeSqFt:11200,zoningType:"Residential",utilityStatus:"Gas Line Installation Required",ownershipStatus:"Third-Party",linkedInventoryId:null,pricing:{salePrice:68e3,leaseRate:1300,rentToOwn:!1},status:"Available",createdAt:"2024-01-15T10:20:00Z",updatedAt:"2024-01-23T09:45:00Z"}],zoningTypes:["Residential Mobile Home","Manufactured Housing","Single Family Residential","Mobile Home Park","Planned Unit Development","Residential","Mixed Use","Commercial"],utilityStatuses:["Full Hookups Available","Electric & Water Ready","Full Utilities Connected","Sewer Connection Pending","All Utilities Active","Gas Line Installation Required","Utilities Not Connected","Partial Utilities Available"],ownershipStatuses:["Dealer-Owned","Third-Party","Leased"],landStatuses:["Available","Bundled","Sold","Archived"],statusColors:{Available:"bg-green-100 text-green-800",Bundled:"bg-blue-100 text-blue-800",Sold:"bg-gray-100 text-gray-800",Archived:"bg-red-100 text-red-800"},ownershipColors:{"Dealer-Owned":"bg-emerald-100 text-emerald-800","Third-Party":"bg-orange-100 text-orange-800",Leased:"bg-purple-100 text-purple-800"},formDefaults:{label:"",parcelNumber:"",address:"",lotSizeSqFt:void 0,zoningType:"Residential Mobile Home",utilityStatus:"Full Hookups Available",ownershipStatus:"Dealer-Owned",pricing:{salePrice:void 0,leaseRate:void 0,rentToOwn:!1},status:"Available"}};function H1e(){const[t,e]=A.useState([]),[n,r]=A.useState(!0);A.useEffect(()=>{(()=>{try{const g=V1e();g.length===0?(e(E_.sampleLandAssets),gU(E_.sampleLandAssets)):e(g)}catch(g){console.error("Failed to load land assets:",g),e(E_.sampleLandAssets)}finally{r(!1)}})()},[]),A.useEffect(()=>{!n&&t.length>0&&gU(t)},[t,n]);const i=()=>t,a=p=>t.find(g=>g.id===p),o=()=>t.filter(p=>p.status==="Available"),l=()=>t.filter(p=>p.status==="Bundled"),c=p=>t.find(g=>g.linkedInventoryId===p),d=(p,g)=>{var y;const x=new Date().toISOString();if(g){const b={...p,id:g,createdAt:((y=t.find(w=>w.id===g))==null?void 0:y.createdAt)||x,updatedAt:x};return e(w=>w.map(N=>N.id===g?b:N)),b}else{const b={...p,id:q1e(),createdAt:x,updatedAt:x};return e(w=>[b,...w]),b}},u=p=>{try{return e(g=>g.filter(x=>x.id!==p)),!0}catch(g){return console.error("Failed to delete land asset:",g),!1}},h=(p,g)=>{try{return e(x=>x.map(y=>y.id===p?{...y,status:g,updatedAt:new Date().toISOString()}:y)),!0}catch(x){return console.error("Failed to update land asset status:",x),!1}},f=p=>{if(!p.trim())return t;const g=p.toLowerCase();return t.filter(x=>{var y,b;return x.label.toLowerCase().includes(g)||x.address.toLowerCase().includes(g)||((y=x.parcelNumber)==null?void 0:y.toLowerCase().includes(g))||((b=x.zoningType)==null?void 0:b.toLowerCase().includes(g))})},m=p=>t.filter(g=>!(p.status&&g.status!==p.status||p.ownershipStatus&&g.ownershipStatus!==p.ownershipStatus||p.zoningType&&g.zoningType!==p.zoningType||p.hasLinkedInventory!==void 0&&!!g.linkedInventoryId!==p.hasLinkedInventory)),v=(p,g)=>(console.log("bundleToInventory will be implemented in Phase 2",{inventoryId:p,landId:g}),!1);return{landAssets:t,loading:n,getLandAssets:i,getLandAssetById:a,getAvailableLandAssets:o,getBundledLandAssets:l,getLandAssetByInventoryId:c,saveLandAsset:d,deleteLandAsset:u,bundleToInventory:v,unbundleLandAsset,getLandAssetByInventoryId:c,getAvailableLandAssets:o,updateLandAssetStatus:h,searchLandAssets:f,filterLandAssets:m,bundleToInventory:v}}function W1e({vehicle:t,onEdit:e,onClose:n}){var y,b,w,N,E,C;const{tenant:r}=ya(),{bundleToInventory:i,unbundleLandAsset:a,getLandAssetByInventoryId:o,getAvailableLandAssets:l}=H1e(),[c,d]=A.useState(""),[u,h]=A.useState(!1);A.useMemo(()=>{var k,D,P;const j=((k=r==null?void 0:r.settings)==null?void 0:k.platformType)||"both",I=((P=(D=r==null?void 0:r.settings)==null?void 0:D.features)==null?void 0:P.landManagement)!==!1;return j==="rv"?I:!0},[(y=r==null?void 0:r.settings)==null?void 0:y.platformType,(w=(b=r==null?void 0:r.settings)==null?void 0:b.features)==null?void 0:w.landManagement]);const f=["Single Wide","Double Wide","Triple Wide","Park Model","Modular Home"].includes(t.type),m=o(t.id),v=l(),p=()=>{c&&t.id&&(i(t.id,c),h(!1),d(""))},g=()=>{m&&window.confirm("Are you sure you want to unlink this land asset?")&&a(m.id)},x=j=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(j);return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsxs("h2",{className:"text-2xl font-bold",children:[t.year," ",t.make," ",t.model]}),s.jsxs("p",{className:"text-muted-foreground",children:["Stock #",t.vin,"  ",t.type]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsxs(Q,{variant:"outline",onClick:e,children:[s.jsx(Wa,{className:"h-4 w-4 mr-2"}),"Edit"]}),s.jsx(Q,{variant:"outline",onClick:n,children:"Close"})]})]}),s.jsxs(he,{children:[s.jsx(ye,{children:s.jsx(be,{children:"Vehicle Information"})}),s.jsxs(fe,{className:"space-y-4",children:[s.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"VIN"}),s.jsx("p",{className:"text-sm",children:t.vin})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Status"}),s.jsx("div",{children:s.jsx(Re,{className:t.status==="Available"?"bg-green-100 text-green-800":t.status==="Reserved"?"bg-yellow-100 text-yellow-800":t.status==="Sold"?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800",children:t.status})})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Price"}),s.jsx("p",{className:"text-sm font-semibold",children:x(t.price)})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Location"}),s.jsx("p",{className:"text-sm",children:t.location})]})]}),t.features&&t.features.length>0&&s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Features"}),s.jsx("div",{className:"flex flex-wrap gap-2 mt-1",children:t.features.map((j,I)=>s.jsx(Re,{variant:"outline",children:j},I))})]})]})]}),f&&s.jsxs(he,{children:[s.jsxs(ye,{children:[s.jsxs(be,{className:"flex items-center",children:[s.jsx(Ad,{className:"h-5 w-5 mr-2"}),"Land Asset Bundling"]}),s.jsxs(Be,{children:["Bundle this ",t.type.toLowerCase()," with a land asset"]})]}),s.jsx(fe,{className:"space-y-4",children:m?s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg bg-green-50",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-full flex items-center justify-center",children:s.jsx(Ii,{className:"h-5 w-5 text-green-600"})}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold text-green-900",children:"Bundled with Land"}),s.jsx("p",{className:"text-sm text-green-700",children:m.label})]})]}),s.jsxs(Re,{className:"bg-green-100 text-green-800",children:[s.jsx(o_,{className:"h-3 w-3 mr-1"}),"Bundled"]})]}),s.jsxs("div",{className:"grid gap-4 md:grid-cols-2 p-4 bg-muted/30 rounded-lg",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Address"}),s.jsx("p",{className:"text-sm",children:m.address})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Lot Size"}),s.jsxs("p",{className:"text-sm",children:[(N=m.lotSizeSqFt)==null?void 0:N.toLocaleString()," sq ft"]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Zoning"}),s.jsx("p",{className:"text-sm",children:m.zoning})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Utilities"}),s.jsx("p",{className:"text-sm",children:m.utilityStatus})]}),((E=m.pricing)==null?void 0:E.salePrice)&&s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Land Price"}),s.jsx("p",{className:"text-sm font-semibold",children:x(m.pricing.salePrice)})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Total Package"}),s.jsx("p",{className:"text-lg font-bold text-primary",children:x(t.price+(((C=m.pricing)==null?void 0:C.salePrice)||0))})]})]}),s.jsxs("div",{className:"flex justify-end space-x-2",children:[s.jsxs(Q,{variant:"outline",size:"sm",children:[s.jsx(Wr,{className:"h-4 w-4 mr-2"}),"View Land Details"]}),s.jsxs(Q,{variant:"outline",size:"sm",onClick:g,children:[s.jsx(fpe,{className:"h-4 w-4 mr-2"}),"Unlink"]})]})]}):s.jsx("div",{className:"space-y-4",children:u?s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium",children:"Select Land Asset"}),s.jsxs(Ke,{value:c,onValueChange:d,children:[s.jsx(He,{children:s.jsx(Ye,{placeholder:"Choose a land asset to bundle"})}),s.jsx(We,{children:v.map(j=>{var I;return s.jsx(le,{value:j.id,children:s.jsxs("div",{className:"flex flex-col",children:[s.jsx("span",{className:"font-medium",children:j.label}),s.jsxs("span",{className:"text-xs text-muted-foreground",children:[j.address,"  ",(I=j.lotSizeSqFt)==null?void 0:I.toLocaleString()," sq ft"]})]})},j.id)})})]})]}),c&&s.jsx("div",{className:"p-4 bg-blue-50 rounded-lg",children:(()=>{var I,k;const j=v.find(D=>D.id===c);return j?s.jsxs("div",{className:"space-y-2",children:[s.jsx("h4",{className:"font-medium text-blue-900",children:"Bundle Preview"}),s.jsxs("div",{className:"grid gap-2 md:grid-cols-2 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-blue-700",children:"Home: "}),t.year," ",t.make," ",t.model]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-blue-700",children:"Land: "}),j.label]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-blue-700",children:"Home Price: "}),x(t.price)]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-blue-700",children:"Land Price: "}),x(((I=j.pricing)==null?void 0:I.salePrice)||0)]})]}),s.jsxs("div",{className:"text-lg font-bold text-blue-900",children:["Total Package: ",x(t.price+(((k=j.pricing)==null?void 0:k.salePrice)||0))]})]}):null})()}),s.jsxs("div",{className:"flex justify-end space-x-2",children:[s.jsx(Q,{variant:"outline",onClick:()=>{h(!1),d("")},children:"Cancel"}),s.jsxs(Q,{onClick:p,disabled:!c,children:[s.jsx(o_,{className:"h-4 w-4 mr-2"}),"Create Bundle"]})]})]}):s.jsxs("div",{className:"text-center py-6 border-2 border-dashed rounded-lg",children:[s.jsx(NJ,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),s.jsx("h4",{className:"font-semibold mb-2",children:"No Land Asset Linked"}),s.jsxs("p",{className:"text-sm text-muted-foreground mb-4",children:["Bundle this ",t.type.toLowerCase()," with a land asset to create a complete package"]}),s.jsxs(Q,{onClick:()=>h(!0),children:[s.jsx(o_,{className:"h-4 w-4 mr-2"}),"Link to Land"]})]})})})]}),s.jsxs(he,{children:[s.jsxs(ye,{children:[s.jsx(be,{children:"Customer & Marketing"}),s.jsx(Be,{children:"Integration points for CRM and marketplace features"})]}),s.jsxs(fe,{children:[s.jsxs("div",{className:"grid gap-3 md:grid-cols-2",children:[s.jsxs(Q,{variant:"outline",disabled:!0,className:"justify-start",children:[s.jsx(Wa,{className:"h-4 w-4 mr-2"}),"Assign Customer (CRM)"]}),s.jsxs(Q,{variant:"outline",disabled:!0,className:"justify-start",children:[s.jsx(Vt,{className:"h-4 w-4 mr-2"}),"Post to Marketplace"]})]}),s.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:"These features will be available in future updates"})]})]})]})}function G1e({onImport:t,onCancel:e}){const{toast:n}=Ot(),[r,i]=A.useState(null),[a,o]=A.useState([]),[l,c]=A.useState({}),[d,u]=A.useState(!1),[h,f]=A.useState("upload"),[m,v]=A.useState([]),p=["vin","make","model","year","price","cost"],g=[{key:"vin",label:"VIN"},{key:"make",label:"Make"},{key:"model",label:"Model"},{key:"year",label:"Year"},{key:"type",label:"Type"},{key:"status",label:"Status"},{key:"price",label:"Price"},{key:"cost",label:"Cost"},{key:"location",label:"Location"},{key:"features",label:"Features"}],x=I=>{var D;const k=(D=I.target.files)==null?void 0:D[0];k&&(i(k),ob.parse(k,{header:!0,skipEmptyLines:!0,complete:P=>{o(P.data),P.meta.fields&&P.meta.fields,f("map")},error:P=>{n({title:"Error Parsing CSV",description:P.message,variant:"destructive"})}}))},y=(I,k)=>{c(D=>({...D,[I]:k}))},b=()=>{if(p.filter(k=>Object.values(l).includes(k)).length<p.length){n({title:"Missing Required Fields",description:`Please map all required fields: ${p.join(", ")}`,variant:"destructive"});return}f("preview"),v(a.map((k,D)=>D))},w=I=>{v(I?a.map((k,D)=>D):[])},N=I=>{m.includes(I)?v(m.filter(k=>k!==I)):v([...m,I])},E=async()=>{if(m.length===0){n({title:"No Rows Selected",description:"Please select at least one row to import",variant:"destructive"});return}u(!0);try{const I=m.map(k=>{const D=a[k],P={images:[],features:[],customFields:{}};return Object.entries(l).forEach(([R,_])=>{const M=D[R];_==="features"?P.features=M?M.split(",").map(U=>U.trim()):[]:_==="year"||_==="price"||_==="cost"?P[_]=parseFloat(M)||0:_==="type"?P.type=C(M):_==="status"?P.status=j(M):["exteriorColor","interiorColor","length","weight","sleeps","slideouts","fuelType","mileage","condition"].includes(_)?P.customFields={...P.customFields,[_]:M}:P[_]=M}),P});await t(I),n({title:"Import Successful",description:`Imported ${I.length} vehicles`})}catch{n({title:"Import Failed",description:"There was an error importing the vehicles",variant:"destructive"})}finally{u(!1)}},C=I=>{const k=I.toLowerCase().replace(/[^a-z0-9]/g,"");return k.includes("motorhome")?pn.MOTORHOME:k.includes("travel")&&k.includes("trailer")?pn.TRAVEL_TRAILER:k.includes("fifth")&&k.includes("wheel")?pn.FIFTH_WHEEL:k.includes("toy")&&k.includes("hauler")?pn.TOY_HAULER:pn.RV},j=I=>{const k=I.toLowerCase().replace(/[^a-z0-9]/g,"");return k.includes("reserved")?En.RESERVED:k.includes("sold")?En.SOLD:k.includes("service")?En.SERVICE:k.includes("delivered")?En.DELIVERED:En.AVAILABLE};return s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:s.jsxs(he,{className:"w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[s.jsx(ye,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx(be,{children:"Import Inventory from CSV"}),s.jsxs(Be,{children:[h==="upload"&&"Upload a CSV file with your inventory data",h==="map"&&"Map CSV columns to vehicle fields",h==="preview"&&"Preview and select vehicles to import"]})]}),s.jsx(Q,{variant:"ghost",size:"sm",onClick:e,children:s.jsx(on,{className:"h-4 w-4"})})]})}),s.jsxs(fe,{children:[h==="upload"&&s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"border-2 border-dashed rounded-lg p-6 text-center",children:[s.jsx(Zt,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),s.jsx("p",{className:"text-muted-foreground mb-4",children:"Upload a CSV file with your inventory data"}),s.jsx(Ae,{type:"file",accept:".csv",onChange:x,className:"max-w-sm mx-auto"})]}),s.jsxs("div",{className:"bg-muted/30 p-4 rounded-lg",children:[s.jsx("h3",{className:"font-medium mb-2",children:"CSV Format Guidelines"}),s.jsxs("ul",{className:"text-sm space-y-1 text-muted-foreground",children:[s.jsx("li",{children:" File should be in CSV format"}),s.jsx("li",{children:" First row should contain column headers"}),s.jsx("li",{children:" Required fields: VIN, Make, Model, Year, Price, Cost"}),s.jsx("li",{children:" Features should be comma-separated within quotes"})]})]}),s.jsx("div",{className:"flex justify-end",children:s.jsx(Q,{variant:"outline",onClick:e,children:"Cancel"})})]}),h==="map"&&s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"bg-muted/30 p-4 rounded-lg",children:[s.jsxs("h3",{className:"font-medium mb-2 flex items-center",children:[s.jsx(Zt,{className:"h-4 w-4 mr-2"}),r==null?void 0:r.name]}),s.jsxs("p",{className:"text-sm text-muted-foreground",children:[a.length," rows found"]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"font-medium",children:"Map CSV Columns to Vehicle Fields"}),s.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Required fields are marked with *"}),s.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto p-2",children:r&&a.length>0&&Object.keys(a[0]).map(I=>s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("div",{className:"w-1/3 font-medium truncate",children:I}),s.jsx("div",{className:"w-2/3",children:s.jsxs("select",{value:l[I]||"",onChange:k=>y(I,k.target.value),className:"w-full p-2 border rounded-md",children:[s.jsx("option",{value:"",children:"-- Skip this field --"}),g.map(k=>s.jsxs("option",{value:k.key,children:[k.label," ",p.includes(k.key)?"*":""]},k.key))]})})]},I))})]}),s.jsxs("div",{className:"flex justify-end space-x-3",children:[s.jsx(Q,{variant:"outline",onClick:e,children:"Cancel"}),s.jsx(Q,{onClick:b,children:"Preview Data"})]})]}),h==="preview"&&s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx($t,{checked:m.length===a.length,onCheckedChange:w}),s.jsxs(ae,{children:["Select All (",a.length," vehicles)"]})]}),s.jsxs(Re,{children:[m.length," selected"]})]}),s.jsx("div",{className:"border rounded-md overflow-hidden",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-muted/50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"p-2 text-left"}),Object.entries(l).filter(([I,k])=>k).map(([I,k])=>s.jsxs("th",{className:"p-2 text-left text-sm",children:[k,p.includes(k)&&s.jsx("span",{className:"text-red-500",children:"*"})]},I))]})}),s.jsx("tbody",{children:a.map((I,k)=>s.jsxs("tr",{className:"border-t hover:bg-muted/10",children:[s.jsx("td",{className:"p-2",children:s.jsx($t,{checked:m.includes(k),onCheckedChange:()=>N(k)})}),Object.entries(l).filter(([D,P])=>P).map(([D,P])=>s.jsx("td",{className:"p-2 text-sm",children:I[D]||s.jsx("span",{className:"text-muted-foreground italic",children:"Empty"})},D))]},k))})]})})}),s.jsxs("div",{className:"flex justify-end space-x-3",children:[s.jsx(Q,{variant:"outline",onClick:()=>f("map"),children:"Back to Mapping"}),s.jsx(Q,{onClick:E,disabled:d,children:d?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Importing..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Cd,{className:"h-4 w-4 mr-2"}),"Import ",m.length," Vehicles"]})})]})]})]})]})})}function K1e({onScan:t,onClose:e}){const{toast:n}=Ot(),[r,i]=A.useState(!1),[a,o]=A.useState(null),l=["MOCK123456789","TEST987654321","DEMO555666777"];A.useEffect(()=>{const h=setTimeout(()=>{i(!0)},1e3);return()=>clearTimeout(h)},[]);const c=()=>{const h="ABCDEFGHJKLMNPRSTUVWXYZ0123456789";let f="";for(let m=0;m<17;m++)f+=h.charAt(Math.floor(Math.random()*h.length));o(f),n({title:"Barcode Scanned",description:`VIN: ${f}`})},d=()=>{a&&t(a)},u=()=>{const h=l[Math.floor(Math.random()*l.length)];t(h),n({title:"Mock Scan Complete",description:`Scanned VIN: ${h}`})};return s.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-[60]",children:s.jsxs(he,{className:"w-full max-w-md",children:[s.jsx(ye,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx(be,{children:"Scan VIN Barcode"}),s.jsx(Be,{children:"Position the barcode in front of your camera"})]}),s.jsx(Q,{variant:"ghost",size:"sm",onClick:e,children:s.jsx(on,{className:"h-4 w-4"})})]})}),s.jsxs(fe,{className:"space-y-4",children:[s.jsx("div",{className:"bg-black h-64 flex items-center justify-center rounded-md relative",children:r?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:s.jsx("div",{className:"w-3/4 h-1 bg-red-500 animate-pulse"})}),s.jsx("div",{className:"text-white text-sm absolute bottom-2 left-2"}),s.jsxs("div",{className:"flex flex-col items-center",children:[s.jsx(Q,{onClick:u,className:"mb-4 bg-white/20 hover:bg-white/30 text-white border-white/30",children:"Simulate Scan"}),s.jsx(ud,{className:"h-12 w-12 text-white/50"})]})]}):s.jsx(s.Fragment,{children:s.jsx(ud,{className:"h-12 w-12 text-white/50"})})}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx(Q,{variant:"outline",onClick:e,children:"Cancel"}),a?s.jsxs(Q,{onClick:d,children:[s.jsx(t3,{className:"h-4 w-4 mr-2"}),"Confirm"]}):s.jsx(Q,{onClick:c,children:"Simulate Scan"})]})]}),s.jsxs("div",{className:"bg-yellow-50 p-3 rounded-lg",children:[s.jsx("h4",{className:"font-medium text-yellow-900 mb-2",children:"Test VINs"}),s.jsx("div",{className:"space-y-1",children:l.map((h,f)=>s.jsx("button",{onClick:()=>{t(h)},className:"block text-sm text-yellow-700 hover:text-yellow-900 font-mono",children:h},f))})]})]})})}function vU(){const{vehicles:t,createVehicle:e,updateVehicleStatus:n,deleteVehicle:r}=Im(),{toast:i}=Ot(),[a,o]=A.useState(!1),[l,c]=A.useState(!1),[d,u]=A.useState(!1),[h,f]=A.useState(!1),[m,v]=A.useState(null),p=()=>{v(null),o(!0)},g=C=>{v(C),o(!0)},x=C=>{v(C),c(!0)},y=async C=>{if(window.confirm("Are you sure you want to delete this vehicle?"))try{await r(C),i({title:"Vehicle Deleted",description:"The vehicle has been removed from inventory"})}catch{i({title:"Error",description:"Failed to delete vehicle",variant:"destructive"})}},b=async(C,j)=>{try{await n(C,j),i({title:"Status Updated",description:`Vehicle status changed to ${j}`})}catch{i({title:"Error",description:"Failed to update vehicle status",variant:"destructive"})}},w=async C=>{try{m?(await n(m.id,C.status||m.status),i({title:"Vehicle Updated",description:"Vehicle information has been updated"})):(await e(C),i({title:"Vehicle Added",description:"New vehicle has been added to inventory"})),o(!1),v(null)}catch{i({title:"Error",description:`Failed to ${m?"update":"create"} vehicle`,variant:"destructive"})}},N=async C=>{try{for(const j of C)await e(j);u(!1),i({title:"Import Successful",description:`Imported ${C.length} vehicles`})}catch{i({title:"Import Failed",description:"There was an error importing the vehicles",variant:"destructive"})}},E=C=>{const j=t.find(I=>I.vin===C);j?(v(j),c(!0),i({title:"Vehicle Found",description:`Found existing vehicle with VIN: ${C}`})):(v(null),o(!0),setTimeout(()=>{const I=document.getElementById("vin");if(I){I.value=C;const k=new Event("input",{bubbles:!0});I.dispatchEvent(k)}},100),i({title:"New VIN Scanned",description:`Creating new vehicle with VIN: ${C}`})),f(!1)};return s.jsxs("div",{className:"space-y-8",children:[a&&s.jsx(U1e,{vehicle:m||void 0,onSave:w,onCancel:()=>{o(!1),v(null)}}),l&&m&&s.jsx(W1e,{vehicle:m,onClose:()=>c(!1),onEdit:g}),d&&s.jsx(G1e,{onImport:N,onCancel:()=>u(!1)}),h&&s.jsx(K1e,{onScan:E,onClose:()=>f(!1)}),s.jsx("div",{className:"ri-page-header",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"ri-page-title",children:"Inventory Management"}),s.jsx("p",{className:"ri-page-description",children:"Manage your RV and motorhome inventory"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(Q,{variant:"outline",onClick:()=>f(!0),children:[s.jsx(cpe,{className:"h-4 w-4 mr-2"}),"Scan Barcode"]}),s.jsxs(Q,{variant:"outline",onClick:()=>u(!0),children:[s.jsx(Cd,{className:"h-4 w-4 mr-2"}),"Import CSV"]}),s.jsxs(Q,{onClick:p,children:[s.jsx(yt,{className:"h-4 w-4 mr-2"}),"Add Home"]})]})]})}),s.jsxs("div",{className:"ri-stats-grid",children:[s.jsxs(he,{className:"shadow-sm border-0 bg-gradient-to-br from-blue-50 to-blue-100/50",children:[s.jsxs(ye,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(be,{className:"text-sm font-medium text-blue-900",children:"Total Units"}),s.jsx(Ii,{className:"h-4 w-4 text-blue-600"})]}),s.jsxs(fe,{children:[s.jsx("div",{className:"text-2xl font-bold text-blue-900",children:t.length}),s.jsxs("p",{className:"text-xs text-blue-600 flex items-center mt-1",children:[s.jsx(tn,{className:"h-3 w-3 mr-1"}),"+5 units this month"]})]})]}),s.jsxs(he,{className:"shadow-sm border-0 bg-gradient-to-br from-green-50 to-green-100/50",children:[s.jsxs(ye,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(be,{className:"text-sm font-medium text-green-900",children:"Available"}),s.jsx(Ii,{className:"h-4 w-4 text-green-600"})]}),s.jsxs(fe,{children:[s.jsx("div",{className:"text-2xl font-bold text-green-900",children:t.filter(C=>C.status===En.AVAILABLE).length}),s.jsxs("p",{className:"text-xs text-green-600 flex items-center mt-1",children:[s.jsx(tn,{className:"h-3 w-3 mr-1"}),"Ready for sale"]})]})]}),s.jsxs(he,{className:"shadow-sm border-0 bg-gradient-to-br from-yellow-50 to-yellow-100/50",children:[s.jsxs(ye,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(be,{className:"text-sm font-medium text-yellow-900",children:"Reserved"}),s.jsx(Ii,{className:"h-4 w-4 text-yellow-600"})]}),s.jsxs(fe,{children:[s.jsx("div",{className:"text-2xl font-bold text-yellow-900",children:t.filter(C=>C.status===En.RESERVED).length}),s.jsxs("p",{className:"text-xs text-yellow-600 flex items-center mt-1",children:[s.jsx(tn,{className:"h-3 w-3 mr-1"}),"Pending sale"]})]})]}),s.jsxs(he,{className:"shadow-sm border-0 bg-gradient-to-br from-purple-50 to-purple-100/50",children:[s.jsxs(ye,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(be,{className:"text-sm font-medium text-purple-900",children:"Total Value"}),s.jsx(Vt,{className:"h-4 w-4 text-purple-600"})]}),s.jsxs(fe,{children:[s.jsx("div",{className:"text-2xl font-bold text-purple-900",children:Le(t.reduce((C,j)=>C+j.price,0))}),s.jsxs("p",{className:"text-xs text-purple-600 flex items-center mt-1",children:[s.jsx(tn,{className:"h-3 w-3 mr-1"}),"Inventory value"]})]})]})]}),s.jsx(z1e,{vehicles:t,onEdit:g,onDelete:y,onView:x,onStatusChange:b})]})}function Y1e(){return s.jsxs(ki,{children:[s.jsx(It,{path:"/",element:s.jsx(vU,{})}),s.jsx(It,{path:"/*",element:s.jsx(vU,{})})]})}const X1e=[{id:"1",customerId:"cust-1",vehicleId:"veh-1",items:[{id:"1",description:"2024 Forest River Georgetown",quantity:1,unitPrice:125e3,total:125e3},{id:"2",description:"Extended Warranty",quantity:1,unitPrice:2500,total:2500}],subtotal:127500,tax:10200,total:137700,status:nl.SENT,validUntil:new Date("2024-02-15"),notes:"Customer interested in financing options",customFields:{},createdAt:new Date("2024-01-15"),updatedAt:new Date("2024-01-16")},{id:"2",customerId:"cust-2",vehicleId:"veh-2",items:[{id:"3",description:"2023 Winnebago View",quantity:1,unitPrice:89e3,total:89e3}],subtotal:89e3,tax:7120,total:96120,status:nl.ACCEPTED,validUntil:new Date("2024-02-20"),notes:"Ready to proceed with purchase",customFields:{},createdAt:new Date("2024-01-12"),updatedAt:new Date("2024-01-18")}];function Z1e({quote:t,onClose:e,onEdit:n}){const r=i=>{switch(i){case"draft":return"bg-gray-50 text-gray-700 border-gray-200";case"sent":return"bg-blue-50 text-blue-700 border-blue-200";case"viewed":return"bg-yellow-50 text-yellow-700 border-yellow-200";case"accepted":return"bg-green-50 text-green-700 border-green-200";case"rejected":return"bg-red-50 text-red-700 border-red-200";case"expired":return"bg-orange-50 text-orange-700 border-orange-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}};return s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:s.jsxs(he,{className:"w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[s.jsx(ye,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsxs(be,{className:"text-xl",children:["Quote #",t.id]}),s.jsx(Be,{children:"Quote details and line items"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsxs(Q,{onClick:()=>n(t),size:"sm",children:[s.jsx(ar,{className:"h-4 w-4 mr-2"}),"Edit Quote"]}),s.jsx(Q,{variant:"ghost",size:"sm",onClick:e,children:s.jsx(on,{className:"h-4 w-4"})})]})]})}),s.jsxs(fe,{className:"space-y-6",children:[s.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Customer ID"}),s.jsx("p",{className:"font-medium",children:t.customerId})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Status"}),s.jsx("div",{className:"mt-1",children:s.jsx(Re,{className:st("ri-badge-status",r(t.status)),children:t.status.toUpperCase()})})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Created Date"}),s.jsx("p",{className:"font-medium",children:ht(t.createdAt)})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Valid Until"}),s.jsx("p",{className:"font-medium",children:ht(t.validUntil)})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Line Items"}),s.jsx("div",{className:"space-y-3",children:t.items.map((i,a)=>s.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("h4",{className:"font-medium",children:i.description}),s.jsxs("p",{className:"text-sm text-muted-foreground",children:["Quantity: ",i.quantity,"  ",Le(i.unitPrice)]})]}),s.jsx("div",{className:"text-right",children:s.jsx("div",{className:"font-bold text-lg",children:Le(i.total)})})]},i.id))})]}),s.jsx("div",{className:"bg-muted/30 p-4 rounded-lg",children:s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Subtotal:"}),s.jsx("span",{children:Le(t.subtotal)})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Tax:"}),s.jsx("span",{children:Le(t.tax)})]}),s.jsxs("div",{className:"flex justify-between text-lg font-bold border-t pt-2",children:[s.jsx("span",{children:"Total:"}),s.jsx("span",{children:Le(t.total)})]})]})}),t.notes&&s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Notes"}),s.jsx("div",{className:"mt-1 p-3 bg-muted/30 rounded-md",children:s.jsx("p",{className:"text-sm",children:t.notes})})]})]})]})})}function xU(){const{toast:t}=Ot(),[e,n]=A.useState(X1e),[r,i]=A.useState(""),[a,o]=A.useState("all"),[l,c]=A.useState(!1),[d,u]=A.useState(null),[h,f]=A.useState(null),[m,v]=A.useState(""),p=k=>{switch(k){case nl.DRAFT:return"bg-gray-50 text-gray-700 border-gray-200";case nl.SENT:return"bg-blue-50 text-blue-700 border-blue-200";case nl.VIEWED:return"bg-yellow-50 text-yellow-700 border-yellow-200";case nl.ACCEPTED:return"bg-green-50 text-green-700 border-green-200";case nl.REJECTED:return"bg-red-50 text-red-700 border-red-200";case nl.EXPIRED:return"bg-orange-50 text-orange-700 border-orange-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},g=e.filter(k=>{const D=k.id.toLowerCase().includes(r.toLowerCase())||k.customerId.toLowerCase().includes(r.toLowerCase()),P=a==="all"||k.status===a;return D&&P}),x=()=>{u(null),v(""),c(!0)},y=k=>{u(k),v(k.customerId),c(!0)},b=k=>{f(k)},w=()=>f(null),N=async k=>{try{if(d)n(D=>D.map(P=>P.id===d.id?{...P,...k,updatedAt:new Date}:P)),t({title:"Success",description:"Quote updated successfully"});else{const D={id:Math.random().toString(36).substr(2,9),...k,status:nl.DRAFT,createdAt:new Date,updatedAt:new Date};n(P=>[...P,D]),t({title:"Success",description:"Quote created successfully"})}c(!1),u(null)}catch{t({title:"Error",description:"Failed to save quote",variant:"destructive"})}},E=async k=>{try{n(D=>D.map(P=>P.id===k?{...P,status:nl.SENT,updatedAt:new Date}:P)),t({title:"Success",description:"Quote sent to customer"})}catch{t({title:"Error",description:"Failed to send quote",variant:"destructive"})}},C=async k=>{try{const D=e.find(P=>P.id===k);if(D){const P={...D,id:Math.random().toString(36).substr(2,9),status:nl.DRAFT,createdAt:new Date,updatedAt:new Date};n(R=>[...R,P]),t({title:"Success",description:"Quote duplicated successfully"})}}catch{t({title:"Error",description:"Failed to duplicate quote",variant:"destructive"})}},j=async k=>{if(window.confirm("Are you sure you want to delete this quote?"))try{n(D=>D.filter(P=>P.id!==k)),t({title:"Success",description:"Quote deleted successfully"})}catch{t({title:"Error",description:"Failed to delete quote",variant:"destructive"})}},I={total:e.length,draft:e.filter(k=>k.status==="draft").length,sent:e.filter(k=>k.status==="sent").length,accepted:e.filter(k=>k.status==="accepted").length,totalValue:e.reduce((k,D)=>k+D.total,0),acceptedValue:e.filter(k=>k.status==="accepted").reduce((k,D)=>k+D.total,0)};return s.jsxs("div",{className:"space-y-8",children:[l&&s.jsx(une,{quote:d,customerId:m,onSave:N,onCancel:()=>{c(!1),u(null)}}),h&&s.jsx(Z1e,{quote:h,onClose:w,onEdit:y}),s.jsx("div",{className:"ri-page-header",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"ri-page-title",children:"Quote Builder"}),s.jsx("p",{className:"ri-page-description",children:"Create and manage customer quotes with advanced pricing rules"})]}),s.jsxs(Q,{className:"shadow-sm",onClick:x,children:[s.jsx(yt,{className:"h-4 w-4 mr-2"}),"New Quote"]})]})}),s.jsxs("div",{className:"ri-stats-grid",children:[s.jsxs(he,{className:"shadow-sm border-0 bg-gradient-to-br from-blue-50 to-blue-100/50",children:[s.jsxs(ye,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(be,{className:"text-sm font-medium text-blue-900",children:"Total Quotes"}),s.jsx(Zt,{className:"h-4 w-4 text-blue-600"})]}),s.jsxs(fe,{children:[s.jsx("div",{className:"text-2xl font-bold text-blue-900",children:I.total}),s.jsxs("p",{className:"text-xs text-blue-600 flex items-center mt-1",children:[s.jsx(tn,{className:"h-3 w-3 mr-1"}),"All quotes"]})]})]}),s.jsxs(he,{className:"shadow-sm border-0 bg-gradient-to-br from-yellow-50 to-yellow-100/50",children:[s.jsxs(ye,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(be,{className:"text-sm font-medium text-yellow-900",children:"Pending"}),s.jsx(Zt,{className:"h-4 w-4 text-yellow-600"})]}),s.jsxs(fe,{children:[s.jsx("div",{className:"text-2xl font-bold text-yellow-900",children:I.sent}),s.jsxs("p",{className:"text-xs text-yellow-600 flex items-center mt-1",children:[s.jsx(tn,{className:"h-3 w-3 mr-1"}),"Awaiting response"]})]})]}),s.jsxs(he,{className:"shadow-sm border-0 bg-gradient-to-br from-green-50 to-green-100/50",children:[s.jsxs(ye,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(be,{className:"text-sm font-medium text-green-900",children:"Accepted"}),s.jsx(Zt,{className:"h-4 w-4 text-green-600"})]}),s.jsxs(fe,{children:[s.jsx("div",{className:"text-2xl font-bold text-green-900",children:I.accepted}),s.jsxs("p",{className:"text-xs text-green-600 flex items-center mt-1",children:[s.jsx(tn,{className:"h-3 w-3 mr-1"}),I.total>0?Math.round(I.accepted/I.total*100):0,"% acceptance rate"]})]})]}),s.jsxs(he,{className:"shadow-sm border-0 bg-gradient-to-br from-purple-50 to-purple-100/50",children:[s.jsxs(ye,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(be,{className:"text-sm font-medium text-purple-900",children:"Quote Value"}),s.jsx(Vt,{className:"h-4 w-4 text-purple-600"})]}),s.jsxs(fe,{children:[s.jsx("div",{className:"text-2xl font-bold text-purple-900",children:Le(I.totalValue)}),s.jsxs("p",{className:"text-xs text-purple-600 flex items-center mt-1",children:[s.jsx(Vt,{className:"h-3 w-3 mr-1"}),Le(I.acceptedValue)," accepted"]})]})]})]}),s.jsxs("div",{className:"flex gap-4",children:[s.jsxs("div",{className:"ri-search-bar",children:[s.jsx(Rr,{className:"ri-search-icon"}),s.jsx(Ae,{placeholder:"Search quotes...",value:r,onChange:k=>i(k.target.value),className:"ri-search-input shadow-sm"})]}),s.jsxs(Ke,{value:a,onValueChange:o,children:[s.jsx(He,{className:"w-40",children:s.jsx(Ye,{placeholder:"Status"})}),s.jsxs(We,{children:[s.jsx(le,{value:"all",children:"All Status"}),s.jsx(le,{value:"draft",children:"Draft"}),s.jsx(le,{value:"sent",children:"Sent"}),s.jsx(le,{value:"viewed",children:"Viewed"}),s.jsx(le,{value:"accepted",children:"Accepted"}),s.jsx(le,{value:"rejected",children:"Rejected"}),s.jsx(le,{value:"expired",children:"Expired"})]})]}),s.jsxs(Q,{variant:"outline",className:"shadow-sm",children:[s.jsx(bc,{className:"h-4 w-4 mr-2"}),"Filter"]})]}),s.jsxs(he,{className:"shadow-sm",children:[s.jsxs(ye,{children:[s.jsxs(be,{className:"text-xl",children:["Quotes (",g.length,")"]}),s.jsx(Be,{children:"Manage customer quotes with advanced pricing and bundling"})]}),s.jsx(fe,{children:s.jsxs("div",{className:"space-y-4",children:[g.map(k=>s.jsxs("div",{className:"ri-table-row",children:[s.jsx("div",{className:"flex items-center space-x-4 flex-1",children:s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[s.jsxs("h3",{className:"font-semibold text-foreground",children:["Quote #",k.id]}),s.jsx(Re,{className:st("ri-badge-status",p(k.status)),children:k.status.toUpperCase()})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm text-muted-foreground",children:[s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Customer:"})," ",k.customerId]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Total:"}),s.jsx("span",{className:"font-bold text-primary ml-1",children:Le(k.total)})]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Created:"})," ",ht(k.createdAt)]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Valid Until:"})," ",ht(k.validUntil)]})]}),s.jsxs("div",{className:"mt-2 bg-muted/30 p-2 rounded-md",children:[s.jsxs("p",{className:"text-sm text-muted-foreground",children:[k.items.length," item(s)"]}),k.notes&&s.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:[s.jsx("span",{className:"font-medium",children:"Notes:"})," ",k.notes]})]})]})}),s.jsxs("div",{className:"ri-action-buttons",children:[s.jsxs(Q,{variant:"outline",size:"sm",className:"shadow-sm",onClick:()=>b(k),children:[s.jsx(Wr,{className:"h-3 w-3 mr-1"}),"View"]}),s.jsxs(Q,{variant:"outline",size:"sm",className:"shadow-sm",onClick:()=>y(k),children:[s.jsx(ar,{className:"h-3 w-3 mr-1"}),"Edit"]}),k.status==="draft"&&s.jsxs(Q,{variant:"outline",size:"sm",className:"shadow-sm",onClick:()=>E(k.id),children:[s.jsx(Do,{className:"h-3 w-3 mr-1"}),"Send"]}),s.jsxs(Q,{variant:"outline",size:"sm",className:"shadow-sm",onClick:()=>C(k.id),children:[s.jsx(n3,{className:"h-3 w-3 mr-1"}),"Copy"]}),s.jsx(Q,{variant:"outline",size:"sm",className:"shadow-sm text-red-600 hover:text-red-700",onClick:()=>j(k.id),children:s.jsx(Tr,{className:"h-3 w-3"})})]})]},k.id)),g.length===0&&s.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[s.jsx(Zt,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),s.jsx("p",{children:"No quotes found"}),s.jsx("p",{className:"text-sm",children:"Create your first quote to get started"})]})]})})]})]})}function Q1e(){return s.jsxs(ki,{children:[s.jsx(It,{path:"/",element:s.jsx(xU,{})}),s.jsx(It,{path:"/*",element:s.jsx(xU,{})})]})}const J1e=[{id:"loan-001",customerId:"portal-customer-001",customerName:"John Smith",customerEmail:"john.smith@email.com",customerPhone:"(555) 123-4567",vehicleId:"vh-001",vehicleInfo:"2020 Forest River Cherokee 274RK",loanAmount:45e3,downPayment:5e3,interestRate:7.25,termMonths:60,monthlyPayment:895.5,startDate:"2023-06-15T00:00:00Z",status:No.CURRENT,remainingBalance:38750,nextPaymentDate:"2024-02-15T00:00:00Z",totalPaid:11250,paymentsRemaining:43,history:[{id:"hist-001",timestamp:"2024-01-15T08:30:00Z",type:su.PAYMENT,amount:895.5,principalAmount:645.3,interestAmount:250.2,description:"Monthly payment processed",paymentMethod:"ACH",transactionId:"TXN-20240115-001",status:"completed"},{id:"hist-002",timestamp:"2023-12-15T08:30:00Z",type:su.PAYMENT,amount:895.5,principalAmount:641.85,interestAmount:253.65,description:"Monthly payment processed",paymentMethod:"ACH",transactionId:"TXN-20231215-001",status:"completed"},{id:"hist-003",timestamp:"2023-06-15T10:00:00Z",type:su.STATUS_CHANGE,description:"Loan originated and activated",status:"active"}],isPortalVisible:!0,portalNotes:"Your RV loan is current and in good standing. Automatic payments are set up for the 15th of each month.",createdAt:"2023-06-10T14:30:00Z",updatedAt:"2024-01-15T09:20:00Z"},{id:"loan-002",customerId:"portal-customer-001",customerName:"John Smith",customerEmail:"john.smith@email.com",customerPhone:"(555) 123-4567",vehicleId:"vh-002",vehicleInfo:"2019 Keystone Montana 3761FL",loanAmount:62e3,downPayment:8e3,interestRate:6.5,termMonths:72,monthlyPayment:1025.75,startDate:"2023-03-01T00:00:00Z",status:No.CURRENT,remainingBalance:51200,nextPaymentDate:"2024-02-01T00:00:00Z",totalPaid:18900,paymentsRemaining:61,history:[{id:"hist-004",timestamp:"2024-01-01T08:30:00Z",type:su.PAYMENT,amount:1025.75,principalAmount:692.4,interestAmount:333.35,description:"Monthly payment processed",paymentMethod:"Check",transactionId:"CHK-20240101-002",status:"completed"},{id:"hist-005",timestamp:"2023-03-01T10:00:00Z",type:su.STATUS_CHANGE,description:"Loan originated and activated",status:"active"}],isPortalVisible:!0,portalNotes:"This is your second RV loan with us. Thank you for your continued business!",createdAt:"2023-02-25T11:15:00Z",updatedAt:"2024-01-01T16:45:00Z"},{id:"loan-003",customerId:"cust-002",customerName:"Maria Rodriguez",customerEmail:"maria.rodriguez@email.com",customerPhone:"(555) 987-6543",vehicleId:"vh-003",vehicleInfo:"2021 Grand Design Solitude 310GK",loanAmount:55e3,downPayment:7e3,interestRate:7,termMonths:60,monthlyPayment:1089.25,startDate:"2023-08-01T00:00:00Z",status:No.CURRENT,remainingBalance:47500,nextPaymentDate:"2024-02-01T00:00:00Z",totalPaid:6535.5,paymentsRemaining:54,history:[{id:"hist-006",timestamp:"2024-01-01T08:30:00Z",type:su.PAYMENT,amount:1089.25,principalAmount:767.5,interestAmount:321.75,description:"Monthly payment processed",paymentMethod:"ACH",transactionId:"TXN-20240101-003",status:"completed"}],isPortalVisible:!1,createdAt:"2023-07-25T09:00:00Z",updatedAt:"2024-01-01T08:30:00Z"}];function fne(){const[t,e]=A.useState([]);A.useEffect(()=>{const u=yr("loans",J1e);e(u)},[]),A.useEffect(()=>{Dn("loans",t)},[t]);const n=u=>{const h={id:`loan-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,customerId:u.customerId||"",customerName:u.customerName||"",customerEmail:u.customerEmail||"",customerPhone:u.customerPhone||"",vehicleId:u.vehicleId||"",vehicleInfo:u.vehicleInfo||"",loanAmount:u.loanAmount||0,downPayment:u.downPayment||0,interestRate:u.interestRate||0,termMonths:u.termMonths||60,monthlyPayment:u.monthlyPayment||0,startDate:u.startDate||new Date().toISOString(),status:u.status||No.ACTIVE,remainingBalance:u.remainingBalance||u.loanAmount||0,nextPaymentDate:u.nextPaymentDate||new Date().toISOString(),totalPaid:u.totalPaid||0,paymentsRemaining:u.paymentsRemaining||u.termMonths||60,history:u.history||[],isPortalVisible:u.isPortalVisible||!1,portalNotes:u.portalNotes||"",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};return e(f=>[h,...f]),h},r=(u,h)=>{e(f=>f.map(m=>m.id===u?{...m,...h,updatedAt:new Date().toISOString()}:m))},i=u=>{e(h=>h.filter(f=>f.id!==u))},a=u=>t.find(h=>h.id===u),o=u=>t.filter(h=>h.customerId===u),l=u=>t.filter(h=>h.customerId===u&&h.isPortalVisible),c=(u,h)=>{const f=a(u);if(!f)return;const m={id:`hist-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,timestamp:new Date().toISOString(),...h};r(u,{history:[m,...f.history]})};return{loans:t,createLoan:n,updateLoan:r,deleteLoan:i,getLoanById:a,getLoansByCustomer:o,getPortalLoansByCustomer:l,addLoanHistoryEntry:c,makePayment:(u,h,f="Online")=>{const m=a(u);if(!m)return;const v=m.remainingBalance*(m.interestRate/100)/12,p=Math.max(0,h-v),g=Math.min(h,v),x=Math.max(0,m.remainingBalance-p),y=m.totalPaid+h,b=Math.max(0,m.paymentsRemaining-1);c(u,{type:su.PAYMENT,amount:h,principalAmount:p,interestAmount:g,description:`Payment processed via ${f}`,paymentMethod:f,transactionId:`TXN-${Date.now()}`,status:"completed"}),r(u,{remainingBalance:x,totalPaid:y,paymentsRemaining:b,status:x===0?No.PAID_OFF:m.status,nextPaymentDate:x>0?new Date(Date.now()+30*24*60*60*1e3).toISOString():m.nextPaymentDate}),x===0&&c(u,{type:su.PAYOFF,description:"Loan paid in full",status:"paid_off"})}}}function ewe({loan:t,onClose:e,onSuccess:n}){const{createLoan:r,updateLoan:i}=fne(),{toast:a}=Ot(),[o,l]=A.useState(!1),[c,d]=A.useState({customerId:(t==null?void 0:t.customerId)||"",customerName:(t==null?void 0:t.customerName)||"",customerEmail:(t==null?void 0:t.customerEmail)||"",customerPhone:(t==null?void 0:t.customerPhone)||"",vehicleId:(t==null?void 0:t.vehicleId)||"",vehicleInfo:(t==null?void 0:t.vehicleInfo)||"",loanAmount:(t==null?void 0:t.loanAmount)||0,downPayment:(t==null?void 0:t.downPayment)||0,interestRate:(t==null?void 0:t.interestRate)||7.25,termMonths:(t==null?void 0:t.termMonths)||60,startDate:t!=null&&t.startDate?t.startDate.split("T")[0]:new Date().toISOString().split("T")[0],status:(t==null?void 0:t.status)||No.ACTIVE,isPortalVisible:(t==null?void 0:t.isPortalVisible)||!1,portalNotes:(t==null?void 0:t.portalNotes)||""}),h=(()=>{const m=c.loanAmount-c.downPayment,v=c.interestRate/100/12,p=c.termMonths;return v===0?m/p:m*(v*Math.pow(1+v,p))/(Math.pow(1+v,p)-1)})(),f=async m=>{m.preventDefault(),l(!0);try{const v={...c,monthlyPayment:h,remainingBalance:c.loanAmount-c.downPayment,nextPaymentDate:new Date(Date.now()+2592e6).toISOString(),totalPaid:0,paymentsRemaining:c.termMonths,history:[]};let p;t?(i(t.id,v),p={...t,...v}):p=r(v),a({title:t?"Loan Updated":"Loan Created",description:`Loan has been ${t?"updated":"created"} successfully.`}),n==null||n(p),e()}catch{a({title:"Error",description:`Failed to ${t?"update":"create"} loan.`,variant:"destructive"})}finally{l(!1)}};return s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:s.jsxs(he,{className:"w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[s.jsx(ye,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsxs(be,{className:"flex items-center",children:[s.jsx(Vt,{className:"h-5 w-5 mr-2"}),t?"Edit Loan":"Create New Loan"]}),s.jsx(Be,{children:t?"Update loan details and settings":"Enter loan information and configure portal visibility"})]}),s.jsx(Q,{variant:"ghost",size:"sm",onClick:e,children:s.jsx(on,{className:"h-4 w-4"})})]})}),s.jsx(fe,{children:s.jsxs("form",{onSubmit:f,className:"space-y-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-semibold",children:"Customer Information"}),s.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"customerId",children:"Customer ID"}),s.jsx(Ae,{id:"customerId",value:c.customerId,onChange:m=>d({...c,customerId:m.target.value}),placeholder:"Enter customer ID",required:!0})]}),s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"customerName",children:"Customer Name"}),s.jsx(Ae,{id:"customerName",value:c.customerName,onChange:m=>d({...c,customerName:m.target.value}),placeholder:"Enter customer name",required:!0})]}),s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"customerEmail",children:"Email"}),s.jsx(Ae,{id:"customerEmail",type:"email",value:c.customerEmail,onChange:m=>d({...c,customerEmail:m.target.value}),placeholder:"Enter email address"})]}),s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"customerPhone",children:"Phone"}),s.jsx(Ae,{id:"customerPhone",type:"tel",value:c.customerPhone,onChange:m=>d({...c,customerPhone:m.target.value}),placeholder:"Enter phone number"})]})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-semibold",children:"Vehicle Information"}),s.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"vehicleId",children:"Vehicle ID"}),s.jsx(Ae,{id:"vehicleId",value:c.vehicleId,onChange:m=>d({...c,vehicleId:m.target.value}),placeholder:"Enter vehicle ID"})]}),s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"vehicleInfo",children:"Vehicle Description"}),s.jsx(Ae,{id:"vehicleInfo",value:c.vehicleInfo,onChange:m=>d({...c,vehicleInfo:m.target.value}),placeholder:"e.g., 2023 Forest River Cherokee 274RK"})]})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-semibold",children:"Loan Details"}),s.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"loanAmount",children:"Loan Amount"}),s.jsx(Ae,{id:"loanAmount",type:"number",step:"0.01",value:c.loanAmount,onChange:m=>d({...c,loanAmount:parseFloat(m.target.value)||0}),placeholder:"0.00",required:!0})]}),s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"downPayment",children:"Down Payment"}),s.jsx(Ae,{id:"downPayment",type:"number",step:"0.01",value:c.downPayment,onChange:m=>d({...c,downPayment:parseFloat(m.target.value)||0}),placeholder:"0.00"})]}),s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"interestRate",children:"Interest Rate (%)"}),s.jsx(Ae,{id:"interestRate",type:"number",step:"0.01",value:c.interestRate,onChange:m=>d({...c,interestRate:parseFloat(m.target.value)||0}),placeholder:"7.25",required:!0})]}),s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"termMonths",children:"Term (Months)"}),s.jsxs(Ke,{value:c.termMonths.toString(),onValueChange:m=>d({...c,termMonths:parseInt(m)}),children:[s.jsx(He,{children:s.jsx(Ye,{})}),s.jsxs(We,{children:[s.jsx(le,{value:"12",children:"12 months"}),s.jsx(le,{value:"24",children:"24 months"}),s.jsx(le,{value:"36",children:"36 months"}),s.jsx(le,{value:"48",children:"48 months"}),s.jsx(le,{value:"60",children:"60 months"}),s.jsx(le,{value:"72",children:"72 months"}),s.jsx(le,{value:"84",children:"84 months"})]})]})]}),s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"startDate",children:"Start Date"}),s.jsx(Ae,{id:"startDate",type:"date",value:c.startDate,onChange:m=>d({...c,startDate:m.target.value}),required:!0})]}),s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"status",children:"Status"}),s.jsxs(Ke,{value:c.status,onValueChange:m=>d({...c,status:m}),children:[s.jsx(He,{children:s.jsx(Ye,{})}),s.jsxs(We,{children:[s.jsx(le,{value:No.ACTIVE,children:"Active"}),s.jsx(le,{value:No.CURRENT,children:"Current"}),s.jsx(le,{value:No.LATE,children:"Late"}),s.jsx(le,{value:No.DEFAULT,children:"Default"}),s.jsx(le,{value:No.PAID_OFF,children:"Paid Off"}),s.jsx(le,{value:No.CANCELLED,children:"Cancelled"})]})]})]})]}),s.jsx("div",{className:"p-4 bg-muted/50 rounded-lg",children:s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"font-medium",children:"Calculated Monthly Payment:"}),s.jsx("span",{className:"text-lg font-bold text-primary",children:Le(h)})]})})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-semibold",children:"Portal Settings"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx($t,{id:"isPortalVisible",checked:c.isPortalVisible,onCheckedChange:m=>d({...c,isPortalVisible:!!m,portalNotes:m?c.portalNotes:""})}),s.jsx(ae,{htmlFor:"isPortalVisible",className:"font-medium",children:"Make this loan visible in customer portal"})]}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"When enabled, customers can view this loan, payment history, and make payments through the portal."}),c.isPortalVisible&&s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"portalNotes",children:"Portal Notes (Optional)"}),s.jsx(un,{id:"portalNotes",value:c.portalNotes,onChange:m=>d({...c,portalNotes:m.target.value}),placeholder:"Add any notes or messages that will be visible to the customer in the portal...",rows:3}),s.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"These notes will be displayed to the customer when they view this loan in the portal."})]})]})]}),s.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t",children:[s.jsx(Q,{type:"button",variant:"outline",onClick:e,children:"Cancel"}),s.jsx(Q,{type:"submit",disabled:o,children:o?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),t?"Updating...":"Creating..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Wn,{className:"h-4 w-4 mr-2"}),t?"Update Loan":"Create Loan"]})})]})]})})]})})}function twe({schedule:t}){A.useState(Oa.calculatorDefaults.loanAmount),A.useState(Oa.calculatorDefaults.interestRate),A.useState(Oa.calculatorDefaults.termMonths);const[e,n]=A.useState("asc"),[r,i]=A.useState(""),[a,o]=A.useState("month"),[l,c]=A.useState(1),d=12,h=[...t.filter(x=>x.month.toString().includes(r))].sort((x,y)=>{const b=x[a],w=y[a];return e==="asc"?b>w?1:-1:b<w?1:-1}),f=Math.ceil(h.length/d),m=(l-1)*d,v=h.slice(m,m+d),p=x=>{a===x?n(e==="asc"?"desc":"asc"):(o(x),n("asc"))},g=x=>{c(x)};return t.length===0?s.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No amortization schedule available. Please calculate a loan first."}):s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{className:"relative w-64",children:[s.jsx(Rr,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),s.jsx(Ae,{placeholder:"Search by month...",value:r,onChange:x=>{i(x.target.value),c(1)},className:"pl-10"})]}),s.jsxs("div",{className:"text-sm text-muted-foreground",children:["Showing ",m+1,"-",Math.min(m+d,h.length)," of ",h.length," payments"]})]}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full border-collapse",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"bg-muted/50",children:[s.jsx("th",{className:"p-3 text-left font-medium text-muted-foreground cursor-pointer hover:bg-muted/80",onClick:()=>p("month"),children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("span",{children:"Month"}),a==="month"&&(e==="asc"?s.jsx(Uh,{className:"ml-1 h-3 w-3"}):s.jsx(zh,{className:"ml-1 h-3 w-3"}))]})}),s.jsx("th",{className:"p-3 text-left font-medium text-muted-foreground cursor-pointer hover:bg-muted/80",onClick:()=>p("payment"),children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("span",{children:"Payment"}),a==="payment"&&(e==="asc"?s.jsx(Uh,{className:"ml-1 h-3 w-3"}):s.jsx(zh,{className:"ml-1 h-3 w-3"}))]})}),s.jsx("th",{className:"p-3 text-left font-medium text-muted-foreground cursor-pointer hover:bg-muted/80",onClick:()=>p("principal"),children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("span",{children:"Principal"}),a==="principal"&&(e==="asc"?s.jsx(Uh,{className:"ml-1 h-3 w-3"}):s.jsx(zh,{className:"ml-1 h-3 w-3"}))]})}),s.jsx("th",{className:"p-3 text-left font-medium text-muted-foreground cursor-pointer hover:bg-muted/80",onClick:()=>p("interest"),children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("span",{children:"Interest"}),a==="interest"&&(e==="asc"?s.jsx(Uh,{className:"ml-1 h-3 w-3"}):s.jsx(zh,{className:"ml-1 h-3 w-3"}))]})}),s.jsx("th",{className:"p-3 text-left font-medium text-muted-foreground",children:"Additional"}),s.jsx("th",{className:"p-3 text-left font-medium text-muted-foreground cursor-pointer hover:bg-muted/80",onClick:()=>p("balance"),children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("span",{children:"Balance"}),a==="balance"&&(e==="asc"?s.jsx(Uh,{className:"ml-1 h-3 w-3"}):s.jsx(zh,{className:"ml-1 h-3 w-3"}))]})}),s.jsx("th",{className:"p-3 text-left font-medium text-muted-foreground cursor-pointer hover:bg-muted/80",onClick:()=>p("totalInterestPaid"),children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("span",{children:"Total Interest"}),a==="totalInterestPaid"&&(e==="asc"?s.jsx(Uh,{className:"ml-1 h-3 w-3"}):s.jsx(zh,{className:"ml-1 h-3 w-3"}))]})})]})}),s.jsx("tbody",{children:v.map((x,y)=>s.jsxs("tr",{className:y%2===0?"bg-muted/20":"",children:[s.jsx("td",{className:"p-3",children:x.month}),s.jsx("td",{className:"p-3",children:Le(x.payment)}),s.jsx("td",{className:"p-3",children:Le(x.principal)}),s.jsx("td",{className:"p-3",children:Le(x.interest)}),s.jsx("td",{className:"p-3",children:Le(x.additionalCosts)}),s.jsx("td",{className:"p-3",children:Le(x.balance)}),s.jsx("td",{className:"p-3",children:Le(x.totalInterestPaid)})]},x.month))})]})}),f>1&&s.jsxs("div",{className:"flex justify-center space-x-2 mt-4",children:[s.jsx(Q,{variant:"outline",size:"sm",onClick:()=>g(1),disabled:l===1,children:"First"}),s.jsx(Q,{variant:"outline",size:"sm",onClick:()=>g(l-1),disabled:l===1,children:"Previous"}),s.jsx("div",{className:"flex items-center space-x-1",children:Array.from({length:Math.min(5,f)},(x,y)=>{let b;return f<=5||l<=3?b=y+1:l>=f-2?b=f-4+y:b=l-2+y,s.jsx(Q,{variant:l===b?"default":"outline",size:"sm",onClick:()=>g(b),children:b},b)})}),s.jsx(Q,{variant:"outline",size:"sm",onClick:()=>g(l+1),disabled:l===f,children:"Next"}),s.jsx(Q,{variant:"outline",size:"sm",onClick:()=>g(f),disabled:l===f,children:"Last"})]})]})}function nwe({initialValues:t,onSave:e,onClose:n}){const{toast:r}=Ot(),[i,a]=A.useState((t==null?void 0:t.loanAmount)||Oa.defaultLoan.amount),[o,l]=A.useState((t==null?void 0:t.downPayment)||Oa.defaultLoan.downPayment),[c,d]=A.useState((t==null?void 0:t.interestRate)||Oa.defaultLoan.rate),[u,h]=A.useState((t==null?void 0:t.loanTerm)||Oa.defaultLoan.termMonths),[f,m]=A.useState(Oa.paymentFrequencies[0]),[v,p]=A.useState(!1),[g,x]=A.useState(0),[y,b]=A.useState(!1),[w,N]=A.useState(0);A.useState(Oa.calculatorDefaults.termMonths);const[E,C]=A.useState(0),[j,I]=A.useState(0),[k,D]=A.useState(0),[P,R]=A.useState([]),[_,M]=A.useState("calculator");A.useEffect(()=>{U()},[i,o,c,u,f,v,g,y,w]);const U=()=>{const $=i-o;if($<=0){C(0),I(0),D(0),R([]);return}const L=c/100/12,q=$*L/(1-Math.pow(1+L,-u));let Y=0;v&&(Y+=g),y&&(Y+=q*(w/100));let J=1;switch(f){case"biweekly":J=12/26;break;case"weekly":J=12/52;break;default:J=1;break}const ne=q*J+Y*J,re=u,pe=q*re-$,ue=$+pe+Y*re,xe=F($,L,u,q,Y);C(ne),I(pe),D(ue),R(xe)},F=($,L,q,Y,J)=>{let ne=$,re=0;const pe=[];for(let ue=1;ue<=q;ue++){const xe=ne*L;let Ne=Y-xe;if(Ne>ne&&(Ne=ne),ne-=Ne,re+=xe,pe.push({month:ue,payment:Y+J,principal:Ne,interest:xe,additionalCosts:J,balance:ne,totalInterestPaid:re}),ne<=0)break}return pe},z=()=>{e&&e({loanAmount:i,downPayment:o,interestRate:c,loanTerm:u,paymentFrequency:f,includeInsurance:v,insuranceAmount:g,includeTax:y,taxRate:w,monthlyPayment:E,totalInterest:j,totalCost:k,amortizationSchedule:P}),r({title:"Loan Calculation Saved",description:"Your loan calculation has been saved successfully."})},H=()=>{window.print()},W=()=>{const L=[["Month","Payment","Principal","Interest","Additional Costs","Balance","Total Interest Paid"].join(","),...P.map(ne=>[ne.month,ne.payment.toFixed(2),ne.principal.toFixed(2),ne.interest.toFixed(2),ne.additionalCosts.toFixed(2),ne.balance.toFixed(2),ne.totalInterestPaid.toFixed(2)].join(","))].join(`
`),q=new Blob([L],{type:"text/csv;charset=utf-8;"}),Y=URL.createObjectURL(q),J=document.createElement("a");J.href=Y,J.setAttribute("download","amortization_schedule.csv"),document.body.appendChild(J),J.click(),document.body.removeChild(J),r({title:"Export Successful",description:"Amortization schedule exported to CSV."})};return s.jsx("div",{className:"space-y-6",children:s.jsxs(Vn,{value:_,onValueChange:M,className:"space-y-4",children:[s.jsxs(Mn,{className:"grid w-full grid-cols-2",children:[s.jsx(tt,{value:"calculator",children:"Calculator"}),s.jsx(tt,{value:"amortization",children:"Amortization Schedule"})]}),s.jsxs(rt,{value:"calculator",className:"space-y-6",children:[s.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[s.jsxs(he,{className:"shadow-sm",children:[s.jsxs(ye,{children:[s.jsxs(be,{className:"flex items-center",children:[s.jsx(dv,{className:"h-5 w-5 mr-2 text-primary"}),"Loan Details"]}),s.jsx(Be,{children:"Enter the details of your loan"})]}),s.jsxs(fe,{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"loanAmount",children:"Vehicle Price"}),s.jsxs("div",{className:"relative",children:[s.jsx(Vt,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),s.jsx(Ae,{id:"loanAmount",type:"number",value:i,onChange:$=>a(parseFloat($.target.value)||0),className:"pl-10"})]})]}),s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"downPayment",children:"Down Payment"}),s.jsxs("div",{className:"relative",children:[s.jsx(Vt,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),s.jsx(Ae,{id:"downPayment",type:"number",value:o,onChange:$=>l(parseFloat($.target.value)||0),className:"pl-10"})]})]}),s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"interestRate",children:"Interest Rate (%)"}),s.jsxs(Ke,{value:c.toString(),onValueChange:$=>d(parseFloat($)),children:[s.jsx(He,{children:s.jsx(Ye,{})}),s.jsx(We,{children:Oa.interestRates.map($=>s.jsxs(le,{value:$.toString(),children:[$,"%"]},$))})]})]}),s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"loanTerm",children:"Loan Term (months)"}),s.jsxs(Ke,{value:u.toString(),onValueChange:$=>h(parseInt($)),children:[s.jsx(He,{children:s.jsx(Ye,{})}),s.jsx(We,{children:Oa.termOptions.map($=>s.jsxs(le,{value:$.toString(),children:[$," months"]},$))})]})]}),s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"paymentFrequency",children:"Payment Frequency"}),s.jsxs(Ke,{value:f,onValueChange:m,children:[s.jsx(He,{children:s.jsx(Ye,{})}),s.jsx(We,{children:Oa.paymentFrequencies.map($=>s.jsx(le,{value:$,children:$},$))})]})]})]})]}),s.jsxs(he,{className:"shadow-sm",children:[s.jsxs(ye,{children:[s.jsxs(be,{className:"flex items-center",children:[s.jsx(Vt,{className:"h-5 w-5 mr-2 text-primary"}),"Additional Costs"]}),s.jsx(Be,{children:"Include additional costs in your calculation"})]}),s.jsxs(fe,{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx($t,{id:"includeInsurance",checked:v,onCheckedChange:$=>p(!!$)}),s.jsx(ae,{htmlFor:"includeInsurance",children:"Include Insurance"})]}),v&&s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"insuranceAmount",children:"Monthly Insurance Amount"}),s.jsxs("div",{className:"relative",children:[s.jsx(Vt,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),s.jsx(Ae,{id:"insuranceAmount",type:"number",value:g,onChange:$=>x(parseFloat($.target.value)||0),className:"pl-10"})]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx($t,{id:"includeTax",checked:y,onCheckedChange:$=>b(!!$)}),s.jsx(ae,{htmlFor:"includeTax",children:"Include Tax"})]}),y&&s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"taxRate",children:"Tax Rate (%)"}),s.jsx(Ae,{id:"taxRate",type:"number",step:"0.01",value:w,onChange:$=>N(parseFloat($.target.value)||0)})]}),s.jsxs("div",{className:"mt-6 pt-6 border-t",children:[s.jsx("h3",{className:"font-semibold mb-4",children:"Loan Summary"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Principal Amount:"}),s.jsx("span",{className:"font-medium",children:Le(i-o)})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsxs("span",{className:"text-muted-foreground",children:[f==="monthly"?"Monthly":f==="biweekly"?"Bi-weekly":"Weekly"," Payment:"]}),s.jsx("span",{className:"font-bold text-primary",children:Le(E)})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Total Interest:"}),s.jsx("span",{className:"font-medium",children:Le(j)})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Total Cost:"}),s.jsx("span",{className:"font-medium",children:Le(k)})]})]})]})]})]})]}),s.jsxs("div",{className:"flex justify-end space-x-3",children:[n&&s.jsx(Q,{variant:"outline",onClick:n,children:"Close"}),s.jsxs(Q,{variant:"outline",onClick:()=>M("amortization"),children:[s.jsx(Sn,{className:"h-4 w-4 mr-2"}),"View Amortization"]}),e&&s.jsx(Q,{onClick:z,children:"Save Calculation"})]})]}),s.jsxs(rt,{value:"amortization",children:[s.jsxs(he,{className:"shadow-sm",children:[s.jsx(ye,{children:s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsxs(be,{className:"flex items-center",children:[s.jsx(Sn,{className:"h-5 w-5 mr-2 text-primary"}),"Amortization Schedule"]}),s.jsx(Be,{children:"Detailed payment schedule over the life of the loan"})]}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsxs(Q,{variant:"outline",size:"sm",onClick:W,children:[s.jsx(Ha,{className:"h-4 w-4 mr-2"}),"Export CSV"]}),s.jsxs(Q,{variant:"outline",size:"sm",onClick:H,children:[s.jsx(s3,{className:"h-4 w-4 mr-2"}),"Print"]})]})]})}),s.jsx(fe,{children:s.jsx(twe,{schedule:P})})]}),s.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[s.jsxs(Q,{variant:"outline",onClick:()=>M("calculator"),children:[s.jsx(dv,{className:"h-4 w-4 mr-2"}),"Back to Calculator"]}),e&&s.jsx(Q,{onClick:z,children:"Save Calculation"})]})]})]})})}function rwe(){const{toast:t}=Ot(),[e,n]=A.useState("general"),[r,i]=A.useState(6.99),[a,o]=A.useState(84),[l,c]=A.useState(10),[d,u]=A.useState("monthly"),[h,f]=A.useState(!0),[m,v]=A.useState(12.99),[p,g]=A.useState(48),[x,y]=A.useState(20),[b,w]=A.useState(!0),[N,E]=A.useState(!0),[C,j]=A.useState(!0),[I,k]=A.useState(!0),[D,P]=A.useState(!0),[R,_]=A.useState(10),[M,U]=A.useState(25),[F,z]=A.useState("fixed"),[H,W]=A.useState(""),[$,L]=A.useState(!0),[q,Y]=A.useState(!0),[J,ne]=A.useState(!0),[re,pe]=A.useState(5),ue=()=>{t({title:"Settings Saved",description:"Your loan settings have been updated successfully."})};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs(Vn,{value:e,onValueChange:n,className:"space-y-4",children:[s.jsxs(Mn,{className:"grid w-full grid-cols-4",children:[s.jsx(tt,{value:"general",children:"General"}),s.jsx(tt,{value:"bhph",children:"Buy Here Pay Here"}),s.jsx(tt,{value:"payments",children:"Payments"}),s.jsx(tt,{value:"documents",children:"Documents"})]}),s.jsx(rt,{value:"general",className:"space-y-6",children:s.jsxs(he,{className:"shadow-sm",children:[s.jsxs(ye,{children:[s.jsxs(be,{className:"flex items-center",children:[s.jsx(Wa,{className:"h-5 w-5 mr-2 text-primary"}),"General Loan Settings"]}),s.jsx(Be,{children:"Configure default loan parameters and settings"})]}),s.jsx(fe,{className:"space-y-4",children:s.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"defaultInterestRate",children:"Default Interest Rate (%)"}),s.jsx(Ae,{id:"defaultInterestRate",type:"number",step:"0.01",value:r,onChange:xe=>i(parseFloat(xe.target.value)||0)}),s.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Standard interest rate for new loans"})]}),s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"maxLoanTerm",children:"Maximum Loan Term (months)"}),s.jsx(Ae,{id:"maxLoanTerm",type:"number",value:a,onChange:xe=>o(parseInt(xe.target.value)||0)}),s.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Longest allowed loan term in months"})]}),s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"minDownPaymentPercent",children:"Minimum Down Payment (%)"}),s.jsx(Ae,{id:"minDownPaymentPercent",type:"number",value:l,onChange:xe=>c(parseFloat(xe.target.value)||0)}),s.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Minimum required down payment as percentage of vehicle price"})]}),s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"defaultPaymentFrequency",children:"Default Payment Frequency"}),s.jsxs(Ke,{value:d,onValueChange:u,children:[s.jsx(He,{children:s.jsx(Ye,{})}),s.jsxs(We,{children:[s.jsx(le,{value:"monthly",children:"Monthly"}),s.jsx(le,{value:"biweekly",children:"Bi-weekly"}),s.jsx(le,{value:"weekly",children:"Weekly"})]})]}),s.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Standard payment schedule for new loans"})]})]})})]})}),s.jsx(rt,{value:"bhph",className:"space-y-6",children:s.jsxs(he,{className:"shadow-sm",children:[s.jsxs(ye,{children:[s.jsxs(be,{className:"flex items-center",children:[s.jsx(Vt,{className:"h-5 w-5 mr-2 text-primary"}),"Buy Here Pay Here Settings"]}),s.jsx(Be,{children:"Configure in-house financing options"})]}),s.jsxs(fe,{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx($t,{id:"bhphEnabled",checked:h,onCheckedChange:xe=>f(!!xe)}),s.jsx(ae,{htmlFor:"bhphEnabled",children:"Enable Buy Here Pay Here Financing"})]}),h&&s.jsxs("div",{className:"grid gap-4 md:grid-cols-2 mt-4",children:[s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"bhphInterestRate",children:"BHPH Interest Rate (%)"}),s.jsx(Ae,{id:"bhphInterestRate",type:"number",step:"0.01",value:m,onChange:xe=>v(parseFloat(xe.target.value)||0)}),s.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Standard interest rate for in-house loans"})]}),s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"bhphMaxLoanTerm",children:"BHPH Maximum Term (months)"}),s.jsx(Ae,{id:"bhphMaxLoanTerm",type:"number",value:p,onChange:xe=>g(parseInt(xe.target.value)||0)}),s.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Maximum term for in-house financing"})]}),s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"bhphMinDownPaymentPercent",children:"BHPH Minimum Down Payment (%)"}),s.jsx(Ae,{id:"bhphMinDownPaymentPercent",type:"number",value:x,onChange:xe=>y(parseFloat(xe.target.value)||0)}),s.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Minimum down payment for in-house financing"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx($t,{id:"bhphRequireIncome",checked:b,onCheckedChange:xe=>w(!!xe)}),s.jsx(ae,{htmlFor:"bhphRequireIncome",children:"Require Income Verification"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx($t,{id:"bhphRequireReference",checked:N,onCheckedChange:xe=>E(!!xe)}),s.jsx(ae,{htmlFor:"bhphRequireReference",children:"Require References"})]})]})]}),s.jsx("div",{className:"bg-yellow-50 p-4 rounded-md mt-4",children:s.jsxs("div",{className:"flex items-start space-x-2",children:[s.jsx(Ba,{className:"h-5 w-5 text-yellow-600 mt-0.5"}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-yellow-800",children:"Important Notice"}),s.jsx("p",{className:"text-sm text-yellow-700 mt-1",children:"Buy Here Pay Here financing is subject to state and federal regulations. Ensure your dealership complies with all applicable laws including Truth in Lending Act (TILA), Fair Credit Reporting Act (FCRA), and state-specific lending requirements."})]})]})})]})]})}),s.jsx(rt,{value:"payments",className:"space-y-6",children:s.jsxs(he,{className:"shadow-sm",children:[s.jsxs(ye,{children:[s.jsxs(be,{className:"flex items-center",children:[s.jsx(ga,{className:"h-5 w-5 mr-2 text-primary"}),"Payment Settings"]}),s.jsx(Be,{children:"Configure payment options and late fee policies"})]}),s.jsx(fe,{className:"space-y-4",children:s.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx($t,{id:"allowAutoPay",checked:C,onCheckedChange:xe=>j(!!xe)}),s.jsx(ae,{htmlFor:"allowAutoPay",children:"Allow Automatic Payments"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx($t,{id:"allowOnlinePayments",checked:I,onCheckedChange:xe=>k(!!xe)}),s.jsx(ae,{htmlFor:"allowOnlinePayments",children:"Allow Online Payments"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx($t,{id:"allowPartialPayments",checked:D,onCheckedChange:xe=>P(!!xe)}),s.jsx(ae,{htmlFor:"allowPartialPayments",children:"Allow Partial Payments"})]})]}),s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"gracePeriodDays",children:"Grace Period (days)"}),s.jsx(Ae,{id:"gracePeriodDays",type:"number",value:R,onChange:xe=>_(parseInt(xe.target.value)||0)}),s.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Days after due date before late fee applies"})]}),s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"lateFeeType",children:"Late Fee Type"}),s.jsxs(Ke,{value:F,onValueChange:z,children:[s.jsx(He,{children:s.jsx(Ye,{})}),s.jsxs(We,{children:[s.jsx(le,{value:"fixed",children:"Fixed Amount"}),s.jsx(le,{value:"percentage",children:"Percentage of Payment"})]})]})]}),s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"lateFeeAmount",children:F==="fixed"?"Late Fee Amount ($)":"Late Fee Percentage (%)"}),s.jsx(Ae,{id:"lateFeeAmount",type:"number",step:F==="percentage"?"0.01":"1",value:M,onChange:xe=>U(parseFloat(xe.target.value)||0)})]})]})})]})}),s.jsx(rt,{value:"documents",className:"space-y-6",children:s.jsxs(he,{className:"shadow-sm",children:[s.jsxs(ye,{children:[s.jsxs(be,{className:"flex items-center",children:[s.jsx(Zt,{className:"h-5 w-5 mr-2 text-primary"}),"Document Settings"]}),s.jsx(Be,{children:"Configure loan documents and notification settings"})]}),s.jsxs(fe,{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"loanAgreementTemplate",children:"Loan Agreement Template"}),s.jsx(un,{id:"loanAgreementTemplate",value:H,onChange:xe=>W(xe.target.value),placeholder:"Enter your loan agreement template text or HTML...",rows:6}),s.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"You can use variables like {{customer_name}}, {{loan_amount}}, {{interest_rate}}, etc."})]}),s.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx($t,{id:"requireSignature",checked:$,onCheckedChange:xe=>L(!!xe)}),s.jsx(ae,{htmlFor:"requireSignature",children:"Require Digital Signature"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx($t,{id:"sendPaymentReceipts",checked:q,onCheckedChange:xe=>Y(!!xe)}),s.jsx(ae,{htmlFor:"sendPaymentReceipts",children:"Send Payment Receipts"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx($t,{id:"sendPaymentReminders",checked:J,onCheckedChange:xe=>ne(!!xe)}),s.jsx(ae,{htmlFor:"sendPaymentReminders",children:"Send Payment Reminders"})]})]}),J&&s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"reminderDaysBefore",children:"Reminder Days Before Due"}),s.jsx(Ae,{id:"reminderDaysBefore",type:"number",value:re,onChange:xe=>pe(parseInt(xe.target.value)||0)}),s.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Number of days before due date to send reminder"})]})]}),s.jsx("div",{className:"bg-blue-50 p-4 rounded-md mt-4",children:s.jsxs("div",{className:"flex items-start space-x-2",children:[s.jsx(O$,{className:"h-5 w-5 text-blue-600 mt-0.5"}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-blue-800",children:"Compliance Notice"}),s.jsx("p",{className:"text-sm text-blue-700 mt-1",children:"Ensure your loan documents comply with all applicable laws and regulations. Consider consulting with legal counsel to review your loan agreement templates."})]})]})})]})]})})]}),s.jsx("div",{className:"flex justify-end",children:s.jsxs(Q,{onClick:ue,children:[s.jsx(Wn,{className:"h-4 w-4 mr-2"}),"Save Settings"]})})]})}const yU=({loanId:t})=>{const[e,n]=A.useState(""),[r,i]=A.useState("all"),[a,o]=A.useState("all");return mockFinance.samplePayments.filter(l=>l.loanId===t),s.jsxs(Card,{children:[s.jsxs(CardHeader,{children:[s.jsx(CardTitle,{children:"Payment History"}),s.jsx(CardDescription,{children:"Track and manage loan payment history"})]}),s.jsxs(CardContent,{children:[s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 mb-6",children:[s.jsxs("div",{className:"relative flex-1",children:[s.jsx(Search,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),s.jsx(Input,{placeholder:"Search payments...",value:e,onChange:l=>n(l.target.value),className:"pl-10"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(Select,{value:r,onValueChange:i,children:[s.jsx(SelectTrigger,{className:"w-[180px]",children:s.jsx(SelectValue,{placeholder:"Filter by status"})}),s.jsxs(SelectContent,{children:[s.jsx(SelectItem,{value:"all",children:"All Statuses"}),mockFinance.statusOptions.map(l=>s.jsx(SelectItem,{value:l.toLowerCase(),children:l},l.toLowerCase()))]})]}),s.jsxs(Select,{value:a,onValueChange:o,children:[s.jsx(SelectTrigger,{className:"w-[180px]",children:s.jsx(SelectValue,{placeholder:"Filter by date"})}),s.jsxs(SelectContent,{children:[s.jsx(SelectItem,{value:"all",children:"All Dates"}),s.jsx(SelectItem,{value:"today",children:"Today"}),s.jsx(SelectItem,{value:"week",children:"This Week"}),s.jsx(SelectItem,{value:"month",children:"This Month"})]})]}),s.jsxs(Button,{variant:"outline",children:[s.jsx(Filter,{className:"h-4 w-4 mr-2"}),"More Filters"]}),s.jsxs(Button,{variant:"outline",children:[s.jsx(Download,{className:"h-4 w-4 mr-2"}),"Export"]})]})]}),s.jsx("div",{className:"rounded-md border",children:s.jsxs(Table,{children:[s.jsx(TableHeader,{children:s.jsxs(TableRow,{children:[s.jsx(TableHead,{children:"Payment ID"}),s.jsx(TableHead,{children:"Customer"}),s.jsx(TableHead,{children:"Amount"}),s.jsx(TableHead,{children:"Due Date"}),s.jsx(TableHead,{children:"Paid Date"}),s.jsx(TableHead,{children:"Status"}),s.jsx(TableHead,{children:"Method"})]})}),s.jsx(TableBody,{children:filteredPayments.map(l=>s.jsxs(TableRow,{children:[s.jsx(TableCell,{className:"font-medium",children:l.id}),s.jsx(TableCell,{children:l.customerName}),s.jsx(TableCell,{children:formatCurrency(l.amount)}),s.jsx(TableCell,{children:formatDate(l.dueDate)}),s.jsx(TableCell,{children:l.paidDate?formatDate(l.paidDate):"-"}),s.jsx(TableCell,{children:getStatusBadge(l.status)}),s.jsx(TableCell,{children:l.method})]},l.id))})]})}),filteredPayments.length===0&&s.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No payments found matching your criteria."})]})]})};function swe(){const{tenant:t}=ya(),{toast:e}=Ot(),{loans:n,getLoansByCustomer:r}=fne();Im();const[i,a]=A.useState("overview"),[o,l]=A.useState(""),[c,d]=A.useState("all"),[u,h]=A.useState(!1),[f,m]=A.useState(!1),[v,p]=A.useState(null);A.useState("all");const g=[{id:"1",customerId:"cust-1",customerName:"John Smith",vehicleId:"veh-1",vehicleInfo:"2020 Honda Civic",amount:25e3,downPayment:5e3,term:60,rate:4.5,paymentAmount:372.86,startDate:new Date,status:"active",remainingBalance:2e4,nextPaymentDate:new Date,createdAt:new Date,payments:[]}];ge.useEffect(()=>{setLoans(g)},[]);const x=n.filter(j=>{var D,P,R,_;const I=((P=(D=j==null?void 0:j.customerName)==null?void 0:D.toLowerCase())==null?void 0:P.includes(o.toLowerCase()))||!1||((_=(R=j==null?void 0:j.vehicleInfo)==null?void 0:R.toLowerCase())==null?void 0:_.includes(o.toLowerCase()))||!1,k=c==="all"||(j==null?void 0:j.status)===c;return I&&k}),y=()=>{switch(t==null?void 0:t.platform){case"rv":return"RV Finance";case"marine":return"Marine Finance";case"manufactured_home":return"MH Finance";default:return"Finance Management"}},b=()=>{p(null),h(!0)},w=j=>{p(j),h(!0)},N=()=>{h(!1),p(null)},E=j=>{e({title:v?"Loan Updated":"Loan Created",description:`Loan has been ${v?"updated":"created"} successfully.`})},C=async j=>{if(!v){e({title:"Error",description:"No loan selected",variant:"destructive"});return}try{const I={id:`payment-${Math.random().toString(36).substring(2,9)}`,invoiceId:v.id,amount:j.amount||0,method:j.method||ld.CASH,status:j.status||Vu.COMPLETED,processedDate:j.processedDate||new Date,notes:j.notes||"",transactionId:j.transactionId||`txn_${Math.random().toString(36).substring(2,9)}`,customFields:{},createdAt:new Date,updatedAt:new Date};setLoans(D=>D.map(P=>P.id===v.id?{...P,payments:[...P.payments,I]}:P));const k=D=>Oa.statusColors[D]||"bg-gray-100 text-gray-800";return e({title:"Payment Recorded",description:`Payment of ${Le(I.amount)} has been recorded.`}),Promise.resolve()}catch(I){return console.error("Error recording payment:",I),e({title:"Error",description:"Failed to record payment",variant:"destructive"}),Promise.reject(I)}};return s.jsxs("div",{className:"space-y-6",children:[u&&s.jsx(ewe,{loan:v||void 0,onClose:N,onSuccess:E}),s.jsx("div",{className:"ri-page-header",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"ri-page-title",children:y()}),s.jsx("p",{className:"ri-page-description",children:"Manage loans, payments, and financial operations"})]}),s.jsx("div",{children:s.jsxs(Q,{onClick:b,children:[s.jsx(yt,{className:"h-4 w-4 mr-2"}),"New Loan"]})})]})}),s.jsxs("div",{className:"ri-stats-grid",children:[s.jsxs(he,{children:[s.jsxs(ye,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(be,{className:"text-sm font-medium",children:"Active Loans"}),s.jsx(Vt,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsxs(fe,{children:[s.jsx("div",{className:"text-2xl font-bold",children:n.length}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"+2 from last month"})]})]}),s.jsxs(he,{children:[s.jsxs(ye,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(be,{className:"text-sm font-medium",children:"Total Portfolio"}),s.jsx(tn,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsxs(fe,{children:[s.jsxs("div",{className:"text-2xl font-bold",children:["$",(n.reduce((j,I)=>j+I.remainingBalance,0)/1e6).toFixed(1),"M"]}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"+12% from last month"})]})]}),s.jsxs(he,{children:[s.jsxs(ye,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(be,{className:"text-sm font-medium",children:"Monthly Collections"}),s.jsx(Lr,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsxs(fe,{children:[s.jsxs("div",{className:"text-2xl font-bold",children:["$",(n.reduce((j,I)=>j+I.monthlyPayment,0)/1e3).toFixed(1),"K"]}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"+8% from last month"})]})]}),s.jsxs(he,{children:[s.jsxs(ye,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(be,{className:"text-sm font-medium",children:"Avg Interest Rate"}),s.jsx(dv,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsxs(fe,{children:[s.jsxs("div",{className:"text-2xl font-bold",children:[n.length>0?(n.reduce((j,I)=>j+I.interestRate,0)/n.length).toFixed(2):"0.00","%"]}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"-0.15% from last month"})]})]})]}),s.jsxs(Vn,{value:i,onValueChange:a,children:[s.jsxs(Mn,{children:[s.jsx(tt,{value:"overview",children:"Overview"}),s.jsx(tt,{value:"loans",children:"Loans"}),s.jsx(tt,{value:"calculator",children:"Calculator"}),s.jsx(tt,{value:"payments",children:"Payments"}),s.jsx(tt,{value:"settings",children:"Settings"})]}),s.jsx(rt,{value:"overview",className:"space-y-4",children:s.jsxs("div",{className:"ri-content-grid",children:[s.jsxs(he,{children:[s.jsxs(ye,{children:[s.jsx(be,{children:"Recent Loans"}),s.jsx(Be,{children:"Latest loan applications and approvals"})]}),s.jsx(fe,{children:n.length>0?s.jsx("div",{className:"space-y-4",children:n.slice(0,5).map(j=>s.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg hover:bg-accent/50 transition-colors cursor-pointer",onClick:()=>w(j),children:[s.jsxs("div",{children:[s.jsxs("h4",{className:"font-semibold",children:[j.customerName," - ",j.vehicleInfo||"Loan"]}),s.jsxs("p",{className:"text-sm text-muted-foreground",children:["$",j.loanAmount.toLocaleString(),"  ",j.interestRate,"%  ",j.termMonths," months"]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Re,{children:j.status.replace("_"," ").toUpperCase()}),j.isPortalVisible&&s.jsx(Re,{variant:"outline",children:"Portal"})]})]},j.id))}):s.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[s.jsx(Vt,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),s.jsx("p",{children:"No loans created yet"}),s.jsx("p",{className:"text-sm",children:"Create your first loan to get started"})]})})]}),s.jsxs(he,{children:[s.jsxs(ye,{children:[s.jsx(be,{children:"Payment Activity"}),s.jsx(Be,{children:"Recent payment transactions"})]}),s.jsx(fe,{children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold",children:"Payment Received"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"John Smith - $372.86"})]}),s.jsx(Re,{variant:"outline",children:"Today"})]}),s.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold",children:"Payment Received"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Maria Rodriguez - $485.20"})]}),s.jsx(Re,{variant:"outline",children:"Yesterday"})]})]})})]})]})}),s.jsx(rt,{value:"loans",className:"space-y-4",children:s.jsxs(he,{children:[s.jsx(ye,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx(be,{children:"All Loans"}),s.jsx(Be,{children:"Manage all loans and their portal visibility"})]}),s.jsxs(Q,{onClick:b,children:[s.jsx(yt,{className:"h-4 w-4 mr-2"}),"New Loan"]})]})}),s.jsx(fe,{children:n.length>0?s.jsx("div",{className:"space-y-4",children:n.map(j=>s.jsx("div",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-accent/50 transition-colors cursor-pointer",onClick:()=>w(j),children:s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("h4",{className:"font-semibold",children:j.customerName}),s.jsx(Re,{children:j.status.replace("_"," ").toUpperCase()}),j.isPortalVisible&&s.jsx(Re,{variant:"outline",children:"Portal Visible"})]}),s.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:j.vehicleInfo||`Loan #${j.id.slice(-6).toUpperCase()}`}),s.jsxs("div",{className:"grid gap-4 md:grid-cols-4 mt-2 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-muted-foreground",children:"Amount: "}),s.jsxs("span",{className:"font-medium",children:["$",j.loanAmount.toLocaleString()]})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-muted-foreground",children:"Balance: "}),s.jsxs("span",{className:"font-medium",children:["$",j.remainingBalance.toLocaleString()]})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-muted-foreground",children:"Rate: "}),s.jsxs("span",{className:"font-medium",children:[j.interestRate,"%"]})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-muted-foreground",children:"Payment: "}),s.jsxs("span",{className:"font-medium",children:["$",j.monthlyPayment.toLocaleString()]})]})]})]})},j.id))}):s.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[s.jsx(Vt,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),s.jsx("p",{children:"No loans created yet"}),s.jsx("p",{className:"text-sm",children:"Create your first loan to get started"})]})})]})}),s.jsx(rt,{value:"calculator",className:"space-y-4",children:s.jsx(nwe,{})}),s.jsx(rt,{value:"payments",children:s.jsx(yU,{loan:Array.isArray(x)&&x.length>0?x[0]:{id:"0",customerId:"",customerName:"",vehicleId:"",vehicleInfo:"",amount:0,downPayment:0,term:0,rate:0,paymentAmount:0,startDate:new Date,status:"",remainingBalance:0,nextPaymentDate:new Date,createdAt:new Date,payments:[]},onClose:()=>m(!1),onRecordPayment:C})}),s.jsx(rt,{value:"settings",children:s.jsx(rwe,{})})]}),f&&v&&s.jsx(yU,{loan:v,onClose:()=>m(!1),onRecordPayment:C})]})}const iwe=swe;var At=(t=>(t.PROSPECTING="prospecting",t.QUALIFICATION="qualification",t.NEEDS_ANALYSIS="needs_analysis",t.PROPOSAL="proposal",t.NEGOTIATION="negotiation",t.CLOSED_WON="closed_won",t.CLOSED_LOST="closed_lost",t))(At||{}),Zn=(t=>(t.ACTIVE="active",t.WON="won",t.LOST="lost",t.ON_HOLD="on_hold",t.CANCELLED="cancelled",t))(Zn||{}),dd=(t=>(t.LOW="low",t.MEDIUM="medium",t.HIGH="high",t.CRITICAL="critical",t))(dd||{}),Mh=(t=>(t.GEOGRAPHIC="geographic",t.INDUSTRY="industry",t.ACCOUNT_SIZE="account_size",t.PRODUCT_LINE="product_line",t))(Mh||{});function awe(){const[t,e]=A.useState([]),[n,r]=A.useState([]),[i,a]=A.useState([]),[o,l]=A.useState([]),[c,d]=A.useState([]),[u,h]=A.useState(!1);A.useEffect(()=>{f()},[]);const f=()=>{const _=yr("renter-insight-deals",[{id:"1",name:"Georgetown Class A Sale - Smith Family",customerId:"cust-001",customerName:"John & Mary Smith",stage:At.PROPOSAL,status:Zn.ACTIVE,priority:"high",value:145e3,probability:75,expectedCloseDate:new Date("2024-02-15"),assignedTo:"rep-001",territoryId:"territory-001",sourceId:"source-001",competitorIds:["comp-001"],products:[{id:"1",productId:"prod-001",productName:"2024 Forest River Georgetown",quantity:1,unitPrice:125e3,discount:5e3,total:12e4},{id:"2",productId:"prod-002",productName:"Extended Warranty Package",quantity:1,unitPrice:3500,discount:0,total:3500}],stageHistory:[],notes:"Customer very interested, financing pre-approved",requiresApproval:!0,approvalStatus:"pending",customFields:{tradeInValue:25e3,financingType:"bank_loan"},createdAt:new Date("2024-01-10"),updatedAt:new Date("2024-01-20")},{id:"2",name:"Travel Trailer - Johnson Family",customerId:"cust-002",customerName:"Sarah Johnson",stage:At.NEGOTIATION,status:Zn.ACTIVE,priority:"medium",value:75e3,probability:85,expectedCloseDate:new Date("2024-02-10"),assignedTo:"rep-002",territoryId:"territory-002",competitorIds:[],products:[{id:"3",productId:"prod-003",productName:"2024 Airstream Flying Cloud",quantity:1,unitPrice:75e3,discount:2e3,total:73e3}],stageHistory:[],notes:"Ready to close, just finalizing delivery details",requiresApproval:!1,customFields:{},createdAt:new Date("2024-01-05"),updatedAt:new Date("2024-01-18")}]),M=yr("renter-insight-territories",[{id:"territory-001",name:"North Region",type:"geographic",description:"Northern states territory",assignedTo:["rep-001","rep-003"],rules:[{id:"1",field:"state",operator:"in_range",value:["IL","WI","MN","IA"],priority:1}],isActive:!0,createdAt:new Date("2024-01-01"),updatedAt:new Date("2024-01-01")},{id:"territory-002",name:"South Region",type:"geographic",description:"Southern states territory",assignedTo:["rep-002"],rules:[{id:"2",field:"state",operator:"in_range",value:["TX","FL","GA","NC"],priority:1}],isActive:!0,createdAt:new Date("2024-01-01"),updatedAt:new Date("2024-01-01")}]),U=yr("renter-insight-stage-history",[{id:"1",dealId:"1",fromStage:At.QUALIFICATION,toStage:At.NEEDS_ANALYSIS,changedBy:"rep-001",changedAt:new Date("2024-01-12"),duration:48,notes:"Customer qualified, moving to needs analysis"},{id:"2",dealId:"1",fromStage:At.NEEDS_ANALYSIS,toStage:At.PROPOSAL,changedBy:"rep-001",changedAt:new Date("2024-01-18"),duration:144,notes:"Proposal prepared and presented"}]);e(_),r(M),d(U)},m=_=>{Dn("renter-insight-deals",_)},v=_=>{Dn("renter-insight-stage-history",_)},p=async _=>{h(!0);try{const M={id:Math.random().toString(36).substr(2,9),name:_.name||"",customerId:_.customerId||"",customerName:_.customerName||"",stage:At.PROSPECTING,status:Zn.ACTIVE,priority:_.priority||"medium",value:_.value||0,probability:10,expectedCloseDate:_.expectedCloseDate||new Date,assignedTo:_.assignedTo||"",territoryId:_.territoryId||"",sourceId:_.sourceId,competitorIds:_.competitorIds||[],products:_.products||[],stageHistory:[],notes:_.notes||"",requiresApproval:(_.value||0)>1e5,customFields:_.customFields||{},createdAt:new Date,updatedAt:new Date},U=[...t,M];return e(U),m(U),await x(M.id,void 0,At.PROSPECTING,"system"),M}finally{h(!1)}},g=async(_,M,U)=>{const F=t.find(q=>q.id===_);if(!F)return;const z=F.stage,H=b(M),W=M===At.CLOSED_WON?Zn.WON:M===At.CLOSED_LOST?Zn.LOST:Zn.ACTIVE,$=M===At.CLOSED_WON||M===At.CLOSED_LOST?new Date:void 0,L=t.map(q=>q.id===_?{...q,stage:M,probability:H,status:W,actualCloseDate:$,updatedAt:new Date}:q);return e(L),m(L),await x(_,z,M,"current-user",U||`Stage changed from ${(z==null?void 0:z.replace("_"," "))||"none"} to ${M.replace("_"," ")}`),L.find(q=>q.id===_)},x=async(_,M,U,F,z)=>{const H=M?y(_,M):void 0,W={id:Math.random().toString(36).substr(2,9),dealId:_,fromStage:M,toStage:U,changedBy:F,changedAt:new Date,duration:H,notes:z},$=[...c,W];d($),v($)},y=(_,M)=>{const F=c.filter(z=>z.dealId===_).find(z=>z.toStage===M);return F?Math.floor((Date.now()-F.changedAt.getTime())/36e5):0},b=_=>{switch(_){case At.PROSPECTING:return 10;case At.QUALIFICATION:return 25;case At.NEEDS_ANALYSIS:return 40;case At.PROPOSAL:return 60;case At.NEGOTIATION:return 80;case At.CLOSED_WON:return 100;case At.CLOSED_LOST:return 0;default:return 10}},w=async(_,M)=>{const U=n.find(F=>F.isActive);if(U){const F=t.map(z=>z.id===_?{...z,territoryId:U.id,updatedAt:new Date}:z);e(F),m(F)}},N=async(_,M)=>{const U={id:Math.random().toString(36).substr(2,9),dealId:_,workflowType:M,currentStep:1,totalSteps:2,steps:[{id:"1",stepNumber:1,approverRole:"sales_manager",approverIds:["manager-001"],requiredApprovals:1,currentApprovals:[],status:"pending"},{id:"2",stepNumber:2,approverRole:"sales_director",approverIds:["director-001"],requiredApprovals:1,currentApprovals:[],status:"pending"}],status:"pending",requestedBy:"current-user",requestedAt:new Date};return a(F=>[...F,U]),U},E=async(_,M,U)=>{const F={id:Math.random().toString(36).substr(2,9),dealId:_,outcome:M,primaryReason:U.primaryReason||"",secondaryReasons:U.secondaryReasons||[],competitorWon:U.competitorWon,feedback:U.feedback||"",lessonsLearned:U.lessonsLearned||[],actionItems:U.actionItems||[],reportedBy:"current-user",reportedAt:new Date};return l(z=>[...z,F]),F},C=()=>{const _=t.length,M=t.reduce((q,Y)=>q+Y.value,0),U=t.filter(q=>q.status===Zn.WON).length,F=t.filter(q=>q.status===Zn.WON).reduce((q,Y)=>q+Y.value,0),z=t.filter(q=>q.status===Zn.LOST).length,H=t.filter(q=>q.status===Zn.LOST).reduce((q,Y)=>q+Y.value,0),W=_>0?U/_*100:0,$=_>0?M/_:0,L=j();return{totalDeals:_,totalValue:M,wonDeals:U,wonValue:F,lostDeals:z,lostValue:H,winRate:W,averageDealSize:$,averageSalesCycle:L,conversionRates:I()}},j=()=>{const _=t.filter(U=>U.actualCloseDate);return _.length===0?0:_.reduce((U,F)=>{const z=new Date(F.actualCloseDate),H=new Date(F.createdAt),W=isNaN(z.getTime())?0:z.getTime(),$=isNaN(H.getTime())?0:H.getTime(),L=W&&$?Math.floor((W-$)/(1e3*60*60*24)):0;return U+L},0)/_.length},I=()=>[{fromStage:At.PROSPECTING,toStage:At.QUALIFICATION,rate:65,averageDuration:72},{fromStage:At.QUALIFICATION,toStage:At.NEEDS_ANALYSIS,rate:75,averageDuration:48},{fromStage:At.NEEDS_ANALYSIS,toStage:At.PROPOSAL,rate:80,averageDuration:96},{fromStage:At.PROPOSAL,toStage:At.NEGOTIATION,rate:70,averageDuration:120},{fromStage:At.NEGOTIATION,toStage:At.CLOSED_WON,rate:85,averageDuration:168}];return{deals:t,territories:n,approvalWorkflows:i,winLossReports:o,stageHistory:c,loading:u,createDeal:p,updateDealStage:g,assignTerritory:w,createApprovalWorkflow:N,createWinLossReport:E,getDealMetrics:C,getDealsByStage:_=>t.filter(M=>M.stage===_),getDealsByTerritory:_=>t.filter(M=>M.territoryId===_),getDealsByRep:_=>t.filter(M=>M.assignedTo===_),getStageHistory:_=>c.filter(M=>M.dealId===_).sort((M,U)=>new Date(M.changedAt).getTime()-new Date(U.changedAt).getTime())}}function pM(t,e){return pM=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},pM(t,e)}function mne(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,pM(t,e)}function Ln(t){"@babel/helpers - typeof";return Ln=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ln(t)}function owe(t,e){if(Ln(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Ln(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function lwe(t){var e=owe(t,"string");return Ln(e)=="symbol"?e:e+""}function cwe(t,e,n){return(e=lwe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function bU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function wU(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?bU(Object(n),!0).forEach(function(r){cwe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):bU(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Pa(t){return"Minified Redux error #"+t+"; visit https://redux.js.org/Errors?code="+t+" for the full message or use the non-minified dev environment for full errors. "}var jU=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),P_=function(){return Math.random().toString(36).substring(7).split("").join(".")},NU={INIT:"@@redux/INIT"+P_(),REPLACE:"@@redux/REPLACE"+P_(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+P_()}};function dwe(t){if(typeof t!="object"||t===null)return!1;for(var e=t;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function pne(t,e,n){var r;if(typeof e=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(Pa(0));if(typeof e=="function"&&typeof n>"u"&&(n=e,e=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(Pa(1));return n(pne)(t,e)}if(typeof t!="function")throw new Error(Pa(2));var i=t,a=e,o=[],l=o,c=!1;function d(){l===o&&(l=o.slice())}function u(){if(c)throw new Error(Pa(3));return a}function h(p){if(typeof p!="function")throw new Error(Pa(4));if(c)throw new Error(Pa(5));var g=!0;return d(),l.push(p),function(){if(g){if(c)throw new Error(Pa(6));g=!1,d();var y=l.indexOf(p);l.splice(y,1),o=null}}}function f(p){if(!dwe(p))throw new Error(Pa(7));if(typeof p.type>"u")throw new Error(Pa(8));if(c)throw new Error(Pa(9));try{c=!0,a=i(a,p)}finally{c=!1}for(var g=o=l,x=0;x<g.length;x++){var y=g[x];y()}return p}function m(p){if(typeof p!="function")throw new Error(Pa(10));i=p,f({type:NU.REPLACE})}function v(){var p,g=h;return p={subscribe:function(y){if(typeof y!="object"||y===null)throw new Error(Pa(11));function b(){y.next&&y.next(u())}b();var w=g(b);return{unsubscribe:w}}},p[jU]=function(){return this},p}return f({type:NU.INIT}),r={dispatch:f,subscribe:h,getState:u,replaceReducer:m},r[jU]=v,r}function SU(t,e){return function(){return e(t.apply(this,arguments))}}function AU(t,e){if(typeof t=="function")return SU(t,e);if(typeof t!="object"||t===null)throw new Error(Pa(16));var n={};for(var r in t){var i=t[r];typeof i=="function"&&(n[r]=SU(i,e))}return n}function gne(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.length===0?function(r){return r}:e.length===1?e[0]:e.reduce(function(r,i){return function(){return r(i.apply(void 0,arguments))}})}function uwe(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(r){return function(){var i=r.apply(void 0,arguments),a=function(){throw new Error(Pa(15))},o={getState:i.getState,dispatch:function(){return a.apply(void 0,arguments)}},l=e.map(function(c){return c(o)});return a=gne.apply(void 0,l)(i.dispatch),wU(wU({},i),{},{dispatch:a})}}}var vne={exports:{}},hwe="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",fwe=hwe,mwe=fwe;function xne(){}function yne(){}yne.resetWarningCache=xne;var pwe=function(){function t(r,i,a,o,l,c){if(c!==mwe){var d=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw d.name="Invariant Violation",d}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:yne,resetWarningCache:xne};return n.PropTypes=n,n};vne.exports=pwe();var gwe=vne.exports;const Rt=$n(gwe);var bne=ge.createContext(null);function vwe(t){t()}var wne=vwe,xwe=function(e){return wne=e},ywe=function(){return wne};function bwe(){var t=ywe(),e=null,n=null;return{clear:function(){e=null,n=null},notify:function(){t(function(){for(var i=e;i;)i.callback(),i=i.next})},get:function(){for(var i=[],a=e;a;)i.push(a),a=a.next;return i},subscribe:function(i){var a=!0,o=n={callback:i,next:null,prev:n};return o.prev?o.prev.next=o:e=o,function(){!a||e===null||(a=!1,o.next?o.next.prev=o.prev:n=o.prev,o.prev?o.prev.next=o.next:e=o.next)}}}}var CU={notify:function(){},get:function(){return[]}};function jne(t,e){var n,r=CU;function i(h){return c(),r.subscribe(h)}function a(){r.notify()}function o(){u.onStateChange&&u.onStateChange()}function l(){return!!n}function c(){n||(n=e?e.addNestedSub(o):t.subscribe(o),r=bwe())}function d(){n&&(n(),n=void 0,r.clear(),r=CU)}var u={addNestedSub:i,notifyNestedSubs:a,handleChangeWrapper:o,isSubscribed:l,trySubscribe:c,tryUnsubscribe:d,getListeners:function(){return r}};return u}var Nne=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?A.useLayoutEffect:A.useEffect;function wwe(t){var e=t.store,n=t.context,r=t.children,i=A.useMemo(function(){var l=jne(e);return{store:e,subscription:l}},[e]),a=A.useMemo(function(){return e.getState()},[e]);Nne(function(){var l=i.subscription;return l.onStateChange=l.notifyNestedSubs,l.trySubscribe(),a!==e.getState()&&l.notifyNestedSubs(),function(){l.tryUnsubscribe(),l.onStateChange=null}},[i,a]);var o=n||bne;return ge.createElement(o.Provider,{value:i},r)}function jP(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var Sne={exports:{}},Jn={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var di=typeof Symbol=="function"&&Symbol.for,i8=di?Symbol.for("react.element"):60103,a8=di?Symbol.for("react.portal"):60106,g3=di?Symbol.for("react.fragment"):60107,v3=di?Symbol.for("react.strict_mode"):60108,x3=di?Symbol.for("react.profiler"):60114,y3=di?Symbol.for("react.provider"):60109,b3=di?Symbol.for("react.context"):60110,o8=di?Symbol.for("react.async_mode"):60111,w3=di?Symbol.for("react.concurrent_mode"):60111,j3=di?Symbol.for("react.forward_ref"):60112,N3=di?Symbol.for("react.suspense"):60113,jwe=di?Symbol.for("react.suspense_list"):60120,S3=di?Symbol.for("react.memo"):60115,A3=di?Symbol.for("react.lazy"):60116,Nwe=di?Symbol.for("react.block"):60121,Swe=di?Symbol.for("react.fundamental"):60117,Awe=di?Symbol.for("react.responder"):60118,Cwe=di?Symbol.for("react.scope"):60119;function zo(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case i8:switch(t=t.type,t){case o8:case w3:case g3:case x3:case v3:case N3:return t;default:switch(t=t&&t.$$typeof,t){case b3:case j3:case A3:case S3:case y3:return t;default:return e}}case a8:return e}}}function Ane(t){return zo(t)===w3}Jn.AsyncMode=o8;Jn.ConcurrentMode=w3;Jn.ContextConsumer=b3;Jn.ContextProvider=y3;Jn.Element=i8;Jn.ForwardRef=j3;Jn.Fragment=g3;Jn.Lazy=A3;Jn.Memo=S3;Jn.Portal=a8;Jn.Profiler=x3;Jn.StrictMode=v3;Jn.Suspense=N3;Jn.isAsyncMode=function(t){return Ane(t)||zo(t)===o8};Jn.isConcurrentMode=Ane;Jn.isContextConsumer=function(t){return zo(t)===b3};Jn.isContextProvider=function(t){return zo(t)===y3};Jn.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===i8};Jn.isForwardRef=function(t){return zo(t)===j3};Jn.isFragment=function(t){return zo(t)===g3};Jn.isLazy=function(t){return zo(t)===A3};Jn.isMemo=function(t){return zo(t)===S3};Jn.isPortal=function(t){return zo(t)===a8};Jn.isProfiler=function(t){return zo(t)===x3};Jn.isStrictMode=function(t){return zo(t)===v3};Jn.isSuspense=function(t){return zo(t)===N3};Jn.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===g3||t===w3||t===x3||t===v3||t===N3||t===jwe||typeof t=="object"&&t!==null&&(t.$$typeof===A3||t.$$typeof===S3||t.$$typeof===y3||t.$$typeof===b3||t.$$typeof===j3||t.$$typeof===Swe||t.$$typeof===Awe||t.$$typeof===Cwe||t.$$typeof===Nwe)};Jn.typeOf=zo;Sne.exports=Jn;var Ewe=Sne.exports,l8=Ewe,Pwe={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},Twe={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},Iwe={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},Cne={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},c8={};c8[l8.ForwardRef]=Iwe;c8[l8.Memo]=Cne;function EU(t){return l8.isMemo(t)?Cne:c8[t.$$typeof]||Pwe}var Dwe=Object.defineProperty,kwe=Object.getOwnPropertyNames,PU=Object.getOwnPropertySymbols,_we=Object.getOwnPropertyDescriptor,Owe=Object.getPrototypeOf,TU=Object.prototype;function Ene(t,e,n){if(typeof e!="string"){if(TU){var r=Owe(e);r&&r!==TU&&Ene(t,r,n)}var i=kwe(e);PU&&(i=i.concat(PU(e)));for(var a=EU(t),o=EU(e),l=0;l<i.length;++l){var c=i[l];if(!Twe[c]&&!(n&&n[c])&&!(o&&o[c])&&!(a&&a[c])){var d=_we(e,c);try{Dwe(t,c,d)}catch{}}}}return t}var Lwe=Ene;const IU=$n(Lwe);var Pne={exports:{}},fr={};/** @license React v17.0.2
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var C3=60103,E3=60106,wA=60107,jA=60108,NA=60114,SA=60109,AA=60110,CA=60112,EA=60113,d8=60120,PA=60115,TA=60116,Tne=60121,Ine=60122,Dne=60117,kne=60129,_ne=60131;if(typeof Symbol=="function"&&Symbol.for){var pi=Symbol.for;C3=pi("react.element"),E3=pi("react.portal"),wA=pi("react.fragment"),jA=pi("react.strict_mode"),NA=pi("react.profiler"),SA=pi("react.provider"),AA=pi("react.context"),CA=pi("react.forward_ref"),EA=pi("react.suspense"),d8=pi("react.suspense_list"),PA=pi("react.memo"),TA=pi("react.lazy"),Tne=pi("react.block"),Ine=pi("react.server.block"),Dne=pi("react.fundamental"),kne=pi("react.debug_trace_mode"),_ne=pi("react.legacy_hidden")}function Nc(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case C3:switch(t=t.type,t){case wA:case NA:case jA:case EA:case d8:return t;default:switch(t=t&&t.$$typeof,t){case AA:case CA:case TA:case PA:case SA:return t;default:return e}}case E3:return e}}}var Rwe=SA,Mwe=C3,Fwe=CA,$we=wA,Bwe=TA,zwe=PA,Uwe=E3,Vwe=NA,qwe=jA,Hwe=EA;fr.ContextConsumer=AA;fr.ContextProvider=Rwe;fr.Element=Mwe;fr.ForwardRef=Fwe;fr.Fragment=$we;fr.Lazy=Bwe;fr.Memo=zwe;fr.Portal=Uwe;fr.Profiler=Vwe;fr.StrictMode=qwe;fr.Suspense=Hwe;fr.isAsyncMode=function(){return!1};fr.isConcurrentMode=function(){return!1};fr.isContextConsumer=function(t){return Nc(t)===AA};fr.isContextProvider=function(t){return Nc(t)===SA};fr.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===C3};fr.isForwardRef=function(t){return Nc(t)===CA};fr.isFragment=function(t){return Nc(t)===wA};fr.isLazy=function(t){return Nc(t)===TA};fr.isMemo=function(t){return Nc(t)===PA};fr.isPortal=function(t){return Nc(t)===E3};fr.isProfiler=function(t){return Nc(t)===NA};fr.isStrictMode=function(t){return Nc(t)===jA};fr.isSuspense=function(t){return Nc(t)===EA};fr.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===wA||t===NA||t===kne||t===jA||t===EA||t===d8||t===_ne||typeof t=="object"&&t!==null&&(t.$$typeof===TA||t.$$typeof===PA||t.$$typeof===SA||t.$$typeof===AA||t.$$typeof===CA||t.$$typeof===Dne||t.$$typeof===Tne||t[0]===Ine)};fr.typeOf=Nc;Pne.exports=fr;var Wwe=Pne.exports,Gwe=["getDisplayName","methodName","renderCountProp","shouldHandleStateChanges","storeKey","withRef","forwardRef","context"],Kwe=["reactReduxForwardedRef"],Ywe=[],Xwe=[null,null];function Zwe(t,e){var n=t[1];return[e.payload,n+1]}function DU(t,e,n){Nne(function(){return t.apply(void 0,e)},n)}function Qwe(t,e,n,r,i,a,o){t.current=r,e.current=i,n.current=!1,a.current&&(a.current=null,o())}function Jwe(t,e,n,r,i,a,o,l,c,d){if(t){var u=!1,h=null,f=function(){if(!u){var p=e.getState(),g,x;try{g=r(p,i.current)}catch(y){x=y,h=y}x||(h=null),g===a.current?o.current||c():(a.current=g,l.current=g,o.current=!0,d({type:"STORE_UPDATED",payload:{error:x}}))}};n.onStateChange=f,n.trySubscribe(),f();var m=function(){if(u=!0,n.tryUnsubscribe(),n.onStateChange=null,h)throw h};return m}}var eje=function(){return[null,0]};function tje(t,e){e===void 0&&(e={});var n=e,r=n.getDisplayName,i=r===void 0?function(b){return"ConnectAdvanced("+b+")"}:r,a=n.methodName,o=a===void 0?"connectAdvanced":a,l=n.renderCountProp,c=l===void 0?void 0:l,d=n.shouldHandleStateChanges,u=d===void 0?!0:d,h=n.storeKey,f=h===void 0?"store":h;n.withRef;var m=n.forwardRef,v=m===void 0?!1:m,p=n.context,g=p===void 0?bne:p,x=jP(n,Gwe),y=g;return function(w){var N=w.displayName||w.name||"Component",E=i(N),C=lt({},x,{getDisplayName:i,methodName:o,renderCountProp:c,shouldHandleStateChanges:u,storeKey:f,displayName:E,wrappedComponentName:N,WrappedComponent:w}),j=x.pure;function I(_){return t(_.dispatch,C)}var k=j?A.useMemo:function(_){return _()};function D(_){var M=A.useMemo(function(){var Se=_.reactReduxForwardedRef,Ue=jP(_,Kwe);return[_.context,Se,Ue]},[_]),U=M[0],F=M[1],z=M[2],H=A.useMemo(function(){return U&&U.Consumer&&Wwe.isContextConsumer(ge.createElement(U.Consumer,null))?U:y},[U,y]),W=A.useContext(H),$=!!_.store&&!!_.store.getState&&!!_.store.dispatch;W&&W.store;var L=$?_.store:W.store,q=A.useMemo(function(){return I(L)},[L]),Y=A.useMemo(function(){if(!u)return Xwe;var Se=jne(L,$?null:W.subscription),Ue=Se.notifyNestedSubs.bind(Se);return[Se,Ue]},[L,$,W]),J=Y[0],ne=Y[1],re=A.useMemo(function(){return $?W:lt({},W,{subscription:J})},[$,W,J]),pe=A.useReducer(Zwe,Ywe,eje),ue=pe[0],xe=ue[0],Ne=pe[1];if(xe&&xe.error)throw xe.error;var je=A.useRef(),$e=A.useRef(z),ze=A.useRef(),De=A.useRef(!1),ce=k(function(){return ze.current&&z===$e.current?ze.current:q(L.getState(),z)},[L,xe,z]);DU(Qwe,[$e,je,De,z,ce,ze,ne]),DU(Jwe,[u,L,J,q,$e,je,De,ze,ne,Ne],[L,J,q]);var Te=A.useMemo(function(){return ge.createElement(w,lt({},ce,{ref:F}))},[F,w,ce]),Ce=A.useMemo(function(){return u?ge.createElement(H.Provider,{value:re},Te):Te},[H,Te,re]);return Ce}var P=j?ge.memo(D):D;if(P.WrappedComponent=w,P.displayName=D.displayName=E,v){var R=ge.forwardRef(function(M,U){return ge.createElement(P,lt({},M,{reactReduxForwardedRef:U}))});return R.displayName=E,R.WrappedComponent=w,IU(R,w)}return IU(P,w)}}function kU(t,e){return t===e?t!==0||e!==0||1/t===1/e:t!==t&&e!==e}function T_(t,e){if(kU(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(var i=0;i<n.length;i++)if(!Object.prototype.hasOwnProperty.call(e,n[i])||!kU(t[n[i]],e[n[i]]))return!1;return!0}function nje(t,e){var n={},r=function(o){var l=t[o];typeof l=="function"&&(n[o]=function(){return e(l.apply(void 0,arguments))})};for(var i in t)r(i);return n}function u8(t){return function(n,r){var i=t(n,r);function a(){return i}return a.dependsOnOwnProps=!1,a}}function _U(t){return t.dependsOnOwnProps!==null&&t.dependsOnOwnProps!==void 0?!!t.dependsOnOwnProps:t.length!==1}function One(t,e){return function(r,i){i.displayName;var a=function(l,c){return a.dependsOnOwnProps?a.mapToProps(l,c):a.mapToProps(l)};return a.dependsOnOwnProps=!0,a.mapToProps=function(l,c){a.mapToProps=t,a.dependsOnOwnProps=_U(t);var d=a(l,c);return typeof d=="function"&&(a.mapToProps=d,a.dependsOnOwnProps=_U(d),d=a(l,c)),d},a}}function rje(t){return typeof t=="function"?One(t):void 0}function sje(t){return t?void 0:u8(function(e){return{dispatch:e}})}function ije(t){return t&&typeof t=="object"?u8(function(e){return nje(t,e)}):void 0}const aje=[rje,sje,ije];function oje(t){return typeof t=="function"?One(t):void 0}function lje(t){return t?void 0:u8(function(){return{}})}const cje=[oje,lje];function dje(t,e,n){return lt({},n,t,e)}function uje(t){return function(n,r){r.displayName;var i=r.pure,a=r.areMergedPropsEqual,o=!1,l;return function(d,u,h){var f=t(d,u,h);return o?(!i||!a(f,l))&&(l=f):(o=!0,l=f),l}}}function hje(t){return typeof t=="function"?uje(t):void 0}function fje(t){return t?void 0:function(){return dje}}const mje=[hje,fje];var pje=["initMapStateToProps","initMapDispatchToProps","initMergeProps"];function gje(t,e,n,r){return function(a,o){return n(t(a,o),e(r,o),o)}}function vje(t,e,n,r,i){var a=i.areStatesEqual,o=i.areOwnPropsEqual,l=i.areStatePropsEqual,c=!1,d,u,h,f,m;function v(b,w){return d=b,u=w,h=t(d,u),f=e(r,u),m=n(h,f,u),c=!0,m}function p(){return h=t(d,u),e.dependsOnOwnProps&&(f=e(r,u)),m=n(h,f,u),m}function g(){return t.dependsOnOwnProps&&(h=t(d,u)),e.dependsOnOwnProps&&(f=e(r,u)),m=n(h,f,u),m}function x(){var b=t(d,u),w=!l(b,h);return h=b,w&&(m=n(h,f,u)),m}function y(b,w){var N=!o(w,u),E=!a(b,d,w,u);return d=b,u=w,N&&E?p():N?g():E?x():m}return function(w,N){return c?y(w,N):v(w,N)}}function xje(t,e){var n=e.initMapStateToProps,r=e.initMapDispatchToProps,i=e.initMergeProps,a=jP(e,pje),o=n(t,a),l=r(t,a),c=i(t,a),d=a.pure?vje:gje;return d(o,l,c,t,a)}var yje=["pure","areStatesEqual","areOwnPropsEqual","areStatePropsEqual","areMergedPropsEqual"];function I_(t,e,n){for(var r=e.length-1;r>=0;r--){var i=e[r](t);if(i)return i}return function(a,o){throw new Error("Invalid value of type "+typeof t+" for "+n+" argument when connecting component "+o.wrappedComponentName+".")}}function bje(t,e){return t===e}function wje(t){var e=t===void 0?{}:t,n=e.connectHOC,r=n===void 0?tje:n,i=e.mapStateToPropsFactories,a=i===void 0?cje:i,o=e.mapDispatchToPropsFactories,l=o===void 0?aje:o,c=e.mergePropsFactories,d=c===void 0?mje:c,u=e.selectorFactory,h=u===void 0?xje:u;return function(m,v,p,g){g===void 0&&(g={});var x=g,y=x.pure,b=y===void 0?!0:y,w=x.areStatesEqual,N=w===void 0?bje:w,E=x.areOwnPropsEqual,C=E===void 0?T_:E,j=x.areStatePropsEqual,I=j===void 0?T_:j,k=x.areMergedPropsEqual,D=k===void 0?T_:k,P=jP(x,yje),R=I_(m,a,"mapStateToProps"),_=I_(v,l,"mapDispatchToProps"),M=I_(p,d,"mergeProps");return r(h,lt({methodName:"connect",getDisplayName:function(F){return"Connect("+F+")"},shouldHandleStateChanges:!!m,initMapStateToProps:R,initMapDispatchToProps:_,initMergeProps:M,pure:b,areStatesEqual:N,areOwnPropsEqual:C,areStatePropsEqual:I,areMergedPropsEqual:D},P))}}const Lne=wje();xwe(ch.unstable_batchedUpdates);function jje(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function Rne(t,e){var n=A.useState(function(){return{inputs:e,result:t()}})[0],r=A.useRef(!0),i=A.useRef(n),a=r.current||!!(e&&i.current.inputs&&jje(e,i.current.inputs)),o=a?i.current:{inputs:e,result:t()};return A.useEffect(function(){r.current=!1,i.current=o},[o]),o.result}function Nje(t,e){return Rne(function(){return t},e)}var kn=Rne,Mt=Nje,Sje=!0,D_="Invariant failed";function xm(t,e){if(!t){if(Sje)throw new Error(D_);var n=typeof e=="function"?e():e,r=n?"".concat(D_,": ").concat(n):D_;throw new Error(r)}}var dc=function(e){var n=e.top,r=e.right,i=e.bottom,a=e.left,o=r-a,l=i-n,c={top:n,right:r,bottom:i,left:a,width:o,height:l,x:a,y:n,center:{x:(r+a)/2,y:(i+n)/2}};return c},h8=function(e,n){return{top:e.top-n.top,left:e.left-n.left,bottom:e.bottom+n.bottom,right:e.right+n.right}},OU=function(e,n){return{top:e.top+n.top,left:e.left+n.left,bottom:e.bottom-n.bottom,right:e.right-n.right}},Aje=function(e,n){return{top:e.top+n.y,left:e.left+n.x,bottom:e.bottom+n.y,right:e.right+n.x}},k_={top:0,right:0,bottom:0,left:0},f8=function(e){var n=e.borderBox,r=e.margin,i=r===void 0?k_:r,a=e.border,o=a===void 0?k_:a,l=e.padding,c=l===void 0?k_:l,d=dc(h8(n,i)),u=dc(OU(n,o)),h=dc(OU(u,c));return{marginBox:d,borderBox:dc(n),paddingBox:u,contentBox:h,margin:i,border:o,padding:c}},Zo=function(e){var n=e.slice(0,-2),r=e.slice(-2);if(r!=="px")return 0;var i=Number(n);return isNaN(i)&&xm(!1),i},Cje=function(){return{x:window.pageXOffset,y:window.pageYOffset}},NP=function(e,n){var r=e.borderBox,i=e.border,a=e.margin,o=e.padding,l=Aje(r,n);return f8({borderBox:l,border:i,margin:a,padding:o})},SP=function(e,n){return n===void 0&&(n=Cje()),NP(e,n)},Mne=function(e,n){var r={top:Zo(n.marginTop),right:Zo(n.marginRight),bottom:Zo(n.marginBottom),left:Zo(n.marginLeft)},i={top:Zo(n.paddingTop),right:Zo(n.paddingRight),bottom:Zo(n.paddingBottom),left:Zo(n.paddingLeft)},a={top:Zo(n.borderTopWidth),right:Zo(n.borderRightWidth),bottom:Zo(n.borderBottomWidth),left:Zo(n.borderLeftWidth)};return f8({borderBox:e,margin:r,padding:i,border:a})},Fne=function(e){var n=e.getBoundingClientRect(),r=window.getComputedStyle(e);return Mne(n,r)},LU=Number.isNaN||function(e){return typeof e=="number"&&e!==e};function Eje(t,e){return!!(t===e||LU(t)&&LU(e))}function Pje(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!Eje(t[n],e[n]))return!1;return!0}function oi(t,e){e===void 0&&(e=Pje);var n,r=[],i,a=!1;function o(){for(var l=[],c=0;c<arguments.length;c++)l[c]=arguments[c];return a&&n===this&&e(l,r)||(i=t.apply(this,l),a=!0,n=this,r=l),i}return o}var Tje=function(e){var n=[],r=null,i=function(){for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];n=l,!r&&(r=requestAnimationFrame(function(){r=null,e.apply(void 0,n)}))};return i.cancel=function(){r&&(cancelAnimationFrame(r),r=null)},i};const Xj=Tje;function $ne(t,e){}$ne.bind(null,"warn");$ne.bind(null,"error");function nm(){}function Ije(t,e){return lt({},t,{},e)}function gl(t,e,n){var r=e.map(function(i){var a=Ije(n,i.options);return t.addEventListener(i.eventName,i.fn,a),function(){t.removeEventListener(i.eventName,i.fn,a)}});return function(){r.forEach(function(a){a()})}}var Dje="Invariant failed";function AP(t){this.message=t}AP.prototype.toString=function(){return this.message};function ft(t,e){if(!t)throw new AP(Dje)}var kje=function(t){mne(e,t);function e(){for(var r,i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return r=t.call.apply(t,[this].concat(a))||this,r.callbacks=null,r.unbind=nm,r.onWindowError=function(l){var c=r.getCallbacks();c.isDragging()&&c.tryAbort();var d=l.error;d instanceof AP&&l.preventDefault()},r.getCallbacks=function(){if(!r.callbacks)throw new Error("Unable to find AppCallbacks in <ErrorBoundary/>");return r.callbacks},r.setCallbacks=function(l){r.callbacks=l},r}var n=e.prototype;return n.componentDidMount=function(){this.unbind=gl(window,[{eventName:"error",fn:this.onWindowError}])},n.componentDidCatch=function(i){if(i instanceof AP){this.setState({});return}throw i},n.componentWillUnmount=function(){this.unbind()},n.render=function(){return this.props.children(this.setCallbacks)},e}(ge.Component),_je=`
  Press space bar to start a drag.
  When dragging you can use the arrow keys to move the item around and escape to cancel.
  Some screen readers may require you to be in focus mode or to use your pass through key
`,CP=function(e){return e+1},Oje=function(e){return`
  You have lifted an item in position `+CP(e.source.index)+`
`},Bne=function(e,n){var r=e.droppableId===n.droppableId,i=CP(e.index),a=CP(n.index);return r?`
      You have moved the item from position `+i+`
      to position `+a+`
    `:`
    You have moved the item from position `+i+`
    in list `+e.droppableId+`
    to list `+n.droppableId+`
    in position `+a+`
  `},zne=function(e,n,r){var i=n.droppableId===r.droppableId;return i?`
      The item `+e+`
      has been combined with `+r.draggableId:`
      The item `+e+`
      in list `+n.droppableId+`
      has been combined with `+r.draggableId+`
      in list `+r.droppableId+`
    `},Lje=function(e){var n=e.destination;if(n)return Bne(e.source,n);var r=e.combine;return r?zne(e.draggableId,e.source,r):"You are over an area that cannot be dropped on"},RU=function(e){return`
  The item has returned to its starting position
  of `+CP(e.index)+`
`},Rje=function(e){if(e.reason==="CANCEL")return`
      Movement cancelled.
      `+RU(e.source)+`
    `;var n=e.destination,r=e.combine;return n?`
      You have dropped the item.
      `+Bne(e.source,n)+`
    `:r?`
      You have dropped the item.
      `+zne(e.draggableId,e.source,r)+`
    `:`
    The item has been dropped while not over a drop area.
    `+RU(e.source)+`
  `},DE={dragHandleUsageInstructions:_je,onDragStart:Oje,onDragUpdate:Lje,onDragEnd:Rje},ci={x:0,y:0},Ei=function(e,n){return{x:e.x+n.x,y:e.y+n.y}},Po=function(e,n){return{x:e.x-n.x,y:e.y-n.y}},rm=function(e,n){return e.x===n.x&&e.y===n.y},Xb=function(e){return{x:e.x!==0?-e.x:0,y:e.y!==0?-e.y:0}},fv=function(e,n,r){var i;return r===void 0&&(r=0),i={},i[e]=n,i[e==="x"?"y":"x"]=r,i},Zj=function(e,n){return Math.sqrt(Math.pow(n.x-e.x,2)+Math.pow(n.y-e.y,2))},MU=function(e,n){return Math.min.apply(Math,n.map(function(r){return Zj(e,r)}))},Une=function(e){return function(n){return{x:e(n.x),y:e(n.y)}}},Mje=function(t,e){var n=dc({top:Math.max(e.top,t.top),right:Math.min(e.right,t.right),bottom:Math.min(e.bottom,t.bottom),left:Math.max(e.left,t.left)});return n.width<=0||n.height<=0?null:n},IA=function(e,n){return{top:e.top+n.y,left:e.left+n.x,bottom:e.bottom+n.y,right:e.right+n.x}},FU=function(e){return[{x:e.left,y:e.top},{x:e.right,y:e.top},{x:e.left,y:e.bottom},{x:e.right,y:e.bottom}]},Fje={top:0,right:0,bottom:0,left:0},$je=function(e,n){return n?IA(e,n.scroll.diff.displacement):e},Bje=function(e,n,r){if(r&&r.increasedBy){var i;return lt({},e,(i={},i[n.end]=e[n.end]+r.increasedBy[n.line],i))}return e},zje=function(e,n){return n&&n.shouldClipSubject?Mje(n.pageMarginBox,e):dc(e)},lb=function(t){var e=t.page,n=t.withPlaceholder,r=t.axis,i=t.frame,a=$je(e.marginBox,i),o=Bje(a,r,n),l=zje(o,i);return{page:e,withPlaceholder:n,active:l}},m8=function(t,e){t.frame||ft(!1);var n=t.frame,r=Po(e,n.scroll.initial),i=Xb(r),a=lt({},n,{scroll:{initial:n.scroll.initial,current:e,diff:{value:r,displacement:i},max:n.scroll.max}}),o=lb({page:t.subject.page,withPlaceholder:t.subject.withPlaceholder,axis:t.axis,frame:a}),l=lt({},t,{frame:a,subject:o});return l};function EP(t){return Object.values?Object.values(t):Object.keys(t).map(function(e){return t[e]})}function p8(t,e){if(t.findIndex)return t.findIndex(e);for(var n=0;n<t.length;n++)if(e(t[n]))return n;return-1}function Dm(t,e){if(t.find)return t.find(e);var n=p8(t,e);if(n!==-1)return t[n]}function Vne(t){return Array.prototype.slice.call(t)}var qne=oi(function(t){return t.reduce(function(e,n){return e[n.descriptor.id]=n,e},{})}),Hne=oi(function(t){return t.reduce(function(e,n){return e[n.descriptor.id]=n,e},{})}),P3=oi(function(t){return EP(t)}),Uje=oi(function(t){return EP(t)}),Zb=oi(function(t,e){var n=Uje(e).filter(function(r){return t===r.descriptor.droppableId}).sort(function(r,i){return r.descriptor.index-i.descriptor.index});return n});function g8(t){return t.at&&t.at.type==="REORDER"?t.at.destination:null}function T3(t){return t.at&&t.at.type==="COMBINE"?t.at.combine:null}var I3=oi(function(t,e){return e.filter(function(n){return n.descriptor.id!==t.descriptor.id})}),Vje=function(t){var e=t.isMovingForward,n=t.draggable,r=t.destination,i=t.insideDestination,a=t.previousImpact;if(!r.isCombineEnabled)return null;var o=g8(a);if(!o)return null;function l(p){var g={type:"COMBINE",combine:{draggableId:p,droppableId:r.descriptor.id}};return lt({},a,{at:g})}var c=a.displaced.all,d=c.length?c[0]:null;if(e)return d?l(d):null;var u=I3(n,i);if(!d){if(!u.length)return null;var h=u[u.length-1];return l(h.descriptor.id)}var f=p8(u,function(p){return p.descriptor.id===d});f===-1&&ft(!1);var m=f-1;if(m<0)return null;var v=u[m];return l(v.descriptor.id)},Qb=function(t,e){return t.descriptor.droppableId===e.descriptor.id},Wne={point:ci,value:0},Qj={invisible:{},visible:{},all:[]},qje={displaced:Qj,displacedBy:Wne,at:null},yl=function(t,e){return function(n){return t<=n&&n<=e}},Gne=function(t){var e=yl(t.top,t.bottom),n=yl(t.left,t.right);return function(r){var i=e(r.top)&&e(r.bottom)&&n(r.left)&&n(r.right);if(i)return!0;var a=e(r.top)||e(r.bottom),o=n(r.left)||n(r.right),l=a&&o;if(l)return!0;var c=r.top<t.top&&r.bottom>t.bottom,d=r.left<t.left&&r.right>t.right,u=c&&d;if(u)return!0;var h=c&&o||d&&a;return h}},Hje=function(t){var e=yl(t.top,t.bottom),n=yl(t.left,t.right);return function(r){var i=e(r.top)&&e(r.bottom)&&n(r.left)&&n(r.right);return i}},v8={direction:"vertical",line:"y",crossAxisLine:"x",start:"top",end:"bottom",size:"height",crossAxisStart:"left",crossAxisEnd:"right",crossAxisSize:"width"},Kne={direction:"horizontal",line:"x",crossAxisLine:"y",start:"left",end:"right",size:"width",crossAxisStart:"top",crossAxisEnd:"bottom",crossAxisSize:"height"},Wje=function(t){return function(e){var n=yl(e.top,e.bottom),r=yl(e.left,e.right);return function(i){return t===v8?n(i.top)&&n(i.bottom):r(i.left)&&r(i.right)}}},Gje=function(e,n){var r=n.frame?n.frame.scroll.diff.displacement:ci;return IA(e,r)},Kje=function(e,n,r){return n.subject.active?r(n.subject.active)(e):!1},Yje=function(e,n,r){return r(n)(e)},x8=function(e){var n=e.target,r=e.destination,i=e.viewport,a=e.withDroppableDisplacement,o=e.isVisibleThroughFrameFn,l=a?Gje(n,r):n;return Kje(l,r,o)&&Yje(l,i,o)},Xje=function(e){return x8(lt({},e,{isVisibleThroughFrameFn:Gne}))},Yne=function(e){return x8(lt({},e,{isVisibleThroughFrameFn:Hje}))},Zje=function(e){return x8(lt({},e,{isVisibleThroughFrameFn:Wje(e.destination.axis)}))},Qje=function(e,n,r){if(typeof r=="boolean")return r;if(!n)return!0;var i=n.invisible,a=n.visible;if(i[e])return!1;var o=a[e];return o?o.shouldAnimate:!0};function Jje(t,e){var n=t.page.marginBox,r={top:e.point.y,right:0,bottom:0,left:e.point.x};return dc(h8(n,r))}function Jj(t){var e=t.afterDragging,n=t.destination,r=t.displacedBy,i=t.viewport,a=t.forceShouldAnimate,o=t.last;return e.reduce(function(c,d){var u=Jje(d,r),h=d.descriptor.id;c.all.push(h);var f=Xje({target:u,destination:n,viewport:i,withDroppableDisplacement:!0});if(!f)return c.invisible[d.descriptor.id]=!0,c;var m=Qje(h,o,a),v={draggableId:h,shouldAnimate:m};return c.visible[h]=v,c},{all:[],visible:{},invisible:{}})}function e2e(t,e){if(!t.length)return 0;var n=t[t.length-1].descriptor.index;return e.inHomeList?n:n+1}function $U(t){var e=t.insideDestination,n=t.inHomeList,r=t.displacedBy,i=t.destination,a=e2e(e,{inHomeList:n});return{displaced:Qj,displacedBy:r,at:{type:"REORDER",destination:{droppableId:i.descriptor.id,index:a}}}}function PP(t){var e=t.draggable,n=t.insideDestination,r=t.destination,i=t.viewport,a=t.displacedBy,o=t.last,l=t.index,c=t.forceShouldAnimate,d=Qb(e,r);if(l==null)return $U({insideDestination:n,inHomeList:d,displacedBy:a,destination:r});var u=Dm(n,function(p){return p.descriptor.index===l});if(!u)return $U({insideDestination:n,inHomeList:d,displacedBy:a,destination:r});var h=I3(e,n),f=n.indexOf(u),m=h.slice(f),v=Jj({afterDragging:m,destination:r,displacedBy:a,last:o,viewport:i.frame,forceShouldAnimate:c});return{displaced:v,displacedBy:a,at:{type:"REORDER",destination:{droppableId:r.descriptor.id,index:l}}}}function ym(t,e){return!!e.effected[t]}var t2e=function(t){var e=t.isMovingForward,n=t.destination,r=t.draggables,i=t.combine,a=t.afterCritical;if(!n.isCombineEnabled)return null;var o=i.draggableId,l=r[o],c=l.descriptor.index,d=ym(o,a);return d?e?c:c-1:e?c+1:c},n2e=function(t){var e=t.isMovingForward,n=t.isInHomeList,r=t.insideDestination,i=t.location;if(!r.length)return null;var a=i.index,o=e?a+1:a-1,l=r[0].descriptor.index,c=r[r.length-1].descriptor.index,d=n?c:c+1;return o<l||o>d?null:o},r2e=function(t){var e=t.isMovingForward,n=t.isInHomeList,r=t.draggable,i=t.draggables,a=t.destination,o=t.insideDestination,l=t.previousImpact,c=t.viewport,d=t.afterCritical,u=l.at;if(u||ft(!1),u.type==="REORDER"){var h=n2e({isMovingForward:e,isInHomeList:n,location:u.destination,insideDestination:o});return h==null?null:PP({draggable:r,insideDestination:o,destination:a,viewport:c,last:l.displaced,displacedBy:l.displacedBy,index:h})}var f=t2e({isMovingForward:e,destination:a,displaced:l.displaced,draggables:i,combine:u.combine,afterCritical:d});return f==null?null:PP({draggable:r,insideDestination:o,destination:a,viewport:c,last:l.displaced,displacedBy:l.displacedBy,index:f})},s2e=function(t){var e=t.displaced,n=t.afterCritical,r=t.combineWith,i=t.displacedBy,a=!!(e.visible[r]||e.invisible[r]);return ym(r,n)?a?ci:Xb(i.point):a?i.point:ci},i2e=function(t){var e=t.afterCritical,n=t.impact,r=t.draggables,i=T3(n);i||ft(!1);var a=i.draggableId,o=r[a].page.borderBox.center,l=s2e({displaced:n.displaced,afterCritical:e,combineWith:a,displacedBy:n.displacedBy});return Ei(o,l)},Xne=function(e,n){return n.margin[e.start]+n.borderBox[e.size]/2},a2e=function(e,n){return n.margin[e.end]+n.borderBox[e.size]/2},y8=function(e,n,r){return n[e.crossAxisStart]+r.margin[e.crossAxisStart]+r.borderBox[e.crossAxisSize]/2},BU=function(e){var n=e.axis,r=e.moveRelativeTo,i=e.isMoving;return fv(n.line,r.marginBox[n.end]+Xne(n,i),y8(n,r.marginBox,i))},zU=function(e){var n=e.axis,r=e.moveRelativeTo,i=e.isMoving;return fv(n.line,r.marginBox[n.start]-a2e(n,i),y8(n,r.marginBox,i))},o2e=function(e){var n=e.axis,r=e.moveInto,i=e.isMoving;return fv(n.line,r.contentBox[n.start]+Xne(n,i),y8(n,r.contentBox,i))},l2e=function(t){var e=t.impact,n=t.draggable,r=t.draggables,i=t.droppable,a=t.afterCritical,o=Zb(i.descriptor.id,r),l=n.page,c=i.axis;if(!o.length)return o2e({axis:c,moveInto:i.page,isMoving:l});var d=e.displaced,u=e.displacedBy,h=d.all[0];if(h){var f=r[h];if(ym(h,a))return zU({axis:c,moveRelativeTo:f.page,isMoving:l});var m=NP(f.page,u.point);return zU({axis:c,moveRelativeTo:m,isMoving:l})}var v=o[o.length-1];if(v.descriptor.id===n.descriptor.id)return l.borderBox.center;if(ym(v.descriptor.id,a)){var p=NP(v.page,Xb(a.displacedBy.point));return BU({axis:c,moveRelativeTo:p,isMoving:l})}return BU({axis:c,moveRelativeTo:v.page,isMoving:l})},gM=function(t,e){var n=t.frame;return n?Ei(e,n.scroll.diff.displacement):e},c2e=function(e){var n=e.impact,r=e.draggable,i=e.droppable,a=e.draggables,o=e.afterCritical,l=r.page.borderBox.center,c=n.at;return!i||!c?l:c.type==="REORDER"?l2e({impact:n,draggable:r,draggables:a,droppable:i,afterCritical:o}):i2e({impact:n,draggables:a,afterCritical:o})},D3=function(t){var e=c2e(t),n=t.droppable,r=n?gM(n,e):e;return r},Zne=function(t,e){var n=Po(e,t.scroll.initial),r=Xb(n),i=dc({top:e.y,bottom:e.y+t.frame.height,left:e.x,right:e.x+t.frame.width}),a={frame:i,scroll:{initial:t.scroll.initial,max:t.scroll.max,current:e,diff:{value:n,displacement:r}}};return a};function UU(t,e){return t.map(function(n){return e[n]})}function d2e(t,e){for(var n=0;n<e.length;n++){var r=e[n].visible[t];if(r)return r}return null}var u2e=function(t){var e=t.impact,n=t.viewport,r=t.destination,i=t.draggables,a=t.maxScrollChange,o=Zne(n,Ei(n.scroll.current,a)),l=r.frame?m8(r,Ei(r.frame.scroll.current,a)):r,c=e.displaced,d=Jj({afterDragging:UU(c.all,i),destination:r,displacedBy:e.displacedBy,viewport:o.frame,last:c,forceShouldAnimate:!1}),u=Jj({afterDragging:UU(c.all,i),destination:l,displacedBy:e.displacedBy,viewport:n.frame,last:c,forceShouldAnimate:!1}),h={},f={},m=[c,d,u];c.all.forEach(function(p){var g=d2e(p,m);if(g){f[p]=g;return}h[p]=!0});var v=lt({},e,{displaced:{all:c.all,invisible:h,visible:f}});return v},h2e=function(t,e){return Ei(t.scroll.diff.displacement,e)},b8=function(t){var e=t.pageBorderBoxCenter,n=t.draggable,r=t.viewport,i=h2e(r,e),a=Po(i,n.page.borderBox.center);return Ei(n.client.borderBox.center,a)},Qne=function(t){var e=t.draggable,n=t.destination,r=t.newPageBorderBoxCenter,i=t.viewport,a=t.withDroppableDisplacement,o=t.onlyOnMainAxis,l=o===void 0?!1:o,c=Po(r,e.page.borderBox.center),d=IA(e.page.borderBox,c),u={target:d,destination:n,withDroppableDisplacement:a,viewport:i};return l?Zje(u):Yne(u)},f2e=function(t){var e=t.isMovingForward,n=t.draggable,r=t.destination,i=t.draggables,a=t.previousImpact,o=t.viewport,l=t.previousPageBorderBoxCenter,c=t.previousClientSelection,d=t.afterCritical;if(!r.isEnabled)return null;var u=Zb(r.descriptor.id,i),h=Qb(n,r),f=Vje({isMovingForward:e,draggable:n,destination:r,insideDestination:u,previousImpact:a})||r2e({isMovingForward:e,isInHomeList:h,draggable:n,draggables:i,destination:r,insideDestination:u,previousImpact:a,viewport:o,afterCritical:d});if(!f)return null;var m=D3({impact:f,draggable:n,droppable:r,draggables:i,afterCritical:d}),v=Qne({draggable:n,destination:r,newPageBorderBoxCenter:m,viewport:o.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0});if(v){var p=b8({pageBorderBoxCenter:m,draggable:n,viewport:o});return{clientSelection:p,impact:f,scrollJumpRequest:null}}var g=Po(m,l),x=u2e({impact:f,viewport:o,destination:r,draggables:i,maxScrollChange:g});return{clientSelection:c,impact:x,scrollJumpRequest:g}},ra=function(e){var n=e.subject.active;return n||ft(!1),n},m2e=function(t){var e=t.isMovingForward,n=t.pageBorderBoxCenter,r=t.source,i=t.droppables,a=t.viewport,o=r.subject.active;if(!o)return null;var l=r.axis,c=yl(o[l.start],o[l.end]),d=P3(i).filter(function(h){return h!==r}).filter(function(h){return h.isEnabled}).filter(function(h){return!!h.subject.active}).filter(function(h){return Gne(a.frame)(ra(h))}).filter(function(h){var f=ra(h);return e?o[l.crossAxisEnd]<f[l.crossAxisEnd]:f[l.crossAxisStart]<o[l.crossAxisStart]}).filter(function(h){var f=ra(h),m=yl(f[l.start],f[l.end]);return c(f[l.start])||c(f[l.end])||m(o[l.start])||m(o[l.end])}).sort(function(h,f){var m=ra(h)[l.crossAxisStart],v=ra(f)[l.crossAxisStart];return e?m-v:v-m}).filter(function(h,f,m){return ra(h)[l.crossAxisStart]===ra(m[0])[l.crossAxisStart]});if(!d.length)return null;if(d.length===1)return d[0];var u=d.filter(function(h){var f=yl(ra(h)[l.start],ra(h)[l.end]);return f(n[l.line])});return u.length===1?u[0]:u.length>1?u.sort(function(h,f){return ra(h)[l.start]-ra(f)[l.start]})[0]:d.sort(function(h,f){var m=MU(n,FU(ra(h))),v=MU(n,FU(ra(f)));return m!==v?m-v:ra(h)[l.start]-ra(f)[l.start]})[0]},VU=function(e,n){var r=e.page.borderBox.center;return ym(e.descriptor.id,n)?Po(r,n.displacedBy.point):r},p2e=function(e,n){var r=e.page.borderBox;return ym(e.descriptor.id,n)?IA(r,Xb(n.displacedBy.point)):r},g2e=function(t){var e=t.pageBorderBoxCenter,n=t.viewport,r=t.destination,i=t.insideDestination,a=t.afterCritical,o=i.filter(function(l){return Yne({target:p2e(l,a),destination:r,viewport:n.frame,withDroppableDisplacement:!0})}).sort(function(l,c){var d=Zj(e,gM(r,VU(l,a))),u=Zj(e,gM(r,VU(c,a)));return d<u?-1:u<d?1:l.descriptor.index-c.descriptor.index});return o[0]||null},DA=oi(function(e,n){var r=n[e.line];return{value:r,point:fv(e.line,r)}}),v2e=function(e,n,r){var i=e.axis;if(e.descriptor.mode==="virtual")return fv(i.line,n[i.line]);var a=e.subject.page.contentBox[i.size],o=Zb(e.descriptor.id,r),l=o.reduce(function(u,h){return u+h.client.marginBox[i.size]},0),c=l+n[i.line],d=c-a;return d<=0?null:fv(i.line,d)},Jne=function(e,n){return lt({},e,{scroll:lt({},e.scroll,{max:n})})},ere=function(e,n,r){var i=e.frame;Qb(n,e)&&ft(!1),e.subject.withPlaceholder&&ft(!1);var a=DA(e.axis,n.displaceBy).point,o=v2e(e,a,r),l={placeholderSize:a,increasedBy:o,oldFrameMaxScroll:e.frame?e.frame.scroll.max:null};if(!i){var c=lb({page:e.subject.page,withPlaceholder:l,axis:e.axis,frame:e.frame});return lt({},e,{subject:c})}var d=o?Ei(i.scroll.max,o):i.scroll.max,u=Jne(i,d),h=lb({page:e.subject.page,withPlaceholder:l,axis:e.axis,frame:u});return lt({},e,{subject:h,frame:u})},x2e=function(e){var n=e.subject.withPlaceholder;n||ft(!1);var r=e.frame;if(!r){var i=lb({page:e.subject.page,axis:e.axis,frame:null,withPlaceholder:null});return lt({},e,{subject:i})}var a=n.oldFrameMaxScroll;a||ft(!1);var o=Jne(r,a),l=lb({page:e.subject.page,axis:e.axis,frame:o,withPlaceholder:null});return lt({},e,{subject:l,frame:o})},y2e=function(t){var e=t.previousPageBorderBoxCenter,n=t.moveRelativeTo,r=t.insideDestination,i=t.draggable,a=t.draggables,o=t.destination,l=t.viewport,c=t.afterCritical;if(!n){if(r.length)return null;var d={displaced:Qj,displacedBy:Wne,at:{type:"REORDER",destination:{droppableId:o.descriptor.id,index:0}}},u=D3({impact:d,draggable:i,droppable:o,draggables:a,afterCritical:c}),h=Qb(i,o)?o:ere(o,i,a),f=Qne({draggable:i,destination:h,newPageBorderBoxCenter:u,viewport:l.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0});return f?d:null}var m=e[o.axis.line]<=n.page.borderBox.center[o.axis.line],v=function(){var g=n.descriptor.index;return n.descriptor.id===i.descriptor.id||m?g:g+1}(),p=DA(o.axis,i.displaceBy);return PP({draggable:i,insideDestination:r,destination:o,viewport:l,displacedBy:p,last:Qj,index:v})},b2e=function(t){var e=t.isMovingForward,n=t.previousPageBorderBoxCenter,r=t.draggable,i=t.isOver,a=t.draggables,o=t.droppables,l=t.viewport,c=t.afterCritical,d=m2e({isMovingForward:e,pageBorderBoxCenter:n,source:i,droppables:o,viewport:l});if(!d)return null;var u=Zb(d.descriptor.id,a),h=g2e({pageBorderBoxCenter:n,viewport:l,destination:d,insideDestination:u,afterCritical:c}),f=y2e({previousPageBorderBoxCenter:n,destination:d,draggable:r,draggables:a,moveRelativeTo:h,insideDestination:u,viewport:l,afterCritical:c});if(!f)return null;var m=D3({impact:f,draggable:r,droppable:d,draggables:a,afterCritical:c}),v=b8({pageBorderBoxCenter:m,draggable:r,viewport:l});return{clientSelection:v,impact:f,scrollJumpRequest:null}},Oo=function(t){var e=t.at;return e?e.type==="REORDER"?e.destination.droppableId:e.combine.droppableId:null},w2e=function(e,n){var r=Oo(e);return r?n[r]:null},j2e=function(t){var e=t.state,n=t.type,r=w2e(e.impact,e.dimensions.droppables),i=!!r,a=e.dimensions.droppables[e.critical.droppable.id],o=r||a,l=o.axis.direction,c=l==="vertical"&&(n==="MOVE_UP"||n==="MOVE_DOWN")||l==="horizontal"&&(n==="MOVE_LEFT"||n==="MOVE_RIGHT");if(c&&!i)return null;var d=n==="MOVE_DOWN"||n==="MOVE_RIGHT",u=e.dimensions.draggables[e.critical.draggable.id],h=e.current.page.borderBoxCenter,f=e.dimensions,m=f.draggables,v=f.droppables;return c?f2e({isMovingForward:d,previousPageBorderBoxCenter:h,draggable:u,destination:o,draggables:m,viewport:e.viewport,previousClientSelection:e.current.client.selection,previousImpact:e.impact,afterCritical:e.afterCritical}):b2e({isMovingForward:d,previousPageBorderBoxCenter:h,draggable:u,isOver:o,draggables:m,droppables:v,viewport:e.viewport,afterCritical:e.afterCritical})};function ip(t){return t.phase==="DRAGGING"||t.phase==="COLLECTING"}function tre(t){var e=yl(t.top,t.bottom),n=yl(t.left,t.right);return function(i){return e(i.y)&&n(i.x)}}function N2e(t,e){return t.left<e.right&&t.right>e.left&&t.top<e.bottom&&t.bottom>e.top}function S2e(t){var e=t.pageBorderBox,n=t.draggable,r=t.candidates,i=n.page.borderBox.center,a=r.map(function(o){var l=o.axis,c=fv(o.axis.line,e.center[l.line],o.page.borderBox.center[l.crossAxisLine]);return{id:o.descriptor.id,distance:Zj(i,c)}}).sort(function(o,l){return l.distance-o.distance});return a[0]?a[0].id:null}function A2e(t){var e=t.pageBorderBox,n=t.draggable,r=t.droppables,i=P3(r).filter(function(a){if(!a.isEnabled)return!1;var o=a.subject.active;if(!o||!N2e(e,o))return!1;if(tre(o)(e.center))return!0;var l=a.axis,c=o.center[l.crossAxisLine],d=e[l.crossAxisStart],u=e[l.crossAxisEnd],h=yl(o[l.crossAxisStart],o[l.crossAxisEnd]),f=h(d),m=h(u);return!f&&!m?!0:f?d<c:u>c});return i.length?i.length===1?i[0].descriptor.id:S2e({pageBorderBox:e,draggable:n,candidates:i}):null}var nre=function(e,n){return dc(IA(e,n))},C2e=function(t,e){var n=t.frame;return n?nre(e,n.scroll.diff.value):e};function rre(t){var e=t.displaced,n=t.id;return!!(e.visible[n]||e.invisible[n])}function E2e(t){var e=t.draggable,n=t.closest,r=t.inHomeList;return n?r&&n.descriptor.index>e.descriptor.index?n.descriptor.index-1:n.descriptor.index:null}var P2e=function(t){var e=t.pageBorderBoxWithDroppableScroll,n=t.draggable,r=t.destination,i=t.insideDestination,a=t.last,o=t.viewport,l=t.afterCritical,c=r.axis,d=DA(r.axis,n.displaceBy),u=d.value,h=e[c.start],f=e[c.end],m=I3(n,i),v=Dm(m,function(g){var x=g.descriptor.id,y=g.page.borderBox.center[c.line],b=ym(x,l),w=rre({displaced:a,id:x});return b?w?f<=y:h<y-u:w?f<=y+u:h<y}),p=E2e({draggable:n,closest:v,inHomeList:Qb(n,r)});return PP({draggable:n,insideDestination:i,destination:r,viewport:o,last:a,displacedBy:d,index:p})},T2e=4,I2e=function(t){var e=t.draggable,n=t.pageBorderBoxWithDroppableScroll,r=t.previousImpact,i=t.destination,a=t.insideDestination,o=t.afterCritical;if(!i.isCombineEnabled)return null;var l=i.axis,c=DA(i.axis,e.displaceBy),d=c.value,u=n[l.start],h=n[l.end],f=I3(e,a),m=Dm(f,function(p){var g=p.descriptor.id,x=p.page.borderBox,y=x[l.size],b=y/T2e,w=ym(g,o),N=rre({displaced:r.displaced,id:g});return w?N?h>x[l.start]+b&&h<x[l.end]-b:u>x[l.start]-d+b&&u<x[l.end]-d-b:N?h>x[l.start]+d+b&&h<x[l.end]+d-b:u>x[l.start]+b&&u<x[l.end]-b});if(!m)return null;var v={displacedBy:c,displaced:r.displaced,at:{type:"COMBINE",combine:{draggableId:m.descriptor.id,droppableId:i.descriptor.id}}};return v},sre=function(t){var e=t.pageOffset,n=t.draggable,r=t.draggables,i=t.droppables,a=t.previousImpact,o=t.viewport,l=t.afterCritical,c=nre(n.page.borderBox,e),d=A2e({pageBorderBox:c,draggable:n,droppables:i});if(!d)return qje;var u=i[d],h=Zb(u.descriptor.id,r),f=C2e(u,c);return I2e({pageBorderBoxWithDroppableScroll:f,draggable:n,previousImpact:a,destination:u,insideDestination:h,afterCritical:l})||P2e({pageBorderBoxWithDroppableScroll:f,draggable:n,destination:u,insideDestination:h,last:a.displaced,viewport:o,afterCritical:l})},w8=function(t,e){var n;return lt({},t,(n={},n[e.descriptor.id]=e,n))},D2e=function(e){var n=e.previousImpact,r=e.impact,i=e.droppables,a=Oo(n),o=Oo(r);if(!a||a===o)return i;var l=i[a];if(!l.subject.withPlaceholder)return i;var c=x2e(l);return w8(i,c)},k2e=function(t){var e=t.draggable,n=t.draggables,r=t.droppables,i=t.previousImpact,a=t.impact,o=D2e({previousImpact:i,impact:a,droppables:r}),l=Oo(a);if(!l)return o;var c=r[l];if(Qb(e,c)||c.subject.withPlaceholder)return o;var d=ere(c,e,n);return w8(o,d)},rj=function(t){var e=t.state,n=t.clientSelection,r=t.dimensions,i=t.viewport,a=t.impact,o=t.scrollJumpRequest,l=i||e.viewport,c=r||e.dimensions,d=n||e.current.client.selection,u=Po(d,e.initial.client.selection),h={offset:u,selection:d,borderBoxCenter:Ei(e.initial.client.borderBoxCenter,u)},f={selection:Ei(h.selection,l.scroll.current),borderBoxCenter:Ei(h.borderBoxCenter,l.scroll.current),offset:Ei(h.offset,l.scroll.diff.value)},m={client:h,page:f};if(e.phase==="COLLECTING")return lt({phase:"COLLECTING"},e,{dimensions:c,viewport:l,current:m});var v=c.draggables[e.critical.draggable.id],p=a||sre({pageOffset:f.offset,draggable:v,draggables:c.draggables,droppables:c.droppables,previousImpact:e.impact,viewport:l,afterCritical:e.afterCritical}),g=k2e({draggable:v,impact:p,previousImpact:e.impact,draggables:c.draggables,droppables:c.droppables}),x=lt({},e,{current:m,dimensions:{draggables:c.draggables,droppables:g},impact:p,viewport:l,scrollJumpRequest:o||null,forceShouldAnimate:o?!1:null});return x};function _2e(t,e){return t.map(function(n){return e[n]})}var ire=function(t){var e=t.impact,n=t.viewport,r=t.draggables,i=t.destination,a=t.forceShouldAnimate,o=e.displaced,l=_2e(o.all,r),c=Jj({afterDragging:l,destination:i,displacedBy:e.displacedBy,viewport:n.frame,forceShouldAnimate:a,last:o});return lt({},e,{displaced:c})},are=function(t){var e=t.impact,n=t.draggable,r=t.droppable,i=t.draggables,a=t.viewport,o=t.afterCritical,l=D3({impact:e,draggable:n,draggables:i,droppable:r,afterCritical:o});return b8({pageBorderBoxCenter:l,draggable:n,viewport:a})},ore=function(t){var e=t.state,n=t.dimensions,r=t.viewport;e.movementMode!=="SNAP"&&ft(!1);var i=e.impact,a=r||e.viewport,o=n||e.dimensions,l=o.draggables,c=o.droppables,d=l[e.critical.draggable.id],u=Oo(i);u||ft(!1);var h=c[u],f=ire({impact:i,viewport:a,destination:h,draggables:l}),m=are({impact:f,draggable:d,droppable:h,draggables:l,viewport:a,afterCritical:e.afterCritical});return rj({impact:f,clientSelection:m,state:e,dimensions:o,viewport:a})},O2e=function(t){return{index:t.index,droppableId:t.droppableId}},lre=function(t){var e=t.draggable,n=t.home,r=t.draggables,i=t.viewport,a=DA(n.axis,e.displaceBy),o=Zb(n.descriptor.id,r),l=o.indexOf(e);l===-1&&ft(!1);var c=o.slice(l+1),d=c.reduce(function(m,v){return m[v.descriptor.id]=!0,m},{}),u={inVirtualList:n.descriptor.mode==="virtual",displacedBy:a,effected:d},h=Jj({afterDragging:c,destination:n,displacedBy:a,last:null,viewport:i.frame,forceShouldAnimate:!1}),f={displaced:h,displacedBy:a,at:{type:"REORDER",destination:O2e(e.descriptor)}};return{impact:f,afterCritical:u}},L2e=function(t,e){return{draggables:t.draggables,droppables:w8(t.droppables,e)}},R2e=function(t){var e=t.draggable,n=t.offset,r=t.initialWindowScroll,i=NP(e.client,n),a=SP(i,r),o=lt({},e,{placeholder:lt({},e.placeholder,{client:i}),client:i,page:a});return o},M2e=function(t){var e=t.frame;return e||ft(!1),e},F2e=function(t){var e=t.additions,n=t.updatedDroppables,r=t.viewport,i=r.scroll.diff.value;return e.map(function(a){var o=a.descriptor.droppableId,l=n[o],c=M2e(l),d=c.scroll.diff.value,u=Ei(i,d),h=R2e({draggable:a,offset:u,initialWindowScroll:r.scroll.initial});return h})},$2e=function(t){var e=t.state,n=t.published,r=n.modified.map(function(b){var w=e.dimensions.droppables[b.droppableId],N=m8(w,b.scroll);return N}),i=lt({},e.dimensions.droppables,{},qne(r)),a=Hne(F2e({additions:n.additions,updatedDroppables:i,viewport:e.viewport})),o=lt({},e.dimensions.draggables,{},a);n.removals.forEach(function(b){delete o[b]});var l={droppables:i,draggables:o},c=Oo(e.impact),d=c?l.droppables[c]:null,u=l.draggables[e.critical.draggable.id],h=l.droppables[e.critical.droppable.id],f=lre({draggable:u,home:h,draggables:o,viewport:e.viewport}),m=f.impact,v=f.afterCritical,p=d&&d.isCombineEnabled?e.impact:m,g=sre({pageOffset:e.current.page.offset,draggable:l.draggables[e.critical.draggable.id],draggables:l.draggables,droppables:l.droppables,previousImpact:p,viewport:e.viewport,afterCritical:v}),x=lt({phase:"DRAGGING"},e,{phase:"DRAGGING",impact:g,onLiftImpact:m,dimensions:l,afterCritical:v,forceShouldAnimate:!1});if(e.phase==="COLLECTING")return x;var y=lt({phase:"DROP_PENDING"},x,{phase:"DROP_PENDING",reason:e.reason,isWaiting:!1});return y},vM=function(e){return e.movementMode==="SNAP"},__=function(e,n,r){var i=L2e(e.dimensions,n);return!vM(e)||r?rj({state:e,dimensions:i}):ore({state:e,dimensions:i})};function O_(t){return t.isDragging&&t.movementMode==="SNAP"?lt({phase:"DRAGGING"},t,{scrollJumpRequest:null}):t}var qU={phase:"IDLE",completed:null,shouldFlush:!1},B2e=function(t,e){if(t===void 0&&(t=qU),e.type==="FLUSH")return lt({},qU,{shouldFlush:!0});if(e.type==="INITIAL_PUBLISH"){t.phase!=="IDLE"&&ft(!1);var n=e.payload,r=n.critical,i=n.clientSelection,a=n.viewport,o=n.dimensions,l=n.movementMode,c=o.draggables[r.draggable.id],d=o.droppables[r.droppable.id],u={selection:i,borderBoxCenter:c.client.borderBox.center,offset:ci},h={client:u,page:{selection:Ei(u.selection,a.scroll.initial),borderBoxCenter:Ei(u.selection,a.scroll.initial),offset:Ei(u.selection,a.scroll.diff.value)}},f=P3(o.droppables).every(function(Ne){return!Ne.isFixedOnPage}),m=lre({draggable:c,home:d,draggables:o.draggables,viewport:a}),v=m.impact,p=m.afterCritical,g={phase:"DRAGGING",isDragging:!0,critical:r,movementMode:l,dimensions:o,initial:h,current:h,isWindowScrollAllowed:f,impact:v,afterCritical:p,onLiftImpact:v,viewport:a,scrollJumpRequest:null,forceShouldAnimate:null};return g}if(e.type==="COLLECTION_STARTING"){if(t.phase==="COLLECTING"||t.phase==="DROP_PENDING")return t;t.phase!=="DRAGGING"&&ft(!1);var x=lt({phase:"COLLECTING"},t,{phase:"COLLECTING"});return x}if(e.type==="PUBLISH_WHILE_DRAGGING")return t.phase==="COLLECTING"||t.phase==="DROP_PENDING"||ft(!1),$2e({state:t,published:e.payload});if(e.type==="MOVE"){if(t.phase==="DROP_PENDING")return t;ip(t)||ft(!1);var y=e.payload.client;return rm(y,t.current.client.selection)?t:rj({state:t,clientSelection:y,impact:vM(t)?t.impact:null})}if(e.type==="UPDATE_DROPPABLE_SCROLL"){if(t.phase==="DROP_PENDING"||t.phase==="COLLECTING")return O_(t);ip(t)||ft(!1);var b=e.payload,w=b.id,N=b.newScroll,E=t.dimensions.droppables[w];if(!E)return t;var C=m8(E,N);return __(t,C,!1)}if(e.type==="UPDATE_DROPPABLE_IS_ENABLED"){if(t.phase==="DROP_PENDING")return t;ip(t)||ft(!1);var j=e.payload,I=j.id,k=j.isEnabled,D=t.dimensions.droppables[I];D||ft(!1),D.isEnabled===k&&ft(!1);var P=lt({},D,{isEnabled:k});return __(t,P,!0)}if(e.type==="UPDATE_DROPPABLE_IS_COMBINE_ENABLED"){if(t.phase==="DROP_PENDING")return t;ip(t)||ft(!1);var R=e.payload,_=R.id,M=R.isCombineEnabled,U=t.dimensions.droppables[_];U||ft(!1),U.isCombineEnabled===M&&ft(!1);var F=lt({},U,{isCombineEnabled:M});return __(t,F,!0)}if(e.type==="MOVE_BY_WINDOW_SCROLL"){if(t.phase==="DROP_PENDING"||t.phase==="DROP_ANIMATING")return t;ip(t)||ft(!1),t.isWindowScrollAllowed||ft(!1);var z=e.payload.newScroll;if(rm(t.viewport.scroll.current,z))return O_(t);var H=Zne(t.viewport,z);return vM(t)?ore({state:t,viewport:H}):rj({state:t,viewport:H})}if(e.type==="UPDATE_VIEWPORT_MAX_SCROLL"){if(!ip(t))return t;var W=e.payload.maxScroll;if(rm(W,t.viewport.scroll.max))return t;var $=lt({},t.viewport,{scroll:lt({},t.viewport.scroll,{max:W})});return lt({phase:"DRAGGING"},t,{viewport:$})}if(e.type==="MOVE_UP"||e.type==="MOVE_DOWN"||e.type==="MOVE_LEFT"||e.type==="MOVE_RIGHT"){if(t.phase==="COLLECTING"||t.phase==="DROP_PENDING")return t;t.phase!=="DRAGGING"&&ft(!1);var L=j2e({state:t,type:e.type});return L?rj({state:t,impact:L.impact,clientSelection:L.clientSelection,scrollJumpRequest:L.scrollJumpRequest}):t}if(e.type==="DROP_PENDING"){var q=e.payload.reason;t.phase!=="COLLECTING"&&ft(!1);var Y=lt({phase:"DROP_PENDING"},t,{phase:"DROP_PENDING",isWaiting:!0,reason:q});return Y}if(e.type==="DROP_ANIMATE"){var J=e.payload,ne=J.completed,re=J.dropDuration,pe=J.newHomeClientOffset;t.phase==="DRAGGING"||t.phase==="DROP_PENDING"||ft(!1);var ue={phase:"DROP_ANIMATING",completed:ne,dropDuration:re,newHomeClientOffset:pe,dimensions:t.dimensions};return ue}if(e.type==="DROP_COMPLETE"){var xe=e.payload.completed;return{phase:"IDLE",completed:xe,shouldFlush:!1}}return t},z2e=function(e){return{type:"BEFORE_INITIAL_CAPTURE",payload:e}},U2e=function(e){return{type:"LIFT",payload:e}},V2e=function(e){return{type:"INITIAL_PUBLISH",payload:e}},q2e=function(e){return{type:"PUBLISH_WHILE_DRAGGING",payload:e}},H2e=function(){return{type:"COLLECTION_STARTING",payload:null}},W2e=function(e){return{type:"UPDATE_DROPPABLE_SCROLL",payload:e}},G2e=function(e){return{type:"UPDATE_DROPPABLE_IS_ENABLED",payload:e}},K2e=function(e){return{type:"UPDATE_DROPPABLE_IS_COMBINE_ENABLED",payload:e}},cre=function(e){return{type:"MOVE",payload:e}},Y2e=function(e){return{type:"MOVE_BY_WINDOW_SCROLL",payload:e}},X2e=function(e){return{type:"UPDATE_VIEWPORT_MAX_SCROLL",payload:e}},Z2e=function(){return{type:"MOVE_UP",payload:null}},Q2e=function(){return{type:"MOVE_DOWN",payload:null}},J2e=function(){return{type:"MOVE_RIGHT",payload:null}},eNe=function(){return{type:"MOVE_LEFT",payload:null}},j8=function(){return{type:"FLUSH",payload:null}},tNe=function(e){return{type:"DROP_ANIMATE",payload:e}},N8=function(e){return{type:"DROP_COMPLETE",payload:e}},dre=function(e){return{type:"DROP",payload:e}},nNe=function(e){return{type:"DROP_PENDING",payload:e}},ure=function(){return{type:"DROP_ANIMATION_FINISHED",payload:null}},rNe=function(t){return function(e){var n=e.getState,r=e.dispatch;return function(i){return function(a){if(a.type!=="LIFT"){i(a);return}var o=a.payload,l=o.id,c=o.clientSelection,d=o.movementMode,u=n();u.phase==="DROP_ANIMATING"&&r(N8({completed:u.completed})),n().phase!=="IDLE"&&ft(!1),r(j8()),r(z2e({draggableId:l,movementMode:d}));var h={shouldPublishImmediately:d==="SNAP"},f={draggableId:l,scrollOptions:h},m=t.startPublishing(f),v=m.critical,p=m.dimensions,g=m.viewport;r(V2e({critical:v,dimensions:p,clientSelection:c,movementMode:d,viewport:g}))}}}},sNe=function(t){return function(){return function(e){return function(n){n.type==="INITIAL_PUBLISH"&&t.dragging(),n.type==="DROP_ANIMATE"&&t.dropping(n.payload.completed.result.reason),(n.type==="FLUSH"||n.type==="DROP_COMPLETE")&&t.resting(),e(n)}}}},S8={outOfTheWay:"cubic-bezier(0.2, 0, 0, 1)",drop:"cubic-bezier(.2,1,.1,1)"},e2={opacity:{drop:0,combining:.7},scale:{drop:.75}},A8={outOfTheWay:.2,minDropTime:.33,maxDropTime:.55},Ym=A8.outOfTheWay+"s "+S8.outOfTheWay,sj={fluid:"opacity "+Ym,snap:"transform "+Ym+", opacity "+Ym,drop:function(e){var n=e+"s "+S8.drop;return"transform "+n+", opacity "+n},outOfTheWay:"transform "+Ym,placeholder:"height "+Ym+", width "+Ym+", margin "+Ym},HU=function(e){return rm(e,ci)?null:"translate("+e.x+"px, "+e.y+"px)"},xM={moveTo:HU,drop:function(e,n){var r=HU(e);return r?n?r+" scale("+e2.scale.drop+")":r:null}},yM=A8.minDropTime,hre=A8.maxDropTime,iNe=hre-yM,WU=1500,aNe=.6,oNe=function(t){var e=t.current,n=t.destination,r=t.reason,i=Zj(e,n);if(i<=0)return yM;if(i>=WU)return hre;var a=i/WU,o=yM+iNe*a,l=r==="CANCEL"?o*aNe:o;return Number(l.toFixed(2))},lNe=function(t){var e=t.impact,n=t.draggable,r=t.dimensions,i=t.viewport,a=t.afterCritical,o=r.draggables,l=r.droppables,c=Oo(e),d=c?l[c]:null,u=l[n.descriptor.droppableId],h=are({impact:e,draggable:n,draggables:o,afterCritical:a,droppable:d||u,viewport:i}),f=Po(h,n.client.borderBox.center);return f},cNe=function(t){var e=t.draggables,n=t.reason,r=t.lastImpact,i=t.home,a=t.viewport,o=t.onLiftImpact;if(!r.at||n!=="DROP"){var l=ire({draggables:e,impact:o,destination:i,viewport:a,forceShouldAnimate:!0});return{impact:l,didDropInsideDroppable:!1}}if(r.at.type==="REORDER")return{impact:r,didDropInsideDroppable:!0};var c=lt({},r,{displaced:Qj});return{impact:c,didDropInsideDroppable:!0}},dNe=function(t){var e=t.getState,n=t.dispatch;return function(r){return function(i){if(i.type!=="DROP"){r(i);return}var a=e(),o=i.payload.reason;if(a.phase==="COLLECTING"){n(nNe({reason:o}));return}if(a.phase!=="IDLE"){var l=a.phase==="DROP_PENDING"&&a.isWaiting;l&&ft(!1),a.phase==="DRAGGING"||a.phase==="DROP_PENDING"||ft(!1);var c=a.critical,d=a.dimensions,u=d.draggables[a.critical.draggable.id],h=cNe({reason:o,lastImpact:a.impact,afterCritical:a.afterCritical,onLiftImpact:a.onLiftImpact,home:a.dimensions.droppables[a.critical.droppable.id],viewport:a.viewport,draggables:a.dimensions.draggables}),f=h.impact,m=h.didDropInsideDroppable,v=m?g8(f):null,p=m?T3(f):null,g={index:c.draggable.index,droppableId:c.droppable.id},x={draggableId:u.descriptor.id,type:u.descriptor.type,source:g,reason:o,mode:a.movementMode,destination:v,combine:p},y=lNe({impact:f,draggable:u,dimensions:d,viewport:a.viewport,afterCritical:a.afterCritical}),b={critical:a.critical,afterCritical:a.afterCritical,result:x,impact:f},w=!rm(a.current.client.offset,y)||!!x.combine;if(!w){n(N8({completed:b}));return}var N=oNe({current:a.current.client.offset,destination:y,reason:o}),E={newHomeClientOffset:y,dropDuration:N,completed:b};n(tNe(E))}}}},fre=function(){return{x:window.pageXOffset,y:window.pageYOffset}};function uNe(t){return{eventName:"scroll",options:{passive:!0,capture:!1},fn:function(n){n.target!==window&&n.target!==window.document||t()}}}function hNe(t){var e=t.onWindowScroll;function n(){e(fre())}var r=Xj(n),i=uNe(r),a=nm;function o(){return a!==nm}function l(){o()&&ft(!1),a=gl(window,[i])}function c(){o()||ft(!1),r.cancel(),a(),a=nm}return{start:l,stop:c,isActive:o}}var fNe=function(e){return e.type==="DROP_COMPLETE"||e.type==="DROP_ANIMATE"||e.type==="FLUSH"},mNe=function(t){var e=hNe({onWindowScroll:function(r){t.dispatch(Y2e({newScroll:r}))}});return function(n){return function(r){!e.isActive()&&r.type==="INITIAL_PUBLISH"&&e.start(),e.isActive()&&fNe(r)&&e.stop(),n(r)}}},pNe=function(t){var e=!1,n=!1,r=setTimeout(function(){n=!0}),i=function(o){e||n||(e=!0,t(o),clearTimeout(r))};return i.wasCalled=function(){return e},i},gNe=function(){var t=[],e=function(a){var o=p8(t,function(d){return d.timerId===a});o===-1&&ft(!1);var l=t.splice(o,1),c=l[0];c.callback()},n=function(a){var o=setTimeout(function(){return e(o)}),l={timerId:o,callback:a};t.push(l)},r=function(){if(t.length){var a=[].concat(t);t.length=0,a.forEach(function(o){clearTimeout(o.timerId),o.callback()})}};return{add:n,flush:r}},vNe=function(e,n){return e==null&&n==null?!0:e==null||n==null?!1:e.droppableId===n.droppableId&&e.index===n.index},xNe=function(e,n){return e==null&&n==null?!0:e==null||n==null?!1:e.draggableId===n.draggableId&&e.droppableId===n.droppableId},yNe=function(e,n){if(e===n)return!0;var r=e.draggable.id===n.draggable.id&&e.draggable.droppableId===n.draggable.droppableId&&e.draggable.type===n.draggable.type&&e.draggable.index===n.draggable.index,i=e.droppable.id===n.droppable.id&&e.droppable.type===n.droppable.type;return r&&i},rw=function(e,n){n()},hC=function(e,n){return{draggableId:e.draggable.id,type:e.droppable.type,source:{droppableId:e.droppable.id,index:e.draggable.index},mode:n}},L_=function(e,n,r,i){if(!e){r(i(n));return}var a=pNe(r),o={announce:a};e(n,o),a.wasCalled()||r(i(n))},bNe=function(t,e){var n=gNe(),r=null,i=function(f,m){r&&ft(!1),rw("onBeforeCapture",function(){var v=t().onBeforeCapture;if(v){var p={draggableId:f,mode:m};v(p)}})},a=function(f,m){r&&ft(!1),rw("onBeforeDragStart",function(){var v=t().onBeforeDragStart;v&&v(hC(f,m))})},o=function(f,m){r&&ft(!1);var v=hC(f,m);r={mode:m,lastCritical:f,lastLocation:v.source,lastCombine:null},n.add(function(){rw("onDragStart",function(){return L_(t().onDragStart,v,e,DE.onDragStart)})})},l=function(f,m){var v=g8(m),p=T3(m);r||ft(!1);var g=!yNe(f,r.lastCritical);g&&(r.lastCritical=f);var x=!vNe(r.lastLocation,v);x&&(r.lastLocation=v);var y=!xNe(r.lastCombine,p);if(y&&(r.lastCombine=p),!(!g&&!x&&!y)){var b=lt({},hC(f,r.mode),{combine:p,destination:v});n.add(function(){rw("onDragUpdate",function(){return L_(t().onDragUpdate,b,e,DE.onDragUpdate)})})}},c=function(){r||ft(!1),n.flush()},d=function(f){r||ft(!1),r=null,rw("onDragEnd",function(){return L_(t().onDragEnd,f,e,DE.onDragEnd)})},u=function(){if(r){var f=lt({},hC(r.lastCritical,r.mode),{combine:null,destination:null,reason:"CANCEL"});d(f)}};return{beforeCapture:i,beforeStart:a,start:o,update:l,flush:c,drop:d,abort:u}},wNe=function(t,e){var n=bNe(t,e);return function(r){return function(i){return function(a){if(a.type==="BEFORE_INITIAL_CAPTURE"){n.beforeCapture(a.payload.draggableId,a.payload.movementMode);return}if(a.type==="INITIAL_PUBLISH"){var o=a.payload.critical;n.beforeStart(o,a.payload.movementMode),i(a),n.start(o,a.payload.movementMode);return}if(a.type==="DROP_COMPLETE"){var l=a.payload.completed.result;n.flush(),i(a),n.drop(l);return}if(i(a),a.type==="FLUSH"){n.abort();return}var c=r.getState();c.phase==="DRAGGING"&&n.update(c.critical,c.impact)}}}},jNe=function(t){return function(e){return function(n){if(n.type!=="DROP_ANIMATION_FINISHED"){e(n);return}var r=t.getState();r.phase!=="DROP_ANIMATING"&&ft(!1),t.dispatch(N8({completed:r.completed}))}}},NNe=function(t){var e=null,n=null;function r(){n&&(cancelAnimationFrame(n),n=null),e&&(e(),e=null)}return function(i){return function(a){if((a.type==="FLUSH"||a.type==="DROP_COMPLETE"||a.type==="DROP_ANIMATION_FINISHED")&&r(),i(a),a.type==="DROP_ANIMATE"){var o={eventName:"scroll",options:{capture:!0,passive:!1,once:!0},fn:function(){var c=t.getState();c.phase==="DROP_ANIMATING"&&t.dispatch(ure())}};n=requestAnimationFrame(function(){n=null,e=gl(window,[o])})}}}},SNe=function(t){return function(){return function(e){return function(n){(n.type==="DROP_COMPLETE"||n.type==="FLUSH"||n.type==="DROP_ANIMATE")&&t.stopPublishing(),e(n)}}}},ANe=function(t){var e=!1;return function(){return function(n){return function(r){if(r.type==="INITIAL_PUBLISH"){e=!0,t.tryRecordFocus(r.payload.critical.draggable.id),n(r),t.tryRestoreFocusRecorded();return}if(n(r),!!e){if(r.type==="FLUSH"){e=!1,t.tryRestoreFocusRecorded();return}if(r.type==="DROP_COMPLETE"){e=!1;var i=r.payload.completed.result;i.combine&&t.tryShiftRecord(i.draggableId,i.combine.draggableId),t.tryRestoreFocusRecorded()}}}}}},CNe=function(e){return e.type==="DROP_COMPLETE"||e.type==="DROP_ANIMATE"||e.type==="FLUSH"},ENe=function(t){return function(e){return function(n){return function(r){if(CNe(r)){t.stop(),n(r);return}if(r.type==="INITIAL_PUBLISH"){n(r);var i=e.getState();i.phase!=="DRAGGING"&&ft(!1),t.start(i);return}n(r),t.scroll(e.getState())}}}},PNe=function(t){return function(e){return function(n){if(e(n),n.type==="PUBLISH_WHILE_DRAGGING"){var r=t.getState();r.phase==="DROP_PENDING"&&(r.isWaiting||t.dispatch(dre({reason:r.reason})))}}}},TNe=gne,INe=function(t){var e=t.dimensionMarshal,n=t.focusMarshal,r=t.styleMarshal,i=t.getResponders,a=t.announce,o=t.autoScroller;return pne(B2e,TNe(uwe(sNe(r),SNe(e),rNe(e),dNe,jNe,NNe,PNe,ENe(o),mNe,ANe(n),wNe(i,a))))},R_=function(){return{additions:{},removals:{},modified:{}}};function DNe(t){var e=t.registry,n=t.callbacks,r=R_(),i=null,a=function(){i||(n.collectionStarting(),i=requestAnimationFrame(function(){i=null;var u=r,h=u.additions,f=u.removals,m=u.modified,v=Object.keys(h).map(function(x){return e.draggable.getById(x).getDimension(ci)}).sort(function(x,y){return x.descriptor.index-y.descriptor.index}),p=Object.keys(m).map(function(x){var y=e.droppable.getById(x),b=y.callbacks.getScrollWhileDragging();return{droppableId:x,scroll:b}}),g={additions:v,removals:Object.keys(f),modified:p};r=R_(),n.publish(g)}))},o=function(u){var h=u.descriptor.id;r.additions[h]=u,r.modified[u.descriptor.droppableId]=!0,r.removals[h]&&delete r.removals[h],a()},l=function(u){var h=u.descriptor;r.removals[h.id]=!0,r.modified[h.droppableId]=!0,r.additions[h.id]&&delete r.additions[h.id],a()},c=function(){i&&(cancelAnimationFrame(i),i=null,r=R_())};return{add:o,remove:l,stop:c}}var mre=function(t){var e=t.scrollHeight,n=t.scrollWidth,r=t.height,i=t.width,a=Po({x:n,y:e},{x:i,y:r}),o={x:Math.max(0,a.x),y:Math.max(0,a.y)};return o},pre=function(){var t=document.documentElement;return t||ft(!1),t},gre=function(){var t=pre(),e=mre({scrollHeight:t.scrollHeight,scrollWidth:t.scrollWidth,width:t.clientWidth,height:t.clientHeight});return e},kNe=function(){var t=fre(),e=gre(),n=t.y,r=t.x,i=pre(),a=i.clientWidth,o=i.clientHeight,l=r+a,c=n+o,d=dc({top:n,left:r,right:l,bottom:c}),u={frame:d,scroll:{initial:t,current:t,max:e,diff:{value:ci,displacement:ci}}};return u},_Ne=function(t){var e=t.critical,n=t.scrollOptions,r=t.registry,i=kNe(),a=i.scroll.current,o=e.droppable,l=r.droppable.getAllByType(o.type).map(function(h){return h.callbacks.getDimensionAndWatchScroll(a,n)}),c=r.draggable.getAllByType(e.draggable.type).map(function(h){return h.getDimension(a)}),d={draggables:Hne(c),droppables:qne(l)},u={dimensions:d,critical:e,viewport:i};return u};function GU(t,e,n){if(n.descriptor.id===e.id||n.descriptor.type!==e.type)return!1;var r=t.droppable.getById(n.descriptor.droppableId);return r.descriptor.mode==="virtual"}var ONe=function(t,e){var n=null,r=DNe({callbacks:{publish:e.publishWhileDragging,collectionStarting:e.collectionStarting},registry:t}),i=function(m,v){t.droppable.exists(m)||ft(!1),n&&e.updateDroppableIsEnabled({id:m,isEnabled:v})},a=function(m,v){n&&(t.droppable.exists(m)||ft(!1),e.updateDroppableIsCombineEnabled({id:m,isCombineEnabled:v}))},o=function(m,v){n&&(t.droppable.exists(m)||ft(!1),e.updateDroppableScroll({id:m,newScroll:v}))},l=function(m,v){n&&t.droppable.getById(m).callbacks.scroll(v)},c=function(){if(n){r.stop();var m=n.critical.droppable;t.droppable.getAllByType(m.type).forEach(function(v){return v.callbacks.dragStopped()}),n.unsubscribe(),n=null}},d=function(m){n||ft(!1);var v=n.critical.draggable;m.type==="ADDITION"&&GU(t,v,m.value)&&r.add(m.value),m.type==="REMOVAL"&&GU(t,v,m.value)&&r.remove(m.value)},u=function(m){n&&ft(!1);var v=t.draggable.getById(m.draggableId),p=t.droppable.getById(v.descriptor.droppableId),g={draggable:v.descriptor,droppable:p.descriptor},x=t.subscribe(d);return n={critical:g,unsubscribe:x},_Ne({critical:g,registry:t,scrollOptions:m.scrollOptions})},h={updateDroppableIsEnabled:i,updateDroppableIsCombineEnabled:a,scrollDroppable:l,updateDroppableScroll:o,startPublishing:u,stopPublishing:c};return h},vre=function(t,e){return t.phase==="IDLE"?!0:t.phase!=="DROP_ANIMATING"||t.completed.result.draggableId===e?!1:t.completed.result.reason==="DROP"},LNe=function(t){window.scrollBy(t.x,t.y)},RNe=oi(function(t){return P3(t).filter(function(e){return!(!e.isEnabled||!e.frame)})}),MNe=function(e,n){var r=Dm(RNe(n),function(i){return i.frame||ft(!1),tre(i.frame.pageMarginBox)(e)});return r},FNe=function(t){var e=t.center,n=t.destination,r=t.droppables;if(n){var i=r[n];return i.frame?i:null}var a=MNe(e,r);return a},sm={startFromPercentage:.25,maxScrollAtPercentage:.05,maxPixelScroll:28,ease:function(e){return Math.pow(e,2)},durationDampening:{stopDampeningAt:1200,accelerateAt:360}},$Ne=function(t,e){var n=t[e.size]*sm.startFromPercentage,r=t[e.size]*sm.maxScrollAtPercentage,i={startScrollingFrom:n,maxScrollValueAt:r};return i},xre=function(t){var e=t.startOfRange,n=t.endOfRange,r=t.current,i=n-e;if(i===0)return 0;var a=r-e,o=a/i;return o},C8=1,BNe=function(t,e){if(t>e.startScrollingFrom)return 0;if(t<=e.maxScrollValueAt)return sm.maxPixelScroll;if(t===e.startScrollingFrom)return C8;var n=xre({startOfRange:e.maxScrollValueAt,endOfRange:e.startScrollingFrom,current:t}),r=1-n,i=sm.maxPixelScroll*sm.ease(r);return Math.ceil(i)},KU=sm.durationDampening.accelerateAt,YU=sm.durationDampening.stopDampeningAt,zNe=function(t,e){var n=e,r=YU,i=Date.now(),a=i-n;if(a>=YU)return t;if(a<KU)return C8;var o=xre({startOfRange:KU,endOfRange:r,current:a}),l=t*sm.ease(o);return Math.ceil(l)},XU=function(t){var e=t.distanceToEdge,n=t.thresholds,r=t.dragStartTime,i=t.shouldUseTimeDampening,a=BNe(e,n);return a===0?0:i?Math.max(zNe(a,r),C8):a},ZU=function(t){var e=t.container,n=t.distanceToEdges,r=t.dragStartTime,i=t.axis,a=t.shouldUseTimeDampening,o=$Ne(e,i),l=n[i.end]<n[i.start];return l?XU({distanceToEdge:n[i.end],thresholds:o,dragStartTime:r,shouldUseTimeDampening:a}):-1*XU({distanceToEdge:n[i.start],thresholds:o,dragStartTime:r,shouldUseTimeDampening:a})},UNe=function(t){var e=t.container,n=t.subject,r=t.proposedScroll,i=n.height>e.height,a=n.width>e.width;return!a&&!i?r:a&&i?null:{x:a?0:r.x,y:i?0:r.y}},VNe=Une(function(t){return t===0?0:t}),yre=function(t){var e=t.dragStartTime,n=t.container,r=t.subject,i=t.center,a=t.shouldUseTimeDampening,o={top:i.y-n.top,right:n.right-i.x,bottom:n.bottom-i.y,left:i.x-n.left},l=ZU({container:n,distanceToEdges:o,dragStartTime:e,axis:v8,shouldUseTimeDampening:a}),c=ZU({container:n,distanceToEdges:o,dragStartTime:e,axis:Kne,shouldUseTimeDampening:a}),d=VNe({x:c,y:l});if(rm(d,ci))return null;var u=UNe({container:n,subject:r,proposedScroll:d});return u?rm(u,ci)?null:u:null},qNe=Une(function(t){return t===0?0:t>0?1:-1}),E8=function(){var t=function(n,r){return n<0?n:n>r?n-r:0};return function(e){var n=e.current,r=e.max,i=e.change,a=Ei(n,i),o={x:t(a.x,r.x),y:t(a.y,r.y)};return rm(o,ci)?null:o}}(),bre=function(e){var n=e.max,r=e.current,i=e.change,a={x:Math.max(r.x,n.x),y:Math.max(r.y,n.y)},o=qNe(i),l=E8({max:a,current:r,change:o});return!l||o.x!==0&&l.x===0||o.y!==0&&l.y===0},P8=function(e,n){return bre({current:e.scroll.current,max:e.scroll.max,change:n})},HNe=function(e,n){if(!P8(e,n))return null;var r=e.scroll.max,i=e.scroll.current;return E8({current:i,max:r,change:n})},T8=function(e,n){var r=e.frame;return r?bre({current:r.scroll.current,max:r.scroll.max,change:n}):!1},WNe=function(e,n){var r=e.frame;return!r||!T8(e,n)?null:E8({current:r.scroll.current,max:r.scroll.max,change:n})},GNe=function(t){var e=t.viewport,n=t.subject,r=t.center,i=t.dragStartTime,a=t.shouldUseTimeDampening,o=yre({dragStartTime:i,container:e.frame,subject:n,center:r,shouldUseTimeDampening:a});return o&&P8(e,o)?o:null},KNe=function(t){var e=t.droppable,n=t.subject,r=t.center,i=t.dragStartTime,a=t.shouldUseTimeDampening,o=e.frame;if(!o)return null;var l=yre({dragStartTime:i,container:o.pageMarginBox,subject:n,center:r,shouldUseTimeDampening:a});return l&&T8(e,l)?l:null},QU=function(t){var e=t.state,n=t.dragStartTime,r=t.shouldUseTimeDampening,i=t.scrollWindow,a=t.scrollDroppable,o=e.current.page.borderBoxCenter,l=e.dimensions.draggables[e.critical.draggable.id],c=l.page.marginBox;if(e.isWindowScrollAllowed){var d=e.viewport,u=GNe({dragStartTime:n,viewport:d,subject:c,center:o,shouldUseTimeDampening:r});if(u){i(u);return}}var h=FNe({center:o,destination:Oo(e.impact),droppables:e.dimensions.droppables});if(h){var f=KNe({dragStartTime:n,droppable:h,subject:c,center:o,shouldUseTimeDampening:r});f&&a(h.descriptor.id,f)}},YNe=function(t){var e=t.scrollWindow,n=t.scrollDroppable,r=Xj(e),i=Xj(n),a=null,o=function(u){a||ft(!1);var h=a,f=h.shouldUseTimeDampening,m=h.dragStartTime;QU({state:u,scrollWindow:r,scrollDroppable:i,dragStartTime:m,shouldUseTimeDampening:f})},l=function(u){a&&ft(!1);var h=Date.now(),f=!1,m=function(){f=!0};QU({state:u,dragStartTime:0,shouldUseTimeDampening:!1,scrollWindow:m,scrollDroppable:m}),a={dragStartTime:h,shouldUseTimeDampening:f},f&&o(u)},c=function(){a&&(r.cancel(),i.cancel(),a=null)};return{start:l,stop:c,scroll:o}},XNe=function(t){var e=t.move,n=t.scrollDroppable,r=t.scrollWindow,i=function(d,u){var h=Ei(d.current.client.selection,u);e({client:h})},a=function(d,u){if(!T8(d,u))return u;var h=WNe(d,u);if(!h)return n(d.descriptor.id,u),null;var f=Po(u,h);n(d.descriptor.id,f);var m=Po(u,f);return m},o=function(d,u,h){if(!d||!P8(u,h))return h;var f=HNe(u,h);if(!f)return r(h),null;var m=Po(h,f);r(m);var v=Po(h,m);return v},l=function(d){var u=d.scrollJumpRequest;if(u){var h=Oo(d.impact);h||ft(!1);var f=a(d.dimensions.droppables[h],u);if(f){var m=d.viewport,v=o(d.isWindowScrollAllowed,m,f);v&&i(d,v)}}};return l},ZNe=function(t){var e=t.scrollDroppable,n=t.scrollWindow,r=t.move,i=YNe({scrollWindow:n,scrollDroppable:e}),a=XNe({move:r,scrollWindow:n,scrollDroppable:e}),o=function(d){if(d.phase==="DRAGGING"){if(d.movementMode==="FLUID"){i.scroll(d);return}d.scrollJumpRequest&&a(d)}},l={scroll:o,start:i.start,stop:i.stop};return l},cb="data-rbd",db=function(){var t=cb+"-drag-handle";return{base:t,draggableId:t+"-draggable-id",contextId:t+"-context-id"}}(),bM=function(){var t=cb+"-draggable";return{base:t,contextId:t+"-context-id",id:t+"-id"}}(),QNe=function(){var t=cb+"-droppable";return{base:t,contextId:t+"-context-id",id:t+"-id"}}(),JU={contextId:cb+"-scroll-container-context-id"},JNe=function(e){return function(n){return"["+n+'="'+e+'"]'}},sw=function(e,n){return e.map(function(r){var i=r.styles[n];return i?r.selector+" { "+i+" }":""}).join(" ")},eSe="pointer-events: none;",tSe=function(t){var e=JNe(t),n=function(){var l=`
      cursor: -webkit-grab;
      cursor: grab;
    `;return{selector:e(db.contextId),styles:{always:`
          -webkit-touch-callout: none;
          -webkit-tap-highlight-color: rgba(0,0,0,0);
          touch-action: manipulation;
        `,resting:l,dragging:eSe,dropAnimating:l}}}(),r=function(){var l=`
      transition: `+sj.outOfTheWay+`;
    `;return{selector:e(bM.contextId),styles:{dragging:l,dropAnimating:l,userCancel:l}}}(),i={selector:e(QNe.contextId),styles:{always:"overflow-anchor: none;"}},a={selector:"body",styles:{dragging:`
        cursor: grabbing;
        cursor: -webkit-grabbing;
        user-select: none;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        overflow-anchor: none;
      `}},o=[r,n,i,a];return{always:sw(o,"always"),resting:sw(o,"resting"),dragging:sw(o,"dragging"),dropAnimating:sw(o,"dropAnimating"),userCancel:sw(o,"userCancel")}},Lo=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?A.useLayoutEffect:A.useEffect,M_=function(){var e=document.querySelector("head");return e||ft(!1),e},eV=function(e){var n=document.createElement("style");return e&&n.setAttribute("nonce",e),n.type="text/css",n};function nSe(t,e){var n=kn(function(){return tSe(t)},[t]),r=A.useRef(null),i=A.useRef(null),a=Mt(oi(function(h){var f=i.current;f||ft(!1),f.textContent=h}),[]),o=Mt(function(h){var f=r.current;f||ft(!1),f.textContent=h},[]);Lo(function(){!r.current&&!i.current||ft(!1);var h=eV(e),f=eV(e);return r.current=h,i.current=f,h.setAttribute(cb+"-always",t),f.setAttribute(cb+"-dynamic",t),M_().appendChild(h),M_().appendChild(f),o(n.always),a(n.resting),function(){var m=function(p){var g=p.current;g||ft(!1),M_().removeChild(g),p.current=null};m(r),m(i)}},[e,o,a,n.always,n.resting,t]);var l=Mt(function(){return a(n.dragging)},[a,n.dragging]),c=Mt(function(h){if(h==="DROP"){a(n.dropAnimating);return}a(n.userCancel)},[a,n.dropAnimating,n.userCancel]),d=Mt(function(){i.current&&a(n.resting)},[a,n.resting]),u=kn(function(){return{dragging:l,dropping:c,resting:d}},[l,c,d]);return u}var wre=function(t){return t&&t.ownerDocument?t.ownerDocument.defaultView:window};function k3(t){return t instanceof wre(t).HTMLElement}function rSe(t,e){var n="["+db.contextId+'="'+t+'"]',r=Vne(document.querySelectorAll(n));if(!r.length)return null;var i=Dm(r,function(a){return a.getAttribute(db.draggableId)===e});return!i||!k3(i)?null:i}function sSe(t){var e=A.useRef({}),n=A.useRef(null),r=A.useRef(null),i=A.useRef(!1),a=Mt(function(f,m){var v={id:f,focus:m};return e.current[f]=v,function(){var g=e.current,x=g[f];x!==v&&delete g[f]}},[]),o=Mt(function(f){var m=rSe(t,f);m&&m!==document.activeElement&&m.focus()},[t]),l=Mt(function(f,m){n.current===f&&(n.current=m)},[]),c=Mt(function(){r.current||i.current&&(r.current=requestAnimationFrame(function(){r.current=null;var f=n.current;f&&o(f)}))},[o]),d=Mt(function(f){n.current=null;var m=document.activeElement;m&&m.getAttribute(db.draggableId)===f&&(n.current=f)},[]);Lo(function(){return i.current=!0,function(){i.current=!1;var f=r.current;f&&cancelAnimationFrame(f)}},[]);var u=kn(function(){return{register:a,tryRecordFocus:d,tryRestoreFocusRecorded:c,tryShiftRecord:l}},[a,d,c,l]);return u}function iSe(){var t={draggables:{},droppables:{}},e=[];function n(h){return e.push(h),function(){var m=e.indexOf(h);m!==-1&&e.splice(m,1)}}function r(h){e.length&&e.forEach(function(f){return f(h)})}function i(h){return t.draggables[h]||null}function a(h){var f=i(h);return f||ft(!1),f}var o={register:function(f){t.draggables[f.descriptor.id]=f,r({type:"ADDITION",value:f})},update:function(f,m){var v=t.draggables[m.descriptor.id];v&&v.uniqueId===f.uniqueId&&(delete t.draggables[m.descriptor.id],t.draggables[f.descriptor.id]=f)},unregister:function(f){var m=f.descriptor.id,v=i(m);v&&f.uniqueId===v.uniqueId&&(delete t.draggables[m],r({type:"REMOVAL",value:f}))},getById:a,findById:i,exists:function(f){return!!i(f)},getAllByType:function(f){return EP(t.draggables).filter(function(m){return m.descriptor.type===f})}};function l(h){return t.droppables[h]||null}function c(h){var f=l(h);return f||ft(!1),f}var d={register:function(f){t.droppables[f.descriptor.id]=f},unregister:function(f){var m=l(f.descriptor.id);m&&f.uniqueId===m.uniqueId&&delete t.droppables[f.descriptor.id]},getById:c,findById:l,exists:function(f){return!!l(f)},getAllByType:function(f){return EP(t.droppables).filter(function(m){return m.descriptor.type===f})}};function u(){t.draggables={},t.droppables={},e.length=0}return{draggable:o,droppable:d,subscribe:n,clean:u}}function aSe(){var t=kn(iSe,[]);return A.useEffect(function(){return function(){requestAnimationFrame(t.clean)}},[t]),t}var I8=ge.createContext(null),TP=function(){var t=document.body;return t||ft(!1),t},oSe={position:"absolute",width:"1px",height:"1px",margin:"-1px",border:"0",padding:"0",overflow:"hidden",clip:"rect(0 0 0 0)","clip-path":"inset(100%)"},lSe=function(e){return"rbd-announcement-"+e};function cSe(t){var e=kn(function(){return lSe(t)},[t]),n=A.useRef(null);A.useEffect(function(){var a=document.createElement("div");return n.current=a,a.id=e,a.setAttribute("aria-live","assertive"),a.setAttribute("aria-atomic","true"),lt(a.style,oSe),TP().appendChild(a),function(){setTimeout(function(){var c=TP();c.contains(a)&&c.removeChild(a),a===n.current&&(n.current=null)})}},[e]);var r=Mt(function(i){var a=n.current;if(a){a.textContent=i;return}},[]);return r}var dSe=0,uSe={separator:"::"};function D8(t,e){return e===void 0&&(e=uSe),kn(function(){return""+t+e.separator+dSe++},[e.separator,t])}function hSe(t){var e=t.contextId,n=t.uniqueId;return"rbd-hidden-text-"+e+"-"+n}function fSe(t){var e=t.contextId,n=t.text,r=D8("hidden-text",{separator:"-"}),i=kn(function(){return hSe({contextId:e,uniqueId:r})},[r,e]);return A.useEffect(function(){var o=document.createElement("div");return o.id=i,o.textContent=n,o.style.display="none",TP().appendChild(o),function(){var c=TP();c.contains(o)&&c.removeChild(o)}},[i,n]),i}var _3=ge.createContext(null);function jre(t){var e=A.useRef(t);return A.useEffect(function(){e.current=t}),e}function mSe(){var t=null;function e(){return!!t}function n(o){return o===t}function r(o){t&&ft(!1);var l={abandon:o};return t=l,l}function i(){t||ft(!1),t=null}function a(){t&&(t.abandon(),i())}return{isClaimed:e,isActive:n,claim:r,release:i,tryAbandon:a}}var pSe=9,gSe=13,k8=27,Nre=32,vSe=33,xSe=34,ySe=35,bSe=36,wSe=37,jSe=38,NSe=39,SSe=40,fC,ASe=(fC={},fC[gSe]=!0,fC[pSe]=!0,fC),Sre=function(t){ASe[t.keyCode]&&t.preventDefault()},O3=function(){var t="visibilitychange";if(typeof document>"u")return t;var e=[t,"ms"+t,"webkit"+t,"moz"+t,"o"+t],n=Dm(e,function(r){return"on"+r in document});return n||t}(),Are=0,tV=5;function CSe(t,e){return Math.abs(e.x-t.x)>=tV||Math.abs(e.y-t.y)>=tV}var nV={type:"IDLE"};function ESe(t){var e=t.cancel,n=t.completed,r=t.getPhase,i=t.setPhase;return[{eventName:"mousemove",fn:function(o){var l=o.button,c=o.clientX,d=o.clientY;if(l===Are){var u={x:c,y:d},h=r();if(h.type==="DRAGGING"){o.preventDefault(),h.actions.move(u);return}h.type!=="PENDING"&&ft(!1);var f=h.point;if(CSe(f,u)){o.preventDefault();var m=h.actions.fluidLift(u);i({type:"DRAGGING",actions:m})}}}},{eventName:"mouseup",fn:function(o){var l=r();if(l.type!=="DRAGGING"){e();return}o.preventDefault(),l.actions.drop({shouldBlockNextClick:!0}),n()}},{eventName:"mousedown",fn:function(o){r().type==="DRAGGING"&&o.preventDefault(),e()}},{eventName:"keydown",fn:function(o){var l=r();if(l.type==="PENDING"){e();return}if(o.keyCode===k8){o.preventDefault(),e();return}Sre(o)}},{eventName:"resize",fn:e},{eventName:"scroll",options:{passive:!0,capture:!1},fn:function(){r().type==="PENDING"&&e()}},{eventName:"webkitmouseforcedown",fn:function(o){var l=r();if(l.type==="IDLE"&&ft(!1),l.actions.shouldRespectForcePress()){e();return}o.preventDefault()}},{eventName:O3,fn:e}]}function PSe(t){var e=A.useRef(nV),n=A.useRef(nm),r=kn(function(){return{eventName:"mousedown",fn:function(h){if(!h.defaultPrevented&&h.button===Are&&!(h.ctrlKey||h.metaKey||h.shiftKey||h.altKey)){var f=t.findClosestDraggableId(h);if(f){var m=t.tryGetLock(f,o,{sourceEvent:h});if(m){h.preventDefault();var v={x:h.clientX,y:h.clientY};n.current(),d(m,v)}}}}}},[t]),i=kn(function(){return{eventName:"webkitmouseforcewillbegin",fn:function(h){if(!h.defaultPrevented){var f=t.findClosestDraggableId(h);if(f){var m=t.findOptionsForDraggable(f);m&&(m.shouldRespectForcePress||t.canGetLock(f)&&h.preventDefault())}}}}},[t]),a=Mt(function(){var h={passive:!1,capture:!0};n.current=gl(window,[i,r],h)},[i,r]),o=Mt(function(){var u=e.current;u.type!=="IDLE"&&(e.current=nV,n.current(),a())},[a]),l=Mt(function(){var u=e.current;o(),u.type==="DRAGGING"&&u.actions.cancel({shouldBlockNextClick:!0}),u.type==="PENDING"&&u.actions.abort()},[o]),c=Mt(function(){var h={capture:!0,passive:!1},f=ESe({cancel:l,completed:o,getPhase:function(){return e.current},setPhase:function(v){e.current=v}});n.current=gl(window,f,h)},[l,o]),d=Mt(function(h,f){e.current.type!=="IDLE"&&ft(!1),e.current={type:"PENDING",point:f,actions:h},c()},[c]);Lo(function(){return a(),function(){n.current()}},[a])}var xx;function TSe(){}var ISe=(xx={},xx[xSe]=!0,xx[vSe]=!0,xx[bSe]=!0,xx[ySe]=!0,xx);function DSe(t,e){function n(){e(),t.cancel()}function r(){e(),t.drop()}return[{eventName:"keydown",fn:function(a){if(a.keyCode===k8){a.preventDefault(),n();return}if(a.keyCode===Nre){a.preventDefault(),r();return}if(a.keyCode===SSe){a.preventDefault(),t.moveDown();return}if(a.keyCode===jSe){a.preventDefault(),t.moveUp();return}if(a.keyCode===NSe){a.preventDefault(),t.moveRight();return}if(a.keyCode===wSe){a.preventDefault(),t.moveLeft();return}if(ISe[a.keyCode]){a.preventDefault();return}Sre(a)}},{eventName:"mousedown",fn:n},{eventName:"mouseup",fn:n},{eventName:"click",fn:n},{eventName:"touchstart",fn:n},{eventName:"resize",fn:n},{eventName:"wheel",fn:n,options:{passive:!0}},{eventName:O3,fn:n}]}function kSe(t){var e=A.useRef(TSe),n=kn(function(){return{eventName:"keydown",fn:function(a){if(a.defaultPrevented||a.keyCode!==Nre)return;var o=t.findClosestDraggableId(a);if(!o)return;var l=t.tryGetLock(o,u,{sourceEvent:a});if(!l)return;a.preventDefault();var c=!0,d=l.snapLift();e.current();function u(){c||ft(!1),c=!1,e.current(),r()}e.current=gl(window,DSe(d,u),{capture:!0,passive:!1})}}},[t]),r=Mt(function(){var a={passive:!1,capture:!0};e.current=gl(window,[n],a)},[n]);Lo(function(){return r(),function(){e.current()}},[r])}var F_={type:"IDLE"},_Se=120,OSe=.15;function LSe(t){var e=t.cancel,n=t.getPhase;return[{eventName:"orientationchange",fn:e},{eventName:"resize",fn:e},{eventName:"contextmenu",fn:function(i){i.preventDefault()}},{eventName:"keydown",fn:function(i){if(n().type!=="DRAGGING"){e();return}i.keyCode===k8&&i.preventDefault(),e()}},{eventName:O3,fn:e}]}function RSe(t){var e=t.cancel,n=t.completed,r=t.getPhase;return[{eventName:"touchmove",options:{capture:!1},fn:function(a){var o=r();if(o.type!=="DRAGGING"){e();return}o.hasMoved=!0;var l=a.touches[0],c=l.clientX,d=l.clientY,u={x:c,y:d};a.preventDefault(),o.actions.move(u)}},{eventName:"touchend",fn:function(a){var o=r();if(o.type!=="DRAGGING"){e();return}a.preventDefault(),o.actions.drop({shouldBlockNextClick:!0}),n()}},{eventName:"touchcancel",fn:function(a){if(r().type!=="DRAGGING"){e();return}a.preventDefault(),e()}},{eventName:"touchforcechange",fn:function(a){var o=r();o.type==="IDLE"&&ft(!1);var l=a.touches[0];if(l){var c=l.force>=OSe;if(c){var d=o.actions.shouldRespectForcePress();if(o.type==="PENDING"){d&&e();return}if(d){if(o.hasMoved){a.preventDefault();return}e();return}a.preventDefault()}}}},{eventName:O3,fn:e}]}function MSe(t){var e=A.useRef(F_),n=A.useRef(nm),r=Mt(function(){return e.current},[]),i=Mt(function(m){e.current=m},[]),a=kn(function(){return{eventName:"touchstart",fn:function(m){if(!m.defaultPrevented){var v=t.findClosestDraggableId(m);if(v){var p=t.tryGetLock(v,l,{sourceEvent:m});if(p){var g=m.touches[0],x=g.clientX,y=g.clientY,b={x,y};n.current(),h(p,b)}}}}}},[t]),o=Mt(function(){var m={capture:!0,passive:!1};n.current=gl(window,[a],m)},[a]),l=Mt(function(){var f=e.current;f.type!=="IDLE"&&(f.type==="PENDING"&&clearTimeout(f.longPressTimerId),i(F_),n.current(),o())},[o,i]),c=Mt(function(){var f=e.current;l(),f.type==="DRAGGING"&&f.actions.cancel({shouldBlockNextClick:!0}),f.type==="PENDING"&&f.actions.abort()},[l]),d=Mt(function(){var m={capture:!0,passive:!1},v={cancel:c,completed:l,getPhase:r},p=gl(window,RSe(v),m),g=gl(window,LSe(v),m);n.current=function(){p(),g()}},[c,r,l]),u=Mt(function(){var m=r();m.type!=="PENDING"&&ft(!1);var v=m.actions.fluidLift(m.point);i({type:"DRAGGING",actions:v,hasMoved:!1})},[r,i]),h=Mt(function(m,v){r().type!=="IDLE"&&ft(!1);var p=setTimeout(u,_Se);i({type:"PENDING",point:v,actions:m,longPressTimerId:p}),d()},[d,r,i,u]);Lo(function(){return o(),function(){n.current();var v=r();v.type==="PENDING"&&(clearTimeout(v.longPressTimerId),i(F_))}},[r,o,i]),Lo(function(){var m=gl(window,[{eventName:"touchmove",fn:function(){},options:{capture:!1,passive:!1}}]);return m},[])}var FSe={input:!0,button:!0,textarea:!0,select:!0,option:!0,optgroup:!0,video:!0,audio:!0};function Cre(t,e){if(e==null)return!1;var n=!!FSe[e.tagName.toLowerCase()];if(n)return!0;var r=e.getAttribute("contenteditable");return r==="true"||r===""?!0:e===t?!1:Cre(t,e.parentElement)}function $Se(t,e){var n=e.target;return k3(n)?Cre(t,n):!1}var BSe=function(t){return dc(t.getBoundingClientRect()).center};function zSe(t){return t instanceof wre(t).Element}var USe=function(){var t="matches";if(typeof document>"u")return t;var e=[t,"msMatchesSelector","webkitMatchesSelector"],n=Dm(e,function(r){return r in Element.prototype});return n||t}();function Ere(t,e){return t==null?null:t[USe](e)?t:Ere(t.parentElement,e)}function VSe(t,e){return t.closest?t.closest(e):Ere(t,e)}function qSe(t){return"["+db.contextId+'="'+t+'"]'}function HSe(t,e){var n=e.target;if(!zSe(n))return null;var r=qSe(t),i=VSe(n,r);return!i||!k3(i)?null:i}function WSe(t,e){var n=HSe(t,e);return n?n.getAttribute(db.draggableId):null}function GSe(t,e){var n="["+bM.contextId+'="'+t+'"]',r=Vne(document.querySelectorAll(n)),i=Dm(r,function(a){return a.getAttribute(bM.id)===e});return!i||!k3(i)?null:i}function KSe(t){t.preventDefault()}function mC(t){var e=t.expected,n=t.phase,r=t.isLockActive;return t.shouldWarn,!(!r()||e!==n)}function Pre(t){var e=t.lockAPI,n=t.store,r=t.registry,i=t.draggableId;if(e.isClaimed())return!1;var a=r.draggable.findById(i);return!(!a||!a.options.isEnabled||!vre(n.getState(),i))}function YSe(t){var e=t.lockAPI,n=t.contextId,r=t.store,i=t.registry,a=t.draggableId,o=t.forceSensorStop,l=t.sourceEvent,c=Pre({lockAPI:e,store:r,registry:i,draggableId:a});if(!c)return null;var d=i.draggable.getById(a),u=GSe(n,d.descriptor.id);if(!u||l&&!d.options.canDragInteractiveElements&&$Se(u,l))return null;var h=e.claim(o||nm),f="PRE_DRAG";function m(){return d.options.shouldRespectForcePress}function v(){return e.isActive(h)}function p(E,C){mC({expected:E,phase:f,isLockActive:v,shouldWarn:!0})&&r.dispatch(C())}var g=p.bind(null,"DRAGGING");function x(E){function C(){e.release(),f="COMPLETED"}f!=="PRE_DRAG"&&(C(),f!=="PRE_DRAG"&&ft(!1)),r.dispatch(U2e(E.liftActionArgs)),f="DRAGGING";function j(I,k){if(k===void 0&&(k={shouldBlockNextClick:!1}),E.cleanup(),k.shouldBlockNextClick){var D=gl(window,[{eventName:"click",fn:KSe,options:{once:!0,passive:!1,capture:!0}}]);setTimeout(D)}C(),r.dispatch(dre({reason:I}))}return lt({isActive:function(){return mC({expected:"DRAGGING",phase:f,isLockActive:v,shouldWarn:!1})},shouldRespectForcePress:m,drop:function(k){return j("DROP",k)},cancel:function(k){return j("CANCEL",k)}},E.actions)}function y(E){var C=Xj(function(I){g(function(){return cre({client:I})})}),j=x({liftActionArgs:{id:a,clientSelection:E,movementMode:"FLUID"},cleanup:function(){return C.cancel()},actions:{move:C}});return lt({},j,{move:C})}function b(){var E={moveUp:function(){return g(Z2e)},moveRight:function(){return g(J2e)},moveDown:function(){return g(Q2e)},moveLeft:function(){return g(eNe)}};return x({liftActionArgs:{id:a,clientSelection:BSe(u),movementMode:"SNAP"},cleanup:nm,actions:E})}function w(){var E=mC({expected:"PRE_DRAG",phase:f,isLockActive:v,shouldWarn:!0});E&&e.release()}var N={isActive:function(){return mC({expected:"PRE_DRAG",phase:f,isLockActive:v,shouldWarn:!1})},shouldRespectForcePress:m,fluidLift:y,snapLift:b,abort:w};return N}var XSe=[PSe,kSe,MSe];function ZSe(t){var e=t.contextId,n=t.store,r=t.registry,i=t.customSensors,a=t.enableDefaultSensors,o=[].concat(a?XSe:[],i||[]),l=A.useState(function(){return mSe()})[0],c=Mt(function(y,b){y.isDragging&&!b.isDragging&&l.tryAbandon()},[l]);Lo(function(){var y=n.getState(),b=n.subscribe(function(){var w=n.getState();c(y,w),y=w});return b},[l,n,c]),Lo(function(){return l.tryAbandon},[l.tryAbandon]);for(var d=Mt(function(x){return Pre({lockAPI:l,registry:r,store:n,draggableId:x})},[l,r,n]),u=Mt(function(x,y,b){return YSe({lockAPI:l,registry:r,contextId:e,store:n,draggableId:x,forceSensorStop:y,sourceEvent:b&&b.sourceEvent?b.sourceEvent:null})},[e,l,r,n]),h=Mt(function(x){return WSe(e,x)},[e]),f=Mt(function(x){var y=r.draggable.findById(x);return y?y.options:null},[r.draggable]),m=Mt(function(){l.isClaimed()&&(l.tryAbandon(),n.getState().phase!=="IDLE"&&n.dispatch(j8()))},[l,n]),v=Mt(l.isClaimed,[l]),p=kn(function(){return{canGetLock:d,tryGetLock:u,findClosestDraggableId:h,findOptionsForDraggable:f,tryReleaseLock:m,isLockClaimed:v}},[d,u,h,f,m,v]),g=0;g<o.length;g++)o[g](p)}var QSe=function(e){return{onBeforeCapture:e.onBeforeCapture,onBeforeDragStart:e.onBeforeDragStart,onDragStart:e.onDragStart,onDragEnd:e.onDragEnd,onDragUpdate:e.onDragUpdate}};function iw(t){return t.current||ft(!1),t.current}function JSe(t){var e=t.contextId,n=t.setCallbacks,r=t.sensors,i=t.nonce,a=t.dragHandleUsageInstructions,o=A.useRef(null),l=jre(t),c=Mt(function(){return QSe(l.current)},[l]),d=cSe(e),u=fSe({contextId:e,text:a}),h=nSe(e,i),f=Mt(function(I){iw(o).dispatch(I)},[]),m=kn(function(){return AU({publishWhileDragging:q2e,updateDroppableScroll:W2e,updateDroppableIsEnabled:G2e,updateDroppableIsCombineEnabled:K2e,collectionStarting:H2e},f)},[f]),v=aSe(),p=kn(function(){return ONe(v,m)},[v,m]),g=kn(function(){return ZNe(lt({scrollWindow:LNe,scrollDroppable:p.scrollDroppable},AU({move:cre},f)))},[p.scrollDroppable,f]),x=sSe(e),y=kn(function(){return INe({announce:d,autoScroller:g,dimensionMarshal:p,focusMarshal:x,getResponders:c,styleMarshal:h})},[d,g,p,x,c,h]);o.current=y;var b=Mt(function(){var I=iw(o),k=I.getState();k.phase!=="IDLE"&&I.dispatch(j8())},[]),w=Mt(function(){var I=iw(o).getState();return I.isDragging||I.phase==="DROP_ANIMATING"},[]),N=kn(function(){return{isDragging:w,tryAbort:b}},[w,b]);n(N);var E=Mt(function(I){return vre(iw(o).getState(),I)},[]),C=Mt(function(){return ip(iw(o).getState())},[]),j=kn(function(){return{marshal:p,focus:x,contextId:e,canLift:E,isMovementAllowed:C,dragHandleUsageInstructionsId:u,registry:v}},[e,p,u,x,E,C,v]);return ZSe({contextId:e,store:y,registry:v,customSensors:r,enableDefaultSensors:t.enableDefaultSensors!==!1}),A.useEffect(function(){return b},[b]),ge.createElement(_3.Provider,{value:j},ge.createElement(wwe,{context:I8,store:y},t.children))}var eAe=0;function tAe(){return kn(function(){return""+eAe++},[])}function nAe(t){var e=tAe(),n=t.dragHandleUsageInstructions||DE.dragHandleUsageInstructions;return ge.createElement(kje,null,function(r){return ge.createElement(JSe,{nonce:t.nonce,contextId:e,setCallbacks:r,dragHandleUsageInstructions:n,enableDefaultSensors:t.enableDefaultSensors,sensors:t.sensors,onBeforeCapture:t.onBeforeCapture,onBeforeDragStart:t.onBeforeDragStart,onDragStart:t.onDragStart,onDragUpdate:t.onDragUpdate,onDragEnd:t.onDragEnd},t.children)})}var Tre=function(e){return function(n){return e===n}},rAe=Tre("scroll"),sAe=Tre("auto"),rV=function(e,n){return n(e.overflowX)||n(e.overflowY)},iAe=function(e){var n=window.getComputedStyle(e),r={overflowX:n.overflowX,overflowY:n.overflowY};return rV(r,rAe)||rV(r,sAe)},aAe=function(){return!1},oAe=function t(e){return e==null?null:e===document.body?aAe()?e:null:e===document.documentElement?null:iAe(e)?e:t(e.parentElement)},wM=function(t){return{x:t.scrollLeft,y:t.scrollTop}},lAe=function t(e){if(!e)return!1;var n=window.getComputedStyle(e);return n.position==="fixed"?!0:t(e.parentElement)},cAe=function(t){var e=oAe(t),n=lAe(t);return{closestScrollable:e,isFixedOnPage:n}},dAe=function(t){var e=t.descriptor,n=t.isEnabled,r=t.isCombineEnabled,i=t.isFixedOnPage,a=t.direction,o=t.client,l=t.page,c=t.closest,d=function(){if(!c)return null;var m=c.scrollSize,v=c.client,p=mre({scrollHeight:m.scrollHeight,scrollWidth:m.scrollWidth,height:v.paddingBox.height,width:v.paddingBox.width});return{pageMarginBox:c.page.marginBox,frameClient:v,scrollSize:m,shouldClipSubject:c.shouldClipSubject,scroll:{initial:c.scroll,current:c.scroll,max:p,diff:{value:ci,displacement:ci}}}}(),u=a==="vertical"?v8:Kne,h=lb({page:l,withPlaceholder:null,axis:u,frame:d}),f={descriptor:e,isCombineEnabled:r,isFixedOnPage:i,axis:u,isEnabled:n,client:o,page:l,frame:d,subject:h};return f},uAe=function(e,n){var r=Fne(e);if(!n||e!==n)return r;var i=r.paddingBox.top-n.scrollTop,a=r.paddingBox.left-n.scrollLeft,o=i+n.scrollHeight,l=a+n.scrollWidth,c={top:i,right:l,bottom:o,left:a},d=h8(c,r.border),u=f8({borderBox:d,margin:r.margin,border:r.border,padding:r.padding});return u},hAe=function(t){var e=t.ref,n=t.descriptor,r=t.env,i=t.windowScroll,a=t.direction,o=t.isDropDisabled,l=t.isCombineEnabled,c=t.shouldClipSubject,d=r.closestScrollable,u=uAe(e,d),h=SP(u,i),f=function(){if(!d)return null;var v=Fne(d),p={scrollHeight:d.scrollHeight,scrollWidth:d.scrollWidth};return{client:v,page:SP(v,i),scroll:wM(d),scrollSize:p,shouldClipSubject:c}}(),m=dAe({descriptor:n,isEnabled:!o,isCombineEnabled:l,isFixedOnPage:r.isFixedOnPage,direction:a,client:u,page:h,closest:f});return m},fAe={passive:!1},mAe={passive:!0},sV=function(t){return t.shouldPublishImmediately?fAe:mAe};function IP(t){var e=A.useContext(t);return e||ft(!1),e}var pC=function(e){return e&&e.env.closestScrollable||null};function pAe(t){var e=A.useRef(null),n=IP(_3),r=D8("droppable"),i=n.registry,a=n.marshal,o=jre(t),l=kn(function(){return{id:t.droppableId,type:t.type,mode:t.mode}},[t.droppableId,t.mode,t.type]),c=A.useRef(l),d=kn(function(){return oi(function(w,N){e.current||ft(!1);var E={x:w,y:N};a.updateDroppableScroll(l.id,E)})},[l.id,a]),u=Mt(function(){var w=e.current;return!w||!w.env.closestScrollable?ci:wM(w.env.closestScrollable)},[]),h=Mt(function(){var w=u();d(w.x,w.y)},[u,d]),f=kn(function(){return Xj(h)},[h]),m=Mt(function(){var w=e.current,N=pC(w);w&&N||ft(!1);var E=w.scrollOptions;if(E.shouldPublishImmediately){h();return}f()},[f,h]),v=Mt(function(w,N){e.current&&ft(!1);var E=o.current,C=E.getDroppableRef();C||ft(!1);var j=cAe(C),I={ref:C,descriptor:l,env:j,scrollOptions:N};e.current=I;var k=hAe({ref:C,descriptor:l,env:j,windowScroll:w,direction:E.direction,isDropDisabled:E.isDropDisabled,isCombineEnabled:E.isCombineEnabled,shouldClipSubject:!E.ignoreContainerClipping}),D=j.closestScrollable;return D&&(D.setAttribute(JU.contextId,n.contextId),D.addEventListener("scroll",m,sV(I.scrollOptions))),k},[n.contextId,l,m,o]),p=Mt(function(){var w=e.current,N=pC(w);return w&&N||ft(!1),wM(N)},[]),g=Mt(function(){var w=e.current;w||ft(!1);var N=pC(w);e.current=null,N&&(f.cancel(),N.removeAttribute(JU.contextId),N.removeEventListener("scroll",m,sV(w.scrollOptions)))},[m,f]),x=Mt(function(w){var N=e.current;N||ft(!1);var E=pC(N);E||ft(!1),E.scrollTop+=w.y,E.scrollLeft+=w.x},[]),y=kn(function(){return{getDimensionAndWatchScroll:v,getScrollWhileDragging:p,dragStopped:g,scroll:x}},[g,v,p,x]),b=kn(function(){return{uniqueId:r,descriptor:l,callbacks:y}},[y,l,r]);Lo(function(){return c.current=b.descriptor,i.droppable.register(b),function(){e.current&&g(),i.droppable.unregister(b)}},[y,l,g,b,a,i.droppable]),Lo(function(){e.current&&a.updateDroppableIsEnabled(c.current.id,!t.isDropDisabled)},[t.isDropDisabled,a]),Lo(function(){e.current&&a.updateDroppableIsCombineEnabled(c.current.id,t.isCombineEnabled)},[t.isCombineEnabled,a])}function $_(){}var iV={width:0,height:0,margin:Fje},gAe=function(e){var n=e.isAnimatingOpenOnMount,r=e.placeholder,i=e.animate;return n||i==="close"?iV:{height:r.client.borderBox.height,width:r.client.borderBox.width,margin:r.client.margin}},vAe=function(e){var n=e.isAnimatingOpenOnMount,r=e.placeholder,i=e.animate,a=gAe({isAnimatingOpenOnMount:n,placeholder:r,animate:i});return{display:r.display,boxSizing:"border-box",width:a.width,height:a.height,marginTop:a.margin.top,marginRight:a.margin.right,marginBottom:a.margin.bottom,marginLeft:a.margin.left,flexShrink:"0",flexGrow:"0",pointerEvents:"none",transition:i!=="none"?sj.placeholder:null}};function xAe(t){var e=A.useRef(null),n=Mt(function(){e.current&&(clearTimeout(e.current),e.current=null)},[]),r=t.animate,i=t.onTransitionEnd,a=t.onClose,o=t.contextId,l=A.useState(t.animate==="open"),c=l[0],d=l[1];A.useEffect(function(){return c?r!=="open"?(n(),d(!1),$_):e.current?$_:(e.current=setTimeout(function(){e.current=null,d(!1)}),n):$_},[r,c,n]);var u=Mt(function(f){f.propertyName==="height"&&(i(),r==="close"&&a())},[r,a,i]),h=vAe({isAnimatingOpenOnMount:c,animate:t.animate,placeholder:t.placeholder});return ge.createElement(t.placeholder.tagName,{style:h,"data-rbd-placeholder-context-id":o,onTransitionEnd:u,ref:t.innerRef})}var yAe=ge.memo(xAe),_8=ge.createContext(null),bAe=function(t){mne(e,t);function e(){for(var r,i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return r=t.call.apply(t,[this].concat(a))||this,r.state={isVisible:!!r.props.on,data:r.props.on,animate:r.props.shouldAnimate&&r.props.on?"open":"none"},r.onClose=function(){r.state.animate==="close"&&r.setState({isVisible:!1})},r}e.getDerivedStateFromProps=function(i,a){return i.shouldAnimate?i.on?{isVisible:!0,data:i.on,animate:"open"}:a.isVisible?{isVisible:!0,data:a.data,animate:"close"}:{isVisible:!1,animate:"close",data:null}:{isVisible:!!i.on,data:i.on,animate:"none"}};var n=e.prototype;return n.render=function(){if(!this.state.isVisible)return null;var i={onClose:this.onClose,data:this.state.data,animate:this.state.animate};return this.props.children(i)},e}(ge.PureComponent),aV={dragging:5e3,dropAnimating:4500},wAe=function(e,n){return n?sj.drop(n.duration):e?sj.snap:sj.fluid},jAe=function(e,n){return e?n?e2.opacity.drop:e2.opacity.combining:null},NAe=function(e){return e.forceShouldAnimate!=null?e.forceShouldAnimate:e.mode==="SNAP"};function SAe(t){var e=t.dimension,n=e.client,r=t.offset,i=t.combineWith,a=t.dropping,o=!!i,l=NAe(t),c=!!a,d=c?xM.drop(r,o):xM.moveTo(r),u={position:"fixed",top:n.marginBox.top,left:n.marginBox.left,boxSizing:"border-box",width:n.borderBox.width,height:n.borderBox.height,transition:wAe(l,a),transform:d,opacity:jAe(o,c),zIndex:c?aV.dropAnimating:aV.dragging,pointerEvents:"none"};return u}function AAe(t){return{transform:xM.moveTo(t.offset),transition:t.shouldAnimateDisplacement?null:"none"}}function CAe(t){return t.type==="DRAGGING"?SAe(t):AAe(t)}function EAe(t,e,n){n===void 0&&(n=ci);var r=window.getComputedStyle(e),i=e.getBoundingClientRect(),a=Mne(i,r),o=SP(a,n),l={client:a,tagName:e.tagName.toLowerCase(),display:r.display},c={x:a.marginBox.width,y:a.marginBox.height},d={descriptor:t,placeholder:l,displaceBy:c,client:a,page:o};return d}function PAe(t){var e=D8("draggable"),n=t.descriptor,r=t.registry,i=t.getDraggableRef,a=t.canDragInteractiveElements,o=t.shouldRespectForcePress,l=t.isEnabled,c=kn(function(){return{canDragInteractiveElements:a,shouldRespectForcePress:o,isEnabled:l}},[a,l,o]),d=Mt(function(m){var v=i();return v||ft(!1),EAe(n,v,m)},[n,i]),u=kn(function(){return{uniqueId:e,descriptor:n,options:c,getDimension:d}},[n,d,c,e]),h=A.useRef(u),f=A.useRef(!0);Lo(function(){return r.draggable.register(h.current),function(){return r.draggable.unregister(h.current)}},[r.draggable]),Lo(function(){if(f.current){f.current=!1;return}var m=h.current;h.current=u,r.draggable.update(u,m)},[u,r.draggable])}function TAe(t){t.preventDefault()}function IAe(t){var e=A.useRef(null),n=Mt(function(I){e.current=I},[]),r=Mt(function(){return e.current},[]),i=IP(_3),a=i.contextId,o=i.dragHandleUsageInstructionsId,l=i.registry,c=IP(_8),d=c.type,u=c.droppableId,h=kn(function(){return{id:t.draggableId,index:t.index,type:d,droppableId:u}},[t.draggableId,t.index,d,u]),f=t.children,m=t.draggableId,v=t.isEnabled,p=t.shouldRespectForcePress,g=t.canDragInteractiveElements,x=t.isClone,y=t.mapped,b=t.dropAnimationFinished;if(!x){var w=kn(function(){return{descriptor:h,registry:l,getDraggableRef:r,canDragInteractiveElements:g,shouldRespectForcePress:p,isEnabled:v}},[h,l,r,g,p,v]);PAe(w)}var N=kn(function(){return v?{tabIndex:0,role:"button","aria-describedby":o,"data-rbd-drag-handle-draggable-id":m,"data-rbd-drag-handle-context-id":a,draggable:!1,onDragStart:TAe}:null},[a,o,m,v]),E=Mt(function(I){y.type==="DRAGGING"&&y.dropping&&I.propertyName==="transform"&&b()},[b,y]),C=kn(function(){var I=CAe(y),k=y.type==="DRAGGING"&&y.dropping?E:null,D={innerRef:n,draggableProps:{"data-rbd-draggable-context-id":a,"data-rbd-draggable-id":m,style:I,onTransitionEnd:k},dragHandleProps:N};return D},[a,N,m,y,E,n]),j=kn(function(){return{draggableId:h.id,type:h.type,source:{index:h.index,droppableId:h.droppableId}}},[h.droppableId,h.id,h.index,h.type]);return f(C,y.snapshot,j)}var Ire=function(t,e){return t===e},Dre=function(t){var e=t.combine,n=t.destination;return n?n.droppableId:e?e.droppableId:null},DAe=function(e){return e.combine?e.combine.draggableId:null},kAe=function(e){return e.at&&e.at.type==="COMBINE"?e.at.combine.draggableId:null};function _Ae(){var t=oi(function(i,a){return{x:i,y:a}}),e=oi(function(i,a,o,l,c){return{isDragging:!0,isClone:a,isDropAnimating:!!c,dropAnimation:c,mode:i,draggingOver:o,combineWith:l,combineTargetFor:null}}),n=oi(function(i,a,o,l,c,d,u){return{mapped:{type:"DRAGGING",dropping:null,draggingOver:c,combineWith:d,mode:a,offset:i,dimension:o,forceShouldAnimate:u,snapshot:e(a,l,c,d,null)}}}),r=function(a,o){if(a.isDragging){if(a.critical.draggable.id!==o.draggableId)return null;var l=a.current.client.offset,c=a.dimensions.draggables[o.draggableId],d=Oo(a.impact),u=kAe(a.impact),h=a.forceShouldAnimate;return n(t(l.x,l.y),a.movementMode,c,o.isClone,d,u,h)}if(a.phase==="DROP_ANIMATING"){var f=a.completed;if(f.result.draggableId!==o.draggableId)return null;var m=o.isClone,v=a.dimensions.draggables[o.draggableId],p=f.result,g=p.mode,x=Dre(p),y=DAe(p),b=a.dropDuration,w={duration:b,curve:S8.drop,moveTo:a.newHomeClientOffset,opacity:y?e2.opacity.drop:null,scale:y?e2.scale.drop:null};return{mapped:{type:"DRAGGING",offset:a.newHomeClientOffset,dimension:v,dropping:w,draggingOver:x,combineWith:y,mode:g,forceShouldAnimate:null,snapshot:e(g,m,x,y,w)}}}return null};return r}function kre(t){return{isDragging:!1,isDropAnimating:!1,isClone:!1,dropAnimation:null,mode:null,draggingOver:null,combineTargetFor:t,combineWith:null}}var OAe={mapped:{type:"SECONDARY",offset:ci,combineTargetFor:null,shouldAnimateDisplacement:!0,snapshot:kre(null)}};function LAe(){var t=oi(function(o,l){return{x:o,y:l}}),e=oi(kre),n=oi(function(o,l,c){return l===void 0&&(l=null),{mapped:{type:"SECONDARY",offset:o,combineTargetFor:l,shouldAnimateDisplacement:c,snapshot:e(l)}}}),r=function(l){return l?n(ci,l,!0):null},i=function(l,c,d,u){var h=d.displaced.visible[l],f=!!(u.inVirtualList&&u.effected[l]),m=T3(d),v=m&&m.draggableId===l?c:null;if(!h){if(!f)return r(v);if(d.displaced.invisible[l])return null;var p=Xb(u.displacedBy.point),g=t(p.x,p.y);return n(g,v,!0)}if(f)return r(v);var x=d.displacedBy.point,y=t(x.x,x.y);return n(y,v,h.shouldAnimate)},a=function(l,c){if(l.isDragging)return l.critical.draggable.id===c.draggableId?null:i(c.draggableId,l.critical.draggable.id,l.impact,l.afterCritical);if(l.phase==="DROP_ANIMATING"){var d=l.completed;return d.result.draggableId===c.draggableId?null:i(c.draggableId,d.result.draggableId,d.impact,d.afterCritical)}return null};return a}var RAe=function(){var e=_Ae(),n=LAe(),r=function(a,o){return e(a,o)||n(a,o)||OAe};return r},MAe={dropAnimationFinished:ure},FAe=Lne(RAe,MAe,null,{context:I8,pure:!0,areStatePropsEqual:Ire})(IAe);function _re(t){var e=IP(_8),n=e.isUsingCloneFor;return n===t.draggableId&&!t.isClone?null:ge.createElement(FAe,t)}function $Ae(t){var e=typeof t.isDragDisabled=="boolean"?!t.isDragDisabled:!0,n=!!t.disableInteractiveElementBlocking,r=!!t.shouldRespectForcePress;return ge.createElement(_re,lt({},t,{isClone:!1,isEnabled:e,canDragInteractiveElements:n,shouldRespectForcePress:r}))}function BAe(t){var e=A.useContext(_3);e||ft(!1);var n=e.contextId,r=e.isMovementAllowed,i=A.useRef(null),a=A.useRef(null),o=t.children,l=t.droppableId,c=t.type,d=t.mode,u=t.direction,h=t.ignoreContainerClipping,f=t.isDropDisabled,m=t.isCombineEnabled,v=t.snapshot,p=t.useClone,g=t.updateViewportMaxScroll,x=t.getContainerForClone,y=Mt(function(){return i.current},[]),b=Mt(function(D){i.current=D},[]);Mt(function(){return a.current},[]);var w=Mt(function(D){a.current=D},[]),N=Mt(function(){r()&&g({maxScroll:gre()})},[r,g]);pAe({droppableId:l,type:c,mode:d,direction:u,isDropDisabled:f,isCombineEnabled:m,ignoreContainerClipping:h,getDroppableRef:y});var E=ge.createElement(bAe,{on:t.placeholder,shouldAnimate:t.shouldAnimatePlaceholder},function(D){var P=D.onClose,R=D.data,_=D.animate;return ge.createElement(yAe,{placeholder:R,onClose:P,innerRef:w,animate:_,contextId:n,onTransitionEnd:N})}),C=kn(function(){return{innerRef:b,placeholder:E,droppableProps:{"data-rbd-droppable-id":l,"data-rbd-droppable-context-id":n}}},[n,l,E,b]),j=p?p.dragging.draggableId:null,I=kn(function(){return{droppableId:l,type:c,isUsingCloneFor:j}},[l,j,c]);function k(){if(!p)return null;var D=p.dragging,P=p.render,R=ge.createElement(_re,{draggableId:D.draggableId,index:D.source.index,isClone:!0,isEnabled:!0,shouldRespectForcePress:!1,canDragInteractiveElements:!0},function(_,M){return P(_,M,D)});return qI.createPortal(R,x())}return ge.createElement(_8.Provider,{value:I},o(C,v),k())}var B_=function(e,n){return e===n.droppable.type},oV=function(e,n){return n.draggables[e.draggable.id]},zAe=function(){var e={placeholder:null,shouldAnimatePlaceholder:!0,snapshot:{isDraggingOver:!1,draggingOverWith:null,draggingFromThisWith:null,isUsingPlaceholder:!1},useClone:null},n=lt({},e,{shouldAnimatePlaceholder:!1}),r=oi(function(o){return{draggableId:o.id,type:o.type,source:{index:o.index,droppableId:o.droppableId}}}),i=oi(function(o,l,c,d,u,h){var f=u.descriptor.id,m=u.descriptor.droppableId===o;if(m){var v=h?{render:h,dragging:r(u.descriptor)}:null,p={isDraggingOver:c,draggingOverWith:c?f:null,draggingFromThisWith:f,isUsingPlaceholder:!0};return{placeholder:u.placeholder,shouldAnimatePlaceholder:!1,snapshot:p,useClone:v}}if(!l)return n;if(!d)return e;var g={isDraggingOver:c,draggingOverWith:f,draggingFromThisWith:null,isUsingPlaceholder:!0};return{placeholder:u.placeholder,shouldAnimatePlaceholder:!0,snapshot:g,useClone:null}}),a=function(l,c){var d=c.droppableId,u=c.type,h=!c.isDropDisabled,f=c.renderClone;if(l.isDragging){var m=l.critical;if(!B_(u,m))return n;var v=oV(m,l.dimensions),p=Oo(l.impact)===d;return i(d,h,p,p,v,f)}if(l.phase==="DROP_ANIMATING"){var g=l.completed;if(!B_(u,g.critical))return n;var x=oV(g.critical,l.dimensions);return i(d,h,Dre(g.result)===d,Oo(g.impact)===d,x,f)}if(l.phase==="IDLE"&&l.completed&&!l.shouldFlush){var y=l.completed;if(!B_(u,y.critical))return n;var b=Oo(y.impact)===d,w=!!(y.impact.at&&y.impact.at.type==="COMBINE"),N=y.critical.droppable.id===d;return b?w?e:n:N?e:n}return n};return a},UAe={updateViewportMaxScroll:X2e};function VAe(){return document.body||ft(!1),document.body}var qAe={mode:"standard",type:"DEFAULT",direction:"vertical",isDropDisabled:!1,isCombineEnabled:!1,ignoreContainerClipping:!1,renderClone:null,getContainerForClone:VAe},Ore=Lne(zAe,UAe,null,{context:I8,pure:!0,areStatePropsEqual:Ire})(BAe);Ore.defaultProps=qAe;const ij={dealStages:["New","Qualified","Proposal Sent","Negotiation","Closed Won","Closed Lost"],dealSources:["Walk-in","Online","Referral","Trade Show","Phone Call","Email Campaign"],dealTypes:["New Sale","Trade-in","Lease","Financing"],priorities:["Low","Medium","High","Urgent"],defaultDeal:{stage:"New",source:"Online",type:"New Sale",priority:"Medium",amount:0,expectedCloseDate:new Date().toISOString().split("T")[0],probability:25},sampleDeals:[{id:"deal-001",customerId:"cust-001",customerName:"John Smith",customerEmail:"john.smith@email.com",customerPhone:"(555) 123-4567",vehicleId:"veh-001",vehicleInfo:"2023 Forest River Cherokee 274RK",stage:"Qualified",amount:35e3,source:"Referral",type:"New Sale",priority:"High",repId:"rep-001",repName:"Jamie Closer",probability:75,expectedCloseDate:"2024-02-15",createdAt:"2024-01-10T09:30:00Z",updatedAt:"2024-01-20T14:22:00Z",notes:"Customer very interested, ready to move forward with financing",activities:[{id:"activity-001",type:"Call",description:"Initial qualification call",date:"2024-01-10T10:00:00Z",userId:"rep-001"},{id:"activity-002",type:"Meeting",description:"Product demonstration",date:"2024-01-15T14:00:00Z",userId:"rep-001"}]},{id:"deal-002",customerId:"cust-002",customerName:"Maria Rodriguez",customerEmail:"maria.rodriguez@email.com",customerPhone:"(555) 987-6543",vehicleId:"veh-002",vehicleInfo:"2024 Keystone Montana 3761FL",stage:"Proposal Sent",amount:62e3,source:"Trade Show",type:"New Sale",priority:"Medium",repId:"rep-002",repName:"Avery Seller",probability:60,expectedCloseDate:"2024-02-28",createdAt:"2024-01-05T11:15:00Z",updatedAt:"2024-01-18T16:45:00Z",notes:"Proposal sent, waiting for customer decision",activities:[{id:"activity-003",type:"Email",description:"Sent detailed proposal",date:"2024-01-18T09:00:00Z",userId:"rep-002"}]},{id:"deal-003",customerId:"cust-003",customerName:"David Johnson",customerEmail:"david.johnson@email.com",customerPhone:"(555) 456-7890",vehicleId:"veh-003",vehicleInfo:"2023 Grand Design Solitude 310GK",stage:"Negotiation",amount:48e3,source:"Online",type:"Trade-in",priority:"High",repId:"rep-001",repName:"Jamie Closer",probability:85,expectedCloseDate:"2024-02-10",createdAt:"2024-01-08T13:20:00Z",updatedAt:"2024-01-22T10:30:00Z",notes:"Negotiating trade-in value, close to agreement",activities:[{id:"activity-004",type:"Meeting",description:"Trade-in appraisal",date:"2024-01-20T11:00:00Z",userId:"rep-001"}]}],reps:[{id:"rep-001",name:"Jamie Closer",email:"jamie.closer@company.com",phone:"(555) 111-2222",specialties:["RV Sales","Financing"]},{id:"rep-002",name:"Avery Seller",email:"avery.seller@company.com",phone:"(555) 333-4444",specialties:["Manufactured Homes","Trade-ins"]},{id:"rep-003",name:"Morgan Deal",email:"morgan.deal@company.com",phone:"(555) 555-6666",specialties:["Luxury RVs","Commercial Sales"]}],stageColors:{New:"bg-gray-100 text-gray-800",Qualified:"bg-blue-100 text-blue-800","Proposal Sent":"bg-yellow-100 text-yellow-800",Negotiation:"bg-orange-100 text-orange-800","Closed Won":"bg-green-100 text-green-800","Closed Lost":"bg-red-100 text-red-800"},priorityColors:{Low:"bg-gray-100 text-gray-800",Medium:"bg-blue-100 text-blue-800",High:"bg-orange-100 text-orange-800",Urgent:"bg-red-100 text-red-800"},metrics:{totalDeals:156,totalValue:875e4,avgDealSize:56089,conversionRate:68.5,avgSalesCycle:21,monthlyGrowth:12.3,pipelineByStage:[{stage:"New",count:45,value:225e4},{stage:"Qualified",count:32,value:192e4},{stage:"Proposal Sent",count:18,value:126e4},{stage:"Negotiation",count:12,value:96e4},{stage:"Closed Won",count:8,value:52e4},{stage:"Closed Lost",count:5,value:0}],monthlyPerformance:[{month:"Jan",deals:12,value:72e4},{month:"Feb",deals:15,value:9e5},{month:"Mar",deals:18,value:108e4},{month:"Apr",deals:14,value:84e4},{month:"May",deals:20,value:12e5},{month:"Jun",deals:22,value:132e4}]},approvalWorkflows:[{id:"workflow-001",name:"Standard Deal Approval",description:"Default approval process for deals under $50k",stages:[{id:"stage-001",name:"Sales Manager Review",required:!0,order:1},{id:"stage-002",name:"Finance Approval",required:!0,order:2},{id:"stage-003",name:"General Manager Sign-off",required:!1,order:3}],conditions:{maxAmount:5e4,requiresTradeIn:!1},isActive:!0},{id:"workflow-002",name:"High Value Deal Approval",description:"Enhanced approval process for deals over $50k",stages:[{id:"stage-001",name:"Sales Manager Review",required:!0,order:1},{id:"stage-002",name:"Finance Approval",required:!0,order:2},{id:"stage-003",name:"General Manager Sign-off",required:!0,order:3},{id:"stage-004",name:"Owner Approval",required:!0,order:4}],conditions:{minAmount:5e4,requiresTradeIn:!1},isActive:!0}],territories:[{id:"territory-001",name:"North Region",description:"Northern counties and cities",repIds:["rep-001","rep-003"],zipcodes:["12345","12346","12347"],isActive:!0},{id:"territory-002",name:"South Region",description:"Southern counties and cities",repIds:["rep-002"],zipcodes:["54321","54322","54323"],isActive:!0}]},lV=[{stage:At.PROSPECTING,name:"Prospecting",color:"bg-blue-500"},{stage:At.QUALIFICATION,name:"Qualification",color:"bg-yellow-500"},{stage:At.NEEDS_ANALYSIS,name:"Needs Analysis",color:"bg-orange-500"},{stage:At.PROPOSAL,name:"Proposal",color:"bg-purple-500"},{stage:At.NEGOTIATION,name:"Negotiation",color:"bg-indigo-500"},{stage:At.CLOSED_WON,name:"Closed Won",color:"bg-green-500"},{stage:At.CLOSED_LOST,name:"Closed Lost",color:"bg-red-500"}];function HAe({deals:t,onDealStageChange:e,onDealClick:n}){var v;const{tenant:r}=ya(),[i,a]=A.useState(null);(v=r==null?void 0:r.settings)!=null&&v.dealStages||ij.dealStages,A.useState((r==null?void 0:r.deals)||ij.sampleDeals);const o=p=>{switch(p){case Zn.ACTIVE:return"bg-blue-50 text-blue-700 border-blue-200";case Zn.WON:return"bg-green-50 text-green-700 border-green-200";case Zn.LOST:return"bg-red-50 text-red-700 border-red-200";case Zn.ON_HOLD:return"bg-yellow-50 text-yellow-700 border-yellow-200";case Zn.CANCELLED:return"bg-gray-50 text-gray-700 border-gray-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},l=p=>{switch(p){case"critical":return"bg-red-50 text-red-700 border-red-200";case"high":return"bg-orange-50 text-orange-700 border-orange-200";case"medium":return"bg-yellow-50 text-yellow-700 border-yellow-200";case"low":return"bg-green-50 text-green-700 border-green-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},c=p=>new Date(p.expectedCloseDate)<new Date&&p.status===Zn.ACTIVE,d=p=>{if(a(null),!p.destination||p.source.droppableId===p.destination.droppableId)return;const g=p.draggableId,x=p.destination.droppableId;e(g,x)},u=p=>{a(p.draggableId)},h=p=>t.filter(g=>g.stage===p),f=p=>h(p).reduce((g,x)=>g+x.value,0),m=p=>h(p).reduce((g,x)=>g+x.value*x.probability/100,0);return s.jsxs("div",{className:"space-y-6 pb-10",children:[s.jsx("div",{className:"grid gap-4 md:grid-cols-7",children:lV.map(p=>{const g=h(p.stage),x=f(p.stage),y=m(p.stage);return s.jsxs(he,{className:"shadow-sm",children:[s.jsxs(ye,{className:"pb-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("div",{className:st("w-3 h-3 rounded-full",p.color)}),s.jsx("span",{className:"text-xs text-muted-foreground",children:g.length})]}),s.jsx(be,{className:"text-sm font-medium",children:p.name})]}),s.jsx(fe,{className:"pt-0",children:s.jsxs("div",{className:"space-y-1",children:[s.jsx("div",{className:"text-lg font-bold",children:Le(x)}),s.jsxs("div",{className:"text-xs text-muted-foreground",children:["Weighted: ",Le(y)]})]})})]},p.stage)})}),s.jsx(nAe,{onDragEnd:d,onDragStart:u,children:s.jsx("div",{className:"grid gap-4 grid-cols-1 md:grid-cols-7 min-h-[600px]",children:lV.map(p=>s.jsx(Ore,{droppableId:p.stage,children:(g,x)=>s.jsxs("div",{ref:g.innerRef,...g.droppableProps,className:st("space-y-3 p-3 rounded-lg border-2 border-dashed transition-colors min-h-[200px]",x.isDraggingOver?"border-primary bg-primary/5":"border-muted"),children:[s.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[s.jsx("div",{className:st("w-3 h-3 rounded-full",p.color)}),s.jsx("h3",{className:"font-semibold text-sm",children:p.name})]}),h(p.stage).map((y,b)=>s.jsx($Ae,{draggableId:y.id,index:b,children:(w,N)=>s.jsx(he,{ref:w.innerRef,...w.draggableProps,...w.dragHandleProps,className:st("cursor-pointer transition-all hover:shadow-md",N.isDragging&&"rotate-3 shadow-lg",i===y.id&&"opacity-50"),onClick:()=>n(y),children:s.jsx(fe,{className:"p-4",children:s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold text-sm line-clamp-2",children:y.name}),s.jsx("p",{className:"text-xs text-muted-foreground truncate",children:y.customerName})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"font-bold text-primary",children:Le(y.value)}),s.jsx(Re,{className:st("ri-badge-status text-xs",l(y.priority)),children:y.priority.toUpperCase()})]}),s.jsxs("div",{className:"flex items-center justify-between text-xs text-muted-foreground",children:[s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx(tn,{className:"h-3 w-3"}),s.jsxs("span",{children:[y.probability,"%"]})]}),s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx(Sn,{className:"h-3 w-3 flex-shrink-0"}),s.jsx("span",{className:"truncate",children:new Date(y.expectedCloseDate).toLocaleDateString()})]})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(Re,{className:st("ri-badge-status text-xs",o(y.status)),children:y.status.toUpperCase()}),c(y)&&s.jsxs("div",{className:"flex items-center space-x-1 text-red-500",children:[s.jsx(mm,{className:"h-3 w-3 flex-shrink-0"}),s.jsx("span",{className:"text-xs",children:"Overdue"})]})]})]})})},y.id)},y.id)),g.placeholder]})},p.stage))})})]})}function WAe(){var n,r;const t=ij==null?void 0:ij.metrics;if(!t)return s.jsx("div",{className:"space-y-6",children:s.jsx("div",{className:"text-center py-8",children:s.jsx("p",{className:"text-muted-foreground",children:"Loading metrics..."})})});const e=[{title:"Total Deals",value:t.totalDeals.toString(),icon:xd,trend:"+12%",trendDirection:"up"},{title:"Pipeline Value",value:Le(t.totalValue),icon:Vt,trend:"+8.5%",trendDirection:"up"},{title:"Average Deal Size",value:Le(t.avgDealSize),icon:tn,trend:"+5.2%",trendDirection:"up"},{title:"Conversion Rate",value:`${t.conversionRate}%`,icon:Lr,trend:"-2.1%",trendDirection:"down"},{title:"Avg Sales Cycle",value:`${t.avgSalesCycle} days`,icon:Sn,trend:"-3 days",trendDirection:"up"},{title:"Monthly Growth",value:`${t.monthlyGrowth}%`,icon:tn,trend:"+1.8%",trendDirection:"up"}];return s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:e.map((i,a)=>s.jsxs(he,{children:[s.jsxs(ye,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(be,{className:"text-sm font-medium",children:i.title}),s.jsx(i.icon,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsxs(fe,{children:[s.jsx("div",{className:"text-2xl font-bold",children:i.value}),s.jsxs("div",{className:"flex items-center space-x-1 mt-1",children:[i.trendDirection==="up"?s.jsx(tn,{className:"h-3 w-3 text-green-600"}):s.jsx(AE,{className:"h-3 w-3 text-red-600"}),s.jsx("span",{className:`text-xs ${i.trendDirection==="up"?"text-green-600":"text-red-600"}`,children:i.trend}),s.jsx("span",{className:"text-xs text-muted-foreground",children:"from last month"})]})]})]},a))}),s.jsxs(he,{children:[s.jsxs(ye,{children:[s.jsx(be,{children:"Pipeline by Stage"}),s.jsx(Be,{children:"Deal distribution across sales stages"})]}),s.jsx(fe,{children:s.jsx("div",{className:"space-y-4",children:((n=t.pipelineByStage)==null?void 0:n.map((i,a)=>s.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(Re,{variant:"outline",children:i.stage}),s.jsxs("span",{className:"font-medium",children:[i.count," deals"]})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("div",{className:"font-semibold",children:Le(i.value)}),s.jsxs("div",{className:"text-sm text-muted-foreground",children:[(i.value/t.totalValue*100).toFixed(1),"% of pipeline"]})]})]},a)))||s.jsx("div",{className:"text-center py-4 text-muted-foreground",children:"No pipeline data available"})})})]}),s.jsxs(he,{children:[s.jsxs(ye,{children:[s.jsx(be,{children:"Monthly Performance"}),s.jsx(Be,{children:"Deals closed and revenue by month"})]}),s.jsx(fe,{children:s.jsx("div",{className:"space-y-4",children:((r=t.monthlyPerformance)==null?void 0:r.map((i,a)=>s.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-12 text-center font-medium",children:i.month}),s.jsxs("div",{children:[s.jsxs("div",{className:"font-semibold",children:[i.deals," deals"]}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"closed"})]})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("div",{className:"font-semibold",children:Le(i.value)}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"revenue"})]})]},a)))||s.jsx("div",{className:"text-center py-4 text-muted-foreground",children:"No performance data available"})})})]})]})}const GAe=["Best Price","Superior Product Features","Excellent Service","Strong Relationship","Competitive Financing","Quick Delivery","Brand Reputation","Referral/Recommendation"],KAe=["Price Too High","Lost to Competitor","Budget Constraints","Timing Issues","Product Limitations","Service Concerns","Decision Delayed","Requirements Changed"],YAe=["Camping World","Lazydays","General RV","PPL Motor Homes","Local Dealer","Private Seller","Other"];function XAe({deals:t,winLossReports:e,onCreateReport:n}){const[r,i]=A.useState(!1),[a,o]=A.useState(null),[l,c]=A.useState({outcome:"won",primaryReason:"",secondaryReasons:[],competitorWon:"",feedback:"",lessonsLearned:[],actionItems:[]}),d=t.filter(E=>E.status==="won"||E.status==="lost"),u=t.filter(E=>E.status==="won"),h=t.filter(E=>E.status==="lost"),f=d.length>0?u.length/d.length*100:0,m=u.length>0?u.reduce((E,C)=>E+C.value,0)/u.length:0,v=h.length>0?h.reduce((E,C)=>E+C.value,0)/h.length:0,p=E=>{o(E),c({...l,outcome:E.status==="won"?"won":"lost"}),i(!0)},g=()=>{a&&(n(a.id,l.outcome,l),i(!1),o(null),c({outcome:"won",primaryReason:"",secondaryReasons:[],competitorWon:"",feedback:"",lessonsLearned:[],actionItems:[]}))},x=(E,C,j)=>{C.trim()&&!E.includes(C.trim())&&j([...E,C.trim()])},y=(E,C,j)=>{j(E.filter((I,k)=>k!==C))},b=E=>{const C=e.filter(I=>I.outcome===E),j={};return C.forEach(I=>{j[I.primaryReason]=(j[I.primaryReason]||0)+1}),Object.entries(j).sort(([,I],[,k])=>k-I).slice(0,5).map(([I,k])=>({reason:I,count:k,percentage:C.length>0?k/C.length*100:0}))},w=b("won"),N=b("lost");return s.jsxs("div",{className:"space-y-6",children:[r&&a&&s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:s.jsxs(he,{className:"w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[s.jsx(ye,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx(be,{children:"Win/Loss Report"}),s.jsxs(Be,{children:[a.name," - ",Le(a.value)]})]}),s.jsx(Q,{variant:"ghost",size:"sm",onClick:()=>i(!1),children:s.jsx(on,{className:"h-4 w-4"})})]})}),s.jsxs(fe,{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx(ae,{children:"Outcome"}),s.jsxs(Ke,{value:l.outcome,onValueChange:E=>c(C=>({...C,outcome:E})),children:[s.jsx(He,{children:s.jsx(Ye,{})}),s.jsxs(We,{children:[s.jsx(le,{value:"won",children:"Won"}),s.jsx(le,{value:"lost",children:"Lost"})]})]})]}),s.jsxs("div",{children:[s.jsx(ae,{children:"Primary Reason"}),s.jsxs(Ke,{value:l.primaryReason,onValueChange:E=>c(C=>({...C,primaryReason:E})),children:[s.jsx(He,{children:s.jsx(Ye,{placeholder:"Select primary reason"})}),s.jsx(We,{children:(l.outcome==="won"?GAe:KAe).map(E=>s.jsx(le,{value:E,children:E},E))})]})]}),l.outcome==="lost"&&s.jsxs("div",{children:[s.jsx(ae,{children:"Competitor Won"}),s.jsxs(Ke,{value:l.competitorWon,onValueChange:E=>c(C=>({...C,competitorWon:E})),children:[s.jsx(He,{children:s.jsx(Ye,{placeholder:"Select competitor"})}),s.jsx(We,{children:YAe.map(E=>s.jsx(le,{value:E,children:E},E))})]})]}),s.jsxs("div",{children:[s.jsx(ae,{children:"Customer Feedback"}),s.jsx(un,{value:l.feedback,onChange:E=>c(C=>({...C,feedback:E.target.value})),placeholder:"What did the customer say about their decision?",rows:3})]}),s.jsxs("div",{children:[s.jsx(ae,{children:"Lessons Learned"}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex space-x-2",children:[s.jsx(Ae,{placeholder:"Add a lesson learned",onKeyDown:E=>{if(E.key==="Enter"){E.preventDefault();const C=E.currentTarget;x(l.lessonsLearned,C.value,j=>c(I=>({...I,lessonsLearned:j}))),C.value=""}}}),s.jsx(Q,{type:"button",variant:"outline",onClick:E=>{const C=E.currentTarget.previousElementSibling;x(l.lessonsLearned,C.value,j=>c(I=>({...I,lessonsLearned:j}))),C.value=""},children:s.jsx(yt,{className:"h-4 w-4"})})]}),s.jsx("div",{className:"flex flex-wrap gap-2",children:l.lessonsLearned.map((E,C)=>s.jsxs(Re,{variant:"secondary",className:"flex items-center gap-1",children:[E,s.jsx(on,{className:"h-3 w-3 cursor-pointer",onClick:()=>y(l.lessonsLearned,C,j=>c(I=>({...I,lessonsLearned:j})))})]},C))})]})]}),s.jsxs("div",{children:[s.jsx(ae,{children:"Action Items"}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex space-x-2",children:[s.jsx(Ae,{placeholder:"Add an action item",onKeyDown:E=>{if(E.key==="Enter"){E.preventDefault();const C=E.currentTarget;x(l.actionItems,C.value,j=>c(I=>({...I,actionItems:j}))),C.value=""}}}),s.jsx(Q,{type:"button",variant:"outline",onClick:E=>{const C=E.currentTarget.previousElementSibling;x(l.actionItems,C.value,j=>c(I=>({...I,actionItems:j}))),C.value=""},children:s.jsx(yt,{className:"h-4 w-4"})})]}),s.jsx("div",{className:"flex flex-wrap gap-2",children:l.actionItems.map((E,C)=>s.jsxs(Re,{variant:"secondary",className:"flex items-center gap-1",children:[E,s.jsx(on,{className:"h-3 w-3 cursor-pointer",onClick:()=>y(l.actionItems,C,j=>c(I=>({...I,actionItems:j})))})]},C))})]})]}),s.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t",children:[s.jsx(Q,{variant:"outline",onClick:()=>i(!1),children:"Cancel"}),s.jsxs(Q,{onClick:g,children:[s.jsx(Wn,{className:"h-4 w-4 mr-2"}),"Save Report"]})]})]})]})}),s.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[s.jsxs(he,{className:"shadow-sm border-0 bg-gradient-to-br from-blue-50 to-blue-100/50",children:[s.jsxs(ye,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(be,{className:"text-sm font-medium text-blue-900",children:"Win Rate"}),s.jsx(xd,{className:"h-4 w-4 text-blue-600"})]}),s.jsxs(fe,{children:[s.jsxs("div",{className:"text-2xl font-bold text-blue-900",children:[f.toFixed(1),"%"]}),s.jsxs("p",{className:"text-xs text-blue-600 flex items-center mt-1",children:[s.jsx(ms,{className:"h-3 w-3 mr-1"}),d.length," closed deals"]})]})]}),s.jsxs(he,{className:"shadow-sm border-0 bg-gradient-to-br from-green-50 to-green-100/50",children:[s.jsxs(ye,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(be,{className:"text-sm font-medium text-green-900",children:"Won Deals"}),s.jsx(tn,{className:"h-4 w-4 text-green-600"})]}),s.jsxs(fe,{children:[s.jsx("div",{className:"text-2xl font-bold text-green-900",children:u.length}),s.jsxs("p",{className:"text-xs text-green-600 flex items-center mt-1",children:[s.jsx(tn,{className:"h-3 w-3 mr-1"}),Le(m)," avg"]})]})]}),s.jsxs(he,{className:"shadow-sm border-0 bg-gradient-to-br from-red-50 to-red-100/50",children:[s.jsxs(ye,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(be,{className:"text-sm font-medium text-red-900",children:"Lost Deals"}),s.jsx(AE,{className:"h-4 w-4 text-red-600"})]}),s.jsxs(fe,{children:[s.jsx("div",{className:"text-2xl font-bold text-red-900",children:h.length}),s.jsxs("p",{className:"text-xs text-red-600 flex items-center mt-1",children:[s.jsx(AE,{className:"h-3 w-3 mr-1"}),Le(v)," avg"]})]})]}),s.jsxs(he,{className:"shadow-sm border-0 bg-gradient-to-br from-purple-50 to-purple-100/50",children:[s.jsxs(ye,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(be,{className:"text-sm font-medium text-purple-900",children:"Reports"}),s.jsx(ms,{className:"h-4 w-4 text-purple-600"})]}),s.jsxs(fe,{children:[s.jsx("div",{className:"text-2xl font-bold text-purple-900",children:e.length}),s.jsxs("p",{className:"text-xs text-purple-600 flex items-center mt-1",children:[s.jsx(ms,{className:"h-3 w-3 mr-1"}),"Completed reports"]})]})]})]}),s.jsxs(Vn,{defaultValue:"analysis",className:"space-y-6",children:[s.jsxs(Mn,{children:[s.jsx(tt,{value:"analysis",children:"Analysis"}),s.jsx(tt,{value:"closed-deals",children:"Closed Deals"}),s.jsx(tt,{value:"reports",children:"Reports"})]}),s.jsxs(rt,{value:"analysis",className:"space-y-6",children:[s.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[s.jsxs(he,{className:"shadow-sm",children:[s.jsxs(ye,{children:[s.jsxs(be,{className:"flex items-center",children:[s.jsx(tn,{className:"h-5 w-5 mr-2 text-green-500"}),"Win Reasons"]}),s.jsx(Be,{children:"Top reasons for winning deals"})]}),s.jsx(fe,{children:s.jsx("div",{className:"space-y-4",children:w.length>0?w.map((E,C)=>s.jsxs("div",{className:"space-y-1",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm font-medium",children:E.reason}),s.jsxs("span",{className:"text-sm text-green-600",children:[E.percentage.toFixed(0),"%"]})]}),s.jsx(Pd,{value:E.percentage,className:"h-2"})]},C)):s.jsx("div",{className:"text-center py-6 text-muted-foreground",children:"No win reports available"})})})]}),s.jsxs(he,{className:"shadow-sm",children:[s.jsxs(ye,{children:[s.jsxs(be,{className:"flex items-center",children:[s.jsx(AE,{className:"h-5 w-5 mr-2 text-red-500"}),"Loss Reasons"]}),s.jsx(Be,{children:"Top reasons for losing deals"})]}),s.jsx(fe,{children:s.jsx("div",{className:"space-y-4",children:N.length>0?N.map((E,C)=>s.jsxs("div",{className:"space-y-1",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm font-medium",children:E.reason}),s.jsxs("span",{className:"text-sm text-red-600",children:[E.percentage.toFixed(0),"%"]})]}),s.jsx(Pd,{value:E.percentage,className:"h-2"})]},C)):s.jsx("div",{className:"text-center py-6 text-muted-foreground",children:"No loss reports available"})})})]})]}),s.jsxs(he,{className:"shadow-sm",children:[s.jsxs(ye,{children:[s.jsx(be,{children:"Lessons Learned"}),s.jsx(Be,{children:"Key insights from win/loss reports"})]}),s.jsx(fe,{children:e.length>0?s.jsx("div",{className:"space-y-4",children:e.slice(0,5).map((E,C)=>s.jsxs("div",{className:"p-3 rounded-lg bg-muted/30",children:[s.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[E.outcome==="won"?s.jsx(Re,{className:"bg-green-50 text-green-700 border-green-200",children:"WON"}):s.jsx(Re,{className:"bg-red-50 text-red-700 border-red-200",children:"LOST"}),s.jsx("span",{className:"text-sm font-medium",children:E.primaryReason})]}),s.jsx("div",{className:"space-y-2",children:E.lessonsLearned.map((j,I)=>s.jsxs("p",{className:"text-sm text-muted-foreground",children:[" ",j]},I))})]},C))}):s.jsx("div",{className:"text-center py-6 text-muted-foreground",children:"No lessons learned available"})})]})]}),s.jsx(rt,{value:"closed-deals",className:"space-y-6",children:s.jsxs(he,{className:"shadow-sm",children:[s.jsxs(ye,{children:[s.jsx(be,{children:"Recently Closed Deals"}),s.jsx(Be,{children:"Deals that have been won or lost"})]}),s.jsx(fe,{children:s.jsx("div",{className:"space-y-4",children:d.length>0?d.map(E=>s.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-accent/50 transition-colors",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[s.jsx("h3",{className:"font-semibold",children:E.name}),s.jsx(Re,{className:E.status==="won"?"bg-green-50 text-green-700 border-green-200":"bg-red-50 text-red-700 border-red-200",children:E.status.toUpperCase()})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm text-muted-foreground",children:[s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Customer:"})," ",E.customerName]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Value:"})," ",Le(E.value)]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Closed:"})," ",E.actualCloseDate?ht(E.actualCloseDate):"N/A"]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Rep:"})," ",E.assignedTo]})]})]}),s.jsxs(Q,{variant:"outline",size:"sm",onClick:()=>p(E),className:"shadow-sm",children:[s.jsx(yt,{className:"h-3 w-3 mr-1"}),"Report"]})]},E.id)):s.jsx("div",{className:"text-center py-6 text-muted-foreground",children:"No closed deals available"})})})]})}),s.jsx(rt,{value:"reports",className:"space-y-6",children:s.jsxs(he,{className:"shadow-sm",children:[s.jsxs(ye,{children:[s.jsx(be,{children:"Win/Loss Reports"}),s.jsx(Be,{children:"Detailed reports on won and lost deals"})]}),s.jsx(fe,{children:s.jsx("div",{className:"space-y-4",children:e.length>0?e.map(E=>{const C=t.find(j=>j.id===E.dealId);return s.jsxs("div",{className:"p-4 border rounded-lg hover:bg-accent/50 transition-colors",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(Re,{className:E.outcome==="won"?"bg-green-50 text-green-700 border-green-200":"bg-red-50 text-red-700 border-red-200",children:E.outcome.toUpperCase()}),s.jsx("h3",{className:"font-semibold",children:(C==null?void 0:C.name)||"Unknown Deal"})]}),s.jsx("span",{className:"text-sm text-muted-foreground",children:ht(E.reportedAt)})]}),s.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-medium mb-2",children:"Reasons"}),s.jsxs("div",{className:"space-y-1",children:[s.jsxs("p",{className:"text-sm",children:[s.jsx("span",{className:"font-medium",children:"Primary:"})," ",E.primaryReason]}),E.secondaryReasons.length>0&&s.jsxs("p",{className:"text-sm",children:[s.jsx("span",{className:"font-medium",children:"Secondary:"})," ",E.secondaryReasons.join(", ")]}),E.competitorWon&&s.jsxs("p",{className:"text-sm",children:[s.jsx("span",{className:"font-medium",children:"Competitor:"})," ",E.competitorWon]})]})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-medium mb-2",children:"Feedback"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:E.feedback})]})]}),s.jsxs("div",{className:"mt-4 pt-4 border-t",children:[s.jsx("h4",{className:"text-sm font-medium mb-2",children:"Lessons & Action Items"}),s.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[s.jsxs("div",{children:[s.jsx("h5",{className:"text-xs font-medium text-muted-foreground mb-1",children:"Lessons Learned:"}),s.jsx("ul",{className:"text-sm space-y-1",children:E.lessonsLearned.map((j,I)=>s.jsxs("li",{children:[" ",j]},I))})]}),s.jsxs("div",{children:[s.jsx("h5",{className:"text-xs font-medium text-muted-foreground mb-1",children:"Action Items:"}),s.jsx("ul",{className:"text-sm space-y-1",children:E.actionItems.map((j,I)=>s.jsxs("li",{children:[" ",j]},I))})]})]})]})]},E.id)}):s.jsx("div",{className:"text-center py-6 text-muted-foreground",children:"No win/loss reports available"})})})]})})]})]})}function ZAe({deal:t,onClose:e,onEdit:n}){const r=l=>{switch(l){case Zn.ACTIVE:return"bg-blue-50 text-blue-700 border-blue-200";case Zn.WON:return"bg-green-50 text-green-700 border-green-200";case Zn.LOST:return"bg-red-50 text-red-700 border-red-200";case Zn.ON_HOLD:return"bg-yellow-50 text-yellow-700 border-yellow-200";case Zn.CANCELLED:return"bg-gray-50 text-gray-700 border-gray-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},i=l=>{switch(l){case dd.CRITICAL:return"bg-red-50 text-red-700 border-red-200";case dd.HIGH:return"bg-orange-50 text-orange-700 border-orange-200";case dd.MEDIUM:return"bg-yellow-50 text-yellow-700 border-yellow-200";case dd.LOW:return"bg-green-50 text-green-700 border-green-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},a=l=>{switch(l){case At.PROSPECTING:return"bg-blue-50 text-blue-700 border-blue-200";case At.QUALIFICATION:return"bg-yellow-50 text-yellow-700 border-yellow-200";case At.NEEDS_ANALYSIS:return"bg-orange-50 text-orange-700 border-orange-200";case At.PROPOSAL:return"bg-purple-50 text-purple-700 border-purple-200";case At.NEGOTIATION:return"bg-indigo-50 text-indigo-700 border-indigo-200";case At.CLOSED_WON:return"bg-green-50 text-green-700 border-green-200";case At.CLOSED_LOST:return"bg-red-50 text-red-700 border-red-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},o=l=>new Date(l.expectedCloseDate)<new Date&&l.status===Zn.ACTIVE;return s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:s.jsxs(he,{className:"w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[s.jsx(ye,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx(be,{className:"text-xl",children:t.name}),s.jsx(Be,{children:"Deal details and information"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsxs(Q,{onClick:()=>n(t),size:"sm",children:[s.jsx(ar,{className:"h-4 w-4 mr-2"}),"Edit Deal"]}),s.jsx(Q,{variant:"ghost",size:"sm",onClick:e,children:s.jsx(on,{className:"h-4 w-4"})})]})]})}),s.jsxs(fe,{className:"space-y-6",children:[s.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[s.jsx(Re,{className:st("ri-badge-status",r(t.status)),children:t.status.toUpperCase()}),s.jsx(Re,{className:st("ri-badge-status",a(t.stage)),children:t.stage.replace("_"," ").toUpperCase()}),s.jsx(Re,{className:st("ri-badge-status",i(t.priority)),children:t.priority.toUpperCase()}),o(t)&&s.jsxs(Re,{className:"bg-red-50 text-red-700 border-red-200",children:[s.jsx(Ba,{className:"h-3 w-3 mr-1"}),"OVERDUE"]}),t.requiresApproval&&s.jsx(Re,{className:"bg-orange-50 text-orange-700 border-orange-200",children:"REQUIRES APPROVAL"})]}),s.jsxs(Vn,{defaultValue:"overview",className:"space-y-4",children:[s.jsxs(Mn,{children:[s.jsx(tt,{value:"overview",children:"Overview"}),s.jsx(tt,{value:"products",children:"Products"}),s.jsx(tt,{value:"history",children:"History"})]}),s.jsxs(rt,{value:"overview",className:"space-y-4",children:[s.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Customer"}),s.jsx("p",{className:"font-medium",children:t.customerName})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Value"}),s.jsx("p",{className:"font-bold text-primary text-lg",children:Le(t.value)})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Probability"}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(xd,{className:"h-4 w-4 text-blue-500"}),s.jsxs("p",{className:"font-medium",children:[t.probability,"%"]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Expected Close"}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Sn,{className:"h-4 w-4 text-purple-500"}),s.jsx("p",{className:"font-medium",children:ht(t.expectedCloseDate)})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Assigned To"}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Gr,{className:"h-4 w-4 text-green-500"}),s.jsx("p",{className:"font-medium",children:t.assignedTo||"Unassigned"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Territory"}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Ad,{className:"h-4 w-4 text-orange-500"}),s.jsx("p",{className:"font-medium",children:t.territoryId||"No Territory"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Created"}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(gn,{className:"h-4 w-4 text-blue-500"}),s.jsx("p",{className:"font-medium",children:ht(t.createdAt)})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Last Updated"}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(gn,{className:"h-4 w-4 text-blue-500"}),s.jsx("p",{className:"font-medium",children:ht(t.updatedAt)})]})]})]}),t.notes&&s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Notes"}),s.jsx("div",{className:"mt-1 p-3 bg-muted/30 rounded-md",children:s.jsx("p",{className:"text-sm whitespace-pre-wrap",children:t.notes})})]}),Object.keys(t.customFields||{}).length>0&&s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Custom Fields"}),s.jsx("div",{className:"mt-1 grid gap-2 md:grid-cols-2",children:Object.entries(t.customFields||{}).map(([l,c])=>s.jsxs("div",{className:"p-2 bg-muted/30 rounded-md",children:[s.jsxs("span",{className:"text-sm font-medium capitalize",children:[l.replace(/([A-Z])/g," $1").trim(),": "]}),s.jsx("span",{className:"text-sm",children:c==null?void 0:c.toString()})]},l))})]})]}),s.jsxs(rt,{value:"products",className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-semibold",children:"Products & Services"}),t.products&&t.products.length>0?s.jsxs("div",{className:"space-y-3",children:[t.products.map(l=>s.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Ii,{className:"h-4 w-4 text-blue-500"}),s.jsx("span",{className:"font-medium",children:l.productName})]}),s.jsxs("div",{className:"flex items-center space-x-4 mt-1 text-sm text-muted-foreground",children:[s.jsxs("span",{children:["Quantity: ",l.quantity]}),s.jsxs("span",{children:["Unit Price: ",Le(l.unitPrice)]}),l.discount>0&&s.jsxs("span",{className:"text-green-600",children:["Discount: ",Le(l.discount)]})]})]}),s.jsx("div",{className:"text-right",children:s.jsx("div",{className:"font-bold",children:Le(l.total)})})]},l.id)),s.jsx("div",{className:"flex justify-end p-3 bg-muted/30 rounded-lg",children:s.jsxs("div",{className:"text-right",children:[s.jsx("span",{className:"text-sm font-medium",children:"Total Deal Value: "}),s.jsx("span",{className:"text-lg font-bold text-primary",children:Le(t.value)})]})})]}):s.jsxs("div",{className:"text-center py-8 text-muted-foreground border-2 border-dashed rounded-lg",children:[s.jsx(Ii,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),s.jsx("p",{children:"No products added to this deal"}),s.jsx("p",{className:"text-sm",children:"Edit the deal to add products"})]})]}),s.jsxs(rt,{value:"history",className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-semibold",children:"Stage History"}),t.stageHistory&&t.stageHistory.length>0?s.jsx("div",{className:"space-y-3",children:t.stageHistory.map((l,c)=>s.jsxs("div",{className:"relative",children:[c<t.stageHistory.length-1&&s.jsx("div",{className:"absolute left-4 top-8 bottom-0 w-px bg-border"}),s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx("div",{className:"flex-shrink-0 w-8 h-8 rounded-full bg-primary flex items-center justify-center text-primary-foreground",children:c+1}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[s.jsx("span",{className:"font-medium capitalize",children:l.fromStage?`${l.fromStage.replace("_"," ")}  ${l.toStage.replace("_"," ")}`:`Started at ${l.toStage.replace("_"," ")}`}),s.jsx("span",{className:"text-xs text-muted-foreground",children:ht(l.changedAt)})]}),l.duration!==void 0&&s.jsxs("div",{className:"text-sm text-muted-foreground",children:["Duration: ",l.duration," hours"]}),l.notes&&s.jsx("div",{className:"mt-1 text-sm bg-muted/30 p-2 rounded-md",children:l.notes})]})]})]},c))}):s.jsxs("div",{className:"text-center py-8 text-muted-foreground border-2 border-dashed rounded-lg",children:[s.jsx(gn,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),s.jsx("p",{children:"No stage history available"})]})]})]}),s.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t",children:[s.jsx(Q,{variant:"outline",onClick:e,children:"Close"}),s.jsxs(Q,{onClick:()=>n(t),children:[s.jsx(ar,{className:"h-4 w-4 mr-2"}),"Edit Deal"]})]})]})]})})}function QAe({territories:t,salesReps:e,deals:n,onCreateTerritory:r,onUpdateTerritory:i,onDeleteTerritory:a}){var E,C,j;const[o,l]=A.useState(!1),[c,d]=A.useState(null),[u,h]=A.useState({name:"",type:Mh.GEOGRAPHIC,description:"",assignedTo:[],rules:[],isActive:!0}),[f,m]=A.useState({field:"",operator:"equals",value:"",priority:1}),v=()=>{d(null),h({name:"",type:Mh.GEOGRAPHIC,description:"",assignedTo:[],rules:[],isActive:!0}),l(!0)},p=I=>{d(I),h({name:I.name,type:I.type,description:I.description,assignedTo:[...I.assignedTo],rules:[...I.rules],isActive:I.isActive}),l(!0)},g=()=>{u.name&&(c?i(c.id,u):r(u),l(!1),d(null),h({name:"",type:Mh.GEOGRAPHIC,description:"",assignedTo:[],rules:[],isActive:!0}))},x=()=>{if(!f.field||!f.operator)return;const I={id:Math.random().toString(36).substr(2,9),field:f.field,operator:f.operator,value:f.value,priority:f.priority||1};h(k=>({...k,rules:[...k.rules||[],I]})),m({field:"",operator:"equals",value:"",priority:1})},y=I=>{h(k=>{var D;return{...k,rules:((D=k.rules)==null?void 0:D.filter(P=>P.id!==I))||[]}})},b=(I,k)=>{h(k?D=>({...D,assignedTo:[...D.assignedTo||[],I]}):D=>{var P;return{...D,assignedTo:((P=D.assignedTo)==null?void 0:P.filter(R=>R!==I))||[]}})},w=I=>n.filter(D=>D.territoryId===I).length,N=I=>{const k=t.find(D=>D.id===I);return k?e.filter(D=>k.assignedTo.includes(D.id)):[]};return s.jsxs("div",{className:"space-y-6",children:[o&&s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:s.jsxs(he,{className:"w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[s.jsx(ye,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx(be,{children:c?"Edit Territory":"Create Territory"}),s.jsx(Be,{children:c?"Update territory details and rules":"Define a new sales territory"})]}),s.jsx(Q,{variant:"ghost",size:"sm",onClick:()=>l(!1),children:s.jsx(on,{className:"h-4 w-4"})})]})}),s.jsxs(fe,{className:"space-y-6",children:[s.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"name",children:"Territory Name *"}),s.jsx(Ae,{id:"name",value:u.name,onChange:I=>h(k=>({...k,name:I.target.value})),placeholder:"e.g., North Region"})]}),s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"type",children:"Territory Type"}),s.jsxs(Ke,{value:u.type,onValueChange:I=>h(k=>({...k,type:I})),children:[s.jsx(He,{children:s.jsx(Ye,{})}),s.jsxs(We,{children:[s.jsx(le,{value:Mh.GEOGRAPHIC,children:"Geographic"}),s.jsx(le,{value:Mh.INDUSTRY,children:"Industry"}),s.jsx(le,{value:Mh.ACCOUNT_SIZE,children:"Account Size"}),s.jsx(le,{value:Mh.PRODUCT_LINE,children:"Product Line"})]})]})]})]}),s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"description",children:"Description"}),s.jsx(un,{id:"description",value:u.description,onChange:I=>h(k=>({...k,description:I.target.value})),placeholder:"Describe the territory",rows:3})]}),s.jsxs("div",{children:[s.jsx("div",{className:"flex items-center justify-between mb-4",children:s.jsx(ae,{children:"Territory Rules"})}),s.jsxs("div",{className:"space-y-4",children:[(E=u.rules)==null?void 0:E.map(I=>s.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("span",{className:"font-medium",children:I.field}),s.jsx("span",{className:"text-muted-foreground",children:I.operator}),s.jsx("span",{children:I.value.toString()})]}),s.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:["Priority: ",I.priority]})]}),s.jsx(Q,{variant:"ghost",size:"sm",onClick:()=>y(I.id),children:s.jsx(Tr,{className:"h-4 w-4 text-red-500"})})]},I.id)),s.jsx(he,{className:"border-dashed",children:s.jsxs(fe,{className:"pt-6",children:[s.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[s.jsxs("div",{children:[s.jsx(ae,{children:"Field"}),s.jsxs(Ke,{value:f.field,onValueChange:I=>m(k=>({...k,field:I})),children:[s.jsx(He,{children:s.jsx(Ye,{placeholder:"Select field"})}),s.jsxs(We,{children:[s.jsx(le,{value:"state",children:"State"}),s.jsx(le,{value:"zipCode",children:"Zip Code"}),s.jsx(le,{value:"country",children:"Country"}),s.jsx(le,{value:"industry",children:"Industry"}),s.jsx(le,{value:"dealSize",children:"Deal Size"}),s.jsx(le,{value:"productType",children:"Product Type"})]})]})]}),s.jsxs("div",{children:[s.jsx(ae,{children:"Operator"}),s.jsxs(Ke,{value:f.operator,onValueChange:I=>m(k=>({...k,operator:I})),children:[s.jsx(He,{children:s.jsx(Ye,{})}),s.jsxs(We,{children:[s.jsx(le,{value:"equals",children:"Equals"}),s.jsx(le,{value:"contains",children:"Contains"}),s.jsx(le,{value:"starts_with",children:"Starts With"}),s.jsx(le,{value:"in_range",children:"In Range"}),s.jsx(le,{value:"greater_than",children:"Greater Than"}),s.jsx(le,{value:"less_than",children:"Less Than"})]})]})]})]}),s.jsxs("div",{className:"mt-4",children:[s.jsx(ae,{children:"Value"}),s.jsx(Ae,{value:((C=f.value)==null?void 0:C.toString())||"",onChange:I=>m(k=>({...k,value:I.target.value})),placeholder:"Rule value"}),s.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"For multiple values, separate with commas"})]}),s.jsxs("div",{className:"mt-4",children:[s.jsx(ae,{children:"Priority"}),s.jsxs(Ke,{value:((j=f.priority)==null?void 0:j.toString())||"1",onValueChange:I=>m(k=>({...k,priority:parseInt(I)})),children:[s.jsx(He,{children:s.jsx(Ye,{})}),s.jsxs(We,{children:[s.jsx(le,{value:"1",children:"1 - Highest"}),s.jsx(le,{value:"2",children:"2"}),s.jsx(le,{value:"3",children:"3"}),s.jsx(le,{value:"4",children:"4"}),s.jsx(le,{value:"5",children:"5 - Lowest"})]})]})]}),s.jsx("div",{className:"flex justify-end mt-4",children:s.jsxs(Q,{onClick:x,children:[s.jsx(yt,{className:"h-4 w-4 mr-2"}),"Add Rule"]})})]})})]})]}),s.jsxs("div",{children:[s.jsx(ae,{className:"mb-2 block",children:"Assign Sales Reps"}),s.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto p-2 border rounded-lg",children:e.map(I=>{var k;return s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx($t,{id:`rep-${I.id}`,checked:(k=u.assignedTo)==null?void 0:k.includes(I.id),onCheckedChange:D=>b(I.id,!!D)}),s.jsx(ae,{htmlFor:`rep-${I.id}`,className:"text-sm cursor-pointer",children:I.name})]},I.id)})})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx($t,{id:"isActive",checked:u.isActive,onCheckedChange:I=>h(k=>({...k,isActive:!!I}))}),s.jsx(ae,{htmlFor:"isActive",children:"Active territory"})]}),s.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t",children:[s.jsx(Q,{variant:"outline",onClick:()=>l(!1),children:"Cancel"}),s.jsxs(Q,{onClick:g,children:[s.jsx(Wn,{className:"h-4 w-4 mr-2"}),c?"Update":"Create"," Territory"]})]})]})]})}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold",children:"Territory Management"}),s.jsx("p",{className:"text-muted-foreground",children:"Define and manage sales territories and assignment rules"})]}),s.jsxs(Q,{onClick:v,children:[s.jsx(yt,{className:"h-4 w-4 mr-2"}),"Create Territory"]})]}),s.jsxs("div",{className:"space-y-6",children:[t.map(I=>s.jsxs(he,{className:"shadow-sm",children:[s.jsx(ye,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(be,{children:I.name}),s.jsx(Re,{className:I.isActive?"bg-green-50 text-green-700 border-green-200":"bg-gray-50 text-gray-700 border-gray-200",children:I.isActive?"Active":"Inactive"}),s.jsx(Re,{variant:"outline",children:I.type.replace("_"," ")})]}),s.jsx(Be,{className:"mt-1",children:I.description})]}),s.jsx("div",{className:"flex space-x-2",children:s.jsxs(Q,{variant:"outline",size:"sm",onClick:()=>p(I),children:[s.jsx(ar,{className:"h-4 w-4 mr-2"}),"Edit"]})})]})}),s.jsx(fe,{children:s.jsxs("div",{className:"grid gap-6 md:grid-cols-3",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-semibold mb-3",children:"Territory Rules"}),s.jsxs("div",{className:"space-y-2",children:[I.rules.map(k=>s.jsx("div",{className:"p-2 bg-muted/30 rounded-lg text-sm",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("span",{className:"font-medium",children:k.field}),s.jsx("span",{className:"text-muted-foreground",children:k.operator}),s.jsx("span",{children:k.value.toString()})]})},k.id)),I.rules.length===0&&s.jsx("p",{className:"text-sm text-muted-foreground",children:"No rules defined"})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-semibold mb-3",children:"Assigned Sales Reps"}),s.jsxs("div",{className:"space-y-2",children:[N(I.id).map(k=>s.jsxs("div",{className:"flex items-center space-x-2 p-2 bg-muted/30 rounded-lg",children:[s.jsx(Lr,{className:"h-4 w-4 text-blue-500"}),s.jsx("span",{className:"text-sm",children:k.name})]},k.id)),I.assignedTo.length===0&&s.jsx("p",{className:"text-sm text-muted-foreground",children:"No reps assigned"})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-semibold mb-3",children:"Territory Stats"}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between p-2 bg-blue-50 rounded-lg",children:[s.jsx("span",{className:"text-sm text-blue-700",children:"Deals"}),s.jsx("span",{className:"font-bold text-blue-700",children:w(I.id)})]}),s.jsxs("div",{className:"flex items-center justify-between p-2 bg-green-50 rounded-lg",children:[s.jsx("span",{className:"text-sm text-green-700",children:"Reps"}),s.jsx("span",{className:"font-bold text-green-700",children:I.assignedTo.length})]})]})]})]})})]},I.id)),t.length===0&&s.jsx(he,{className:"shadow-sm",children:s.jsxs(fe,{className:"flex flex-col items-center justify-center py-12",children:[s.jsx(Ad,{className:"h-12 w-12 text-muted-foreground mb-4"}),s.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Territories Defined"}),s.jsx("p",{className:"text-muted-foreground text-center mb-4",children:"Create territories to organize your sales team and deals by region, industry, or other criteria."}),s.jsxs(Q,{onClick:v,children:[s.jsx(yt,{className:"h-4 w-4 mr-2"}),"Create First Territory"]})]})})]})]})}function JAe({deals:t,approvalWorkflows:e,onApprove:n,onReject:r,onEscalate:i}){var y;const[a,o]=A.useState("pending"),[l,c]=A.useState(null),[d,u]=A.useState(""),h=b=>{switch(b){case"pending":return"bg-yellow-50 text-yellow-700 border-yellow-200";case"approved":return"bg-green-50 text-green-700 border-green-200";case"rejected":return"bg-red-50 text-red-700 border-red-200";case"escalated":return"bg-orange-50 text-orange-700 border-orange-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},f=b=>{switch(b){case"pending":return s.jsx(gn,{className:"h-4 w-4 text-yellow-500"});case"approved":return s.jsx(Rn,{className:"h-4 w-4 text-green-500"});case"rejected":return s.jsx(ko,{className:"h-4 w-4 text-red-500"});case"escalated":return s.jsx(Ba,{className:"h-4 w-4 text-orange-500"});default:return s.jsx(gn,{className:"h-4 w-4 text-gray-500"})}},m=b=>e.filter(w=>w.status===b),v=b=>t.find(w=>w.id===b),p=()=>{if(!l)return;const b=l.steps.find(w=>w.stepNumber===l.currentStep);b&&(n(l.id,b.id,d),u(""),c(null))},g=()=>{if(!l)return;const b=l.steps.find(w=>w.stepNumber===l.currentStep);b&&(r(l.id,b.id,d),u(""),c(null))},x=()=>{if(!l)return;const b=l.steps.find(w=>w.stepNumber===l.currentStep);b&&(i(l.id,b.id,d),u(""),c(null))};return s.jsxs("div",{className:"space-y-6",children:[l&&s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:s.jsxs(he,{className:"w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[s.jsx(ye,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx(be,{children:"Approval Request"}),s.jsx(Be,{children:((y=v(l.dealId))==null?void 0:y.name)||"Unknown Deal"})]}),s.jsx(Re,{className:st("ri-badge-status",h(l.status)),children:l.status.toUpperCase()})]})}),s.jsxs(fe,{className:"space-y-6",children:[s.jsx("div",{className:"p-4 bg-muted/30 rounded-lg",children:s.jsx("div",{className:"grid gap-4 md:grid-cols-2",children:(()=>{const b=v(l.dealId);return b?s.jsxs(s.Fragment,{children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-sm font-medium",children:"Customer:"}),s.jsx("p",{className:"text-sm",children:b.customerName})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-sm font-medium",children:"Deal Value:"}),s.jsx("p",{className:"text-sm font-bold",children:Le(b.value)})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-sm font-medium",children:"Stage:"}),s.jsx("p",{className:"text-sm",children:b.stage.replace("_"," ")})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-sm font-medium",children:"Assigned To:"}),s.jsx("p",{className:"text-sm",children:b.assignedTo})]})]}):null})()})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-semibold mb-2",children:"Workflow Details"}),s.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-sm font-medium",children:"Type:"}),s.jsx("p",{className:"text-sm",children:l.workflowType.replace("_"," ")})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-sm font-medium",children:"Requested By:"}),s.jsx("p",{className:"text-sm",children:l.requestedBy})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-sm font-medium",children:"Requested:"}),s.jsx("p",{className:"text-sm",children:ht(l.requestedAt)})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-sm font-medium",children:"Current Step:"}),s.jsxs("p",{className:"text-sm",children:[l.currentStep," of ",l.totalSteps]})]})]})]}),s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"comments",children:"Comments"}),s.jsx(un,{id:"comments",value:d,onChange:b=>u(b.target.value),placeholder:"Add your comments here...",rows:3})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-semibold mb-3",children:"Approval Steps"}),s.jsx("div",{className:"space-y-4",children:l.steps.map((b,w)=>{const N=b.stepNumber===l.currentStep,E=b.stepNumber<l.currentStep;return s.jsxs("div",{className:st("p-3 rounded-lg border-2",N?"border-primary bg-primary/5":E?"border-muted bg-muted/10":"border-dashed border-muted"),children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("span",{className:"flex items-center justify-center w-6 h-6 rounded-full bg-muted text-xs font-bold",children:b.stepNumber}),s.jsx("span",{className:"font-medium",children:b.approverRole.replace("_"," ")})]}),s.jsxs(Re,{className:st("ri-badge-status",h(b.status)),children:[f(b.status),s.jsx("span",{className:"ml-1",children:b.status.toUpperCase()})]})]}),s.jsxs("div",{className:"text-sm text-muted-foreground mb-2",children:["Requires ",b.requiredApprovals," approval(s) from ",b.approverIds.length," approver(s)"]}),b.currentApprovals.length>0&&s.jsxs("div",{className:"mt-3 space-y-2",children:[s.jsx("h4",{className:"text-xs font-medium",children:"Approvals:"}),b.currentApprovals.map((C,j)=>s.jsxs("div",{className:"flex items-start space-x-2 text-xs p-2 bg-muted/30 rounded",children:[C.action==="approve"?s.jsx(hpe,{className:"h-3 w-3 text-green-500 mt-0.5"}):C.action==="reject"?s.jsx(upe,{className:"h-3 w-3 text-red-500 mt-0.5"}):s.jsx(Ba,{className:"h-3 w-3 text-orange-500 mt-0.5"}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium",children:C.approverId}),s.jsx("div",{className:"text-muted-foreground",children:ht(C.actionDate)}),C.comments&&s.jsx("div",{className:"mt-1 italic",children:C.comments})]})]},j))]})]},b.id)})})]}),l.status==="pending"&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"comments",children:"Comments"}),s.jsx(un,{id:"comments",value:d,onChange:b=>u(b.target.value),placeholder:"Add your comments here...",rows:3})]}),s.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t",children:[s.jsx(Q,{variant:"outline",onClick:()=>c(null),children:"Cancel"}),s.jsxs(Q,{variant:"outline",onClick:x,children:[s.jsx(Ba,{className:"h-4 w-4 mr-2"}),"Escalate"]}),s.jsxs(Q,{variant:"destructive",onClick:g,children:[s.jsx(ko,{className:"h-4 w-4 mr-2"}),"Reject"]}),s.jsxs(Q,{variant:"default",onClick:p,children:[s.jsx(Rn,{className:"h-4 w-4 mr-2"}),"Approve"]})]})]}),l.status!=="pending"&&s.jsx("div",{className:"flex justify-end pt-6 border-t",children:s.jsx(Q,{variant:"outline",onClick:()=>c(null),children:"Close"})})]})]})}),s.jsx("div",{className:"flex items-center justify-between",children:s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold",children:"Approval Workflows"}),s.jsx("p",{className:"text-muted-foreground",children:"Manage approval requests for deals above threshold"})]})}),s.jsxs(Vn,{value:a,onValueChange:o,className:"space-y-6",children:[s.jsxs(Mn,{children:[s.jsxs(tt,{value:"pending",children:["Pending",s.jsx(Re,{className:"ml-2 bg-yellow-50 text-yellow-700 border-yellow-200",children:m("pending").length})]}),s.jsxs(tt,{value:"approved",children:["Approved",s.jsx(Re,{className:"ml-2 bg-green-50 text-green-700 border-green-200",children:m("approved").length})]}),s.jsxs(tt,{value:"rejected",children:["Rejected",s.jsx(Re,{className:"ml-2 bg-red-50 text-red-700 border-red-200",children:m("rejected").length})]}),s.jsxs(tt,{value:"escalated",children:["Escalated",s.jsx(Re,{className:"ml-2 bg-orange-50 text-orange-700 border-orange-200",children:m("escalated").length})]})]}),s.jsx(rt,{value:"pending",className:"space-y-4",children:m("pending").length>0?m("pending").map(b=>{const w=v(b.dealId);return w?s.jsx(he,{className:"shadow-sm hover:shadow-md transition-shadow cursor-pointer",onClick:()=>c(b),children:s.jsxs(fe,{className:"p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold",children:w.name}),s.jsx("p",{className:"text-sm text-muted-foreground",children:w.customerName})]}),s.jsxs(Re,{className:st("ri-badge-status",h(b.status)),children:[f(b.status),s.jsx("span",{className:"ml-1",children:b.status.toUpperCase()})]})]}),s.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-sm font-medium",children:"Deal Value:"}),s.jsx("p",{className:"text-lg font-bold text-primary",children:Le(w.value)})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-sm font-medium",children:"Requested By:"}),s.jsxs("div",{className:"flex items-center space-x-1 mt-1",children:[s.jsx(Gr,{className:"h-4 w-4 text-blue-500"}),s.jsx("span",{className:"text-sm",children:b.requestedBy})]})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-sm font-medium",children:"Requested:"}),s.jsx("p",{className:"text-sm",children:ht(b.requestedAt)})]})]}),s.jsxs("div",{className:"mt-4 pt-4 border-t",children:[s.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[s.jsx("span",{className:"text-sm font-medium",children:"Approval Progress:"}),s.jsxs("span",{className:"text-sm",children:[b.currentStep," of ",b.totalSteps]})]}),s.jsx("div",{className:"flex items-center space-x-2",children:b.steps.map((N,E)=>{const C=N.stepNumber<b.currentStep,j=N.stepNumber===b.currentStep;return s.jsxs(ge.Fragment,{children:[s.jsx("div",{className:st("flex items-center justify-center w-8 h-8 rounded-full",C?"bg-primary text-primary-foreground":j?"bg-primary/20 text-primary border-2 border-primary":"bg-muted text-muted-foreground"),children:N.stepNumber}),E<b.steps.length-1&&s.jsx(I$,{className:"h-4 w-4 text-muted-foreground"})]},N.id)})})]})]})},b.id):null}):s.jsx(he,{className:"shadow-sm",children:s.jsxs(fe,{className:"flex flex-col items-center justify-center py-12",children:[s.jsx(gn,{className:"h-12 w-12 text-muted-foreground mb-4"}),s.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Pending Approvals"}),s.jsx("p",{className:"text-muted-foreground text-center",children:"There are no deals currently waiting for your approval."})]})})}),s.jsx(rt,{value:"approved",className:"space-y-4",children:m("approved").length>0?m("approved").map(b=>{const w=v(b.dealId);return w?s.jsx(he,{className:"shadow-sm hover:shadow-md transition-shadow cursor-pointer",onClick:()=>c(b),children:s.jsxs(fe,{className:"p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold",children:w.name}),s.jsx("p",{className:"text-sm text-muted-foreground",children:w.customerName})]}),s.jsxs(Re,{className:st("ri-badge-status",h(b.status)),children:[f(b.status),s.jsx("span",{className:"ml-1",children:b.status.toUpperCase()})]})]}),s.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-sm font-medium",children:"Deal Value:"}),s.jsx("p",{className:"text-lg font-bold text-primary",children:Le(w.value)})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-sm font-medium",children:"Completed:"}),s.jsx("p",{className:"text-sm",children:b.completedAt?ht(b.completedAt):"N/A"})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-sm font-medium",children:"Workflow Type:"}),s.jsx("p",{className:"text-sm capitalize",children:b.workflowType.replace("_"," ")})]})]})]})},b.id):null}):s.jsx(he,{className:"shadow-sm",children:s.jsxs(fe,{className:"flex flex-col items-center justify-center py-12",children:[s.jsx(Rn,{className:"h-12 w-12 text-muted-foreground mb-4"}),s.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Approved Workflows"}),s.jsx("p",{className:"text-muted-foreground text-center",children:"There are no approved deal workflows yet."})]})})}),s.jsx(rt,{value:"rejected",className:"space-y-4",children:m("rejected").length>0?m("rejected").map(b=>{const w=v(b.dealId);return w?s.jsx(he,{className:"shadow-sm hover:shadow-md transition-shadow cursor-pointer",onClick:()=>c(b),children:s.jsxs(fe,{className:"p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold",children:w.name}),s.jsx("p",{className:"text-sm text-muted-foreground",children:w.customerName})]}),s.jsxs(Re,{className:st("ri-badge-status",h(b.status)),children:[f(b.status),s.jsx("span",{className:"ml-1",children:b.status.toUpperCase()})]})]}),s.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-sm font-medium",children:"Deal Value:"}),s.jsx("p",{className:"text-lg font-bold text-primary",children:Le(w.value)})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-sm font-medium",children:"Completed:"}),s.jsx("p",{className:"text-sm",children:b.completedAt?ht(b.completedAt):"N/A"})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-sm font-medium",children:"Workflow Type:"}),s.jsx("p",{className:"text-sm capitalize",children:b.workflowType.replace("_"," ")})]})]})]})},b.id):null}):s.jsx(he,{className:"shadow-sm",children:s.jsxs(fe,{className:"flex flex-col items-center justify-center py-12",children:[s.jsx(ko,{className:"h-12 w-12 text-muted-foreground mb-4"}),s.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Rejected Workflows"}),s.jsx("p",{className:"text-muted-foreground text-center",children:"There are no rejected deal workflows."})]})})}),s.jsx(rt,{value:"escalated",className:"space-y-4",children:m("escalated").length>0?m("escalated").map(b=>{const w=v(b.dealId);return w?s.jsx(he,{className:"shadow-sm hover:shadow-md transition-shadow cursor-pointer",onClick:()=>c(b),children:s.jsxs(fe,{className:"p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold",children:w.name}),s.jsx("p",{className:"text-sm text-muted-foreground",children:w.customerName})]}),s.jsxs(Re,{className:st("ri-badge-status",h(b.status)),children:[f(b.status),s.jsx("span",{className:"ml-1",children:b.status.toUpperCase()})]})]}),s.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-sm font-medium",children:"Deal Value:"}),s.jsx("p",{className:"text-lg font-bold text-primary",children:Le(w.value)})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-sm font-medium",children:"Requested:"}),s.jsx("p",{className:"text-sm",children:ht(b.requestedAt)})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-sm font-medium",children:"Workflow Type:"}),s.jsx("p",{className:"text-sm capitalize",children:b.workflowType.replace("_"," ")})]})]})]})},b.id):null}):s.jsx(he,{className:"shadow-sm",children:s.jsxs(fe,{className:"flex flex-col items-center justify-center py-12",children:[s.jsx(Ba,{className:"h-12 w-12 text-muted-foreground mb-4"}),s.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Escalated Workflows"}),s.jsx("p",{className:"text-muted-foreground text-center",children:"There are no escalated deal workflows."})]})})})]})]})}function e5e({deal:t,customers:e,salesReps:n,territories:r,products:i,onSave:a,onCancel:o}){const{toast:l}=Ot(),[c,d]=A.useState(!1),[u,h]=A.useState({name:"",customerId:"",customerName:"",stage:At.PROSPECTING,status:Zn.ACTIVE,priority:dd.MEDIUM,value:0,probability:10,expectedCloseDate:new Date(Date.now()+30*24*60*60*1e3),assignedTo:"",territoryId:"",sourceId:"",competitorIds:[],products:[],notes:"",requiresApproval:!1,customFields:{}}),[f,m]=A.useState(!1),[v,p]=A.useState(!1),[g,x]=A.useState({productId:"",productName:"",quantity:1,unitPrice:0,discount:0,total:0});A.useEffect(()=>{t&&h({...t,expectedCloseDate:new Date(t.expectedCloseDate)})},[t]),A.useEffect(()=>{if(u.customerId){const C=e.find(j=>j.id===u.customerId);C&&h(j=>({...j,customerName:`${C.firstName} ${C.lastName}`}))}},[u.customerId,e]),A.useEffect(()=>{if(u.products&&u.products.length>0){const C=u.products.reduce((j,I)=>j+I.total,0);h(j=>({...j,value:C}))}},[u.products]),A.useEffect(()=>{const C=g.quantity||1,j=g.unitPrice||0,I=g.discount||0,k=C*j-I;x(D=>({...D,total:k}))},[g.quantity,g.unitPrice,g.discount]);const y=async C=>{if(C.preventDefault(),!u.name||!u.customerId||!u.expectedCloseDate){l({title:"Validation Error",description:"Please fill in all required fields",variant:"destructive"});return}d(!0);try{await a(u),l({title:"Success",description:`Deal ${t?"updated":"created"} successfully`})}catch{l({title:"Error",description:`Failed to ${t?"update":"create"} deal`,variant:"destructive"})}finally{d(!1)}},b=()=>{if(!g.productId||!g.productName){l({title:"Validation Error",description:"Please select a product",variant:"destructive"});return}const C={id:Math.random().toString(36).substr(2,9),productId:g.productId,productName:g.productName,quantity:g.quantity||1,unitPrice:g.unitPrice||0,discount:g.discount||0,total:g.total||0};h(j=>({...j,products:[...j.products||[],C]})),x({productId:"",productName:"",quantity:1,unitPrice:0,discount:0,total:0}),m(!1)},w=C=>{h(j=>{var I;return{...j,products:((I=j.products)==null?void 0:I.filter(k=>k.id!==C))||[]}})},N=C=>{const j=i.find(I=>I.id===C);j&&x({productId:j.id,productName:j.name,quantity:1,unitPrice:j.price,discount:0,total:j.price})},E=C=>{h(j=>({...j,customerId:C.id,customerName:`${C.firstName} ${C.lastName}`})),p(!1),l({title:"Customer Added",description:`${C.firstName} ${C.lastName} has been added as a customer.`})};return s.jsxs("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:[v&&s.jsx(Yb,{onClose:()=>p(!1),onSuccess:E}),s.jsxs(he,{className:"w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[s.jsx(ye,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx(be,{children:t?"Edit Deal":"Create Deal"}),s.jsx(Be,{children:t?"Update deal details":"Create a new sales deal"})]}),s.jsx(Q,{variant:"ghost",size:"sm",onClick:o,children:s.jsx(on,{className:"h-4 w-4"})})]})}),s.jsx(fe,{children:s.jsxs("form",{onSubmit:y,className:"space-y-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("h3",{className:"text-lg font-semibold flex items-center",children:[s.jsx(xd,{className:"h-4 w-4 mr-2"}),"Deal Information"]}),s.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"name",children:"Deal Name *"}),s.jsx(Ae,{id:"name",value:u.name,onChange:C=>h(j=>({...j,name:C.target.value})),placeholder:"Enter deal name"})]}),s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"customerId",children:"Customer *"}),s.jsxs(Ke,{value:u.customerId||"",onValueChange:C=>h(j=>({...j,customerId:C})),children:[s.jsx(He,{children:s.jsx(Ye,{placeholder:"Select customer"})}),s.jsxs(We,{children:[s.jsx("div",{className:"px-2 py-1.5",children:s.jsxs(Q,{variant:"outline",size:"sm",className:"w-full justify-start",onClick:()=>p(!0),children:[s.jsx(yt,{className:"h-3.5 w-3.5 mr-2"}),"Add New Customer"]})}),s.jsx("div",{className:"px-2 py-1 border-t"}),e.map(C=>s.jsxs(le,{value:C.id,children:[C.firstName," ",C.lastName]},C.id))]})]})]})]}),s.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"stage",children:"Stage"}),s.jsxs(Ke,{value:u.stage,onValueChange:C=>h(j=>({...j,stage:C,probability:C===At.PROSPECTING?10:C===At.QUALIFICATION?25:C===At.NEEDS_ANALYSIS?40:C===At.PROPOSAL?60:C===At.NEGOTIATION?80:C===At.CLOSED_WON?100:C===At.CLOSED_LOST?0:10})),children:[s.jsx(He,{children:s.jsx(Ye,{})}),s.jsxs(We,{children:[s.jsx(le,{value:At.PROSPECTING,children:"Prospecting"}),s.jsx(le,{value:At.QUALIFICATION,children:"Qualification"}),s.jsx(le,{value:At.NEEDS_ANALYSIS,children:"Needs Analysis"}),s.jsx(le,{value:At.PROPOSAL,children:"Proposal"}),s.jsx(le,{value:At.NEGOTIATION,children:"Negotiation"}),s.jsx(le,{value:At.CLOSED_WON,children:"Closed Won"}),s.jsx(le,{value:At.CLOSED_LOST,children:"Closed Lost"})]})]})]}),s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"priority",children:"Priority"}),s.jsxs(Ke,{value:u.priority,onValueChange:C=>h(j=>({...j,priority:C})),children:[s.jsx(He,{children:s.jsx(Ye,{})}),s.jsxs(We,{children:[s.jsx(le,{value:dd.LOW,children:"Low"}),s.jsx(le,{value:dd.MEDIUM,children:"Medium"}),s.jsx(le,{value:dd.HIGH,children:"High"}),s.jsx(le,{value:dd.CRITICAL,children:"Critical"})]})]})]}),s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"probability",children:"Probability (%)"}),s.jsx(Ae,{id:"probability",type:"number",min:"0",max:"100",value:u.probability,onChange:C=>h(j=>({...j,probability:parseInt(C.target.value)||0}))})]})]}),s.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"expectedCloseDate",children:"Expected Close Date *"}),s.jsx(Ae,{id:"expectedCloseDate",type:"date",value:u.expectedCloseDate?new Date(u.expectedCloseDate).toISOString().split("T")[0]:"",onChange:C=>h(j=>({...j,expectedCloseDate:new Date(C.target.value)}))})]}),s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"assignedTo",children:"Assigned To"}),s.jsxs(Ke,{value:u.assignedTo,onValueChange:C=>h(j=>({...j,assignedTo:C})),children:[s.jsx(He,{children:s.jsx(Ye,{placeholder:"Select sales rep"})}),s.jsx(We,{children:n.map(C=>s.jsx(le,{value:C.id,children:C.name},C.id))})]})]}),s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"territoryId",children:"Territory"}),s.jsxs(Ke,{value:u.territoryId,onValueChange:C=>h(j=>({...j,territoryId:C})),children:[s.jsx(He,{children:s.jsx(Ye,{placeholder:"Select territory"})}),s.jsx(We,{children:r.map(C=>s.jsx(le,{value:C.id,children:C.name},C.id))})]})]})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("h3",{className:"text-lg font-semibold flex items-center",children:[s.jsx(Ii,{className:"h-4 w-4 mr-2"}),"Products"]}),s.jsxs(Q,{type:"button",onClick:()=>m(!0),size:"sm",children:[s.jsx(yt,{className:"h-4 w-4 mr-2"}),"Add Product"]})]}),f&&s.jsx(he,{className:"border-dashed",children:s.jsxs(fe,{className:"pt-6",children:[s.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[s.jsxs("div",{children:[s.jsx(ae,{children:"Product"}),s.jsxs(Ke,{onValueChange:N,children:[s.jsx(He,{children:s.jsx(Ye,{placeholder:"Select product"})}),s.jsx(We,{children:i.map(C=>s.jsxs(le,{value:C.id,children:[C.name," - ",Le(C.price)]},C.id))})]})]}),s.jsxs("div",{children:[s.jsx(ae,{children:"Quantity"}),s.jsx(Ae,{type:"number",min:"1",value:g.quantity,onChange:C=>x(j=>({...j,quantity:parseInt(C.target.value)||1}))})]}),s.jsxs("div",{children:[s.jsx(ae,{children:"Unit Price"}),s.jsx(Ae,{type:"number",min:"0",step:"0.01",value:g.unitPrice,onChange:C=>x(j=>({...j,unitPrice:parseFloat(C.target.value)||0}))})]}),s.jsxs("div",{children:[s.jsx(ae,{children:"Discount"}),s.jsx(Ae,{type:"number",min:"0",step:"0.01",value:g.discount,onChange:C=>x(j=>({...j,discount:parseFloat(C.target.value)||0}))})]})]}),s.jsxs("div",{className:"flex items-center justify-between mt-4",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-sm font-medium",children:"Total: "}),s.jsx("span",{className:"font-bold",children:Le(g.total||0)})]}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsx(Q,{type:"button",variant:"outline",onClick:()=>m(!1),children:"Cancel"}),s.jsx(Q,{type:"button",onClick:b,children:"Add Product"})]})]})]})}),s.jsx("div",{className:"space-y-3",children:u.products&&u.products.length>0?u.products.map(C=>s.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("span",{className:"font-medium",children:C.productName}),s.jsxs(Re,{variant:"outline",children:[C.quantity,"  ",Le(C.unitPrice)]})]}),C.discount>0&&s.jsxs("div",{className:"text-sm text-green-600 mt-1",children:["Discount: ",Le(C.discount)]})]}),s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("span",{className:"font-bold",children:Le(C.total)}),s.jsx(Q,{type:"button",variant:"ghost",size:"sm",onClick:()=>w(C.id),children:s.jsx(Tr,{className:"h-4 w-4 text-red-500"})})]})]},C.id)):s.jsxs("div",{className:"text-center py-6 text-muted-foreground border-2 border-dashed rounded-lg",children:[s.jsx(Ii,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),s.jsx("p",{children:"No products added yet"}),s.jsx("p",{className:"text-sm",children:"Add products to calculate deal value"})]})}),u.products&&u.products.length>0&&s.jsx("div",{className:"flex justify-end p-3 bg-muted/30 rounded-lg",children:s.jsxs("div",{className:"text-right",children:[s.jsx("span",{className:"text-sm font-medium",children:"Total Deal Value: "}),s.jsx("span",{className:"text-lg font-bold text-primary",children:Le(u.value||0)})]})})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-semibold",children:"Notes"}),s.jsx(un,{value:u.notes,onChange:C=>h(j=>({...j,notes:C.target.value})),placeholder:"Add any additional notes about this deal...",rows:3})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-semibold",children:"Approval Settings"}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx($t,{id:"requiresApproval",checked:u.requiresApproval,onCheckedChange:C=>h(j=>({...j,requiresApproval:!!C}))}),s.jsx(ae,{htmlFor:"requiresApproval",children:"This deal requires approval"})]}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Deals over $100,000 automatically require approval"})]}),s.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t",children:[s.jsx(Q,{type:"button",variant:"outline",onClick:o,disabled:c,children:"Cancel"}),s.jsx(Q,{type:"submit",disabled:c,children:c?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),t?"Updating...":"Creating..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Wn,{className:"h-4 w-4 mr-2"}),t?"Update":"Create"," Deal"]})})]})]})})]})]})}function cV(){const{deals:t,territories:e,approvalWorkflows:n,winLossReports:r,stageHistory:i,createDeal:a,updateDealStage:o,assignTerritory:l,createApprovalWorkflow:c,createWinLossReport:d,getDealMetrics:u}=awe(),{leads:h,salesReps:f}=uh(),{vehicles:m}=Im(),[v,p]=A.useState(""),[g,x]=A.useState("all"),[y,b]=A.useState("all"),[w,N]=A.useState(null),[E,C]=A.useState(!1),[j,I]=A.useState("pipeline"),[k,D]=A.useState(!1),{toast:P}=Ot(),R=Y=>{switch(Y){case Zn.ACTIVE:return"bg-blue-50 text-blue-700 border-blue-200";case Zn.WON:return"bg-green-50 text-green-700 border-green-200";case Zn.LOST:return"bg-red-50 text-red-700 border-red-200";case Zn.ON_HOLD:return"bg-yellow-50 text-yellow-700 border-yellow-200";case Zn.CANCELLED:return"bg-gray-50 text-gray-700 border-gray-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},_=t.filter(Y=>{const J=Y.name.toLowerCase().includes(v.toLowerCase())||Y.customerName.toLowerCase().includes(v.toLowerCase()),ne=g==="all"||Y.stage===g,re=y==="all"||Y.assignedTo===y;return J&&ne&&re}),M=async(Y,J)=>{try{await o(Y,J);const ne=t.find(re=>re.id===Y);ne&&P({title:"Deal Stage Updated",description:`${ne.name} moved to ${J.replace("_"," ").toLowerCase()}`})}catch{P({title:"Error",description:"Failed to update deal stage",variant:"destructive"})}},U=Y=>{N(Y),D(!0)},F=()=>{N(null),C(!0)},z=Y=>{N(Y),C(!0)},H=async Y=>{w?await o(w.id,Y.stage||w.stage):await a(Y),C(!1),N(null)},W=async(Y,J)=>{await c(Y,J)},$=async(Y,J,ne)=>{await d(Y,J,ne)},L=u(),q=m.map(Y=>({id:Y.id,name:`${Y.year} ${Y.make} ${Y.model}`,price:Y.price,category:"vehicle"})).concat([{id:"prod-001",name:"Extended Warranty Package",price:3500,category:"warranty"},{id:"prod-002",name:"Premium Interior Upgrade",price:2200,category:"upgrade"},{id:"prod-003",name:"Solar Panel Package",price:3500,category:"accessory"}]);return s.jsxs("div",{className:"space-y-8",children:[k&&w&&s.jsx(ZAe,{deal:w,onClose:()=>D(!1),onEdit:z}),E&&s.jsx(e5e,{deal:w||void 0,customers:h,salesReps:f,territories:e,products:q,onSave:H,onCancel:()=>{C(!1),N(null)}}),s.jsx("div",{className:"ri-page-header",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"ri-page-title",children:"Sales Deal Management"}),s.jsx("p",{className:"ri-page-description",children:"Track deals through the sales pipeline with approvals and territory management"})]}),s.jsxs(Q,{className:"shadow-sm",onClick:F,children:[s.jsx(yt,{className:"h-4 w-4 mr-2"}),"New Deal"]})]})}),s.jsxs("div",{className:"ri-stats-grid",children:[s.jsxs(he,{className:"shadow-sm border-0 bg-gradient-to-br from-blue-50 to-blue-100/50",children:[s.jsxs(ye,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(be,{className:"text-sm font-medium text-blue-900",children:"Total Pipeline"}),s.jsx(Vt,{className:"h-4 w-4 text-blue-600"})]}),s.jsxs(fe,{children:[s.jsx("div",{className:"text-2xl font-bold text-blue-900",children:Le(L.totalValue)}),s.jsxs("p",{className:"text-xs text-blue-600 flex items-center mt-1",children:[s.jsx(tn,{className:"h-3 w-3 mr-1"}),L.totalDeals," active deals"]})]})]}),s.jsxs(he,{className:"shadow-sm border-0 bg-gradient-to-br from-green-50 to-green-100/50",children:[s.jsxs(ye,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(be,{className:"text-sm font-medium text-green-900",children:"Win Rate"}),s.jsx(xd,{className:"h-4 w-4 text-green-600"})]}),s.jsxs(fe,{children:[s.jsxs("div",{className:"text-2xl font-bold text-green-900",children:[L.winRate.toFixed(1),"%"]}),s.jsxs("p",{className:"text-xs text-green-600 flex items-center mt-1",children:[s.jsx(tn,{className:"h-3 w-3 mr-1"}),L.wonDeals," won deals"]})]})]}),s.jsxs(he,{className:"shadow-sm border-0 bg-gradient-to-br from-purple-50 to-purple-100/50",children:[s.jsxs(ye,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(be,{className:"text-sm font-medium text-purple-900",children:"Avg Deal Size"}),s.jsx(Vt,{className:"h-4 w-4 text-purple-600"})]}),s.jsxs(fe,{children:[s.jsx("div",{className:"text-2xl font-bold text-purple-900",children:Le(L.averageDealSize)}),s.jsxs("p",{className:"text-xs text-purple-600 flex items-center mt-1",children:[s.jsx(tn,{className:"h-3 w-3 mr-1"}),L.averageSalesCycle.toFixed(0)," day cycle"]})]})]}),s.jsxs(he,{className:"shadow-sm border-0 bg-gradient-to-br from-orange-50 to-orange-100/50",children:[s.jsxs(ye,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(be,{className:"text-sm font-medium text-orange-900",children:"Territories"}),s.jsx(Ad,{className:"h-4 w-4 text-orange-600"})]}),s.jsxs(fe,{children:[s.jsx("div",{className:"text-2xl font-bold text-orange-900",children:e.length}),s.jsxs("p",{className:"text-xs text-orange-600 flex items-center mt-1",children:[s.jsx(Lr,{className:"h-3 w-3 mr-1"}),"Active territories"]})]})]})]}),s.jsxs(Vn,{value:j,onValueChange:I,className:"space-y-6",children:[s.jsxs(Mn,{className:"grid w-full grid-cols-5",children:[s.jsx(tt,{value:"pipeline",children:"Pipeline"}),s.jsx(tt,{value:"deals",children:"Deals"}),s.jsx(tt,{value:"analytics",children:"Analytics"}),s.jsx(tt,{value:"territories",children:"Territories"}),s.jsx(tt,{value:"approvals",children:"Approvals"})]}),s.jsx(rt,{value:"pipeline",className:"space-y-6",children:s.jsx(HAe,{deals:t,onDealStageChange:M,onDealClick:U})}),s.jsxs(rt,{value:"deals",className:"space-y-6",children:[s.jsxs("div",{className:"flex gap-4",children:[s.jsxs("div",{className:"ri-search-bar",children:[s.jsx(Rr,{className:"ri-search-icon"}),s.jsx(Ae,{placeholder:"Search deals...",value:v,onChange:Y=>p(Y.target.value),className:"ri-search-input shadow-sm"})]}),s.jsxs(Ke,{value:g,onValueChange:x,children:[s.jsx(He,{className:"w-40",children:s.jsx(Ye,{placeholder:"Stage"})}),s.jsxs(We,{children:[s.jsx(le,{value:"all",children:"All Stages"}),s.jsx(le,{value:At.PROSPECTING,children:"Prospecting"}),s.jsx(le,{value:At.QUALIFICATION,children:"Qualification"}),s.jsx(le,{value:At.NEEDS_ANALYSIS,children:"Needs Analysis"}),s.jsx(le,{value:At.PROPOSAL,children:"Proposal"}),s.jsx(le,{value:At.NEGOTIATION,children:"Negotiation"}),s.jsx(le,{value:At.CLOSED_WON,children:"Closed Won"}),s.jsx(le,{value:At.CLOSED_LOST,children:"Closed Lost"})]})]}),s.jsxs(Ke,{value:y,onValueChange:b,children:[s.jsx(He,{className:"w-40",children:s.jsx(Ye,{placeholder:"Sales Rep"})}),s.jsxs(We,{children:[s.jsx(le,{value:"all",children:"All Reps"}),f.map(Y=>s.jsx(le,{value:Y.id,children:Y.name},Y.id))]})]}),s.jsxs(Q,{variant:"outline",className:"shadow-sm",children:[s.jsx(bc,{className:"h-4 w-4 mr-2"}),"Filter"]})]}),s.jsxs(he,{className:"shadow-sm",children:[s.jsxs(ye,{children:[s.jsxs(be,{className:"text-xl",children:["Deals (",_.length,")"]}),s.jsx(Be,{children:"Manage your sales pipeline and deal progression"})]}),s.jsx(fe,{children:s.jsxs("div",{className:"space-y-4",children:[_.map(Y=>{var J;return s.jsxs("div",{className:"ri-table-row cursor-pointer",onClick:()=>z(Y),children:[s.jsx("div",{className:"flex items-center space-x-4 flex-1",children:s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[s.jsx("h3",{className:"font-semibold text-foreground",children:Y.name}),s.jsx(Re,{className:st("ri-badge-status",R(Y.status)),children:Y.status.toUpperCase()}),s.jsx(Re,{variant:"outline",children:Y.stage.replace("_"," ").toUpperCase()})]}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 text-sm text-muted-foreground",children:[s.jsxs("span",{className:"flex items-center",children:[s.jsx(Lr,{className:"h-3 w-3 mr-2 text-blue-500"}),Y.customerName]}),s.jsxs("span",{className:"flex items-center",children:[s.jsx(Vt,{className:"h-3 w-3 mr-2 text-green-500"}),Le(Y.value)]}),s.jsxs("span",{className:"flex items-center",children:[s.jsx(xd,{className:"h-3 w-3 mr-2 text-purple-500"}),Y.probability,"% probability"]}),s.jsxs("span",{className:"flex items-center",children:[s.jsx(Ad,{className:"h-3 w-3 mr-2 text-orange-500"}),((J=e.find(ne=>ne.id===Y.territoryId))==null?void 0:J.name)||"No Territory"]})]}),Y.notes&&s.jsx("p",{className:"text-sm text-muted-foreground mt-2 bg-muted/30 p-2 rounded-md",children:Y.notes})]})}),s.jsxs("div",{className:"ri-action-buttons",children:[s.jsx(Q,{variant:"outline",size:"sm",className:"shadow-sm",onClick:ne=>{ne.stopPropagation(),U(Y)},children:"View"}),Y.requiresApproval&&s.jsx(Q,{variant:"outline",size:"sm",className:"shadow-sm",onClick:ne=>{ne.stopPropagation(),W(Y.id,"deal_value")},children:"Request Approval"})]})]},Y.id)}),_.length===0&&s.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[s.jsx(xd,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),s.jsx("p",{children:"No deals found"}),s.jsx("p",{className:"text-sm",children:"Create your first deal to get started"})]})]})})]})]}),s.jsx(rt,{value:"analytics",className:"space-y-6",children:s.jsxs(Vn,{defaultValue:"metrics",className:"space-y-6",children:[s.jsxs(Mn,{children:[s.jsx(tt,{value:"metrics",children:"Deal Metrics"}),s.jsx(tt,{value:"win-loss",children:"Win/Loss Analysis"})]}),s.jsx(rt,{value:"metrics",children:s.jsx(WAe,{metrics:L})}),s.jsx(rt,{value:"win-loss",children:s.jsx(XAe,{deals:t,winLossReports:r,onCreateReport:$})})]})}),s.jsx(rt,{value:"territories",className:"space-y-6",children:s.jsx(QAe,{territories:e,salesReps:f,deals:t,onCreateTerritory:()=>{},onUpdateTerritory:()=>{},onDeleteTerritory:()=>{}})}),s.jsx(rt,{value:"approvals",className:"space-y-6",children:s.jsx(JAe,{deals:t,approvalWorkflows:n,onApprove:()=>{},onReject:()=>{},onEscalate:()=>{}})})]})]})}function t5e(){return s.jsxs(ki,{children:[s.jsx(It,{path:"/",element:s.jsx(cV,{})}),s.jsx(It,{path:"/*",element:s.jsx(cV,{})})]})}const L3=A.forwardRef(({className:t,...e},n)=>s.jsx("div",{className:"relative w-full overflow-auto",children:s.jsx("table",{ref:n,className:st("w-full caption-bottom text-sm",t),...e})}));L3.displayName="Table";const R3=A.forwardRef(({className:t,...e},n)=>s.jsx("thead",{ref:n,className:st("[&_tr]:border-b",t),...e}));R3.displayName="TableHeader";const M3=A.forwardRef(({className:t,...e},n)=>s.jsx("tbody",{ref:n,className:st("[&_tr:last-child]:border-0",t),...e}));M3.displayName="TableBody";const n5e=A.forwardRef(({className:t,...e},n)=>s.jsx("tfoot",{ref:n,className:st("bg-muted/50 font-medium [&>tr]:last:border-b-0",t),...e}));n5e.displayName="TableFooter";const im=A.forwardRef(({className:t,...e},n)=>s.jsx("tr",{ref:n,className:st("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",t),...e}));im.displayName="TableRow";const xr=A.forwardRef(({className:t,...e},n)=>s.jsx("th",{ref:n,className:st("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",t),...e}));xr.displayName="TableHead";const ur=A.forwardRef(({className:t,...e},n)=>s.jsx("td",{ref:n,className:st("p-4 align-middle [&:has([role=checkbox])]:pr-0",t),...e}));ur.displayName="TableCell";const r5e=A.forwardRef(({className:t,...e},n)=>s.jsx("caption",{ref:n,className:st("mt-4 text-sm text-muted-foreground",t),...e}));r5e.displayName="TableCaption";var Xn=(t=>(t.TEXT="text",t.DATE="date",t.SIGNATURE="signature",t.CHECKBOX="checkbox",t))(Xn||{});const z_="JVBERi0xLjQKMSAwIG9iago8PAovVHlwZSAvQ2F0YWxvZwovUGFnZXMgMiAwIFIKPj4KZW5kb2JqCjIgMCBvYmoKPDwKL1R5cGUgL1BhZ2VzCi9LaWRzIFszIDAgUl0KL0NvdW50IDEKPD4KZW5kb2JqCjMgMCBvYmoKPDwKL1R5cGUgL1BhZ2UKL1BhcmVudCAyIDAgUgovTWVkaWFCb3ggWzAgMCA2MTIgNzkyXQovUmVzb3VyY2VzIDw8Ci9Gb250IDw8Ci9GMSA0IDAgUgo+Pgo+PgovQ29udGVudHMgNSAwIFIKPj4KZW5kb2JqCjQgMCBvYmoKPDwKL1R5cGUgL0ZvbnQKL1N1YnR5cGUgL1R5cGUxCi9CYXNlRm9udCAvSGVsdmV0aWNhCj4+CmVuZG9iago1IDAgb2JqCjw8Ci9MZW5ndGggNDQKPj4Kc3RyZWFtCkJUCi9GMSAxMiBUZgoxMDAgNzAwIFRkCihTYW1wbGUgUERGKSBUagpFVApzdHJlYW0KZW5kb2JqCnhyZWYKMCA2CjAwMDAwMDAwMDAgNjU1MzUgZiAKMDAwMDAwMDAwOSAwMDAwMCBuIAowMDAwMDAwMDU4IDAwMDAwIG4gCjAwMDAwMDAxMTUgMDAwMDAgbiAKMDAwMDAwMDI0NSAwMDAwMCBuIAowMDAwMDAwMzIyIDAwMDAwIG4gCnRyYWlsZXIKPDwKL1NpemUgNgovUm9vdCAxIDAgUgo+PgpzdGFydHhyZWYKNDE0CiUlRU9G",U_=[{id:"template-001",name:"Standard Purchase Agreement",description:"Standard vehicle purchase agreement template",pdfBase64:z_,fields:[{id:"field-001",type:Xn.TEXT,label:"Customer Name",x:100,y:150,width:200,height:30,required:!0,defaultValue:"",placeholder:"Enter customer name"},{id:"field-002",type:Xn.DATE,label:"Agreement Date",x:350,y:150,width:150,height:30,required:!0,format:"MM/dd/yyyy"},{id:"field-003",type:Xn.TEXT,label:"Vehicle VIN",x:100,y:200,width:250,height:30,required:!0,defaultValue:"",placeholder:"Enter VIN number"},{id:"field-004",type:Xn.SIGNATURE,label:"Customer Signature",x:100,y:400,width:200,height:60,required:!0},{id:"field-005",type:Xn.CHECKBOX,label:"Terms Accepted",x:100,y:350,width:20,height:20,required:!0,checkboxLabel:"I agree to the terms and conditions"}],createdAt:"2024-01-10T10:00:00Z",updatedAt:"2024-01-15T14:30:00Z",isActive:!0},{id:"template-002",name:"Lease Agreement Template",description:"Standard lease agreement for RV rentals",pdfBase64:z_,fields:[{id:"field-006",type:Xn.TEXT,label:"Lessee Name",x:100,y:150,width:200,height:30,required:!0,defaultValue:"",placeholder:"Enter lessee name"},{id:"field-007",type:Xn.DATE,label:"Lease Start Date",x:350,y:150,width:150,height:30,required:!0,format:"MM/dd/yyyy"},{id:"field-008",type:Xn.DATE,label:"Lease End Date",x:350,y:200,width:150,height:30,required:!0,format:"MM/dd/yyyy"},{id:"field-009",type:Xn.TEXT,label:"Monthly Payment",x:100,y:250,width:150,height:30,required:!0,defaultValue:"$",placeholder:"Enter amount"},{id:"field-010",type:Xn.SIGNATURE,label:"Lessee Signature",x:100,y:400,width:200,height:60,required:!0}],createdAt:"2024-01-12T11:00:00Z",updatedAt:"2024-01-18T16:45:00Z",isActive:!0},{id:"template-003",name:"Service Agreement",description:"Service agreement template for maintenance contracts",pdfBase64:z_,fields:[{id:"field-011",type:Xn.TEXT,label:"Service Provider",x:100,y:150,width:200,height:30,required:!0,defaultValue:"",placeholder:"Enter service provider name"},{id:"field-012",type:Xn.TEXT,label:"Service Description",x:100,y:200,width:400,height:60,required:!0,defaultValue:"",placeholder:"Describe services to be provided"},{id:"field-013",type:Xn.CHECKBOX,label:"Emergency Service",x:100,y:280,width:20,height:20,required:!1,checkboxLabel:"Include 24/7 emergency service"},{id:"field-014",type:Xn.SIGNATURE,label:"Authorized Signature",x:100,y:400,width:200,height:60,required:!0}],createdAt:"2024-01-08T09:00:00Z",updatedAt:"2024-01-20T12:15:00Z",isActive:!0}],V_="agreement_templates";function O8(){const[t,e]=A.useState([]),[n,r]=A.useState(!0),[i,a]=A.useState(null);A.useEffect(()=>{try{const x=yr(V_,[]);x.length===0?(e(U_),Dn(V_,U_)):e(x)}catch(x){console.error("Error loading templates:",x),a("Failed to load templates"),e(U_)}finally{r(!1)}},[]);const o=A.useCallback(x=>{try{Dn(V_,x),e(x),a(null)}catch(y){console.error("Error saving templates:",y),a("Failed to save templates")}},[]),l=A.useCallback(()=>t,[t]),c=A.useCallback(x=>t.find(y=>y.id===x),[t]),d=A.useCallback(x=>{const y={...x,id:`template-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},b=[...t,y];return o(b),y},[t,o]),u=A.useCallback((x,y)=>{const b=t.map(w=>w.id===x?{...w,...y,updatedAt:new Date().toISOString()}:w);return o(b),b.find(w=>w.id===x)},[t,o]),h=A.useCallback(x=>{const y=t.filter(b=>b.id!==x);o(y)},[t,o]),f=A.useCallback(x=>{const y=t.find(N=>N.id===x);if(!y)throw new Error("Template not found");const b={...y,id:`template-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,name:`Copy of ${y.name}`,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),fields:y.fields.map(N=>({...N,id:`field-${Date.now()}-${Math.random().toString(36).substr(2,9)}`}))},w=[...t,b];return o(w),b},[t,o]),m=A.useCallback((x,y)=>{u(x,{fields:y})},[u]),v=A.useCallback((x,y)=>{const b=c(x);if(!b)return;const w=[...b.fields,y];u(x,{fields:w})},[c,u]),p=A.useCallback((x,y)=>{const b=c(x);if(!b)return;const w=b.fields.filter(N=>N.id!==y);u(x,{fields:w})},[c,u]),g=A.useCallback((x,y,b)=>{const w=c(x);if(!w)return;const N=w.fields.map(E=>E.id===y?{...E,...b}:E);u(x,{fields:N})},[c,u]);return{templates:t,loading:n,error:i,getTemplates:l,getTemplate:c,addTemplate:d,updateTemplate:u,deleteTemplate:h,duplicateTemplate:f,updateTemplateFields:m,addFieldToTemplate:v,removeFieldFromTemplate:p,updateFieldInTemplate:g}}function s5e({onSelect:t,onClose:e,onCreateNew:n}){const{templates:r,loading:i}=O8(),[a,o]=A.useState(""),l=r.filter(u=>{var h;return u.isActive&&(u.name.toLowerCase().includes(a.toLowerCase())||((h=u.description)==null?void 0:h.toLowerCase().includes(a.toLowerCase())))}),c=u=>{t(u),e()},d=()=>{e(),n&&n()};return s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:s.jsxs(he,{className:"w-full max-w-4xl max-h-[80vh] overflow-hidden",children:[s.jsx(ye,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx(be,{className:"text-xl",children:"Select Agreement Template"}),s.jsx(Be,{children:"Choose a template to start your new agreement"})]}),s.jsx(Q,{variant:"ghost",size:"sm",onClick:e,children:s.jsx(on,{className:"h-4 w-4"})})]})}),s.jsxs(fe,{className:"space-y-6",children:[s.jsxs("div",{className:"relative",children:[s.jsx(Rr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),s.jsx(Ae,{placeholder:"Search templates...",value:a,onChange:u=>o(u.target.value),className:"pl-10 shadow-sm"})]}),s.jsx("div",{className:"max-h-96 overflow-y-auto",children:i?s.jsx("div",{className:"flex items-center justify-center py-12",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):l.length>0?s.jsx("div",{className:"grid gap-4 md:grid-cols-2",children:l.map(u=>s.jsxs(he,{className:"cursor-pointer hover:shadow-md transition-shadow border-2 hover:border-primary/50",onClick:()=>c(u),children:[s.jsx(ye,{className:"pb-3",children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx(be,{className:"text-base",children:u.name}),u.description&&s.jsx(Be,{className:"mt-1 text-sm",children:u.description})]}),s.jsx(Re,{variant:"default",className:"ml-2",children:"Active"})]})}),s.jsxs(fe,{className:"pt-0",children:[s.jsxs("div",{className:"flex items-center justify-between text-sm text-muted-foreground",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx(Zt,{className:"h-4 w-4 mr-1"}),u.fields.length," fields"]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx(Sn,{className:"h-4 w-4 mr-1"}),ht(u.updatedAt)]})]}),s.jsx("div",{className:"mt-3",children:s.jsx(Q,{size:"sm",className:"w-full",onClick:h=>{h.stopPropagation(),c(u)},children:"Use This Template"})})]})]},u.id))}):s.jsxs("div",{className:"text-center py-12",children:[s.jsx(Zt,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),s.jsx("h3",{className:"text-lg font-semibold mb-2",children:a?"No templates found":"No templates available"}),s.jsx("p",{className:"text-muted-foreground mb-6",children:a?"Try adjusting your search terms":"Create your first template to get started"}),n&&s.jsxs(Q,{onClick:d,children:[s.jsx(yt,{className:"h-4 w-4 mr-2"}),"Create New Template"]})]})}),s.jsxs("div",{className:"flex justify-between items-center pt-4 border-t",children:[s.jsxs("div",{className:"flex items-center text-sm text-muted-foreground",children:[s.jsx(Zt,{className:"h-4 w-4 mr-1"}),l.length," template",l.length!==1?"s":""," available"]}),s.jsxs("div",{className:"flex space-x-3",children:[n&&s.jsxs(Q,{variant:"outline",onClick:d,children:[s.jsx(yt,{className:"h-4 w-4 mr-2"}),"Create New Template"]}),s.jsx(Q,{variant:"outline",onClick:e,children:"Cancel"})]})]})]})]})})}function i5e(){const t=Pm(),{toast:e}=Ot(),{templates:n,loading:r,deleteTemplate:i,duplicateTemplate:a}=O8(),[o,l]=A.useState(""),[c,d]=A.useState(null),u=n.filter(p=>{var g;return p.name.toLowerCase().includes(o.toLowerCase())||((g=p.description)==null?void 0:g.toLowerCase().includes(o.toLowerCase()))}),h=()=>{t("/agreements/templates/new")},f=p=>{t(`/agreements/templates/edit/${p}`)},m=async p=>{try{const g=a(p);e({title:"Template Duplicated",description:`Created "${g.name}" successfully.`})}catch{e({title:"Error",description:"Failed to duplicate template.",variant:"destructive"})}},v=async p=>{try{i(p),d(null),e({title:"Template Deleted",description:"Template has been removed successfully."})}catch{e({title:"Error",description:"Failed to delete template.",variant:"destructive"})}};return r?s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"ri-page-header",children:[s.jsx("h1",{className:"ri-page-title",children:"Agreement Templates"}),s.jsx("p",{className:"ri-page-description",children:"Manage your agreement templates"})]}),s.jsx("div",{className:"flex items-center justify-center py-12",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})})]}):s.jsxs("div",{className:"space-y-6",children:[c&&s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:s.jsxs(he,{className:"w-full max-w-md",children:[s.jsxs(ye,{children:[s.jsx(be,{children:"Delete Template"}),s.jsx(Be,{children:"Are you sure you want to delete this template? This action cannot be undone."})]}),s.jsx(fe,{children:s.jsxs("div",{className:"flex justify-end space-x-3",children:[s.jsx(Q,{variant:"outline",onClick:()=>d(null),children:"Cancel"}),s.jsx(Q,{variant:"destructive",onClick:()=>v(c),children:"Delete"})]})})]})}),s.jsx("div",{className:"ri-page-header",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"ri-page-title",children:"Agreement Templates"}),s.jsx("p",{className:"ri-page-description",children:"Create and manage reusable agreement templates"})]}),s.jsxs(Q,{onClick:h,className:"shadow-sm",children:[s.jsx(yt,{className:"h-4 w-4 mr-2"}),"Create Template"]})]})}),s.jsx(he,{className:"shadow-sm",children:s.jsx(fe,{className:"pt-6",children:s.jsx("div",{className:"flex items-center space-x-4",children:s.jsxs("div",{className:"ri-search-bar",children:[s.jsx(Rr,{className:"ri-search-icon"}),s.jsx(Ae,{placeholder:"Search templates...",value:o,onChange:p=>l(p.target.value),className:"ri-search-input"})]})})})}),u.length>0?s.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:u.map(p=>s.jsxs(he,{className:"shadow-sm hover:shadow-md transition-shadow",children:[s.jsx(ye,{children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx(be,{className:"text-lg",children:p.name}),p.description&&s.jsx(Be,{className:"mt-1",children:p.description})]}),s.jsx("div",{className:"flex items-center space-x-1",children:s.jsx(Re,{variant:p.isActive?"default":"secondary",children:p.isActive?"Active":"Inactive"})})]})}),s.jsxs(fe,{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between text-sm text-muted-foreground",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx(Zt,{className:"h-4 w-4 mr-1"}),p.fields.length," fields"]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx(Sn,{className:"h-4 w-4 mr-1"}),ht(p.updatedAt)]})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs(Q,{variant:"outline",size:"sm",onClick:()=>f(p.id),className:"flex-1 mr-2",children:[s.jsx(ar,{className:"h-3 w-3 mr-1"}),"Edit"]}),s.jsxs("div",{className:"flex space-x-1",children:[s.jsx(Q,{variant:"ghost",size:"sm",onClick:()=>m(p.id),title:"Duplicate",children:s.jsx(n3,{className:"h-3 w-3"})}),s.jsx(Q,{variant:"ghost",size:"sm",onClick:()=>d(p.id),title:"Delete",className:"text-red-600 hover:text-red-700",children:s.jsx(Tr,{className:"h-3 w-3"})})]})]})]})]},p.id))}):s.jsx(he,{className:"shadow-sm",children:s.jsxs(fe,{className:"text-center py-12",children:[s.jsx(Zt,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),s.jsx("h3",{className:"text-lg font-semibold mb-2",children:o?"No templates found":"No templates yet"}),s.jsx("p",{className:"text-muted-foreground mb-6",children:o?"Try adjusting your search terms":"Create your first agreement template to get started"}),!o&&s.jsxs(Q,{onClick:h,children:[s.jsx(yt,{className:"h-4 w-4 mr-2"}),"Create Your First Template"]})]})})]})}const dV=[{type:Xn.TEXT,label:"Text Field",icon:"Type",defaultSize:{width:200,height:30}},{type:Xn.DATE,label:"Date Field",icon:"Calendar",defaultSize:{width:150,height:30}},{type:Xn.SIGNATURE,label:"Signature",icon:"PenTool",defaultSize:{width:200,height:60}},{type:Xn.CHECKBOX,label:"Checkbox",icon:"CheckSquare",defaultSize:{width:20,height:20}}];function q_({type:t,className:e="h-4 w-4"}){switch(t){case Xn.TEXT:return s.jsx(yz,{className:e});case Xn.DATE:return s.jsx(Sn,{className:e});case Xn.SIGNATURE:return s.jsx(ope,{className:e});case Xn.CHECKBOX:return s.jsx(e3,{className:e});default:return s.jsx(yz,{className:e})}}function uV(){const{templateId:t}=Dfe(),e=Pm(),{toast:n}=Ot(),{getTemplate:r,addTemplate:i,updateTemplate:a}=O8(),[o,l]=A.useState(null),[c,d]=A.useState(""),[u,h]=A.useState(""),[f,m]=A.useState(null),[v,p]=A.useState(!1),[g,x]=A.useState({x:0,y:0}),[y,b]=A.useState(null),[w,N]=A.useState(""),[E,C]=A.useState(!1),j=A.useRef(null),I=A.useRef(null),k=A.useRef(null);A.useEffect(()=>{if(t){const $=r(t);$?(l($),d($.name),h($.description||""),N($.pdfBase64)):(n({title:"Template Not Found",description:"The requested template could not be found.",variant:"destructive"}),e("/agreements/templates"))}else l({id:"",name:"",description:"",pdfBase64:"",fields:[],createdAt:"",updatedAt:"",isActive:!0})},[t,r,e,n]);const D=A.useCallback(async()=>{if(!(!w||!j.current))try{const $=await Lj(()=>Promise.resolve().then(()=>nfe),void 0);$.GlobalWorkerOptions.workerSrc=`//cdnjs.cloudflare.com/ajax/libs/pdf.js/${$.version}/pdf.worker.min.js`;const L=j.current,q=L.getContext("2d");if(!q)return;const Y=atob(w),J=new Uint8Array(Y.length);for(let xe=0;xe<Y.length;xe++)J[xe]=Y.charCodeAt(xe);const re=await(await $.getDocument({data:J}).promise).getPage(1),pe=re.getViewport({scale:1.5});L.width=pe.width,L.height=pe.height;const ue={canvasContext:q,viewport:pe};await re.render(ue).promise}catch($){console.error("Error rendering PDF:",$),n({title:"PDF Rendering Error",description:"Failed to render the PDF. Please try uploading a different file.",variant:"destructive"})}},[w,n]);A.useEffect(()=>{w&&D()},[w,D]);const P=$=>{var Y;const L=(Y=$.target.files)==null?void 0:Y[0];if(!L)return;if(L.type!=="application/pdf"){n({title:"Invalid File Type",description:"Please upload a PDF file.",variant:"destructive"});return}b(L);const q=new FileReader;q.onload=J=>{var pe;const re=((pe=J.target)==null?void 0:pe.result).split(",")[1];N(re)},q.readAsDataURL(L)},R=($,L,q)=>{if(!o)return;const Y=dV.find(re=>re.type===$);if(!Y)return;const J={id:`field-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,type:$,label:`${Y.label} ${o.fields.length+1}`,x:L,y:q,width:Y.defaultSize.width,height:Y.defaultSize.height,required:!1,...$===Xn.TEXT&&{defaultValue:"",placeholder:"Enter text"},...$===Xn.DATE&&{format:"MM/dd/yyyy"},...$===Xn.CHECKBOX&&{defaultChecked:!1,checkboxLabel:"Check this box"}},ne={...o,fields:[...o.fields,J]};l(ne),m(J)},_=$=>{if(!j.current||!k.current)return;const L=k.current.getBoundingClientRect(),q=$.clientX-L.left,Y=$.clientY-L.top,J=o==null?void 0:o.fields.find(ne=>q>=ne.x&&q<=ne.x+ne.width&&Y>=ne.y&&Y<=ne.y+ne.height);m(J||null)},M=($,L)=>{var Y;$.stopPropagation(),m(L),p(!0);const q=(Y=k.current)==null?void 0:Y.getBoundingClientRect();q&&x({x:$.clientX-q.left-L.x,y:$.clientY-q.top-L.y})},U=A.useCallback($=>{if(!v||!f||!k.current||!o)return;const L=k.current.getBoundingClientRect(),q=Math.max(0,$.clientX-L.left-g.x),Y=Math.max(0,$.clientY-L.top-g.y),J=o.fields.map(ne=>ne.id===f.id?{...ne,x:q,y:Y}:ne);l({...o,fields:J}),m({...f,x:q,y:Y})},[v,f,g,o]),F=A.useCallback(()=>{p(!1)},[]);A.useEffect(()=>{if(v)return document.addEventListener("mousemove",U),document.addEventListener("mouseup",F),()=>{document.removeEventListener("mousemove",U),document.removeEventListener("mouseup",F)}},[v,U,F]);const z=($,L,q)=>{if(!o)return;const Y=o.fields.map(ne=>ne.id===$?{...ne,[L]:q}:ne),J={...o,fields:Y};l(J),(f==null?void 0:f.id)===$&&m({...f,[L]:q})},H=$=>{if(!o)return;const L=o.fields.filter(q=>q.id!==$);l({...o,fields:L}),(f==null?void 0:f.id)===$&&m(null)},W=async()=>{if(!o||!c.trim()){n({title:"Validation Error",description:"Please provide a template name.",variant:"destructive"});return}if(!w){n({title:"Validation Error",description:"Please upload a PDF file.",variant:"destructive"});return}C(!0);try{const $={name:c,description:u,pdfBase64:w,fields:o.fields,isActive:!0};t?(a(t,$),n({title:"Template Updated",description:"Template has been saved successfully."})):(i($),n({title:"Template Created",description:"Template has been created successfully."})),e("/agreements/templates")}catch{n({title:"Save Error",description:"Failed to save template. Please try again.",variant:"destructive"})}finally{C(!1)}};return o?s.jsx(wte,{children:s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"ri-page-header",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsxs(Q,{variant:"ghost",size:"sm",onClick:()=>e("/agreements/templates"),children:[s.jsx(WR,{className:"h-4 w-4 mr-2"}),"Back to Templates"]}),s.jsxs("div",{children:[s.jsx("h1",{className:"ri-page-title",children:t?"Edit Template":"Create Template"}),s.jsx("p",{className:"ri-page-description",children:"Design your agreement template with interactive fields"})]})]}),s.jsx(Q,{onClick:W,disabled:E,children:E?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Saving..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Wn,{className:"h-4 w-4 mr-2"}),"Save Template"]})})]})}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[s.jsxs("div",{className:"lg:col-span-1 space-y-6",children:[s.jsxs(he,{className:"shadow-sm",children:[s.jsx(ye,{children:s.jsx(be,{className:"text-lg",children:"Template Information"})}),s.jsxs(fe,{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"templateName",children:"Template Name *"}),s.jsx(Ae,{id:"templateName",value:c,onChange:$=>d($.target.value),placeholder:"Enter template name",className:"shadow-sm"})]}),s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"templateDescription",children:"Description"}),s.jsx(un,{id:"templateDescription",value:u,onChange:$=>h($.target.value),placeholder:"Enter template description",className:"shadow-sm",rows:3})]}),s.jsxs("div",{children:[s.jsx(ae,{children:"PDF Document"}),s.jsxs("div",{className:"mt-2",children:[s.jsxs(Q,{variant:"outline",onClick:()=>{var $;return($=I.current)==null?void 0:$.click()},className:"w-full",children:[s.jsx(Cd,{className:"h-4 w-4 mr-2"}),y?y.name:"Upload PDF"]}),s.jsx("input",{ref:I,type:"file",accept:".pdf",onChange:P,className:"hidden"})]})]})]})]}),s.jsxs(he,{className:"shadow-sm",children:[s.jsxs(ye,{children:[s.jsx(be,{className:"text-lg",children:"Field Toolbox"}),s.jsx(Be,{children:"Click on a field type, then click on the PDF to place it"})]}),s.jsx(fe,{className:"space-y-3",children:dV.map($=>s.jsxs(Q,{variant:"outline",className:"w-full justify-start",onClick:()=>{const L=j.current?j.current.width/2-$.defaultSize.width/2:100,q=j.current?j.current.height/2-$.defaultSize.height/2:100;R($.type,L,q)},children:[s.jsx(q_,{type:$.type,className:"h-4 w-4 mr-2"}),$.label]},$.type))})]}),s.jsxs(he,{className:"shadow-sm",children:[s.jsx(ye,{children:s.jsxs(be,{className:"text-lg",children:["Fields (",o.fields.length,")"]})}),s.jsx(fe,{children:o.fields.length>0?s.jsx("div",{className:"space-y-2",children:o.fields.map($=>s.jsxs("div",{className:`flex items-center justify-between p-2 rounded-md border cursor-pointer transition-colors ${(f==null?void 0:f.id)===$.id?"bg-primary/10 border-primary":"hover:bg-accent"}`,onClick:()=>m($),children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(q_,{type:$.type,className:"h-3 w-3"}),s.jsx("span",{className:"text-sm font-medium",children:$.label}),$.required&&s.jsx(Re,{variant:"secondary",className:"text-xs",children:"Required"})]}),s.jsx(Q,{variant:"ghost",size:"sm",onClick:L=>{L.stopPropagation(),H($.id)},className:"h-6 w-6 p-0 text-red-600 hover:text-red-700",children:s.jsx(Tr,{className:"h-3 w-3"})})]},$.id))}):s.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No fields added yet. Use the toolbox to add fields."})})]})]}),s.jsx("div",{className:"lg:col-span-2",children:s.jsxs(he,{className:"shadow-sm",children:[s.jsxs(ye,{children:[s.jsx(be,{className:"text-lg",children:"Template Preview"}),s.jsx(Be,{children:"Click to select fields, drag to move them"})]}),s.jsx(fe,{children:s.jsx("div",{ref:k,className:"relative border rounded-lg overflow-auto bg-gray-50",style:{minHeight:"600px"},onClick:_,children:w?s.jsxs(s.Fragment,{children:[s.jsx("canvas",{ref:j,className:"block mx-auto",style:{maxWidth:"100%",height:"auto"}}),o.fields.map($=>s.jsxs("div",{className:`absolute border-2 cursor-move flex items-center justify-center text-xs font-medium bg-white/80 ${(f==null?void 0:f.id)===$.id?"border-primary bg-primary/10":"border-gray-400 hover:border-gray-600"}`,style:{left:$.x,top:$.y,width:$.width,height:$.height},onMouseDown:L=>M(L,$),children:[s.jsx(q_,{type:$.type,className:"h-3 w-3 mr-1"}),$.label]},$.id))]}):s.jsx("div",{className:"flex items-center justify-center h-96 text-muted-foreground",children:s.jsxs("div",{className:"text-center",children:[s.jsx(Cd,{className:"h-12 w-12 mx-auto mb-4"}),s.jsx("p",{children:"Upload a PDF to start designing your template"})]})})})})]})}),s.jsx("div",{className:"lg:col-span-1",children:s.jsxs(he,{className:"shadow-sm",children:[s.jsx(ye,{children:s.jsxs(be,{className:"text-lg",children:[s.jsx(Wa,{className:"h-4 w-4 mr-2 inline"}),"Field Properties"]})}),s.jsx(fe,{children:f?s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"fieldLabel",children:"Field Label"}),s.jsx(Ae,{id:"fieldLabel",value:f.label,onChange:$=>z(f.id,"label",$.target.value),className:"shadow-sm"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx($t,{id:"fieldRequired",checked:f.required,onCheckedChange:$=>z(f.id,"required",$)}),s.jsx(ae,{htmlFor:"fieldRequired",children:"Required field"})]}),f.type===Xn.TEXT&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"fieldDefaultValue",children:"Default Value"}),s.jsx(Ae,{id:"fieldDefaultValue",value:f.defaultValue||"",onChange:$=>z(f.id,"defaultValue",$.target.value),className:"shadow-sm"})]}),s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"fieldPlaceholder",children:"Placeholder"}),s.jsx(Ae,{id:"fieldPlaceholder",value:f.placeholder||"",onChange:$=>z(f.id,"placeholder",$.target.value),className:"shadow-sm"})]})]}),f.type===Xn.DATE&&s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"fieldFormat",children:"Date Format"}),s.jsx(Ae,{id:"fieldFormat",value:f.format||"MM/dd/yyyy",onChange:$=>z(f.id,"format",$.target.value),className:"shadow-sm"})]}),f.type===Xn.CHECKBOX&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx($t,{id:"fieldDefaultChecked",checked:f.defaultChecked||!1,onCheckedChange:$=>z(f.id,"defaultChecked",$)}),s.jsx(ae,{htmlFor:"fieldDefaultChecked",children:"Default checked"})]}),s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"fieldCheckboxLabel",children:"Checkbox Label"}),s.jsx(Ae,{id:"fieldCheckboxLabel",value:f.checkboxLabel||"",onChange:$=>z(f.id,"checkboxLabel",$.target.value),className:"shadow-sm"})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"fieldWidth",children:"Width"}),s.jsx(Ae,{id:"fieldWidth",type:"number",value:f.width,onChange:$=>z(f.id,"width",parseInt($.target.value)),className:"shadow-sm"})]}),s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"fieldHeight",children:"Height"}),s.jsx(Ae,{id:"fieldHeight",type:"number",value:f.height,onChange:$=>z(f.id,"height",parseInt($.target.value)),className:"shadow-sm"})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"fieldX",children:"X Position"}),s.jsx(Ae,{id:"fieldX",type:"number",value:f.x,onChange:$=>z(f.id,"x",parseInt($.target.value)),className:"shadow-sm"})]}),s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"fieldY",children:"Y Position"}),s.jsx(Ae,{id:"fieldY",type:"number",value:f.y,onChange:$=>z(f.id,"y",parseInt($.target.value)),className:"shadow-sm"})]})]}),s.jsxs(Q,{variant:"destructive",size:"sm",onClick:()=>H(f.id),className:"w-full",children:[s.jsx(Tr,{className:"h-3 w-3 mr-2"}),"Delete Field"]})]}):s.jsx("p",{className:"text-sm text-muted-foreground text-center py-8",children:"Select a field to edit its properties"})})]})})]})]})}):s.jsx("div",{className:"flex items-center justify-center py-12",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})})}function hV(){const t=Pm(),{toast:e}=Ot(),[n,r]=A.useState(""),[i]=A.useState(_x.sampleAgreements),[a,o]=A.useState("all"),[l,c]=A.useState(!1),[d,u]=A.useState(null);A.useState(null);const[h,f]=A.useState("all"),m=i.filter(N=>{var I,k;const E=((I=N.customerName)==null?void 0:I.toLowerCase().includes(n.toLowerCase()))||((k=N.vehicleInfo)==null?void 0:k.toLowerCase().includes(n.toLowerCase()))||N.id.toLowerCase().includes(n.toLowerCase()),C=a==="all"||N.type===a,j=h==="all"||N.status===h;return E&&C&&j}),v=N=>{const E=_x.agreementStatuses.find(C=>C.value===N);return E?s.jsx(Re,{className:E.color,children:E.label}):null},p=N=>{u(N),setShowNewAgreementForm(!0)},g=()=>{t("/agreements/templates/new"),t("/agreements/templates/new")},x=N=>{const E=_x.agreementTypes.find(C=>C.value===N);return E?E.label:N},y=N=>{e({title:"Opening Agreement",description:`Opening agreement ${N} for review`})},b=N=>{e({title:"Signature Request Sent",description:`Signature request sent for agreement ${N}`})},w=N=>{e({description:`Downloading agreement ${N}`})};return s.jsxs("div",{className:"space-y-6",children:[l&&s.jsx(s5e,{onSelect:p,onClose:()=>c(!1),onCreateNew:g}),s.jsx("div",{className:"ri-page-header",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"ri-page-title",children:"Agreement Vault"}),s.jsx("p",{className:"ri-page-description",children:"Manage contracts, agreements, and digital signatures"})]}),s.jsxs(Q,{className:"shadow-sm",children:[s.jsx(yt,{className:"h-4 w-4 mr-2"}),"New Agreement",s.jsxs(Q,{variant:"outline",onClick:()=>t("/agreements/templates"),className:"shadow-sm",children:[s.jsx(Wa,{className:"h-4 w-4 mr-2"}),"Manage Templates"]})]})]})}),s.jsx(he,{className:"shadow-sm",children:s.jsx(fe,{className:"pt-6",children:s.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[s.jsxs("div",{className:"ri-search-bar",children:[s.jsx(Rr,{className:"ri-search-icon"}),s.jsx(Ae,{className:"ri-search-input shadow-sm",placeholder:"Search agreements...",value:n,onChange:N=>r(N.target.value)})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("select",{value:a,onChange:N=>o(N.target.value),className:"px-3 py-2 border rounded-md shadow-sm",children:[s.jsx("option",{value:"all",children:"All Types"}),_x.agreementTypes.map(N=>s.jsx("option",{value:N.value,children:N.label},N.value))]}),s.jsxs("select",{value:h,onChange:N=>f(N.target.value),className:"px-3 py-2 border rounded-md shadow-sm",children:[s.jsx("option",{value:"all",children:"All Statuses"}),_x.agreementStatuses.map(N=>s.jsx("option",{value:N.value,children:N.label},N.value))]})]})]})})}),s.jsxs(he,{className:"shadow-sm",children:[s.jsxs(ye,{children:[s.jsx(be,{children:"Agreements"}),s.jsxs(Be,{children:[m.length," agreement",m.length!==1?"s":""," found"]})]}),s.jsxs(fe,{children:[s.jsxs(L3,{children:[s.jsx(R3,{children:s.jsxs(im,{children:[s.jsx(xr,{children:"Agreement ID"}),s.jsx(xr,{children:"Customer"}),s.jsx(xr,{children:"Type"}),s.jsx(xr,{children:"Vehicle"}),s.jsx(xr,{children:"Status"}),s.jsx(xr,{children:"Amount"}),s.jsx(xr,{children:"Created"}),s.jsx(xr,{children:"Actions"})]})}),s.jsx(M3,{children:m.map(N=>s.jsxs(im,{children:[s.jsx(ur,{className:"font-medium",children:N.id}),s.jsx(ur,{children:s.jsxs("div",{children:[s.jsx("div",{className:"font-medium",children:N.customerName}),s.jsx("div",{className:"text-sm text-muted-foreground",children:N.customerEmail})]})}),s.jsx(ur,{children:s.jsx(Re,{variant:"outline",children:x(N.type)})}),s.jsx(ur,{children:s.jsx("div",{className:"text-sm",children:N.vehicleInfo||"N/A"})}),s.jsx(ur,{children:v(N.status)}),s.jsx(ur,{children:N.totalAmount?Le(N.totalAmount):"N/A"}),s.jsx(ur,{children:ht(N.createdAt)}),s.jsx(ur,{children:s.jsxs("div",{className:"ri-action-buttons",children:[s.jsx(Q,{variant:"ghost",size:"sm",onClick:()=>y(N.id),children:s.jsx(Wr,{className:"h-4 w-4"})}),s.jsx(Q,{variant:"ghost",size:"sm",onClick:()=>w(N.id),children:s.jsx(Ha,{className:"h-4 w-4"})}),N.status==="PENDING"&&s.jsx(Q,{variant:"ghost",size:"sm",onClick:()=>b(N.id),children:s.jsx(Do,{className:"h-4 w-4"})})]})})]},N.id))})]}),m.length===0&&s.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[s.jsx(Zt,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),s.jsx("p",{children:"No agreements found"}),s.jsx("p",{className:"text-sm",children:"Try adjusting your search or filters"})]})]})]})]})}function a5e(){return s.jsxs(ki,{children:[s.jsx(It,{path:"/",element:s.jsx(hV,{})}),s.jsx(It,{path:"/templates",element:s.jsx(i5e,{})}),s.jsx(It,{path:"/templates/new",element:s.jsx(uV,{})}),s.jsx(It,{path:"/templates/edit/:templateId",element:s.jsx(uV,{})}),s.jsx(It,{path:"/*",element:s.jsx(hV,{})})]})}function Lre(){const[t,e]=A.useState([]),[n,r]=A.useState(!1);A.useEffect(()=>{i()},[]);const i=()=>{const g=yr("renter-insight-service-tickets",[{id:"1",customerId:"cust-1",vehicleId:"veh-1",title:"Annual Maintenance Service",description:"Complete annual maintenance including oil change, filter replacement, and system checks",priority:Ci.MEDIUM,status:Ur.IN_PROGRESS,assignedTo:"Tech-001",scheduledDate:new Date("2024-01-20"),parts:[{id:"1",partNumber:"OIL-001",description:"Engine Oil Filter",quantity:1,unitCost:25.99,total:25.99}],labor:[{id:"1",description:"Annual Maintenance",hours:3,rate:85,total:255}],notes:"Customer requested additional inspection of brake system",customFields:{warrantyStatus:"not_covered",estimatedCompletionDate:"2024-01-22",customerAuthorization:!0,technicianNotes:"Check brake pads and rotors during service",customerPortalAccess:!0},createdAt:new Date("2024-01-15"),updatedAt:new Date("2024-01-18")},{id:"2",customerId:"cust-2",vehicleId:"veh-2",title:"AC System Repair",description:"Air conditioning not cooling properly, needs diagnostic and repair",priority:Ci.HIGH,status:Ur.WAITING_PARTS,assignedTo:"Tech-002",scheduledDate:new Date("2024-01-22"),parts:[{id:"2",partNumber:"AC-COMP-001",description:"AC Compressor",quantity:1,unitCost:450,total:450}],labor:[{id:"2",description:"AC System Diagnostic",hours:2,rate:85,total:170}],notes:"Waiting for compressor part to arrive",customFields:{warrantyStatus:"partial",estimatedCompletionDate:"2024-01-25",customerAuthorization:!0,technicianNotes:"Compressor needs replacement, on order from supplier",customerPortalAccess:!0},createdAt:new Date("2024-01-12"),updatedAt:new Date("2024-01-16")}]);e(g)},a=g=>{Dn("renter-insight-service-tickets",g)};return{tickets:t,loading:n,getTicketsByCustomerId:g=>t.filter(x=>x.customerId===g),getTicketsByVehicleId:g=>t.filter(x=>x.vehicleId===g),getTicketById:g=>t.find(x=>x.id===g),createTicket:async g=>{r(!0);try{const x={id:Math.random().toString(36).substr(2,9),customerId:g.customerId||"",vehicleId:g.vehicleId,title:g.title||"",description:g.description||"",priority:g.priority||Ci.MEDIUM,status:g.status||Ur.OPEN,assignedTo:g.assignedTo,scheduledDate:g.scheduledDate,parts:g.parts||[],labor:g.labor||[],notes:g.notes||"",customFields:g.customFields||{},createdAt:new Date,updatedAt:new Date},y=[...t,x];return e(y),a(y),x}finally{r(!1)}},updateTicket:async(g,x)=>{const y=t.map(b=>b.id===g?{...b,...x,updatedAt:new Date}:b);e(y),a(y)},deleteTicket:async g=>{const x=t.filter(y=>y.id!==g);e(x),a(x)},updateTicketStatus:async(g,x)=>{const y=t.map(b=>b.id===g?{...b,status:x,completedDate:x===Ur.COMPLETED?new Date:b.completedDate,updatedAt:new Date}:b);e(y),a(y)},assignTechnician:async(g,x)=>{const y=t.map(b=>b.id===g?{...b,assignedTo:x,updatedAt:new Date}:b);e(y),a(y)},addPart:async(g,x)=>{if(!t.find(N=>N.id===g))return null;const b={id:Math.random().toString(36).substr(2,9),partNumber:x.partNumber||"",description:x.description||"",quantity:x.quantity||1,unitCost:x.unitCost||0,total:x.total||0},w=t.map(N=>N.id===g?{...N,parts:[...N.parts,b],updatedAt:new Date}:N);return e(w),a(w),b},addLabor:async(g,x)=>{if(!t.find(N=>N.id===g))return null;const b={id:Math.random().toString(36).substr(2,9),description:x.description||"",hours:x.hours||1,rate:x.rate||85,total:x.total||85},w=t.map(N=>N.id===g?{...N,labor:[...N.labor,b],updatedAt:new Date}:N);return e(w),a(w),b}}}function o5e({ticket:t,onSave:e,onCancel:n}){var _,M,U,F,z,H,W;const{toast:r}=Ot(),{vehicles:i}=Im(),{leads:a}=uh(),[o,l]=A.useState(!1),[c,d]=A.useState(!1),[u,h]=A.useState({customerId:"",vehicleId:"",title:"",description:"",priority:Ci.MEDIUM,status:Ur.OPEN,assignedTo:"",scheduledDate:void 0,notes:"",parts:[],labor:[],customFields:{warrantyStatus:"not_covered",estimatedCompletionDate:"",customerAuthorization:!1,technicianNotes:"",customerPortalAccess:!0}}),[f,m]=A.useState(!1),[v,p]=A.useState(!1),[g,x]=A.useState({partNumber:"",description:"",quantity:1,unitCost:0,total:0}),[y,b]=A.useState({description:"",hours:1,rate:85,total:85});A.useEffect(()=>{var $,L,q,Y,J;t&&h({...t,customFields:{...t.customFields,warrantyStatus:(($=t.customFields)==null?void 0:$.warrantyStatus)||"not_covered",estimatedCompletionDate:((L=t.customFields)==null?void 0:L.estimatedCompletionDate)||"",customerAuthorization:((q=t.customFields)==null?void 0:q.customerAuthorization)||!1,technicianNotes:((Y=t.customFields)==null?void 0:Y.technicianNotes)||"",customerPortalAccess:((J=t.customFields)==null?void 0:J.customerPortalAccess)!==!1}})},[t]),A.useEffect(()=>{const $=g.quantity||1,L=g.unitCost||0;x(q=>({...q,total:$*L}))},[g.quantity,g.unitCost]),A.useEffect(()=>{const $=y.hours||1,L=y.rate||85;b(q=>({...q,total:$*L}))},[y.hours,y.rate]);const w=async $=>{if($.preventDefault(),!u.customerId||!u.title||!u.description){r({title:"Validation Error",description:"Please fill in all required fields",variant:"destructive"});return}l(!0);try{await e(u),r({title:"Success",description:`Service ticket ${t?"updated":"created"} successfully`})}catch{r({title:"Error",description:`Failed to ${t?"update":"create"} service ticket`,variant:"destructive"})}finally{l(!1)}},N=$=>{$==="add-new"?d(!0):h(L=>({...L,customerId:$}))},E=$=>{h(L=>({...L,customerId:$.id})),d(!1),r({title:"Customer Added",description:`${$.firstName} ${$.lastName} has been added as a customer.`})},C=()=>{if(!g.partNumber||!g.description){r({title:"Validation Error",description:"Part number and description are required",variant:"destructive"});return}const $={id:Math.random().toString(36).substr(2,9),partNumber:g.partNumber||"",description:g.description||"",quantity:g.quantity||1,unitCost:g.unitCost||0,total:g.total||0};h(L=>({...L,parts:[...L.parts||[],$]})),x({partNumber:"",description:"",quantity:1,unitCost:0,total:0}),m(!1)},j=$=>{h(L=>{var q;return{...L,parts:((q=L.parts)==null?void 0:q.filter(Y=>Y.id!==$))||[]}})},I=()=>{if(!y.description){r({title:"Validation Error",description:"Labor description is required",variant:"destructive"});return}const $={id:Math.random().toString(36).substr(2,9),description:y.description||"",hours:y.hours||1,rate:y.rate||85,total:y.total||85};h(L=>({...L,labor:[...L.labor||[],$]})),b({description:"",hours:1,rate:85,total:85}),p(!1)},k=$=>{h(L=>{var q;return{...L,labor:((q=L.labor)==null?void 0:q.filter(Y=>Y.id!==$))||[]}})},P=(()=>{var q,Y;const $=((q=u.parts)==null?void 0:q.reduce((J,ne)=>J+ne.total,0))||0,L=((Y=u.labor)==null?void 0:Y.reduce((J,ne)=>J+ne.total,0))||0;return{partsTotal:$,laborTotal:L,grandTotal:$+L}})(),R=[{id:"Tech-001",name:"John Smith"},{id:"Tech-002",name:"Sarah Johnson"},{id:"Tech-003",name:"Mike Davis"}];return s.jsxs("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:[c&&s.jsx(Yb,{onClose:()=>d(!1),onSuccess:E}),s.jsxs(he,{className:"w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[s.jsx(ye,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx(be,{children:t?"Edit Service Ticket":"Create Service Ticket"}),s.jsx(Be,{children:t?"Update service ticket details":"Create a new service ticket"})]}),s.jsx(Q,{variant:"ghost",size:"sm",onClick:n,children:s.jsx(on,{className:"h-4 w-4"})})]})}),s.jsx(fe,{children:s.jsxs("form",{onSubmit:w,className:"space-y-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-semibold",children:"Ticket Information"}),s.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"customerId",children:"Customer *"}),s.jsxs(Ke,{value:u.customerId,onValueChange:N,children:[s.jsx(He,{children:s.jsx(Ye,{placeholder:"Select customer"})}),s.jsxs(We,{children:[s.jsx("div",{className:"px-2 py-1.5",children:s.jsxs(Q,{variant:"outline",size:"sm",className:"w-full justify-start",onClick:()=>N("add-new"),children:[s.jsx(yt,{className:"h-3.5 w-3.5 mr-2"}),"Add New Customer"]})}),s.jsx("div",{className:"px-2 py-1 border-t"}),a.map($=>s.jsxs(le,{value:$.id,children:[$.firstName," ",$.lastName]},$.id))]})]})]}),s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"vehicleId",children:"Vehicle"}),s.jsxs(Ke,{value:u.vehicleId,onValueChange:$=>h(L=>({...L,vehicleId:$})),children:[s.jsx(He,{children:s.jsx(Ye,{placeholder:"Select vehicle (optional)"})}),s.jsxs(We,{children:[s.jsx(le,{value:"",children:"No Vehicle"}),i.map($=>s.jsxs(le,{value:$.id,children:[$.year," ",$.make," ",$.model]},$.id))]})]})]})]}),s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"title",children:"Service Title *"}),s.jsx(Ae,{id:"title",value:u.title,onChange:$=>h(L=>({...L,title:$.target.value})),placeholder:"e.g., Annual Maintenance Service"})]}),s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"description",children:"Description *"}),s.jsx(un,{id:"description",value:u.description,onChange:$=>h(L=>({...L,description:$.target.value})),placeholder:"Describe the service needed",rows:3})]}),s.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"priority",children:"Priority"}),s.jsxs(Ke,{value:u.priority,onValueChange:$=>h(L=>({...L,priority:$})),children:[s.jsx(He,{children:s.jsx(Ye,{})}),s.jsxs(We,{children:[s.jsx(le,{value:Ci.LOW,children:"Low"}),s.jsx(le,{value:Ci.MEDIUM,children:"Medium"}),s.jsx(le,{value:Ci.HIGH,children:"High"}),s.jsx(le,{value:Ci.URGENT,children:"Urgent"})]})]})]}),s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"status",children:"Status"}),s.jsxs(Ke,{value:u.status,onValueChange:$=>h(L=>({...L,status:$})),children:[s.jsx(He,{children:s.jsx(Ye,{})}),s.jsxs(We,{children:[s.jsx(le,{value:Ur.OPEN,children:"Open"}),s.jsx(le,{value:Ur.IN_PROGRESS,children:"In Progress"}),s.jsx(le,{value:Ur.WAITING_PARTS,children:"Waiting for Parts"}),s.jsx(le,{value:Ur.COMPLETED,children:"Completed"}),s.jsx(le,{value:Ur.CANCELLED,children:"Cancelled"})]})]})]}),s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"assignedTo",children:"Assigned Technician"}),s.jsxs(Ke,{value:u.assignedTo,onValueChange:$=>h(L=>({...L,assignedTo:$})),children:[s.jsx(He,{children:s.jsx(Ye,{placeholder:"Select technician"})}),s.jsxs(We,{children:[s.jsx(le,{value:"",children:"Unassigned"}),R.map($=>s.jsx(le,{value:$.id,children:$.name},$.id))]})]})]})]}),s.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"scheduledDate",children:"Scheduled Date"}),s.jsx(Ae,{id:"scheduledDate",type:"date",value:u.scheduledDate?new Date(u.scheduledDate).toISOString().split("T")[0]:"",onChange:$=>h(L=>({...L,scheduledDate:$.target.value?new Date($.target.value):void 0}))})]}),s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"estimatedCompletionDate",children:"Estimated Completion"}),s.jsx(Ae,{id:"estimatedCompletionDate",type:"date",value:((_=u.customFields)==null?void 0:_.estimatedCompletionDate)||"",onChange:$=>h(L=>({...L,customFields:{...L.customFields,estimatedCompletionDate:$.target.value}}))})]})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-semibold",children:"Warranty Information"}),s.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"warrantyStatus",children:"Warranty Status"}),s.jsxs(Ke,{value:((M=u.customFields)==null?void 0:M.warrantyStatus)||"not_covered",onValueChange:$=>h(L=>({...L,customFields:{...L.customFields,warrantyStatus:$}})),children:[s.jsx(He,{children:s.jsx(Ye,{})}),s.jsxs(We,{children:[s.jsx(le,{value:"covered",children:"Covered by Warranty"}),s.jsx(le,{value:"partial",children:"Partially Covered"}),s.jsx(le,{value:"not_covered",children:"Not Covered"}),s.jsx(le,{value:"extended",children:"Extended Warranty"}),s.jsx(le,{value:"expired",children:"Warranty Expired"})]})]})]}),s.jsxs("div",{className:"flex items-center space-x-2 pt-8",children:[s.jsx($t,{id:"customerAuthorization",checked:((U=u.customFields)==null?void 0:U.customerAuthorization)||!1,onCheckedChange:$=>h(L=>({...L,customFields:{...L.customFields,customerAuthorization:!!$}}))}),s.jsx(ae,{htmlFor:"customerAuthorization",children:"Customer has authorized work"})]})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h3",{className:"text-lg font-semibold",children:"Parts"}),s.jsxs(Q,{type:"button",onClick:()=>m(!0),size:"sm",children:[s.jsx(yt,{className:"h-4 w-4 mr-2"}),"Add Part"]})]}),f&&s.jsx(he,{className:"border-dashed",children:s.jsxs(fe,{className:"pt-6",children:[s.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"partNumber",children:"Part Number *"}),s.jsx(Ae,{id:"partNumber",value:g.partNumber,onChange:$=>x(L=>({...L,partNumber:$.target.value})),placeholder:"e.g., AC-COMP-001"})]}),s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"partDescription",children:"Description *"}),s.jsx(Ae,{id:"partDescription",value:g.description,onChange:$=>x(L=>({...L,description:$.target.value})),placeholder:"e.g., AC Compressor"})]}),s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"partQuantity",children:"Quantity"}),s.jsx(Ae,{id:"partQuantity",type:"number",min:"1",value:g.quantity,onChange:$=>x(L=>({...L,quantity:parseInt($.target.value)||1}))})]}),s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"partUnitCost",children:"Unit Cost"}),s.jsx(Ae,{id:"partUnitCost",type:"number",step:"0.01",min:"0",value:g.unitCost,onChange:$=>x(L=>({...L,unitCost:parseFloat($.target.value)||0}))})]})]}),s.jsxs("div",{className:"flex justify-between items-center mt-4",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-sm font-medium",children:"Total: "}),s.jsx("span",{className:"font-bold",children:Le(g.total||0)})]}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsx(Q,{type:"button",variant:"outline",onClick:()=>m(!1),children:"Cancel"}),s.jsx(Q,{type:"button",onClick:C,children:"Add Part"})]})]})]})}),s.jsx("div",{className:"space-y-3",children:u.parts&&u.parts.length>0?u.parts.map($=>s.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("span",{className:"font-medium",children:$.description}),s.jsx(Re,{variant:"outline",children:$.partNumber})]}),s.jsxs("p",{className:"text-sm text-muted-foreground",children:["Quantity: ",$.quantity,"  ",Le($.unitCost)]})]}),s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("span",{className:"font-bold",children:Le($.total)}),s.jsx(Q,{type:"button",variant:"ghost",size:"sm",onClick:()=>j($.id),children:s.jsx(Tr,{className:"h-4 w-4 text-red-500"})})]})]},$.id)):s.jsxs("div",{className:"text-center py-6 text-muted-foreground border-2 border-dashed rounded-lg",children:[s.jsx(pl,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),s.jsx("p",{children:"No parts added yet"}),s.jsx("p",{className:"text-sm",children:"Add parts needed for this service"})]})})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h3",{className:"text-lg font-semibold",children:"Labor"}),s.jsxs(Q,{type:"button",onClick:()=>p(!0),size:"sm",children:[s.jsx(yt,{className:"h-4 w-4 mr-2"}),"Add Labor"]})]}),v&&s.jsx(he,{className:"border-dashed",children:s.jsxs(fe,{className:"pt-6",children:[s.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[s.jsxs("div",{className:"md:col-span-3",children:[s.jsx(ae,{htmlFor:"laborDescription",children:"Description *"}),s.jsx(Ae,{id:"laborDescription",value:y.description,onChange:$=>b(L=>({...L,description:$.target.value})),placeholder:"e.g., Diagnostic and Repair"})]}),s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"laborHours",children:"Hours"}),s.jsx(Ae,{id:"laborHours",type:"number",step:"0.5",min:"0.5",value:y.hours,onChange:$=>b(L=>({...L,hours:parseFloat($.target.value)||1}))})]}),s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"laborRate",children:"Hourly Rate"}),s.jsx(Ae,{id:"laborRate",type:"number",step:"0.01",min:"0",value:y.rate,onChange:$=>b(L=>({...L,rate:parseFloat($.target.value)||85}))})]}),s.jsxs("div",{children:[s.jsx(ae,{children:"Total"}),s.jsx("div",{className:"h-10 px-3 py-2 rounded-md border border-input bg-muted/50 flex items-center",children:Le(y.total||0)})]})]}),s.jsxs("div",{className:"flex justify-end space-x-2 mt-4",children:[s.jsx(Q,{type:"button",variant:"outline",onClick:()=>p(!1),children:"Cancel"}),s.jsx(Q,{type:"button",onClick:I,children:"Add Labor"})]})]})}),s.jsx("div",{className:"space-y-3",children:u.labor&&u.labor.length>0?u.labor.map($=>s.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"font-medium",children:$.description}),s.jsxs("p",{className:"text-sm text-muted-foreground",children:[$.hours," hours  ",Le($.rate),"/hr"]})]}),s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("span",{className:"font-bold",children:Le($.total)}),s.jsx(Q,{type:"button",variant:"ghost",size:"sm",onClick:()=>k($.id),children:s.jsx(Tr,{className:"h-4 w-4 text-red-500"})})]})]},$.id)):s.jsxs("div",{className:"text-center py-6 text-muted-foreground border-2 border-dashed rounded-lg",children:[s.jsx(gn,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),s.jsx("p",{children:"No labor added yet"}),s.jsx("p",{className:"text-sm",children:"Add labor for this service"})]})})]}),(((F=u.parts)==null?void 0:F.length)>0||((z=u.labor)==null?void 0:z.length)>0)&&s.jsx(he,{className:"bg-muted/30",children:s.jsx(fe,{className:"pt-6",children:s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Parts Total:"}),s.jsx("span",{children:Le(P.partsTotal)})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Labor Total:"}),s.jsx("span",{children:Le(P.laborTotal)})]}),s.jsxs("div",{className:"flex justify-between text-lg font-bold border-t pt-2",children:[s.jsx("span",{children:"Grand Total:"}),s.jsx("span",{children:Le(P.grandTotal)})]})]})})}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-semibold",children:"Additional Information"}),s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"technicianNotes",children:"Technician Notes"}),s.jsx(un,{id:"technicianNotes",value:((H=u.customFields)==null?void 0:H.technicianNotes)||"",onChange:$=>h(L=>({...L,customFields:{...L.customFields,technicianNotes:$.target.value}})),placeholder:"Notes for technicians only (not visible to customer)",rows:3})]}),s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"notes",children:"Customer Notes"}),s.jsx(un,{id:"notes",value:u.notes,onChange:$=>h(L=>({...L,notes:$.target.value})),placeholder:"Notes visible to the customer",rows:3})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx($t,{id:"customerPortalAccess",checked:((W=u.customFields)==null?void 0:W.customerPortalAccess)!==!1,onCheckedChange:$=>h(L=>({...L,customFields:{...L.customFields,customerPortalAccess:!!$}}))}),s.jsx(ae,{htmlFor:"customerPortalAccess",children:"Allow customer to view this ticket in portal"})]})]}),s.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t",children:[s.jsx(Q,{type:"button",variant:"outline",onClick:n,disabled:o,children:"Cancel"}),s.jsx(Q,{type:"submit",disabled:o,children:o?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),t?"Updating...":"Creating..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Wn,{className:"h-4 w-4 mr-2"}),t?"Update":"Create"," Ticket"]})})]})]})})]})]})}function l5e({ticketId:t,onUpdate:e,onClose:n}){const{toast:r}=Ot(),[i,a]=A.useState(!1),[o,l]=A.useState(!1),[c,d]=A.useState(La.formDefaults.status),[u,h]=A.useState(""),f=La.sampleTickets.find(g=>g.id===t)||La.sampleTickets[0],m=g=>La.statusColors[g]||"bg-gray-100 text-gray-800",v=g=>La.priorityColors[g]||"bg-gray-100 text-gray-800",p=async()=>{l(!0);try{e&&e(t,{status:c}),r({title:"Status Updated",description:`Ticket status changed to ${c}`})}catch{r({title:"Error",description:"Failed to update ticket status",variant:"destructive"})}finally{l(!1)}};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold",children:f.title}),s.jsxs("p",{className:"text-muted-foreground",children:["Ticket #",f.id]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsxs(Q,{variant:"outline",onClick:()=>a(!i),children:[s.jsx(ar,{className:"h-4 w-4 mr-2"}),i?"Cancel":"Edit"]}),n&&s.jsx(Q,{variant:"outline",onClick:n,children:s.jsx(on,{className:"h-4 w-4"})})]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Re,{className:m(f.status),children:f.status}),s.jsxs(Re,{className:v(f.priority),children:[f.priority," Priority"]})]}),s.jsxs(he,{children:[s.jsx(ye,{children:s.jsx(be,{children:"Ticket Information"})}),s.jsxs(fe,{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Gr,{className:"h-4 w-4 text-muted-foreground"}),s.jsx("span",{className:"text-sm text-muted-foreground",children:"Customer:"}),s.jsx("span",{className:"font-medium",children:f.customerName})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Gr,{className:"h-4 w-4 text-muted-foreground"}),s.jsx("span",{className:"text-sm text-muted-foreground",children:"Assigned to:"}),s.jsx("span",{className:"font-medium",children:f.assignedTechName})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Sn,{className:"h-4 w-4 text-muted-foreground"}),s.jsx("span",{className:"text-sm text-muted-foreground",children:"Scheduled:"}),s.jsx("span",{className:"font-medium",children:Qw(f.scheduledDate)})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(gn,{className:"h-4 w-4 text-muted-foreground"}),s.jsx("span",{className:"text-sm text-muted-foreground",children:"Created:"}),s.jsx("span",{className:"font-medium",children:Qw(f.createdAt)})]})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium mb-2",children:"Description"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:f.description})]})]})]}),s.jsxs(he,{children:[s.jsx(ye,{children:s.jsx(be,{children:"Update Status"})}),s.jsx(fe,{children:s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("div",{className:"flex-1",children:s.jsxs(Ke,{value:c,onValueChange:d,children:[s.jsx(He,{className:"w-48",children:s.jsx(Ye,{})}),s.jsx(We,{children:La.defaultStatuses.map(g=>s.jsx(le,{value:g,children:g},g))})]})}),s.jsxs(Q,{onClick:p,disabled:o,size:"sm",children:[s.jsx(Rn,{className:"h-4 w-4 mr-2"}),"Update Status"]})]})})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs(he,{children:[s.jsx(ye,{children:s.jsx(be,{children:"Parts"})}),s.jsx(fe,{children:s.jsx("div",{className:"space-y-3",children:f.parts.map(g=>s.jsxs("div",{className:"flex justify-between items-center p-3 border rounded-lg",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:g.name}),s.jsxs("p",{className:"text-sm text-muted-foreground",children:["Qty: ",g.quantity]})]}),s.jsx("p",{className:"font-medium",children:Le(g.cost*g.quantity)})]},g.id))})})]}),s.jsxs(he,{children:[s.jsx(ye,{children:s.jsx(be,{children:"Labor"})}),s.jsx(fe,{children:s.jsx("div",{className:"space-y-3",children:f.labor.map(g=>s.jsxs("div",{className:"flex justify-between items-center p-3 border rounded-lg",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:g.description}),s.jsxs("p",{className:"text-sm text-muted-foreground",children:[g.hours," hrs @ ",Le(g.rate),"/hr"]})]}),s.jsx("p",{className:"font-medium",children:Le(g.hours*g.rate)})]},g.id))})})]})]}),s.jsxs(he,{children:[s.jsx(ye,{children:s.jsxs(be,{className:"flex items-center",children:[s.jsx(Vt,{className:"h-5 w-5 mr-2"}),"Total Cost"]})}),s.jsx(fe,{children:s.jsx("div",{className:"text-2xl font-bold",children:Le(f.totalCost)})})]}),s.jsxs(he,{children:[s.jsx(ye,{children:s.jsx(be,{children:"Timeline"})}),s.jsx(fe,{children:s.jsx("div",{className:"space-y-4",children:f.timeline.map(g=>s.jsxs("div",{className:"flex space-x-3",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("div",{className:"h-2 w-2 bg-primary rounded-full mt-2"})}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("p",{className:"font-medium",children:g.action}),s.jsx("p",{className:"text-sm text-muted-foreground",children:Qw(g.timestamp)})]}),s.jsx("p",{className:"text-sm text-muted-foreground",children:g.details}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:["by ",g.user]})]})]},g.id))})})]}),s.jsxs(he,{children:[s.jsx(ye,{children:s.jsxs(be,{className:"flex items-center",children:[s.jsx(ss,{className:"h-5 w-5 mr-2"}),"Notes"]})}),s.jsx(fe,{children:s.jsxs("div",{className:"space-y-4",children:[s.jsx(un,{value:u,onChange:g=>h(g.target.value),placeholder:f.notes||"Add notes about this service ticket...",rows:4}),s.jsxs(Q,{onClick:()=>console.log("Save notes:",u),children:[s.jsx(Wn,{className:"h-4 w-4 mr-2"}),"Save Notes"]})]})})]})]})}function c5e({customerId:t}){const[e,n]=A.useState(""),[r,i]=A.useState("all"),[a,o]=A.useState("all"),c=(t?La.sampleTickets.filter(f=>f.customerId===t):La.sampleTickets).filter(f=>{const m=f.title.toLowerCase().includes(e.toLowerCase())||f.description.toLowerCase().includes(e.toLowerCase()),v=r==="all"||f.status===r,p=a==="all"||f.category===a;return m&&v&&p}),d=f=>La.statusColors[f]||"bg-gray-100 text-gray-800",u=f=>La.priorityColors[f]||"bg-gray-100 text-gray-800",h=f=>{switch(f){case"Completed":return s.jsx(Rn,{className:"h-4 w-4"});case"In Progress":return s.jsx(gn,{className:"h-4 w-4"});default:return s.jsx(mm,{className:"h-4 w-4"})}};return s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"flex items-center justify-between",children:s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Service Tickets"}),s.jsx("p",{className:"text-muted-foreground",children:"View and track your service requests"})]})}),s.jsx(he,{children:s.jsx(fe,{className:"pt-6",children:s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[s.jsxs("div",{className:"relative flex-1",children:[s.jsx(Rr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),s.jsx(Ae,{placeholder:"Search tickets...",value:e,onChange:f=>n(f.target.value),className:"pl-10"})]}),s.jsxs(Ke,{value:r,onValueChange:i,children:[s.jsx(He,{className:"w-48",children:s.jsx(Ye,{placeholder:"All statuses"})}),s.jsxs(We,{children:[s.jsx(le,{value:"all",children:"All Statuses"}),La.defaultStatuses.map(f=>s.jsx(le,{value:f,children:f},f))]})]}),s.jsxs(Ke,{value:a,onValueChange:o,children:[s.jsx(He,{className:"w-48",children:s.jsx(Ye,{placeholder:"All categories"})}),s.jsxs(We,{children:[s.jsx(le,{value:"all",children:"All Categories"}),La.categoryOptions.map(f=>s.jsx(le,{value:f,children:f},f))]})]})]})})}),s.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:c.map(f=>{var m;return s.jsxs(he,{className:"hover:shadow-md transition-shadow",children:[s.jsx(ye,{className:"pb-3",children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx(be,{className:"text-lg",children:f.title}),s.jsxs(Be,{className:"text-sm",children:["#",f.id]})]}),s.jsxs("div",{className:"flex flex-col items-end space-y-1",children:[s.jsx(Re,{className:d(f.status),children:s.jsxs("div",{className:"flex items-center space-x-1",children:[h(f.status),s.jsx("span",{children:f.status})]})}),s.jsx(Re,{variant:"outline",className:u(f.priority),children:f.priority})]})]})}),s.jsxs(fe,{className:"space-y-4",children:[s.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2",children:f.description}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("div",{className:"flex items-center space-x-2 text-sm",children:s.jsx(Re,{variant:"secondary",children:f.category})}),s.jsxs("div",{className:"space-y-1",children:[s.jsxs("div",{className:"flex items-center space-x-2 text-sm text-muted-foreground",children:[s.jsx(Gr,{className:"h-4 w-4"}),s.jsx("span",{children:((m=La.technicianOptions.find(v=>v.id===f.assignedTo))==null?void 0:m.name)||f.assignedTo})]}),s.jsxs("div",{className:"flex items-center space-x-2 text-sm text-muted-foreground",children:[s.jsx(Sn,{className:"h-4 w-4"}),s.jsx("span",{children:Qw(f.scheduledDate)})]}),s.jsxs("div",{className:"flex items-center space-x-2 text-sm text-muted-foreground",children:[s.jsx(gn,{className:"h-4 w-4"}),s.jsxs("span",{children:[f.estimatedHours,"h estimated"]})]})]})]}),s.jsxs("div",{className:"flex justify-between items-center pt-2",children:[s.jsxs("span",{className:"text-xs text-muted-foreground",children:["Created ",Qw(f.createdAt)]}),s.jsxs(Q,{variant:"outline",size:"sm",children:[s.jsx(Wr,{className:"h-4 w-4 mr-1"}),"View"]})]})]})]},f.id)})}),c.length===0&&s.jsx(he,{children:s.jsx(fe,{className:"pt-6",children:s.jsxs("div",{className:"text-center py-8",children:[s.jsx(mm,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No tickets found"}),s.jsx("p",{className:"text-muted-foreground",children:e||r!=="all"||a!=="all"?"Try adjusting your search criteria":"No service tickets have been created yet"})]})})})]})}function d5e(){const{tickets:t,createTicket:e,updateTicket:n,deleteTicket:r,updateTicketStatus:i}=Lre(),{toast:a}=Ot(),[o,l]=A.useState(""),[c,d]=A.useState("all"),[u,h]=A.useState("all"),[f,m]=A.useState(!1),[v,p]=A.useState(!1),[g,x]=A.useState(!1),[y,b]=A.useState(!1),[w,N]=A.useState(null),E=M=>{switch(M){case Ur.OPEN:return"bg-blue-50 text-blue-700 border-blue-200";case Ur.IN_PROGRESS:return"bg-yellow-50 text-yellow-700 border-yellow-200";case Ur.WAITING_PARTS:return"bg-orange-50 text-orange-700 border-orange-200";case Ur.COMPLETED:return"bg-green-50 text-green-700 border-green-200";case Ur.CANCELLED:return"bg-red-50 text-red-700 border-red-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},C=M=>{switch(M){case Ci.LOW:return"bg-green-50 text-green-700 border-green-200";case Ci.MEDIUM:return"bg-yellow-50 text-yellow-700 border-yellow-200";case Ci.HIGH:return"bg-orange-50 text-orange-700 border-orange-200";case Ci.URGENT:return"bg-red-50 text-red-700 border-red-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},j=t.filter(M=>M.title.toLowerCase().includes(o.toLowerCase())||M.description.toLowerCase().includes(o.toLowerCase())||M.customerId.toLowerCase().includes(o.toLowerCase())||M.id.toLowerCase().includes(o.toLowerCase())).filter(M=>c==="all"||M.status===c).filter(M=>u==="all"||M.priority===u),I=()=>{N(null),m(!0)},k=M=>{N(M),m(!0),p(!1)},D=M=>{N(M),p(!0)},P=M=>{N(M),x(!0)},R=async M=>{try{w?(await n(w.id,M),a({title:"Success",description:"Service ticket updated successfully"})):(await e(M),a({title:"Success",description:"Service ticket created successfully"})),m(!1),N(null)}catch{a({title:"Error",description:`Failed to ${w?"update":"create"} service ticket`,variant:"destructive"})}},_=M=>{a({title:"Customer Added",description:`${M.firstName} ${M.lastName} has been added.`}),N(null),b(!1),m(!0)};return s.jsxs("div",{className:"space-y-8",children:[y&&s.jsx(Yb,{onClose:()=>b(!1),onSuccess:_}),f&&s.jsx(o5e,{ticket:w||void 0,onSave:R,onCancel:()=>{m(!1),N(null)}}),v&&w&&s.jsx(l5e,{ticket:w,onClose:()=>p(!1),onEdit:k}),g&&w&&s.jsx(c5e,{ticket:w,onClose:()=>x(!1)}),s.jsx("div",{className:"ri-page-header",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"ri-page-title",children:"Service Operations"}),s.jsx("p",{className:"ri-page-description",children:"Manage service tickets and maintenance schedules"})]}),s.jsxs(Q,{className:"shadow-sm",onClick:I,children:[s.jsx(yt,{className:"h-4 w-4 mr-2"}),"New Service Ticket"]})]})}),s.jsxs("div",{className:"ri-stats-grid",children:[s.jsxs(he,{className:"shadow-sm border-0 bg-gradient-to-br from-blue-50 to-blue-100/50",children:[s.jsxs(ye,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(be,{className:"text-sm font-medium text-blue-900",children:"Total Tickets"}),s.jsx(pl,{className:"h-4 w-4 text-blue-600"})]}),s.jsxs(fe,{children:[s.jsx("div",{className:"text-2xl font-bold text-blue-900",children:t.length}),s.jsxs("p",{className:"text-xs text-blue-600 flex items-center mt-1",children:[s.jsx(tn,{className:"h-3 w-3 mr-1"}),"All service requests"]})]})]}),s.jsxs(he,{className:"shadow-sm border-0 bg-gradient-to-br from-yellow-50 to-yellow-100/50",children:[s.jsxs(ye,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(be,{className:"text-sm font-medium text-yellow-900",children:"In Progress"}),s.jsx(pl,{className:"h-4 w-4 text-yellow-600"})]}),s.jsxs(fe,{children:[s.jsx("div",{className:"text-2xl font-bold text-yellow-900",children:t.filter(M=>M.status===Ur.IN_PROGRESS).length}),s.jsxs("p",{className:"text-xs text-yellow-600 flex items-center mt-1",children:[s.jsx(gn,{className:"h-3 w-3 mr-1"}),"Currently working"]})]})]}),s.jsxs(he,{className:"shadow-sm border-0 bg-gradient-to-br from-orange-50 to-orange-100/50",children:[s.jsxs(ye,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(be,{className:"text-sm font-medium text-orange-900",children:"Waiting Parts"}),s.jsx(pl,{className:"h-4 w-4 text-orange-600"})]}),s.jsxs(fe,{children:[s.jsx("div",{className:"text-2xl font-bold text-orange-900",children:t.filter(M=>M.status===Ur.WAITING_PARTS).length}),s.jsxs("p",{className:"text-xs text-orange-600 flex items-center mt-1",children:[s.jsx(gn,{className:"h-3 w-3 mr-1"}),"Parts on order"]})]})]}),s.jsxs(he,{className:"shadow-sm border-0 bg-gradient-to-br from-green-50 to-green-100/50",children:[s.jsxs(ye,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(be,{className:"text-sm font-medium text-green-900",children:"Revenue"}),s.jsx(Vt,{className:"h-4 w-4 text-green-600"})]}),s.jsxs(fe,{children:[s.jsx("div",{className:"text-2xl font-bold text-green-900",children:Le(t.reduce((M,U)=>M+U.parts.reduce((F,z)=>F+z.total,0)+U.labor.reduce((F,z)=>F+z.total,0),0))}),s.jsxs("p",{className:"text-xs text-green-600 flex items-center mt-1",children:[s.jsx(tn,{className:"h-3 w-3 mr-1"}),"Service revenue"]})]})]})]}),s.jsxs("div",{className:"flex gap-4",children:[s.jsxs("div",{className:"ri-search-bar",children:[s.jsx(Rr,{className:"ri-search-icon"}),s.jsx(Ae,{placeholder:"Search service tickets...",value:o,onChange:M=>l(M.target.value),className:"ri-search-input shadow-sm"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(Ke,{value:c,onValueChange:d,children:[s.jsx(He,{className:"w-40",children:s.jsx(Ye,{placeholder:"Status"})}),s.jsxs(We,{children:[s.jsx(le,{value:"all",children:"All Status"}),s.jsx(le,{value:Ur.OPEN,children:"Open"}),s.jsx(le,{value:Ur.IN_PROGRESS,children:"In Progress"}),s.jsx(le,{value:Ur.WAITING_PARTS,children:"Waiting Parts"}),s.jsx(le,{value:Ur.COMPLETED,children:"Completed"}),s.jsx(le,{value:Ur.CANCELLED,children:"Cancelled"})]})]}),s.jsxs(Ke,{value:u,onValueChange:h,children:[s.jsx(He,{className:"w-40",children:s.jsx(Ye,{placeholder:"Priority"})}),s.jsxs(We,{children:[s.jsx(le,{value:"all",children:"All Priorities"}),s.jsx(le,{value:Ci.LOW,children:"Low"}),s.jsx(le,{value:Ci.MEDIUM,children:"Medium"}),s.jsx(le,{value:Ci.HIGH,children:"High"}),s.jsx(le,{value:Ci.URGENT,children:"Urgent"})]})]}),s.jsxs(Q,{variant:"outline",className:"shadow-sm",children:[s.jsx(bc,{className:"h-4 w-4 mr-2"}),"More Filters"]})]})]}),s.jsxs(he,{className:"shadow-sm",children:[s.jsxs(ye,{children:[s.jsx(be,{className:"text-xl",children:"Service Tickets"}),s.jsx(Be,{children:"Manage service requests and maintenance schedules"})]}),s.jsx(fe,{children:s.jsxs("div",{className:"space-y-4",children:[j.map(M=>{var U;return s.jsxs("div",{className:"ri-table-row",children:[s.jsx("div",{className:"flex items-center space-x-4 flex-1",children:s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[s.jsx("h3",{className:"font-semibold text-foreground",children:M.title}),s.jsx(Re,{className:st("ri-badge-status",C(M.priority)),children:M.priority.toUpperCase()}),s.jsx(Re,{className:st("ri-badge-status",E(M.status)),children:M.status.replace("_"," ").toUpperCase()})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm text-muted-foreground",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx(Gr,{className:"h-3 w-3 mr-2 text-blue-500"}),s.jsx("span",{className:"font-medium",children:"Customer:"}),s.jsx("span",{className:"ml-1",children:M.customerId})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx(Gr,{className:"h-3 w-3 mr-2 text-green-500"}),s.jsx("span",{className:"font-medium",children:"Assigned:"}),s.jsx("span",{className:"ml-1",children:M.assignedTo||"Unassigned"})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx(Sn,{className:"h-3 w-3 mr-2 text-purple-500"}),s.jsx("span",{className:"font-medium",children:"Scheduled:"}),s.jsx("span",{className:"ml-1",children:M.scheduledDate?ht(M.scheduledDate):"Not scheduled"})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx(gn,{className:"h-3 w-3 mr-2 text-orange-500"}),s.jsx("span",{className:"font-medium",children:"Created:"}),s.jsx("span",{className:"ml-1",children:ht(M.createdAt)})]})]}),s.jsxs("div",{className:"mt-2 bg-muted/30 p-2 rounded-md",children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:M.description}),M.notes&&s.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:[s.jsx("span",{className:"font-medium",children:"Notes:"})," ",M.notes]})]}),s.jsxs("div",{className:"flex items-center space-x-4 mt-3 text-sm",children:[s.jsxs("span",{className:"bg-blue-50 text-blue-700 px-2 py-1 rounded-md",children:[s.jsx("span",{className:"font-medium",children:"Parts:"})," ",Le(M.parts.reduce((F,z)=>F+z.total,0))]}),s.jsxs("span",{className:"bg-green-50 text-green-700 px-2 py-1 rounded-md",children:[s.jsx("span",{className:"font-medium",children:"Labor:"})," ",Le(M.labor.reduce((F,z)=>F+z.total,0))]}),s.jsxs("span",{className:"bg-purple-50 text-purple-700 px-2 py-1 rounded-md font-semibold",children:[s.jsx("span",{className:"font-medium",children:"Total:"})," ",Le(M.parts.reduce((F,z)=>F+z.total,0)+M.labor.reduce((F,z)=>F+z.total,0))]})]})]})}),s.jsxs("div",{className:"ri-action-buttons",children:[s.jsx(Q,{variant:"outline",size:"sm",className:"shadow-sm",onClick:()=>D(M),children:"View"}),s.jsx(Q,{variant:"outline",size:"sm",className:"shadow-sm",onClick:()=>k(M),children:"Edit"}),((U=M.customFields)==null?void 0:U.customerPortalAccess)!==!1&&s.jsx(Q,{variant:"outline",size:"sm",className:"shadow-sm",onClick:()=>P(M),children:"Customer View"})]})]},M.id)}),j.length===0&&s.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[s.jsx(pl,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),s.jsx("p",{children:"No service tickets found"}),s.jsx("p",{className:"text-sm",children:"Try adjusting your search or filters"})]})]})})]})]})}function u5e(){return s.jsx(ki,{children:s.jsx(It,{path:"/*",element:s.jsx(d5e,{})})})}function Rre(){const[t,e]=A.useState([]),[n,r]=A.useState(!1);A.useEffect(()=>{i()},[]);const i=()=>{const g=yr("renter-insight-deliveries",[{id:"1",customerId:"cust-1",vehicleId:"veh-1",status:cn.SCHEDULED,scheduledDate:new Date("2024-01-25"),address:{street:"123 Main St",city:"Springfield",state:"IL",zipCode:"62701",country:"USA"},driver:"Driver-001",notes:"Customer prefers morning delivery",customFields:{contactPhone:"(555) 123-4567",contactEmail:"customer@example.com",sendSMSUpdates:!0,sendEmailUpdates:!0,estimatedArrival:"10:00"},createdAt:new Date("2024-01-15"),updatedAt:new Date("2024-01-18")},{id:"2",customerId:"cust-2",vehicleId:"veh-2",status:cn.IN_TRANSIT,scheduledDate:new Date("2024-01-20"),deliveredDate:void 0,address:{street:"456 Oak Ave",city:"Chicago",state:"IL",zipCode:"60601",country:"USA"},driver:"Driver-002",notes:"Call customer 30 minutes before arrival",customFields:{contactPhone:"(555) 987-6543",contactEmail:"customer2@example.com",sendSMSUpdates:!0,sendEmailUpdates:!0,estimatedArrival:"14:30",departureTime:"2024-01-20T08:00:00",departureNotes:"Left dealership on schedule",customerNotified:"2024-01-20T08:15:00",notificationMethod:"SMS",etaUpdated:"2024-01-20T10:30:00"},createdAt:new Date("2024-01-12"),updatedAt:new Date("2024-01-20")}]);e(g)},a=g=>{Dn("renter-insight-deliveries",g)};return{deliveries:t,loading:n,getDeliveriesByCustomerId:g=>t.filter(x=>x.customerId===g),getDeliveriesByVehicleId:g=>t.filter(x=>x.vehicleId===g),getDeliveryById:g=>t.find(x=>x.id===g),createDelivery:async g=>{r(!0);try{const x={id:Math.random().toString(36).substr(2,9),customerId:g.customerId||"",vehicleId:g.vehicleId||"",status:g.status||cn.SCHEDULED,scheduledDate:g.scheduledDate||new Date,deliveredDate:g.deliveredDate,address:g.address||{street:"",city:"",state:"",zipCode:"",country:"USA"},driver:g.driver||"",notes:g.notes||"",customFields:g.customFields||{},createdAt:new Date,updatedAt:new Date},y=[...t,x];return e(y),a(y),x}finally{r(!1)}},updateDelivery:async(g,x)=>{const y=t.map(b=>b.id===g?{...b,...x,updatedAt:new Date}:b);e(y),a(y)},deleteDelivery:async g=>{const x=t.filter(y=>y.id!==g);e(x),a(x)},updateDeliveryStatus:async(g,x)=>{const y=t.map(b=>b.id===g?{...b,status:x,deliveredDate:x===cn.DELIVERED?new Date:b.deliveredDate,updatedAt:new Date}:b);e(y),a(y)},sendNotification:async(g,x,y)=>{if(!t.find(N=>N.id===g))return;const w=t.map(N=>N.id===g?{...N,customFields:{...N.customFields,customerNotified:new Date().toISOString(),notificationMethod:x==="sms"?"SMS":"Email",lastNotificationMessage:y},updatedAt:new Date}:N);return e(w),a(w),await new Promise(N=>setTimeout(N,1e3)),!0},updateETA:async(g,x)=>{if(!t.find(w=>w.id===g))return;const b=t.map(w=>w.id===g?{...w,customFields:{...w.customFields,estimatedArrival:x,etaUpdated:new Date().toISOString()},updatedAt:new Date}:w);e(b),a(b)},addDeliveryPhotos:async(g,x,y)=>{if(!t.find(E=>E.id===g))return;const w=x.map((E,C)=>({url:E,caption:y[C]||""})),N=t.map(E=>{var C,j;return E.id===g?{...E,customFields:{...E.customFields,deliveryPhotos:[...((C=E.customFields)==null?void 0:C.deliveryPhotos)||[],...x],photoDetails:[...((j=E.customFields)==null?void 0:j.photoDetails)||[],...w]},updatedAt:new Date}:E});e(N),a(N)}}}const iu={deliveryStatuses:["Pending","Scheduled","In Transit","Delivered","Rescheduled","Cancelled"],deliveryTypes:["Home Delivery","RV Park Delivery","Customer Pickup"],checklistItems:["VIN matched","Skirting Installed","Electric Connected","Water Connected","Walkthrough Completed","Customer Signed"],driverNames:["John Smith","Maria Lopez","Dan Cooper"],defaultETAs:["9:00 AM","12:00 PM","3:00 PM"],photoInstructions:["Front view","Side view","Setup complete","Interior"]},h5e=new Map([["1km","application/vnd.1000minds.decision-model+xml"],["3dml","text/vnd.in3d.3dml"],["3ds","image/x-3ds"],["3g2","video/3gpp2"],["3gp","video/3gp"],["3gpp","video/3gpp"],["3mf","model/3mf"],["7z","application/x-7z-compressed"],["7zip","application/x-7z-compressed"],["123","application/vnd.lotus-1-2-3"],["aab","application/x-authorware-bin"],["aac","audio/x-acc"],["aam","application/x-authorware-map"],["aas","application/x-authorware-seg"],["abw","application/x-abiword"],["ac","application/vnd.nokia.n-gage.ac+xml"],["ac3","audio/ac3"],["acc","application/vnd.americandynamics.acc"],["ace","application/x-ace-compressed"],["acu","application/vnd.acucobol"],["acutc","application/vnd.acucorp"],["adp","audio/adpcm"],["aep","application/vnd.audiograph"],["afm","application/x-font-type1"],["afp","application/vnd.ibm.modcap"],["ahead","application/vnd.ahead.space"],["ai","application/pdf"],["aif","audio/x-aiff"],["aifc","audio/x-aiff"],["aiff","audio/x-aiff"],["air","application/vnd.adobe.air-application-installer-package+zip"],["ait","application/vnd.dvb.ait"],["ami","application/vnd.amiga.ami"],["amr","audio/amr"],["apk","application/vnd.android.package-archive"],["apng","image/apng"],["appcache","text/cache-manifest"],["application","application/x-ms-application"],["apr","application/vnd.lotus-approach"],["arc","application/x-freearc"],["arj","application/x-arj"],["asc","application/pgp-signature"],["asf","video/x-ms-asf"],["asm","text/x-asm"],["aso","application/vnd.accpac.simply.aso"],["asx","video/x-ms-asf"],["atc","application/vnd.acucorp"],["atom","application/atom+xml"],["atomcat","application/atomcat+xml"],["atomdeleted","application/atomdeleted+xml"],["atomsvc","application/atomsvc+xml"],["atx","application/vnd.antix.game-component"],["au","audio/x-au"],["avi","video/x-msvideo"],["avif","image/avif"],["aw","application/applixware"],["azf","application/vnd.airzip.filesecure.azf"],["azs","application/vnd.airzip.filesecure.azs"],["azv","image/vnd.airzip.accelerator.azv"],["azw","application/vnd.amazon.ebook"],["b16","image/vnd.pco.b16"],["bat","application/x-msdownload"],["bcpio","application/x-bcpio"],["bdf","application/x-font-bdf"],["bdm","application/vnd.syncml.dm+wbxml"],["bdoc","application/x-bdoc"],["bed","application/vnd.realvnc.bed"],["bh2","application/vnd.fujitsu.oasysprs"],["bin","application/octet-stream"],["blb","application/x-blorb"],["blorb","application/x-blorb"],["bmi","application/vnd.bmi"],["bmml","application/vnd.balsamiq.bmml+xml"],["bmp","image/bmp"],["book","application/vnd.framemaker"],["box","application/vnd.previewsystems.box"],["boz","application/x-bzip2"],["bpk","application/octet-stream"],["bpmn","application/octet-stream"],["bsp","model/vnd.valve.source.compiled-map"],["btif","image/prs.btif"],["buffer","application/octet-stream"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["c","text/x-c"],["c4d","application/vnd.clonk.c4group"],["c4f","application/vnd.clonk.c4group"],["c4g","application/vnd.clonk.c4group"],["c4p","application/vnd.clonk.c4group"],["c4u","application/vnd.clonk.c4group"],["c11amc","application/vnd.cluetrust.cartomobile-config"],["c11amz","application/vnd.cluetrust.cartomobile-config-pkg"],["cab","application/vnd.ms-cab-compressed"],["caf","audio/x-caf"],["cap","application/vnd.tcpdump.pcap"],["car","application/vnd.curl.car"],["cat","application/vnd.ms-pki.seccat"],["cb7","application/x-cbr"],["cba","application/x-cbr"],["cbr","application/x-cbr"],["cbt","application/x-cbr"],["cbz","application/x-cbr"],["cc","text/x-c"],["cco","application/x-cocoa"],["cct","application/x-director"],["ccxml","application/ccxml+xml"],["cdbcmsg","application/vnd.contact.cmsg"],["cda","application/x-cdf"],["cdf","application/x-netcdf"],["cdfx","application/cdfx+xml"],["cdkey","application/vnd.mediastation.cdkey"],["cdmia","application/cdmi-capability"],["cdmic","application/cdmi-container"],["cdmid","application/cdmi-domain"],["cdmio","application/cdmi-object"],["cdmiq","application/cdmi-queue"],["cdr","application/cdr"],["cdx","chemical/x-cdx"],["cdxml","application/vnd.chemdraw+xml"],["cdy","application/vnd.cinderella"],["cer","application/pkix-cert"],["cfs","application/x-cfs-compressed"],["cgm","image/cgm"],["chat","application/x-chat"],["chm","application/vnd.ms-htmlhelp"],["chrt","application/vnd.kde.kchart"],["cif","chemical/x-cif"],["cii","application/vnd.anser-web-certificate-issue-initiation"],["cil","application/vnd.ms-artgalry"],["cjs","application/node"],["cla","application/vnd.claymore"],["class","application/octet-stream"],["clkk","application/vnd.crick.clicker.keyboard"],["clkp","application/vnd.crick.clicker.palette"],["clkt","application/vnd.crick.clicker.template"],["clkw","application/vnd.crick.clicker.wordbank"],["clkx","application/vnd.crick.clicker"],["clp","application/x-msclip"],["cmc","application/vnd.cosmocaller"],["cmdf","chemical/x-cmdf"],["cml","chemical/x-cml"],["cmp","application/vnd.yellowriver-custom-menu"],["cmx","image/x-cmx"],["cod","application/vnd.rim.cod"],["coffee","text/coffeescript"],["com","application/x-msdownload"],["conf","text/plain"],["cpio","application/x-cpio"],["cpp","text/x-c"],["cpt","application/mac-compactpro"],["crd","application/x-mscardfile"],["crl","application/pkix-crl"],["crt","application/x-x509-ca-cert"],["crx","application/x-chrome-extension"],["cryptonote","application/vnd.rig.cryptonote"],["csh","application/x-csh"],["csl","application/vnd.citationstyles.style+xml"],["csml","chemical/x-csml"],["csp","application/vnd.commonspace"],["csr","application/octet-stream"],["css","text/css"],["cst","application/x-director"],["csv","text/csv"],["cu","application/cu-seeme"],["curl","text/vnd.curl"],["cww","application/prs.cww"],["cxt","application/x-director"],["cxx","text/x-c"],["dae","model/vnd.collada+xml"],["daf","application/vnd.mobius.daf"],["dart","application/vnd.dart"],["dataless","application/vnd.fdsn.seed"],["davmount","application/davmount+xml"],["dbf","application/vnd.dbf"],["dbk","application/docbook+xml"],["dcr","application/x-director"],["dcurl","text/vnd.curl.dcurl"],["dd2","application/vnd.oma.dd2+xml"],["ddd","application/vnd.fujixerox.ddd"],["ddf","application/vnd.syncml.dmddf+xml"],["dds","image/vnd.ms-dds"],["deb","application/x-debian-package"],["def","text/plain"],["deploy","application/octet-stream"],["der","application/x-x509-ca-cert"],["dfac","application/vnd.dreamfactory"],["dgc","application/x-dgc-compressed"],["dic","text/x-c"],["dir","application/x-director"],["dis","application/vnd.mobius.dis"],["disposition-notification","message/disposition-notification"],["dist","application/octet-stream"],["distz","application/octet-stream"],["djv","image/vnd.djvu"],["djvu","image/vnd.djvu"],["dll","application/octet-stream"],["dmg","application/x-apple-diskimage"],["dmn","application/octet-stream"],["dmp","application/vnd.tcpdump.pcap"],["dms","application/octet-stream"],["dna","application/vnd.dna"],["doc","application/msword"],["docm","application/vnd.ms-word.template.macroEnabled.12"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["dot","application/msword"],["dotm","application/vnd.ms-word.template.macroEnabled.12"],["dotx","application/vnd.openxmlformats-officedocument.wordprocessingml.template"],["dp","application/vnd.osgi.dp"],["dpg","application/vnd.dpgraph"],["dra","audio/vnd.dra"],["drle","image/dicom-rle"],["dsc","text/prs.lines.tag"],["dssc","application/dssc+der"],["dtb","application/x-dtbook+xml"],["dtd","application/xml-dtd"],["dts","audio/vnd.dts"],["dtshd","audio/vnd.dts.hd"],["dump","application/octet-stream"],["dvb","video/vnd.dvb.file"],["dvi","application/x-dvi"],["dwd","application/atsc-dwd+xml"],["dwf","model/vnd.dwf"],["dwg","image/vnd.dwg"],["dxf","image/vnd.dxf"],["dxp","application/vnd.spotfire.dxp"],["dxr","application/x-director"],["ear","application/java-archive"],["ecelp4800","audio/vnd.nuera.ecelp4800"],["ecelp7470","audio/vnd.nuera.ecelp7470"],["ecelp9600","audio/vnd.nuera.ecelp9600"],["ecma","application/ecmascript"],["edm","application/vnd.novadigm.edm"],["edx","application/vnd.novadigm.edx"],["efif","application/vnd.picsel"],["ei6","application/vnd.pg.osasli"],["elc","application/octet-stream"],["emf","image/emf"],["eml","message/rfc822"],["emma","application/emma+xml"],["emotionml","application/emotionml+xml"],["emz","application/x-msmetafile"],["eol","audio/vnd.digital-winds"],["eot","application/vnd.ms-fontobject"],["eps","application/postscript"],["epub","application/epub+zip"],["es","application/ecmascript"],["es3","application/vnd.eszigno3+xml"],["esa","application/vnd.osgi.subsystem"],["esf","application/vnd.epson.esf"],["et3","application/vnd.eszigno3+xml"],["etx","text/x-setext"],["eva","application/x-eva"],["evy","application/x-envoy"],["exe","application/octet-stream"],["exi","application/exi"],["exp","application/express"],["exr","image/aces"],["ext","application/vnd.novadigm.ext"],["ez","application/andrew-inset"],["ez2","application/vnd.ezpix-album"],["ez3","application/vnd.ezpix-package"],["f","text/x-fortran"],["f4v","video/mp4"],["f77","text/x-fortran"],["f90","text/x-fortran"],["fbs","image/vnd.fastbidsheet"],["fcdt","application/vnd.adobe.formscentral.fcdt"],["fcs","application/vnd.isac.fcs"],["fdf","application/vnd.fdf"],["fdt","application/fdt+xml"],["fe_launch","application/vnd.denovo.fcselayout-link"],["fg5","application/vnd.fujitsu.oasysgp"],["fgd","application/x-director"],["fh","image/x-freehand"],["fh4","image/x-freehand"],["fh5","image/x-freehand"],["fh7","image/x-freehand"],["fhc","image/x-freehand"],["fig","application/x-xfig"],["fits","image/fits"],["flac","audio/x-flac"],["fli","video/x-fli"],["flo","application/vnd.micrografx.flo"],["flv","video/x-flv"],["flw","application/vnd.kde.kivio"],["flx","text/vnd.fmi.flexstor"],["fly","text/vnd.fly"],["fm","application/vnd.framemaker"],["fnc","application/vnd.frogans.fnc"],["fo","application/vnd.software602.filler.form+xml"],["for","text/x-fortran"],["fpx","image/vnd.fpx"],["frame","application/vnd.framemaker"],["fsc","application/vnd.fsc.weblaunch"],["fst","image/vnd.fst"],["ftc","application/vnd.fluxtime.clip"],["fti","application/vnd.anser-web-funds-transfer-initiation"],["fvt","video/vnd.fvt"],["fxp","application/vnd.adobe.fxp"],["fxpl","application/vnd.adobe.fxp"],["fzs","application/vnd.fuzzysheet"],["g2w","application/vnd.geoplan"],["g3","image/g3fax"],["g3w","application/vnd.geospace"],["gac","application/vnd.groove-account"],["gam","application/x-tads"],["gbr","application/rpki-ghostbusters"],["gca","application/x-gca-compressed"],["gdl","model/vnd.gdl"],["gdoc","application/vnd.google-apps.document"],["geo","application/vnd.dynageo"],["geojson","application/geo+json"],["gex","application/vnd.geometry-explorer"],["ggb","application/vnd.geogebra.file"],["ggt","application/vnd.geogebra.tool"],["ghf","application/vnd.groove-help"],["gif","image/gif"],["gim","application/vnd.groove-identity-message"],["glb","model/gltf-binary"],["gltf","model/gltf+json"],["gml","application/gml+xml"],["gmx","application/vnd.gmx"],["gnumeric","application/x-gnumeric"],["gpg","application/gpg-keys"],["gph","application/vnd.flographit"],["gpx","application/gpx+xml"],["gqf","application/vnd.grafeq"],["gqs","application/vnd.grafeq"],["gram","application/srgs"],["gramps","application/x-gramps-xml"],["gre","application/vnd.geometry-explorer"],["grv","application/vnd.groove-injector"],["grxml","application/srgs+xml"],["gsf","application/x-font-ghostscript"],["gsheet","application/vnd.google-apps.spreadsheet"],["gslides","application/vnd.google-apps.presentation"],["gtar","application/x-gtar"],["gtm","application/vnd.groove-tool-message"],["gtw","model/vnd.gtw"],["gv","text/vnd.graphviz"],["gxf","application/gxf"],["gxt","application/vnd.geonext"],["gz","application/gzip"],["gzip","application/gzip"],["h","text/x-c"],["h261","video/h261"],["h263","video/h263"],["h264","video/h264"],["hal","application/vnd.hal+xml"],["hbci","application/vnd.hbci"],["hbs","text/x-handlebars-template"],["hdd","application/x-virtualbox-hdd"],["hdf","application/x-hdf"],["heic","image/heic"],["heics","image/heic-sequence"],["heif","image/heif"],["heifs","image/heif-sequence"],["hej2","image/hej2k"],["held","application/atsc-held+xml"],["hh","text/x-c"],["hjson","application/hjson"],["hlp","application/winhlp"],["hpgl","application/vnd.hp-hpgl"],["hpid","application/vnd.hp-hpid"],["hps","application/vnd.hp-hps"],["hqx","application/mac-binhex40"],["hsj2","image/hsj2"],["htc","text/x-component"],["htke","application/vnd.kenameaapp"],["htm","text/html"],["html","text/html"],["hvd","application/vnd.yamaha.hv-dic"],["hvp","application/vnd.yamaha.hv-voice"],["hvs","application/vnd.yamaha.hv-script"],["i2g","application/vnd.intergeo"],["icc","application/vnd.iccprofile"],["ice","x-conference/x-cooltalk"],["icm","application/vnd.iccprofile"],["ico","image/x-icon"],["ics","text/calendar"],["ief","image/ief"],["ifb","text/calendar"],["ifm","application/vnd.shana.informed.formdata"],["iges","model/iges"],["igl","application/vnd.igloader"],["igm","application/vnd.insors.igm"],["igs","model/iges"],["igx","application/vnd.micrografx.igx"],["iif","application/vnd.shana.informed.interchange"],["img","application/octet-stream"],["imp","application/vnd.accpac.simply.imp"],["ims","application/vnd.ms-ims"],["in","text/plain"],["ini","text/plain"],["ink","application/inkml+xml"],["inkml","application/inkml+xml"],["install","application/x-install-instructions"],["iota","application/vnd.astraea-software.iota"],["ipfix","application/ipfix"],["ipk","application/vnd.shana.informed.package"],["irm","application/vnd.ibm.rights-management"],["irp","application/vnd.irepository.package+xml"],["iso","application/x-iso9660-image"],["itp","application/vnd.shana.informed.formtemplate"],["its","application/its+xml"],["ivp","application/vnd.immervision-ivp"],["ivu","application/vnd.immervision-ivu"],["jad","text/vnd.sun.j2me.app-descriptor"],["jade","text/jade"],["jam","application/vnd.jam"],["jar","application/java-archive"],["jardiff","application/x-java-archive-diff"],["java","text/x-java-source"],["jhc","image/jphc"],["jisp","application/vnd.jisp"],["jls","image/jls"],["jlt","application/vnd.hp-jlyt"],["jng","image/x-jng"],["jnlp","application/x-java-jnlp-file"],["joda","application/vnd.joost.joda-archive"],["jp2","image/jp2"],["jpe","image/jpeg"],["jpeg","image/jpeg"],["jpf","image/jpx"],["jpg","image/jpeg"],["jpg2","image/jp2"],["jpgm","video/jpm"],["jpgv","video/jpeg"],["jph","image/jph"],["jpm","video/jpm"],["jpx","image/jpx"],["js","application/javascript"],["json","application/json"],["json5","application/json5"],["jsonld","application/ld+json"],["jsonl","application/jsonl"],["jsonml","application/jsonml+json"],["jsx","text/jsx"],["jxr","image/jxr"],["jxra","image/jxra"],["jxrs","image/jxrs"],["jxs","image/jxs"],["jxsc","image/jxsc"],["jxsi","image/jxsi"],["jxss","image/jxss"],["kar","audio/midi"],["karbon","application/vnd.kde.karbon"],["kdb","application/octet-stream"],["kdbx","application/x-keepass2"],["key","application/x-iwork-keynote-sffkey"],["kfo","application/vnd.kde.kformula"],["kia","application/vnd.kidspiration"],["kml","application/vnd.google-earth.kml+xml"],["kmz","application/vnd.google-earth.kmz"],["kne","application/vnd.kinar"],["knp","application/vnd.kinar"],["kon","application/vnd.kde.kontour"],["kpr","application/vnd.kde.kpresenter"],["kpt","application/vnd.kde.kpresenter"],["kpxx","application/vnd.ds-keypoint"],["ksp","application/vnd.kde.kspread"],["ktr","application/vnd.kahootz"],["ktx","image/ktx"],["ktx2","image/ktx2"],["ktz","application/vnd.kahootz"],["kwd","application/vnd.kde.kword"],["kwt","application/vnd.kde.kword"],["lasxml","application/vnd.las.las+xml"],["latex","application/x-latex"],["lbd","application/vnd.llamagraphics.life-balance.desktop"],["lbe","application/vnd.llamagraphics.life-balance.exchange+xml"],["les","application/vnd.hhe.lesson-player"],["less","text/less"],["lgr","application/lgr+xml"],["lha","application/octet-stream"],["link66","application/vnd.route66.link66+xml"],["list","text/plain"],["list3820","application/vnd.ibm.modcap"],["listafp","application/vnd.ibm.modcap"],["litcoffee","text/coffeescript"],["lnk","application/x-ms-shortcut"],["log","text/plain"],["lostxml","application/lost+xml"],["lrf","application/octet-stream"],["lrm","application/vnd.ms-lrm"],["ltf","application/vnd.frogans.ltf"],["lua","text/x-lua"],["luac","application/x-lua-bytecode"],["lvp","audio/vnd.lucent.voice"],["lwp","application/vnd.lotus-wordpro"],["lzh","application/octet-stream"],["m1v","video/mpeg"],["m2a","audio/mpeg"],["m2v","video/mpeg"],["m3a","audio/mpeg"],["m3u","text/plain"],["m3u8","application/vnd.apple.mpegurl"],["m4a","audio/x-m4a"],["m4p","application/mp4"],["m4s","video/iso.segment"],["m4u","application/vnd.mpegurl"],["m4v","video/x-m4v"],["m13","application/x-msmediaview"],["m14","application/x-msmediaview"],["m21","application/mp21"],["ma","application/mathematica"],["mads","application/mads+xml"],["maei","application/mmt-aei+xml"],["mag","application/vnd.ecowin.chart"],["maker","application/vnd.framemaker"],["man","text/troff"],["manifest","text/cache-manifest"],["map","application/json"],["mar","application/octet-stream"],["markdown","text/markdown"],["mathml","application/mathml+xml"],["mb","application/mathematica"],["mbk","application/vnd.mobius.mbk"],["mbox","application/mbox"],["mc1","application/vnd.medcalcdata"],["mcd","application/vnd.mcd"],["mcurl","text/vnd.curl.mcurl"],["md","text/markdown"],["mdb","application/x-msaccess"],["mdi","image/vnd.ms-modi"],["mdx","text/mdx"],["me","text/troff"],["mesh","model/mesh"],["meta4","application/metalink4+xml"],["metalink","application/metalink+xml"],["mets","application/mets+xml"],["mfm","application/vnd.mfmp"],["mft","application/rpki-manifest"],["mgp","application/vnd.osgeo.mapguide.package"],["mgz","application/vnd.proteus.magazine"],["mid","audio/midi"],["midi","audio/midi"],["mie","application/x-mie"],["mif","application/vnd.mif"],["mime","message/rfc822"],["mj2","video/mj2"],["mjp2","video/mj2"],["mjs","application/javascript"],["mk3d","video/x-matroska"],["mka","audio/x-matroska"],["mkd","text/x-markdown"],["mks","video/x-matroska"],["mkv","video/x-matroska"],["mlp","application/vnd.dolby.mlp"],["mmd","application/vnd.chipnuts.karaoke-mmd"],["mmf","application/vnd.smaf"],["mml","text/mathml"],["mmr","image/vnd.fujixerox.edmics-mmr"],["mng","video/x-mng"],["mny","application/x-msmoney"],["mobi","application/x-mobipocket-ebook"],["mods","application/mods+xml"],["mov","video/quicktime"],["movie","video/x-sgi-movie"],["mp2","audio/mpeg"],["mp2a","audio/mpeg"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mp4a","audio/mp4"],["mp4s","application/mp4"],["mp4v","video/mp4"],["mp21","application/mp21"],["mpc","application/vnd.mophun.certificate"],["mpd","application/dash+xml"],["mpe","video/mpeg"],["mpeg","video/mpeg"],["mpg","video/mpeg"],["mpg4","video/mp4"],["mpga","audio/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["mpm","application/vnd.blueice.multipass"],["mpn","application/vnd.mophun.application"],["mpp","application/vnd.ms-project"],["mpt","application/vnd.ms-project"],["mpy","application/vnd.ibm.minipay"],["mqy","application/vnd.mobius.mqy"],["mrc","application/marc"],["mrcx","application/marcxml+xml"],["ms","text/troff"],["mscml","application/mediaservercontrol+xml"],["mseed","application/vnd.fdsn.mseed"],["mseq","application/vnd.mseq"],["msf","application/vnd.epson.msf"],["msg","application/vnd.ms-outlook"],["msh","model/mesh"],["msi","application/x-msdownload"],["msl","application/vnd.mobius.msl"],["msm","application/octet-stream"],["msp","application/octet-stream"],["msty","application/vnd.muvee.style"],["mtl","model/mtl"],["mts","model/vnd.mts"],["mus","application/vnd.musician"],["musd","application/mmt-usd+xml"],["musicxml","application/vnd.recordare.musicxml+xml"],["mvb","application/x-msmediaview"],["mvt","application/vnd.mapbox-vector-tile"],["mwf","application/vnd.mfer"],["mxf","application/mxf"],["mxl","application/vnd.recordare.musicxml"],["mxmf","audio/mobile-xmf"],["mxml","application/xv+xml"],["mxs","application/vnd.triscape.mxs"],["mxu","video/vnd.mpegurl"],["n-gage","application/vnd.nokia.n-gage.symbian.install"],["n3","text/n3"],["nb","application/mathematica"],["nbp","application/vnd.wolfram.player"],["nc","application/x-netcdf"],["ncx","application/x-dtbncx+xml"],["nfo","text/x-nfo"],["ngdat","application/vnd.nokia.n-gage.data"],["nitf","application/vnd.nitf"],["nlu","application/vnd.neurolanguage.nlu"],["nml","application/vnd.enliven"],["nnd","application/vnd.noblenet-directory"],["nns","application/vnd.noblenet-sealer"],["nnw","application/vnd.noblenet-web"],["npx","image/vnd.net-fpx"],["nq","application/n-quads"],["nsc","application/x-conference"],["nsf","application/vnd.lotus-notes"],["nt","application/n-triples"],["ntf","application/vnd.nitf"],["numbers","application/x-iwork-numbers-sffnumbers"],["nzb","application/x-nzb"],["oa2","application/vnd.fujitsu.oasys2"],["oa3","application/vnd.fujitsu.oasys3"],["oas","application/vnd.fujitsu.oasys"],["obd","application/x-msbinder"],["obgx","application/vnd.openblox.game+xml"],["obj","model/obj"],["oda","application/oda"],["odb","application/vnd.oasis.opendocument.database"],["odc","application/vnd.oasis.opendocument.chart"],["odf","application/vnd.oasis.opendocument.formula"],["odft","application/vnd.oasis.opendocument.formula-template"],["odg","application/vnd.oasis.opendocument.graphics"],["odi","application/vnd.oasis.opendocument.image"],["odm","application/vnd.oasis.opendocument.text-master"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogex","model/vnd.opengex"],["ogg","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["omdoc","application/omdoc+xml"],["onepkg","application/onenote"],["onetmp","application/onenote"],["onetoc","application/onenote"],["onetoc2","application/onenote"],["opf","application/oebps-package+xml"],["opml","text/x-opml"],["oprc","application/vnd.palm"],["opus","audio/ogg"],["org","text/x-org"],["osf","application/vnd.yamaha.openscoreformat"],["osfpvg","application/vnd.yamaha.openscoreformat.osfpvg+xml"],["osm","application/vnd.openstreetmap.data+xml"],["otc","application/vnd.oasis.opendocument.chart-template"],["otf","font/otf"],["otg","application/vnd.oasis.opendocument.graphics-template"],["oth","application/vnd.oasis.opendocument.text-web"],["oti","application/vnd.oasis.opendocument.image-template"],["otp","application/vnd.oasis.opendocument.presentation-template"],["ots","application/vnd.oasis.opendocument.spreadsheet-template"],["ott","application/vnd.oasis.opendocument.text-template"],["ova","application/x-virtualbox-ova"],["ovf","application/x-virtualbox-ovf"],["owl","application/rdf+xml"],["oxps","application/oxps"],["oxt","application/vnd.openofficeorg.extension"],["p","text/x-pascal"],["p7a","application/x-pkcs7-signature"],["p7b","application/x-pkcs7-certificates"],["p7c","application/pkcs7-mime"],["p7m","application/pkcs7-mime"],["p7r","application/x-pkcs7-certreqresp"],["p7s","application/pkcs7-signature"],["p8","application/pkcs8"],["p10","application/x-pkcs10"],["p12","application/x-pkcs12"],["pac","application/x-ns-proxy-autoconfig"],["pages","application/x-iwork-pages-sffpages"],["pas","text/x-pascal"],["paw","application/vnd.pawaafile"],["pbd","application/vnd.powerbuilder6"],["pbm","image/x-portable-bitmap"],["pcap","application/vnd.tcpdump.pcap"],["pcf","application/x-font-pcf"],["pcl","application/vnd.hp-pcl"],["pclxl","application/vnd.hp-pclxl"],["pct","image/x-pict"],["pcurl","application/vnd.curl.pcurl"],["pcx","image/x-pcx"],["pdb","application/x-pilot"],["pde","text/x-processing"],["pdf","application/pdf"],["pem","application/x-x509-user-cert"],["pfa","application/x-font-type1"],["pfb","application/x-font-type1"],["pfm","application/x-font-type1"],["pfr","application/font-tdpfr"],["pfx","application/x-pkcs12"],["pgm","image/x-portable-graymap"],["pgn","application/x-chess-pgn"],["pgp","application/pgp"],["php","application/x-httpd-php"],["php3","application/x-httpd-php"],["php4","application/x-httpd-php"],["phps","application/x-httpd-php-source"],["phtml","application/x-httpd-php"],["pic","image/x-pict"],["pkg","application/octet-stream"],["pki","application/pkixcmp"],["pkipath","application/pkix-pkipath"],["pkpass","application/vnd.apple.pkpass"],["pl","application/x-perl"],["plb","application/vnd.3gpp.pic-bw-large"],["plc","application/vnd.mobius.plc"],["plf","application/vnd.pocketlearn"],["pls","application/pls+xml"],["pm","application/x-perl"],["pml","application/vnd.ctc-posml"],["png","image/png"],["pnm","image/x-portable-anymap"],["portpkg","application/vnd.macports.portpkg"],["pot","application/vnd.ms-powerpoint"],["potm","application/vnd.ms-powerpoint.presentation.macroEnabled.12"],["potx","application/vnd.openxmlformats-officedocument.presentationml.template"],["ppa","application/vnd.ms-powerpoint"],["ppam","application/vnd.ms-powerpoint.addin.macroEnabled.12"],["ppd","application/vnd.cups-ppd"],["ppm","image/x-portable-pixmap"],["pps","application/vnd.ms-powerpoint"],["ppsm","application/vnd.ms-powerpoint.slideshow.macroEnabled.12"],["ppsx","application/vnd.openxmlformats-officedocument.presentationml.slideshow"],["ppt","application/powerpoint"],["pptm","application/vnd.ms-powerpoint.presentation.macroEnabled.12"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["pqa","application/vnd.palm"],["prc","application/x-pilot"],["pre","application/vnd.lotus-freelance"],["prf","application/pics-rules"],["provx","application/provenance+xml"],["ps","application/postscript"],["psb","application/vnd.3gpp.pic-bw-small"],["psd","application/x-photoshop"],["psf","application/x-font-linux-psf"],["pskcxml","application/pskc+xml"],["pti","image/prs.pti"],["ptid","application/vnd.pvi.ptid1"],["pub","application/x-mspublisher"],["pvb","application/vnd.3gpp.pic-bw-var"],["pwn","application/vnd.3m.post-it-notes"],["pya","audio/vnd.ms-playready.media.pya"],["pyv","video/vnd.ms-playready.media.pyv"],["qam","application/vnd.epson.quickanime"],["qbo","application/vnd.intu.qbo"],["qfx","application/vnd.intu.qfx"],["qps","application/vnd.publishare-delta-tree"],["qt","video/quicktime"],["qwd","application/vnd.quark.quarkxpress"],["qwt","application/vnd.quark.quarkxpress"],["qxb","application/vnd.quark.quarkxpress"],["qxd","application/vnd.quark.quarkxpress"],["qxl","application/vnd.quark.quarkxpress"],["qxt","application/vnd.quark.quarkxpress"],["ra","audio/x-realaudio"],["ram","audio/x-pn-realaudio"],["raml","application/raml+yaml"],["rapd","application/route-apd+xml"],["rar","application/x-rar"],["ras","image/x-cmu-raster"],["rcprofile","application/vnd.ipunplugged.rcprofile"],["rdf","application/rdf+xml"],["rdz","application/vnd.data-vision.rdz"],["relo","application/p2p-overlay+xml"],["rep","application/vnd.businessobjects"],["res","application/x-dtbresource+xml"],["rgb","image/x-rgb"],["rif","application/reginfo+xml"],["rip","audio/vnd.rip"],["ris","application/x-research-info-systems"],["rl","application/resource-lists+xml"],["rlc","image/vnd.fujixerox.edmics-rlc"],["rld","application/resource-lists-diff+xml"],["rm","audio/x-pn-realaudio"],["rmi","audio/midi"],["rmp","audio/x-pn-realaudio-plugin"],["rms","application/vnd.jcp.javame.midlet-rms"],["rmvb","application/vnd.rn-realmedia-vbr"],["rnc","application/relax-ng-compact-syntax"],["rng","application/xml"],["roa","application/rpki-roa"],["roff","text/troff"],["rp9","application/vnd.cloanto.rp9"],["rpm","audio/x-pn-realaudio-plugin"],["rpss","application/vnd.nokia.radio-presets"],["rpst","application/vnd.nokia.radio-preset"],["rq","application/sparql-query"],["rs","application/rls-services+xml"],["rsa","application/x-pkcs7"],["rsat","application/atsc-rsat+xml"],["rsd","application/rsd+xml"],["rsheet","application/urc-ressheet+xml"],["rss","application/rss+xml"],["rtf","text/rtf"],["rtx","text/richtext"],["run","application/x-makeself"],["rusd","application/route-usd+xml"],["rv","video/vnd.rn-realvideo"],["s","text/x-asm"],["s3m","audio/s3m"],["saf","application/vnd.yamaha.smaf-audio"],["sass","text/x-sass"],["sbml","application/sbml+xml"],["sc","application/vnd.ibm.secure-container"],["scd","application/x-msschedule"],["scm","application/vnd.lotus-screencam"],["scq","application/scvp-cv-request"],["scs","application/scvp-cv-response"],["scss","text/x-scss"],["scurl","text/vnd.curl.scurl"],["sda","application/vnd.stardivision.draw"],["sdc","application/vnd.stardivision.calc"],["sdd","application/vnd.stardivision.impress"],["sdkd","application/vnd.solent.sdkm+xml"],["sdkm","application/vnd.solent.sdkm+xml"],["sdp","application/sdp"],["sdw","application/vnd.stardivision.writer"],["sea","application/octet-stream"],["see","application/vnd.seemail"],["seed","application/vnd.fdsn.seed"],["sema","application/vnd.sema"],["semd","application/vnd.semd"],["semf","application/vnd.semf"],["senmlx","application/senml+xml"],["sensmlx","application/sensml+xml"],["ser","application/java-serialized-object"],["setpay","application/set-payment-initiation"],["setreg","application/set-registration-initiation"],["sfd-hdstx","application/vnd.hydrostatix.sof-data"],["sfs","application/vnd.spotfire.sfs"],["sfv","text/x-sfv"],["sgi","image/sgi"],["sgl","application/vnd.stardivision.writer-global"],["sgm","text/sgml"],["sgml","text/sgml"],["sh","application/x-sh"],["shar","application/x-shar"],["shex","text/shex"],["shf","application/shf+xml"],["shtml","text/html"],["sid","image/x-mrsid-image"],["sieve","application/sieve"],["sig","application/pgp-signature"],["sil","audio/silk"],["silo","model/mesh"],["sis","application/vnd.symbian.install"],["sisx","application/vnd.symbian.install"],["sit","application/x-stuffit"],["sitx","application/x-stuffitx"],["siv","application/sieve"],["skd","application/vnd.koan"],["skm","application/vnd.koan"],["skp","application/vnd.koan"],["skt","application/vnd.koan"],["sldm","application/vnd.ms-powerpoint.slide.macroenabled.12"],["sldx","application/vnd.openxmlformats-officedocument.presentationml.slide"],["slim","text/slim"],["slm","text/slim"],["sls","application/route-s-tsid+xml"],["slt","application/vnd.epson.salt"],["sm","application/vnd.stepmania.stepchart"],["smf","application/vnd.stardivision.math"],["smi","application/smil"],["smil","application/smil"],["smv","video/x-smv"],["smzip","application/vnd.stepmania.package"],["snd","audio/basic"],["snf","application/x-font-snf"],["so","application/octet-stream"],["spc","application/x-pkcs7-certificates"],["spdx","text/spdx"],["spf","application/vnd.yamaha.smaf-phrase"],["spl","application/x-futuresplash"],["spot","text/vnd.in3d.spot"],["spp","application/scvp-vp-response"],["spq","application/scvp-vp-request"],["spx","audio/ogg"],["sql","application/x-sql"],["src","application/x-wais-source"],["srt","application/x-subrip"],["sru","application/sru+xml"],["srx","application/sparql-results+xml"],["ssdl","application/ssdl+xml"],["sse","application/vnd.kodak-descriptor"],["ssf","application/vnd.epson.ssf"],["ssml","application/ssml+xml"],["sst","application/octet-stream"],["st","application/vnd.sailingtracker.track"],["stc","application/vnd.sun.xml.calc.template"],["std","application/vnd.sun.xml.draw.template"],["stf","application/vnd.wt.stf"],["sti","application/vnd.sun.xml.impress.template"],["stk","application/hyperstudio"],["stl","model/stl"],["stpx","model/step+xml"],["stpxz","model/step-xml+zip"],["stpz","model/step+zip"],["str","application/vnd.pg.format"],["stw","application/vnd.sun.xml.writer.template"],["styl","text/stylus"],["stylus","text/stylus"],["sub","text/vnd.dvb.subtitle"],["sus","application/vnd.sus-calendar"],["susp","application/vnd.sus-calendar"],["sv4cpio","application/x-sv4cpio"],["sv4crc","application/x-sv4crc"],["svc","application/vnd.dvb.service"],["svd","application/vnd.svd"],["svg","image/svg+xml"],["svgz","image/svg+xml"],["swa","application/x-director"],["swf","application/x-shockwave-flash"],["swi","application/vnd.aristanetworks.swi"],["swidtag","application/swid+xml"],["sxc","application/vnd.sun.xml.calc"],["sxd","application/vnd.sun.xml.draw"],["sxg","application/vnd.sun.xml.writer.global"],["sxi","application/vnd.sun.xml.impress"],["sxm","application/vnd.sun.xml.math"],["sxw","application/vnd.sun.xml.writer"],["t","text/troff"],["t3","application/x-t3vm-image"],["t38","image/t38"],["taglet","application/vnd.mynfc"],["tao","application/vnd.tao.intent-module-archive"],["tap","image/vnd.tencent.tap"],["tar","application/x-tar"],["tcap","application/vnd.3gpp2.tcap"],["tcl","application/x-tcl"],["td","application/urc-targetdesc+xml"],["teacher","application/vnd.smart.teacher"],["tei","application/tei+xml"],["teicorpus","application/tei+xml"],["tex","application/x-tex"],["texi","application/x-texinfo"],["texinfo","application/x-texinfo"],["text","text/plain"],["tfi","application/thraud+xml"],["tfm","application/x-tex-tfm"],["tfx","image/tiff-fx"],["tga","image/x-tga"],["tgz","application/x-tar"],["thmx","application/vnd.ms-officetheme"],["tif","image/tiff"],["tiff","image/tiff"],["tk","application/x-tcl"],["tmo","application/vnd.tmobile-livetv"],["toml","application/toml"],["torrent","application/x-bittorrent"],["tpl","application/vnd.groove-tool-template"],["tpt","application/vnd.trid.tpt"],["tr","text/troff"],["tra","application/vnd.trueapp"],["trig","application/trig"],["trm","application/x-msterminal"],["ts","video/mp2t"],["tsd","application/timestamped-data"],["tsv","text/tab-separated-values"],["ttc","font/collection"],["ttf","font/ttf"],["ttl","text/turtle"],["ttml","application/ttml+xml"],["twd","application/vnd.simtech-mindmapper"],["twds","application/vnd.simtech-mindmapper"],["txd","application/vnd.genomatix.tuxedo"],["txf","application/vnd.mobius.txf"],["txt","text/plain"],["u8dsn","message/global-delivery-status"],["u8hdr","message/global-headers"],["u8mdn","message/global-disposition-notification"],["u8msg","message/global"],["u32","application/x-authorware-bin"],["ubj","application/ubjson"],["udeb","application/x-debian-package"],["ufd","application/vnd.ufdl"],["ufdl","application/vnd.ufdl"],["ulx","application/x-glulx"],["umj","application/vnd.umajin"],["unityweb","application/vnd.unity"],["uoml","application/vnd.uoml+xml"],["uri","text/uri-list"],["uris","text/uri-list"],["urls","text/uri-list"],["usdz","model/vnd.usdz+zip"],["ustar","application/x-ustar"],["utz","application/vnd.uiq.theme"],["uu","text/x-uuencode"],["uva","audio/vnd.dece.audio"],["uvd","application/vnd.dece.data"],["uvf","application/vnd.dece.data"],["uvg","image/vnd.dece.graphic"],["uvh","video/vnd.dece.hd"],["uvi","image/vnd.dece.graphic"],["uvm","video/vnd.dece.mobile"],["uvp","video/vnd.dece.pd"],["uvs","video/vnd.dece.sd"],["uvt","application/vnd.dece.ttml+xml"],["uvu","video/vnd.uvvu.mp4"],["uvv","video/vnd.dece.video"],["uvva","audio/vnd.dece.audio"],["uvvd","application/vnd.dece.data"],["uvvf","application/vnd.dece.data"],["uvvg","image/vnd.dece.graphic"],["uvvh","video/vnd.dece.hd"],["uvvi","image/vnd.dece.graphic"],["uvvm","video/vnd.dece.mobile"],["uvvp","video/vnd.dece.pd"],["uvvs","video/vnd.dece.sd"],["uvvt","application/vnd.dece.ttml+xml"],["uvvu","video/vnd.uvvu.mp4"],["uvvv","video/vnd.dece.video"],["uvvx","application/vnd.dece.unspecified"],["uvvz","application/vnd.dece.zip"],["uvx","application/vnd.dece.unspecified"],["uvz","application/vnd.dece.zip"],["vbox","application/x-virtualbox-vbox"],["vbox-extpack","application/x-virtualbox-vbox-extpack"],["vcard","text/vcard"],["vcd","application/x-cdlink"],["vcf","text/x-vcard"],["vcg","application/vnd.groove-vcard"],["vcs","text/x-vcalendar"],["vcx","application/vnd.vcx"],["vdi","application/x-virtualbox-vdi"],["vds","model/vnd.sap.vds"],["vhd","application/x-virtualbox-vhd"],["vis","application/vnd.visionary"],["viv","video/vnd.vivo"],["vlc","application/videolan"],["vmdk","application/x-virtualbox-vmdk"],["vob","video/x-ms-vob"],["vor","application/vnd.stardivision.writer"],["vox","application/x-authorware-bin"],["vrml","model/vrml"],["vsd","application/vnd.visio"],["vsf","application/vnd.vsf"],["vss","application/vnd.visio"],["vst","application/vnd.visio"],["vsw","application/vnd.visio"],["vtf","image/vnd.valve.source.texture"],["vtt","text/vtt"],["vtu","model/vnd.vtu"],["vxml","application/voicexml+xml"],["w3d","application/x-director"],["wad","application/x-doom"],["wadl","application/vnd.sun.wadl+xml"],["war","application/java-archive"],["wasm","application/wasm"],["wav","audio/x-wav"],["wax","audio/x-ms-wax"],["wbmp","image/vnd.wap.wbmp"],["wbs","application/vnd.criticaltools.wbs+xml"],["wbxml","application/wbxml"],["wcm","application/vnd.ms-works"],["wdb","application/vnd.ms-works"],["wdp","image/vnd.ms-photo"],["weba","audio/webm"],["webapp","application/x-web-app-manifest+json"],["webm","video/webm"],["webmanifest","application/manifest+json"],["webp","image/webp"],["wg","application/vnd.pmi.widget"],["wgt","application/widget"],["wks","application/vnd.ms-works"],["wm","video/x-ms-wm"],["wma","audio/x-ms-wma"],["wmd","application/x-ms-wmd"],["wmf","image/wmf"],["wml","text/vnd.wap.wml"],["wmlc","application/wmlc"],["wmls","text/vnd.wap.wmlscript"],["wmlsc","application/vnd.wap.wmlscriptc"],["wmv","video/x-ms-wmv"],["wmx","video/x-ms-wmx"],["wmz","application/x-msmetafile"],["woff","font/woff"],["woff2","font/woff2"],["word","application/msword"],["wpd","application/vnd.wordperfect"],["wpl","application/vnd.ms-wpl"],["wps","application/vnd.ms-works"],["wqd","application/vnd.wqd"],["wri","application/x-mswrite"],["wrl","model/vrml"],["wsc","message/vnd.wfa.wsc"],["wsdl","application/wsdl+xml"],["wspolicy","application/wspolicy+xml"],["wtb","application/vnd.webturbo"],["wvx","video/x-ms-wvx"],["x3d","model/x3d+xml"],["x3db","model/x3d+fastinfoset"],["x3dbz","model/x3d+binary"],["x3dv","model/x3d-vrml"],["x3dvz","model/x3d+vrml"],["x3dz","model/x3d+xml"],["x32","application/x-authorware-bin"],["x_b","model/vnd.parasolid.transmit.binary"],["x_t","model/vnd.parasolid.transmit.text"],["xaml","application/xaml+xml"],["xap","application/x-silverlight-app"],["xar","application/vnd.xara"],["xav","application/xcap-att+xml"],["xbap","application/x-ms-xbap"],["xbd","application/vnd.fujixerox.docuworks.binder"],["xbm","image/x-xbitmap"],["xca","application/xcap-caps+xml"],["xcs","application/calendar+xml"],["xdf","application/xcap-diff+xml"],["xdm","application/vnd.syncml.dm+xml"],["xdp","application/vnd.adobe.xdp+xml"],["xdssc","application/dssc+xml"],["xdw","application/vnd.fujixerox.docuworks"],["xel","application/xcap-el+xml"],["xenc","application/xenc+xml"],["xer","application/patch-ops-error+xml"],["xfdf","application/vnd.adobe.xfdf"],["xfdl","application/vnd.xfdl"],["xht","application/xhtml+xml"],["xhtml","application/xhtml+xml"],["xhvml","application/xv+xml"],["xif","image/vnd.xiff"],["xl","application/excel"],["xla","application/vnd.ms-excel"],["xlam","application/vnd.ms-excel.addin.macroEnabled.12"],["xlc","application/vnd.ms-excel"],["xlf","application/xliff+xml"],["xlm","application/vnd.ms-excel"],["xls","application/vnd.ms-excel"],["xlsb","application/vnd.ms-excel.sheet.binary.macroEnabled.12"],["xlsm","application/vnd.ms-excel.sheet.macroEnabled.12"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xlt","application/vnd.ms-excel"],["xltm","application/vnd.ms-excel.template.macroEnabled.12"],["xltx","application/vnd.openxmlformats-officedocument.spreadsheetml.template"],["xlw","application/vnd.ms-excel"],["xm","audio/xm"],["xml","application/xml"],["xns","application/xcap-ns+xml"],["xo","application/vnd.olpc-sugar"],["xop","application/xop+xml"],["xpi","application/x-xpinstall"],["xpl","application/xproc+xml"],["xpm","image/x-xpixmap"],["xpr","application/vnd.is-xpr"],["xps","application/vnd.ms-xpsdocument"],["xpw","application/vnd.intercon.formnet"],["xpx","application/vnd.intercon.formnet"],["xsd","application/xml"],["xsl","application/xml"],["xslt","application/xslt+xml"],["xsm","application/vnd.syncml+xml"],["xspf","application/xspf+xml"],["xul","application/vnd.mozilla.xul+xml"],["xvm","application/xv+xml"],["xvml","application/xv+xml"],["xwd","image/x-xwindowdump"],["xyz","chemical/x-xyz"],["xz","application/x-xz"],["yaml","text/yaml"],["yang","application/yang"],["yin","application/yin+xml"],["yml","text/yaml"],["ymp","text/x-suse-ymp"],["z","application/x-compress"],["z1","application/x-zmachine"],["z2","application/x-zmachine"],["z3","application/x-zmachine"],["z4","application/x-zmachine"],["z5","application/x-zmachine"],["z6","application/x-zmachine"],["z7","application/x-zmachine"],["z8","application/x-zmachine"],["zaz","application/vnd.zzazz.deck+xml"],["zip","application/zip"],["zir","application/vnd.zul"],["zirz","application/vnd.zul"],["zmm","application/vnd.handheld-entertainment+xml"],["zsh","text/x-scriptzsh"]]);function ub(t,e,n){const r=f5e(t),{webkitRelativePath:i}=t,a=typeof e=="string"?e:typeof i=="string"&&i.length>0?i:`./${t.name}`;return typeof r.path!="string"&&fV(r,"path",a),n!==void 0&&Object.defineProperty(r,"handle",{value:n,writable:!1,configurable:!1,enumerable:!0}),fV(r,"relativePath",a),r}function f5e(t){const{name:e}=t;if(e&&e.lastIndexOf(".")!==-1&&!t.type){const r=e.split(".").pop().toLowerCase(),i=h5e.get(r);i&&Object.defineProperty(t,"type",{value:i,writable:!1,configurable:!1,enumerable:!0})}return t}function fV(t,e,n){Object.defineProperty(t,e,{value:n,writable:!1,configurable:!1,enumerable:!0})}const m5e=[".DS_Store","Thumbs.db"];function p5e(t){return Cv(this,void 0,void 0,function*(){return DP(t)&&g5e(t.dataTransfer)?b5e(t.dataTransfer,t.type):v5e(t)?x5e(t):Array.isArray(t)&&t.every(e=>"getFile"in e&&typeof e.getFile=="function")?y5e(t):[]})}function g5e(t){return DP(t)}function v5e(t){return DP(t)&&DP(t.target)}function DP(t){return typeof t=="object"&&t!==null}function x5e(t){return jM(t.target.files).map(e=>ub(e))}function y5e(t){return Cv(this,void 0,void 0,function*(){return(yield Promise.all(t.map(n=>n.getFile()))).map(n=>ub(n))})}function b5e(t,e){return Cv(this,void 0,void 0,function*(){if(t.items){const n=jM(t.items).filter(i=>i.kind==="file");if(e!=="drop")return n;const r=yield Promise.all(n.map(w5e));return mV(Mre(r))}return mV(jM(t.files).map(n=>ub(n)))})}function mV(t){return t.filter(e=>m5e.indexOf(e.name)===-1)}function jM(t){if(t===null)return[];const e=[];for(let n=0;n<t.length;n++){const r=t[n];e.push(r)}return e}function w5e(t){if(typeof t.webkitGetAsEntry!="function")return pV(t);const e=t.webkitGetAsEntry();return e&&e.isDirectory?Fre(e):pV(t,e)}function Mre(t){return t.reduce((e,n)=>[...e,...Array.isArray(n)?Mre(n):[n]],[])}function pV(t,e){return Cv(this,void 0,void 0,function*(){var n;if(globalThis.isSecureContext&&typeof t.getAsFileSystemHandle=="function"){const a=yield t.getAsFileSystemHandle();if(a===null)throw new Error(`${t} is not a File`);if(a!==void 0){const o=yield a.getFile();return o.handle=a,ub(o)}}const r=t.getAsFile();if(!r)throw new Error(`${t} is not a File`);return ub(r,(n=e==null?void 0:e.fullPath)!==null&&n!==void 0?n:void 0)})}function j5e(t){return Cv(this,void 0,void 0,function*(){return t.isDirectory?Fre(t):N5e(t)})}function Fre(t){const e=t.createReader();return new Promise((n,r)=>{const i=[];function a(){e.readEntries(o=>Cv(this,void 0,void 0,function*(){if(o.length){const l=Promise.all(o.map(j5e));i.push(l),a()}else try{const l=yield Promise.all(i);n(l)}catch(l){r(l)}}),o=>{r(o)})}a()})}function N5e(t){return Cv(this,void 0,void 0,function*(){return new Promise((e,n)=>{t.file(r=>{const i=ub(r,t.fullPath);e(i)},r=>{n(r)})})})}var H_=function(t,e){if(t&&e){var n=Array.isArray(e)?e:e.split(",");if(n.length===0)return!0;var r=t.name||"",i=(t.type||"").toLowerCase(),a=i.replace(/\/.*$/,"");return n.some(function(o){var l=o.trim().toLowerCase();return l.charAt(0)==="."?r.toLowerCase().endsWith(l):l.endsWith("/*")?a===l.replace(/\/.*$/,""):i===l})}return!0};function gV(t){return C5e(t)||A5e(t)||Bre(t)||S5e()}function S5e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function A5e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function C5e(t){if(Array.isArray(t))return NM(t)}function vV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function xV(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?vV(Object(n),!0).forEach(function(r){$re(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):vV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function $re(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function t2(t,e){return T5e(t)||P5e(t,e)||Bre(t,e)||E5e()}function E5e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Bre(t,e){if(t){if(typeof t=="string")return NM(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return NM(t,e)}}function NM(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function P5e(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r=[],i=!0,a=!1,o,l;try{for(n=n.call(t);!(i=(o=n.next()).done)&&(r.push(o.value),!(e&&r.length===e));i=!0);}catch(c){a=!0,l=c}finally{try{!i&&n.return!=null&&n.return()}finally{if(a)throw l}}return r}}function T5e(t){if(Array.isArray(t))return t}var I5e=typeof H_=="function"?H_:H_.default,D5e="file-invalid-type",k5e="file-too-large",_5e="file-too-small",O5e="too-many-files",L5e=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",n=e.split(","),r=n.length>1?"one of ".concat(n.join(", ")):n[0];return{code:D5e,message:"File type must be ".concat(r)}},yV=function(e){return{code:k5e,message:"File is larger than ".concat(e," ").concat(e===1?"byte":"bytes")}},bV=function(e){return{code:_5e,message:"File is smaller than ".concat(e," ").concat(e===1?"byte":"bytes")}},R5e={code:O5e,message:"Too many files"};function zre(t,e){var n=t.type==="application/x-moz-file"||I5e(t,e);return[n,n?null:L5e(e)]}function Ure(t,e,n){if(dp(t.size))if(dp(e)&&dp(n)){if(t.size>n)return[!1,yV(n)];if(t.size<e)return[!1,bV(e)]}else{if(dp(e)&&t.size<e)return[!1,bV(e)];if(dp(n)&&t.size>n)return[!1,yV(n)]}return[!0,null]}function dp(t){return t!=null}function M5e(t){var e=t.files,n=t.accept,r=t.minSize,i=t.maxSize,a=t.multiple,o=t.maxFiles,l=t.validator;return!a&&e.length>1||a&&o>=1&&e.length>o?!1:e.every(function(c){var d=zre(c,n),u=t2(d,1),h=u[0],f=Ure(c,r,i),m=t2(f,1),v=m[0],p=l?l(c):null;return h&&v&&!p})}function kP(t){return typeof t.isPropagationStopped=="function"?t.isPropagationStopped():typeof t.cancelBubble<"u"?t.cancelBubble:!1}function gC(t){return t.dataTransfer?Array.prototype.some.call(t.dataTransfer.types,function(e){return e==="Files"||e==="application/x-moz-file"}):!!t.target&&!!t.target.files}function wV(t){t.preventDefault()}function F5e(t){return t.indexOf("MSIE")!==-1||t.indexOf("Trident/")!==-1}function $5e(t){return t.indexOf("Edge/")!==-1}function B5e(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.navigator.userAgent;return F5e(t)||$5e(t)}function $c(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(r){for(var i=arguments.length,a=new Array(i>1?i-1:0),o=1;o<i;o++)a[o-1]=arguments[o];return e.some(function(l){return!kP(r)&&l&&l.apply(void 0,[r].concat(a)),kP(r)})}}function z5e(){return"showOpenFilePicker"in window}function U5e(t){if(dp(t)){var e=Object.entries(t).filter(function(n){var r=t2(n,2),i=r[0],a=r[1],o=!0;return Vre(i)||(console.warn('Skipped "'.concat(i,'" because it is not a valid MIME type. Check https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types/Common_types for a list of valid MIME types.')),o=!1),(!Array.isArray(a)||!a.every(qre))&&(console.warn('Skipped "'.concat(i,'" because an invalid file extension was provided.')),o=!1),o}).reduce(function(n,r){var i=t2(r,2),a=i[0],o=i[1];return xV(xV({},n),{},$re({},a,o))},{});return[{description:"Files",accept:e}]}return t}function V5e(t){if(dp(t))return Object.entries(t).reduce(function(e,n){var r=t2(n,2),i=r[0],a=r[1];return[].concat(gV(e),[i],gV(a))},[]).filter(function(e){return Vre(e)||qre(e)}).join(",")}function q5e(t){return t instanceof DOMException&&(t.name==="AbortError"||t.code===t.ABORT_ERR)}function H5e(t){return t instanceof DOMException&&(t.name==="SecurityError"||t.code===t.SECURITY_ERR)}function Vre(t){return t==="audio/*"||t==="video/*"||t==="image/*"||t==="text/*"||t==="application/*"||/\w+\/[-+.\w]+/g.test(t)}function qre(t){return/^.*\.[\w]+$/.test(t)}var W5e=["children"],G5e=["open"],K5e=["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],Y5e=["refKey","onChange","onClick"];function X5e(t){return J5e(t)||Q5e(t)||Hre(t)||Z5e()}function Z5e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Q5e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function J5e(t){if(Array.isArray(t))return SM(t)}function W_(t,e){return nCe(t)||tCe(t,e)||Hre(t,e)||eCe()}function eCe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Hre(t,e){if(t){if(typeof t=="string")return SM(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return SM(t,e)}}function SM(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function tCe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r=[],i=!0,a=!1,o,l;try{for(n=n.call(t);!(i=(o=n.next()).done)&&(r.push(o.value),!(e&&r.length===e));i=!0);}catch(c){a=!0,l=c}finally{try{!i&&n.return!=null&&n.return()}finally{if(a)throw l}}return r}}function nCe(t){if(Array.isArray(t))return t}function jV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function zr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?jV(Object(n),!0).forEach(function(r){AM(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):jV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function AM(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _P(t,e){if(t==null)return{};var n=rCe(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function rCe(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,a;for(a=0;a<r.length;a++)i=r[a],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}var L8=A.forwardRef(function(t,e){var n=t.children,r=_P(t,W5e),i=F3(r),a=i.open,o=_P(i,G5e);return A.useImperativeHandle(e,function(){return{open:a}},[a]),ge.createElement(A.Fragment,null,n(zr(zr({},o),{},{open:a})))});L8.displayName="Dropzone";var Wre={disabled:!1,getFilesFromEvent:p5e,maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!1,autoFocus:!1};L8.defaultProps=Wre;L8.propTypes={children:Rt.func,accept:Rt.objectOf(Rt.arrayOf(Rt.string)),multiple:Rt.bool,preventDropOnDocument:Rt.bool,noClick:Rt.bool,noKeyboard:Rt.bool,noDrag:Rt.bool,noDragEventsBubbling:Rt.bool,minSize:Rt.number,maxSize:Rt.number,maxFiles:Rt.number,disabled:Rt.bool,getFilesFromEvent:Rt.func,onFileDialogCancel:Rt.func,onFileDialogOpen:Rt.func,useFsAccessApi:Rt.bool,autoFocus:Rt.bool,onDragEnter:Rt.func,onDragLeave:Rt.func,onDragOver:Rt.func,onDrop:Rt.func,onDropAccepted:Rt.func,onDropRejected:Rt.func,onError:Rt.func,validator:Rt.func};var CM={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,acceptedFiles:[],fileRejections:[]};function F3(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=zr(zr({},Wre),t),n=e.accept,r=e.disabled,i=e.getFilesFromEvent,a=e.maxSize,o=e.minSize,l=e.multiple,c=e.maxFiles,d=e.onDragEnter,u=e.onDragLeave,h=e.onDragOver,f=e.onDrop,m=e.onDropAccepted,v=e.onDropRejected,p=e.onFileDialogCancel,g=e.onFileDialogOpen,x=e.useFsAccessApi,y=e.autoFocus,b=e.preventDropOnDocument,w=e.noClick,N=e.noKeyboard,E=e.noDrag,C=e.noDragEventsBubbling,j=e.onError,I=e.validator,k=A.useMemo(function(){return V5e(n)},[n]),D=A.useMemo(function(){return U5e(n)},[n]),P=A.useMemo(function(){return typeof g=="function"?g:NV},[g]),R=A.useMemo(function(){return typeof p=="function"?p:NV},[p]),_=A.useRef(null),M=A.useRef(null),U=A.useReducer(sCe,CM),F=W_(U,2),z=F[0],H=F[1],W=z.isFocused,$=z.isFileDialogActive,L=A.useRef(typeof window<"u"&&window.isSecureContext&&x&&z5e()),q=function(){!L.current&&$&&setTimeout(function(){if(M.current){var nt=M.current.files;nt.length||(H({type:"closeDialog"}),R())}},300)};A.useEffect(function(){return window.addEventListener("focus",q,!1),function(){window.removeEventListener("focus",q,!1)}},[M,$,R,L]);var Y=A.useRef([]),J=function(nt){_.current&&_.current.contains(nt.target)||(nt.preventDefault(),Y.current=[])};A.useEffect(function(){return b&&(document.addEventListener("dragover",wV,!1),document.addEventListener("drop",J,!1)),function(){b&&(document.removeEventListener("dragover",wV),document.removeEventListener("drop",J))}},[_,b]),A.useEffect(function(){return!r&&y&&_.current&&_.current.focus(),function(){}},[_,y,r]);var ne=A.useCallback(function(Ve){j?j(Ve):console.error(Ve)},[j]),re=A.useCallback(function(Ve){Ve.preventDefault(),Ve.persist(),Ue(Ve),Y.current=[].concat(X5e(Y.current),[Ve.target]),gC(Ve)&&Promise.resolve(i(Ve)).then(function(nt){if(!(kP(Ve)&&!C)){var vt=nt.length,Nt=vt>0&&M5e({files:nt,accept:k,minSize:o,maxSize:a,multiple:l,maxFiles:c,validator:I}),zt=vt>0&&!Nt;H({isDragAccept:Nt,isDragReject:zt,isDragActive:!0,type:"setDraggedFiles"}),d&&d(Ve)}}).catch(function(nt){return ne(nt)})},[i,d,ne,C,k,o,a,l,c,I]),pe=A.useCallback(function(Ve){Ve.preventDefault(),Ve.persist(),Ue(Ve);var nt=gC(Ve);if(nt&&Ve.dataTransfer)try{Ve.dataTransfer.dropEffect="copy"}catch{}return nt&&h&&h(Ve),!1},[h,C]),ue=A.useCallback(function(Ve){Ve.preventDefault(),Ve.persist(),Ue(Ve);var nt=Y.current.filter(function(Nt){return _.current&&_.current.contains(Nt)}),vt=nt.indexOf(Ve.target);vt!==-1&&nt.splice(vt,1),Y.current=nt,!(nt.length>0)&&(H({type:"setDraggedFiles",isDragActive:!1,isDragAccept:!1,isDragReject:!1}),gC(Ve)&&u&&u(Ve))},[_,u,C]),xe=A.useCallback(function(Ve,nt){var vt=[],Nt=[];Ve.forEach(function(zt){var Lt=zre(zt,k),Yt=W_(Lt,2),mt=Yt[0],Bn=Yt[1],hn=Ure(zt,o,a),Ds=W_(hn,2),zn=Ds[0],tr=Ds[1],ba=I?I(zt):null;if(mt&&zn&&!ba)vt.push(zt);else{var An=[Bn,tr];ba&&(An=An.concat(ba)),Nt.push({file:zt,errors:An.filter(function(Ld){return Ld})})}}),(!l&&vt.length>1||l&&c>=1&&vt.length>c)&&(vt.forEach(function(zt){Nt.push({file:zt,errors:[R5e]})}),vt.splice(0)),H({acceptedFiles:vt,fileRejections:Nt,isDragReject:Nt.length>0,type:"setFiles"}),f&&f(vt,Nt,nt),Nt.length>0&&v&&v(Nt,nt),vt.length>0&&m&&m(vt,nt)},[H,l,k,o,a,c,f,m,v,I]),Ne=A.useCallback(function(Ve){Ve.preventDefault(),Ve.persist(),Ue(Ve),Y.current=[],gC(Ve)&&Promise.resolve(i(Ve)).then(function(nt){kP(Ve)&&!C||xe(nt,Ve)}).catch(function(nt){return ne(nt)}),H({type:"reset"})},[i,xe,ne,C]),je=A.useCallback(function(){if(L.current){H({type:"openDialog"}),P();var Ve={multiple:l,types:D};window.showOpenFilePicker(Ve).then(function(nt){return i(nt)}).then(function(nt){xe(nt,null),H({type:"closeDialog"})}).catch(function(nt){q5e(nt)?(R(nt),H({type:"closeDialog"})):H5e(nt)?(L.current=!1,M.current?(M.current.value=null,M.current.click()):ne(new Error("Cannot open the file picker because the https://developer.mozilla.org/en-US/docs/Web/API/File_System_Access_API is not supported and no <input> was provided."))):ne(nt)});return}M.current&&(H({type:"openDialog"}),P(),M.current.value=null,M.current.click())},[H,P,R,x,xe,ne,D,l]),$e=A.useCallback(function(Ve){!_.current||!_.current.isEqualNode(Ve.target)||(Ve.key===" "||Ve.key==="Enter"||Ve.keyCode===32||Ve.keyCode===13)&&(Ve.preventDefault(),je())},[_,je]),ze=A.useCallback(function(){H({type:"focus"})},[]),De=A.useCallback(function(){H({type:"blur"})},[]),ce=A.useCallback(function(){w||(B5e()?setTimeout(je,0):je())},[w,je]),Te=function(nt){return r?null:nt},Ce=function(nt){return N?null:Te(nt)},Se=function(nt){return E?null:Te(nt)},Ue=function(nt){C&&nt.stopPropagation()},ot=A.useMemo(function(){return function(){var Ve=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},nt=Ve.refKey,vt=nt===void 0?"ref":nt,Nt=Ve.role,zt=Ve.onKeyDown,Lt=Ve.onFocus,Yt=Ve.onBlur,mt=Ve.onClick,Bn=Ve.onDragEnter,hn=Ve.onDragOver,Ds=Ve.onDragLeave,zn=Ve.onDrop,tr=_P(Ve,K5e);return zr(zr(AM({onKeyDown:Ce($c(zt,$e)),onFocus:Ce($c(Lt,ze)),onBlur:Ce($c(Yt,De)),onClick:Te($c(mt,ce)),onDragEnter:Se($c(Bn,re)),onDragOver:Se($c(hn,pe)),onDragLeave:Se($c(Ds,ue)),onDrop:Se($c(zn,Ne)),role:typeof Nt=="string"&&Nt!==""?Nt:"presentation"},vt,_),!r&&!N?{tabIndex:0}:{}),tr)}},[_,$e,ze,De,ce,re,pe,ue,Ne,N,E,r]),at=A.useCallback(function(Ve){Ve.stopPropagation()},[]),jt=A.useMemo(function(){return function(){var Ve=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},nt=Ve.refKey,vt=nt===void 0?"ref":nt,Nt=Ve.onChange,zt=Ve.onClick,Lt=_P(Ve,Y5e),Yt=AM({accept:k,multiple:l,type:"file",style:{border:0,clip:"rect(0, 0, 0, 0)",clipPath:"inset(50%)",height:"1px",margin:"0 -1px -1px 0",overflow:"hidden",padding:0,position:"absolute",width:"1px",whiteSpace:"nowrap"},onChange:Te($c(Nt,Ne)),onClick:Te($c(zt,at)),tabIndex:-1},vt,M);return zr(zr({},Yt),Lt)}},[M,n,l,Ne,r]);return zr(zr({},z),{},{isFocused:W&&!r,getRootProps:ot,getInputProps:jt,rootRef:_,inputRef:M,open:Te(je)})}function sCe(t,e){switch(e.type){case"focus":return zr(zr({},t),{},{isFocused:!0});case"blur":return zr(zr({},t),{},{isFocused:!1});case"openDialog":return zr(zr({},CM),{},{isFileDialogActive:!0});case"closeDialog":return zr(zr({},t),{},{isFileDialogActive:!1});case"setDraggedFiles":return zr(zr({},t),{},{isDragActive:e.isDragActive,isDragAccept:e.isDragAccept,isDragReject:e.isDragReject});case"setFiles":return zr(zr({},t),{},{acceptedFiles:e.acceptedFiles,fileRejections:e.fileRejections,isDragReject:e.isDragReject});case"reset":return zr({},CM);default:return t}}function NV(){}function Gre({delivery:t,vehicles:e,customers:n,onSave:r,onCancel:i}){var j,I,k,D,P,R,_,M,U,F,z,H,W;const{toast:a}=Ot(),[o,l]=A.useState(!1),[c,d]=A.useState((t==null?void 0:t.type)||iu.deliveryTypes[0]),[u,h]=A.useState((t==null?void 0:t.status)||iu.deliveryStatuses[0]);A.useState(t!=null&&t.scheduledDate?new Date(t.scheduledDate).toISOString().split("T")[0]:"");const[f,m]=A.useState(!1),[v,p]=A.useState({customerId:"",vehicleId:"",status:cn.SCHEDULED,scheduledDate:new Date,address:{street:"",city:"",state:"",zipCode:"",country:"USA"},driver:"",notes:"",customFields:{contactPhone:"",contactEmail:"",sendSMSUpdates:!0,sendEmailUpdates:!0,estimatedArrival:"",departureTime:"",departureNotes:"",deliveryNotes:"",deliveryPhotos:[]}});A.useState((t==null?void 0:t.notes)||"");const[g,x]=A.useState(()=>{const $={};return iu.checklistItems.forEach(L=>{$[L]=!1}),{...$,...t==null?void 0:t.checklist}});A.useEffect(()=>{var $,L,q,Y,J,ne,re,pe,ue;t&&p({...t,customFields:{...t.customFields,contactPhone:(($=t.customFields)==null?void 0:$.contactPhone)||"",contactEmail:((L=t.customFields)==null?void 0:L.contactEmail)||"",sendSMSUpdates:((q=t.customFields)==null?void 0:q.sendSMSUpdates)!==!1,sendEmailUpdates:((Y=t.customFields)==null?void 0:Y.sendEmailUpdates)!==!1,estimatedArrival:((J=t.customFields)==null?void 0:J.estimatedArrival)||"",departureTime:((ne=t.customFields)==null?void 0:ne.departureTime)||"",departureNotes:((re=t.customFields)==null?void 0:re.departureNotes)||"",deliveryNotes:((pe=t.customFields)==null?void 0:pe.deliveryNotes)||"",deliveryPhotos:((ue=t.customFields)==null?void 0:ue.deliveryPhotos)||[]}})},[t]);const{getRootProps:y,getInputProps:b}=F3({accept:{"image/*":[]},onDrop:$=>{const L=$.map(q=>URL.createObjectURL(q));p(q=>{var Y;return{...q,customFields:{...q.customFields,deliveryPhotos:[...((Y=q.customFields)==null?void 0:Y.deliveryPhotos)||[],...L]}}}),a({title:"Photos Added",description:`Added ${$.length} delivery photos`})}}),w=$=>{$==="__add_new_customer__"?m(!0):p(L=>({...L,customerId:$}))},N=$=>{p(L=>({...L,customerId:$.id})),m(!1),a({title:"Customer Added",description:`${$.firstName} ${$.lastName} has been added as a customer.`})},E=async $=>{var L,q,Y,J;if($.preventDefault(),!v.customerId||!v.vehicleId||!v.scheduledDate){a({title:"Validation Error",description:"Please fill in all required fields",variant:"destructive"});return}if(!((L=v.address)!=null&&L.street)||!((q=v.address)!=null&&q.city)||!((Y=v.address)!=null&&Y.state)||!((J=v.address)!=null&&J.zipCode)){a({title:"Validation Error",description:"Please provide a complete delivery address",variant:"destructive"});return}l(!0);try{await r(v),a({title:"Success",description:`Delivery ${t?"updated":"scheduled"} successfully`})}catch{a({title:"Error",description:`Failed to ${t?"update":"schedule"} delivery`,variant:"destructive"})}finally{l(!1)}},C=$=>{p(L=>{var q,Y;return{...L,customFields:{...L.customFields,deliveryPhotos:((Y=(q=L.customFields)==null?void 0:q.deliveryPhotos)==null?void 0:Y.filter(J=>J!==$))||[]}}})};return s.jsxs("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:[f&&s.jsx(Yb,{onClose:()=>m(!1),onSuccess:N}),s.jsxs(he,{className:"w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[s.jsx(ye,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx(be,{children:t?"Edit Delivery":"Schedule Delivery"}),s.jsx(Be,{children:t?"Update delivery details":"Schedule a new delivery"})]}),s.jsx(Q,{variant:"ghost",size:"sm",onClick:i,children:s.jsx(on,{className:"h-4 w-4"})})]})}),s.jsx(fe,{children:s.jsxs("form",{onSubmit:E,className:"space-y-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-semibold",children:"Delivery Information"}),s.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"customerId",children:"Customer *"}),s.jsxs(Ke,{value:v.customerId,onValueChange:w,children:[s.jsx(He,{children:s.jsx(Ye,{placeholder:"Select customer"})}),s.jsxs(We,{className:"z-50",children:[s.jsx("div",{className:"px-2 py-1.5",children:s.jsxs(Q,{variant:"outline",size:"sm",className:"w-full justify-start",onClick:()=>w("__add_new_customer__"),children:[s.jsx(yt,{className:"h-3.5 w-3.5 mr-2"}),"Add New Customer"]})}),s.jsx("div",{className:"px-2 py-1 border-t"}),n.map($=>s.jsx(le,{value:$.id,children:s.jsxs("div",{className:"flex flex-col",children:[s.jsxs("span",{children:[$.firstName," ",$.lastName]}),s.jsx("span",{className:"text-xs text-muted-foreground",children:$.phone})]})},$.id)),n.length===0&&s.jsx("div",{className:"px-2 py-4 text-center text-sm text-muted-foreground",children:"No customers found"})]})]})]}),s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"vehicleId",children:"Vehicle *"}),s.jsxs(Ke,{value:v.vehicleId,onValueChange:$=>p(L=>({...L,vehicleId:$})),children:[s.jsx(He,{children:s.jsx(Ye,{placeholder:"Select vehicle"})}),s.jsx(We,{className:"z-50",children:e.map($=>s.jsxs(le,{value:$.id,children:[$.year," ",$.make," ",$.model]},$.id))})]})]})]}),s.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"scheduledDate",children:"Scheduled Date *"}),s.jsx(Ae,{id:"scheduledDate",type:"date",value:v.scheduledDate?new Date(v.scheduledDate).toISOString().split("T")[0]:"",onChange:$=>p(L=>({...L,scheduledDate:$.target.value?new Date($.target.value):new Date}))})]}),s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"estimatedArrival",children:"Estimated Arrival Time"}),s.jsx(Ae,{id:"estimatedArrival",type:"time",value:((j=v.customFields)==null?void 0:j.estimatedArrival)||"",onChange:$=>p(L=>({...L,customFields:{...L.customFields,estimatedArrival:$.target.value}}))})]})]}),s.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"deliveryType",children:"Delivery Type"}),s.jsxs(Ke,{value:c,onValueChange:d,children:[s.jsx(He,{children:s.jsx(Ye,{placeholder:"Select delivery type"})}),s.jsx(We,{children:iu.deliveryTypes.map($=>s.jsx(le,{value:$,children:$},$))})]})]}),s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"status",children:"Status"}),s.jsxs(Ke,{value:u,onValueChange:h,children:[s.jsx(He,{children:s.jsx(Ye,{placeholder:"Select status"})}),s.jsx(We,{children:iu.deliveryStatuses.map($=>s.jsx(le,{value:$,children:$},$))})]})]})]}),s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"driver",children:"Driver"}),s.jsx(Ae,{id:"driver",value:v.driver||"",onChange:$=>p(L=>({...L,driver:$.target.value})),placeholder:"Driver name"})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-semibold",children:"Delivery Address"}),s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"street",children:"Street Address *"}),s.jsx(Ae,{id:"street",value:((I=v.address)==null?void 0:I.street)||"",onChange:$=>p(L=>({...L,address:{...L.address,street:$.target.value}})),placeholder:"123 Main St"})]}),s.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"city",children:"City *"}),s.jsx(Ae,{id:"city",value:((k=v.address)==null?void 0:k.city)||"",onChange:$=>p(L=>({...L,address:{...L.address,city:$.target.value}})),placeholder:"City"})]}),s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"state",children:"State *"}),s.jsx(Ae,{id:"state",value:((D=v.address)==null?void 0:D.state)||"",onChange:$=>p(L=>({...L,address:{...L.address,state:$.target.value}})),placeholder:"State"})]}),s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"zipCode",children:"Zip Code *"}),s.jsx(Ae,{id:"zipCode",value:((P=v.address)==null?void 0:P.zipCode)||"",onChange:$=>p(L=>({...L,address:{...L.address,zipCode:$.target.value}})),placeholder:"Zip Code"})]})]}),s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"country",children:"Country"}),s.jsx(Ae,{id:"country",value:((R=v.address)==null?void 0:R.country)||"USA",onChange:$=>p(L=>({...L,address:{...L.address,country:$.target.value}})),placeholder:"Country"})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-semibold",children:"Contact Information"}),s.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"contactPhone",children:"Contact Phone"}),s.jsx(Ae,{id:"contactPhone",value:((_=v.customFields)==null?void 0:_.contactPhone)||"",onChange:$=>p(L=>({...L,customFields:{...L.customFields,contactPhone:$.target.value}})),placeholder:"(555) 123-4567"})]}),s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"contactEmail",children:"Contact Email"}),s.jsx(Ae,{id:"contactEmail",type:"email",value:((M=v.customFields)==null?void 0:M.contactEmail)||"",onChange:$=>p(L=>({...L,customFields:{...L.customFields,contactEmail:$.target.value}})),placeholder:"customer@example.com"})]})]}),s.jsxs("div",{className:"flex flex-col space-y-2",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx($t,{id:"sendSMSUpdates",checked:((U=v.customFields)==null?void 0:U.sendSMSUpdates)!==!1,onCheckedChange:$=>p(L=>({...L,customFields:{...L.customFields,sendSMSUpdates:!!$}}))}),s.jsx(ae,{htmlFor:"sendSMSUpdates",children:"Send SMS updates"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx($t,{id:"sendEmailUpdates",checked:((F=v.customFields)==null?void 0:F.sendEmailUpdates)!==!1,onCheckedChange:$=>p(L=>({...L,customFields:{...L.customFields,sendEmailUpdates:!!$}}))}),s.jsx(ae,{htmlFor:"sendEmailUpdates",children:"Send email updates"})]})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-semibold",children:"Delivery Details"}),(v.status===cn.IN_TRANSIT||v.status===cn.DELIVERED)&&s.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"departureTime",children:"Departure Time"}),s.jsx(Ae,{id:"departureTime",type:"datetime-local",value:((z=v.customFields)==null?void 0:z.departureTime)||"",onChange:$=>p(L=>({...L,customFields:{...L.customFields,departureTime:$.target.value}}))})]}),s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"departureNotes",children:"Departure Notes"}),s.jsx(Ae,{id:"departureNotes",value:((H=v.customFields)==null?void 0:H.departureNotes)||"",onChange:$=>p(L=>({...L,customFields:{...L.customFields,departureNotes:$.target.value}})),placeholder:"Notes about departure"})]})]}),v.status===cn.DELIVERED&&s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"deliveredDate",children:"Delivery Date"}),s.jsx(Ae,{id:"deliveredDate",type:"datetime-local",value:v.deliveredDate?new Date(v.deliveredDate).toISOString().slice(0,16):"",onChange:$=>p(L=>({...L,deliveredDate:$.target.value?new Date($.target.value):void 0}))})]}),s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"notes",children:"Delivery Notes"}),s.jsx(un,{id:"notes",value:v.notes||"",onChange:$=>p(L=>({...L,notes:$.target.value})),placeholder:"Add any notes about this delivery",rows:3})]}),s.jsxs("div",{children:[s.jsx(ae,{children:"Delivery Checklist"}),s.jsx("div",{className:"space-y-2 mt-2",children:iu.checklistItems.map($=>s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx($t,{checked:g[$]||!1,onCheckedChange:L=>x(q=>({...q,[$]:!!L}))}),s.jsx(ae,{className:"text-sm",children:$})]},$))})]})]}),(v.status===cn.DELIVERED||v.status===cn.IN_TRANSIT)&&s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-semibold",children:"Delivery Photos"}),s.jsxs("div",{...y(),className:"border-2 border-dashed rounded-lg p-6 text-center cursor-pointer hover:bg-muted/10",children:[s.jsx("input",{...b()}),s.jsxs("div",{className:"flex flex-col items-center",children:[s.jsx(Camera,{className:"h-8 w-8 mb-2 text-muted-foreground"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Drag & drop photos here, or click to select files"}),s.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Upload photos for delivery verification"})]})]}),((W=v.customFields)==null?void 0:W.deliveryPhotos)&&v.customFields.deliveryPhotos.length>0&&s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mt-4",children:v.customFields.deliveryPhotos.map(($,L)=>s.jsxs("div",{className:"relative group",children:[s.jsx("img",{src:$,alt:`Delivery photo ${L+1}`,className:"h-24 w-full object-cover rounded-md"}),s.jsx(Q,{type:"button",variant:"destructive",size:"sm",className:"absolute top-1 right-1 opacity-0 group-hover:opacity-100 transition-opacity",onClick:()=>C($),children:s.jsx(on,{className:"h-3 w-3"})})]},L))})]}),s.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t",children:[s.jsx(Q,{type:"button",variant:"outline",onClick:i,disabled:o,children:"Cancel"}),s.jsx(Q,{type:"submit",disabled:o,children:o?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),t?"Updating...":"Scheduling..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Wn,{className:"h-4 w-4 mr-2"}),t?"Update":"Schedule"," Delivery"]})})]})]})})]})]})}function iCe({delivery:t,onAddMilestone:e}){const r=(()=>{try{const i=[],a=t.customFields||{},o=c=>c?new Date(c):new Date;return i.push({id:"scheduled",title:"Delivery Scheduled",description:`Scheduled for ${ht(t.scheduledDate)}`,date:o(t.createdAt),icon:Sn}),[cn.IN_TRANSIT,cn.DELIVERED].includes(t.status)&&(i.push({id:"preparation",title:"Preparation Complete",description:"Vehicle prepared and ready for delivery",date:new Date(new Date(t.scheduledDate).getTime()-864e5),icon:Rn}),i.push({id:"in_transit",title:"In Transit",description:a.departureNotes||"Vehicle has left the dealership",date:o(a.departureTime),icon:Fa})),a.etaUpdated&&a.estimatedArrival&&i.push({id:"eta_update",title:"ETA Updated",description:`New estimated arrival: ${a.estimatedArrival}`,date:o(a.etaUpdated),icon:gn}),a.customerNotified&&i.push({id:"customer_notified",title:"Customer Notified",description:`${a.notificationMethod||"SMS"} notification sent to customer`,date:o(a.customerNotified),icon:ss}),t.status===cn.DELIVERED&&(i.push({id:"arrived",title:"Arrived at Destination",description:"Vehicle arrived at delivery location",date:o(t.deliveredDate),icon:Ad}),i.push({id:"delivered",title:"Delivery Confirmed",description:a.deliveryNotes||"Delivery completed successfully",date:o(t.deliveredDate),icon:Rn}),Array.isArray(a.deliveryPhotos)&&a.deliveryPhotos.length>0&&i.push({id:"photos",title:"Delivery Photos",description:`${a.deliveryPhotos.length} photo(s) captured`,date:o(t.deliveredDate),icon:ud})),Array.from(new Map(i.map(c=>[c.id,c])).values()).sort((c,d)=>c.date.getTime()-d.date.getTime())}catch(i){return console.error("Failed to generate milestones:",i),[]}})();return s.jsxs(he,{className:"shadow-sm",children:[s.jsxs(ye,{children:[s.jsxs(be,{className:"flex items-center",children:[s.jsx(Fa,{className:"h-5 w-5 mr-2 text-primary"}),"Delivery Timeline"]}),s.jsx(Be,{children:"Track the progress of this delivery"})]}),s.jsx(fe,{children:s.jsxs("div",{className:"relative pl-8 space-y-8",children:[s.jsx("div",{className:"absolute left-3 top-0 bottom-0 w-px bg-border"}),r.map((i,a)=>{var l;const o=i.icon;return s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:st("absolute left-[-21px] w-6 h-6 rounded-full flex items-center justify-center","bg-primary text-primary-foreground"),children:s.jsx(o,{className:"h-3 w-3"})}),s.jsxs("div",{className:"mb-1 flex items-center",children:[s.jsx("h3",{className:"text-base font-semibold",children:i.title}),s.jsx(Re,{className:"ml-2 text-xs",variant:"outline",children:ht(i.date)})]}),s.jsx("p",{className:"text-sm text-muted-foreground",children:i.description}),i.id==="photos"&&((l=t.customFields)==null?void 0:l.deliveryPhotos)&&s.jsx("div",{className:"grid grid-cols-3 gap-2 mt-2",children:t.customFields.deliveryPhotos.map((c,d)=>s.jsx("img",{src:c,alt:`Delivery photo ${d+1}`,className:"h-20 w-full object-cover rounded-md"},d))})]},i.id)})]})})]})}var Zi=Uint8Array,To=Uint16Array,R8=Int32Array,$3=new Zi([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),B3=new Zi([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),EM=new Zi([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Kre=function(t,e){for(var n=new To(31),r=0;r<31;++r)n[r]=e+=1<<t[r-1];for(var i=new R8(n[30]),r=1;r<30;++r)for(var a=n[r];a<n[r+1];++a)i[a]=a-n[r]<<5|r;return{b:n,r:i}},Yre=Kre($3,2),Xre=Yre.b,PM=Yre.r;Xre[28]=258,PM[258]=28;var Zre=Kre(B3,0),aCe=Zre.b,SV=Zre.r,TM=new To(32768);for(var Er=0;Er<32768;++Er){var kh=(Er&43690)>>1|(Er&21845)<<1;kh=(kh&52428)>>2|(kh&13107)<<2,kh=(kh&61680)>>4|(kh&3855)<<4,TM[Er]=((kh&65280)>>8|(kh&255)<<8)>>1}var bd=function(t,e,n){for(var r=t.length,i=0,a=new To(e);i<r;++i)t[i]&&++a[t[i]-1];var o=new To(e);for(i=1;i<e;++i)o[i]=o[i-1]+a[i-1]<<1;var l;if(n){l=new To(1<<e);var c=15-e;for(i=0;i<r;++i)if(t[i])for(var d=i<<4|t[i],u=e-t[i],h=o[t[i]-1]++<<u,f=h|(1<<u)-1;h<=f;++h)l[TM[h]>>c]=d}else for(l=new To(r),i=0;i<r;++i)t[i]&&(l[i]=TM[o[t[i]-1]++]>>15-t[i]);return l},bm=new Zi(288);for(var Er=0;Er<144;++Er)bm[Er]=8;for(var Er=144;Er<256;++Er)bm[Er]=9;for(var Er=256;Er<280;++Er)bm[Er]=7;for(var Er=280;Er<288;++Er)bm[Er]=8;var n2=new Zi(32);for(var Er=0;Er<32;++Er)n2[Er]=5;var oCe=bd(bm,9,0),lCe=bd(bm,9,1),cCe=bd(n2,5,0),dCe=bd(n2,5,1),G_=function(t){for(var e=t[0],n=1;n<t.length;++n)t[n]>e&&(e=t[n]);return e},Fl=function(t,e,n){var r=e/8|0;return(t[r]|t[r+1]<<8)>>(e&7)&n},K_=function(t,e){var n=e/8|0;return(t[n]|t[n+1]<<8|t[n+2]<<16)>>(e&7)},M8=function(t){return(t+7)/8|0},Qre=function(t,e,n){return(e==null||e<0)&&(e=0),(n==null||n>t.length)&&(n=t.length),new Zi(t.subarray(e,n))},uCe=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Vl=function(t,e,n){var r=new Error(e||uCe[t]);if(r.code=t,Error.captureStackTrace&&Error.captureStackTrace(r,Vl),!n)throw r;return r},hCe=function(t,e,n,r){var i=t.length,a=r?r.length:0;if(!i||e.f&&!e.l)return n||new Zi(0);var o=!n,l=o||e.i!=2,c=e.i;o&&(n=new Zi(i*3));var d=function(Ne){var je=n.length;if(Ne>je){var $e=new Zi(Math.max(je*2,Ne));$e.set(n),n=$e}},u=e.f||0,h=e.p||0,f=e.b||0,m=e.l,v=e.d,p=e.m,g=e.n,x=i*8;do{if(!m){u=Fl(t,h,1);var y=Fl(t,h+1,3);if(h+=3,y)if(y==1)m=lCe,v=dCe,p=9,g=5;else if(y==2){var E=Fl(t,h,31)+257,C=Fl(t,h+10,15)+4,j=E+Fl(t,h+5,31)+1;h+=14;for(var I=new Zi(j),k=new Zi(19),D=0;D<C;++D)k[EM[D]]=Fl(t,h+D*3,7);h+=C*3;for(var P=G_(k),R=(1<<P)-1,_=bd(k,P,1),D=0;D<j;){var M=_[Fl(t,h,R)];h+=M&15;var b=M>>4;if(b<16)I[D++]=b;else{var U=0,F=0;for(b==16?(F=3+Fl(t,h,3),h+=2,U=I[D-1]):b==17?(F=3+Fl(t,h,7),h+=3):b==18&&(F=11+Fl(t,h,127),h+=7);F--;)I[D++]=U}}var z=I.subarray(0,E),H=I.subarray(E);p=G_(z),g=G_(H),m=bd(z,p,1),v=bd(H,g,1)}else Vl(1);else{var b=M8(h)+4,w=t[b-4]|t[b-3]<<8,N=b+w;if(N>i){c&&Vl(0);break}l&&d(f+w),n.set(t.subarray(b,N),f),e.b=f+=w,e.p=h=N*8,e.f=u;continue}if(h>x){c&&Vl(0);break}}l&&d(f+131072);for(var W=(1<<p)-1,$=(1<<g)-1,L=h;;L=h){var U=m[K_(t,h)&W],q=U>>4;if(h+=U&15,h>x){c&&Vl(0);break}if(U||Vl(2),q<256)n[f++]=q;else if(q==256){L=h,m=null;break}else{var Y=q-254;if(q>264){var D=q-257,J=$3[D];Y=Fl(t,h,(1<<J)-1)+Xre[D],h+=J}var ne=v[K_(t,h)&$],re=ne>>4;ne||Vl(3),h+=ne&15;var H=aCe[re];if(re>3){var J=B3[re];H+=K_(t,h)&(1<<J)-1,h+=J}if(h>x){c&&Vl(0);break}l&&d(f+131072);var pe=f+Y;if(f<H){var ue=a-H,xe=Math.min(H,pe);for(ue+f<0&&Vl(3);f<xe;++f)n[f]=r[ue+f]}for(;f<pe;++f)n[f]=n[f-H]}}e.l=m,e.p=L,e.b=f,e.f=u,m&&(u=1,e.m=p,e.d=v,e.n=g)}while(!u);return f!=n.length&&o?Qre(n,0,f):n.subarray(0,f)},Gd=function(t,e,n){n<<=e&7;var r=e/8|0;t[r]|=n,t[r+1]|=n>>8},aw=function(t,e,n){n<<=e&7;var r=e/8|0;t[r]|=n,t[r+1]|=n>>8,t[r+2]|=n>>16},Y_=function(t,e){for(var n=[],r=0;r<t.length;++r)t[r]&&n.push({s:r,f:t[r]});var i=n.length,a=n.slice();if(!i)return{t:ese,l:0};if(i==1){var o=new Zi(n[0].s+1);return o[n[0].s]=1,{t:o,l:1}}n.sort(function(N,E){return N.f-E.f}),n.push({s:-1,f:25001});var l=n[0],c=n[1],d=0,u=1,h=2;for(n[0]={s:-1,f:l.f+c.f,l,r:c};u!=i-1;)l=n[n[d].f<n[h].f?d++:h++],c=n[d!=u&&n[d].f<n[h].f?d++:h++],n[u++]={s:-1,f:l.f+c.f,l,r:c};for(var f=a[0].s,r=1;r<i;++r)a[r].s>f&&(f=a[r].s);var m=new To(f+1),v=IM(n[u-1],m,0);if(v>e){var r=0,p=0,g=v-e,x=1<<g;for(a.sort(function(E,C){return m[C.s]-m[E.s]||E.f-C.f});r<i;++r){var y=a[r].s;if(m[y]>e)p+=x-(1<<v-m[y]),m[y]=e;else break}for(p>>=g;p>0;){var b=a[r].s;m[b]<e?p-=1<<e-m[b]++-1:++r}for(;r>=0&&p;--r){var w=a[r].s;m[w]==e&&(--m[w],++p)}v=e}return{t:new Zi(m),l:v}},IM=function(t,e,n){return t.s==-1?Math.max(IM(t.l,e,n+1),IM(t.r,e,n+1)):e[t.s]=n},AV=function(t){for(var e=t.length;e&&!t[--e];);for(var n=new To(++e),r=0,i=t[0],a=1,o=function(c){n[r++]=c},l=1;l<=e;++l)if(t[l]==i&&l!=e)++a;else{if(!i&&a>2){for(;a>138;a-=138)o(32754);a>2&&(o(a>10?a-11<<5|28690:a-3<<5|12305),a=0)}else if(a>3){for(o(i),--a;a>6;a-=6)o(8304);a>2&&(o(a-3<<5|8208),a=0)}for(;a--;)o(i);a=1,i=t[l]}return{c:n.subarray(0,r),n:e}},ow=function(t,e){for(var n=0,r=0;r<e.length;++r)n+=t[r]*e[r];return n},Jre=function(t,e,n){var r=n.length,i=M8(e+2);t[i]=r&255,t[i+1]=r>>8,t[i+2]=t[i]^255,t[i+3]=t[i+1]^255;for(var a=0;a<r;++a)t[i+a+4]=n[a];return(i+4+r)*8},CV=function(t,e,n,r,i,a,o,l,c,d,u){Gd(e,u++,n),++i[256];for(var h=Y_(i,15),f=h.t,m=h.l,v=Y_(a,15),p=v.t,g=v.l,x=AV(f),y=x.c,b=x.n,w=AV(p),N=w.c,E=w.n,C=new To(19),j=0;j<y.length;++j)++C[y[j]&31];for(var j=0;j<N.length;++j)++C[N[j]&31];for(var I=Y_(C,7),k=I.t,D=I.l,P=19;P>4&&!k[EM[P-1]];--P);var R=d+5<<3,_=ow(i,bm)+ow(a,n2)+o,M=ow(i,f)+ow(a,p)+o+14+3*P+ow(C,k)+2*C[16]+3*C[17]+7*C[18];if(c>=0&&R<=_&&R<=M)return Jre(e,u,t.subarray(c,c+d));var U,F,z,H;if(Gd(e,u,1+(M<_)),u+=2,M<_){U=bd(f,m,0),F=f,z=bd(p,g,0),H=p;var W=bd(k,D,0);Gd(e,u,b-257),Gd(e,u+5,E-1),Gd(e,u+10,P-4),u+=14;for(var j=0;j<P;++j)Gd(e,u+3*j,k[EM[j]]);u+=3*P;for(var $=[y,N],L=0;L<2;++L)for(var q=$[L],j=0;j<q.length;++j){var Y=q[j]&31;Gd(e,u,W[Y]),u+=k[Y],Y>15&&(Gd(e,u,q[j]>>5&127),u+=q[j]>>12)}}else U=oCe,F=bm,z=cCe,H=n2;for(var j=0;j<l;++j){var J=r[j];if(J>255){var Y=J>>18&31;aw(e,u,U[Y+257]),u+=F[Y+257],Y>7&&(Gd(e,u,J>>23&31),u+=$3[Y]);var ne=J&31;aw(e,u,z[ne]),u+=H[ne],ne>3&&(aw(e,u,J>>5&8191),u+=B3[ne])}else aw(e,u,U[J]),u+=F[J]}return aw(e,u,U[256]),u+F[256]},fCe=new R8([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),ese=new Zi(0),mCe=function(t,e,n,r,i,a){var o=a.z||t.length,l=new Zi(r+o+5*(1+Math.ceil(o/7e3))+i),c=l.subarray(r,l.length-i),d=a.l,u=(a.r||0)&7;if(e){u&&(c[0]=a.r>>3);for(var h=fCe[e-1],f=h>>13,m=h&8191,v=(1<<n)-1,p=a.p||new To(32768),g=a.h||new To(v+1),x=Math.ceil(n/3),y=2*x,b=function(ze){return(t[ze]^t[ze+1]<<x^t[ze+2]<<y)&v},w=new R8(25e3),N=new To(288),E=new To(32),C=0,j=0,I=a.i||0,k=0,D=a.w||0,P=0;I+2<o;++I){var R=b(I),_=I&32767,M=g[R];if(p[_]=M,g[R]=_,D<=I){var U=o-I;if((C>7e3||k>24576)&&(U>423||!d)){u=CV(t,c,0,w,N,E,j,k,P,I-P,u),k=C=j=0,P=I;for(var F=0;F<286;++F)N[F]=0;for(var F=0;F<30;++F)E[F]=0}var z=2,H=0,W=m,$=_-M&32767;if(U>2&&R==b(I-$))for(var L=Math.min(f,U)-1,q=Math.min(32767,I),Y=Math.min(258,U);$<=q&&--W&&_!=M;){if(t[I+z]==t[I+z-$]){for(var J=0;J<Y&&t[I+J]==t[I+J-$];++J);if(J>z){if(z=J,H=$,J>L)break;for(var ne=Math.min($,J-2),re=0,F=0;F<ne;++F){var pe=I-$+F&32767,ue=p[pe],xe=pe-ue&32767;xe>re&&(re=xe,M=pe)}}}_=M,M=p[_],$+=_-M&32767}if(H){w[k++]=268435456|PM[z]<<18|SV[H];var Ne=PM[z]&31,je=SV[H]&31;j+=$3[Ne]+B3[je],++N[257+Ne],++E[je],D=I+z,++C}else w[k++]=t[I],++N[t[I]]}}for(I=Math.max(I,D);I<o;++I)w[k++]=t[I],++N[t[I]];u=CV(t,c,d,w,N,E,j,k,P,I-P,u),d||(a.r=u&7|c[u/8|0]<<3,u-=7,a.h=g,a.p=p,a.i=I,a.w=D)}else{for(var I=a.w||0;I<o+d;I+=65535){var $e=I+65535;$e>=o&&(c[u/8|0]=d,$e=o),u=Jre(c,u+1,t.subarray(I,$e))}a.i=o}return Qre(l,0,r+M8(u)+i)},tse=function(){var t=1,e=0;return{p:function(n){for(var r=t,i=e,a=n.length|0,o=0;o!=a;){for(var l=Math.min(o+2655,a);o<l;++o)i+=r+=n[o];r=(r&65535)+15*(r>>16),i=(i&65535)+15*(i>>16)}t=r,e=i},d:function(){return t%=65521,e%=65521,(t&255)<<24|(t&65280)<<8|(e&255)<<8|e>>8}}},pCe=function(t,e,n,r,i){if(!i&&(i={l:1},e.dictionary)){var a=e.dictionary.subarray(-32768),o=new Zi(a.length+t.length);o.set(a),o.set(t,a.length),t=o,i.w=a.length}return mCe(t,e.level==null?6:e.level,e.mem==null?i.l?Math.ceil(Math.max(8,Math.min(13,Math.log(t.length)))*1.5):20:12+e.mem,n,r,i)},nse=function(t,e,n){for(;n;++e)t[e]=n,n>>>=8},gCe=function(t,e){var n=e.level,r=n==0?0:n<6?1:n==9?3:2;if(t[0]=120,t[1]=r<<6|(e.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,e.dictionary){var i=tse();i.p(e.dictionary),nse(t,2,i.d())}},vCe=function(t,e){return((t[0]&15)!=8||t[0]>>4>7||(t[0]<<8|t[1])%31)&&Vl(6,"invalid zlib data"),(t[1]>>5&1)==+!e&&Vl(6,"invalid zlib data: "+(t[1]&32?"need":"unexpected")+" dictionary"),(t[1]>>3&4)+2};function DM(t,e){e||(e={});var n=tse();n.p(t);var r=pCe(t,e,e.dictionary?6:2,4);return gCe(r,e),nse(r,r.length-4,n.d()),r}function xCe(t,e){return hCe(t.subarray(vCe(t,e&&e.dictionary),-4),{i:2},e&&e.out,e&&e.dictionary)}var yCe=typeof TextDecoder<"u"&&new TextDecoder,bCe=0;try{yCe.decode(ese,{stream:!0}),bCe=1}catch{}var Kt=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function X_(){Kt.console&&typeof Kt.console.log=="function"&&Kt.console.log.apply(Kt.console,arguments)}var cr={log:X_,warn:function(t){Kt.console&&(typeof Kt.console.warn=="function"?Kt.console.warn.apply(Kt.console,arguments):X_.call(null,arguments))},error:function(t){Kt.console&&(typeof Kt.console.error=="function"?Kt.console.error.apply(Kt.console,arguments):X_(t))}};function Z_(t,e,n){var r=new XMLHttpRequest;r.open("GET",t),r.responseType="blob",r.onload=function(){ap(r.response,e,n)},r.onerror=function(){cr.error("could not download file")},r.send()}function EV(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function vC(t){try{t.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var aj,kM,ap=Kt.saveAs||((typeof window>"u"?"undefined":Ln(window))!=="object"||window!==Kt?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(t,e,n){var r=Kt.URL||Kt.webkitURL,i=document.createElement("a");e=e||t.name||"download",i.download=e,i.rel="noopener",typeof t=="string"?(i.href=t,i.origin!==location.origin?EV(i.href)?Z_(t,e,n):vC(i,i.target="_blank"):vC(i)):(i.href=r.createObjectURL(t),setTimeout(function(){r.revokeObjectURL(i.href)},4e4),setTimeout(function(){vC(i)},0))}:"msSaveOrOpenBlob"in navigator?function(t,e,n){if(e=e||t.name||"download",typeof t=="string")if(EV(t))Z_(t,e,n);else{var r=document.createElement("a");r.href=t,r.target="_blank",setTimeout(function(){vC(r)})}else navigator.msSaveOrOpenBlob(function(i,a){return a===void 0?a={autoBom:!1}:Ln(a)!=="object"&&(cr.warn("Deprecated: Expected third argument to be a object"),a={autoBom:!a}),a.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(i.type)?new Blob([String.fromCharCode(65279),i],{type:i.type}):i}(t,n),e)}:function(t,e,n,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),typeof t=="string")return Z_(t,e,n);var i=t.type==="application/octet-stream",a=/constructor/i.test(Kt.HTMLElement)||Kt.safari,o=/CriOS\/[\d]+/.test(navigator.userAgent);if((o||i&&a)&&(typeof FileReader>"u"?"undefined":Ln(FileReader))==="object"){var l=new FileReader;l.onloadend=function(){var u=l.result;u=o?u:u.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=u:location=u,r=null},l.readAsDataURL(t)}else{var c=Kt.URL||Kt.webkitURL,d=c.createObjectURL(t);r?r.location=d:location.href=d,r=null,setTimeout(function(){c.revokeObjectURL(d)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function rse(t){var e;t=t||"",this.ok=!1,t.charAt(0)=="#"&&(t=t.substr(1,6)),t={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[t=(t=t.replace(/ /g,"")).toLowerCase()]||t;for(var n=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(l){return[parseInt(l[1]),parseInt(l[2]),parseInt(l[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(l){return[parseInt(l[1],16),parseInt(l[2],16),parseInt(l[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(l){return[parseInt(l[1]+l[1],16),parseInt(l[2]+l[2],16),parseInt(l[3]+l[3],16)]}}],r=0;r<n.length;r++){var i=n[r].re,a=n[r].process,o=i.exec(t);o&&(e=a(o),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var l=this.r.toString(16),c=this.g.toString(16),d=this.b.toString(16);return l.length==1&&(l="0"+l),c.length==1&&(c="0"+c),d.length==1&&(d="0"+d),"#"+l+c+d}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function Q_(t,e){var n=t[0],r=t[1],i=t[2],a=t[3];n=Mi(n,r,i,a,e[0],7,-680876936),a=Mi(a,n,r,i,e[1],12,-389564586),i=Mi(i,a,n,r,e[2],17,606105819),r=Mi(r,i,a,n,e[3],22,-1044525330),n=Mi(n,r,i,a,e[4],7,-176418897),a=Mi(a,n,r,i,e[5],12,1200080426),i=Mi(i,a,n,r,e[6],17,-1473231341),r=Mi(r,i,a,n,e[7],22,-45705983),n=Mi(n,r,i,a,e[8],7,1770035416),a=Mi(a,n,r,i,e[9],12,-1958414417),i=Mi(i,a,n,r,e[10],17,-42063),r=Mi(r,i,a,n,e[11],22,-1990404162),n=Mi(n,r,i,a,e[12],7,1804603682),a=Mi(a,n,r,i,e[13],12,-40341101),i=Mi(i,a,n,r,e[14],17,-1502002290),n=Fi(n,r=Mi(r,i,a,n,e[15],22,1236535329),i,a,e[1],5,-165796510),a=Fi(a,n,r,i,e[6],9,-1069501632),i=Fi(i,a,n,r,e[11],14,643717713),r=Fi(r,i,a,n,e[0],20,-373897302),n=Fi(n,r,i,a,e[5],5,-701558691),a=Fi(a,n,r,i,e[10],9,38016083),i=Fi(i,a,n,r,e[15],14,-660478335),r=Fi(r,i,a,n,e[4],20,-405537848),n=Fi(n,r,i,a,e[9],5,568446438),a=Fi(a,n,r,i,e[14],9,-1019803690),i=Fi(i,a,n,r,e[3],14,-187363961),r=Fi(r,i,a,n,e[8],20,1163531501),n=Fi(n,r,i,a,e[13],5,-1444681467),a=Fi(a,n,r,i,e[2],9,-51403784),i=Fi(i,a,n,r,e[7],14,1735328473),n=$i(n,r=Fi(r,i,a,n,e[12],20,-1926607734),i,a,e[5],4,-378558),a=$i(a,n,r,i,e[8],11,-2022574463),i=$i(i,a,n,r,e[11],16,1839030562),r=$i(r,i,a,n,e[14],23,-35309556),n=$i(n,r,i,a,e[1],4,-1530992060),a=$i(a,n,r,i,e[4],11,1272893353),i=$i(i,a,n,r,e[7],16,-155497632),r=$i(r,i,a,n,e[10],23,-1094730640),n=$i(n,r,i,a,e[13],4,681279174),a=$i(a,n,r,i,e[0],11,-358537222),i=$i(i,a,n,r,e[3],16,-722521979),r=$i(r,i,a,n,e[6],23,76029189),n=$i(n,r,i,a,e[9],4,-640364487),a=$i(a,n,r,i,e[12],11,-421815835),i=$i(i,a,n,r,e[15],16,530742520),n=Bi(n,r=$i(r,i,a,n,e[2],23,-995338651),i,a,e[0],6,-198630844),a=Bi(a,n,r,i,e[7],10,1126891415),i=Bi(i,a,n,r,e[14],15,-1416354905),r=Bi(r,i,a,n,e[5],21,-57434055),n=Bi(n,r,i,a,e[12],6,1700485571),a=Bi(a,n,r,i,e[3],10,-1894986606),i=Bi(i,a,n,r,e[10],15,-1051523),r=Bi(r,i,a,n,e[1],21,-2054922799),n=Bi(n,r,i,a,e[8],6,1873313359),a=Bi(a,n,r,i,e[15],10,-30611744),i=Bi(i,a,n,r,e[6],15,-1560198380),r=Bi(r,i,a,n,e[13],21,1309151649),n=Bi(n,r,i,a,e[4],6,-145523070),a=Bi(a,n,r,i,e[11],10,-1120210379),i=Bi(i,a,n,r,e[2],15,718787259),r=Bi(r,i,a,n,e[9],21,-343485551),t[0]=Vf(n,t[0]),t[1]=Vf(r,t[1]),t[2]=Vf(i,t[2]),t[3]=Vf(a,t[3])}function z3(t,e,n,r,i,a){return e=Vf(Vf(e,t),Vf(r,a)),Vf(e<<i|e>>>32-i,n)}function Mi(t,e,n,r,i,a,o){return z3(e&n|~e&r,t,e,i,a,o)}function Fi(t,e,n,r,i,a,o){return z3(e&r|n&~r,t,e,i,a,o)}function $i(t,e,n,r,i,a,o){return z3(e^n^r,t,e,i,a,o)}function Bi(t,e,n,r,i,a,o){return z3(n^(e|~r),t,e,i,a,o)}function sse(t){var e,n=t.length,r=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=t.length;e+=64)Q_(r,wCe(t.substring(e-64,e)));t=t.substring(e-64);var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<t.length;e++)i[e>>2]|=t.charCodeAt(e)<<(e%4<<3);if(i[e>>2]|=128<<(e%4<<3),e>55)for(Q_(r,i),e=0;e<16;e++)i[e]=0;return i[14]=8*n,Q_(r,i),r}function wCe(t){var e,n=[];for(e=0;e<64;e+=4)n[e>>2]=t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24);return n}aj=Kt.atob.bind(Kt),kM=Kt.btoa.bind(Kt);var PV="0123456789abcdef".split("");function jCe(t){for(var e="",n=0;n<4;n++)e+=PV[t>>8*n+4&15]+PV[t>>8*n&15];return e}function NCe(t){return String.fromCharCode((255&t)>>0,(65280&t)>>8,(16711680&t)>>16,(4278190080&t)>>24)}function _M(t){return sse(t).map(NCe).join("")}var SCe=function(t){for(var e=0;e<t.length;e++)t[e]=jCe(t[e]);return t.join("")}(sse("hello"))!="5d41402abc4b2a76b9719d911017c592";function Vf(t,e){if(SCe){var n=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(n>>16)<<16|65535&n}return t+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function OM(t,e){var n,r,i,a;if(t!==n){for(var o=(i=t,a=1+(256/t.length>>0),new Array(a+1).join(i)),l=[],c=0;c<256;c++)l[c]=c;var d=0;for(c=0;c<256;c++){var u=l[c];d=(d+u+o.charCodeAt(c))%256,l[c]=l[d],l[d]=u}n=t,r=l}else l=r;var h=e.length,f=0,m=0,v="";for(c=0;c<h;c++)m=(m+(u=l[f=(f+1)%256]))%256,l[f]=l[m],l[m]=u,o=l[(l[f]+l[m])%256],v+=String.fromCharCode(e.charCodeAt(c)^o);return v}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var TV={print:4,modify:8,copy:16,"annot-forms":32};function Ox(t,e,n,r){this.v=1,this.r=2;var i=192;t.forEach(function(l){if(TV.perm!==void 0)throw new Error("Invalid permission: "+l);i+=TV[l]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var a=(e+this.padding).substr(0,32),o=(n+this.padding).substr(0,32);this.O=this.processOwnerPassword(a,o),this.P=-(1+(255^i)),this.encryptionKey=_M(a+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(r)).substr(0,5),this.U=OM(this.encryptionKey,this.padding)}function Lx(t){if(/[^\u0000-\u00ff]/.test(t))throw new Error("Invalid PDF Name Object: "+t+", Only accept ASCII characters.");for(var e="",n=t.length,r=0;r<n;r++){var i=t.charCodeAt(r);i<33||i===35||i===37||i===40||i===41||i===47||i===60||i===62||i===91||i===93||i===123||i===125||i>126?e+="#"+("0"+i.toString(16)).slice(-2):e+=t[r]}return e}function IV(t){if(Ln(t)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(n,r,i){if(i=i||!1,typeof n!="string"||typeof r!="function"||typeof i!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(n)||(e[n]={});var a=Math.random().toString(35);return e[n][a]=[r,!!i],a},this.unsubscribe=function(n){for(var r in e)if(e[r][n])return delete e[r][n],Object.keys(e[r]).length===0&&delete e[r],!0;return!1},this.publish=function(n){if(e.hasOwnProperty(n)){var r=Array.prototype.slice.call(arguments,1),i=[];for(var a in e[n]){var o=e[n][a];try{o[0].apply(t,r)}catch(l){Kt.console&&cr.error("jsPDF PubSub Error",l.message,l)}o[1]&&i.push(a)}i.length&&i.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function r2(t){if(!(this instanceof r2))return new r2(t);var e="opacity,stroke-opacity".split(",");for(var n in t)t.hasOwnProperty(n)&&e.indexOf(n)>=0&&(this[n]=t[n]);this.id="",this.objectNumber=-1}function ise(t,e){this.gState=t,this.matrix=e,this.id="",this.objectNumber=-1}function Wh(t,e,n,r,i){if(!(this instanceof Wh))return new Wh(t,e,n,r,i);this.type=t==="axial"?2:3,this.coords=e,this.colors=n,ise.call(this,r,i)}function xp(t,e,n,r,i){if(!(this instanceof xp))return new xp(t,e,n,r,i);this.boundingBox=t,this.xStep=e,this.yStep=n,this.stream="",this.cloneIndex=0,ise.call(this,r,i)}function Bt(t){var e,n=typeof arguments[0]=="string"?arguments[0]:"p",r=arguments[1],i=arguments[2],a=arguments[3],o=[],l=1,c=16,d="S",u=null;Ln(t=t||{})==="object"&&(n=t.orientation,r=t.unit||r,i=t.format||i,a=t.compress||t.compressPdf||a,(u=t.encryption||null)!==null&&(u.userPassword=u.userPassword||"",u.ownerPassword=u.ownerPassword||"",u.userPermissions=u.userPermissions||[]),l=typeof t.userUnit=="number"?Math.abs(t.userUnit):1,t.precision!==void 0&&(e=t.precision),t.floatPrecision!==void 0&&(c=t.floatPrecision),d=t.defaultPathOperation||"S"),o=t.filters||(a===!0?["FlateEncode"]:o),r=r||"mm",n=(""+(n||"P")).toLowerCase();var h=t.putOnlyUsedFonts||!1,f={},m={internal:{},__private__:{}};m.__private__.PubSub=IV;var v="1.3",p=m.__private__.getPdfVersion=function(){return v};m.__private__.setPdfVersion=function(B){v=B};var g={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};m.__private__.getPageFormats=function(){return g};var x=m.__private__.getPageFormat=function(B){return g[B]};i=i||"a4";var y={COMPAT:"compat",ADVANCED:"advanced"},b=y.COMPAT;function w(){this.saveGraphicsState(),ce(new qt(mt,0,0,-mt,0,xh()*mt).toString()+" cm"),this.setFontSize(this.getFontSize()/mt),d="n",b=y.ADVANCED}function N(){this.restoreGraphicsState(),d="S",b=y.COMPAT}var E=m.__private__.combineFontStyleAndFontWeight=function(B,te){if(B=="bold"&&te=="normal"||B=="bold"&&te==400||B=="normal"&&te=="italic"||B=="bold"&&te=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return te&&(B=te==400||te==="normal"?B==="italic"?"italic":"normal":te!=700&&te!=="bold"||B!=="normal"?(te==700?"bold":te)+""+B:"bold"),B};m.advancedAPI=function(B){var te=b===y.COMPAT;return te&&w.call(this),typeof B!="function"||(B(this),te&&N.call(this)),this},m.compatAPI=function(B){var te=b===y.ADVANCED;return te&&N.call(this),typeof B!="function"||(B(this),te&&w.call(this)),this},m.isAdvancedAPI=function(){return b===y.ADVANCED};var C,j=function(B){if(b!==y.ADVANCED)throw new Error(B+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},I=m.roundToPrecision=m.__private__.roundToPrecision=function(B,te){var we=e||te;if(isNaN(B)||isNaN(we))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return B.toFixed(we).replace(/0+$/,"")};C=m.hpf=m.__private__.hpf=typeof c=="number"?function(B){if(isNaN(B))throw new Error("Invalid argument passed to jsPDF.hpf");return I(B,c)}:c==="smart"?function(B){if(isNaN(B))throw new Error("Invalid argument passed to jsPDF.hpf");return I(B,B>-1&&B<1?16:5)}:function(B){if(isNaN(B))throw new Error("Invalid argument passed to jsPDF.hpf");return I(B,16)};var k=m.f2=m.__private__.f2=function(B){if(isNaN(B))throw new Error("Invalid argument passed to jsPDF.f2");return I(B,2)},D=m.__private__.f3=function(B){if(isNaN(B))throw new Error("Invalid argument passed to jsPDF.f3");return I(B,3)},P=m.scale=m.__private__.scale=function(B){if(isNaN(B))throw new Error("Invalid argument passed to jsPDF.scale");return b===y.COMPAT?B*mt:b===y.ADVANCED?B:void 0},R=function(B){return b===y.COMPAT?xh()-B:b===y.ADVANCED?B:void 0},_=function(B){return P(R(B))};m.__private__.setPrecision=m.setPrecision=function(B){typeof parseInt(B,10)=="number"&&(e=parseInt(B,10))};var M,U="00000000000000000000000000000000",F=m.__private__.getFileId=function(){return U},z=m.__private__.setFileId=function(B){return U=B!==void 0&&/^[a-fA-F0-9]{32}$/.test(B)?B.toUpperCase():U.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),u!==null&&(_i=new Ox(u.userPermissions,u.userPassword,u.ownerPassword,U)),U};m.setFileId=function(B){return z(B),this},m.getFileId=function(){return F()};var H=m.__private__.convertDateToPDFDate=function(B){var te=B.getTimezoneOffset(),we=te<0?"+":"-",Ee=Math.floor(Math.abs(te/60)),Oe=Math.abs(te%60),Ge=[we,Y(Ee),"'",Y(Oe),"'"].join("");return["D:",B.getFullYear(),Y(B.getMonth()+1),Y(B.getDate()),Y(B.getHours()),Y(B.getMinutes()),Y(B.getSeconds()),Ge].join("")},W=m.__private__.convertPDFDateToDate=function(B){var te=parseInt(B.substr(2,4),10),we=parseInt(B.substr(6,2),10)-1,Ee=parseInt(B.substr(8,2),10),Oe=parseInt(B.substr(10,2),10),Ge=parseInt(B.substr(12,2),10),it=parseInt(B.substr(14,2),10);return new Date(te,we,Ee,Oe,Ge,it,0)},$=m.__private__.setCreationDate=function(B){var te;if(B===void 0&&(B=new Date),B instanceof Date)te=H(B);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(B))throw new Error("Invalid argument passed to jsPDF.setCreationDate");te=B}return M=te},L=m.__private__.getCreationDate=function(B){var te=M;return B==="jsDate"&&(te=W(M)),te};m.setCreationDate=function(B){return $(B),this},m.getCreationDate=function(B){return L(B)};var q,Y=m.__private__.padd2=function(B){return("0"+parseInt(B)).slice(-2)},J=m.__private__.padd2Hex=function(B){return("00"+(B=B.toString())).substr(B.length)},ne=0,re=[],pe=[],ue=0,xe=[],Ne=[],je=!1,$e=pe,ze=function(){ne=0,ue=0,pe=[],re=[],xe=[],Md=ws(),Pl=ws()};m.__private__.setCustomOutputDestination=function(B){je=!0,$e=B};var De=function(B){je||($e=B)};m.__private__.resetCustomOutputDestination=function(){je=!1,$e=pe};var ce=m.__private__.out=function(B){return B=B.toString(),ue+=B.length+1,$e.push(B),$e},Te=m.__private__.write=function(B){return ce(arguments.length===1?B.toString():Array.prototype.join.call(arguments," "))},Ce=m.__private__.getArrayBuffer=function(B){for(var te=B.length,we=new ArrayBuffer(te),Ee=new Uint8Array(we);te--;)Ee[te]=B.charCodeAt(te);return we},Se=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];m.__private__.getStandardFonts=function(){return Se};var Ue=t.fontSize||16;m.__private__.setFontSize=m.setFontSize=function(B){return Ue=b===y.ADVANCED?B/mt:B,this};var ot,at=m.__private__.getFontSize=m.getFontSize=function(){return b===y.COMPAT?Ue:Ue*mt},jt=t.R2L||!1;m.__private__.setR2L=m.setR2L=function(B){return jt=B,this},m.__private__.getR2L=m.getR2L=function(){return jt};var Ve,nt=m.__private__.setZoomMode=function(B){var te=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(B))ot=B;else if(isNaN(B)){if(te.indexOf(B)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+B+'" is not recognized.');ot=B}else ot=parseInt(B,10)};m.__private__.getZoomMode=function(){return ot};var vt,Nt=m.__private__.setPageMode=function(B){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(B)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+B+'" is not recognized.');Ve=B};m.__private__.getPageMode=function(){return Ve};var zt=m.__private__.setLayoutMode=function(B){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(B)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+B+'" is not recognized.');vt=B};m.__private__.getLayoutMode=function(){return vt},m.__private__.setDisplayMode=m.setDisplayMode=function(B,te,we){return nt(B),zt(te),Nt(we),this};var Lt={title:"",subject:"",author:"",keywords:"",creator:""};m.__private__.getDocumentProperty=function(B){if(Object.keys(Lt).indexOf(B)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Lt[B]},m.__private__.getDocumentProperties=function(){return Lt},m.__private__.setDocumentProperties=m.setProperties=m.setDocumentProperties=function(B){for(var te in Lt)Lt.hasOwnProperty(te)&&B[te]&&(Lt[te]=B[te]);return this},m.__private__.setDocumentProperty=function(B,te){if(Object.keys(Lt).indexOf(B)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Lt[B]=te};var Yt,mt,Bn,hn,Ds,zn={},tr={},ba=[],An={},Ld={},Kr={},Cl={},Rd=null,Yr=0,nn=[],Hn=new IV(m),Mm=t.hotfixes||[],hi={},Ec={},Pc=[],qt=function B(te,we,Ee,Oe,Ge,it){if(!(this instanceof B))return new B(te,we,Ee,Oe,Ge,it);isNaN(te)&&(te=1),isNaN(we)&&(we=0),isNaN(Ee)&&(Ee=0),isNaN(Oe)&&(Oe=1),isNaN(Ge)&&(Ge=0),isNaN(it)&&(it=0),this._matrix=[te,we,Ee,Oe,Ge,it]};Object.defineProperty(qt.prototype,"sx",{get:function(){return this._matrix[0]},set:function(B){this._matrix[0]=B}}),Object.defineProperty(qt.prototype,"shy",{get:function(){return this._matrix[1]},set:function(B){this._matrix[1]=B}}),Object.defineProperty(qt.prototype,"shx",{get:function(){return this._matrix[2]},set:function(B){this._matrix[2]=B}}),Object.defineProperty(qt.prototype,"sy",{get:function(){return this._matrix[3]},set:function(B){this._matrix[3]=B}}),Object.defineProperty(qt.prototype,"tx",{get:function(){return this._matrix[4]},set:function(B){this._matrix[4]=B}}),Object.defineProperty(qt.prototype,"ty",{get:function(){return this._matrix[5]},set:function(B){this._matrix[5]=B}}),Object.defineProperty(qt.prototype,"a",{get:function(){return this._matrix[0]},set:function(B){this._matrix[0]=B}}),Object.defineProperty(qt.prototype,"b",{get:function(){return this._matrix[1]},set:function(B){this._matrix[1]=B}}),Object.defineProperty(qt.prototype,"c",{get:function(){return this._matrix[2]},set:function(B){this._matrix[2]=B}}),Object.defineProperty(qt.prototype,"d",{get:function(){return this._matrix[3]},set:function(B){this._matrix[3]=B}}),Object.defineProperty(qt.prototype,"e",{get:function(){return this._matrix[4]},set:function(B){this._matrix[4]=B}}),Object.defineProperty(qt.prototype,"f",{get:function(){return this._matrix[5]},set:function(B){this._matrix[5]=B}}),Object.defineProperty(qt.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(qt.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(qt.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(qt.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),qt.prototype.join=function(B){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(C).join(B)},qt.prototype.multiply=function(B){var te=B.sx*this.sx+B.shy*this.shx,we=B.sx*this.shy+B.shy*this.sy,Ee=B.shx*this.sx+B.sy*this.shx,Oe=B.shx*this.shy+B.sy*this.sy,Ge=B.tx*this.sx+B.ty*this.shx+this.tx,it=B.tx*this.shy+B.ty*this.sy+this.ty;return new qt(te,we,Ee,Oe,Ge,it)},qt.prototype.decompose=function(){var B=this.sx,te=this.shy,we=this.shx,Ee=this.sy,Oe=this.tx,Ge=this.ty,it=Math.sqrt(B*B+te*te),bt=(B/=it)*we+(te/=it)*Ee;we-=B*bt,Ee-=te*bt;var Ft=Math.sqrt(we*we+Ee*Ee);return bt/=Ft,B*(Ee/=Ft)<te*(we/=Ft)&&(B=-B,te=-te,bt=-bt,it=-it),{scale:new qt(it,0,0,Ft,0,0),translate:new qt(1,0,0,1,Oe,Ge),rotate:new qt(B,te,-te,B,0,0),skew:new qt(1,0,bt,1,0,0)}},qt.prototype.toString=function(B){return this.join(" ")},qt.prototype.inversed=function(){var B=this.sx,te=this.shy,we=this.shx,Ee=this.sy,Oe=this.tx,Ge=this.ty,it=1/(B*Ee-te*we),bt=Ee*it,Ft=-te*it,ln=-we*it,rn=B*it;return new qt(bt,Ft,ln,rn,-bt*Oe-ln*Ge,-Ft*Oe-rn*Ge)},qt.prototype.applyToPoint=function(B){var te=B.x*this.sx+B.y*this.shx+this.tx,we=B.x*this.shy+B.y*this.sy+this.ty;return new Xv(te,we)},qt.prototype.applyToRectangle=function(B){var te=this.applyToPoint(B),we=this.applyToPoint(new Xv(B.x+B.w,B.y+B.h));return new j1(te.x,te.y,we.x-te.x,we.y-te.y)},qt.prototype.clone=function(){var B=this.sx,te=this.shy,we=this.shx,Ee=this.sy,Oe=this.tx,Ge=this.ty;return new qt(B,te,we,Ee,Oe,Ge)},m.Matrix=qt;var El=m.matrixMult=function(B,te){return te.multiply(B)},Tc=new qt(1,0,0,1,0,0);m.unitMatrix=m.identityMatrix=Tc;var wa=function(B,te){if(!Ld[B]){var we=(te instanceof Wh?"Sh":"P")+(Object.keys(An).length+1).toString(10);te.id=we,Ld[B]=we,An[we]=te,Hn.publish("addPattern",te)}};m.ShadingPattern=Wh,m.TilingPattern=xp,m.addShadingPattern=function(B,te){return j("addShadingPattern()"),wa(B,te),this},m.beginTilingPattern=function(B){j("beginTilingPattern()"),i5(B.boundingBox[0],B.boundingBox[1],B.boundingBox[2]-B.boundingBox[0],B.boundingBox[3]-B.boundingBox[1],B.matrix)},m.endTilingPattern=function(B,te){j("endTilingPattern()"),te.stream=Ne[q].join(`
`),wa(B,te),Hn.publish("endTilingPattern",te),Pc.pop().restore()};var ks=m.__private__.newObject=function(){var B=ws();return Ya(B,!0),B},ws=m.__private__.newObjectDeferred=function(){return ne++,re[ne]=function(){return ue},ne},Ya=function(B,te){return te=typeof te=="boolean"&&te,re[B]=ue,te&&ce(B+" 0 obj"),B},Mv=m.__private__.newAdditionalObject=function(){var B={objId:ws(),content:""};return xe.push(B),B},Md=ws(),Pl=ws(),Tl=m.__private__.decodeColorString=function(B){var te=B.split(" ");if(te.length!==2||te[1]!=="g"&&te[1]!=="G")te.length===5&&(te[4]==="k"||te[4]==="K")&&(te=[(1-te[0])*(1-te[3]),(1-te[1])*(1-te[3]),(1-te[2])*(1-te[3]),"r"]);else{var we=parseFloat(te[0]);te=[we,we,we,"r"]}for(var Ee="#",Oe=0;Oe<3;Oe++)Ee+=("0"+Math.floor(255*parseFloat(te[Oe])).toString(16)).slice(-2);return Ee},Il=m.__private__.encodeColorString=function(B){var te;typeof B=="string"&&(B={ch1:B});var we=B.ch1,Ee=B.ch2,Oe=B.ch3,Ge=B.ch4,it=B.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof we=="string"&&we.charAt(0)!=="#"){var bt=new rse(we);if(bt.ok)we=bt.toHex();else if(!/^\d*\.?\d*$/.test(we))throw new Error('Invalid color "'+we+'" passed to jsPDF.encodeColorString.')}if(typeof we=="string"&&/^#[0-9A-Fa-f]{3}$/.test(we)&&(we="#"+we[1]+we[1]+we[2]+we[2]+we[3]+we[3]),typeof we=="string"&&/^#[0-9A-Fa-f]{6}$/.test(we)){var Ft=parseInt(we.substr(1),16);we=Ft>>16&255,Ee=Ft>>8&255,Oe=255&Ft}if(Ee===void 0||Ge===void 0&&we===Ee&&Ee===Oe)if(typeof we=="string")te=we+" "+it[0];else switch(B.precision){case 2:te=k(we/255)+" "+it[0];break;case 3:default:te=D(we/255)+" "+it[0]}else if(Ge===void 0||Ln(Ge)==="object"){if(Ge&&!isNaN(Ge.a)&&Ge.a===0)return te=["1.","1.","1.",it[1]].join(" ");if(typeof we=="string")te=[we,Ee,Oe,it[1]].join(" ");else switch(B.precision){case 2:te=[k(we/255),k(Ee/255),k(Oe/255),it[1]].join(" ");break;default:case 3:te=[D(we/255),D(Ee/255),D(Oe/255),it[1]].join(" ")}}else if(typeof we=="string")te=[we,Ee,Oe,Ge,it[2]].join(" ");else switch(B.precision){case 2:te=[k(we),k(Ee),k(Oe),k(Ge),it[2]].join(" ");break;case 3:default:te=[D(we),D(Ee),D(Oe),D(Ge),it[2]].join(" ")}return te},Ic=m.__private__.getFilters=function(){return o},Uo=m.__private__.putStream=function(B){var te=(B=B||{}).data||"",we=B.filters||Ic(),Ee=B.alreadyAppliedFilters||[],Oe=B.addLength1||!1,Ge=te.length,it=B.objectId,bt=function(Oi){return Oi};if(u!==null&&it===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");u!==null&&(bt=_i.encryptor(it,0));var Ft={};we===!0&&(we=["FlateEncode"]);var ln=B.additionalKeyValues||[],rn=(Ft=Bt.API.processDataByFilters!==void 0?Bt.API.processDataByFilters(te,we):{data:te,reverseChain:[]}).reverseChain+(Array.isArray(Ee)?Ee.join(" "):Ee.toString());if(Ft.data.length!==0&&(ln.push({key:"Length",value:Ft.data.length}),Oe===!0&&ln.push({key:"Length1",value:Ge})),rn.length!=0)if(rn.split("/").length-1==1)ln.push({key:"Filter",value:rn});else{ln.push({key:"Filter",value:"["+rn+"]"});for(var Cn=0;Cn<ln.length;Cn+=1)if(ln[Cn].key==="DecodeParms"){for(var Mr=[],Xr=0;Xr<Ft.reverseChain.split("/").length-1;Xr+=1)Mr.push("null");Mr.push(ln[Cn].value),ln[Cn].value="["+Mr.join(" ")+"]"}}ce("<<");for(var js=0;js<ln.length;js++)ce("/"+ln[js].key+" "+ln[js].value);ce(">>"),Ft.data.length!==0&&(ce("stream"),ce(bt(Ft.data)),ce("endstream"))},Dc=m.__private__.putPage=function(B){var te=B.number,we=B.data,Ee=B.objId,Oe=B.contentsObjId;Ya(Ee,!0),ce("<</Type /Page"),ce("/Parent "+B.rootDictionaryObjId+" 0 R"),ce("/Resources "+B.resourceDictionaryObjId+" 0 R"),ce("/MediaBox ["+parseFloat(C(B.mediaBox.bottomLeftX))+" "+parseFloat(C(B.mediaBox.bottomLeftY))+" "+C(B.mediaBox.topRightX)+" "+C(B.mediaBox.topRightY)+"]"),B.cropBox!==null&&ce("/CropBox ["+C(B.cropBox.bottomLeftX)+" "+C(B.cropBox.bottomLeftY)+" "+C(B.cropBox.topRightX)+" "+C(B.cropBox.topRightY)+"]"),B.bleedBox!==null&&ce("/BleedBox ["+C(B.bleedBox.bottomLeftX)+" "+C(B.bleedBox.bottomLeftY)+" "+C(B.bleedBox.topRightX)+" "+C(B.bleedBox.topRightY)+"]"),B.trimBox!==null&&ce("/TrimBox ["+C(B.trimBox.bottomLeftX)+" "+C(B.trimBox.bottomLeftY)+" "+C(B.trimBox.topRightX)+" "+C(B.trimBox.topRightY)+"]"),B.artBox!==null&&ce("/ArtBox ["+C(B.artBox.bottomLeftX)+" "+C(B.artBox.bottomLeftY)+" "+C(B.artBox.topRightX)+" "+C(B.artBox.topRightY)+"]"),typeof B.userUnit=="number"&&B.userUnit!==1&&ce("/UserUnit "+B.userUnit),Hn.publish("putPage",{objId:Ee,pageContext:nn[te],pageNumber:te,page:we}),ce("/Contents "+Oe+" 0 R"),ce(">>"),ce("endobj");var Ge=we.join(`
`);return b===y.ADVANCED&&(Ge+=`
Q`),Ya(Oe,!0),Uo({data:Ge,filters:Ic(),objectId:Oe}),ce("endobj"),Ee},Fm=m.__private__.putPages=function(){var B,te,we=[];for(B=1;B<=Yr;B++)nn[B].objId=ws(),nn[B].contentsObjId=ws();for(B=1;B<=Yr;B++)we.push(Dc({number:B,data:Ne[B],objId:nn[B].objId,contentsObjId:nn[B].contentsObjId,mediaBox:nn[B].mediaBox,cropBox:nn[B].cropBox,bleedBox:nn[B].bleedBox,trimBox:nn[B].trimBox,artBox:nn[B].artBox,userUnit:nn[B].userUnit,rootDictionaryObjId:Md,resourceDictionaryObjId:Pl}));Ya(Md,!0),ce("<</Type /Pages");var Ee="/Kids [";for(te=0;te<Yr;te++)Ee+=we[te]+" 0 R ";ce(Ee+"]"),ce("/Count "+Yr),ce(">>"),ce("endobj"),Hn.publish("postPutPages")},Fv=function(B){Hn.publish("putFont",{font:B,out:ce,newObject:ks,putStream:Uo}),B.isAlreadyPutted!==!0&&(B.objectNumber=ks(),ce("<<"),ce("/Type /Font"),ce("/BaseFont /"+Lx(B.postScriptName)),ce("/Subtype /Type1"),typeof B.encoding=="string"&&ce("/Encoding /"+B.encoding),ce("/FirstChar 32"),ce("/LastChar 255"),ce(">>"),ce("endobj"))},$v=function(){for(var B in zn)zn.hasOwnProperty(B)&&(h===!1||h===!0&&f.hasOwnProperty(B))&&Fv(zn[B])},Bv=function(B){B.objectNumber=ks();var te=[];te.push({key:"Type",value:"/XObject"}),te.push({key:"Subtype",value:"/Form"}),te.push({key:"BBox",value:"["+[C(B.x),C(B.y),C(B.x+B.width),C(B.y+B.height)].join(" ")+"]"}),te.push({key:"Matrix",value:"["+B.matrix.toString()+"]"});var we=B.pages[1].join(`
`);Uo({data:we,additionalKeyValues:te,objectId:B.objectNumber}),ce("endobj")},zv=function(){for(var B in hi)hi.hasOwnProperty(B)&&Bv(hi[B])},zA=function(B,te){var we,Ee=[],Oe=1/(te-1);for(we=0;we<1;we+=Oe)Ee.push(we);if(Ee.push(1),B[0].offset!=0){var Ge={offset:0,color:B[0].color};B.unshift(Ge)}if(B[B.length-1].offset!=1){var it={offset:1,color:B[B.length-1].color};B.push(it)}for(var bt="",Ft=0,ln=0;ln<Ee.length;ln++){for(we=Ee[ln];we>B[Ft+1].offset;)Ft++;var rn=B[Ft].offset,Cn=(we-rn)/(B[Ft+1].offset-rn),Mr=B[Ft].color,Xr=B[Ft+1].color;bt+=J(Math.round((1-Cn)*Mr[0]+Cn*Xr[0]).toString(16))+J(Math.round((1-Cn)*Mr[1]+Cn*Xr[1]).toString(16))+J(Math.round((1-Cn)*Mr[2]+Cn*Xr[2]).toString(16))}return bt.trim()},LD=function(B,te){te||(te=21);var we=ks(),Ee=zA(B.colors,te),Oe=[];Oe.push({key:"FunctionType",value:"0"}),Oe.push({key:"Domain",value:"[0.0 1.0]"}),Oe.push({key:"Size",value:"["+te+"]"}),Oe.push({key:"BitsPerSample",value:"8"}),Oe.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Oe.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Uo({data:Ee,additionalKeyValues:Oe,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:we}),ce("endobj"),B.objectNumber=ks(),ce("<< /ShadingType "+B.type),ce("/ColorSpace /DeviceRGB");var Ge="/Coords ["+C(parseFloat(B.coords[0]))+" "+C(parseFloat(B.coords[1]))+" ";B.type===2?Ge+=C(parseFloat(B.coords[2]))+" "+C(parseFloat(B.coords[3])):Ge+=C(parseFloat(B.coords[2]))+" "+C(parseFloat(B.coords[3]))+" "+C(parseFloat(B.coords[4]))+" "+C(parseFloat(B.coords[5])),ce(Ge+="]"),B.matrix&&ce("/Matrix ["+B.matrix.toString()+"]"),ce("/Function "+we+" 0 R"),ce("/Extend [true true]"),ce(">>"),ce("endobj")},RD=function(B,te){var we=ws(),Ee=ks();te.push({resourcesOid:we,objectOid:Ee}),B.objectNumber=Ee;var Oe=[];Oe.push({key:"Type",value:"/Pattern"}),Oe.push({key:"PatternType",value:"1"}),Oe.push({key:"PaintType",value:"1"}),Oe.push({key:"TilingType",value:"1"}),Oe.push({key:"BBox",value:"["+B.boundingBox.map(C).join(" ")+"]"}),Oe.push({key:"XStep",value:C(B.xStep)}),Oe.push({key:"YStep",value:C(B.yStep)}),Oe.push({key:"Resources",value:we+" 0 R"}),B.matrix&&Oe.push({key:"Matrix",value:"["+B.matrix.toString()+"]"}),Uo({data:B.stream,additionalKeyValues:Oe,objectId:B.objectNumber}),ce("endobj")},Uv=function(B){var te;for(te in An)An.hasOwnProperty(te)&&(An[te]instanceof Wh?LD(An[te]):An[te]instanceof xp&&RD(An[te],B))},UA=function(B){for(var te in B.objectNumber=ks(),ce("<<"),B)switch(te){case"opacity":ce("/ca "+k(B[te]));break;case"stroke-opacity":ce("/CA "+k(B[te]))}ce(">>"),ce("endobj")},MD=function(){var B;for(B in Kr)Kr.hasOwnProperty(B)&&UA(Kr[B])},h1=function(){for(var B in ce("/XObject <<"),hi)hi.hasOwnProperty(B)&&hi[B].objectNumber>=0&&ce("/"+B+" "+hi[B].objectNumber+" 0 R");Hn.publish("putXobjectDict"),ce(">>")},FD=function(){_i.oid=ks(),ce("<<"),ce("/Filter /Standard"),ce("/V "+_i.v),ce("/R "+_i.r),ce("/U <"+_i.toHexString(_i.U)+">"),ce("/O <"+_i.toHexString(_i.O)+">"),ce("/P "+_i.P),ce(">>"),ce("endobj")},VA=function(){for(var B in ce("/Font <<"),zn)zn.hasOwnProperty(B)&&(h===!1||h===!0&&f.hasOwnProperty(B))&&ce("/"+B+" "+zn[B].objectNumber+" 0 R");ce(">>")},$D=function(){if(Object.keys(An).length>0){for(var B in ce("/Shading <<"),An)An.hasOwnProperty(B)&&An[B]instanceof Wh&&An[B].objectNumber>=0&&ce("/"+B+" "+An[B].objectNumber+" 0 R");Hn.publish("putShadingPatternDict"),ce(">>")}},Vv=function(B){if(Object.keys(An).length>0){for(var te in ce("/Pattern <<"),An)An.hasOwnProperty(te)&&An[te]instanceof m.TilingPattern&&An[te].objectNumber>=0&&An[te].objectNumber<B&&ce("/"+te+" "+An[te].objectNumber+" 0 R");Hn.publish("putTilingPatternDict"),ce(">>")}},BD=function(){if(Object.keys(Kr).length>0){var B;for(B in ce("/ExtGState <<"),Kr)Kr.hasOwnProperty(B)&&Kr[B].objectNumber>=0&&ce("/"+B+" "+Kr[B].objectNumber+" 0 R");Hn.publish("putGStateDict"),ce(">>")}},is=function(B){Ya(B.resourcesOid,!0),ce("<<"),ce("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),VA(),$D(),Vv(B.objectOid),BD(),h1(),ce(">>"),ce("endobj")},qA=function(){var B=[];$v(),MD(),zv(),Uv(B),Hn.publish("putResources"),B.forEach(is),is({resourcesOid:Pl,objectOid:Number.MAX_SAFE_INTEGER}),Hn.publish("postPutResources")},HA=function(){Hn.publish("putAdditionalObjects");for(var B=0;B<xe.length;B++){var te=xe[B];Ya(te.objId,!0),ce(te.content),ce("endobj")}Hn.publish("postPutAdditionalObjects")},WA=function(B){tr[B.fontName]=tr[B.fontName]||{},tr[B.fontName][B.fontStyle]=B.id},f1=function(B,te,we,Ee,Oe){var Ge={id:"F"+(Object.keys(zn).length+1).toString(10),postScriptName:B,fontName:te,fontStyle:we,encoding:Ee,isStandardFont:Oe||!1,metadata:{}};return Hn.publish("addFont",{font:Ge,instance:this}),zn[Ge.id]=Ge,WA(Ge),Ge.id},zD=function(B){for(var te=0,we=Se.length;te<we;te++){var Ee=f1.call(this,B[te][0],B[te][1],B[te][2],Se[te][3],!0);h===!1&&(f[Ee]=!0);var Oe=B[te][0].split("-");WA({id:Ee,fontName:Oe[0],fontStyle:Oe[1]||""})}Hn.publish("addFonts",{fonts:zn,dictionary:tr})},Dl=function(B){return B.foo=function(){try{return B.apply(this,arguments)}catch(Ee){var te=Ee.stack||"";~te.indexOf(" at ")&&(te=te.split(" at ")[1]);var we="Error in function "+te.split(`
`)[0].split("<")[0]+": "+Ee.message;if(!Kt.console)throw new Error(we);Kt.console.error(we,Ee),Kt.alert&&alert(we)}},B.foo.bar=B,B.foo},qv=function(B,te){var we,Ee,Oe,Ge,it,bt,Ft,ln,rn;if(Oe=(te=te||{}).sourceEncoding||"Unicode",it=te.outputEncoding,(te.autoencode||it)&&zn[Yt].metadata&&zn[Yt].metadata[Oe]&&zn[Yt].metadata[Oe].encoding&&(Ge=zn[Yt].metadata[Oe].encoding,!it&&zn[Yt].encoding&&(it=zn[Yt].encoding),!it&&Ge.codePages&&(it=Ge.codePages[0]),typeof it=="string"&&(it=Ge[it]),it)){for(Ft=!1,bt=[],we=0,Ee=B.length;we<Ee;we++)(ln=it[B.charCodeAt(we)])?bt.push(String.fromCharCode(ln)):bt.push(B[we]),bt[we].charCodeAt(0)>>8&&(Ft=!0);B=bt.join("")}for(we=B.length;Ft===void 0&&we!==0;)B.charCodeAt(we-1)>>8&&(Ft=!0),we--;if(!Ft)return B;for(bt=te.noBOM?[]:[254,255],we=0,Ee=B.length;we<Ee;we++){if((rn=(ln=B.charCodeAt(we))>>8)>>8)throw new Error("Character at position "+we+" of string '"+B+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");bt.push(rn),bt.push(ln-(rn<<8))}return String.fromCharCode.apply(void 0,bt)},ja=m.__private__.pdfEscape=m.pdfEscape=function(B,te){return qv(B,te).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},m1=m.__private__.beginPage=function(B){Ne[++Yr]=[],nn[Yr]={objId:0,contentsObjId:0,userUnit:Number(l),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(B[0]),topRightY:Number(B[1])}},KA(Yr),De(Ne[q])},GA=function(B,te){var we,Ee,Oe;switch(n=te||n,typeof B=="string"&&(we=x(B.toLowerCase()),Array.isArray(we)&&(Ee=we[0],Oe=we[1])),Array.isArray(B)&&(Ee=B[0]*mt,Oe=B[1]*mt),isNaN(Ee)&&(Ee=i[0],Oe=i[1]),(Ee>14400||Oe>14400)&&(cr.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),Ee=Math.min(14400,Ee),Oe=Math.min(14400,Oe)),i=[Ee,Oe],n.substr(0,1)){case"l":Oe>Ee&&(i=[Oe,Ee]);break;case"p":Ee>Oe&&(i=[Oe,Ee])}m1(i),e5(x1),ce(kl),b1!==0&&ce(b1+" J"),w1!==0&&ce(w1+" j"),Hn.publish("addPage",{pageNumber:Yr})},UD=function(B){B>0&&B<=Yr&&(Ne.splice(B,1),nn.splice(B,1),Yr--,q>Yr&&(q=Yr),this.setPage(q))},KA=function(B){B>0&&B<=Yr&&(q=B)},VD=m.__private__.getNumberOfPages=m.getNumberOfPages=function(){return Ne.length-1},YA=function(B,te,we){var Ee,Oe=void 0;return we=we||{},B=B!==void 0?B:zn[Yt].fontName,te=te!==void 0?te:zn[Yt].fontStyle,Ee=B.toLowerCase(),tr[Ee]!==void 0&&tr[Ee][te]!==void 0?Oe=tr[Ee][te]:tr[B]!==void 0&&tr[B][te]!==void 0?Oe=tr[B][te]:we.disableWarning===!1&&cr.warn("Unable to look up font label for font '"+B+"', '"+te+"'. Refer to getFontList() for available fonts."),Oe||we.noFallback||(Oe=tr.times[te])==null&&(Oe=tr.times.normal),Oe},qD=m.__private__.putInfo=function(){var B=ks(),te=function(Ee){return Ee};for(var we in u!==null&&(te=_i.encryptor(B,0)),ce("<<"),ce("/Producer ("+ja(te("jsPDF "+Bt.version))+")"),Lt)Lt.hasOwnProperty(we)&&Lt[we]&&ce("/"+we.substr(0,1).toUpperCase()+we.substr(1)+" ("+ja(te(Lt[we]))+")");ce("/CreationDate ("+ja(te(M))+")"),ce(">>"),ce("endobj")},p1=m.__private__.putCatalog=function(B){var te=(B=B||{}).rootDictionaryObjId||Md;switch(ks(),ce("<<"),ce("/Type /Catalog"),ce("/Pages "+te+" 0 R"),ot||(ot="fullwidth"),ot){case"fullwidth":ce("/OpenAction [3 0 R /FitH null]");break;case"fullheight":ce("/OpenAction [3 0 R /FitV null]");break;case"fullpage":ce("/OpenAction [3 0 R /Fit]");break;case"original":ce("/OpenAction [3 0 R /XYZ null null 1]");break;default:var we=""+ot;we.substr(we.length-1)==="%"&&(ot=parseInt(ot)/100),typeof ot=="number"&&ce("/OpenAction [3 0 R /XYZ null null "+k(ot)+"]")}switch(vt||(vt="continuous"),vt){case"continuous":ce("/PageLayout /OneColumn");break;case"single":ce("/PageLayout /SinglePage");break;case"two":case"twoleft":ce("/PageLayout /TwoColumnLeft");break;case"tworight":ce("/PageLayout /TwoColumnRight")}Ve&&ce("/PageMode /"+Ve),Hn.publish("putCatalog"),ce(">>"),ce("endobj")},HD=m.__private__.putTrailer=function(){ce("trailer"),ce("<<"),ce("/Size "+(ne+1)),ce("/Root "+ne+" 0 R"),ce("/Info "+(ne-1)+" 0 R"),u!==null&&ce("/Encrypt "+_i.oid+" 0 R"),ce("/ID [ <"+U+"> <"+U+"> ]"),ce(">>")},WD=m.__private__.putHeader=function(){ce("%PDF-"+v),ce("%")},GD=m.__private__.putXRef=function(){var B="0000000000";ce("xref"),ce("0 "+(ne+1)),ce("0000000000 65535 f ");for(var te=1;te<=ne;te++)typeof re[te]=="function"?ce((B+re[te]()).slice(-10)+" 00000 n "):re[te]!==void 0?ce((B+re[te]).slice(-10)+" 00000 n "):ce("0000000000 00000 n ")},Fd=m.__private__.buildDocument=function(){ze(),De(pe),Hn.publish("buildDocument"),WD(),Fm(),HA(),qA(),u!==null&&FD(),qD(),p1();var B=ue;return GD(),HD(),ce("startxref"),ce(""+B),ce("%%EOF"),De(Ne[q]),pe.join(`
`)},Hv=m.__private__.getBlob=function(B){return new Blob([Ce(B)],{type:"application/pdf"})},Wv=m.output=m.__private__.output=Dl(function(B,te){switch(typeof(te=te||{})=="string"?te={filename:te}:te.filename=te.filename||"generated.pdf",B){case void 0:return Fd();case"save":m.save(te.filename);break;case"arraybuffer":return Ce(Fd());case"blob":return Hv(Fd());case"bloburi":case"bloburl":if(Kt.URL!==void 0&&typeof Kt.URL.createObjectURL=="function")return Kt.URL&&Kt.URL.createObjectURL(Hv(Fd()))||void 0;cr.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var we="",Ee=Fd();try{we=kM(Ee)}catch{we=kM(unescape(encodeURIComponent(Ee)))}return"data:application/pdf;filename="+te.filename+";base64,"+we;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Kt)==="[object Window]"){var Oe="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Ge=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';te.pdfObjectUrl&&(Oe=te.pdfObjectUrl,Ge="");var it='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+Oe+'"'+Ge+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(te)+");<\/script></body></html>",bt=Kt.open();return bt!==null&&bt.document.write(it),bt}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Kt)==="[object Window]"){var Ft='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(te.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+te.filename+'" width="500px" height="400px" /></body></html>',ln=Kt.open();if(ln!==null){ln.document.write(Ft);var rn=this;ln.document.documentElement.querySelector("#pdfViewer").onload=function(){ln.document.title=te.filename,ln.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(rn.output("bloburl"))}}return ln}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Kt)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var Cn='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",te)+'"></iframe></body></html>',Mr=Kt.open();if(Mr!==null&&(Mr.document.write(Cn),Mr.document.title=te.filename),Mr||typeof safari>"u")return Mr;break;case"datauri":case"dataurl":return Kt.document.location.href=this.output("datauristring",te);default:return null}}),XA=function(B){return Array.isArray(Mm)===!0&&Mm.indexOf(B)>-1};switch(r){case"pt":mt=1;break;case"mm":mt=72/25.4;break;case"cm":mt=72/2.54;break;case"in":mt=72;break;case"px":mt=XA("px_scaling")==1?.75:96/72;break;case"pc":case"em":mt=12;break;case"ex":mt=6;break;default:if(typeof r!="number")throw new Error("Invalid unit: "+r);mt=r}var _i=null;$(),z();var KD=function(B){return u!==null?_i.encryptor(B,0):function(te){return te}},ZA=m.__private__.getPageInfo=m.getPageInfo=function(B){if(isNaN(B)||B%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:nn[B].objId,pageNumber:B,pageContext:nn[B]}},Jt=m.__private__.getPageInfoByObjId=function(B){if(isNaN(B)||B%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var te in nn)if(nn[te].objId===B)break;return ZA(te)},YD=m.__private__.getCurrentPageInfo=m.getCurrentPageInfo=function(){return{objId:nn[q].objId,pageNumber:q,pageContext:nn[q]}};m.addPage=function(){return GA.apply(this,arguments),this},m.setPage=function(){return KA.apply(this,arguments),De.call(this,Ne[q]),this},m.insertPage=function(B){return this.addPage(),this.movePage(q,B),this},m.movePage=function(B,te){var we,Ee;if(B>te){we=Ne[B],Ee=nn[B];for(var Oe=B;Oe>te;Oe--)Ne[Oe]=Ne[Oe-1],nn[Oe]=nn[Oe-1];Ne[te]=we,nn[te]=Ee,this.setPage(te)}else if(B<te){we=Ne[B],Ee=nn[B];for(var Ge=B;Ge<te;Ge++)Ne[Ge]=Ne[Ge+1],nn[Ge]=nn[Ge+1];Ne[te]=we,nn[te]=Ee,this.setPage(te)}return this},m.deletePage=function(){return UD.apply(this,arguments),this},m.__private__.text=m.text=function(B,te,we,Ee,Oe){var Ge,it,bt,Ft,ln,rn,Cn,Mr,Xr,js=(Ee=Ee||{}).scope||this;if(typeof B=="number"&&typeof te=="number"&&(typeof we=="string"||Array.isArray(we))){var Oi=we;we=te,te=B,B=Oi}if(arguments[3]instanceof qt?(j("The transform parameter of text() with a Matrix value"),Xr=Oe):(bt=arguments[4],Ft=arguments[5],Ln(Cn=arguments[3])==="object"&&Cn!==null||(typeof bt=="string"&&(Ft=bt,bt=null),typeof Cn=="string"&&(Ft=Cn,Cn=null),typeof Cn=="number"&&(bt=Cn,Cn=null),Ee={flags:Cn,angle:bt,align:Ft})),isNaN(te)||isNaN(we)||B==null)throw new Error("Invalid arguments passed to jsPDF.text");if(B.length===0)return js;var Hs="",_l=!1,Xa=typeof Ee.lineHeightFactor=="number"?Ee.lineHeightFactor:Bm,Oc=js.internal.scaleFactor;function a5(mr){return mr=mr.split("	").join(Array(Ee.TabLen||9).join(" ")),ja(mr,Cn)}function C1(mr){for(var pr,os=mr.concat(),_s=[],Vd=os.length;Vd--;)typeof(pr=os.shift())=="string"?_s.push(pr):Array.isArray(mr)&&(pr.length===1||pr[1]===void 0&&pr[2]===void 0)?_s.push(pr[0]):_s.push([pr[0],pr[1],pr[2]]);return _s}function E1(mr,pr){var os;if(typeof mr=="string")os=pr(mr)[0];else if(Array.isArray(mr)){for(var _s,Vd,L1=mr.concat(),ox=[],u5=L1.length;u5--;)typeof(_s=L1.shift())=="string"?ox.push(pr(_s)[0]):Array.isArray(_s)&&typeof _s[0]=="string"&&(Vd=pr(_s[0],_s[1],_s[2]),ox.push([Vd[0],Vd[1],Vd[2]]));os=ox}return os}var Qv=!1,P1=!0;if(typeof B=="string")Qv=!0;else if(Array.isArray(B)){var T1=B.concat();it=[];for(var Jv,fi=T1.length;fi--;)(typeof(Jv=T1.shift())!="string"||Array.isArray(Jv)&&typeof Jv[0]!="string")&&(P1=!1);Qv=P1}if(Qv===!1)throw new Error('Type of text must be string or Array. "'+B+'" is not recognized.');typeof B=="string"&&(B=B.match(/[\r?\n]/)?B.split(/\r\n|\r|\n/g):[B]);var ex=Ue/js.internal.scaleFactor,tx=ex*(Xa-1);switch(Ee.baseline){case"bottom":we-=tx;break;case"top":we+=ex-tx;break;case"hanging":we+=ex-2*tx;break;case"middle":we+=ex/2-tx}if((rn=Ee.maxWidth||0)>0&&(typeof B=="string"?B=js.splitTextToSize(B,rn):Object.prototype.toString.call(B)==="[object Array]"&&(B=B.reduce(function(mr,pr){return mr.concat(js.splitTextToSize(pr,rn))},[]))),Ge={text:B,x:te,y:we,options:Ee,mutex:{pdfEscape:ja,activeFontKey:Yt,fonts:zn,activeFontSize:Ue}},Hn.publish("preProcessText",Ge),B=Ge.text,bt=(Ee=Ge.options).angle,!(Xr instanceof qt)&&bt&&typeof bt=="number"){bt*=Math.PI/180,Ee.rotationDirection===0&&(bt=-bt),b===y.ADVANCED&&(bt=-bt);var nx=Math.cos(bt),I1=Math.sin(bt);Xr=new qt(nx,I1,-I1,nx,0,0)}else bt&&bt instanceof qt&&(Xr=bt);b!==y.ADVANCED||Xr||(Xr=Tc),(ln=Ee.charSpace||Yv)!==void 0&&(Hs+=C(P(ln))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Mr=Ee.horizontalScale)!==void 0&&(Hs+=C(100*Mr)+` Tz
`),Ee.lang;var Na=-1,ik=Ee.renderingMode!==void 0?Ee.renderingMode:Ee.stroke,D1=js.internal.getCurrentPageInfo().pageContext;switch(ik){case 0:case!1:case"fill":Na=0;break;case 1:case!0:case"stroke":Na=1;break;case 2:case"fillThenStroke":Na=2;break;case 3:case"invisible":Na=3;break;case 4:case"fillAndAddForClipping":Na=4;break;case 5:case"strokeAndAddPathForClipping":Na=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Na=6;break;case 7:case"addToPathForClipping":Na=7}var o5=D1.usedRenderingMode!==void 0?D1.usedRenderingMode:-1;Na!==-1?Hs+=Na+` Tr
`:o5!==-1&&(Hs+=`0 Tr
`),Na!==-1&&(D1.usedRenderingMode=Na),Ft=Ee.align||"left";var Vo,rx=Ue*Xa,l5=js.internal.pageSize.getWidth(),c5=zn[Yt];ln=Ee.charSpace||Yv,rn=Ee.maxWidth||0,Cn=Object.assign({autoencode:!0,noBOM:!0},Ee.flags);var yh=[],Vm=function(mr){return js.getStringUnitWidth(mr,{font:c5,charSpace:ln,fontSize:Ue,doKerning:!1})*Ue/Oc};if(Object.prototype.toString.call(B)==="[object Array]"){var Sa;it=C1(B),Ft!=="left"&&(Vo=it.map(Vm));var Ji,bh=0;if(Ft==="right"){te-=Vo[0],B=[],fi=it.length;for(var Bd=0;Bd<fi;Bd++)Bd===0?(Ji=_c(te),Sa=$d(we)):(Ji=P(bh-Vo[Bd]),Sa=-rx),B.push([it[Bd],Ji,Sa]),bh=Vo[Bd]}else if(Ft==="center"){te-=Vo[0]/2,B=[],fi=it.length;for(var zd=0;zd<fi;zd++)zd===0?(Ji=_c(te),Sa=$d(we)):(Ji=P((bh-Vo[zd])/2),Sa=-rx),B.push([it[zd],Ji,Sa]),bh=Vo[zd]}else if(Ft==="left"){B=[],fi=it.length;for(var sx=0;sx<fi;sx++)B.push(it[sx])}else if(Ft==="justify"&&c5.encoding==="Identity-H"){B=[],fi=it.length,rn=rn!==0?rn:l5;for(var Ud=0,as=0;as<fi;as++)if(Sa=as===0?$d(we):-rx,Ji=as===0?_c(te):Ud,as<fi-1){var k1=P((rn-Vo[as])/(it[as].split(" ").length-1)),ea=it[as].split(" ");B.push([ea[0]+" ",Ji,Sa]),Ud=0;for(var qo=1;qo<ea.length;qo++){var ix=(Vm(ea[qo-1]+" "+ea[qo])-Vm(ea[qo]))*Oc+k1;qo==ea.length-1?B.push([ea[qo],ix,0]):B.push([ea[qo]+" ",ix,0]),Ud-=ix}}else B.push([it[as],Ji,Sa]);B.push(["",Ud,0])}else{if(Ft!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(B=[],fi=it.length,rn=rn!==0?rn:l5,as=0;as<fi;as++)Sa=as===0?$d(we):-rx,Ji=as===0?_c(te):0,as<fi-1?yh.push(C(P((rn-Vo[as])/(it[as].split(" ").length-1)))):yh.push(0),B.push([it[as],Ji,Sa])}}var d5=typeof Ee.R2L=="boolean"?Ee.R2L:jt;d5===!0&&(B=E1(B,function(mr,pr,os){return[mr.split("").reverse().join(""),pr,os]})),Ge={text:B,x:te,y:we,options:Ee,mutex:{pdfEscape:ja,activeFontKey:Yt,fonts:zn,activeFontSize:Ue}},Hn.publish("postProcessText",Ge),B=Ge.text,_l=Ge.mutex.isHex||!1;var _1=zn[Yt].encoding;_1!=="WinAnsiEncoding"&&_1!=="StandardEncoding"||(B=E1(B,function(mr,pr,os){return[a5(mr),pr,os]})),it=C1(B),B=[];for(var qm,Hm,wh,Wm=0,ax=1,Gm=Array.isArray(it[0])?ax:Wm,jh="",O1=function(mr,pr,os){var _s="";return os instanceof qt?(os=typeof Ee.angle=="number"?El(os,new qt(1,0,0,1,mr,pr)):El(new qt(1,0,0,1,mr,pr),os),b===y.ADVANCED&&(os=El(new qt(1,0,0,-1,0,0),os)),_s=os.join(" ")+` Tm
`):_s=C(mr)+" "+C(pr)+` Td
`,_s},Ho=0;Ho<it.length;Ho++){switch(jh="",Gm){case ax:wh=(_l?"<":"(")+it[Ho][0]+(_l?">":")"),qm=parseFloat(it[Ho][1]),Hm=parseFloat(it[Ho][2]);break;case Wm:wh=(_l?"<":"(")+it[Ho]+(_l?">":")"),qm=_c(te),Hm=$d(we)}yh!==void 0&&yh[Ho]!==void 0&&(jh=yh[Ho]+` Tw
`),Ho===0?B.push(jh+O1(qm,Hm,Xr)+wh):Gm===Wm?B.push(jh+wh):Gm===ax&&B.push(jh+O1(qm,Hm,Xr)+wh)}B=Gm===Wm?B.join(` Tj
T* `):B.join(` Tj
`),B+=` Tj
`;var Wo=`BT
/`;return Wo+=Yt+" "+Ue+` Tf
`,Wo+=C(Ue*Xa)+` TL
`,Wo+=zm+`
`,Wo+=Hs,Wo+=B,ce(Wo+="ET"),f[Yt]=!0,js};var XD=m.__private__.clip=m.clip=function(B){return ce(B==="evenodd"?"W*":"W"),this};m.clipEvenOdd=function(){return XD("evenodd")},m.__private__.discardPath=m.discardPath=function(){return ce("n"),this};var kc=m.__private__.isValidStyle=function(B){var te=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(B)!==-1&&(te=!0),te};m.__private__.setDefaultPathOperation=m.setDefaultPathOperation=function(B){return kc(B)&&(d=B),this};var QA=m.__private__.getStyle=m.getStyle=function(B){var te=d;switch(B){case"D":case"S":te="S";break;case"F":te="f";break;case"FD":case"DF":te="B";break;case"f":case"f*":case"B":case"B*":te=B}return te},JA=m.close=function(){return ce("h"),this};m.stroke=function(){return ce("S"),this},m.fill=function(B){return Gv("f",B),this},m.fillEvenOdd=function(B){return Gv("f*",B),this},m.fillStroke=function(B){return Gv("B",B),this},m.fillStrokeEvenOdd=function(B){return Gv("B*",B),this};var Gv=function(B,te){Ln(te)==="object"?QD(te,B):ce(B)},g1=function(B){B===null||b===y.ADVANCED&&B===void 0||(B=QA(B),ce(B))};function ZD(B,te,we,Ee,Oe){var Ge=new xp(te||this.boundingBox,we||this.xStep,Ee||this.yStep,this.gState,Oe||this.matrix);Ge.stream=this.stream;var it=B+"$$"+this.cloneIndex+++"$$";return wa(it,Ge),Ge}var QD=function(B,te){var we=Ld[B.key],Ee=An[we];if(Ee instanceof Wh)ce("q"),ce(JD(te)),Ee.gState&&m.setGState(Ee.gState),ce(B.matrix.toString()+" cm"),ce("/"+we+" sh"),ce("Q");else if(Ee instanceof xp){var Oe=new qt(1,0,0,-1,0,xh());B.matrix&&(Oe=Oe.multiply(B.matrix||Tc),we=ZD.call(Ee,B.key,B.boundingBox,B.xStep,B.yStep,Oe).id),ce("q"),ce("/Pattern cs"),ce("/"+we+" scn"),Ee.gState&&m.setGState(Ee.gState),ce(te),ce("Q")}},JD=function(B){switch(B){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},v1=m.moveTo=function(B,te){return ce(C(P(B))+" "+C(_(te))+" m"),this},$m=m.lineTo=function(B,te){return ce(C(P(B))+" "+C(_(te))+" l"),this},gh=m.curveTo=function(B,te,we,Ee,Oe,Ge){return ce([C(P(B)),C(_(te)),C(P(we)),C(_(Ee)),C(P(Oe)),C(_(Ge)),"c"].join(" ")),this};m.__private__.line=m.line=function(B,te,we,Ee,Oe){if(isNaN(B)||isNaN(te)||isNaN(we)||isNaN(Ee)||!kc(Oe))throw new Error("Invalid arguments passed to jsPDF.line");return b===y.COMPAT?this.lines([[we-B,Ee-te]],B,te,[1,1],Oe||"S"):this.lines([[we-B,Ee-te]],B,te,[1,1]).stroke()},m.__private__.lines=m.lines=function(B,te,we,Ee,Oe,Ge){var it,bt,Ft,ln,rn,Cn,Mr,Xr,js,Oi,Hs,_l;if(typeof B=="number"&&(_l=we,we=te,te=B,B=_l),Ee=Ee||[1,1],Ge=Ge||!1,isNaN(te)||isNaN(we)||!Array.isArray(B)||!Array.isArray(Ee)||!kc(Oe)||typeof Ge!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(v1(te,we),it=Ee[0],bt=Ee[1],ln=B.length,Oi=te,Hs=we,Ft=0;Ft<ln;Ft++)(rn=B[Ft]).length===2?(Oi=rn[0]*it+Oi,Hs=rn[1]*bt+Hs,$m(Oi,Hs)):(Cn=rn[0]*it+Oi,Mr=rn[1]*bt+Hs,Xr=rn[2]*it+Oi,js=rn[3]*bt+Hs,Oi=rn[4]*it+Oi,Hs=rn[5]*bt+Hs,gh(Cn,Mr,Xr,js,Oi,Hs));return Ge&&JA(),g1(Oe),this},m.path=function(B){for(var te=0;te<B.length;te++){var we=B[te],Ee=we.c;switch(we.op){case"m":v1(Ee[0],Ee[1]);break;case"l":$m(Ee[0],Ee[1]);break;case"c":gh.apply(this,Ee);break;case"h":JA()}}return this},m.__private__.rect=m.rect=function(B,te,we,Ee,Oe){if(isNaN(B)||isNaN(te)||isNaN(we)||isNaN(Ee)||!kc(Oe))throw new Error("Invalid arguments passed to jsPDF.rect");return b===y.COMPAT&&(Ee=-Ee),ce([C(P(B)),C(_(te)),C(P(we)),C(P(Ee)),"re"].join(" ")),g1(Oe),this},m.__private__.triangle=m.triangle=function(B,te,we,Ee,Oe,Ge,it){if(isNaN(B)||isNaN(te)||isNaN(we)||isNaN(Ee)||isNaN(Oe)||isNaN(Ge)||!kc(it))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[we-B,Ee-te],[Oe-we,Ge-Ee],[B-Oe,te-Ge]],B,te,[1,1],it,!0),this},m.__private__.roundedRect=m.roundedRect=function(B,te,we,Ee,Oe,Ge,it){if(isNaN(B)||isNaN(te)||isNaN(we)||isNaN(Ee)||isNaN(Oe)||isNaN(Ge)||!kc(it))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var bt=4/3*(Math.SQRT2-1);return Oe=Math.min(Oe,.5*we),Ge=Math.min(Ge,.5*Ee),this.lines([[we-2*Oe,0],[Oe*bt,0,Oe,Ge-Ge*bt,Oe,Ge],[0,Ee-2*Ge],[0,Ge*bt,-Oe*bt,Ge,-Oe,Ge],[2*Oe-we,0],[-Oe*bt,0,-Oe,-Ge*bt,-Oe,-Ge],[0,2*Ge-Ee],[0,-Ge*bt,Oe*bt,-Ge,Oe,-Ge]],B+Oe,te,[1,1],it,!0),this},m.__private__.ellipse=m.ellipse=function(B,te,we,Ee,Oe){if(isNaN(B)||isNaN(te)||isNaN(we)||isNaN(Ee)||!kc(Oe))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Ge=4/3*(Math.SQRT2-1)*we,it=4/3*(Math.SQRT2-1)*Ee;return v1(B+we,te),gh(B+we,te-it,B+Ge,te-Ee,B,te-Ee),gh(B-Ge,te-Ee,B-we,te-it,B-we,te),gh(B-we,te+it,B-Ge,te+Ee,B,te+Ee),gh(B+Ge,te+Ee,B+we,te+it,B+we,te),g1(Oe),this},m.__private__.circle=m.circle=function(B,te,we,Ee){if(isNaN(B)||isNaN(te)||isNaN(we)||!kc(Ee))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(B,te,we,we,Ee)},m.setFont=function(B,te,we){return we&&(te=E(te,we)),Yt=YA(B,te,{disableWarning:!1}),this};var ek=m.__private__.getFont=m.getFont=function(){return zn[YA.apply(m,arguments)]};m.__private__.getFontList=m.getFontList=function(){var B,te,we={};for(B in tr)if(tr.hasOwnProperty(B))for(te in we[B]=[],tr[B])tr[B].hasOwnProperty(te)&&we[B].push(te);return we},m.addFont=function(B,te,we,Ee,Oe){var Ge=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Ge.indexOf(arguments[3])!==-1?Oe=arguments[3]:arguments[3]&&Ge.indexOf(arguments[3])==-1&&(we=E(we,Ee)),Oe=Oe||"Identity-H",f1.call(this,B,te,we,Oe)};var Bm,x1=t.lineWidth||.200025,Kv=m.__private__.getLineWidth=m.getLineWidth=function(){return x1},e5=m.__private__.setLineWidth=m.setLineWidth=function(B){return x1=B,ce(C(P(B))+" w"),this};m.__private__.setLineDash=Bt.API.setLineDash=Bt.API.setLineDashPattern=function(B,te){if(B=B||[],te=te||0,isNaN(te)||!Array.isArray(B))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return B=B.map(function(we){return C(P(we))}).join(" "),te=C(P(te)),ce("["+B+"] "+te+" d"),this};var t5=m.__private__.getLineHeight=m.getLineHeight=function(){return Ue*Bm};m.__private__.getLineHeight=m.getLineHeight=function(){return Ue*Bm};var n5=m.__private__.setLineHeightFactor=m.setLineHeightFactor=function(B){return typeof(B=B||1.15)=="number"&&(Bm=B),this},r5=m.__private__.getLineHeightFactor=m.getLineHeightFactor=function(){return Bm};n5(t.lineHeight);var _c=m.__private__.getHorizontalCoordinate=function(B){return P(B)},$d=m.__private__.getVerticalCoordinate=function(B){return b===y.ADVANCED?B:nn[q].mediaBox.topRightY-nn[q].mediaBox.bottomLeftY-P(B)},tk=m.__private__.getHorizontalCoordinateString=m.getHorizontalCoordinateString=function(B){return C(_c(B))},vh=m.__private__.getVerticalCoordinateString=m.getVerticalCoordinateString=function(B){return C($d(B))},kl=t.strokeColor||"0 G";m.__private__.getStrokeColor=m.getDrawColor=function(){return Tl(kl)},m.__private__.setStrokeColor=m.setDrawColor=function(B,te,we,Ee){return kl=Il({ch1:B,ch2:te,ch3:we,ch4:Ee,pdfColorType:"draw",precision:2}),ce(kl),this};var y1=t.fillColor||"0 g";m.__private__.getFillColor=m.getFillColor=function(){return Tl(y1)},m.__private__.setFillColor=m.setFillColor=function(B,te,we,Ee){return y1=Il({ch1:B,ch2:te,ch3:we,ch4:Ee,pdfColorType:"fill",precision:2}),ce(y1),this};var zm=t.textColor||"0 g",nk=m.__private__.getTextColor=m.getTextColor=function(){return Tl(zm)};m.__private__.setTextColor=m.setTextColor=function(B,te,we,Ee){return zm=Il({ch1:B,ch2:te,ch3:we,ch4:Ee,pdfColorType:"text",precision:3}),this};var Yv=t.charSpace,rk=m.__private__.getCharSpace=m.getCharSpace=function(){return parseFloat(Yv||0)};m.__private__.setCharSpace=m.setCharSpace=function(B){if(isNaN(B))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Yv=B,this};var b1=0;m.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},m.__private__.setLineCap=m.setLineCap=function(B){var te=m.CapJoinStyles[B];if(te===void 0)throw new Error("Line cap style of '"+B+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return b1=te,ce(te+" J"),this};var w1=0;m.__private__.setLineJoin=m.setLineJoin=function(B){var te=m.CapJoinStyles[B];if(te===void 0)throw new Error("Line join style of '"+B+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return w1=te,ce(te+" j"),this},m.__private__.setLineMiterLimit=m.__private__.setMiterLimit=m.setLineMiterLimit=m.setMiterLimit=function(B){if(B=B||0,isNaN(B))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return ce(C(P(B))+" M"),this},m.GState=r2,m.setGState=function(B){(B=typeof B=="string"?Kr[Cl[B]]:s5(null,B)).equals(Rd)||(ce("/"+B.id+" gs"),Rd=B)};var s5=function(B,te){if(!B||!Cl[B]){var we=!1;for(var Ee in Kr)if(Kr.hasOwnProperty(Ee)&&Kr[Ee].equals(te)){we=!0;break}if(we)te=Kr[Ee];else{var Oe="GS"+(Object.keys(Kr).length+1).toString(10);Kr[Oe]=te,te.id=Oe}return B&&(Cl[B]=te.id),Hn.publish("addGState",te),te}};m.addGState=function(B,te){return s5(B,te),this},m.saveGraphicsState=function(){return ce("q"),ba.push({key:Yt,size:Ue,color:zm}),this},m.restoreGraphicsState=function(){ce("Q");var B=ba.pop();return Yt=B.key,Ue=B.size,zm=B.color,Rd=null,this},m.setCurrentTransformationMatrix=function(B){return ce(B.toString()+" cm"),this},m.comment=function(B){return ce("#"+B),this};var Xv=function(B,te){var we=B||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return we},set:function(Ge){isNaN(Ge)||(we=parseFloat(Ge))}});var Ee=te||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return Ee},set:function(Ge){isNaN(Ge)||(Ee=parseFloat(Ge))}});var Oe="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return Oe},set:function(Ge){Oe=Ge.toString()}}),this},j1=function(B,te,we,Ee){Xv.call(this,B,te),this.type="rect";var Oe=we||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return Oe},set:function(it){isNaN(it)||(Oe=parseFloat(it))}});var Ge=Ee||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Ge},set:function(it){isNaN(it)||(Ge=parseFloat(it))}}),this},N1=function(){this.page=Yr,this.currentPage=q,this.pages=Ne.slice(0),this.pagesContext=nn.slice(0),this.x=Bn,this.y=hn,this.matrix=Ds,this.width=Um(q),this.height=xh(q),this.outputDestination=$e,this.id="",this.objectNumber=-1};N1.prototype.restore=function(){Yr=this.page,q=this.currentPage,nn=this.pagesContext,Ne=this.pages,Bn=this.x,hn=this.y,Ds=this.matrix,S1(q,this.width),A1(q,this.height),$e=this.outputDestination};var i5=function(B,te,we,Ee,Oe){Pc.push(new N1),Yr=q=0,Ne=[],Bn=B,hn=te,Ds=Oe,m1([we,Ee])},sk=function(B){if(Ec[B])Pc.pop().restore();else{var te=new N1,we="Xo"+(Object.keys(hi).length+1).toString(10);te.id=we,Ec[B]=we,hi[we]=te,Hn.publish("addFormObject",te),Pc.pop().restore()}};for(var Zv in m.beginFormObject=function(B,te,we,Ee,Oe){return i5(B,te,we,Ee,Oe),this},m.endFormObject=function(B){return sk(B),this},m.doFormObject=function(B,te){var we=hi[Ec[B]];return ce("q"),ce(te.toString()+" cm"),ce("/"+we.id+" Do"),ce("Q"),this},m.getFormObject=function(B){var te=hi[Ec[B]];return{x:te.x,y:te.y,width:te.width,height:te.height,matrix:te.matrix}},m.save=function(B,te){return B=B||"generated.pdf",(te=te||{}).returnPromise=te.returnPromise||!1,te.returnPromise===!1?(ap(Hv(Fd()),B),typeof ap.unload=="function"&&Kt.setTimeout&&setTimeout(ap.unload,911),this):new Promise(function(we,Ee){try{var Oe=ap(Hv(Fd()),B);typeof ap.unload=="function"&&Kt.setTimeout&&setTimeout(ap.unload,911),we(Oe)}catch(Ge){Ee(Ge.message)}})},Bt.API)Bt.API.hasOwnProperty(Zv)&&(Zv==="events"&&Bt.API.events.length?function(B,te){var we,Ee,Oe;for(Oe=te.length-1;Oe!==-1;Oe--)we=te[Oe][0],Ee=te[Oe][1],B.subscribe.apply(B,[we].concat(typeof Ee=="function"?[Ee]:Ee))}(Hn,Bt.API.events):m[Zv]=Bt.API[Zv]);var Um=m.getPageWidth=function(B){return(nn[B=B||q].mediaBox.topRightX-nn[B].mediaBox.bottomLeftX)/mt},S1=m.setPageWidth=function(B,te){nn[B].mediaBox.topRightX=te*mt+nn[B].mediaBox.bottomLeftX},xh=m.getPageHeight=function(B){return(nn[B=B||q].mediaBox.topRightY-nn[B].mediaBox.bottomLeftY)/mt},A1=m.setPageHeight=function(B,te){nn[B].mediaBox.topRightY=te*mt+nn[B].mediaBox.bottomLeftY};return m.internal={pdfEscape:ja,getStyle:QA,getFont:ek,getFontSize:at,getCharSpace:rk,getTextColor:nk,getLineHeight:t5,getLineHeightFactor:r5,getLineWidth:Kv,write:Te,getHorizontalCoordinate:_c,getVerticalCoordinate:$d,getCoordinateString:tk,getVerticalCoordinateString:vh,collections:{},newObject:ks,newAdditionalObject:Mv,newObjectDeferred:ws,newObjectDeferredBegin:Ya,getFilters:Ic,putStream:Uo,events:Hn,scaleFactor:mt,pageSize:{getWidth:function(){return Um(q)},setWidth:function(B){S1(q,B)},getHeight:function(){return xh(q)},setHeight:function(B){A1(q,B)}},encryptionOptions:u,encryption:_i,getEncryptor:KD,output:Wv,getNumberOfPages:VD,pages:Ne,out:ce,f2:k,f3:D,getPageInfo:ZA,getPageInfoByObjId:Jt,getCurrentPageInfo:YD,getPDFVersion:p,Point:Xv,Rectangle:j1,Matrix:qt,hasHotfix:XA},Object.defineProperty(m.internal.pageSize,"width",{get:function(){return Um(q)},set:function(B){S1(q,B)},enumerable:!0,configurable:!0}),Object.defineProperty(m.internal.pageSize,"height",{get:function(){return xh(q)},set:function(B){A1(q,B)},enumerable:!0,configurable:!0}),zD.call(m,Se),Yt="F1",GA(i,n),Hn.publish("initialized"),m}Ox.prototype.lsbFirstWord=function(t){return String.fromCharCode(t>>0&255,t>>8&255,t>>16&255,t>>24&255)},Ox.prototype.toHexString=function(t){return t.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},Ox.prototype.hexToBytes=function(t){for(var e=[],n=0;n<t.length;n+=2)e.push(String.fromCharCode(parseInt(t.substr(n,2),16)));return e.join("")},Ox.prototype.processOwnerPassword=function(t,e){return OM(_M(e).substr(0,5),t)},Ox.prototype.encryptor=function(t,e){var n=_M(this.encryptionKey+String.fromCharCode(255&t,t>>8&255,t>>16&255,255&e,e>>8&255)).substr(0,10);return function(r){return OM(n,r)}},r2.prototype.equals=function(t){var e,n="id,objectNumber,equals";if(!t||Ln(t)!==Ln(this))return!1;var r=0;for(e in this)if(!(n.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!t.hasOwnProperty(e)||this[e]!==t[e])return!1;r++}for(e in t)t.hasOwnProperty(e)&&n.indexOf(e)<0&&r--;return r===0},Bt.API={events:[]},Bt.version="2.5.2";var es=Bt.API,F8=1,Iv=function(t){return t.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},yx=function(t){return t.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},sn=function(t){return t.toFixed(2)},_h=function(t){return t.toFixed(5)};es.__acroform__={};var Ga=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t},DV=function(t){return t*F8},zc=function(t){var e=new ose,n=Tt.internal.getHeight(t)||0,r=Tt.internal.getWidth(t)||0;return e.BBox=[0,0,Number(sn(r)),Number(sn(n))],e},ACe=es.__acroform__.setBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return t|=1<<e},CCe=es.__acroform__.clearBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return t&=~(1<<e)},ECe=es.__acroform__.getBit=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return t&1<<e?1:0},ps=es.__acroform__.getBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return ECe(t,e-1)},gs=es.__acroform__.setBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return ACe(t,e-1)},vs=es.__acroform__.clearBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return CCe(t,e-1)},PCe=es.__acroform__.calculateCoordinates=function(t,e){var n=e.internal.getHorizontalCoordinate,r=e.internal.getVerticalCoordinate,i=t[0],a=t[1],o=t[2],l=t[3],c={};return c.lowerLeft_X=n(i)||0,c.lowerLeft_Y=r(a+l)||0,c.upperRight_X=n(i+o)||0,c.upperRight_Y=r(a)||0,[Number(sn(c.lowerLeft_X)),Number(sn(c.lowerLeft_Y)),Number(sn(c.upperRight_X)),Number(sn(c.upperRight_Y))]},TCe=function(t){if(t.appearanceStreamContent)return t.appearanceStreamContent;if(t.V||t.DV){var e=[],n=t._V||t.DV,r=LM(t,n),i=t.scope.internal.getFont(t.fontName,t.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(t.scope.__private__.encodeColorString(t.color)),e.push("/"+i+" "+sn(r.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(r.text),e.push("ET"),e.push("Q"),e.push("EMC");var a=zc(t);return a.scope=t.scope,a.stream=e.join(`
`),a}},LM=function(t,e){var n=t.fontSize===0?t.maxFontSize:t.fontSize,r={text:"",fontSize:""},i=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");i=t.multiline?i.map(function(D){return D.split(`
`)}):i.map(function(D){return[D]});var a=n,o=Tt.internal.getHeight(t)||0;o=o<0?-o:o;var l=Tt.internal.getWidth(t)||0;l=l<0?-l:l;var c=function(D,P,R){if(D+1<i.length){var _=P+" "+i[D+1][0];return xC(_,t,R).width<=l-4}return!1};a++;e:for(;a>0;){e="",a--;var d,u,h=xC("3",t,a).height,f=t.multiline?o-a:(o-h)/2,m=f+=2,v=0,p=0,g=0;if(a<=0){e=`(...) Tj
`,e+="% Width of Text: "+xC(e,t,a=12).width+", FieldWidth:"+l+`
`;break}for(var x="",y=0,b=0;b<i.length;b++)if(i.hasOwnProperty(b)){var w=!1;if(i[b].length!==1&&g!==i[b].length-1){if((h+2)*(y+2)+2>o)continue e;x+=i[b][g],w=!0,p=b,b--}else{x=(x+=i[b][g]+" ").substr(x.length-1)==" "?x.substr(0,x.length-1):x;var N=parseInt(b),E=c(N,x,a),C=b>=i.length-1;if(E&&!C){x+=" ",g=0;continue}if(E||C){if(C)p=N;else if(t.multiline&&(h+2)*(y+2)+2>o)continue e}else{if(!t.multiline||(h+2)*(y+2)+2>o)continue e;p=N}}for(var j="",I=v;I<=p;I++){var k=i[I];if(t.multiline){if(I===p){j+=k[g]+" ",g=(g+1)%k.length;continue}if(I===v){j+=k[k.length-1]+" ";continue}}j+=k[0]+" "}switch(j=j.substr(j.length-1)==" "?j.substr(0,j.length-1):j,u=xC(j,t,a).width,t.textAlign){case"right":d=l-u-2;break;case"center":d=(l-u)/2;break;case"left":default:d=2}e+=sn(d)+" "+sn(m)+` Td
`,e+="("+Iv(j)+`) Tj
`,e+=-sn(d)+` 0 Td
`,m=-(a+2),u=0,v=w?p:p+1,y++,x=""}break}return r.text=e,r.fontSize=a,r},xC=function(t,e,n){var r=e.scope.internal.getFont(e.fontName,e.fontStyle),i=e.scope.getStringUnitWidth(t,{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n);return{height:e.scope.getStringUnitWidth("3",{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n)*1.5,width:i}},ICe={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},DCe=function(t,e){var n={type:"reference",object:t};e.internal.getPageInfo(t.page).pageContext.annotations.find(function(r){return r.type===n.type&&r.object===n.object})===void 0&&e.internal.getPageInfo(t.page).pageContext.annotations.push(n)},kCe=function(t,e){for(var n in t)if(t.hasOwnProperty(n)){var r=n,i=t[n];e.internal.newObjectDeferredBegin(i.objId,!0),Ln(i)==="object"&&typeof i.putStream=="function"&&i.putStream(),delete t[r]}},_Ce=function(t,e){if(e.scope=t,t.internal!==void 0&&(t.internal.acroformPlugin===void 0||t.internal.acroformPlugin.isInitialized===!1)){if(Sc.FieldNum=0,t.internal.acroformPlugin=JSON.parse(JSON.stringify(ICe)),t.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");F8=t.internal.scaleFactor,t.internal.acroformPlugin.acroFormDictionaryRoot=new lse,t.internal.acroformPlugin.acroFormDictionaryRoot.scope=t,t.internal.acroformPlugin.acroFormDictionaryRoot._eventID=t.internal.events.subscribe("postPutResources",function(){(function(n){n.internal.events.unsubscribe(n.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete n.internal.acroformPlugin.acroFormDictionaryRoot._eventID,n.internal.acroformPlugin.printedOut=!0})(t)}),t.internal.events.subscribe("buildDocument",function(){(function(n){n.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var r=n.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var i in r)if(r.hasOwnProperty(i)){var a=r[i];a.objId=void 0,a.hasAnnotation&&DCe(a,n)}})(t)}),t.internal.events.subscribe("putCatalog",function(){(function(n){if(n.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");n.internal.write("/AcroForm "+n.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(t)}),t.internal.events.subscribe("postPutPages",function(n){(function(r,i){var a=!r;for(var o in r||(i.internal.newObjectDeferredBegin(i.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),i.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),r=r||i.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(r.hasOwnProperty(o)){var l=r[o],c=[],d=l.Rect;if(l.Rect&&(l.Rect=PCe(l.Rect,i)),i.internal.newObjectDeferredBegin(l.objId,!0),l.DA=Tt.createDefaultAppearanceStream(l),Ln(l)==="object"&&typeof l.getKeyValueListForStream=="function"&&(c=l.getKeyValueListForStream()),l.Rect=d,l.hasAppearanceStream&&!l.appearanceStreamContent){var u=TCe(l);c.push({key:"AP",value:"<</N "+u+">>"}),i.internal.acroformPlugin.xForms.push(u)}if(l.appearanceStreamContent){var h="";for(var f in l.appearanceStreamContent)if(l.appearanceStreamContent.hasOwnProperty(f)){var m=l.appearanceStreamContent[f];if(h+="/"+f+" ",h+="<<",Object.keys(m).length>=1||Array.isArray(m)){for(var o in m)if(m.hasOwnProperty(o)){var v=m[o];typeof v=="function"&&(v=v.call(i,l)),h+="/"+o+" "+v+" ",i.internal.acroformPlugin.xForms.indexOf(v)>=0||i.internal.acroformPlugin.xForms.push(v)}}else typeof(v=m)=="function"&&(v=v.call(i,l)),h+="/"+o+" "+v,i.internal.acroformPlugin.xForms.indexOf(v)>=0||i.internal.acroformPlugin.xForms.push(v);h+=">>"}c.push({key:"AP",value:`<<
`+h+">>"})}i.internal.putStream({additionalKeyValues:c,objectId:l.objId}),i.internal.out("endobj")}a&&kCe(i.internal.acroformPlugin.xForms,i)})(n,t)}),t.internal.acroformPlugin.isInitialized=!0}},ase=es.__acroform__.arrayToPdfArray=function(t,e,n){var r=function(o){return o};if(Array.isArray(t)){for(var i="[",a=0;a<t.length;a++)switch(a!==0&&(i+=" "),Ln(t[a])){case"boolean":case"number":case"object":i+=t[a].toString();break;case"string":t[a].substr(0,1)!=="/"?(e!==void 0&&n&&(r=n.internal.getEncryptor(e)),i+="("+Iv(r(t[a].toString()))+")"):i+=t[a].toString()}return i+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},J_=function(t,e,n){var r=function(i){return i};return e!==void 0&&n&&(r=n.internal.getEncryptor(e)),(t=t||"").toString(),t="("+Iv(r(t))+")"},fd=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(t){this._objId=t}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};fd.prototype.toString=function(){return this.objId+" 0 R"},fd.prototype.putStream=function(){var t=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:t,objectId:this.objId}),this.scope.internal.out("endobj")},fd.prototype.getKeyValueListForStream=function(){var t=[],e=Object.getOwnPropertyNames(this).filter(function(a){return a!="content"&&a!="appearanceStreamContent"&&a!="scope"&&a!="objId"&&a.substring(0,1)!="_"});for(var n in e)if(Object.getOwnPropertyDescriptor(this,e[n]).configurable===!1){var r=e[n],i=this[r];i&&(Array.isArray(i)?t.push({key:r,value:ase(i,this.objId,this.scope)}):i instanceof fd?(i.scope=this.scope,t.push({key:r,value:i.objId+" 0 R"})):typeof i!="function"&&t.push({key:r,value:i}))}return t};var ose=function(){fd.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var t,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(n){e=n}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(n){t=n.trim()},get:function(){return t||null}})};Ga(ose,fd);var lse=function(){fd.call(this);var t,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(t){var n=function(r){return r};return this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),"("+Iv(n(t))+")"}},set:function(n){t=n}})};Ga(lse,fd);var Sc=function t(){fd.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(x){if(isNaN(x))throw new Error('Invalid value "'+x+'" for attribute F supplied.');e=x}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!ps(e,3)},set:function(x){x?this.F=gs(e,3):this.F=vs(e,3)}});var n=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return n},set:function(x){if(isNaN(x))throw new Error('Invalid value "'+x+'" for attribute Ff supplied.');n=x}});var r=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(r.length!==0)return r},set:function(x){r=x!==void 0?x:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[0])?0:r[0]},set:function(x){r[0]=x}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[1])?0:r[1]},set:function(x){r[1]=x}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[2])?0:r[2]},set:function(x){r[2]=x}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[3])?0:r[3]},set:function(x){r[3]=x}});var i="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return i},set:function(x){switch(x){case"/Btn":case"/Tx":case"/Ch":case"/Sig":i=x;break;default:throw new Error('Invalid value "'+x+'" for attribute FT supplied.')}}});var a=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!a||a.length<1){if(this instanceof OP)return;a="FieldObject"+t.FieldNum++}var x=function(y){return y};return this.scope&&(x=this.scope.internal.getEncryptor(this.objId)),"("+Iv(x(a))+")"},set:function(x){a=x.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return a},set:function(x){a=x}});var o="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return o},set:function(x){o=x}});var l="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return l},set:function(x){l=x}});var c=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return c},set:function(x){c=x}});var d=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return d===void 0?50/F8:d},set:function(x){d=x}});var u="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return u},set:function(x){u=x}});var h="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!h||this instanceof OP||this instanceof am))return J_(h,this.objId,this.scope)},set:function(x){x=x.toString(),h=x}});var f=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(f)return this instanceof Bs?f:J_(f,this.objId,this.scope)},set:function(x){x=x.toString(),f=this instanceof Bs?x:x.substr(0,1)==="("?yx(x.substr(1,x.length-2)):yx(x)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Bs?yx(f.substr(1,f.length-1)):f},set:function(x){x=x.toString(),f=this instanceof Bs?"/"+x:x}});var m=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(m)return m},set:function(x){this.V=x}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(m)return this instanceof Bs?m:J_(m,this.objId,this.scope)},set:function(x){x=x.toString(),m=this instanceof Bs?x:x.substr(0,1)==="("?yx(x.substr(1,x.length-2)):yx(x)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Bs?yx(m.substr(1,m.length-1)):m},set:function(x){x=x.toString(),m=this instanceof Bs?"/"+x:x}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var v,p=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return p},set:function(x){x=!!x,p=x}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(v)return v},set:function(x){v=x}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!ps(this.Ff,1)},set:function(x){x?this.Ff=gs(this.Ff,1):this.Ff=vs(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!ps(this.Ff,2)},set:function(x){x?this.Ff=gs(this.Ff,2):this.Ff=vs(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!ps(this.Ff,3)},set:function(x){x?this.Ff=gs(this.Ff,3):this.Ff=vs(this.Ff,3)}});var g=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(g!==null)return g},set:function(x){if([0,1,2].indexOf(x)===-1)throw new Error('Invalid value "'+x+'" for attribute Q supplied.');g=x}}),Object.defineProperty(this,"textAlign",{get:function(){var x;switch(g){case 0:default:x="left";break;case 1:x="center";break;case 2:x="right"}return x},configurable:!0,enumerable:!0,set:function(x){switch(x){case"right":case 2:g=2;break;case"center":case 1:g=1;break;case"left":case 0:default:g=0}}})};Ga(Sc,fd);var Yg=function(){Sc.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var t=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return t},set:function(n){t=n}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return ase(e,this.objId,this.scope)},set:function(n){var r,i;i=[],typeof(r=n)=="string"&&(i=function(a,o,l){l||(l=1);for(var c,d=[];c=o.exec(a);)d.push(c[l]);return d}(r,/\((.*?)\)/g)),e=i}}),this.getOptions=function(){return e},this.setOptions=function(n){e=n,this.sort&&e.sort()},this.addOption=function(n){n=(n=n||"").toString(),e.push(n),this.sort&&e.sort()},this.removeOption=function(n,r){for(r=r||!1,n=(n=n||"").toString();e.indexOf(n)!==-1&&(e.splice(e.indexOf(n),1),r!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!ps(this.Ff,18)},set:function(n){n?this.Ff=gs(this.Ff,18):this.Ff=vs(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!ps(this.Ff,19)},set:function(n){this.combo===!0&&(n?this.Ff=gs(this.Ff,19):this.Ff=vs(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!ps(this.Ff,20)},set:function(n){n?(this.Ff=gs(this.Ff,20),e.sort()):this.Ff=vs(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!ps(this.Ff,22)},set:function(n){n?this.Ff=gs(this.Ff,22):this.Ff=vs(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!ps(this.Ff,23)},set:function(n){n?this.Ff=gs(this.Ff,23):this.Ff=vs(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!ps(this.Ff,27)},set:function(n){n?this.Ff=gs(this.Ff,27):this.Ff=vs(this.Ff,27)}}),this.hasAppearanceStream=!1};Ga(Yg,Sc);var Xg=function(){Yg.call(this),this.fontName="helvetica",this.combo=!1};Ga(Xg,Yg);var Zg=function(){Xg.call(this),this.combo=!0};Ga(Zg,Xg);var oj=function(){Zg.call(this),this.edit=!0};Ga(oj,Zg);var Bs=function(){Sc.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!ps(this.Ff,15)},set:function(n){n?this.Ff=gs(this.Ff,15):this.Ff=vs(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!ps(this.Ff,16)},set:function(n){n?this.Ff=gs(this.Ff,16):this.Ff=vs(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!ps(this.Ff,17)},set:function(n){n?this.Ff=gs(this.Ff,17):this.Ff=vs(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!ps(this.Ff,26)},set:function(n){n?this.Ff=gs(this.Ff,26):this.Ff=vs(this.Ff,26)}});var t,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var n=function(a){return a};if(this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var r,i=[];for(r in i.push("<<"),e)i.push("/"+r+" ("+Iv(n(e[r]))+")");return i.push(">>"),i.join(`
`)}},set:function(n){Ln(n)==="object"&&(e=n)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(n){typeof n=="string"&&(e.CA=n)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(n){t="/"+n}})};Ga(Bs,Sc);var lj=function(){Bs.call(this),this.pushButton=!0};Ga(lj,Bs);var Qg=function(){Bs.call(this),this.radio=!0,this.pushButton=!1;var t=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e!==void 0?e:[]}})};Ga(Qg,Bs);var OP=function(){var t,e;Sc.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return t},set:function(i){t=i}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(i){e=i}});var n,r={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var i=function(l){return l};this.scope&&(i=this.scope.internal.getEncryptor(this.objId));var a,o=[];for(a in o.push("<<"),r)o.push("/"+a+" ("+Iv(i(r[a]))+")");return o.push(">>"),o.join(`
`)},set:function(i){Ln(i)==="object"&&(r=i)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return r.CA||""},set:function(i){typeof i=="string"&&(r.CA=i)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(i){n=i}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(i){n="/"+i}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=Tt.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Ga(OP,Sc),Qg.prototype.setAppearance=function(t){if(!("createAppearanceStream"in t)||!("getCA"in t))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var n=this.Kids[e];n.appearanceStreamContent=t.createAppearanceStream(n.optionName),n.caption=t.getCA()}},Qg.prototype.createOption=function(t){var e=new OP;return e.Parent=this,e.optionName=t,this.Kids.push(e),OCe.call(this.scope,e),e};var cj=function(){Bs.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=Tt.CheckBox.createAppearanceStream()};Ga(cj,Bs);var am=function(){Sc.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!ps(this.Ff,13)},set:function(e){e?this.Ff=gs(this.Ff,13):this.Ff=vs(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!ps(this.Ff,21)},set:function(e){e?this.Ff=gs(this.Ff,21):this.Ff=vs(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!ps(this.Ff,23)},set:function(e){e?this.Ff=gs(this.Ff,23):this.Ff=vs(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!ps(this.Ff,24)},set:function(e){e?this.Ff=gs(this.Ff,24):this.Ff=vs(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!ps(this.Ff,25)},set:function(e){e?this.Ff=gs(this.Ff,25):this.Ff=vs(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!ps(this.Ff,26)},set:function(e){e?this.Ff=gs(this.Ff,26):this.Ff=vs(this.Ff,26)}});var t=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return t},set:function(e){Number.isInteger(e)&&(t=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Ga(am,Sc);var dj=function(){am.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!ps(this.Ff,14)},set:function(t){t?this.Ff=gs(this.Ff,14):this.Ff=vs(this.Ff,14)}}),this.password=!0};Ga(dj,am);var Tt={CheckBox:{createAppearanceStream:function(){return{N:{On:Tt.CheckBox.YesNormal},D:{On:Tt.CheckBox.YesPushDown,Off:Tt.CheckBox.OffPushDown}}},YesPushDown:function(t){var e=zc(t);e.scope=t.scope;var n=[],r=t.scope.internal.getFont(t.fontName,t.fontStyle).id,i=t.scope.__private__.encodeColorString(t.color),a=LM(t,t.caption);return n.push("0.749023 g"),n.push("0 0 "+sn(Tt.internal.getWidth(t))+" "+sn(Tt.internal.getHeight(t))+" re"),n.push("f"),n.push("BMC"),n.push("q"),n.push("0 0 1 rg"),n.push("/"+r+" "+sn(a.fontSize)+" Tf "+i),n.push("BT"),n.push(a.text),n.push("ET"),n.push("Q"),n.push("EMC"),e.stream=n.join(`
`),e},YesNormal:function(t){var e=zc(t);e.scope=t.scope;var n=t.scope.internal.getFont(t.fontName,t.fontStyle).id,r=t.scope.__private__.encodeColorString(t.color),i=[],a=Tt.internal.getHeight(t),o=Tt.internal.getWidth(t),l=LM(t,t.caption);return i.push("1 g"),i.push("0 0 "+sn(o)+" "+sn(a)+" re"),i.push("f"),i.push("q"),i.push("0 0 1 rg"),i.push("0 0 "+sn(o-1)+" "+sn(a-1)+" re"),i.push("W"),i.push("n"),i.push("0 g"),i.push("BT"),i.push("/"+n+" "+sn(l.fontSize)+" Tf "+r),i.push(l.text),i.push("ET"),i.push("Q"),e.stream=i.join(`
`),e},OffPushDown:function(t){var e=zc(t);e.scope=t.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+sn(Tt.internal.getWidth(t))+" "+sn(Tt.internal.getHeight(t))+" re"),n.push("f"),e.stream=n.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(t){var e={D:{Off:Tt.RadioButton.Circle.OffPushDown},N:{}};return e.N[t]=Tt.RadioButton.Circle.YesNormal,e.D[t]=Tt.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(t){var e=zc(t);e.scope=t.scope;var n=[],r=Tt.internal.getWidth(t)<=Tt.internal.getHeight(t)?Tt.internal.getWidth(t)/4:Tt.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var i=Tt.internal.Bezier_C,a=Number((r*i).toFixed(5));return n.push("q"),n.push("1 0 0 1 "+_h(Tt.internal.getWidth(t)/2)+" "+_h(Tt.internal.getHeight(t)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+a+" "+a+" "+r+" 0 "+r+" c"),n.push("-"+a+" "+r+" -"+r+" "+a+" -"+r+" 0 c"),n.push("-"+r+" -"+a+" -"+a+" -"+r+" 0 -"+r+" c"),n.push(a+" -"+r+" "+r+" -"+a+" "+r+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e},YesPushDown:function(t){var e=zc(t);e.scope=t.scope;var n=[],r=Tt.internal.getWidth(t)<=Tt.internal.getHeight(t)?Tt.internal.getWidth(t)/4:Tt.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),a=Number((i*Tt.internal.Bezier_C).toFixed(5)),o=Number((r*Tt.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+_h(Tt.internal.getWidth(t)/2)+" "+_h(Tt.internal.getHeight(t)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+a+" "+a+" "+i+" 0 "+i+" c"),n.push("-"+a+" "+i+" -"+i+" "+a+" -"+i+" 0 c"),n.push("-"+i+" -"+a+" -"+a+" -"+i+" 0 -"+i+" c"),n.push(a+" -"+i+" "+i+" -"+a+" "+i+" 0 c"),n.push("f"),n.push("Q"),n.push("0 g"),n.push("q"),n.push("1 0 0 1 "+_h(Tt.internal.getWidth(t)/2)+" "+_h(Tt.internal.getHeight(t)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+o+" "+o+" "+r+" 0 "+r+" c"),n.push("-"+o+" "+r+" -"+r+" "+o+" -"+r+" 0 c"),n.push("-"+r+" -"+o+" -"+o+" -"+r+" 0 -"+r+" c"),n.push(o+" -"+r+" "+r+" -"+o+" "+r+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e},OffPushDown:function(t){var e=zc(t);e.scope=t.scope;var n=[],r=Tt.internal.getWidth(t)<=Tt.internal.getHeight(t)?Tt.internal.getWidth(t)/4:Tt.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),a=Number((i*Tt.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+_h(Tt.internal.getWidth(t)/2)+" "+_h(Tt.internal.getHeight(t)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+a+" "+a+" "+i+" 0 "+i+" c"),n.push("-"+a+" "+i+" -"+i+" "+a+" -"+i+" 0 c"),n.push("-"+i+" -"+a+" -"+a+" -"+i+" 0 -"+i+" c"),n.push(a+" -"+i+" "+i+" -"+a+" "+i+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e}},Cross:{createAppearanceStream:function(t){var e={D:{Off:Tt.RadioButton.Cross.OffPushDown},N:{}};return e.N[t]=Tt.RadioButton.Cross.YesNormal,e.D[t]=Tt.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(t){var e=zc(t);e.scope=t.scope;var n=[],r=Tt.internal.calculateCross(t);return n.push("q"),n.push("1 1 "+sn(Tt.internal.getWidth(t)-2)+" "+sn(Tt.internal.getHeight(t)-2)+" re"),n.push("W"),n.push("n"),n.push(sn(r.x1.x)+" "+sn(r.x1.y)+" m"),n.push(sn(r.x2.x)+" "+sn(r.x2.y)+" l"),n.push(sn(r.x4.x)+" "+sn(r.x4.y)+" m"),n.push(sn(r.x3.x)+" "+sn(r.x3.y)+" l"),n.push("s"),n.push("Q"),e.stream=n.join(`
`),e},YesPushDown:function(t){var e=zc(t);e.scope=t.scope;var n=Tt.internal.calculateCross(t),r=[];return r.push("0.749023 g"),r.push("0 0 "+sn(Tt.internal.getWidth(t))+" "+sn(Tt.internal.getHeight(t))+" re"),r.push("f"),r.push("q"),r.push("1 1 "+sn(Tt.internal.getWidth(t)-2)+" "+sn(Tt.internal.getHeight(t)-2)+" re"),r.push("W"),r.push("n"),r.push(sn(n.x1.x)+" "+sn(n.x1.y)+" m"),r.push(sn(n.x2.x)+" "+sn(n.x2.y)+" l"),r.push(sn(n.x4.x)+" "+sn(n.x4.y)+" m"),r.push(sn(n.x3.x)+" "+sn(n.x3.y)+" l"),r.push("s"),r.push("Q"),e.stream=r.join(`
`),e},OffPushDown:function(t){var e=zc(t);e.scope=t.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+sn(Tt.internal.getWidth(t))+" "+sn(Tt.internal.getHeight(t))+" re"),n.push("f"),e.stream=n.join(`
`),e}}},createDefaultAppearanceStream:function(t){var e=t.scope.internal.getFont(t.fontName,t.fontStyle).id,n=t.scope.__private__.encodeColorString(t.color);return"/"+e+" "+t.fontSize+" Tf "+n}};Tt.internal={Bezier_C:.551915024494,calculateCross:function(t){var e=Tt.internal.getWidth(t),n=Tt.internal.getHeight(t),r=Math.min(e,n);return{x1:{x:(e-r)/2,y:(n-r)/2+r},x2:{x:(e-r)/2+r,y:(n-r)/2},x3:{x:(e-r)/2,y:(n-r)/2},x4:{x:(e-r)/2+r,y:(n-r)/2+r}}}},Tt.internal.getWidth=function(t){var e=0;return Ln(t)==="object"&&(e=DV(t.Rect[2])),e},Tt.internal.getHeight=function(t){var e=0;return Ln(t)==="object"&&(e=DV(t.Rect[3])),e};var OCe=es.addField=function(t){if(_Ce(this,t),!(t instanceof Sc))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=t).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),t.page=t.scope.internal.getCurrentPageInfo().pageNumber,this};es.AcroFormChoiceField=Yg,es.AcroFormListBox=Xg,es.AcroFormComboBox=Zg,es.AcroFormEditBox=oj,es.AcroFormButton=Bs,es.AcroFormPushButton=lj,es.AcroFormRadioButton=Qg,es.AcroFormCheckBox=cj,es.AcroFormTextField=am,es.AcroFormPasswordField=dj,es.AcroFormAppearance=Tt,es.AcroForm={ChoiceField:Yg,ListBox:Xg,ComboBox:Zg,EditBox:oj,Button:Bs,PushButton:lj,RadioButton:Qg,CheckBox:cj,TextField:am,PasswordField:dj,Appearance:Tt},Bt.AcroForm={ChoiceField:Yg,ListBox:Xg,ComboBox:Zg,EditBox:oj,Button:Bs,PushButton:lj,RadioButton:Qg,CheckBox:cj,TextField:am,PasswordField:dj,Appearance:Tt};var LCe=Bt.AcroForm;function cse(t){return t.reduce(function(e,n,r){return e[n]=r,e},{})}(function(t){t.__addimage__={};var e="UNKNOWN",n={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},r=t.__addimage__.getImageFileTypeByImageData=function(D,P){var R,_,M,U,F,z=e;if((P=P||e)==="RGBA"||D.data!==void 0&&D.data instanceof Uint8ClampedArray&&"height"in D&&"width"in D)return"RGBA";if(E(D))for(F in n)for(M=n[F],R=0;R<M.length;R+=1){for(U=!0,_=0;_<M[R].length;_+=1)if(M[R][_]!==void 0&&M[R][_]!==D[_]){U=!1;break}if(U===!0){z=F;break}}else for(F in n)for(M=n[F],R=0;R<M.length;R+=1){for(U=!0,_=0;_<M[R].length;_+=1)if(M[R][_]!==void 0&&M[R][_]!==D.charCodeAt(_)){U=!1;break}if(U===!0){z=F;break}}return z===e&&P!==e&&(z=P),z},i=function D(P){for(var R=this.internal.write,_=this.internal.putStream,M=(0,this.internal.getFilters)();M.indexOf("FlateEncode")!==-1;)M.splice(M.indexOf("FlateEncode"),1);P.objectId=this.internal.newObject();var U=[];if(U.push({key:"Type",value:"/XObject"}),U.push({key:"Subtype",value:"/Image"}),U.push({key:"Width",value:P.width}),U.push({key:"Height",value:P.height}),P.colorSpace===g.INDEXED?U.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(P.palette.length/3-1)+" "+("sMask"in P&&P.sMask!==void 0?P.objectId+2:P.objectId+1)+" 0 R]"}):(U.push({key:"ColorSpace",value:"/"+P.colorSpace}),P.colorSpace===g.DEVICE_CMYK&&U.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),U.push({key:"BitsPerComponent",value:P.bitsPerComponent}),"decodeParameters"in P&&P.decodeParameters!==void 0&&U.push({key:"DecodeParms",value:"<<"+P.decodeParameters+">>"}),"transparency"in P&&Array.isArray(P.transparency)){for(var F="",z=0,H=P.transparency.length;z<H;z++)F+=P.transparency[z]+" "+P.transparency[z]+" ";U.push({key:"Mask",value:"["+F+"]"})}P.sMask!==void 0&&U.push({key:"SMask",value:P.objectId+1+" 0 R"});var W=P.filter!==void 0?["/"+P.filter]:void 0;if(_({data:P.data,additionalKeyValues:U,alreadyAppliedFilters:W,objectId:P.objectId}),R("endobj"),"sMask"in P&&P.sMask!==void 0){var $="/Predictor "+P.predictor+" /Colors 1 /BitsPerComponent "+P.bitsPerComponent+" /Columns "+P.width,L={width:P.width,height:P.height,colorSpace:"DeviceGray",bitsPerComponent:P.bitsPerComponent,decodeParameters:$,data:P.sMask};"filter"in P&&(L.filter=P.filter),D.call(this,L)}if(P.colorSpace===g.INDEXED){var q=this.internal.newObject();_({data:j(new Uint8Array(P.palette)),objectId:q}),R("endobj")}},a=function(){var D=this.internal.collections.addImage_images;for(var P in D)i.call(this,D[P])},o=function(){var D,P=this.internal.collections.addImage_images,R=this.internal.write;for(var _ in P)R("/I"+(D=P[_]).index,D.objectId,"0","R")},l=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",a),this.internal.events.subscribe("putXobjectDict",o))},c=function(){var D=this.internal.collections.addImage_images;return l.call(this),D},d=function(){return Object.keys(this.internal.collections.addImage_images).length},u=function(D){return typeof t["process"+D.toUpperCase()]=="function"},h=function(D){return Ln(D)==="object"&&D.nodeType===1},f=function(D,P){if(D.nodeName==="IMG"&&D.hasAttribute("src")){var R=""+D.getAttribute("src");if(R.indexOf("data:image/")===0)return aj(unescape(R).split("base64,").pop());var _=t.loadFile(R,!0);if(_!==void 0)return _}if(D.nodeName==="CANVAS"){if(D.width===0||D.height===0)throw new Error("Given canvas must have data. Canvas width: "+D.width+", height: "+D.height);var M;switch(P){case"PNG":M="image/png";break;case"WEBP":M="image/webp";break;case"JPEG":case"JPG":default:M="image/jpeg"}return aj(D.toDataURL(M,1).split("base64,").pop())}},m=function(D){var P=this.internal.collections.addImage_images;if(P){for(var R in P)if(D===P[R].alias)return P[R]}},v=function(D,P,R){return D||P||(D=-96,P=-96),D<0&&(D=-1*R.width*72/D/this.internal.scaleFactor),P<0&&(P=-1*R.height*72/P/this.internal.scaleFactor),D===0&&(D=P*R.width/R.height),P===0&&(P=D*R.height/R.width),[D,P]},p=function(D,P,R,_,M,U){var F=v.call(this,R,_,M),z=this.internal.getCoordinateString,H=this.internal.getVerticalCoordinateString,W=c.call(this);if(R=F[0],_=F[1],W[M.index]=M,U){U*=Math.PI/180;var $=Math.cos(U),L=Math.sin(U),q=function(J){return J.toFixed(4)},Y=[q($),q(L),q(-1*L),q($),0,0,"cm"]}this.internal.write("q"),U?(this.internal.write([1,"0","0",1,z(D),H(P+_),"cm"].join(" ")),this.internal.write(Y.join(" ")),this.internal.write([z(R),"0","0",z(_),"0","0","cm"].join(" "))):this.internal.write([z(R),"0","0",z(_),z(D),H(P+_),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+M.index+" Do"),this.internal.write("Q")},g=t.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};t.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var x=t.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},y=t.__addimage__.sHashCode=function(D){var P,R,_=0;if(typeof D=="string")for(R=D.length,P=0;P<R;P++)_=(_<<5)-_+D.charCodeAt(P),_|=0;else if(E(D))for(R=D.byteLength/2,P=0;P<R;P++)_=(_<<5)-_+D[P],_|=0;return _},b=t.__addimage__.validateStringAsBase64=function(D){(D=D||"").toString().trim();var P=!0;return D.length===0&&(P=!1),D.length%4!=0&&(P=!1),/^[A-Za-z0-9+/]+$/.test(D.substr(0,D.length-2))===!1&&(P=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(D.substr(-2))===!1&&(P=!1),P},w=t.__addimage__.extractImageFromDataUrl=function(D){var P=(D=D||"").split("base64,"),R=null;if(P.length===2){var _=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(P[0]);Array.isArray(_)&&(R={mimeType:_[1],charset:_[2],data:P[1]})}return R},N=t.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};t.__addimage__.isArrayBuffer=function(D){return N()&&D instanceof ArrayBuffer};var E=t.__addimage__.isArrayBufferView=function(D){return N()&&typeof Uint32Array<"u"&&(D instanceof Int8Array||D instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&D instanceof Uint8ClampedArray||D instanceof Int16Array||D instanceof Uint16Array||D instanceof Int32Array||D instanceof Uint32Array||D instanceof Float32Array||D instanceof Float64Array)},C=t.__addimage__.binaryStringToUint8Array=function(D){for(var P=D.length,R=new Uint8Array(P),_=0;_<P;_++)R[_]=D.charCodeAt(_);return R},j=t.__addimage__.arrayBufferToBinaryString=function(D){for(var P="",R=E(D)?D:new Uint8Array(D),_=0;_<R.length;_+=8192)P+=String.fromCharCode.apply(null,R.subarray(_,_+8192));return P};t.addImage=function(){var D,P,R,_,M,U,F,z,H;if(typeof arguments[1]=="number"?(P=e,R=arguments[1],_=arguments[2],M=arguments[3],U=arguments[4],F=arguments[5],z=arguments[6],H=arguments[7]):(P=arguments[1],R=arguments[2],_=arguments[3],M=arguments[4],U=arguments[5],F=arguments[6],z=arguments[7],H=arguments[8]),Ln(D=arguments[0])==="object"&&!h(D)&&"imageData"in D){var W=D;D=W.imageData,P=W.format||P||e,R=W.x||R||0,_=W.y||_||0,M=W.w||W.width||M,U=W.h||W.height||U,F=W.alias||F,z=W.compression||z,H=W.rotation||W.angle||H}var $=this.internal.getFilters();if(z===void 0&&$.indexOf("FlateEncode")!==-1&&(z="SLOW"),isNaN(R)||isNaN(_))throw new Error("Invalid coordinates passed to jsPDF.addImage");l.call(this);var L=I.call(this,D,P,F,z);return p.call(this,R,_,M,U,L,H),this};var I=function(D,P,R,_){var M,U,F;if(typeof D=="string"&&r(D)===e){D=unescape(D);var z=k(D,!1);(z!==""||(z=t.loadFile(D,!0))!==void 0)&&(D=z)}if(h(D)&&(D=f(D,P)),P=r(D,P),!u(P))throw new Error("addImage does not support files of type '"+P+"', please ensure that a plugin for '"+P+"' support is added.");if(((F=R)==null||F.length===0)&&(R=function(H){return typeof H=="string"||E(H)?y(H):E(H.data)?y(H.data):null}(D)),(M=m.call(this,R))||(N()&&(D instanceof Uint8Array||P==="RGBA"||(U=D,D=C(D))),M=this["process"+P.toUpperCase()](D,d.call(this),R,function(H){return H&&typeof H=="string"&&(H=H.toUpperCase()),H in t.image_compression?H:x.NONE}(_),U)),!M)throw new Error("An unknown error occurred whilst processing the image.");return M},k=t.__addimage__.convertBase64ToBinaryString=function(D,P){var R;P=typeof P!="boolean"||P;var _,M="";if(typeof D=="string"){_=(R=w(D))!==null?R.data:D;try{M=aj(_)}catch(U){if(P)throw b(_)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+U.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return M};t.getImageProperties=function(D){var P,R,_="";if(h(D)&&(D=f(D)),typeof D=="string"&&r(D)===e&&((_=k(D,!1))===""&&(_=t.loadFile(D)||""),D=_),R=r(D),!u(R))throw new Error("addImage does not support files of type '"+R+"', please ensure that a plugin for '"+R+"' support is added.");if(!N()||D instanceof Uint8Array||(D=C(D)),!(P=this["process"+R.toUpperCase()](D)))throw new Error("An unknown error occurred whilst processing the image");return P.fileType=R,P}})(Bt.API),function(t){var e=function(n){if(n!==void 0&&n!="")return!0};Bt.API.events.push(["addPage",function(n){this.internal.getPageInfo(n.pageNumber).pageContext.annotations=[]}]),t.events.push(["putPage",function(n){for(var r,i,a,o=this.internal.getCoordinateString,l=this.internal.getVerticalCoordinateString,c=this.internal.getPageInfoByObjId(n.objId),d=n.pageContext.annotations,u=!1,h=0;h<d.length&&!u;h++)switch((r=d[h]).type){case"link":(e(r.options.url)||e(r.options.pageNumber))&&(u=!0);break;case"reference":case"text":case"freetext":u=!0}if(u!=0){this.internal.write("/Annots [");for(var f=0;f<d.length;f++){r=d[f];var m=this.internal.pdfEscape,v=this.internal.getEncryptor(n.objId);switch(r.type){case"reference":this.internal.write(" "+r.object.objId+" 0 R ");break;case"text":var p=this.internal.newAdditionalObject(),g=this.internal.newAdditionalObject(),x=this.internal.getEncryptor(p.objId),y=r.title||"Note";a="<</Type /Annot /Subtype /Text "+(i="/Rect ["+o(r.bounds.x)+" "+l(r.bounds.y+r.bounds.h)+" "+o(r.bounds.x+r.bounds.w)+" "+l(r.bounds.y)+"] ")+"/Contents ("+m(x(r.contents))+")",a+=" /Popup "+g.objId+" 0 R",a+=" /P "+c.objId+" 0 R",a+=" /T ("+m(x(y))+") >>",p.content=a;var b=p.objId+" 0 R";a="<</Type /Annot /Subtype /Popup "+(i="/Rect ["+o(r.bounds.x+30)+" "+l(r.bounds.y+r.bounds.h)+" "+o(r.bounds.x+r.bounds.w+30)+" "+l(r.bounds.y)+"] ")+" /Parent "+b,r.open&&(a+=" /Open true"),a+=" >>",g.content=a,this.internal.write(p.objId,"0 R",g.objId,"0 R");break;case"freetext":i="/Rect ["+o(r.bounds.x)+" "+l(r.bounds.y)+" "+o(r.bounds.x+r.bounds.w)+" "+l(r.bounds.y+r.bounds.h)+"] ";var w=r.color||"#000000";a="<</Type /Annot /Subtype /FreeText "+i+"/Contents ("+m(v(r.contents))+")",a+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+w+")",a+=" /Border [0 0 0]",a+=" >>",this.internal.write(a);break;case"link":if(r.options.name){var N=this.annotations._nameMap[r.options.name];r.options.pageNumber=N.page,r.options.top=N.y}else r.options.top||(r.options.top=0);if(i="/Rect ["+r.finalBounds.x+" "+r.finalBounds.y+" "+r.finalBounds.w+" "+r.finalBounds.h+"] ",a="",r.options.url)a="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /A <</S /URI /URI ("+m(v(r.options.url))+") >>";else if(r.options.pageNumber)switch(a="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(r.options.pageNumber).objId+" 0 R",r.options.magFactor=r.options.magFactor||"XYZ",r.options.magFactor){case"Fit":a+=" /Fit]";break;case"FitH":a+=" /FitH "+r.options.top+"]";break;case"FitV":r.options.left=r.options.left||0,a+=" /FitV "+r.options.left+"]";break;case"XYZ":default:var E=l(r.options.top);r.options.left=r.options.left||0,r.options.zoom===void 0&&(r.options.zoom=0),a+=" /XYZ "+r.options.left+" "+E+" "+r.options.zoom+"]"}a!=""&&(a+=" >>",this.internal.write(a))}}this.internal.write("]")}}]),t.createAnnotation=function(n){var r=this.internal.getCurrentPageInfo();switch(n.type){case"link":this.link(n.bounds.x,n.bounds.y,n.bounds.w,n.bounds.h,n);break;case"text":case"freetext":r.pageContext.annotations.push(n)}},t.link=function(n,r,i,a,o){var l=this.internal.getCurrentPageInfo(),c=this.internal.getCoordinateString,d=this.internal.getVerticalCoordinateString;l.pageContext.annotations.push({finalBounds:{x:c(n),y:d(r),w:c(n+i),h:d(r+a)},options:o,type:"link"})},t.textWithLink=function(n,r,i,a){var o,l,c=this.getTextWidth(n),d=this.internal.getLineHeight()/this.internal.scaleFactor;if(a.maxWidth!==void 0){l=a.maxWidth;var u=this.splitTextToSize(n,l).length;o=Math.ceil(d*u)}else l=c,o=d;return this.text(n,r,i,a),i+=.2*d,a.align==="center"&&(r-=c/2),a.align==="right"&&(r-=c),this.link(r,i-d,l,o,a),c},t.getTextWidth=function(n){var r=this.internal.getFontSize();return this.getStringUnitWidth(n)*r/this.internal.scaleFactor}}(Bt.API),function(t){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},n={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},r={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},i=[1570,1571,1573,1575];t.__arabicParser__={};var a=t.__arabicParser__.isInArabicSubstitutionA=function(p){return e[p.charCodeAt(0)]!==void 0},o=t.__arabicParser__.isArabicLetter=function(p){return typeof p=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(p)},l=t.__arabicParser__.isArabicEndLetter=function(p){return o(p)&&a(p)&&e[p.charCodeAt(0)].length<=2},c=t.__arabicParser__.isArabicAlfLetter=function(p){return o(p)&&i.indexOf(p.charCodeAt(0))>=0};t.__arabicParser__.arabicLetterHasIsolatedForm=function(p){return o(p)&&a(p)&&e[p.charCodeAt(0)].length>=1};var d=t.__arabicParser__.arabicLetterHasFinalForm=function(p){return o(p)&&a(p)&&e[p.charCodeAt(0)].length>=2};t.__arabicParser__.arabicLetterHasInitialForm=function(p){return o(p)&&a(p)&&e[p.charCodeAt(0)].length>=3};var u=t.__arabicParser__.arabicLetterHasMedialForm=function(p){return o(p)&&a(p)&&e[p.charCodeAt(0)].length==4},h=t.__arabicParser__.resolveLigatures=function(p){var g=0,x=n,y="",b=0;for(g=0;g<p.length;g+=1)x[p.charCodeAt(g)]!==void 0?(b++,typeof(x=x[p.charCodeAt(g)])=="number"&&(y+=String.fromCharCode(x),x=n,b=0),g===p.length-1&&(x=n,y+=p.charAt(g-(b-1)),g-=b-1,b=0)):(x=n,y+=p.charAt(g-b),g-=b,b=0);return y};t.__arabicParser__.isArabicDiacritic=function(p){return p!==void 0&&r[p.charCodeAt(0)]!==void 0};var f=t.__arabicParser__.getCorrectForm=function(p,g,x){return o(p)?a(p)===!1?-1:!d(p)||!o(g)&&!o(x)||!o(x)&&l(g)||l(p)&&!o(g)||l(p)&&c(g)||l(p)&&l(g)?0:u(p)&&o(g)&&!l(g)&&o(x)&&d(x)?3:l(p)||!o(x)?1:2:-1},m=function(p){var g=0,x=0,y=0,b="",w="",N="",E=(p=p||"").split("\\s+"),C=[];for(g=0;g<E.length;g+=1){for(C.push(""),x=0;x<E[g].length;x+=1)b=E[g][x],w=E[g][x-1],N=E[g][x+1],o(b)?(y=f(b,w,N),C[g]+=y!==-1?String.fromCharCode(e[b.charCodeAt(0)][y]):b):C[g]+=b;C[g]=h(C[g])}return C.join(" ")},v=t.__arabicParser__.processArabic=t.processArabic=function(){var p,g=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,x=[];if(Array.isArray(g)){var y=0;for(x=[],y=0;y<g.length;y+=1)Array.isArray(g[y])?x.push([m(g[y][0]),g[y][1],g[y][2]]):x.push([m(g[y])]);p=x}else p=m(g);return typeof arguments[0]=="string"?p:(arguments[0].text=p,arguments[0])};t.events.push(["preProcessText",v])}(Bt.API),Bt.API.autoPrint=function(t){var e;switch((t=t||{}).variant=t.variant||"non-conform",t.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})}return this},function(t){var e=function(){var n=void 0;Object.defineProperty(this,"pdf",{get:function(){return n},set:function(l){n=l}});var r=150;Object.defineProperty(this,"width",{get:function(){return r},set:function(l){r=isNaN(l)||Number.isInteger(l)===!1||l<0?150:l,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=r+1)}});var i=300;Object.defineProperty(this,"height",{get:function(){return i},set:function(l){i=isNaN(l)||Number.isInteger(l)===!1||l<0?300:l,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=i+1)}});var a=[];Object.defineProperty(this,"childNodes",{get:function(){return a},set:function(l){a=l}});var o={};Object.defineProperty(this,"style",{get:function(){return o},set:function(l){o=l}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(n,r){var i;if((n=n||"2d")!=="2d")return null;for(i in r)this.pdf.context2d.hasOwnProperty(i)&&(this.pdf.context2d[i]=r[i]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},t.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}(Bt.API),function(t){var e={left:0,top:0,bottom:0,right:0},n=!1,r=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),i.call(this))},i=function(){this.internal.__cell__.lastCell=new a,this.internal.__cell__.pages=1},a=function(){var c=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return c},set:function(p){c=p}});var d=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return d},set:function(p){d=p}});var u=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return u},set:function(p){u=p}});var h=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return h},set:function(p){h=p}});var f=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return f},set:function(p){f=p}});var m=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return m},set:function(p){m=p}});var v=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return v},set:function(p){v=p}}),this};a.prototype.clone=function(){return new a(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},a.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},t.setHeaderFunction=function(c){return r.call(this),this.internal.__cell__.headerFunction=typeof c=="function"?c:void 0,this},t.getTextDimensions=function(c,d){r.call(this);var u=(d=d||{}).fontSize||this.getFontSize(),h=d.font||this.getFont(),f=d.scaleFactor||this.internal.scaleFactor,m=0,v=0,p=0,g=this;if(!Array.isArray(c)&&typeof c!="string"){if(typeof c!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");c=String(c)}var x=d.maxWidth;x>0?typeof c=="string"?c=this.splitTextToSize(c,x):Object.prototype.toString.call(c)==="[object Array]"&&(c=c.reduce(function(b,w){return b.concat(g.splitTextToSize(w,x))},[])):c=Array.isArray(c)?c:[c];for(var y=0;y<c.length;y++)m<(p=this.getStringUnitWidth(c[y],{font:h})*u)&&(m=p);return m!==0&&(v=c.length),{w:m/=f,h:Math.max((v*u*this.getLineHeightFactor()-u*(this.getLineHeightFactor()-1))/f,0)}},t.cellAddPage=function(){r.call(this),this.addPage();var c=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new a(c.left,c.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var o=t.cell=function(){var c;c=arguments[0]instanceof a?arguments[0]:new a(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),r.call(this);var d=this.internal.__cell__.lastCell,u=this.internal.__cell__.padding,h=this.internal.__cell__.margins||e,f=this.internal.__cell__.tableHeaderRow,m=this.internal.__cell__.printHeaders;return d.lineNumber!==void 0&&(d.lineNumber===c.lineNumber?(c.x=(d.x||0)+(d.width||0),c.y=d.y||0):d.y+d.height+c.height+h.bottom>this.getPageHeight()?(this.cellAddPage(),c.y=h.top,m&&f&&(this.printHeaderRow(c.lineNumber,!0),c.y+=f[0].height)):c.y=d.y+d.height||c.y),c.text[0]!==void 0&&(this.rect(c.x,c.y,c.width,c.height,n===!0?"FD":void 0),c.align==="right"?this.text(c.text,c.x+c.width-u,c.y+u,{align:"right",baseline:"top"}):c.align==="center"?this.text(c.text,c.x+c.width/2,c.y+u,{align:"center",baseline:"top",maxWidth:c.width-u-u}):this.text(c.text,c.x+u,c.y+u,{align:"left",baseline:"top",maxWidth:c.width-u-u})),this.internal.__cell__.lastCell=c,this};t.table=function(c,d,u,h,f){if(r.call(this),!u)throw new Error("No data for PDF table.");var m,v,p,g,x=[],y=[],b=[],w={},N={},E=[],C=[],j=(f=f||{}).autoSize||!1,I=f.printHeaders!==!1,k=f.css&&f.css["font-size"]!==void 0?16*f.css["font-size"]:f.fontSize||12,D=f.margins||Object.assign({width:this.getPageWidth()},e),P=typeof f.padding=="number"?f.padding:3,R=f.headerBackgroundColor||"#c8c8c8",_=f.headerTextColor||"#000";if(i.call(this),this.internal.__cell__.printHeaders=I,this.internal.__cell__.margins=D,this.internal.__cell__.table_font_size=k,this.internal.__cell__.padding=P,this.internal.__cell__.headerBackgroundColor=R,this.internal.__cell__.headerTextColor=_,this.setFontSize(k),h==null)y=x=Object.keys(u[0]),b=x.map(function(){return"left"});else if(Array.isArray(h)&&Ln(h[0])==="object")for(x=h.map(function(W){return W.name}),y=h.map(function(W){return W.prompt||W.name||""}),b=h.map(function(W){return W.align||"left"}),m=0;m<h.length;m+=1)N[h[m].name]=h[m].width*(19.049976/25.4);else Array.isArray(h)&&typeof h[0]=="string"&&(y=x=h,b=x.map(function(){return"left"}));if(j||Array.isArray(h)&&typeof h[0]=="string")for(m=0;m<x.length;m+=1){for(w[g=x[m]]=u.map(function(W){return W[g]}),this.setFont(void 0,"bold"),E.push(this.getTextDimensions(y[m],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),v=w[g],this.setFont(void 0,"normal"),p=0;p<v.length;p+=1)E.push(this.getTextDimensions(v[p],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);N[g]=Math.max.apply(null,E)+P+P,E=[]}if(I){var M={};for(m=0;m<x.length;m+=1)M[x[m]]={},M[x[m]].text=y[m],M[x[m]].align=b[m];var U=l.call(this,M,N);C=x.map(function(W){return new a(c,d,N[W],U,M[W].text,void 0,M[W].align)}),this.setTableHeaderRow(C),this.printHeaderRow(1,!1)}var F=h.reduce(function(W,$){return W[$.name]=$.align,W},{});for(m=0;m<u.length;m+=1){"rowStart"in f&&f.rowStart instanceof Function&&f.rowStart({row:m,data:u[m]},this);var z=l.call(this,u[m],N);for(p=0;p<x.length;p+=1){var H=u[m][x[p]];"cellStart"in f&&f.cellStart instanceof Function&&f.cellStart({row:m,col:p,data:H},this),o.call(this,new a(c,d,N[x[p]],z,H,m+2,F[x[p]]))}}return this.internal.__cell__.table_x=c,this.internal.__cell__.table_y=d,this};var l=function(c,d){var u=this.internal.__cell__.padding,h=this.internal.__cell__.table_font_size,f=this.internal.scaleFactor;return Object.keys(c).map(function(m){var v=c[m];return this.splitTextToSize(v.hasOwnProperty("text")?v.text:v,d[m]-u-u)},this).map(function(m){return this.getLineHeightFactor()*m.length*h/f+u+u},this).reduce(function(m,v){return Math.max(m,v)},0)};t.setTableHeaderRow=function(c){r.call(this),this.internal.__cell__.tableHeaderRow=c},t.printHeaderRow=function(c,d){if(r.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var u;if(n=!0,typeof this.internal.__cell__.headerFunction=="function"){var h=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new a(h[0],h[1],h[2],h[3],void 0,-1)}this.setFont(void 0,"bold");for(var f=[],m=0;m<this.internal.__cell__.tableHeaderRow.length;m+=1){u=this.internal.__cell__.tableHeaderRow[m].clone(),d&&(u.y=this.internal.__cell__.margins.top||0,f.push(u)),u.lineNumber=c;var v=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),o.call(this,u),this.setTextColor(v)}f.length>0&&this.setTableHeaderRow(f),this.setFont(void 0,"normal"),n=!1}}(Bt.API);var dse={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},use=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],RM=cse(use),hse=[100,200,300,400,500,600,700,800,900],RCe=cse(hse);function MM(t){var e=t.family.replace(/"|'/g,"").toLowerCase(),n=function(a){return dse[a=a||"normal"]?a:"normal"}(t.style),r=function(a){if(!a)return 400;if(typeof a=="number")return a>=100&&a<=900&&a%100==0?a:400;if(/^\d00$/.test(a))return parseInt(a);switch(a){case"bold":return 700;case"normal":default:return 400}}(t.weight),i=function(a){return typeof RM[a=a||"normal"]=="number"?a:"normal"}(t.stretch);return{family:e,style:n,weight:r,stretch:i,src:t.src||[],ref:t.ref||{name:e,style:[i,n,r].join(" ")}}}function kV(t,e,n,r){var i;for(i=n;i>=0&&i<e.length;i+=r)if(t[e[i]])return t[e[i]];for(i=n;i>=0&&i<e.length;i-=r)if(t[e[i]])return t[e[i]]}var MCe={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},_V={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function OV(t){return[t.stretch,t.style,t.weight,t.family].join(" ")}function FCe(t,e,n){for(var r=(n=n||{}).defaultFontFamily||"times",i=Object.assign({},MCe,n.genericFontFamilies||{}),a=null,o=null,l=0;l<e.length;++l)if(i[(a=MM(e[l])).family]&&(a.family=i[a.family]),t.hasOwnProperty(a.family)){o=t[a.family];break}if(!(o=o||t[r]))throw new Error("Could not find a font-family for the rule '"+OV(a)+"' and default family '"+r+"'.");if(o=function(c,d){if(d[c])return d[c];var u=RM[c],h=u<=RM.normal?-1:1,f=kV(d,use,u,h);if(!f)throw new Error("Could not find a matching font-stretch value for "+c);return f}(a.stretch,o),o=function(c,d){if(d[c])return d[c];for(var u=dse[c],h=0;h<u.length;++h)if(d[u[h]])return d[u[h]];throw new Error("Could not find a matching font-style for "+c)}(a.style,o),!(o=function(c,d){if(d[c])return d[c];if(c===400&&d[500])return d[500];if(c===500&&d[400])return d[400];var u=RCe[c],h=kV(d,hse,u,c<400?-1:1);if(!h)throw new Error("Could not find a matching font-weight for value "+c);return h}(a.weight,o)))throw new Error("Failed to resolve a font for the rule '"+OV(a)+"'.");return o}function LV(t){return t.trimLeft()}function $Ce(t,e){for(var n=0;n<t.length;){if(t.charAt(n)===e)return[t.substring(0,n),t.substring(n+1)];n+=1}return null}function BCe(t){var e=t.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],t.substring(e[0].length)]}var yC,RV,MV,eO=["times"];(function(t){var e,n,r,i,a,o,l,c,d,u=function(L){return L=L||{},this.isStrokeTransparent=L.isStrokeTransparent||!1,this.strokeOpacity=L.strokeOpacity||1,this.strokeStyle=L.strokeStyle||"#000000",this.fillStyle=L.fillStyle||"#000000",this.isFillTransparent=L.isFillTransparent||!1,this.fillOpacity=L.fillOpacity||1,this.font=L.font||"10px sans-serif",this.textBaseline=L.textBaseline||"alphabetic",this.textAlign=L.textAlign||"left",this.lineWidth=L.lineWidth||1,this.lineJoin=L.lineJoin||"miter",this.lineCap=L.lineCap||"butt",this.path=L.path||[],this.transform=L.transform!==void 0?L.transform.clone():new c,this.globalCompositeOperation=L.globalCompositeOperation||"normal",this.globalAlpha=L.globalAlpha||1,this.clip_path=L.clip_path||[],this.currentPoint=L.currentPoint||new o,this.miterLimit=L.miterLimit||10,this.lastPoint=L.lastPoint||new o,this.lineDashOffset=L.lineDashOffset||0,this.lineDash=L.lineDash||[],this.margin=L.margin||[0,0,0,0],this.prevPageLastElemOffset=L.prevPageLastElemOffset||0,this.ignoreClearRect=typeof L.ignoreClearRect!="boolean"||L.ignoreClearRect,this};t.events.push(["initialized",function(){this.context2d=new h(this),e=this.internal.f2,n=this.internal.getCoordinateString,r=this.internal.getVerticalCoordinateString,i=this.internal.getHorizontalCoordinate,a=this.internal.getVerticalCoordinate,o=this.internal.Point,l=this.internal.Rectangle,c=this.internal.Matrix,d=new u}]);var h=function(L){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var q=L;Object.defineProperty(this,"pdf",{get:function(){return q}});var Y=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return Y},set:function(De){Y=!!De}});var J=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return J},set:function(De){J=!!De}});var ne=0;Object.defineProperty(this,"posX",{get:function(){return ne},set:function(De){isNaN(De)||(ne=De)}});var re=0;Object.defineProperty(this,"posY",{get:function(){return re},set:function(De){isNaN(De)||(re=De)}}),Object.defineProperty(this,"margin",{get:function(){return d.margin},set:function(De){var ce;typeof De=="number"?ce=[De,De,De,De]:((ce=new Array(4))[0]=De[0],ce[1]=De.length>=2?De[1]:ce[0],ce[2]=De.length>=3?De[2]:ce[0],ce[3]=De.length>=4?De[3]:ce[1]),d.margin=ce}});var pe=!1;Object.defineProperty(this,"autoPaging",{get:function(){return pe},set:function(De){pe=De}});var ue=0;Object.defineProperty(this,"lastBreak",{get:function(){return ue},set:function(De){ue=De}});var xe=[];Object.defineProperty(this,"pageBreaks",{get:function(){return xe},set:function(De){xe=De}}),Object.defineProperty(this,"ctx",{get:function(){return d},set:function(De){De instanceof u&&(d=De)}}),Object.defineProperty(this,"path",{get:function(){return d.path},set:function(De){d.path=De}});var Ne=[];Object.defineProperty(this,"ctxStack",{get:function(){return Ne},set:function(De){Ne=De}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(De){var ce;ce=f(De),this.ctx.fillStyle=ce.style,this.ctx.isFillTransparent=ce.a===0,this.ctx.fillOpacity=ce.a,this.pdf.setFillColor(ce.r,ce.g,ce.b,{a:ce.a}),this.pdf.setTextColor(ce.r,ce.g,ce.b,{a:ce.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(De){var ce=f(De);this.ctx.strokeStyle=ce.style,this.ctx.isStrokeTransparent=ce.a===0,this.ctx.strokeOpacity=ce.a,ce.a===0?this.pdf.setDrawColor(255,255,255):(ce.a,this.pdf.setDrawColor(ce.r,ce.g,ce.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(De){["butt","round","square"].indexOf(De)!==-1&&(this.ctx.lineCap=De,this.pdf.setLineCap(De))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(De){isNaN(De)||(this.ctx.lineWidth=De,this.pdf.setLineWidth(De))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(De){["bevel","round","miter"].indexOf(De)!==-1&&(this.ctx.lineJoin=De,this.pdf.setLineJoin(De))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(De){isNaN(De)||(this.ctx.miterLimit=De,this.pdf.setMiterLimit(De))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(De){this.ctx.textBaseline=De}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(De){["right","end","center","left","start"].indexOf(De)!==-1&&(this.ctx.textAlign=De)}});var je=null;function $e(De,ce){if(je===null){var Te=function(Ce){var Se=[];return Object.keys(Ce).forEach(function(Ue){Ce[Ue].forEach(function(ot){var at=null;switch(ot){case"bold":at={family:Ue,weight:"bold"};break;case"italic":at={family:Ue,style:"italic"};break;case"bolditalic":at={family:Ue,weight:"bold",style:"italic"};break;case"":case"normal":at={family:Ue}}at!==null&&(at.ref={name:Ue,style:ot},Se.push(at))})}),Se}(De.getFontList());je=function(Ce){for(var Se={},Ue=0;Ue<Ce.length;++Ue){var ot=MM(Ce[Ue]),at=ot.family,jt=ot.stretch,Ve=ot.style,nt=ot.weight;Se[at]=Se[at]||{},Se[at][jt]=Se[at][jt]||{},Se[at][jt][Ve]=Se[at][jt][Ve]||{},Se[at][jt][Ve][nt]=ot}return Se}(Te.concat(ce))}return je}var ze=null;Object.defineProperty(this,"fontFaces",{get:function(){return ze},set:function(De){je=null,ze=De}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(De){var ce;if(this.ctx.font=De,(ce=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(De))!==null){var Te=ce[1],Ce=(ce[2],ce[3]),Se=ce[4],Ue=(ce[5],ce[6]),ot=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Se)[2];Se=Math.floor(ot==="px"?parseFloat(Se)*this.pdf.internal.scaleFactor:ot==="em"?parseFloat(Se)*this.pdf.getFontSize():parseFloat(Se)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Se);var at=function(Lt){var Yt,mt,Bn=[],hn=Lt.trim();if(hn==="")return eO;if(hn in _V)return[_V[hn]];for(;hn!=="";){switch(mt=null,Yt=(hn=LV(hn)).charAt(0)){case'"':case"'":mt=$Ce(hn.substring(1),Yt);break;default:mt=BCe(hn)}if(mt===null||(Bn.push(mt[0]),(hn=LV(mt[1]))!==""&&hn.charAt(0)!==","))return eO;hn=hn.replace(/^,/,"")}return Bn}(Ue);if(this.fontFaces){var jt=FCe($e(this.pdf,this.fontFaces),at.map(function(Lt){return{family:Lt,stretch:"normal",weight:Ce,style:Te}}));this.pdf.setFont(jt.ref.name,jt.ref.style)}else{var Ve="";(Ce==="bold"||parseInt(Ce,10)>=700||Te==="bold")&&(Ve="bold"),Te==="italic"&&(Ve+="italic"),Ve.length===0&&(Ve="normal");for(var nt="",vt={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},Nt=0;Nt<at.length;Nt++){if(this.pdf.internal.getFont(at[Nt],Ve,{noFallback:!0,disableWarning:!0})!==void 0){nt=at[Nt];break}if(Ve==="bolditalic"&&this.pdf.internal.getFont(at[Nt],"bold",{noFallback:!0,disableWarning:!0})!==void 0)nt=at[Nt],Ve="bold";else if(this.pdf.internal.getFont(at[Nt],"normal",{noFallback:!0,disableWarning:!0})!==void 0){nt=at[Nt],Ve="normal";break}}if(nt===""){for(var zt=0;zt<at.length;zt++)if(vt[at[zt]]){nt=vt[at[zt]];break}}nt=nt===""?"Times":nt,this.pdf.setFont(nt,Ve)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(De){this.ctx.globalCompositeOperation=De}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(De){this.ctx.globalAlpha=De}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(De){this.ctx.lineDashOffset=De,$.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(De){this.ctx.lineDash=De,$.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(De){this.ctx.ignoreClearRect=!!De}})};h.prototype.setLineDash=function(L){this.lineDash=L},h.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},h.prototype.fill=function(){w.call(this,"fill",!1)},h.prototype.stroke=function(){w.call(this,"stroke",!1)},h.prototype.beginPath=function(){this.path=[{type:"begin"}]},h.prototype.moveTo=function(L,q){if(isNaN(L)||isNaN(q))throw cr.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var Y=this.ctx.transform.applyToPoint(new o(L,q));this.path.push({type:"mt",x:Y.x,y:Y.y}),this.ctx.lastPoint=new o(L,q)},h.prototype.closePath=function(){var L=new o(0,0),q=0;for(q=this.path.length-1;q!==-1;q--)if(this.path[q].type==="begin"&&Ln(this.path[q+1])==="object"&&typeof this.path[q+1].x=="number"){L=new o(this.path[q+1].x,this.path[q+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new o(L.x,L.y)},h.prototype.lineTo=function(L,q){if(isNaN(L)||isNaN(q))throw cr.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var Y=this.ctx.transform.applyToPoint(new o(L,q));this.path.push({type:"lt",x:Y.x,y:Y.y}),this.ctx.lastPoint=new o(Y.x,Y.y)},h.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),w.call(this,null,!0)},h.prototype.quadraticCurveTo=function(L,q,Y,J){if(isNaN(Y)||isNaN(J)||isNaN(L)||isNaN(q))throw cr.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var ne=this.ctx.transform.applyToPoint(new o(Y,J)),re=this.ctx.transform.applyToPoint(new o(L,q));this.path.push({type:"qct",x1:re.x,y1:re.y,x:ne.x,y:ne.y}),this.ctx.lastPoint=new o(ne.x,ne.y)},h.prototype.bezierCurveTo=function(L,q,Y,J,ne,re){if(isNaN(ne)||isNaN(re)||isNaN(L)||isNaN(q)||isNaN(Y)||isNaN(J))throw cr.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var pe=this.ctx.transform.applyToPoint(new o(ne,re)),ue=this.ctx.transform.applyToPoint(new o(L,q)),xe=this.ctx.transform.applyToPoint(new o(Y,J));this.path.push({type:"bct",x1:ue.x,y1:ue.y,x2:xe.x,y2:xe.y,x:pe.x,y:pe.y}),this.ctx.lastPoint=new o(pe.x,pe.y)},h.prototype.arc=function(L,q,Y,J,ne,re){if(isNaN(L)||isNaN(q)||isNaN(Y)||isNaN(J)||isNaN(ne))throw cr.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(re=!!re,!this.ctx.transform.isIdentity){var pe=this.ctx.transform.applyToPoint(new o(L,q));L=pe.x,q=pe.y;var ue=this.ctx.transform.applyToPoint(new o(0,Y)),xe=this.ctx.transform.applyToPoint(new o(0,0));Y=Math.sqrt(Math.pow(ue.x-xe.x,2)+Math.pow(ue.y-xe.y,2))}Math.abs(ne-J)>=2*Math.PI&&(J=0,ne=2*Math.PI),this.path.push({type:"arc",x:L,y:q,radius:Y,startAngle:J,endAngle:ne,counterclockwise:re})},h.prototype.arcTo=function(L,q,Y,J,ne){throw new Error("arcTo not implemented.")},h.prototype.rect=function(L,q,Y,J){if(isNaN(L)||isNaN(q)||isNaN(Y)||isNaN(J))throw cr.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(L,q),this.lineTo(L+Y,q),this.lineTo(L+Y,q+J),this.lineTo(L,q+J),this.lineTo(L,q),this.lineTo(L+Y,q),this.lineTo(L,q)},h.prototype.fillRect=function(L,q,Y,J){if(isNaN(L)||isNaN(q)||isNaN(Y)||isNaN(J))throw cr.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!m.call(this)){var ne={};this.lineCap!=="butt"&&(ne.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(ne.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(L,q,Y,J),this.fill(),ne.hasOwnProperty("lineCap")&&(this.lineCap=ne.lineCap),ne.hasOwnProperty("lineJoin")&&(this.lineJoin=ne.lineJoin)}},h.prototype.strokeRect=function(L,q,Y,J){if(isNaN(L)||isNaN(q)||isNaN(Y)||isNaN(J))throw cr.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");v.call(this)||(this.beginPath(),this.rect(L,q,Y,J),this.stroke())},h.prototype.clearRect=function(L,q,Y,J){if(isNaN(L)||isNaN(q)||isNaN(Y)||isNaN(J))throw cr.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(L,q,Y,J))},h.prototype.save=function(L){L=typeof L!="boolean"||L;for(var q=this.pdf.internal.getCurrentPageInfo().pageNumber,Y=0;Y<this.pdf.internal.getNumberOfPages();Y++)this.pdf.setPage(Y+1),this.pdf.internal.out("q");if(this.pdf.setPage(q),L){this.ctx.fontSize=this.pdf.internal.getFontSize();var J=new u(this.ctx);this.ctxStack.push(this.ctx),this.ctx=J}},h.prototype.restore=function(L){L=typeof L!="boolean"||L;for(var q=this.pdf.internal.getCurrentPageInfo().pageNumber,Y=0;Y<this.pdf.internal.getNumberOfPages();Y++)this.pdf.setPage(Y+1),this.pdf.internal.out("Q");this.pdf.setPage(q),L&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},h.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var f=function(L){var q,Y,J,ne;if(L.isCanvasGradient===!0&&(L=L.getColor()),!L)return{r:0,g:0,b:0,a:0,style:L};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(L))q=0,Y=0,J=0,ne=0;else{var re=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(L);if(re!==null)q=parseInt(re[1]),Y=parseInt(re[2]),J=parseInt(re[3]),ne=1;else if((re=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(L))!==null)q=parseInt(re[1]),Y=parseInt(re[2]),J=parseInt(re[3]),ne=parseFloat(re[4]);else{if(ne=1,typeof L=="string"&&L.charAt(0)!=="#"){var pe=new rse(L);L=pe.ok?pe.toHex():"#000000"}L.length===4?(q=L.substring(1,2),q+=q,Y=L.substring(2,3),Y+=Y,J=L.substring(3,4),J+=J):(q=L.substring(1,3),Y=L.substring(3,5),J=L.substring(5,7)),q=parseInt(q,16),Y=parseInt(Y,16),J=parseInt(J,16)}}return{r:q,g:Y,b:J,a:ne,style:L}},m=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},v=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};h.prototype.fillText=function(L,q,Y,J){if(isNaN(q)||isNaN(Y)||typeof L!="string")throw cr.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(J=isNaN(J)?void 0:J,!m.call(this)){var ne=z(this.ctx.transform.rotation),re=this.ctx.transform.scaleX;P.call(this,{text:L,x:q,y:Y,scale:re,angle:ne,align:this.textAlign,maxWidth:J})}},h.prototype.strokeText=function(L,q,Y,J){if(isNaN(q)||isNaN(Y)||typeof L!="string")throw cr.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!v.call(this)){J=isNaN(J)?void 0:J;var ne=z(this.ctx.transform.rotation),re=this.ctx.transform.scaleX;P.call(this,{text:L,x:q,y:Y,scale:re,renderingMode:"stroke",angle:ne,align:this.textAlign,maxWidth:J})}},h.prototype.measureText=function(L){if(typeof L!="string")throw cr.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var q=this.pdf,Y=this.pdf.internal.scaleFactor,J=q.internal.getFontSize(),ne=q.getStringUnitWidth(L)*J/q.internal.scaleFactor,re=function(pe){var ue=(pe=pe||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return ue}}),this};return new re({width:ne*=Math.round(96*Y/72*1e4)/1e4})},h.prototype.scale=function(L,q){if(isNaN(L)||isNaN(q))throw cr.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var Y=new c(L,0,0,q,0,0);this.ctx.transform=this.ctx.transform.multiply(Y)},h.prototype.rotate=function(L){if(isNaN(L))throw cr.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var q=new c(Math.cos(L),Math.sin(L),-Math.sin(L),Math.cos(L),0,0);this.ctx.transform=this.ctx.transform.multiply(q)},h.prototype.translate=function(L,q){if(isNaN(L)||isNaN(q))throw cr.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var Y=new c(1,0,0,1,L,q);this.ctx.transform=this.ctx.transform.multiply(Y)},h.prototype.transform=function(L,q,Y,J,ne,re){if(isNaN(L)||isNaN(q)||isNaN(Y)||isNaN(J)||isNaN(ne)||isNaN(re))throw cr.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var pe=new c(L,q,Y,J,ne,re);this.ctx.transform=this.ctx.transform.multiply(pe)},h.prototype.setTransform=function(L,q,Y,J,ne,re){L=isNaN(L)?1:L,q=isNaN(q)?0:q,Y=isNaN(Y)?0:Y,J=isNaN(J)?1:J,ne=isNaN(ne)?0:ne,re=isNaN(re)?0:re,this.ctx.transform=new c(L,q,Y,J,ne,re)};var p=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};h.prototype.drawImage=function(L,q,Y,J,ne,re,pe,ue,xe){var Ne=this.pdf.getImageProperties(L),je=1,$e=1,ze=1,De=1;J!==void 0&&ue!==void 0&&(ze=ue/J,De=xe/ne,je=Ne.width/J*ue/J,$e=Ne.height/ne*xe/ne),re===void 0&&(re=q,pe=Y,q=0,Y=0),J!==void 0&&ue===void 0&&(ue=J,xe=ne),J===void 0&&ue===void 0&&(ue=Ne.width,xe=Ne.height);for(var ce,Te=this.ctx.transform.decompose(),Ce=z(Te.rotate.shx),Se=new c,Ue=(Se=(Se=(Se=Se.multiply(Te.translate)).multiply(Te.skew)).multiply(Te.scale)).applyToRectangle(new l(re-q*ze,pe-Y*De,J*je,ne*$e)),ot=g.call(this,Ue),at=[],jt=0;jt<ot.length;jt+=1)at.indexOf(ot[jt])===-1&&at.push(ot[jt]);if(b(at),this.autoPaging)for(var Ve=at[0],nt=at[at.length-1],vt=Ve;vt<nt+1;vt++){this.pdf.setPage(vt);var Nt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],zt=vt===1?this.posY+this.margin[0]:this.margin[0],Lt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Yt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],mt=vt===1?0:Lt+(vt-2)*Yt;if(this.ctx.clip_path.length!==0){var Bn=this.path;ce=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=y(ce,this.posX+this.margin[3],-mt+zt+this.ctx.prevPageLastElemOffset),N.call(this,"fill",!0),this.path=Bn}var hn=JSON.parse(JSON.stringify(Ue));hn=y([hn],this.posX+this.margin[3],-mt+zt+this.ctx.prevPageLastElemOffset)[0];var Ds=(vt>Ve||vt<nt)&&p.call(this);Ds&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Nt,Yt,null).clip().discardPath()),this.pdf.addImage(L,"JPEG",hn.x,hn.y,hn.w,hn.h,null,null,Ce),Ds&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(L,"JPEG",Ue.x,Ue.y,Ue.w,Ue.h,null,null,Ce)};var g=function(L,q,Y){var J=[];q=q||this.pdf.internal.pageSize.width,Y=Y||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var ne=this.posY+this.ctx.prevPageLastElemOffset;switch(L.type){default:case"mt":case"lt":J.push(Math.floor((L.y+ne)/Y)+1);break;case"arc":J.push(Math.floor((L.y+ne-L.radius)/Y)+1),J.push(Math.floor((L.y+ne+L.radius)/Y)+1);break;case"qct":var re=H(this.ctx.lastPoint.x,this.ctx.lastPoint.y,L.x1,L.y1,L.x,L.y);J.push(Math.floor((re.y+ne)/Y)+1),J.push(Math.floor((re.y+re.h+ne)/Y)+1);break;case"bct":var pe=W(this.ctx.lastPoint.x,this.ctx.lastPoint.y,L.x1,L.y1,L.x2,L.y2,L.x,L.y);J.push(Math.floor((pe.y+ne)/Y)+1),J.push(Math.floor((pe.y+pe.h+ne)/Y)+1);break;case"rect":J.push(Math.floor((L.y+ne)/Y)+1),J.push(Math.floor((L.y+L.h+ne)/Y)+1)}for(var ue=0;ue<J.length;ue+=1)for(;this.pdf.internal.getNumberOfPages()<J[ue];)x.call(this);return J},x=function(){var L=this.fillStyle,q=this.strokeStyle,Y=this.font,J=this.lineCap,ne=this.lineWidth,re=this.lineJoin;this.pdf.addPage(),this.fillStyle=L,this.strokeStyle=q,this.font=Y,this.lineCap=J,this.lineWidth=ne,this.lineJoin=re},y=function(L,q,Y){for(var J=0;J<L.length;J++)switch(L[J].type){case"bct":L[J].x2+=q,L[J].y2+=Y;case"qct":L[J].x1+=q,L[J].y1+=Y;case"mt":case"lt":case"arc":default:L[J].x+=q,L[J].y+=Y}return L},b=function(L){return L.sort(function(q,Y){return q-Y})},w=function(L,q){for(var Y,J,ne=this.fillStyle,re=this.strokeStyle,pe=this.lineCap,ue=this.lineWidth,xe=Math.abs(ue*this.ctx.transform.scaleX),Ne=this.lineJoin,je=JSON.parse(JSON.stringify(this.path)),$e=JSON.parse(JSON.stringify(this.path)),ze=[],De=0;De<$e.length;De++)if($e[De].x!==void 0)for(var ce=g.call(this,$e[De]),Te=0;Te<ce.length;Te+=1)ze.indexOf(ce[Te])===-1&&ze.push(ce[Te]);for(var Ce=0;Ce<ze.length;Ce++)for(;this.pdf.internal.getNumberOfPages()<ze[Ce];)x.call(this);if(b(ze),this.autoPaging)for(var Se=ze[0],Ue=ze[ze.length-1],ot=Se;ot<Ue+1;ot++){this.pdf.setPage(ot),this.fillStyle=ne,this.strokeStyle=re,this.lineCap=pe,this.lineWidth=xe,this.lineJoin=Ne;var at=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],jt=ot===1?this.posY+this.margin[0]:this.margin[0],Ve=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],nt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],vt=ot===1?0:Ve+(ot-2)*nt;if(this.ctx.clip_path.length!==0){var Nt=this.path;Y=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=y(Y,this.posX+this.margin[3],-vt+jt+this.ctx.prevPageLastElemOffset),N.call(this,L,!0),this.path=Nt}if(J=JSON.parse(JSON.stringify(je)),this.path=y(J,this.posX+this.margin[3],-vt+jt+this.ctx.prevPageLastElemOffset),q===!1||ot===0){var zt=(ot>Se||ot<Ue)&&p.call(this);zt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],at,nt,null).clip().discardPath()),N.call(this,L,q),zt&&this.pdf.restoreGraphicsState()}this.lineWidth=ue}else this.lineWidth=xe,N.call(this,L,q),this.lineWidth=ue;this.path=je},N=function(L,q){if((L!=="stroke"||q||!v.call(this))&&(L==="stroke"||q||!m.call(this))){for(var Y,J,ne=[],re=this.path,pe=0;pe<re.length;pe++){var ue=re[pe];switch(ue.type){case"begin":ne.push({begin:!0});break;case"close":ne.push({close:!0});break;case"mt":ne.push({start:ue,deltas:[],abs:[]});break;case"lt":var xe=ne.length;if(re[pe-1]&&!isNaN(re[pe-1].x)&&(Y=[ue.x-re[pe-1].x,ue.y-re[pe-1].y],xe>0)){for(;xe>=0;xe--)if(ne[xe-1].close!==!0&&ne[xe-1].begin!==!0){ne[xe-1].deltas.push(Y),ne[xe-1].abs.push(ue);break}}break;case"bct":Y=[ue.x1-re[pe-1].x,ue.y1-re[pe-1].y,ue.x2-re[pe-1].x,ue.y2-re[pe-1].y,ue.x-re[pe-1].x,ue.y-re[pe-1].y],ne[ne.length-1].deltas.push(Y);break;case"qct":var Ne=re[pe-1].x+2/3*(ue.x1-re[pe-1].x),je=re[pe-1].y+2/3*(ue.y1-re[pe-1].y),$e=ue.x+2/3*(ue.x1-ue.x),ze=ue.y+2/3*(ue.y1-ue.y),De=ue.x,ce=ue.y;Y=[Ne-re[pe-1].x,je-re[pe-1].y,$e-re[pe-1].x,ze-re[pe-1].y,De-re[pe-1].x,ce-re[pe-1].y],ne[ne.length-1].deltas.push(Y);break;case"arc":ne.push({deltas:[],abs:[],arc:!0}),Array.isArray(ne[ne.length-1].abs)&&ne[ne.length-1].abs.push(ue)}}J=q?null:L==="stroke"?"stroke":"fill";for(var Te=!1,Ce=0;Ce<ne.length;Ce++)if(ne[Ce].arc)for(var Se=ne[Ce].abs,Ue=0;Ue<Se.length;Ue++){var ot=Se[Ue];ot.type==="arc"?j.call(this,ot.x,ot.y,ot.radius,ot.startAngle,ot.endAngle,ot.counterclockwise,void 0,q,!Te):R.call(this,ot.x,ot.y),Te=!0}else if(ne[Ce].close===!0)this.pdf.internal.out("h"),Te=!1;else if(ne[Ce].begin!==!0){var at=ne[Ce].start.x,jt=ne[Ce].start.y;_.call(this,ne[Ce].deltas,at,jt),Te=!0}J&&I.call(this,J),q&&k.call(this)}},E=function(L){var q=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,Y=q*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return L-Y;case"top":return L+q-Y;case"hanging":return L+q-2*Y;case"middle":return L+q/2-Y;case"ideographic":return L;case"alphabetic":default:return L}},C=function(L){return L+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};h.prototype.createLinearGradient=function(){var L=function(){};return L.colorStops=[],L.addColorStop=function(q,Y){this.colorStops.push([q,Y])},L.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},L.isCanvasGradient=!0,L},h.prototype.createPattern=function(){return this.createLinearGradient()},h.prototype.createRadialGradient=function(){return this.createLinearGradient()};var j=function(L,q,Y,J,ne,re,pe,ue,xe){for(var Ne=U.call(this,Y,J,ne,re),je=0;je<Ne.length;je++){var $e=Ne[je];je===0&&(xe?D.call(this,$e.x1+L,$e.y1+q):R.call(this,$e.x1+L,$e.y1+q)),M.call(this,L,q,$e.x2,$e.y2,$e.x3,$e.y3,$e.x4,$e.y4)}ue?k.call(this):I.call(this,pe)},I=function(L){switch(L){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},k=function(){this.pdf.clip(),this.pdf.discardPath()},D=function(L,q){this.pdf.internal.out(n(L)+" "+r(q)+" m")},P=function(L){var q;switch(L.align){case"right":case"end":q="right";break;case"center":q="center";break;case"left":case"start":default:q="left"}var Y=this.pdf.getTextDimensions(L.text),J=E.call(this,L.y),ne=C.call(this,J)-Y.h,re=this.ctx.transform.applyToPoint(new o(L.x,J)),pe=this.ctx.transform.decompose(),ue=new c;ue=(ue=(ue=ue.multiply(pe.translate)).multiply(pe.skew)).multiply(pe.scale);for(var xe,Ne,je,$e=this.ctx.transform.applyToRectangle(new l(L.x,J,Y.w,Y.h)),ze=ue.applyToRectangle(new l(L.x,ne,Y.w,Y.h)),De=g.call(this,ze),ce=[],Te=0;Te<De.length;Te+=1)ce.indexOf(De[Te])===-1&&ce.push(De[Te]);if(b(ce),this.autoPaging)for(var Ce=ce[0],Se=ce[ce.length-1],Ue=Ce;Ue<Se+1;Ue++){this.pdf.setPage(Ue);var ot=Ue===1?this.posY+this.margin[0]:this.margin[0],at=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],jt=this.pdf.internal.pageSize.height-this.margin[2],Ve=jt-this.margin[0],nt=this.pdf.internal.pageSize.width-this.margin[1],vt=nt-this.margin[3],Nt=Ue===1?0:at+(Ue-2)*Ve;if(this.ctx.clip_path.length!==0){var zt=this.path;xe=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=y(xe,this.posX+this.margin[3],-1*Nt+ot),N.call(this,"fill",!0),this.path=zt}var Lt=y([JSON.parse(JSON.stringify(ze))],this.posX+this.margin[3],-Nt+ot+this.ctx.prevPageLastElemOffset)[0];L.scale>=.01&&(Ne=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Ne*L.scale),je=this.lineWidth,this.lineWidth=je*L.scale);var Yt=this.autoPaging!=="text";if(Yt||Lt.y+Lt.h<=jt){if(Yt||Lt.y>=ot&&Lt.x<=nt){var mt=Yt?L.text:this.pdf.splitTextToSize(L.text,L.maxWidth||nt-Lt.x)[0],Bn=y([JSON.parse(JSON.stringify($e))],this.posX+this.margin[3],-Nt+ot+this.ctx.prevPageLastElemOffset)[0],hn=Yt&&(Ue>Ce||Ue<Se)&&p.call(this);hn&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],vt,Ve,null).clip().discardPath()),this.pdf.text(mt,Bn.x,Bn.y,{angle:L.angle,align:q,renderingMode:L.renderingMode}),hn&&this.pdf.restoreGraphicsState()}}else Lt.y<jt&&(this.ctx.prevPageLastElemOffset+=jt-Lt.y);L.scale>=.01&&(this.pdf.setFontSize(Ne),this.lineWidth=je)}else L.scale>=.01&&(Ne=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Ne*L.scale),je=this.lineWidth,this.lineWidth=je*L.scale),this.pdf.text(L.text,re.x+this.posX,re.y+this.posY,{angle:L.angle,align:q,renderingMode:L.renderingMode,maxWidth:L.maxWidth}),L.scale>=.01&&(this.pdf.setFontSize(Ne),this.lineWidth=je)},R=function(L,q,Y,J){Y=Y||0,J=J||0,this.pdf.internal.out(n(L+Y)+" "+r(q+J)+" l")},_=function(L,q,Y){return this.pdf.lines(L,q,Y,null,null)},M=function(L,q,Y,J,ne,re,pe,ue){this.pdf.internal.out([e(i(Y+L)),e(a(J+q)),e(i(ne+L)),e(a(re+q)),e(i(pe+L)),e(a(ue+q)),"c"].join(" "))},U=function(L,q,Y,J){for(var ne=2*Math.PI,re=Math.PI/2;q>Y;)q-=ne;var pe=Math.abs(Y-q);pe<ne&&J&&(pe=ne-pe);for(var ue=[],xe=J?-1:1,Ne=q;pe>1e-5;){var je=Ne+xe*Math.min(pe,re);ue.push(F.call(this,L,Ne,je)),pe-=Math.abs(je-Ne),Ne=je}return ue},F=function(L,q,Y){var J=(Y-q)/2,ne=L*Math.cos(J),re=L*Math.sin(J),pe=ne,ue=-re,xe=pe*pe+ue*ue,Ne=xe+pe*ne+ue*re,je=4/3*(Math.sqrt(2*xe*Ne)-Ne)/(pe*re-ue*ne),$e=pe-je*ue,ze=ue+je*pe,De=$e,ce=-ze,Te=J+q,Ce=Math.cos(Te),Se=Math.sin(Te);return{x1:L*Math.cos(q),y1:L*Math.sin(q),x2:$e*Ce-ze*Se,y2:$e*Se+ze*Ce,x3:De*Ce-ce*Se,y3:De*Se+ce*Ce,x4:L*Math.cos(Y),y4:L*Math.sin(Y)}},z=function(L){return 180*L/Math.PI},H=function(L,q,Y,J,ne,re){var pe=L+.5*(Y-L),ue=q+.5*(J-q),xe=ne+.5*(Y-ne),Ne=re+.5*(J-re),je=Math.min(L,ne,pe,xe),$e=Math.max(L,ne,pe,xe),ze=Math.min(q,re,ue,Ne),De=Math.max(q,re,ue,Ne);return new l(je,ze,$e-je,De-ze)},W=function(L,q,Y,J,ne,re,pe,ue){var xe,Ne,je,$e,ze,De,ce,Te,Ce,Se,Ue,ot,at,jt,Ve=Y-L,nt=J-q,vt=ne-Y,Nt=re-J,zt=pe-ne,Lt=ue-re;for(Ne=0;Ne<41;Ne++)Ce=(ce=(je=L+(xe=Ne/40)*Ve)+xe*((ze=Y+xe*vt)-je))+xe*(ze+xe*(ne+xe*zt-ze)-ce),Se=(Te=($e=q+xe*nt)+xe*((De=J+xe*Nt)-$e))+xe*(De+xe*(re+xe*Lt-De)-Te),Ne==0?(Ue=Ce,ot=Se,at=Ce,jt=Se):(Ue=Math.min(Ue,Ce),ot=Math.min(ot,Se),at=Math.max(at,Ce),jt=Math.max(jt,Se));return new l(Math.round(Ue),Math.round(ot),Math.round(at-Ue),Math.round(jt-ot))},$=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var L,q,Y=(L=this.ctx.lineDash,q=this.ctx.lineDashOffset,JSON.stringify({lineDash:L,lineDashOffset:q}));this.prevLineDash!==Y&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=Y)}}})(Bt.API),function(t){var e=function(a){var o,l,c,d,u,h,f,m,v,p;for(l=[],c=0,d=(a+=o="\0\0\0\0".slice(a.length%4||4)).length;d>c;c+=4)(u=(a.charCodeAt(c)<<24)+(a.charCodeAt(c+1)<<16)+(a.charCodeAt(c+2)<<8)+a.charCodeAt(c+3))!==0?(h=(u=((u=((u=((u=(u-(p=u%85))/85)-(v=u%85))/85)-(m=u%85))/85)-(f=u%85))/85)%85,l.push(h+33,f+33,m+33,v+33,p+33)):l.push(122);return function(g,x){for(var y=x;y>0;y--)g.pop()}(l,o.length),String.fromCharCode.apply(String,l)+"~>"},n=function(a){var o,l,c,d,u,h=String,f="length",m=255,v="charCodeAt",p="slice",g="replace";for(a[p](-2),a=a[p](0,-2)[g](/\s/g,"")[g]("z","!!!!!"),c=[],d=0,u=(a+=o="uuuuu"[p](a[f]%5||5))[f];u>d;d+=5)l=52200625*(a[v](d)-33)+614125*(a[v](d+1)-33)+7225*(a[v](d+2)-33)+85*(a[v](d+3)-33)+(a[v](d+4)-33),c.push(m&l>>24,m&l>>16,m&l>>8,m&l);return function(x,y){for(var b=y;b>0;b--)x.pop()}(c,o[f]),h.fromCharCode.apply(h,c)},r=function(a){var o=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((a=a.replace(/\s/g,"")).indexOf(">")!==-1&&(a=a.substr(0,a.indexOf(">"))),a.length%2&&(a+="0"),o.test(a)===!1)return"";for(var l="",c=0;c<a.length;c+=2)l+=String.fromCharCode("0x"+(a[c]+a[c+1]));return l},i=function(a){for(var o=new Uint8Array(a.length),l=a.length;l--;)o[l]=a.charCodeAt(l);return a=(o=DM(o)).reduce(function(c,d){return c+String.fromCharCode(d)},"")};t.processDataByFilters=function(a,o){var l=0,c=a||"",d=[];for(typeof(o=o||[])=="string"&&(o=[o]),l=0;l<o.length;l+=1)switch(o[l]){case"ASCII85Decode":case"/ASCII85Decode":c=n(c),d.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":c=e(c),d.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":c=r(c),d.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":c=c.split("").map(function(u){return("0"+u.charCodeAt().toString(16)).slice(-2)}).join("")+">",d.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":c=i(c),d.push("/FlateDecode");break;default:throw new Error('The filter: "'+o[l]+'" is not implemented')}return{data:c,reverseChain:d.reverse().join(" ")}}}(Bt.API),function(t){t.loadFile=function(e,n,r){return function(i,a,o){a=a!==!1,o=typeof o=="function"?o:function(){};var l=void 0;try{l=function(c,d,u){var h=new XMLHttpRequest,f=0,m=function(v){var p=v.length,g=[],x=String.fromCharCode;for(f=0;f<p;f+=1)g.push(x(255&v.charCodeAt(f)));return g.join("")};if(h.open("GET",c,!d),h.overrideMimeType("text/plain; charset=x-user-defined"),d===!1&&(h.onload=function(){h.status===200?u(m(this.responseText)):u(void 0)}),h.send(null),d&&h.status===200)return m(h.responseText)}(i,a,o)}catch{}return l}(e,n,r)},t.loadImageFile=t.loadFile}(Bt.API),function(t){function e(){return(Kt.html2canvas?Promise.resolve(Kt.html2canvas):Lj(()=>import("./html2canvas.esm-e0a7d97b.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load html2canvas: "+o))}).then(function(o){return o.default?o.default:o})}function n(){return(Kt.DOMPurify?Promise.resolve(Kt.DOMPurify):Lj(()=>import("./purify.es-2de9db7f.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load dompurify: "+o))}).then(function(o){return o.default?o.default:o})}var r=function(o){var l=Ln(o);return l==="undefined"?"undefined":l==="string"||o instanceof String?"string":l==="number"||o instanceof Number?"number":l==="function"||o instanceof Function?"function":o&&o.constructor===Array?"array":o&&o.nodeType===1?"element":l==="object"?"object":"unknown"},i=function(o,l){var c=document.createElement(o);for(var d in l.className&&(c.className=l.className),l.innerHTML&&l.dompurify&&(c.innerHTML=l.dompurify.sanitize(l.innerHTML)),l.style)c.style[d]=l.style[d];return c},a=function o(l){var c=Object.assign(o.convert(Promise.resolve()),JSON.parse(JSON.stringify(o.template))),d=o.convert(Promise.resolve(),c);return d=(d=d.setProgress(1,o,1,[o])).set(l)};(a.prototype=Object.create(Promise.prototype)).constructor=a,a.convert=function(o,l){return o.__proto__=l||a.prototype,o},a.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},a.prototype.from=function(o,l){return this.then(function(){switch(l=l||function(c){switch(r(c)){case"string":return"string";case"element":return c.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(o)){case"string":return this.then(n).then(function(c){return this.set({src:i("div",{innerHTML:o,dompurify:c})})});case"element":return this.set({src:o});case"canvas":return this.set({canvas:o});case"img":return this.set({img:o});default:return this.error("Unknown source type.")}})},a.prototype.to=function(o){switch(o){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},a.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var o={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},l=function c(d,u){for(var h=d.nodeType===3?document.createTextNode(d.nodeValue):d.cloneNode(!1),f=d.firstChild;f;f=f.nextSibling)u!==!0&&f.nodeType===1&&f.nodeName==="SCRIPT"||h.appendChild(c(f,u));return d.nodeType===1&&(d.nodeName==="CANVAS"?(h.width=d.width,h.height=d.height,h.getContext("2d").drawImage(d,0,0)):d.nodeName!=="TEXTAREA"&&d.nodeName!=="SELECT"||(h.value=d.value),h.addEventListener("load",function(){h.scrollTop=d.scrollTop,h.scrollLeft=d.scrollLeft},!0)),h}(this.prop.src,this.opt.html2canvas.javascriptEnabled);l.tagName==="BODY"&&(o.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=i("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=i("div",{className:"html2pdf__container",style:o}),this.prop.container.appendChild(l),this.prop.container.firstChild.appendChild(i("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},a.prototype.toCanvas=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(e).then(function(l){var c=Object.assign({},this.opt.html2canvas);return delete c.onrendered,l(this.prop.container,c)}).then(function(l){(this.opt.html2canvas.onrendered||function(){})(l),this.prop.canvas=l,document.body.removeChild(this.prop.overlay)})},a.prototype.toContext2d=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(e).then(function(l){var c=this.opt.jsPDF,d=this.opt.fontFaces,u=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,h=Object.assign({async:!0,allowTaint:!0,scale:u,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete h.onrendered,c.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,c.context2d.posX=this.opt.x,c.context2d.posY=this.opt.y,c.context2d.margin=this.opt.margin,c.context2d.fontFaces=d,d)for(var f=0;f<d.length;++f){var m=d[f],v=m.src.find(function(p){return p.format==="truetype"});v&&c.addFont(v.url,m.ref.name,m.ref.style)}return h.windowHeight=h.windowHeight||0,h.windowHeight=h.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):h.windowHeight,c.context2d.save(!0),l(this.prop.container,h)}).then(function(l){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(l),this.prop.canvas=l,document.body.removeChild(this.prop.overlay)})},a.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var o=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=o})},a.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},a.prototype.output=function(o,l,c){return(c=c||"pdf").toLowerCase()==="img"||c.toLowerCase()==="image"?this.outputImg(o,l):this.outputPdf(o,l)},a.prototype.outputPdf=function(o,l){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(o,l)})},a.prototype.outputImg=function(o){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(o){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+o+'" is not supported.'}})},a.prototype.save=function(o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(o?{filename:o}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},a.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},a.prototype.set=function(o){if(r(o)!=="object")return this;var l=Object.keys(o||{}).map(function(c){if(c in a.template.prop)return function(){this.prop[c]=o[c]};switch(c){case"margin":return this.setMargin.bind(this,o.margin);case"jsPDF":return function(){return this.opt.jsPDF=o.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,o.pageSize);default:return function(){this.opt[c]=o[c]}}},this);return this.then(function(){return this.thenList(l)})},a.prototype.get=function(o,l){return this.then(function(){var c=o in a.template.prop?this.prop[o]:this.opt[o];return l?l(c):c})},a.prototype.setMargin=function(o){return this.then(function(){switch(r(o)){case"number":o=[o,o,o,o];case"array":if(o.length===2&&(o=[o[0],o[1],o[0],o[1]]),o.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=o}).then(this.setPageSize)},a.prototype.setPageSize=function(o){function l(c,d){return Math.floor(c*d/72*96)}return this.then(function(){(o=o||Bt.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(o.inner={width:o.width-this.opt.margin[1]-this.opt.margin[3],height:o.height-this.opt.margin[0]-this.opt.margin[2]},o.inner.px={width:l(o.inner.width,o.k),height:l(o.inner.height,o.k)},o.inner.ratio=o.inner.height/o.inner.width),this.prop.pageSize=o})},a.prototype.setProgress=function(o,l,c,d){return o!=null&&(this.progress.val=o),l!=null&&(this.progress.state=l),c!=null&&(this.progress.n=c),d!=null&&(this.progress.stack=d),this.progress.ratio=this.progress.val/this.progress.state,this},a.prototype.updateProgress=function(o,l,c,d){return this.setProgress(o?this.progress.val+o:null,l||null,c?this.progress.n+c:null,d?this.progress.stack.concat(d):null)},a.prototype.then=function(o,l){var c=this;return this.thenCore(o,l,function(d,u){return c.updateProgress(null,null,1,[d]),Promise.prototype.then.call(this,function(h){return c.updateProgress(null,d),h}).then(d,u).then(function(h){return c.updateProgress(1),h})})},a.prototype.thenCore=function(o,l,c){c=c||Promise.prototype.then,o&&(o=o.bind(this)),l&&(l=l.bind(this));var d=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:a.convert(Object.assign({},this),Promise.prototype),u=c.call(d,o,l);return a.convert(u,this.__proto__)},a.prototype.thenExternal=function(o,l){return Promise.prototype.then.call(this,o,l)},a.prototype.thenList=function(o){var l=this;return o.forEach(function(c){l=l.thenCore(c)}),l},a.prototype.catch=function(o){o&&(o=o.bind(this));var l=Promise.prototype.catch.call(this,o);return a.convert(l,this)},a.prototype.catchExternal=function(o){return Promise.prototype.catch.call(this,o)},a.prototype.error=function(o){return this.then(function(){throw new Error(o)})},a.prototype.using=a.prototype.set,a.prototype.saveAs=a.prototype.save,a.prototype.export=a.prototype.output,a.prototype.run=a.prototype.then,Bt.getPageSize=function(o,l,c){if(Ln(o)==="object"){var d=o;o=d.orientation,l=d.unit||l,c=d.format||c}l=l||"mm",c=c||"a4",o=(""+(o||"P")).toLowerCase();var u,h=(""+c).toLowerCase(),f={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(l){case"pt":u=1;break;case"mm":u=72/25.4;break;case"cm":u=72/2.54;break;case"in":u=72;break;case"px":u=.75;break;case"pc":case"em":u=12;break;case"ex":u=6;break;default:throw"Invalid unit: "+l}var m,v=0,p=0;if(f.hasOwnProperty(h))v=f[h][1]/u,p=f[h][0]/u;else try{v=c[1],p=c[0]}catch{throw new Error("Invalid format: "+c)}if(o==="p"||o==="portrait")o="p",p>v&&(m=p,p=v,v=m);else{if(o!=="l"&&o!=="landscape")throw"Invalid orientation: "+o;o="l",v>p&&(m=p,p=v,v=m)}return{width:p,height:v,unit:l,k:u,orientation:o}},t.html=function(o,l){(l=l||{}).callback=l.callback||function(){},l.html2canvas=l.html2canvas||{},l.html2canvas.canvas=l.html2canvas.canvas||this.canvas,l.jsPDF=l.jsPDF||this,l.fontFaces=l.fontFaces?l.fontFaces.map(MM):null;var c=new a(l);return l.worker?c:c.from(o).doCallback()}}(Bt.API),Bt.API.addJS=function(t){return MV=t,this.internal.events.subscribe("postPutResources",function(){yC=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(yC+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),RV=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+MV+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){yC!==void 0&&RV!==void 0&&this.internal.out("/Names <</JavaScript "+yC+" 0 R>>")}),this},function(t){var e;t.events.push(["postPutResources",function(){var n=this,r=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var i=n.outline.render().split(/\r\n/),a=0;a<i.length;a++){var o=i[a],l=r.exec(o);if(l!=null){var c=l[1];n.internal.newObjectDeferredBegin(c,!1)}n.internal.write(o)}if(this.outline.createNamedDestinations){var d=this.internal.pages.length,u=[];for(a=0;a<d;a++){var h=n.internal.newObject();u.push(h);var f=n.internal.getPageInfo(a+1);n.internal.write("<< /D["+f.objId+" 0 R /XYZ null null null]>> endobj")}var m=n.internal.newObject();for(n.internal.write("<< /Names [ "),a=0;a<u.length;a++)n.internal.write("(page_"+(a+1)+")"+u[a]+" 0 R");n.internal.write(" ] >>","endobj"),e=n.internal.newObject(),n.internal.write("<< /Dests "+m+" 0 R"),n.internal.write(">>","endobj")}}]),t.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+e+" 0 R"))}]),t.events.push(["initialized",function(){var n=this;n.outline={createNamedDestinations:!1,root:{children:[]}},n.outline.add=function(r,i,a){var o={title:i,options:a,children:[]};return r==null&&(r=this.root),r.children.push(o),o},n.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=n,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},n.outline.genIds_r=function(r){r.id=n.internal.newObjectDeferred();for(var i=0;i<r.children.length;i++)this.genIds_r(r.children[i])},n.outline.renderRoot=function(r){this.objStart(r),this.line("/Type /Outlines"),r.children.length>0&&(this.line("/First "+this.makeRef(r.children[0])),this.line("/Last "+this.makeRef(r.children[r.children.length-1]))),this.line("/Count "+this.count_r({count:0},r)),this.objEnd()},n.outline.renderItems=function(r){for(var i=this.ctx.pdf.internal.getVerticalCoordinateString,a=0;a<r.children.length;a++){var o=r.children[a];this.objStart(o),this.line("/Title "+this.makeString(o.title)),this.line("/Parent "+this.makeRef(r)),a>0&&this.line("/Prev "+this.makeRef(r.children[a-1])),a<r.children.length-1&&this.line("/Next "+this.makeRef(r.children[a+1])),o.children.length>0&&(this.line("/First "+this.makeRef(o.children[0])),this.line("/Last "+this.makeRef(o.children[o.children.length-1])));var l=this.count=this.count_r({count:0},o);if(l>0&&this.line("/Count "+l),o.options&&o.options.pageNumber){var c=n.internal.getPageInfo(o.options.pageNumber);this.line("/Dest ["+c.objId+" 0 R /XYZ 0 "+i(0)+" 0]")}this.objEnd()}for(var d=0;d<r.children.length;d++)this.renderItems(r.children[d])},n.outline.line=function(r){this.ctx.val+=r+`\r
`},n.outline.makeRef=function(r){return r.id+" 0 R"},n.outline.makeString=function(r){return"("+n.internal.pdfEscape(r)+")"},n.outline.objStart=function(r){this.ctx.val+=`\r
`+r.id+` 0 obj\r
<<\r
`},n.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},n.outline.count_r=function(r,i){for(var a=0;a<i.children.length;a++)r.count++,this.count_r(r,i.children[a]);return r.count}}])}(Bt.API),function(t){var e=[192,193,194,195,196,197,198,199];t.processJPEG=function(n,r,i,a,o,l){var c,d=this.decode.DCT_DECODE,u=null;if(typeof n=="string"||this.__addimage__.isArrayBuffer(n)||this.__addimage__.isArrayBufferView(n)){switch(n=o||n,n=this.__addimage__.isArrayBuffer(n)?new Uint8Array(n):n,(c=function(h){for(var f,m=256*h.charCodeAt(4)+h.charCodeAt(5),v=h.length,p={width:0,height:0,numcomponents:1},g=4;g<v;g+=2){if(g+=m,e.indexOf(h.charCodeAt(g+1))!==-1){f=256*h.charCodeAt(g+5)+h.charCodeAt(g+6),p={width:256*h.charCodeAt(g+7)+h.charCodeAt(g+8),height:f,numcomponents:h.charCodeAt(g+9)};break}m=256*h.charCodeAt(g+2)+h.charCodeAt(g+3)}return p}(n=this.__addimage__.isArrayBufferView(n)?this.__addimage__.arrayBufferToBinaryString(n):n)).numcomponents){case 1:l=this.color_spaces.DEVICE_GRAY;break;case 4:l=this.color_spaces.DEVICE_CMYK;break;case 3:l=this.color_spaces.DEVICE_RGB}u={data:n,width:c.width,height:c.height,colorSpace:l,bitsPerComponent:8,filter:d,index:r,alias:i}}return u}}(Bt.API);var bx,bC,FV,$V,BV,zCe=function(){var t,e,n;function r(a){var o,l,c,d,u,h,f,m,v,p,g,x,y,b;for(this.data=a,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},h=null;;){switch(o=this.readUInt32(),v=(function(){var w,N;for(N=[],w=0;w<4;++w)N.push(String.fromCharCode(this.data[this.pos++]));return N}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(o);break;case"fcTL":h&&this.animation.frames.push(h),this.pos+=4,h={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},u=this.readUInt16(),d=this.readUInt16()||100,h.delay=1e3*u/d,h.disposeOp=this.data[this.pos++],h.blendOp=this.data[this.pos++],h.data=[];break;case"IDAT":case"fdAT":for(v==="fdAT"&&(this.pos+=4,o-=4),a=(h!=null?h.data:void 0)||this.imgData,x=0;0<=o?x<o:x>o;0<=o?++x:--x)a.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(c=this.palette.length/3,this.transparency.indexed=this.read(o),this.transparency.indexed.length>c)throw new Error("More transparent colors than palette size");if((p=c-this.transparency.indexed.length)>0)for(y=0;0<=p?y<p:y>p;0<=p?++y:--y)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(o)[0];break;case 2:this.transparency.rgb=this.read(o)}break;case"tEXt":f=(g=this.read(o)).indexOf(0),m=String.fromCharCode.apply(String,g.slice(0,f)),this.text[m]=String.fromCharCode.apply(String,g.slice(f+1));break;case"IEND":return h&&this.animation.frames.push(h),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(b=this.colorType)===4||b===6,l=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*l,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=o}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}r.prototype.read=function(a){var o,l;for(l=[],o=0;0<=a?o<a:o>a;0<=a?++o:--o)l.push(this.data[this.pos++]);return l},r.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.decodePixels=function(a){var o=this.pixelBitlength/8,l=new Uint8Array(this.width*this.height*o),c=0,d=this;if(a==null&&(a=this.imgData),a.length===0)return new Uint8Array(0);function u(h,f,m,v){var p,g,x,y,b,w,N,E,C,j,I,k,D,P,R,_,M,U,F,z,H,W=Math.ceil((d.width-h)/m),$=Math.ceil((d.height-f)/v),L=d.width==W&&d.height==$;for(P=o*W,k=L?l:new Uint8Array(P*$),w=a.length,D=0,g=0;D<$&&c<w;){switch(a[c++]){case 0:for(y=M=0;M<P;y=M+=1)k[g++]=a[c++];break;case 1:for(y=U=0;U<P;y=U+=1)p=a[c++],b=y<o?0:k[g-o],k[g++]=(p+b)%256;break;case 2:for(y=F=0;F<P;y=F+=1)p=a[c++],x=(y-y%o)/o,R=D&&k[(D-1)*P+x*o+y%o],k[g++]=(R+p)%256;break;case 3:for(y=z=0;z<P;y=z+=1)p=a[c++],x=(y-y%o)/o,b=y<o?0:k[g-o],R=D&&k[(D-1)*P+x*o+y%o],k[g++]=(p+Math.floor((b+R)/2))%256;break;case 4:for(y=H=0;H<P;y=H+=1)p=a[c++],x=(y-y%o)/o,b=y<o?0:k[g-o],D===0?R=_=0:(R=k[(D-1)*P+x*o+y%o],_=x&&k[(D-1)*P+(x-1)*o+y%o]),N=b+R-_,E=Math.abs(N-b),j=Math.abs(N-R),I=Math.abs(N-_),C=E<=j&&E<=I?b:j<=I?R:_,k[g++]=(p+C)%256;break;default:throw new Error("Invalid filter algorithm: "+a[c-1])}if(!L){var q=((f+D*v)*d.width+h)*o,Y=D*P;for(y=0;y<W;y+=1){for(var J=0;J<o;J+=1)l[q++]=k[Y++];q+=(m-1)*o}}D++}}return a=xCe(a),d.interlaceMethod==1?(u(0,0,8,8),u(4,0,8,8),u(0,4,4,8),u(2,0,4,4),u(0,2,2,4),u(1,0,2,2),u(0,1,1,2)):u(0,0,1,1),l},r.prototype.decodePalette=function(){var a,o,l,c,d,u,h,f,m;for(l=this.palette,u=this.transparency.indexed||[],d=new Uint8Array((u.length||0)+l.length),c=0,a=0,o=h=0,f=l.length;h<f;o=h+=3)d[c++]=l[o],d[c++]=l[o+1],d[c++]=l[o+2],d[c++]=(m=u[a++])!=null?m:255;return d},r.prototype.copyToImageData=function(a,o){var l,c,d,u,h,f,m,v,p,g,x;if(c=this.colors,p=null,l=this.hasAlphaChannel,this.palette.length&&(p=(x=this._decodedPalette)!=null?x:this._decodedPalette=this.decodePalette(),c=4,l=!0),v=(d=a.data||a).length,h=p||o,u=f=0,c===1)for(;u<v;)m=p?4*o[u/4]:f,g=h[m++],d[u++]=g,d[u++]=g,d[u++]=g,d[u++]=l?h[m++]:255,f=m;else for(;u<v;)m=p?4*o[u/4]:f,d[u++]=h[m++],d[u++]=h[m++],d[u++]=h[m++],d[u++]=l?h[m++]:255,f=m},r.prototype.decode=function(){var a;return a=new Uint8Array(this.width*this.height*4),this.copyToImageData(a,this.decodePixels()),a};var i=function(){if(Object.prototype.toString.call(Kt)==="[object Window]"){try{e=Kt.document.createElement("canvas"),n=e.getContext("2d")}catch{return!1}return!0}return!1};return i(),t=function(a){var o;if(i()===!0)return n.width=a.width,n.height=a.height,n.clearRect(0,0,a.width,a.height),n.putImageData(a,0,0),(o=new Image).src=e.toDataURL(),o;throw new Error("This method requires a Browser with Canvas-capability.")},r.prototype.decodeFrames=function(a){var o,l,c,d,u,h,f,m;if(this.animation){for(m=[],l=u=0,h=(f=this.animation.frames).length;u<h;l=++u)o=f[l],c=a.createImageData(o.width,o.height),d=this.decodePixels(new Uint8Array(o.data)),this.copyToImageData(c,d),o.imageData=c,m.push(o.image=t(c));return m}},r.prototype.renderFrame=function(a,o){var l,c,d;return l=(c=this.animation.frames)[o],d=c[o-1],o===0&&a.clearRect(0,0,this.width,this.height),(d!=null?d.disposeOp:void 0)===1?a.clearRect(d.xOffset,d.yOffset,d.width,d.height):(d!=null?d.disposeOp:void 0)===2&&a.putImageData(d.imageData,d.xOffset,d.yOffset),l.blendOp===0&&a.clearRect(l.xOffset,l.yOffset,l.width,l.height),a.drawImage(l.image,l.xOffset,l.yOffset)},r.prototype.animate=function(a){var o,l,c,d,u,h,f=this;return l=0,h=this.animation,d=h.numFrames,c=h.frames,u=h.numPlays,(o=function(){var m,v;if(m=l++%d,v=c[m],f.renderFrame(a,m),d>1&&l/d<u)return f.animation._timeout=setTimeout(o,v.delay)})()},r.prototype.stopAnimation=function(){var a;return clearTimeout((a=this.animation)!=null?a._timeout:void 0)},r.prototype.render=function(a){var o,l;return a._png&&a._png.stopAnimation(),a._png=this,a.width=this.width,a.height=this.height,o=a.getContext("2d"),this.animation?(this.decodeFrames(o),this.animate(o)):(l=o.createImageData(this.width,this.height),this.copyToImageData(l,this.decodePixels()),o.putImageData(l,0,0))},r}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function UCe(t){var e=0;if(t[e++]!==71||t[e++]!==73||t[e++]!==70||t[e++]!==56||(t[e++]+1&253)!=56||t[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var n=t[e++]|t[e++]<<8,r=t[e++]|t[e++]<<8,i=t[e++],a=i>>7,o=1<<(7&i)+1;t[e++],t[e++];var l=null,c=null;a&&(l=e,c=o,e+=3*o);var d=!0,u=[],h=0,f=null,m=0,v=null;for(this.width=n,this.height=r;d&&e<t.length;)switch(t[e++]){case 33:switch(t[e++]){case 255:if(t[e]!==11||t[e+1]==78&&t[e+2]==69&&t[e+3]==84&&t[e+4]==83&&t[e+5]==67&&t[e+6]==65&&t[e+7]==80&&t[e+8]==69&&t[e+9]==50&&t[e+10]==46&&t[e+11]==48&&t[e+12]==3&&t[e+13]==1&&t[e+16]==0)e+=14,v=t[e++]|t[e++]<<8,e++;else for(e+=12;;){if(!((D=t[e++])>=0))throw Error("Invalid block size");if(D===0)break;e+=D}break;case 249:if(t[e++]!==4||t[e+4]!==0)throw new Error("Invalid graphics extension block.");var p=t[e++];h=t[e++]|t[e++]<<8,f=t[e++],!(1&p)&&(f=null),m=p>>2&7,e++;break;case 254:for(;;){if(!((D=t[e++])>=0))throw Error("Invalid block size");if(D===0)break;e+=D}break;default:throw new Error("Unknown graphic control label: 0x"+t[e-1].toString(16))}break;case 44:var g=t[e++]|t[e++]<<8,x=t[e++]|t[e++]<<8,y=t[e++]|t[e++]<<8,b=t[e++]|t[e++]<<8,w=t[e++],N=w>>6&1,E=1<<(7&w)+1,C=l,j=c,I=!1;w>>7&&(I=!0,C=e,j=E,e+=3*E);var k=e;for(e++;;){var D;if(!((D=t[e++])>=0))throw Error("Invalid block size");if(D===0)break;e+=D}u.push({x:g,y:x,width:y,height:b,has_local_palette:I,palette_offset:C,palette_size:j,data_offset:k,data_length:e-k,transparent_index:f,interlaced:!!N,delay:h,disposal:m});break;case 59:d=!1;break;default:throw new Error("Unknown gif block: 0x"+t[e-1].toString(16))}this.numFrames=function(){return u.length},this.loopCount=function(){return v},this.frameInfo=function(P){if(P<0||P>=u.length)throw new Error("Frame index out of range.");return u[P]},this.decodeAndBlitFrameBGRA=function(P,R){var _=this.frameInfo(P),M=_.width*_.height,U=new Uint8Array(M);zV(t,_.data_offset,U,M);var F=_.palette_offset,z=_.transparent_index;z===null&&(z=256);var H=_.width,W=n-H,$=H,L=4*(_.y*n+_.x),q=4*((_.y+_.height)*n+_.x),Y=L,J=4*W;_.interlaced===!0&&(J+=4*n*7);for(var ne=8,re=0,pe=U.length;re<pe;++re){var ue=U[re];if($===0&&($=H,(Y+=J)>=q&&(J=4*W+4*n*(ne-1),Y=L+(H+W)*(ne<<1),ne>>=1)),ue===z)Y+=4;else{var xe=t[F+3*ue],Ne=t[F+3*ue+1],je=t[F+3*ue+2];R[Y++]=je,R[Y++]=Ne,R[Y++]=xe,R[Y++]=255}--$}},this.decodeAndBlitFrameRGBA=function(P,R){var _=this.frameInfo(P),M=_.width*_.height,U=new Uint8Array(M);zV(t,_.data_offset,U,M);var F=_.palette_offset,z=_.transparent_index;z===null&&(z=256);var H=_.width,W=n-H,$=H,L=4*(_.y*n+_.x),q=4*((_.y+_.height)*n+_.x),Y=L,J=4*W;_.interlaced===!0&&(J+=4*n*7);for(var ne=8,re=0,pe=U.length;re<pe;++re){var ue=U[re];if($===0&&($=H,(Y+=J)>=q&&(J=4*W+4*n*(ne-1),Y=L+(H+W)*(ne<<1),ne>>=1)),ue===z)Y+=4;else{var xe=t[F+3*ue],Ne=t[F+3*ue+1],je=t[F+3*ue+2];R[Y++]=xe,R[Y++]=Ne,R[Y++]=je,R[Y++]=255}--$}}}function zV(t,e,n,r){for(var i=t[e++],a=1<<i,o=a+1,l=o+1,c=i+1,d=(1<<c)-1,u=0,h=0,f=0,m=t[e++],v=new Int32Array(4096),p=null;;){for(;u<16&&m!==0;)h|=t[e++]<<u,u+=8,m===1?m=t[e++]:--m;if(u<c)break;var g=h&d;if(h>>=c,u-=c,g!==a){if(g===o)break;for(var x=g<l?g:p,y=0,b=x;b>a;)b=v[b]>>8,++y;var w=b;if(f+y+(x!==g?1:0)>r)return void cr.log("Warning, gif stream longer than expected.");n[f++]=w;var N=f+=y;for(x!==g&&(n[f++]=w),b=x;y--;)b=v[b],n[--N]=255&b,b>>=8;p!==null&&l<4096&&(v[l++]=p<<8|w,l>=d+1&&c<12&&(++c,d=d<<1|1)),p=g}else l=o+1,d=(1<<(c=i+1))-1,p=null}return f!==r&&cr.log("Warning, gif stream shorter than expected."),n}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function tO(t){var e,n,r,i,a,o=Math.floor,l=new Array(64),c=new Array(64),d=new Array(64),u=new Array(64),h=new Array(65535),f=new Array(65535),m=new Array(64),v=new Array(64),p=[],g=0,x=7,y=new Array(64),b=new Array(64),w=new Array(64),N=new Array(256),E=new Array(2048),C=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],j=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],I=[0,1,2,3,4,5,6,7,8,9,10,11],k=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],D=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],P=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],R=[0,1,2,3,4,5,6,7,8,9,10,11],_=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],M=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function U(L,q){for(var Y=0,J=0,ne=new Array,re=1;re<=16;re++){for(var pe=1;pe<=L[re];pe++)ne[q[J]]=[],ne[q[J]][0]=Y,ne[q[J]][1]=re,J++,Y++;Y*=2}return ne}function F(L){for(var q=L[0],Y=L[1]-1;Y>=0;)q&1<<Y&&(g|=1<<x),Y--,--x<0&&(g==255?(z(255),z(0)):z(g),x=7,g=0)}function z(L){p.push(L)}function H(L){z(L>>8&255),z(255&L)}function W(L,q,Y,J,ne){for(var re,pe=ne[0],ue=ne[240],xe=function(Se,Ue){var ot,at,jt,Ve,nt,vt,Nt,zt,Lt,Yt,mt=0;for(Lt=0;Lt<8;++Lt){ot=Se[mt],at=Se[mt+1],jt=Se[mt+2],Ve=Se[mt+3],nt=Se[mt+4],vt=Se[mt+5],Nt=Se[mt+6];var Bn=ot+(zt=Se[mt+7]),hn=ot-zt,Ds=at+Nt,zn=at-Nt,tr=jt+vt,ba=jt-vt,An=Ve+nt,Ld=Ve-nt,Kr=Bn+An,Cl=Bn-An,Rd=Ds+tr,Yr=Ds-tr;Se[mt]=Kr+Rd,Se[mt+4]=Kr-Rd;var nn=.707106781*(Yr+Cl);Se[mt+2]=Cl+nn,Se[mt+6]=Cl-nn;var Hn=.382683433*((Kr=Ld+ba)-(Yr=zn+hn)),Mm=.5411961*Kr+Hn,hi=1.306562965*Yr+Hn,Ec=.707106781*(Rd=ba+zn),Pc=hn+Ec,qt=hn-Ec;Se[mt+5]=qt+Mm,Se[mt+3]=qt-Mm,Se[mt+1]=Pc+hi,Se[mt+7]=Pc-hi,mt+=8}for(mt=0,Lt=0;Lt<8;++Lt){ot=Se[mt],at=Se[mt+8],jt=Se[mt+16],Ve=Se[mt+24],nt=Se[mt+32],vt=Se[mt+40],Nt=Se[mt+48];var El=ot+(zt=Se[mt+56]),Tc=ot-zt,wa=at+Nt,ks=at-Nt,ws=jt+vt,Ya=jt-vt,Mv=Ve+nt,Md=Ve-nt,Pl=El+Mv,Tl=El-Mv,Il=wa+ws,Ic=wa-ws;Se[mt]=Pl+Il,Se[mt+32]=Pl-Il;var Uo=.707106781*(Ic+Tl);Se[mt+16]=Tl+Uo,Se[mt+48]=Tl-Uo;var Dc=.382683433*((Pl=Md+Ya)-(Ic=ks+Tc)),Fm=.5411961*Pl+Dc,Fv=1.306562965*Ic+Dc,$v=.707106781*(Il=Ya+ks),Bv=Tc+$v,zv=Tc-$v;Se[mt+40]=zv+Fm,Se[mt+24]=zv-Fm,Se[mt+8]=Bv+Fv,Se[mt+56]=Bv-Fv,mt++}for(Lt=0;Lt<64;++Lt)Yt=Se[Lt]*Ue[Lt],m[Lt]=Yt>0?Yt+.5|0:Yt-.5|0;return m}(L,q),Ne=0;Ne<64;++Ne)v[C[Ne]]=xe[Ne];var je=v[0]-Y;Y=v[0],je==0?F(J[0]):(F(J[f[re=32767+je]]),F(h[re]));for(var $e=63;$e>0&&v[$e]==0;)$e--;if($e==0)return F(pe),Y;for(var ze,De=1;De<=$e;){for(var ce=De;v[De]==0&&De<=$e;)++De;var Te=De-ce;if(Te>=16){ze=Te>>4;for(var Ce=1;Ce<=ze;++Ce)F(ue);Te&=15}re=32767+v[De],F(ne[(Te<<4)+f[re]]),F(h[re]),De++}return $e!=63&&F(pe),Y}function $(L){L=Math.min(Math.max(L,1),100),a!=L&&(function(q){for(var Y=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],J=0;J<64;J++){var ne=o((Y[J]*q+50)/100);ne=Math.min(Math.max(ne,1),255),l[C[J]]=ne}for(var re=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],pe=0;pe<64;pe++){var ue=o((re[pe]*q+50)/100);ue=Math.min(Math.max(ue,1),255),c[C[pe]]=ue}for(var xe=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Ne=0,je=0;je<8;je++)for(var $e=0;$e<8;$e++)d[Ne]=1/(l[C[Ne]]*xe[je]*xe[$e]*8),u[Ne]=1/(c[C[Ne]]*xe[je]*xe[$e]*8),Ne++}(L<50?Math.floor(5e3/L):Math.floor(200-2*L)),a=L)}this.encode=function(L,q){q&&$(q),p=new Array,g=0,x=7,H(65496),H(65504),H(16),z(74),z(70),z(73),z(70),z(0),z(1),z(1),z(0),H(1),H(1),z(0),z(0),function(){H(65499),H(132),z(0);for(var at=0;at<64;at++)z(l[at]);z(1);for(var jt=0;jt<64;jt++)z(c[jt])}(),function(at,jt){H(65472),H(17),z(8),H(jt),H(at),z(3),z(1),z(17),z(0),z(2),z(17),z(1),z(3),z(17),z(1)}(L.width,L.height),function(){H(65476),H(418),z(0);for(var at=0;at<16;at++)z(j[at+1]);for(var jt=0;jt<=11;jt++)z(I[jt]);z(16);for(var Ve=0;Ve<16;Ve++)z(k[Ve+1]);for(var nt=0;nt<=161;nt++)z(D[nt]);z(1);for(var vt=0;vt<16;vt++)z(P[vt+1]);for(var Nt=0;Nt<=11;Nt++)z(R[Nt]);z(17);for(var zt=0;zt<16;zt++)z(_[zt+1]);for(var Lt=0;Lt<=161;Lt++)z(M[Lt])}(),H(65498),H(12),z(3),z(1),z(0),z(2),z(17),z(3),z(17),z(0),z(63),z(0);var Y=0,J=0,ne=0;g=0,x=7,this.encode.displayName="_encode_";for(var re,pe,ue,xe,Ne,je,$e,ze,De,ce=L.data,Te=L.width,Ce=L.height,Se=4*Te,Ue=0;Ue<Ce;){for(re=0;re<Se;){for(Ne=Se*Ue+re,$e=-1,ze=0,De=0;De<64;De++)je=Ne+(ze=De>>3)*Se+($e=4*(7&De)),Ue+ze>=Ce&&(je-=Se*(Ue+1+ze-Ce)),re+$e>=Se&&(je-=re+$e-Se+4),pe=ce[je++],ue=ce[je++],xe=ce[je++],y[De]=(E[pe]+E[ue+256>>0]+E[xe+512>>0]>>16)-128,b[De]=(E[pe+768>>0]+E[ue+1024>>0]+E[xe+1280>>0]>>16)-128,w[De]=(E[pe+1280>>0]+E[ue+1536>>0]+E[xe+1792>>0]>>16)-128;Y=W(y,d,Y,e,r),J=W(b,u,J,n,i),ne=W(w,u,ne,n,i),re+=32}Ue+=8}if(x>=0){var ot=[];ot[1]=x+1,ot[0]=(1<<x+1)-1,F(ot)}return H(65497),new Uint8Array(p)},t=t||50,function(){for(var L=String.fromCharCode,q=0;q<256;q++)N[q]=L(q)}(),e=U(j,I),n=U(P,R),r=U(k,D),i=U(_,M),function(){for(var L=1,q=2,Y=1;Y<=15;Y++){for(var J=L;J<q;J++)f[32767+J]=Y,h[32767+J]=[],h[32767+J][1]=Y,h[32767+J][0]=J;for(var ne=-(q-1);ne<=-L;ne++)f[32767+ne]=Y,h[32767+ne]=[],h[32767+ne][1]=Y,h[32767+ne][0]=q-1+ne;L<<=1,q<<=1}}(),function(){for(var L=0;L<256;L++)E[L]=19595*L,E[L+256>>0]=38470*L,E[L+512>>0]=7471*L+32768,E[L+768>>0]=-11059*L,E[L+1024>>0]=-21709*L,E[L+1280>>0]=32768*L+8421375,E[L+1536>>0]=-27439*L,E[L+1792>>0]=-5329*L}(),$(t)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function $l(t,e){if(this.pos=0,this.buffer=t,this.datav=new DataView(t.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function UV(t){function e(j){if(!j)throw Error("assert :P")}function n(j,I,k){for(var D=0;4>D;D++)if(j[I+D]!=k.charCodeAt(D))return!0;return!1}function r(j,I,k,D,P){for(var R=0;R<P;R++)j[I+R]=k[D+R]}function i(j,I,k,D){for(var P=0;P<D;P++)j[I+P]=k}function a(j){return new Int32Array(j)}function o(j,I){for(var k=[],D=0;D<j;D++)k.push(new I);return k}function l(j,I){var k=[];return function D(P,R,_){for(var M=_[R],U=0;U<M&&(P.push(_.length>R+1?[]:new I),!(_.length<R+1));U++)D(P[U],R+1,_)}(k,0,j),k}var c=function(){var j=this;function I(T,O){for(var V=1<<O-1>>>0;T&V;)V>>>=1;return V?(T&V-1)+V:T}function k(T,O,V,K,ee){e(!(K%V));do T[O+(K-=V)]=ee;while(0<K)}function D(T,O,V,K,ee){if(e(2328>=ee),512>=ee)var ie=a(512);else if((ie=a(ee))==null)return 0;return function(oe,de,me,ve,Pe,Me){var Fe,_e,Je=de,qe=1<<me,Ie=a(16),ke=a(16);for(e(Pe!=0),e(ve!=null),e(oe!=null),e(0<me),_e=0;_e<Pe;++_e){if(15<ve[_e])return 0;++Ie[ve[_e]]}if(Ie[0]==Pe)return 0;for(ke[1]=0,Fe=1;15>Fe;++Fe){if(Ie[Fe]>1<<Fe)return 0;ke[Fe+1]=ke[Fe]+Ie[Fe]}for(_e=0;_e<Pe;++_e)Fe=ve[_e],0<ve[_e]&&(Me[ke[Fe]++]=_e);if(ke[15]==1)return(ve=new P).g=0,ve.value=Me[0],k(oe,Je,1,qe,ve),qe;var Ze,et=-1,Qe=qe-1,wt=0,gt=1,Ut=1,xt=1<<me;for(_e=0,Fe=1,Pe=2;Fe<=me;++Fe,Pe<<=1){if(gt+=Ut<<=1,0>(Ut-=Ie[Fe]))return 0;for(;0<Ie[Fe];--Ie[Fe])(ve=new P).g=Fe,ve.value=Me[_e++],k(oe,Je+wt,Pe,xt,ve),wt=I(wt,Fe)}for(Fe=me+1,Pe=2;15>=Fe;++Fe,Pe<<=1){if(gt+=Ut<<=1,0>(Ut-=Ie[Fe]))return 0;for(;0<Ie[Fe];--Ie[Fe]){if(ve=new P,(wt&Qe)!=et){for(Je+=xt,Ze=1<<(et=Fe)-me;15>et&&!(0>=(Ze-=Ie[et]));)++et,Ze<<=1;qe+=xt=1<<(Ze=et-me),oe[de+(et=wt&Qe)].g=Ze+me,oe[de+et].value=Je-de-et}ve.g=Fe-me,ve.value=Me[_e++],k(oe,Je+(wt>>me),Pe,xt,ve),wt=I(wt,Fe)}}return gt!=2*ke[15]-1?0:qe}(T,O,V,K,ee,ie)}function P(){this.value=this.g=0}function R(){this.value=this.g=0}function _(){this.G=o(5,P),this.H=a(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=o(fi,R)}function M(T,O,V,K){e(T!=null),e(O!=null),e(2147483648>K),T.Ca=254,T.I=0,T.b=-8,T.Ka=0,T.oa=O,T.pa=V,T.Jd=O,T.Yc=V+K,T.Zc=4<=K?V+K-4+1:V,re(T)}function U(T,O){for(var V=0;0<O--;)V|=ue(T,128)<<O;return V}function F(T,O){var V=U(T,O);return pe(T)?-V:V}function z(T,O,V,K){var ee,ie=0;for(e(T!=null),e(O!=null),e(4294967288>K),T.Sb=K,T.Ra=0,T.u=0,T.h=0,4<K&&(K=4),ee=0;ee<K;++ee)ie+=O[V+ee]<<8*ee;T.Ra=ie,T.bb=K,T.oa=O,T.pa=V}function H(T){for(;8<=T.u&&T.bb<T.Sb;)T.Ra>>>=8,T.Ra+=T.oa[T.pa+T.bb]<<nx-8>>>0,++T.bb,T.u-=8;Y(T)&&(T.h=1,T.u=0)}function W(T,O){if(e(0<=O),!T.h&&O<=tx){var V=q(T)&ex[O];return T.u+=O,H(T),V}return T.h=1,T.u=0}function $(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function L(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function q(T){return T.Ra>>>(T.u&nx-1)>>>0}function Y(T){return e(T.bb<=T.Sb),T.h||T.bb==T.Sb&&T.u>nx}function J(T,O){T.u=O,T.h=Y(T)}function ne(T){T.u>=I1&&(e(T.u>=I1),H(T))}function re(T){e(T!=null&&T.oa!=null),T.pa<T.Zc?(T.I=(T.oa[T.pa++]|T.I<<8)>>>0,T.b+=8):(e(T!=null&&T.oa!=null),T.pa<T.Yc?(T.b+=8,T.I=T.oa[T.pa++]|T.I<<8):T.Ka?T.b=0:(T.I<<=8,T.b+=8,T.Ka=1))}function pe(T){return U(T,1)}function ue(T,O){var V=T.Ca;0>T.b&&re(T);var K=T.b,ee=V*O>>>8,ie=(T.I>>>K>ee)+0;for(ie?(V-=ee,T.I-=ee+1<<K>>>0):V=ee+1,K=V,ee=0;256<=K;)ee+=8,K>>=8;return K=7^ee+Na[K],T.b-=K,T.Ca=(V<<K)-1,ie}function xe(T,O,V){T[O+0]=V>>24&255,T[O+1]=V>>16&255,T[O+2]=V>>8&255,T[O+3]=V>>0&255}function Ne(T,O){return T[O+0]<<0|T[O+1]<<8}function je(T,O){return Ne(T,O)|T[O+2]<<16}function $e(T,O){return Ne(T,O)|Ne(T,O+2)<<16}function ze(T,O){var V=1<<O;return e(T!=null),e(0<O),T.X=a(V),T.X==null?0:(T.Mb=32-O,T.Xa=O,1)}function De(T,O){e(T!=null),e(O!=null),e(T.Xa==O.Xa),r(O.X,0,T.X,0,1<<O.Xa)}function ce(){this.X=[],this.Xa=this.Mb=0}function Te(T,O,V,K){e(V!=null),e(K!=null);var ee=V[0],ie=K[0];return ee==0&&(ee=(T*ie+O/2)/O),ie==0&&(ie=(O*ee+T/2)/T),0>=ee||0>=ie?0:(V[0]=ee,K[0]=ie,1)}function Ce(T,O){return T+(1<<O)-1>>>O}function Se(T,O){return((4278255360&T)+(4278255360&O)>>>0&4278255360)+((16711935&T)+(16711935&O)>>>0&16711935)>>>0}function Ue(T,O){j[O]=function(V,K,ee,ie,oe,de,me){var ve;for(ve=0;ve<oe;++ve){var Pe=j[T](de[me+ve-1],ee,ie+ve);de[me+ve]=Se(V[K+ve],Pe)}}}function ot(){this.ud=this.hd=this.jd=0}function at(T,O){return((4278124286&(T^O))>>>1)+(T&O)>>>0}function jt(T){return 0<=T&&256>T?T:0>T?0:255<T?255:void 0}function Ve(T,O){return jt(T+(T-O+.5>>1))}function nt(T,O,V){return Math.abs(O-V)-Math.abs(T-V)}function vt(T,O,V,K,ee,ie,oe){for(K=ie[oe-1],V=0;V<ee;++V)ie[oe+V]=K=Se(T[O+V],K)}function Nt(T,O,V,K,ee){var ie;for(ie=0;ie<V;++ie){var oe=T[O+ie],de=oe>>8&255,me=16711935&(me=(me=16711935&oe)+((de<<16)+de));K[ee+ie]=(4278255360&oe)+me>>>0}}function zt(T,O){O.jd=T>>0&255,O.hd=T>>8&255,O.ud=T>>16&255}function Lt(T,O,V,K,ee,ie){var oe;for(oe=0;oe<K;++oe){var de=O[V+oe],me=de>>>8,ve=de,Pe=255&(Pe=(Pe=de>>>16)+((T.jd<<24>>24)*(me<<24>>24)>>>5));ve=255&(ve=(ve=ve+((T.hd<<24>>24)*(me<<24>>24)>>>5))+((T.ud<<24>>24)*(Pe<<24>>24)>>>5)),ee[ie+oe]=(4278255360&de)+(Pe<<16)+ve}}function Yt(T,O,V,K,ee){j[O]=function(ie,oe,de,me,ve,Pe,Me,Fe,_e){for(me=Me;me<Fe;++me)for(Me=0;Me<_e;++Me)ve[Pe++]=ee(de[K(ie[oe++])])},j[T]=function(ie,oe,de,me,ve,Pe,Me){var Fe=8>>ie.b,_e=ie.Ea,Je=ie.K[0],qe=ie.w;if(8>Fe)for(ie=(1<<ie.b)-1,qe=(1<<Fe)-1;oe<de;++oe){var Ie,ke=0;for(Ie=0;Ie<_e;++Ie)Ie&ie||(ke=K(me[ve++])),Pe[Me++]=ee(Je[ke&qe]),ke>>=Fe}else j["VP8LMapColor"+V](me,ve,Je,qe,Pe,Me,oe,de,_e)}}function mt(T,O,V,K,ee){for(V=O+V;O<V;){var ie=T[O++];K[ee++]=ie>>16&255,K[ee++]=ie>>8&255,K[ee++]=ie>>0&255}}function Bn(T,O,V,K,ee){for(V=O+V;O<V;){var ie=T[O++];K[ee++]=ie>>16&255,K[ee++]=ie>>8&255,K[ee++]=ie>>0&255,K[ee++]=ie>>24&255}}function hn(T,O,V,K,ee){for(V=O+V;O<V;){var ie=(oe=T[O++])>>16&240|oe>>12&15,oe=oe>>0&240|oe>>28&15;K[ee++]=ie,K[ee++]=oe}}function Ds(T,O,V,K,ee){for(V=O+V;O<V;){var ie=(oe=T[O++])>>16&248|oe>>13&7,oe=oe>>5&224|oe>>3&31;K[ee++]=ie,K[ee++]=oe}}function zn(T,O,V,K,ee){for(V=O+V;O<V;){var ie=T[O++];K[ee++]=ie>>0&255,K[ee++]=ie>>8&255,K[ee++]=ie>>16&255}}function tr(T,O,V,K,ee,ie){if(ie==0)for(V=O+V;O<V;)xe(K,((ie=T[O++])[0]>>24|ie[1]>>8&65280|ie[2]<<8&16711680|ie[3]<<24)>>>0),ee+=32;else r(K,ee,T,O,V)}function ba(T,O){j[O][0]=j[T+"0"],j[O][1]=j[T+"1"],j[O][2]=j[T+"2"],j[O][3]=j[T+"3"],j[O][4]=j[T+"4"],j[O][5]=j[T+"5"],j[O][6]=j[T+"6"],j[O][7]=j[T+"7"],j[O][8]=j[T+"8"],j[O][9]=j[T+"9"],j[O][10]=j[T+"10"],j[O][11]=j[T+"11"],j[O][12]=j[T+"12"],j[O][13]=j[T+"13"],j[O][14]=j[T+"0"],j[O][15]=j[T+"0"]}function An(T){return T==lk||T==ck||T==v5||T==dk}function Ld(){this.eb=[],this.size=this.A=this.fb=0}function Kr(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Cl(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Ld,this.f.kb=new Kr,this.sd=null}function Rd(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function Yr(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function nn(T){return alert("todo:WebPSamplerProcessPlane"),T.T}function Hn(T,O){var V=T.T,K=O.ba.f.RGBA,ee=K.eb,ie=K.fb+T.ka*K.A,oe=Ko[O.ba.S],de=T.y,me=T.O,ve=T.f,Pe=T.N,Me=T.ea,Fe=T.W,_e=O.cc,Je=O.dc,qe=O.Mc,Ie=O.Nc,ke=T.ka,Ze=T.ka+T.T,et=T.U,Qe=et+1>>1;for(ke==0?oe(de,me,null,null,ve,Pe,Me,Fe,ve,Pe,Me,Fe,ee,ie,null,null,et):(oe(O.ec,O.fc,de,me,_e,Je,qe,Ie,ve,Pe,Me,Fe,ee,ie-K.A,ee,ie,et),++V);ke+2<Ze;ke+=2)_e=ve,Je=Pe,qe=Me,Ie=Fe,Pe+=T.Rc,Fe+=T.Rc,ie+=2*K.A,oe(de,(me+=2*T.fa)-T.fa,de,me,_e,Je,qe,Ie,ve,Pe,Me,Fe,ee,ie-K.A,ee,ie,et);return me+=T.fa,T.j+Ze<T.o?(r(O.ec,O.fc,de,me,et),r(O.cc,O.dc,ve,Pe,Qe),r(O.Mc,O.Nc,Me,Fe,Qe),V--):1&Ze||oe(de,me,null,null,ve,Pe,Me,Fe,ve,Pe,Me,Fe,ee,ie+K.A,null,null,et),V}function Mm(T,O,V){var K=T.F,ee=[T.J];if(K!=null){var ie=T.U,oe=O.ba.S,de=oe==g5||oe==v5;O=O.ba.f.RGBA;var me=[0],ve=T.ka;me[0]=T.T,T.Kb&&(ve==0?--me[0]:(--ve,ee[0]-=T.width),T.j+T.ka+T.T==T.o&&(me[0]=T.o-T.j-ve));var Pe=O.eb;ve=O.fb+ve*O.A,T=pr(K,ee[0],T.width,ie,me,Pe,ve+(de?0:3),O.A),e(V==me),T&&An(oe)&&Wo(Pe,ve,de,ie,me,O.A)}return 0}function hi(T){var O=T.ma,V=O.ba.S,K=11>V,ee=V==m5||V==p5||V==g5||V==ok||V==12||An(V);if(O.memory=null,O.Ib=null,O.Jb=null,O.Nd=null,!P1(O.Oa,T,ee?11:12))return 0;if(ee&&An(V)&&it(),T.da)alert("todo:use_scaling");else{if(K){if(O.Ib=nn,T.Kb){if(V=T.U+1>>1,O.memory=a(T.U+2*V),O.memory==null)return 0;O.ec=O.memory,O.fc=0,O.cc=O.ec,O.dc=O.fc+T.U,O.Mc=O.cc,O.Nc=O.dc+V,O.Ib=Hn,it()}}else alert("todo:EmitYUV");ee&&(O.Jb=Mm,K&&Oe())}if(K&&!oB){for(T=0;256>T;++T)Cle[T]=89858*(T-128)+y5>>x5,Tle[T]=-22014*(T-128)+y5,Ple[T]=-45773*(T-128),Ele[T]=113618*(T-128)+y5>>x5;for(T=M1;T<fk;++T)O=76283*(T-16)+y5>>x5,Ile[T-M1]=Xa(O,255),Dle[T-M1]=Xa(O+8>>4,15);oB=1}return 1}function Ec(T){var O=T.ma,V=T.U,K=T.T;return e(!(1&T.ka)),0>=V||0>=K?0:(V=O.Ib(T,O),O.Jb!=null&&O.Jb(T,O,V),O.Dc+=V,1)}function Pc(T){T.ma.memory=null}function qt(T,O,V,K){return W(T,8)!=47?0:(O[0]=W(T,14)+1,V[0]=W(T,14)+1,K[0]=W(T,1),W(T,3)!=0?0:!T.h)}function El(T,O){if(4>T)return T+1;var V=T-2>>1;return(2+(1&T)<<V)+W(O,V)+1}function Tc(T,O){return 120<O?O-120:1<=(V=((V=hle[O-1])>>4)*T+(8-(15&V)))?V:1;var V}function wa(T,O,V){var K=q(V),ee=T[O+=255&K].g-8;return 0<ee&&(J(V,V.u+8),K=q(V),O+=T[O].value,O+=K&(1<<ee)-1),J(V,V.u+T[O].g),T[O].value}function ks(T,O,V){return V.g+=T.g,V.value+=T.value<<O>>>0,e(8>=V.g),T.g}function ws(T,O,V){var K=T.xc;return e((O=K==0?0:T.vc[T.md*(V>>K)+(O>>K)])<T.Wb),T.Ya[O]}function Ya(T,O,V,K){var ee=T.ab,ie=T.c*O,oe=T.C;O=oe+O;var de=V,me=K;for(K=T.Ta,V=T.Ua;0<ee--;){var ve=T.gc[ee],Pe=oe,Me=O,Fe=de,_e=me,Je=(me=K,de=V,ve.Ea);switch(e(Pe<Me),e(Me<=ve.nc),ve.hc){case 2:o5(Fe,_e,(Me-Pe)*Je,me,de);break;case 0:var qe=Pe,Ie=Me,ke=me,Ze=de,et=(xt=ve).Ea;qe==0&&(ik(Fe,_e,null,null,1,ke,Ze),vt(Fe,_e+1,0,0,et-1,ke,Ze+1),_e+=et,Ze+=et,++qe);for(var Qe=1<<xt.b,wt=Qe-1,gt=Ce(et,xt.b),Ut=xt.K,xt=xt.w+(qe>>xt.b)*gt;qe<Ie;){var Un=Ut,Gn=xt,Pn=1;for(D1(Fe,_e,ke,Ze-et,1,ke,Ze);Pn<et;){var wn=(Pn&~wt)+Qe;wn>et&&(wn=et),(0,yh[Un[Gn++]>>8&15])(Fe,_e+ +Pn,ke,Ze+Pn-et,wn-Pn,ke,Ze+Pn),Pn=wn}_e+=et,Ze+=et,++qe&wt||(xt+=gt)}Me!=ve.nc&&r(me,de-Je,me,de+(Me-Pe-1)*Je,Je);break;case 1:for(Je=Fe,Ie=_e,et=(Fe=ve.Ea)-(Ze=Fe&~(ke=(_e=1<<ve.b)-1)),qe=Ce(Fe,ve.b),Qe=ve.K,ve=ve.w+(Pe>>ve.b)*qe;Pe<Me;){for(wt=Qe,gt=ve,Ut=new ot,xt=Ie+Ze,Un=Ie+Fe;Ie<xt;)zt(wt[gt++],Ut),Vm(Ut,Je,Ie,_e,me,de),Ie+=_e,de+=_e;Ie<Un&&(zt(wt[gt++],Ut),Vm(Ut,Je,Ie,et,me,de),Ie+=et,de+=et),++Pe&ke||(ve+=qe)}break;case 3:if(Fe==me&&_e==de&&0<ve.b){for(Ie=me,Fe=Je=de+(Me-Pe)*Je-(Ze=(Me-Pe)*Ce(ve.Ea,ve.b)),_e=me,ke=de,qe=[],Ze=(et=Ze)-1;0<=Ze;--Ze)qe[Ze]=_e[ke+Ze];for(Ze=et-1;0<=Ze;--Ze)Ie[Fe+Ze]=qe[Ze];Vo(ve,Pe,Me,me,Je,me,de)}else Vo(ve,Pe,Me,Fe,_e,me,de)}de=K,me=V}me!=V&&r(K,V,de,me,ie)}function Mv(T,O){var V=T.V,K=T.Ba+T.c*T.C,ee=O-T.C;if(e(O<=T.l.o),e(16>=ee),0<ee){var ie=T.l,oe=T.Ta,de=T.Ua,me=ie.width;if(Ya(T,ee,V,K),ee=de=[de],e((V=T.C)<(K=O)),e(ie.v<ie.va),K>ie.o&&(K=ie.o),V<ie.j){var ve=ie.j-V;V=ie.j,ee[0]+=ve*me}if(V>=K?V=0:(ee[0]+=4*ie.v,ie.ka=V-ie.j,ie.U=ie.va-ie.v,ie.T=K-V,V=1),V){if(de=de[0],11>(V=T.ca).S){var Pe=V.f.RGBA,Me=(K=V.S,ee=ie.U,ie=ie.T,ve=Pe.eb,Pe.A),Fe=ie;for(Pe=Pe.fb+T.Ma*Pe.A;0<Fe--;){var _e=oe,Je=de,qe=ee,Ie=ve,ke=Pe;switch(K){case f5:Sa(_e,Je,qe,Ie,ke);break;case m5:Ji(_e,Je,qe,Ie,ke);break;case lk:Ji(_e,Je,qe,Ie,ke),Wo(Ie,ke,0,qe,1,0);break;case Z7:zd(_e,Je,qe,Ie,ke);break;case p5:tr(_e,Je,qe,Ie,ke,1);break;case ck:tr(_e,Je,qe,Ie,ke,1),Wo(Ie,ke,0,qe,1,0);break;case g5:tr(_e,Je,qe,Ie,ke,0);break;case v5:tr(_e,Je,qe,Ie,ke,0),Wo(Ie,ke,1,qe,1,0);break;case ok:bh(_e,Je,qe,Ie,ke);break;case dk:bh(_e,Je,qe,Ie,ke),mr(Ie,ke,qe,1,0);break;case Q7:Bd(_e,Je,qe,Ie,ke);break;default:e(0)}de+=me,Pe+=Me}T.Ma+=ie}else alert("todo:EmitRescaledRowsYUVA");e(T.Ma<=V.height)}}T.C=O,e(T.C<=T.i)}function Md(T){var O;if(0<T.ua)return 0;for(O=0;O<T.Wb;++O){var V=T.Ya[O].G,K=T.Ya[O].H;if(0<V[1][K[1]+0].g||0<V[2][K[2]+0].g||0<V[3][K[3]+0].g)return 0}return 1}function Pl(T,O,V,K,ee,ie){if(T.Z!=0){var oe=T.qd,de=T.rd;for(e(Sh[T.Z]!=null);O<V;++O)Sh[T.Z](oe,de,K,ee,K,ee,ie),oe=K,de=ee,ee+=ie;T.qd=oe,T.rd=de}}function Tl(T,O){var V=T.l.ma,K=V.Z==0||V.Z==1?T.l.j:T.C;if(K=T.C<K?K:T.C,e(O<=T.l.o),O>K){var ee=T.l.width,ie=V.ca,oe=V.tb+ee*K,de=T.V,me=T.Ba+T.c*K,ve=T.gc;e(T.ab==1),e(ve[0].hc==3),l5(ve[0],K,O,de,me,ie,oe),Pl(V,K,O,ie,oe,ee)}T.C=T.Ma=O}function Il(T,O,V,K,ee,ie,oe){var de=T.$/K,me=T.$%K,ve=T.m,Pe=T.s,Me=V+T.$,Fe=Me;ee=V+K*ee;var _e=V+K*ie,Je=280+Pe.ua,qe=T.Pb?de:16777216,Ie=0<Pe.ua?Pe.Wa:null,ke=Pe.wc,Ze=Me<_e?ws(Pe,me,de):null;e(T.C<ie),e(_e<=ee);var et=!1;e:for(;;){for(;et||Me<_e;){var Qe=0;if(de>=qe){var wt=Me-V;e((qe=T).Pb),qe.wd=qe.m,qe.xd=wt,0<qe.s.ua&&De(qe.s.Wa,qe.s.vb),qe=de+mle}if(me&ke||(Ze=ws(Pe,me,de)),e(Ze!=null),Ze.Qb&&(O[Me]=Ze.qb,et=!0),!et)if(ne(ve),Ze.jc){Qe=ve,wt=O;var gt=Me,Ut=Ze.pd[q(Qe)&fi-1];e(Ze.jc),256>Ut.g?(J(Qe,Qe.u+Ut.g),wt[gt]=Ut.value,Qe=0):(J(Qe,Qe.u+Ut.g-256),e(256<=Ut.value),Qe=Ut.value),Qe==0&&(et=!0)}else Qe=wa(Ze.G[0],Ze.H[0],ve);if(ve.h)break;if(et||256>Qe){if(!et)if(Ze.nd)O[Me]=(Ze.qb|Qe<<8)>>>0;else{if(ne(ve),et=wa(Ze.G[1],Ze.H[1],ve),ne(ve),wt=wa(Ze.G[2],Ze.H[2],ve),gt=wa(Ze.G[3],Ze.H[3],ve),ve.h)break;O[Me]=(gt<<24|et<<16|Qe<<8|wt)>>>0}if(et=!1,++Me,++me>=K&&(me=0,++de,oe!=null&&de<=ie&&!(de%16)&&oe(T,de),Ie!=null))for(;Fe<Me;)Qe=O[Fe++],Ie.X[(506832829*Qe&4294967295)>>>Ie.Mb]=Qe}else if(280>Qe){if(Qe=El(Qe-256,ve),wt=wa(Ze.G[4],Ze.H[4],ve),ne(ve),wt=Tc(K,wt=El(wt,ve)),ve.h)break;if(Me-V<wt||ee-Me<Qe)break e;for(gt=0;gt<Qe;++gt)O[Me+gt]=O[Me+gt-wt];for(Me+=Qe,me+=Qe;me>=K;)me-=K,++de,oe!=null&&de<=ie&&!(de%16)&&oe(T,de);if(e(Me<=ee),me&ke&&(Ze=ws(Pe,me,de)),Ie!=null)for(;Fe<Me;)Qe=O[Fe++],Ie.X[(506832829*Qe&4294967295)>>>Ie.Mb]=Qe}else{if(!(Qe<Je))break e;for(et=Qe-280,e(Ie!=null);Fe<Me;)Qe=O[Fe++],Ie.X[(506832829*Qe&4294967295)>>>Ie.Mb]=Qe;Qe=Me,e(!(et>>>(wt=Ie).Xa)),O[Qe]=wt.X[et],et=!0}et||e(ve.h==Y(ve))}if(T.Pb&&ve.h&&Me<ee)e(T.m.h),T.a=5,T.m=T.wd,T.$=T.xd,0<T.s.ua&&De(T.s.vb,T.s.Wa);else{if(ve.h)break e;oe!=null&&oe(T,de>ie?ie:de),T.a=0,T.$=Me-V}return 1}return T.a=3,0}function Ic(T){e(T!=null),T.vc=null,T.yc=null,T.Ya=null;var O=T.Wa;O!=null&&(O.X=null),T.vb=null,e(T!=null)}function Uo(){var T=new sk;return T==null?null:(T.a=0,T.xb=tB,ba("Predictor","VP8LPredictors"),ba("Predictor","VP8LPredictors_C"),ba("PredictorAdd","VP8LPredictorsAdd"),ba("PredictorAdd","VP8LPredictorsAdd_C"),o5=Nt,Vm=Lt,Sa=mt,Ji=Bn,bh=hn,Bd=Ds,zd=zn,j.VP8LMapColor32b=rx,j.VP8LMapColor8b=c5,T)}function Dc(T,O,V,K,ee){var ie=1,oe=[T],de=[O],me=K.m,ve=K.s,Pe=null,Me=0;e:for(;;){if(V)for(;ie&&W(me,1);){var Fe=oe,_e=de,Je=K,qe=1,Ie=Je.m,ke=Je.gc[Je.ab],Ze=W(Ie,2);if(Je.Oc&1<<Ze)ie=0;else{switch(Je.Oc|=1<<Ze,ke.hc=Ze,ke.Ea=Fe[0],ke.nc=_e[0],ke.K=[null],++Je.ab,e(4>=Je.ab),Ze){case 0:case 1:ke.b=W(Ie,3)+2,qe=Dc(Ce(ke.Ea,ke.b),Ce(ke.nc,ke.b),0,Je,ke.K),ke.K=ke.K[0];break;case 3:var et,Qe=W(Ie,8)+1,wt=16<Qe?0:4<Qe?1:2<Qe?2:3;if(Fe[0]=Ce(ke.Ea,wt),ke.b=wt,et=qe=Dc(Qe,1,0,Je,ke.K)){var gt,Ut=Qe,xt=ke,Un=1<<(8>>xt.b),Gn=a(Un);if(Gn==null)et=0;else{var Pn=xt.K[0],wn=xt.w;for(Gn[0]=xt.K[0][0],gt=1;gt<1*Ut;++gt)Gn[gt]=Se(Pn[wn+gt],Gn[gt-1]);for(;gt<4*Un;++gt)Gn[gt]=0;xt.K[0]=null,xt.K[0]=Gn,et=1}}qe=et;break;case 2:break;default:e(0)}ie=qe}}if(oe=oe[0],de=de[0],ie&&W(me,1)&&!(ie=1<=(Me=W(me,4))&&11>=Me)){K.a=3;break e}var or;if(or=ie)t:{var nr,fn,Ns,Aa=K,Ss=oe,Ca=de,Kn=Me,Qa=V,Ja=Aa.m,Ws=Aa.s,mi=[null],ta=1,Yo=0,Lc=fle[Kn];n:for(;;){if(Qa&&W(Ja,1)){var Gs=W(Ja,3)+2,Hd=Ce(Ss,Gs),Km=Ce(Ca,Gs),lx=Hd*Km;if(!Dc(Hd,Km,0,Aa,mi))break n;for(mi=mi[0],Ws.xc=Gs,nr=0;nr<lx;++nr){var Ah=mi[nr]>>8&65535;mi[nr]=Ah,Ah>=ta&&(ta=Ah+1)}}if(Ja.h)break n;for(fn=0;5>fn;++fn){var Zr=J7[fn];!fn&&0<Kn&&(Zr+=1<<Kn),Yo<Zr&&(Yo=Zr)}var mk=o(ta*Lc,P),dB=ta,uB=o(dB,_);if(uB==null)var w5=null;else e(65536>=dB),w5=uB;var F1=a(Yo);if(w5==null||F1==null||mk==null){Aa.a=1;break n}var j5=mk;for(nr=Ns=0;nr<ta;++nr){var Ll=w5[nr],cx=Ll.G,dx=Ll.H,hB=0,N5=1,fB=0;for(fn=0;5>fn;++fn){Zr=J7[fn],cx[fn]=j5,dx[fn]=Ns,!fn&&0<Kn&&(Zr+=1<<Kn);s:{var S5,pk=Zr,A5=Aa,$1=F1,Ole=j5,Lle=Ns,gk=0,Ch=A5.m,Rle=W(Ch,1);if(i($1,0,0,pk),Rle){var Mle=W(Ch,1)+1,Fle=W(Ch,1),mB=W(Ch,Fle==0?1:8);$1[mB]=1,Mle==2&&($1[mB=W(Ch,8)]=1);var C5=1}else{var pB=a(19),gB=W(Ch,4)+4;if(19<gB){A5.a=3;var E5=0;break s}for(S5=0;S5<gB;++S5)pB[ule[S5]]=W(Ch,3);var vk=void 0,B1=void 0,vB=A5,$le=pB,P5=pk,xB=$1,xk=0,Eh=vB.m,yB=8,bB=o(128,P);r:for(;D(bB,0,7,$le,19);){if(W(Eh,1)){var Ble=2+2*W(Eh,3);if((vk=2+W(Eh,Ble))>P5)break r}else vk=P5;for(B1=0;B1<P5&&vk--;){ne(Eh);var wB=bB[0+(127&q(Eh))];J(Eh,Eh.u+wB.g);var ux=wB.value;if(16>ux)xB[B1++]=ux,ux!=0&&(yB=ux);else{var zle=ux==16,jB=ux-16,Ule=cle[jB],NB=W(Eh,lle[jB])+Ule;if(B1+NB>P5)break r;for(var Vle=zle?yB:0;0<NB--;)xB[B1++]=Vle}}xk=1;break r}xk||(vB.a=3),C5=xk}(C5=C5&&!Ch.h)&&(gk=D(Ole,Lle,8,$1,pk)),C5&&gk!=0?E5=gk:(A5.a=3,E5=0)}if(E5==0)break n;if(N5&&dle[fn]==1&&(N5=j5[Ns].g==0),hB+=j5[Ns].g,Ns+=E5,3>=fn){var z1,yk=F1[0];for(z1=1;z1<Zr;++z1)F1[z1]>yk&&(yk=F1[z1]);fB+=yk}}if(Ll.nd=N5,Ll.Qb=0,N5&&(Ll.qb=(cx[3][dx[3]+0].value<<24|cx[1][dx[1]+0].value<<16|cx[2][dx[2]+0].value)>>>0,hB==0&&256>cx[0][dx[0]+0].value&&(Ll.Qb=1,Ll.qb+=cx[0][dx[0]+0].value<<8)),Ll.jc=!Ll.Qb&&6>fB,Ll.jc){var T5,Wd=Ll;for(T5=0;T5<fi;++T5){var Ph=T5,Th=Wd.pd[Ph],I5=Wd.G[0][Wd.H[0]+Ph];256<=I5.value?(Th.g=I5.g+256,Th.value=I5.value):(Th.g=0,Th.value=0,Ph>>=ks(I5,8,Th),Ph>>=ks(Wd.G[1][Wd.H[1]+Ph],16,Th),Ph>>=ks(Wd.G[2][Wd.H[2]+Ph],0,Th),ks(Wd.G[3][Wd.H[3]+Ph],24,Th))}}}Ws.vc=mi,Ws.Wb=ta,Ws.Ya=w5,Ws.yc=mk,or=1;break t}or=0}if(!(ie=or)){K.a=3;break e}if(0<Me){if(ve.ua=1<<Me,!ze(ve.Wa,Me)){K.a=1,ie=0;break e}}else ve.ua=0;var bk=K,SB=oe,qle=de,wk=bk.s,jk=wk.xc;if(bk.c=SB,bk.i=qle,wk.md=Ce(SB,jk),wk.wc=jk==0?-1:(1<<jk)-1,V){K.xb=wle;break e}if((Pe=a(oe*de))==null){K.a=1,ie=0;break e}ie=(ie=Il(K,Pe,0,oe,de,de,null))&&!me.h;break e}return ie?(ee!=null?ee[0]=Pe:(e(Pe==null),e(V)),K.$=0,V||Ic(ve)):Ic(ve),ie}function Fm(T,O){var V=T.c*T.i,K=V+O+16*O;return e(T.c<=O),T.V=a(K),T.V==null?(T.Ta=null,T.Ua=0,T.a=1,0):(T.Ta=T.V,T.Ua=T.Ba+V+O,1)}function Fv(T,O){var V=T.C,K=O-V,ee=T.V,ie=T.Ba+T.c*V;for(e(O<=T.l.o);0<K;){var oe=16<K?16:K,de=T.l.ma,me=T.l.width,ve=me*oe,Pe=de.ca,Me=de.tb+me*V,Fe=T.Ta,_e=T.Ua;Ya(T,oe,ee,ie),os(Fe,_e,Pe,Me,ve),Pl(de,V,V+oe,Pe,Me,me),K-=oe,ee+=oe*T.c,V+=oe}e(V==O),T.C=T.Ma=O}function $v(){this.ub=this.yd=this.td=this.Rb=0}function Bv(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function zv(){this.Fb=this.Bb=this.Cb=0,this.Zb=a(4),this.Lb=a(4)}function zA(){this.Yb=function(){var T=[];return function O(V,K,ee){for(var ie=ee[K],oe=0;oe<ie&&(V.push(ee.length>K+1?[]:0),!(ee.length<K+1));oe++)O(V[oe],K+1,ee)}(T,0,[3,11]),T}()}function LD(){this.jb=a(3),this.Wc=l([4,8],zA),this.Xc=l([4,17],zA)}function RD(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new a(4),this.od=new a(4)}function Uv(){this.ld=this.La=this.dd=this.tc=0}function UA(){this.Na=this.la=0}function MD(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function h1(){this.ad=a(384),this.Za=0,this.Ob=a(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function FD(){this.uc=this.M=this.Nb=0,this.wa=Array(new Uv),this.Y=0,this.ya=Array(new h1),this.aa=0,this.l=new Vv}function VA(){this.y=a(16),this.f=a(8),this.ea=a(8)}function $D(){this.cb=this.a=0,this.sc="",this.m=new $,this.Od=new $v,this.Kc=new Bv,this.ed=new RD,this.Qa=new zv,this.Ic=this.$c=this.Aa=0,this.D=new FD,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=o(8,$),this.ia=0,this.pb=o(4,MD),this.Pa=new LD,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new VA),this.Hd=0,this.rb=Array(new UA),this.sb=0,this.wa=Array(new Uv),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new h1),this.L=this.aa=0,this.gd=l([4,2],Uv),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Vv(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function BD(){var T=new $D;return T!=null&&(T.a=0,T.sc="OK",T.cb=0,T.Xb=0,R1||(R1=WA)),T}function is(T,O,V){return T.a==0&&(T.a=O,T.sc=V,T.cb=0),0}function qA(T,O,V){return 3<=V&&T[O+0]==157&&T[O+1]==1&&T[O+2]==42}function HA(T,O){if(T==null)return 0;if(T.a=0,T.sc="OK",O==null)return is(T,2,"null VP8Io passed to VP8GetHeaders()");var V=O.data,K=O.w,ee=O.ha;if(4>ee)return is(T,7,"Truncated header.");var ie=V[K+0]|V[K+1]<<8|V[K+2]<<16,oe=T.Od;if(oe.Rb=!(1&ie),oe.td=ie>>1&7,oe.yd=ie>>4&1,oe.ub=ie>>5,3<oe.td)return is(T,3,"Incorrect keyframe parameters.");if(!oe.yd)return is(T,4,"Frame not displayable.");K+=3,ee-=3;var de=T.Kc;if(oe.Rb){if(7>ee)return is(T,7,"cannot parse picture header");if(!qA(V,K,ee))return is(T,3,"Bad code word");de.c=16383&(V[K+4]<<8|V[K+3]),de.Td=V[K+4]>>6,de.i=16383&(V[K+6]<<8|V[K+5]),de.Ud=V[K+6]>>6,K+=7,ee-=7,T.za=de.c+15>>4,T.Ub=de.i+15>>4,O.width=de.c,O.height=de.i,O.Da=0,O.j=0,O.v=0,O.va=O.width,O.o=O.height,O.da=0,O.ib=O.width,O.hb=O.height,O.U=O.width,O.T=O.height,i((ie=T.Pa).jb,0,255,ie.jb.length),e((ie=T.Qa)!=null),ie.Cb=0,ie.Bb=0,ie.Fb=1,i(ie.Zb,0,0,ie.Zb.length),i(ie.Lb,0,0,ie.Lb)}if(oe.ub>ee)return is(T,7,"bad partition length");M(ie=T.m,V,K,oe.ub),K+=oe.ub,ee-=oe.ub,oe.Rb&&(de.Ld=pe(ie),de.Kd=pe(ie)),de=T.Qa;var me,ve=T.Pa;if(e(ie!=null),e(de!=null),de.Cb=pe(ie),de.Cb){if(de.Bb=pe(ie),pe(ie)){for(de.Fb=pe(ie),me=0;4>me;++me)de.Zb[me]=pe(ie)?F(ie,7):0;for(me=0;4>me;++me)de.Lb[me]=pe(ie)?F(ie,6):0}if(de.Bb)for(me=0;3>me;++me)ve.jb[me]=pe(ie)?U(ie,8):255}else de.Bb=0;if(ie.Ka)return is(T,3,"cannot parse segment header");if((de=T.ed).zd=pe(ie),de.Tb=U(ie,6),de.wb=U(ie,3),de.Pc=pe(ie),de.Pc&&pe(ie)){for(ve=0;4>ve;++ve)pe(ie)&&(de.vd[ve]=F(ie,6));for(ve=0;4>ve;++ve)pe(ie)&&(de.od[ve]=F(ie,6))}if(T.L=de.Tb==0?0:de.zd?1:2,ie.Ka)return is(T,3,"cannot parse filter header");var Pe=ee;if(ee=me=K,K=me+Pe,de=Pe,T.Xb=(1<<U(T.m,2))-1,Pe<3*(ve=T.Xb))V=7;else{for(me+=3*ve,de-=3*ve,Pe=0;Pe<ve;++Pe){var Me=V[ee+0]|V[ee+1]<<8|V[ee+2]<<16;Me>de&&(Me=de),M(T.Jc[+Pe],V,me,Me),me+=Me,de-=Me,ee+=3}M(T.Jc[+ve],V,me,de),V=me<K?0:5}if(V!=0)return is(T,V,"cannot parse partitions");for(V=U(me=T.m,7),ee=pe(me)?F(me,4):0,K=pe(me)?F(me,4):0,de=pe(me)?F(me,4):0,ve=pe(me)?F(me,4):0,me=pe(me)?F(me,4):0,Pe=T.Qa,Me=0;4>Me;++Me){if(Pe.Cb){var Fe=Pe.Zb[Me];Pe.Fb||(Fe+=V)}else{if(0<Me){T.pb[Me]=T.pb[0];continue}Fe=V}var _e=T.pb[Me];_e.Sc[0]=uk[Xa(Fe+ee,127)],_e.Sc[1]=hk[Xa(Fe+0,127)],_e.Eb[0]=2*uk[Xa(Fe+K,127)],_e.Eb[1]=101581*hk[Xa(Fe+de,127)]>>16,8>_e.Eb[1]&&(_e.Eb[1]=8),_e.Qc[0]=uk[Xa(Fe+ve,117)],_e.Qc[1]=hk[Xa(Fe+me,127)],_e.lc=Fe+me}if(!oe.Rb)return is(T,4,"Not a key frame.");for(pe(ie),oe=T.Pa,V=0;4>V;++V){for(ee=0;8>ee;++ee)for(K=0;3>K;++K)for(de=0;11>de;++de)ve=ue(ie,yle[V][ee][K][de])?U(ie,8):vle[V][ee][K][de],oe.Wc[V][ee].Yb[K][de]=ve;for(ee=0;17>ee;++ee)oe.Xc[V][ee]=oe.Wc[V][ble[ee]]}return T.kc=pe(ie),T.kc&&(T.Bd=U(ie,8)),T.cb=1}function WA(T,O,V,K,ee,ie,oe){var de=O[ee].Yb[V];for(V=0;16>ee;++ee){if(!ue(T,de[V+0]))return ee;for(;!ue(T,de[V+1]);)if(de=O[++ee].Yb[0],V=0,ee==16)return 16;var me=O[ee+1].Yb;if(ue(T,de[V+2])){var ve=T,Pe=0;if(ue(ve,(Fe=de)[(Me=V)+3]))if(ue(ve,Fe[Me+6])){for(de=0,Me=2*(Pe=ue(ve,Fe[Me+8]))+(Fe=ue(ve,Fe[Me+9+Pe])),Pe=0,Fe=ple[Me];Fe[de];++de)Pe+=Pe+ue(ve,Fe[de]);Pe+=3+(8<<Me)}else ue(ve,Fe[Me+7])?(Pe=7+2*ue(ve,165),Pe+=ue(ve,145)):Pe=5+ue(ve,159);else Pe=ue(ve,Fe[Me+4])?3+ue(ve,Fe[Me+5]):2;de=me[2]}else Pe=1,de=me[1];me=oe+gle[ee],0>(ve=T).b&&re(ve);var Me,Fe=ve.b,_e=(Me=ve.Ca>>1)-(ve.I>>Fe)>>31;--ve.b,ve.Ca+=_e,ve.Ca|=1,ve.I-=(Me+1&_e)<<Fe,ie[me]=((Pe^_e)-_e)*K[(0<ee)+0]}return 16}function f1(T){var O=T.rb[T.sb-1];O.la=0,O.Na=0,i(T.zc,0,0,T.zc.length),T.ja=0}function zD(T,O){if(T==null)return 0;if(O==null)return is(T,2,"NULL VP8Io parameter in VP8Decode().");if(!T.cb&&!HA(T,O))return 0;if(e(T.cb),O.ac==null||O.ac(O)){O.ob&&(T.L=0);var V=b5[T.L];if(T.L==2?(T.yb=0,T.zb=0):(T.yb=O.v-V>>4,T.zb=O.j-V>>4,0>T.yb&&(T.yb=0),0>T.zb&&(T.zb=0)),T.Va=O.o+15+V>>4,T.Hb=O.va+15+V>>4,T.Hb>T.za&&(T.Hb=T.za),T.Va>T.Ub&&(T.Va=T.Ub),0<T.L){var K=T.ed;for(V=0;4>V;++V){var ee;if(T.Qa.Cb){var ie=T.Qa.Lb[V];T.Qa.Fb||(ie+=K.Tb)}else ie=K.Tb;for(ee=0;1>=ee;++ee){var oe=T.gd[V][ee],de=ie;if(K.Pc&&(de+=K.vd[0],ee&&(de+=K.od[0])),0<(de=0>de?0:63<de?63:de)){var me=de;0<K.wb&&(me=4<K.wb?me>>2:me>>1)>9-K.wb&&(me=9-K.wb),1>me&&(me=1),oe.dd=me,oe.tc=2*de+me,oe.ld=40<=de?2:15<=de?1:0}else oe.tc=0;oe.La=ee}}}V=0}else is(T,6,"Frame setup failed"),V=T.a;if(V=V==0){if(V){T.$c=0,0<T.Aa||(T.Ic=_le);e:{V=T.Ic,K=4*(me=T.za);var ve=32*me,Pe=me+1,Me=0<T.L?me*(0<T.Aa?2:1):0,Fe=(T.Aa==2?2:1)*me;if((oe=K+832+(ee=3*(16*V+b5[T.L])/2*ve)+(ie=T.Fa!=null&&0<T.Fa.length?T.Kc.c*T.Kc.i:0))!=oe)V=0;else{if(oe>T.Vb){if(T.Vb=0,T.Ec=a(oe),T.Fc=0,T.Ec==null){V=is(T,1,"no memory during frame initialization.");break e}T.Vb=oe}oe=T.Ec,de=T.Fc,T.Ac=oe,T.Bc=de,de+=K,T.Gd=o(ve,VA),T.Hd=0,T.rb=o(Pe+1,UA),T.sb=1,T.wa=Me?o(Me,Uv):null,T.Y=0,T.D.Nb=0,T.D.wa=T.wa,T.D.Y=T.Y,0<T.Aa&&(T.D.Y+=me),e(!0),T.oc=oe,T.pc=de,de+=832,T.ya=o(Fe,h1),T.aa=0,T.D.ya=T.ya,T.D.aa=T.aa,T.Aa==2&&(T.D.aa+=me),T.R=16*me,T.B=8*me,me=(ve=b5[T.L])*T.R,ve=ve/2*T.B,T.sa=oe,T.ta=de+me,T.qa=T.sa,T.ra=T.ta+16*V*T.R+ve,T.Ha=T.qa,T.Ia=T.ra+8*V*T.B+ve,T.$c=0,de+=ee,T.mb=ie?oe:null,T.nb=ie?de:null,e(de+ie<=T.Fc+T.Vb),f1(T),i(T.Ac,T.Bc,0,K),V=1}}if(V){if(O.ka=0,O.y=T.sa,O.O=T.ta,O.f=T.qa,O.N=T.ra,O.ea=T.Ha,O.Vd=T.Ia,O.fa=T.R,O.Rc=T.B,O.F=null,O.J=0,!u5){for(V=-255;255>=V;++V)_s[255+V]=0>V?-V:V;for(V=-1020;1020>=V;++V)Vd[1020+V]=-128>V?-128:127<V?127:V;for(V=-112;112>=V;++V)L1[112+V]=-16>V?-16:15<V?15:V;for(V=-255;510>=V;++V)ox[255+V]=0>V?0:255<V?255:V;u5=1}sx=qD,Ud=UD,k1=KA,ea=VD,qo=YA,as=GA,ix=y1,d5=zm,_1=rk,qm=b1,Hm=nk,wh=Yv,Wm=w1,ax=s5,Gm=r5,jh=_c,O1=$d,Ho=tk,Ol[0]=kc,Ol[1]=HD,Ol[2]=YD,Ol[3]=XD,Ol[4]=QA,Ol[5]=Gv,Ol[6]=JA,Ol[7]=g1,Ol[8]=QD,Ol[9]=ZD,Nh[0]=XA,Nh[1]=GD,Nh[2]=Fd,Nh[3]=Hv,Nh[4]=_i,Nh[5]=KD,Nh[6]=ZA,qd[0]=gh,qd[1]=WD,qd[2]=JD,qd[3]=v1,qd[4]=Bm,qd[5]=ek,qd[6]=x1,V=1}else V=0}V&&(V=function(_e,Je){for(_e.M=0;_e.M<_e.Va;++_e.M){var qe,Ie=_e.Jc[_e.M&_e.Xb],ke=_e.m,Ze=_e;for(qe=0;qe<Ze.za;++qe){var et=ke,Qe=Ze,wt=Qe.Ac,gt=Qe.Bc+4*qe,Ut=Qe.zc,xt=Qe.ya[Qe.aa+qe];if(Qe.Qa.Bb?xt.$b=ue(et,Qe.Pa.jb[0])?2+ue(et,Qe.Pa.jb[2]):ue(et,Qe.Pa.jb[1]):xt.$b=0,Qe.kc&&(xt.Ad=ue(et,Qe.Bd)),xt.Za=!ue(et,145)+0,xt.Za){var Un=xt.Ob,Gn=0;for(Qe=0;4>Qe;++Qe){var Pn,wn=Ut[0+Qe];for(Pn=0;4>Pn;++Pn){wn=xle[wt[gt+Pn]][wn];for(var or=eB[ue(et,wn[0])];0<or;)or=eB[2*or+ue(et,wn[or])];wn=-or,wt[gt+Pn]=wn}r(Un,Gn,wt,gt,4),Gn+=4,Ut[0+Qe]=wn}}else wn=ue(et,156)?ue(et,128)?1:3:ue(et,163)?2:0,xt.Ob[0]=wn,i(wt,gt,wn,4),i(Ut,0,wn,4);xt.Dd=ue(et,142)?ue(et,114)?ue(et,183)?1:3:2:0}if(Ze.m.Ka)return is(_e,7,"Premature end-of-partition0 encountered.");for(;_e.ja<_e.za;++_e.ja){if(Ze=Ie,et=(ke=_e).rb[ke.sb-1],wt=ke.rb[ke.sb+ke.ja],qe=ke.ya[ke.aa+ke.ja],gt=ke.kc?qe.Ad:0)et.la=wt.la=0,qe.Za||(et.Na=wt.Na=0),qe.Hc=0,qe.Gc=0,qe.ia=0;else{var nr,fn;if(et=wt,wt=Ze,gt=ke.Pa.Xc,Ut=ke.ya[ke.aa+ke.ja],xt=ke.pb[Ut.$b],Qe=Ut.ad,Un=0,Gn=ke.rb[ke.sb-1],wn=Pn=0,i(Qe,Un,0,384),Ut.Za)var Ns=0,Aa=gt[3];else{or=a(16);var Ss=et.Na+Gn.Na;if(Ss=R1(wt,gt[1],Ss,xt.Eb,0,or,0),et.Na=Gn.Na=(0<Ss)+0,1<Ss)sx(or,0,Qe,Un);else{var Ca=or[0]+3>>3;for(or=0;256>or;or+=16)Qe[Un+or]=Ca}Ns=1,Aa=gt[0]}var Kn=15&et.la,Qa=15&Gn.la;for(or=0;4>or;++or){var Ja=1&Qa;for(Ca=fn=0;4>Ca;++Ca)Kn=Kn>>1|(Ja=(Ss=R1(wt,Aa,Ss=Ja+(1&Kn),xt.Sc,Ns,Qe,Un))>Ns)<<7,fn=fn<<2|(3<Ss?3:1<Ss?2:Qe[Un+0]!=0),Un+=16;Kn>>=4,Qa=Qa>>1|Ja<<7,Pn=(Pn<<8|fn)>>>0}for(Aa=Kn,Ns=Qa>>4,nr=0;4>nr;nr+=2){for(fn=0,Kn=et.la>>4+nr,Qa=Gn.la>>4+nr,or=0;2>or;++or){for(Ja=1&Qa,Ca=0;2>Ca;++Ca)Ss=Ja+(1&Kn),Kn=Kn>>1|(Ja=0<(Ss=R1(wt,gt[2],Ss,xt.Qc,0,Qe,Un)))<<3,fn=fn<<2|(3<Ss?3:1<Ss?2:Qe[Un+0]!=0),Un+=16;Kn>>=2,Qa=Qa>>1|Ja<<5}wn|=fn<<4*nr,Aa|=Kn<<4<<nr,Ns|=(240&Qa)<<nr}et.la=Aa,Gn.la=Ns,Ut.Hc=Pn,Ut.Gc=wn,Ut.ia=43690&wn?0:xt.ia,gt=!(Pn|wn)}if(0<ke.L&&(ke.wa[ke.Y+ke.ja]=ke.gd[qe.$b][qe.Za],ke.wa[ke.Y+ke.ja].La|=!gt),Ze.Ka)return is(_e,7,"Premature end-of-file encountered.")}if(f1(_e),ke=Je,Ze=1,qe=(Ie=_e).D,et=0<Ie.L&&Ie.M>=Ie.zb&&Ie.M<=Ie.Va,Ie.Aa==0)e:{if(qe.M=Ie.M,qe.uc=et,E1(Ie,qe),Ze=1,qe=(fn=Ie.D).Nb,et=(wn=b5[Ie.L])*Ie.R,wt=wn/2*Ie.B,or=16*qe*Ie.R,Ca=8*qe*Ie.B,gt=Ie.sa,Ut=Ie.ta-et+or,xt=Ie.qa,Qe=Ie.ra-wt+Ca,Un=Ie.Ha,Gn=Ie.Ia-wt+Ca,Qa=(Kn=fn.M)==0,Pn=Kn>=Ie.Va-1,Ie.Aa==2&&E1(Ie,fn),fn.uc)for(Ja=(Ss=Ie).D.M,e(Ss.D.uc),fn=Ss.yb;fn<Ss.Hb;++fn){Ns=fn,Aa=Ja;var Ws=(mi=(Zr=Ss).D).Nb;nr=Zr.R;var mi=mi.wa[mi.Y+Ns],ta=Zr.sa,Yo=Zr.ta+16*Ws*nr+16*Ns,Lc=mi.dd,Gs=mi.tc;if(Gs!=0)if(e(3<=Gs),Zr.L==1)0<Ns&&jh(ta,Yo,nr,Gs+4),mi.La&&Ho(ta,Yo,nr,Gs),0<Aa&&Gm(ta,Yo,nr,Gs+4),mi.La&&O1(ta,Yo,nr,Gs);else{var Hd=Zr.B,Km=Zr.qa,lx=Zr.ra+8*Ws*Hd+8*Ns,Ah=Zr.Ha,Zr=Zr.Ia+8*Ws*Hd+8*Ns;Ws=mi.ld,0<Ns&&(d5(ta,Yo,nr,Gs+4,Lc,Ws),qm(Km,lx,Ah,Zr,Hd,Gs+4,Lc,Ws)),mi.La&&(wh(ta,Yo,nr,Gs,Lc,Ws),ax(Km,lx,Ah,Zr,Hd,Gs,Lc,Ws)),0<Aa&&(ix(ta,Yo,nr,Gs+4,Lc,Ws),_1(Km,lx,Ah,Zr,Hd,Gs+4,Lc,Ws)),mi.La&&(Hm(ta,Yo,nr,Gs,Lc,Ws),Wm(Km,lx,Ah,Zr,Hd,Gs,Lc,Ws))}}if(Ie.ia&&alert("todo:DitherRow"),ke.put!=null){if(fn=16*Kn,Kn=16*(Kn+1),Qa?(ke.y=Ie.sa,ke.O=Ie.ta+or,ke.f=Ie.qa,ke.N=Ie.ra+Ca,ke.ea=Ie.Ha,ke.W=Ie.Ia+Ca):(fn-=wn,ke.y=gt,ke.O=Ut,ke.f=xt,ke.N=Qe,ke.ea=Un,ke.W=Gn),Pn||(Kn-=wn),Kn>ke.o&&(Kn=ke.o),ke.F=null,ke.J=null,Ie.Fa!=null&&0<Ie.Fa.length&&fn<Kn&&(ke.J=A1(Ie,ke,fn,Kn-fn),ke.F=Ie.mb,ke.F==null&&ke.F.length==0)){Ze=is(Ie,3,"Could not decode alpha data.");break e}fn<ke.j&&(wn=ke.j-fn,fn=ke.j,e(!(1&wn)),ke.O+=Ie.R*wn,ke.N+=Ie.B*(wn>>1),ke.W+=Ie.B*(wn>>1),ke.F!=null&&(ke.J+=ke.width*wn)),fn<Kn&&(ke.O+=ke.v,ke.N+=ke.v>>1,ke.W+=ke.v>>1,ke.F!=null&&(ke.J+=ke.v),ke.ka=fn-ke.j,ke.U=ke.va-ke.v,ke.T=Kn-fn,Ze=ke.put(ke))}qe+1!=Ie.Ic||Pn||(r(Ie.sa,Ie.ta-et,gt,Ut+16*Ie.R,et),r(Ie.qa,Ie.ra-wt,xt,Qe+8*Ie.B,wt),r(Ie.Ha,Ie.Ia-wt,Un,Gn+8*Ie.B,wt))}if(!Ze)return is(_e,6,"Output aborted.")}return 1}(T,O)),O.bc!=null&&O.bc(O),V&=1}return V?(T.cb=0,V):0}function Dl(T,O,V,K,ee){ee=T[O+V+32*K]+(ee>>3),T[O+V+32*K]=-256&ee?0>ee?0:255:ee}function qv(T,O,V,K,ee,ie){Dl(T,O,0,V,K+ee),Dl(T,O,1,V,K+ie),Dl(T,O,2,V,K-ie),Dl(T,O,3,V,K-ee)}function ja(T){return(20091*T>>16)+T}function m1(T,O,V,K){var ee,ie=0,oe=a(16);for(ee=0;4>ee;++ee){var de=T[O+0]+T[O+8],me=T[O+0]-T[O+8],ve=(35468*T[O+4]>>16)-ja(T[O+12]),Pe=ja(T[O+4])+(35468*T[O+12]>>16);oe[ie+0]=de+Pe,oe[ie+1]=me+ve,oe[ie+2]=me-ve,oe[ie+3]=de-Pe,ie+=4,O++}for(ee=ie=0;4>ee;++ee)de=(T=oe[ie+0]+4)+oe[ie+8],me=T-oe[ie+8],ve=(35468*oe[ie+4]>>16)-ja(oe[ie+12]),Dl(V,K,0,0,de+(Pe=ja(oe[ie+4])+(35468*oe[ie+12]>>16))),Dl(V,K,1,0,me+ve),Dl(V,K,2,0,me-ve),Dl(V,K,3,0,de-Pe),ie++,K+=32}function GA(T,O,V,K){var ee=T[O+0]+4,ie=35468*T[O+4]>>16,oe=ja(T[O+4]),de=35468*T[O+1]>>16;qv(V,K,0,ee+oe,T=ja(T[O+1]),de),qv(V,K,1,ee+ie,T,de),qv(V,K,2,ee-ie,T,de),qv(V,K,3,ee-oe,T,de)}function UD(T,O,V,K,ee){m1(T,O,V,K),ee&&m1(T,O+16,V,K+4)}function KA(T,O,V,K){Ud(T,O+0,V,K,1),Ud(T,O+32,V,K+128,1)}function VD(T,O,V,K){var ee;for(T=T[O+0]+4,ee=0;4>ee;++ee)for(O=0;4>O;++O)Dl(V,K,O,ee,T)}function YA(T,O,V,K){T[O+0]&&ea(T,O+0,V,K),T[O+16]&&ea(T,O+16,V,K+4),T[O+32]&&ea(T,O+32,V,K+128),T[O+48]&&ea(T,O+48,V,K+128+4)}function qD(T,O,V,K){var ee,ie=a(16);for(ee=0;4>ee;++ee){var oe=T[O+0+ee]+T[O+12+ee],de=T[O+4+ee]+T[O+8+ee],me=T[O+4+ee]-T[O+8+ee],ve=T[O+0+ee]-T[O+12+ee];ie[0+ee]=oe+de,ie[8+ee]=oe-de,ie[4+ee]=ve+me,ie[12+ee]=ve-me}for(ee=0;4>ee;++ee)oe=(T=ie[0+4*ee]+3)+ie[3+4*ee],de=ie[1+4*ee]+ie[2+4*ee],me=ie[1+4*ee]-ie[2+4*ee],ve=T-ie[3+4*ee],V[K+0]=oe+de>>3,V[K+16]=ve+me>>3,V[K+32]=oe-de>>3,V[K+48]=ve-me>>3,K+=64}function p1(T,O,V){var K,ee=O-32,ie=Za,oe=255-T[ee-1];for(K=0;K<V;++K){var de,me=ie,ve=oe+T[O-1];for(de=0;de<V;++de)T[O+de]=me[ve+T[ee+de]];O+=32}}function HD(T,O){p1(T,O,4)}function WD(T,O){p1(T,O,8)}function GD(T,O){p1(T,O,16)}function Fd(T,O){var V;for(V=0;16>V;++V)r(T,O+32*V,T,O-32,16)}function Hv(T,O){var V;for(V=16;0<V;--V)i(T,O,T[O-1],16),O+=32}function Wv(T,O,V){var K;for(K=0;16>K;++K)i(O,V+32*K,T,16)}function XA(T,O){var V,K=16;for(V=0;16>V;++V)K+=T[O-1+32*V]+T[O+V-32];Wv(K>>5,T,O)}function _i(T,O){var V,K=8;for(V=0;16>V;++V)K+=T[O-1+32*V];Wv(K>>4,T,O)}function KD(T,O){var V,K=8;for(V=0;16>V;++V)K+=T[O+V-32];Wv(K>>4,T,O)}function ZA(T,O){Wv(128,T,O)}function Jt(T,O,V){return T+2*O+V+2>>2}function YD(T,O){var V,K=O-32;for(K=new Uint8Array([Jt(T[K-1],T[K+0],T[K+1]),Jt(T[K+0],T[K+1],T[K+2]),Jt(T[K+1],T[K+2],T[K+3]),Jt(T[K+2],T[K+3],T[K+4])]),V=0;4>V;++V)r(T,O+32*V,K,0,K.length)}function XD(T,O){var V=T[O-1],K=T[O-1+32],ee=T[O-1+64],ie=T[O-1+96];xe(T,O+0,16843009*Jt(T[O-1-32],V,K)),xe(T,O+32,16843009*Jt(V,K,ee)),xe(T,O+64,16843009*Jt(K,ee,ie)),xe(T,O+96,16843009*Jt(ee,ie,ie))}function kc(T,O){var V,K=4;for(V=0;4>V;++V)K+=T[O+V-32]+T[O-1+32*V];for(K>>=3,V=0;4>V;++V)i(T,O+32*V,K,4)}function QA(T,O){var V=T[O-1+0],K=T[O-1+32],ee=T[O-1+64],ie=T[O-1-32],oe=T[O+0-32],de=T[O+1-32],me=T[O+2-32],ve=T[O+3-32];T[O+0+96]=Jt(K,ee,T[O-1+96]),T[O+1+96]=T[O+0+64]=Jt(V,K,ee),T[O+2+96]=T[O+1+64]=T[O+0+32]=Jt(ie,V,K),T[O+3+96]=T[O+2+64]=T[O+1+32]=T[O+0+0]=Jt(oe,ie,V),T[O+3+64]=T[O+2+32]=T[O+1+0]=Jt(de,oe,ie),T[O+3+32]=T[O+2+0]=Jt(me,de,oe),T[O+3+0]=Jt(ve,me,de)}function JA(T,O){var V=T[O+1-32],K=T[O+2-32],ee=T[O+3-32],ie=T[O+4-32],oe=T[O+5-32],de=T[O+6-32],me=T[O+7-32];T[O+0+0]=Jt(T[O+0-32],V,K),T[O+1+0]=T[O+0+32]=Jt(V,K,ee),T[O+2+0]=T[O+1+32]=T[O+0+64]=Jt(K,ee,ie),T[O+3+0]=T[O+2+32]=T[O+1+64]=T[O+0+96]=Jt(ee,ie,oe),T[O+3+32]=T[O+2+64]=T[O+1+96]=Jt(ie,oe,de),T[O+3+64]=T[O+2+96]=Jt(oe,de,me),T[O+3+96]=Jt(de,me,me)}function Gv(T,O){var V=T[O-1+0],K=T[O-1+32],ee=T[O-1+64],ie=T[O-1-32],oe=T[O+0-32],de=T[O+1-32],me=T[O+2-32],ve=T[O+3-32];T[O+0+0]=T[O+1+64]=ie+oe+1>>1,T[O+1+0]=T[O+2+64]=oe+de+1>>1,T[O+2+0]=T[O+3+64]=de+me+1>>1,T[O+3+0]=me+ve+1>>1,T[O+0+96]=Jt(ee,K,V),T[O+0+64]=Jt(K,V,ie),T[O+0+32]=T[O+1+96]=Jt(V,ie,oe),T[O+1+32]=T[O+2+96]=Jt(ie,oe,de),T[O+2+32]=T[O+3+96]=Jt(oe,de,me),T[O+3+32]=Jt(de,me,ve)}function g1(T,O){var V=T[O+0-32],K=T[O+1-32],ee=T[O+2-32],ie=T[O+3-32],oe=T[O+4-32],de=T[O+5-32],me=T[O+6-32],ve=T[O+7-32];T[O+0+0]=V+K+1>>1,T[O+1+0]=T[O+0+64]=K+ee+1>>1,T[O+2+0]=T[O+1+64]=ee+ie+1>>1,T[O+3+0]=T[O+2+64]=ie+oe+1>>1,T[O+0+32]=Jt(V,K,ee),T[O+1+32]=T[O+0+96]=Jt(K,ee,ie),T[O+2+32]=T[O+1+96]=Jt(ee,ie,oe),T[O+3+32]=T[O+2+96]=Jt(ie,oe,de),T[O+3+64]=Jt(oe,de,me),T[O+3+96]=Jt(de,me,ve)}function ZD(T,O){var V=T[O-1+0],K=T[O-1+32],ee=T[O-1+64],ie=T[O-1+96];T[O+0+0]=V+K+1>>1,T[O+2+0]=T[O+0+32]=K+ee+1>>1,T[O+2+32]=T[O+0+64]=ee+ie+1>>1,T[O+1+0]=Jt(V,K,ee),T[O+3+0]=T[O+1+32]=Jt(K,ee,ie),T[O+3+32]=T[O+1+64]=Jt(ee,ie,ie),T[O+3+64]=T[O+2+64]=T[O+0+96]=T[O+1+96]=T[O+2+96]=T[O+3+96]=ie}function QD(T,O){var V=T[O-1+0],K=T[O-1+32],ee=T[O-1+64],ie=T[O-1+96],oe=T[O-1-32],de=T[O+0-32],me=T[O+1-32],ve=T[O+2-32];T[O+0+0]=T[O+2+32]=V+oe+1>>1,T[O+0+32]=T[O+2+64]=K+V+1>>1,T[O+0+64]=T[O+2+96]=ee+K+1>>1,T[O+0+96]=ie+ee+1>>1,T[O+3+0]=Jt(de,me,ve),T[O+2+0]=Jt(oe,de,me),T[O+1+0]=T[O+3+32]=Jt(V,oe,de),T[O+1+32]=T[O+3+64]=Jt(K,V,oe),T[O+1+64]=T[O+3+96]=Jt(ee,K,V),T[O+1+96]=Jt(ie,ee,K)}function JD(T,O){var V;for(V=0;8>V;++V)r(T,O+32*V,T,O-32,8)}function v1(T,O){var V;for(V=0;8>V;++V)i(T,O,T[O-1],8),O+=32}function $m(T,O,V){var K;for(K=0;8>K;++K)i(O,V+32*K,T,8)}function gh(T,O){var V,K=8;for(V=0;8>V;++V)K+=T[O+V-32]+T[O-1+32*V];$m(K>>4,T,O)}function ek(T,O){var V,K=4;for(V=0;8>V;++V)K+=T[O+V-32];$m(K>>3,T,O)}function Bm(T,O){var V,K=4;for(V=0;8>V;++V)K+=T[O-1+32*V];$m(K>>3,T,O)}function x1(T,O){$m(128,T,O)}function Kv(T,O,V){var K=T[O-V],ee=T[O+0],ie=3*(ee-K)+ak[1020+T[O-2*V]-T[O+V]],oe=h5[112+(ie+4>>3)];T[O-V]=Za[255+K+h5[112+(ie+3>>3)]],T[O+0]=Za[255+ee-oe]}function e5(T,O,V,K){var ee=T[O+0],ie=T[O+V];return Go[255+T[O-2*V]-T[O-V]]>K||Go[255+ie-ee]>K}function t5(T,O,V,K){return 4*Go[255+T[O-V]-T[O+0]]+Go[255+T[O-2*V]-T[O+V]]<=K}function n5(T,O,V,K,ee){var ie=T[O-3*V],oe=T[O-2*V],de=T[O-V],me=T[O+0],ve=T[O+V],Pe=T[O+2*V],Me=T[O+3*V];return 4*Go[255+de-me]+Go[255+oe-ve]>K?0:Go[255+T[O-4*V]-ie]<=ee&&Go[255+ie-oe]<=ee&&Go[255+oe-de]<=ee&&Go[255+Me-Pe]<=ee&&Go[255+Pe-ve]<=ee&&Go[255+ve-me]<=ee}function r5(T,O,V,K){var ee=2*K+1;for(K=0;16>K;++K)t5(T,O+K,V,ee)&&Kv(T,O+K,V)}function _c(T,O,V,K){var ee=2*K+1;for(K=0;16>K;++K)t5(T,O+K*V,1,ee)&&Kv(T,O+K*V,1)}function $d(T,O,V,K){var ee;for(ee=3;0<ee;--ee)r5(T,O+=4*V,V,K)}function tk(T,O,V,K){var ee;for(ee=3;0<ee;--ee)_c(T,O+=4,V,K)}function vh(T,O,V,K,ee,ie,oe,de){for(ie=2*ie+1;0<ee--;){if(n5(T,O,V,ie,oe))if(e5(T,O,V,de))Kv(T,O,V);else{var me=T,ve=O,Pe=V,Me=me[ve-2*Pe],Fe=me[ve-Pe],_e=me[ve+0],Je=me[ve+Pe],qe=me[ve+2*Pe],Ie=27*(Ze=ak[1020+3*(_e-Fe)+ak[1020+Me-Je]])+63>>7,ke=18*Ze+63>>7,Ze=9*Ze+63>>7;me[ve-3*Pe]=Za[255+me[ve-3*Pe]+Ze],me[ve-2*Pe]=Za[255+Me+ke],me[ve-Pe]=Za[255+Fe+Ie],me[ve+0]=Za[255+_e-Ie],me[ve+Pe]=Za[255+Je-ke],me[ve+2*Pe]=Za[255+qe-Ze]}O+=K}}function kl(T,O,V,K,ee,ie,oe,de){for(ie=2*ie+1;0<ee--;){if(n5(T,O,V,ie,oe))if(e5(T,O,V,de))Kv(T,O,V);else{var me=T,ve=O,Pe=V,Me=me[ve-Pe],Fe=me[ve+0],_e=me[ve+Pe],Je=h5[112+((qe=3*(Fe-Me))+4>>3)],qe=h5[112+(qe+3>>3)],Ie=Je+1>>1;me[ve-2*Pe]=Za[255+me[ve-2*Pe]+Ie],me[ve-Pe]=Za[255+Me+qe],me[ve+0]=Za[255+Fe-Je],me[ve+Pe]=Za[255+_e-Ie]}O+=K}}function y1(T,O,V,K,ee,ie){vh(T,O,V,1,16,K,ee,ie)}function zm(T,O,V,K,ee,ie){vh(T,O,1,V,16,K,ee,ie)}function nk(T,O,V,K,ee,ie){var oe;for(oe=3;0<oe;--oe)kl(T,O+=4*V,V,1,16,K,ee,ie)}function Yv(T,O,V,K,ee,ie){var oe;for(oe=3;0<oe;--oe)kl(T,O+=4,1,V,16,K,ee,ie)}function rk(T,O,V,K,ee,ie,oe,de){vh(T,O,ee,1,8,ie,oe,de),vh(V,K,ee,1,8,ie,oe,de)}function b1(T,O,V,K,ee,ie,oe,de){vh(T,O,1,ee,8,ie,oe,de),vh(V,K,1,ee,8,ie,oe,de)}function w1(T,O,V,K,ee,ie,oe,de){kl(T,O+4*ee,ee,1,8,ie,oe,de),kl(V,K+4*ee,ee,1,8,ie,oe,de)}function s5(T,O,V,K,ee,ie,oe,de){kl(T,O+4,1,ee,8,ie,oe,de),kl(V,K+4,1,ee,8,ie,oe,de)}function Xv(){this.ba=new Cl,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new Yr,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function j1(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function N1(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function i5(){this.ua=0,this.Wa=new ce,this.vb=new ce,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new _,this.yc=new P}function sk(){this.xb=this.a=0,this.l=new Vv,this.ca=new Cl,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new L,this.Pb=0,this.wd=new L,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new i5,this.ab=0,this.gc=o(4,N1),this.Oc=0}function Zv(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Vv,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function Um(T,O,V,K,ee,ie,oe){for(T=T==null?0:T[O+0],O=0;O<oe;++O)ee[ie+O]=T+V[K+O]&255,T=ee[ie+O]}function S1(T,O,V,K,ee,ie,oe){var de;if(T==null)Um(null,null,V,K,ee,ie,oe);else for(de=0;de<oe;++de)ee[ie+de]=T[O+de]+V[K+de]&255}function xh(T,O,V,K,ee,ie,oe){if(T==null)Um(null,null,V,K,ee,ie,oe);else{var de,me=T[O+0],ve=me,Pe=me;for(de=0;de<oe;++de)ve=Pe+(me=T[O+de])-ve,Pe=V[K+de]+(-256&ve?0>ve?0:255:ve)&255,ve=me,ee[ie+de]=Pe}}function A1(T,O,V,K){var ee=O.width,ie=O.o;if(e(T!=null&&O!=null),0>V||0>=K||V+K>ie)return null;if(!T.Cc){if(T.ga==null){var oe;if(T.ga=new Zv,(oe=T.ga==null)||(oe=O.width*O.o,e(T.Gb.length==0),T.Gb=a(oe),T.Uc=0,T.Gb==null?oe=0:(T.mb=T.Gb,T.nb=T.Uc,T.rc=null,oe=1),oe=!oe),!oe){oe=T.ga;var de=T.Fa,me=T.P,ve=T.qc,Pe=T.mb,Me=T.nb,Fe=me+1,_e=ve-1,Je=oe.l;if(e(de!=null&&Pe!=null&&O!=null),Sh[0]=null,Sh[1]=Um,Sh[2]=S1,Sh[3]=xh,oe.ca=Pe,oe.tb=Me,oe.c=O.width,oe.i=O.height,e(0<oe.c&&0<oe.i),1>=ve)O=0;else if(oe.$a=de[me+0]>>0&3,oe.Z=de[me+0]>>2&3,oe.Lc=de[me+0]>>4&3,me=de[me+0]>>6&3,0>oe.$a||1<oe.$a||4<=oe.Z||1<oe.Lc||me)O=0;else if(Je.put=Ec,Je.ac=hi,Je.bc=Pc,Je.ma=oe,Je.width=O.width,Je.height=O.height,Je.Da=O.Da,Je.v=O.v,Je.va=O.va,Je.j=O.j,Je.o=O.o,oe.$a)e:{e(oe.$a==1),O=Uo();t:for(;;){if(O==null){O=0;break e}if(e(oe!=null),oe.mc=O,O.c=oe.c,O.i=oe.i,O.l=oe.l,O.l.ma=oe,O.l.width=oe.c,O.l.height=oe.i,O.a=0,z(O.m,de,Fe,_e),!Dc(oe.c,oe.i,1,O,null)||(O.ab==1&&O.gc[0].hc==3&&Md(O.s)?(oe.ic=1,de=O.c*O.i,O.Ta=null,O.Ua=0,O.V=a(de),O.Ba=0,O.V==null?(O.a=1,O=0):O=1):(oe.ic=0,O=Fm(O,oe.c)),!O))break t;O=1;break e}oe.mc=null,O=0}else O=_e>=oe.c*oe.i;oe=!O}if(oe)return null;T.ga.Lc!=1?T.Ga=0:K=ie-V}e(T.ga!=null),e(V+K<=ie);e:{if(O=(de=T.ga).c,ie=de.l.o,de.$a==0){if(Fe=T.rc,_e=T.Vc,Je=T.Fa,me=T.P+1+V*O,ve=T.mb,Pe=T.nb+V*O,e(me<=T.P+T.qc),de.Z!=0)for(e(Sh[de.Z]!=null),oe=0;oe<K;++oe)Sh[de.Z](Fe,_e,Je,me,ve,Pe,O),Fe=ve,_e=Pe,Pe+=O,me+=O;else for(oe=0;oe<K;++oe)r(ve,Pe,Je,me,O),Fe=ve,_e=Pe,Pe+=O,me+=O;T.rc=Fe,T.Vc=_e}else{if(e(de.mc!=null),O=V+K,e((oe=de.mc)!=null),e(O<=oe.i),oe.C>=O)O=1;else if(de.ic||Oe(),de.ic){de=oe.V,Fe=oe.Ba,_e=oe.c;var qe=oe.i,Ie=(Je=1,me=oe.$/_e,ve=oe.$%_e,Pe=oe.m,Me=oe.s,oe.$),ke=_e*qe,Ze=_e*O,et=Me.wc,Qe=Ie<Ze?ws(Me,ve,me):null;e(Ie<=ke),e(O<=qe),e(Md(Me));t:for(;;){for(;!Pe.h&&Ie<Ze;){if(ve&et||(Qe=ws(Me,ve,me)),e(Qe!=null),ne(Pe),256>(qe=wa(Qe.G[0],Qe.H[0],Pe)))de[Fe+Ie]=qe,++Ie,++ve>=_e&&(ve=0,++me<=O&&!(me%16)&&Tl(oe,me));else{if(!(280>qe)){Je=0;break t}qe=El(qe-256,Pe);var wt,gt=wa(Qe.G[4],Qe.H[4],Pe);if(ne(Pe),!(Ie>=(gt=Tc(_e,gt=El(gt,Pe)))&&ke-Ie>=qe)){Je=0;break t}for(wt=0;wt<qe;++wt)de[Fe+Ie+wt]=de[Fe+Ie+wt-gt];for(Ie+=qe,ve+=qe;ve>=_e;)ve-=_e,++me<=O&&!(me%16)&&Tl(oe,me);Ie<Ze&&ve&et&&(Qe=ws(Me,ve,me))}e(Pe.h==Y(Pe))}Tl(oe,me>O?O:me);break t}!Je||Pe.h&&Ie<ke?(Je=0,oe.a=Pe.h?5:3):oe.$=Ie,O=Je}else O=Il(oe,oe.V,oe.Ba,oe.c,oe.i,O,Fv);if(!O){K=0;break e}}V+K>=ie&&(T.Cc=1),K=1}if(!K)return null;if(T.Cc&&((K=T.ga)!=null&&(K.mc=null),T.ga=null,0<T.Ga))return alert("todo:WebPDequantizeLevels"),null}return T.nb+V*ee}function B(T,O,V,K,ee,ie){for(;0<ee--;){var oe,de=T,me=O+(V?1:0),ve=T,Pe=O+(V?0:3);for(oe=0;oe<K;++oe){var Me=ve[Pe+4*oe];Me!=255&&(Me*=32897,de[me+4*oe+0]=de[me+4*oe+0]*Me>>23,de[me+4*oe+1]=de[me+4*oe+1]*Me>>23,de[me+4*oe+2]=de[me+4*oe+2]*Me>>23)}O+=ie}}function te(T,O,V,K,ee){for(;0<K--;){var ie;for(ie=0;ie<V;++ie){var oe=T[O+2*ie+0],de=15&(ve=T[O+2*ie+1]),me=4369*de,ve=(240&ve|ve>>4)*me>>16;T[O+2*ie+0]=(240&oe|oe>>4)*me>>16&240|(15&oe|oe<<4)*me>>16>>4&15,T[O+2*ie+1]=240&ve|de}O+=ee}}function we(T,O,V,K,ee,ie,oe,de){var me,ve,Pe=255;for(ve=0;ve<ee;++ve){for(me=0;me<K;++me){var Me=T[O+me];ie[oe+4*me]=Me,Pe&=Me}O+=V,oe+=de}return Pe!=255}function Ee(T,O,V,K,ee){var ie;for(ie=0;ie<ee;++ie)V[K+ie]=T[O+ie]>>8}function Oe(){Wo=B,mr=te,pr=we,os=Ee}function Ge(T,O,V){j[T]=function(K,ee,ie,oe,de,me,ve,Pe,Me,Fe,_e,Je,qe,Ie,ke,Ze,et){var Qe,wt=et-1>>1,gt=de[me+0]|ve[Pe+0]<<16,Ut=Me[Fe+0]|_e[Je+0]<<16;e(K!=null);var xt=3*gt+Ut+131074>>2;for(O(K[ee+0],255&xt,xt>>16,qe,Ie),ie!=null&&(xt=3*Ut+gt+131074>>2,O(ie[oe+0],255&xt,xt>>16,ke,Ze)),Qe=1;Qe<=wt;++Qe){var Un=de[me+Qe]|ve[Pe+Qe]<<16,Gn=Me[Fe+Qe]|_e[Je+Qe]<<16,Pn=gt+Un+Ut+Gn+524296,wn=Pn+2*(Un+Ut)>>3;xt=wn+gt>>1,gt=(Pn=Pn+2*(gt+Gn)>>3)+Un>>1,O(K[ee+2*Qe-1],255&xt,xt>>16,qe,Ie+(2*Qe-1)*V),O(K[ee+2*Qe-0],255&gt,gt>>16,qe,Ie+(2*Qe-0)*V),ie!=null&&(xt=Pn+Ut>>1,gt=wn+Gn>>1,O(ie[oe+2*Qe-1],255&xt,xt>>16,ke,Ze+(2*Qe-1)*V),O(ie[oe+2*Qe+0],255&gt,gt>>16,ke,Ze+(2*Qe+0)*V)),gt=Un,Ut=Gn}1&et||(xt=3*gt+Ut+131074>>2,O(K[ee+et-1],255&xt,xt>>16,qe,Ie+(et-1)*V),ie!=null&&(xt=3*Ut+gt+131074>>2,O(ie[oe+et-1],255&xt,xt>>16,ke,Ze+(et-1)*V)))}}function it(){Ko[f5]=jle,Ko[m5]=nB,Ko[Z7]=Nle,Ko[p5]=rB,Ko[g5]=sB,Ko[ok]=iB,Ko[Q7]=Sle,Ko[lk]=nB,Ko[ck]=rB,Ko[v5]=sB,Ko[dk]=iB}function bt(T){return T&~Ale?0>T?0:255:T>>aB}function Ft(T,O){return bt((19077*T>>8)+(26149*O>>8)-14234)}function ln(T,O,V){return bt((19077*T>>8)-(6419*O>>8)-(13320*V>>8)+8708)}function rn(T,O){return bt((19077*T>>8)+(33050*O>>8)-17685)}function Cn(T,O,V,K,ee){K[ee+0]=Ft(T,V),K[ee+1]=ln(T,O,V),K[ee+2]=rn(T,O)}function Mr(T,O,V,K,ee){K[ee+0]=rn(T,O),K[ee+1]=ln(T,O,V),K[ee+2]=Ft(T,V)}function Xr(T,O,V,K,ee){var ie=ln(T,O,V);O=ie<<3&224|rn(T,O)>>3,K[ee+0]=248&Ft(T,V)|ie>>5,K[ee+1]=O}function js(T,O,V,K,ee){var ie=240&rn(T,O)|15;K[ee+0]=240&Ft(T,V)|ln(T,O,V)>>4,K[ee+1]=ie}function Oi(T,O,V,K,ee){K[ee+0]=255,Cn(T,O,V,K,ee+1)}function Hs(T,O,V,K,ee){Mr(T,O,V,K,ee),K[ee+3]=255}function _l(T,O,V,K,ee){Cn(T,O,V,K,ee),K[ee+3]=255}function Xa(T,O){return 0>T?0:T>O?O:T}function Oc(T,O,V){j[T]=function(K,ee,ie,oe,de,me,ve,Pe,Me){for(var Fe=Pe+(-2&Me)*V;Pe!=Fe;)O(K[ee+0],ie[oe+0],de[me+0],ve,Pe),O(K[ee+1],ie[oe+0],de[me+0],ve,Pe+V),ee+=2,++oe,++me,Pe+=2*V;1&Me&&O(K[ee+0],ie[oe+0],de[me+0],ve,Pe)}}function a5(T,O,V){return V==0?T==0?O==0?6:5:O==0?4:0:V}function C1(T,O,V,K,ee){switch(T>>>30){case 3:Ud(O,V,K,ee,0);break;case 2:as(O,V,K,ee);break;case 1:ea(O,V,K,ee)}}function E1(T,O){var V,K,ee=O.M,ie=O.Nb,oe=T.oc,de=T.pc+40,me=T.oc,ve=T.pc+584,Pe=T.oc,Me=T.pc+600;for(V=0;16>V;++V)oe[de+32*V-1]=129;for(V=0;8>V;++V)me[ve+32*V-1]=129,Pe[Me+32*V-1]=129;for(0<ee?oe[de-1-32]=me[ve-1-32]=Pe[Me-1-32]=129:(i(oe,de-32-1,127,21),i(me,ve-32-1,127,9),i(Pe,Me-32-1,127,9)),K=0;K<T.za;++K){var Fe=O.ya[O.aa+K];if(0<K){for(V=-1;16>V;++V)r(oe,de+32*V-4,oe,de+32*V+12,4);for(V=-1;8>V;++V)r(me,ve+32*V-4,me,ve+32*V+4,4),r(Pe,Me+32*V-4,Pe,Me+32*V+4,4)}var _e=T.Gd,Je=T.Hd+K,qe=Fe.ad,Ie=Fe.Hc;if(0<ee&&(r(oe,de-32,_e[Je].y,0,16),r(me,ve-32,_e[Je].f,0,8),r(Pe,Me-32,_e[Je].ea,0,8)),Fe.Za){var ke=oe,Ze=de-32+16;for(0<ee&&(K>=T.za-1?i(ke,Ze,_e[Je].y[15],4):r(ke,Ze,_e[Je+1].y,0,4)),V=0;4>V;V++)ke[Ze+128+V]=ke[Ze+256+V]=ke[Ze+384+V]=ke[Ze+0+V];for(V=0;16>V;++V,Ie<<=2)ke=oe,Ze=de+lB[V],Ol[Fe.Ob[V]](ke,Ze),C1(Ie,qe,16*+V,ke,Ze)}else if(ke=a5(K,ee,Fe.Ob[0]),Nh[ke](oe,de),Ie!=0)for(V=0;16>V;++V,Ie<<=2)C1(Ie,qe,16*+V,oe,de+lB[V]);for(V=Fe.Gc,ke=a5(K,ee,Fe.Dd),qd[ke](me,ve),qd[ke](Pe,Me),Ie=qe,ke=me,Ze=ve,255&(Fe=V>>0)&&(170&Fe?k1(Ie,256,ke,Ze):qo(Ie,256,ke,Ze)),Fe=Pe,Ie=Me,255&(V>>=8)&&(170&V?k1(qe,320,Fe,Ie):qo(qe,320,Fe,Ie)),ee<T.Ub-1&&(r(_e[Je].y,0,oe,de+480,16),r(_e[Je].f,0,me,ve+224,8),r(_e[Je].ea,0,Pe,Me+224,8)),V=8*ie*T.B,_e=T.sa,Je=T.ta+16*K+16*ie*T.R,qe=T.qa,Fe=T.ra+8*K+V,Ie=T.Ha,ke=T.Ia+8*K+V,V=0;16>V;++V)r(_e,Je+V*T.R,oe,de+32*V,16);for(V=0;8>V;++V)r(qe,Fe+V*T.B,me,ve+32*V,8),r(Ie,ke+V*T.B,Pe,Me+32*V,8)}}function Qv(T,O,V,K,ee,ie,oe,de,me){var ve=[0],Pe=[0],Me=0,Fe=me!=null?me.kd:0,_e=me??new j1;if(T==null||12>V)return 7;_e.data=T,_e.w=O,_e.ha=V,O=[O],V=[V],_e.gb=[_e.gb];e:{var Je=O,qe=V,Ie=_e.gb;if(e(T!=null),e(qe!=null),e(Ie!=null),Ie[0]=0,12<=qe[0]&&!n(T,Je[0],"RIFF")){if(n(T,Je[0]+8,"WEBP")){Ie=3;break e}var ke=$e(T,Je[0]+4);if(12>ke||4294967286<ke){Ie=3;break e}if(Fe&&ke>qe[0]-8){Ie=7;break e}Ie[0]=ke,Je[0]+=12,qe[0]-=12}Ie=0}if(Ie!=0)return Ie;for(ke=0<_e.gb[0],V=V[0];;){e:{var Ze=T;qe=O,Ie=V;var et=ve,Qe=Pe,wt=Je=[0];if((xt=Me=[Me])[0]=0,8>Ie[0])Ie=7;else{if(!n(Ze,qe[0],"VP8X")){if($e(Ze,qe[0]+4)!=10){Ie=3;break e}if(18>Ie[0]){Ie=7;break e}var gt=$e(Ze,qe[0]+8),Ut=1+je(Ze,qe[0]+12);if(2147483648<=Ut*(Ze=1+je(Ze,qe[0]+15))){Ie=3;break e}wt!=null&&(wt[0]=gt),et!=null&&(et[0]=Ut),Qe!=null&&(Qe[0]=Ze),qe[0]+=18,Ie[0]-=18,xt[0]=1}Ie=0}}if(Me=Me[0],Je=Je[0],Ie!=0)return Ie;if(qe=!!(2&Je),!ke&&Me)return 3;if(ie!=null&&(ie[0]=!!(16&Je)),oe!=null&&(oe[0]=qe),de!=null&&(de[0]=0),oe=ve[0],Je=Pe[0],Me&&qe&&me==null){Ie=0;break}if(4>V){Ie=7;break}if(ke&&Me||!ke&&!Me&&!n(T,O[0],"ALPH")){V=[V],_e.na=[_e.na],_e.P=[_e.P],_e.Sa=[_e.Sa];e:{gt=T,Ie=O,ke=V;var xt=_e.gb;et=_e.na,Qe=_e.P,wt=_e.Sa,Ut=22,e(gt!=null),e(ke!=null),Ze=Ie[0];var Un=ke[0];for(e(et!=null),e(wt!=null),et[0]=null,Qe[0]=null,wt[0]=0;;){if(Ie[0]=Ze,ke[0]=Un,8>Un){Ie=7;break e}var Gn=$e(gt,Ze+4);if(4294967286<Gn){Ie=3;break e}var Pn=8+Gn+1&-2;if(Ut+=Pn,0<xt&&Ut>xt){Ie=3;break e}if(!n(gt,Ze,"VP8 ")||!n(gt,Ze,"VP8L")){Ie=0;break e}if(Un[0]<Pn){Ie=7;break e}n(gt,Ze,"ALPH")||(et[0]=gt,Qe[0]=Ze+8,wt[0]=Gn),Ze+=Pn,Un-=Pn}}if(V=V[0],_e.na=_e.na[0],_e.P=_e.P[0],_e.Sa=_e.Sa[0],Ie!=0)break}V=[V],_e.Ja=[_e.Ja],_e.xa=[_e.xa];e:if(xt=T,Ie=O,ke=V,et=_e.gb[0],Qe=_e.Ja,wt=_e.xa,gt=Ie[0],Ze=!n(xt,gt,"VP8 "),Ut=!n(xt,gt,"VP8L"),e(xt!=null),e(ke!=null),e(Qe!=null),e(wt!=null),8>ke[0])Ie=7;else{if(Ze||Ut){if(xt=$e(xt,gt+4),12<=et&&xt>et-12){Ie=3;break e}if(Fe&&xt>ke[0]-8){Ie=7;break e}Qe[0]=xt,Ie[0]+=8,ke[0]-=8,wt[0]=Ut}else wt[0]=5<=ke[0]&&xt[gt+0]==47&&!(xt[gt+4]>>5),Qe[0]=ke[0];Ie=0}if(V=V[0],_e.Ja=_e.Ja[0],_e.xa=_e.xa[0],O=O[0],Ie!=0)break;if(4294967286<_e.Ja)return 3;if(de==null||qe||(de[0]=_e.xa?2:1),oe=[oe],Je=[Je],_e.xa){if(5>V){Ie=7;break}de=oe,Fe=Je,qe=ie,T==null||5>V?T=0:5<=V&&T[O+0]==47&&!(T[O+4]>>5)?(ke=[0],xt=[0],et=[0],z(Qe=new L,T,O,V),qt(Qe,ke,xt,et)?(de!=null&&(de[0]=ke[0]),Fe!=null&&(Fe[0]=xt[0]),qe!=null&&(qe[0]=et[0]),T=1):T=0):T=0}else{if(10>V){Ie=7;break}de=Je,T==null||10>V||!qA(T,O+3,V-3)?T=0:(Fe=T[O+0]|T[O+1]<<8|T[O+2]<<16,qe=16383&(T[O+7]<<8|T[O+6]),T=16383&(T[O+9]<<8|T[O+8]),1&Fe||3<(Fe>>1&7)||!(Fe>>4&1)||Fe>>5>=_e.Ja||!qe||!T?T=0:(oe&&(oe[0]=qe),de&&(de[0]=T),T=1))}if(!T||(oe=oe[0],Je=Je[0],Me&&(ve[0]!=oe||Pe[0]!=Je)))return 3;me!=null&&(me[0]=_e,me.offset=O-me.w,e(4294967286>O-me.w),e(me.offset==me.ha-V));break}return Ie==0||Ie==7&&Me&&me==null?(ie!=null&&(ie[0]|=_e.na!=null&&0<_e.na.length),K!=null&&(K[0]=oe),ee!=null&&(ee[0]=Je),0):Ie}function P1(T,O,V){var K=O.width,ee=O.height,ie=0,oe=0,de=K,me=ee;if(O.Da=T!=null&&0<T.Da,O.Da&&(de=T.cd,me=T.bd,ie=T.v,oe=T.j,11>V||(ie&=-2,oe&=-2),0>ie||0>oe||0>=de||0>=me||ie+de>K||oe+me>ee))return 0;if(O.v=ie,O.j=oe,O.va=ie+de,O.o=oe+me,O.U=de,O.T=me,O.da=T!=null&&0<T.da,O.da){if(!Te(de,me,V=[T.ib],ie=[T.hb]))return 0;O.ib=V[0],O.hb=ie[0]}return O.ob=T!=null&&T.ob,O.Kb=T==null||!T.Sd,O.da&&(O.ob=O.ib<3*K/4&&O.hb<3*ee/4,O.Kb=0),1}function T1(T){if(T==null)return 2;if(11>T.S){var O=T.f.RGBA;O.fb+=(T.height-1)*O.A,O.A=-O.A}else O=T.f.kb,T=T.height,O.O+=(T-1)*O.fa,O.fa=-O.fa,O.N+=(T-1>>1)*O.Ab,O.Ab=-O.Ab,O.W+=(T-1>>1)*O.Db,O.Db=-O.Db,O.F!=null&&(O.J+=(T-1)*O.lb,O.lb=-O.lb);return 0}function Jv(T,O,V,K){if(K==null||0>=T||0>=O)return 2;if(V!=null){if(V.Da){var ee=V.cd,ie=V.bd,oe=-2&V.v,de=-2&V.j;if(0>oe||0>de||0>=ee||0>=ie||oe+ee>T||de+ie>O)return 2;T=ee,O=ie}if(V.da){if(!Te(T,O,ee=[V.ib],ie=[V.hb]))return 2;T=ee[0],O=ie[0]}}K.width=T,K.height=O;e:{var me=K.width,ve=K.height;if(T=K.S,0>=me||0>=ve||!(T>=f5&&13>T))T=2;else{if(0>=K.Rd&&K.sd==null){oe=ie=ee=O=0;var Pe=(de=me*cB[T])*ve;if(11>T||(ie=(ve+1)/2*(O=(me+1)/2),T==12&&(oe=(ee=me)*ve)),(ve=a(Pe+2*ie+oe))==null){T=1;break e}K.sd=ve,11>T?((me=K.f.RGBA).eb=ve,me.fb=0,me.A=de,me.size=Pe):((me=K.f.kb).y=ve,me.O=0,me.fa=de,me.Fd=Pe,me.f=ve,me.N=0+Pe,me.Ab=O,me.Cd=ie,me.ea=ve,me.W=0+Pe+ie,me.Db=O,me.Ed=ie,T==12&&(me.F=ve,me.J=0+Pe+2*ie),me.Tc=oe,me.lb=ee)}if(O=1,ee=K.S,ie=K.width,oe=K.height,ee>=f5&&13>ee)if(11>ee)T=K.f.RGBA,O&=(de=Math.abs(T.A))*(oe-1)+ie<=T.size,O&=de>=ie*cB[ee],O&=T.eb!=null;else{T=K.f.kb,de=(ie+1)/2,Pe=(oe+1)/2,me=Math.abs(T.fa),ve=Math.abs(T.Ab);var Me=Math.abs(T.Db),Fe=Math.abs(T.lb),_e=Fe*(oe-1)+ie;O&=me*(oe-1)+ie<=T.Fd,O&=ve*(Pe-1)+de<=T.Cd,O=(O&=Me*(Pe-1)+de<=T.Ed)&me>=ie&ve>=de&Me>=de,O&=T.y!=null,O&=T.f!=null,O&=T.ea!=null,ee==12&&(O&=Fe>=ie,O&=_e<=T.Tc,O&=T.F!=null)}else O=0;T=O?0:2}}return T!=0||V!=null&&V.fd&&(T=T1(K)),T}var fi=64,ex=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],tx=24,nx=32,I1=8,Na=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];Ue("Predictor0","PredictorAdd0"),j.Predictor0=function(){return 4278190080},j.Predictor1=function(T){return T},j.Predictor2=function(T,O,V){return O[V+0]},j.Predictor3=function(T,O,V){return O[V+1]},j.Predictor4=function(T,O,V){return O[V-1]},j.Predictor5=function(T,O,V){return at(at(T,O[V+1]),O[V+0])},j.Predictor6=function(T,O,V){return at(T,O[V-1])},j.Predictor7=function(T,O,V){return at(T,O[V+0])},j.Predictor8=function(T,O,V){return at(O[V-1],O[V+0])},j.Predictor9=function(T,O,V){return at(O[V+0],O[V+1])},j.Predictor10=function(T,O,V){return at(at(T,O[V-1]),at(O[V+0],O[V+1]))},j.Predictor11=function(T,O,V){var K=O[V+0];return 0>=nt(K>>24&255,T>>24&255,(O=O[V-1])>>24&255)+nt(K>>16&255,T>>16&255,O>>16&255)+nt(K>>8&255,T>>8&255,O>>8&255)+nt(255&K,255&T,255&O)?K:T},j.Predictor12=function(T,O,V){var K=O[V+0];return(jt((T>>24&255)+(K>>24&255)-((O=O[V-1])>>24&255))<<24|jt((T>>16&255)+(K>>16&255)-(O>>16&255))<<16|jt((T>>8&255)+(K>>8&255)-(O>>8&255))<<8|jt((255&T)+(255&K)-(255&O)))>>>0},j.Predictor13=function(T,O,V){var K=O[V-1];return(Ve((T=at(T,O[V+0]))>>24&255,K>>24&255)<<24|Ve(T>>16&255,K>>16&255)<<16|Ve(T>>8&255,K>>8&255)<<8|Ve(T>>0&255,K>>0&255))>>>0};var ik=j.PredictorAdd0;j.PredictorAdd1=vt,Ue("Predictor2","PredictorAdd2"),Ue("Predictor3","PredictorAdd3"),Ue("Predictor4","PredictorAdd4"),Ue("Predictor5","PredictorAdd5"),Ue("Predictor6","PredictorAdd6"),Ue("Predictor7","PredictorAdd7"),Ue("Predictor8","PredictorAdd8"),Ue("Predictor9","PredictorAdd9"),Ue("Predictor10","PredictorAdd10"),Ue("Predictor11","PredictorAdd11"),Ue("Predictor12","PredictorAdd12"),Ue("Predictor13","PredictorAdd13");var D1=j.PredictorAdd2;Yt("ColorIndexInverseTransform","MapARGB","32b",function(T){return T>>8&255},function(T){return T}),Yt("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(T){return T},function(T){return T>>8&255});var o5,Vo=j.ColorIndexInverseTransform,rx=j.MapARGB,l5=j.VP8LColorIndexInverseTransformAlpha,c5=j.MapAlpha,yh=j.VP8LPredictorsAdd=[];yh.length=16,(j.VP8LPredictors=[]).length=16,(j.VP8LPredictorsAdd_C=[]).length=16,(j.VP8LPredictors_C=[]).length=16;var Vm,Sa,Ji,bh,Bd,zd,sx,Ud,as,k1,ea,qo,ix,d5,_1,qm,Hm,wh,Wm,ax,Gm,jh,O1,Ho,Wo,mr,pr,os,_s=a(511),Vd=a(2041),L1=a(225),ox=a(767),u5=0,ak=Vd,h5=L1,Za=ox,Go=_s,f5=0,m5=1,Z7=2,p5=3,g5=4,ok=5,Q7=6,lk=7,ck=8,v5=9,dk=10,lle=[2,3,7],cle=[3,3,11],J7=[280,256,256,256,40],dle=[0,1,1,1,0],ule=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],hle=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],fle=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],mle=8,uk=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],hk=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],R1=null,ple=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],gle=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],eB=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],vle=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],xle=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],yle=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],ble=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Nh=[],Ol=[],qd=[],wle=1,tB=2,Sh=[],Ko=[];Ge("UpsampleRgbLinePair",Cn,3),Ge("UpsampleBgrLinePair",Mr,3),Ge("UpsampleRgbaLinePair",_l,4),Ge("UpsampleBgraLinePair",Hs,4),Ge("UpsampleArgbLinePair",Oi,4),Ge("UpsampleRgba4444LinePair",js,2),Ge("UpsampleRgb565LinePair",Xr,2);var jle=j.UpsampleRgbLinePair,Nle=j.UpsampleBgrLinePair,nB=j.UpsampleRgbaLinePair,rB=j.UpsampleBgraLinePair,sB=j.UpsampleArgbLinePair,iB=j.UpsampleRgba4444LinePair,Sle=j.UpsampleRgb565LinePair,x5=16,y5=1<<x5-1,M1=-227,fk=482,aB=6,Ale=(256<<aB)-1,oB=0,Cle=a(256),Ele=a(256),Ple=a(256),Tle=a(256),Ile=a(fk-M1),Dle=a(fk-M1);Oc("YuvToRgbRow",Cn,3),Oc("YuvToBgrRow",Mr,3),Oc("YuvToRgbaRow",_l,4),Oc("YuvToBgraRow",Hs,4),Oc("YuvToArgbRow",Oi,4),Oc("YuvToRgba4444Row",js,2),Oc("YuvToRgb565Row",Xr,2);var lB=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],b5=[0,2,8],kle=[8,7,6,4,4,2,2,2,1,1,1,1],_le=1;this.WebPDecodeRGBA=function(T,O,V,K,ee){var ie=m5,oe=new Xv,de=new Cl;oe.ba=de,de.S=ie,de.width=[de.width],de.height=[de.height];var me=de.width,ve=de.height,Pe=new Rd;if(Pe==null||T==null)var Me=2;else e(Pe!=null),Me=Qv(T,O,V,Pe.width,Pe.height,Pe.Pd,Pe.Qd,Pe.format,null);if(Me!=0?me=0:(me!=null&&(me[0]=Pe.width[0]),ve!=null&&(ve[0]=Pe.height[0]),me=1),me){de.width=de.width[0],de.height=de.height[0],K!=null&&(K[0]=de.width),ee!=null&&(ee[0]=de.height);e:{if(K=new Vv,(ee=new j1).data=T,ee.w=O,ee.ha=V,ee.kd=1,O=[0],e(ee!=null),((T=Qv(ee.data,ee.w,ee.ha,null,null,null,O,null,ee))==0||T==7)&&O[0]&&(T=4),(O=T)==0){if(e(oe!=null),K.data=ee.data,K.w=ee.w+ee.offset,K.ha=ee.ha-ee.offset,K.put=Ec,K.ac=hi,K.bc=Pc,K.ma=oe,ee.xa){if((T=Uo())==null){oe=1;break e}if(function(Fe,_e){var Je=[0],qe=[0],Ie=[0];t:for(;;){if(Fe==null)return 0;if(_e==null)return Fe.a=2,0;if(Fe.l=_e,Fe.a=0,z(Fe.m,_e.data,_e.w,_e.ha),!qt(Fe.m,Je,qe,Ie)){Fe.a=3;break t}if(Fe.xb=tB,_e.width=Je[0],_e.height=qe[0],!Dc(Je[0],qe[0],1,Fe,null))break t;return 1}return e(Fe.a!=0),0}(T,K)){if(K=(O=Jv(K.width,K.height,oe.Oa,oe.ba))==0){t:{K=T;n:for(;;){if(K==null){K=0;break t}if(e(K.s.yc!=null),e(K.s.Ya!=null),e(0<K.s.Wb),e((V=K.l)!=null),e((ee=V.ma)!=null),K.xb!=0){if(K.ca=ee.ba,K.tb=ee.tb,e(K.ca!=null),!P1(ee.Oa,V,p5)){K.a=2;break n}if(!Fm(K,V.width)||V.da)break n;if((V.da||An(K.ca.S))&&Oe(),11>K.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),K.ca.f.kb.F!=null&&Oe()),K.Pb&&0<K.s.ua&&K.s.vb.X==null&&!ze(K.s.vb,K.s.Wa.Xa)){K.a=1;break n}K.xb=0}if(!Il(K,K.V,K.Ba,K.c,K.i,V.o,Mv))break n;ee.Dc=K.Ma,K=1;break t}e(K.a!=0),K=0}K=!K}K&&(O=T.a)}else O=T.a}else{if((T=new BD)==null){oe=1;break e}if(T.Fa=ee.na,T.P=ee.P,T.qc=ee.Sa,HA(T,K)){if((O=Jv(K.width,K.height,oe.Oa,oe.ba))==0){if(T.Aa=0,V=oe.Oa,e((ee=T)!=null),V!=null){if(0<(me=0>(me=V.Md)?0:100<me?255:255*me/100)){for(ve=Pe=0;4>ve;++ve)12>(Me=ee.pb[ve]).lc&&(Me.ia=me*kle[0>Me.lc?0:Me.lc]>>3),Pe|=Me.ia;Pe&&(alert("todo:VP8InitRandom"),ee.ia=1)}ee.Ga=V.Id,100<ee.Ga?ee.Ga=100:0>ee.Ga&&(ee.Ga=0)}zD(T,K)||(O=T.a)}}else O=T.a}O==0&&oe.Oa!=null&&oe.Oa.fd&&(O=T1(oe.ba))}oe=O}ie=oe!=0?null:11>ie?de.f.RGBA.eb:de.f.kb.y}else ie=null;return ie};var cB=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function d(j,I){for(var k="",D=0;D<4;D++)k+=String.fromCharCode(j[I++]);return k}function u(j,I){return(j[I+0]<<0|j[I+1]<<8|j[I+2]<<16)>>>0}function h(j,I){return(j[I+0]<<0|j[I+1]<<8|j[I+2]<<16|j[I+3]<<24)>>>0}new c;var f=[0],m=[0],v=[],p=new c,g=t,x=function(j,I){var k={},D=0,P=!1,R=0,_=0;if(k.frames=[],!function(q,Y,J,ne){for(var re=0;re<ne;re++)if(q[Y+re]!=J.charCodeAt(re))return!0;return!1}(j,I,"RIFF",4)){var M,U;for(h(j,I+=4),I+=8;I<j.length;){var F=d(j,I),z=h(j,I+=4);I+=4;var H=z+(1&z);switch(F){case"VP8 ":case"VP8L":k.frames[D]===void 0&&(k.frames[D]={}),(L=k.frames[D]).src_off=P?_:I-8,L.src_size=R+z+8,D++,P&&(P=!1,R=0,_=0);break;case"VP8X":(L=k.header={}).feature_flags=j[I];var W=I+4;L.canvas_width=1+u(j,W),W+=3,L.canvas_height=1+u(j,W),W+=3;break;case"ALPH":P=!0,R=H+8,_=I-8;break;case"ANIM":(L=k.header).bgcolor=h(j,I),W=I+4,L.loop_count=(M=j)[(U=W)+0]<<0|M[U+1]<<8,W+=2;break;case"ANMF":var $,L;(L=k.frames[D]={}).offset_x=2*u(j,I),I+=3,L.offset_y=2*u(j,I),I+=3,L.width=1+u(j,I),I+=3,L.height=1+u(j,I),I+=3,L.duration=u(j,I),I+=3,$=j[I++],L.dispose=1&$,L.blend=$>>1&1}F!="ANMF"&&(I+=H)}return k}}(g,0);x.response=g,x.rgbaoutput=!0,x.dataurl=!1;var y=x.header?x.header:null,b=x.frames?x.frames:null;if(y){y.loop_counter=y.loop_count,f=[y.canvas_height],m=[y.canvas_width];for(var w=0;w<b.length&&b[w].blend!=0;w++);}var N=b[0],E=p.WebPDecodeRGBA(g,N.src_off,N.src_size,m,f);N.rgba=E,N.imgwidth=m[0],N.imgheight=f[0];for(var C=0;C<m[0]*f[0]*4;C++)v[C]=E[C];return this.width=m,this.height=f,this.data=v,this}(function(t){var e=function(){return typeof DM=="function"},n=function(f,m,v,p){var g=4,x=o;switch(p){case t.image_compression.FAST:g=1,x=a;break;case t.image_compression.MEDIUM:g=6,x=l;break;case t.image_compression.SLOW:g=9,x=c}f=r(f,m,v,x);var y=DM(f,{level:g});return t.__addimage__.arrayBufferToBinaryString(y)},r=function(f,m,v,p){for(var g,x,y,b=f.length/m,w=new Uint8Array(f.length+b),N=u(),E=0;E<b;E+=1){if(y=E*m,g=f.subarray(y,y+m),p)w.set(p(g,v,x),y+E);else{for(var C,j=N.length,I=[];C<j;C+=1)I[C]=N[C](g,v,x);var k=h(I.concat());w.set(I[k],y+E)}x=g}return w},i=function(f){var m=Array.apply([],f);return m.unshift(0),m},a=function(f,m){var v,p=[],g=f.length;p[0]=1;for(var x=0;x<g;x+=1)v=f[x-m]||0,p[x+1]=f[x]-v+256&255;return p},o=function(f,m,v){var p,g=[],x=f.length;g[0]=2;for(var y=0;y<x;y+=1)p=v&&v[y]||0,g[y+1]=f[y]-p+256&255;return g},l=function(f,m,v){var p,g,x=[],y=f.length;x[0]=3;for(var b=0;b<y;b+=1)p=f[b-m]||0,g=v&&v[b]||0,x[b+1]=f[b]+256-(p+g>>>1)&255;return x},c=function(f,m,v){var p,g,x,y,b=[],w=f.length;b[0]=4;for(var N=0;N<w;N+=1)p=f[N-m]||0,g=v&&v[N]||0,x=v&&v[N-m]||0,y=d(p,g,x),b[N+1]=f[N]-y+256&255;return b},d=function(f,m,v){if(f===m&&m===v)return f;var p=Math.abs(m-v),g=Math.abs(f-v),x=Math.abs(f+m-v-v);return p<=g&&p<=x?f:g<=x?m:v},u=function(){return[i,a,o,l,c]},h=function(f){var m=f.map(function(v){return v.reduce(function(p,g){return p+Math.abs(g)},0)});return m.indexOf(Math.min.apply(null,m))};t.processPNG=function(f,m,v,p){var g,x,y,b,w,N,E,C,j,I,k,D,P,R,_,M=this.decode.FLATE_DECODE,U="";if(this.__addimage__.isArrayBuffer(f)&&(f=new Uint8Array(f)),this.__addimage__.isArrayBufferView(f)){if(f=(y=new zCe(f)).imgData,x=y.bits,g=y.colorSpace,w=y.colors,[4,6].indexOf(y.colorType)!==-1){if(y.bits===8){j=(C=y.pixelBitlength==32?new Uint32Array(y.decodePixels().buffer):y.pixelBitlength==16?new Uint16Array(y.decodePixels().buffer):new Uint8Array(y.decodePixels().buffer)).length,k=new Uint8Array(j*y.colors),I=new Uint8Array(j);var F,z=y.pixelBitlength-y.bits;for(R=0,_=0;R<j;R++){for(P=C[R],F=0;F<z;)k[_++]=P>>>F&255,F+=y.bits;I[R]=P>>>F&255}}if(y.bits===16){j=(C=new Uint32Array(y.decodePixels().buffer)).length,k=new Uint8Array(j*(32/y.pixelBitlength)*y.colors),I=new Uint8Array(j*(32/y.pixelBitlength)),D=y.colors>1,R=0,_=0;for(var H=0;R<j;)P=C[R++],k[_++]=P>>>0&255,D&&(k[_++]=P>>>16&255,P=C[R++],k[_++]=P>>>0&255),I[H++]=P>>>16&255;x=8}p!==t.image_compression.NONE&&e()?(f=n(k,y.width*y.colors,y.colors,p),E=n(I,y.width,1,p)):(f=k,E=I,M=void 0)}if(y.colorType===3&&(g=this.color_spaces.INDEXED,N=y.palette,y.transparency.indexed)){var W=y.transparency.indexed,$=0;for(R=0,j=W.length;R<j;++R)$+=W[R];if(($/=255)===j-1&&W.indexOf(0)!==-1)b=[W.indexOf(0)];else if($!==j){for(C=y.decodePixels(),I=new Uint8Array(C.length),R=0,j=C.length;R<j;R++)I[R]=W[C[R]];E=n(I,y.width,1)}}var L=function(q){var Y;switch(q){case t.image_compression.FAST:Y=11;break;case t.image_compression.MEDIUM:Y=13;break;case t.image_compression.SLOW:Y=14;break;default:Y=12}return Y}(p);return M===this.decode.FLATE_DECODE&&(U="/Predictor "+L+" "),U+="/Colors "+w+" /BitsPerComponent "+x+" /Columns "+y.width,(this.__addimage__.isArrayBuffer(f)||this.__addimage__.isArrayBufferView(f))&&(f=this.__addimage__.arrayBufferToBinaryString(f)),(E&&this.__addimage__.isArrayBuffer(E)||this.__addimage__.isArrayBufferView(E))&&(E=this.__addimage__.arrayBufferToBinaryString(E)),{alias:v,data:f,index:m,filter:M,decodeParameters:U,transparency:b,palette:N,sMask:E,predictor:L,width:y.width,height:y.height,bitsPerComponent:x,colorSpace:g}}}})(Bt.API),function(t){t.processGIF89A=function(e,n,r,i){var a=new UCe(e),o=a.width,l=a.height,c=[];a.decodeAndBlitFrameRGBA(0,c);var d={data:c,width:o,height:l},u=new tO(100).encode(d,100);return t.processJPEG.call(this,u,n,r,i)},t.processGIF87A=t.processGIF89A}(Bt.API),$l.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var t=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(t);for(var e=0;e<t;e++){var n=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:i,green:r,blue:n,quad:a}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},$l.prototype.parseBGR=function(){this.pos=this.offset;try{var t="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[t]()}catch(n){cr.log("bit decode error:"+n)}},$l.prototype.bit1=function(){var t,e=Math.ceil(this.width/8),n=e%4;for(t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,i=0;i<e;i++)for(var a=this.datav.getUint8(this.pos++,!0),o=r*this.width*4+8*i*4,l=0;l<8&&8*i+l<this.width;l++){var c=this.palette[a>>7-l&1];this.data[o+4*l]=c.blue,this.data[o+4*l+1]=c.green,this.data[o+4*l+2]=c.red,this.data[o+4*l+3]=255}n!==0&&(this.pos+=4-n)}},$l.prototype.bit4=function(){for(var t=Math.ceil(this.width/2),e=t%4,n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<t;i++){var a=this.datav.getUint8(this.pos++,!0),o=r*this.width*4+2*i*4,l=a>>4,c=15&a,d=this.palette[l];if(this.data[o]=d.blue,this.data[o+1]=d.green,this.data[o+2]=d.red,this.data[o+3]=255,2*i+1>=this.width)break;d=this.palette[c],this.data[o+4]=d.blue,this.data[o+4+1]=d.green,this.data[o+4+2]=d.red,this.data[o+4+3]=255}e!==0&&(this.pos+=4-e)}},$l.prototype.bit8=function(){for(var t=this.width%4,e=this.height-1;e>=0;e--){for(var n=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var i=this.datav.getUint8(this.pos++,!0),a=n*this.width*4+4*r;if(i<this.palette.length){var o=this.palette[i];this.data[a]=o.red,this.data[a+1]=o.green,this.data[a+2]=o.blue,this.data[a+3]=255}else this.data[a]=255,this.data[a+1]=255,this.data[a+2]=255,this.data[a+3]=255}t!==0&&(this.pos+=4-t)}},$l.prototype.bit15=function(){for(var t=this.width%3,e=parseInt("11111",2),n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<this.width;i++){var a=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(a&e)/e*255|0,l=(a>>5&e)/e*255|0,c=(a>>10&e)/e*255|0,d=a>>15?255:0,u=r*this.width*4+4*i;this.data[u]=c,this.data[u+1]=l,this.data[u+2]=o,this.data[u+3]=d}this.pos+=t}},$l.prototype.bit16=function(){for(var t=this.width%3,e=parseInt("11111",2),n=parseInt("111111",2),r=this.height-1;r>=0;r--){for(var i=this.bottom_up?r:this.height-1-r,a=0;a<this.width;a++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var l=(o&e)/e*255|0,c=(o>>5&n)/n*255|0,d=(o>>11)/e*255|0,u=i*this.width*4+4*a;this.data[u]=d,this.data[u+1]=c,this.data[u+2]=l,this.data[u+3]=255}this.pos+=t}},$l.prototype.bit24=function(){for(var t=this.height-1;t>=0;t--){for(var e=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),o=e*this.width*4+4*n;this.data[o]=a,this.data[o+1]=i,this.data[o+2]=r,this.data[o+3]=255}this.pos+=this.width%4}},$l.prototype.bit32=function(){for(var t=this.height-1;t>=0;t--)for(var e=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),l=e*this.width*4+4*n;this.data[l]=a,this.data[l+1]=i,this.data[l+2]=r,this.data[l+3]=o}},$l.prototype.getData=function(){return this.data},function(t){t.processBMP=function(e,n,r,i){var a=new $l(e,!1),o=a.width,l=a.height,c={data:a.getData(),width:o,height:l},d=new tO(100).encode(c,100);return t.processJPEG.call(this,d,n,r,i)}}(Bt.API),UV.prototype.getData=function(){return this.data},function(t){t.processWEBP=function(e,n,r,i){var a=new UV(e),o=a.width,l=a.height,c={data:a.getData(),width:o,height:l},d=new tO(100).encode(c,100);return t.processJPEG.call(this,d,n,r,i)}}(Bt.API),Bt.API.processRGBA=function(t,e,n){for(var r=t.data,i=r.length,a=new Uint8Array(i/4*3),o=new Uint8Array(i/4),l=0,c=0,d=0;d<i;d+=4){var u=r[d],h=r[d+1],f=r[d+2],m=r[d+3];a[l++]=u,a[l++]=h,a[l++]=f,o[c++]=m}var v=this.__addimage__.arrayBufferToBinaryString(a);return{alpha:this.__addimage__.arrayBufferToBinaryString(o),data:v,index:e,alias:n,colorSpace:"DeviceRGB",bitsPerComponent:8,width:t.width,height:t.height}},Bt.API.setLanguage=function(t){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[t]!==void 0&&(this.internal.languageSettings.languageCode=t,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},bx=Bt.API,bC=bx.getCharWidthsArray=function(t,e){var n,r,i=(e=e||{}).font||this.internal.getFont(),a=e.fontSize||this.internal.getFontSize(),o=e.charSpace||this.internal.getCharSpace(),l=e.widths?e.widths:i.metadata.Unicode.widths,c=l.fof?l.fof:1,d=e.kerning?e.kerning:i.metadata.Unicode.kerning,u=d.fof?d.fof:1,h=e.doKerning!==!1,f=0,m=t.length,v=0,p=l[0]||c,g=[];for(n=0;n<m;n++)r=t.charCodeAt(n),typeof i.metadata.widthOfString=="function"?g.push((i.metadata.widthOfGlyph(i.metadata.characterToGlyph(r))+o*(1e3/a)||0)/1e3):(f=h&&Ln(d[r])==="object"&&!isNaN(parseInt(d[r][v],10))?d[r][v]/u:0,g.push((l[r]||p)/c+f)),v=r;return g},FV=bx.getStringUnitWidth=function(t,e){var n=(e=e||{}).fontSize||this.internal.getFontSize(),r=e.font||this.internal.getFont(),i=e.charSpace||this.internal.getCharSpace();return bx.processArabic&&(t=bx.processArabic(t)),typeof r.metadata.widthOfString=="function"?r.metadata.widthOfString(t,n,i)/n:bC.apply(this,arguments).reduce(function(a,o){return a+o},0)},$V=function(t,e,n,r){for(var i=[],a=0,o=t.length,l=0;a!==o&&l+e[a]<n;)l+=e[a],a++;i.push(t.slice(0,a));var c=a;for(l=0;a!==o;)l+e[a]>r&&(i.push(t.slice(c,a)),l=0,c=a),l+=e[a],a++;return c!==a&&i.push(t.slice(c,a)),i},BV=function(t,e,n){n||(n={});var r,i,a,o,l,c,d,u=[],h=[u],f=n.textIndent||0,m=0,v=0,p=t.split(" "),g=bC.apply(this,[" ",n])[0];if(c=n.lineIndent===-1?p[0].length+2:n.lineIndent||0){var x=Array(c).join(" "),y=[];p.map(function(w){(w=w.split(/\s*\n/)).length>1?y=y.concat(w.map(function(N,E){return(E&&N.length?`
`:"")+N})):y.push(w[0])}),p=y,c=FV.apply(this,[x,n])}for(a=0,o=p.length;a<o;a++){var b=0;if(r=p[a],c&&r[0]==`
`&&(r=r.substr(1),b=1),f+m+(v=(i=bC.apply(this,[r,n])).reduce(function(w,N){return w+N},0))>e||b){if(v>e){for(l=$V.apply(this,[r,i,e-(f+m),e]),u.push(l.shift()),u=[l.pop()];l.length;)h.push([l.shift()]);v=i.slice(r.length-(u[0]?u[0].length:0)).reduce(function(w,N){return w+N},0)}else u=[r];h.push(u),f=v+c,m=g}else u.push(r),f+=m+v,m=g}return d=c?function(w,N){return(N?x:"")+w.join(" ")}:function(w){return w.join(" ")},h.map(d)},bx.splitTextToSize=function(t,e,n){var r,i=(n=n||{}).fontSize||this.internal.getFontSize(),a=(function(u){if(u.widths&&u.kerning)return{widths:u.widths,kerning:u.kerning};var h=this.internal.getFont(u.fontName,u.fontStyle);return h.metadata.Unicode?{widths:h.metadata.Unicode.widths||{0:1},kerning:h.metadata.Unicode.kerning||{}}:{font:h.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,n);r=Array.isArray(t)?t:String(t).split(/\r?\n/);var o=1*this.internal.scaleFactor*e/i;a.textIndent=n.textIndent?1*n.textIndent*this.internal.scaleFactor/i:0,a.lineIndent=n.lineIndent;var l,c,d=[];for(l=0,c=r.length;l<c;l++)d=d.concat(BV.apply(this,[r[l],o,a]));return d},function(t){t.__fontmetrics__=t.__fontmetrics__||{};for(var e="klmnopqrstuvwxyz",n={},r={},i=0;i<e.length;i++)n[e[i]]="0123456789abcdef"[i],r["0123456789abcdef"[i]]=e[i];var a=function(h){return"0x"+parseInt(h,10).toString(16)},o=t.__fontmetrics__.compress=function(h){var f,m,v,p,g=["{"];for(var x in h){if(f=h[x],isNaN(parseInt(x,10))?m="'"+x+"'":(x=parseInt(x,10),m=(m=a(x).slice(2)).slice(0,-1)+r[m.slice(-1)]),typeof f=="number")f<0?(v=a(f).slice(3),p="-"):(v=a(f).slice(2),p=""),v=p+v.slice(0,-1)+r[v.slice(-1)];else{if(Ln(f)!=="object")throw new Error("Don't know what to do with value type "+Ln(f)+".");v=o(f)}g.push(m+v)}return g.push("}"),g.join("")},l=t.__fontmetrics__.uncompress=function(h){if(typeof h!="string")throw new Error("Invalid argument passed to uncompress.");for(var f,m,v,p,g={},x=1,y=g,b=[],w="",N="",E=h.length-1,C=1;C<E;C+=1)(p=h[C])=="'"?f?(v=f.join(""),f=void 0):f=[]:f?f.push(p):p=="{"?(b.push([y,v]),y={},v=void 0):p=="}"?((m=b.pop())[0][m[1]]=y,v=void 0,y=m[0]):p=="-"?x=-1:v===void 0?n.hasOwnProperty(p)?(w+=n[p],v=parseInt(w,16)*x,x=1,w=""):w+=p:n.hasOwnProperty(p)?(N+=n[p],y[v]=parseInt(N,16)*x,x=1,v=void 0,N=""):N+=p;return g},c={codePages:["WinAnsiEncoding"],WinAnsiEncoding:l("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},d={Unicode:{Courier:c,"Courier-Bold":c,"Courier-BoldOblique":c,"Courier-Oblique":c,Helvetica:c,"Helvetica-Bold":c,"Helvetica-BoldOblique":c,"Helvetica-Oblique":c,"Times-Roman":c,"Times-Bold":c,"Times-BoldItalic":c,"Times-Italic":c}},u={Unicode:{"Courier-Oblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":l("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":l("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:l("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:l("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":l("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":l("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};t.events.push(["addFont",function(h){var f=h.font,m=u.Unicode[f.postScriptName];m&&(f.metadata.Unicode={},f.metadata.Unicode.widths=m.widths,f.metadata.Unicode.kerning=m.kerning);var v=d.Unicode[f.postScriptName];v&&(f.metadata.Unicode.encoding=v,f.encoding=v.codePages[0])}])}(Bt.API),function(t){var e=function(n){for(var r=n.length,i=new Uint8Array(r),a=0;a<r;a++)i[a]=n.charCodeAt(a);return i};t.API.events.push(["addFont",function(n){var r=void 0,i=n.font,a=n.instance;if(!i.isStandardFont){if(a===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");if(typeof(r=a.existsFileInVFS(i.postScriptName)===!1?a.loadFile(i.postScriptName):a.getFileFromVFS(i.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");(function(o,l){l=/^\x00\x01\x00\x00/.test(l)?e(l):e(aj(l)),o.metadata=t.API.TTFFont.open(l),o.metadata.Unicode=o.metadata.Unicode||{encoding:{},kerning:{},widths:[]},o.metadata.glyIdsUsed=[0]})(i,r)}}])}(Bt),function(t){function e(){return(Kt.canvg?Promise.resolve(Kt.canvg):Lj(()=>import("./index.es-1a5abf45.js"),[])).catch(function(n){return Promise.reject(new Error("Could not load canvg: "+n))}).then(function(n){return n.default?n.default:n})}Bt.API.addSvgAsImage=function(n,r,i,a,o,l,c,d){if(isNaN(r)||isNaN(i))throw cr.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(a)||isNaN(o))throw cr.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var u=document.createElement("canvas");u.width=a,u.height=o;var h=u.getContext("2d");h.fillStyle="#fff",h.fillRect(0,0,u.width,u.height);var f={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},m=this;return e().then(function(v){return v.fromString(h,n,f)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(v){return v.render(f)}).then(function(){m.addImage(u.toDataURL("image/jpeg",1),r,i,a,o,c,d)})}}(),Bt.API.putTotalPages=function(t){var e,n=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(t,"g"),n=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(t,this.internal.getFont()),"g"),n=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var r=1;r<=this.internal.getNumberOfPages();r++)for(var i=0;i<this.internal.pages[r].length;i++)this.internal.pages[r][i]=this.internal.pages[r][i].replace(e,n);return this},Bt.API.viewerPreferences=function(t,e){var n;t=t||{},e=e||!1;var r,i,a,o={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},l=Object.keys(o),c=[],d=0,u=0,h=0;function f(v,p){var g,x=!1;for(g=0;g<v.length;g+=1)v[g]===p&&(x=!0);return x}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(o)),this.internal.viewerpreferences.isSubscribed=!1),n=this.internal.viewerpreferences.configuration,t==="reset"||e===!0){var m=l.length;for(h=0;h<m;h+=1)n[l[h]].value=n[l[h]].defaultValue,n[l[h]].explicitSet=!1}if(Ln(t)==="object"){for(i in t)if(a=t[i],f(l,i)&&a!==void 0){if(n[i].type==="boolean"&&typeof a=="boolean")n[i].value=a;else if(n[i].type==="name"&&f(n[i].valueSet,a))n[i].value=a;else if(n[i].type==="integer"&&Number.isInteger(a))n[i].value=a;else if(n[i].type==="array"){for(d=0;d<a.length;d+=1)if(r=!0,a[d].length===1&&typeof a[d][0]=="number")c.push(String(a[d]-1));else if(a[d].length>1){for(u=0;u<a[d].length;u+=1)typeof a[d][u]!="number"&&(r=!1);r===!0&&c.push([a[d][0]-1,a[d][1]-1].join(" "))}n[i].value="["+c.join(" ")+"]"}else n[i].value=n[i].defaultValue;n[i].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var v,p=[];for(v in n)n[v].explicitSet===!0&&(n[v].type==="name"?p.push("/"+v+" /"+n[v].value):p.push("/"+v+" "+n[v].value));p.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+p.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=n,this},function(t){var e=function(){var r='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',i=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),a=unescape(encodeURIComponent(r)),o=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),l=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),c=unescape(encodeURIComponent("</x:xmpmeta>")),d=a.length+o.length+l.length+i.length+c.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+d+" >>"),this.internal.write("stream"),this.internal.write(i+a+o+l+c),this.internal.write("endstream"),this.internal.write("endobj")},n=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};t.addMetadata=function(r,i){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:r,namespaceuri:i||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",n),this.internal.events.subscribe("postPutResources",e)),this}}(Bt.API),function(t){var e=t.API,n=e.pdfEscape16=function(a,o){for(var l,c=o.metadata.Unicode.widths,d=["","0","00","000","0000"],u=[""],h=0,f=a.length;h<f;++h){if(l=o.metadata.characterToGlyph(a.charCodeAt(h)),o.metadata.glyIdsUsed.push(l),o.metadata.toUnicode[l]=a.charCodeAt(h),c.indexOf(l)==-1&&(c.push(l),c.push([parseInt(o.metadata.widthOfGlyph(l),10)])),l=="0")return u.join("");l=l.toString(16),u.push(d[4-l.length],l)}return u.join("")},r=function(a){var o,l,c,d,u,h,f;for(u=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,c=[],h=0,f=(l=Object.keys(a).sort(function(m,v){return m-v})).length;h<f;h++)o=l[h],c.length>=100&&(u+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar`,c=[]),a[o]!==void 0&&a[o]!==null&&typeof a[o].toString=="function"&&(d=("0000"+a[o].toString(16)).slice(-4),o=("0000"+(+o).toString(16)).slice(-4),c.push("<"+o+"><"+d+">"));return c.length&&(u+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar
`),u+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(a){(function(o){var l=o.font,c=o.out,d=o.newObject,u=o.putStream;if(l.metadata instanceof t.API.TTFFont&&l.encoding==="Identity-H"){for(var h=l.metadata.Unicode.widths,f=l.metadata.subset.encode(l.metadata.glyIdsUsed,1),m="",v=0;v<f.length;v++)m+=String.fromCharCode(f[v]);var p=d();u({data:m,addLength1:!0,objectId:p}),c("endobj");var g=d();u({data:r(l.metadata.toUnicode),addLength1:!0,objectId:g}),c("endobj");var x=d();c("<<"),c("/Type /FontDescriptor"),c("/FontName /"+Lx(l.fontName)),c("/FontFile2 "+p+" 0 R"),c("/FontBBox "+t.API.PDFObject.convert(l.metadata.bbox)),c("/Flags "+l.metadata.flags),c("/StemV "+l.metadata.stemV),c("/ItalicAngle "+l.metadata.italicAngle),c("/Ascent "+l.metadata.ascender),c("/Descent "+l.metadata.decender),c("/CapHeight "+l.metadata.capHeight),c(">>"),c("endobj");var y=d();c("<<"),c("/Type /Font"),c("/BaseFont /"+Lx(l.fontName)),c("/FontDescriptor "+x+" 0 R"),c("/W "+t.API.PDFObject.convert(h)),c("/CIDToGIDMap /Identity"),c("/DW 1000"),c("/Subtype /CIDFontType2"),c("/CIDSystemInfo"),c("<<"),c("/Supplement 0"),c("/Registry (Adobe)"),c("/Ordering ("+l.encoding+")"),c(">>"),c(">>"),c("endobj"),l.objectNumber=d(),c("<<"),c("/Type /Font"),c("/Subtype /Type0"),c("/ToUnicode "+g+" 0 R"),c("/BaseFont /"+Lx(l.fontName)),c("/Encoding /"+l.encoding),c("/DescendantFonts ["+y+" 0 R]"),c(">>"),c("endobj"),l.isAlreadyPutted=!0}})(a)}]),e.events.push(["putFont",function(a){(function(o){var l=o.font,c=o.out,d=o.newObject,u=o.putStream;if(l.metadata instanceof t.API.TTFFont&&l.encoding==="WinAnsiEncoding"){for(var h=l.metadata.rawData,f="",m=0;m<h.length;m++)f+=String.fromCharCode(h[m]);var v=d();u({data:f,addLength1:!0,objectId:v}),c("endobj");var p=d();u({data:r(l.metadata.toUnicode),addLength1:!0,objectId:p}),c("endobj");var g=d();c("<<"),c("/Descent "+l.metadata.decender),c("/CapHeight "+l.metadata.capHeight),c("/StemV "+l.metadata.stemV),c("/Type /FontDescriptor"),c("/FontFile2 "+v+" 0 R"),c("/Flags 96"),c("/FontBBox "+t.API.PDFObject.convert(l.metadata.bbox)),c("/FontName /"+Lx(l.fontName)),c("/ItalicAngle "+l.metadata.italicAngle),c("/Ascent "+l.metadata.ascender),c(">>"),c("endobj"),l.objectNumber=d();for(var x=0;x<l.metadata.hmtx.widths.length;x++)l.metadata.hmtx.widths[x]=parseInt(l.metadata.hmtx.widths[x]*(1e3/l.metadata.head.unitsPerEm));c("<</Subtype/TrueType/Type/Font/ToUnicode "+p+" 0 R/BaseFont/"+Lx(l.fontName)+"/FontDescriptor "+g+" 0 R/Encoding/"+l.encoding+" /FirstChar 29 /LastChar 255 /Widths "+t.API.PDFObject.convert(l.metadata.hmtx.widths)+">>"),c("endobj"),l.isAlreadyPutted=!0}})(a)}]);var i=function(a){var o,l=a.text||"",c=a.x,d=a.y,u=a.options||{},h=a.mutex||{},f=h.pdfEscape,m=h.activeFontKey,v=h.fonts,p=m,g="",x=0,y="",b=v[p].encoding;if(v[p].encoding!=="Identity-H")return{text:l,x:c,y:d,options:u,mutex:h};for(y=l,p=m,Array.isArray(l)&&(y=l[0]),x=0;x<y.length;x+=1)v[p].metadata.hasOwnProperty("cmap")&&(o=v[p].metadata.cmap.unicode.codeMap[y[x].charCodeAt(0)]),o||y[x].charCodeAt(0)<256&&v[p].metadata.hasOwnProperty("Unicode")?g+=y[x]:g+="";var w="";return parseInt(p.slice(1))<14||b==="WinAnsiEncoding"?w=f(g,p).split("").map(function(N){return N.charCodeAt(0).toString(16)}).join(""):b==="Identity-H"&&(w=n(g,v[p])),h.isHex=!0,{text:w,x:c,y:d,options:u,mutex:h}};e.events.push(["postProcessText",function(a){var o=a.text||"",l=[],c={text:o,x:a.x,y:a.y,options:a.options,mutex:a.mutex};if(Array.isArray(o)){var d=0;for(d=0;d<o.length;d+=1)Array.isArray(o[d])&&o[d].length===3?l.push([i(Object.assign({},c,{text:o[d][0]})).text,o[d][1],o[d][2]]):l.push(i(Object.assign({},c,{text:o[d]})).text);a.text=l}else a.text=i(Object.assign({},c,{text:o})).text}])}(Bt),function(t){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};t.existsFileInVFS=function(n){return e.call(this),this.internal.vFS[n]!==void 0},t.addFileToVFS=function(n,r){return e.call(this),this.internal.vFS[n]=r,this},t.getFileFromVFS=function(n){return e.call(this),this.internal.vFS[n]!==void 0?this.internal.vFS[n]:null}}(Bt.API),function(t){t.__bidiEngine__=t.prototype.__bidiEngine__=function(r){var i,a,o,l,c,d,u,h=e,f=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],m=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],v={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},p={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},g=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],x=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),y=!1,b=0;this.__bidiEngine__={};var w=function(D){var P=D.charCodeAt(),R=P>>8,_=p[R];return _!==void 0?h[256*_+(255&P)]:R===252||R===253?"AL":x.test(R)?"L":R===8?"R":"N"},N=function(D){for(var P,R=0;R<D.length;R++){if((P=w(D.charAt(R)))==="L")return!1;if(P==="R")return!0}return!1},E=function(D,P,R,_){var M,U,F,z,H=P[_];switch(H){case"L":case"R":y=!1;break;case"N":case"AN":break;case"EN":y&&(H="AN");break;case"AL":y=!0,H="R";break;case"WS":H="N";break;case"CS":_<1||_+1>=P.length||(M=R[_-1])!=="EN"&&M!=="AN"||(U=P[_+1])!=="EN"&&U!=="AN"?H="N":y&&(U="AN"),H=U===M?U:"N";break;case"ES":H=(M=_>0?R[_-1]:"B")==="EN"&&_+1<P.length&&P[_+1]==="EN"?"EN":"N";break;case"ET":if(_>0&&R[_-1]==="EN"){H="EN";break}if(y){H="N";break}for(F=_+1,z=P.length;F<z&&P[F]==="ET";)F++;H=F<z&&P[F]==="EN"?"EN":"N";break;case"NSM":if(o&&!l){for(z=P.length,F=_+1;F<z&&P[F]==="NSM";)F++;if(F<z){var W=D[_],$=W>=1425&&W<=2303||W===64286;if(M=P[F],$&&(M==="R"||M==="AL")){H="R";break}}}H=_<1||(M=P[_-1])==="B"?"N":R[_-1];break;case"B":y=!1,i=!0,H=b;break;case"S":a=!0,H="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":y=!1;break;case"BN":H="N"}return H},C=function(D,P,R){var _=D.split("");return R&&j(_,R,{hiLevel:b}),_.reverse(),P&&P.reverse(),_.join("")},j=function(D,P,R){var _,M,U,F,z,H=-1,W=D.length,$=0,L=[],q=b?m:f,Y=[];for(y=!1,i=!1,a=!1,M=0;M<W;M++)Y[M]=w(D[M]);for(U=0;U<W;U++){if(z=$,L[U]=E(D,Y,L,U),_=240&($=q[z][v[L[U]]]),$&=15,P[U]=F=q[$][5],_>0)if(_===16){for(M=H;M<U;M++)P[M]=1;H=-1}else H=-1;if(q[$][6])H===-1&&(H=U);else if(H>-1){for(M=H;M<U;M++)P[M]=F;H=-1}Y[U]==="B"&&(P[U]=0),R.hiLevel|=F}a&&function(J,ne,re){for(var pe=0;pe<re;pe++)if(J[pe]==="S"){ne[pe]=b;for(var ue=pe-1;ue>=0&&J[ue]==="WS";ue--)ne[ue]=b}}(Y,P,W)},I=function(D,P,R,_,M){if(!(M.hiLevel<D)){if(D===1&&b===1&&!i)return P.reverse(),void(R&&R.reverse());for(var U,F,z,H,W=P.length,$=0;$<W;){if(_[$]>=D){for(z=$+1;z<W&&_[z]>=D;)z++;for(H=$,F=z-1;H<F;H++,F--)U=P[H],P[H]=P[F],P[F]=U,R&&(U=R[H],R[H]=R[F],R[F]=U);$=z}$++}}},k=function(D,P,R){var _=D.split(""),M={hiLevel:b};return R||(R=[]),j(_,R,M),function(U,F,z){if(z.hiLevel!==0&&u)for(var H,W=0;W<U.length;W++)F[W]===1&&(H=g.indexOf(U[W]))>=0&&(U[W]=g[H+1])}(_,R,M),I(2,_,P,R,M),I(1,_,P,R,M),_.join("")};return this.__bidiEngine__.doBidiReorder=function(D,P,R){if(function(M,U){if(U)for(var F=0;F<M.length;F++)U[F]=F;l===void 0&&(l=N(M)),d===void 0&&(d=N(M))}(D,P),o||!c||d)if(o&&c&&l^d)b=l?1:0,D=C(D,P,R);else if(!o&&c&&d)b=l?1:0,D=k(D,P,R),D=C(D,P);else if(!o||l||c||d){if(o&&!c&&l^d)D=C(D,P),l?(b=0,D=k(D,P,R)):(b=1,D=k(D,P,R),D=C(D,P));else if(o&&l&&!c&&d)b=1,D=k(D,P,R),D=C(D,P);else if(!o&&!c&&l^d){var _=u;l?(b=1,D=k(D,P,R),b=0,u=!1,D=k(D,P,R),u=_):(b=0,D=k(D,P,R),D=C(D,P),b=1,u=!1,D=k(D,P,R),u=_,D=C(D,P))}}else b=0,D=k(D,P,R);else b=l?1:0,D=k(D,P,R);return D},this.__bidiEngine__.setOptions=function(D){D&&(o=D.isInputVisual,c=D.isOutputVisual,l=D.isInputRtl,d=D.isOutputRtl,u=D.isSymmetricSwapping)},this.__bidiEngine__.setOptions(r),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],n=new t.__bidiEngine__({isInputVisual:!0});t.API.events.push(["postProcessText",function(r){var i=r.text,a=(r.x,r.y,r.options||{}),o=(r.mutex,a.lang,[]);if(a.isInputVisual=typeof a.isInputVisual!="boolean"||a.isInputVisual,n.setOptions(a),Object.prototype.toString.call(i)==="[object Array]"){var l=0;for(o=[],l=0;l<i.length;l+=1)Object.prototype.toString.call(i[l])==="[object Array]"?o.push([n.doBidiReorder(i[l][0]),i[l][1],i[l][2]]):o.push([n.doBidiReorder(i[l])]);r.text=o}else r.text=n.doBidiReorder(i);n.setOptions({isInputVisual:!0})}])}(Bt),Bt.API.TTFFont=function(){function t(e){var n;if(this.rawData=e,n=this.contents=new wm(e),this.contents.pos=4,n.readString(4)==="ttcf")throw new Error("TTCF not supported.");n.pos=0,this.parse(),this.subset=new rEe(this),this.registerTTF()}return t.open=function(e){return new t(e)},t.prototype.parse=function(){return this.directory=new VCe(this.contents),this.head=new HCe(this),this.name=new XCe(this),this.cmap=new fse(this),this.toUnicode={},this.hhea=new WCe(this),this.maxp=new ZCe(this),this.hmtx=new QCe(this),this.post=new KCe(this),this.os2=new GCe(this),this.loca=new nEe(this),this.glyf=new JCe(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},t.prototype.registerTTF=function(){var e,n,r,i,a;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var o,l,c,d;for(d=[],o=0,l=(c=this.bbox).length;o<l;o++)e=c[o],d.push(Math.round(e*this.scaleFactor));return d}).call(this),this.stemV=0,this.post.exists?(r=255&(i=this.post.italic_angle),32768&(n=i>>16)&&(n=-(1+(65535^n))),this.italicAngle=+(n+"."+r)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(a=this.familyClass)===1||a===2||a===3||a===4||a===5||a===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},t.prototype.characterToGlyph=function(e){var n;return((n=this.cmap.unicode)!=null?n.codeMap[e]:void 0)||0},t.prototype.widthOfGlyph=function(e){var n;return n=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*n},t.prototype.widthOfString=function(e,n,r){var i,a,o,l;for(o=0,a=0,l=(e=""+e).length;0<=l?a<l:a>l;a=0<=l?++a:--a)i=e.charCodeAt(a),o+=this.widthOfGlyph(this.characterToGlyph(i))+r*(1e3/n)||0;return o*(n/1e3)},t.prototype.lineHeight=function(e,n){var r;return n==null&&(n=!1),r=n?this.lineGap:0,(this.ascender+r-this.decender)/1e3*e},t}();var Ac,wm=function(){function t(e){this.data=e??[],this.pos=0,this.length=this.data.length}return t.prototype.readByte=function(){return this.data[this.pos++]},t.prototype.writeByte=function(e){return this.data[this.pos++]=e},t.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},t.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},t.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},t.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},t.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},t.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},t.prototype.readString=function(e){var n,r;for(r=[],n=0;0<=e?n<e:n>e;n=0<=e?++n:--n)r[n]=String.fromCharCode(this.readByte());return r.join("")},t.prototype.writeString=function(e){var n,r,i;for(i=[],n=0,r=e.length;0<=r?n<r:n>r;n=0<=r?++n:--n)i.push(this.writeByte(e.charCodeAt(n)));return i},t.prototype.readShort=function(){return this.readInt16()},t.prototype.writeShort=function(e){return this.writeInt16(e)},t.prototype.readLongLong=function(){var e,n,r,i,a,o,l,c;return e=this.readByte(),n=this.readByte(),r=this.readByte(),i=this.readByte(),a=this.readByte(),o=this.readByte(),l=this.readByte(),c=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^n)+1099511627776*(255^r)+4294967296*(255^i)+16777216*(255^a)+65536*(255^o)+256*(255^l)+(255^c)+1):72057594037927940*e+281474976710656*n+1099511627776*r+4294967296*i+16777216*a+65536*o+256*l+c},t.prototype.writeLongLong=function(e){var n,r;return n=Math.floor(e/4294967296),r=4294967295&e,this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n),this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r)},t.prototype.readInt=function(){return this.readInt32()},t.prototype.writeInt=function(e){return this.writeInt32(e)},t.prototype.read=function(e){var n,r;for(n=[],r=0;0<=e?r<e:r>e;r=0<=e?++r:--r)n.push(this.readByte());return n},t.prototype.write=function(e){var n,r,i,a;for(a=[],r=0,i=e.length;r<i;r++)n=e[r],a.push(this.writeByte(n));return a},t}(),VCe=function(){var t;function e(n){var r,i,a;for(this.scalarType=n.readInt(),this.tableCount=n.readShort(),this.searchRange=n.readShort(),this.entrySelector=n.readShort(),this.rangeShift=n.readShort(),this.tables={},i=0,a=this.tableCount;0<=a?i<a:i>a;i=0<=a?++i:--i)r={tag:n.readString(4),checksum:n.readInt(),offset:n.readInt(),length:n.readInt()},this.tables[r.tag]=r}return e.prototype.encode=function(n){var r,i,a,o,l,c,d,u,h,f,m,v,p;for(p in m=Object.keys(n).length,c=Math.log(2),h=16*Math.floor(Math.log(m)/c),o=Math.floor(h/c),u=16*m-h,(i=new wm).writeInt(this.scalarType),i.writeShort(m),i.writeShort(h),i.writeShort(o),i.writeShort(u),a=16*m,d=i.pos+a,l=null,v=[],n)for(f=n[p],i.writeString(p),i.writeInt(t(f)),i.writeInt(d),i.writeInt(f.length),v=v.concat(f),p==="head"&&(l=d),d+=f.length;d%4;)v.push(0),d++;return i.write(v),r=2981146554-t(i.data),i.pos=l+8,i.writeUInt32(r),i.data},t=function(n){var r,i,a,o;for(n=mse.call(n);n.length%4;)n.push(0);for(a=new wm(n),i=0,r=0,o=n.length;r<o;r=r+=4)i+=a.readUInt32();return 4294967295&i},e}(),qCe={}.hasOwnProperty,kd=function(t,e){for(var n in e)qCe.call(e,n)&&(t[n]=e[n]);function r(){this.constructor=t}return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};Ac=function(){function t(e){var n;this.file=e,n=this.file.directory.tables[this.tag],this.exists=!!n,n&&(this.offset=n.offset,this.length=n.length,this.parse(this.file.contents))}return t.prototype.parse=function(){},t.prototype.encode=function(){},t.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},t}();var HCe=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return kd(e,Ac),e.prototype.tag="head",e.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.revision=n.readInt(),this.checkSumAdjustment=n.readInt(),this.magicNumber=n.readInt(),this.flags=n.readShort(),this.unitsPerEm=n.readShort(),this.created=n.readLongLong(),this.modified=n.readLongLong(),this.xMin=n.readShort(),this.yMin=n.readShort(),this.xMax=n.readShort(),this.yMax=n.readShort(),this.macStyle=n.readShort(),this.lowestRecPPEM=n.readShort(),this.fontDirectionHint=n.readShort(),this.indexToLocFormat=n.readShort(),this.glyphDataFormat=n.readShort()},e.prototype.encode=function(n){var r;return(r=new wm).writeInt(this.version),r.writeInt(this.revision),r.writeInt(this.checkSumAdjustment),r.writeInt(this.magicNumber),r.writeShort(this.flags),r.writeShort(this.unitsPerEm),r.writeLongLong(this.created),r.writeLongLong(this.modified),r.writeShort(this.xMin),r.writeShort(this.yMin),r.writeShort(this.xMax),r.writeShort(this.yMax),r.writeShort(this.macStyle),r.writeShort(this.lowestRecPPEM),r.writeShort(this.fontDirectionHint),r.writeShort(n),r.writeShort(this.glyphDataFormat),r.data},e}(),VV=function(){function t(e,n){var r,i,a,o,l,c,d,u,h,f,m,v,p,g,x,y,b;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=n+e.readInt(),h=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(c=0;c<256;++c)this.codeMap[c]=e.readByte();break;case 4:for(m=e.readUInt16(),f=m/2,e.pos+=6,a=function(){var w,N;for(N=[],c=w=0;0<=f?w<f:w>f;c=0<=f?++w:--w)N.push(e.readUInt16());return N}(),e.pos+=2,p=function(){var w,N;for(N=[],c=w=0;0<=f?w<f:w>f;c=0<=f?++w:--w)N.push(e.readUInt16());return N}(),d=function(){var w,N;for(N=[],c=w=0;0<=f?w<f:w>f;c=0<=f?++w:--w)N.push(e.readUInt16());return N}(),u=function(){var w,N;for(N=[],c=w=0;0<=f?w<f:w>f;c=0<=f?++w:--w)N.push(e.readUInt16());return N}(),i=(this.length-e.pos+this.offset)/2,l=function(){var w,N;for(N=[],c=w=0;0<=i?w<i:w>i;c=0<=i?++w:--w)N.push(e.readUInt16());return N}(),c=x=0,b=a.length;x<b;c=++x)for(g=a[c],r=y=v=p[c];v<=g?y<=g:y>=g;r=v<=g?++y:--y)u[c]===0?o=r+d[c]:(o=l[u[c]/2+(r-v)-(f-c)]||0)!==0&&(o+=d[c]),this.codeMap[r]=65535&o}e.pos=h}return t.encode=function(e,n){var r,i,a,o,l,c,d,u,h,f,m,v,p,g,x,y,b,w,N,E,C,j,I,k,D,P,R,_,M,U,F,z,H,W,$,L,q,Y,J,ne,re,pe,ue,xe,Ne,je;switch(_=new wm,o=Object.keys(e).sort(function($e,ze){return $e-ze}),n){case"macroman":for(p=0,g=function(){var $e=[];for(v=0;v<256;++v)$e.push(0);return $e}(),y={0:0},a={},M=0,H=o.length;M<H;M++)y[ue=e[i=o[M]]]==null&&(y[ue]=++p),a[i]={old:e[i],new:y[e[i]]},g[i]=y[e[i]];return _.writeUInt16(1),_.writeUInt16(0),_.writeUInt32(12),_.writeUInt16(0),_.writeUInt16(262),_.writeUInt16(0),_.write(g),{charMap:a,subtable:_.data,maxGlyphID:p+1};case"unicode":for(P=[],h=[],b=0,y={},r={},x=d=null,U=0,W=o.length;U<W;U++)y[N=e[i=o[U]]]==null&&(y[N]=++b),r[i]={old:N,new:y[N]},l=y[N]-i,x!=null&&l===d||(x&&h.push(x),P.push(i),d=l),x=i;for(x&&h.push(x),h.push(65535),P.push(65535),k=2*(I=P.length),j=2*Math.pow(Math.log(I)/Math.LN2,2),f=Math.log(j/2)/Math.LN2,C=2*I-j,c=[],E=[],m=[],v=F=0,$=P.length;F<$;v=++F){if(D=P[v],u=h[v],D===65535){c.push(0),E.push(0);break}if(D-(R=r[D].new)>=32768)for(c.push(0),E.push(2*(m.length+I-v)),i=z=D;D<=u?z<=u:z>=u;i=D<=u?++z:--z)m.push(r[i].new);else c.push(R-D),E.push(0)}for(_.writeUInt16(3),_.writeUInt16(1),_.writeUInt32(12),_.writeUInt16(4),_.writeUInt16(16+8*I+2*m.length),_.writeUInt16(0),_.writeUInt16(k),_.writeUInt16(j),_.writeUInt16(f),_.writeUInt16(C),re=0,L=h.length;re<L;re++)i=h[re],_.writeUInt16(i);for(_.writeUInt16(0),pe=0,q=P.length;pe<q;pe++)i=P[pe],_.writeUInt16(i);for(xe=0,Y=c.length;xe<Y;xe++)l=c[xe],_.writeUInt16(l);for(Ne=0,J=E.length;Ne<J;Ne++)w=E[Ne],_.writeUInt16(w);for(je=0,ne=m.length;je<ne;je++)p=m[je],_.writeUInt16(p);return{charMap:r,subtable:_.data,maxGlyphID:b+1}}},t}(),fse=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return kd(e,Ac),e.prototype.tag="cmap",e.prototype.parse=function(n){var r,i,a;for(n.pos=this.offset,this.version=n.readUInt16(),a=n.readUInt16(),this.tables=[],this.unicode=null,i=0;0<=a?i<a:i>a;i=0<=a?++i:--i)r=new VV(n,this.offset),this.tables.push(r),r.isUnicode&&this.unicode==null&&(this.unicode=r);return!0},e.encode=function(n,r){var i,a;return r==null&&(r="macroman"),i=VV.encode(n,r),(a=new wm).writeUInt16(0),a.writeUInt16(1),i.table=a.data.concat(i.subtable),i},e}(),WCe=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return kd(e,Ac),e.prototype.tag="hhea",e.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.ascender=n.readShort(),this.decender=n.readShort(),this.lineGap=n.readShort(),this.advanceWidthMax=n.readShort(),this.minLeftSideBearing=n.readShort(),this.minRightSideBearing=n.readShort(),this.xMaxExtent=n.readShort(),this.caretSlopeRise=n.readShort(),this.caretSlopeRun=n.readShort(),this.caretOffset=n.readShort(),n.pos+=8,this.metricDataFormat=n.readShort(),this.numberOfMetrics=n.readUInt16()},e}(),GCe=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return kd(e,Ac),e.prototype.tag="OS/2",e.prototype.parse=function(n){if(n.pos=this.offset,this.version=n.readUInt16(),this.averageCharWidth=n.readShort(),this.weightClass=n.readUInt16(),this.widthClass=n.readUInt16(),this.type=n.readShort(),this.ySubscriptXSize=n.readShort(),this.ySubscriptYSize=n.readShort(),this.ySubscriptXOffset=n.readShort(),this.ySubscriptYOffset=n.readShort(),this.ySuperscriptXSize=n.readShort(),this.ySuperscriptYSize=n.readShort(),this.ySuperscriptXOffset=n.readShort(),this.ySuperscriptYOffset=n.readShort(),this.yStrikeoutSize=n.readShort(),this.yStrikeoutPosition=n.readShort(),this.familyClass=n.readShort(),this.panose=function(){var r,i;for(i=[],r=0;r<10;++r)i.push(n.readByte());return i}(),this.charRange=function(){var r,i;for(i=[],r=0;r<4;++r)i.push(n.readInt());return i}(),this.vendorID=n.readString(4),this.selection=n.readShort(),this.firstCharIndex=n.readShort(),this.lastCharIndex=n.readShort(),this.version>0&&(this.ascent=n.readShort(),this.descent=n.readShort(),this.lineGap=n.readShort(),this.winAscent=n.readShort(),this.winDescent=n.readShort(),this.codePageRange=function(){var r,i;for(i=[],r=0;r<2;r=++r)i.push(n.readInt());return i}(),this.version>1))return this.xHeight=n.readShort(),this.capHeight=n.readShort(),this.defaultChar=n.readShort(),this.breakChar=n.readShort(),this.maxContext=n.readShort()},e}(),KCe=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return kd(e,Ac),e.prototype.tag="post",e.prototype.parse=function(n){var r,i,a;switch(n.pos=this.offset,this.format=n.readInt(),this.italicAngle=n.readInt(),this.underlinePosition=n.readShort(),this.underlineThickness=n.readShort(),this.isFixedPitch=n.readInt(),this.minMemType42=n.readInt(),this.maxMemType42=n.readInt(),this.minMemType1=n.readInt(),this.maxMemType1=n.readInt(),this.format){case 65536:break;case 131072:var o;for(i=n.readUInt16(),this.glyphNameIndex=[],o=0;0<=i?o<i:o>i;o=0<=i?++o:--o)this.glyphNameIndex.push(n.readUInt16());for(this.names=[],a=[];n.pos<this.offset+this.length;)r=n.readByte(),a.push(this.names.push(n.readString(r)));return a;case 151552:return i=n.readUInt16(),this.offsets=n.read(i);case 196608:break;case 262144:return this.map=(function(){var l,c,d;for(d=[],o=l=0,c=this.file.maxp.numGlyphs;0<=c?l<c:l>c;o=0<=c?++l:--l)d.push(n.readUInt32());return d}).call(this)}},e}(),YCe=function(t,e){this.raw=t,this.length=t.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},XCe=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return kd(e,Ac),e.prototype.tag="name",e.prototype.parse=function(n){var r,i,a,o,l,c,d,u,h,f,m;for(n.pos=this.offset,n.readShort(),r=n.readShort(),c=n.readShort(),i=[],o=0;0<=r?o<r:o>r;o=0<=r?++o:--o)i.push({platformID:n.readShort(),encodingID:n.readShort(),languageID:n.readShort(),nameID:n.readShort(),length:n.readShort(),offset:this.offset+c+n.readShort()});for(d={},o=h=0,f=i.length;h<f;o=++h)a=i[o],n.pos=a.offset,u=n.readString(a.length),l=new YCe(u,a),d[m=a.nameID]==null&&(d[m]=[]),d[a.nameID].push(l);this.strings=d,this.copyright=d[0],this.fontFamily=d[1],this.fontSubfamily=d[2],this.uniqueSubfamily=d[3],this.fontName=d[4],this.version=d[5];try{this.postscriptName=d[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=d[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=d[7],this.manufacturer=d[8],this.designer=d[9],this.description=d[10],this.vendorUrl=d[11],this.designerUrl=d[12],this.license=d[13],this.licenseUrl=d[14],this.preferredFamily=d[15],this.preferredSubfamily=d[17],this.compatibleFull=d[18],this.sampleText=d[19]},e}(),ZCe=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return kd(e,Ac),e.prototype.tag="maxp",e.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.numGlyphs=n.readUInt16(),this.maxPoints=n.readUInt16(),this.maxContours=n.readUInt16(),this.maxCompositePoints=n.readUInt16(),this.maxComponentContours=n.readUInt16(),this.maxZones=n.readUInt16(),this.maxTwilightPoints=n.readUInt16(),this.maxStorage=n.readUInt16(),this.maxFunctionDefs=n.readUInt16(),this.maxInstructionDefs=n.readUInt16(),this.maxStackElements=n.readUInt16(),this.maxSizeOfInstructions=n.readUInt16(),this.maxComponentElements=n.readUInt16(),this.maxComponentDepth=n.readUInt16()},e}(),QCe=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return kd(e,Ac),e.prototype.tag="hmtx",e.prototype.parse=function(n){var r,i,a,o,l,c,d;for(n.pos=this.offset,this.metrics=[],r=0,c=this.file.hhea.numberOfMetrics;0<=c?r<c:r>c;r=0<=c?++r:--r)this.metrics.push({advance:n.readUInt16(),lsb:n.readInt16()});for(a=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var u,h;for(h=[],r=u=0;0<=a?u<a:u>a;r=0<=a?++u:--u)h.push(n.readInt16());return h}(),this.widths=(function(){var u,h,f,m;for(m=[],u=0,h=(f=this.metrics).length;u<h;u++)o=f[u],m.push(o.advance);return m}).call(this),i=this.widths[this.widths.length-1],d=[],r=l=0;0<=a?l<a:l>a;r=0<=a?++l:--l)d.push(this.widths.push(i));return d},e.prototype.forGlyph=function(n){return n in this.metrics?this.metrics[n]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[n-this.metrics.length]}},e}(),mse=[].slice,JCe=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return kd(e,Ac),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(n){var r,i,a,o,l,c,d,u,h,f;return n in this.cache?this.cache[n]:(o=this.file.loca,r=this.file.contents,i=o.indexOf(n),(a=o.lengthOf(n))===0?this.cache[n]=null:(r.pos=this.offset+i,l=(c=new wm(r.read(a))).readShort(),u=c.readShort(),f=c.readShort(),d=c.readShort(),h=c.readShort(),this.cache[n]=l===-1?new tEe(c,u,f,d,h):new eEe(c,l,u,f,d,h),this.cache[n]))},e.prototype.encode=function(n,r,i){var a,o,l,c,d;for(l=[],o=[],c=0,d=r.length;c<d;c++)a=n[r[c]],o.push(l.length),a&&(l=l.concat(a.encode(i)));return o.push(l.length),{table:l,offsets:o}},e}(),eEe=function(){function t(e,n,r,i,a,o){this.raw=e,this.numberOfContours=n,this.xMin=r,this.yMin=i,this.xMax=a,this.yMax=o,this.compound=!1}return t.prototype.encode=function(){return this.raw.data},t}(),tEe=function(){function t(e,n,r,i,a){var o,l;for(this.raw=e,this.xMin=n,this.yMin=r,this.xMax=i,this.yMax=a,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],o=this.raw;l=o.readShort(),this.glyphOffsets.push(o.pos),this.glyphIDs.push(o.readUInt16()),32&l;)o.pos+=1&l?4:2,128&l?o.pos+=8:64&l?o.pos+=4:8&l&&(o.pos+=2)}return t.prototype.encode=function(){var e,n,r;for(n=new wm(mse.call(this.raw.data)),e=0,r=this.glyphIDs.length;e<r;++e)n.pos=this.glyphOffsets[e];return n.data},t}(),nEe=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return kd(e,Ac),e.prototype.tag="loca",e.prototype.parse=function(n){var r,i;return n.pos=this.offset,r=this.file.head.indexToLocFormat,this.offsets=r===0?(function(){var a,o;for(o=[],i=0,a=this.length;i<a;i+=2)o.push(2*n.readUInt16());return o}).call(this):(function(){var a,o;for(o=[],i=0,a=this.length;i<a;i+=4)o.push(n.readUInt32());return o}).call(this)},e.prototype.indexOf=function(n){return this.offsets[n]},e.prototype.lengthOf=function(n){return this.offsets[n+1]-this.offsets[n]},e.prototype.encode=function(n,r){for(var i=new Uint32Array(this.offsets.length),a=0,o=0,l=0;l<i.length;++l)if(i[l]=a,o<r.length&&r[o]==l){++o,i[l]=a;var c=this.offsets[l],d=this.offsets[l+1]-c;d>0&&(a+=d)}for(var u=new Array(4*i.length),h=0;h<i.length;++h)u[4*h+3]=255&i[h],u[4*h+2]=(65280&i[h])>>8,u[4*h+1]=(16711680&i[h])>>16,u[4*h]=(4278190080&i[h])>>24;return u},e}(),rEe=function(){function t(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return t.prototype.generateCmap=function(){var e,n,r,i,a;for(n in i=this.font.cmap.tables[0].codeMap,e={},a=this.subset)r=a[n],e[n]=i[r];return e},t.prototype.glyphsFor=function(e){var n,r,i,a,o,l,c;for(i={},o=0,l=e.length;o<l;o++)i[a=e[o]]=this.font.glyf.glyphFor(a);for(a in n=[],i)(r=i[a])!=null&&r.compound&&n.push.apply(n,r.glyphIDs);if(n.length>0)for(a in c=this.glyphsFor(n))r=c[a],i[a]=r;return i},t.prototype.encode=function(e,n){var r,i,a,o,l,c,d,u,h,f,m,v,p,g,x;for(i in r=fse.encode(this.generateCmap(),"unicode"),o=this.glyphsFor(e),m={0:0},x=r.charMap)m[(c=x[i]).old]=c.new;for(v in f=r.maxGlyphID,o)v in m||(m[v]=f++);return u=function(y){var b,w;for(b in w={},y)w[y[b]]=b;return w}(m),h=Object.keys(u).sort(function(y,b){return y-b}),p=function(){var y,b,w;for(w=[],y=0,b=h.length;y<b;y++)l=h[y],w.push(u[l]);return w}(),a=this.font.glyf.encode(o,p,m),d=this.font.loca.encode(a.offsets,p),g={cmap:this.font.cmap.raw(),glyf:a.table,loca:d,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(n)},this.font.os2.exists&&(g["OS/2"]=this.font.os2.raw()),this.font.directory.encode(g)},t}();Bt.API.PDFObject=function(){var t;function e(){}return t=function(n,r){return(Array(r+1).join("0")+n).slice(-r)},e.convert=function(n){var r,i,a,o;if(Array.isArray(n))return"["+function(){var l,c,d;for(d=[],l=0,c=n.length;l<c;l++)r=n[l],d.push(e.convert(r));return d}().join(" ")+"]";if(typeof n=="string")return"/"+n;if(n!=null&&n.isString)return"("+n+")";if(n instanceof Date)return"(D:"+t(n.getUTCFullYear(),4)+t(n.getUTCMonth(),2)+t(n.getUTCDate(),2)+t(n.getUTCHours(),2)+t(n.getUTCMinutes(),2)+t(n.getUTCSeconds(),2)+"Z)";if({}.toString.call(n)==="[object Object]"){for(i in a=["<<"],n)o=n[i],a.push("/"+i+" "+e.convert(o));return a.push(">>"),a.join(`
`)}return""+n},e}();const sEe=Object.freeze(Object.defineProperty({__proto__:null,AcroForm:LCe,AcroFormAppearance:Tt,AcroFormButton:Bs,AcroFormCheckBox:cj,AcroFormChoiceField:Yg,AcroFormComboBox:Zg,AcroFormEditBox:oj,AcroFormListBox:Xg,AcroFormPasswordField:dj,AcroFormPushButton:lj,AcroFormRadioButton:Qg,AcroFormTextField:am,GState:r2,ShadingPattern:Wh,TilingPattern:xp,default:Bt,jsPDF:Bt},Symbol.toStringTag,{value:"Module"}));var iEe={exports:{}};const aEe=Kle(sEe);/*!
 * 
 *               jsPDF AutoTable plugin v3.8.4
 *
 *               Copyright (c) 2024 Simon Bengtsson, https://github.com/simonbengtsson/jsPDF-AutoTable
 *               Licensed under the MIT License.
 *               http://opensource.org/licenses/mit-license
 *
 */(function(t,e){(function(r,i){t.exports=i(function(){try{return aEe}catch{}}())})(typeof globalThis<"u"?globalThis:typeof $f<"u"?$f:typeof window<"u"?window:typeof self<"u"?self:$f,function(n){return function(){var r={172:function(l,c){var d=this&&this.__extends||function(){var f=function(m,v){return f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,g){p.__proto__=g}||function(p,g){for(var x in g)Object.prototype.hasOwnProperty.call(g,x)&&(p[x]=g[x])},f(m,v)};return function(m,v){if(typeof v!="function"&&v!==null)throw new TypeError("Class extends value "+String(v)+" is not a constructor or null");f(m,v);function p(){this.constructor=m}m.prototype=v===null?Object.create(v):(p.prototype=v.prototype,new p)}}();Object.defineProperty(c,"__esModule",{value:!0}),c.CellHookData=c.HookData=void 0;var u=function(){function f(m,v,p){this.table=v,this.pageNumber=v.pageNumber,this.pageCount=this.pageNumber,this.settings=v.settings,this.cursor=p,this.doc=m.getDocument()}return f}();c.HookData=u;var h=function(f){d(m,f);function m(v,p,g,x,y,b){var w=f.call(this,v,p,b)||this;return w.cell=g,w.row=x,w.column=y,w.section=x.section,w}return m}(u);c.CellHookData=h},340:function(l,c,d){Object.defineProperty(c,"__esModule",{value:!0});var u=d(4),h=d(136),f=d(744),m=d(776),v=d(664),p=d(972);function g(x){x.API.autoTable=function(){for(var y=[],b=0;b<arguments.length;b++)y[b]=arguments[b];var w;y.length===1?w=y[0]:(console.error("Use of deprecated autoTable initiation"),w=y[2]||{},w.columns=y[0],w.body=y[1]);var N=(0,m.parseInput)(this,w),E=(0,p.createTable)(this,N);return(0,v.drawTable)(this,E),this},x.API.lastAutoTable=!1,x.API.previousAutoTable=!1,x.API.autoTable.previous=!1,x.API.autoTableText=function(y,b,w,N){(0,h.default)(y,b,w,N,this)},x.API.autoTableSetDefaults=function(y){return f.DocHandler.setDefaults(y,this),this},x.autoTableSetDefaults=function(y,b){f.DocHandler.setDefaults(y,b)},x.API.autoTableHtmlToJson=function(y,b){var w;if(b===void 0&&(b=!1),typeof window>"u")return console.error("Cannot run autoTableHtmlToJson in non browser environment"),null;var N=new f.DocHandler(this),E=(0,u.parseHtml)(N,y,window,b,!1),C=E.head,j=E.body,I=((w=C[0])===null||w===void 0?void 0:w.map(function(k){return k.content}))||[];return{columns:I,rows:j,data:j}},x.API.autoTableEndPosY=function(){console.error("Use of deprecated function: autoTableEndPosY. Use doc.lastAutoTable.finalY instead.");var y=this.lastAutoTable;return y&&y.finalY?y.finalY:0},x.API.autoTableAddPageContent=function(y){return console.error("Use of deprecated function: autoTableAddPageContent. Use jsPDF.autoTableSetDefaults({didDrawPage: () => {}}) instead."),x.API.autoTable.globalDefaults||(x.API.autoTable.globalDefaults={}),x.API.autoTable.globalDefaults.addPageContent=y,this},x.API.autoTableAddPage=function(){return console.error("Use of deprecated function: autoTableAddPage. Use doc.addPage()"),this.addPage(),this}}c.default=g},136:function(l,c){Object.defineProperty(c,"__esModule",{value:!0});function d(u,h,f,m,v){m=m||{};var p=1.15,g=v.internal.scaleFactor,x=v.internal.getFontSize()/g,y=v.getLineHeightFactor?v.getLineHeightFactor():p,b=x*y,w=/\r\n|\r|\n/g,N="",E=1;if((m.valign==="middle"||m.valign==="bottom"||m.halign==="center"||m.halign==="right")&&(N=typeof u=="string"?u.split(w):u,E=N.length||1),f+=x*(2-p),m.valign==="middle"?f-=E/2*b:m.valign==="bottom"&&(f-=E*b),m.halign==="center"||m.halign==="right"){var C=x;if(m.halign==="center"&&(C*=.5),N&&E>=1){for(var j=0;j<N.length;j++)v.text(N[j],h-v.getStringUnitWidth(N[j])*C,f),f+=b;return v}h-=v.getStringUnitWidth(u)*C}return m.halign==="justify"?v.text(u,h,f,{maxWidth:m.maxWidth||100,align:"justify"}):v.text(u,h,f),v}c.default=d},420:function(l,c){Object.defineProperty(c,"__esModule",{value:!0}),c.getPageAvailableWidth=c.parseSpacing=c.getFillStyle=c.addTableBorder=c.getStringWidth=void 0;function d(v,p,g){g.applyStyles(p,!0);var x=Array.isArray(v)?v:[v],y=x.map(function(b){return g.getTextWidth(b)}).reduce(function(b,w){return Math.max(b,w)},0);return y}c.getStringWidth=d;function u(v,p,g,x){var y=p.settings.tableLineWidth,b=p.settings.tableLineColor;v.applyStyles({lineWidth:y,lineColor:b});var w=h(y,!1);w&&v.rect(g.x,g.y,p.getWidth(v.pageSize().width),x.y-g.y,w)}c.addTableBorder=u;function h(v,p){var g=v>0,x=p||p===0;return g&&x?"DF":g?"S":x?"F":null}c.getFillStyle=h;function f(v,p){var g,x,y,b;if(v=v||p,Array.isArray(v)){if(v.length>=4)return{top:v[0],right:v[1],bottom:v[2],left:v[3]};if(v.length===3)return{top:v[0],right:v[1],bottom:v[2],left:v[1]};if(v.length===2)return{top:v[0],right:v[1],bottom:v[0],left:v[1]};v.length===1?v=v[0]:v=p}return typeof v=="object"?(typeof v.vertical=="number"&&(v.top=v.vertical,v.bottom=v.vertical),typeof v.horizontal=="number"&&(v.right=v.horizontal,v.left=v.horizontal),{left:(g=v.left)!==null&&g!==void 0?g:p,top:(x=v.top)!==null&&x!==void 0?x:p,right:(y=v.right)!==null&&y!==void 0?y:p,bottom:(b=v.bottom)!==null&&b!==void 0?b:p}):(typeof v!="number"&&(v=p),{top:v,right:v,bottom:v,left:v})}c.parseSpacing=f;function m(v,p){var g=f(p.settings.margin,0);return v.pageSize().width-(g.left+g.right)}c.getPageAvailableWidth=m},796:function(l,c){var d=this&&this.__extends||function(){var m=function(v,p){return m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,x){g.__proto__=x}||function(g,x){for(var y in x)Object.prototype.hasOwnProperty.call(x,y)&&(g[y]=x[y])},m(v,p)};return function(v,p){if(typeof p!="function"&&p!==null)throw new TypeError("Class extends value "+String(p)+" is not a constructor or null");m(v,p);function g(){this.constructor=v}v.prototype=p===null?Object.create(p):(g.prototype=p.prototype,new g)}}();Object.defineProperty(c,"__esModule",{value:!0}),c.getTheme=c.defaultStyles=c.HtmlRowInput=void 0;var u=function(m){d(v,m);function v(p){var g=m.call(this)||this;return g._element=p,g}return v}(Array);c.HtmlRowInput=u;function h(m){return{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/m,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0}}c.defaultStyles=h;function f(m){var v={striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}};return v[m]}c.getTheme=f},903:function(l,c,d){Object.defineProperty(c,"__esModule",{value:!0}),c.parseCss=void 0;var u=d(420);function h(g,x,y,b,w){var N={},E=1.3333333333333333,C=m(x,function(H){return w.getComputedStyle(H).backgroundColor});C!=null&&(N.fillColor=C);var j=m(x,function(H){return w.getComputedStyle(H).color});j!=null&&(N.textColor=j);var I=p(b,y);I&&(N.cellPadding=I);var k="borderTopColor",D=E*y,P=b.borderTopWidth;if(b.borderBottomWidth===P&&b.borderRightWidth===P&&b.borderLeftWidth===P){var R=(parseFloat(P)||0)/D;R&&(N.lineWidth=R)}else N.lineWidth={top:(parseFloat(b.borderTopWidth)||0)/D,right:(parseFloat(b.borderRightWidth)||0)/D,bottom:(parseFloat(b.borderBottomWidth)||0)/D,left:(parseFloat(b.borderLeftWidth)||0)/D},N.lineWidth.top||(N.lineWidth.right?k="borderRightColor":N.lineWidth.bottom?k="borderBottomColor":N.lineWidth.left&&(k="borderLeftColor"));var _=m(x,function(H){return w.getComputedStyle(H)[k]});_!=null&&(N.lineColor=_);var M=["left","right","center","justify"];M.indexOf(b.textAlign)!==-1&&(N.halign=b.textAlign),M=["middle","bottom","top"],M.indexOf(b.verticalAlign)!==-1&&(N.valign=b.verticalAlign);var U=parseInt(b.fontSize||"");isNaN(U)||(N.fontSize=U/E);var F=f(b);F&&(N.fontStyle=F);var z=(b.fontFamily||"").toLowerCase();return g.indexOf(z)!==-1&&(N.font=z),N}c.parseCss=h;function f(g){var x="";return(g.fontWeight==="bold"||g.fontWeight==="bolder"||parseInt(g.fontWeight)>=700)&&(x="bold"),(g.fontStyle==="italic"||g.fontStyle==="oblique")&&(x+="italic"),x}function m(g,x){var y=v(g,x);if(!y)return null;var b=y.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!b||!Array.isArray(b))return null;var w=[parseInt(b[1]),parseInt(b[2]),parseInt(b[3])],N=parseInt(b[4]);return N===0||isNaN(w[0])||isNaN(w[1])||isNaN(w[2])?null:w}function v(g,x){var y=x(g);return y==="rgba(0, 0, 0, 0)"||y==="transparent"||y==="initial"||y==="inherit"?g.parentElement==null?null:v(g.parentElement,x):y}function p(g,x){var y=[g.paddingTop,g.paddingRight,g.paddingBottom,g.paddingLeft],b=96/(72/x),w=(parseInt(g.lineHeight)-parseInt(g.fontSize))/x/2,N=y.map(function(C){return parseInt(C||"0")/b}),E=(0,u.parseSpacing)(N,0);return w>E.top&&(E.top=w),w>E.bottom&&(E.bottom=w),E}},744:function(l,c){Object.defineProperty(c,"__esModule",{value:!0}),c.DocHandler=void 0;var d={},u=function(){function h(f){this.jsPDFDocument=f,this.userStyles={textColor:f.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:f.internal.getFontSize(),fontStyle:f.internal.getFont().fontStyle,font:f.internal.getFont().fontName,lineWidth:f.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:f.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return h.setDefaults=function(f,m){m===void 0&&(m=null),m?m.__autoTableDocumentDefaults=f:d=f},h.unifyColor=function(f){return Array.isArray(f)?f:typeof f=="number"?[f,f,f]:typeof f=="string"?[f]:null},h.prototype.applyStyles=function(f,m){var v,p,g;m===void 0&&(m=!1),f.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(f.fontStyle);var x=this.jsPDFDocument.internal.getFont(),y=x.fontStyle,b=x.fontName;if(f.font&&(b=f.font),f.fontStyle){y=f.fontStyle;var w=this.getFontList()[b];w&&w.indexOf(y)===-1&&(this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(w[0]),y=w[0])}if(this.jsPDFDocument.setFont(b,y),f.fontSize&&this.jsPDFDocument.setFontSize(f.fontSize),!m){var N=h.unifyColor(f.fillColor);N&&(v=this.jsPDFDocument).setFillColor.apply(v,N),N=h.unifyColor(f.textColor),N&&(p=this.jsPDFDocument).setTextColor.apply(p,N),N=h.unifyColor(f.lineColor),N&&(g=this.jsPDFDocument).setDrawColor.apply(g,N),typeof f.lineWidth=="number"&&this.jsPDFDocument.setLineWidth(f.lineWidth)}},h.prototype.splitTextToSize=function(f,m,v){return this.jsPDFDocument.splitTextToSize(f,m,v)},h.prototype.rect=function(f,m,v,p,g){return this.jsPDFDocument.rect(f,m,v,p,g)},h.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},h.prototype.getTextWidth=function(f){return this.jsPDFDocument.getTextWidth(f)},h.prototype.getDocument=function(){return this.jsPDFDocument},h.prototype.setPage=function(f){this.jsPDFDocument.setPage(f)},h.prototype.addPage=function(){return this.jsPDFDocument.addPage()},h.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},h.prototype.getGlobalOptions=function(){return d||{}},h.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},h.prototype.pageSize=function(){var f=this.jsPDFDocument.internal.pageSize;return f.width==null&&(f={width:f.getWidth(),height:f.getHeight()}),f},h.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},h.prototype.getLineHeightFactor=function(){var f=this.jsPDFDocument;return f.getLineHeightFactor?f.getLineHeightFactor():1.15},h.prototype.getLineHeight=function(f){return f/this.scaleFactor()*this.getLineHeightFactor()},h.prototype.pageNumber=function(){var f=this.jsPDFDocument.internal.getCurrentPageInfo();return f?f.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},h}();c.DocHandler=u},4:function(l,c,d){Object.defineProperty(c,"__esModule",{value:!0}),c.parseHtml=void 0;var u=d(903),h=d(796);function f(p,g,x,y,b){var w,N;y===void 0&&(y=!1),b===void 0&&(b=!1);var E;typeof g=="string"?E=x.document.querySelector(g):E=g;var C=Object.keys(p.getFontList()),j=p.scaleFactor(),I=[],k=[],D=[];if(!E)return console.error("Html table could not be found with input: ",g),{head:I,body:k,foot:D};for(var P=0;P<E.rows.length;P++){var R=E.rows[P],_=(N=(w=R==null?void 0:R.parentElement)===null||w===void 0?void 0:w.tagName)===null||N===void 0?void 0:N.toLowerCase(),M=m(C,j,x,R,y,b);M&&(_==="thead"?I.push(M):_==="tfoot"?D.push(M):k.push(M))}return{head:I,body:k,foot:D}}c.parseHtml=f;function m(p,g,x,y,b,w){for(var N=new h.HtmlRowInput(y),E=0;E<y.cells.length;E++){var C=y.cells[E],j=x.getComputedStyle(C);if(b||j.display!=="none"){var I=void 0;w&&(I=(0,u.parseCss)(p,C,g,j,x)),N.push({rowSpan:C.rowSpan,colSpan:C.colSpan,styles:I,_element:C,content:v(C)})}}var k=x.getComputedStyle(y);if(N.length>0&&(b||k.display!=="none"))return N}function v(p){var g=p.cloneNode(!0);return g.innerHTML=g.innerHTML.replace(/\n/g,"").replace(/ +/g," "),g.innerHTML=g.innerHTML.split(/<br.*?>/).map(function(x){return x.trim()}).join(`
`),g.innerText||g.textContent||""}},776:function(l,c,d){Object.defineProperty(c,"__esModule",{value:!0}),c.parseInput=void 0;var u=d(4),h=d(356),f=d(420),m=d(744),v=d(792);function p(E,C){var j=new m.DocHandler(E),I=j.getDocumentOptions(),k=j.getGlobalOptions();(0,v.default)(j,k,I,C);var D=(0,h.assign)({},k,I,C),P;typeof window<"u"&&(P=window);var R=g(k,I,C),_=x(k,I,C),M=y(j,D),U=w(j,D,P);return{id:C.tableId,content:U,hooks:_,styles:R,settings:M}}c.parseInput=p;function g(E,C,j){for(var I={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},k=function(_){if(_==="columnStyles"){var M=E[_],U=C[_],F=j[_];I.columnStyles=(0,h.assign)({},M,U,F)}else{var z=[E,C,j],H=z.map(function(W){return W[_]||{}});I[_]=(0,h.assign)({},H[0],H[1],H[2])}},D=0,P=Object.keys(I);D<P.length;D++){var R=P[D];k(R)}return I}function x(E,C,j){for(var I=[E,C,j],k={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},D=0,P=I;D<P.length;D++){var R=P[D];R.didParseCell&&k.didParseCell.push(R.didParseCell),R.willDrawCell&&k.willDrawCell.push(R.willDrawCell),R.didDrawCell&&k.didDrawCell.push(R.didDrawCell),R.willDrawPage&&k.willDrawPage.push(R.willDrawPage),R.didDrawPage&&k.didDrawPage.push(R.didDrawPage)}return k}function y(E,C){var j,I,k,D,P,R,_,M,U,F,z,H,W=(0,f.parseSpacing)(C.margin,40/E.scaleFactor()),$=(j=b(E,C.startY))!==null&&j!==void 0?j:W.top,L;C.showFoot===!0?L="everyPage":C.showFoot===!1?L="never":L=(I=C.showFoot)!==null&&I!==void 0?I:"everyPage";var q;C.showHead===!0?q="everyPage":C.showHead===!1?q="never":q=(k=C.showHead)!==null&&k!==void 0?k:"everyPage";var Y=(D=C.useCss)!==null&&D!==void 0?D:!1,J=C.theme||(Y?"plain":"striped"),ne=!!C.horizontalPageBreak,re=(P=C.horizontalPageBreakRepeat)!==null&&P!==void 0?P:null;return{includeHiddenHtml:(R=C.includeHiddenHtml)!==null&&R!==void 0?R:!1,useCss:Y,theme:J,startY:$,margin:W,pageBreak:(_=C.pageBreak)!==null&&_!==void 0?_:"auto",rowPageBreak:(M=C.rowPageBreak)!==null&&M!==void 0?M:"auto",tableWidth:(U=C.tableWidth)!==null&&U!==void 0?U:"auto",showHead:q,showFoot:L,tableLineWidth:(F=C.tableLineWidth)!==null&&F!==void 0?F:0,tableLineColor:(z=C.tableLineColor)!==null&&z!==void 0?z:200,horizontalPageBreak:ne,horizontalPageBreakRepeat:re,horizontalPageBreakBehaviour:(H=C.horizontalPageBreakBehaviour)!==null&&H!==void 0?H:"afterAllRows"}}function b(E,C){var j=E.getLastAutoTable(),I=E.scaleFactor(),k=E.pageNumber(),D=!1;if(j&&j.startPageNumber){var P=j.startPageNumber+j.pageNumber-1;D=P===k}return typeof C=="number"?C:(C==null||C===!1)&&D&&(j==null?void 0:j.finalY)!=null?j.finalY+20/I:null}function w(E,C,j){var I=C.head||[],k=C.body||[],D=C.foot||[];if(C.html){var P=C.includeHiddenHtml;if(j){var R=(0,u.parseHtml)(E,C.html,j,P,C.useCss)||{};I=R.head||I,k=R.body||I,D=R.foot||I}else console.error("Cannot parse html in non browser environment")}var _=C.columns||N(I,k,D);return{columns:_,head:I,body:k,foot:D}}function N(E,C,j){var I=E[0]||C[0]||j[0]||[],k=[];return Object.keys(I).filter(function(D){return D!=="_element"}).forEach(function(D){var P=1,R;Array.isArray(I)?R=I[parseInt(D)]:R=I[D],typeof R=="object"&&!Array.isArray(R)&&(P=(R==null?void 0:R.colSpan)||1);for(var _=0;_<P;_++){var M=void 0;Array.isArray(I)?M=k.length:M=D+(_>0?"_".concat(_):"");var U={dataKey:M};k.push(U)}}),k}},792:function(l,c){Object.defineProperty(c,"__esModule",{value:!0});function d(h,f,m,v){for(var p=function(b){b&&typeof b!="object"&&console.error("The options parameter should be of type object, is: "+typeof b),typeof b.extendWidth<"u"&&(b.tableWidth=b.extendWidth?"auto":"wrap",console.error("Use of deprecated option: extendWidth, use tableWidth instead.")),typeof b.margins<"u"&&(typeof b.margin>"u"&&(b.margin=b.margins),console.error("Use of deprecated option: margins, use margin instead.")),b.startY&&typeof b.startY!="number"&&(console.error("Invalid value for startY option",b.startY),delete b.startY),!b.didDrawPage&&(b.afterPageContent||b.beforePageContent||b.afterPageAdd)&&(console.error("The afterPageContent, beforePageContent and afterPageAdd hooks are deprecated. Use didDrawPage instead"),b.didDrawPage=function(D){h.applyStyles(h.userStyles),b.beforePageContent&&b.beforePageContent(D),h.applyStyles(h.userStyles),b.afterPageContent&&b.afterPageContent(D),h.applyStyles(h.userStyles),b.afterPageAdd&&D.pageNumber>1&&D.afterPageAdd(D),h.applyStyles(h.userStyles)}),["createdHeaderCell","drawHeaderRow","drawRow","drawHeaderCell"].forEach(function(D){b[D]&&console.error('The "'.concat(D,'" hook has changed in version 3.0, check the changelog for how to migrate.'))}),[["showFoot","showFooter"],["showHead","showHeader"],["didDrawPage","addPageContent"],["didParseCell","createdCell"],["headStyles","headerStyles"]].forEach(function(D){var P=D[0],R=D[1];b[R]&&(console.error("Use of deprecated option ".concat(R,". Use ").concat(P," instead")),b[P]=b[R])}),[["padding","cellPadding"],["lineHeight","rowHeight"],"fontSize","overflow"].forEach(function(D){var P=typeof D=="string"?D:D[0],R=typeof D=="string"?D:D[1];typeof b[P]<"u"&&(typeof b.styles[R]>"u"&&(b.styles[R]=b[P]),console.error("Use of deprecated option: "+P+", use the style "+R+" instead."))});for(var w=0,N=["styles","bodyStyles","headStyles","footStyles"];w<N.length;w++){var E=N[w];u(b[E]||{})}for(var C=b.columnStyles||{},j=0,I=Object.keys(C);j<I.length;j++){var k=I[j];u(C[k]||{})}},g=0,x=[f,m,v];g<x.length;g++){var y=x[g];p(y)}}c.default=d;function u(h){h.rowHeight?(console.error("Use of deprecated style rowHeight. It is renamed to minCellHeight."),h.minCellHeight||(h.minCellHeight=h.rowHeight)):h.columnWidth&&(console.error("Use of deprecated style columnWidth. It is renamed to cellWidth."),h.cellWidth||(h.cellWidth=h.columnWidth))}},260:function(l,c,d){Object.defineProperty(c,"__esModule",{value:!0}),c.Column=c.Cell=c.Row=c.Table=void 0;var u=d(796),h=d(172),f=d(420),m=function(){function x(y,b){this.pageNumber=1,this.pageCount=1,this.id=y.id,this.settings=y.settings,this.styles=y.styles,this.hooks=y.hooks,this.columns=b.columns,this.head=b.head,this.body=b.body,this.foot=b.foot}return x.prototype.getHeadHeight=function(y){return this.head.reduce(function(b,w){return b+w.getMaxCellHeight(y)},0)},x.prototype.getFootHeight=function(y){return this.foot.reduce(function(b,w){return b+w.getMaxCellHeight(y)},0)},x.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},x.prototype.callCellHooks=function(y,b,w,N,E,C){for(var j=0,I=b;j<I.length;j++){var k=I[j],D=new h.CellHookData(y,this,w,N,E,C),P=k(D)===!1;if(w.text=Array.isArray(w.text)?w.text:[w.text],P)return!1}return!0},x.prototype.callEndPageHooks=function(y,b){y.applyStyles(y.userStyles);for(var w=0,N=this.hooks.didDrawPage;w<N.length;w++){var E=N[w];E(new h.HookData(y,this,b))}},x.prototype.callWillDrawPageHooks=function(y,b){for(var w=0,N=this.hooks.willDrawPage;w<N.length;w++){var E=N[w];E(new h.HookData(y,this,b))}},x.prototype.getWidth=function(y){if(typeof this.settings.tableWidth=="number")return this.settings.tableWidth;if(this.settings.tableWidth==="wrap"){var b=this.columns.reduce(function(N,E){return N+E.wrappedWidth},0);return b}else{var w=this.settings.margin;return y-w.left-w.right}},x}();c.Table=m;var v=function(){function x(y,b,w,N,E){E===void 0&&(E=!1),this.height=0,this.raw=y,y instanceof u.HtmlRowInput&&(this.raw=y._element,this.element=y._element),this.index=b,this.section=w,this.cells=N,this.spansMultiplePages=E}return x.prototype.getMaxCellHeight=function(y){var b=this;return y.reduce(function(w,N){var E;return Math.max(w,((E=b.cells[N.index])===null||E===void 0?void 0:E.height)||0)},0)},x.prototype.hasRowSpan=function(y){var b=this;return y.filter(function(w){var N=b.cells[w.index];return N?N.rowSpan>1:!1}).length>0},x.prototype.canEntireRowFit=function(y,b){return this.getMaxCellHeight(b)<=y},x.prototype.getMinimumRowHeight=function(y,b){var w=this;return y.reduce(function(N,E){var C=w.cells[E.index];if(!C)return 0;var j=b.getLineHeight(C.styles.fontSize),I=C.padding("vertical"),k=I+j;return k>N?k:N},0)},x}();c.Row=v;var p=function(){function x(y,b,w){var N,E;this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=b,this.section=w,this.raw=y;var C=y;y!=null&&typeof y=="object"&&!Array.isArray(y)?(this.rowSpan=y.rowSpan||1,this.colSpan=y.colSpan||1,C=(E=(N=y.content)!==null&&N!==void 0?N:y.title)!==null&&E!==void 0?E:y,y._element&&(this.raw=y._element)):(this.rowSpan=1,this.colSpan=1);var j=C!=null?""+C:"",I=/\r\n|\r|\n/g;this.text=j.split(I)}return x.prototype.getTextPos=function(){var y;if(this.styles.valign==="top")y=this.y+this.padding("top");else if(this.styles.valign==="bottom")y=this.y+this.height-this.padding("bottom");else{var b=this.height-this.padding("vertical");y=this.y+b/2+this.padding("top")}var w;if(this.styles.halign==="right")w=this.x+this.width-this.padding("right");else if(this.styles.halign==="center"){var N=this.width-this.padding("horizontal");w=this.x+N/2+this.padding("left")}else w=this.x+this.padding("left");return{x:w,y}},x.prototype.getContentHeight=function(y,b){b===void 0&&(b=1.15);var w=Array.isArray(this.text)?this.text.length:1,N=this.styles.fontSize/y*b,E=w*N+this.padding("vertical");return Math.max(E,this.styles.minCellHeight)},x.prototype.padding=function(y){var b=(0,f.parseSpacing)(this.styles.cellPadding,0);return y==="vertical"?b.top+b.bottom:y==="horizontal"?b.left+b.right:b[y]},x}();c.Cell=p;var g=function(){function x(y,b,w){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=y,this.raw=b,this.index=w}return x.prototype.getMaxCustomCellWidth=function(y){for(var b=0,w=0,N=y.allRows();w<N.length;w++){var E=N[w],C=E.cells[this.index];C&&typeof C.styles.cellWidth=="number"&&(b=Math.max(b,C.styles.cellWidth))}return b},x}();c.Column=g},356:function(l,c){Object.defineProperty(c,"__esModule",{value:!0}),c.assign=void 0;function d(u,h,f,m,v){if(u==null)throw new TypeError("Cannot convert undefined or null to object");for(var p=Object(u),g=1;g<arguments.length;g++){var x=arguments[g];if(x!=null)for(var y in x)Object.prototype.hasOwnProperty.call(x,y)&&(p[y]=x[y])}return p}c.assign=d},972:function(l,c,d){Object.defineProperty(c,"__esModule",{value:!0}),c.createTable=void 0;var u=d(744),h=d(260),f=d(324),m=d(796),v=d(356);function p(E,C){var j=new u.DocHandler(E),I=g(C,j.scaleFactor()),k=new h.Table(C,I);return(0,f.calculateWidths)(j,k),j.applyStyles(j.userStyles),k}c.createTable=p;function g(E,C){var j=E.content,I=w(j.columns);if(j.head.length===0){var k=y(I,"head");k&&j.head.push(k)}if(j.foot.length===0){var k=y(I,"foot");k&&j.foot.push(k)}var D=E.settings.theme,P=E.styles;return{columns:I,head:x("head",j.head,I,P,D,C),body:x("body",j.body,I,P,D,C),foot:x("foot",j.foot,I,P,D,C)}}function x(E,C,j,I,k,D){var P={},R=C.map(function(_,M){for(var U=0,F={},z=0,H=0,W=0,$=j;W<$.length;W++){var L=$[W];if(P[L.index]==null||P[L.index].left===0)if(H===0){var q=void 0;Array.isArray(_)?q=_[L.index-z-U]:q=_[L.dataKey];var Y={};typeof q=="object"&&!Array.isArray(q)&&(Y=(q==null?void 0:q.styles)||{});var J=N(E,L,M,k,I,D,Y),ne=new h.Cell(q,J,E);F[L.dataKey]=ne,F[L.index]=ne,H=ne.colSpan-1,P[L.index]={left:ne.rowSpan-1,times:H}}else H--,z++;else P[L.index].left--,H=P[L.index].times,U++}return new h.Row(_,M,E,F)});return R}function y(E,C){var j={};return E.forEach(function(I){if(I.raw!=null){var k=b(C,I.raw);k!=null&&(j[I.dataKey]=k)}}),Object.keys(j).length>0?j:null}function b(E,C){if(E==="head"){if(typeof C=="object")return C.header||C.title||null;if(typeof C=="string"||typeof C=="number")return C}else if(E==="foot"&&typeof C=="object")return C.footer;return null}function w(E){return E.map(function(C,j){var I,k,D;return typeof C=="object"?D=(k=(I=C.dataKey)!==null&&I!==void 0?I:C.key)!==null&&k!==void 0?k:j:D=j,new h.Column(D,C,j)})}function N(E,C,j,I,k,D,P){var R=(0,m.getTheme)(I),_;E==="head"?_=k.headStyles:E==="body"?_=k.bodyStyles:E==="foot"&&(_=k.footStyles);var M=(0,v.assign)({},R.table,R[E],k.styles,_),U=k.columnStyles[C.dataKey]||k.columnStyles[C.index]||{},F=E==="body"?U:{},z=E==="body"&&j%2===0?(0,v.assign)({},R.alternateRow,k.alternateRowStyles):{},H=(0,m.defaultStyles)(D),W=(0,v.assign)({},H,M,z,F);return(0,v.assign)(W,P)}},664:function(l,c,d){Object.defineProperty(c,"__esModule",{value:!0}),c.addPage=c.drawTable=void 0;var u=d(420),h=d(260),f=d(744),m=d(356),v=d(136),p=d(224);function g(U,F){var z=F.settings,H=z.startY,W=z.margin,$={x:W.left,y:H},L=F.getHeadHeight(F.columns)+F.getFootHeight(F.columns),q=H+W.bottom+L;if(z.pageBreak==="avoid"){var Y=F.body,J=Y.reduce(function(pe,ue){return pe+ue.height},0);q+=J}var ne=new f.DocHandler(U);(z.pageBreak==="always"||z.startY!=null&&q>ne.pageSize().height)&&(M(ne),$.y=W.top),F.callWillDrawPageHooks(ne,$);var re=(0,m.assign)({},$);F.startPageNumber=ne.pageNumber(),z.horizontalPageBreak?x(ne,F,re,$):(ne.applyStyles(ne.userStyles),(z.showHead==="firstPage"||z.showHead==="everyPage")&&F.head.forEach(function(pe){return k(ne,F,pe,$,F.columns)}),ne.applyStyles(ne.userStyles),F.body.forEach(function(pe,ue){var xe=ue===F.body.length-1;I(ne,F,pe,xe,re,$,F.columns)}),ne.applyStyles(ne.userStyles),(z.showFoot==="lastPage"||z.showFoot==="everyPage")&&F.foot.forEach(function(pe){return k(ne,F,pe,$,F.columns)})),(0,u.addTableBorder)(ne,F,re,$),F.callEndPageHooks(ne,$),F.finalY=$.y,U.lastAutoTable=F,U.previousAutoTable=F,U.autoTable&&(U.autoTable.previous=F),ne.applyStyles(ne.userStyles)}c.drawTable=g;function x(U,F,z,H){var W=(0,p.calculateAllColumnsCanFitInPage)(U,F),$=F.settings;if($.horizontalPageBreakBehaviour==="afterAllRows")W.forEach(function(J,ne){U.applyStyles(U.userStyles),ne>0?_(U,F,z,H,J.columns,!0):y(U,F,H,J.columns),b(U,F,z,H,J.columns),N(U,F,H,J.columns)});else for(var L=-1,q=W[0],Y=function(){var J=L;if(q){U.applyStyles(U.userStyles);var ne=q.columns;L>=0?_(U,F,z,H,ne,!0):y(U,F,H,ne),J=w(U,F,L+1,H,ne),N(U,F,H,ne)}var re=J-L;W.slice(1).forEach(function(pe){U.applyStyles(U.userStyles),_(U,F,z,H,pe.columns,!0),w(U,F,L+1,H,pe.columns,re),N(U,F,H,pe.columns)}),L=J};L<F.body.length-1;)Y()}function y(U,F,z,H){var W=F.settings;U.applyStyles(U.userStyles),(W.showHead==="firstPage"||W.showHead==="everyPage")&&F.head.forEach(function($){return k(U,F,$,z,H)})}function b(U,F,z,H,W){U.applyStyles(U.userStyles),F.body.forEach(function($,L){var q=L===F.body.length-1;I(U,F,$,q,z,H,W)})}function w(U,F,z,H,W,$){U.applyStyles(U.userStyles),$=$??F.body.length;var L=Math.min(z+$,F.body.length),q=-1;return F.body.slice(z,L).forEach(function(Y,J){var ne=z+J===F.body.length-1,re=R(U,F,ne,H);Y.canEntireRowFit(re,W)&&(k(U,F,Y,H,W),q=z+J)}),q}function N(U,F,z,H){var W=F.settings;U.applyStyles(U.userStyles),(W.showFoot==="lastPage"||W.showFoot==="everyPage")&&F.foot.forEach(function($){return k(U,F,$,z,H)})}function E(U,F,z){var H=z.getLineHeight(U.styles.fontSize),W=U.padding("vertical"),$=Math.floor((F-W)/H);return Math.max(0,$)}function C(U,F,z,H){var W={};U.spansMultiplePages=!0,U.height=0;for(var $=0,L=0,q=z.columns;L<q.length;L++){var Y=q[L],J=U.cells[Y.index];if(J){Array.isArray(J.text)||(J.text=[J.text]);var ne=new h.Cell(J.raw,J.styles,J.section);ne=(0,m.assign)(ne,J),ne.text=[];var re=E(J,F,H);J.text.length>re&&(ne.text=J.text.splice(re,J.text.length));var pe=H.scaleFactor(),ue=H.getLineHeightFactor();J.contentHeight=J.getContentHeight(pe,ue),J.contentHeight>=F&&(J.contentHeight=F,ne.styles.minCellHeight-=F),J.contentHeight>U.height&&(U.height=J.contentHeight),ne.contentHeight=ne.getContentHeight(pe,ue),ne.contentHeight>$&&($=ne.contentHeight),W[Y.index]=ne}}var xe=new h.Row(U.raw,-1,U.section,W,!0);xe.height=$;for(var Ne=0,je=z.columns;Ne<je.length;Ne++){var Y=je[Ne],ne=xe.cells[Y.index];ne&&(ne.height=xe.height);var J=U.cells[Y.index];J&&(J.height=U.height)}return xe}function j(U,F,z,H){var W=U.pageSize().height,$=H.settings.margin,L=$.top+$.bottom,q=W-L;F.section==="body"&&(q-=H.getHeadHeight(H.columns)+H.getFootHeight(H.columns));var Y=F.getMinimumRowHeight(H.columns,U),J=Y<z;if(Y>q)return console.error("Will not be able to print row ".concat(F.index," correctly since it's minimum height is larger than page height")),!0;if(!J)return!1;var ne=F.hasRowSpan(H.columns),re=F.getMaxCellHeight(H.columns)>q;return re?(ne&&console.error("The content of row ".concat(F.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!(ne||H.settings.rowPageBreak==="avoid")}function I(U,F,z,H,W,$,L){var q=R(U,F,H,$);if(z.canEntireRowFit(q,L))k(U,F,z,$,L);else if(j(U,z,q,F)){var Y=C(z,q,F,U);k(U,F,z,$,L),_(U,F,W,$,L),I(U,F,Y,H,W,$,L)}else _(U,F,W,$,L),I(U,F,z,H,W,$,L)}function k(U,F,z,H,W){H.x=F.settings.margin.left;for(var $=0,L=W;$<L.length;$++){var q=L[$],Y=z.cells[q.index];if(!Y){H.x+=q.width;continue}U.applyStyles(Y.styles),Y.x=H.x,Y.y=H.y;var J=F.callCellHooks(U,F.hooks.willDrawCell,Y,z,q,H);if(J===!1){H.x+=q.width;continue}D(U,Y,H);var ne=Y.getTextPos();(0,v.default)(Y.text,ne.x,ne.y,{halign:Y.styles.halign,valign:Y.styles.valign,maxWidth:Math.ceil(Y.width-Y.padding("left")-Y.padding("right"))},U.getDocument()),F.callCellHooks(U,F.hooks.didDrawCell,Y,z,q,H),H.x+=q.width}H.y+=z.height}function D(U,F,z){var H=F.styles;if(U.getDocument().setFillColor(U.getDocument().getFillColor()),typeof H.lineWidth=="number"){var W=(0,u.getFillStyle)(H.lineWidth,H.fillColor);W&&U.rect(F.x,z.y,F.width,F.height,W)}else typeof H.lineWidth=="object"&&(H.fillColor&&U.rect(F.x,z.y,F.width,F.height,"F"),P(U,F,z,H.lineWidth))}function P(U,F,z,H){var W,$,L,q;H.top&&(W=z.x,$=z.y,L=z.x+F.width,q=z.y,H.right&&(L+=.5*H.right),H.left&&(W-=.5*H.left),Y(H.top,W,$,L,q)),H.bottom&&(W=z.x,$=z.y+F.height,L=z.x+F.width,q=z.y+F.height,H.right&&(L+=.5*H.right),H.left&&(W-=.5*H.left),Y(H.bottom,W,$,L,q)),H.left&&(W=z.x,$=z.y,L=z.x,q=z.y+F.height,H.top&&($-=.5*H.top),H.bottom&&(q+=.5*H.bottom),Y(H.left,W,$,L,q)),H.right&&(W=z.x+F.width,$=z.y,L=z.x+F.width,q=z.y+F.height,H.top&&($-=.5*H.top),H.bottom&&(q+=.5*H.bottom),Y(H.right,W,$,L,q));function Y(J,ne,re,pe,ue){U.getDocument().setLineWidth(J),U.getDocument().line(ne,re,pe,ue,"S")}}function R(U,F,z,H){var W=F.settings.margin.bottom,$=F.settings.showFoot;return($==="everyPage"||$==="lastPage"&&z)&&(W+=F.getFootHeight(F.columns)),U.pageSize().height-H.y-W}function _(U,F,z,H,W,$){W===void 0&&(W=[]),$===void 0&&($=!1),U.applyStyles(U.userStyles),F.settings.showFoot==="everyPage"&&!$&&F.foot.forEach(function(q){return k(U,F,q,H,W)}),F.callEndPageHooks(U,H);var L=F.settings.margin;(0,u.addTableBorder)(U,F,z,H),M(U),F.pageNumber++,F.pageCount++,H.x=L.left,H.y=L.top,z.y=L.top,F.callWillDrawPageHooks(U,H),F.settings.showHead==="everyPage"&&(F.head.forEach(function(q){return k(U,F,q,H,W)}),U.applyStyles(U.userStyles))}c.addPage=_;function M(U){var F=U.pageNumber();U.setPage(F+1);var z=U.pageNumber();return z===F?(U.addPage(),!0):!1}},224:function(l,c,d){Object.defineProperty(c,"__esModule",{value:!0}),c.calculateAllColumnsCanFitInPage=void 0;var u=d(420);function h(m,v,p){var g;p===void 0&&(p={});var x=(0,u.getPageAvailableWidth)(m,v),y=new Map,b=[],w=[],N=[];v.settings.horizontalPageBreakRepeat,Array.isArray(v.settings.horizontalPageBreakRepeat)?N=v.settings.horizontalPageBreakRepeat:(typeof v.settings.horizontalPageBreakRepeat=="string"||typeof v.settings.horizontalPageBreakRepeat=="number")&&(N=[v.settings.horizontalPageBreakRepeat]),N.forEach(function(I){var k=v.columns.find(function(D){return D.dataKey===I||D.index===I});k&&!y.has(k.index)&&(y.set(k.index,!0),b.push(k.index),w.push(v.columns[k.index]),x-=k.wrappedWidth)});for(var E=!0,C=(g=p==null?void 0:p.start)!==null&&g!==void 0?g:0;C<v.columns.length;){if(y.has(C)){C++;continue}var j=v.columns[C].wrappedWidth;if(E||x>=j)E=!1,b.push(C),w.push(v.columns[C]),x-=j;else break;C++}return{colIndexes:b,columns:w,lastIndex:C-1}}function f(m,v){for(var p=[],g=0;g<v.columns.length;g++){var x=h(m,v,{start:g});x.columns.length&&(p.push(x),g=x.lastIndex)}return p}c.calculateAllColumnsCanFitInPage=f},324:function(l,c,d){Object.defineProperty(c,"__esModule",{value:!0}),c.ellipsize=c.resizeColumns=c.calculateWidths=void 0;var u=d(420);function h(b,w){f(b,w);var N=[],E=0;w.columns.forEach(function(j){var I=j.getMaxCustomCellWidth(w);I?j.width=I:(j.width=j.wrappedWidth,N.push(j)),E+=j.width});var C=w.getWidth(b.pageSize().width)-E;C&&(C=m(N,C,function(j){return Math.max(j.minReadableWidth,j.minWidth)})),C&&(C=m(N,C,function(j){return j.minWidth})),C=Math.abs(C),!w.settings.horizontalPageBreak&&C>.1/b.scaleFactor()&&(C=C<1?C:Math.round(C),console.warn("Of the table content, ".concat(C," units width could not fit page"))),p(w),g(w,b),v(w)}c.calculateWidths=h;function f(b,w){var N=b.scaleFactor(),E=w.settings.horizontalPageBreak,C=(0,u.getPageAvailableWidth)(b,w);w.allRows().forEach(function(j){for(var I=0,k=w.columns;I<k.length;I++){var D=k[I],P=j.cells[D.index];if(P){var R=w.hooks.didParseCell;w.callCellHooks(b,R,P,j,D,null);var _=P.padding("horizontal");P.contentWidth=(0,u.getStringWidth)(P.text,P.styles,b)+_;var M=(0,u.getStringWidth)(P.text.join(" ").split(/[^\S\u00A0]+/),P.styles,b);if(P.minReadableWidth=M+P.padding("horizontal"),typeof P.styles.cellWidth=="number")P.minWidth=P.styles.cellWidth,P.wrappedWidth=P.styles.cellWidth;else if(P.styles.cellWidth==="wrap"||E===!0)P.contentWidth>C?(P.minWidth=C,P.wrappedWidth=C):(P.minWidth=P.contentWidth,P.wrappedWidth=P.contentWidth);else{var U=10/N;P.minWidth=P.styles.minCellWidth||U,P.wrappedWidth=P.contentWidth,P.minWidth>P.wrappedWidth&&(P.wrappedWidth=P.minWidth)}}}}),w.allRows().forEach(function(j){for(var I=0,k=w.columns;I<k.length;I++){var D=k[I],P=j.cells[D.index];if(P&&P.colSpan===1)D.wrappedWidth=Math.max(D.wrappedWidth,P.wrappedWidth),D.minWidth=Math.max(D.minWidth,P.minWidth),D.minReadableWidth=Math.max(D.minReadableWidth,P.minReadableWidth);else{var R=w.styles.columnStyles[D.dataKey]||w.styles.columnStyles[D.index]||{},_=R.cellWidth||R.minCellWidth;_&&typeof _=="number"&&(D.minWidth=_,D.wrappedWidth=_)}P&&(P.colSpan>1&&!D.minWidth&&(D.minWidth=P.minWidth),P.colSpan>1&&!D.wrappedWidth&&(D.wrappedWidth=P.minWidth))}})}function m(b,w,N){for(var E=w,C=b.reduce(function(U,F){return U+F.wrappedWidth},0),j=0;j<b.length;j++){var I=b[j],k=I.wrappedWidth/C,D=E*k,P=I.width+D,R=N(I),_=P<R?R:P;w-=_-I.width,I.width=_}if(w=Math.round(w*1e10)/1e10,w){var M=b.filter(function(U){return w<0?U.width>N(U):!0});M.length&&(w=m(M,w,N))}return w}c.resizeColumns=m;function v(b){for(var w={},N=1,E=b.allRows(),C=0;C<E.length;C++)for(var j=E[C],I=0,k=b.columns;I<k.length;I++){var D=k[I],P=w[D.index];if(N>1)N--,delete j.cells[D.index];else if(P)P.cell.height+=j.height,N=P.cell.colSpan,delete j.cells[D.index],P.left--,P.left<=1&&delete w[D.index];else{var R=j.cells[D.index];if(!R)continue;if(R.height=j.height,R.rowSpan>1){var _=E.length-C,M=R.rowSpan>_?_:R.rowSpan;w[D.index]={cell:R,left:M,row:j}}}}}function p(b){for(var w=b.allRows(),N=0;N<w.length;N++)for(var E=w[N],C=null,j=0,I=0,k=0;k<b.columns.length;k++){var D=b.columns[k];if(I-=1,I>1&&b.columns[k+1])j+=D.width,delete E.cells[D.index];else if(C){var P=C;delete E.cells[D.index],C=null,P.width=D.width+j}else{var P=E.cells[D.index];if(!P)continue;if(I=P.colSpan,j=0,P.colSpan>1){C=P,j+=D.width;continue}P.width=D.width+j}}}function g(b,w){for(var N={count:0,height:0},E=0,C=b.allRows();E<C.length;E++){for(var j=C[E],I=0,k=b.columns;I<k.length;I++){var D=k[I],P=j.cells[D.index];if(P){w.applyStyles(P.styles,!0);var R=P.width-P.padding("horizontal");if(P.styles.overflow==="linebreak")P.text=w.splitTextToSize(P.text,R+1/w.scaleFactor(),{fontSize:P.styles.fontSize});else if(P.styles.overflow==="ellipsize")P.text=x(P.text,R,P.styles,w,"...");else if(P.styles.overflow==="hidden")P.text=x(P.text,R,P.styles,w,"");else if(typeof P.styles.overflow=="function"){var _=P.styles.overflow(P.text,R);typeof _=="string"?P.text=[_]:P.text=_}P.contentHeight=P.getContentHeight(w.scaleFactor(),w.getLineHeightFactor());var M=P.contentHeight/P.rowSpan;P.rowSpan>1&&N.count*N.height<M*P.rowSpan?N={height:M,count:P.rowSpan}:N&&N.count>0&&N.height>M&&(M=N.height),M>j.height&&(j.height=M)}}N.count--}}function x(b,w,N,E,C){return b.map(function(j){return y(j,w,N,E,C)})}c.ellipsize=x;function y(b,w,N,E,C){var j=1e4*E.scaleFactor();if(w=Math.ceil(w*j)/j,w>=(0,u.getStringWidth)(b,N,E))return b;for(;w<(0,u.getStringWidth)(b+C,N,E)&&!(b.length<=1);)b=b.substring(0,b.length-1);return b.trim()+C}},964:function(l){if(typeof n>"u"){var c=new Error("Cannot find module 'undefined'");throw c.code="MODULE_NOT_FOUND",c}l.exports=n}},i={};function a(l){var c=i[l];if(c!==void 0)return c.exports;var d=i[l]={exports:{}};return r[l].call(d.exports,d,d.exports,a),d.exports}var o={};return function(){var l=o;Object.defineProperty(l,"__esModule",{value:!0}),l.Cell=l.Column=l.Row=l.Table=l.CellHookData=l.__drawTable=l.__createTable=l.applyPlugin=void 0;var c=a(340),d=a(776),u=a(664),h=a(972),f=a(260);Object.defineProperty(l,"Table",{enumerable:!0,get:function(){return f.Table}});var m=a(172);Object.defineProperty(l,"CellHookData",{enumerable:!0,get:function(){return m.CellHookData}});var v=a(260);Object.defineProperty(l,"Cell",{enumerable:!0,get:function(){return v.Cell}}),Object.defineProperty(l,"Column",{enumerable:!0,get:function(){return v.Column}}),Object.defineProperty(l,"Row",{enumerable:!0,get:function(){return v.Row}});function p(w){(0,c.default)(w)}l.applyPlugin=p;function g(w,N){var E=(0,d.parseInput)(w,N),C=(0,h.createTable)(w,E);(0,u.drawTable)(w,C)}function x(w,N){var E=(0,d.parseInput)(w,N);return(0,h.createTable)(w,E)}l.__createTable=x;function y(w,N){(0,u.drawTable)(w,N)}l.__drawTable=y;try{var b=a(964);b.jsPDF&&(b=b.jsPDF),p(b)}catch{}l.default=g}(),o}()})})(iEe);function oEe({delivery:t,vehicle:e,onClose:n,onEdit:r,onSendNotification:i}){var m,v,p,g,x,y,b,w,N;const{toast:a}=Ot(),[o,l]=A.useState("details"),[c,d]=A.useState(!1),u=E=>{switch(E){case cn.SCHEDULED:return"bg-blue-50 text-blue-700 border-blue-200";case cn.IN_TRANSIT:return"bg-yellow-50 text-yellow-700 border-yellow-200";case cn.DELIVERED:return"bg-green-50 text-green-700 border-green-200";case cn.CANCELLED:return"bg-red-50 text-red-700 border-red-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},h=async E=>{if(i){d(!0);try{await i(t.id,E),a({title:"Notification Sent",description:`${E==="sms"?"SMS":"Email"} notification sent successfully`})}catch{a({title:"Error",description:`Failed to send ${E==="sms"?"SMS":"email"} notification`,variant:"destructive"})}finally{d(!1)}}},f=()=>{var E,C;try{const j=new Bt;if(j.setFontSize(20),j.text("Delivery Information Sheet",105,15,{align:"center"}),j.setFontSize(12),j.text(`Delivery #: ${t.id}`,20,30),j.text(`Status: ${t.status.replace("_"," ")}`,20,40),j.text(`Scheduled Date: ${ht(t.scheduledDate)}`,20,50),j.setFontSize(16),j.text("Vehicle Information",20,65),j.setFontSize(12),e?(j.text(`Vehicle: ${e.year} ${e.make} ${e.model}`,20,75),j.text(`VIN: ${e.vin}`,20,85)):j.text(`Vehicle ID: ${t.vehicleId}`,20,75),j.setFontSize(16),j.text("Delivery Address",20,105),j.setFontSize(12),j.text(`${t.address.street}`,20,115),j.text(`${t.address.city}, ${t.address.state} ${t.address.zipCode}`,20,125),j.text(`${t.address.country}`,20,135),j.setFontSize(16),j.text("Contact Information",20,155),j.setFontSize(12),j.text(`Customer ID: ${t.customerId}`,20,165),(E=t.customFields)!=null&&E.contactPhone&&j.text(`Phone: ${t.customFields.contactPhone}`,20,175),(C=t.customFields)!=null&&C.contactEmail&&j.text(`Email: ${t.customFields.contactEmail}`,20,185),t.notes){j.setFontSize(16),j.text("Delivery Notes",20,205),j.setFontSize(12);const I=j.splitTextToSize(t.notes,170);j.text(I,20,215)}j.setFontSize(16),j.text("Signatures",20,245),j.setFontSize(12),j.text("Driver: _______________________________",20,255),j.text("Customer: _____________________________",20,270),j.save(`delivery-${t.id}.pdf`),a({title:"PDF Generated",description:"Delivery information sheet has been downloaded"})}catch(j){console.error("Error generating PDF:",j),a({title:"Error",description:"Failed to generate PDF",variant:"destructive"})}};return s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:s.jsxs(he,{className:"w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[s.jsx(ye,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx(be,{className:"text-xl",children:"Delivery Details"}),s.jsxs(Be,{children:["Delivery #",t.id]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsxs(Q,{onClick:()=>r(t),size:"sm",children:[s.jsx(ar,{className:"h-4 w-4 mr-2"}),"Edit Delivery"]}),s.jsx(Q,{variant:"ghost",size:"sm",onClick:n,children:s.jsx(on,{className:"h-4 w-4"})})]})]})}),s.jsxs(fe,{children:[s.jsxs(Vn,{value:o,onValueChange:l,className:"space-y-4",children:[s.jsxs(Mn,{className:"grid w-full grid-cols-3",children:[s.jsx(tt,{value:"details",children:"Details"}),s.jsx(tt,{value:"timeline",children:"Timeline"}),s.jsx(tt,{value:"photos",children:"Photos"})]}),s.jsxs(rt,{value:"details",className:"space-y-6",children:[s.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[s.jsx(Re,{className:st("ri-badge-status",u(t.status)),children:t.status.replace("_"," ").toUpperCase()}),t.driver&&s.jsxs(Re,{variant:"outline",children:["Driver: ",t.driver]})]}),s.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Customer"}),s.jsx("p",{className:"font-medium",children:t.customerId})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Vehicle"}),s.jsx("p",{className:"font-medium",children:e?`${e.year} ${e.make} ${e.model}`:t.vehicleId})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Scheduled Date"}),s.jsx("p",{className:"font-medium",children:ht(t.scheduledDate)})]}),t.deliveredDate&&s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Delivered Date"}),s.jsx("p",{className:"font-medium",children:ht(t.deliveredDate)})]}),((m=t.customFields)==null?void 0:m.estimatedArrival)&&s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Estimated Arrival"}),s.jsx("p",{className:"font-medium",children:t.customFields.estimatedArrival})]}),((v=t.customFields)==null?void 0:v.departureTime)&&s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Departure Time"}),s.jsx("p",{className:"font-medium",children:new Date(t.customFields.departureTime).toLocaleString()})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Delivery Address"}),s.jsxs("div",{className:"mt-1 p-3 bg-muted/30 rounded-md",children:[s.jsx("p",{children:t.address.street}),s.jsxs("p",{children:[t.address.city,", ",t.address.state," ",t.address.zipCode]}),s.jsx("p",{children:t.address.country})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Contact Information"}),s.jsxs("div",{className:"mt-1 grid gap-2 md:grid-cols-2",children:[((p=t.customFields)==null?void 0:p.contactPhone)&&s.jsxs("div",{className:"flex items-center space-x-2 p-2 bg-muted/30 rounded-md",children:[s.jsx(vA,{className:"h-4 w-4 text-muted-foreground"}),s.jsx("span",{children:t.customFields.contactPhone})]}),((g=t.customFields)==null?void 0:g.contactEmail)&&s.jsxs("div",{className:"flex items-center space-x-2 p-2 bg-muted/30 rounded-md",children:[s.jsx(Ti,{className:"h-4 w-4 text-muted-foreground"}),s.jsx("span",{children:t.customFields.contactEmail})]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Notification Preferences"}),s.jsxs("div",{className:"mt-1 grid gap-2 md:grid-cols-2",children:[s.jsxs("div",{className:"flex items-center space-x-2 p-2 bg-muted/30 rounded-md",children:[s.jsx(ss,{className:"h-4 w-4 text-muted-foreground"}),s.jsxs("span",{children:["SMS Updates: ",((x=t.customFields)==null?void 0:x.sendSMSUpdates)!==!1?"Enabled":"Disabled"]})]}),s.jsxs("div",{className:"flex items-center space-x-2 p-2 bg-muted/30 rounded-md",children:[s.jsx(Ti,{className:"h-4 w-4 text-muted-foreground"}),s.jsxs("span",{children:["Email Updates: ",((y=t.customFields)==null?void 0:y.sendEmailUpdates)!==!1?"Enabled":"Disabled"]})]})]})]}),t.notes&&s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Notes"}),s.jsx("div",{className:"mt-1 p-3 bg-muted/30 rounded-md",children:s.jsx("p",{className:"whitespace-pre-wrap",children:t.notes})})]}),(t.status===cn.SCHEDULED||t.status===cn.IN_TRANSIT)&&s.jsxs("div",{className:"flex flex-wrap gap-2",children:[s.jsxs(Q,{variant:"outline",size:"sm",onClick:()=>h("sms"),disabled:c||!((b=t.customFields)!=null&&b.contactPhone),children:[s.jsx(ss,{className:"h-4 w-4 mr-2"}),"Send SMS Update"]}),s.jsxs(Q,{variant:"outline",size:"sm",onClick:()=>h("email"),disabled:c||!((w=t.customFields)!=null&&w.contactEmail),children:[s.jsx(Ti,{className:"h-4 w-4 mr-2"}),"Send Email Update"]}),s.jsxs(Q,{variant:"outline",size:"sm",onClick:f,children:[s.jsx(s3,{className:"h-4 w-4 mr-2"}),"Print Delivery Sheet"]})]})]}),s.jsx(rt,{value:"timeline",children:s.jsx(iCe,{delivery:t})}),s.jsxs(rt,{value:"photos",className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-semibold",children:"Delivery Photos"}),(N=t.customFields)!=null&&N.deliveryPhotos&&t.customFields.deliveryPhotos.length>0?s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:t.customFields.deliveryPhotos.map((E,C)=>s.jsx("div",{className:"overflow-hidden rounded-md",children:s.jsx("img",{src:E,alt:`Delivery photo ${C+1}`,className:"w-full h-auto object-cover"})},C))}):s.jsxs("div",{className:"text-center py-12 text-muted-foreground border-2 border-dashed rounded-lg",children:[s.jsx(ud,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),s.jsx("p",{children:"No delivery photos available"}),t.status!==cn.DELIVERED&&s.jsx("p",{className:"text-sm",children:"Photos will be added during delivery"})]})]})]}),s.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t mt-6",children:[s.jsx(Q,{variant:"outline",onClick:n,children:"Close"}),s.jsxs(Q,{onClick:()=>r(t),children:[s.jsx(ar,{className:"h-4 w-4 mr-2"}),"Edit Delivery"]})]})]})]})})}function lEe({delivery:t,onSend:e,onCancel:n}){var w,N,E;const{toast:r}=Ot(),[i,a]=A.useState(!1),[o,l]=A.useState("sms"),[c,d]=A.useState(""),[u,h]=A.useState(""),[f,m]=A.useState(""),v=((w=t.customer)==null?void 0:w.name)||"Customer",p=t.vehicle?`${t.vehicle.year||""} ${t.vehicle.make||""} ${t.vehicle.model||""}`.trim():"your Home/RV",g=!!((N=t.customer)!=null&&N.phone),x=!!((E=t.customer)!=null&&E.email),y=()=>{try{const C=u||new Date(t.scheduledDate).toLocaleDateString(),j=c||"the scheduled time";return o==="sms"?`Hi ${v}, your delivery of ${p} is scheduled for ${C} at ${j}. Reply HELP for assistance or STOP to opt out.`:`Dear ${v},

We're writing to confirm the delivery of ${p} scheduled for ${C} at ${j}.

If you have any questions or need to reschedule, please contact our delivery team.

Thank you,
The Delivery Team`}catch(C){return console.error("Failed to generate default message:",C),""}};A.useEffect(()=>{try{const C=y();m(C)}catch(C){console.error("Message generation error:",C)}},[o,c,u]);const b=async C=>{if(C.preventDefault(),!f.trim()){r({title:"Validation Error",description:"Please enter a message",variant:"destructive"});return}if(!u||!c){r({title:"Missing ETA",description:"Please select both a date and time for estimated arrival.",variant:"destructive"});return}if(o==="sms"&&!g){r({title:"Missing Phone Number",description:"Customer does not have a valid phone number for SMS.",variant:"destructive"});return}if(o==="email"&&!x){r({title:"Missing Email Address",description:"Customer does not have a valid email address.",variant:"destructive"});return}a(!0);try{await e(t.id,{type:o,estimatedArrival:`${u}T${c}`,message:f,updateDelivery:!0}),r({title:"Notification Sent",description:`${o.toUpperCase()} sent successfully.`}),n()}catch(j){console.error("Notification send failed:",j),r({title:"Error",description:`Failed to send ${o==="sms"?"SMS":"Email"} notification`,variant:"destructive"})}finally{a(!1)}};return s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:s.jsxs(he,{className:"w-full max-w-md",children:[s.jsx(ye,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx(be,{children:"Send ETA Notification"}),s.jsx(Be,{children:"Notify the customer about delivery status"})]}),s.jsx(Q,{variant:"ghost",size:"sm",onClick:n,children:s.jsx(on,{className:"h-4 w-4"})})]})}),s.jsxs(fe,{children:[s.jsxs("div",{className:"text-sm mb-4 text-muted-foreground",children:["Delivering to: ",s.jsx("strong",{children:v}),s.jsx("br",{}),"Home/RV: ",s.jsx("strong",{children:p}),s.jsx("br",{}),o==="sms"&&!g&&s.jsx("span",{className:"text-red-500 text-xs",children:" No valid phone number on file"}),o==="email"&&!x&&s.jsx("span",{className:"text-red-500 text-xs",children:" No valid email address on file"})]}),s.jsxs("form",{onSubmit:b,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"notificationType",children:"Notification Type"}),s.jsxs(Ke,{value:o,onValueChange:C=>l(C),children:[s.jsx(He,{children:s.jsx(Ye,{})}),s.jsxs(We,{className:"z-50",children:[s.jsx(le,{value:"sms",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx(ss,{className:"h-4 w-4 mr-2"}),s.jsx("span",{children:"SMS"})]})}),s.jsx(le,{value:"email",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx(Ti,{className:"h-4 w-4 mr-2"}),s.jsx("span",{children:"Email"})]})})]})]})]}),s.jsxs("div",{className:"flex gap-4",children:[s.jsxs("div",{className:"w-1/2",children:[s.jsx(ae,{htmlFor:"arrivalDate",children:"Arrival Date"}),s.jsx(Ae,{id:"arrivalDate",type:"date",value:u,onChange:C=>h(C.target.value)})]}),s.jsxs("div",{className:"w-1/2",children:[s.jsx(ae,{htmlFor:"arrivalTime",children:"Arrival Time"}),s.jsx(Ae,{id:"arrivalTime",type:"time",value:c,onChange:C=>d(C.target.value)})]})]}),s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"driver",children:"Assign Driver"}),s.jsxs(Ke,{defaultValue:iu.driverNames[0],children:[s.jsx(He,{children:s.jsx(Ye,{placeholder:"Select driver"})}),s.jsx(We,{children:iu.driverNames.map(C=>s.jsx(le,{value:C,children:C},C))})]})]}),s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"message",children:"Message"}),s.jsx(un,{id:"message",value:f,onChange:C=>m(C.target.value),rows:o==="sms"?3:6,maxLength:o==="sms"?160:void 0}),o==="sms"&&s.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground mt-1",children:[s.jsxs("span",{children:[f.length," characters"]}),s.jsxs("span",{children:[160-f.length," remaining"]})]})]}),s.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[s.jsx(Q,{type:"button",variant:"outline",onClick:n,disabled:i,children:"Cancel"}),s.jsx(Q,{type:"submit",disabled:i,children:i?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Sending..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Do,{className:"h-4 w-4 mr-2"}),"Send Notification"]})})]})]})]})]})})}function cEe({onCapture:t,onCancel:e}){const{toast:n}=Ot(),[r,i]=A.useState(!1),[a,o]=A.useState([]),[l,c]=A.useState([]),[d,u]=A.useState([]),[h,f]=A.useState(!1),m=A.useRef(null);A.useRef(null);const v=async w=>new Promise(N=>{const E=new Image;E.onload=()=>{const C=document.createElement("canvas"),j=C.getContext("2d"),I=800,k=I/E.width;C.width=I,C.height=E.height*k,j==null||j.drawImage(E,0,0,C.width,C.height),N(C.toDataURL("image/jpeg",.7))},E.src=w});F3({accept:{"image/*":[]},multiple:!0,maxFiles:10,onDrop:async w=>{try{const N=w.map(C=>new Promise(j=>{const I=new FileReader;I.onload=async()=>{const k=await v(I.result);j(k)},I.readAsDataURL(C)})),E=await Promise.all(N);o(C=>[...C,...E]),c(C=>[...C,...E.map(()=>"")]),u(C=>[...C,...E.map(()=>[])]),n({title:"Upload Successful",description:`${w.length} photo(s) added.`})}catch(N){console.error("File processing error:",N),n({title:"Upload Error",description:"An error occurred while processing files.",variant:"destructive"})}},onError:w=>{n({title:"Upload Failed",description:w.message,variant:"destructive"})}});const p=()=>{var w;(w=m.current)!=null&&w.srcObject&&(m.current.srcObject.getTracks().forEach(N=>N.stop()),m.current.srcObject=null,f(!1),n({title:"Camera Stopped"}))},g=(w,N)=>{c(E=>{const C=[...E];return C[w]=N,C})},x=(w,N)=>{const E=N.split(",").map(C=>C.trim()).filter(Boolean);u(C=>{const j=[...C];return j[w]=E,j})},y=w=>{o(N=>N.filter((E,C)=>C!==w)),c(N=>N.filter((E,C)=>C!==w)),u(N=>N.filter((E,C)=>C!==w))},b=async()=>{if(!a.length){n({title:"No Photos",description:"Please add or take at least one photo.",variant:"destructive"});return}i(!0);try{await t(a,l,d),n({title:"Photos Saved",description:`${a.length} photo(s) saved.`})}catch(w){console.error("Save error:",w),n({title:"Save Failed",description:"Unable to save photos.",variant:"destructive"})}finally{i(!1),p()}};return A.useEffect(()=>()=>{p()},[]),s.jsx("div",{className:"fixed inset-0 z-50 bg-black/50 flex justify-center items-center p-4",children:s.jsxs(he,{className:"w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[s.jsxs(ye,{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx(be,{children:"Delivery Photo Capture"}),s.jsx(Be,{children:"Take or upload photos and add optional captions & tags"})]}),s.jsx(Q,{size:"sm",variant:"ghost",onClick:e,children:s.jsx(on,{className:"w-4 h-4"})})]}),s.jsxs(fe,{className:"space-y-6",children:[s.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[s.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:"Photo Instructions"}),s.jsx("div",{className:"grid grid-cols-2 gap-2 text-sm text-blue-700",children:iu.photoInstructions.map((w,N)=>s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"w-2 h-2 bg-blue-400 rounded-full"}),s.jsx("span",{children:w})]},N))})]}),a.length>0&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("h3",{className:"font-semibold text-lg",children:["Photos (",a.length,")"]}),s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:a.map((w,N)=>{var E;return s.jsxs("div",{className:"border rounded-lg p-3 space-y-2",children:[s.jsxs("div",{className:"relative",children:[s.jsx("img",{src:w,className:"w-full h-40 object-cover rounded-md",alt:`Photo ${N+1}`}),s.jsx(Q,{size:"sm",variant:"destructive",className:"absolute top-2 right-2",onClick:()=>y(N),children:s.jsx(on,{className:"w-4 h-4"})})]}),s.jsx(ae,{htmlFor:`caption-${N}`,children:"Caption"}),s.jsx(Ae,{id:`caption-${N}`,value:l[N]||"",placeholder:"Optional caption",onChange:C=>g(N,C.target.value)}),s.jsx(ae,{htmlFor:`tags-${N}`,children:"Tags (comma-separated)"}),s.jsx(Ae,{id:`tags-${N}`,value:((E=d[N])==null?void 0:E.join(", "))||"",placeholder:"e.g. front, side, receipt",onChange:C=>x(N,C.target.value)})]},N)})})]}),s.jsxs("div",{className:"flex justify-end space-x-2 border-t pt-4",children:[s.jsx(Q,{onClick:e,variant:"outline",disabled:r,children:"Cancel"}),s.jsxs(Q,{onClick:b,disabled:r||a.length===0,children:[r?s.jsx("div",{className:"animate-spin h-4 w-4 border-b-2 border-white rounded-full mr-2"}):s.jsx(t3,{className:"w-4 h-4 mr-2"}),r?"Saving...":"Save Photos"]})]})]})]})})}function dEe({delivery:t,className:e}){const n=A.useRef(null);return A.useEffect(()=>{if(n.current){const r=n.current;r.innerHTML="";const i=document.createElement("div");i.className="relative w-full h-full bg-muted/30 rounded-lg overflow-hidden",i.innerHTML=`
        <div class="absolute inset-0 flex items-center justify-center">
          <div class="text-center">
            <div class="text-muted-foreground mb-2">Map would display here in a real application</div>
            <div class="flex flex-col items-center">
              <div class="text-sm font-medium">Delivery Address:</div>
              <div class="text-sm">${t.address.street}</div>
              <div class="text-sm">${t.address.city}, ${t.address.state} ${t.address.zipCode}</div>
            </div>
          </div>
        </div>
        
        <!-- Simulated map markers -->
        <div class="absolute bottom-4 right-4 bg-background p-2 rounded-md shadow-sm">
          <div class="flex items-center space-x-2 text-xs">
            <div class="flex items-center">
              <div class="w-3 h-3 rounded-full bg-green-500 mr-1"></div>
              <span>Origin</span>
            </div>
            <div class="flex items-center">
              <div class="w-3 h-3 rounded-full bg-red-500 mr-1"></div>
              <span>Destination</span>
            </div>
            ${t.status==="in_transit"?`
              <div class="flex items-center">
                <div class="w-3 h-3 rounded-full bg-blue-500 mr-1"></div>
                <span>Current Location</span>
              </div>
            `:""}
          </div>
        </div>
        
        <!-- Simulated route -->
        <div class="absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2">
          <svg width="200" height="100" viewBox="0 0 200 100">
            <path d="M20,80 Q100,20 180,80" stroke="#3b82f6" stroke-width="3" fill="none" stroke-dasharray="5,5" />
            ${t.status==="in_transit"?`
              <circle cx="100" cy="50" r="5" fill="#3b82f6" />
            `:""}
            <circle cx="20" cy="80" r="5" fill="#22c55e" />
            <circle cx="180" cy="80" r="5" fill="#ef4444" />
          </svg>
        </div>
      `,r.appendChild(i)}},[t]),s.jsxs(he,{className:e,children:[s.jsxs(ye,{children:[s.jsxs(be,{className:"flex items-center",children:[s.jsx(Ad,{className:"h-5 w-5 mr-2 text-primary"}),"Delivery Map"]}),s.jsx(Be,{children:"Track delivery location and route"})]}),s.jsx(fe,{children:s.jsx("div",{ref:n,className:"h-64 w-full",children:s.jsx("div",{className:"flex items-center justify-center h-full bg-muted/30 rounded-lg",children:s.jsxs("div",{className:"text-center",children:[s.jsx(Fa,{className:"h-12 w-12 mx-auto mb-2 text-muted-foreground"}),s.jsx("p",{className:"text-muted-foreground",children:"Loading map..."})]})})})})]})}function uEe({deliveries:t,onScheduleDelivery:e}){const n=t.length,r=t.filter(f=>f.status===cn.SCHEDULED).length,i=t.filter(f=>f.status===cn.IN_TRANSIT).length,a=t.filter(f=>f.status===cn.DELIVERED).length,o=new Date,l=new Date(o.getTime()+7*24*60*60*1e3),c=t.filter(f=>f.status===cn.SCHEDULED&&f.scheduledDate>=o&&f.scheduledDate<=l).sort((f,m)=>f.scheduledDate.getTime()-m.scheduledDate.getTime()),d=t.filter(f=>f.status===cn.IN_TRANSIT).sort((f,m)=>f.scheduledDate.getTime()-m.scheduledDate.getTime()),u=new Date(o.getTime()-30*24*60*60*1e3),h=t.filter(f=>f.status===cn.DELIVERED&&f.deliveredDate&&f.deliveredDate>=u).sort((f,m)=>{var v,p;return(((v=m.deliveredDate)==null?void 0:v.getTime())||0)-(((p=f.deliveredDate)==null?void 0:p.getTime())||0)}).slice(0,5);return s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"grid gap-4 md:grid-cols-4",children:[{title:"Total Deliveries",count:n,icon:s.jsx(Fa,{className:"h-4 w-4 text-blue-800"}),description:"All time",bg:"bg-blue-100"},{title:"Scheduled",count:r,icon:s.jsx(Sn,{className:"h-4 w-4 text-yellow-700"}),description:"Upcoming deliveries",bg:"bg-yellow-100"},{title:"In Transit",count:i,icon:s.jsx(Fa,{className:"h-4 w-4 text-orange-700"}),description:"Currently in transit",bg:"bg-orange-100"},{title:"Completed",count:a,icon:s.jsx(Rn,{className:"h-4 w-4 text-green-700"}),description:"Successful deliveries",bg:"bg-green-100"}].map((f,m)=>s.jsxs(he,{className:`${f.bg} border-0 shadow-sm`,children:[s.jsxs(ye,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(be,{className:"text-sm font-medium",children:f.title}),f.icon]}),s.jsxs(fe,{children:[s.jsx("div",{className:"text-2xl font-bold text-gray-900",children:f.count}),s.jsxs("p",{className:"text-xs text-gray-600 flex items-center mt-1",children:[s.jsx(tn,{className:"h-3 w-3 mr-1"}),f.description]})]})]},m))}),s.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[s.jsxs(he,{children:[s.jsxs(ye,{children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(be,{children:"Upcoming Deliveries"}),s.jsxs(Q,{size:"sm",onClick:e,children:[s.jsx(yt,{className:"h-4 w-4 mr-2"}),"Schedule"]})]}),s.jsx(Be,{children:"Deliveries scheduled for the next 7 days"})]}),s.jsx(fe,{children:c.length>0?s.jsx("div",{className:"space-y-4",children:c.map(f=>s.jsxs("div",{className:"flex items-start space-x-3 p-3 border rounded-lg",children:[s.jsx(Sn,{className:"h-5 w-5 text-blue-500 mt-1"}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("p",{className:"font-medium",children:["Delivery #",f.id]}),s.jsx("p",{className:"text-sm text-muted-foreground",children:ht(f.scheduledDate)})]}),s.jsxs("p",{className:"text-sm text-muted-foreground truncate",children:["Customer: ",f.customerId]}),s.jsxs("p",{className:"text-sm text-muted-foreground truncate",children:[f.address.city,", ",f.address.state]})]})]},f.id))}):s.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[s.jsx(Sn,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),s.jsx("p",{children:"No upcoming deliveries"}),s.jsx("p",{className:"text-sm",children:"Schedule a new delivery to get started"})]})})]}),s.jsxs(he,{children:[s.jsxs(ye,{children:[s.jsx(be,{children:"In-Transit Deliveries"}),s.jsx(Be,{children:"Deliveries currently on the road"})]}),s.jsx(fe,{children:d.length>0?s.jsx("div",{className:"space-y-4",children:d.map(f=>{var m;return s.jsxs("div",{className:"flex items-start space-x-3 p-3 border rounded-lg",children:[s.jsx(Fa,{className:"h-5 w-5 text-yellow-500 mt-1"}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("p",{className:"font-medium",children:["Delivery #",f.id]}),s.jsxs("p",{className:"text-sm text-muted-foreground",children:["ETA: ",((m=f.customFields)==null?void 0:m.estimatedArrival)||"Unknown"]})]}),s.jsxs("p",{className:"text-sm text-muted-foreground truncate",children:["Driver: ",f.driver||"Unassigned"]}),s.jsxs("p",{className:"text-sm text-muted-foreground truncate",children:[f.address.city,", ",f.address.state]})]})]},f.id)})}):s.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[s.jsx(Fa,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),s.jsx("p",{children:"No deliveries in transit"})]})})]})]}),s.jsxs("div",{className:"grid gap-6 md:grid-cols-3",children:[s.jsx("div",{className:"md:col-span-2",children:d.length>0?s.jsx(dEe,{delivery:d[0]}):s.jsxs(he,{children:[s.jsxs(ye,{children:[s.jsxs(be,{className:"flex items-center",children:[s.jsx(Ad,{className:"h-5 w-5 mr-2 text-primary"}),"Delivery Map"]}),s.jsx(Be,{children:"No active deliveries to display"})]}),s.jsx(fe,{children:s.jsx("div",{className:"h-64 w-full flex items-center justify-center bg-muted/30 rounded-lg",children:s.jsxs("div",{className:"text-center",children:[s.jsx(Ad,{className:"h-12 w-12 mx-auto mb-2 text-muted-foreground"}),s.jsx("p",{className:"text-muted-foreground",children:"No active deliveries to track"})]})})})]})}),s.jsxs(he,{children:[s.jsxs(ye,{children:[s.jsx(be,{children:"Recent Deliveries"}),s.jsx(Be,{children:"Recently completed deliveries"})]}),s.jsx(fe,{children:h.length>0?s.jsx("div",{className:"space-y-4",children:h.map(f=>s.jsxs("div",{className:"flex items-start space-x-3 p-3 border rounded-lg",children:[s.jsx(Rn,{className:"h-5 w-5 text-green-500 mt-1"}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("p",{className:"font-medium",children:["Delivery #",f.id]}),s.jsx("p",{className:"text-sm text-muted-foreground",children:f.deliveredDate?ht(f.deliveredDate):"Unknown"})]}),s.jsxs("p",{className:"text-sm text-muted-foreground truncate",children:["Customer: ",f.customerId]})]})]},f.id))}):s.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[s.jsx(Rn,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),s.jsx("p",{children:"No recent deliveries"})]})})]})]})]})}function qV(){const{deliveries:t,createDelivery:e,updateDelivery:n,deleteDelivery:r,updateDeliveryStatus:i,sendNotification:a,updateETA:o,addDeliveryPhotos:l}=Rre(),{vehicles:c}=Im(),{leads:d}=uh(),{toast:u}=Ot(),[h,f]=A.useState(""),[m,v]=A.useState("all"),[p,g]=A.useState(!1),[x,y]=A.useState(!1),[b,w]=A.useState(!1),[N,E]=A.useState(!1),[C,j]=A.useState(null),I=z=>{switch(z){case cn.SCHEDULED:return"bg-blue-50 text-blue-700 border-blue-200";case cn.IN_TRANSIT:return"bg-yellow-50 text-yellow-700 border-yellow-200";case cn.DELIVERED:return"bg-green-50 text-green-700 border-green-200";case cn.CANCELLED:return"bg-red-50 text-red-700 border-red-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},k=t.filter(z=>z.id.toLowerCase().includes(h.toLowerCase())||z.customerId.toLowerCase().includes(h.toLowerCase())||z.address.city.toLowerCase().includes(h.toLowerCase())).filter(z=>m==="all"||z.status===m),D=()=>{j(null),g(!0)},P=z=>{j(z),g(!0),y(!1)},R=z=>{j(z),y(!0)},_=async z=>{try{C?(await n(C.id,z),u({title:"Success",description:"Delivery updated successfully"})):(await e(z),u({title:"Success",description:"Delivery scheduled successfully"})),g(!1),j(null)}catch{u({title:"Error",description:`Failed to ${C?"update":"schedule"} delivery`,variant:"destructive"})}},M=async(z,H)=>{try{return H.estimatedArrival&&await o(z,H.estimatedArrival),await a(z,H.type,H.message),!0}catch(W){throw console.error("Error sending notification:",W),W}},U=async(z,H)=>{if(C)try{await l(C.id,z,H),C.status===cn.IN_TRANSIT&&await i(C.id,cn.DELIVERED),E(!1),u({title:"Photos Added",description:`${z.length} photos added to delivery`})}catch{u({title:"Error",description:"Failed to add photos",variant:"destructive"})}},F=z=>c.find(H=>H.id===z);return s.jsxs("div",{className:"space-y-8",children:[p&&s.jsx(Gre,{delivery:C||void 0,vehicles:c,customers:d,onSave:_,onCancel:()=>{g(!1),j(null)}}),x&&C&&s.jsx(oEe,{delivery:C,vehicle:F(C.vehicleId),onClose:()=>y(!1),onEdit:P,onSendNotification:async(z,H)=>{y(!1),w(!0)}}),b&&C&&s.jsx(lEe,{delivery:C,onSend:M,onCancel:()=>{w(!1),y(!0)}}),N&&C&&s.jsx(cEe,{onCapture:U,onCancel:()=>{E(!1),y(!0)}}),s.jsx("div",{className:"ri-page-header",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"ri-page-title",children:"Delivery Tracker"}),s.jsx("p",{className:"ri-page-description",children:"Track vehicle deliveries and logistics"})]}),s.jsxs(Q,{className:"shadow-sm",onClick:D,children:[s.jsx(yt,{className:"h-4 w-4 mr-2"}),"Schedule Delivery"]})]})}),s.jsxs("div",{className:"ri-stats-grid",children:[s.jsxs(he,{className:"shadow-sm border-0 bg-gradient-to-br from-blue-50 to-blue-100/50",children:[s.jsxs(ye,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(be,{className:"text-sm font-medium text-blue-900",children:"Total Deliveries"}),s.jsx(Fa,{className:"h-4 w-4 text-blue-600"})]}),s.jsxs(fe,{children:[s.jsx("div",{className:"text-2xl font-bold text-blue-900",children:t.length}),s.jsxs("p",{className:"text-xs text-blue-600 flex items-center mt-1",children:[s.jsx(tn,{className:"h-3 w-3 mr-1"}),"All deliveries"]})]})]}),s.jsxs(he,{className:"shadow-sm border-0 bg-gradient-to-br from-blue-50 to-blue-100/50",children:[s.jsxs(ye,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(be,{className:"text-sm font-medium text-blue-900",children:"Scheduled"}),s.jsx(Fa,{className:"h-4 w-4 text-blue-600"})]}),s.jsxs(fe,{children:[s.jsx("div",{className:"text-2xl font-bold text-blue-900",children:t.filter(z=>z.status===cn.SCHEDULED).length}),s.jsxs("p",{className:"text-xs text-blue-600 flex items-center mt-1",children:[s.jsx(Sn,{className:"h-3 w-3 mr-1"}),"Upcoming deliveries"]})]})]}),s.jsxs(he,{className:"shadow-sm border-0 bg-gradient-to-br from-yellow-50 to-yellow-100/50",children:[s.jsxs(ye,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(be,{className:"text-sm font-medium text-yellow-900",children:"In Transit"}),s.jsx(Fa,{className:"h-4 w-4 text-yellow-600"})]}),s.jsxs(fe,{children:[s.jsx("div",{className:"text-2xl font-bold text-yellow-900",children:t.filter(z=>z.status===cn.IN_TRANSIT).length}),s.jsxs("p",{className:"text-xs text-yellow-600 flex items-center mt-1",children:[s.jsx(Fa,{className:"h-3 w-3 mr-1"}),"On the road"]})]})]}),s.jsxs(he,{className:"shadow-sm border-0 bg-gradient-to-br from-green-50 to-green-100/50",children:[s.jsxs(ye,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(be,{className:"text-sm font-medium text-green-900",children:"Delivered"}),s.jsx(Fa,{className:"h-4 w-4 text-green-600"})]}),s.jsxs(fe,{children:[s.jsx("div",{className:"text-2xl font-bold text-green-900",children:t.filter(z=>z.status===cn.DELIVERED).length}),s.jsxs("p",{className:"text-xs text-green-600 flex items-center mt-1",children:[s.jsx(tn,{className:"h-3 w-3 mr-1"}),"Completed"]})]})]}),s.jsxs(he,{className:"shadow-sm border-0 bg-gradient-to-br from-orange-50 to-orange-100/50",children:[s.jsxs(ye,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(be,{className:"text-sm font-medium text-orange-900",children:"Notifications"}),s.jsx(ss,{className:"h-4 w-4 text-orange-600"})]}),s.jsxs(fe,{children:[s.jsx("div",{className:"text-2xl font-bold text-orange-900",children:t.filter(z=>{var H;return(H=z.customFields)==null?void 0:H.customerNotified}).length}),s.jsxs("p",{className:"text-xs text-orange-600 flex items-center mt-1",children:[s.jsx(ss,{className:"h-3 w-3 mr-1"}),"Sent to customers"]})]})]})]}),s.jsxs("div",{className:"flex gap-4",children:[s.jsxs("div",{className:"ri-search-bar",children:[s.jsx(Rr,{className:"ri-search-icon"}),s.jsx(Ae,{placeholder:"Search deliveries...",value:h,onChange:z=>f(z.target.value),className:"ri-search-input shadow-sm"})]}),s.jsxs("select",{value:m,onChange:z=>v(z.target.value),className:"px-3 py-2 rounded-md border border-input bg-background",children:[s.jsx("option",{value:"all",children:"All Status"}),s.jsx("option",{value:cn.SCHEDULED,children:"Scheduled"}),s.jsx("option",{value:cn.IN_TRANSIT,children:"In Transit"}),s.jsx("option",{value:cn.DELIVERED,children:"Delivered"}),s.jsx("option",{value:cn.CANCELLED,children:"Cancelled"})]})]}),s.jsxs(he,{className:"shadow-sm",children:[s.jsxs(ye,{children:[s.jsx(be,{className:"text-xl",children:"Deliveries"}),s.jsx(Be,{children:"Track and manage vehicle deliveries"})]}),s.jsx(fe,{children:s.jsxs("div",{className:"space-y-4",children:[k.map(z=>s.jsxs("div",{className:"ri-table-row",children:[s.jsx("div",{className:"flex items-center space-x-4 flex-1",children:s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[s.jsxs("h3",{className:"font-semibold text-foreground",children:["Delivery #",z.id]}),s.jsx(Re,{className:st("ri-badge-status",I(z.status)),children:z.status.replace("_"," ").toUpperCase()})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm text-muted-foreground",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx(Gr,{className:"h-3 w-3 mr-2 text-blue-500"}),s.jsx("span",{className:"font-medium",children:"Customer:"}),s.jsx("span",{className:"ml-1",children:z.customerId})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx(Gr,{className:"h-3 w-3 mr-2 text-green-500"}),s.jsx("span",{className:"font-medium",children:"Driver:"}),s.jsx("span",{className:"ml-1",children:z.driver||"Not assigned"})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx(Sn,{className:"h-3 w-3 mr-2 text-purple-500"}),s.jsx("span",{className:"font-medium",children:"Scheduled:"}),s.jsx("span",{className:"ml-1",children:ht(z.scheduledDate)})]}),z.deliveredDate&&s.jsxs("div",{className:"flex items-center",children:[s.jsx(Sn,{className:"h-3 w-3 mr-2 text-green-500"}),s.jsx("span",{className:"font-medium",children:"Delivered:"}),s.jsx("span",{className:"ml-1",children:ht(z.deliveredDate)})]})]}),s.jsxs("div",{className:"mt-2",children:[s.jsxs("div",{className:"flex items-start bg-muted/30 p-2 rounded-md",children:[s.jsx(Ad,{className:"h-3 w-3 mr-2 mt-0.5 text-red-500"}),s.jsxs("span",{className:"text-sm text-muted-foreground",children:[z.address.street,", ",z.address.city,", ",z.address.state," ",z.address.zipCode]})]}),z.notes&&s.jsxs("p",{className:"text-sm text-muted-foreground mt-2 bg-blue-50 p-2 rounded-md",children:[s.jsx("span",{className:"font-medium",children:"Notes:"})," ",z.notes]})]})]})}),s.jsxs("div",{className:"ri-action-buttons",children:[s.jsxs(Q,{variant:"outline",size:"sm",className:"shadow-sm",onClick:()=>R(z),children:[s.jsx(Wr,{className:"h-3 w-3 mr-1"}),"View"]}),s.jsx(Q,{variant:"outline",size:"sm",className:"shadow-sm",onClick:()=>P(z),children:"Edit"}),z.status===cn.IN_TRANSIT&&s.jsxs(Q,{variant:"outline",size:"sm",className:"shadow-sm",onClick:()=>{j(z),E(!0)},children:[s.jsx(ud,{className:"h-3 w-3 mr-1"}),"Photos"]}),(z.status===cn.SCHEDULED||z.status===cn.IN_TRANSIT)&&s.jsxs(Q,{variant:"outline",size:"sm",className:"shadow-sm",onClick:()=>{j(z),w(!0)},children:[s.jsx(ss,{className:"h-3 w-3 mr-1"}),"Notify"]})]})]},z.id)),k.length===0&&s.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[s.jsx(Fa,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),s.jsx("p",{children:"No deliveries found"}),s.jsx("p",{className:"text-sm",children:"Try adjusting your search or filters"})]})]})})]})]})}function hEe(){const{deliveries:t}=Rre(),[e,n]=A.useState(!1);return s.jsxs(s.Fragment,{children:[e&&s.jsx(Gre,{vehicles:[],customers:[],onSave:async()=>{},onCancel:()=>n(!1)}),s.jsx(uEe,{deliveries:t,onScheduleDelivery:()=>n(!0)})]})}function fEe(){return s.jsxs(ki,{children:[s.jsx(It,{path:"/",element:s.jsx(hEe,{})}),s.jsx(It,{path:"/list",element:s.jsx(qV,{})}),s.jsx(It,{path:"/*",element:s.jsx(qV,{})})]})}var uc=(t=>(t.IN_PROGRESS="in_progress",t.COMPLETED="completed",t.APPROVED="approved",t.REJECTED="rejected",t))(uc||{}),Br=(t=>(t.PENDING="pending",t.PASSED="passed",t.FAILED="failed",t.NA="na",t))(Br||{}),no=(t=>(t.LOW="low",t.MEDIUM="medium",t.HIGH="high",t.CRITICAL="critical",t))(no||{}),kE=(t=>(t.OPEN="open",t.IN_PROGRESS="in_progress",t.RESOLVED="resolved",t.VERIFIED="verified",t))(kE||{}),FM=(t=>(t.INSPECTOR="inspector",t.MANAGER="manager",t.QUALITY_CONTROL="quality_control",t))(FM||{});function mEe(){const[t,e]=A.useState([]),[n,r]=A.useState([]),[i,a]=A.useState(!1);A.useEffect(()=>{o()},[]);const o=()=>{const D=yr("renter-insight-pdi-templates",[{id:"1",name:"RV Pre-Delivery Inspection",description:"Standard PDI checklist for recreational vehicles",vehicleType:pn.RV,isActive:!0,sections:[{id:"1-1",templateId:"1",name:"Exterior",description:"Exterior inspection items",orderIndex:1,items:[{id:"1-1-1",sectionId:"1-1",name:"Exterior Body Condition",description:"Check for scratches, dents, or damage",itemType:"checkbox",isRequired:!0,orderIndex:1,createdAt:new Date("2024-01-01")},{id:"1-1-2",sectionId:"1-1",name:"Roof Inspection",description:"Check roof seals, vents, and AC units",itemType:"checkbox",isRequired:!0,orderIndex:2,createdAt:new Date("2024-01-01")},{id:"1-1-3",sectionId:"1-1",name:"Exterior Photos",description:"Take photos of all sides of the vehicle",itemType:"photo",isRequired:!0,orderIndex:3,createdAt:new Date("2024-01-01")}],createdAt:new Date("2024-01-01")},{id:"1-2",templateId:"1",name:"Interior",description:"Interior inspection items",orderIndex:2,items:[{id:"1-2-1",sectionId:"1-2",name:"Interior Cleanliness",description:"Verify interior is clean and free of debris",itemType:"checkbox",isRequired:!0,orderIndex:1,createdAt:new Date("2024-01-01")},{id:"1-2-2",sectionId:"1-2",name:"Furniture Condition",description:"Check all furniture for damage or defects",itemType:"checkbox",isRequired:!0,orderIndex:2,createdAt:new Date("2024-01-01")}],createdAt:new Date("2024-01-01")}],createdAt:new Date("2024-01-01"),updatedAt:new Date("2024-01-01")},{id:"2",name:"Motorhome Pre-Delivery Inspection",description:"Comprehensive PDI checklist for motorhomes",vehicleType:pn.MOTORHOME,isActive:!0,sections:[],createdAt:new Date("2024-01-01"),updatedAt:new Date("2024-01-01")}]),P=yr("renter-insight-pdi-inspections",[{id:"1",templateId:"1",vehicleId:"1",inspectorId:"user-001",status:uc.IN_PROGRESS,startedAt:new Date("2024-01-15"),notes:"Initial inspection for new RV",items:[{id:"1-1",inspectionId:"1",templateItemId:"1-1-1",status:Br.PASSED,notes:"No exterior damage found",createdAt:new Date("2024-01-15"),updatedAt:new Date("2024-01-15")},{id:"1-2",inspectionId:"1",templateItemId:"1-1-2",status:Br.FAILED,notes:"Roof seal damaged near AC unit",createdAt:new Date("2024-01-15"),updatedAt:new Date("2024-01-15")}],defects:[{id:"1-1",inspectionId:"1",inspectionItemId:"1-2",title:"Roof Seal Damage",description:"Damaged roof seal near AC unit on passenger side",severity:no.MEDIUM,status:kE.OPEN,assignedTo:"user-002",createdAt:new Date("2024-01-15"),updatedAt:new Date("2024-01-15")}],photos:[{id:"1-1",inspectionId:"1",inspectionItemId:"1-2",defectId:"1-1",url:"https://images.pexels.com/photos/1319515/pexels-photo-1319515.jpeg",caption:"Damaged roof seal",createdAt:new Date("2024-01-15")}],signoffs:[],createdAt:new Date("2024-01-15"),updatedAt:new Date("2024-01-15")}]);e(D),r(P)},l=D=>{Dn("renter-insight-pdi-templates",D)},c=D=>{Dn("renter-insight-pdi-inspections",D)};return{templates:t,inspections:n,loading:i,getTemplatesByVehicleType:D=>t.filter(P=>P.vehicleType===D&&P.isActive),getTemplateById:D=>t.find(P=>P.id===D),createTemplate:async D=>{a(!0);try{const P={id:Math.random().toString(36).substr(2,9),name:D.name||"",description:D.description||"",vehicleType:D.vehicleType||pn.RV,isActive:D.isActive??!0,sections:D.sections||[],createdAt:new Date,updatedAt:new Date},R=[...t,P];return e(R),l(R),P}finally{a(!1)}},updateTemplate:async(D,P)=>{const R=t.map(_=>_.id===D?{..._,...P,updatedAt:new Date}:_);e(R),l(R)},deleteTemplate:async D=>{const P=t.filter(R=>R.id!==D);e(P),l(P)},createTemplateSection:async(D,P)=>{const R=t.find(F=>F.id===D);if(!R)return null;const _={id:Math.random().toString(36).substr(2,9),templateId:D,name:P.name||"",description:P.description||"",orderIndex:P.orderIndex||R.sections.length+1,items:P.items||[],createdAt:new Date},M={...R,sections:[...R.sections,_],updatedAt:new Date},U=t.map(F=>F.id===D?M:F);return e(U),l(U),_},createTemplateItem:async(D,P)=>{const R=t.findIndex(L=>L.sections.some(q=>q.id===D));if(R===-1)return null;const _=t[R],M=_.sections.findIndex(L=>L.id===D);if(M===-1)return null;const U=_.sections[M],F={id:Math.random().toString(36).substr(2,9),sectionId:D,name:P.name||"",description:P.description||"",itemType:P.itemType||"checkbox",isRequired:P.isRequired??!0,orderIndex:P.orderIndex||U.items.length+1,createdAt:new Date},z={...U,items:[...U.items,F]},H=[..._.sections];H[M]=z;const W={..._,sections:H,updatedAt:new Date},$=[...t];return $[R]=W,e($),l($),F},getInspectionsByVehicleId:D=>n.filter(P=>P.vehicleId===D),getInspectionById:D=>n.find(P=>P.id===D),createInspection:async D=>{a(!0);try{const P=t.find(U=>U.id===D.templateId);if(!P)throw new Error("Template not found");const R=[];P.sections.forEach(U=>{U.items.forEach(F=>{R.push({id:Math.random().toString(36).substr(2,9),inspectionId:"",templateItemId:F.id,templateItem:F,status:Br.PENDING,createdAt:new Date,updatedAt:new Date})})});const _={id:Math.random().toString(36).substr(2,9),templateId:D.templateId||"",template:P||void 0,vehicleId:D.vehicleId||"",inspectorId:D.inspectorId||"",status:uc.IN_PROGRESS,startedAt:new Date,notes:D.notes||"",items:[],defects:[],photos:[],signoffs:[],createdAt:new Date,updatedAt:new Date};R.forEach(U=>{U.inspectionId=_.id}),_.items=R;const M=[...n,_];return r(M),c(M),_}finally{a(!1)}},updateInspection:async(D,P)=>{const R=n.map(_=>_.id===D?{..._,...P,updatedAt:new Date}:_);r(R),c(R)},updateInspectionItem:async(D,P,R)=>{const _=n.findIndex(W=>W.id===D);if(_===-1)return;const M=n[_],U=M.items.findIndex(W=>W.id===P);if(U===-1)return;const F=[...M.items];F[U]={...F[U],...R,updatedAt:new Date};const z={...M,items:F,updatedAt:new Date},H=[...n];H[_]=z,r(H),c(H)},completeInspection:async(D,P)=>{const R=n.findIndex(z=>z.id===D);if(R===-1)return;const _=n[R];if(!_.items.every(z=>{const H=t.flatMap(W=>W.sections).flatMap(W=>W.items).find(W=>W.id===z.templateItemId);return!(H!=null&&H.isRequired)||z.status!==Br.PENDING}))throw new Error("All required items must be completed");const U={..._,status:uc.COMPLETED,completedAt:new Date,notes:P||_.notes,updatedAt:new Date},F=[...n];F[R]=U,r(F),c(F)},createDefect:async(D,P)=>{const R=n.findIndex(z=>z.id===D);if(R===-1)return null;const _=n[R],M={id:Math.random().toString(36).substr(2,9),inspectionId:D,inspectionItemId:P.inspectionItemId,title:P.title||"",description:P.description||"",severity:P.severity||no.MEDIUM,status:kE.OPEN,assignedTo:P.assignedTo,photos:[],createdAt:new Date,updatedAt:new Date},U={..._,defects:[..._.defects,M],updatedAt:new Date},F=[...n];return F[R]=U,r(F),c(F),M},updateDefect:async(D,P,R)=>{const _=n.findIndex(W=>W.id===D);if(_===-1)return;const M=n[_],U=M.defects.findIndex(W=>W.id===P);if(U===-1)return;const F=[...M.defects];F[U]={...F[U],...R,updatedAt:new Date};const z={...M,defects:F,updatedAt:new Date},H=[...n];H[_]=z,r(H),c(H)},resolveDefect:async(D,P,R)=>{const _=n.findIndex(W=>W.id===D);if(_===-1)return;const M=n[_],U=M.defects.findIndex(W=>W.id===P);if(U===-1)return;const F=[...M.defects];F[U]={...F[U],status:kE.RESOLVED,resolvedAt:new Date,resolutionNotes:R,updatedAt:new Date};const z={...M,defects:F,updatedAt:new Date},H=[...n];H[_]=z,r(H),c(H)},addPhoto:async(D,P)=>{const R=n.findIndex(z=>z.id===D);if(R===-1)return null;const _=n[R],M={id:Math.random().toString(36).substr(2,9),inspectionId:D,inspectionItemId:P.inspectionItemId,defectId:P.defectId,url:P.url||"",caption:P.caption,createdAt:new Date},U={..._,photos:[..._.photos,M],updatedAt:new Date},F=[...n];return F[R]=U,r(F),c(F),M},addSignoff:async(D,P)=>{const R=n.findIndex(H=>H.id===D);if(R===-1)return null;const _=n[R],M={id:Math.random().toString(36).substr(2,9),inspectionId:D,userId:P.userId||"",role:P.role||FM.INSPECTOR,signatureUrl:P.signatureUrl,notes:P.notes,signedAt:new Date,createdAt:new Date};let U=_.status;P.role===FM.MANAGER&&(U=uc.APPROVED);const F={..._,signoffs:[..._.signoffs,M],status:U,updatedAt:new Date},z=[...n];return z[R]=F,r(z),c(z),M}}}function pEe({templates:t,onCreateTemplate:e,onEditTemplate:n,onDeleteTemplate:r,onDuplicateTemplate:i,onViewTemplate:a}){const[o,l]=A.useState(""),[c,d]=A.useState("all"),u=t.filter(f=>{var p;const m=f.name.toLowerCase().includes(o.toLowerCase())||((p=f.description)==null?void 0:p.toLowerCase().includes(o.toLowerCase())),v=c==="all"||f.vehicleType===c;return m&&v}),h=f=>f.replace("_"," ").toUpperCase();return s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[s.jsxs("div",{className:"ri-search-bar flex-1",children:[s.jsx(Rr,{className:"ri-search-icon"}),s.jsx(Ae,{placeholder:"Search templates...",value:o,onChange:f=>l(f.target.value),className:"ri-search-input shadow-sm"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("select",{value:c,onChange:f=>d(f.target.value),className:"px-3 py-2 rounded-md border border-input bg-background",children:[s.jsx("option",{value:"all",children:"All Types"}),s.jsx("option",{value:"rv",children:"RV"}),s.jsx("option",{value:"motorhome",children:"Motorhome"}),s.jsx("option",{value:"travel_trailer",children:"Travel Trailer"}),s.jsx("option",{value:"fifth_wheel",children:"Fifth Wheel"}),s.jsx("option",{value:"toy_hauler",children:"Toy Hauler"})]}),s.jsxs(Q,{variant:"outline",className:"shadow-sm",children:[s.jsx(bc,{className:"h-4 w-4 mr-2"}),"Filter"]}),s.jsxs(Q,{onClick:e,className:"shadow-sm",children:[s.jsx(yt,{className:"h-4 w-4 mr-2"}),"New Template"]})]})]}),s.jsxs(he,{className:"shadow-sm",children:[s.jsxs(ye,{children:[s.jsxs(be,{className:"text-xl",children:["PDI Templates (",u.length,")"]}),s.jsx(Be,{children:"Manage pre-delivery inspection templates for different vehicle types"})]}),s.jsx(fe,{children:s.jsxs("div",{className:"space-y-4",children:[u.map(f=>s.jsxs("div",{className:"ri-table-row",children:[s.jsx("div",{className:"flex items-center space-x-4 flex-1",children:s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[s.jsx("h3",{className:"font-semibold text-foreground",children:f.name}),s.jsx(Re,{variant:"outline",children:h(f.vehicleType)}),f.isActive?s.jsx(Re,{className:"bg-green-50 text-green-700 border-green-200",children:"ACTIVE"}):s.jsx(Re,{className:"bg-gray-50 text-gray-700 border-gray-200",children:"INACTIVE"})]}),s.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:f.description}),s.jsxs("div",{className:"flex items-center space-x-4 text-sm",children:[s.jsxs("span",{className:"flex items-center",children:[s.jsx(GR,{className:"h-3 w-3 mr-1 text-blue-500"}),f.sections.length," sections"]}),s.jsxs("span",{className:"flex items-center",children:[s.jsx(e3,{className:"h-3 w-3 mr-1 text-green-500"}),f.sections.reduce((m,v)=>m+v.items.length,0)," items"]})]})]})}),s.jsxs("div",{className:"ri-action-buttons",children:[s.jsx(Q,{variant:"outline",size:"sm",className:"shadow-sm",onClick:()=>a(f),children:"View"}),s.jsxs(Q,{variant:"outline",size:"sm",className:"shadow-sm",onClick:()=>n(f),children:[s.jsx(ar,{className:"h-3 w-3 mr-1"}),"Edit"]}),s.jsxs(Q,{variant:"outline",size:"sm",className:"shadow-sm",onClick:()=>i(f),children:[s.jsx(n3,{className:"h-3 w-3 mr-1"}),"Duplicate"]}),s.jsx(Q,{variant:"outline",size:"sm",className:"shadow-sm text-red-600 hover:text-red-700",onClick:()=>r(f.id),children:s.jsx(Tr,{className:"h-3 w-3"})})]})]},f.id)),u.length===0&&s.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[s.jsx(GR,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),s.jsx("p",{children:"No templates found"}),s.jsx("p",{className:"text-sm",children:"Create your first template to get started"})]})]})})]})]})}const ns={checklistStatuses:["Not Started","In Progress","Complete","Failed","Pending Review","Approved"],sampleInspections:[{id:"pdi-001",unitId:"unit-001",unitInfo:"2023 Forest River Cherokee 274RK",stockNumber:"RV-2023-001",vin:"1FUJBBCK5NLBXXXXX",technicianId:"tech-001",technicianName:"Mike Johnson",status:"Complete",templateId:"template-rv-standard",templateName:"Standard RV PDI",startedDate:"2024-01-15T08:00:00Z",completedDate:"2024-01-15T14:30:00Z",findings:[{category:"Exterior",item:"Body Condition",status:"Pass",notes:"No visible damage or defects"},{category:"Interior",item:"Appliances",status:"Fail",notes:"Refrigerator not cooling properly - needs service"},{category:"Electrical",item:"12V Systems",status:"Pass",notes:"All lights and outlets functioning"},{category:"Plumbing",item:"Water System",status:"Pass",notes:"No leaks detected, pressure test passed"}],overallNotes:"Unit ready for delivery pending refrigerator repair. Estimated 2-day delay.",customerNotified:!0,deliveryApproved:!1,photos:[{id:"photo-001",category:"Exterior",description:"Front view",url:"/mock/pdi-photo-1.jpg"},{id:"photo-002",category:"Interior",description:"Kitchen area",url:"/mock/pdi-photo-2.jpg"}]},{id:"pdi-002",unitId:"unit-002",unitInfo:"2024 Keystone Montana 3761FL",stockNumber:"RV-2024-005",vin:"4X4TWHBK5PNxxxxxx",technicianId:"tech-002",technicianName:"Sarah Davis",status:"In Progress",templateId:"template-fifthwheel",templateName:"Fifth Wheel PDI",startedDate:"2024-01-16T09:00:00Z",completedDate:null,findings:[{category:"Exterior",item:"Slide-out Operation",status:"Pass",notes:"All slides operate smoothly"},{category:"Interior",item:"HVAC System",status:"Pass",notes:"AC and furnace both operational"}],overallNotes:"Inspection in progress - approximately 60% complete",customerNotified:!1,deliveryApproved:!1,photos:[]}],formDefaults:{unitId:"",technicianId:"",templateId:"template-rv-standard",status:"Not Started",startedDate:"",notes:"",customerNotified:!1,deliveryApproved:!1},templateOptions:[{id:"template-rv-standard",name:"Standard RV PDI",description:"Comprehensive inspection for travel trailers and motorhomes",unitTypes:["Travel Trailer","Motorhome","Toy Hauler"]},{id:"template-fifthwheel",name:"Fifth Wheel PDI",description:"Specialized inspection for fifth wheel trailers",unitTypes:["Fifth Wheel"]},{id:"template-manufactured-home",name:"Manufactured Home PDI",description:"Complete inspection for manufactured housing units",unitTypes:["Single Wide","Double Wide","Triple Wide"]},{id:"template-park-model",name:"Park Model PDI",description:"Inspection checklist for park model homes",unitTypes:["Park Model"]}],inspectionCategories:[{id:"exterior",name:"Exterior",items:["Body Condition","Paint/Graphics","Windows/Doors","Awnings","Slide-out Operation","Tires/Wheels","Hitch/Coupling","Exterior Lights","Storage Compartments"]},{id:"interior",name:"Interior",items:["Flooring","Walls/Ceiling","Furniture/Cabinetry","Appliances","Window Treatments","Interior Lights","Safety Equipment","Entertainment Systems"]},{id:"electrical",name:"Electrical",items:["12V Systems","120V Systems","Battery Condition","Converter/Inverter","Solar System","Generator","Shore Power Connection","GFCI Outlets"]},{id:"plumbing",name:"Plumbing",items:["Water System","Hot Water Heater","Toilet Operation","Shower/Tub","Kitchen Sink","Water Pump","Holding Tanks","Exterior Water Connection"]},{id:"hvac",name:"HVAC",items:["Air Conditioning","Furnace Operation","Ventilation Fans","Thermostat","Ductwork","Filters","Vents/Returns"]},{id:"safety",name:"Safety & Compliance",items:["Smoke Detectors","Carbon Monoxide Detector","Fire Extinguisher","Emergency Exits","Propane System","Brake System","Safety Chains","Compliance Labels"]}],technicianOptions:[{id:"tech-001",name:"Mike Johnson",specialties:["Electrical","Plumbing"]},{id:"tech-002",name:"Sarah Davis",specialties:["HVAC","Appliances"]},{id:"tech-003",name:"Tom Wilson",specialties:["Structural","Exterior"]},{id:"tech-004",name:"Lisa Chen",specialties:["Interior","Safety"]}],statusColors:{"Not Started":"bg-gray-100 text-gray-800","In Progress":"bg-blue-100 text-blue-800",Complete:"bg-green-100 text-green-800",Failed:"bg-red-100 text-red-800","Pending Review":"bg-yellow-100 text-yellow-800",Approved:"bg-emerald-100 text-emerald-800"},findingStatusColors:{Pass:"bg-green-100 text-green-800",Fail:"bg-red-100 text-red-800","N/A":"bg-gray-100 text-gray-800",Pending:"bg-yellow-100 text-yellow-800"}};function gEe({template:t,onSave:e,onCancel:n}){var D;const{toast:r}=Ot(),[i,a]=A.useState(!1),[o,l]=A.useState({name:(t==null?void 0:t.name)||ns.formDefaults.unitId,description:(t==null?void 0:t.description)||"",unitTypes:(t==null?void 0:t.unitTypes)||[],categories:[],vehicleType:pn.RV,isActive:!0,sections:[]}),[c,d]=A.useState(!1),[u,h]=A.useState({name:"",description:"",items:[]}),[f,m]=A.useState(!1),[v,p]=A.useState(null),[g,x]=A.useState({name:"",description:"",itemType:"checkbox",isRequired:!0});[...new Set(ns.templateOptions.flatMap(P=>P.unitTypes))];const y=async P=>{if(P.preventDefault(),!o.name){r({title:"Validation Error",description:"Template name is required",variant:"destructive"});return}if(!o.vehicleType){r({title:"Validation Error",description:"Vehicle type is required",variant:"destructive"});return}if(!o.sections||o.sections.length===0){r({title:"Validation Error",description:"At least one section is required",variant:"destructive"});return}const R=o.sections.filter(_=>!_.items||_.items.length===0);if(R.length>0){r({title:"Validation Error",description:`Section "${R[0].name}" must have at least one item`,variant:"destructive"});return}a(!0);try{await e(o),r({title:"Success",description:`Template ${t?"updated":"created"} successfully`})}catch{r({title:"Error",description:`Failed to ${t?"update":"create"} template`,variant:"destructive"})}finally{a(!1)}},b=()=>{var R;if(!u.name){r({title:"Validation Error",description:"Section name is required",variant:"destructive"});return}const P={id:Math.random().toString(36).substr(2,9),templateId:(t==null?void 0:t.id)||"",name:u.name,description:u.description||"",orderIndex:(((R=o.sections)==null?void 0:R.length)||0)+1,items:[],createdAt:new Date};l(_=>({..._,sections:[..._.sections||[],P]})),h({name:"",description:"",items:[]}),d(!1)},w=P=>{l(R=>{var _;return{...R,sections:((_=R.sections)==null?void 0:_.filter(M=>M.id!==P))||[]}})},N=P=>{const R=[...o.sections||[]],_=R.findIndex(M=>M.id===P);_<=0||([R[_-1],R[_]]=[R[_],R[_-1]],R.forEach((M,U)=>{M.orderIndex=U+1}),l(M=>({...M,sections:R})))},E=P=>{const R=[...o.sections||[]],_=R.findIndex(M=>M.id===P);_===-1||_>=R.length-1||([R[_],R[_+1]]=[R[_+1],R[_]],R.forEach((M,U)=>{M.orderIndex=U+1}),l(M=>({...M,sections:R})))},C=P=>{var F;if(!g.name){r({title:"Validation Error",description:"Item name is required",variant:"destructive"});return}const R=[...o.sections||[]],_=R.findIndex(z=>z.id===P);if(_===-1)return;const M=R[_],U={id:Math.random().toString(36).substr(2,9),sectionId:P,name:g.name,description:g.description||"",itemType:g.itemType||"checkbox",isRequired:g.isRequired??!0,orderIndex:(((F=M.items)==null?void 0:F.length)||0)+1,createdAt:new Date};M.items=[...M.items||[],U],R[_]=M,l(z=>({...z,sections:R})),x({name:"",description:"",itemType:"checkbox",isRequired:!0}),m(!1)},j=(P,R)=>{const _=[...o.sections||[]],M=_.findIndex(F=>F.id===P);if(M===-1)return;const U=_[M];U.items=U.items.filter(F=>F.id!==R),_[M]=U,l(F=>({...F,sections:_}))},I=(P,R)=>{const _=[...o.sections||[]],M=_.findIndex(H=>H.id===P);if(M===-1)return;const U=_[M],F=[...U.items],z=F.findIndex(H=>H.id===R);z<=0||([F[z-1],F[z]]=[F[z],F[z-1]],F.forEach((H,W)=>{H.orderIndex=W+1}),U.items=F,_[M]=U,l(H=>({...H,sections:_})))},k=(P,R)=>{const _=[...o.sections||[]],M=_.findIndex(H=>H.id===P);if(M===-1)return;const U=_[M],F=[...U.items],z=F.findIndex(H=>H.id===R);z===-1||z>=F.length-1||([F[z],F[z+1]]=[F[z+1],F[z]],F.forEach((H,W)=>{H.orderIndex=W+1}),U.items=F,_[M]=U,l(H=>({...H,sections:_})))};return s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:s.jsxs(he,{className:"w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[s.jsx(ye,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx(be,{children:t?"Edit Template":"Create Template"}),s.jsx(Be,{children:t?"Update PDI template details":"Create a new PDI template"})]}),s.jsx(Q,{variant:"ghost",size:"sm",onClick:n,children:s.jsx(on,{className:"h-4 w-4"})})]})}),s.jsx(fe,{children:s.jsxs("form",{onSubmit:y,className:"space-y-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-semibold",children:"Template Information"}),s.jsxs("div",{children:[s.jsx(ae,{children:"Base Template"}),s.jsxs(Ke,{value:"",onValueChange:P=>{const R=ns.templateOptions.find(_=>_.id===P);R&&l(_=>({..._,name:R.name,description:R.description,unitTypes:R.unitTypes}))},children:[s.jsx(He,{children:s.jsx(Ye,{placeholder:"Start from existing template (optional)"})}),s.jsx(We,{children:ns.templateOptions.map(P=>s.jsx(le,{value:P.id,children:P.name},P.id))})]}),s.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Select a template to copy its settings as a starting point"})]}),s.jsxs("div",{children:[s.jsx(ae,{children:"Categories"}),ns.inspectionCategories.map(P=>s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx($t,{id:`category-${P.id}`,checked:o.categories.includes(P.name),onCheckedChange:R=>{l(R?_=>({..._,categories:[..._.categories,P.name]}):_=>({..._,categories:_.categories.filter(M=>M!==P.name)}))}}),s.jsx(ae,{htmlFor:`category-${P.id}`,className:"text-sm",children:P.name})]},P.id))]}),s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"name",children:"Template Name *"}),s.jsx(Ae,{id:"name",value:o.name,onChange:P=>l(R=>({...R,name:P.target.value})),placeholder:"e.g., RV Pre-Delivery Inspection"})]}),s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"vehicleType",children:"Home/Vehicle Type *"}),s.jsxs(Ke,{value:o.vehicleType,onValueChange:P=>l(R=>({...R,vehicleType:P})),children:[s.jsx(He,{children:s.jsx(Ye,{})}),s.jsxs(We,{children:[s.jsx(le,{value:pn.RV,children:"RV"}),s.jsx(le,{value:pn.MOTORHOME,children:"Motorhome"}),s.jsx(le,{value:pn.TRAVEL_TRAILER,children:"Travel Trailer"}),s.jsx(le,{value:pn.FIFTH_WHEEL,children:"Fifth Wheel"}),s.jsx(le,{value:pn.TOY_HAULER,children:"Toy Hauler"}),s.jsx(le,{value:pn.SINGLE_WIDE,children:"Single Wide MH"}),s.jsx(le,{value:pn.DOUBLE_WIDE,children:"Double Wide MH"}),s.jsx(le,{value:pn.TRIPLE_WIDE,children:"Triple Wide MH"}),s.jsx(le,{value:pn.PARK_MODEL,children:"Park Model"}),s.jsx(le,{value:pn.MODULAR_HOME,children:"Modular Home"})]})]})]}),s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"description",children:"Description"}),s.jsx(un,{id:"description",value:o.description,onChange:P=>l(R=>({...R,description:P.target.value})),placeholder:"Describe the purpose and scope of this template",rows:3})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx($t,{id:"isActive",checked:o.isActive,onCheckedChange:P=>l(R=>({...R,isActive:!!P}))}),s.jsx(ae,{htmlFor:"isActive",children:"Active template"})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h3",{className:"text-lg font-semibold",children:"Sections"}),s.jsxs(Q,{type:"button",onClick:()=>d(!0),size:"sm",children:[s.jsx(yt,{className:"h-4 w-4 mr-2"}),"Add Section"]})]}),c&&s.jsx(he,{className:"border-dashed",children:s.jsx(fe,{className:"pt-6",children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"sectionName",children:"Section Name *"}),s.jsx(Ae,{id:"sectionName",value:u.name,onChange:P=>h(R=>({...R,name:P.target.value})),placeholder:"e.g., Exterior Inspection"})]}),s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"sectionDescription",children:"Description"}),s.jsx(un,{id:"sectionDescription",value:u.description,onChange:P=>h(R=>({...R,description:P.target.value})),placeholder:"Describe this section",rows:2})]}),s.jsxs("div",{className:"flex justify-end space-x-2",children:[s.jsx(Q,{type:"button",variant:"outline",onClick:()=>d(!1),children:"Cancel"}),s.jsx(Q,{type:"button",onClick:b,children:"Add Section"})]})]})})}),s.jsxs("div",{className:"space-y-6",children:[(D=o.sections)==null?void 0:D.map(P=>{var R;return s.jsxs(he,{className:"shadow-sm",children:[s.jsx(ye,{className:"pb-3",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx(be,{className:"text-lg",children:P.name}),P.description&&s.jsx(Be,{children:P.description})]}),s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx(Q,{type:"button",variant:"ghost",size:"sm",onClick:()=>N(P.id),disabled:P.orderIndex<=1,children:s.jsx(Uh,{className:"h-4 w-4"})}),s.jsx(Q,{type:"button",variant:"ghost",size:"sm",onClick:()=>E(P.id),disabled:P.orderIndex>=(((R=o.sections)==null?void 0:R.length)||0),children:s.jsx(zh,{className:"h-4 w-4"})}),s.jsx(Q,{type:"button",variant:"ghost",size:"sm",onClick:()=>w(P.id),children:s.jsx(Tr,{className:"h-4 w-4 text-red-500"})})]})]})}),s.jsx(fe,{children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("h4",{className:"text-sm font-semibold",children:["Items (",P.items.length,")"]}),s.jsxs(Q,{type:"button",size:"sm",variant:"outline",onClick:()=>{p(P.id),m(!0)},children:[s.jsx(yt,{className:"h-3 w-3 mr-1"}),"Add Item"]})]}),f&&v===P.id&&s.jsx(he,{className:"border-dashed",children:s.jsx(fe,{className:"pt-6",children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"itemName",children:"Item Name *"}),s.jsx(Ae,{id:"itemName",value:g.name,onChange:_=>x(M=>({...M,name:_.target.value})),placeholder:"e.g., Check Exterior Body Condition"})]}),s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"itemType",children:"Item Type"}),s.jsxs(Ke,{value:g.itemType,onValueChange:_=>x(M=>({...M,itemType:_})),children:[s.jsx(He,{children:s.jsx(Ye,{})}),s.jsxs(We,{children:[s.jsx(le,{value:"checkbox",children:"Checkbox"}),s.jsx(le,{value:"text",children:"Text Input"}),s.jsx(le,{value:"number",children:"Number Input"}),s.jsx(le,{value:"photo",children:"Photo Upload"})]})]})]})]}),s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"itemDescription",children:"Description"}),s.jsx(un,{id:"itemDescription",value:g.description,onChange:_=>x(M=>({...M,description:_.target.value})),placeholder:"Describe this inspection item",rows:2})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx($t,{id:"isRequired",checked:g.isRequired,onCheckedChange:_=>x(M=>({...M,isRequired:!!_}))}),s.jsx(ae,{htmlFor:"isRequired",children:"Required item"})]}),s.jsxs("div",{className:"flex justify-end space-x-2",children:[s.jsx(Q,{type:"button",variant:"outline",onClick:()=>{m(!1),p(null)},children:"Cancel"}),s.jsx(Q,{type:"button",onClick:()=>C(P.id),children:"Add Item"})]})]})})}),s.jsxs("div",{className:"space-y-2",children:[P.items.map(_=>s.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("span",{className:"font-medium",children:_.name}),s.jsx(Re,{variant:"outline",className:"text-xs",children:_.itemType}),_.isRequired&&s.jsx(Re,{className:"bg-blue-50 text-blue-700 border-blue-200 text-xs",children:"Required"})]}),_.description&&s.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:_.description})]}),s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx(Q,{type:"button",variant:"ghost",size:"sm",onClick:()=>I(P.id,_.id),disabled:_.orderIndex<=1,children:s.jsx(Uh,{className:"h-3 w-3"})}),s.jsx(Q,{type:"button",variant:"ghost",size:"sm",onClick:()=>k(P.id,_.id),disabled:_.orderIndex>=P.items.length,children:s.jsx(zh,{className:"h-3 w-3"})}),s.jsx(Q,{type:"button",variant:"ghost",size:"sm",onClick:()=>j(P.id,_.id),children:s.jsx(Tr,{className:"h-3 w-3 text-red-500"})})]})]},_.id)),P.items.length===0&&s.jsxs("div",{className:"text-center py-4 text-sm text-muted-foreground border-2 border-dashed rounded-lg",children:[s.jsx(e3,{className:"h-8 w-8 mx-auto mb-2 text-muted-foreground/50"}),s.jsx("p",{children:"No items added yet"}),s.jsx("p",{className:"text-xs",children:"Add items to this section"})]})]})]})})]},P.id)}),(!o.sections||o.sections.length===0)&&s.jsxs("div",{className:"text-center py-8 text-muted-foreground border-2 border-dashed rounded-lg",children:[s.jsx(GR,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),s.jsx("p",{children:"No sections added yet"}),s.jsx("p",{className:"text-sm",children:"Add sections to organize your checklist"})]})]})]}),s.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t",children:[s.jsx(Q,{type:"button",variant:"outline",onClick:n,disabled:i,children:"Cancel"}),s.jsx(Q,{type:"submit",disabled:i,children:i?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),t?"Updating...":"Creating..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Wn,{className:"h-4 w-4 mr-2"}),t?"Update":"Create"," Template"]})})]})]})})]})})}function vEe({onNewInspection:t,onViewInspection:e,onEditInspection:n}){const[r,i]=A.useState(""),[a,o]=A.useState("all"),[l,c]=A.useState("all"),d=ns.sampleInspections,u=v=>ns.statusColors[v]||"bg-gray-100 text-gray-800",h=v=>{switch(v){case"Complete":return s.jsx(Rn,{className:"h-4 w-4 text-green-600"});case"In Progress":return s.jsx(gn,{className:"h-4 w-4 text-blue-600"});case"Failed":return s.jsx(ko,{className:"h-4 w-4 text-red-600"});default:return s.jsx(gn,{className:"h-4 w-4 text-gray-600"})}},f=d.filter(v=>{const p=v.unitInfo.toLowerCase().includes(r.toLowerCase())||v.stockNumber.toLowerCase().includes(r.toLowerCase())||v.technicianName.toLowerCase().includes(r.toLowerCase()),g=a==="all"||v.status===a,x=l==="all"||v.technicianId===l;return p&&g&&x}),m=v=>{if(!v.findings||v.findings.length===0)return 0;const p=v.findings.filter(g=>g.status==="Pass"||g.status==="Fail").length;return Math.round(p/v.findings.length*100)};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"PDI Inspections"}),s.jsx("p",{className:"text-muted-foreground",children:"Manage pre-delivery inspections for RVs and vehicles"})]}),s.jsxs(Q,{onClick:t,children:[s.jsx(yt,{className:"mr-2 h-4 w-4"}),"New Inspection"]})]}),s.jsxs(he,{children:[s.jsxs(ye,{children:[s.jsx(be,{children:"Inspection List"}),s.jsx(Be,{children:"View and manage all PDI inspections"})]}),s.jsxs(fe,{children:[s.jsxs("div",{className:"flex items-center space-x-4 mb-6",children:[s.jsxs("div",{className:"relative flex-1",children:[s.jsx(Rr,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),s.jsx(Ae,{placeholder:"Search inspections...",value:r,onChange:v=>i(v.target.value),className:"pl-8"})]}),s.jsxs(Ke,{value:a,onValueChange:o,children:[s.jsx(He,{className:"w-[180px]",children:s.jsx(Ye,{placeholder:"All statuses"})}),s.jsxs(We,{children:[s.jsx(le,{value:"all",children:"All Statuses"}),ns.checklistStatuses.map(v=>s.jsx(le,{value:v,children:v},v))]})]}),s.jsxs(Ke,{value:l,onValueChange:c,children:[s.jsx(He,{className:"w-[180px]",children:s.jsx(Ye,{placeholder:"All technicians"})}),s.jsxs(We,{children:[s.jsx(le,{value:"all",children:"All Technicians"}),ns.technicianOptions.map(v=>s.jsx(le,{value:v.id,children:v.name},v.id))]})]})]}),s.jsxs(L3,{children:[s.jsx(R3,{children:s.jsxs(im,{children:[s.jsx(xr,{children:"Unit Info"}),s.jsx(xr,{children:"Stock #"}),s.jsx(xr,{children:"Technician"}),s.jsx(xr,{children:"Status"}),s.jsx(xr,{children:"Progress"}),s.jsx(xr,{children:"Started"}),s.jsx(xr,{children:"Completed"}),s.jsx(xr,{children:"Actions"})]})}),s.jsx(M3,{children:f.map(v=>s.jsxs(im,{children:[s.jsx(ur,{className:"font-medium",children:v.unitInfo}),s.jsx(ur,{children:v.stockNumber}),s.jsx(ur,{children:v.technicianName}),s.jsx(ur,{children:s.jsxs("div",{className:"flex items-center space-x-2",children:[h(v.status),s.jsx(Re,{className:u(v.status),children:v.status})]})}),s.jsx(ur,{children:s.jsxs("div",{className:"text-sm",children:[m(v),"% Complete"]})}),s.jsx(ur,{children:ht(v.startedDate)}),s.jsx(ur,{children:v.completedDate?ht(v.completedDate):"-"}),s.jsx(ur,{children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Q,{variant:"outline",size:"sm",onClick:()=>e(v.id),children:s.jsx(Wr,{className:"h-4 w-4"})}),s.jsx(Q,{variant:"outline",size:"sm",onClick:()=>n(v.id),children:s.jsx(ar,{className:"h-4 w-4"})})]})})]},v.id))})]}),f.length===0&&s.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No inspections found matching your criteria."})]})]})]})}function xEe({inspection:t,vehicles:e,onSave:n,onComplete:r,onUpdateItem:i,onAddDefect:a,onAddPhoto:o,onCancel:l}){var H;const{toast:c}=Ot(),[d,u]=A.useState(!1),[h,f]=A.useState("checklist"),[m,v]=A.useState(t.notes||""),[p,g]=A.useState(!1),[x,y]=A.useState(null),[b,w]=A.useState({title:"",description:"",severity:no.MEDIUM}),[N,E]=A.useState(!1),[C,j]=A.useState("");A.useState({unitId:(t==null?void 0:t.unitId)||ns.formDefaults.unitId,technicianId:(t==null?void 0:t.technicianId)||ns.formDefaults.technicianId,templateId:(t==null?void 0:t.templateId)||ns.formDefaults.templateId,status:(t==null?void 0:t.status)||ns.formDefaults.status,startedDate:(t==null?void 0:t.startedDate)||ns.formDefaults.startedDate,notes:(t==null?void 0:t.notes)||ns.formDefaults.notes,customerNotified:(t==null?void 0:t.customerNotified)||ns.formDefaults.customerNotified,deliveryApproved:(t==null?void 0:t.deliveryApproved)||ns.formDefaults.deliveryApproved}),A.useEffect(()=>{v(t.notes||"")},[t]);const{getRootProps:I,getInputProps:k}=F3({accept:{"image/*":[]},onDrop:W=>{if(W.length===0)return;const $=W[0],L=URL.createObjectURL($);M(L)}}),D=async()=>{u(!0);try{await n({notes:m}),c({title:"Success",description:"Inspection saved successfully"})}catch{c({title:"Error",description:"Failed to save inspection",variant:"destructive"})}finally{u(!1)}},P=async()=>{const W=t.items.filter($=>{const L=$.templateItem;return(L==null?void 0:L.isRequired)&&$.status===Br.PENDING});if(W.length>0){c({title:"Incomplete Inspection",description:`${W.length} required items are still pending`,variant:"destructive"});return}u(!0);try{await r(t.id,m),c({title:"Success",description:"Inspection completed successfully"}),l()}catch{c({title:"Error",description:"Failed to complete inspection",variant:"destructive"})}finally{u(!1)}},R=async(W,$,L,q)=>{try{await i(t.id,W,{status:$,value:L,notes:q}),$===Br.FAILED&&(y(W),g(!0))}catch{c({title:"Error",description:"Failed to update item",variant:"destructive"})}},_=async()=>{if(!b.title||!b.description){c({title:"Validation Error",description:"Title and description are required",variant:"destructive"});return}try{await a(t.id,{...b,inspectionItemId:x||void 0}),w({title:"",description:"",severity:no.MEDIUM}),y(null),g(!1),c({title:"Success",description:"Defect added successfully"})}catch{c({title:"Error",description:"Failed to add defect",variant:"destructive"})}},M=async W=>{try{await o(t.id,{url:W,inspectionItemId:x||void 0,caption:C}),j(""),E(!1),c({title:"Success",description:"Photo added successfully"})}catch{c({title:"Error",description:"Failed to add photo",variant:"destructive"})}},U=W=>{switch(W){case Br.PENDING:return"bg-yellow-50 text-yellow-700 border-yellow-200";case Br.PASSED:return"bg-green-50 text-green-700 border-green-200";case Br.FAILED:return"bg-red-50 text-red-700 border-red-200";case Br.NA:return"bg-gray-50 text-gray-700 border-gray-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},F=W=>{switch(W){case no.LOW:return"bg-blue-50 text-blue-700 border-blue-200";case no.MEDIUM:return"bg-yellow-50 text-yellow-700 border-yellow-200";case no.HIGH:return"bg-orange-50 text-orange-700 border-orange-200";case no.CRITICAL:return"bg-red-50 text-red-700 border-red-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},z=e.find(W=>W.id===t.vehicleId);return s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:s.jsxs(he,{className:"w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[s.jsx(ye,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx(be,{children:"PDI Inspection"}),s.jsx(Be,{children:z?`${z.year} ${z.make} ${z.model}`:t.vehicleId})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Re,{className:st("ri-badge-status",t.status===uc.IN_PROGRESS?"bg-yellow-50 text-yellow-700 border-yellow-200":t.status===uc.COMPLETED?"bg-blue-50 text-blue-700 border-blue-200":t.status===uc.APPROVED?"bg-green-50 text-green-700 border-green-200":"bg-red-50 text-red-700 border-red-200"),children:t.status.replace("_"," ").toUpperCase()}),s.jsx(Q,{variant:"ghost",size:"sm",onClick:l,children:s.jsx(on,{className:"h-4 w-4"})})]})]})}),s.jsx(fe,{children:s.jsxs(Vn,{value:h,onValueChange:f,className:"space-y-4",children:[s.jsxs(Mn,{className:"grid w-full grid-cols-3",children:[s.jsx(tt,{value:"checklist",children:"Checklist"}),s.jsxs(tt,{value:"defects",children:["Defects",t.defects.length>0&&s.jsx(Re,{className:"ml-2 bg-red-50 text-red-700 border-red-200",children:t.defects.length})]}),s.jsxs(tt,{value:"photos",children:["Photos",t.photos.length>0&&s.jsx(Re,{className:"ml-2 bg-blue-50 text-blue-700 border-blue-200",children:t.photos.length})]})]}),s.jsxs(rt,{value:"checklist",className:"space-y-6",children:[p&&s.jsxs(he,{className:"border-2 border-red-200",children:[s.jsxs(ye,{className:"bg-red-50",children:[s.jsxs(be,{className:"text-lg text-red-700 flex items-center",children:[s.jsx(Ba,{className:"h-5 w-5 mr-2"}),"Report Defect"]}),s.jsx(Be,{className:"text-red-600",children:"Record details about the issue found"})]}),s.jsxs(fe,{className:"pt-6 space-y-4",children:[s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"defectTitle",children:"Defect Title *"}),s.jsx(Ae,{id:"defectTitle",value:b.title,onChange:W=>w($=>({...$,title:W.target.value})),placeholder:"e.g., Damaged Roof Seal"})]}),s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"defectDescription",children:"Description *"}),s.jsx(un,{id:"defectDescription",value:b.description,onChange:W=>w($=>({...$,description:W.target.value})),placeholder:"Describe the defect in detail",rows:3})]}),s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"defectSeverity",children:"Severity"}),s.jsxs(Ke,{value:b.severity,onValueChange:W=>w($=>({...$,severity:W})),children:[s.jsx(He,{children:s.jsx(Ye,{})}),s.jsxs(We,{children:[s.jsx(le,{value:no.LOW,children:"Low"}),s.jsx(le,{value:no.MEDIUM,children:"Medium"}),s.jsx(le,{value:no.HIGH,children:"High"}),s.jsx(le,{value:no.CRITICAL,children:"Critical"})]})]})]}),s.jsxs("div",{className:"flex justify-end space-x-2",children:[s.jsx(Q,{type:"button",variant:"outline",onClick:()=>{g(!1),y(null)},children:"Cancel"}),s.jsx(Q,{type:"button",onClick:_,children:"Add Defect"})]})]})]}),N&&s.jsxs(he,{className:"border-2 border-blue-200",children:[s.jsxs(ye,{className:"bg-blue-50",children:[s.jsxs(be,{className:"text-lg text-blue-700 flex items-center",children:[s.jsx(ud,{className:"h-5 w-5 mr-2"}),"Add Photo"]}),s.jsx(Be,{className:"text-blue-600",children:"Upload a photo for documentation"})]}),s.jsxs(fe,{className:"pt-6 space-y-4",children:[s.jsxs("div",{...I(),className:"border-2 border-dashed rounded-lg p-6 text-center cursor-pointer hover:bg-muted/10",children:[s.jsx("input",{...k()}),s.jsx(Hj,{className:"h-8 w-8 mx-auto mb-2 text-muted-foreground"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Drag & drop an image here, or click to select a file"})]}),s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"photoCaption",children:"Caption (Optional)"}),s.jsx(Ae,{id:"photoCaption",value:C,onChange:W=>j(W.target.value),placeholder:"e.g., Front view of vehicle"})]}),s.jsxs("div",{className:"flex justify-end space-x-2",children:[s.jsx(Q,{type:"button",variant:"outline",onClick:()=>{E(!1),y(null),j("")},children:"Cancel"}),s.jsx(Q,{type:"button",onClick:()=>{M("https://images.pexels.com/photos/1319515/pexels-photo-1319515.jpeg")},children:"Simulate Upload"})]})]})]}),(H=t.template)==null?void 0:H.sections.map(W=>s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-semibold",children:W.name}),W.description&&s.jsx("p",{className:"text-sm text-muted-foreground",children:W.description}),s.jsx("div",{className:"space-y-3",children:W.items.map($=>{const L=t.items.find(q=>q.templateItemId===$.id);return L?s.jsx(he,{className:"shadow-sm",children:s.jsx(fe,{className:"p-4",children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[s.jsx("h4",{className:"font-medium",children:$.name}),$.isRequired&&s.jsx(Re,{className:"bg-blue-50 text-blue-700 border-blue-200 text-xs",children:"Required"}),s.jsx(Re,{className:st("ri-badge-status text-xs",U(L.status)),children:L.status.toUpperCase()})]}),$.description&&s.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:$.description}),$.itemType==="text"&&s.jsx("div",{className:"mb-3",children:s.jsx(Ae,{value:L.value||"",onChange:q=>R(L.id,Br.PASSED,q.target.value),placeholder:"Enter text"})}),$.itemType==="number"&&s.jsx("div",{className:"mb-3",children:s.jsx(Ae,{type:"number",value:L.value||"",onChange:q=>R(L.id,Br.PASSED,q.target.value),placeholder:"Enter number"})}),$.itemType==="photo"&&s.jsxs("div",{className:"mb-3",children:[s.jsxs(Q,{variant:"outline",size:"sm",onClick:()=>{y(L.id),E(!0)},children:[s.jsx(ud,{className:"h-4 w-4 mr-2"}),"Add Photo"]}),t.photos.filter(q=>q.inspectionItemId===L.id).length>0&&s.jsx("div",{className:"grid grid-cols-3 gap-2 mt-2",children:t.photos.filter(q=>q.inspectionItemId===L.id).map(q=>s.jsxs("div",{className:"relative",children:[s.jsx("img",{src:q.url,alt:q.caption||"Inspection photo",className:"h-20 w-full object-cover rounded-md"}),q.caption&&s.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-black/50 text-white text-xs p-1 truncate",children:q.caption})]},q.id))})]}),L.notes&&s.jsx("div",{className:"mb-3 p-2 bg-muted/30 rounded-md",children:s.jsxs("p",{className:"text-sm text-muted-foreground",children:[s.jsx("span",{className:"font-medium",children:"Notes:"})," ",L.notes]})}),L.status!==Br.PENDING&&s.jsx("div",{className:"mb-3",children:s.jsx(un,{value:L.notes||"",onChange:q=>R(L.id,L.status,L.value,q.target.value),placeholder:"Add notes (optional)",rows:2})})]}),$.itemType==="checkbox"&&s.jsxs("div",{className:"flex items-center space-x-2 ml-4",children:[s.jsxs(Q,{variant:L.status===Br.PASSED?"default":"outline",size:"sm",onClick:()=>R(L.id,Br.PASSED),className:L.status===Br.PASSED?"":"border-green-200 text-green-700",children:[s.jsx(Rn,{className:"h-4 w-4 mr-1"}),"Pass"]}),s.jsxs(Q,{variant:L.status===Br.FAILED?"default":"outline",size:"sm",onClick:()=>R(L.id,Br.FAILED),className:L.status===Br.FAILED?"":"border-red-200 text-red-700",children:[s.jsx(ko,{className:"h-4 w-4 mr-1"}),"Fail"]}),s.jsx(Q,{variant:L.status===Br.NA?"default":"outline",size:"sm",onClick:()=>R(L.id,Br.NA),className:L.status===Br.NA?"":"border-gray-200 text-gray-700",children:"N/A"})]})]})})},$.id):null})})]},W.id)),s.jsxs("div",{className:"space-y-4 pt-6 border-t",children:[s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"inspectionNotes",children:"Inspection Notes"}),s.jsx(un,{id:"inspectionNotes",value:m,onChange:W=>v(W.target.value),placeholder:"Add general notes about this inspection",rows:3})]}),s.jsxs("div",{className:"flex justify-end space-x-3",children:[s.jsx(Q,{type:"button",variant:"outline",onClick:l,disabled:d,children:"Cancel"}),s.jsxs(Q,{type:"button",onClick:D,disabled:d,children:[s.jsx(Wn,{className:"h-4 w-4 mr-2"}),"Save Progress"]}),s.jsxs(Q,{type:"button",onClick:P,disabled:d||t.status!=="in_progress",children:[s.jsx(qj,{className:"h-4 w-4 mr-2"}),"Complete Inspection"]})]})]})]}),s.jsxs(rt,{value:"defects",className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h3",{className:"text-lg font-semibold",children:"Defects"}),s.jsxs(Q,{size:"sm",onClick:()=>{y(null),g(!0)},children:[s.jsx(yt,{className:"h-4 w-4 mr-2"}),"Add Defect"]})]}),t.defects.length===0?s.jsxs("div",{className:"text-center py-8 text-muted-foreground border-2 border-dashed rounded-lg",children:[s.jsx(Ba,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),s.jsx("p",{children:"No defects reported"}),s.jsx("p",{className:"text-sm",children:"Add defects when issues are found"})]}):s.jsx("div",{className:"space-y-4",children:t.defects.map(W=>s.jsxs(he,{className:"shadow-sm",children:[s.jsx(ye,{className:"pb-3",children:s.jsx("div",{className:"flex items-center justify-between",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("h4",{className:"font-semibold",children:W.title}),s.jsx(Re,{className:st("ri-badge-status",F(W.severity)),children:W.severity.toUpperCase()}),s.jsx(Re,{className:W.status==="open"?"bg-red-50 text-red-700 border-red-200":W.status==="in_progress"?"bg-yellow-50 text-yellow-700 border-yellow-200":W.status==="resolved"?"bg-blue-50 text-blue-700 border-blue-200":"bg-green-50 text-green-700 border-green-200",children:W.status.replace("_"," ").toUpperCase()})]})})}),s.jsxs(fe,{children:[s.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:W.description}),t.photos.filter($=>$.defectId===W.id).length>0&&s.jsxs("div",{className:"mb-4",children:[s.jsx("h5",{className:"text-sm font-medium mb-2",children:"Photos"}),s.jsx("div",{className:"grid grid-cols-3 gap-2",children:t.photos.filter($=>$.defectId===W.id).map($=>s.jsxs("div",{className:"relative",children:[s.jsx("img",{src:$.url,alt:$.caption||"Defect photo",className:"h-24 w-full object-cover rounded-md"}),$.caption&&s.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-black/50 text-white text-xs p-1 truncate",children:$.caption})]},$.id))})]}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("div",{className:"text-sm text-muted-foreground",children:W.assignedTo?s.jsxs("span",{children:["Assigned to: ",W.assignedTo]}):s.jsx("span",{children:"Unassigned"})}),s.jsx("div",{className:"flex space-x-2",children:s.jsxs(Q,{variant:"outline",size:"sm",onClick:()=>{y(null),E(!0)},children:[s.jsx(ud,{className:"h-3 w-3 mr-1"}),"Add Photo"]})})]})]})]},W.id))})]}),s.jsxs(rt,{value:"photos",className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h3",{className:"text-lg font-semibold",children:"Photos"}),s.jsxs(Q,{size:"sm",onClick:()=>{y(null),E(!0)},children:[s.jsx(ud,{className:"h-4 w-4 mr-2"}),"Add Photo"]})]}),t.photos.length===0?s.jsxs("div",{className:"text-center py-8 text-muted-foreground border-2 border-dashed rounded-lg",children:[s.jsx(Hj,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),s.jsx("p",{children:"No photos added"}),s.jsx("p",{className:"text-sm",children:"Add photos to document the inspection"})]}):s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:t.photos.map(W=>s.jsxs("div",{className:"relative",children:[s.jsx("img",{src:W.url,alt:W.caption||"Inspection photo",className:"h-40 w-full object-cover rounded-md"}),W.caption&&s.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-black/50 text-white p-2 truncate",children:W.caption})]},W.id))})]})]})})]})})}function yEe({inspectionId:t,onEdit:e,onApprove:n}){const r=ns.sampleInspections.find(l=>l.id===t)||ns.sampleInspections[0],i=l=>ns.statusColors[l]||ns.findingStatusColors[l]||"bg-gray-100 text-gray-800",a=()=>{const l=r.findings.length,c=r.findings.filter(d=>d.status!=="Pending").length;return Math.round(c/l*100)},o=r.findings.reduce((l,c)=>(l[c.category]||(l[c.category]=[]),l[c.category].push(c),l),{});return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold",children:"PDI Inspection Report"}),s.jsx("p",{className:"text-muted-foreground",children:r.unitInfo})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Re,{className:i(r.status),children:r.status}),e&&s.jsx(Q,{variant:"outline",onClick:e,children:"Edit"}),n&&r.status==="Complete"&&s.jsx(Q,{onClick:n,children:"Approve for Delivery"})]})]}),s.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[s.jsx(he,{children:s.jsx(fe,{className:"p-4",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Gr,{className:"h-4 w-4 text-muted-foreground"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium",children:"Technician"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:r.technicianName})]})]})})}),s.jsx(he,{children:s.jsx(fe,{className:"p-4",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Sn,{className:"h-4 w-4 text-muted-foreground"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium",children:"Completed"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:r.completedDate?ht(r.completedDate):"In Progress"})]})]})})}),s.jsx(he,{children:s.jsx(fe,{className:"p-4",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Zt,{className:"h-4 w-4 text-muted-foreground"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium",children:"Template"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:r.templateName})]})]})})}),s.jsx(he,{children:s.jsx(fe,{className:"p-4",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(ud,{className:"h-4 w-4 text-muted-foreground"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium",children:"Progress"}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Pd,{value:a(),className:"w-16"}),s.jsxs("span",{className:"text-sm text-muted-foreground",children:[a(),"%"]})]})]})]})})})]}),s.jsxs(Vn,{defaultValue:"overview",className:"space-y-4",children:[s.jsxs(Mn,{children:[s.jsx(tt,{value:"overview",children:"Overview"}),s.jsx(tt,{value:"checklist",children:"Checklist"}),s.jsx(tt,{value:"notes",children:"Notes"})]}),s.jsx(rt,{value:"overview",className:"space-y-4",children:s.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[s.jsxs(he,{children:[s.jsx(ye,{children:s.jsx(be,{children:"Unit Information"})}),s.jsxs(fe,{className:"space-y-2",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Stock Number:"}),s.jsx("span",{className:"font-medium",children:r.stockNumber})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"VIN:"}),s.jsx("span",{className:"font-medium",children:r.vin})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Started:"}),s.jsx("span",{className:"font-medium",children:ht(r.startedDate)})]}),r.completedDate&&s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Completed:"}),s.jsx("span",{className:"font-medium",children:ht(r.completedDate)})]})]})]}),s.jsxs(he,{children:[s.jsx(ye,{children:s.jsx(be,{children:"Inspection Summary"})}),s.jsxs(fe,{className:"space-y-2",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Total Items:"}),s.jsx("span",{className:"font-medium",children:r.findings.length})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Passed:"}),s.jsx("span",{className:"font-medium text-green-600",children:r.findings.filter(l=>l.status==="Pass").length})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Failed:"}),s.jsx("span",{className:"font-medium text-red-600",children:r.findings.filter(l=>l.status==="Fail").length})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Customer Notified:"}),s.jsx("span",{className:"font-medium",children:r.customerNotified?"Yes":"No"})]})]})]})]})}),s.jsx(rt,{value:"checklist",className:"space-y-4",children:ns.inspectionCategories.map(l=>{const c=o[l.name]||[];return s.jsxs(he,{children:[s.jsx(ye,{children:s.jsx(be,{className:"text-lg",children:l.name})}),s.jsx(fe,{children:s.jsxs("div",{className:"space-y-3",children:[c.map((d,u)=>s.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("span",{className:"font-medium",children:d.item}),s.jsx(Re,{className:i(d.status),children:d.status})]}),d.notes&&s.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:d.notes})]}),s.jsx("div",{className:"ml-4",children:d.status==="Pass"?s.jsx(Rn,{className:"h-5 w-5 text-green-600"}):d.status==="Fail"?s.jsx(ko,{className:"h-5 w-5 text-red-600"}):s.jsx(gn,{className:"h-5 w-5 text-yellow-600"})})]},u)),c.length===0&&s.jsx("div",{className:"text-center py-4 text-muted-foreground",children:"No items inspected in this category"})]})})]},l.id)})}),s.jsxs(rt,{value:"notes",className:"space-y-4",children:[s.jsxs(he,{children:[s.jsx(ye,{children:s.jsx(be,{children:"Overall Notes"})}),s.jsx(fe,{children:s.jsx("p",{className:"text-sm leading-relaxed",children:r.overallNotes||"No additional notes provided."})})]}),r.findings.filter(l=>l.notes).length>0&&s.jsxs(he,{children:[s.jsx(ye,{children:s.jsx(be,{children:"Item-Specific Notes"})}),s.jsx(fe,{className:"space-y-3",children:r.findings.filter(l=>l.notes).map((l,c)=>s.jsxs("div",{className:"p-3 border rounded-lg",children:[s.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[s.jsx("span",{className:"font-medium",children:l.item}),s.jsx(Re,{className:i(l.status),children:l.status})]}),s.jsx("p",{className:"text-sm text-muted-foreground",children:l.notes})]},c))})]})]})]})]})}function bEe({templates:t,vehicles:e,currentUserId:n,onCreateInspection:r,onCancel:i}){const{toast:a}=Ot(),[o,l]=A.useState(!1),[c,d]=A.useState(""),[u,h]=A.useState(""),[f,m]=A.useState(""),[v,p]=A.useState([]);A.useEffect(()=>{if(c){const x=e.find(y=>y.id===c);if(x){const y=x.type,b=t.filter(w=>w.isActive&&w.vehicleType===y);p(b),b.length===1?h(b[0].id):h("")}}else p([]),h("")},[c,t,e]);const g=async x=>{if(x.preventDefault(),!c){a({title:"Validation Error",description:"Please select a vehicle",variant:"destructive"});return}if(!u){a({title:"Validation Error",description:"Please select a template",variant:"destructive"});return}l(!0);try{await r({templateId:u,vehicleId:c,inspectorId:n,notes:f}),a({title:"Success",description:"Inspection created successfully"})}catch{a({title:"Error",description:"Failed to create inspection",variant:"destructive"})}finally{l(!1)}};return s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:s.jsxs(he,{className:"w-full max-w-md",children:[s.jsx(ye,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx(be,{children:"New PDI Inspection"}),s.jsx(Be,{children:"Create a new pre-delivery inspection"})]}),s.jsx(Q,{variant:"ghost",size:"sm",onClick:i,children:s.jsx(on,{className:"h-4 w-4"})})]})}),s.jsx(fe,{children:s.jsxs("form",{onSubmit:g,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"vehicle",children:"Vehicle *"}),s.jsxs(Ke,{value:c,onValueChange:d,children:[s.jsx(He,{children:s.jsx(Ye,{placeholder:"Select a home/vehicle"})}),s.jsx(We,{children:e.map(x=>s.jsxs(le,{value:x.id,children:[x.year," ",x.make," ",x.model," - ",x.vin]},x.id))})]})]}),s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"template",children:"Inspection Template *"}),s.jsxs(Ke,{value:u,onValueChange:h,disabled:v.length===0,children:[s.jsx(He,{children:s.jsx(Ye,{placeholder:v.length===0?"Select a home/vehicle first":"Select a template"})}),s.jsx(We,{children:v.map(x=>s.jsx(le,{value:x.id,children:x.name},x.id))})]}),v.length===0&&c&&s.jsx("p",{className:"text-xs text-red-500 mt-1",children:"No templates available for this vehicle type"})]}),s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"notes",children:"Notes (Optional)"}),s.jsx(un,{id:"notes",value:f,onChange:x=>m(x.target.value),placeholder:"Add any initial notes about this inspection",rows:3})]}),s.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[s.jsx(Q,{type:"button",variant:"outline",onClick:i,disabled:o,children:"Cancel"}),s.jsx(Q,{type:"submit",disabled:o||!c||!u,children:o?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Creating..."]}):s.jsxs(s.Fragment,{children:[s.jsx(qj,{className:"h-4 w-4 mr-2"}),"Start Inspection"]})})]})]})})]})})}function HV(){const{templates:t,inspections:e,createTemplate:n,updateTemplate:r,deleteTemplate:i,createInspection:a,updateInspection:o,updateInspectionItem:l,completeInspection:c,createDefect:d,addPhoto:u,addSignoff:h}=mEe(),{vehicles:f}=Im(),{user:m}=Hb(),{toast:v}=Ot(),[p,g]=A.useState("inspections"),[x,y]=A.useState(!1),[b,w]=A.useState(!1),[N,E]=A.useState(!1),[C,j]=A.useState(!1),[I,k]=A.useState(null),[D,P]=A.useState(null),R=()=>{k(null),y(!0)},_=ce=>{k(ce),y(!0)},M=ce=>{k(ce),y(!0)},U=async ce=>{if(window.confirm("Are you sure you want to delete this template?"))try{await i(ce),v({title:"Success",description:"Template deleted successfully"})}catch{v({title:"Error",description:"Failed to delete template",variant:"destructive"})}},F=async ce=>{try{const Te={...ce,id:void 0,name:`${ce.name} (Copy)`};await n(Te),v({title:"Success",description:"Template duplicated successfully"})}catch{v({title:"Error",description:"Failed to duplicate template",variant:"destructive"})}},z=async ce=>{try{I?await r(I.id,ce):await n(ce),y(!1),k(null)}catch{v({title:"Error",description:`Failed to ${I?"update":"create"} template`,variant:"destructive"})}},H=()=>{E(!0)},W=async ce=>{try{const Te=await a(ce);E(!1),P(Te),w(!0)}catch{v({title:"Error",description:"Failed to create inspection",variant:"destructive"})}},$=ce=>{P(ce),j(!0)},L=ce=>{P(ce),w(!0)},q=async ce=>{if(D)try{await o(D.id,ce),v({title:"Success",description:"Inspection saved successfully"})}catch{v({title:"Error",description:"Failed to save inspection",variant:"destructive"})}},Y=async(ce,Te)=>{try{await c(ce,Te),w(!1),P(null),v({title:"Success",description:"Inspection completed successfully"})}catch{v({title:"Error",description:"Failed to complete inspection",variant:"destructive"})}},J=async(ce,Te,Ce)=>{try{await l(ce,Te,Ce)}catch{v({title:"Error",description:"Failed to update item",variant:"destructive"})}},ne=async(ce,Te)=>{try{await d(ce,Te)}catch{v({title:"Error",description:"Failed to add defect",variant:"destructive"})}},re=async(ce,Te)=>{try{await u(ce,Te)}catch{v({title:"Error",description:"Failed to add photo",variant:"destructive"})}},pe=async(ce,Te)=>{try{await h(ce,{...Te,userId:(m==null?void 0:m.id)||"current-user"})}catch{v({title:"Error",description:"Failed to add signoff",variant:"destructive"})}},ue=t.length,xe=t.filter(ce=>ce.isActive).length,Ne=e.length,je=e.filter(ce=>ce.status===uc.COMPLETED||ce.status===uc.APPROVED).length,$e=e.filter(ce=>ce.status===uc.IN_PROGRESS).length,ze=e.reduce((ce,Te)=>ce+Te.defects.length,0),De=e.reduce((ce,Te)=>ce+Te.defects.filter(Ce=>Ce.status==="open"||Ce.status==="in_progress").length,0);return e.reduce((ce,Te)=>ce+Te.photos.length,0),s.jsxs("div",{className:"space-y-8",children:[x&&s.jsx(gEe,{template:I||void 0,onSave:z,onCancel:()=>{y(!1),k(null)}}),N&&s.jsx(bEe,{templates:t,vehicles:f,currentUserId:(m==null?void 0:m.id)||"current-user",onCreateInspection:W,onCancel:()=>E(!1)}),b&&D&&s.jsx(xEe,{inspection:D,vehicles:f,onSave:q,onComplete:Y,onUpdateItem:J,onAddDefect:ne,onAddPhoto:re,onCancel:()=>{w(!1),P(null)}}),C&&D&&s.jsx(yEe,{inspection:D,vehicles:f,onAddSignoff:pe,onClose:()=>{j(!1),P(null)}}),s.jsx("div",{className:"ri-page-header",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"ri-page-title",children:"PDI Checklist - Home/Vehicle"}),s.jsx("p",{className:"ri-page-description",children:"Manage pre-delivery inspections and quality control for homes and vehicles"})]}),s.jsxs(Q,{className:"shadow-sm",onClick:H,children:[s.jsx(yt,{className:"h-4 w-4 mr-2"}),"New Inspection"]})]})}),s.jsxs("div",{className:"ri-stats-grid",children:[s.jsxs(he,{className:"shadow-sm border-0 bg-gradient-to-br from-blue-50 to-blue-100/50",children:[s.jsxs(ye,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(be,{className:"text-sm font-medium text-blue-900",children:"Inspections"}),s.jsx(qj,{className:"h-4 w-4 text-blue-600"})]}),s.jsxs(fe,{children:[s.jsx("div",{className:"text-2xl font-bold text-blue-900",children:Ne}),s.jsxs("p",{className:"text-xs text-blue-600 flex items-center mt-1",children:[s.jsx(tn,{className:"h-3 w-3 mr-1"}),je," completed"]})]})]}),s.jsxs(he,{className:"shadow-sm border-0 bg-gradient-to-br from-yellow-50 to-yellow-100/50",children:[s.jsxs(ye,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(be,{className:"text-sm font-medium text-yellow-900",children:"In Progress"}),s.jsx(qj,{className:"h-4 w-4 text-yellow-600"})]}),s.jsxs(fe,{children:[s.jsx("div",{className:"text-2xl font-bold text-yellow-900",children:$e}),s.jsxs("p",{className:"text-xs text-yellow-600 flex items-center mt-1",children:[s.jsx(tn,{className:"h-3 w-3 mr-1"}),"Active inspections"]})]})]}),s.jsxs(he,{className:"shadow-sm border-0 bg-gradient-to-br from-red-50 to-red-100/50",children:[s.jsxs(ye,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(be,{className:"text-sm font-medium text-red-900",children:"Open Defects"}),s.jsx(Ba,{className:"h-4 w-4 text-red-600"})]}),s.jsxs(fe,{children:[s.jsx("div",{className:"text-2xl font-bold text-red-900",children:De}),s.jsxs("p",{className:"text-xs text-red-600 flex items-center mt-1",children:[s.jsx(tn,{className:"h-3 w-3 mr-1"}),ze," total defects"]})]})]}),s.jsxs(he,{className:"shadow-sm border-0 bg-gradient-to-br from-green-50 to-green-100/50",children:[s.jsxs(ye,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(be,{className:"text-sm font-medium text-green-900",children:"Templates"}),s.jsx(e3,{className:"h-4 w-4 text-green-600"})]}),s.jsxs(fe,{children:[s.jsx("div",{className:"text-2xl font-bold text-green-900",children:ue}),s.jsxs("p",{className:"text-xs text-green-600 flex items-center mt-1",children:[s.jsx(tn,{className:"h-3 w-3 mr-1"}),xe," active"]})]})]})]}),s.jsxs(Vn,{value:p,onValueChange:g,className:"space-y-6",children:[s.jsxs(Mn,{className:"grid w-full grid-cols-2",children:[s.jsx(tt,{value:"inspections",children:"Inspections"}),s.jsx(tt,{value:"templates",children:"Templates"})]}),s.jsx(rt,{value:"inspections",children:s.jsx(vEe,{inspections:e,onCreateInspection:H,onViewInspection:$,onContinueInspection:L})}),s.jsx(rt,{value:"templates",children:s.jsx(pEe,{templates:t,onCreateTemplate:R,onEditTemplate:_,onDeleteTemplate:U,onDuplicateTemplate:F,onViewTemplate:M})})]})]})}function wEe(){return s.jsxs(ki,{children:[s.jsx(It,{path:"/",element:s.jsx(HV,{})}),s.jsx(It,{path:"/*",element:s.jsx(HV,{})})]})}function jEe(){const[t,e]=A.useState([]),[n,r]=A.useState([]),[i,a]=A.useState([]),[o,l]=A.useState(!1);A.useEffect(()=>{c()},[]);const c=()=>{const P=yr("renter-insight-commissions",[{id:"1",salesPersonId:"sales-001",dealId:"deal-001",type:In.PERCENTAGE,rate:.05,amount:6875,status:Gt.APPROVED,paidDate:new Date("2024-01-20"),notes:"Commission for Georgetown sale",customFields:{},createdAt:new Date("2024-01-18"),updatedAt:new Date("2024-01-20")},{id:"2",salesPersonId:"sales-002",dealId:"deal-002",type:In.FLAT,rate:0,amount:2500,status:Gt.PENDING,notes:"Flat commission for service contract",customFields:{},createdAt:new Date("2024-01-15"),updatedAt:new Date("2024-01-15")}]),R=yr("renter-insight-commission-rules",[{id:"1",name:"Standard Sales Commission",type:"percentage",rate:.05,isActive:!0,createdAt:new Date("2024-01-01"),updatedAt:new Date("2024-01-01")},{id:"2",name:"Service Contract Bonus",type:"flat",amount:500,isActive:!0,createdAt:new Date("2024-01-01"),updatedAt:new Date("2024-01-01")},{id:"3",name:"Tiered Sales Commission",type:"tiered",tiers:[{id:"1",ruleId:"3",minAmount:0,maxAmount:5e4,rate:.03},{id:"2",ruleId:"3",minAmount:5e4,maxAmount:1e5,rate:.05},{id:"3",ruleId:"3",minAmount:1e5,rate:.07}],isActive:!0,createdAt:new Date("2024-01-01"),updatedAt:new Date("2024-01-01")}]),_=yr("renter-insight-commission-audit",[{id:"1",commissionId:"1",userId:"user-001",userName:"Admin User",action:"created",newValue:{salesPersonId:"sales-001",dealId:"deal-001",type:In.PERCENTAGE,rate:.05,amount:6875,status:Gt.PENDING},timestamp:new Date("2024-01-18")},{id:"2",commissionId:"1",userId:"user-001",userName:"Admin User",action:"approved",previousValue:{status:Gt.PENDING},newValue:{status:Gt.APPROVED},notes:"Approved after deal verification",timestamp:new Date("2024-01-19")}]);e(P),r(R),a(_)},d=P=>{Dn("renter-insight-commissions",P)},u=P=>{Dn("renter-insight-commission-rules",P)},h=P=>{Dn("renter-insight-commission-audit",P)},f=P=>t.filter(R=>R.salesPersonId===P),m=P=>t.filter(R=>R.dealId===P),v=P=>t.find(R=>R.id===P),p=P=>n.find(R=>R.id===P),g=P=>i.filter(R=>R.commissionId===P).sort((R,_)=>_.timestamp.getTime()-R.timestamp.getTime()),x=async(P,R,_)=>{l(!0);try{const M={id:Math.random().toString(36).substr(2,9),salesPersonId:P.salesPersonId||"",dealId:P.dealId||"",type:P.type||In.PERCENTAGE,rate:P.rate||0,amount:P.amount||0,status:Gt.PENDING,notes:P.notes||"",customFields:P.customFields||{},createdAt:new Date,updatedAt:new Date},U=[...t,M];e(U),d(U);const F={id:Math.random().toString(36).substr(2,9),commissionId:M.id,userId:R,userName:_,action:"created",newValue:{...M},timestamp:new Date},z=[...i,F];return a(z),h(z),M}finally{l(!1)}},y=async(P,R,_,M,U)=>{const F=t.find(L=>L.id===P);if(!F)return null;const z={...F,...R,updatedAt:new Date},H=t.map(L=>L.id===P?z:L);e(H),d(H);const W={id:Math.random().toString(36).substr(2,9),commissionId:P,userId:_,userName:M,action:"updated",previousValue:{...F},newValue:R,notes:U,timestamp:new Date},$=[...i,W];return a($),h($),z};return{commissions:t,rules:n,auditTrail:i,loading:o,getCommissionsBySalesPerson:f,getCommissionsByDeal:m,getCommissionById:v,getRuleById:p,getAuditTrailByCommission:g,createCommission:x,updateCommission:y,approveCommission:async(P,R,_,M)=>y(P,{status:Gt.APPROVED},R,_,M),rejectCommission:async(P,R,_,M)=>y(P,{status:Gt.CANCELLED},R,_,M),markCommissionPaid:async(P,R,_,M)=>y(P,{status:Gt.PAID,paidDate:new Date},R,_,M),createRule:async P=>{l(!0);try{let R;switch(P.type){case"flat":R={id:Math.random().toString(36).substr(2,9),name:P.name||"",type:"flat",amount:P.amount||0,isActive:P.isActive??!0,createdAt:new Date,updatedAt:new Date};break;case"percentage":R={id:Math.random().toString(36).substr(2,9),name:P.name||"",type:"percentage",rate:P.rate||0,isActive:P.isActive??!0,createdAt:new Date,updatedAt:new Date};break;case"tiered":R={id:Math.random().toString(36).substr(2,9),name:P.name||"",type:"tiered",tiers:P.tiers||[],isActive:P.isActive??!0,createdAt:new Date,updatedAt:new Date};break;default:throw new Error("Invalid commission rule type")}const _=[...n,R];return r(_),u(_),R}finally{l(!1)}},updateRule:async(P,R)=>{const _=n.find(F=>F.id===P);if(!_)return null;const M={..._,...R,updatedAt:new Date},U=n.map(F=>F.id===P?M:F);return r(U),u(U),M},deleteRule:async P=>{const R=n.filter(_=>_.id!==P);r(R),u(R)},calculateCommission:(P,R)=>{const _=n.find(M=>M.id===R);if(!_)return 0;switch(_.type){case"flat":return _.amount;case"percentage":return P*_.rate;case"tiered":const U=_.tiers.find(F=>P>=F.minAmount&&(F.maxAmount===void 0||P<F.maxAmount));return U?P*U.rate:0;default:return 0}},generateCommissionReport:P=>{let R=[...t];P.startDate&&(R=R.filter(M=>new Date(M.createdAt)>=new Date(P.startDate))),P.endDate&&(R=R.filter(M=>new Date(M.createdAt)<=new Date(P.endDate))),P.salesPersonId&&(R=R.filter(M=>M.salesPersonId===P.salesPersonId)),P.status&&(R=R.filter(M=>M.status===P.status)),P.type&&(R=R.filter(M=>M.type===P.type));const _={totalCommissions:R.length,totalAmount:R.reduce((M,U)=>M+U.amount,0),pendingAmount:R.filter(M=>M.status===Gt.PENDING).reduce((M,U)=>M+U.amount,0),approvedAmount:R.filter(M=>M.status===Gt.APPROVED).reduce((M,U)=>M+U.amount,0),paidAmount:R.filter(M=>M.status===Gt.PAID).reduce((M,U)=>M+U.amount,0),byType:{flat:R.filter(M=>M.type===In.FLAT).reduce((M,U)=>M+U.amount,0),percentage:R.filter(M=>M.type===In.PERCENTAGE).reduce((M,U)=>M+U.amount,0),tiered:R.filter(M=>M.type===In.TIERED).reduce((M,U)=>M+U.amount,0)}};return{commissions:R,summary:_}},exportCommissionsToCSV:P=>{const R=["ID","Sales Person","Deal ID","Type","Rate","Amount","Status","Paid Date","Notes","Created At"],_=P.map(M=>[M.id,M.salesPersonId,M.dealId,M.type,M.rate,M.amount,M.status,M.paidDate?M.paidDate.toISOString():"",M.notes,M.createdAt.toISOString()]);return[R,..._]}}}function pse({commission:t,salesReps:e,deals:n,rules:r,onSave:i,onCancel:a}){const{toast:o}=Ot(),[l,c]=A.useState(!1),[d,u]=A.useState({salesPersonId:"",dealId:"",type:In.PERCENTAGE,rate:.05,amount:0,notes:""}),[h,f]=A.useState(""),[m,v]=A.useState(0),[p,g]=A.useState("");A.useEffect(()=>{if(t){u({...t}),g("");const w=n.find(N=>N.id===t.dealId);w&&v(w.value)}},[t,n]),A.useEffect(()=>{if(d.dealId){const w=n.find(N=>N.id===d.dealId);w&&v(w.value)}},[d.dealId,n]),A.useEffect(()=>{if(h){const w=r.find(E=>E.id===h);if(!w)return;let N=0;switch(w.type){case"flat":N=w.amount,u(I=>({...I,type:In.FLAT,rate:0,amount:N}));break;case"percentage":const E=w.rate;N=m*E,u(I=>({...I,type:In.PERCENTAGE,rate:E,amount:N}));break;case"tiered":const j=w.tiers.find(I=>m>=I.minAmount&&(I.maxAmount===void 0||m<I.maxAmount));j&&(N=m*j.rate,u(I=>({...I,type:In.TIERED,rate:j.rate,amount:N})));break}}else if(d.type===In.PERCENTAGE){const w=m*(d.rate||0);u(N=>({...N,amount:w}))}},[h,m,d.rate,d.type,r]);const x=async w=>{if(w.preventDefault(),!d.salesPersonId||!d.dealId){o({title:"Validation Error",description:"Sales rep and deal are required",variant:"destructive"});return}if(d.amount<=0){o({title:"Validation Error",description:"Commission amount must be greater than zero",variant:"destructive"});return}c(!0);try{await i(d,p),o({title:"Success",description:`Commission ${t?"updated":"created"} successfully`})}catch{o({title:"Error",description:`Failed to ${t?"update":"create"} commission`,variant:"destructive"})}finally{c(!1)}},y=w=>{f(w)},b=()=>{if(d.type===In.PERCENTAGE){const w=m*(d.rate||0);u(N=>({...N,amount:w}))}};return s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:s.jsxs(he,{className:"w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[s.jsx(ye,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx(be,{children:t?"Edit Commission":"Create Commission"}),s.jsx(Be,{children:t?"Update commission details":"Create a new commission record"})]}),s.jsx(Q,{variant:"ghost",size:"sm",onClick:a,children:s.jsx(on,{className:"h-4 w-4"})})]})}),s.jsx(fe,{children:s.jsxs("form",{onSubmit:x,className:"space-y-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"salesPersonId",children:"Sales Rep *"}),s.jsxs(Ke,{value:d.salesPersonId,onValueChange:w=>u(N=>({...N,salesPersonId:w})),children:[s.jsx(He,{children:s.jsx(Ye,{placeholder:"Select sales rep"})}),s.jsx(We,{className:"z-50",children:e.map(w=>s.jsx(le,{value:w.id,children:w.name},w.id))})]})]}),s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"dealId",children:"Deal *"}),s.jsxs(Ke,{value:d.dealId,onValueChange:w=>u(N=>({...N,dealId:w})),children:[s.jsx(He,{children:s.jsx(Ye,{placeholder:"Select deal"})}),s.jsx(We,{className:"z-50",children:n.map(w=>s.jsxs(le,{value:w.id,children:[w.name," - ",Le(w.value)]},w.id))})]})]})]}),s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"commissionRule",children:"Commission Rule"}),s.jsxs(Ke,{value:h,onValueChange:y,children:[s.jsx(He,{children:s.jsx(Ye,{placeholder:"Select rule or enter manually"})}),s.jsxs(We,{className:"z-50",children:[s.jsx(le,{value:"",children:"Manual Entry"}),r.filter(w=>w.isActive).map(w=>s.jsxs(le,{value:w.id,children:[w.name," (",w.type,")"]},w.id))]})]})]}),s.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"dealValue",children:"Deal Value"}),s.jsxs("div",{className:"relative",children:[s.jsx(Vt,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),s.jsx(Ae,{id:"dealValue",type:"number",value:m,onChange:w=>v(parseFloat(w.target.value)||0),className:"pl-10",min:"0",step:"0.01"})]})]}),s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"commissionType",children:"Commission Type"}),s.jsxs(Ke,{value:d.type,onValueChange:w=>u(N=>({...N,type:w})),disabled:!!h,children:[s.jsx(He,{children:s.jsx(Ye,{})}),s.jsxs(We,{className:"z-50",children:[s.jsx(le,{value:In.FLAT,children:"Flat"}),s.jsx(le,{value:In.PERCENTAGE,children:"Percentage"}),s.jsx(le,{value:In.TIERED,children:"Tiered"})]})]})]})]}),d.type===In.PERCENTAGE&&!h&&s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"rate",children:"Commission Rate (%)"}),s.jsxs("div",{className:"relative",children:[s.jsx(r3,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),s.jsx(Ae,{id:"rate",type:"number",value:d.rate?d.rate*100:"",onChange:w=>u(N=>({...N,rate:parseFloat(w.target.value)/100||0})),className:"pl-10",min:"0",max:"100",step:"0.01"})]})]}),d.type===In.FLAT&&!h&&s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"amount",children:"Flat Commission Amount"}),s.jsxs("div",{className:"relative",children:[s.jsx(Vt,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),s.jsx(Ae,{id:"amount",type:"number",value:d.amount||"",onChange:w=>u(N=>({...N,amount:parseFloat(w.target.value)||0})),className:"pl-10",min:"0",step:"0.01"})]})]}),!h&&d.type===In.PERCENTAGE&&s.jsx("div",{className:"flex justify-end",children:s.jsxs(Q,{type:"button",variant:"outline",onClick:b,size:"sm",children:[s.jsx(dv,{className:"h-4 w-4 mr-2"}),"Calculate"]})}),s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"commissionAmount",children:"Commission Amount"}),s.jsxs("div",{className:"relative",children:[s.jsx(Vt,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),s.jsx(Ae,{id:"commissionAmount",type:"number",value:d.amount||"",onChange:w=>u(N=>({...N,amount:parseFloat(w.target.value)||0})),className:"pl-10",min:"0",step:"0.01"})]})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"notes",children:"Commission Notes"}),s.jsx(un,{id:"notes",value:d.notes||"",onChange:w=>u(N=>({...N,notes:w.target.value})),placeholder:"Add any notes about this commission",rows:3})]}),t&&s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"auditNotes",children:"Audit Notes"}),s.jsx(un,{id:"auditNotes",value:p,onChange:w=>g(w.target.value),placeholder:"Add notes about this update (for audit trail)",rows:2})]})]}),s.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t",children:[s.jsx(Q,{type:"button",variant:"outline",onClick:a,disabled:l,children:"Cancel"}),s.jsx(Q,{type:"submit",disabled:l,children:l?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),t?"Updating...":"Creating..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Wn,{className:"h-4 w-4 mr-2"}),t?"Update":"Create"," Commission"]})})]})]})})]})})}function NEe({auditEntries:t}){const e=i=>{switch(i){case"created":return s.jsx(yt,{className:"h-4 w-4 text-blue-500"});case"updated":return s.jsx(ar,{className:"h-4 w-4 text-yellow-500"});case"approved":return s.jsx(Rn,{className:"h-4 w-4 text-green-500"});case"rejected":return s.jsx(ko,{className:"h-4 w-4 text-red-500"});case"paid":return s.jsx(Vt,{className:"h-4 w-4 text-green-500"});default:return s.jsx(a_,{className:"h-4 w-4 text-gray-500"})}},n=i=>{switch(i){case"created":return"bg-blue-50 text-blue-700 border-blue-200";case"updated":return"bg-yellow-50 text-yellow-700 border-yellow-200";case"approved":return"bg-green-50 text-green-700 border-green-200";case"rejected":return"bg-red-50 text-red-700 border-red-200";case"paid":return"bg-purple-50 text-purple-700 border-purple-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},r=i=>{if(!i.previousValue&&!i.newValue)return null;const a=[];if(i.action==="created"&&i.newValue)return s.jsx("div",{className:"text-sm text-muted-foreground",children:s.jsx("p",{children:"Commission created with initial values"})});if(i.previousValue&&i.newValue)for(const[o,l]of Object.entries(i.newValue)){const c=i.previousValue[o];c!==l&&a.push(s.jsxs("div",{className:"text-sm",children:[s.jsxs("span",{className:"font-medium capitalize",children:[o.replace(/([A-Z])/g," $1").trim(),": "]}),s.jsx("span",{className:"line-through text-red-600 mr-2",children:c}),s.jsx("span",{className:"text-green-600",children:l})]},o))}return a.length>0?s.jsx("div",{className:"space-y-1",children:a}):null};return s.jsxs(he,{className:"shadow-sm",children:[s.jsxs(ye,{children:[s.jsxs(be,{className:"flex items-center",children:[s.jsx(a_,{className:"h-5 w-5 mr-2 text-primary"}),"Audit Trail"]}),s.jsx(Be,{children:"History of changes to this commission"})]}),s.jsx(fe,{children:t.length===0?s.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[s.jsx(a_,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),s.jsx("p",{children:"No audit history available"})]}):s.jsx("div",{className:"space-y-4",children:t.map(i=>s.jsxs("div",{className:"relative pl-6",children:[s.jsx("div",{className:"absolute left-0 top-1.5",children:e(i.action)}),s.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[s.jsx(Re,{className:st("ri-badge-status",n(i.action)),children:i.action.toUpperCase()}),s.jsx("span",{className:"text-sm text-muted-foreground",children:ht(i.timestamp)})]}),s.jsxs("p",{className:"text-sm",children:[s.jsx("span",{className:"font-medium",children:i.userName})," ",i.action," this commission"]}),r(i),i.notes&&s.jsx("div",{className:"mt-2 p-2 bg-muted/30 rounded-md",children:s.jsx("p",{className:"text-sm text-muted-foreground",children:i.notes})})]},i.id))})})]})}function SEe({commission:t,salesReps:e,deals:n,auditTrail:r,onClose:i,onEdit:a,onApprove:o,onReject:l,onMarkPaid:c}){const{toast:d}=Ot(),[u,h]=A.useState("details"),[f,m]=A.useState(""),[v,p]=A.useState(!1),g=C=>{switch(C){case Gt.PENDING:return"bg-yellow-50 text-yellow-700 border-yellow-200";case Gt.APPROVED:return"bg-blue-50 text-blue-700 border-blue-200";case Gt.PAID:return"bg-green-50 text-green-700 border-green-200";case Gt.CANCELLED:return"bg-red-50 text-red-700 border-red-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},x=C=>{switch(C){case In.FLAT:return"bg-blue-50 text-blue-700 border-blue-200";case In.PERCENTAGE:return"bg-green-50 text-green-700 border-green-200";case In.TIERED:return"bg-purple-50 text-purple-700 border-purple-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},y=async()=>{p(!0);try{await o(t.id,f),m(""),d({title:"Commission Approved",description:"The commission has been approved successfully"})}catch{d({title:"Error",description:"Failed to approve commission",variant:"destructive"})}finally{p(!1)}},b=async()=>{p(!0);try{await l(t.id,f),m(""),d({title:"Commission Rejected",description:"The commission has been rejected"})}catch{d({title:"Error",description:"Failed to reject commission",variant:"destructive"})}finally{p(!1)}},w=async()=>{p(!0);try{await c(t.id,f),m(""),d({title:"Commission Marked as Paid",description:"The commission has been marked as paid"})}catch{d({title:"Error",description:"Failed to mark commission as paid",variant:"destructive"})}finally{p(!1)}},N=e.find(C=>C.id===t.salesPersonId),E=n.find(C=>C.id===t.dealId);return s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:s.jsxs(he,{className:"w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[s.jsx(ye,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx(be,{className:"text-xl",children:"Commission Details"}),s.jsxs(Be,{children:["Commission #",t.id]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsxs(Q,{onClick:()=>a(t),size:"sm",children:[s.jsx(ar,{className:"h-4 w-4 mr-2"}),"Edit Commission"]}),s.jsx(Q,{variant:"ghost",size:"sm",onClick:i,children:s.jsx(on,{className:"h-4 w-4"})})]})]})}),s.jsxs(fe,{children:[s.jsxs(Vn,{value:u,onValueChange:h,className:"space-y-4",children:[s.jsxs(Mn,{className:"grid w-full grid-cols-2",children:[s.jsx(tt,{value:"details",children:"Details"}),s.jsxs(tt,{value:"audit",children:["Audit Trail",r.length>0&&s.jsx(Re,{className:"ml-2 bg-blue-50 text-blue-700 border-blue-200",children:r.length})]})]}),s.jsxs(rt,{value:"details",className:"space-y-6",children:[s.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[s.jsx(Re,{className:st("ri-badge-status",g(t.status)),children:t.status.toUpperCase()}),s.jsx(Re,{className:st("ri-badge-status",x(t.type)),children:t.type.toUpperCase()}),s.jsx("div",{className:"ml-auto font-bold text-lg text-primary",children:Le(t.amount)})]}),s.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Sales Rep"}),s.jsx("p",{className:"font-medium",children:(N==null?void 0:N.name)||t.salesPersonId})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Deal"}),s.jsx("p",{className:"font-medium",children:(E==null?void 0:E.name)||t.dealId})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Commission Type"}),s.jsx("p",{className:"font-medium",children:t.type.charAt(0).toUpperCase()+t.type.slice(1)})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Amount"}),s.jsx("p",{className:"font-medium text-primary",children:Le(t.amount)})]}),t.type===In.PERCENTAGE&&s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Rate"}),s.jsxs("p",{className:"font-medium",children:[(t.rate*100).toFixed(2),"%"]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Created"}),s.jsx("p",{className:"font-medium",children:ht(t.createdAt)})]}),t.paidDate&&s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Paid Date"}),s.jsx("p",{className:"font-medium",children:ht(t.paidDate)})]})]}),t.notes&&s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Notes"}),s.jsx("div",{className:"mt-1 p-3 bg-muted/30 rounded-md",children:s.jsx("p",{className:"whitespace-pre-wrap",children:t.notes})})]}),(t.status===Gt.PENDING||t.status===Gt.APPROVED)&&s.jsxs("div",{className:"space-y-4 pt-4 border-t",children:[s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"actionNotes",children:"Action Notes"}),s.jsx(un,{id:"actionNotes",value:f,onChange:C=>m(C.target.value),placeholder:"Add notes about this action (for audit trail)",rows:2})]}),s.jsxs("div",{className:"flex justify-end space-x-3",children:[t.status===Gt.PENDING&&s.jsxs(s.Fragment,{children:[s.jsxs(Q,{variant:"outline",onClick:b,disabled:v,children:[s.jsx(ko,{className:"h-4 w-4 mr-2"}),"Reject"]}),s.jsxs(Q,{onClick:y,disabled:v,children:[s.jsx(Rn,{className:"h-4 w-4 mr-2"}),"Approve"]})]}),t.status===Gt.APPROVED&&s.jsxs(Q,{onClick:w,disabled:v,children:[s.jsx(Vt,{className:"h-4 w-4 mr-2"}),"Mark as Paid"]})]})]})]}),s.jsx(rt,{value:"audit",children:s.jsx(NEe,{auditEntries:r})})]}),s.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t mt-6",children:[s.jsx(Q,{variant:"outline",onClick:i,children:"Close"}),s.jsxs(Q,{onClick:()=>a(t),children:[s.jsx(ar,{className:"h-4 w-4 mr-2"}),"Edit Commission"]})]})]})]})})}function gse({rules:t,onCreateRule:e,onEditRule:n,onDeleteRule:r}){const[i,a]=A.useState(""),[o,l]=A.useState("all"),c=h=>{switch(h){case"flat":return"bg-blue-50 text-blue-700 border-blue-200";case"percentage":return"bg-green-50 text-green-700 border-green-200";case"tiered":return"bg-purple-50 text-purple-700 border-purple-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},d=t.filter(h=>{const f=h.name.toLowerCase().includes(i.toLowerCase()),m=o==="all"||h.type===o;return f&&m}),u=h=>{switch(h.type){case"flat":return`${Le(h.amount)} flat rate`;case"percentage":return`${(h.rate*100).toFixed(2)}% of deal value`;case"tiered":const f=h.tiers;return f.length===0?"No tiers defined":`${f.length} tiers, ${(f[0].rate*100).toFixed(2)}% to ${(f[f.length-1].rate*100).toFixed(2)}%`;default:return""}};return s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[s.jsxs("div",{className:"ri-search-bar flex-1",children:[s.jsx(Rr,{className:"ri-search-icon"}),s.jsx(Ae,{placeholder:"Search rules...",value:i,onChange:h=>a(h.target.value),className:"ri-search-input shadow-sm"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("select",{value:o,onChange:h=>l(h.target.value),className:"px-3 py-2 rounded-md border border-input bg-background",children:[s.jsx("option",{value:"all",children:"All Types"}),s.jsx("option",{value:"flat",children:"Flat"}),s.jsx("option",{value:"percentage",children:"Percentage"}),s.jsx("option",{value:"tiered",children:"Tiered"})]}),s.jsxs(Q,{onClick:e,className:"shadow-sm",children:[s.jsx(yt,{className:"h-4 w-4 mr-2"}),"New Rule"]})]})]}),s.jsxs(he,{className:"shadow-sm",children:[s.jsxs(ye,{children:[s.jsxs(be,{className:"text-xl",children:["Commission Rules (",d.length,")"]}),s.jsx(Be,{children:"Define how commissions are calculated for different scenarios"})]}),s.jsx(fe,{children:s.jsxs("div",{className:"space-y-4",children:[d.map(h=>s.jsxs("div",{className:"ri-table-row",children:[s.jsx("div",{className:"flex items-center space-x-4 flex-1",children:s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[s.jsx("h3",{className:"font-semibold text-foreground",children:h.name}),s.jsx(Re,{className:st("ri-badge-status",c(h.type)),children:h.type.toUpperCase()}),h.isActive?s.jsx(Re,{className:"bg-green-50 text-green-700 border-green-200",children:"ACTIVE"}):s.jsx(Re,{className:"bg-gray-50 text-gray-700 border-gray-200",children:"INACTIVE"})]}),s.jsx("div",{className:"flex items-center space-x-2 text-sm text-muted-foreground",children:h.type==="flat"?s.jsxs("span",{className:"flex items-center",children:[s.jsx(Vt,{className:"h-3 w-3 mr-1 text-blue-500"}),u(h)]}):h.type==="percentage"?s.jsxs("span",{className:"flex items-center",children:[s.jsx(r3,{className:"h-3 w-3 mr-1 text-green-500"}),u(h)]}):s.jsxs("span",{className:"flex items-center",children:[s.jsx(dv,{className:"h-3 w-3 mr-1 text-purple-500"}),u(h)]})}),h.type==="tiered"&&s.jsx("div",{className:"mt-2 grid grid-cols-3 gap-2",children:h.tiers.map((f,m)=>s.jsxs("div",{className:"text-xs p-1 bg-muted/30 rounded",children:[Le(f.minAmount),f.maxAmount?` - ${Le(f.maxAmount)}`:"+",":",s.jsxs("span",{className:"font-semibold ml-1",children:[(f.rate*100).toFixed(2),"%"]})]},f.id))})]})}),s.jsxs("div",{className:"ri-action-buttons",children:[s.jsxs(Q,{variant:"outline",size:"sm",className:"shadow-sm",onClick:()=>n(h),children:[s.jsx(ar,{className:"h-3 w-3 mr-1"}),"Edit"]}),s.jsx(Q,{variant:"outline",size:"sm",className:"shadow-sm text-red-600 hover:text-red-700",onClick:()=>r(h.id),children:s.jsx(Tr,{className:"h-3 w-3"})})]})]},h.id)),d.length===0&&s.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[s.jsx(dv,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),s.jsx("p",{children:"No commission rules found"}),s.jsx("p",{className:"text-sm",children:"Create your first rule to get started"})]})]})})]})]})}const Gh={payPeriods:["Weekly","Bi-Weekly","Monthly"],commissionTypes:["Flat","Percentage","Tiered"],ruleTypes:["Revenue","Unit","Bonus"],defaultSettings:{payPeriod:"Monthly",commissionType:"Percentage",rate:.05},salesReps:[{id:"rep-1",name:"Jamie Sales"},{id:"rep-2",name:"Morgan Closer"}],sampleRules:[{id:"rule-001",name:"5% on RV Sales",type:"Percentage",rate:.05,criteria:'vehicle.type === "RV"'}],sampleCommissions:[{id:"comm-001",repId:"rep-1",amount:1250,period:"June 2025",ruleId:"rule-001",saleAmount:25e3}]};function vse({onSubmit:t,onCancel:e}){const[n,r]=A.useState({name:"",type:Gh.defaultSettings.commissionType,rate:Gh.defaultSettings.rate,criteria:"",description:""}),i=a=>{a.preventDefault(),t(n)};return s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:s.jsxs(he,{className:"w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[s.jsx(ye,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx(be,{children:"Create Commission Rule"}),s.jsx(Be,{children:"Define a new commission calculation rule"})]}),s.jsx(Q,{variant:"ghost",size:"sm",onClick:e,children:s.jsx(on,{className:"h-4 w-4"})})]})}),s.jsx(fe,{children:s.jsxs("form",{onSubmit:i,className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"name",children:"Rule Name"}),s.jsx(Ae,{id:"name",value:n.name,onChange:a=>r({...n,name:a.target.value}),placeholder:"Enter rule name"})]}),s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"type",children:"Rule Type"}),s.jsxs(Ke,{value:n.type,onValueChange:a=>r({...n,type:a}),children:[s.jsx(He,{children:s.jsx(Ye,{placeholder:"Select rule type"})}),s.jsx(We,{children:Gh.ruleTypes.map(a=>s.jsx(le,{value:a,children:a},a))})]})]}),s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"rate",children:"Commission Rate (%)"}),s.jsx(Ae,{id:"rate",type:"number",value:n.rate*100,onChange:a=>r({...n,rate:parseFloat(a.target.value)/100}),min:"0",max:"100",step:"0.01"})]}),s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"criteria",children:"Criteria"}),s.jsx(Ae,{id:"criteria",value:n.criteria,onChange:a=>r({...n,criteria:a.target.value}),placeholder:"Enter criteria"})]}),s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"description",children:"Description"}),s.jsx(un,{id:"description",value:n.description,onChange:a=>r({...n,description:a.target.value}),placeholder:"Enter description"})]}),s.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t",children:[s.jsx(Q,{type:"button",variant:"outline",onClick:e,children:"Cancel"}),s.jsxs(Q,{type:"submit",children:[s.jsx(Wn,{className:"h-4 w-4 mr-2"}),"Create Rule"]})]})]})})]})})}function xse({salesReps:t,onGenerateReport:e,onExportCSV:n}){const{toast:r}=Ot(),[i,a]=A.useState({startDate:new Date(new Date().getFullYear(),new Date().getMonth(),1),endDate:new Date,salesPersonId:"",status:"",type:""}),[o,l]=A.useState(!1),[c,d]=A.useState(null),[u,h]=A.useState("none"),f=()=>{try{const y=e(i);d(y),r({title:"Report Generated",description:`Generated report with ${y.commissions.length} commissions`})}catch{r({title:"Error",description:"Failed to generate report",variant:"destructive"})}},m=()=>{if(c)try{const y=n(c.commissions),b=ob.unparse(y),w=new Blob([b],{type:"text/csv;charset=utf-8;"}),N=URL.createObjectURL(w),E=document.createElement("a");E.href=N,E.setAttribute("download",`commission_report_${new Date().toISOString().split("T")[0]}.csv`),document.body.appendChild(E),E.click(),document.body.removeChild(E),r({title:"Export Successful",description:"Commission report exported to CSV"})}catch{r({title:"Export Failed",description:"Failed to export report to CSV",variant:"destructive"})}},v=y=>{if(u==="none")return{"All Commissions":y};const b={};return y.forEach(w=>{let N="";switch(u){case"salesPerson":N=w.salesPersonId;break;case"status":N=w.status;break;case"type":N=w.type;break}b[N]||(b[N]=[]),b[N].push(w)}),b},p=y=>{switch(u){case"salesPerson":const b=t.find(w=>w.id===y);return b?b.name:y;case"status":return y.charAt(0).toUpperCase()+y.slice(1);case"type":return y.charAt(0).toUpperCase()+y.slice(1);default:return y}},g=y=>{switch(y){case Gt.PENDING:return"Pending";case Gt.APPROVED:return"Approved";case Gt.PAID:return"Paid";case Gt.CANCELLED:return"Cancelled";default:return y}},x=y=>{switch(y){case In.FLAT:return"Flat";case In.PERCENTAGE:return"Percentage";case In.TIERED:return"Tiered";default:return y}};return s.jsx("div",{className:"space-y-6",children:s.jsxs(he,{className:"shadow-sm",children:[s.jsx(ye,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsxs(be,{className:"flex items-center",children:[s.jsx(ms,{className:"h-5 w-5 mr-2 text-primary"}),"Commission Report Generator"]}),s.jsx(Be,{children:"Generate detailed commission reports with custom filters"})]}),s.jsxs(Q,{variant:"outline",onClick:()=>l(!o),className:"shadow-sm",children:[s.jsx(bc,{className:"h-4 w-4 mr-2"}),o?"Hide Filters":"Show Filters"]})]})}),s.jsxs(fe,{children:[o&&s.jsxs("div",{className:"space-y-4 mb-6 p-4 bg-muted/30 rounded-lg",children:[s.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"startDate",children:"Start Date"}),s.jsx(Ae,{id:"startDate",type:"date",value:i.startDate?new Date(i.startDate).toISOString().split("T")[0]:"",onChange:y=>a(b=>({...b,startDate:y.target.value?new Date(y.target.value):void 0}))})]}),s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"endDate",children:"End Date"}),s.jsx(Ae,{id:"endDate",type:"date",value:i.endDate?new Date(i.endDate).toISOString().split("T")[0]:"",onChange:y=>a(b=>({...b,endDate:y.target.value?new Date(y.target.value):void 0}))})]})]}),s.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"salesPersonId",children:"Sales Rep"}),s.jsxs(Ke,{value:i.salesPersonId||"",onValueChange:y=>a(b=>({...b,salesPersonId:y})),children:[s.jsx(He,{children:s.jsx(Ye,{placeholder:"All Sales Reps"})}),s.jsxs(We,{children:[s.jsx(le,{value:"",children:"All Sales Reps"}),t.map(y=>s.jsx(le,{value:y.id,children:y.name},y.id))]})]})]}),s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"status",children:"Status"}),s.jsxs(Ke,{value:i.status||"",onValueChange:y=>a(b=>({...b,status:y})),children:[s.jsx(He,{children:s.jsx(Ye,{placeholder:"All Statuses"})}),s.jsxs(We,{children:[s.jsx(le,{value:"",children:"All Statuses"}),s.jsx(le,{value:Gt.PENDING,children:"Pending"}),s.jsx(le,{value:Gt.APPROVED,children:"Approved"}),s.jsx(le,{value:Gt.PAID,children:"Paid"}),s.jsx(le,{value:Gt.CANCELLED,children:"Cancelled"})]})]})]}),s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"type",children:"Commission Type"}),s.jsxs(Ke,{value:i.type||"",onValueChange:y=>a(b=>({...b,type:y})),children:[s.jsx(He,{children:s.jsx(Ye,{placeholder:"All Types"})}),s.jsxs(We,{children:[s.jsx(le,{value:"",children:"All Types"}),s.jsx(le,{value:In.FLAT,children:"Flat"}),s.jsx(le,{value:In.PERCENTAGE,children:"Percentage"}),s.jsx(le,{value:In.TIERED,children:"Tiered"})]})]})]})]}),s.jsx("div",{className:"flex justify-end",children:s.jsxs(Q,{onClick:f,children:[s.jsx(ms,{className:"h-4 w-4 mr-2"}),"Generate Report"]})})]}),!o&&s.jsx("div",{className:"flex justify-end mb-6",children:s.jsxs(Q,{onClick:f,children:[s.jsx(ms,{className:"h-4 w-4 mr-2"}),"Generate Report"]})}),c&&s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[s.jsx(he,{className:"shadow-sm bg-blue-50",children:s.jsx(fe,{className:"pt-6",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-sm font-medium text-blue-700 mb-1",children:"Total Commissions"}),s.jsx("div",{className:"text-2xl font-bold text-blue-900",children:c.summary.totalCommissions}),s.jsx("div",{className:"text-sm text-blue-700 mt-1",children:Le(c.summary.totalAmount)})]})})}),s.jsx(he,{className:"shadow-sm bg-yellow-50",children:s.jsx(fe,{className:"pt-6",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-sm font-medium text-yellow-700 mb-1",children:"Pending"}),s.jsx("div",{className:"text-2xl font-bold text-yellow-900",children:Le(c.summary.pendingAmount)}),s.jsx("div",{className:"text-sm text-yellow-700 mt-1",children:"Awaiting approval"})]})})}),s.jsx(he,{className:"shadow-sm bg-green-50",children:s.jsx(fe,{className:"pt-6",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-sm font-medium text-green-700 mb-1",children:"Paid"}),s.jsx("div",{className:"text-2xl font-bold text-green-900",children:Le(c.summary.paidAmount)}),s.jsx("div",{className:"text-sm text-green-700 mt-1",children:"Commissions paid"})]})})}),s.jsx(he,{className:"shadow-sm bg-purple-50",children:s.jsx(fe,{className:"pt-6",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-sm font-medium text-purple-700 mb-1",children:"Approved"}),s.jsx("div",{className:"text-2xl font-bold text-purple-900",children:Le(c.summary.approvedAmount)}),s.jsx("div",{className:"text-sm text-purple-700 mt-1",children:"Ready for payment"})]})})})]}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx(ae,{htmlFor:"groupBy",className:"whitespace-nowrap",children:"Group By:"}),s.jsxs(Ke,{value:u,onValueChange:y=>h(y),children:[s.jsx(He,{className:"w-40",children:s.jsx(Ye,{})}),s.jsxs(We,{children:[s.jsx(le,{value:"none",children:"No Grouping"}),s.jsx(le,{value:"salesPerson",children:"Sales Rep"}),s.jsx(le,{value:"status",children:"Status"}),s.jsx(le,{value:"type",children:"Commission Type"})]})]})]}),s.jsxs(Q,{variant:"outline",onClick:m,disabled:!c,children:[s.jsx(Ha,{className:"h-4 w-4 mr-2"}),"Export CSV"]})]}),s.jsx("div",{className:"space-y-6",children:Object.entries(v(c.commissions)).map(([y,b])=>s.jsxs("div",{className:"space-y-2",children:[s.jsxs("h3",{className:"text-lg font-semibold flex items-center",children:[u==="salesPerson"&&s.jsx(Gr,{className:"h-4 w-4 mr-2 text-blue-500"}),u==="status"&&s.jsx(Zt,{className:"h-4 w-4 mr-2 text-yellow-500"}),u==="type"&&s.jsx(ms,{className:"h-4 w-4 mr-2 text-purple-500"}),p(y),s.jsxs("span",{className:"ml-2 text-sm font-normal text-muted-foreground",children:["(",b.length," commissions, ",Le(b.reduce((w,N)=>w+N.amount,0)),")"]})]}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full border-collapse",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"bg-muted/50",children:[s.jsx("th",{className:"p-2 text-left font-medium text-muted-foreground",children:"Sales Rep"}),s.jsx("th",{className:"p-2 text-left font-medium text-muted-foreground",children:"Deal"}),s.jsx("th",{className:"p-2 text-left font-medium text-muted-foreground",children:"Type"}),s.jsx("th",{className:"p-2 text-left font-medium text-muted-foreground",children:"Amount"}),s.jsx("th",{className:"p-2 text-left font-medium text-muted-foreground",children:"Status"}),s.jsx("th",{className:"p-2 text-left font-medium text-muted-foreground",children:"Created"})]})}),s.jsx("tbody",{children:b.map(w=>{const N=t.find(E=>E.id===w.salesPersonId);return s.jsxs("tr",{className:"border-b hover:bg-muted/10",children:[s.jsx("td",{className:"p-2",children:(N==null?void 0:N.name)||w.salesPersonId}),s.jsx("td",{className:"p-2",children:w.dealId}),s.jsx("td",{className:"p-2",children:x(w.type)}),s.jsx("td",{className:"p-2 font-medium",children:Le(w.amount)}),s.jsx("td",{className:"p-2",children:g(w.status)}),s.jsx("td",{className:"p-2",children:new Date(w.createdAt).toLocaleDateString()})]},w.id)})})]})})]},y))})]}),!c&&s.jsxs("div",{className:"text-center py-12 text-muted-foreground border-2 border-dashed rounded-lg",children:[s.jsx(ms,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),s.jsx("p",{children:"No report generated yet"}),s.jsx("p",{className:"text-sm",children:"Use the filters above to generate a commission report"})]})]})]})})}const wC=[{id:"sales-001",name:"John Smith",email:"john.smith@dealership.com",phone:"(555) 123-4567",territory:"North Region",isActive:!0,targets:{monthly:10,quarterly:30,annual:120}},{id:"sales-002",name:"Sarah Johnson",email:"sarah.johnson@dealership.com",phone:"(555) 987-6543",territory:"South Region",isActive:!0,targets:{monthly:12,quarterly:36,annual:144}},{id:"sales-003",name:"Mike Davis",email:"mike.davis@dealership.com",phone:"(555) 456-7890",territory:"East Region",isActive:!0,targets:{monthly:8,quarterly:24,annual:96}}],nO=[{id:"deal-001",name:"Georgetown Class A Sale - Smith Family",customerName:"John & Mary Smith",value:137500,stage:"closed_won",status:"active",createdAt:new Date("2024-01-15")},{id:"deal-002",name:"Travel Trailer - Johnson Family",customerName:"Sarah Johnson",value:75e3,stage:"closed_won",status:"active",createdAt:new Date("2024-01-10")},{id:"deal-003",name:"Service Contract - Davis",customerName:"Mike Davis",value:2500,stage:"closed_won",status:"active",createdAt:new Date("2024-01-20")}];function AEe(){const{commissions:t,rules:e,auditTrail:n,createCommission:r,updateCommission:i,approveCommission:a,rejectCommission:o,markCommissionPaid:l,createRule:c,updateRule:d,deleteRule:u,getAuditTrailByCommission:h,generateCommissionReport:f,exportCommissionsToCSV:m}=jEe(),{user:v}=Hb(),{toast:p}=Ot(),[g,x]=A.useState(""),[y,b]=A.useState("all"),[w,N]=A.useState("commissions"),[E,C]=A.useState(!1),[j,I]=A.useState(!1),[k,D]=A.useState(!1),[P,R]=A.useState(null),[_,M]=A.useState(null),U=Se=>{switch(Se){case Gt.PENDING:return"bg-yellow-50 text-yellow-700 border-yellow-200";case Gt.APPROVED:return"bg-blue-50 text-blue-700 border-blue-200";case Gt.PAID:return"bg-green-50 text-green-700 border-green-200";case Gt.CANCELLED:return"bg-red-50 text-red-700 border-red-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},F=Se=>{switch(Se){case In.FLAT:return"bg-blue-50 text-blue-700 border-blue-200";case In.PERCENTAGE:return"bg-green-50 text-green-700 border-green-200";case In.TIERED:return"bg-purple-50 text-purple-700 border-purple-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},z=Se=>{switch(Se){case Gt.PENDING:return s.jsx(gn,{className:"h-4 w-4 text-yellow-500"});case Gt.APPROVED:return s.jsx(Rn,{className:"h-4 w-4 text-blue-500"});case Gt.PAID:return s.jsx(Vt,{className:"h-4 w-4 text-green-500"});case Gt.CANCELLED:return s.jsx(ko,{className:"h-4 w-4 text-red-500"});default:return null}},H=t.filter(Se=>{const Ue=Se.salesPersonId.toLowerCase().includes(g.toLowerCase())||Se.dealId.toLowerCase().includes(g.toLowerCase())||Se.id.toLowerCase().includes(g.toLowerCase()),ot=y==="all"||Se.status===y;return Ue&&ot}),W=()=>{R(null),C(!0)},$=Se=>{R(Se),C(!0),I(!1)},L=Se=>{R(Se),I(!0)},q=async(Se,Ue)=>{try{P?(await i(P.id,Se,(v==null?void 0:v.id)||"current-user",(v==null?void 0:v.name)||"Current User",Ue),p({title:"Success",description:"Commission updated successfully"})):(await r(Se,(v==null?void 0:v.id)||"current-user",(v==null?void 0:v.name)||"Current User"),p({title:"Success",description:"Commission created successfully"})),C(!1),R(null)}catch{p({title:"Error",description:`Failed to ${P?"update":"create"} commission`,variant:"destructive"})}},Y=async(Se,Ue)=>{try{await a(Se,(v==null?void 0:v.id)||"current-user",(v==null?void 0:v.name)||"Current User",Ue),p({title:"Success",description:"Commission approved successfully"})}catch{p({title:"Error",description:"Failed to approve commission",variant:"destructive"})}},J=async(Se,Ue)=>{try{await o(Se,(v==null?void 0:v.id)||"current-user",(v==null?void 0:v.name)||"Current User",Ue),p({title:"Success",description:"Commission rejected successfully"})}catch{p({title:"Error",description:"Failed to reject commission",variant:"destructive"})}},ne=async(Se,Ue)=>{try{await l(Se,(v==null?void 0:v.id)||"current-user",(v==null?void 0:v.name)||"Current User",Ue),p({title:"Success",description:"Commission marked as paid successfully"})}catch{p({title:"Error",description:"Failed to mark commission as paid",variant:"destructive"})}},re=()=>{M(null),D(!0)},pe=Se=>{M(Se),D(!0)},ue=async Se=>{try{_?(await d(_.id,Se),p({title:"Success",description:"Commission rule updated successfully"})):(await c(Se),p({title:"Success",description:"Commission rule created successfully"})),D(!1),M(null)}catch{p({title:"Error",description:`Failed to ${_?"update":"create"} commission rule`,variant:"destructive"})}},xe=async Se=>{if(window.confirm("Are you sure you want to delete this commission rule?"))try{await u(Se),p({title:"Success",description:"Commission rule deleted successfully"})}catch{p({title:"Error",description:"Failed to delete commission rule",variant:"destructive"})}},Ne=t.length,je=t.filter(Se=>Se.status===Gt.PENDING).length,$e=t.filter(Se=>Se.status===Gt.APPROVED).length,ze=t.filter(Se=>Se.status===Gt.PAID).length,De=t.reduce((Se,Ue)=>Se+Ue.amount,0),ce=t.filter(Se=>Se.status===Gt.PENDING).reduce((Se,Ue)=>Se+Ue.amount,0),Te=t.filter(Se=>Se.status===Gt.APPROVED).reduce((Se,Ue)=>Se+Ue.amount,0),Ce=t.filter(Se=>Se.status===Gt.PAID).reduce((Se,Ue)=>Se+Ue.amount,0);return s.jsxs("div",{className:"space-y-8",children:[E&&s.jsx(pse,{commission:P||void 0,salesReps:wC,deals:nO,rules:e,onSave:q,onCancel:()=>{C(!1),R(null)}}),j&&P&&s.jsx(SEe,{commission:P,salesReps:wC,deals:nO,auditTrail:h(P.id),onClose:()=>I(!1),onEdit:$,onApprove:Y,onReject:J,onMarkPaid:ne}),k&&s.jsx(vse,{rule:_||void 0,onSave:ue,onCancel:()=>{D(!1),M(null)}}),s.jsx("div",{className:"ri-page-header",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"ri-page-title",children:"Commission Engine"}),s.jsx("p",{className:"ri-page-description",children:"Manage sales commissions and payment rules"})]}),s.jsxs(Q,{className:"shadow-sm",onClick:W,children:[s.jsx(yt,{className:"h-4 w-4 mr-2"}),"New Commission"]})]})}),s.jsxs("div",{className:"ri-stats-grid",children:[s.jsxs(he,{className:"shadow-sm border-0 bg-gradient-to-br from-blue-50 to-blue-100/50",children:[s.jsxs(ye,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(be,{className:"text-sm font-medium text-blue-900",children:"Total Commissions"}),s.jsx(Vt,{className:"h-4 w-4 text-blue-600"})]}),s.jsxs(fe,{children:[s.jsx("div",{className:"text-2xl font-bold text-blue-900",children:Le(De)}),s.jsxs("p",{className:"text-xs text-blue-600 flex items-center mt-1",children:[s.jsx(Gr,{className:"h-3 w-3 mr-1"}),Ne," commissions"]})]})]}),s.jsxs(he,{className:"shadow-sm border-0 bg-gradient-to-br from-yellow-50 to-yellow-100/50",children:[s.jsxs(ye,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(be,{className:"text-sm font-medium text-yellow-900",children:"Pending"}),s.jsx(gn,{className:"h-4 w-4 text-yellow-600"})]}),s.jsxs(fe,{children:[s.jsx("div",{className:"text-2xl font-bold text-yellow-900",children:Le(ce)}),s.jsxs("p",{className:"text-xs text-yellow-600 flex items-center mt-1",children:[s.jsx(gn,{className:"h-3 w-3 mr-1"}),je," pending approval"]})]})]}),s.jsxs(he,{className:"shadow-sm border-0 bg-gradient-to-br from-blue-50 to-blue-100/50",children:[s.jsxs(ye,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(be,{className:"text-sm font-medium text-blue-900",children:"Approved"}),s.jsx(Rn,{className:"h-4 w-4 text-blue-600"})]}),s.jsxs(fe,{children:[s.jsx("div",{className:"text-2xl font-bold text-blue-900",children:Le(Te)}),s.jsxs("p",{className:"text-xs text-blue-600 flex items-center mt-1",children:[s.jsx(Rn,{className:"h-3 w-3 mr-1"}),$e," approved"]})]})]}),s.jsxs(he,{className:"shadow-sm border-0 bg-gradient-to-br from-green-50 to-green-100/50",children:[s.jsxs(ye,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(be,{className:"text-sm font-medium text-green-900",children:"Paid"}),s.jsx(Vt,{className:"h-4 w-4 text-green-600"})]}),s.jsxs(fe,{children:[s.jsx("div",{className:"text-2xl font-bold text-green-900",children:Le(Ce)}),s.jsxs("p",{className:"text-xs text-green-600 flex items-center mt-1",children:[s.jsx(Vt,{className:"h-3 w-3 mr-1"}),ze," paid out"]})]})]})]}),s.jsxs(Vn,{value:w,onValueChange:N,className:"space-y-6",children:[s.jsxs(Mn,{className:"grid w-full grid-cols-3",children:[s.jsx(tt,{value:"commissions",children:"Commissions"}),s.jsx(tt,{value:"rules",children:"Commission Rules"}),s.jsx(tt,{value:"reports",children:"Reports"})]}),s.jsxs(rt,{value:"commissions",className:"space-y-6",children:[s.jsxs("div",{className:"flex gap-4",children:[s.jsxs("div",{className:"ri-search-bar",children:[s.jsx(Rr,{className:"ri-search-icon"}),s.jsx(Ae,{placeholder:"Search commissions...",value:g,onChange:Se=>x(Se.target.value),className:"ri-search-input shadow-sm"})]}),s.jsxs(Ke,{value:y,onValueChange:b,children:[s.jsx(He,{className:"w-40",children:s.jsx(Ye,{placeholder:"Status"})}),s.jsxs(We,{children:[s.jsx(le,{value:"all",children:"All Status"}),s.jsx(le,{value:Gt.PENDING,children:"Pending"}),s.jsx(le,{value:Gt.APPROVED,children:"Approved"}),s.jsx(le,{value:Gt.PAID,children:"Paid"}),s.jsx(le,{value:Gt.CANCELLED,children:"Cancelled"})]})]}),s.jsxs(Q,{variant:"outline",className:"shadow-sm",children:[s.jsx(bc,{className:"h-4 w-4 mr-2"}),"Filter"]}),s.jsxs(Q,{onClick:W,className:"shadow-sm",children:[s.jsx(yt,{className:"h-4 w-4 mr-2"}),"New Commission"]})]}),s.jsxs(he,{className:"shadow-sm",children:[s.jsxs(ye,{children:[s.jsx(be,{className:"text-xl",children:"Commissions"}),s.jsx(Be,{children:"Track and manage sales commissions"})]}),s.jsx(fe,{children:s.jsxs("div",{className:"space-y-4",children:[H.map(Se=>{const Ue=wC.find(at=>at.id===Se.salesPersonId),ot=nO.find(at=>at.id===Se.dealId);return s.jsxs("div",{className:"ri-table-row",children:[s.jsx("div",{className:"flex items-center space-x-4 flex-1",children:s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[s.jsxs("h3",{className:"font-semibold text-foreground",children:["Commission #",Se.id]}),s.jsx(Re,{className:st("ri-badge-status",F(Se.type)),children:Se.type.toUpperCase()}),s.jsxs(Re,{className:st("ri-badge-status",U(Se.status)),children:[z(Se.status),s.jsx("span",{className:"ml-1",children:Se.status.toUpperCase()})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm text-muted-foreground",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx(Gr,{className:"h-3 w-3 mr-2 text-blue-500"}),s.jsx("span",{className:"font-medium",children:"Sales Rep:"}),s.jsx("span",{className:"ml-1",children:(Ue==null?void 0:Ue.name)||Se.salesPersonId})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx(Vt,{className:"h-3 w-3 mr-2 text-green-500"}),s.jsx("span",{className:"font-medium",children:"Deal:"}),s.jsx("span",{className:"ml-1",children:(ot==null?void 0:ot.name)||Se.dealId})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx(Vt,{className:"h-3 w-3 mr-2 text-purple-500"}),s.jsx("span",{className:"font-medium",children:"Amount:"}),s.jsx("span",{className:"ml-1 font-bold text-primary",children:Le(Se.amount)})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx(Sn,{className:"h-3 w-3 mr-2 text-orange-500"}),s.jsx("span",{className:"font-medium",children:"Created:"}),s.jsx("span",{className:"ml-1",children:ht(Se.createdAt)})]})]}),Se.notes&&s.jsx("div",{className:"mt-2 bg-muted/30 p-2 rounded-md",children:s.jsxs("p",{className:"text-sm text-muted-foreground",children:[s.jsx("span",{className:"font-medium",children:"Notes:"})," ",Se.notes]})})]})}),s.jsxs("div",{className:"ri-action-buttons",children:[s.jsx(Q,{variant:"outline",size:"sm",className:"shadow-sm",onClick:()=>L(Se),children:"View"}),s.jsx(Q,{variant:"outline",size:"sm",className:"shadow-sm",onClick:()=>$(Se),children:"Edit"}),Se.status===Gt.PENDING&&s.jsx(Q,{variant:"outline",size:"sm",className:"shadow-sm",onClick:()=>Y(Se.id),children:"Approve"}),Se.status===Gt.APPROVED&&s.jsx(Q,{variant:"outline",size:"sm",className:"shadow-sm",onClick:()=>ne(Se.id),children:"Mark Paid"})]})]},Se.id)}),H.length===0&&s.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[s.jsx(Vt,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),s.jsx("p",{children:"No commissions found"}),s.jsx("p",{className:"text-sm",children:"Create your first commission to get started"})]})]})})]})]}),s.jsx(rt,{value:"rules",children:s.jsx(gse,{rules:e,onCreateRule:re,onEditRule:pe,onDeleteRule:xe})}),s.jsx(rt,{value:"reports",children:s.jsx(xse,{salesReps:wC,onGenerateReport:f,onExportCSV:m})})]})]})}function CEe(){const[t,e]=A.useState("overview"),[n,r]=A.useState(!1),[i,a]=A.useState(!1),[o,l]=A.useState(null),c=Gh.sampleCommissions.map(f=>{const m=Gh.salesReps.find(p=>p.id===f.repId),v=Gh.sampleRules.find(p=>p.id===f.ruleId);return{...f,repName:(m==null?void 0:m.name)||"Unknown Rep",ruleName:(v==null?void 0:v.name)||"Unknown Rule",status:"Paid"}}),d=f=>{console.log("Creating commission:",f),r(!1)},u=f=>{console.log("Creating rule:",f),a(!1),l(null)},h=f=>{l(f),a(!0)};return s.jsxs(ki,{children:[s.jsx(It,{path:"/",element:s.jsxs("div",{className:"space-y-8",children:[n&&s.jsx(pse,{onSave:d,onCancel:()=>r(!1)}),i&&s.jsx(vse,{rule:o,onSave:u,onCancel:()=>{a(!1),l(null)}}),s.jsx("div",{className:"ri-page-header",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"ri-page-title",children:"Commission Engine"}),s.jsx("p",{className:"ri-page-description",children:"Manage sales commissions and payment rules"})]}),s.jsxs(Q,{className:"shadow-sm",onClick:()=>r(!0),children:[s.jsx(yt,{className:"h-4 w-4 mr-2"}),"New Commission"]})]})}),s.jsxs(Vn,{value:t,onValueChange:e,className:"space-y-6",children:[s.jsxs(Mn,{className:"grid w-full grid-cols-3",children:[s.jsx(tt,{value:"overview",children:"Overview"}),s.jsx(tt,{value:"rules",children:"Commission Rules"}),s.jsx(tt,{value:"reports",children:"Reports"})]}),s.jsxs(rt,{value:"overview",className:"space-y-6",children:[s.jsxs("div",{className:"ri-stats-grid",children:[s.jsxs(he,{className:"shadow-sm border-0 bg-gradient-to-br from-blue-50 to-blue-100/50",children:[s.jsxs(ye,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(be,{className:"text-sm font-medium text-blue-900",children:"Total Commissions"}),s.jsx(Vt,{className:"h-4 w-4 text-blue-600"})]}),s.jsxs(fe,{children:[s.jsx("div",{className:"text-2xl font-bold text-blue-900",children:"$2,125"}),s.jsxs("p",{className:"text-xs text-blue-600 flex items-center mt-1",children:[s.jsx(Gr,{className:"h-3 w-3 mr-1"}),"2 commissions"]})]})]}),s.jsxs(he,{className:"shadow-sm border-0 bg-gradient-to-br from-green-50 to-green-100/50",children:[s.jsxs(ye,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(be,{className:"text-sm font-medium text-green-900",children:"Paid Out"}),s.jsx(Rn,{className:"h-4 w-4 text-green-600"})]}),s.jsxs(fe,{children:[s.jsx("div",{className:"text-2xl font-bold text-green-900",children:"$1,250"}),s.jsxs("p",{className:"text-xs text-green-600 flex items-center mt-1",children:[s.jsx(Rn,{className:"h-3 w-3 mr-1"}),"1 payment"]})]})]}),s.jsxs(he,{className:"shadow-sm border-0 bg-gradient-to-br from-yellow-50 to-yellow-100/50",children:[s.jsxs(ye,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(be,{className:"text-sm font-medium text-yellow-900",children:"Pending"}),s.jsx(gn,{className:"h-4 w-4 text-yellow-600"})]}),s.jsxs(fe,{children:[s.jsx("div",{className:"text-2xl font-bold text-yellow-900",children:"$875"}),s.jsxs("p",{className:"text-xs text-yellow-600 flex items-center mt-1",children:[s.jsx(gn,{className:"h-3 w-3 mr-1"}),"1 pending"]})]})]}),s.jsxs(he,{className:"shadow-sm border-0 bg-gradient-to-br from-purple-50 to-purple-100/50",children:[s.jsxs(ye,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(be,{className:"text-sm font-medium text-purple-900",children:"Active Rules"}),s.jsx(ms,{className:"h-4 w-4 text-purple-600"})]}),s.jsxs(fe,{children:[s.jsx("div",{className:"text-2xl font-bold text-purple-900",children:"3"}),s.jsxs("p",{className:"text-xs text-purple-600 flex items-center mt-1",children:[s.jsx(ms,{className:"h-3 w-3 mr-1"}),"commission rules"]})]})]})]}),s.jsxs(he,{className:"shadow-sm",children:[s.jsx(ye,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx(be,{className:"text-xl",children:"Recent Commissions"}),s.jsx(Be,{children:"Latest commission calculations and payments"})]}),s.jsx(Q,{variant:"outline",size:"sm",className:"shadow-sm",children:"View All"})]})}),s.jsx(fe,{children:s.jsxs("div",{className:"space-y-4",children:[c.map(f=>{var m,v;return s.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-accent/50 transition-colors",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("h4",{className:"font-medium",children:f.repName}),s.jsx(Re,{variant:f.status==="Paid"?"default":"secondary",children:f.status})]}),s.jsxs("p",{className:"text-sm text-muted-foreground",children:[f.ruleName," - ",f.period]}),s.jsxs("p",{className:"text-sm text-muted-foreground",children:["Sale: $",((m=f.saleAmount)==null?void 0:m.toLocaleString())||"N/A"]})]}),s.jsx("div",{className:"text-right",children:s.jsxs("div",{className:"text-lg font-semibold",children:["$",((v=f.amount)==null?void 0:v.toLocaleString())||"N/A"]})})]},f.id)}),c.length===0&&s.jsxs("div",{className:"text-center py-12 text-muted-foreground border-2 border-dashed rounded-lg",children:[s.jsx("p",{children:"No commissions recorded"}),s.jsx("p",{className:"text-sm mt-1",children:"Commissions will appear here once sales are processed"})]})]})})]})]}),s.jsx(rt,{value:"rules",children:s.jsx(gse,{rules:Gh.sampleRules,onCreateRule:()=>a(!0),onEditRule:h,onDeleteRule:f=>console.log("Delete rule:",f)})}),s.jsx(rt,{value:"reports",children:s.jsx(xse,{salesReps:Gh.salesReps,onGenerateReport:f=>console.log("Generate report:",f),onExportCSV:()=>console.log("Export CSV")})})]})]})}),s.jsx(It,{path:"/*",element:s.jsx(AEe,{})})]})}function WV(){const[t,e]=A.useState("");A.useState(null);const n=Q$.sampleUsers,r=n.filter(c=>c.name.toLowerCase().includes(t.toLowerCase())||c.email.toLowerCase().includes(t.toLowerCase())),i=c=>c.split(" ").map(d=>d.charAt(0)).join("").toUpperCase(),a=c=>{console.log("Edit user:",c)},o=c=>{console.log("Reset password for:",c)},l=c=>{const d=`/portalclient/?impersonateClientId=${c.id}`;window.open(d,"_blank")};return s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"ri-page-header",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"ri-page-title",children:"Client Portal Admin"}),s.jsx("p",{className:"ri-page-description",children:"Manage client portal access and settings"})]}),s.jsxs(Q,{children:[s.jsx(yt,{className:"h-4 w-4 mr-2"}),"Add User"]})]})}),s.jsxs("div",{className:"ri-stats-grid",children:[s.jsxs(he,{children:[s.jsxs(ye,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(be,{className:"text-sm font-medium",children:"Total Users"}),s.jsx(Lr,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsxs(fe,{children:[s.jsx("div",{className:"text-2xl font-bold",children:n.length}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:[n.filter(c=>c.status==="Active").length," active users"]})]})]}),s.jsxs(he,{children:[s.jsxs(ye,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(be,{className:"text-sm font-medium",children:"Active Users"}),s.jsx(Lr,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsxs(fe,{children:[s.jsx("div",{className:"text-2xl font-bold",children:n.filter(c=>c.status==="Active").length}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:[Math.round(n.filter(c=>c.status==="Active").length/n.length*100),"% active rate"]})]})]}),s.jsxs(he,{children:[s.jsxs(ye,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(be,{className:"text-sm font-medium",children:"Portal Features"}),s.jsx(Wa,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsxs(fe,{children:[s.jsx("div",{className:"text-2xl font-bold",children:"5"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Available modules"})]})]})]}),s.jsxs(Vn,{defaultValue:"users",children:[s.jsxs(Mn,{children:[s.jsx(tt,{value:"users",children:"Users"}),s.jsx(tt,{value:"agreements",children:"Agreements"}),s.jsx(tt,{value:"settings",children:"Settings"})]}),s.jsx(rt,{value:"users",className:"space-y-4",children:s.jsxs(he,{children:[s.jsxs(ye,{children:[s.jsx(be,{children:"Portal Users"}),s.jsx(Be,{children:"Manage client portal access and user accounts"})]}),s.jsxs(fe,{children:[s.jsxs("div",{className:"ri-search-bar mb-6",children:[s.jsx(Rr,{className:"ri-search-icon"}),s.jsx(Ae,{placeholder:"Search users by name or email...",value:t,onChange:c=>e(c.target.value),className:"ri-search-input"})]}),s.jsxs("div",{className:"space-y-4",children:[r.map(c=>s.jsx("div",{className:"ri-table-row",children:s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("div",{className:"h-10 w-10 rounded-full bg-primary/10 flex items-center justify-center",children:s.jsx("span",{className:"text-sm font-medium text-primary",children:i(c.name)})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h4",{className:"font-semibold",children:c.name}),s.jsxs("p",{className:"text-sm text-muted-foreground",children:[c.email,"  ",c.phone,"  Last login: ",new Date(c.updatedAt).toLocaleDateString()]})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(Re,{className:c.status==="Active"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800",children:c.status}),s.jsxs(Q,{variant:"outline",size:"sm",onClick:()=>a(c.id),children:[s.jsx(ar,{className:"h-4 w-4 mr-2"}),"Edit"]}),s.jsxs(Q,{variant:"outline",size:"sm",onClick:()=>o(c.email),children:[s.jsx(EJ,{className:"h-4 w-4 mr-2"}),"Reset Password"]}),s.jsxs(Q,{variant:"outline",size:"sm",onClick:()=>l(c),children:[s.jsx(Wr,{className:"h-4 w-4 mr-2"}),"Proxy as Client"]})]})]})},c.id)),r.length===0&&s.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[s.jsx(Lr,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),n.length===0?s.jsxs(s.Fragment,{children:[s.jsx("p",{children:"No portal users found"}),s.jsx("p",{className:"text-sm",children:"Users will appear here once they're added to the system"})]}):s.jsxs(s.Fragment,{children:[s.jsx("p",{children:"No users found matching your search"}),s.jsx("p",{className:"text-sm",children:"Try adjusting your search criteria"})]})]})]})]})]})}),s.jsx(rt,{value:"agreements",className:"space-y-4",children:s.jsx(ane,{})}),s.jsx(rt,{value:"settings",className:"space-y-4",children:s.jsxs(he,{children:[s.jsxs(ye,{children:[s.jsx(be,{children:"Portal Settings"}),s.jsx(Be,{children:"Configure client portal features and appearance"})]}),s.jsx(fe,{children:s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-semibold",children:"Portal Features"}),s.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[s.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium",children:"Loan Management"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Allow clients to view loan details and payment history"})]}),s.jsx(Re,{className:"bg-green-100 text-green-800",children:"Enabled"})]}),s.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium",children:"Agreement Signing"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Enable electronic signature capabilities"})]}),s.jsx(Re,{className:"bg-green-100 text-green-800",children:"Enabled"})]}),s.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium",children:"Service Requests"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Allow clients to submit service requests"})]}),s.jsx(Re,{className:"bg-gray-100 text-gray-800",children:"Disabled"})]}),s.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium",children:"Document Library"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Provide access to important documents"})]}),s.jsx(Re,{className:"bg-green-100 text-green-800",children:"Enabled"})]})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-semibold",children:"Appearance"}),s.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium",children:"Portal Theme"}),s.jsx("div",{className:"mt-1",children:s.jsxs("select",{className:"w-full p-2 border rounded-md",children:[s.jsx("option",{children:"Light Theme"}),s.jsx("option",{children:"Dark Theme"}),s.jsx("option",{children:"Auto (System)"})]})})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium",children:"Brand Color"}),s.jsxs("div",{className:"mt-1 flex items-center space-x-2",children:[s.jsx("input",{type:"color",value:"#3b82f6",className:"w-12 h-10 border rounded"}),s.jsx("span",{className:"text-sm text-muted-foreground",children:"#3b82f6"})]})]})]})]})]})})]})})]})]})}function EEe(){return s.jsxs(ki,{children:[s.jsx(It,{path:"/",element:s.jsx(WV,{})}),s.jsx(It,{path:"/*",element:s.jsx(WV,{})})]})}function yse(){const[t,e]=A.useState([]),[n,r]=A.useState([]),[i,a]=A.useState(!1);A.useEffect(()=>{o()},[]);const o=()=>{const w=yr("renter-insight-invoices",[{id:"1",customerId:"cust-1",number:"INV-2024-001",items:[{id:"1",description:"2024 Forest River Georgetown",quantity:1,unitPrice:125e3,total:125e3},{id:"2",description:"Extended Warranty",quantity:1,unitPrice:2500,total:2500}],subtotal:127500,tax:10200,total:137700,status:Xt.PAID,dueDate:new Date("2024-02-15"),paidDate:new Date("2024-01-20"),paymentMethod:"Credit Card",notes:"Payment received via Zego",customFields:{},createdAt:new Date("2024-01-15"),updatedAt:new Date("2024-01-20")},{id:"2",customerId:"cust-2",number:"INV-2024-002",items:[{id:"3",description:"Service - AC Repair",quantity:1,unitPrice:620,total:620}],subtotal:620,tax:49.6,total:669.6,status:Xt.SENT,dueDate:new Date("2024-02-20"),notes:"Service invoice for AC repair",customFields:{},createdAt:new Date("2024-01-12"),updatedAt:new Date("2024-01-18")}]),N=yr("renter-insight-payments",[{id:"1",invoiceId:"1",amount:137700,method:ld.CREDIT_CARD,status:Vu.COMPLETED,transactionId:"txn_1234567890",processedDate:new Date("2024-01-20"),notes:"Processed via Zego payment gateway",customFields:{},createdAt:new Date("2024-01-20"),updatedAt:new Date("2024-01-20")}]);e(w),r(N)},l=w=>{Dn("renter-insight-invoices",w)},c=w=>{Dn("renter-insight-payments",w)},d=w=>t.filter(N=>N.customerId===w),u=w=>t.find(N=>N.id===w),h=w=>n.filter(N=>N.invoiceId===w),f=async w=>{a(!0);try{const N={id:Math.random().toString(36).substr(2,9),customerId:w.customerId||"",number:w.number||"",items:w.items||[],subtotal:w.subtotal||0,tax:w.tax||0,total:w.total||0,status:w.status||Xt.DRAFT,dueDate:w.dueDate||new Date,notes:w.notes||"",customFields:w.customFields||{},createdAt:new Date,updatedAt:new Date},E=[...t,N];return e(E),l(E),N}finally{a(!1)}},m=async(w,N)=>{const E=t.map(C=>C.id===w?{...C,...N,updatedAt:new Date}:C);e(E),l(E)},v=async w=>{const N=t.filter(E=>E.id!==w);e(N),l(N)},p=async(w,N)=>{const E=t.map(C=>C.id===w?{...C,status:N,updatedAt:new Date}:C);e(E),l(E)},g=async(w,N)=>{const E=t.map(C=>C.id===w?{...C,status:Xt.PAID,paidDate:new Date,paymentMethod:N,updatedAt:new Date}:C);e(E),l(E)};return{invoices:t,payments:n,loading:i,getInvoicesByCustomerId:d,getInvoiceById:u,getPaymentsByInvoiceId:h,createInvoice:f,updateInvoice:m,deleteInvoice:v,updateInvoiceStatus:p,markInvoiceAsPaid:g,sendInvoice:async w=>{const N=t.map(E=>E.id===w?{...E,status:Xt.SENT,updatedAt:new Date}:E);e(N),l(N)},recordPayment:async w=>{a(!0);try{const N={id:Math.random().toString(36).substr(2,9),invoiceId:w.invoiceId||"",amount:w.amount||0,method:w.method||ld.CREDIT_CARD,status:w.status||Vu.COMPLETED,transactionId:w.transactionId,processedDate:w.processedDate||new Date,notes:w.notes||"",customFields:w.customFields||{},createdAt:new Date,updatedAt:new Date},E=[...n,N];return r(E),c(E),N.status===Vu.COMPLETED&&await g(N.invoiceId,N.method),N}finally{a(!1)}},sendPaymentRequest:async w=>(await p(w,Xt.SENT),await new Promise(N=>setTimeout(N,1e3)),!0)}}const Xm={sampleInvoices:[{id:"inv-001",customerName:"John Doe",dueDate:"2024-09-01",status:"Paid",totalAmount:1250,recurrence:"Monthly",paymentMethod:"ACH",lineItems:[{description:"Base Rent",quantity:1,unitPrice:1e3},{description:"Utilities",quantity:1,unitPrice:250}]},{id:"inv-002",customerName:"Jane Smith",dueDate:"2024-09-10",status:"Overdue",totalAmount:1450,recurrence:"One-Time",paymentMethod:"Credit Card",lineItems:[{description:"Home Sale Commission",quantity:1,unitPrice:1200},{description:"Document Fees",quantity:1,unitPrice:250}]}],formDefaults:{customerId:"",dueDate:"",recurrence:"Monthly",notes:"",paymentMethod:"ACH",lineItems:[{description:"",quantity:1,unitPrice:0}]},statusOptions:["Draft","Unpaid","Paid","Overdue","Cancelled"],paymentMethods:["ACH","Credit Card","Check","Cash"],csvFields:["Invoice ID","Customer","Amount","Status","Due Date","Recurrence"]};function PEe({invoice:t,onSave:e,onCancel:n}){const{toast:r}=Ot(),{leads:i}=uh(),[a,o]=A.useState(!1),[l,c]=A.useState({customerId:(t==null?void 0:t.customerId)||Xm.formDefaults.customerId,number:(t==null?void 0:t.number)||"",dueDate:(t==null?void 0:t.dueDate)||Xm.formDefaults.dueDate,status:(t==null?void 0:t.status)||Xt.DRAFT,recurrence:(t==null?void 0:t.recurrence)||Xm.formDefaults.recurrence,notes:(t==null?void 0:t.notes)||Xm.formDefaults.notes,paymentMethod:(t==null?void 0:t.paymentMethod)||Xm.formDefaults.paymentMethod,lineItems:(t==null?void 0:t.lineItems)||Xm.formDefaults.lineItems,items:(t==null?void 0:t.items)||[...Xm.formDefaults.lineItems],subtotal:(t==null?void 0:t.subtotal)||0,tax:(t==null?void 0:t.tax)||0,total:(t==null?void 0:t.total)||0}),[d,u]=A.useState({description:"",quantity:1,unitPrice:0,total:0}),[h,f]=A.useState(.08);A.useEffect(()=>{t&&(c({...t,dueDate:new Date(t.dueDate)}),t.subtotal>0&&f(t.tax/t.subtotal))},[t]),A.useEffect(()=>{const g=d.quantity||1,x=d.unitPrice||0;u(y=>({...y,total:g*x}))},[d.quantity,d.unitPrice]),A.useEffect(()=>{if(l.items&&l.items.length>0){const g=l.items.reduce((b,w)=>b+w.total,0),x=g*h,y=g+x;c(b=>({...b,subtotal:g,tax:x,total:y}))}else c(g=>({...g,subtotal:0,tax:0,total:0}))},[l.items,h]);const m=async g=>{if(g.preventDefault(),!l.customerId||!l.number||!l.dueDate){r({title:"Validation Error",description:"Please fill in all required fields",variant:"destructive"});return}if(!l.items||l.items.length===0){r({title:"Validation Error",description:"Please add at least one item to the invoice",variant:"destructive"});return}o(!0);try{await e(l),r({title:"Success",description:`Invoice ${t?"updated":"created"} successfully`})}catch{r({title:"Error",description:`Failed to ${t?"update":"create"} invoice`,variant:"destructive"})}finally{o(!1)}},v=()=>{if(!d.description||!d.unitPrice){r({title:"Validation Error",description:"Description and unit price are required",variant:"destructive"});return}const g={id:Math.random().toString(36).substr(2,9),description:d.description||"",quantity:d.quantity||1,unitPrice:d.unitPrice||0,total:d.total||0};c(x=>({...x,items:[...x.items||[],g]})),u({description:"",quantity:1,unitPrice:0,total:0})},p=g=>{c(x=>{var y;return{...x,items:((y=x.items)==null?void 0:y.filter(b=>b.id!==g))||[]}})};return s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:s.jsxs(he,{className:"w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[s.jsx(ye,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx(be,{children:t?"Edit Invoice":"Create Invoice"}),s.jsx(Be,{children:t?"Update invoice details":"Create a new invoice for your customer"})]}),s.jsx(Q,{variant:"ghost",size:"sm",onClick:n,children:s.jsx(on,{className:"h-4 w-4"})})]})}),s.jsx(fe,{children:s.jsxs("form",{onSubmit:m,className:"space-y-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-semibold",children:"Invoice Information"}),s.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"customerId",children:"Customer *"}),s.jsxs(Ke,{value:l.customerId,onValueChange:g=>c(x=>({...x,customerId:g})),children:[s.jsx(He,{children:s.jsx(Ye,{placeholder:"Select customer"})}),s.jsx(We,{children:i.map(g=>s.jsxs(le,{value:g.id,children:[g.firstName," ",g.lastName]},g.id))})]})]}),s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"invoiceNumber",children:"Invoice Number *"}),s.jsx(Ae,{id:"invoiceNumber",value:l.number,onChange:g=>c(x=>({...x,number:g.target.value})),placeholder:"e.g., INV-2024-001"})]})]}),s.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"dueDate",children:"Due Date *"}),s.jsx(Ae,{id:"dueDate",type:"date",value:l.dueDate?new Date(l.dueDate).toISOString().split("T")[0]:"",onChange:g=>c(x=>({...x,dueDate:g.target.value?new Date(g.target.value):void 0}))})]}),s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"status",children:"Status"}),s.jsxs(Ke,{value:l.status,onValueChange:g=>c(x=>({...x,status:g})),children:[s.jsx(He,{children:s.jsx(Ye,{})}),s.jsxs(We,{children:[s.jsx(le,{value:Xt.DRAFT,children:"Draft"}),s.jsx(le,{value:Xt.SENT,children:"Sent"}),s.jsx(le,{value:Xt.VIEWED,children:"Viewed"}),s.jsx(le,{value:Xt.PAID,children:"Paid"}),s.jsx(le,{value:Xt.OVERDUE,children:"Overdue"}),s.jsx(le,{value:Xt.CANCELLED,children:"Cancelled"})]})]})]})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h3",{className:"text-lg font-semibold",children:"Invoice Items"}),s.jsxs(Q,{type:"button",onClick:v,size:"sm",children:[s.jsx(yt,{className:"h-4 w-4 mr-2"}),"Add Item"]})]}),s.jsx(he,{className:"border-dashed",children:s.jsxs(fe,{className:"pt-6",children:[s.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[s.jsxs("div",{className:"md:col-span-2",children:[s.jsx(ae,{htmlFor:"description",children:"Description *"}),s.jsx(Ae,{id:"description",value:d.description,onChange:g=>u(x=>({...x,description:g.target.value})),placeholder:"e.g., Service Labor"})]}),s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"quantity",children:"Quantity"}),s.jsx(Ae,{id:"quantity",type:"number",min:"1",value:d.quantity,onChange:g=>u(x=>({...x,quantity:parseInt(g.target.value)||1}))})]}),s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"unitPrice",children:"Unit Price"}),s.jsx(Ae,{id:"unitPrice",type:"number",step:"0.01",min:"0",value:d.unitPrice,onChange:g=>u(x=>({...x,unitPrice:parseFloat(g.target.value)||0}))})]})]}),s.jsxs("div",{className:"flex justify-between items-center mt-4",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-sm font-medium",children:"Total: "}),s.jsx("span",{className:"font-bold",children:Le(d.total||0)})]}),s.jsx(Q,{type:"button",onClick:v,children:"Add Item"})]})]})}),s.jsx("div",{className:"space-y-3",children:l.items&&l.items.length>0?l.items.map(g=>s.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"font-medium",children:g.description}),s.jsxs("p",{className:"text-sm text-muted-foreground",children:["Quantity: ",g.quantity,"  ",Le(g.unitPrice)]})]}),s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("span",{className:"font-bold",children:Le(g.total)}),s.jsx(Q,{type:"button",variant:"ghost",size:"sm",onClick:()=>p(g.id),children:s.jsx(Tr,{className:"h-4 w-4 text-red-500"})})]})]},g.id)):s.jsxs("div",{className:"text-center py-6 text-muted-foreground border-2 border-dashed rounded-lg",children:[s.jsx(Ma,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),s.jsx("p",{children:"No items added yet"}),s.jsx("p",{className:"text-sm",children:"Add items to this invoice"})]})})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-semibold",children:"Invoice Totals"}),s.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"taxRate",children:"Tax Rate (%)"}),s.jsx(Ae,{id:"taxRate",type:"number",step:"0.01",min:"0",max:"100",value:h*100,onChange:g=>f(parseFloat(g.target.value)/100||0)})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Subtotal:"}),s.jsx("span",{children:Le(l.subtotal||0)})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsxs("span",{children:["Tax (",(h*100).toFixed(2),"%):"]}),s.jsx("span",{children:Le(l.tax||0)})]}),s.jsxs("div",{className:"flex justify-between font-bold text-lg",children:[s.jsx("span",{children:"Total:"}),s.jsx("span",{children:Le(l.total||0)})]})]})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-semibold",children:"Additional Information"}),s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"notes",children:"Notes"}),s.jsx(un,{id:"notes",value:l.notes,onChange:g=>c(x=>({...x,notes:g.target.value})),placeholder:"Add any additional notes about this invoice",rows:3})]})]}),s.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t",children:[s.jsx(Q,{type:"button",variant:"outline",onClick:n,disabled:a,children:"Cancel"}),s.jsx(Q,{type:"submit",disabled:a,children:a?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),t?"Updating...":"Creating..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Wn,{className:"h-4 w-4 mr-2"}),t?"Update":"Create"," Invoice"]})})]})]})})]})})}function TEe({invoiceId:t,invoiceTotal:e,remainingBalance:n,onSave:r,onCancel:i}){const{toast:a}=Ot(),[o,l]=A.useState(!1),[c,d]=A.useState({invoiceId:t,amount:n,method:ld.CREDIT_CARD,status:Vu.COMPLETED,processedDate:new Date,notes:""}),u=async h=>{if(h.preventDefault(),!c.amount||c.amount<=0){a({title:"Validation Error",description:"Payment amount must be greater than zero",variant:"destructive"});return}if(c.amount>n){a({title:"Validation Error",description:"Payment amount cannot exceed the remaining balance",variant:"destructive"});return}l(!0);try{await r(c),a({title:"Success",description:"Payment recorded successfully"})}catch{a({title:"Error",description:"Failed to record payment",variant:"destructive"})}finally{l(!1)}};return s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:s.jsxs(he,{className:"w-full max-w-md",children:[s.jsx(ye,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsxs(be,{className:"flex items-center",children:[s.jsx(ga,{className:"h-5 w-5 mr-2 text-primary"}),"Record Payment"]}),s.jsxs(Be,{children:["Record a payment for invoice #",t]})]}),s.jsx(Q,{variant:"ghost",size:"sm",onClick:i,children:s.jsx(on,{className:"h-4 w-4"})})]})}),s.jsx(fe,{children:s.jsxs("form",{onSubmit:u,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"amount",children:"Payment Amount *"}),s.jsxs("div",{className:"relative",children:[s.jsx(Vt,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),s.jsx(Ae,{id:"amount",type:"number",step:"0.01",min:"0.01",max:n,value:c.amount,onChange:h=>d(f=>({...f,amount:parseFloat(h.target.value)||0})),className:"pl-10"})]}),s.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Remaining balance: ",Le(n)]})]}),s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"method",children:"Payment Method *"}),s.jsxs(Ke,{value:c.method,onValueChange:h=>d(f=>({...f,method:h})),children:[s.jsx(He,{children:s.jsx(Ye,{})}),s.jsxs(We,{children:[s.jsx(le,{value:ld.CREDIT_CARD,children:"Credit Card"}),s.jsx(le,{value:ld.BANK_TRANSFER,children:"Bank Transfer"}),s.jsx(le,{value:ld.CASH,children:"Cash"}),s.jsx(le,{value:ld.CHECK,children:"Check"}),s.jsx(le,{value:ld.FINANCING,children:"Financing"})]})]})]}),s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"status",children:"Payment Status *"}),s.jsxs(Ke,{value:c.status,onValueChange:h=>d(f=>({...f,status:h})),children:[s.jsx(He,{children:s.jsx(Ye,{})}),s.jsxs(We,{children:[s.jsx(le,{value:Vu.COMPLETED,children:"Completed"}),s.jsx(le,{value:Vu.PENDING,children:"Pending"}),s.jsx(le,{value:Vu.PROCESSING,children:"Processing"})]})]})]}),s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"processedDate",children:"Payment Date *"}),s.jsx(Ae,{id:"processedDate",type:"date",value:c.processedDate?new Date(c.processedDate).toISOString().split("T")[0]:"",onChange:h=>d(f=>({...f,processedDate:h.target.value?new Date(h.target.value):void 0}))})]}),s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"transactionId",children:"Transaction ID"}),s.jsx(Ae,{id:"transactionId",value:c.transactionId||"",onChange:h=>d(f=>({...f,transactionId:h.target.value})),placeholder:"e.g., txn_1234567890"})]}),s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"notes",children:"Notes"}),s.jsx(un,{id:"notes",value:c.notes||"",onChange:h=>d(f=>({...f,notes:h.target.value})),placeholder:"Add any notes about this payment",rows:3})]}),s.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[s.jsx(Q,{type:"button",variant:"outline",onClick:i,disabled:o,children:"Cancel"}),s.jsx(Q,{type:"submit",disabled:o,children:o?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Recording..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Wn,{className:"h-4 w-4 mr-2"}),"Record Payment"]})})]})]})})]})})}function IEe({invoice:t,payments:e,onClose:n,onEdit:r,onSendPaymentRequest:i,onRecordPayment:a}){const{toast:o}=Ot(),[l,c]=A.useState("details"),[d,u]=A.useState(!1),[h,f]=A.useState(!1),m=E=>{switch(E){case Xt.DRAFT:return"bg-gray-50 text-gray-700 border-gray-200";case Xt.SENT:return"bg-blue-50 text-blue-700 border-blue-200";case Xt.VIEWED:return"bg-yellow-50 text-yellow-700 border-yellow-200";case Xt.PAID:return"bg-green-50 text-green-700 border-green-200";case Xt.OVERDUE:return"bg-red-50 text-red-700 border-red-200";case Xt.CANCELLED:return"bg-gray-50 text-gray-700 border-gray-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},v=E=>{switch(E){case"completed":return s.jsx(Rn,{className:"h-4 w-4 text-green-500"});case"pending":return s.jsx(gn,{className:"h-4 w-4 text-yellow-500"});case"processing":return s.jsx(gn,{className:"h-4 w-4 text-blue-500"});case"failed":return s.jsx(ko,{className:"h-4 w-4 text-red-500"});case"refunded":return s.jsx(mm,{className:"h-4 w-4 text-purple-500"});default:return null}},p=E=>{switch(E){case"credit_card":return s.jsx(ga,{className:"h-4 w-4 text-blue-500"});case"bank_transfer":return s.jsx(Vt,{className:"h-4 w-4 text-green-500"});case"cash":return s.jsx(Vt,{className:"h-4 w-4 text-green-500"});case"check":return s.jsx(Ma,{className:"h-4 w-4 text-blue-500"});case"financing":return s.jsx(Vt,{className:"h-4 w-4 text-purple-500"});default:return s.jsx(Vt,{className:"h-4 w-4 text-gray-500"})}},g=()=>{try{const E=new Bt;if(E.setFontSize(20),E.text("INVOICE",105,15,{align:"center"}),E.setFontSize(12),E.text(`Invoice #: ${t.number}`,20,30),E.text(`Date: ${ht(t.createdAt)}`,20,40),E.text(`Due Date: ${ht(t.dueDate)}`,20,50),E.text(`Status: ${t.status.toUpperCase()}`,20,60),E.setFontSize(14),E.text("Bill To:",20,75),E.setFontSize(12),E.text(`Customer ID: ${t.customerId}`,20,85),E.setFontSize(14),E.text("Invoice Items",20,105),E.autoTable({startY:110,head:[["Description","Quantity","Unit Price","Total"]],body:t.items.map(C=>[C.description,C.quantity,Le(C.unitPrice),Le(C.total)]),foot:[["","","Subtotal:",Le(t.subtotal)],["","","Tax:",Le(t.tax)],["","","Total:",Le(t.total)]],theme:"striped",headStyles:{fillColor:[66,139,202]}}),t.notes){const C=E.lastAutoTable.finalY||110;E.setFontSize(14),E.text("Notes",20,C+20),E.setFontSize(12);const j=E.splitTextToSize(t.notes,170);E.text(j,20,C+30)}E.save(`invoice-${t.number}.pdf`),o({title:"PDF Generated",description:"Invoice PDF has been downloaded"})}catch(E){console.error("Error generating PDF:",E),o({title:"Error",description:"Failed to generate PDF",variant:"destructive"})}},x=async()=>{if(i){u(!0);try{await i(t.id),o({title:"Payment Request Sent",description:"Payment request has been sent to the customer"})}catch{o({title:"Error",description:"Failed to send payment request",variant:"destructive"})}finally{u(!1)}}},y=async E=>{if(a)try{await a(E),f(!1)}catch(C){throw C}},b=e.filter(E=>E.invoiceId===t.id),w=b.reduce((E,C)=>E+C.amount,0),N=t.total-w;return s.jsxs("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:[h&&s.jsx(TEe,{invoiceId:t.id,invoiceTotal:t.total,remainingBalance:N,onSave:y,onCancel:()=>f(!1)}),s.jsxs(he,{className:"w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[s.jsx(ye,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsxs(be,{className:"text-xl",children:["Invoice #",t.number]}),s.jsx(Be,{children:"Invoice details and payment information"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsxs(Q,{onClick:()=>r(t),size:"sm",children:[s.jsx(ar,{className:"h-4 w-4 mr-2"}),"Edit Invoice"]}),s.jsx(Q,{variant:"ghost",size:"sm",onClick:n,children:s.jsx(on,{className:"h-4 w-4"})})]})]})}),s.jsxs(fe,{children:[s.jsxs(Vn,{value:l,onValueChange:c,className:"space-y-4",children:[s.jsxs(Mn,{className:"grid w-full grid-cols-3",children:[s.jsx(tt,{value:"details",children:"Details"}),s.jsxs(tt,{value:"payments",children:["Payments",b.length>0&&s.jsx(Re,{className:"ml-2 bg-green-50 text-green-700 border-green-200",children:b.length})]}),s.jsx(tt,{value:"history",children:"History"})]}),s.jsxs(rt,{value:"details",className:"space-y-6",children:[s.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[s.jsx(Re,{className:st("ri-badge-status",m(t.status)),children:t.status.toUpperCase()}),t.paidDate&&s.jsxs(Re,{className:"bg-green-50 text-green-700 border-green-200",children:["PAID ON ",ht(t.paidDate)]}),t.status===Xt.OVERDUE&&s.jsx(Re,{className:"bg-red-50 text-red-700 border-red-200",children:"OVERDUE"})]}),s.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Customer"}),s.jsx("p",{className:"font-medium",children:t.customerId})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Invoice Number"}),s.jsx("p",{className:"font-medium",children:t.number})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Created Date"}),s.jsx("p",{className:"font-medium",children:ht(t.createdAt)})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Due Date"}),s.jsx("p",{className:"font-medium",children:ht(t.dueDate)})]}),t.paidDate&&s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Paid Date"}),s.jsx("p",{className:"font-medium",children:ht(t.paidDate)})]}),t.paymentMethod&&s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Payment Method"}),s.jsx("p",{className:"font-medium",children:t.paymentMethod})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Invoice Items"}),s.jsx("div",{className:"space-y-3",children:t.items.map((E,C)=>s.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("h4",{className:"font-medium",children:E.description}),s.jsxs("p",{className:"text-sm text-muted-foreground",children:["Quantity: ",E.quantity,"  ",Le(E.unitPrice)]})]}),s.jsx("div",{className:"text-right",children:s.jsx("div",{className:"font-bold text-lg",children:Le(E.total)})})]},E.id))})]}),s.jsx("div",{className:"bg-muted/30 p-4 rounded-lg",children:s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Subtotal:"}),s.jsx("span",{children:Le(t.subtotal)})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Tax:"}),s.jsx("span",{children:Le(t.tax)})]}),s.jsxs("div",{className:"flex justify-between text-lg font-bold border-t pt-2",children:[s.jsx("span",{children:"Total:"}),s.jsx("span",{children:Le(t.total)})]}),b.length>0&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex justify-between text-green-600",children:[s.jsx("span",{children:"Paid:"}),s.jsx("span",{children:Le(w)})]}),s.jsxs("div",{className:"flex justify-between font-bold",children:[s.jsx("span",{children:"Balance Due:"}),s.jsx("span",{children:Le(N)})]})]})]})}),t.notes&&s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Notes"}),s.jsx("div",{className:"mt-1 p-3 bg-muted/30 rounded-md",children:s.jsx("p",{className:"text-sm",children:t.notes})})]})]}),s.jsxs(rt,{value:"payments",className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h3",{className:"text-lg font-semibold",children:"Payment History"}),s.jsx("div",{className:"flex space-x-2",children:t.status!==Xt.PAID&&t.status!==Xt.CANCELLED&&s.jsxs(s.Fragment,{children:[s.jsxs(Q,{onClick:x,disabled:d,size:"sm",variant:"outline",children:[s.jsx(Do,{className:"h-4 w-4 mr-2"}),d?"Sending...":"Send Payment Request"]}),a&&N>0&&s.jsxs(Q,{onClick:()=>f(!0),size:"sm",children:[s.jsx(yt,{className:"h-4 w-4 mr-2"}),"Record Payment"]})]})})]}),b.length>0?s.jsxs("div",{className:"space-y-4",children:[b.map(E=>s.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[s.jsxs("h4",{className:"font-medium",children:["Payment #",E.id.substring(0,8)]}),s.jsx(Re,{className:E.status==="completed"?"bg-green-50 text-green-700 border-green-200":E.status==="pending"?"bg-yellow-50 text-yellow-700 border-yellow-200":E.status==="processing"?"bg-blue-50 text-blue-700 border-blue-200":E.status==="failed"?"bg-red-50 text-red-700 border-red-200":E.status==="refunded"?"bg-purple-50 text-purple-700 border-purple-200":"bg-gray-50 text-gray-700 border-gray-200",children:s.jsxs("span",{className:"flex items-center",children:[v(E.status),s.jsx("span",{className:"ml-1",children:E.status.toUpperCase()})]})})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm text-muted-foreground",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx(Sn,{className:"h-3 w-3 mr-1 text-blue-500"}),s.jsx("span",{className:"font-medium",children:"Date:"}),s.jsx("span",{className:"ml-1",children:ht(E.processedDate)})]}),s.jsxs("div",{className:"flex items-center",children:[p(E.method),s.jsx("span",{className:"font-medium ml-1",children:"Method:"}),s.jsx("span",{className:"ml-1",children:E.method.replace("_"," ").replace(/\b\w/g,C=>C.toUpperCase())})]}),E.transactionId&&s.jsxs("div",{className:"flex items-center",children:[s.jsx(Ma,{className:"h-3 w-3 mr-1 text-purple-500"}),s.jsx("span",{className:"font-medium",children:"Transaction ID:"}),s.jsx("span",{className:"ml-1 font-mono text-xs",children:E.transactionId})]})]}),E.notes&&s.jsx("p",{className:"text-sm text-muted-foreground mt-2 bg-muted/20 p-2 rounded-md",children:E.notes})]}),s.jsx("div",{className:"text-right",children:s.jsx("div",{className:"font-bold text-lg text-green-600",children:Le(E.amount)})})]},E.id)),s.jsx("div",{className:"bg-muted/30 p-4 rounded-lg",children:s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"font-medium",children:"Invoice Total:"}),s.jsx("span",{children:Le(t.total)})]}),s.jsxs("div",{className:"flex justify-between text-green-700",children:[s.jsx("span",{className:"font-medium",children:"Total Paid:"}),s.jsx("span",{children:Le(w)})]}),s.jsxs("div",{className:"flex justify-between font-bold border-t pt-2",children:[s.jsx("span",{className:N>0?"text-red-700":"text-green-700",children:"Balance Due:"}),s.jsx("span",{className:N>0?"text-red-700":"text-green-700",children:Le(N)})]})]})})]}):s.jsxs("div",{className:"text-center py-8 text-muted-foreground border-2 border-dashed rounded-lg",children:[s.jsx(ga,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),s.jsx("p",{children:"No payments recorded for this invoice"}),t.status!==Xt.PAID&&t.status!==Xt.CANCELLED&&a&&s.jsxs(Q,{onClick:()=>f(!0),className:"mt-4",size:"sm",children:[s.jsx(yt,{className:"h-4 w-4 mr-2"}),"Record Payment"]})]}),s.jsxs(he,{className:"bg-blue-50 border-blue-200",children:[s.jsxs(ye,{className:"pb-2",children:[s.jsx(be,{className:"text-lg text-blue-800",children:"Zego Payment Integration"}),s.jsx(Be,{className:"text-blue-700",children:"Secure payment processing for your customers"})]}),s.jsx(fe,{children:s.jsxs("div",{className:"space-y-3 text-blue-700",children:[s.jsx("p",{className:"text-sm",children:"When you send a payment request, your customer will receive an email with a secure link to make their payment online."}),s.jsx("p",{className:"text-sm",children:"Payments are processed securely through Zego's payment gateway, supporting credit cards, ACH transfers, and more."}),s.jsx("p",{className:"text-sm font-medium",children:"Processing fee: 2.9% + $0.30 per transaction"})]})})]})]}),s.jsxs(rt,{value:"history",className:"space-y-6",children:[s.jsx("h3",{className:"text-lg font-semibold",children:"Invoice History"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"relative pl-6 pb-6 border-l-2 border-muted",children:[s.jsx("div",{className:"absolute left-[-8px] top-0 w-4 h-4 rounded-full bg-blue-500"}),s.jsx("div",{className:"font-medium",children:"Invoice Created"}),s.jsx("div",{className:"text-sm text-muted-foreground",children:ht(t.createdAt)})]}),t.status!==Xt.DRAFT&&s.jsxs("div",{className:"relative pl-6 pb-6 border-l-2 border-muted",children:[s.jsx("div",{className:"absolute left-[-8px] top-0 w-4 h-4 rounded-full bg-yellow-500"}),s.jsx("div",{className:"font-medium",children:"Invoice Sent"}),s.jsx("div",{className:"text-sm text-muted-foreground",children:ht(t.updatedAt)})]}),t.status===Xt.VIEWED&&s.jsxs("div",{className:"relative pl-6 pb-6 border-l-2 border-muted",children:[s.jsx("div",{className:"absolute left-[-8px] top-0 w-4 h-4 rounded-full bg-purple-500"}),s.jsx("div",{className:"font-medium",children:"Invoice Viewed by Customer"}),s.jsx("div",{className:"text-sm text-muted-foreground",children:ht(t.updatedAt)})]}),t.status===Xt.PAID&&t.paidDate&&s.jsxs("div",{className:"relative pl-6",children:[s.jsx("div",{className:"absolute left-[-8px] top-0 w-4 h-4 rounded-full bg-green-500"}),s.jsx("div",{className:"font-medium",children:"Payment Received"}),s.jsx("div",{className:"text-sm text-muted-foreground",children:ht(t.paidDate)})]}),t.status===Xt.OVERDUE&&s.jsxs("div",{className:"relative pl-6",children:[s.jsx("div",{className:"absolute left-[-8px] top-0 w-4 h-4 rounded-full bg-red-500"}),s.jsx("div",{className:"font-medium",children:"Invoice Overdue"}),s.jsx("div",{className:"text-sm text-muted-foreground",children:ht(t.dueDate)})]}),t.status===Xt.CANCELLED&&s.jsxs("div",{className:"relative pl-6",children:[s.jsx("div",{className:"absolute left-[-8px] top-0 w-4 h-4 rounded-full bg-gray-500"}),s.jsx("div",{className:"font-medium",children:"Invoice Cancelled"}),s.jsx("div",{className:"text-sm text-muted-foreground",children:ht(t.updatedAt)})]})]})]})]}),s.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t mt-6",children:[s.jsx(Q,{variant:"outline",onClick:n,children:"Close"}),s.jsxs(Q,{variant:"outline",onClick:g,children:[s.jsx(s3,{className:"h-4 w-4 mr-2"}),"Print PDF"]}),s.jsxs("div",{className:"flex space-x-2",children:[t.status===Xt.DRAFT&&s.jsxs(Q,{children:[s.jsx(Do,{className:"h-4 w-4 mr-2"}),"Send Invoice"]}),t.status!==Xt.PAID&&t.status!==Xt.CANCELLED&&s.jsxs(s.Fragment,{children:[s.jsxs(Q,{onClick:x,disabled:d,variant:"outline",children:[s.jsx(Do,{className:"h-4 w-4 mr-2"}),d?"Sending...":"Request Payment"]}),a&&N>0&&s.jsxs(Q,{onClick:()=>f(!0),children:[s.jsx(ga,{className:"h-4 w-4 mr-2"}),"Record Payment"]})]})]})]})]})]})]})}function DEe({payments:t,onViewPaymentDetails:e}){const{toast:n}=Ot(),[r,i]=A.useState(""),[a,o]=A.useState("all"),[l,c]=A.useState("all"),[d,u]=A.useState("all"),h=C=>{switch(C){case"completed":return"bg-green-50 text-green-700 border-green-200";case"pending":return"bg-yellow-50 text-yellow-700 border-yellow-200";case"processing":return"bg-blue-50 text-blue-700 border-blue-200";case"failed":return"bg-red-50 text-red-700 border-red-200";case"refunded":return"bg-purple-50 text-purple-700 border-purple-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},f=C=>{switch(C){case"completed":return s.jsx(Rn,{className:"h-4 w-4 text-green-500"});case"pending":return s.jsx(gn,{className:"h-4 w-4 text-yellow-500"});case"processing":return s.jsx(gn,{className:"h-4 w-4 text-blue-500"});case"failed":return s.jsx(ko,{className:"h-4 w-4 text-red-500"});case"refunded":return s.jsx(Ma,{className:"h-4 w-4 text-purple-500"});default:return null}},m=C=>{switch(C){case"credit_card":return"Credit Card";case"bank_transfer":return"Bank Transfer";case"cash":return"Cash";case"check":return"Check";case"financing":return"Financing";default:return C}},v=C=>{switch(C){case"credit_card":return s.jsx(ga,{className:"h-4 w-4 text-blue-500"});case"bank_transfer":return s.jsx(Ma,{className:"h-4 w-4 text-green-500"});case"cash":return s.jsx(Ma,{className:"h-4 w-4 text-green-500"});case"check":return s.jsx(Ma,{className:"h-4 w-4 text-blue-500"});case"financing":return s.jsx(Ma,{className:"h-4 w-4 text-purple-500"});default:return s.jsx(Ma,{className:"h-4 w-4 text-gray-500"})}},p=t.filter(C=>{const j=C.invoiceId.toLowerCase().includes(r.toLowerCase())||C.id.toLowerCase().includes(r.toLowerCase())||C.transactionId&&C.transactionId.toLowerCase().includes(r.toLowerCase()),I=a==="all"||C.status===a,k=l==="all"||C.method===l;let D=!0;const P=new Date,R=C.processedDate;if(d==="today")D=R.toDateString()===P.toDateString();else if(d==="this_week"){const _=new Date(P);_.setDate(P.getDate()-P.getDay());const M=new Date(_);M.setDate(_.getDate()+6),D=R>=_&&R<=M}else d==="this_month"&&(D=R.getMonth()===P.getMonth()&&R.getFullYear()===P.getFullYear());return j&&I&&k&&D}),g=()=>{const j=[["ID","Invoice ID","Amount","Method","Status","Transaction ID","Date","Notes"].join(","),...p.map(P=>[P.id,P.invoiceId,P.amount.toFixed(2),P.method,P.status,P.transactionId||"",P.processedDate.toISOString().split("T")[0],P.notes||""].join(","))].join(`
`),I=new Blob([j],{type:"text/csv;charset=utf-8;"}),k=URL.createObjectURL(I),D=document.createElement("a");D.href=k,D.setAttribute("download","payment_history.csv"),document.body.appendChild(D),D.click(),document.body.removeChild(D),n({title:"Export Successful",description:"Payment history exported to CSV"})},x=t.length,y=t.reduce((C,j)=>C+j.amount,0),b=t.filter(C=>C.status==="completed").length,w=t.filter(C=>C.status==="pending"||C.status==="processing").length,N=t.filter(C=>C.status==="failed").length,E=t.reduce((C,j)=>{const I=j.method;return C[I]||(C[I]=0),j.status==="completed"&&(C[I]+=j.amount),C},{});return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[s.jsxs(he,{className:"shadow-sm border-0 bg-gradient-to-br from-blue-50 to-blue-100/50",children:[s.jsxs(ye,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(be,{className:"text-sm font-medium text-blue-900",children:"Total Payments"}),s.jsx(ga,{className:"h-4 w-4 text-blue-600"})]}),s.jsxs(fe,{children:[s.jsx("div",{className:"text-2xl font-bold text-blue-900",children:x}),s.jsxs("p",{className:"text-xs text-blue-600 flex items-center mt-1",children:[Le(y)," processed"]})]})]}),s.jsxs(he,{className:"shadow-sm border-0 bg-gradient-to-br from-green-50 to-green-100/50",children:[s.jsxs(ye,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(be,{className:"text-sm font-medium text-green-900",children:"Completed"}),s.jsx(Rn,{className:"h-4 w-4 text-green-600"})]}),s.jsxs(fe,{children:[s.jsx("div",{className:"text-2xl font-bold text-green-900",children:b}),s.jsxs("p",{className:"text-xs text-green-600 flex items-center mt-1",children:[(b/x*100||0).toFixed(1),"% success rate"]})]})]}),s.jsxs(he,{className:"shadow-sm border-0 bg-gradient-to-br from-yellow-50 to-yellow-100/50",children:[s.jsxs(ye,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(be,{className:"text-sm font-medium text-yellow-900",children:"Pending"}),s.jsx(gn,{className:"h-4 w-4 text-yellow-600"})]}),s.jsxs(fe,{children:[s.jsx("div",{className:"text-2xl font-bold text-yellow-900",children:w}),s.jsx("p",{className:"text-xs text-yellow-600 flex items-center mt-1",children:"Awaiting processing"})]})]}),s.jsxs(he,{className:"shadow-sm border-0 bg-gradient-to-br from-red-50 to-red-100/50",children:[s.jsxs(ye,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(be,{className:"text-sm font-medium text-red-900",children:"Failed"}),s.jsx(ko,{className:"h-4 w-4 text-red-600"})]}),s.jsxs(fe,{children:[s.jsx("div",{className:"text-2xl font-bold text-red-900",children:N}),s.jsxs("p",{className:"text-xs text-red-600 flex items-center mt-1",children:[(N/x*100||0).toFixed(1),"% failure rate"]})]})]})]}),s.jsxs(he,{className:"shadow-sm",children:[s.jsxs(ye,{children:[s.jsx(be,{className:"text-lg",children:"Payment Methods"}),s.jsx(Be,{children:"Breakdown of payments by method"})]}),s.jsx(fe,{children:s.jsxs("div",{className:"grid gap-3 md:grid-cols-3",children:[Object.entries(E).map(([C,j])=>s.jsxs("div",{className:"p-4 border rounded-lg",children:[s.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[v(C),s.jsx("span",{className:"font-medium",children:m(C)})]}),s.jsx("div",{className:"text-2xl font-bold text-primary",children:Le(j)}),s.jsxs("p",{className:"text-sm text-muted-foreground",children:[t.filter(I=>I.method===C&&I.status==="completed").length," payments"]})]},C)),Object.keys(E).length===0&&s.jsx("div",{className:"col-span-3 text-center py-8 text-muted-foreground",children:s.jsx("p",{children:"No payment data available"})})]})})]}),s.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[s.jsxs("div",{className:"relative flex-1",children:[s.jsx(Rr,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),s.jsx(Ae,{placeholder:"Search payments...",value:r,onChange:C=>i(C.target.value),className:"pl-10"})]}),s.jsxs(Ke,{value:a,onValueChange:o,children:[s.jsx(He,{className:"w-[150px]",children:s.jsx(Ye,{placeholder:"Status"})}),s.jsxs(We,{children:[s.jsx(le,{value:"all",children:"All Status"}),s.jsx(le,{value:"completed",children:"Completed"}),s.jsx(le,{value:"pending",children:"Pending"}),s.jsx(le,{value:"processing",children:"Processing"}),s.jsx(le,{value:"failed",children:"Failed"}),s.jsx(le,{value:"refunded",children:"Refunded"})]})]}),s.jsxs(Ke,{value:l,onValueChange:c,children:[s.jsx(He,{className:"w-[150px]",children:s.jsx(Ye,{placeholder:"Method"})}),s.jsxs(We,{children:[s.jsx(le,{value:"all",children:"All Methods"}),s.jsx(le,{value:"credit_card",children:"Credit Card"}),s.jsx(le,{value:"bank_transfer",children:"Bank Transfer"}),s.jsx(le,{value:"cash",children:"Cash"}),s.jsx(le,{value:"check",children:"Check"}),s.jsx(le,{value:"financing",children:"Financing"})]})]}),s.jsxs(Ke,{value:d,onValueChange:u,children:[s.jsx(He,{className:"w-[150px]",children:s.jsx(Ye,{placeholder:"Date"})}),s.jsxs(We,{children:[s.jsx(le,{value:"all",children:"All Dates"}),s.jsx(le,{value:"today",children:"Today"}),s.jsx(le,{value:"this_week",children:"This Week"}),s.jsx(le,{value:"this_month",children:"This Month"})]})]}),s.jsxs(Q,{variant:"outline",children:[s.jsx(bc,{className:"h-4 w-4 mr-2"}),"More Filters"]})]}),s.jsxs(he,{className:"shadow-sm",children:[s.jsx(ye,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx(be,{children:"Payment History"}),s.jsx(Be,{children:"Track and manage customer payments"})]}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsxs(Q,{variant:"outline",size:"sm",onClick:g,children:[s.jsx(Ha,{className:"h-4 w-4 mr-2"}),"Export"]}),s.jsxs(Q,{variant:"outline",size:"sm",children:[s.jsx(s3,{className:"h-4 w-4 mr-2"}),"Print"]})]})]})}),s.jsx(fe,{children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full border-collapse",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"bg-muted/50",children:[s.jsx("th",{className:"p-3 text-left font-medium text-muted-foreground",children:"Invoice"}),s.jsx("th",{className:"p-3 text-left font-medium text-muted-foreground",children:"Amount"}),s.jsx("th",{className:"p-3 text-left font-medium text-muted-foreground",children:"Method"}),s.jsx("th",{className:"p-3 text-left font-medium text-muted-foreground",children:"Status"}),s.jsx("th",{className:"p-3 text-left font-medium text-muted-foreground",children:"Date"}),s.jsx("th",{className:"p-3 text-left font-medium text-muted-foreground",children:"Transaction ID"}),s.jsx("th",{className:"p-3 text-left font-medium text-muted-foreground",children:"Actions"})]})}),s.jsxs("tbody",{children:[p.map(C=>s.jsxs("tr",{className:"border-b hover:bg-muted/10",children:[s.jsx("td",{className:"p-3",children:s.jsxs("div",{className:"font-medium",children:["#",C.invoiceId.substring(0,8)]})}),s.jsx("td",{className:"p-3 font-medium",children:Le(C.amount)}),s.jsx("td",{className:"p-3",children:s.jsxs("div",{className:"flex items-center space-x-1",children:[v(C.method),s.jsx("span",{children:m(C.method)})]})}),s.jsx("td",{className:"p-3",children:s.jsxs(Re,{className:st("flex items-center space-x-1",h(C.status)),children:[f(C.status),s.jsx("span",{children:C.status.charAt(0).toUpperCase()+C.status.slice(1)})]})}),s.jsx("td",{className:"p-3",children:ht(C.processedDate)}),s.jsx("td",{className:"p-3",children:s.jsx("span",{className:"font-mono text-xs",children:C.transactionId?C.transactionId:"-"})}),s.jsx("td",{className:"p-3",children:s.jsx("div",{className:"flex space-x-2",children:s.jsx(Q,{variant:"ghost",size:"sm",onClick:()=>e==null?void 0:e(C),children:"View"})})})]},C.id)),p.length===0&&s.jsx("tr",{children:s.jsxs("td",{colSpan:7,className:"p-8 text-center text-muted-foreground",children:[s.jsx(ga,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),s.jsx("p",{children:"No payments found matching your filters"})]})})]})]})})})]})]})}function GV(){const{invoices:t,payments:e,createInvoice:n,updateInvoice:r,deleteInvoice:i,updateInvoiceStatus:a,sendInvoice:o,sendPaymentRequest:l,recordPayment:c}=yse(),{toast:d}=Ot(),[u,h]=A.useState(""),[f,m]=A.useState("all"),[v,p]=A.useState("invoices"),[g,x]=A.useState(!1),[y,b]=A.useState(!1),[w,N]=A.useState(null),E=_=>{switch(_){case Xt.DRAFT:return"bg-gray-50 text-gray-700 border-gray-200";case Xt.SENT:return"bg-blue-50 text-blue-700 border-blue-200";case Xt.VIEWED:return"bg-yellow-50 text-yellow-700 border-yellow-200";case Xt.PAID:return"bg-green-50 text-green-700 border-green-200";case Xt.OVERDUE:return"bg-red-50 text-red-700 border-red-200";case Xt.CANCELLED:return"bg-gray-50 text-gray-700 border-gray-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},C=t.filter(_=>_.number.toLowerCase().includes(u.toLowerCase())||_.customerId.toLowerCase().includes(u.toLowerCase())).filter(_=>f==="all"||_.status===f),j=()=>{N(null),x(!0)},I=_=>{N(_),x(!0),b(!1)},k=_=>{N(_),b(!0)},D=async _=>{try{w?(await r(w.id,_),d({title:"Success",description:"Invoice updated successfully"})):(await n(_),d({title:"Success",description:"Invoice created successfully"})),x(!1),N(null)}catch{d({title:"Error",description:`Failed to ${w?"update":"create"} invoice`,variant:"destructive"})}},P=async _=>{try{return await l(_),!0}catch(M){throw console.error("Error sending payment request:",M),M}},R=async _=>{try{return await c(_),d({title:"Success",description:"Payment recorded successfully"}),!0}catch(M){throw d({title:"Error",description:"Failed to record payment",variant:"destructive"}),M}};return s.jsxs("div",{className:"space-y-8",children:[g&&s.jsx(PEe,{invoice:w||void 0,onSave:D,onCancel:()=>{x(!1),N(null)}}),y&&w&&s.jsx(IEe,{invoice:w,payments:e.filter(_=>_.invoiceId===w.id),onClose:()=>b(!1),onEdit:I,onSendPaymentRequest:P,onRecordPayment:R}),s.jsx("div",{className:"ri-page-header",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"ri-page-title",children:"Invoice & Payments"}),s.jsx("p",{className:"ri-page-description",children:"Manage invoices and process payments via Zego integration"})]}),s.jsxs(Q,{className:"shadow-sm",onClick:j,children:[s.jsx(yt,{className:"h-4 w-4 mr-2"}),"New Invoice"]})]})}),s.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[s.jsxs(he,{className:"shadow-sm border-0 bg-gradient-to-br from-blue-50 to-blue-100/50",children:[s.jsxs(ye,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(be,{className:"text-sm font-medium text-blue-900",children:"Total Invoices"}),s.jsx(Ma,{className:"h-4 w-4 text-blue-600"})]}),s.jsxs(fe,{children:[s.jsx("div",{className:"text-2xl font-bold text-blue-900",children:t.length}),s.jsxs("p",{className:"text-xs text-blue-600 flex items-center mt-1",children:[s.jsx(tn,{className:"h-3 w-3 mr-1"}),"All invoices"]})]})]}),s.jsxs(he,{className:"shadow-sm border-0 bg-gradient-to-br from-orange-50 to-orange-100/50",children:[s.jsxs(ye,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(be,{className:"text-sm font-medium text-orange-900",children:"Outstanding"}),s.jsx(Vt,{className:"h-4 w-4 text-orange-600"})]}),s.jsxs(fe,{children:[s.jsx("div",{className:"text-2xl font-bold text-orange-900",children:Le(t.filter(_=>_.status!=="Paid").reduce((_,M)=>_+M.totalAmount,0))}),s.jsxs("p",{className:"text-xs text-orange-600 flex items-center mt-1",children:[s.jsx(gn,{className:"h-3 w-3 mr-1"}),Le(t.filter(_=>_.status==="Overdue").reduce((_,M)=>_+M.totalAmount,0))," overdue"]})]})]}),s.jsxs(he,{className:"shadow-sm border-0 bg-gradient-to-br from-green-50 to-green-100/50",children:[s.jsxs(ye,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(be,{className:"text-sm font-medium text-green-900",children:"Paid This Month"}),s.jsx(Ma,{className:"h-4 w-4 text-green-600"})]}),s.jsxs(fe,{children:[s.jsx("div",{className:"text-2xl font-bold text-green-900",children:Le(t.filter(_=>_.status===Xt.PAID).reduce((_,M)=>_+M.total,0))}),s.jsxs("p",{className:"text-xs text-green-600 flex items-center mt-1",children:[s.jsx(tn,{className:"h-3 w-3 mr-1"}),"Revenue collected"]})]})]}),s.jsxs(he,{className:"shadow-sm border-0 bg-gradient-to-br from-purple-50 to-purple-100/50",children:[s.jsxs(ye,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(be,{className:"text-sm font-medium text-purple-900",children:"Payment Success Rate"}),s.jsx(ga,{className:"h-4 w-4 text-purple-600"})]}),s.jsxs(fe,{children:[s.jsx("div",{className:"text-2xl font-bold text-purple-900",children:"98.5%"}),s.jsxs("p",{className:"text-xs text-purple-600 flex items-center mt-1",children:[s.jsx(Rn,{className:"h-3 w-3 mr-1"}),e.filter(_=>_.status==="completed").length," successful payments"]})]})]})]}),s.jsxs(he,{className:"shadow-sm border-0 bg-gradient-to-br from-blue-50 to-blue-100/50",children:[s.jsxs(ye,{children:[s.jsxs(be,{className:"flex items-center space-x-2 text-blue-900",children:[s.jsx(ga,{className:"h-5 w-5 text-blue-600"}),s.jsx("span",{children:"Zego Payment Integration"})]}),s.jsx(Be,{className:"text-blue-700",children:"Seamlessly process payments and send payment requests to customers"})]}),s.jsx(fe,{children:s.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[s.jsxs("div",{className:"text-center p-4 bg-white/50 rounded-lg",children:[s.jsx("div",{className:"text-2xl font-bold text-blue-600",children:"99.9%"}),s.jsx("p",{className:"text-sm text-blue-700",children:"Uptime"})]}),s.jsxs("div",{className:"text-center p-4 bg-white/50 rounded-lg",children:[s.jsx("div",{className:"text-2xl font-bold text-blue-600",children:"2.9%"}),s.jsx("p",{className:"text-sm text-blue-700",children:"Processing Fee"})]}),s.jsxs("div",{className:"text-center p-4 bg-white/50 rounded-lg",children:[s.jsx("div",{className:"text-2xl font-bold text-blue-600",children:"24/7"}),s.jsx("p",{className:"text-sm text-blue-700",children:"Support"})]})]})})]}),s.jsxs(Vn,{value:v,onValueChange:p,className:"space-y-6",children:[s.jsxs(Mn,{className:"grid w-full grid-cols-2",children:[s.jsxs(tt,{value:"invoices",className:"flex items-center",children:[s.jsx(Ma,{className:"h-4 w-4 mr-2"}),"Invoices"]}),s.jsxs(tt,{value:"payments",className:"flex items-center",children:[s.jsx(ga,{className:"h-4 w-4 mr-2"}),"Payments"]})]}),s.jsxs(rt,{value:"invoices",children:[s.jsxs("div",{className:"flex gap-4",children:[s.jsxs("div",{className:"ri-search-bar",children:[s.jsx(Rr,{className:"ri-search-icon"}),s.jsx(Ae,{placeholder:"Search invoices...",value:u,onChange:_=>h(_.target.value),className:"ri-search-input shadow-sm"})]}),s.jsxs(Ke,{value:f,onValueChange:m,children:[s.jsx(He,{className:"w-40",children:s.jsx(Ye,{placeholder:"Status"})}),s.jsxs(We,{children:[s.jsx(le,{value:"all",children:"All Status"}),s.jsx(le,{value:Xt.DRAFT,children:"Draft"}),s.jsx(le,{value:Xt.SENT,children:"Sent"}),s.jsx(le,{value:Xt.VIEWED,children:"Viewed"}),s.jsx(le,{value:Xt.PAID,children:"Paid"}),s.jsx(le,{value:Xt.OVERDUE,children:"Overdue"}),s.jsx(le,{value:Xt.CANCELLED,children:"Cancelled"})]})]}),s.jsxs(Q,{variant:"outline",className:"shadow-sm",children:[s.jsx(bc,{className:"h-4 w-4 mr-2"}),"Filter"]})]}),s.jsxs(he,{className:"shadow-sm",children:[s.jsxs(ye,{children:[s.jsx(be,{className:"text-xl",children:"Invoices"}),s.jsx(Be,{children:"Manage invoices and track payments"})]}),s.jsx(fe,{children:s.jsxs("div",{className:"space-y-4",children:[C.map(_=>s.jsxs("div",{className:"ri-table-row",children:[s.jsx("div",{className:"flex items-center space-x-4 flex-1",children:s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[s.jsx("h3",{className:"font-semibold text-foreground",children:_.number}),s.jsx(Re,{className:st("ri-badge-status",E(_.status)),children:_.status.toUpperCase()})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm text-muted-foreground",children:[s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Customer:"}),s.jsx("span",{className:"ml-1",children:_.customerId})]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Total:"}),s.jsx("span",{className:"ml-1 font-bold text-primary",children:Le(_.total)})]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Due Date:"}),s.jsx("span",{className:"ml-1",children:ht(_.dueDate)})]}),_.paidDate&&s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Paid Date:"}),s.jsx("span",{className:"ml-1",children:ht(_.paidDate)})]})]}),s.jsxs("div",{className:"mt-2 bg-muted/30 p-2 rounded-md",children:[s.jsxs("p",{className:"text-sm text-muted-foreground",children:[_.items.length," item(s) - ",_.notes]}),_.paymentMethod&&s.jsxs("p",{className:"text-sm text-muted-foreground",children:[s.jsx("span",{className:"font-medium",children:"Payment Method:"})," ",_.paymentMethod]})]})]})}),s.jsxs("div",{className:"ri-action-buttons",children:[s.jsxs(Q,{variant:"outline",size:"sm",className:"shadow-sm",onClick:()=>k(_),children:[s.jsx(Wr,{className:"h-3 w-3 mr-1"}),"View"]}),s.jsx(Q,{variant:"outline",size:"sm",className:"shadow-sm",onClick:()=>I(_),children:"Edit"}),s.jsxs(Q,{variant:"outline",size:"sm",className:"shadow-sm",children:[s.jsx(Ha,{className:"h-3 w-3 mr-1"}),"PDF"]}),_.status!==Xt.PAID&&s.jsxs(Q,{variant:"outline",size:"sm",className:"shadow-sm",onClick:()=>P(_.id),children:[s.jsx(Do,{className:"h-3 w-3 mr-1"}),"Send Payment Request"]})]})]},_.id)),C.length===0&&s.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[s.jsx(Ma,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),s.jsx("p",{children:"No invoices found"}),s.jsx("p",{className:"text-sm",children:"Create your first invoice to get started"})]})]})})]})]}),s.jsx(rt,{value:"payments",children:s.jsx(DEe,{payments:e,onViewPaymentDetails:_=>{const M=t.find(U=>U.id===_.invoiceId);M&&(N(M),b(!0),setTimeout(()=>{const U=document.querySelector('[role="tablist"]');if(U){const F=Array.from(U.children).find(z=>{var H;return(H=z.textContent)==null?void 0:H.includes("Payments")});F&&F.click()}},100))}})})]})]})}function kEe(){return s.jsxs(ki,{children:[s.jsx(It,{path:"/",element:s.jsx(GV,{})}),s.jsx(It,{path:"/*",element:s.jsx(GV,{})})]})}const us={branding:{logoUrl:"https://ajwaujikksxupqwatpfa.supabase.co/storage/v1/object/public/website-assets/11111111-1111-1111-1111-111111111111/branding/logoUrl-1752730074646.png",primaryColor:"#3b82f6",secondaryColor:"#64748b",fontFamily:"Inter",sideMenuColor:"#1e293b",portalName:"Customer Portal",portalLogo:null,fontOptions:[{value:"Inter",label:"Inter"},{value:"Roboto",label:"Roboto"},{value:"Open Sans",label:"Open Sans"},{value:"Montserrat",label:"Montserrat"},{value:"Lato",label:"Lato"},{value:"Poppins",label:"Poppins"},{value:"Source Sans Pro",label:"Source Sans Pro"},{value:"Oswald",label:"Oswald"}]},labelOverrides:{platformTypes:[{value:"rv",label:"RV Dealership"},{value:"mh",label:"Manufactured Housing"},{value:"both",label:"Both RV & Manufactured Housing"}],defaultLabels:{general:{vehicle:"Home/RV",customer:"Customer",deal:"Deal",quote:"Quote",service:"Service",inventory:"Inventory"},crm:{lead:"Lead",prospect:"Prospect",contact:"Contact",activity:"Activity",source:"Source"},inventory:{vin:"VIN",make:"Make",model:"Model",year:"Year",type:"Type",price:"Price",cost:"Cost",features:"Features"},sales:{salesperson:"Sales Rep",commission:"Commission",deal_stage:"Deal Stage",close_date:"Close Date",financing:"Financing"},service:{technician:"Technician",service_ticket:"Service Ticket",parts:"Parts",labor:"Labor",warranty:"Warranty"}}},customFields:{modules:["crm","inventory","quotes","agreements","service","delivery","invoices"],customFieldDefaults:{moduleSectionMap:{crm:["Lead Information","Contact Details","Preferences","Notes"],inventory:["Vehicle Details","Specifications","Pricing","Features"],quotes:["Quote Details","Terms","Pricing"],agreements:["Agreement Details","Terms","Conditions"],service:["Service Details","Customer Requirements","Technical Notes"],delivery:["Delivery Details","Customer Instructions","Logistics"],invoices:["Invoice Details","Payment Terms","Additional Charges"],default:["General","Details","Other"]}},sampleFields:[{id:"sample-1",name:"Customer Budget",type:"number",required:!1,module:"crm",section:"Lead Information"},{id:"sample-2",name:"Preferred Contact Method",type:"select",required:!0,options:["Email","Phone","Text"],module:"crm",section:"Contact Details"}]},integrations:{emailProviders:[{value:"default",label:"Default (Platform)"},{value:"sendgrid",label:"SendGrid"},{value:"mailchimp",label:"Mailchimp"},{value:"mailgun",label:"Mailgun"},{value:"smtp",label:"Custom SMTP"}],smsProviders:[{value:"default",label:"Default (Platform)"},{value:"twilio",label:"Twilio"},{value:"messagebird",label:"MessageBird"},{value:"vonage",label:"Vonage (Nexmo)"}],webhookEvents:[{value:"lead.created",label:"Lead Created"},{value:"lead.updated",label:"Lead Updated"},{value:"quote.created",label:"Quote Created"},{value:"quote.accepted",label:"Quote Accepted"},{value:"service.created",label:"Service Ticket Created"},{value:"service.completed",label:"Service Completed"},{value:"vehicle.created",label:"Home/RV Created"},{value:"vehicle.sold",label:"Home/RV Sold"}]},notifications:{emailTypes:[{value:"welcome",label:"Welcome Email"},{value:"quote",label:"Quote Email"},{value:"service",label:"Service Notification"},{value:"delivery",label:"Delivery Notification"},{value:"invoice",label:"Invoice Email"},{value:"password_reset",label:"Password Reset"},{value:"custom",label:"Custom Email"}],smsTypes:[{value:"welcome",label:"Welcome SMS"},{value:"quote",label:"Quote SMS"},{value:"service",label:"Service Notification"},{value:"delivery",label:"Delivery Notification"},{value:"appointment",label:"Appointment Reminder"},{value:"custom",label:"Custom SMS"}],commonVariables:["{{first_name}}","{{last_name}}","{{company_name}}","{{quote_number}}","{{invoice_number}}","{{service_ticket}}","{{delivery_date}}","{{appointment_date}}","{{appointment_time}}","{{login_url}}","{{reset_url}}"],sampleTemplates:{email:[{id:"welcome-email",name:"Welcome Email",subject:"Welcome to {{company_name}}!",body:`Hi {{first_name}},

Welcome to {{company_name}}! We're excited to have you as a customer.

Best regards,
The {{company_name}} Team`,type:"welcome",variables:["first_name","company_name"],isActive:!0}],sms:[{id:"appointment-reminder",name:"Appointment Reminder",message:"Hi {{first_name}}, this is a reminder about your appointment on {{appointment_date}} at {{appointment_time}}. See you soon!",type:"appointment",variables:["first_name","appointment_date","appointment_time"],isActive:!0}]}},defaults:{timezone:"America/New_York",currency:"USD",dateFormat:"MM/dd/yyyy",platformType:"both",businessHours:{monday:{open:"09:00",close:"18:00",closed:!1},tuesday:{open:"09:00",close:"18:00",closed:!1},wednesday:{open:"09:00",close:"18:00",closed:!1},thursday:{open:"09:00",close:"18:00",closed:!1},friday:{open:"09:00",close:"18:00",closed:!1},saturday:{open:"09:00",close:"17:00",closed:!1},sunday:{open:"12:00",close:"17:00",closed:!1}},features:{crm:!0,inventory:!0,quotes:!0,agreements:!0,service:!0,delivery:!0,commissions:!0,portal:!0,invoices:!0,reports:!0},companyInfo:{name:"Demo RV Dealership",domain:"demo.renterinsight.com"},tabs:[{id:"general",name:"General",icon:"Building"},{id:"branding",name:"Branding",icon:"Palette"},{id:"labels",name:"Labels",icon:"Tag"},{id:"notifications",name:"Notifications",icon:"Mail"},{id:"integrations",name:"Integrations",icon:"Globe"},{id:"users",name:"Users",icon:"Users"},{id:"custom-fields",name:"Custom Fields",icon:"Settings"}]}};function _Ee({field:t,onSave:e,onCancel:n,modules:r}){var p;const{toast:i}=Ot(),[a,o]=A.useState(!1),[l,c]=A.useState({name:"",type:tl.TEXT,required:!1,options:[],module:"",section:""}),[d,u]=A.useState("");A.useEffect(()=>{t&&c({...t})},[t]);const h=async g=>{if(g.preventDefault(),!l.name||!l.module||!l.section){i({title:"Validation Error",description:"Please fill in all required fields",variant:"destructive"});return}if((l.type===tl.SELECT||l.type===tl.MULTISELECT)&&(!l.options||l.options.length===0)){i({title:"Validation Error",description:"Please add at least one option for select fields",variant:"destructive"});return}o(!0);try{await e(l),i({title:"Success",description:`Custom field ${t?"updated":"created"} successfully`})}catch{i({title:"Error",description:`Failed to ${t?"update":"create"} custom field`,variant:"destructive"})}finally{o(!1)}},f=()=>{var g;d.trim()&&!((g=l.options)!=null&&g.includes(d.trim()))&&(c(x=>({...x,options:[...x.options||[],d.trim()]})),u(""))},m=g=>{c(x=>{var y;return{...x,options:((y=x.options)==null?void 0:y.filter(b=>b!==g))||[]}})},v=g=>us.customFields.customFieldDefaults.moduleSectionMap[g]||us.customFields.customFieldDefaults.moduleSectionMap.default;return s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:s.jsxs(he,{className:"w-full max-w-md",children:[s.jsx(ye,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx(be,{children:t?"Edit Custom Field":"Add Custom Field"}),s.jsx(Be,{children:t?"Update custom field details":"Create a new custom field"})]}),s.jsx(Q,{variant:"ghost",size:"sm",onClick:n,children:s.jsx(on,{className:"h-4 w-4"})})]})}),s.jsx(fe,{children:s.jsxs("form",{onSubmit:h,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"name",children:"Field Name *"}),s.jsx(Ae,{id:"name",value:l.name,onChange:g=>c(x=>({...x,name:g.target.value})),placeholder:"e.g., Customer Budget"})]}),s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"module",children:"Module *"}),s.jsxs(Ke,{value:l.module,onValueChange:g=>{c(x=>({...x,module:g,section:""}))},children:[s.jsx(He,{children:s.jsx(Ye,{placeholder:"Select module"})}),s.jsx(We,{children:r.map(g=>s.jsx(le,{value:g,children:g.charAt(0).toUpperCase()+g.slice(1)},g))})]})]}),s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"section",children:"Section *"}),s.jsxs(Ke,{value:l.section,onValueChange:g=>c(x=>({...x,section:g})),disabled:!l.module,children:[s.jsx(He,{children:s.jsx(Ye,{placeholder:l.module?"Select section":"Select module first"})}),s.jsx(We,{children:l.module&&v(l.module).map(g=>s.jsx(le,{value:g,children:g},g))})]})]}),s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"type",children:"Field Type *"}),s.jsxs(Ke,{value:l.type,onValueChange:g=>c(x=>({...x,type:g})),children:[s.jsx(He,{children:s.jsx(Ye,{})}),s.jsxs(We,{children:[s.jsx(le,{value:tl.TEXT,children:"Text"}),s.jsx(le,{value:tl.NUMBER,children:"Number"}),s.jsx(le,{value:tl.DATE,children:"Date"}),s.jsx(le,{value:tl.BOOLEAN,children:"Boolean"}),s.jsx(le,{value:tl.SELECT,children:"Select"}),s.jsx(le,{value:tl.MULTISELECT,children:"Multi-select"})]})]})]}),(l.type===tl.SELECT||l.type===tl.MULTISELECT)&&s.jsxs("div",{children:[s.jsx(ae,{children:"Options"}),s.jsxs("div",{className:"flex space-x-2 mb-2",children:[s.jsx(Ae,{value:d,onChange:g=>u(g.target.value),placeholder:"Add an option",onKeyDown:g=>{g.key==="Enter"&&(g.preventDefault(),f())}}),s.jsx(Q,{type:"button",onClick:f,children:s.jsx(yt,{className:"h-4 w-4"})})]}),s.jsxs("div",{className:"flex flex-wrap gap-2 mt-2",children:[(p=l.options)==null?void 0:p.map((g,x)=>s.jsxs("div",{className:"flex items-center bg-muted/50 px-3 py-1 rounded-md",children:[s.jsx("span",{className:"mr-2",children:g}),s.jsx(Q,{type:"button",variant:"ghost",size:"sm",className:"h-5 w-5 p-0",onClick:()=>m(g),children:s.jsx(Tr,{className:"h-3 w-3"})})]},x)),(!l.options||l.options.length===0)&&s.jsx("div",{className:"text-sm text-muted-foreground",children:"No options added yet"})]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx($t,{id:"required",checked:l.required,onCheckedChange:g=>c(x=>({...x,required:!!g}))}),s.jsx(ae,{htmlFor:"required",children:"Required field"})]}),s.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[s.jsx(Q,{type:"button",variant:"outline",onClick:n,disabled:a,children:"Cancel"}),s.jsx(Q,{type:"submit",disabled:a,children:a?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),t?"Updating...":"Creating..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Wn,{className:"h-4 w-4 mr-2"}),t?"Update":"Create"," Field"]})})]})]})})]})})}function OEe(){const{tenant:t,updateTenant:e}=ya(),{toast:n}=Ot(),[r,i]=A.useState(!1),[a,o]=A.useState((t==null?void 0:t.branding.primaryColor)||us.branding.primaryColor),[l,c]=A.useState((t==null?void 0:t.branding.secondaryColor)||us.branding.secondaryColor),[d,u]=A.useState((t==null?void 0:t.branding.fontFamily)||us.branding.fontFamily),[h,f]=A.useState((t==null?void 0:t.branding.logo)||us.branding.logoUrl||""),[m,v]=A.useState((t==null?void 0:t.branding.sideMenuColor)||us.branding.sideMenuColor||""),[p,g]=A.useState((t==null?void 0:t.branding.sideMenuColor)===null||!(t!=null&&t.branding.sideMenuColor)),[x,y]=A.useState((t==null?void 0:t.branding.logo)||us.branding.logoUrl||""),[b,w]=A.useState((t==null?void 0:t.branding.portalName)||us.branding.portalName||""),[N,E]=A.useState((t==null?void 0:t.branding.portalLogo)||us.branding.portalLogo||""),[C,j]=A.useState((t==null?void 0:t.branding.portalLogo)||us.branding.portalLogo||""),I=A.useRef(null),k=A.useRef(null),D=us.branding.fontOptions,P=M=>{var F;const U=(F=M.target.files)==null?void 0:F[0];if(U){const z=URL.createObjectURL(U);y(z),f(z)}},R=M=>{var F;const U=(F=M.target.files)==null?void 0:F[0];if(U){const z=URL.createObjectURL(U);j(z),E(z)}},_=async()=>{i(!0);try{await e({branding:{...t==null?void 0:t.branding,primaryColor:a,secondaryColor:l,fontFamily:d,logo:h,sideMenuColor:p?null:m,portalName:b,portalLogo:N}}),n({title:"Branding Updated",description:"Your branding settings have been saved successfully."})}catch{n({title:"Error",description:"Failed to update branding settings.",variant:"destructive"})}finally{i(!1)}};return s.jsxs(he,{className:"shadow-sm",children:[s.jsxs(ye,{children:[s.jsxs(be,{className:"flex items-center",children:[s.jsx(AJ,{className:"h-5 w-5 mr-2 text-primary"}),"Branding & Appearance"]}),s.jsx(Be,{children:"Customize your dealership's visual identity"})]}),s.jsxs(fe,{className:"space-y-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsx(ae,{children:"Company Logo"}),s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("div",{className:"border rounded-md p-4 w-40 h-40 flex items-center justify-center bg-muted/30",children:x?s.jsx("img",{src:x,alt:"Company Logo",className:"max-w-full max-h-full object-contain"}):s.jsx(Hj,{className:"h-12 w-12 text-muted-foreground"})}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs(Q,{variant:"outline",onClick:()=>{var M;return(M=I.current)==null?void 0:M.click()},children:[s.jsx(Cd,{className:"h-4 w-4 mr-2"}),"Upload Logo"]}),s.jsx(Ae,{type:"file",ref:I,className:"hidden",accept:"image/*",onChange:P}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:["Recommended size: 200x200px. Max file size: 2MB.",s.jsx("br",{}),"Supported formats: PNG, JPG, SVG"]})]})]})]}),s.jsxs("div",{className:"space-y-4 pt-6 border-t",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Client Portal Branding"}),s.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Customize the branding for your client-facing portal"})]}),s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"portalName",children:"Portal Name"}),s.jsx(Ae,{id:"portalName",value:b,onChange:M=>w(M.target.value),placeholder:"e.g., Customer Portal",className:"shadow-sm"}),s.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"This name will appear in the portal header and browser title"})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx(ae,{children:"Portal Logo"}),s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("div",{className:"border rounded-md p-4 w-40 h-40 flex items-center justify-center bg-muted/30",children:C?s.jsx("img",{src:C,alt:"Portal Logo",className:"max-w-full max-h-full object-contain"}):s.jsx(Hj,{className:"h-12 w-12 text-muted-foreground"})}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs(Q,{variant:"outline",onClick:()=>{var M;return(M=k.current)==null?void 0:M.click()},children:[s.jsx(Cd,{className:"h-4 w-4 mr-2"}),"Upload Portal Logo"]}),s.jsx(Ae,{type:"file",ref:k,className:"hidden",accept:"image/*",onChange:R}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:["Portal-specific logo (optional). If not set, company logo will be used.",s.jsx("br",{}),"Recommended size: 200x200px. Max file size: 2MB."]})]})]})]})]}),s.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"primaryColor",children:"Primary Color"}),s.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[s.jsx(Ae,{type:"color",id:"primaryColor",value:a,onChange:M=>o(M.target.value),className:"w-16 h-10 shadow-sm"}),s.jsx(Ae,{value:a,onChange:M=>o(M.target.value),className:"shadow-sm"})]}),s.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Used for buttons, links, and primary actions"})]}),s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"secondaryColor",children:"Secondary Color"}),s.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[s.jsx(Ae,{type:"color",id:"secondaryColor",value:l,onChange:M=>c(M.target.value),className:"w-16 h-10 shadow-sm"}),s.jsx(Ae,{value:l,onChange:M=>c(M.target.value),className:"shadow-sm"})]}),s.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Used for secondary elements and accents"})]})]}),s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"fontFamily",children:"Font Family"}),s.jsxs(Ke,{value:d,onValueChange:u,children:[s.jsx(He,{className:"shadow-sm",children:s.jsx(Ye,{placeholder:"Select font family"})}),s.jsx(We,{children:D.map(M=>s.jsx(le,{value:M.value,children:M.label},M.value))})]}),s.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"The primary font used throughout your application"})]}),s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"sideMenuColor",children:"Side Menu Color"}),s.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[s.jsx(Ae,{type:"color",id:"sideMenuColor",value:m,onChange:M=>{v(M.target.value),g(!1)},className:"w-16 h-10 shadow-sm",disabled:p}),s.jsx(Ae,{value:m,onChange:M=>{v(M.target.value),g(!1)},className:"shadow-sm",disabled:p})]}),s.jsxs("div",{className:"flex items-center space-x-2 mt-2",children:[s.jsx($t,{id:"useDefaultSideMenuColor",checked:p,onCheckedChange:M=>g(!!M)}),s.jsx(ae,{htmlFor:"useDefaultSideMenuColor",className:"font-normal",children:"Use default theme color (matches primary site background)"})]}),s.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"The background color for your application's side navigation menu"})]}),s.jsxs("div",{className:"border rounded-lg p-6 mt-6",children:[s.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Preview"}),s.jsxs("div",{className:"space-y-4 p-4 rounded-lg border",style:{fontFamily:d},children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("h4",{className:"font-semibold",children:"Text Preview"}),s.jsx("p",{children:"This is how your text will appear with the selected font."})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("h4",{className:"font-semibold",children:"Color Preview"}),s.jsxs("div",{className:"flex space-x-4",children:[s.jsx("div",{className:"w-20 h-10 rounded-md flex items-center justify-center text-white",style:{backgroundColor:a},children:"Primary"}),s.jsx("div",{className:"w-20 h-10 rounded-md flex items-center justify-center text-white",style:{backgroundColor:l},children:"Secondary"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("h4",{className:"font-semibold",children:"Button Preview"}),s.jsxs("div",{className:"flex space-x-4",children:[s.jsx("button",{className:"px-4 py-2 rounded-md text-white",style:{backgroundColor:a},children:"Primary Button"}),s.jsx("button",{className:"px-4 py-2 rounded-md border",style:{borderColor:l,color:l},children:"Secondary Button"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("h4",{className:"font-semibold",children:"Side Menu Preview"}),s.jsx("div",{className:"w-full h-20 rounded-md flex items-center justify-center text-sm",style:{backgroundColor:p?"var(--background)":m,color:p||m&&XR(m)?"var(--foreground)":"white",border:p?"1px dashed var(--border)":"none"},children:"Side Menu Background"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("h4",{className:"font-semibold",children:"Portal Preview"}),s.jsxs("div",{className:"border rounded-md p-4 bg-muted/20",children:[s.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[C&&s.jsx("img",{src:C,alt:"Portal Logo",className:"w-8 h-8 object-contain"}),s.jsx("h5",{className:"font-semibold",children:b||"Customer Portal"})]}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"This is how your client portal header will appear"})]})]})]})]}),s.jsx("div",{className:"flex justify-end",children:s.jsx(Q,{onClick:_,disabled:r,children:r?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Saving..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Wn,{className:"h-4 w-4 mr-2"}),"Save Branding"]})})})]})]})}function LEe(){var g,x;const{tenant:t,updateTenant:e}=ya(),{toast:n}=Ot(),[r,i]=A.useState(!1),[a,o]=A.useState("general"),[l,c]=A.useState(((g=t==null?void 0:t.settings)==null?void 0:g.labelOverrides)||{}),[d,u]=A.useState(((x=t==null?void 0:t.settings)==null?void 0:x.platformType)||"both"),h=us.labelOverrides.defaultLabels,f=(y,b,w)=>{c({...l,[`${y}.${b}`]:w})},m=(y,b)=>l[`${y}.${b}`]||"",v=y=>{const b={...l};Object.keys(b).forEach(w=>{w.startsWith(`${y}.`)&&delete b[w]}),c(b),n({title:"Labels Reset",description:`Default labels restored for ${y} module.`})},p=async()=>{i(!0);try{await e({settings:{...t==null?void 0:t.settings,labelOverrides:l,platformType:d}}),n({title:"Labels Updated",description:"Your label overrides have been saved successfully."})}catch{n({title:"Error",description:"Failed to update label overrides.",variant:"destructive"})}finally{i(!1)}};return s.jsxs(he,{className:"shadow-sm",children:[s.jsxs(ye,{children:[s.jsxs(be,{className:"flex items-center",children:[s.jsx(L$,{className:"h-5 w-5 mr-2 text-primary"}),"Label Overrides"]}),s.jsx(Be,{children:"Customize terminology throughout the platform"})]}),s.jsxs(fe,{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"platformType",children:"Platform Type"}),s.jsxs(Ke,{value:d,onValueChange:u,children:[s.jsx(He,{className:"shadow-sm",children:s.jsx(Ye,{placeholder:"Select platform type"})}),s.jsx(We,{children:us.labelOverrides.platformTypes.map(y=>s.jsx(le,{value:y.value,children:y.label},y.value))})]}),s.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"This setting affects terminology and features throughout the platform"})]}),s.jsxs(Vn,{value:a,onValueChange:o,className:"space-y-4",children:[s.jsxs(Mn,{className:"grid grid-cols-5",children:[s.jsx(tt,{value:"general",children:"General"}),s.jsx(tt,{value:"crm",children:"CRM"}),s.jsx(tt,{value:"inventory",children:"Inventory"}),s.jsx(tt,{value:"sales",children:"Sales"}),s.jsx(tt,{value:"service",children:"Service"})]}),Object.entries(h).map(([y,b])=>s.jsxs(rt,{value:y,className:"space-y-4",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("h3",{className:"text-lg font-semibold capitalize",children:[y," Labels"]}),s.jsxs(Q,{variant:"outline",size:"sm",onClick:()=>v(y),children:[s.jsx(CJ,{className:"h-3 w-3 mr-2"}),"Reset to Defaults"]})]}),s.jsx("div",{className:"grid gap-4 md:grid-cols-2",children:Object.entries(b).map(([w,N])=>{let E=N;return w==="vehicle"&&(d==="rv"?E="RV":d==="mh"?E="Home":E="Home/RV"),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ae,{htmlFor:`${y}-${w}`,className:"capitalize",children:w.replace(/_/g," ")}),s.jsx("div",{className:"flex space-x-2",children:s.jsx(Ae,{id:`${y}-${w}`,value:m(y,w),onChange:C=>f(y,w,C.target.value),placeholder:E,className:"shadow-sm"})}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:["Default: ",s.jsx("span",{className:"font-medium",children:E})]})]},w)})})]},y))]}),s.jsxs("div",{className:"border rounded-lg p-6 mt-6",children:[s.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Preview"}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("p",{className:"text-sm",children:"Here's how your customized labels will appear in the application:"}),s.jsx("div",{className:"grid gap-4 md:grid-cols-2",children:Object.entries(h.general).map(([y,b])=>{const w=m("general",y);let E=w||b;return y==="vehicle"&&!w&&(d==="rv"?E="RV":d==="mh"?E="Home":E="Home/RV"),s.jsxs("div",{className:"p-2 bg-muted/30 rounded-md",children:[s.jsxs("span",{className:"font-medium capitalize",children:[y.replace(/_/g," "),":"]})," ",s.jsx("span",{children:E})]},y)})})]})]}),s.jsx("div",{className:"flex justify-end",children:s.jsx(Q,{onClick:p,disabled:r,children:r?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Saving..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Wn,{className:"h-4 w-4 mr-2"}),"Save Labels"]})})})]})]})}function REe(){var De,ce;const{tenant:t,updateTenant:e}=ya(),{toast:n}=Ot(),[r,i]=A.useState(!1),[a,o]=A.useState("email"),[l,c]=A.useState(((De=t==null?void 0:t.settings)==null?void 0:De.emailTemplates)||[]),[d,u]=A.useState(null),[h,f]=A.useState(""),[m,v]=A.useState(""),[p,g]=A.useState(""),[x,y]=A.useState("welcome"),[b,w]=A.useState(((ce=t==null?void 0:t.settings)==null?void 0:ce.smsTemplates)||[]),[N,E]=A.useState(null),[C,j]=A.useState(""),[I,k]=A.useState(""),[D,P]=A.useState("welcome"),[R,_]=A.useState(!1),[M,U]=A.useState("email"),[F,z]=A.useState(null),H=us.notifications.emailTypes,W=us.notifications.smsTypes,$=us.notifications.commonVariables,L=()=>{u(null),f(""),v(""),g(""),y("welcome")},q=()=>{E(null),j(""),k(""),P("welcome")},Y=Te=>{u(Te),f(Te.name),v(Te.subject),g(Te.body),y(Te.type)},J=Te=>{E(Te),j(Te.name),k(Te.message),P(Te.type)},ne=()=>{if(!h||!m||!p){n({title:"Validation Error",description:"Please fill in all required fields",variant:"destructive"});return}const Te=/\{\{([^}]+)\}\}/g,Ce=[];let Se;for(;(Se=Te.exec(m+p))!==null;)Ce.includes(Se[1])||Ce.push(Se[1]);c(d?l.map(Ue=>Ue.id===d.id?{...Ue,name:h,subject:m,body:p,type:x,variables:Ce}:Ue):[...l,{id:Math.random().toString(36).substring(2,9),name:h,subject:m,body:p,type:x,variables:Ce,isActive:!0}]),L()},re=()=>{if(!C||!I){n({title:"Validation Error",description:"Please fill in all required fields",variant:"destructive"});return}const Te=/\{\{([^}]+)\}\}/g,Ce=[];let Se;for(;(Se=Te.exec(I))!==null;)Ce.includes(Se[1])||Ce.push(Se[1]);w(N?b.map(Ue=>Ue.id===N.id?{...Ue,name:C,message:I,type:D,variables:Ce}:Ue):[...b,{id:Math.random().toString(36).substring(2,9),name:C,message:I,type:D,variables:Ce,isActive:!0}]),q()},pe=Te=>{c(l.filter(Ce=>Ce.id!==Te))},ue=Te=>{w(b.filter(Ce=>Ce.id!==Te))},xe=Te=>{c(l.map(Ce=>Ce.id===Te?{...Ce,isActive:!Ce.isActive}:Ce))},Ne=Te=>{w(b.map(Ce=>Ce.id===Te?{...Ce,isActive:!Ce.isActive}:Ce))},je=(Te,Ce)=>{U(Te),z(Ce),_(!0)},$e=Te=>{a==="email"?g(p+Te):k(I+Te)},ze=async()=>{i(!0);try{await e({settings:{...t==null?void 0:t.settings,emailTemplates:l,smsTemplates:b}}),n({title:"Templates Updated",description:"Your notification templates have been saved successfully."})}catch{n({title:"Error",description:"Failed to update notification templates.",variant:"destructive"})}finally{i(!1)}};return s.jsxs(s.Fragment,{children:[R&&F&&s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:s.jsxs(he,{className:"w-full max-w-2xl",children:[s.jsx(ye,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx(be,{children:"Template Preview"}),s.jsx(Be,{children:F.name})]}),s.jsx(Q,{variant:"ghost",size:"sm",onClick:()=>_(!1),children:s.jsx(X,{className:"h-4 w-4"})})]})}),s.jsxs(fe,{className:"space-y-4",children:[M==="email"&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{children:[s.jsx(ae,{children:"Subject"}),s.jsx("div",{className:"p-3 bg-muted/30 rounded-md mt-1",children:F.subject})]}),s.jsxs("div",{children:[s.jsx(ae,{children:"Body"}),s.jsx("div",{className:"p-3 bg-muted/30 rounded-md mt-1 whitespace-pre-wrap",children:F.body})]})]}),M==="sms"&&s.jsxs("div",{children:[s.jsx(ae,{children:"Message"}),s.jsx("div",{className:"p-3 bg-muted/30 rounded-md mt-1",children:F.message})]}),s.jsxs("div",{children:[s.jsx(ae,{children:"Variables"}),s.jsxs("div",{className:"flex flex-wrap gap-2 mt-1",children:[F.variables.map((Te,Ce)=>s.jsx(Re,{variant:"secondary",children:`{{${Te}}}`},Ce)),F.variables.length===0&&s.jsx("div",{className:"text-sm text-muted-foreground",children:"No variables used"})]})]}),s.jsx("div",{className:"flex justify-end",children:s.jsx(Q,{onClick:()=>_(!1),children:"Close Preview"})})]})]})}),s.jsxs(he,{className:"shadow-sm",children:[s.jsxs(ye,{children:[s.jsxs(be,{className:"flex items-center",children:[s.jsx(Ti,{className:"h-5 w-5 mr-2 text-primary"}),"Notification Templates"]}),s.jsx(Be,{children:"Customize email and SMS notification templates"})]}),s.jsxs(fe,{className:"space-y-6",children:[s.jsxs(Vn,{value:a,onValueChange:o,className:"space-y-4",children:[s.jsxs(Mn,{className:"grid w-full grid-cols-2",children:[s.jsx(tt,{value:"email",children:"Email Templates"}),s.jsx(tt,{value:"sms",children:"SMS Templates"})]}),s.jsx(rt,{value:"email",className:"space-y-6",children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h3",{className:"text-lg font-semibold",children:"Email Templates"}),s.jsxs(Q,{variant:"outline",size:"sm",onClick:L,disabled:!d,children:[s.jsx(yt,{className:"h-4 w-4 mr-2"}),"New Template"]})]}),s.jsx(he,{className:"border-dashed",children:s.jsxs(fe,{className:"pt-6 space-y-4",children:[s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"emailName",children:"Template Name *"}),s.jsx(Ae,{id:"emailName",value:h,onChange:Te=>f(Te.target.value),placeholder:"e.g., Welcome Email",className:"shadow-sm"})]}),s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"emailType",children:"Template Type"}),s.jsxs(Ke,{value:x,onValueChange:y,children:[s.jsx(He,{className:"shadow-sm",children:s.jsx(Ye,{placeholder:"Select template type"})}),s.jsx(We,{children:H.map(Te=>s.jsx(le,{value:Te.value,children:Te.label},Te.value))})]})]}),s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"emailSubject",children:"Subject Line *"}),s.jsx(Ae,{id:"emailSubject",value:m,onChange:Te=>v(Te.target.value),placeholder:"e.g., Welcome to {{company_name}}!",className:"shadow-sm"})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx(ae,{htmlFor:"emailBody",children:"Email Body *"}),s.jsxs(Ke,{value:"",onValueChange:Te=>$e(Te),children:[s.jsx(He,{className:"w-[200px] shadow-sm",children:s.jsx(Ye,{placeholder:"Insert variable"})}),s.jsx(We,{children:$.map(Te=>s.jsx(le,{value:Te,children:Te},Te))})]})]}),s.jsx(un,{id:"emailBody",value:p,onChange:Te=>g(Te.target.value),placeholder:"Enter your email content here...",className:"shadow-sm",rows:10})]}),s.jsxs("div",{className:"flex justify-end space-x-2",children:[s.jsx(Q,{type:"button",variant:"outline",onClick:L,children:"Cancel"}),s.jsx(Q,{type:"button",onClick:ne,children:d?"Update Template":"Add Template"})]})]})}),s.jsxs("div",{className:"space-y-3 mt-6",children:[s.jsx("h3",{className:"text-lg font-semibold",children:"Saved Templates"}),l.length>0?l.map(Te=>{var Ce;return s.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("h4",{className:"font-medium",children:Te.name}),s.jsx(Re,{variant:"outline",children:((Ce=H.find(Se=>Se.value===Te.type))==null?void 0:Ce.label)||Te.type}),!Te.isActive&&s.jsx(Re,{variant:"secondary",children:"Inactive"})]}),s.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:["Subject: ",Te.subject]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Q,{variant:"ghost",size:"sm",onClick:()=>xe(Te.id),children:Te.isActive?"Disable":"Enable"}),s.jsx(Q,{variant:"ghost",size:"sm",onClick:()=>je("email",Te),children:s.jsx(Wr,{className:"h-4 w-4"})}),s.jsx(Q,{variant:"ghost",size:"sm",onClick:()=>Y(Te),children:"Edit"}),s.jsx(Q,{variant:"ghost",size:"sm",onClick:()=>pe(Te.id),children:s.jsx(Tr,{className:"h-4 w-4 text-red-500"})})]})]},Te.id)}):s.jsxs("div",{className:"text-center py-6 text-muted-foreground border-2 border-dashed rounded-lg",children:[s.jsx(Ti,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),s.jsx("p",{children:"No email templates created yet"}),s.jsx("p",{className:"text-sm",children:"Create your first template to get started"})]})]})]})}),s.jsx(rt,{value:"sms",className:"space-y-6",children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h3",{className:"text-lg font-semibold",children:"SMS Templates"}),s.jsxs(Q,{variant:"outline",size:"sm",onClick:q,disabled:!N,children:[s.jsx(yt,{className:"h-4 w-4 mr-2"}),"New Template"]})]}),s.jsx(he,{className:"border-dashed",children:s.jsxs(fe,{className:"pt-6 space-y-4",children:[s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"smsName",children:"Template Name *"}),s.jsx(Ae,{id:"smsName",value:C,onChange:Te=>j(Te.target.value),placeholder:"e.g., Appointment Reminder",className:"shadow-sm"})]}),s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"smsType",children:"Template Type"}),s.jsxs(Ke,{value:D,onValueChange:P,children:[s.jsx(He,{className:"shadow-sm",children:s.jsx(Ye,{placeholder:"Select template type"})}),s.jsx(We,{children:W.map(Te=>s.jsx(le,{value:Te.value,children:Te.label},Te.value))})]})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx(ae,{htmlFor:"smsMessage",children:"Message *"}),s.jsxs(Ke,{value:"",onValueChange:Te=>$e(Te),children:[s.jsx(He,{className:"w-[200px] shadow-sm",children:s.jsx(Ye,{placeholder:"Insert variable"})}),s.jsx(We,{children:$.map(Te=>s.jsx(le,{value:Te,children:Te},Te))})]})]}),s.jsx(un,{id:"smsMessage",value:I,onChange:Te=>k(Te.target.value),placeholder:"Enter your SMS message here...",className:"shadow-sm",rows:4}),s.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground mt-1",children:[s.jsxs("span",{children:[I.length," characters"]}),s.jsxs("span",{children:[160-I.length," remaining"]})]})]}),s.jsxs("div",{className:"flex justify-end space-x-2",children:[s.jsx(Q,{type:"button",variant:"outline",onClick:q,children:"Cancel"}),s.jsx(Q,{type:"button",onClick:re,children:N?"Update Template":"Add Template"})]})]})}),s.jsxs("div",{className:"space-y-3 mt-6",children:[s.jsx("h3",{className:"text-lg font-semibold",children:"Saved Templates"}),b.length>0?b.map(Te=>{var Ce;return s.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("h4",{className:"font-medium",children:Te.name}),s.jsx(Re,{variant:"outline",children:((Ce=W.find(Se=>Se.value===Te.type))==null?void 0:Ce.label)||Te.type}),!Te.isActive&&s.jsx(Re,{variant:"secondary",children:"Inactive"})]}),s.jsx("p",{className:"text-sm text-muted-foreground mt-1 truncate",children:Te.message})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Q,{variant:"ghost",size:"sm",onClick:()=>Ne(Te.id),children:Te.isActive?"Disable":"Enable"}),s.jsx(Q,{variant:"ghost",size:"sm",onClick:()=>je("sms",Te),children:s.jsx(Wr,{className:"h-4 w-4"})}),s.jsx(Q,{variant:"ghost",size:"sm",onClick:()=>J(Te),children:"Edit"}),s.jsx(Q,{variant:"ghost",size:"sm",onClick:()=>ue(Te.id),children:s.jsx(Tr,{className:"h-4 w-4 text-red-500"})})]})]},Te.id)}):s.jsxs("div",{className:"text-center py-6 text-muted-foreground border-2 border-dashed rounded-lg",children:[s.jsx(ss,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),s.jsx("p",{children:"No SMS templates created yet"}),s.jsx("p",{className:"text-sm",children:"Create your first template to get started"})]})]})]})})]}),s.jsx("div",{className:"flex justify-end",children:s.jsx(Q,{onClick:ze,disabled:r,children:r?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Saving..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Wn,{className:"h-4 w-4 mr-2"}),"Save Templates"]})})})]})]})]})}function MEe(){var re,pe,ue,xe,Ne,je,$e,ze,De,ce,Te;const{tenant:t,updateTenant:e}=ya(),{toast:n}=Ot(),[r,i]=A.useState(!1),[a,o]=A.useState(((re=t==null?void 0:t.settings)==null?void 0:re.emailProvider)||"default"),[l,c]=A.useState(((pe=t==null?void 0:t.settings)==null?void 0:pe.emailApiKey)||""),[d,u]=A.useState(((ue=t==null?void 0:t.settings)==null?void 0:ue.emailFromAddress)||""),[h,f]=A.useState(((xe=t==null?void 0:t.settings)==null?void 0:xe.emailFromName)||""),[m,v]=A.useState(((Ne=t==null?void 0:t.settings)==null?void 0:Ne.smsProvider)||"default"),[p,g]=A.useState(((je=t==null?void 0:t.settings)==null?void 0:je.smsApiKey)||""),[x,y]=A.useState((($e=t==null?void 0:t.settings)==null?void 0:$e.smsFromNumber)||""),[b,w]=A.useState(((ze=t==null?void 0:t.settings)==null?void 0:ze.webhooks)||[]),[N,E]=A.useState(""),[C,j]=A.useState(""),[I,k]=A.useState(((De=t==null?void 0:t.settings)==null?void 0:De.apiEnabled)||!1),[D,P]=A.useState(((ce=t==null?void 0:t.settings)==null?void 0:ce.apiKey)||""),[R,_]=A.useState(((Te=t==null?void 0:t.settings)==null?void 0:Te.allowedOrigins)||[]),[M,U]=A.useState(""),F=us.integrations.emailProviders,z=us.integrations.smsProviders,H=us.integrations.webhookEvents,W=()=>{!N||!C||(w([...b,{id:Math.random().toString(36).substring(2,9),event:N,url:C,active:!0}]),E(""),j(""))},$=Ce=>{w(b.filter(Se=>Se.id!==Ce))},L=Ce=>{w(b.map(Se=>Se.id===Ce?{...Se,active:!Se.active}:Se))},q=()=>{M&&(_([...R,M]),U(""))},Y=Ce=>{_(R.filter(Se=>Se!==Ce))},J=()=>{const Ce=Array.from(crypto.getRandomValues(new Uint8Array(32))).map(Se=>Se.toString(16).padStart(2,"0")).join("");P(Ce)},ne=async()=>{i(!0);try{await e({settings:{...t==null?void 0:t.settings,emailProvider:a,emailApiKey:l,emailFromAddress:d,emailFromName:h,smsProvider:m,smsApiKey:p,smsFromNumber:x,webhooks:b,apiEnabled:I,apiKey:D,allowedOrigins:R}}),n({title:"Integrations Updated",description:"Your integration settings have been saved successfully."})}catch{n({title:"Error",description:"Failed to update integration settings.",variant:"destructive"})}finally{i(!1)}};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs(he,{className:"shadow-sm",children:[s.jsxs(ye,{children:[s.jsxs(be,{className:"flex items-center",children:[s.jsx(Ti,{className:"h-5 w-5 mr-2 text-primary"}),"Email Provider"]}),s.jsx(Be,{children:"Configure your email delivery service"})]}),s.jsxs(fe,{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"emailProvider",children:"Provider"}),s.jsxs(Ke,{value:a,onValueChange:o,children:[s.jsx(He,{className:"shadow-sm",children:s.jsx(Ye,{placeholder:"Select email provider"})}),s.jsx(We,{children:F.map(Ce=>s.jsx(le,{value:Ce.value,children:Ce.label},Ce.value))})]})]}),a!=="default"&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"emailApiKey",children:"API Key"}),s.jsx(Ae,{id:"emailApiKey",type:"password",value:l,onChange:Ce=>c(Ce.target.value),className:"shadow-sm",placeholder:"Enter API key"})]}),s.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"emailFromAddress",children:"From Email Address"}),s.jsx(Ae,{id:"emailFromAddress",type:"email",value:d,onChange:Ce=>u(Ce.target.value),className:"shadow-sm",placeholder:"noreply@yourdomain.com"})]}),s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"emailFromName",children:"From Name"}),s.jsx(Ae,{id:"emailFromName",value:h,onChange:Ce=>f(Ce.target.value),className:"shadow-sm",placeholder:"Your Company Name"})]})]})]}),a==="default"&&s.jsx("div",{className:"bg-blue-50 p-4 rounded-md",children:s.jsx("p",{className:"text-sm text-blue-700",children:"Using the default platform email provider. No additional configuration needed."})})]})]}),s.jsxs(he,{className:"shadow-sm",children:[s.jsxs(ye,{children:[s.jsxs(be,{className:"flex items-center",children:[s.jsx(ss,{className:"h-5 w-5 mr-2 text-primary"}),"SMS Provider"]}),s.jsx(Be,{children:"Configure your SMS delivery service"})]}),s.jsxs(fe,{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"smsProvider",children:"Provider"}),s.jsxs(Ke,{value:m,onValueChange:v,children:[s.jsx(He,{className:"shadow-sm",children:s.jsx(Ye,{placeholder:"Select SMS provider"})}),s.jsx(We,{children:z.map(Ce=>s.jsx(le,{value:Ce.value,children:Ce.label},Ce.value))})]})]}),m!=="default"&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"smsApiKey",children:"API Key"}),s.jsx(Ae,{id:"smsApiKey",type:"password",value:p,onChange:Ce=>g(Ce.target.value),className:"shadow-sm",placeholder:"Enter API key"})]}),s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"smsFromNumber",children:"From Number"}),s.jsx(Ae,{id:"smsFromNumber",value:x,onChange:Ce=>y(Ce.target.value),className:"shadow-sm",placeholder:"+1234567890"}),s.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Must be in E.164 format (e.g., +1234567890)"})]})]}),m==="default"&&s.jsx("div",{className:"bg-blue-50 p-4 rounded-md",children:s.jsx("p",{className:"text-sm text-blue-700",children:"Using the default platform SMS provider. No additional configuration needed."})})]})]}),s.jsxs(he,{className:"shadow-sm",children:[s.jsxs(ye,{children:[s.jsxs(be,{className:"flex items-center",children:[s.jsx(bz,{className:"h-5 w-5 mr-2 text-primary"}),"Webhooks"]}),s.jsx(Be,{children:"Configure webhooks to receive event notifications"})]}),s.jsxs(fe,{className:"space-y-4",children:[s.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"webhookEvent",children:"Event"}),s.jsxs(Ke,{value:N,onValueChange:E,children:[s.jsx(He,{className:"shadow-sm",children:s.jsx(Ye,{placeholder:"Select event"})}),s.jsx(We,{children:H.map(Ce=>s.jsx(le,{value:Ce.value,children:Ce.label},Ce.value))})]})]}),s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"webhookUrl",children:"Webhook URL"}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsx(Ae,{id:"webhookUrl",value:C,onChange:Ce=>j(Ce.target.value),className:"shadow-sm flex-1",placeholder:"https://your-endpoint.com/webhook"}),s.jsx(Q,{type:"button",onClick:W,children:s.jsx(yt,{className:"h-4 w-4"})})]})]})]}),s.jsx("div",{className:"space-y-3 mt-4",children:b.length>0?b.map(Ce=>{var Se;return s.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx($t,{checked:Ce.active,onCheckedChange:()=>L(Ce.id)}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium",children:((Se=H.find(Ue=>Ue.value===Ce.event))==null?void 0:Se.label)||Ce.event}),s.jsx("div",{className:"text-sm text-muted-foreground",children:Ce.url})]})]}),s.jsx(Q,{variant:"ghost",size:"sm",onClick:()=>$(Ce.id),children:s.jsx(Tr,{className:"h-4 w-4 text-red-500"})})]},Ce.id)}):s.jsxs("div",{className:"text-center py-6 text-muted-foreground border-2 border-dashed rounded-lg",children:[s.jsx(bz,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),s.jsx("p",{children:"No webhooks configured"}),s.jsx("p",{className:"text-sm",children:"Add webhooks to receive event notifications"})]})})]})]}),s.jsxs(he,{className:"shadow-sm",children:[s.jsxs(ye,{children:[s.jsxs(be,{className:"flex items-center",children:[s.jsx(_$,{className:"h-5 w-5 mr-2 text-primary"}),"API Access"]}),s.jsx(Be,{children:"Configure API access for external integrations"})]}),s.jsxs(fe,{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx($t,{id:"apiEnabled",checked:I,onCheckedChange:Ce=>k(!!Ce)}),s.jsx(ae,{htmlFor:"apiEnabled",children:"Enable API access"})]}),I&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"apiKey",children:"API Key"}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsx(Ae,{id:"apiKey",type:"password",value:D,onChange:Ce=>P(Ce.target.value),className:"shadow-sm flex-1",placeholder:"API key will appear here",readOnly:!0}),s.jsx(Q,{type:"button",onClick:J,children:"Generate"})]}),s.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Keep this key secure. It provides full access to your account."})]}),s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"allowedOrigins",children:"Allowed Origins (CORS)"}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsx(Ae,{id:"allowedOrigins",value:M,onChange:Ce=>U(Ce.target.value),className:"shadow-sm flex-1",placeholder:"https://your-domain.com"}),s.jsx(Q,{type:"button",onClick:q,children:s.jsx(yt,{className:"h-4 w-4"})})]}),s.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Domains that are allowed to make API requests"})]}),s.jsxs("div",{className:"flex flex-wrap gap-2 mt-2",children:[R.map((Ce,Se)=>s.jsxs("div",{className:"flex items-center bg-muted/50 px-3 py-1 rounded-md",children:[s.jsx("span",{className:"mr-2",children:Ce}),s.jsx(Q,{type:"button",variant:"ghost",size:"sm",className:"h-5 w-5 p-0",onClick:()=>Y(Ce),children:s.jsx(Tr,{className:"h-3 w-3"})})]},Se)),R.length===0&&s.jsx("div",{className:"text-sm text-muted-foreground",children:"No origins added yet"})]})]})]})]}),s.jsx("div",{className:"flex justify-end",children:s.jsx(Q,{onClick:ne,disabled:r,children:r?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Saving..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Wn,{className:"h-4 w-4 mr-2"}),"Save Integrations"]})})})]})}function KV(){var H,W;const{tenant:t,getCustomFields:e,updateTenant:n,addCustomField:r,updateCustomField:i,deleteCustomField:a}=ya(),{toast:o}=Ot(),[l,c]=A.useState("general"),[d,u]=A.useState(!1),[h,f]=A.useState(null);A.useState(!1);const[m,v]=A.useState((t==null?void 0:t.name)||""),[p,g]=A.useState((t==null?void 0:t.domain)||""),[x,y]=A.useState(((H=t==null?void 0:t.settings)==null?void 0:H.timezone)||""),[b,w]=A.useState(((W=t==null?void 0:t.settings)==null?void 0:W.currency)||""),N=[{id:"general",name:"General",icon:sb},{id:"branding",name:"Branding",icon:AJ},{id:"labels",name:"Labels",icon:L$},{id:"notifications",name:"Notifications",icon:Ti},{id:"integrations",name:"Integrations",icon:_$},{id:"users",name:"Users",icon:Lr},{id:"custom-fields",name:"Custom Fields",icon:Wa}],E=us.customFields.modules,C=(t==null?void 0:t.customFields)||[];ge.useEffect(()=>{var $,L;t&&(v(t.name),g(t.domain),y((($=t.settings)==null?void 0:$.timezone)||""),w(((L=t.settings)==null?void 0:L.currency)||""))},[t]);const j=()=>{f(null),u(!0)},I=$=>{f($),u(!0)},k=async $=>{if(window.confirm("Are you sure you want to delete this custom field?"))try{await a($),o({title:"Success",description:"Custom field deleted successfully"})}catch{o({title:"Error",description:"Failed to delete custom field",variant:"destructive"})}},D=async $=>{try{return h?await i(h.id,$):await r($),u(!1),!0}catch{return!1}},P=()=>s.jsxs("div",{className:"space-y-6",children:[s.jsxs(he,{className:"shadow-sm",children:[s.jsxs(ye,{children:[s.jsx(be,{className:"text-xl",children:"Company Information"}),s.jsx(Be,{children:"Basic information about your dealership"})]}),s.jsx(fe,{className:"space-y-4",children:s.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-foreground",children:"Company Name"}),s.jsx(Ae,{value:m,onChange:$=>v($.target.value),className:"mt-1 shadow-sm"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-foreground",children:"Domain"}),s.jsx(Ae,{value:p,onChange:$=>g($.target.value),className:"mt-1 shadow-sm"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-foreground",children:"Timezone"}),s.jsx(Ae,{value:x,onChange:$=>y($.target.value),className:"mt-1 shadow-sm"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-foreground",children:"Currency"}),s.jsx(Ae,{value:b,onChange:$=>w($.target.value),className:"mt-1 shadow-sm"})]})]})})]}),s.jsxs(he,{className:"shadow-sm",children:[s.jsxs(ye,{children:[s.jsx(be,{className:"text-xl",children:"Business Hours"}),s.jsx(Be,{children:"Set your dealership operating hours"})]}),s.jsx(fe,{children:s.jsx("div",{className:"space-y-4",children:(t==null?void 0:t.settings.businessHours)&&Object.entries(t.settings.businessHours).map(([$,L])=>s.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted/30 rounded-lg",children:[s.jsx("div",{className:"w-24 capitalize font-medium",children:$}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(Ae,{type:"time",defaultValue:L.open,disabled:L.closed,className:"w-32 shadow-sm"}),s.jsx("span",{className:"text-muted-foreground",children:"to"}),s.jsx(Ae,{type:"time",defaultValue:L.close,disabled:L.closed,className:"w-32 shadow-sm"}),s.jsxs("label",{className:"flex items-center space-x-2",children:[s.jsx("input",{type:"checkbox",defaultChecked:L.closed,className:"rounded"}),s.jsx("span",{className:"text-sm",children:"Closed"})]})]})]},$))})})]})]}),R=()=>s.jsx(OEe,{}),_=()=>s.jsx(LEe,{}),M=()=>s.jsx(REe,{}),U=()=>s.jsx(MEe,{}),F=()=>s.jsxs(he,{className:"shadow-sm",children:[s.jsxs(ye,{children:[s.jsx(be,{className:"text-xl",children:"User Management"}),s.jsx(Be,{children:"Manage user accounts and permissions"})]}),s.jsxs(fe,{children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Manage users, roles, and permissions for your dealership"}),s.jsxs(Q,{className:"shadow-sm",children:[s.jsx(yt,{className:"h-4 w-4 mr-2"}),"Add User"]})]}),s.jsx("div",{className:"space-y-4",children:s.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-accent/50 transition-colors",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold",children:"Admin User"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"admin@renterinsight.com"})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(Re,{className:"bg-blue-50 text-blue-700 border-blue-200",children:"Admin"}),s.jsx(Q,{variant:"outline",size:"sm",className:"shadow-sm",children:s.jsx(ar,{className:"h-3 w-3"})})]})]})})]})]}),z=()=>s.jsxs(he,{className:"shadow-sm",children:[s.jsx(ye,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx(be,{className:"text-xl",children:"Custom Fields"}),s.jsx(Be,{children:"Add custom fields to capture additional information"})]}),s.jsxs(Q,{className:"shadow-sm",onClick:j,children:[s.jsx(yt,{className:"h-4 w-4 mr-2"}),"Add Custom Field"]})]})}),s.jsx(fe,{children:s.jsxs("div",{className:"space-y-4",children:[C.map($=>s.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-accent/50 transition-colors",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold",children:$.name}),s.jsxs("p",{className:"text-sm text-muted-foreground",children:[$.module," - ",$.section," - ",$.type,$.required&&s.jsx(Re,{className:"ml-2 bg-orange-50 text-orange-700 border-orange-200",variant:"secondary",children:"Required"})]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Q,{variant:"outline",size:"sm",className:"shadow-sm",onClick:()=>I($),children:"Edit"}),s.jsx(Q,{variant:"outline",size:"sm",className:"shadow-sm",onClick:()=>k($.id),children:"Delete"})]})]},$.id)),C.length===0&&s.jsx("div",{className:"text-center py-12 text-muted-foreground bg-muted/30 rounded-lg",children:"No custom fields configured yet"})]})})]});return s.jsxs("div",{className:"space-y-8",children:[d&&s.jsx(_Ee,{field:h||void 0,onSave:D,onCancel:()=>u(!1),modules:E}),s.jsx("div",{className:"ri-page-header",children:s.jsx("div",{className:"flex items-center justify-between",children:s.jsxs("div",{children:[s.jsx("h1",{className:"ri-page-title",children:"Company Settings"}),s.jsx("p",{className:"ri-page-description",children:"Configure your dealership settings and preferences"})]})})}),s.jsx("div",{className:"border-b",children:s.jsx("nav",{className:"-mb-px flex flex-wrap space-x-4 md:space-x-8",children:N.map($=>s.jsxs("button",{onClick:()=>c($.id),className:st("flex items-center space-x-2 py-3 px-1 border-b-2 font-medium text-sm transition-colors",l===$.id?"border-primary text-primary":"border-transparent text-muted-foreground hover:text-foreground hover:border-gray-300"),children:[s.jsx($.icon,{className:"h-4 w-4"}),s.jsx("span",{children:$.name})]},$.id))})}),s.jsxs("div",{children:[l==="general"&&P(),l==="branding"&&R(),l==="labels"&&_(),l==="notifications"&&M(),l==="integrations"&&U(),l==="users"&&F(),l==="custom-fields"&&z()]})]},(t==null?void 0:t.updatedAt)||(t==null?void 0:t.id))}function FEe(){return s.jsxs(ki,{children:[s.jsx(It,{path:"/",element:s.jsx(KV,{})}),s.jsx(It,{path:"/*",element:s.jsx(KV,{})})]})}const Kh={tenantRoles:[{value:"admin",label:"Admin",description:"Full access to all features"},{value:"manager",label:"Manager",description:"Manage users and settings"},{value:"sales",label:"Sales",description:"Access to CRM and quotes"},{value:"service",label:"Service",description:"Access to service operations"},{value:"viewer",label:"Viewer",description:"Read-only access"}],defaultPermissions:{crm:{read:!0,write:!0,delete:!1},inventory:{read:!0,write:!0,delete:!1},quotes:{read:!0,write:!0,delete:!1},agreements:{read:!0,write:!1,delete:!1},service:{read:!0,write:!0,delete:!1},delivery:{read:!0,write:!0,delete:!1},commissions:{read:!0,write:!1,delete:!1},portal:{read:!0,write:!1,delete:!1},invoices:{read:!0,write:!0,delete:!1},reports:{read:!0,write:!1,delete:!1}},usageStats:{totalTenants:247,activeTenants:189,totalUsers:1456,activeUsers:892,monthlyGrowth:12.5,storageUsed:2.4,apiCalls:125e4,uptime:99.9,chartData:{tenantGrowth:[{month:"Jan",tenants:180,users:720},{month:"Feb",tenants:195,users:810},{month:"Mar",tenants:210,users:920},{month:"Apr",tenants:225,users:1050},{month:"May",tenants:235,users:1180},{month:"Jun",tenants:247,users:1456}],apiUsage:[{date:"2024-01-01",calls:45e3},{date:"2024-01-02",calls:52e3},{date:"2024-01-03",calls:48e3},{date:"2024-01-04",calls:61e3},{date:"2024-01-05",calls:55e3},{date:"2024-01-06",calls:58e3},{date:"2024-01-07",calls:49e3}]}},sampleTenants:[{id:"tenant-001",name:"Sunshine RV Dealership",domain:"sunshine-rv.renterinsight.com",platformType:"RV",status:"Active",createdAt:"2023-06-15T10:30:00Z",lastActivity:"2024-01-20T14:22:00Z",userCount:12,storageUsed:1.2,monthlyApiCalls:45e3,subscription:{plan:"Professional",status:"Active",nextBilling:"2024-02-15T00:00:00Z",amount:299},settings:{timezone:"America/New_York",currency:"USD",features:{crm:!0,inventory:!0,quotes:!0,agreements:!0,service:!0,delivery:!0,commissions:!0,portal:!0,invoices:!0,reports:!0}},auditTrail:[{id:"audit-001",timestamp:"2024-01-20T14:22:00Z",action:"User Login",user:"admin@sunshine-rv.com",details:"Successful login from IP 192.168.1.100",module:"Authentication"},{id:"audit-002",timestamp:"2024-01-20T13:45:00Z",action:"Lead Created",user:"sales@sunshine-rv.com",details:"New lead: John Smith - Website inquiry",module:"CRM"},{id:"audit-003",timestamp:"2024-01-20T12:30:00Z",action:"Quote Generated",user:"sales@sunshine-rv.com",details:"Quote Q-2024-001 generated for customer ID: cust-123",module:"Quotes"},{id:"audit-004",timestamp:"2024-01-20T11:15:00Z",action:"Settings Updated",user:"admin@sunshine-rv.com",details:"Updated business hours configuration",module:"Settings"}]},{id:"tenant-002",name:"Mountain View Manufactured Homes",domain:"mountainview-mh.renterinsight.com",platformType:"MH",status:"Active",createdAt:"2023-08-22T09:15:00Z",lastActivity:"2024-01-19T16:45:00Z",userCount:8,storageUsed:.8,monthlyApiCalls:28e3,subscription:{plan:"Standard",status:"Active",nextBilling:"2024-02-22T00:00:00Z",amount:199},settings:{timezone:"America/Denver",currency:"USD",features:{crm:!0,inventory:!0,quotes:!0,agreements:!1,service:!0,delivery:!0,commissions:!1,portal:!1,invoices:!0,reports:!0}},auditTrail:[{id:"audit-005",timestamp:"2024-01-19T16:45:00Z",action:"Inventory Updated",user:"manager@mountainview-mh.com",details:"Added new manufactured home: Stock #MH-2024-001",module:"Inventory"},{id:"audit-006",timestamp:"2024-01-19T15:20:00Z",action:"Service Ticket Created",user:"service@mountainview-mh.com",details:"Service ticket ST-001 created for customer maintenance",module:"Service"}]}],platformTypes:[{value:"RV",label:"RV Dealership"},{value:"MH",label:"Manufactured Housing"},{value:"RV & MH",label:"RV & Manufactured Housing"},{value:"Auto",label:"Auto Dealership"}],subscriptionPlans:[{id:"starter",name:"Starter",price:99,features:["Up to 5 users","Basic CRM","Inventory management","Email support"]},{id:"standard",name:"Standard",price:199,features:["Up to 15 users","Full CRM","Quote builder","Service ops","Phone support"]},{id:"professional",name:"Professional",price:299,features:["Up to 50 users","All features","API access","Custom integrations","Priority support"]},{id:"enterprise",name:"Enterprise",price:499,features:["Unlimited users","White-label","Advanced analytics","Dedicated support","Custom development"]}],systemHealth:{status:"Healthy",uptime:99.9,responseTime:145,errorRate:.02,services:[{name:"API Gateway",status:"Healthy",responseTime:120},{name:"Database",status:"Healthy",responseTime:45},{name:"File Storage",status:"Healthy",responseTime:89},{name:"Email Service",status:"Warning",responseTime:250},{name:"SMS Service",status:"Healthy",responseTime:180}]}};function $Ee({onClose:t}){const{toast:e}=Ot(),[n,r]=A.useState(!1),[i,a]=A.useState(""),[o,l]=A.useState(""),[c,d]=A.useState(Kh.platformTypes[0].value),[u,h]=A.useState(""),[f,m]=A.useState(""),[v,p]=A.useState({});ge.useEffect(()=>{p(Object.keys(Kh.defaultPermissions).reduce((b,w)=>(b[w]=Kh.defaultPermissions[w].read,b),{}))},[]);const g=Object.keys(Kh.defaultPermissions).map(b=>({key:b,label:b.charAt(0).toUpperCase()+b.slice(1).replace(/([A-Z])/g," $1")})),x=b=>{p(w=>({...w,[b]:!w[b]}))},y=async b=>{if(b.preventDefault(),!i||!o||!u||!f){e({title:"Validation Error",description:"All fields are required",variant:"destructive"});return}r(!0);try{await new Promise(w=>setTimeout(w,2e3)),e({title:"Success",description:"Tenant created successfully"}),t()}catch{e({title:"Error",description:"Failed to create tenant",variant:"destructive"})}finally{r(!1)}};return s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:s.jsxs(he,{className:"w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[s.jsx(ye,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsxs(be,{className:"flex items-center",children:[s.jsx(sb,{className:"h-5 w-5 mr-2 text-primary"}),"Add New Tenant"]}),s.jsx(Be,{children:"Create a new tenant with admin user and feature permissions"})]}),s.jsx(Q,{variant:"ghost",size:"sm",onClick:t,children:s.jsx(on,{className:"h-4 w-4"})})]})}),s.jsx(fe,{children:s.jsxs("form",{onSubmit:y,className:"space-y-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-semibold",children:"Tenant Information"}),s.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"tenantName",children:"Tenant Name *"}),s.jsx(Ae,{id:"tenantName",value:i,onChange:b=>a(b.target.value),placeholder:"e.g., Sunshine RV Dealership",className:"shadow-sm"})]}),s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"domain",children:"Domain *"}),s.jsx(Ae,{id:"domain",value:o,onChange:b=>l(b.target.value),placeholder:"e.g., sunshine-rv",className:"shadow-sm"}),s.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Will create: ",o||"your-domain",".renterinsight.com"]})]})]}),s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"platformType",children:"Platform Type *"}),s.jsxs(Ke,{value:c,onValueChange:d,children:[s.jsx(He,{className:"shadow-sm",children:s.jsx(Ye,{placeholder:"Select platform type"})}),s.jsx(We,{children:Kh.platformTypes.map(b=>s.jsx(le,{value:b.value,children:b.label},b.value))})]})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-semibold",children:"Admin User"}),s.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"adminName",children:"Admin Name *"}),s.jsx(Ae,{id:"adminName",value:f,onChange:b=>m(b.target.value),placeholder:"e.g., John Smith",className:"shadow-sm"})]}),s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"adminEmail",children:"Admin Email *"}),s.jsx(Ae,{id:"adminEmail",type:"email",value:u,onChange:b=>h(b.target.value),placeholder:"e.g., admin@sunshine-rv.com",className:"shadow-sm"})]})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-semibold",children:"Enabled Features"}),s.jsx("div",{className:"grid gap-3 md:grid-cols-2",children:g.map(b=>s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx($t,{id:`feature-${b.key}`,checked:v[b.key]||!1,onCheckedChange:()=>x(b.key)}),s.jsx(ae,{htmlFor:`feature-${b.key}`,className:"text-sm",children:b.label})]},b.key))})]}),s.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t",children:[s.jsx(Q,{type:"button",variant:"outline",onClick:t,disabled:n,children:"Cancel"}),s.jsx(Q,{type:"submit",disabled:n,children:n?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Creating..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Wn,{className:"h-4 w-4 mr-2"}),"Create Tenant"]})})]})]})})]})})}function BEe({tenantId:t,onClose:e}){var d;const{toast:n}=Ot(),[r,i]=A.useState(!1),a=Kh.sampleTenants.find(u=>u.id===t)||Kh.sampleTenants[0],o=async()=>{i(!0);try{await new Promise(u=>setTimeout(u,1e3)),n({title:"Tenant Suspended",description:`${a.name} has been suspended successfully.`})}catch{n({title:"Error",description:"Failed to suspend tenant",variant:"destructive"})}finally{i(!1)}},l=async()=>{if(confirm("Are you sure you want to delete this tenant? This action cannot be undone.")){i(!0);try{await new Promise(u=>setTimeout(u,1e3)),n({title:"Tenant Deleted",description:`${a.name} has been deleted successfully.`}),e()}catch{n({title:"Error",description:"Failed to delete tenant",variant:"destructive"})}finally{i(!1)}}},c=u=>{switch(u.toLowerCase()){case"active":return"bg-green-50 text-green-700 border-green-200";case"inactive":return"bg-gray-50 text-gray-700 border-gray-200";case"suspended":return"bg-red-50 text-red-700 border-red-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("h1",{className:"text-2xl font-bold",children:a.name}),s.jsx(Re,{className:c(a.status),children:a.status.toUpperCase()})]}),s.jsx("p",{className:"text-muted-foreground",children:a.domain})]}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsxs(Q,{variant:"outline",size:"sm",children:[s.jsx(ar,{className:"h-4 w-4 mr-2"}),"Edit"]}),s.jsxs(Q,{variant:"outline",size:"sm",onClick:o,disabled:r,children:[s.jsx(mm,{className:"h-4 w-4 mr-2"}),"Suspend"]}),s.jsxs(Q,{variant:"destructive",size:"sm",onClick:l,disabled:r,children:[s.jsx(Tr,{className:"h-4 w-4 mr-2"}),"Delete"]})]})]}),s.jsxs(Vn,{defaultValue:"overview",className:"space-y-4",children:[s.jsxs(Mn,{children:[s.jsx(tt,{value:"overview",children:"Overview"}),s.jsx(tt,{value:"users",children:"Users"}),s.jsx(tt,{value:"settings",children:"Settings"}),s.jsx(tt,{value:"activity",children:"Activity"})]}),s.jsx(rt,{value:"overview",className:"space-y-4",children:s.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:[s.jsxs(he,{children:[s.jsxs(ye,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(be,{className:"text-sm font-medium",children:"Basic Information"}),s.jsx(sb,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsx(fe,{children:s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Platform Type:"}),s.jsx("span",{children:((d=Kh.platformTypes.find(u=>u.value===a.platformType))==null?void 0:d.label)||a.platformType})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Created:"}),s.jsx("span",{children:ht(new Date(a.createdAt))})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Last Activity:"}),s.jsx("span",{children:ht(new Date(a.lastActivity))})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Users:"}),s.jsx("span",{children:a.userCount})]})]})})]}),s.jsxs(he,{children:[s.jsxs(ye,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(be,{className:"text-sm font-medium",children:"Usage Statistics"}),s.jsx(Yx,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsx(fe,{children:s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Storage Used:"}),s.jsxs("span",{children:[a.storageUsed," GB"]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"API Calls (Monthly):"}),s.jsx("span",{children:a.monthlyApiCalls.toLocaleString()})]})]})})]}),s.jsxs(he,{children:[s.jsxs(ye,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(be,{className:"text-sm font-medium",children:"Subscription"}),s.jsx(Wa,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsx(fe,{children:s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Plan:"}),s.jsx("span",{children:a.subscription.plan})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Status:"}),s.jsx(Re,{variant:a.subscription.status==="Active"?"default":"secondary",children:a.subscription.status})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Amount:"}),s.jsxs("span",{children:[Le(a.subscription.amount),"/month"]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Next Billing:"}),s.jsx("span",{children:ht(new Date(a.subscription.nextBilling))})]})]})})]})]})}),s.jsx(rt,{value:"users",className:"space-y-4",children:s.jsxs(he,{children:[s.jsxs(ye,{children:[s.jsx(be,{children:"Users"}),s.jsx(Be,{children:"Manage users for this tenant"})]}),s.jsx(fe,{children:s.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[s.jsx(Lr,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),s.jsx("p",{children:"User management coming soon"})]})})]})}),s.jsx(rt,{value:"settings",className:"space-y-4",children:s.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[s.jsxs(he,{children:[s.jsx(ye,{children:s.jsx(be,{children:"General Settings"})}),s.jsx(fe,{children:s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Timezone:"}),s.jsx("span",{children:a.settings.timezone})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Currency:"}),s.jsx("span",{children:a.settings.currency})]})]})})]}),s.jsxs(he,{children:[s.jsx(ye,{children:s.jsx(be,{children:"Features"})}),s.jsx(fe,{children:s.jsx("div",{className:"space-y-4",children:Object.entries(a.settings.features).map(([u,h])=>s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"capitalize",children:u.charAt(0).toUpperCase()+u.slice(1).replace(/([A-Z])/g," $1")}),s.jsx(Re,{variant:h?"default":"secondary",children:h?"Enabled":"Disabled"})]},u))})})]})]})}),s.jsx(rt,{value:"activity",className:"space-y-4",children:s.jsxs(he,{children:[s.jsxs(ye,{children:[s.jsx(be,{children:"Activity Log"}),s.jsx(Be,{children:"Recent tenant activity"})]}),s.jsx(fe,{children:s.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[s.jsx(Yx,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),s.jsx("p",{children:"No recent activity"})]})})]})})]})]})}const zEe=[{id:"1",name:"Demo RV Dealership",domain:"demo.renterinsight.com",status:"active",users:5,createdAt:new Date("2024-01-01"),lastActivity:new Date("2024-01-20")},{id:"2",name:"Sunshine RV Center",domain:"sunshine.renterinsight.com",status:"active",users:12,createdAt:new Date("2023-12-15"),lastActivity:new Date("2024-01-19")}],wx={totalTenants:2,activeTenants:2,totalUsers:17,systemUptime:"99.9%",avgResponseTime:"120ms",errorRate:"0.1%"};function UEe(){const{hasRole:t}=Hb(),{toast:e}=Ot(),[n,r]=A.useState(zEe),[i,a]=A.useState(""),[o,l]=A.useState(null),[c,d]=A.useState(!1),[u,h]=A.useState(!1);if(!t(ej.ADMIN))return s.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:s.jsx(he,{className:"w-full max-w-md shadow-sm",children:s.jsxs(ye,{className:"text-center",children:[s.jsx(Ba,{className:"h-12 w-12 text-orange-500 mx-auto mb-4"}),s.jsx(be,{children:"Access Denied"}),s.jsx(Be,{children:"You don't have permission to access the Platform Admin area."})]})})});n.filter(p=>p.name.toLowerCase().includes(i.toLowerCase())||p.domain.toLowerCase().includes(i.toLowerCase()));const f=()=>{d(!0)},m=p=>{try{const g={id:Math.random().toString(36).substring(2,9),...p,status:p.isActive?"active":"inactive",users:0,createdAt:new Date,lastActivity:new Date};r(x=>[...x,g]),d(!1),e({title:"Tenant Created",description:`${p.name} has been created successfully.`})}catch{e({title:"Error",description:"Failed to create tenant",variant:"destructive"})}},v=(p,g)=>{try{const x=n.map(y=>y.id===p?{...y,...g}:y);r(x),h(!1),e({title:"Tenant Updated",description:`${g.name} has been updated successfully.`})}catch{e({title:"Error",description:"Failed to update tenant",variant:"destructive"})}};return s.jsxs("div",{className:"space-y-8",children:[c&&s.jsx($Ee,{onSave:m,onCancel:()=>d(!1)}),u&&o&&s.jsx(BEe,{tenant:o,onSave:v,onClose:()=>{h(!1),l(null)}}),s.jsx("div",{className:"ri-page-header",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"ri-page-title",children:"Platform Admin"}),s.jsx("p",{className:"ri-page-description",children:"System administration and tenant management"})]}),s.jsxs("div",{children:[s.jsxs(Q,{className:"shadow-sm",onClick:f,children:[s.jsx(yt,{className:"h-4 w-4 mr-2"}),"Add Tenant"]}),s.jsxs(Q,{onClick:()=>window.location.href="/admin/settings",className:"shadow-sm ml-2",children:[s.jsx(Wa,{className:"h-4 w-4 mr-2"}),"Platform Settings"]})]})]})}),s.jsxs("div",{className:"grid gap-4 md:grid-cols-3 lg:grid-cols-6",children:[s.jsxs(he,{className:"shadow-sm border-0 bg-gradient-to-br from-blue-50 to-blue-100/50",children:[s.jsxs(ye,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(be,{className:"text-sm font-medium text-blue-900",children:"Total Tenants"}),s.jsx(sb,{className:"h-4 w-4 text-blue-600"})]}),s.jsxs(fe,{children:[s.jsx("div",{className:"text-2xl font-bold text-blue-900",children:wx.totalTenants}),s.jsxs("p",{className:"text-xs text-blue-600 flex items-center mt-1",children:[s.jsx(tn,{className:"h-3 w-3 mr-1"}),"All tenants"]})]})]}),s.jsxs(he,{className:"shadow-sm border-0 bg-gradient-to-br from-green-50 to-green-100/50",children:[s.jsxs(ye,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(be,{className:"text-sm font-medium text-green-900",children:"Active Tenants"}),s.jsx(sb,{className:"h-4 w-4 text-green-600"})]}),s.jsxs(fe,{children:[s.jsx("div",{className:"text-2xl font-bold text-green-900",children:wx.activeTenants}),s.jsxs("p",{className:"text-xs text-green-600 flex items-center mt-1",children:[s.jsx(Yx,{className:"h-3 w-3 mr-1"}),"Currently active"]})]})]}),s.jsxs(he,{className:"shadow-sm border-0 bg-gradient-to-br from-purple-50 to-purple-100/50",children:[s.jsxs(ye,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(be,{className:"text-sm font-medium text-purple-900",children:"Total Users"}),s.jsx(Lr,{className:"h-4 w-4 text-purple-600"})]}),s.jsxs(fe,{children:[s.jsx("div",{className:"text-2xl font-bold text-purple-900",children:wx.totalUsers}),s.jsxs("p",{className:"text-xs text-purple-600 flex items-center mt-1",children:[s.jsx(Lr,{className:"h-3 w-3 mr-1"}),"All users"]})]})]}),s.jsxs(he,{className:"shadow-sm border-0 bg-gradient-to-br from-green-50 to-green-100/50",children:[s.jsxs(ye,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(be,{className:"text-sm font-medium text-green-900",children:"System Uptime"}),s.jsx(Yx,{className:"h-4 w-4 text-green-600"})]}),s.jsxs(fe,{children:[s.jsx("div",{className:"text-2xl font-bold text-green-900",children:wx.systemUptime}),s.jsxs("p",{className:"text-xs text-green-600 flex items-center mt-1",children:[s.jsx(Yx,{className:"h-3 w-3 mr-1"}),"Excellent"]})]})]}),s.jsxs(he,{className:"shadow-sm border-0 bg-gradient-to-br from-blue-50 to-blue-100/50",children:[s.jsxs(ye,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(be,{className:"text-sm font-medium text-blue-900",children:"Avg Response"}),s.jsx(Yx,{className:"h-4 w-4 text-blue-600"})]}),s.jsxs(fe,{children:[s.jsx("div",{className:"text-2xl font-bold text-blue-900",children:wx.avgResponseTime}),s.jsxs("p",{className:"text-xs text-blue-600 flex items-center mt-1",children:[s.jsx(tn,{className:"h-3 w-3 mr-1"}),"Fast response"]})]})]}),s.jsxs(he,{className:"shadow-sm border-0 bg-gradient-to-br from-green-50 to-green-100/50",children:[s.jsxs(ye,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(be,{className:"text-sm font-medium text-green-900",children:"Error Rate"}),s.jsx(Ba,{className:"h-4 w-4 text-green-600"})]}),s.jsxs(fe,{children:[s.jsx("div",{className:"text-2xl font-bold text-green-900",children:wx.errorRate}),s.jsxs("p",{className:"text-xs text-green-600 flex items-center mt-1",children:[s.jsx(tn,{className:"h-3 w-3 mr-1"}),"Very low"]})]})]})]})]})}function VEe({initialReportConfig:t,onGenerate:e,onExportCSV:n,isGenerating:r,hasData:i}){const{toast:a}=Ot(),[o,l]=A.useState({type:dr.SALES,name:"Sales Report",dateRange:{startDate:"2023-01-01",endDate:new Date().toISOString().split("T")[0]},filters:{}}),c=u=>{if(u.preventDefault(),console.log("handleSubmit called from ReportGeneratorForm"),!o.name){a({title:"Validation Error",description:"Report name is required",variant:"destructive"});return}console.log("Calling onGenerate with config:",o),e(o)},d=u=>{let h="Custom Report";switch(u){case dr.SALES:h="Sales Report";break;case dr.INVENTORY:h="Inventory Report";break;case dr.SERVICE:h="Service Report";break;case dr.FINANCIAL:h="Financial Report";break}l(f=>({...f,type:u,name:h}))};return A.useEffect(()=>{t&&(console.log("ReportGeneratorForm useEffect triggered with initialReportConfig:",t),l(t))},[t]),s.jsxs(he,{className:"shadow-sm",children:[s.jsx(ye,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsxs(be,{className:"flex items-center",children:[s.jsx(ms,{className:"h-5 w-5 mr-2 text-primary"}),"Generate Report"]}),s.jsx(Be,{children:"Configure and generate custom reports"})]}),s.jsxs(Q,{variant:"outline",size:"sm",onClick:n,children:[s.jsx(Ha,{className:"h-4 w-4 mr-2"}),"Export CSV"]})]})}),s.jsx(fe,{children:s.jsxs("form",{onSubmit:c,className:"space-y-4",children:[s.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"reportType",children:"Report Type"}),s.jsxs(Ke,{value:o.type,onValueChange:u=>d(u),children:[s.jsx(He,{children:s.jsx(Ye,{})}),s.jsxs(We,{children:[s.jsx(le,{value:dr.SALES,children:"Sales Report"}),s.jsx(le,{value:dr.INVENTORY,children:"Inventory Report"}),s.jsx(le,{value:dr.SERVICE,children:"Service Report"}),s.jsx(le,{value:dr.FINANCIAL,children:"Financial Report"}),s.jsx(le,{value:dr.CUSTOM,children:"Custom Report"})]})]})]}),s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"reportName",children:"Report Name"}),s.jsx(Ae,{id:"reportName",value:o.name,onChange:u=>l(h=>({...h,name:u.target.value})),placeholder:"Enter report name"})]})]}),s.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"startDate",children:"Start Date"}),s.jsxs("div",{className:"relative",children:[s.jsx(Sn,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),s.jsx(Ae,{id:"startDate",type:"date",value:o.dateRange.startDate,onChange:u=>l(h=>({...h,dateRange:{...h.dateRange,startDate:u.target.value}})),className:"pl-10"})]})]}),s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"endDate",children:"End Date"}),s.jsxs("div",{className:"relative",children:[s.jsx(Sn,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),s.jsx(Ae,{id:"endDate",type:"date",value:o.dateRange.endDate,onChange:u=>l(h=>({...h,dateRange:{...h.dateRange,endDate:u.target.value}})),className:"pl-10"})]})]})]}),s.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"salesRep",children:"Sales Rep"}),s.jsxs(Ke,{value:o.filters.salesRep||"",onValueChange:u=>l(h=>({...h,filters:{...h.filters,salesRep:u||void 0}})),children:[s.jsx(He,{children:s.jsx(Ye,{placeholder:"All Sales Reps"})}),s.jsxs(We,{children:[s.jsx(le,{value:"",children:"All Sales Reps"}),s.jsx(le,{value:"rep-001",children:"John Smith"}),s.jsx(le,{value:"rep-002",children:"Sarah Johnson"}),s.jsx(le,{value:"rep-003",children:"Mike Davis"})]})]})]}),s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"status",children:"Status"}),s.jsxs(Ke,{value:o.filters.status||"",onValueChange:u=>l(h=>({...h,filters:{...h.filters,status:u||void 0}})),children:[s.jsx(He,{children:s.jsx(Ye,{placeholder:"All Statuses"})}),s.jsxs(We,{children:[s.jsx(le,{value:"",children:"All Statuses"}),s.jsx(le,{value:"active",children:"Active"}),s.jsx(le,{value:"completed",children:"Completed"}),s.jsx(le,{value:"cancelled",children:"Cancelled"})]})]})]}),s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"location",children:"Location"}),s.jsxs(Ke,{value:o.filters.location||"",onValueChange:u=>l(h=>({...h,filters:{...h.filters,location:u||void 0}})),children:[s.jsx(He,{children:s.jsx(Ye,{placeholder:"All Locations"})}),s.jsxs(We,{children:[s.jsx(le,{value:"",children:"All Locations"}),s.jsx(le,{value:"north",children:"North Region"}),s.jsx(le,{value:"south",children:"South Region"}),s.jsx(le,{value:"east",children:"East Region"}),s.jsx(le,{value:"west",children:"West Region"})]})]})]})]}),s.jsxs("div",{className:"flex justify-between pt-4",children:[s.jsxs(Q,{type:"button",variant:"outline",children:[s.jsx(bc,{className:"h-4 w-4 mr-2"}),"More Filters"]}),s.jsxs("div",{className:"flex space-x-2",children:[i&&s.jsxs(Q,{type:"button",variant:"outline",onClick:n,children:[s.jsx(Ha,{className:"h-4 w-4 mr-2"}),"Export CSV"]}),s.jsx(Q,{type:"submit",disabled:r,children:r?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Generating..."]}):s.jsxs(s.Fragment,{children:[s.jsx(ms,{className:"h-4 w-4 mr-2"}),"Generate Report"]})})]})]})]})})]})}const Xx={availableReports:[{id:"finance-summary",name:"Finance Summary",description:"Overview of financial performance and loan metrics",category:"Finance"},{id:"inventory-status",name:"Inventory Status",description:"Current inventory levels and vehicle availability",category:"Inventory"},{id:"quote-conversions",name:"Quote Conversions",description:"Quote generation and conversion rates",category:"Sales"},{id:"service-performance",name:"Service Ticket Performance",description:"Service ticket resolution times and customer satisfaction",category:"Service"},{id:"delivery-timelines",name:"Delivery Timelines",description:"Delivery scheduling and completion metrics",category:"Operations"},{id:"crm-pipeline",name:"CRM Pipeline Analysis",description:"Lead progression and sales pipeline performance",category:"CRM"},{id:"commission-summary",name:"Commission Summary",description:"Sales team commission tracking and payouts",category:"Finance"},{id:"customer-satisfaction",name:"Customer Satisfaction",description:"Customer feedback and satisfaction scores",category:"Service"}],reportCategories:["All","Finance","Inventory","Sales","Service","Operations","CRM"],timeRangeOptions:[{value:"7d",label:"7 Days"},{value:"30d",label:"30 Days"},{value:"this_month",label:"This Month"},{value:"last_month",label:"Last Month"},{value:"ytd",label:"Year to Date"},{value:"last_year",label:"Last Year"},{value:"custom",label:"Custom Range"}],chartTypes:[{value:"bar",label:"Bar Chart",icon:"BarChart3"},{value:"line",label:"Line Chart",icon:"LineChart"},{value:"pie",label:"Pie Chart",icon:"PieChart"},{value:"numberCard",label:"Number Cards",icon:"Hash"},{value:"table",label:"Data Table",icon:"Table"}],exportFormats:[{value:"pdf",label:"PDF",icon:"FileText"},{value:"excel",label:"Excel",icon:"FileSpreadsheet"},{value:"csv",label:"CSV",icon:"Download"}],sampleReportResults:{"finance-summary":{chartType:"bar",title:"Monthly Revenue",data:[{label:"Jan",value:125e3,color:"#3b82f6"},{label:"Feb",value:158e3,color:"#3b82f6"},{label:"Mar",value:143e3,color:"#3b82f6"},{label:"Apr",value:167e3,color:"#3b82f6"},{label:"May",value:189e3,color:"#3b82f6"},{label:"Jun",value:201e3,color:"#3b82f6"}],summary:{totalRevenue:1083e3,averageMonthly:180500,growth:12.5}},"inventory-status":{chartType:"pie",title:"Inventory by Status",data:[{label:"Available",value:45,color:"#10b981"},{label:"Pending",value:12,color:"#f59e0b"},{label:"Sold",value:28,color:"#3b82f6"},{label:"Service",value:8,color:"#ef4444"}],summary:{totalUnits:93,availableUnits:45,utilizationRate:51.6}},"quote-conversions":{chartType:"numberCard",title:"Quote Performance",data:[{label:"Quotes Sent",value:48,trend:"+12%",color:"blue"},{label:"Quotes Accepted",value:32,trend:"+8%",color:"green"},{label:"Conversion Rate",value:"66.7%",trend:"+2.1%",color:"green"},{label:"Avg Quote Value",value:"$45,250",trend:"+5%",color:"blue"}],summary:{totalQuotes:48,acceptedQuotes:32,conversionRate:66.7}},"service-performance":{chartType:"line",title:"Service Ticket Resolution",data:[{label:"Week 1",value:24,color:"#3b82f6"},{label:"Week 2",value:31,color:"#3b82f6"},{label:"Week 3",value:28,color:"#3b82f6"},{label:"Week 4",value:35,color:"#3b82f6"}],summary:{totalTickets:118,avgResolutionTime:2.3,customerSatisfaction:4.6}},"delivery-timelines":{chartType:"bar",title:"Delivery Performance",data:[{label:"On Time",value:78,color:"#10b981"},{label:"Delayed",value:12,color:"#f59e0b"},{label:"Cancelled",value:3,color:"#ef4444"}],summary:{totalDeliveries:93,onTimeRate:83.9,avgDeliveryTime:5.2}},"crm-pipeline":{chartType:"bar",title:"Sales Pipeline",data:[{label:"New Leads",value:45,color:"#6366f1"},{label:"Qualified",value:32,color:"#8b5cf6"},{label:"Proposal",value:18,color:"#a855f7"},{label:"Negotiation",value:12,color:"#c084fc"},{label:"Closed Won",value:8,color:"#10b981"}],summary:{totalLeads:115,conversionRate:7,avgDealSize:52e3}}},dashboardWidgets:[{id:"revenue-trend",title:"Revenue Trend",type:"line",size:"large",reportId:"finance-summary"},{id:"quote-conversion",title:"Quote Conversion",type:"numberCard",size:"medium",reportId:"quote-conversions"},{id:"inventory-status",title:"Inventory Status",type:"pie",size:"medium",reportId:"inventory-status"},{id:"service-tickets",title:"Service Performance",type:"bar",size:"medium",reportId:"service-performance"}],filterOptions:{dateRanges:[{value:"today",label:"Today"},{value:"yesterday",label:"Yesterday"},{value:"last_7_days",label:"Last 7 Days"},{value:"last_30_days",label:"Last 30 Days"},{value:"this_month",label:"This Month"},{value:"last_month",label:"Last Month"},{value:"this_quarter",label:"This Quarter"},{value:"last_quarter",label:"Last Quarter"},{value:"this_year",label:"This Year"},{value:"last_year",label:"Last Year"}],groupBy:[{value:"day",label:"By Day"},{value:"week",label:"By Week"},{value:"month",label:"By Month"},{value:"quarter",label:"By Quarter"},{value:"year",label:"By Year"}],salesReps:[{value:"all",label:"All Sales Reps"},{value:"john_smith",label:"John Smith"},{value:"sarah_johnson",label:"Sarah Johnson"},{value:"mike_davis",label:"Mike Davis"},{value:"lisa_chen",label:"Lisa Chen"}],vehicleTypes:[{value:"all",label:"All Types"},{value:"rv",label:"RV"},{value:"motorhome",label:"Motorhome"},{value:"travel_trailer",label:"Travel Trailer"},{value:"fifth_wheel",label:"Fifth Wheel"},{value:"manufactured_home",label:"Manufactured Home"}]},scheduledReports:[{id:"weekly-summary",name:"Weekly Performance Summary",reportId:"finance-summary",frequency:"weekly",recipients:["manager@company.com","owner@company.com"],format:"pdf",nextRun:"2024-01-22T09:00:00Z",isActive:!0},{id:"monthly-inventory",name:"Monthly Inventory Report",reportId:"inventory-status",frequency:"monthly",recipients:["inventory@company.com"],format:"excel",nextRun:"2024-02-01T08:00:00Z",isActive:!0}],reportTemplates:[{id:"executive-dashboard",name:"Executive Dashboard",description:"High-level overview for executives",widgets:["revenue-trend","quote-conversion","inventory-status"],isDefault:!0},{id:"sales-performance",name:"Sales Performance",description:"Detailed sales metrics and pipeline analysis",widgets:["quote-conversion","crm-pipeline"],isDefault:!1},{id:"operations-overview",name:"Operations Overview",description:"Service and delivery performance metrics",widgets:["service-tickets","inventory-status"],isDefault:!1}]};function qEe({reportType:t,reportName:e,data:n,columns:r,onExportCSV:i}){ya();const[a,o]=A.useState(""),[l,c]=A.useState("All"),d=n||[{id:"rpt-001",name:"Monthly Sales Summary",type:"finance-summary",category:"Finance",generatedAt:"2024-01-20T10:30:00Z",generatedBy:"John Smith",format:"PDF",size:"2.4 MB",status:"Completed"},{id:"rpt-002",name:"Inventory Status Report",type:"inventory-status",category:"Inventory",generatedAt:"2024-01-19T14:15:00Z",generatedBy:"Sarah Johnson",format:"Excel",size:"1.8 MB",status:"Completed"},{id:"rpt-003",name:"Quote Conversion Analysis",type:"quote-conversions",category:"Sales",generatedAt:"2024-01-18T09:45:00Z",generatedBy:"Mike Davis",format:"PDF",size:"3.1 MB",status:"Completed"},{id:"rpt-004",name:"Service Performance Review",type:"service-performance",category:"Service",generatedAt:"2024-01-17T16:20:00Z",generatedBy:"Lisa Chen",format:"CSV",size:"0.9 MB",status:"Processing"}],[u,h]=A.useState(null),[f,m]=A.useState("asc"),[v,p]=A.useState(1);[...n.filter(k=>Object.values(k).some(D=>D&&D.toString().toLowerCase().includes(a.toLowerCase())))].sort((k,D)=>{if(!u)return 0;const P=k[u],R=D[u];if(P===void 0||R===void 0)return 0;if(typeof P=="number"&&typeof R=="number")return f==="asc"?P-R:R-P;if(P instanceof Date&&R instanceof Date)return f==="asc"?P.getTime()-R.getTime():R.getTime()-P.getTime();const _=P.toString().toLowerCase(),M=R.toString().toLowerCase();return f==="asc"?_.localeCompare(M):M.localeCompare(_)});const x=["All",...Xx.reportCategories.filter(k=>k!=="All")],y=d.filter(k=>{const D=k.name.toLowerCase().includes(a.toLowerCase())||k.category.toLowerCase().includes(a.toLowerCase()),P=l==="All"||k.category===l;return D&&P}),b=k=>{switch(k.toLowerCase()){case"completed":return"bg-green-100 text-green-800";case"processing":return"bg-yellow-100 text-yellow-800";case"failed":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},w=k=>{switch(k.toLowerCase()){case"pdf":return s.jsx(Zt,{className:"h-4 w-4"});case"excel":return s.jsx(Zt,{className:"h-4 w-4"});case"csv":return s.jsx(Zt,{className:"h-4 w-4"});default:return s.jsx(Zt,{className:"h-4 w-4"})}},N=k=>new Date(k).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),E=k=>{const D=Xx.availableReports.find(P=>P.id===k);return(D==null?void 0:D.name)||k},C=k=>{console.log("Downloading report:",k)},j=k=>{console.log("Viewing report:",k)},I=k=>{console.log("Scheduling report:",k)};return s.jsxs(he,{className:"shadow-sm",children:[s.jsx(ye,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx(be,{children:e}),s.jsxs(Be,{children:[n.length," records found"]})]}),s.jsxs(Q,{variant:"outline",size:"sm",onClick:i,children:[s.jsx(Ha,{className:"h-4 w-4 mr-2"}),"Export CSV"]})]})}),s.jsxs(fe,{children:[s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 mb-6",children:[s.jsx("div",{className:"flex items-center",children:s.jsxs("div",{className:"relative flex-1",children:[s.jsx(Rr,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),s.jsx(Ae,{placeholder:"Search results...",value:a,onChange:k=>{o(k.target.value),p(1)},className:"pl-10"})]})}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(bc,{className:"h-4 w-4 text-muted-foreground"}),s.jsx("div",{className:"flex space-x-2",children:x.map(k=>s.jsx(Q,{variant:l===k?"default":"outline",size:"sm",onClick:()=>c(k),children:k},k))})]})]}),s.jsx("div",{className:"rounded-md border",children:s.jsxs(L3,{children:[s.jsx(R3,{children:s.jsxs(im,{children:[s.jsx(xr,{children:"Report Name"}),s.jsx(xr,{children:"Type"}),s.jsx(xr,{children:"Category"}),s.jsx(xr,{children:"Generated"}),s.jsx(xr,{children:"Generated By"}),s.jsx(xr,{children:"Format"}),s.jsx(xr,{children:"Size"}),s.jsx(xr,{children:"Status"}),s.jsx(xr,{className:"text-right",children:"Actions"})]})}),s.jsx(M3,{children:y.length>0?y.map(k=>s.jsxs(im,{children:[s.jsx(ur,{className:"font-medium",children:k.name}),s.jsx(ur,{children:E(k.type)}),s.jsx(ur,{children:s.jsx(Re,{variant:"outline",children:k.category})}),s.jsx(ur,{children:N(k.generatedAt)}),s.jsx(ur,{children:k.generatedBy}),s.jsx(ur,{children:s.jsxs("div",{className:"flex items-center space-x-2",children:[w(k.format),s.jsx("span",{children:k.format})]})}),s.jsx(ur,{children:k.size}),s.jsx(ur,{children:s.jsx(Re,{className:b(k.status),children:k.status})}),s.jsx(ur,{className:"text-right",children:s.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[s.jsx(Q,{variant:"ghost",size:"sm",onClick:()=>j(k.id),disabled:k.status!=="Completed",children:s.jsx(Wr,{className:"h-4 w-4"})}),s.jsx(Q,{variant:"ghost",size:"sm",onClick:()=>C(k.id),disabled:k.status!=="Completed",children:s.jsx(Ha,{className:"h-4 w-4"})}),s.jsx(Q,{variant:"ghost",size:"sm",onClick:()=>I(k.id),children:s.jsx(Sn,{className:"h-4 w-4"})})]})})]},k.id)):s.jsx(im,{children:s.jsx(ur,{colSpan:9,className:"text-center py-8 text-muted-foreground",children:a||l!=="All"?"No reports match your search criteria":"No reports generated yet"})})})]})}),y.length>0&&s.jsxs("div",{className:"flex items-center justify-between mt-4",children:[s.jsxs("p",{className:"text-sm text-muted-foreground",children:["Showing ",y.length," of ",d.length," reports"]}),s.jsxs(Q,{variant:"outline",size:"sm",children:[s.jsx(Ha,{className:"h-4 w-4 mr-2"}),"Export Selected"]})]})]})]})}function HEe(){const[t,e]=A.useState([]),[n,r]=A.useState([]),[i,a]=A.useState(!1),[o,l]=A.useState(null),{leads:c,salesReps:d}=uh(),{vehicles:u}=Im(),{tickets:h}=Lre(),{invoices:f,payments:m}=yse(),v=async w=>{a(!0),l(w);try{const N=new Date(w.dateRange.startDate),E=new Date(w.dateRange.endDate);let C=[],j=[];switch(w.type){case dr.SALES:C=p(N,E,w.filters),j=[{key:"id",label:"ID"},{key:"customerName",label:"Customer"},{key:"date",label:"Date",type:"date"},{key:"product",label:"Product"},{key:"salesRep",label:"Sales Rep"},{key:"amount",label:"Amount",type:"currency"},{key:"status",label:"Status"}];break;case dr.INVENTORY:C=g(w.filters),j=[{key:"id",label:"ID"},{key:"vin",label:"VIN"},{key:"make",label:"Make"},{key:"model",label:"Model"},{key:"year",label:"Year",type:"number"},{key:"type",label:"Type"},{key:"status",label:"Status"},{key:"price",label:"Price",type:"currency"},{key:"cost",label:"Cost",type:"currency"},{key:"location",label:"Location"}];break;case dr.SERVICE:C=x(N,E,w.filters),j=[{key:"id",label:"Ticket ID"},{key:"title",label:"Title"},{key:"customer",label:"Customer"},{key:"vehicle",label:"Vehicle"},{key:"status",label:"Status"},{key:"createdAt",label:"Created",type:"date"},{key:"completedAt",label:"Completed",type:"date"},{key:"partsTotal",label:"Parts Total",type:"currency"},{key:"laborTotal",label:"Labor Total",type:"currency"},{key:"total",label:"Total",type:"currency"}];break;case dr.FINANCIAL:C=y(N,E,w.filters),j=[{key:"date",label:"Date",type:"date"},{key:"type",label:"Type"},{key:"reference",label:"Reference"},{key:"customer",label:"Customer"},{key:"description",label:"Description"},{key:"income",label:"Income",type:"currency"},{key:"expense",label:"Expense",type:"currency"},{key:"balance",label:"Balance",type:"currency"}];break;default:C=[],j=[]}e(C),r(j)}catch(N){console.error("Error generating report:",N)}finally{a(!1)}},p=(w,N,E)=>c.filter(j=>{const I=new Date(j.createdAt),k=I>=w&&I<=N,D=!E.salesRep||j.assignedTo===E.salesRep,P=!E.status||j.status===E.status;return k&&D&&P}).map(j=>{var k,D;const I=d.find(P=>P.id===j.assignedTo);return{id:j.id,customerName:`${j.firstName} ${j.lastName}`,date:j.createdAt,product:((k=j.customFields)==null?void 0:k.interests)||"N/A",salesRep:(I==null?void 0:I.name)||"Unassigned",amount:(D=j.customFields)!=null&&D.budget&&parseFloat(j.customFields.budget.replace(/[^0-9.]/g,""))||0,status:j.status}}),g=w=>u.filter(E=>{const C=!w.location||E.location.toLowerCase().includes(w.location.toLowerCase()),j=!w.status||E.status===w.status;return C&&j}).map(E=>({id:E.id,vin:E.vin,make:E.make,model:E.model,year:E.year,type:E.type,status:E.status,price:E.price,cost:E.cost,location:E.location})),x=(w,N,E)=>h.filter(j=>{const I=new Date(j.createdAt),k=I>=w&&I<=N,D=!E.status||j.status===E.status;return k&&D}).map(j=>{const I=j.parts.reduce((D,P)=>D+P.total,0),k=j.labor.reduce((D,P)=>D+P.total,0);return{id:j.id,title:j.title,customer:j.customerId,vehicle:j.vehicleId||"N/A",status:j.status,createdAt:j.createdAt,completedAt:j.completedDate,partsTotal:I,laborTotal:k,total:I+k}}),y=(w,N,E)=>{const C=[];return f.forEach(j=>{const I=new Date(j.createdAt);I>=w&&I<=N&&C.push({date:j.createdAt,type:"Invoice",reference:j.number,customer:j.customerId,description:`Invoice #${j.number}`,income:j.total,expense:0,balance:j.total})}),m.forEach(j=>{var k;const I=new Date(j.processedDate);I>=w&&I<=N&&C.push({date:j.processedDate,type:"Payment",reference:j.id,customer:((k=f.find(D=>D.id===j.invoiceId))==null?void 0:k.customerId)||"Unknown",description:`Payment for Invoice #${j.invoiceId}`,income:0,expense:j.amount,balance:-j.amount})}),C.sort((j,I)=>new Date(j.date).getTime()-new Date(I.date).getTime())};return{reportData:t,reportColumns:n,loading:i,currentReportConfig:o,generateReport:v,exportToCSV:()=>{if(!t.length||!n.length)return;const w=n.map(k=>k.label),N=t.map(k=>n.map(D=>{const P=k[D.key];switch(D.type){case"currency":return typeof P=="number"?P.toFixed(2):P;case"date":return P instanceof Date?P.toISOString().split("T")[0]:P;default:return P}})),E=ob.unparse({fields:w,data:N}),C=new Blob([E],{type:"text/csv;charset=utf-8;"}),j=URL.createObjectURL(C),I=document.createElement("a");I.href=j,I.setAttribute("download",`${(o==null?void 0:o.name)||"report"}.csv`),document.body.appendChild(I),I.click(),document.body.removeChild(I)}}}function bse(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=bse(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function dn(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=bse(t))&&(r&&(r+=" "),r+=e);return r}var WEe=Array.isArray,Ka=WEe,GEe=typeof $f=="object"&&$f&&$f.Object===Object&&$f,wse=GEe,KEe=wse,YEe=typeof self=="object"&&self&&self.Object===Object&&self,XEe=KEe||YEe||Function("return this")(),_d=XEe,ZEe=_d,QEe=ZEe.Symbol,kA=QEe,YV=kA,jse=Object.prototype,JEe=jse.hasOwnProperty,ePe=jse.toString,lw=YV?YV.toStringTag:void 0;function tPe(t){var e=JEe.call(t,lw),n=t[lw];try{t[lw]=void 0;var r=!0}catch{}var i=ePe.call(t);return r&&(e?t[lw]=n:delete t[lw]),i}var nPe=tPe,rPe=Object.prototype,sPe=rPe.toString;function iPe(t){return sPe.call(t)}var aPe=iPe,XV=kA,oPe=nPe,lPe=aPe,cPe="[object Null]",dPe="[object Undefined]",ZV=XV?XV.toStringTag:void 0;function uPe(t){return t==null?t===void 0?dPe:cPe:ZV&&ZV in Object(t)?oPe(t):lPe(t)}var hh=uPe;function hPe(t){return t!=null&&typeof t=="object"}var fh=hPe,fPe=hh,mPe=fh,pPe="[object Symbol]";function gPe(t){return typeof t=="symbol"||mPe(t)&&fPe(t)==pPe}var Jb=gPe,vPe=Ka,xPe=Jb,yPe=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,bPe=/^\w*$/;function wPe(t,e){if(vPe(t))return!1;var n=typeof t;return n=="number"||n=="symbol"||n=="boolean"||t==null||xPe(t)?!0:bPe.test(t)||!yPe.test(t)||e!=null&&t in Object(e)}var $8=wPe;function jPe(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var km=jPe;const e1=$n(km);var NPe=hh,SPe=km,APe="[object AsyncFunction]",CPe="[object Function]",EPe="[object GeneratorFunction]",PPe="[object Proxy]";function TPe(t){if(!SPe(t))return!1;var e=NPe(t);return e==CPe||e==EPe||e==APe||e==PPe}var B8=TPe;const Wt=$n(B8);var IPe=_d,DPe=IPe["__core-js_shared__"],kPe=DPe,rO=kPe,QV=function(){var t=/[^.]+$/.exec(rO&&rO.keys&&rO.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function _Pe(t){return!!QV&&QV in t}var OPe=_Pe,LPe=Function.prototype,RPe=LPe.toString;function MPe(t){if(t!=null){try{return RPe.call(t)}catch{}try{return t+""}catch{}}return""}var Nse=MPe,FPe=B8,$Pe=OPe,BPe=km,zPe=Nse,UPe=/[\\^$.*+?()[\]{}|]/g,VPe=/^\[object .+?Constructor\]$/,qPe=Function.prototype,HPe=Object.prototype,WPe=qPe.toString,GPe=HPe.hasOwnProperty,KPe=RegExp("^"+WPe.call(GPe).replace(UPe,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function YPe(t){if(!BPe(t)||$Pe(t))return!1;var e=FPe(t)?KPe:VPe;return e.test(zPe(t))}var XPe=YPe;function ZPe(t,e){return t==null?void 0:t[e]}var QPe=ZPe,JPe=XPe,e4e=QPe;function t4e(t,e){var n=e4e(t,e);return JPe(n)?n:void 0}var Dv=t4e,n4e=Dv,r4e=n4e(Object,"create"),U3=r4e,JV=U3;function s4e(){this.__data__=JV?JV(null):{},this.size=0}var i4e=s4e;function a4e(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var o4e=a4e,l4e=U3,c4e="__lodash_hash_undefined__",d4e=Object.prototype,u4e=d4e.hasOwnProperty;function h4e(t){var e=this.__data__;if(l4e){var n=e[t];return n===c4e?void 0:n}return u4e.call(e,t)?e[t]:void 0}var f4e=h4e,m4e=U3,p4e=Object.prototype,g4e=p4e.hasOwnProperty;function v4e(t){var e=this.__data__;return m4e?e[t]!==void 0:g4e.call(e,t)}var x4e=v4e,y4e=U3,b4e="__lodash_hash_undefined__";function w4e(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=y4e&&e===void 0?b4e:e,this}var j4e=w4e,N4e=i4e,S4e=o4e,A4e=f4e,C4e=x4e,E4e=j4e;function t1(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}t1.prototype.clear=N4e;t1.prototype.delete=S4e;t1.prototype.get=A4e;t1.prototype.has=C4e;t1.prototype.set=E4e;var P4e=t1;function T4e(){this.__data__=[],this.size=0}var I4e=T4e;function D4e(t,e){return t===e||t!==t&&e!==e}var z8=D4e,k4e=z8;function _4e(t,e){for(var n=t.length;n--;)if(k4e(t[n][0],e))return n;return-1}var V3=_4e,O4e=V3,L4e=Array.prototype,R4e=L4e.splice;function M4e(t){var e=this.__data__,n=O4e(e,t);if(n<0)return!1;var r=e.length-1;return n==r?e.pop():R4e.call(e,n,1),--this.size,!0}var F4e=M4e,$4e=V3;function B4e(t){var e=this.__data__,n=$4e(e,t);return n<0?void 0:e[n][1]}var z4e=B4e,U4e=V3;function V4e(t){return U4e(this.__data__,t)>-1}var q4e=V4e,H4e=V3;function W4e(t,e){var n=this.__data__,r=H4e(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this}var G4e=W4e,K4e=I4e,Y4e=F4e,X4e=z4e,Z4e=q4e,Q4e=G4e;function n1(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}n1.prototype.clear=K4e;n1.prototype.delete=Y4e;n1.prototype.get=X4e;n1.prototype.has=Z4e;n1.prototype.set=Q4e;var q3=n1,J4e=Dv,eTe=_d,tTe=J4e(eTe,"Map"),U8=tTe,eq=P4e,nTe=q3,rTe=U8;function sTe(){this.size=0,this.__data__={hash:new eq,map:new(rTe||nTe),string:new eq}}var iTe=sTe;function aTe(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}var oTe=aTe,lTe=oTe;function cTe(t,e){var n=t.__data__;return lTe(e)?n[typeof e=="string"?"string":"hash"]:n.map}var H3=cTe,dTe=H3;function uTe(t){var e=dTe(this,t).delete(t);return this.size-=e?1:0,e}var hTe=uTe,fTe=H3;function mTe(t){return fTe(this,t).get(t)}var pTe=mTe,gTe=H3;function vTe(t){return gTe(this,t).has(t)}var xTe=vTe,yTe=H3;function bTe(t,e){var n=yTe(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this}var wTe=bTe,jTe=iTe,NTe=hTe,STe=pTe,ATe=xTe,CTe=wTe;function r1(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}r1.prototype.clear=jTe;r1.prototype.delete=NTe;r1.prototype.get=STe;r1.prototype.has=ATe;r1.prototype.set=CTe;var V8=r1,Sse=V8,ETe="Expected a function";function q8(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError(ETe);var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],a=n.cache;if(a.has(i))return a.get(i);var o=t.apply(this,r);return n.cache=a.set(i,o)||a,o};return n.cache=new(q8.Cache||Sse),n}q8.Cache=Sse;var Ase=q8;const PTe=$n(Ase);var TTe=Ase,ITe=500;function DTe(t){var e=TTe(t,function(r){return n.size===ITe&&n.clear(),r}),n=e.cache;return e}var kTe=DTe,_Te=kTe,OTe=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,LTe=/\\(\\)?/g,RTe=_Te(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(OTe,function(n,r,i,a){e.push(i?a.replace(LTe,"$1"):r||n)}),e}),MTe=RTe;function FTe(t,e){for(var n=-1,r=t==null?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}var H8=FTe,tq=kA,$Te=H8,BTe=Ka,zTe=Jb,UTe=1/0,nq=tq?tq.prototype:void 0,rq=nq?nq.toString:void 0;function Cse(t){if(typeof t=="string")return t;if(BTe(t))return $Te(t,Cse)+"";if(zTe(t))return rq?rq.call(t):"";var e=t+"";return e=="0"&&1/t==-UTe?"-0":e}var VTe=Cse,qTe=VTe;function HTe(t){return t==null?"":qTe(t)}var Ese=HTe,WTe=Ka,GTe=$8,KTe=MTe,YTe=Ese;function XTe(t,e){return WTe(t)?t:GTe(t,e)?[t]:KTe(YTe(t))}var Pse=XTe,ZTe=Jb,QTe=1/0;function JTe(t){if(typeof t=="string"||ZTe(t))return t;var e=t+"";return e=="0"&&1/t==-QTe?"-0":e}var W3=JTe,eIe=Pse,tIe=W3;function nIe(t,e){e=eIe(e,t);for(var n=0,r=e.length;t!=null&&n<r;)t=t[tIe(e[n++])];return n&&n==r?t:void 0}var W8=nIe,rIe=W8;function sIe(t,e,n){var r=t==null?void 0:rIe(t,e);return r===void 0?n:r}var Tse=sIe;const Ro=$n(Tse);function iIe(t){return t==null}var aIe=iIe;const Qt=$n(aIe);var oIe=hh,lIe=Ka,cIe=fh,dIe="[object String]";function uIe(t){return typeof t=="string"||!lIe(t)&&cIe(t)&&oIe(t)==dIe}var hIe=uIe;const mv=$n(hIe);var Ise={exports:{}},er={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var G8=Symbol.for("react.element"),K8=Symbol.for("react.portal"),G3=Symbol.for("react.fragment"),K3=Symbol.for("react.strict_mode"),Y3=Symbol.for("react.profiler"),X3=Symbol.for("react.provider"),Z3=Symbol.for("react.context"),fIe=Symbol.for("react.server_context"),Q3=Symbol.for("react.forward_ref"),J3=Symbol.for("react.suspense"),eD=Symbol.for("react.suspense_list"),tD=Symbol.for("react.memo"),nD=Symbol.for("react.lazy"),mIe=Symbol.for("react.offscreen"),Dse;Dse=Symbol.for("react.module.reference");function Sl(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case G8:switch(t=t.type,t){case G3:case Y3:case K3:case J3:case eD:return t;default:switch(t=t&&t.$$typeof,t){case fIe:case Z3:case Q3:case nD:case tD:case X3:return t;default:return e}}case K8:return e}}}er.ContextConsumer=Z3;er.ContextProvider=X3;er.Element=G8;er.ForwardRef=Q3;er.Fragment=G3;er.Lazy=nD;er.Memo=tD;er.Portal=K8;er.Profiler=Y3;er.StrictMode=K3;er.Suspense=J3;er.SuspenseList=eD;er.isAsyncMode=function(){return!1};er.isConcurrentMode=function(){return!1};er.isContextConsumer=function(t){return Sl(t)===Z3};er.isContextProvider=function(t){return Sl(t)===X3};er.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===G8};er.isForwardRef=function(t){return Sl(t)===Q3};er.isFragment=function(t){return Sl(t)===G3};er.isLazy=function(t){return Sl(t)===nD};er.isMemo=function(t){return Sl(t)===tD};er.isPortal=function(t){return Sl(t)===K8};er.isProfiler=function(t){return Sl(t)===Y3};er.isStrictMode=function(t){return Sl(t)===K3};er.isSuspense=function(t){return Sl(t)===J3};er.isSuspenseList=function(t){return Sl(t)===eD};er.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===G3||t===Y3||t===K3||t===J3||t===eD||t===mIe||typeof t=="object"&&t!==null&&(t.$$typeof===nD||t.$$typeof===tD||t.$$typeof===X3||t.$$typeof===Z3||t.$$typeof===Q3||t.$$typeof===Dse||t.getModuleId!==void 0)};er.typeOf=Sl;Ise.exports=er;var pIe=Ise.exports,gIe=hh,vIe=fh,xIe="[object Number]";function yIe(t){return typeof t=="number"||vIe(t)&&gIe(t)==xIe}var kse=yIe;const bIe=$n(kse);var wIe=kse;function jIe(t){return wIe(t)&&t!=+t}var NIe=jIe;const s1=$n(NIe);var ha=function(e){return e===0?0:e>0?1:-1},yp=function(e){return mv(e)&&e.indexOf("%")===e.length-1},ct=function(e){return bIe(e)&&!s1(e)},SIe=function(e){return Qt(e)},Vs=function(e){return ct(e)||mv(e)},AIe=0,kv=function(e){var n=++AIe;return"".concat(e||"").concat(n)},fa=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!ct(e)&&!mv(e))return r;var a;if(yp(e)){var o=e.indexOf("%");a=n*parseFloat(e.slice(0,o))/100}else a=+e;return s1(a)&&(a=r),i&&a>n&&(a=n),a},Yh=function(e){if(!e)return null;var n=Object.keys(e);return n&&n.length?e[n[0]]:null},CIe=function(e){if(!Array.isArray(e))return!1;for(var n=e.length,r={},i=0;i<n;i++)if(!r[e[i]])r[e[i]]=!0;else return!0;return!1},zs=function(e,n){return ct(e)&&ct(n)?function(r){return e+r*(n-e)}:function(){return n}};function LP(t,e,n){return!t||!t.length?null:t.find(function(r){return r&&(typeof e=="function"?e(r):Ro(r,e))===n})}var EIe=function(e,n){return ct(e)&&ct(n)?e-n:mv(e)&&mv(n)?e.localeCompare(n):e instanceof Date&&n instanceof Date?e.getTime()-n.getTime():String(e).localeCompare(String(n))};function f0(t,e){for(var n in t)if({}.hasOwnProperty.call(t,n)&&(!{}.hasOwnProperty.call(e,n)||t[n]!==e[n]))return!1;for(var r in e)if({}.hasOwnProperty.call(e,r)&&!{}.hasOwnProperty.call(t,r))return!1;return!0}function $M(t){"@babel/helpers - typeof";return $M=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$M(t)}var PIe=["viewBox","children"],TIe=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],sq=["points","pathLength"],sO={svg:PIe,polygon:sq,polyline:sq},Y8=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],RP=function(e,n){if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if(A.isValidElement(e)&&(r=e.props),!e1(r))return null;var i={};return Object.keys(r).forEach(function(a){Y8.includes(a)&&(i[a]=n||function(o){return r[a](r,o)})}),i},IIe=function(e,n,r){return function(i){return e(n,r,i),null}},pv=function(e,n,r){if(!e1(e)||$M(e)!=="object")return null;var i=null;return Object.keys(e).forEach(function(a){var o=e[a];Y8.includes(a)&&typeof o=="function"&&(i||(i={}),i[a]=IIe(o,n,r))}),i},DIe=["children"],kIe=["children"];function iq(t,e){if(t==null)return{};var n=_Ie(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function _Ie(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function BM(t){"@babel/helpers - typeof";return BM=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},BM(t)}var aq={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},Ku=function(e){return typeof e=="string"?e:e?e.displayName||e.name||"Component":""},oq=null,iO=null,X8=function t(e){if(e===oq&&Array.isArray(iO))return iO;var n=[];return A.Children.forEach(e,function(r){Qt(r)||(pIe.isFragment(r)?n=n.concat(t(r.props.children)):n.push(r))}),iO=n,oq=e,n};function Mo(t,e){var n=[],r=[];return Array.isArray(e)?r=e.map(function(i){return Ku(i)}):r=[Ku(e)],X8(t).forEach(function(i){var a=Ro(i,"type.displayName")||Ro(i,"type.name");r.indexOf(a)!==-1&&n.push(i)}),n}function wo(t,e){var n=Mo(t,e);return n&&n[0]}var lq=function(e){if(!e||!e.props)return!1;var n=e.props,r=n.width,i=n.height;return!(!ct(r)||r<=0||!ct(i)||i<=0)},OIe=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],LIe=function(e){return e&&e.type&&mv(e.type)&&OIe.indexOf(e.type)>=0},_se=function(e){return e&&BM(e)==="object"&&"clipDot"in e},RIe=function(e,n,r,i){var a,o=(a=sO==null?void 0:sO[i])!==null&&a!==void 0?a:[];return n.startsWith("data-")||!Wt(e)&&(i&&o.includes(n)||TIe.includes(n))||r&&Y8.includes(n)},_t=function(e,n,r){if(!e||typeof e=="function"||typeof e=="boolean")return null;var i=e;if(A.isValidElement(e)&&(i=e.props),!e1(i))return null;var a={};return Object.keys(i).forEach(function(o){var l;RIe((l=i)===null||l===void 0?void 0:l[o],o,n,r)&&(a[o]=i[o])}),a},zM=function t(e,n){if(e===n)return!0;var r=A.Children.count(e);if(r!==A.Children.count(n))return!1;if(r===0)return!0;if(r===1)return cq(Array.isArray(e)?e[0]:e,Array.isArray(n)?n[0]:n);for(var i=0;i<r;i++){var a=e[i],o=n[i];if(Array.isArray(a)||Array.isArray(o)){if(!t(a,o))return!1}else if(!cq(a,o))return!1}return!0},cq=function(e,n){if(Qt(e)&&Qt(n))return!0;if(!Qt(e)&&!Qt(n)){var r=e.props||{},i=r.children,a=iq(r,DIe),o=n.props||{},l=o.children,c=iq(o,kIe);return i&&l?f0(a,c)&&zM(i,l):!i&&!l?f0(a,c):!1}return!1},dq=function(e,n){var r=[],i={};return X8(e).forEach(function(a,o){if(LIe(a))r.push(a);else if(a){var l=Ku(a.type),c=n[l]||{},d=c.handler,u=c.once;if(d&&(!u||!i[l])){var h=d(a,l,o);r.push(h),i[l]=!0}}}),r},MIe=function(e){var n=e&&e.type;return n&&aq[n]?aq[n]:null},FIe=function(e,n){return X8(n).indexOf(e)},$Ie=["children","width","height","viewBox","className","style","title","desc"];function UM(){return UM=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},UM.apply(this,arguments)}function BIe(t,e){if(t==null)return{};var n=zIe(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function zIe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function VM(t){var e=t.children,n=t.width,r=t.height,i=t.viewBox,a=t.className,o=t.style,l=t.title,c=t.desc,d=BIe(t,$Ie),u=i||{width:n,height:r,x:0,y:0},h=dn("recharts-surface",a);return ge.createElement("svg",UM({},_t(d,!0,"svg"),{className:h,width:n,height:r,style:o,viewBox:"".concat(u.x," ").concat(u.y," ").concat(u.width," ").concat(u.height)}),ge.createElement("title",null,l),ge.createElement("desc",null,c),e)}var UIe=["children","className"];function qM(){return qM=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},qM.apply(this,arguments)}function VIe(t,e){if(t==null)return{};var n=qIe(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function qIe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var yn=ge.forwardRef(function(t,e){var n=t.children,r=t.className,i=VIe(t,UIe),a=dn("recharts-layer",r);return ge.createElement("g",qM({className:a},_t(i,!0),{ref:e}),n)}),mc=function(e,n){for(var r=arguments.length,i=new Array(r>2?r-2:0),a=2;a<r;a++)i[a-2]=arguments[a]};function HIe(t,e,n){var r=-1,i=t.length;e<0&&(e=-e>i?0:i+e),n=n>i?i:n,n<0&&(n+=i),i=e>n?0:n-e>>>0,e>>>=0;for(var a=Array(i);++r<i;)a[r]=t[r+e];return a}var WIe=HIe,GIe=WIe;function KIe(t,e,n){var r=t.length;return n=n===void 0?r:n,!e&&n>=r?t:GIe(t,e,n)}var YIe=KIe,XIe="\\ud800-\\udfff",ZIe="\\u0300-\\u036f",QIe="\\ufe20-\\ufe2f",JIe="\\u20d0-\\u20ff",e3e=ZIe+QIe+JIe,t3e="\\ufe0e\\ufe0f",n3e="\\u200d",r3e=RegExp("["+n3e+XIe+e3e+t3e+"]");function s3e(t){return r3e.test(t)}var Ose=s3e;function i3e(t){return t.split("")}var a3e=i3e,Lse="\\ud800-\\udfff",o3e="\\u0300-\\u036f",l3e="\\ufe20-\\ufe2f",c3e="\\u20d0-\\u20ff",d3e=o3e+l3e+c3e,u3e="\\ufe0e\\ufe0f",h3e="["+Lse+"]",HM="["+d3e+"]",WM="\\ud83c[\\udffb-\\udfff]",f3e="(?:"+HM+"|"+WM+")",Rse="[^"+Lse+"]",Mse="(?:\\ud83c[\\udde6-\\uddff]){2}",Fse="[\\ud800-\\udbff][\\udc00-\\udfff]",m3e="\\u200d",$se=f3e+"?",Bse="["+u3e+"]?",p3e="(?:"+m3e+"(?:"+[Rse,Mse,Fse].join("|")+")"+Bse+$se+")*",g3e=Bse+$se+p3e,v3e="(?:"+[Rse+HM+"?",HM,Mse,Fse,h3e].join("|")+")",x3e=RegExp(WM+"(?="+WM+")|"+v3e+g3e,"g");function y3e(t){return t.match(x3e)||[]}var b3e=y3e,w3e=a3e,j3e=Ose,N3e=b3e;function S3e(t){return j3e(t)?N3e(t):w3e(t)}var A3e=S3e,C3e=YIe,E3e=Ose,P3e=A3e,T3e=Ese;function I3e(t){return function(e){e=T3e(e);var n=E3e(e)?P3e(e):void 0,r=n?n[0]:e.charAt(0),i=n?C3e(n,1).join(""):e.slice(1);return r[t]()+i}}var D3e=I3e,k3e=D3e,_3e=k3e("toUpperCase"),O3e=_3e;const rD=$n(O3e);function vr(t){return function(){return t}}const zse=Math.cos,MP=Math.sin,Cc=Math.sqrt,FP=Math.PI,sD=2*FP,GM=Math.PI,KM=2*GM,op=1e-6,L3e=KM-op;function Use(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function R3e(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return Use;const n=10**e;return function(r){this._+=r[0];for(let i=1,a=r.length;i<a;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class M3e{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?Use:R3e(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,r,i){this._append`Q${+e},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(e,n,r,i,a,o){this._append`C${+e},${+n},${+r},${+i},${this._x1=+a},${this._y1=+o}`}arcTo(e,n,r,i,a){if(e=+e,n=+n,r=+r,i=+i,a=+a,a<0)throw new Error(`negative radius: ${a}`);let o=this._x1,l=this._y1,c=r-e,d=i-n,u=o-e,h=l-n,f=u*u+h*h;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(f>op)if(!(Math.abs(h*c-d*u)>op)||!a)this._append`L${this._x1=e},${this._y1=n}`;else{let m=r-o,v=i-l,p=c*c+d*d,g=m*m+v*v,x=Math.sqrt(p),y=Math.sqrt(f),b=a*Math.tan((GM-Math.acos((p+f-g)/(2*x*y)))/2),w=b/y,N=b/x;Math.abs(w-1)>op&&this._append`L${e+w*u},${n+w*h}`,this._append`A${a},${a},0,0,${+(h*m>u*v)},${this._x1=e+N*c},${this._y1=n+N*d}`}}arc(e,n,r,i,a,o){if(e=+e,n=+n,r=+r,o=!!o,r<0)throw new Error(`negative radius: ${r}`);let l=r*Math.cos(i),c=r*Math.sin(i),d=e+l,u=n+c,h=1^o,f=o?i-a:a-i;this._x1===null?this._append`M${d},${u}`:(Math.abs(this._x1-d)>op||Math.abs(this._y1-u)>op)&&this._append`L${d},${u}`,r&&(f<0&&(f=f%KM+KM),f>L3e?this._append`A${r},${r},0,1,${h},${e-l},${n-c}A${r},${r},0,1,${h},${this._x1=d},${this._y1=u}`:f>op&&this._append`A${r},${r},0,${+(f>=GM)},${h},${this._x1=e+r*Math.cos(a)},${this._y1=n+r*Math.sin(a)}`)}rect(e,n,r,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function Z8(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);e=r}return t},()=>new M3e(e)}function Q8(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function Vse(t){this._context=t}Vse.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function iD(t){return new Vse(t)}function qse(t){return t[0]}function Hse(t){return t[1]}function Wse(t,e){var n=vr(!0),r=null,i=iD,a=null,o=Z8(l);t=typeof t=="function"?t:t===void 0?qse:vr(t),e=typeof e=="function"?e:e===void 0?Hse:vr(e);function l(c){var d,u=(c=Q8(c)).length,h,f=!1,m;for(r==null&&(a=i(m=o())),d=0;d<=u;++d)!(d<u&&n(h=c[d],d,c))===f&&((f=!f)?a.lineStart():a.lineEnd()),f&&a.point(+t(h,d,c),+e(h,d,c));if(m)return a=null,m+""||null}return l.x=function(c){return arguments.length?(t=typeof c=="function"?c:vr(+c),l):t},l.y=function(c){return arguments.length?(e=typeof c=="function"?c:vr(+c),l):e},l.defined=function(c){return arguments.length?(n=typeof c=="function"?c:vr(!!c),l):n},l.curve=function(c){return arguments.length?(i=c,r!=null&&(a=i(r)),l):i},l.context=function(c){return arguments.length?(c==null?r=a=null:a=i(r=c),l):r},l}function jC(t,e,n){var r=null,i=vr(!0),a=null,o=iD,l=null,c=Z8(d);t=typeof t=="function"?t:t===void 0?qse:vr(+t),e=typeof e=="function"?e:vr(e===void 0?0:+e),n=typeof n=="function"?n:n===void 0?Hse:vr(+n);function d(h){var f,m,v,p=(h=Q8(h)).length,g,x=!1,y,b=new Array(p),w=new Array(p);for(a==null&&(l=o(y=c())),f=0;f<=p;++f){if(!(f<p&&i(g=h[f],f,h))===x)if(x=!x)m=f,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),v=f-1;v>=m;--v)l.point(b[v],w[v]);l.lineEnd(),l.areaEnd()}x&&(b[f]=+t(g,f,h),w[f]=+e(g,f,h),l.point(r?+r(g,f,h):b[f],n?+n(g,f,h):w[f]))}if(y)return l=null,y+""||null}function u(){return Wse().defined(i).curve(o).context(a)}return d.x=function(h){return arguments.length?(t=typeof h=="function"?h:vr(+h),r=null,d):t},d.x0=function(h){return arguments.length?(t=typeof h=="function"?h:vr(+h),d):t},d.x1=function(h){return arguments.length?(r=h==null?null:typeof h=="function"?h:vr(+h),d):r},d.y=function(h){return arguments.length?(e=typeof h=="function"?h:vr(+h),n=null,d):e},d.y0=function(h){return arguments.length?(e=typeof h=="function"?h:vr(+h),d):e},d.y1=function(h){return arguments.length?(n=h==null?null:typeof h=="function"?h:vr(+h),d):n},d.lineX0=d.lineY0=function(){return u().x(t).y(e)},d.lineY1=function(){return u().x(t).y(n)},d.lineX1=function(){return u().x(r).y(e)},d.defined=function(h){return arguments.length?(i=typeof h=="function"?h:vr(!!h),d):i},d.curve=function(h){return arguments.length?(o=h,a!=null&&(l=o(a)),d):o},d.context=function(h){return arguments.length?(h==null?a=l=null:l=o(a=h),d):a},d}class Gse{constructor(e,n){this._context=e,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,n){switch(e=+e,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,n,e,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,e,this._y0,e,n);break}}this._x0=e,this._y0=n}}function F3e(t){return new Gse(t,!0)}function $3e(t){return new Gse(t,!1)}const J8={draw(t,e){const n=Cc(e/FP);t.moveTo(n,0),t.arc(0,0,n,0,sD)}},B3e={draw(t,e){const n=Cc(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}},Kse=Cc(1/3),z3e=Kse*2,U3e={draw(t,e){const n=Cc(e/z3e),r=n*Kse;t.moveTo(0,-n),t.lineTo(r,0),t.lineTo(0,n),t.lineTo(-r,0),t.closePath()}},V3e={draw(t,e){const n=Cc(e),r=-n/2;t.rect(r,r,n,n)}},q3e=.8908130915292852,Yse=MP(FP/10)/MP(7*FP/10),H3e=MP(sD/10)*Yse,W3e=-zse(sD/10)*Yse,G3e={draw(t,e){const n=Cc(e*q3e),r=H3e*n,i=W3e*n;t.moveTo(0,-n),t.lineTo(r,i);for(let a=1;a<5;++a){const o=sD*a/5,l=zse(o),c=MP(o);t.lineTo(c*n,-l*n),t.lineTo(l*r-c*i,c*r+l*i)}t.closePath()}},aO=Cc(3),K3e={draw(t,e){const n=-Cc(e/(aO*3));t.moveTo(0,n*2),t.lineTo(-aO*n,-n),t.lineTo(aO*n,-n),t.closePath()}},Qo=-.5,Jo=Cc(3)/2,YM=1/Cc(12),Y3e=(YM/2+1)*3,X3e={draw(t,e){const n=Cc(e/Y3e),r=n/2,i=n*YM,a=r,o=n*YM+n,l=-a,c=o;t.moveTo(r,i),t.lineTo(a,o),t.lineTo(l,c),t.lineTo(Qo*r-Jo*i,Jo*r+Qo*i),t.lineTo(Qo*a-Jo*o,Jo*a+Qo*o),t.lineTo(Qo*l-Jo*c,Jo*l+Qo*c),t.lineTo(Qo*r+Jo*i,Qo*i-Jo*r),t.lineTo(Qo*a+Jo*o,Qo*o-Jo*a),t.lineTo(Qo*l+Jo*c,Qo*c-Jo*l),t.closePath()}};function Z3e(t,e){let n=null,r=Z8(i);t=typeof t=="function"?t:vr(t||J8),e=typeof e=="function"?e:vr(e===void 0?64:+e);function i(){let a;if(n||(n=a=r()),t.apply(this,arguments).draw(n,+e.apply(this,arguments)),a)return n=null,a+""||null}return i.type=function(a){return arguments.length?(t=typeof a=="function"?a:vr(a),i):t},i.size=function(a){return arguments.length?(e=typeof a=="function"?a:vr(+a),i):e},i.context=function(a){return arguments.length?(n=a??null,i):n},i}function $P(){}function BP(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function Xse(t){this._context=t}Xse.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:BP(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:BP(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function Q3e(t){return new Xse(t)}function Zse(t){this._context=t}Zse.prototype={areaStart:$P,areaEnd:$P,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:BP(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function J3e(t){return new Zse(t)}function Qse(t){this._context=t}Qse.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:BP(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function eDe(t){return new Qse(t)}function Jse(t){this._context=t}Jse.prototype={areaStart:$P,areaEnd:$P,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function tDe(t){return new Jse(t)}function uq(t){return t<0?-1:1}function hq(t,e,n){var r=t._x1-t._x0,i=e-t._x1,a=(t._y1-t._y0)/(r||i<0&&-0),o=(n-t._y1)/(i||r<0&&-0),l=(a*i+o*r)/(r+i);return(uq(a)+uq(o))*Math.min(Math.abs(a),Math.abs(o),.5*Math.abs(l))||0}function fq(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function oO(t,e,n){var r=t._x0,i=t._y0,a=t._x1,o=t._y1,l=(a-r)/3;t._context.bezierCurveTo(r+l,i+l*e,a-l,o-l*n,a,o)}function zP(t){this._context=t}zP.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:oO(this,this._t0,fq(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,oO(this,fq(this,n=hq(this,t,e)),n);break;default:oO(this,this._t0,n=hq(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}};function eie(t){this._context=new tie(t)}(eie.prototype=Object.create(zP.prototype)).point=function(t,e){zP.prototype.point.call(this,e,t)};function tie(t){this._context=t}tie.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,i,a){this._context.bezierCurveTo(e,t,r,n,a,i)}};function nDe(t){return new zP(t)}function rDe(t){return new eie(t)}function nie(t){this._context=t}nie.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),n===2)this._context.lineTo(t[1],e[1]);else for(var r=mq(t),i=mq(e),a=0,o=1;o<n;++a,++o)this._context.bezierCurveTo(r[0][a],i[0][a],r[1][a],i[1][a],t[o],e[o]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function mq(t){var e,n=t.length-1,r,i=new Array(n),a=new Array(n),o=new Array(n);for(i[0]=0,a[0]=2,o[0]=t[0]+2*t[1],e=1;e<n-1;++e)i[e]=1,a[e]=4,o[e]=4*t[e]+2*t[e+1];for(i[n-1]=2,a[n-1]=7,o[n-1]=8*t[n-1]+t[n],e=1;e<n;++e)r=i[e]/a[e-1],a[e]-=r,o[e]-=r*o[e-1];for(i[n-1]=o[n-1]/a[n-1],e=n-2;e>=0;--e)i[e]=(o[e]-i[e+1])/a[e];for(a[n-1]=(t[n]+i[n-1])/2,e=0;e<n-1;++e)a[e]=2*t[e+1]-i[e+1];return[i,a]}function sDe(t){return new nie(t)}function aD(t,e){this._context=t,this._t=e}aD.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}break}}this._x=t,this._y=e}};function iDe(t){return new aD(t,.5)}function aDe(t){return new aD(t,0)}function oDe(t){return new aD(t,1)}function hb(t,e){if((o=t.length)>1)for(var n=1,r,i,a=t[e[0]],o,l=a.length;n<o;++n)for(i=a,a=t[e[n]],r=0;r<l;++r)a[r][1]+=a[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function XM(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n}function lDe(t,e){return t[e]}function cDe(t){const e=[];return e.key=t,e}function dDe(){var t=vr([]),e=XM,n=hb,r=lDe;function i(a){var o=Array.from(t.apply(this,arguments),cDe),l,c=o.length,d=-1,u;for(const h of a)for(l=0,++d;l<c;++l)(o[l][d]=[0,+r(h,o[l].key,d,a)]).data=h;for(l=0,u=Q8(e(o));l<c;++l)o[u[l]].index=l;return n(o,u),o}return i.keys=function(a){return arguments.length?(t=typeof a=="function"?a:vr(Array.from(a)),i):t},i.value=function(a){return arguments.length?(r=typeof a=="function"?a:vr(+a),i):r},i.order=function(a){return arguments.length?(e=a==null?XM:typeof a=="function"?a:vr(Array.from(a)),i):e},i.offset=function(a){return arguments.length?(n=a??hb,i):n},i}function uDe(t,e){if((r=t.length)>0){for(var n,r,i=0,a=t[0].length,o;i<a;++i){for(o=n=0;n<r;++n)o+=t[n][i][1]||0;if(o)for(n=0;n<r;++n)t[n][i][1]/=o}hb(t,e)}}function hDe(t,e){if((i=t.length)>0){for(var n=0,r=t[e[0]],i,a=r.length;n<a;++n){for(var o=0,l=0;o<i;++o)l+=t[o][n][1]||0;r[n][1]+=r[n][0]=-l/2}hb(t,e)}}function fDe(t,e){if(!(!((o=t.length)>0)||!((a=(i=t[e[0]]).length)>0))){for(var n=0,r=1,i,a,o;r<a;++r){for(var l=0,c=0,d=0;l<o;++l){for(var u=t[e[l]],h=u[r][1]||0,f=u[r-1][1]||0,m=(h-f)/2,v=0;v<l;++v){var p=t[e[v]],g=p[r][1]||0,x=p[r-1][1]||0;m+=g-x}c+=h,d+=m*h}i[r-1][1]+=i[r-1][0]=n,c&&(n-=d/c)}i[r-1][1]+=i[r-1][0]=n,hb(t,e)}}function s2(t){"@babel/helpers - typeof";return s2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s2(t)}var mDe=["type","size","sizeType"];function ZM(){return ZM=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ZM.apply(this,arguments)}function pq(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function gq(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?pq(Object(n),!0).forEach(function(r){pDe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):pq(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function pDe(t,e,n){return e=gDe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function gDe(t){var e=vDe(t,"string");return s2(e)=="symbol"?e:e+""}function vDe(t,e){if(s2(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(s2(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function xDe(t,e){if(t==null)return{};var n=yDe(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function yDe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var rie={symbolCircle:J8,symbolCross:B3e,symbolDiamond:U3e,symbolSquare:V3e,symbolStar:G3e,symbolTriangle:K3e,symbolWye:X3e},bDe=Math.PI/180,wDe=function(e){var n="symbol".concat(rD(e));return rie[n]||J8},jDe=function(e,n,r){if(n==="area")return e;switch(r){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var i=18*bDe;return 1.25*e*e*(Math.tan(i)-Math.tan(i*2)*Math.pow(Math.tan(i),2))}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},NDe=function(e,n){rie["symbol".concat(rD(e))]=n},e7=function(e){var n=e.type,r=n===void 0?"circle":n,i=e.size,a=i===void 0?64:i,o=e.sizeType,l=o===void 0?"area":o,c=xDe(e,mDe),d=gq(gq({},c),{},{type:r,size:a,sizeType:l}),u=function(){var g=wDe(r),x=Z3e().type(g).size(jDe(a,l,r));return x()},h=d.className,f=d.cx,m=d.cy,v=_t(d,!0);return f===+f&&m===+m&&a===+a?ge.createElement("path",ZM({},v,{className:dn("recharts-symbols",h),transform:"translate(".concat(f,", ").concat(m,")"),d:u()})):null};e7.registerSymbol=NDe;function fb(t){"@babel/helpers - typeof";return fb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fb(t)}function QM(){return QM=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},QM.apply(this,arguments)}function vq(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function SDe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?vq(Object(n),!0).forEach(function(r){i2(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):vq(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ADe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function xq(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,iie(r.key),r)}}function CDe(t,e,n){return e&&xq(t.prototype,e),n&&xq(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function EDe(t,e,n){return e=UP(e),PDe(t,sie()?Reflect.construct(e,n||[],UP(t).constructor):e.apply(t,n))}function PDe(t,e){if(e&&(fb(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return TDe(t)}function TDe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function sie(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(sie=function(){return!!t})()}function UP(t){return UP=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},UP(t)}function IDe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&JM(t,e)}function JM(t,e){return JM=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},JM(t,e)}function i2(t,e,n){return e=iie(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function iie(t){var e=DDe(t,"string");return fb(e)=="symbol"?e:e+""}function DDe(t,e){if(fb(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(fb(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var el=32,t7=function(t){function e(){return ADe(this,e),EDe(this,e,arguments)}return IDe(e,t),CDe(e,[{key:"renderIcon",value:function(r){var i=this.props.inactiveColor,a=el/2,o=el/6,l=el/3,c=r.inactive?i:r.color;if(r.type==="plainline")return ge.createElement("line",{strokeWidth:4,fill:"none",stroke:c,strokeDasharray:r.payload.strokeDasharray,x1:0,y1:a,x2:el,y2:a,className:"recharts-legend-icon"});if(r.type==="line")return ge.createElement("path",{strokeWidth:4,fill:"none",stroke:c,d:"M0,".concat(a,"h").concat(l,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(2*l,",").concat(a,`
            H`).concat(el,"M").concat(2*l,",").concat(a,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(l,",").concat(a),className:"recharts-legend-icon"});if(r.type==="rect")return ge.createElement("path",{stroke:"none",fill:c,d:"M0,".concat(el/8,"h").concat(el,"v").concat(el*3/4,"h").concat(-el,"z"),className:"recharts-legend-icon"});if(ge.isValidElement(r.legendIcon)){var d=SDe({},r);return delete d.legendIcon,ge.cloneElement(r.legendIcon,d)}return ge.createElement(e7,{fill:c,cx:a,cy:a,size:el,sizeType:"diameter",type:r.type})}},{key:"renderItems",value:function(){var r=this,i=this.props,a=i.payload,o=i.iconSize,l=i.layout,c=i.formatter,d=i.inactiveColor,u={x:0,y:0,width:el,height:el},h={display:l==="horizontal"?"inline-block":"block",marginRight:10},f={display:"inline-block",verticalAlign:"middle",marginRight:4};return a.map(function(m,v){var p=m.formatter||c,g=dn(i2(i2({"recharts-legend-item":!0},"legend-item-".concat(v),!0),"inactive",m.inactive));if(m.type==="none")return null;var x=Wt(m.value)?null:m.value;mc(!Wt(m.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var y=m.inactive?d:m.color;return ge.createElement("li",QM({className:g,style:h,key:"legend-item-".concat(v)},pv(r.props,m,v)),ge.createElement(VM,{width:o,height:o,viewBox:u,style:f},r.renderIcon(m)),ge.createElement("span",{className:"recharts-legend-item-text",style:{color:y}},p?p(x,m,v):x))})}},{key:"render",value:function(){var r=this.props,i=r.payload,a=r.layout,o=r.align;if(!i||!i.length)return null;var l={padding:0,margin:0,textAlign:a==="horizontal"?o:"left"};return ge.createElement("ul",{className:"recharts-default-legend",style:l},this.renderItems())}}])}(A.PureComponent);i2(t7,"displayName","Legend");i2(t7,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var kDe=q3;function _De(){this.__data__=new kDe,this.size=0}var ODe=_De;function LDe(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}var RDe=LDe;function MDe(t){return this.__data__.get(t)}var FDe=MDe;function $De(t){return this.__data__.has(t)}var BDe=$De,zDe=q3,UDe=U8,VDe=V8,qDe=200;function HDe(t,e){var n=this.__data__;if(n instanceof zDe){var r=n.__data__;if(!UDe||r.length<qDe-1)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new VDe(r)}return n.set(t,e),this.size=n.size,this}var WDe=HDe,GDe=q3,KDe=ODe,YDe=RDe,XDe=FDe,ZDe=BDe,QDe=WDe;function i1(t){var e=this.__data__=new GDe(t);this.size=e.size}i1.prototype.clear=KDe;i1.prototype.delete=YDe;i1.prototype.get=XDe;i1.prototype.has=ZDe;i1.prototype.set=QDe;var aie=i1,JDe="__lodash_hash_undefined__";function eke(t){return this.__data__.set(t,JDe),this}var tke=eke;function nke(t){return this.__data__.has(t)}var rke=nke,ske=V8,ike=tke,ake=rke;function VP(t){var e=-1,n=t==null?0:t.length;for(this.__data__=new ske;++e<n;)this.add(t[e])}VP.prototype.add=VP.prototype.push=ike;VP.prototype.has=ake;var oie=VP;function oke(t,e){for(var n=-1,r=t==null?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}var lie=oke;function lke(t,e){return t.has(e)}var cie=lke,cke=oie,dke=lie,uke=cie,hke=1,fke=2;function mke(t,e,n,r,i,a){var o=n&hke,l=t.length,c=e.length;if(l!=c&&!(o&&c>l))return!1;var d=a.get(t),u=a.get(e);if(d&&u)return d==e&&u==t;var h=-1,f=!0,m=n&fke?new cke:void 0;for(a.set(t,e),a.set(e,t);++h<l;){var v=t[h],p=e[h];if(r)var g=o?r(p,v,h,e,t,a):r(v,p,h,t,e,a);if(g!==void 0){if(g)continue;f=!1;break}if(m){if(!dke(e,function(x,y){if(!uke(m,y)&&(v===x||i(v,x,n,r,a)))return m.push(y)})){f=!1;break}}else if(!(v===p||i(v,p,n,r,a))){f=!1;break}}return a.delete(t),a.delete(e),f}var die=mke,pke=_d,gke=pke.Uint8Array,vke=gke;function xke(t){var e=-1,n=Array(t.size);return t.forEach(function(r,i){n[++e]=[i,r]}),n}var yke=xke;function bke(t){var e=-1,n=Array(t.size);return t.forEach(function(r){n[++e]=r}),n}var n7=bke,yq=kA,bq=vke,wke=z8,jke=die,Nke=yke,Ske=n7,Ake=1,Cke=2,Eke="[object Boolean]",Pke="[object Date]",Tke="[object Error]",Ike="[object Map]",Dke="[object Number]",kke="[object RegExp]",_ke="[object Set]",Oke="[object String]",Lke="[object Symbol]",Rke="[object ArrayBuffer]",Mke="[object DataView]",wq=yq?yq.prototype:void 0,lO=wq?wq.valueOf:void 0;function Fke(t,e,n,r,i,a,o){switch(n){case Mke:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case Rke:return!(t.byteLength!=e.byteLength||!a(new bq(t),new bq(e)));case Eke:case Pke:case Dke:return wke(+t,+e);case Tke:return t.name==e.name&&t.message==e.message;case kke:case Oke:return t==e+"";case Ike:var l=Nke;case _ke:var c=r&Ake;if(l||(l=Ske),t.size!=e.size&&!c)return!1;var d=o.get(t);if(d)return d==e;r|=Cke,o.set(t,e);var u=jke(l(t),l(e),r,i,a,o);return o.delete(t),u;case Lke:if(lO)return lO.call(t)==lO.call(e)}return!1}var $ke=Fke;function Bke(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}var uie=Bke,zke=uie,Uke=Ka;function Vke(t,e,n){var r=e(t);return Uke(t)?r:zke(r,n(t))}var qke=Vke;function Hke(t,e){for(var n=-1,r=t==null?0:t.length,i=0,a=[];++n<r;){var o=t[n];e(o,n,t)&&(a[i++]=o)}return a}var Wke=Hke;function Gke(){return[]}var Kke=Gke,Yke=Wke,Xke=Kke,Zke=Object.prototype,Qke=Zke.propertyIsEnumerable,jq=Object.getOwnPropertySymbols,Jke=jq?function(t){return t==null?[]:(t=Object(t),Yke(jq(t),function(e){return Qke.call(t,e)}))}:Xke,e_e=Jke;function t_e(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}var n_e=t_e,r_e=hh,s_e=fh,i_e="[object Arguments]";function a_e(t){return s_e(t)&&r_e(t)==i_e}var o_e=a_e,Nq=o_e,l_e=fh,hie=Object.prototype,c_e=hie.hasOwnProperty,d_e=hie.propertyIsEnumerable,u_e=Nq(function(){return arguments}())?Nq:function(t){return l_e(t)&&c_e.call(t,"callee")&&!d_e.call(t,"callee")},r7=u_e,qP={exports:{}};function h_e(){return!1}var f_e=h_e;qP.exports;(function(t,e){var n=_d,r=f_e,i=e&&!e.nodeType&&e,a=i&&!0&&t&&!t.nodeType&&t,o=a&&a.exports===i,l=o?n.Buffer:void 0,c=l?l.isBuffer:void 0,d=c||r;t.exports=d})(qP,qP.exports);var fie=qP.exports,m_e=9007199254740991,p_e=/^(?:0|[1-9]\d*)$/;function g_e(t,e){var n=typeof t;return e=e??m_e,!!e&&(n=="number"||n!="symbol"&&p_e.test(t))&&t>-1&&t%1==0&&t<e}var s7=g_e,v_e=9007199254740991;function x_e(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=v_e}var i7=x_e,y_e=hh,b_e=i7,w_e=fh,j_e="[object Arguments]",N_e="[object Array]",S_e="[object Boolean]",A_e="[object Date]",C_e="[object Error]",E_e="[object Function]",P_e="[object Map]",T_e="[object Number]",I_e="[object Object]",D_e="[object RegExp]",k_e="[object Set]",__e="[object String]",O_e="[object WeakMap]",L_e="[object ArrayBuffer]",R_e="[object DataView]",M_e="[object Float32Array]",F_e="[object Float64Array]",$_e="[object Int8Array]",B_e="[object Int16Array]",z_e="[object Int32Array]",U_e="[object Uint8Array]",V_e="[object Uint8ClampedArray]",q_e="[object Uint16Array]",H_e="[object Uint32Array]",Ar={};Ar[M_e]=Ar[F_e]=Ar[$_e]=Ar[B_e]=Ar[z_e]=Ar[U_e]=Ar[V_e]=Ar[q_e]=Ar[H_e]=!0;Ar[j_e]=Ar[N_e]=Ar[L_e]=Ar[S_e]=Ar[R_e]=Ar[A_e]=Ar[C_e]=Ar[E_e]=Ar[P_e]=Ar[T_e]=Ar[I_e]=Ar[D_e]=Ar[k_e]=Ar[__e]=Ar[O_e]=!1;function W_e(t){return w_e(t)&&b_e(t.length)&&!!Ar[y_e(t)]}var G_e=W_e;function K_e(t){return function(e){return t(e)}}var mie=K_e,HP={exports:{}};HP.exports;(function(t,e){var n=wse,r=e&&!e.nodeType&&e,i=r&&!0&&t&&!t.nodeType&&t,a=i&&i.exports===r,o=a&&n.process,l=function(){try{var c=i&&i.require&&i.require("util").types;return c||o&&o.binding&&o.binding("util")}catch{}}();t.exports=l})(HP,HP.exports);var Y_e=HP.exports,X_e=G_e,Z_e=mie,Sq=Y_e,Aq=Sq&&Sq.isTypedArray,Q_e=Aq?Z_e(Aq):X_e,pie=Q_e,J_e=n_e,eOe=r7,tOe=Ka,nOe=fie,rOe=s7,sOe=pie,iOe=Object.prototype,aOe=iOe.hasOwnProperty;function oOe(t,e){var n=tOe(t),r=!n&&eOe(t),i=!n&&!r&&nOe(t),a=!n&&!r&&!i&&sOe(t),o=n||r||i||a,l=o?J_e(t.length,String):[],c=l.length;for(var d in t)(e||aOe.call(t,d))&&!(o&&(d=="length"||i&&(d=="offset"||d=="parent")||a&&(d=="buffer"||d=="byteLength"||d=="byteOffset")||rOe(d,c)))&&l.push(d);return l}var lOe=oOe,cOe=Object.prototype;function dOe(t){var e=t&&t.constructor,n=typeof e=="function"&&e.prototype||cOe;return t===n}var uOe=dOe;function hOe(t,e){return function(n){return t(e(n))}}var gie=hOe,fOe=gie,mOe=fOe(Object.keys,Object),pOe=mOe,gOe=uOe,vOe=pOe,xOe=Object.prototype,yOe=xOe.hasOwnProperty;function bOe(t){if(!gOe(t))return vOe(t);var e=[];for(var n in Object(t))yOe.call(t,n)&&n!="constructor"&&e.push(n);return e}var wOe=bOe,jOe=B8,NOe=i7;function SOe(t){return t!=null&&NOe(t.length)&&!jOe(t)}var _A=SOe,AOe=lOe,COe=wOe,EOe=_A;function POe(t){return EOe(t)?AOe(t):COe(t)}var oD=POe,TOe=qke,IOe=e_e,DOe=oD;function kOe(t){return TOe(t,DOe,IOe)}var _Oe=kOe,Cq=_Oe,OOe=1,LOe=Object.prototype,ROe=LOe.hasOwnProperty;function MOe(t,e,n,r,i,a){var o=n&OOe,l=Cq(t),c=l.length,d=Cq(e),u=d.length;if(c!=u&&!o)return!1;for(var h=c;h--;){var f=l[h];if(!(o?f in e:ROe.call(e,f)))return!1}var m=a.get(t),v=a.get(e);if(m&&v)return m==e&&v==t;var p=!0;a.set(t,e),a.set(e,t);for(var g=o;++h<c;){f=l[h];var x=t[f],y=e[f];if(r)var b=o?r(y,x,f,e,t,a):r(x,y,f,t,e,a);if(!(b===void 0?x===y||i(x,y,n,r,a):b)){p=!1;break}g||(g=f=="constructor")}if(p&&!g){var w=t.constructor,N=e.constructor;w!=N&&"constructor"in t&&"constructor"in e&&!(typeof w=="function"&&w instanceof w&&typeof N=="function"&&N instanceof N)&&(p=!1)}return a.delete(t),a.delete(e),p}var FOe=MOe,$Oe=Dv,BOe=_d,zOe=$Oe(BOe,"DataView"),UOe=zOe,VOe=Dv,qOe=_d,HOe=VOe(qOe,"Promise"),WOe=HOe,GOe=Dv,KOe=_d,YOe=GOe(KOe,"Set"),vie=YOe,XOe=Dv,ZOe=_d,QOe=XOe(ZOe,"WeakMap"),JOe=QOe,eF=UOe,tF=U8,nF=WOe,rF=vie,sF=JOe,xie=hh,a1=Nse,Eq="[object Map]",eLe="[object Object]",Pq="[object Promise]",Tq="[object Set]",Iq="[object WeakMap]",Dq="[object DataView]",tLe=a1(eF),nLe=a1(tF),rLe=a1(nF),sLe=a1(rF),iLe=a1(sF),lp=xie;(eF&&lp(new eF(new ArrayBuffer(1)))!=Dq||tF&&lp(new tF)!=Eq||nF&&lp(nF.resolve())!=Pq||rF&&lp(new rF)!=Tq||sF&&lp(new sF)!=Iq)&&(lp=function(t){var e=xie(t),n=e==eLe?t.constructor:void 0,r=n?a1(n):"";if(r)switch(r){case tLe:return Dq;case nLe:return Eq;case rLe:return Pq;case sLe:return Tq;case iLe:return Iq}return e});var aLe=lp,cO=aie,oLe=die,lLe=$ke,cLe=FOe,kq=aLe,_q=Ka,Oq=fie,dLe=pie,uLe=1,Lq="[object Arguments]",Rq="[object Array]",NC="[object Object]",hLe=Object.prototype,Mq=hLe.hasOwnProperty;function fLe(t,e,n,r,i,a){var o=_q(t),l=_q(e),c=o?Rq:kq(t),d=l?Rq:kq(e);c=c==Lq?NC:c,d=d==Lq?NC:d;var u=c==NC,h=d==NC,f=c==d;if(f&&Oq(t)){if(!Oq(e))return!1;o=!0,u=!1}if(f&&!u)return a||(a=new cO),o||dLe(t)?oLe(t,e,n,r,i,a):lLe(t,e,c,n,r,i,a);if(!(n&uLe)){var m=u&&Mq.call(t,"__wrapped__"),v=h&&Mq.call(e,"__wrapped__");if(m||v){var p=m?t.value():t,g=v?e.value():e;return a||(a=new cO),i(p,g,n,r,a)}}return f?(a||(a=new cO),cLe(t,e,n,r,i,a)):!1}var mLe=fLe,pLe=mLe,Fq=fh;function yie(t,e,n,r,i){return t===e?!0:t==null||e==null||!Fq(t)&&!Fq(e)?t!==t&&e!==e:pLe(t,e,n,r,yie,i)}var a7=yie,gLe=aie,vLe=a7,xLe=1,yLe=2;function bLe(t,e,n,r){var i=n.length,a=i,o=!r;if(t==null)return!a;for(t=Object(t);i--;){var l=n[i];if(o&&l[2]?l[1]!==t[l[0]]:!(l[0]in t))return!1}for(;++i<a;){l=n[i];var c=l[0],d=t[c],u=l[1];if(o&&l[2]){if(d===void 0&&!(c in t))return!1}else{var h=new gLe;if(r)var f=r(d,u,c,t,e,h);if(!(f===void 0?vLe(u,d,xLe|yLe,r,h):f))return!1}}return!0}var wLe=bLe,jLe=km;function NLe(t){return t===t&&!jLe(t)}var bie=NLe,SLe=bie,ALe=oD;function CLe(t){for(var e=ALe(t),n=e.length;n--;){var r=e[n],i=t[r];e[n]=[r,i,SLe(i)]}return e}var ELe=CLe;function PLe(t,e){return function(n){return n==null?!1:n[t]===e&&(e!==void 0||t in Object(n))}}var wie=PLe,TLe=wLe,ILe=ELe,DLe=wie;function kLe(t){var e=ILe(t);return e.length==1&&e[0][2]?DLe(e[0][0],e[0][1]):function(n){return n===t||TLe(n,t,e)}}var _Le=kLe;function OLe(t,e){return t!=null&&e in Object(t)}var LLe=OLe,RLe=Pse,MLe=r7,FLe=Ka,$Le=s7,BLe=i7,zLe=W3;function ULe(t,e,n){e=RLe(e,t);for(var r=-1,i=e.length,a=!1;++r<i;){var o=zLe(e[r]);if(!(a=t!=null&&n(t,o)))break;t=t[o]}return a||++r!=i?a:(i=t==null?0:t.length,!!i&&BLe(i)&&$Le(o,i)&&(FLe(t)||MLe(t)))}var VLe=ULe,qLe=LLe,HLe=VLe;function WLe(t,e){return t!=null&&HLe(t,e,qLe)}var GLe=WLe,KLe=a7,YLe=Tse,XLe=GLe,ZLe=$8,QLe=bie,JLe=wie,eRe=W3,tRe=1,nRe=2;function rRe(t,e){return ZLe(t)&&QLe(e)?JLe(eRe(t),e):function(n){var r=YLe(n,t);return r===void 0&&r===e?XLe(n,t):KLe(e,r,tRe|nRe)}}var sRe=rRe;function iRe(t){return t}var o1=iRe;function aRe(t){return function(e){return e==null?void 0:e[t]}}var oRe=aRe,lRe=W8;function cRe(t){return function(e){return lRe(e,t)}}var dRe=cRe,uRe=oRe,hRe=dRe,fRe=$8,mRe=W3;function pRe(t){return fRe(t)?uRe(mRe(t)):hRe(t)}var gRe=pRe,vRe=_Le,xRe=sRe,yRe=o1,bRe=Ka,wRe=gRe;function jRe(t){return typeof t=="function"?t:t==null?yRe:typeof t=="object"?bRe(t)?xRe(t[0],t[1]):vRe(t):wRe(t)}var Od=jRe;function NRe(t,e,n,r){for(var i=t.length,a=n+(r?1:-1);r?a--:++a<i;)if(e(t[a],a,t))return a;return-1}var jie=NRe;function SRe(t){return t!==t}var ARe=SRe;function CRe(t,e,n){for(var r=n-1,i=t.length;++r<i;)if(t[r]===e)return r;return-1}var ERe=CRe,PRe=jie,TRe=ARe,IRe=ERe;function DRe(t,e,n){return e===e?IRe(t,e,n):PRe(t,TRe,n)}var kRe=DRe,_Re=kRe;function ORe(t,e){var n=t==null?0:t.length;return!!n&&_Re(t,e,0)>-1}var LRe=ORe;function RRe(t,e,n){for(var r=-1,i=t==null?0:t.length;++r<i;)if(n(e,t[r]))return!0;return!1}var MRe=RRe;function FRe(){}var $Re=FRe,dO=vie,BRe=$Re,zRe=n7,URe=1/0,VRe=dO&&1/zRe(new dO([,-0]))[1]==URe?function(t){return new dO(t)}:BRe,qRe=VRe,HRe=oie,WRe=LRe,GRe=MRe,KRe=cie,YRe=qRe,XRe=n7,ZRe=200;function QRe(t,e,n){var r=-1,i=WRe,a=t.length,o=!0,l=[],c=l;if(n)o=!1,i=GRe;else if(a>=ZRe){var d=e?null:YRe(t);if(d)return XRe(d);o=!1,i=KRe,c=new HRe}else c=e?[]:l;e:for(;++r<a;){var u=t[r],h=e?e(u):u;if(u=n||u!==0?u:0,o&&h===h){for(var f=c.length;f--;)if(c[f]===h)continue e;e&&c.push(h),l.push(u)}else i(c,h,n)||(c!==l&&c.push(h),l.push(u))}return l}var JRe=QRe,eMe=Od,tMe=JRe;function nMe(t,e){return t&&t.length?tMe(t,eMe(e)):[]}var rMe=nMe;const $q=$n(rMe);function Nie(t,e,n){return e===!0?$q(t,n):Wt(e)?$q(t,e):t}function mb(t){"@babel/helpers - typeof";return mb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mb(t)}var sMe=["ref"];function Bq(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Kd(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Bq(Object(n),!0).forEach(function(r){lD(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Bq(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function iMe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function zq(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Aie(r.key),r)}}function aMe(t,e,n){return e&&zq(t.prototype,e),n&&zq(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function oMe(t,e,n){return e=WP(e),lMe(t,Sie()?Reflect.construct(e,n||[],WP(t).constructor):e.apply(t,n))}function lMe(t,e){if(e&&(mb(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return cMe(t)}function cMe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Sie(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Sie=function(){return!!t})()}function WP(t){return WP=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},WP(t)}function dMe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&iF(t,e)}function iF(t,e){return iF=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},iF(t,e)}function lD(t,e,n){return e=Aie(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Aie(t){var e=uMe(t,"string");return mb(e)=="symbol"?e:e+""}function uMe(t,e){if(mb(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(mb(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function hMe(t,e){if(t==null)return{};var n=fMe(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function fMe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function mMe(t){return t.value}function pMe(t,e){if(ge.isValidElement(t))return ge.cloneElement(t,e);if(typeof t=="function")return ge.createElement(t,e);e.ref;var n=hMe(e,sMe);return ge.createElement(t7,n)}var Uq=1,m0=function(t){function e(){var n;iMe(this,e);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return n=oMe(this,e,[].concat(i)),lD(n,"lastBoundingBox",{width:-1,height:-1}),n}return dMe(e,t),aMe(e,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var r=this.wrapperNode.getBoundingClientRect();return r.height=this.wrapperNode.offsetHeight,r.width=this.wrapperNode.offsetWidth,r}return null}},{key:"updateBBox",value:function(){var r=this.props.onBBoxUpdate,i=this.getBBox();i?(Math.abs(i.width-this.lastBoundingBox.width)>Uq||Math.abs(i.height-this.lastBoundingBox.height)>Uq)&&(this.lastBoundingBox.width=i.width,this.lastBoundingBox.height=i.height,r&&r(i)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,r&&r(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?Kd({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(r){var i=this.props,a=i.layout,o=i.align,l=i.verticalAlign,c=i.margin,d=i.chartWidth,u=i.chartHeight,h,f;if(!r||(r.left===void 0||r.left===null)&&(r.right===void 0||r.right===null))if(o==="center"&&a==="vertical"){var m=this.getBBoxSnapshot();h={left:((d||0)-m.width)/2}}else h=o==="right"?{right:c&&c.right||0}:{left:c&&c.left||0};if(!r||(r.top===void 0||r.top===null)&&(r.bottom===void 0||r.bottom===null))if(l==="middle"){var v=this.getBBoxSnapshot();f={top:((u||0)-v.height)/2}}else f=l==="bottom"?{bottom:c&&c.bottom||0}:{top:c&&c.top||0};return Kd(Kd({},h),f)}},{key:"render",value:function(){var r=this,i=this.props,a=i.content,o=i.width,l=i.height,c=i.wrapperStyle,d=i.payloadUniqBy,u=i.payload,h=Kd(Kd({position:"absolute",width:o||"auto",height:l||"auto"},this.getDefaultPosition(c)),c);return ge.createElement("div",{className:"recharts-legend-wrapper",style:h,ref:function(m){r.wrapperNode=m}},pMe(a,Kd(Kd({},this.props),{},{payload:Nie(u,d,mMe)})))}}],[{key:"getWithHeight",value:function(r,i){var a=Kd(Kd({},this.defaultProps),r.props),o=a.layout;return o==="vertical"&&ct(r.props.height)?{height:r.props.height}:o==="horizontal"?{width:r.props.width||i}:null}}])}(A.PureComponent);lD(m0,"displayName","Legend");lD(m0,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var Vq=kA,gMe=r7,vMe=Ka,qq=Vq?Vq.isConcatSpreadable:void 0;function xMe(t){return vMe(t)||gMe(t)||!!(qq&&t&&t[qq])}var yMe=xMe,bMe=uie,wMe=yMe;function Cie(t,e,n,r,i){var a=-1,o=t.length;for(n||(n=wMe),i||(i=[]);++a<o;){var l=t[a];e>0&&n(l)?e>1?Cie(l,e-1,n,r,i):bMe(i,l):r||(i[i.length]=l)}return i}var Eie=Cie;function jMe(t){return function(e,n,r){for(var i=-1,a=Object(e),o=r(e),l=o.length;l--;){var c=o[t?l:++i];if(n(a[c],c,a)===!1)break}return e}}var NMe=jMe,SMe=NMe,AMe=SMe(),CMe=AMe,EMe=CMe,PMe=oD;function TMe(t,e){return t&&EMe(t,e,PMe)}var Pie=TMe,IMe=_A;function DMe(t,e){return function(n,r){if(n==null)return n;if(!IMe(n))return t(n,r);for(var i=n.length,a=e?i:-1,o=Object(n);(e?a--:++a<i)&&r(o[a],a,o)!==!1;);return n}}var kMe=DMe,_Me=Pie,OMe=kMe,LMe=OMe(_Me),o7=LMe,RMe=o7,MMe=_A;function FMe(t,e){var n=-1,r=MMe(t)?Array(t.length):[];return RMe(t,function(i,a,o){r[++n]=e(i,a,o)}),r}var Tie=FMe;function $Me(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}var BMe=$Me,Hq=Jb;function zMe(t,e){if(t!==e){var n=t!==void 0,r=t===null,i=t===t,a=Hq(t),o=e!==void 0,l=e===null,c=e===e,d=Hq(e);if(!l&&!d&&!a&&t>e||a&&o&&c&&!l&&!d||r&&o&&c||!n&&c||!i)return 1;if(!r&&!a&&!d&&t<e||d&&n&&i&&!r&&!a||l&&n&&i||!o&&i||!c)return-1}return 0}var UMe=zMe,VMe=UMe;function qMe(t,e,n){for(var r=-1,i=t.criteria,a=e.criteria,o=i.length,l=n.length;++r<o;){var c=VMe(i[r],a[r]);if(c){if(r>=l)return c;var d=n[r];return c*(d=="desc"?-1:1)}}return t.index-e.index}var HMe=qMe,uO=H8,WMe=W8,GMe=Od,KMe=Tie,YMe=BMe,XMe=mie,ZMe=HMe,QMe=o1,JMe=Ka;function eFe(t,e,n){e.length?e=uO(e,function(a){return JMe(a)?function(o){return WMe(o,a.length===1?a[0]:a)}:a}):e=[QMe];var r=-1;e=uO(e,XMe(GMe));var i=KMe(t,function(a,o,l){var c=uO(e,function(d){return d(a)});return{criteria:c,index:++r,value:a}});return YMe(i,function(a,o){return ZMe(a,o,n)})}var tFe=eFe;function nFe(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}var rFe=nFe,sFe=rFe,Wq=Math.max;function iFe(t,e,n){return e=Wq(e===void 0?t.length-1:e,0),function(){for(var r=arguments,i=-1,a=Wq(r.length-e,0),o=Array(a);++i<a;)o[i]=r[e+i];i=-1;for(var l=Array(e+1);++i<e;)l[i]=r[i];return l[e]=n(o),sFe(t,this,l)}}var aFe=iFe;function oFe(t){return function(){return t}}var lFe=oFe,cFe=Dv,dFe=function(){try{var t=cFe(Object,"defineProperty");return t({},"",{}),t}catch{}}(),Iie=dFe,uFe=lFe,Gq=Iie,hFe=o1,fFe=Gq?function(t,e){return Gq(t,"toString",{configurable:!0,enumerable:!1,value:uFe(e),writable:!0})}:hFe,mFe=fFe,pFe=800,gFe=16,vFe=Date.now;function xFe(t){var e=0,n=0;return function(){var r=vFe(),i=gFe-(r-n);if(n=r,i>0){if(++e>=pFe)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}var yFe=xFe,bFe=mFe,wFe=yFe,jFe=wFe(bFe),NFe=jFe,SFe=o1,AFe=aFe,CFe=NFe;function EFe(t,e){return CFe(AFe(t,e,SFe),t+"")}var PFe=EFe,TFe=z8,IFe=_A,DFe=s7,kFe=km;function _Fe(t,e,n){if(!kFe(n))return!1;var r=typeof e;return(r=="number"?IFe(n)&&DFe(e,n.length):r=="string"&&e in n)?TFe(n[e],t):!1}var cD=_Fe,OFe=Eie,LFe=tFe,RFe=PFe,Kq=cD,MFe=RFe(function(t,e){if(t==null)return[];var n=e.length;return n>1&&Kq(t,e[0],e[1])?e=[]:n>2&&Kq(e[0],e[1],e[2])&&(e=[e[0]]),LFe(t,OFe(e,1),[])}),FFe=MFe;const l7=$n(FFe);function a2(t){"@babel/helpers - typeof";return a2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a2(t)}function aF(){return aF=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},aF.apply(this,arguments)}function $Fe(t,e){return VFe(t)||UFe(t,e)||zFe(t,e)||BFe()}function BFe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function zFe(t,e){if(t){if(typeof t=="string")return Yq(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Yq(t,e)}}function Yq(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function UFe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,o,l=[],c=!0,d=!1;try{if(a=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==e);c=!0);}catch(u){d=!0,i=u}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw i}}return l}}function VFe(t){if(Array.isArray(t))return t}function Xq(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function hO(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Xq(Object(n),!0).forEach(function(r){qFe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Xq(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function qFe(t,e,n){return e=HFe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function HFe(t){var e=WFe(t,"string");return a2(e)=="symbol"?e:e+""}function WFe(t,e){if(a2(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(a2(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function GFe(t){return Array.isArray(t)&&Vs(t[0])&&Vs(t[1])?t.join(" ~ "):t}var KFe=function(e){var n=e.separator,r=n===void 0?" : ":n,i=e.contentStyle,a=i===void 0?{}:i,o=e.itemStyle,l=o===void 0?{}:o,c=e.labelStyle,d=c===void 0?{}:c,u=e.payload,h=e.formatter,f=e.itemSorter,m=e.wrapperClassName,v=e.labelClassName,p=e.label,g=e.labelFormatter,x=e.accessibilityLayer,y=x===void 0?!1:x,b=function(){if(u&&u.length){var P={padding:0,margin:0},R=(f?l7(u,f):u).map(function(_,M){if(_.type==="none")return null;var U=hO({display:"block",paddingTop:4,paddingBottom:4,color:_.color||"#000"},l),F=_.formatter||h||GFe,z=_.value,H=_.name,W=z,$=H;if(F&&W!=null&&$!=null){var L=F(z,H,_,M,u);if(Array.isArray(L)){var q=$Fe(L,2);W=q[0],$=q[1]}else W=L}return ge.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(M),style:U},Vs($)?ge.createElement("span",{className:"recharts-tooltip-item-name"},$):null,Vs($)?ge.createElement("span",{className:"recharts-tooltip-item-separator"},r):null,ge.createElement("span",{className:"recharts-tooltip-item-value"},W),ge.createElement("span",{className:"recharts-tooltip-item-unit"},_.unit||""))});return ge.createElement("ul",{className:"recharts-tooltip-item-list",style:P},R)}return null},w=hO({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},a),N=hO({margin:0},d),E=!Qt(p),C=E?p:"",j=dn("recharts-default-tooltip",m),I=dn("recharts-tooltip-label",v);E&&g&&u!==void 0&&u!==null&&(C=g(p,u));var k=y?{role:"status","aria-live":"assertive"}:{};return ge.createElement("div",aF({className:j,style:w},k),ge.createElement("p",{className:I,style:N},ge.isValidElement(C)?C:"".concat(C)),b())};function o2(t){"@babel/helpers - typeof";return o2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o2(t)}function SC(t,e,n){return e=YFe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function YFe(t){var e=XFe(t,"string");return o2(e)=="symbol"?e:e+""}function XFe(t,e){if(o2(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(o2(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var cw="recharts-tooltip-wrapper",ZFe={visibility:"hidden"};function QFe(t){var e=t.coordinate,n=t.translateX,r=t.translateY;return dn(cw,SC(SC(SC(SC({},"".concat(cw,"-right"),ct(n)&&e&&ct(e.x)&&n>=e.x),"".concat(cw,"-left"),ct(n)&&e&&ct(e.x)&&n<e.x),"".concat(cw,"-bottom"),ct(r)&&e&&ct(e.y)&&r>=e.y),"".concat(cw,"-top"),ct(r)&&e&&ct(e.y)&&r<e.y))}function Zq(t){var e=t.allowEscapeViewBox,n=t.coordinate,r=t.key,i=t.offsetTopLeft,a=t.position,o=t.reverseDirection,l=t.tooltipDimension,c=t.viewBox,d=t.viewBoxDimension;if(a&&ct(a[r]))return a[r];var u=n[r]-l-i,h=n[r]+i;if(e[r])return o[r]?u:h;if(o[r]){var f=u,m=c[r];return f<m?Math.max(h,c[r]):Math.max(u,c[r])}var v=h+l,p=c[r]+d;return v>p?Math.max(u,c[r]):Math.max(h,c[r])}function JFe(t){var e=t.translateX,n=t.translateY,r=t.useTranslate3d;return{transform:r?"translate3d(".concat(e,"px, ").concat(n,"px, 0)"):"translate(".concat(e,"px, ").concat(n,"px)")}}function e6e(t){var e=t.allowEscapeViewBox,n=t.coordinate,r=t.offsetTopLeft,i=t.position,a=t.reverseDirection,o=t.tooltipBox,l=t.useTranslate3d,c=t.viewBox,d,u,h;return o.height>0&&o.width>0&&n?(u=Zq({allowEscapeViewBox:e,coordinate:n,key:"x",offsetTopLeft:r,position:i,reverseDirection:a,tooltipDimension:o.width,viewBox:c,viewBoxDimension:c.width}),h=Zq({allowEscapeViewBox:e,coordinate:n,key:"y",offsetTopLeft:r,position:i,reverseDirection:a,tooltipDimension:o.height,viewBox:c,viewBoxDimension:c.height}),d=JFe({translateX:u,translateY:h,useTranslate3d:l})):d=ZFe,{cssProperties:d,cssClasses:QFe({translateX:u,translateY:h,coordinate:n})}}function pb(t){"@babel/helpers - typeof";return pb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pb(t)}function Qq(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Jq(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Qq(Object(n),!0).forEach(function(r){lF(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Qq(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function t6e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function eH(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,kie(r.key),r)}}function n6e(t,e,n){return e&&eH(t.prototype,e),n&&eH(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function r6e(t,e,n){return e=GP(e),s6e(t,Die()?Reflect.construct(e,n||[],GP(t).constructor):e.apply(t,n))}function s6e(t,e){if(e&&(pb(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return i6e(t)}function i6e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Die(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Die=function(){return!!t})()}function GP(t){return GP=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},GP(t)}function a6e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&oF(t,e)}function oF(t,e){return oF=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},oF(t,e)}function lF(t,e,n){return e=kie(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function kie(t){var e=o6e(t,"string");return pb(e)=="symbol"?e:e+""}function o6e(t,e){if(pb(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(pb(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var tH=1,l6e=function(t){function e(){var n;t6e(this,e);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return n=r6e(this,e,[].concat(i)),lF(n,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),lF(n,"handleKeyDown",function(o){if(o.key==="Escape"){var l,c,d,u;n.setState({dismissed:!0,dismissedAtCoordinate:{x:(l=(c=n.props.coordinate)===null||c===void 0?void 0:c.x)!==null&&l!==void 0?l:0,y:(d=(u=n.props.coordinate)===null||u===void 0?void 0:u.y)!==null&&d!==void 0?d:0}})}}),n}return a6e(e,t),n6e(e,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var r=this.wrapperNode.getBoundingClientRect();(Math.abs(r.width-this.state.lastBoundingBox.width)>tH||Math.abs(r.height-this.state.lastBoundingBox.height)>tH)&&this.setState({lastBoundingBox:{width:r.width,height:r.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var r,i;this.props.active&&this.updateBBox(),this.state.dismissed&&(((r=this.props.coordinate)===null||r===void 0?void 0:r.x)!==this.state.dismissedAtCoordinate.x||((i=this.props.coordinate)===null||i===void 0?void 0:i.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var r=this,i=this.props,a=i.active,o=i.allowEscapeViewBox,l=i.animationDuration,c=i.animationEasing,d=i.children,u=i.coordinate,h=i.hasPayload,f=i.isAnimationActive,m=i.offset,v=i.position,p=i.reverseDirection,g=i.useTranslate3d,x=i.viewBox,y=i.wrapperStyle,b=e6e({allowEscapeViewBox:o,coordinate:u,offsetTopLeft:m,position:v,reverseDirection:p,tooltipBox:this.state.lastBoundingBox,useTranslate3d:g,viewBox:x}),w=b.cssClasses,N=b.cssProperties,E=Jq(Jq({transition:f&&a?"transform ".concat(l,"ms ").concat(c):void 0},N),{},{pointerEvents:"none",visibility:!this.state.dismissed&&a&&h?"visible":"hidden",position:"absolute",top:0,left:0},y);return ge.createElement("div",{tabIndex:-1,className:w,style:E,ref:function(j){r.wrapperNode=j}},d)}}])}(A.PureComponent),c6e=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},pc={isSsr:c6e(),get:function(e){return pc[e]},set:function(e,n){if(typeof e=="string")pc[e]=n;else{var r=Object.keys(e);r&&r.length&&r.forEach(function(i){pc[i]=e[i]})}}};function gb(t){"@babel/helpers - typeof";return gb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gb(t)}function nH(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function rH(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?nH(Object(n),!0).forEach(function(r){c7(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):nH(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function d6e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function sH(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Oie(r.key),r)}}function u6e(t,e,n){return e&&sH(t.prototype,e),n&&sH(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function h6e(t,e,n){return e=KP(e),f6e(t,_ie()?Reflect.construct(e,n||[],KP(t).constructor):e.apply(t,n))}function f6e(t,e){if(e&&(gb(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return m6e(t)}function m6e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _ie(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_ie=function(){return!!t})()}function KP(t){return KP=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},KP(t)}function p6e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&cF(t,e)}function cF(t,e){return cF=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},cF(t,e)}function c7(t,e,n){return e=Oie(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Oie(t){var e=g6e(t,"string");return gb(e)=="symbol"?e:e+""}function g6e(t,e){if(gb(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(gb(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function v6e(t){return t.dataKey}function x6e(t,e){return ge.isValidElement(t)?ge.cloneElement(t,e):typeof t=="function"?ge.createElement(t,e):ge.createElement(KFe,e)}var So=function(t){function e(){return d6e(this,e),h6e(this,e,arguments)}return p6e(e,t),u6e(e,[{key:"render",value:function(){var r=this,i=this.props,a=i.active,o=i.allowEscapeViewBox,l=i.animationDuration,c=i.animationEasing,d=i.content,u=i.coordinate,h=i.filterNull,f=i.isAnimationActive,m=i.offset,v=i.payload,p=i.payloadUniqBy,g=i.position,x=i.reverseDirection,y=i.useTranslate3d,b=i.viewBox,w=i.wrapperStyle,N=v??[];h&&N.length&&(N=Nie(v.filter(function(C){return C.value!=null&&(C.hide!==!0||r.props.includeHidden)}),p,v6e));var E=N.length>0;return ge.createElement(l6e,{allowEscapeViewBox:o,animationDuration:l,animationEasing:c,isAnimationActive:f,active:a,coordinate:u,hasPayload:E,offset:m,position:g,reverseDirection:x,useTranslate3d:y,viewBox:b,wrapperStyle:w},x6e(d,rH(rH({},this.props),{},{payload:N})))}}])}(A.PureComponent);c7(So,"displayName","Tooltip");c7(So,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!pc.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var y6e=_d,b6e=function(){return y6e.Date.now()},w6e=b6e,j6e=/\s/;function N6e(t){for(var e=t.length;e--&&j6e.test(t.charAt(e)););return e}var S6e=N6e,A6e=S6e,C6e=/^\s+/;function E6e(t){return t&&t.slice(0,A6e(t)+1).replace(C6e,"")}var P6e=E6e,T6e=P6e,iH=km,I6e=Jb,aH=0/0,D6e=/^[-+]0x[0-9a-f]+$/i,k6e=/^0b[01]+$/i,_6e=/^0o[0-7]+$/i,O6e=parseInt;function L6e(t){if(typeof t=="number")return t;if(I6e(t))return aH;if(iH(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=iH(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=T6e(t);var n=k6e.test(t);return n||_6e.test(t)?O6e(t.slice(2),n?2:8):D6e.test(t)?aH:+t}var Lie=L6e,R6e=km,fO=w6e,oH=Lie,M6e="Expected a function",F6e=Math.max,$6e=Math.min;function B6e(t,e,n){var r,i,a,o,l,c,d=0,u=!1,h=!1,f=!0;if(typeof t!="function")throw new TypeError(M6e);e=oH(e)||0,R6e(n)&&(u=!!n.leading,h="maxWait"in n,a=h?F6e(oH(n.maxWait)||0,e):a,f="trailing"in n?!!n.trailing:f);function m(E){var C=r,j=i;return r=i=void 0,d=E,o=t.apply(j,C),o}function v(E){return d=E,l=setTimeout(x,e),u?m(E):o}function p(E){var C=E-c,j=E-d,I=e-C;return h?$6e(I,a-j):I}function g(E){var C=E-c,j=E-d;return c===void 0||C>=e||C<0||h&&j>=a}function x(){var E=fO();if(g(E))return y(E);l=setTimeout(x,p(E))}function y(E){return l=void 0,f&&r?m(E):(r=i=void 0,o)}function b(){l!==void 0&&clearTimeout(l),d=0,r=c=i=l=void 0}function w(){return l===void 0?o:y(fO())}function N(){var E=fO(),C=g(E);if(r=arguments,i=this,c=E,C){if(l===void 0)return v(c);if(h)return clearTimeout(l),l=setTimeout(x,e),m(c)}return l===void 0&&(l=setTimeout(x,e)),o}return N.cancel=b,N.flush=w,N}var z6e=B6e,U6e=z6e,V6e=km,q6e="Expected a function";function H6e(t,e,n){var r=!0,i=!0;if(typeof t!="function")throw new TypeError(q6e);return V6e(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),U6e(t,e,{leading:r,maxWait:e,trailing:i})}var W6e=H6e;const Rie=$n(W6e);function l2(t){"@babel/helpers - typeof";return l2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l2(t)}function lH(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function AC(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?lH(Object(n),!0).forEach(function(r){G6e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):lH(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function G6e(t,e,n){return e=K6e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function K6e(t){var e=Y6e(t,"string");return l2(e)=="symbol"?e:e+""}function Y6e(t,e){if(l2(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(l2(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function X6e(t,e){return e$e(t)||J6e(t,e)||Q6e(t,e)||Z6e()}function Z6e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Q6e(t,e){if(t){if(typeof t=="string")return cH(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return cH(t,e)}}function cH(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function J6e(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,o,l=[],c=!0,d=!1;try{if(a=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==e);c=!0);}catch(u){d=!0,i=u}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw i}}return l}}function e$e(t){if(Array.isArray(t))return t}var CC=A.forwardRef(function(t,e){var n=t.aspect,r=t.initialDimension,i=r===void 0?{width:-1,height:-1}:r,a=t.width,o=a===void 0?"100%":a,l=t.height,c=l===void 0?"100%":l,d=t.minWidth,u=d===void 0?0:d,h=t.minHeight,f=t.maxHeight,m=t.children,v=t.debounce,p=v===void 0?0:v,g=t.id,x=t.className,y=t.onResize,b=t.style,w=b===void 0?{}:b,N=A.useRef(null),E=A.useRef();E.current=y,A.useImperativeHandle(e,function(){return Object.defineProperty(N.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),N.current},configurable:!0})});var C=A.useState({containerWidth:i.width,containerHeight:i.height}),j=X6e(C,2),I=j[0],k=j[1],D=A.useCallback(function(R,_){k(function(M){var U=Math.round(R),F=Math.round(_);return M.containerWidth===U&&M.containerHeight===F?M:{containerWidth:U,containerHeight:F}})},[]);A.useEffect(function(){var R=function(H){var W,$=H[0].contentRect,L=$.width,q=$.height;D(L,q),(W=E.current)===null||W===void 0||W.call(E,L,q)};p>0&&(R=Rie(R,p,{trailing:!0,leading:!1}));var _=new ResizeObserver(R),M=N.current.getBoundingClientRect(),U=M.width,F=M.height;return D(U,F),_.observe(N.current),function(){_.disconnect()}},[D,p]);var P=A.useMemo(function(){var R=I.containerWidth,_=I.containerHeight;if(R<0||_<0)return null;mc(yp(o)||yp(c),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,o,c),mc(!n||n>0,"The aspect(%s) must be greater than zero.",n);var M=yp(o)?R:o,U=yp(c)?_:c;n&&n>0&&(M?U=M/n:U&&(M=U*n),f&&U>f&&(U=f)),mc(M>0||U>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,M,U,o,c,u,h,n);var F=!Array.isArray(m)&&Ku(m.type).endsWith("Chart");return ge.Children.map(m,function(z){return ge.isValidElement(z)?A.cloneElement(z,AC({width:M,height:U},F?{style:AC({height:"100%",width:"100%",maxHeight:U,maxWidth:M},z.props.style)}:{})):z})},[n,m,c,f,h,u,I,o]);return ge.createElement("div",{id:g?"".concat(g):void 0,className:dn("recharts-responsive-container",x),style:AC(AC({},w),{},{width:o,height:c,minWidth:u,minHeight:h,maxHeight:f}),ref:N},P)}),dD=function(e){return null};dD.displayName="Cell";function c2(t){"@babel/helpers - typeof";return c2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c2(t)}function dH(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function dF(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?dH(Object(n),!0).forEach(function(r){t$e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):dH(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function t$e(t,e,n){return e=n$e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function n$e(t){var e=r$e(t,"string");return c2(e)=="symbol"?e:e+""}function r$e(t,e){if(c2(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(c2(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var jx={widthCache:{},cacheCount:0},s$e=2e3,i$e={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},uH="recharts_measurement_span";function a$e(t){var e=dF({},t);return Object.keys(e).forEach(function(n){e[n]||delete e[n]}),e}var uj=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||pc.isSsr)return{width:0,height:0};var r=a$e(n),i=JSON.stringify({text:e,copyStyle:r});if(jx.widthCache[i])return jx.widthCache[i];try{var a=document.getElementById(uH);a||(a=document.createElement("span"),a.setAttribute("id",uH),a.setAttribute("aria-hidden","true"),document.body.appendChild(a));var o=dF(dF({},i$e),r);Object.assign(a.style,o),a.textContent="".concat(e);var l=a.getBoundingClientRect(),c={width:l.width,height:l.height};return jx.widthCache[i]=c,++jx.cacheCount>s$e&&(jx.cacheCount=0,jx.widthCache={}),c}catch{return{width:0,height:0}}},o$e=function(e){return{top:e.top+window.scrollY-document.documentElement.clientTop,left:e.left+window.scrollX-document.documentElement.clientLeft}};function d2(t){"@babel/helpers - typeof";return d2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d2(t)}function YP(t,e){return u$e(t)||d$e(t,e)||c$e(t,e)||l$e()}function l$e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function c$e(t,e){if(t){if(typeof t=="string")return hH(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return hH(t,e)}}function hH(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function d$e(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,o,l=[],c=!0,d=!1;try{if(a=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==e);c=!0);}catch(u){d=!0,i=u}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw i}}return l}}function u$e(t){if(Array.isArray(t))return t}function h$e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function fH(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,m$e(r.key),r)}}function f$e(t,e,n){return e&&fH(t.prototype,e),n&&fH(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function m$e(t){var e=p$e(t,"string");return d2(e)=="symbol"?e:e+""}function p$e(t,e){if(d2(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(d2(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var mH=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,pH=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,g$e=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,v$e=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,Mie={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},x$e=Object.keys(Mie),Zx="NaN";function y$e(t,e){return t*Mie[e]}var EC=function(){function t(e,n){h$e(this,t),this.num=e,this.unit=n,this.num=e,this.unit=n,Number.isNaN(e)&&(this.unit=""),n!==""&&!g$e.test(n)&&(this.num=NaN,this.unit=""),x$e.includes(n)&&(this.num=y$e(e,n),this.unit="px")}return f$e(t,[{key:"add",value:function(n){return this.unit!==n.unit?new t(NaN,""):new t(this.num+n.num,this.unit)}},{key:"subtract",value:function(n){return this.unit!==n.unit?new t(NaN,""):new t(this.num-n.num,this.unit)}},{key:"multiply",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new t(NaN,""):new t(this.num*n.num,this.unit||n.unit)}},{key:"divide",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new t(NaN,""):new t(this.num/n.num,this.unit||n.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(n){var r,i=(r=v$e.exec(n))!==null&&r!==void 0?r:[],a=YP(i,3),o=a[1],l=a[2];return new t(parseFloat(o),l??"")}}])}();function Fie(t){if(t.includes(Zx))return Zx;for(var e=t;e.includes("*")||e.includes("/");){var n,r=(n=mH.exec(e))!==null&&n!==void 0?n:[],i=YP(r,4),a=i[1],o=i[2],l=i[3],c=EC.parse(a??""),d=EC.parse(l??""),u=o==="*"?c.multiply(d):c.divide(d);if(u.isNaN())return Zx;e=e.replace(mH,u.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var h,f=(h=pH.exec(e))!==null&&h!==void 0?h:[],m=YP(f,4),v=m[1],p=m[2],g=m[3],x=EC.parse(v??""),y=EC.parse(g??""),b=p==="+"?x.add(y):x.subtract(y);if(b.isNaN())return Zx;e=e.replace(pH,b.toString())}return e}var gH=/\(([^()]*)\)/;function b$e(t){for(var e=t;e.includes("(");){var n=gH.exec(e),r=YP(n,2),i=r[1];e=e.replace(gH,Fie(i))}return e}function w$e(t){var e=t.replace(/\s+/g,"");return e=b$e(e),e=Fie(e),e}function j$e(t){try{return w$e(t)}catch{return Zx}}function mO(t){var e=j$e(t.slice(5,-1));return e===Zx?"":e}var N$e=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],S$e=["dx","dy","angle","className","breakAll"];function uF(){return uF=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},uF.apply(this,arguments)}function vH(t,e){if(t==null)return{};var n=A$e(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function A$e(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function xH(t,e){return T$e(t)||P$e(t,e)||E$e(t,e)||C$e()}function C$e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function E$e(t,e){if(t){if(typeof t=="string")return yH(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return yH(t,e)}}function yH(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function P$e(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,o,l=[],c=!0,d=!1;try{if(a=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==e);c=!0);}catch(u){d=!0,i=u}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw i}}return l}}function T$e(t){if(Array.isArray(t))return t}var $ie=/[ \f\n\r\t\v\u2028\u2029]+/,Bie=function(e){var n=e.children,r=e.breakAll,i=e.style;try{var a=[];Qt(n)||(r?a=n.toString().split(""):a=n.toString().split($ie));var o=a.map(function(c){return{word:c,width:uj(c,i).width}}),l=r?0:uj("",i).width;return{wordsWithComputedWidth:o,spaceWidth:l}}catch{return null}},I$e=function(e,n,r,i,a){var o=e.maxLines,l=e.children,c=e.style,d=e.breakAll,u=ct(o),h=l,f=function(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return M.reduce(function(U,F){var z=F.word,H=F.width,W=U[U.length-1];if(W&&(i==null||a||W.width+H+r<Number(i)))W.words.push(z),W.width+=H+r;else{var $={words:[z],width:H};U.push($)}return U},[])},m=f(n),v=function(M){return M.reduce(function(U,F){return U.width>F.width?U:F})};if(!u)return m;for(var p="",g=function(M){var U=h.slice(0,M),F=Bie({breakAll:d,style:c,children:U+p}).wordsWithComputedWidth,z=f(F),H=z.length>o||v(z).width>Number(i);return[H,z]},x=0,y=h.length-1,b=0,w;x<=y&&b<=h.length-1;){var N=Math.floor((x+y)/2),E=N-1,C=g(E),j=xH(C,2),I=j[0],k=j[1],D=g(N),P=xH(D,1),R=P[0];if(!I&&!R&&(x=N+1),I&&R&&(y=N-1),!I&&R){w=k;break}b++}return w||m},bH=function(e){var n=Qt(e)?[]:e.toString().split($ie);return[{words:n}]},D$e=function(e){var n=e.width,r=e.scaleToFit,i=e.children,a=e.style,o=e.breakAll,l=e.maxLines;if((n||r)&&!pc.isSsr){var c,d,u=Bie({breakAll:o,children:i,style:a});if(u){var h=u.wordsWithComputedWidth,f=u.spaceWidth;c=h,d=f}else return bH(i);return I$e({breakAll:o,children:i,maxLines:l,style:a},c,d,n,r)}return bH(i)},wH="#808080",gv=function(e){var n=e.x,r=n===void 0?0:n,i=e.y,a=i===void 0?0:i,o=e.lineHeight,l=o===void 0?"1em":o,c=e.capHeight,d=c===void 0?"0.71em":c,u=e.scaleToFit,h=u===void 0?!1:u,f=e.textAnchor,m=f===void 0?"start":f,v=e.verticalAnchor,p=v===void 0?"end":v,g=e.fill,x=g===void 0?wH:g,y=vH(e,N$e),b=A.useMemo(function(){return D$e({breakAll:y.breakAll,children:y.children,maxLines:y.maxLines,scaleToFit:h,style:y.style,width:y.width})},[y.breakAll,y.children,y.maxLines,h,y.style,y.width]),w=y.dx,N=y.dy,E=y.angle,C=y.className,j=y.breakAll,I=vH(y,S$e);if(!Vs(r)||!Vs(a))return null;var k=r+(ct(w)?w:0),D=a+(ct(N)?N:0),P;switch(p){case"start":P=mO("calc(".concat(d,")"));break;case"middle":P=mO("calc(".concat((b.length-1)/2," * -").concat(l," + (").concat(d," / 2))"));break;default:P=mO("calc(".concat(b.length-1," * -").concat(l,")"));break}var R=[];if(h){var _=b[0].width,M=y.width;R.push("scale(".concat((ct(M)?M/_:1)/_,")"))}return E&&R.push("rotate(".concat(E,", ").concat(k,", ").concat(D,")")),R.length&&(I.transform=R.join(" ")),ge.createElement("text",uF({},_t(I,!0),{x:k,y:D,className:dn("recharts-text",C),textAnchor:m,fill:x.includes("url")?wH:x}),b.map(function(U,F){var z=U.words.join(j?"":" ");return ge.createElement("tspan",{x:k,dy:F===0?P:l,key:"".concat(z,"-").concat(F)},z)}))};function om(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function k$e(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function d7(t){let e,n,r;t.length!==2?(e=om,n=(l,c)=>om(t(l),c),r=(l,c)=>t(l)-c):(e=t===om||t===k$e?t:_$e,n=t,r=t);function i(l,c,d=0,u=l.length){if(d<u){if(e(c,c)!==0)return u;do{const h=d+u>>>1;n(l[h],c)<0?d=h+1:u=h}while(d<u)}return d}function a(l,c,d=0,u=l.length){if(d<u){if(e(c,c)!==0)return u;do{const h=d+u>>>1;n(l[h],c)<=0?d=h+1:u=h}while(d<u)}return d}function o(l,c,d=0,u=l.length){const h=i(l,c,d,u-1);return h>d&&r(l[h-1],c)>-r(l[h],c)?h-1:h}return{left:i,center:o,right:a}}function _$e(){return 0}function zie(t){return t===null?NaN:+t}function*O$e(t,e){if(e===void 0)for(let n of t)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of t)(r=e(r,++n,t))!=null&&(r=+r)>=r&&(yield r)}}const L$e=d7(om),R$e=L$e.right;d7(zie).center;const OA=R$e;class jH extends Map{constructor(e,n=$$e){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[r,i]of e)this.set(r,i)}get(e){return super.get(NH(this,e))}has(e){return super.has(NH(this,e))}set(e,n){return super.set(M$e(this,e),n)}delete(e){return super.delete(F$e(this,e))}}function NH({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function M$e({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function F$e({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function $$e(t){return t!==null&&typeof t=="object"?t.valueOf():t}function B$e(t=om){if(t===om)return Uie;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,n)=>{const r=t(e,n);return r||r===0?r:(t(n,n)===0)-(t(e,e)===0)}}function Uie(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}const z$e=Math.sqrt(50),U$e=Math.sqrt(10),V$e=Math.sqrt(2);function XP(t,e,n){const r=(e-t)/Math.max(0,n),i=Math.floor(Math.log10(r)),a=r/Math.pow(10,i),o=a>=z$e?10:a>=U$e?5:a>=V$e?2:1;let l,c,d;return i<0?(d=Math.pow(10,-i)/o,l=Math.round(t*d),c=Math.round(e*d),l/d<t&&++l,c/d>e&&--c,d=-d):(d=Math.pow(10,i)*o,l=Math.round(t/d),c=Math.round(e/d),l*d<t&&++l,c*d>e&&--c),c<l&&.5<=n&&n<2?XP(t,e,n*2):[l,c,d]}function hF(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const r=e<t,[i,a,o]=r?XP(e,t,n):XP(t,e,n);if(!(a>=i))return[];const l=a-i+1,c=new Array(l);if(r)if(o<0)for(let d=0;d<l;++d)c[d]=(a-d)/-o;else for(let d=0;d<l;++d)c[d]=(a-d)*o;else if(o<0)for(let d=0;d<l;++d)c[d]=(i+d)/-o;else for(let d=0;d<l;++d)c[d]=(i+d)*o;return c}function fF(t,e,n){return e=+e,t=+t,n=+n,XP(t,e,n)[2]}function mF(t,e,n){e=+e,t=+t,n=+n;const r=e<t,i=r?fF(e,t,n):fF(t,e,n);return(r?-1:1)*(i<0?1/-i:i)}function SH(t,e){let n;if(e===void 0)for(const r of t)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of t)(i=e(i,++r,t))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function AH(t,e){let n;if(e===void 0)for(const r of t)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of t)(i=e(i,++r,t))!=null&&(n>i||n===void 0&&i>=i)&&(n=i)}return n}function Vie(t,e,n=0,r=1/0,i){if(e=Math.floor(e),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(t.length-1,r)),!(n<=e&&e<=r))return t;for(i=i===void 0?Uie:B$e(i);r>n;){if(r-n>600){const c=r-n+1,d=e-n+1,u=Math.log(c),h=.5*Math.exp(2*u/3),f=.5*Math.sqrt(u*h*(c-h)/c)*(d-c/2<0?-1:1),m=Math.max(n,Math.floor(e-d*h/c+f)),v=Math.min(r,Math.floor(e+(c-d)*h/c+f));Vie(t,e,m,v,i)}const a=t[e];let o=n,l=r;for(dw(t,n,e),i(t[r],a)>0&&dw(t,n,r);o<l;){for(dw(t,o,l),++o,--l;i(t[o],a)<0;)++o;for(;i(t[l],a)>0;)--l}i(t[n],a)===0?dw(t,n,l):(++l,dw(t,l,r)),l<=e&&(n=l+1),e<=l&&(r=l-1)}return t}function dw(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function q$e(t,e,n){if(t=Float64Array.from(O$e(t,n)),!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return AH(t);if(e>=1)return SH(t);var r,i=(r-1)*e,a=Math.floor(i),o=SH(Vie(t,a).subarray(0,a+1)),l=AH(t.subarray(a+1));return o+(l-o)*(i-a)}}function H$e(t,e,n=zie){if(!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return+n(t[0],0,t);if(e>=1)return+n(t[r-1],r-1,t);var r,i=(r-1)*e,a=Math.floor(i),o=+n(t[a],a,t),l=+n(t[a+1],a+1,t);return o+(l-o)*(i-a)}}function W$e(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((e-t)/n))|0,a=new Array(i);++r<i;)a[r]=t+r*n;return a}function Al(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function mh(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const pF=Symbol("implicit");function u7(){var t=new jH,e=[],n=[],r=pF;function i(a){let o=t.get(a);if(o===void 0){if(r!==pF)return r;t.set(a,o=e.push(a)-1)}return n[o%n.length]}return i.domain=function(a){if(!arguments.length)return e.slice();e=[],t=new jH;for(const o of a)t.has(o)||t.set(o,e.push(o)-1);return i},i.range=function(a){return arguments.length?(n=Array.from(a),i):n.slice()},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return u7(e,n).unknown(r)},Al.apply(i,arguments),i}function u2(){var t=u7().unknown(void 0),e=t.domain,n=t.range,r=0,i=1,a,o,l=!1,c=0,d=0,u=.5;delete t.unknown;function h(){var f=e().length,m=i<r,v=m?i:r,p=m?r:i;a=(p-v)/Math.max(1,f-c+d*2),l&&(a=Math.floor(a)),v+=(p-v-a*(f-c))*u,o=a*(1-c),l&&(v=Math.round(v),o=Math.round(o));var g=W$e(f).map(function(x){return v+a*x});return n(m?g.reverse():g)}return t.domain=function(f){return arguments.length?(e(f),h()):e()},t.range=function(f){return arguments.length?([r,i]=f,r=+r,i=+i,h()):[r,i]},t.rangeRound=function(f){return[r,i]=f,r=+r,i=+i,l=!0,h()},t.bandwidth=function(){return o},t.step=function(){return a},t.round=function(f){return arguments.length?(l=!!f,h()):l},t.padding=function(f){return arguments.length?(c=Math.min(1,d=+f),h()):c},t.paddingInner=function(f){return arguments.length?(c=Math.min(1,f),h()):c},t.paddingOuter=function(f){return arguments.length?(d=+f,h()):d},t.align=function(f){return arguments.length?(u=Math.max(0,Math.min(1,f)),h()):u},t.copy=function(){return u2(e(),[r,i]).round(l).paddingInner(c).paddingOuter(d).align(u)},Al.apply(h(),arguments)}function qie(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return qie(e())},t}function hj(){return qie(u2.apply(null,arguments).paddingInner(1))}function h7(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function Hie(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function LA(){}var h2=.7,ZP=1/h2,p0="\\s*([+-]?\\d+)\\s*",f2="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",wd="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",G$e=/^#([0-9a-f]{3,8})$/,K$e=new RegExp(`^rgb\\(${p0},${p0},${p0}\\)$`),Y$e=new RegExp(`^rgb\\(${wd},${wd},${wd}\\)$`),X$e=new RegExp(`^rgba\\(${p0},${p0},${p0},${f2}\\)$`),Z$e=new RegExp(`^rgba\\(${wd},${wd},${wd},${f2}\\)$`),Q$e=new RegExp(`^hsl\\(${f2},${wd},${wd}\\)$`),J$e=new RegExp(`^hsla\\(${f2},${wd},${wd},${f2}\\)$`),CH={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};h7(LA,m2,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:EH,formatHex:EH,formatHex8:e8e,formatHsl:t8e,formatRgb:PH,toString:PH});function EH(){return this.rgb().formatHex()}function e8e(){return this.rgb().formatHex8()}function t8e(){return Wie(this).formatHsl()}function PH(){return this.rgb().formatRgb()}function m2(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=G$e.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?TH(e):n===3?new za(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?PC(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?PC(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=K$e.exec(t))?new za(e[1],e[2],e[3],1):(e=Y$e.exec(t))?new za(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=X$e.exec(t))?PC(e[1],e[2],e[3],e[4]):(e=Z$e.exec(t))?PC(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=Q$e.exec(t))?kH(e[1],e[2]/100,e[3]/100,1):(e=J$e.exec(t))?kH(e[1],e[2]/100,e[3]/100,e[4]):CH.hasOwnProperty(t)?TH(CH[t]):t==="transparent"?new za(NaN,NaN,NaN,0):null}function TH(t){return new za(t>>16&255,t>>8&255,t&255,1)}function PC(t,e,n,r){return r<=0&&(t=e=n=NaN),new za(t,e,n,r)}function n8e(t){return t instanceof LA||(t=m2(t)),t?(t=t.rgb(),new za(t.r,t.g,t.b,t.opacity)):new za}function gF(t,e,n,r){return arguments.length===1?n8e(t):new za(t,e,n,r??1)}function za(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}h7(za,gF,Hie(LA,{brighter(t){return t=t==null?ZP:Math.pow(ZP,t),new za(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?h2:Math.pow(h2,t),new za(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new za(Jg(this.r),Jg(this.g),Jg(this.b),QP(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:IH,formatHex:IH,formatHex8:r8e,formatRgb:DH,toString:DH}));function IH(){return`#${bp(this.r)}${bp(this.g)}${bp(this.b)}`}function r8e(){return`#${bp(this.r)}${bp(this.g)}${bp(this.b)}${bp((isNaN(this.opacity)?1:this.opacity)*255)}`}function DH(){const t=QP(this.opacity);return`${t===1?"rgb(":"rgba("}${Jg(this.r)}, ${Jg(this.g)}, ${Jg(this.b)}${t===1?")":`, ${t})`}`}function QP(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Jg(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function bp(t){return t=Jg(t),(t<16?"0":"")+t.toString(16)}function kH(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new cc(t,e,n,r)}function Wie(t){if(t instanceof cc)return new cc(t.h,t.s,t.l,t.opacity);if(t instanceof LA||(t=m2(t)),!t)return new cc;if(t instanceof cc)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),a=Math.max(e,n,r),o=NaN,l=a-i,c=(a+i)/2;return l?(e===a?o=(n-r)/l+(n<r)*6:n===a?o=(r-e)/l+2:o=(e-n)/l+4,l/=c<.5?a+i:2-a-i,o*=60):l=c>0&&c<1?0:o,new cc(o,l,c,t.opacity)}function s8e(t,e,n,r){return arguments.length===1?Wie(t):new cc(t,e,n,r??1)}function cc(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}h7(cc,s8e,Hie(LA,{brighter(t){return t=t==null?ZP:Math.pow(ZP,t),new cc(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?h2:Math.pow(h2,t),new cc(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new za(pO(t>=240?t-240:t+120,i,r),pO(t,i,r),pO(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new cc(_H(this.h),TC(this.s),TC(this.l),QP(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=QP(this.opacity);return`${t===1?"hsl(":"hsla("}${_H(this.h)}, ${TC(this.s)*100}%, ${TC(this.l)*100}%${t===1?")":`, ${t})`}`}}));function _H(t){return t=(t||0)%360,t<0?t+360:t}function TC(t){return Math.max(0,Math.min(1,t||0))}function pO(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const f7=t=>()=>t;function i8e(t,e){return function(n){return t+n*e}}function a8e(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function o8e(t){return(t=+t)==1?Gie:function(e,n){return n-e?a8e(e,n,t):f7(isNaN(e)?n:e)}}function Gie(t,e){var n=e-t;return n?i8e(t,n):f7(isNaN(t)?e:t)}const OH=function t(e){var n=o8e(e);function r(i,a){var o=n((i=gF(i)).r,(a=gF(a)).r),l=n(i.g,a.g),c=n(i.b,a.b),d=Gie(i.opacity,a.opacity);return function(u){return i.r=o(u),i.g=l(u),i.b=c(u),i.opacity=d(u),i+""}}return r.gamma=t,r}(1);function l8e(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),i;return function(a){for(i=0;i<n;++i)r[i]=t[i]*(1-a)+e[i]*a;return r}}function c8e(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function d8e(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),a=new Array(n),o;for(o=0;o<r;++o)i[o]=l1(t[o],e[o]);for(;o<n;++o)a[o]=e[o];return function(l){for(o=0;o<r;++o)a[o]=i[o](l);return a}}function u8e(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function JP(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function h8e(t,e){var n={},r={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?n[i]=l1(t[i],e[i]):r[i]=e[i];return function(a){for(i in n)r[i]=n[i](a);return r}}var vF=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,gO=new RegExp(vF.source,"g");function f8e(t){return function(){return t}}function m8e(t){return function(e){return t(e)+""}}function p8e(t,e){var n=vF.lastIndex=gO.lastIndex=0,r,i,a,o=-1,l=[],c=[];for(t=t+"",e=e+"";(r=vF.exec(t))&&(i=gO.exec(e));)(a=i.index)>n&&(a=e.slice(n,a),l[o]?l[o]+=a:l[++o]=a),(r=r[0])===(i=i[0])?l[o]?l[o]+=i:l[++o]=i:(l[++o]=null,c.push({i:o,x:JP(r,i)})),n=gO.lastIndex;return n<e.length&&(a=e.slice(n),l[o]?l[o]+=a:l[++o]=a),l.length<2?c[0]?m8e(c[0].x):f8e(e):(e=c.length,function(d){for(var u=0,h;u<e;++u)l[(h=c[u]).i]=h.x(d);return l.join("")})}function l1(t,e){var n=typeof e,r;return e==null||n==="boolean"?f7(e):(n==="number"?JP:n==="string"?(r=m2(e))?(e=r,OH):p8e:e instanceof m2?OH:e instanceof Date?u8e:c8e(e)?l8e:Array.isArray(e)?d8e:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?h8e:JP)(t,e)}function m7(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function g8e(t,e){e===void 0&&(e=t,t=l1);for(var n=0,r=e.length-1,i=e[0],a=new Array(r<0?0:r);n<r;)a[n]=t(i,i=e[++n]);return function(o){var l=Math.max(0,Math.min(r-1,Math.floor(o*=r)));return a[l](o-l)}}function v8e(t){return function(){return t}}function e4(t){return+t}var LH=[0,1];function ma(t){return t}function xF(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:v8e(isNaN(e)?NaN:.5)}function x8e(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function y8e(t,e,n){var r=t[0],i=t[1],a=e[0],o=e[1];return i<r?(r=xF(i,r),a=n(o,a)):(r=xF(r,i),a=n(a,o)),function(l){return a(r(l))}}function b8e(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),a=new Array(r),o=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++o<r;)i[o]=xF(t[o],t[o+1]),a[o]=n(e[o],e[o+1]);return function(l){var c=OA(t,l,1,r)-1;return a[c](i[c](l))}}function RA(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function uD(){var t=LH,e=LH,n=l1,r,i,a,o=ma,l,c,d;function u(){var f=Math.min(t.length,e.length);return o!==ma&&(o=x8e(t[0],t[f-1])),l=f>2?b8e:y8e,c=d=null,h}function h(f){return f==null||isNaN(f=+f)?a:(c||(c=l(t.map(r),e,n)))(r(o(f)))}return h.invert=function(f){return o(i((d||(d=l(e,t.map(r),JP)))(f)))},h.domain=function(f){return arguments.length?(t=Array.from(f,e4),u()):t.slice()},h.range=function(f){return arguments.length?(e=Array.from(f),u()):e.slice()},h.rangeRound=function(f){return e=Array.from(f),n=m7,u()},h.clamp=function(f){return arguments.length?(o=f?!0:ma,u()):o!==ma},h.interpolate=function(f){return arguments.length?(n=f,u()):n},h.unknown=function(f){return arguments.length?(a=f,h):a},function(f,m){return r=f,i=m,u()}}function p7(){return uD()(ma,ma)}function w8e(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function t4(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function vb(t){return t=t4(Math.abs(t)),t?t[1]:NaN}function j8e(t,e){return function(n,r){for(var i=n.length,a=[],o=0,l=t[0],c=0;i>0&&l>0&&(c+l+1>r&&(l=Math.max(1,r-c)),a.push(n.substring(i-=l,i+l)),!((c+=l+1)>r));)l=t[o=(o+1)%t.length];return a.reverse().join(e)}}function N8e(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var S8e=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function p2(t){if(!(e=S8e.exec(t)))throw new Error("invalid format: "+t);var e;return new g7({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}p2.prototype=g7.prototype;function g7(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}g7.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function A8e(t){e:for(var e=t.length,n=1,r=-1,i;n<e;++n)switch(t[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+t[n])break e;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(i+1):t}var Kie;function C8e(t,e){var n=t4(t,e);if(!n)return t+"";var r=n[0],i=n[1],a=i-(Kie=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=r.length;return a===o?r:a>o?r+new Array(a-o+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+t4(t,Math.max(0,e+a-1))[0]}function RH(t,e){var n=t4(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const MH={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:w8e,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>RH(t*100,e),r:RH,s:C8e,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function FH(t){return t}var $H=Array.prototype.map,BH=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function E8e(t){var e=t.grouping===void 0||t.thousands===void 0?FH:j8e($H.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",a=t.numerals===void 0?FH:N8e($H.call(t.numerals,String)),o=t.percent===void 0?"%":t.percent+"",l=t.minus===void 0?"":t.minus+"",c=t.nan===void 0?"NaN":t.nan+"";function d(h){h=p2(h);var f=h.fill,m=h.align,v=h.sign,p=h.symbol,g=h.zero,x=h.width,y=h.comma,b=h.precision,w=h.trim,N=h.type;N==="n"?(y=!0,N="g"):MH[N]||(b===void 0&&(b=12),w=!0,N="g"),(g||f==="0"&&m==="=")&&(g=!0,f="0",m="=");var E=p==="$"?n:p==="#"&&/[boxX]/.test(N)?"0"+N.toLowerCase():"",C=p==="$"?r:/[%p]/.test(N)?o:"",j=MH[N],I=/[defgprs%]/.test(N);b=b===void 0?6:/[gprs]/.test(N)?Math.max(1,Math.min(21,b)):Math.max(0,Math.min(20,b));function k(D){var P=E,R=C,_,M,U;if(N==="c")R=j(D)+R,D="";else{D=+D;var F=D<0||1/D<0;if(D=isNaN(D)?c:j(Math.abs(D),b),w&&(D=A8e(D)),F&&+D==0&&v!=="+"&&(F=!1),P=(F?v==="("?v:l:v==="-"||v==="("?"":v)+P,R=(N==="s"?BH[8+Kie/3]:"")+R+(F&&v==="("?")":""),I){for(_=-1,M=D.length;++_<M;)if(U=D.charCodeAt(_),48>U||U>57){R=(U===46?i+D.slice(_+1):D.slice(_))+R,D=D.slice(0,_);break}}}y&&!g&&(D=e(D,1/0));var z=P.length+D.length+R.length,H=z<x?new Array(x-z+1).join(f):"";switch(y&&g&&(D=e(H+D,H.length?x-R.length:1/0),H=""),m){case"<":D=P+D+R+H;break;case"=":D=P+H+D+R;break;case"^":D=H.slice(0,z=H.length>>1)+P+D+R+H.slice(z);break;default:D=H+P+D+R;break}return a(D)}return k.toString=function(){return h+""},k}function u(h,f){var m=d((h=p2(h),h.type="f",h)),v=Math.max(-8,Math.min(8,Math.floor(vb(f)/3)))*3,p=Math.pow(10,-v),g=BH[8+v/3];return function(x){return m(p*x)+g}}return{format:d,formatPrefix:u}}var IC,v7,Yie;P8e({thousands:",",grouping:[3],currency:["$",""]});function P8e(t){return IC=E8e(t),v7=IC.format,Yie=IC.formatPrefix,IC}function T8e(t){return Math.max(0,-vb(Math.abs(t)))}function I8e(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(vb(e)/3)))*3-vb(Math.abs(t)))}function D8e(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,vb(e)-vb(t))+1}function Xie(t,e,n,r){var i=mF(t,e,n),a;switch(r=p2(r??",f"),r.type){case"s":{var o=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(a=I8e(i,o))&&(r.precision=a),Yie(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(a=D8e(i,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=a-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(a=T8e(i))&&(r.precision=a-(r.type==="%")*2);break}}return v7(r)}function _m(t){var e=t.domain;return t.ticks=function(n){var r=e();return hF(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){var i=e();return Xie(i[0],i[i.length-1],n??10,r)},t.nice=function(n){n==null&&(n=10);var r=e(),i=0,a=r.length-1,o=r[i],l=r[a],c,d,u=10;for(l<o&&(d=o,o=l,l=d,d=i,i=a,a=d);u-- >0;){if(d=fF(o,l,n),d===c)return r[i]=o,r[a]=l,e(r);if(d>0)o=Math.floor(o/d)*d,l=Math.ceil(l/d)*d;else if(d<0)o=Math.ceil(o*d)/d,l=Math.floor(l*d)/d;else break;c=d}return t},t}function n4(){var t=p7();return t.copy=function(){return RA(t,n4())},Al.apply(t,arguments),_m(t)}function Zie(t){var e;function n(r){return r==null||isNaN(r=+r)?e:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(t=Array.from(r,e4),n):t.slice()},n.unknown=function(r){return arguments.length?(e=r,n):e},n.copy=function(){return Zie(t).unknown(e)},t=arguments.length?Array.from(t,e4):[0,1],_m(n)}function Qie(t,e){t=t.slice();var n=0,r=t.length-1,i=t[n],a=t[r],o;return a<i&&(o=n,n=r,r=o,o=i,i=a,a=o),t[n]=e.floor(i),t[r]=e.ceil(a),t}function zH(t){return Math.log(t)}function UH(t){return Math.exp(t)}function k8e(t){return-Math.log(-t)}function _8e(t){return-Math.exp(-t)}function O8e(t){return isFinite(t)?+("1e"+t):t<0?0:t}function L8e(t){return t===10?O8e:t===Math.E?Math.exp:e=>Math.pow(t,e)}function R8e(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function VH(t){return(e,n)=>-t(-e,n)}function x7(t){const e=t(zH,UH),n=e.domain;let r=10,i,a;function o(){return i=R8e(r),a=L8e(r),n()[0]<0?(i=VH(i),a=VH(a),t(k8e,_8e)):t(zH,UH),e}return e.base=function(l){return arguments.length?(r=+l,o()):r},e.domain=function(l){return arguments.length?(n(l),o()):n()},e.ticks=l=>{const c=n();let d=c[0],u=c[c.length-1];const h=u<d;h&&([d,u]=[u,d]);let f=i(d),m=i(u),v,p;const g=l==null?10:+l;let x=[];if(!(r%1)&&m-f<g){if(f=Math.floor(f),m=Math.ceil(m),d>0){for(;f<=m;++f)for(v=1;v<r;++v)if(p=f<0?v/a(-f):v*a(f),!(p<d)){if(p>u)break;x.push(p)}}else for(;f<=m;++f)for(v=r-1;v>=1;--v)if(p=f>0?v/a(-f):v*a(f),!(p<d)){if(p>u)break;x.push(p)}x.length*2<g&&(x=hF(d,u,g))}else x=hF(f,m,Math.min(m-f,g)).map(a);return h?x.reverse():x},e.tickFormat=(l,c)=>{if(l==null&&(l=10),c==null&&(c=r===10?"s":","),typeof c!="function"&&(!(r%1)&&(c=p2(c)).precision==null&&(c.trim=!0),c=v7(c)),l===1/0)return c;const d=Math.max(1,r*l/e.ticks().length);return u=>{let h=u/a(Math.round(i(u)));return h*r<r-.5&&(h*=r),h<=d?c(u):""}},e.nice=()=>n(Qie(n(),{floor:l=>a(Math.floor(i(l))),ceil:l=>a(Math.ceil(i(l)))})),e}function Jie(){const t=x7(uD()).domain([1,10]);return t.copy=()=>RA(t,Jie()).base(t.base()),Al.apply(t,arguments),t}function qH(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function HH(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function y7(t){var e=1,n=t(qH(e),HH(e));return n.constant=function(r){return arguments.length?t(qH(e=+r),HH(e)):e},_m(n)}function eae(){var t=y7(uD());return t.copy=function(){return RA(t,eae()).constant(t.constant())},Al.apply(t,arguments)}function WH(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function M8e(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function F8e(t){return t<0?-t*t:t*t}function b7(t){var e=t(ma,ma),n=1;function r(){return n===1?t(ma,ma):n===.5?t(M8e,F8e):t(WH(n),WH(1/n))}return e.exponent=function(i){return arguments.length?(n=+i,r()):n},_m(e)}function w7(){var t=b7(uD());return t.copy=function(){return RA(t,w7()).exponent(t.exponent())},Al.apply(t,arguments),t}function $8e(){return w7.apply(null,arguments).exponent(.5)}function GH(t){return Math.sign(t)*t*t}function B8e(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function tae(){var t=p7(),e=[0,1],n=!1,r;function i(a){var o=B8e(t(a));return isNaN(o)?r:n?Math.round(o):o}return i.invert=function(a){return t.invert(GH(a))},i.domain=function(a){return arguments.length?(t.domain(a),i):t.domain()},i.range=function(a){return arguments.length?(t.range((e=Array.from(a,e4)).map(GH)),i):e.slice()},i.rangeRound=function(a){return i.range(a).round(!0)},i.round=function(a){return arguments.length?(n=!!a,i):n},i.clamp=function(a){return arguments.length?(t.clamp(a),i):t.clamp()},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return tae(t.domain(),e).round(n).clamp(t.clamp()).unknown(r)},Al.apply(i,arguments),_m(i)}function nae(){var t=[],e=[],n=[],r;function i(){var o=0,l=Math.max(1,e.length);for(n=new Array(l-1);++o<l;)n[o-1]=H$e(t,o/l);return a}function a(o){return o==null||isNaN(o=+o)?r:e[OA(n,o)]}return a.invertExtent=function(o){var l=e.indexOf(o);return l<0?[NaN,NaN]:[l>0?n[l-1]:t[0],l<n.length?n[l]:t[t.length-1]]},a.domain=function(o){if(!arguments.length)return t.slice();t=[];for(let l of o)l!=null&&!isNaN(l=+l)&&t.push(l);return t.sort(om),i()},a.range=function(o){return arguments.length?(e=Array.from(o),i()):e.slice()},a.unknown=function(o){return arguments.length?(r=o,a):r},a.quantiles=function(){return n.slice()},a.copy=function(){return nae().domain(t).range(e).unknown(r)},Al.apply(a,arguments)}function rae(){var t=0,e=1,n=1,r=[.5],i=[0,1],a;function o(c){return c!=null&&c<=c?i[OA(r,c,0,n)]:a}function l(){var c=-1;for(r=new Array(n);++c<n;)r[c]=((c+1)*e-(c-n)*t)/(n+1);return o}return o.domain=function(c){return arguments.length?([t,e]=c,t=+t,e=+e,l()):[t,e]},o.range=function(c){return arguments.length?(n=(i=Array.from(c)).length-1,l()):i.slice()},o.invertExtent=function(c){var d=i.indexOf(c);return d<0?[NaN,NaN]:d<1?[t,r[0]]:d>=n?[r[n-1],e]:[r[d-1],r[d]]},o.unknown=function(c){return arguments.length&&(a=c),o},o.thresholds=function(){return r.slice()},o.copy=function(){return rae().domain([t,e]).range(i).unknown(a)},Al.apply(_m(o),arguments)}function sae(){var t=[.5],e=[0,1],n,r=1;function i(a){return a!=null&&a<=a?e[OA(t,a,0,r)]:n}return i.domain=function(a){return arguments.length?(t=Array.from(a),r=Math.min(t.length,e.length-1),i):t.slice()},i.range=function(a){return arguments.length?(e=Array.from(a),r=Math.min(t.length,e.length-1),i):e.slice()},i.invertExtent=function(a){var o=e.indexOf(a);return[t[o-1],t[o]]},i.unknown=function(a){return arguments.length?(n=a,i):n},i.copy=function(){return sae().domain(t).range(e).unknown(n)},Al.apply(i,arguments)}const vO=new Date,xO=new Date;function qs(t,e,n,r){function i(a){return t(a=arguments.length===0?new Date:new Date(+a)),a}return i.floor=a=>(t(a=new Date(+a)),a),i.ceil=a=>(t(a=new Date(a-1)),e(a,1),t(a),a),i.round=a=>{const o=i(a),l=i.ceil(a);return a-o<l-a?o:l},i.offset=(a,o)=>(e(a=new Date(+a),o==null?1:Math.floor(o)),a),i.range=(a,o,l)=>{const c=[];if(a=i.ceil(a),l=l==null?1:Math.floor(l),!(a<o)||!(l>0))return c;let d;do c.push(d=new Date(+a)),e(a,l),t(a);while(d<a&&a<o);return c},i.filter=a=>qs(o=>{if(o>=o)for(;t(o),!a(o);)o.setTime(o-1)},(o,l)=>{if(o>=o)if(l<0)for(;++l<=0;)for(;e(o,-1),!a(o););else for(;--l>=0;)for(;e(o,1),!a(o););}),n&&(i.count=(a,o)=>(vO.setTime(+a),xO.setTime(+o),t(vO),t(xO),Math.floor(n(vO,xO))),i.every=a=>(a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?i.filter(r?o=>r(o)%a===0:o=>i.count(0,o)%a===0):i)),i}const r4=qs(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);r4.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?qs(e=>{e.setTime(Math.floor(e/t)*t)},(e,n)=>{e.setTime(+e+n*t)},(e,n)=>(n-e)/t):r4);r4.range;const qu=1e3,vl=qu*60,Hu=vl*60,ih=Hu*24,j7=ih*7,KH=ih*30,yO=ih*365,wp=qs(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*qu)},(t,e)=>(e-t)/qu,t=>t.getUTCSeconds());wp.range;const N7=qs(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*qu)},(t,e)=>{t.setTime(+t+e*vl)},(t,e)=>(e-t)/vl,t=>t.getMinutes());N7.range;const S7=qs(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*vl)},(t,e)=>(e-t)/vl,t=>t.getUTCMinutes());S7.range;const A7=qs(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*qu-t.getMinutes()*vl)},(t,e)=>{t.setTime(+t+e*Hu)},(t,e)=>(e-t)/Hu,t=>t.getHours());A7.range;const C7=qs(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*Hu)},(t,e)=>(e-t)/Hu,t=>t.getUTCHours());C7.range;const MA=qs(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*vl)/ih,t=>t.getDate()-1);MA.range;const hD=qs(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/ih,t=>t.getUTCDate()-1);hD.range;const iae=qs(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/ih,t=>Math.floor(t/ih));iae.range;function _v(t){return qs(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,n)=>{e.setDate(e.getDate()+n*7)},(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*vl)/j7)}const fD=_v(0),s4=_v(1),z8e=_v(2),U8e=_v(3),xb=_v(4),V8e=_v(5),q8e=_v(6);fD.range;s4.range;z8e.range;U8e.range;xb.range;V8e.range;q8e.range;function Ov(t){return qs(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n*7)},(e,n)=>(n-e)/j7)}const mD=Ov(0),i4=Ov(1),H8e=Ov(2),W8e=Ov(3),yb=Ov(4),G8e=Ov(5),K8e=Ov(6);mD.range;i4.range;H8e.range;W8e.range;yb.range;G8e.range;K8e.range;const E7=qs(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());E7.range;const P7=qs(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());P7.range;const ah=qs(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());ah.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:qs(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,n)=>{e.setFullYear(e.getFullYear()+n*t)});ah.range;const oh=qs(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());oh.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:qs(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)});oh.range;function aae(t,e,n,r,i,a){const o=[[wp,1,qu],[wp,5,5*qu],[wp,15,15*qu],[wp,30,30*qu],[a,1,vl],[a,5,5*vl],[a,15,15*vl],[a,30,30*vl],[i,1,Hu],[i,3,3*Hu],[i,6,6*Hu],[i,12,12*Hu],[r,1,ih],[r,2,2*ih],[n,1,j7],[e,1,KH],[e,3,3*KH],[t,1,yO]];function l(d,u,h){const f=u<d;f&&([d,u]=[u,d]);const m=h&&typeof h.range=="function"?h:c(d,u,h),v=m?m.range(d,+u+1):[];return f?v.reverse():v}function c(d,u,h){const f=Math.abs(u-d)/h,m=d7(([,,g])=>g).right(o,f);if(m===o.length)return t.every(mF(d/yO,u/yO,h));if(m===0)return r4.every(Math.max(mF(d,u,h),1));const[v,p]=o[f/o[m-1][2]<o[m][2]/f?m-1:m];return v.every(p)}return[l,c]}const[Y8e,X8e]=aae(oh,P7,mD,iae,C7,S7),[Z8e,Q8e]=aae(ah,E7,fD,MA,A7,N7);function bO(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function wO(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function uw(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function J8e(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,a=t.days,o=t.shortDays,l=t.months,c=t.shortMonths,d=hw(i),u=fw(i),h=hw(a),f=fw(a),m=hw(o),v=fw(o),p=hw(l),g=fw(l),x=hw(c),y=fw(c),b={a:F,A:z,b:H,B:W,c:null,d:eW,e:eW,f:j7e,g:k7e,G:O7e,H:y7e,I:b7e,j:w7e,L:oae,m:N7e,M:S7e,p:$,q:L,Q:rW,s:sW,S:A7e,u:C7e,U:E7e,V:P7e,w:T7e,W:I7e,x:null,X:null,y:D7e,Y:_7e,Z:L7e,"%":nW},w={a:q,A:Y,b:J,B:ne,c:null,d:tW,e:tW,f:$7e,g:Y7e,G:Z7e,H:R7e,I:M7e,j:F7e,L:cae,m:B7e,M:z7e,p:re,q:pe,Q:rW,s:sW,S:U7e,u:V7e,U:q7e,V:H7e,w:W7e,W:G7e,x:null,X:null,y:K7e,Y:X7e,Z:Q7e,"%":nW},N={a:k,A:D,b:P,B:R,c:_,d:QH,e:QH,f:p7e,g:ZH,G:XH,H:JH,I:JH,j:u7e,L:m7e,m:d7e,M:h7e,p:I,q:c7e,Q:v7e,s:x7e,S:f7e,u:s7e,U:i7e,V:a7e,w:r7e,W:o7e,x:M,X:U,y:ZH,Y:XH,Z:l7e,"%":g7e};b.x=E(n,b),b.X=E(r,b),b.c=E(e,b),w.x=E(n,w),w.X=E(r,w),w.c=E(e,w);function E(ue,xe){return function(Ne){var je=[],$e=-1,ze=0,De=ue.length,ce,Te,Ce;for(Ne instanceof Date||(Ne=new Date(+Ne));++$e<De;)ue.charCodeAt($e)===37&&(je.push(ue.slice(ze,$e)),(Te=YH[ce=ue.charAt(++$e)])!=null?ce=ue.charAt(++$e):Te=ce==="e"?" ":"0",(Ce=xe[ce])&&(ce=Ce(Ne,Te)),je.push(ce),ze=$e+1);return je.push(ue.slice(ze,$e)),je.join("")}}function C(ue,xe){return function(Ne){var je=uw(1900,void 0,1),$e=j(je,ue,Ne+="",0),ze,De;if($e!=Ne.length)return null;if("Q"in je)return new Date(je.Q);if("s"in je)return new Date(je.s*1e3+("L"in je?je.L:0));if(xe&&!("Z"in je)&&(je.Z=0),"p"in je&&(je.H=je.H%12+je.p*12),je.m===void 0&&(je.m="q"in je?je.q:0),"V"in je){if(je.V<1||je.V>53)return null;"w"in je||(je.w=1),"Z"in je?(ze=wO(uw(je.y,0,1)),De=ze.getUTCDay(),ze=De>4||De===0?i4.ceil(ze):i4(ze),ze=hD.offset(ze,(je.V-1)*7),je.y=ze.getUTCFullYear(),je.m=ze.getUTCMonth(),je.d=ze.getUTCDate()+(je.w+6)%7):(ze=bO(uw(je.y,0,1)),De=ze.getDay(),ze=De>4||De===0?s4.ceil(ze):s4(ze),ze=MA.offset(ze,(je.V-1)*7),je.y=ze.getFullYear(),je.m=ze.getMonth(),je.d=ze.getDate()+(je.w+6)%7)}else("W"in je||"U"in je)&&("w"in je||(je.w="u"in je?je.u%7:"W"in je?1:0),De="Z"in je?wO(uw(je.y,0,1)).getUTCDay():bO(uw(je.y,0,1)).getDay(),je.m=0,je.d="W"in je?(je.w+6)%7+je.W*7-(De+5)%7:je.w+je.U*7-(De+6)%7);return"Z"in je?(je.H+=je.Z/100|0,je.M+=je.Z%100,wO(je)):bO(je)}}function j(ue,xe,Ne,je){for(var $e=0,ze=xe.length,De=Ne.length,ce,Te;$e<ze;){if(je>=De)return-1;if(ce=xe.charCodeAt($e++),ce===37){if(ce=xe.charAt($e++),Te=N[ce in YH?xe.charAt($e++):ce],!Te||(je=Te(ue,Ne,je))<0)return-1}else if(ce!=Ne.charCodeAt(je++))return-1}return je}function I(ue,xe,Ne){var je=d.exec(xe.slice(Ne));return je?(ue.p=u.get(je[0].toLowerCase()),Ne+je[0].length):-1}function k(ue,xe,Ne){var je=m.exec(xe.slice(Ne));return je?(ue.w=v.get(je[0].toLowerCase()),Ne+je[0].length):-1}function D(ue,xe,Ne){var je=h.exec(xe.slice(Ne));return je?(ue.w=f.get(je[0].toLowerCase()),Ne+je[0].length):-1}function P(ue,xe,Ne){var je=x.exec(xe.slice(Ne));return je?(ue.m=y.get(je[0].toLowerCase()),Ne+je[0].length):-1}function R(ue,xe,Ne){var je=p.exec(xe.slice(Ne));return je?(ue.m=g.get(je[0].toLowerCase()),Ne+je[0].length):-1}function _(ue,xe,Ne){return j(ue,e,xe,Ne)}function M(ue,xe,Ne){return j(ue,n,xe,Ne)}function U(ue,xe,Ne){return j(ue,r,xe,Ne)}function F(ue){return o[ue.getDay()]}function z(ue){return a[ue.getDay()]}function H(ue){return c[ue.getMonth()]}function W(ue){return l[ue.getMonth()]}function $(ue){return i[+(ue.getHours()>=12)]}function L(ue){return 1+~~(ue.getMonth()/3)}function q(ue){return o[ue.getUTCDay()]}function Y(ue){return a[ue.getUTCDay()]}function J(ue){return c[ue.getUTCMonth()]}function ne(ue){return l[ue.getUTCMonth()]}function re(ue){return i[+(ue.getUTCHours()>=12)]}function pe(ue){return 1+~~(ue.getUTCMonth()/3)}return{format:function(ue){var xe=E(ue+="",b);return xe.toString=function(){return ue},xe},parse:function(ue){var xe=C(ue+="",!1);return xe.toString=function(){return ue},xe},utcFormat:function(ue){var xe=E(ue+="",w);return xe.toString=function(){return ue},xe},utcParse:function(ue){var xe=C(ue+="",!0);return xe.toString=function(){return ue},xe}}}var YH={"-":"",_:" ",0:"0"},ui=/^\s*\d+/,e7e=/^%/,t7e=/[\\^$*+?|[\]().{}]/g;function Fn(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",a=i.length;return r+(a<n?new Array(n-a+1).join(e)+i:i)}function n7e(t){return t.replace(t7e,"\\$&")}function hw(t){return new RegExp("^(?:"+t.map(n7e).join("|")+")","i")}function fw(t){return new Map(t.map((e,n)=>[e.toLowerCase(),n]))}function r7e(t,e,n){var r=ui.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function s7e(t,e,n){var r=ui.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function i7e(t,e,n){var r=ui.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function a7e(t,e,n){var r=ui.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function o7e(t,e,n){var r=ui.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function XH(t,e,n){var r=ui.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function ZH(t,e,n){var r=ui.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function l7e(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function c7e(t,e,n){var r=ui.exec(e.slice(n,n+1));return r?(t.q=r[0]*3-3,n+r[0].length):-1}function d7e(t,e,n){var r=ui.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function QH(t,e,n){var r=ui.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function u7e(t,e,n){var r=ui.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function JH(t,e,n){var r=ui.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function h7e(t,e,n){var r=ui.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function f7e(t,e,n){var r=ui.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function m7e(t,e,n){var r=ui.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function p7e(t,e,n){var r=ui.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function g7e(t,e,n){var r=e7e.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function v7e(t,e,n){var r=ui.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function x7e(t,e,n){var r=ui.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function eW(t,e){return Fn(t.getDate(),e,2)}function y7e(t,e){return Fn(t.getHours(),e,2)}function b7e(t,e){return Fn(t.getHours()%12||12,e,2)}function w7e(t,e){return Fn(1+MA.count(ah(t),t),e,3)}function oae(t,e){return Fn(t.getMilliseconds(),e,3)}function j7e(t,e){return oae(t,e)+"000"}function N7e(t,e){return Fn(t.getMonth()+1,e,2)}function S7e(t,e){return Fn(t.getMinutes(),e,2)}function A7e(t,e){return Fn(t.getSeconds(),e,2)}function C7e(t){var e=t.getDay();return e===0?7:e}function E7e(t,e){return Fn(fD.count(ah(t)-1,t),e,2)}function lae(t){var e=t.getDay();return e>=4||e===0?xb(t):xb.ceil(t)}function P7e(t,e){return t=lae(t),Fn(xb.count(ah(t),t)+(ah(t).getDay()===4),e,2)}function T7e(t){return t.getDay()}function I7e(t,e){return Fn(s4.count(ah(t)-1,t),e,2)}function D7e(t,e){return Fn(t.getFullYear()%100,e,2)}function k7e(t,e){return t=lae(t),Fn(t.getFullYear()%100,e,2)}function _7e(t,e){return Fn(t.getFullYear()%1e4,e,4)}function O7e(t,e){var n=t.getDay();return t=n>=4||n===0?xb(t):xb.ceil(t),Fn(t.getFullYear()%1e4,e,4)}function L7e(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+Fn(e/60|0,"0",2)+Fn(e%60,"0",2)}function tW(t,e){return Fn(t.getUTCDate(),e,2)}function R7e(t,e){return Fn(t.getUTCHours(),e,2)}function M7e(t,e){return Fn(t.getUTCHours()%12||12,e,2)}function F7e(t,e){return Fn(1+hD.count(oh(t),t),e,3)}function cae(t,e){return Fn(t.getUTCMilliseconds(),e,3)}function $7e(t,e){return cae(t,e)+"000"}function B7e(t,e){return Fn(t.getUTCMonth()+1,e,2)}function z7e(t,e){return Fn(t.getUTCMinutes(),e,2)}function U7e(t,e){return Fn(t.getUTCSeconds(),e,2)}function V7e(t){var e=t.getUTCDay();return e===0?7:e}function q7e(t,e){return Fn(mD.count(oh(t)-1,t),e,2)}function dae(t){var e=t.getUTCDay();return e>=4||e===0?yb(t):yb.ceil(t)}function H7e(t,e){return t=dae(t),Fn(yb.count(oh(t),t)+(oh(t).getUTCDay()===4),e,2)}function W7e(t){return t.getUTCDay()}function G7e(t,e){return Fn(i4.count(oh(t)-1,t),e,2)}function K7e(t,e){return Fn(t.getUTCFullYear()%100,e,2)}function Y7e(t,e){return t=dae(t),Fn(t.getUTCFullYear()%100,e,2)}function X7e(t,e){return Fn(t.getUTCFullYear()%1e4,e,4)}function Z7e(t,e){var n=t.getUTCDay();return t=n>=4||n===0?yb(t):yb.ceil(t),Fn(t.getUTCFullYear()%1e4,e,4)}function Q7e(){return"+0000"}function nW(){return"%"}function rW(t){return+t}function sW(t){return Math.floor(+t/1e3)}var Nx,uae,hae;J7e({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function J7e(t){return Nx=J8e(t),uae=Nx.format,Nx.parse,hae=Nx.utcFormat,Nx.utcParse,Nx}function eBe(t){return new Date(t)}function tBe(t){return t instanceof Date?+t:+new Date(+t)}function T7(t,e,n,r,i,a,o,l,c,d){var u=p7(),h=u.invert,f=u.domain,m=d(".%L"),v=d(":%S"),p=d("%I:%M"),g=d("%I %p"),x=d("%a %d"),y=d("%b %d"),b=d("%B"),w=d("%Y");function N(E){return(c(E)<E?m:l(E)<E?v:o(E)<E?p:a(E)<E?g:r(E)<E?i(E)<E?x:y:n(E)<E?b:w)(E)}return u.invert=function(E){return new Date(h(E))},u.domain=function(E){return arguments.length?f(Array.from(E,tBe)):f().map(eBe)},u.ticks=function(E){var C=f();return t(C[0],C[C.length-1],E??10)},u.tickFormat=function(E,C){return C==null?N:d(C)},u.nice=function(E){var C=f();return(!E||typeof E.range!="function")&&(E=e(C[0],C[C.length-1],E??10)),E?f(Qie(C,E)):u},u.copy=function(){return RA(u,T7(t,e,n,r,i,a,o,l,c,d))},u}function nBe(){return Al.apply(T7(Z8e,Q8e,ah,E7,fD,MA,A7,N7,wp,uae).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function rBe(){return Al.apply(T7(Y8e,X8e,oh,P7,mD,hD,C7,S7,wp,hae).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function pD(){var t=0,e=1,n,r,i,a,o=ma,l=!1,c;function d(h){return h==null||isNaN(h=+h)?c:o(i===0?.5:(h=(a(h)-n)*i,l?Math.max(0,Math.min(1,h)):h))}d.domain=function(h){return arguments.length?([t,e]=h,n=a(t=+t),r=a(e=+e),i=n===r?0:1/(r-n),d):[t,e]},d.clamp=function(h){return arguments.length?(l=!!h,d):l},d.interpolator=function(h){return arguments.length?(o=h,d):o};function u(h){return function(f){var m,v;return arguments.length?([m,v]=f,o=h(m,v),d):[o(0),o(1)]}}return d.range=u(l1),d.rangeRound=u(m7),d.unknown=function(h){return arguments.length?(c=h,d):c},function(h){return a=h,n=h(t),r=h(e),i=n===r?0:1/(r-n),d}}function Om(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function fae(){var t=_m(pD()(ma));return t.copy=function(){return Om(t,fae())},mh.apply(t,arguments)}function mae(){var t=x7(pD()).domain([1,10]);return t.copy=function(){return Om(t,mae()).base(t.base())},mh.apply(t,arguments)}function pae(){var t=y7(pD());return t.copy=function(){return Om(t,pae()).constant(t.constant())},mh.apply(t,arguments)}function I7(){var t=b7(pD());return t.copy=function(){return Om(t,I7()).exponent(t.exponent())},mh.apply(t,arguments)}function sBe(){return I7.apply(null,arguments).exponent(.5)}function gae(){var t=[],e=ma;function n(r){if(r!=null&&!isNaN(r=+r))return e((OA(t,r,1)-1)/(t.length-1))}return n.domain=function(r){if(!arguments.length)return t.slice();t=[];for(let i of r)i!=null&&!isNaN(i=+i)&&t.push(i);return t.sort(om),n},n.interpolator=function(r){return arguments.length?(e=r,n):e},n.range=function(){return t.map((r,i)=>e(i/(t.length-1)))},n.quantiles=function(r){return Array.from({length:r+1},(i,a)=>q$e(t,a/r))},n.copy=function(){return gae(e).domain(t)},mh.apply(n,arguments)}function gD(){var t=0,e=.5,n=1,r=1,i,a,o,l,c,d=ma,u,h=!1,f;function m(p){return isNaN(p=+p)?f:(p=.5+((p=+u(p))-a)*(r*p<r*a?l:c),d(h?Math.max(0,Math.min(1,p)):p))}m.domain=function(p){return arguments.length?([t,e,n]=p,i=u(t=+t),a=u(e=+e),o=u(n=+n),l=i===a?0:.5/(a-i),c=a===o?0:.5/(o-a),r=a<i?-1:1,m):[t,e,n]},m.clamp=function(p){return arguments.length?(h=!!p,m):h},m.interpolator=function(p){return arguments.length?(d=p,m):d};function v(p){return function(g){var x,y,b;return arguments.length?([x,y,b]=g,d=g8e(p,[x,y,b]),m):[d(0),d(.5),d(1)]}}return m.range=v(l1),m.rangeRound=v(m7),m.unknown=function(p){return arguments.length?(f=p,m):f},function(p){return u=p,i=p(t),a=p(e),o=p(n),l=i===a?0:.5/(a-i),c=a===o?0:.5/(o-a),r=a<i?-1:1,m}}function vae(){var t=_m(gD()(ma));return t.copy=function(){return Om(t,vae())},mh.apply(t,arguments)}function xae(){var t=x7(gD()).domain([.1,1,10]);return t.copy=function(){return Om(t,xae()).base(t.base())},mh.apply(t,arguments)}function yae(){var t=y7(gD());return t.copy=function(){return Om(t,yae()).constant(t.constant())},mh.apply(t,arguments)}function D7(){var t=b7(gD());return t.copy=function(){return Om(t,D7()).exponent(t.exponent())},mh.apply(t,arguments)}function iBe(){return D7.apply(null,arguments).exponent(.5)}const iW=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:u2,scaleDiverging:vae,scaleDivergingLog:xae,scaleDivergingPow:D7,scaleDivergingSqrt:iBe,scaleDivergingSymlog:yae,scaleIdentity:Zie,scaleImplicit:pF,scaleLinear:n4,scaleLog:Jie,scaleOrdinal:u7,scalePoint:hj,scalePow:w7,scaleQuantile:nae,scaleQuantize:rae,scaleRadial:tae,scaleSequential:fae,scaleSequentialLog:mae,scaleSequentialPow:I7,scaleSequentialQuantile:gae,scaleSequentialSqrt:sBe,scaleSequentialSymlog:pae,scaleSqrt:$8e,scaleSymlog:eae,scaleThreshold:sae,scaleTime:nBe,scaleUtc:rBe,tickFormat:Xie},Symbol.toStringTag,{value:"Module"}));var aBe=Jb;function oBe(t,e,n){for(var r=-1,i=t.length;++r<i;){var a=t[r],o=e(a);if(o!=null&&(l===void 0?o===o&&!aBe(o):n(o,l)))var l=o,c=a}return c}var vD=oBe;function lBe(t,e){return t>e}var bae=lBe,cBe=vD,dBe=bae,uBe=o1;function hBe(t){return t&&t.length?cBe(t,uBe,dBe):void 0}var fBe=hBe;const qf=$n(fBe);function mBe(t,e){return t<e}var wae=mBe,pBe=vD,gBe=wae,vBe=o1;function xBe(t){return t&&t.length?pBe(t,vBe,gBe):void 0}var yBe=xBe;const xD=$n(yBe);var bBe=H8,wBe=Od,jBe=Tie,NBe=Ka;function SBe(t,e){var n=NBe(t)?bBe:jBe;return n(t,wBe(e))}var ABe=SBe,CBe=Eie,EBe=ABe;function PBe(t,e){return CBe(EBe(t,e),1)}var TBe=PBe;const IBe=$n(TBe);var DBe=a7;function kBe(t,e){return DBe(t,e)}var _Be=kBe;const vv=$n(_Be);var c1=1e9,OBe={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},_7,Or=!0,Nl="[DecimalError] ",ev=Nl+"Invalid argument: ",k7=Nl+"Exponent out of range: ",d1=Math.floor,cp=Math.pow,LBe=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Co,ni=1e7,Cr=7,jae=9007199254740991,a4=d1(jae/Cr),Et={};Et.absoluteValue=Et.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};Et.comparedTo=Et.cmp=function(t){var e,n,r,i,a=this;if(t=new a.constructor(t),a.s!==t.s)return a.s||-t.s;if(a.e!==t.e)return a.e>t.e^a.s<0?1:-1;for(r=a.d.length,i=t.d.length,e=0,n=r<i?r:i;e<n;++e)if(a.d[e]!==t.d[e])return a.d[e]>t.d[e]^a.s<0?1:-1;return r===i?0:r>i^a.s<0?1:-1};Et.decimalPlaces=Et.dp=function(){var t=this,e=t.d.length-1,n=(e-t.e)*Cr;if(e=t.d[e],e)for(;e%10==0;e/=10)n--;return n<0?0:n};Et.dividedBy=Et.div=function(t){return Yu(this,new this.constructor(t))};Et.dividedToIntegerBy=Et.idiv=function(t){var e=this,n=e.constructor;return hr(Yu(e,new n(t),0,1),n.precision)};Et.equals=Et.eq=function(t){return!this.cmp(t)};Et.exponent=function(){return Is(this)};Et.greaterThan=Et.gt=function(t){return this.cmp(t)>0};Et.greaterThanOrEqualTo=Et.gte=function(t){return this.cmp(t)>=0};Et.isInteger=Et.isint=function(){return this.e>this.d.length-2};Et.isNegative=Et.isneg=function(){return this.s<0};Et.isPositive=Et.ispos=function(){return this.s>0};Et.isZero=function(){return this.s===0};Et.lessThan=Et.lt=function(t){return this.cmp(t)<0};Et.lessThanOrEqualTo=Et.lte=function(t){return this.cmp(t)<1};Et.logarithm=Et.log=function(t){var e,n=this,r=n.constructor,i=r.precision,a=i+5;if(t===void 0)t=new r(10);else if(t=new r(t),t.s<1||t.eq(Co))throw Error(Nl+"NaN");if(n.s<1)throw Error(Nl+(n.s?"NaN":"-Infinity"));return n.eq(Co)?new r(0):(Or=!1,e=Yu(g2(n,a),g2(t,a),a),Or=!0,hr(e,i))};Et.minus=Et.sub=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?Aae(e,t):Nae(e,(t.s=-t.s,t))};Et.modulo=Et.mod=function(t){var e,n=this,r=n.constructor,i=r.precision;if(t=new r(t),!t.s)throw Error(Nl+"NaN");return n.s?(Or=!1,e=Yu(n,t,0,1).times(t),Or=!0,n.minus(e)):hr(new r(n),i)};Et.naturalExponential=Et.exp=function(){return Sae(this)};Et.naturalLogarithm=Et.ln=function(){return g2(this)};Et.negated=Et.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};Et.plus=Et.add=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?Nae(e,t):Aae(e,(t.s=-t.s,t))};Et.precision=Et.sd=function(t){var e,n,r,i=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(ev+t);if(e=Is(i)+1,r=i.d.length-1,n=r*Cr+1,r=i.d[r],r){for(;r%10==0;r/=10)n--;for(r=i.d[0];r>=10;r/=10)n++}return t&&e>n?e:n};Et.squareRoot=Et.sqrt=function(){var t,e,n,r,i,a,o,l=this,c=l.constructor;if(l.s<1){if(!l.s)return new c(0);throw Error(Nl+"NaN")}for(t=Is(l),Or=!1,i=Math.sqrt(+l),i==0||i==1/0?(e=md(l.d),(e.length+t)%2==0&&(e+="0"),i=Math.sqrt(e),t=d1((t+1)/2)-(t<0||t%2),i==1/0?e="5e"+t:(e=i.toExponential(),e=e.slice(0,e.indexOf("e")+1)+t),r=new c(e)):r=new c(i.toString()),n=c.precision,i=o=n+3;;)if(a=r,r=a.plus(Yu(l,a,o+2)).times(.5),md(a.d).slice(0,o)===(e=md(r.d)).slice(0,o)){if(e=e.slice(o-3,o+1),i==o&&e=="4999"){if(hr(a,n+1,0),a.times(a).eq(l)){r=a;break}}else if(e!="9999")break;o+=4}return Or=!0,hr(r,n)};Et.times=Et.mul=function(t){var e,n,r,i,a,o,l,c,d,u=this,h=u.constructor,f=u.d,m=(t=new h(t)).d;if(!u.s||!t.s)return new h(0);for(t.s*=u.s,n=u.e+t.e,c=f.length,d=m.length,c<d&&(a=f,f=m,m=a,o=c,c=d,d=o),a=[],o=c+d,r=o;r--;)a.push(0);for(r=d;--r>=0;){for(e=0,i=c+r;i>r;)l=a[i]+m[r]*f[i-r-1]+e,a[i--]=l%ni|0,e=l/ni|0;a[i]=(a[i]+e)%ni|0}for(;!a[--o];)a.pop();return e?++n:a.shift(),t.d=a,t.e=n,Or?hr(t,h.precision):t};Et.toDecimalPlaces=Et.todp=function(t,e){var n=this,r=n.constructor;return n=new r(n),t===void 0?n:(Td(t,0,c1),e===void 0?e=r.rounding:Td(e,0,8),hr(n,t+Is(n)+1,e))};Et.toExponential=function(t,e){var n,r=this,i=r.constructor;return t===void 0?n=xv(r,!0):(Td(t,0,c1),e===void 0?e=i.rounding:Td(e,0,8),r=hr(new i(r),t+1,e),n=xv(r,!0,t+1)),n};Et.toFixed=function(t,e){var n,r,i=this,a=i.constructor;return t===void 0?xv(i):(Td(t,0,c1),e===void 0?e=a.rounding:Td(e,0,8),r=hr(new a(i),t+Is(i)+1,e),n=xv(r.abs(),!1,t+Is(r)+1),i.isneg()&&!i.isZero()?"-"+n:n)};Et.toInteger=Et.toint=function(){var t=this,e=t.constructor;return hr(new e(t),Is(t)+1,e.rounding)};Et.toNumber=function(){return+this};Et.toPower=Et.pow=function(t){var e,n,r,i,a,o,l=this,c=l.constructor,d=12,u=+(t=new c(t));if(!t.s)return new c(Co);if(l=new c(l),!l.s){if(t.s<1)throw Error(Nl+"Infinity");return l}if(l.eq(Co))return l;if(r=c.precision,t.eq(Co))return hr(l,r);if(e=t.e,n=t.d.length-1,o=e>=n,a=l.s,o){if((n=u<0?-u:u)<=jae){for(i=new c(Co),e=Math.ceil(r/Cr+4),Or=!1;n%2&&(i=i.times(l),oW(i.d,e)),n=d1(n/2),n!==0;)l=l.times(l),oW(l.d,e);return Or=!0,t.s<0?new c(Co).div(i):hr(i,r)}}else if(a<0)throw Error(Nl+"NaN");return a=a<0&&t.d[Math.max(e,n)]&1?-1:1,l.s=1,Or=!1,i=t.times(g2(l,r+d)),Or=!0,i=Sae(i),i.s=a,i};Et.toPrecision=function(t,e){var n,r,i=this,a=i.constructor;return t===void 0?(n=Is(i),r=xv(i,n<=a.toExpNeg||n>=a.toExpPos)):(Td(t,1,c1),e===void 0?e=a.rounding:Td(e,0,8),i=hr(new a(i),t,e),n=Is(i),r=xv(i,t<=n||n<=a.toExpNeg,t)),r};Et.toSignificantDigits=Et.tosd=function(t,e){var n=this,r=n.constructor;return t===void 0?(t=r.precision,e=r.rounding):(Td(t,1,c1),e===void 0?e=r.rounding:Td(e,0,8)),hr(new r(n),t,e)};Et.toString=Et.valueOf=Et.val=Et.toJSON=Et[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,e=Is(t),n=t.constructor;return xv(t,e<=n.toExpNeg||e>=n.toExpPos)};function Nae(t,e){var n,r,i,a,o,l,c,d,u=t.constructor,h=u.precision;if(!t.s||!e.s)return e.s||(e=new u(t)),Or?hr(e,h):e;if(c=t.d,d=e.d,o=t.e,i=e.e,c=c.slice(),a=o-i,a){for(a<0?(r=c,a=-a,l=d.length):(r=d,i=o,l=c.length),o=Math.ceil(h/Cr),l=o>l?o+1:l+1,a>l&&(a=l,r.length=1),r.reverse();a--;)r.push(0);r.reverse()}for(l=c.length,a=d.length,l-a<0&&(a=l,r=d,d=c,c=r),n=0;a;)n=(c[--a]=c[a]+d[a]+n)/ni|0,c[a]%=ni;for(n&&(c.unshift(n),++i),l=c.length;c[--l]==0;)c.pop();return e.d=c,e.e=i,Or?hr(e,h):e}function Td(t,e,n){if(t!==~~t||t<e||t>n)throw Error(ev+t)}function md(t){var e,n,r,i=t.length-1,a="",o=t[0];if(i>0){for(a+=o,e=1;e<i;e++)r=t[e]+"",n=Cr-r.length,n&&(a+=Vh(n)),a+=r;o=t[e],r=o+"",n=Cr-r.length,n&&(a+=Vh(n))}else if(o===0)return"0";for(;o%10===0;)o/=10;return a+o}var Yu=function(){function t(r,i){var a,o=0,l=r.length;for(r=r.slice();l--;)a=r[l]*i+o,r[l]=a%ni|0,o=a/ni|0;return o&&r.unshift(o),r}function e(r,i,a,o){var l,c;if(a!=o)c=a>o?1:-1;else for(l=c=0;l<a;l++)if(r[l]!=i[l]){c=r[l]>i[l]?1:-1;break}return c}function n(r,i,a){for(var o=0;a--;)r[a]-=o,o=r[a]<i[a]?1:0,r[a]=o*ni+r[a]-i[a];for(;!r[0]&&r.length>1;)r.shift()}return function(r,i,a,o){var l,c,d,u,h,f,m,v,p,g,x,y,b,w,N,E,C,j,I=r.constructor,k=r.s==i.s?1:-1,D=r.d,P=i.d;if(!r.s)return new I(r);if(!i.s)throw Error(Nl+"Division by zero");for(c=r.e-i.e,C=P.length,N=D.length,m=new I(k),v=m.d=[],d=0;P[d]==(D[d]||0);)++d;if(P[d]>(D[d]||0)&&--c,a==null?y=a=I.precision:o?y=a+(Is(r)-Is(i))+1:y=a,y<0)return new I(0);if(y=y/Cr+2|0,d=0,C==1)for(u=0,P=P[0],y++;(d<N||u)&&y--;d++)b=u*ni+(D[d]||0),v[d]=b/P|0,u=b%P|0;else{for(u=ni/(P[0]+1)|0,u>1&&(P=t(P,u),D=t(D,u),C=P.length,N=D.length),w=C,p=D.slice(0,C),g=p.length;g<C;)p[g++]=0;j=P.slice(),j.unshift(0),E=P[0],P[1]>=ni/2&&++E;do u=0,l=e(P,p,C,g),l<0?(x=p[0],C!=g&&(x=x*ni+(p[1]||0)),u=x/E|0,u>1?(u>=ni&&(u=ni-1),h=t(P,u),f=h.length,g=p.length,l=e(h,p,f,g),l==1&&(u--,n(h,C<f?j:P,f))):(u==0&&(l=u=1),h=P.slice()),f=h.length,f<g&&h.unshift(0),n(p,h,g),l==-1&&(g=p.length,l=e(P,p,C,g),l<1&&(u++,n(p,C<g?j:P,g))),g=p.length):l===0&&(u++,p=[0]),v[d++]=u,l&&p[0]?p[g++]=D[w]||0:(p=[D[w]],g=1);while((w++<N||p[0]!==void 0)&&y--)}return v[0]||v.shift(),m.e=c,hr(m,o?a+Is(m)+1:a)}}();function Sae(t,e){var n,r,i,a,o,l,c=0,d=0,u=t.constructor,h=u.precision;if(Is(t)>16)throw Error(k7+Is(t));if(!t.s)return new u(Co);for(e==null?(Or=!1,l=h):l=e,o=new u(.03125);t.abs().gte(.1);)t=t.times(o),d+=5;for(r=Math.log(cp(2,d))/Math.LN10*2+5|0,l+=r,n=i=a=new u(Co),u.precision=l;;){if(i=hr(i.times(t),l),n=n.times(++c),o=a.plus(Yu(i,n,l)),md(o.d).slice(0,l)===md(a.d).slice(0,l)){for(;d--;)a=hr(a.times(a),l);return u.precision=h,e==null?(Or=!0,hr(a,h)):a}a=o}}function Is(t){for(var e=t.e*Cr,n=t.d[0];n>=10;n/=10)e++;return e}function jO(t,e,n){if(e>t.LN10.sd())throw Or=!0,n&&(t.precision=n),Error(Nl+"LN10 precision limit exceeded");return hr(new t(t.LN10),e)}function Vh(t){for(var e="";t--;)e+="0";return e}function g2(t,e){var n,r,i,a,o,l,c,d,u,h=1,f=10,m=t,v=m.d,p=m.constructor,g=p.precision;if(m.s<1)throw Error(Nl+(m.s?"NaN":"-Infinity"));if(m.eq(Co))return new p(0);if(e==null?(Or=!1,d=g):d=e,m.eq(10))return e==null&&(Or=!0),jO(p,d);if(d+=f,p.precision=d,n=md(v),r=n.charAt(0),a=Is(m),Math.abs(a)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)m=m.times(t),n=md(m.d),r=n.charAt(0),h++;a=Is(m),r>1?(m=new p("0."+n),a++):m=new p(r+"."+n.slice(1))}else return c=jO(p,d+2,g).times(a+""),m=g2(new p(r+"."+n.slice(1)),d-f).plus(c),p.precision=g,e==null?(Or=!0,hr(m,g)):m;for(l=o=m=Yu(m.minus(Co),m.plus(Co),d),u=hr(m.times(m),d),i=3;;){if(o=hr(o.times(u),d),c=l.plus(Yu(o,new p(i),d)),md(c.d).slice(0,d)===md(l.d).slice(0,d))return l=l.times(2),a!==0&&(l=l.plus(jO(p,d+2,g).times(a+""))),l=Yu(l,new p(h),d),p.precision=g,e==null?(Or=!0,hr(l,g)):l;l=c,i+=2}}function aW(t,e){var n,r,i;for((n=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),r=0;e.charCodeAt(r)===48;)++r;for(i=e.length;e.charCodeAt(i-1)===48;)--i;if(e=e.slice(r,i),e){if(i-=r,n=n-r-1,t.e=d1(n/Cr),t.d=[],r=(n+1)%Cr,n<0&&(r+=Cr),r<i){for(r&&t.d.push(+e.slice(0,r)),i-=Cr;r<i;)t.d.push(+e.slice(r,r+=Cr));e=e.slice(r),r=Cr-e.length}else r-=i;for(;r--;)e+="0";if(t.d.push(+e),Or&&(t.e>a4||t.e<-a4))throw Error(k7+n)}else t.s=0,t.e=0,t.d=[0];return t}function hr(t,e,n){var r,i,a,o,l,c,d,u,h=t.d;for(o=1,a=h[0];a>=10;a/=10)o++;if(r=e-o,r<0)r+=Cr,i=e,d=h[u=0];else{if(u=Math.ceil((r+1)/Cr),a=h.length,u>=a)return t;for(d=a=h[u],o=1;a>=10;a/=10)o++;r%=Cr,i=r-Cr+o}if(n!==void 0&&(a=cp(10,o-i-1),l=d/a%10|0,c=e<0||h[u+1]!==void 0||d%a,c=n<4?(l||c)&&(n==0||n==(t.s<0?3:2)):l>5||l==5&&(n==4||c||n==6&&(r>0?i>0?d/cp(10,o-i):0:h[u-1])%10&1||n==(t.s<0?8:7))),e<1||!h[0])return c?(a=Is(t),h.length=1,e=e-a-1,h[0]=cp(10,(Cr-e%Cr)%Cr),t.e=d1(-e/Cr)||0):(h.length=1,h[0]=t.e=t.s=0),t;if(r==0?(h.length=u,a=1,u--):(h.length=u+1,a=cp(10,Cr-r),h[u]=i>0?(d/cp(10,o-i)%cp(10,i)|0)*a:0),c)for(;;)if(u==0){(h[0]+=a)==ni&&(h[0]=1,++t.e);break}else{if(h[u]+=a,h[u]!=ni)break;h[u--]=0,a=1}for(r=h.length;h[--r]===0;)h.pop();if(Or&&(t.e>a4||t.e<-a4))throw Error(k7+Is(t));return t}function Aae(t,e){var n,r,i,a,o,l,c,d,u,h,f=t.constructor,m=f.precision;if(!t.s||!e.s)return e.s?e.s=-e.s:e=new f(t),Or?hr(e,m):e;if(c=t.d,h=e.d,r=e.e,d=t.e,c=c.slice(),o=d-r,o){for(u=o<0,u?(n=c,o=-o,l=h.length):(n=h,r=d,l=c.length),i=Math.max(Math.ceil(m/Cr),l)+2,o>i&&(o=i,n.length=1),n.reverse(),i=o;i--;)n.push(0);n.reverse()}else{for(i=c.length,l=h.length,u=i<l,u&&(l=i),i=0;i<l;i++)if(c[i]!=h[i]){u=c[i]<h[i];break}o=0}for(u&&(n=c,c=h,h=n,e.s=-e.s),l=c.length,i=h.length-l;i>0;--i)c[l++]=0;for(i=h.length;i>o;){if(c[--i]<h[i]){for(a=i;a&&c[--a]===0;)c[a]=ni-1;--c[a],c[i]+=ni}c[i]-=h[i]}for(;c[--l]===0;)c.pop();for(;c[0]===0;c.shift())--r;return c[0]?(e.d=c,e.e=r,Or?hr(e,m):e):new f(0)}function xv(t,e,n){var r,i=Is(t),a=md(t.d),o=a.length;return e?(n&&(r=n-o)>0?a=a.charAt(0)+"."+a.slice(1)+Vh(r):o>1&&(a=a.charAt(0)+"."+a.slice(1)),a=a+(i<0?"e":"e+")+i):i<0?(a="0."+Vh(-i-1)+a,n&&(r=n-o)>0&&(a+=Vh(r))):i>=o?(a+=Vh(i+1-o),n&&(r=n-i-1)>0&&(a=a+"."+Vh(r))):((r=i+1)<o&&(a=a.slice(0,r)+"."+a.slice(r)),n&&(r=n-o)>0&&(i+1===o&&(a+="."),a+=Vh(r))),t.s<0?"-"+a:a}function oW(t,e){if(t.length>e)return t.length=e,!0}function Cae(t){var e,n,r;function i(a){var o=this;if(!(o instanceof i))return new i(a);if(o.constructor=i,a instanceof i){o.s=a.s,o.e=a.e,o.d=(a=a.d)?a.slice():a;return}if(typeof a=="number"){if(a*0!==0)throw Error(ev+a);if(a>0)o.s=1;else if(a<0)a=-a,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(a===~~a&&a<1e7){o.e=0,o.d=[a];return}return aW(o,a.toString())}else if(typeof a!="string")throw Error(ev+a);if(a.charCodeAt(0)===45?(a=a.slice(1),o.s=-1):o.s=1,LBe.test(a))aW(o,a);else throw Error(ev+a)}if(i.prototype=Et,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=Cae,i.config=i.set=RBe,t===void 0&&(t={}),t)for(r=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<r.length;)t.hasOwnProperty(n=r[e++])||(t[n]=this[n]);return i.config(t),i}function RBe(t){if(!t||typeof t!="object")throw Error(Nl+"Object expected");var e,n,r,i=["precision",1,c1,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<i.length;e+=3)if((r=t[n=i[e]])!==void 0)if(d1(r)===r&&r>=i[e+1]&&r<=i[e+2])this[n]=r;else throw Error(ev+n+": "+r);if((r=t[n="LN10"])!==void 0)if(r==Math.LN10)this[n]=new this(r);else throw Error(ev+n+": "+r);return this}var _7=Cae(OBe);Co=new _7(1);const sr=_7;function MBe(t){return zBe(t)||BBe(t)||$Be(t)||FBe()}function FBe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $Be(t,e){if(t){if(typeof t=="string")return yF(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return yF(t,e)}}function BBe(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function zBe(t){if(Array.isArray(t))return yF(t)}function yF(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var UBe=function(e){return e},Eae={"@@functional/placeholder":!0},Pae=function(e){return e===Eae},lW=function(e){return function n(){return arguments.length===0||arguments.length===1&&Pae(arguments.length<=0?void 0:arguments[0])?n:e.apply(void 0,arguments)}},VBe=function t(e,n){return e===1?n:lW(function(){for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];var o=i.filter(function(l){return l!==Eae}).length;return o>=e?n.apply(void 0,i):t(e-o,lW(function(){for(var l=arguments.length,c=new Array(l),d=0;d<l;d++)c[d]=arguments[d];var u=i.map(function(h){return Pae(h)?c.shift():h});return n.apply(void 0,MBe(u).concat(c))}))})},yD=function(e){return VBe(e.length,e)},bF=function(e,n){for(var r=[],i=e;i<n;++i)r[i-e]=i;return r},qBe=yD(function(t,e){return Array.isArray(e)?e.map(t):Object.keys(e).map(function(n){return e[n]}).map(t)}),HBe=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];if(!n.length)return UBe;var i=n.reverse(),a=i[0],o=i.slice(1);return function(){return o.reduce(function(l,c){return c(l)},a.apply(void 0,arguments))}},wF=function(e){return Array.isArray(e)?e.reverse():e.split("").reverse.join("")},Tae=function(e){var n=null,r=null;return function(){for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return n&&a.every(function(l,c){return l===n[c]})||(n=a,r=e.apply(void 0,a)),r}};function WBe(t){var e;return t===0?e=1:e=Math.floor(new sr(t).abs().log(10).toNumber())+1,e}function GBe(t,e,n){for(var r=new sr(t),i=0,a=[];r.lt(e)&&i<1e5;)a.push(r.toNumber()),r=r.add(n),i++;return a}var KBe=yD(function(t,e,n){var r=+t,i=+e;return r+n*(i-r)}),YBe=yD(function(t,e,n){var r=e-+t;return r=r||1/0,(n-t)/r}),XBe=yD(function(t,e,n){var r=e-+t;return r=r||1/0,Math.max(0,Math.min(1,(n-t)/r))});const bD={rangeStep:GBe,getDigitCount:WBe,interpolateNumber:KBe,uninterpolateNumber:YBe,uninterpolateTruncation:XBe};function jF(t){return JBe(t)||QBe(t)||Iae(t)||ZBe()}function ZBe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function QBe(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function JBe(t){if(Array.isArray(t))return NF(t)}function v2(t,e){return n9e(t)||t9e(t,e)||Iae(t,e)||e9e()}function e9e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Iae(t,e){if(t){if(typeof t=="string")return NF(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return NF(t,e)}}function NF(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function t9e(t,e){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(t)))){var n=[],r=!0,i=!1,a=void 0;try{for(var o=t[Symbol.iterator](),l;!(r=(l=o.next()).done)&&(n.push(l.value),!(e&&n.length===e));r=!0);}catch(c){i=!0,a=c}finally{try{!r&&o.return!=null&&o.return()}finally{if(i)throw a}}return n}}function n9e(t){if(Array.isArray(t))return t}function Dae(t){var e=v2(t,2),n=e[0],r=e[1],i=n,a=r;return n>r&&(i=r,a=n),[i,a]}function kae(t,e,n){if(t.lte(0))return new sr(0);var r=bD.getDigitCount(t.toNumber()),i=new sr(10).pow(r),a=t.div(i),o=r!==1?.05:.1,l=new sr(Math.ceil(a.div(o).toNumber())).add(n).mul(o),c=l.mul(i);return e?c:new sr(Math.ceil(c))}function r9e(t,e,n){var r=1,i=new sr(t);if(!i.isint()&&n){var a=Math.abs(t);a<1?(r=new sr(10).pow(bD.getDigitCount(t)-1),i=new sr(Math.floor(i.div(r).toNumber())).mul(r)):a>1&&(i=new sr(Math.floor(t)))}else t===0?i=new sr(Math.floor((e-1)/2)):n||(i=new sr(Math.floor(t)));var o=Math.floor((e-1)/2),l=HBe(qBe(function(c){return i.add(new sr(c-o).mul(r)).toNumber()}),bF);return l(0,e)}function _ae(t,e,n,r){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((e-t)/(n-1)))return{step:new sr(0),tickMin:new sr(0),tickMax:new sr(0)};var a=kae(new sr(e).sub(t).div(n-1),r,i),o;t<=0&&e>=0?o=new sr(0):(o=new sr(t).add(e).div(2),o=o.sub(new sr(o).mod(a)));var l=Math.ceil(o.sub(t).div(a).toNumber()),c=Math.ceil(new sr(e).sub(o).div(a).toNumber()),d=l+c+1;return d>n?_ae(t,e,n,r,i+1):(d<n&&(c=e>0?c+(n-d):c,l=e>0?l:l+(n-d)),{step:a,tickMin:o.sub(new sr(l).mul(a)),tickMax:o.add(new sr(c).mul(a))})}function s9e(t){var e=v2(t,2),n=e[0],r=e[1],i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=Math.max(i,2),l=Dae([n,r]),c=v2(l,2),d=c[0],u=c[1];if(d===-1/0||u===1/0){var h=u===1/0?[d].concat(jF(bF(0,i-1).map(function(){return 1/0}))):[].concat(jF(bF(0,i-1).map(function(){return-1/0})),[u]);return n>r?wF(h):h}if(d===u)return r9e(d,i,a);var f=_ae(d,u,o,a),m=f.step,v=f.tickMin,p=f.tickMax,g=bD.rangeStep(v,p.add(new sr(.1).mul(m)),m);return n>r?wF(g):g}function i9e(t,e){var n=v2(t,2),r=n[0],i=n[1],a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=Dae([r,i]),l=v2(o,2),c=l[0],d=l[1];if(c===-1/0||d===1/0)return[r,i];if(c===d)return[c];var u=Math.max(e,2),h=kae(new sr(d).sub(c).div(u-1),a,0),f=[].concat(jF(bD.rangeStep(new sr(c),new sr(d).sub(new sr(.99).mul(h)),h)),[d]);return r>i?wF(f):f}var a9e=Tae(s9e),o9e=Tae(i9e),l9e=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function bb(t){"@babel/helpers - typeof";return bb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bb(t)}function o4(){return o4=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},o4.apply(this,arguments)}function c9e(t,e){return f9e(t)||h9e(t,e)||u9e(t,e)||d9e()}function d9e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function u9e(t,e){if(t){if(typeof t=="string")return cW(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return cW(t,e)}}function cW(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function h9e(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,o,l=[],c=!0,d=!1;try{if(a=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==e);c=!0);}catch(u){d=!0,i=u}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw i}}return l}}function f9e(t){if(Array.isArray(t))return t}function m9e(t,e){if(t==null)return{};var n=p9e(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function p9e(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function g9e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function dW(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Rae(r.key),r)}}function v9e(t,e,n){return e&&dW(t.prototype,e),n&&dW(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function x9e(t,e,n){return e=l4(e),y9e(t,Oae()?Reflect.construct(e,n||[],l4(t).constructor):e.apply(t,n))}function y9e(t,e){if(e&&(bb(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return b9e(t)}function b9e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Oae(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Oae=function(){return!!t})()}function l4(t){return l4=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},l4(t)}function w9e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&SF(t,e)}function SF(t,e){return SF=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},SF(t,e)}function Lae(t,e,n){return e=Rae(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Rae(t){var e=j9e(t,"string");return bb(e)=="symbol"?e:e+""}function j9e(t,e){if(bb(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(bb(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var FA=function(t){function e(){return g9e(this,e),x9e(this,e,arguments)}return w9e(e,t),v9e(e,[{key:"render",value:function(){var r=this.props,i=r.offset,a=r.layout,o=r.width,l=r.dataKey,c=r.data,d=r.dataPointFormatter,u=r.xAxis,h=r.yAxis,f=m9e(r,l9e),m=_t(f,!1);this.props.direction==="x"&&u.type!=="number"&&xm(!1);var v=c.map(function(p){var g=d(p,l),x=g.x,y=g.y,b=g.value,w=g.errorVal;if(!w)return null;var N=[],E,C;if(Array.isArray(w)){var j=c9e(w,2);E=j[0],C=j[1]}else E=C=w;if(a==="vertical"){var I=u.scale,k=y+i,D=k+o,P=k-o,R=I(b-E),_=I(b+C);N.push({x1:_,y1:D,x2:_,y2:P}),N.push({x1:R,y1:k,x2:_,y2:k}),N.push({x1:R,y1:D,x2:R,y2:P})}else if(a==="horizontal"){var M=h.scale,U=x+i,F=U-o,z=U+o,H=M(b-E),W=M(b+C);N.push({x1:F,y1:W,x2:z,y2:W}),N.push({x1:U,y1:H,x2:U,y2:W}),N.push({x1:F,y1:H,x2:z,y2:H})}return ge.createElement(yn,o4({className:"recharts-errorBar",key:"bar-".concat(N.map(function($){return"".concat($.x1,"-").concat($.x2,"-").concat($.y1,"-").concat($.y2)}))},m),N.map(function($){return ge.createElement("line",o4({},$,{key:"line-".concat($.x1,"-").concat($.x2,"-").concat($.y1,"-").concat($.y2)}))}))});return ge.createElement(yn,{className:"recharts-errorBars"},v)}}])}(ge.Component);Lae(FA,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});Lae(FA,"displayName","ErrorBar");function x2(t){"@babel/helpers - typeof";return x2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},x2(t)}function uW(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Zm(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?uW(Object(n),!0).forEach(function(r){N9e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):uW(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function N9e(t,e,n){return e=S9e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function S9e(t){var e=A9e(t,"string");return x2(e)=="symbol"?e:e+""}function A9e(t,e){if(x2(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(x2(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Mae=function(e){var n=e.children,r=e.formattedGraphicalItems,i=e.legendWidth,a=e.legendContent,o=wo(n,m0);if(!o)return null;var l=m0.defaultProps,c=l!==void 0?Zm(Zm({},l),o.props):{},d;return o.props&&o.props.payload?d=o.props&&o.props.payload:a==="children"?d=(r||[]).reduce(function(u,h){var f=h.item,m=h.props,v=m.sectors||m.data||[];return u.concat(v.map(function(p){return{type:o.props.iconType||f.props.legendType,value:p.name,color:p.fill,payload:p}}))},[]):d=(r||[]).map(function(u){var h=u.item,f=h.type.defaultProps,m=f!==void 0?Zm(Zm({},f),h.props):{},v=m.dataKey,p=m.name,g=m.legendType,x=m.hide;return{inactive:x,dataKey:v,type:c.iconType||g||"square",color:O7(h),value:p||v,payload:m}}),Zm(Zm(Zm({},c),m0.getWithHeight(o,i)),{},{payload:d,item:o})};function y2(t){"@babel/helpers - typeof";return y2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},y2(t)}function hW(t){return T9e(t)||P9e(t)||E9e(t)||C9e()}function C9e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function E9e(t,e){if(t){if(typeof t=="string")return AF(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return AF(t,e)}}function P9e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function T9e(t){if(Array.isArray(t))return AF(t)}function AF(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function fW(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function rs(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?fW(Object(n),!0).forEach(function(r){g0(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):fW(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function g0(t,e,n){return e=I9e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function I9e(t){var e=D9e(t,"string");return y2(e)=="symbol"?e:e+""}function D9e(t,e){if(y2(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(y2(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function xs(t,e,n){return Qt(t)||Qt(e)?n:Vs(e)?Ro(t,e,n):Wt(e)?e(t):n}function fj(t,e,n,r){var i=IBe(t,function(l){return xs(l,e)});if(n==="number"){var a=i.filter(function(l){return ct(l)||parseFloat(l)});return a.length?[xD(a),qf(a)]:[1/0,-1/0]}var o=r?i.filter(function(l){return!Qt(l)}):i;return o.map(function(l){return Vs(l)||l instanceof Date?l:""})}var k9e=function(e){var n,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],i=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0,o=-1,l=(n=r==null?void 0:r.length)!==null&&n!==void 0?n:0;if(l<=1)return 0;if(a&&a.axisType==="angleAxis"&&Math.abs(Math.abs(a.range[1]-a.range[0])-360)<=1e-6)for(var c=a.range,d=0;d<l;d++){var u=d>0?i[d-1].coordinate:i[l-1].coordinate,h=i[d].coordinate,f=d>=l-1?i[0].coordinate:i[d+1].coordinate,m=void 0;if(ha(h-u)!==ha(f-h)){var v=[];if(ha(f-h)===ha(c[1]-c[0])){m=f;var p=h+c[1]-c[0];v[0]=Math.min(p,(p+u)/2),v[1]=Math.max(p,(p+u)/2)}else{m=u;var g=f+c[1]-c[0];v[0]=Math.min(h,(g+h)/2),v[1]=Math.max(h,(g+h)/2)}var x=[Math.min(h,(m+h)/2),Math.max(h,(m+h)/2)];if(e>x[0]&&e<=x[1]||e>=v[0]&&e<=v[1]){o=i[d].index;break}}else{var y=Math.min(u,f),b=Math.max(u,f);if(e>(y+h)/2&&e<=(b+h)/2){o=i[d].index;break}}}else for(var w=0;w<l;w++)if(w===0&&e<=(r[w].coordinate+r[w+1].coordinate)/2||w>0&&w<l-1&&e>(r[w].coordinate+r[w-1].coordinate)/2&&e<=(r[w].coordinate+r[w+1].coordinate)/2||w===l-1&&e>(r[w].coordinate+r[w-1].coordinate)/2){o=r[w].index;break}return o},O7=function(e){var n,r=e,i=r.type.displayName,a=(n=e.type)!==null&&n!==void 0&&n.defaultProps?rs(rs({},e.type.defaultProps),e.props):e.props,o=a.stroke,l=a.fill,c;switch(i){case"Line":c=o;break;case"Area":case"Radar":c=o&&o!=="none"?o:l;break;default:c=l;break}return c},_9e=function(e){var n=e.barSize,r=e.totalSize,i=e.stackGroups,a=i===void 0?{}:i;if(!a)return{};for(var o={},l=Object.keys(a),c=0,d=l.length;c<d;c++)for(var u=a[l[c]].stackGroups,h=Object.keys(u),f=0,m=h.length;f<m;f++){var v=u[h[f]],p=v.items,g=v.cateAxisId,x=p.filter(function(C){return Ku(C.type).indexOf("Bar")>=0});if(x&&x.length){var y=x[0].type.defaultProps,b=y!==void 0?rs(rs({},y),x[0].props):x[0].props,w=b.barSize,N=b[g];o[N]||(o[N]=[]);var E=Qt(w)?n:w;o[N].push({item:x[0],stackList:x.slice(1),barSize:Qt(E)?void 0:fa(E,r,0)})}}return o},O9e=function(e){var n=e.barGap,r=e.barCategoryGap,i=e.bandSize,a=e.sizeList,o=a===void 0?[]:a,l=e.maxBarSize,c=o.length;if(c<1)return null;var d=fa(n,i,0,!0),u,h=[];if(o[0].barSize===+o[0].barSize){var f=!1,m=i/c,v=o.reduce(function(w,N){return w+N.barSize||0},0);v+=(c-1)*d,v>=i&&(v-=(c-1)*d,d=0),v>=i&&m>0&&(f=!0,m*=.9,v=c*m);var p=(i-v)/2>>0,g={offset:p-d,size:0};u=o.reduce(function(w,N){var E={item:N.item,position:{offset:g.offset+g.size+d,size:f?m:N.barSize}},C=[].concat(hW(w),[E]);return g=C[C.length-1].position,N.stackList&&N.stackList.length&&N.stackList.forEach(function(j){C.push({item:j,position:g})}),C},h)}else{var x=fa(r,i,0,!0);i-2*x-(c-1)*d<=0&&(d=0);var y=(i-2*x-(c-1)*d)/c;y>1&&(y>>=0);var b=l===+l?Math.min(y,l):y;u=o.reduce(function(w,N,E){var C=[].concat(hW(w),[{item:N.item,position:{offset:x+(y+d)*E+(y-b)/2,size:b}}]);return N.stackList&&N.stackList.length&&N.stackList.forEach(function(j){C.push({item:j,position:C[C.length-1].position})}),C},h)}return u},L9e=function(e,n,r,i){var a=r.children,o=r.width,l=r.margin,c=o-(l.left||0)-(l.right||0),d=Mae({children:a,legendWidth:c});if(d){var u=i||{},h=u.width,f=u.height,m=d.align,v=d.verticalAlign,p=d.layout;if((p==="vertical"||p==="horizontal"&&v==="middle")&&m!=="center"&&ct(e[m]))return rs(rs({},e),{},g0({},m,e[m]+(h||0)));if((p==="horizontal"||p==="vertical"&&m==="center")&&v!=="middle"&&ct(e[v]))return rs(rs({},e),{},g0({},v,e[v]+(f||0)))}return e},R9e=function(e,n,r){return Qt(n)?!0:e==="horizontal"?n==="yAxis":e==="vertical"||r==="x"?n==="xAxis":r==="y"?n==="yAxis":!0},Fae=function(e,n,r,i,a){var o=n.props.children,l=Mo(o,FA).filter(function(d){return R9e(i,a,d.props.direction)});if(l&&l.length){var c=l.map(function(d){return d.props.dataKey});return e.reduce(function(d,u){var h=xs(u,r);if(Qt(h))return d;var f=Array.isArray(h)?[xD(h),qf(h)]:[h,h],m=c.reduce(function(v,p){var g=xs(u,p,0),x=f[0]-Math.abs(Array.isArray(g)?g[0]:g),y=f[1]+Math.abs(Array.isArray(g)?g[1]:g);return[Math.min(x,v[0]),Math.max(y,v[1])]},[1/0,-1/0]);return[Math.min(m[0],d[0]),Math.max(m[1],d[1])]},[1/0,-1/0])}return null},M9e=function(e,n,r,i,a){var o=n.map(function(l){return Fae(e,l,r,a,i)}).filter(function(l){return!Qt(l)});return o&&o.length?o.reduce(function(l,c){return[Math.min(l[0],c[0]),Math.max(l[1],c[1])]},[1/0,-1/0]):null},$ae=function(e,n,r,i,a){var o=n.map(function(c){var d=c.props.dataKey;return r==="number"&&d&&Fae(e,c,d,i)||fj(e,d,r,a)});if(r==="number")return o.reduce(function(c,d){return[Math.min(c[0],d[0]),Math.max(c[1],d[1])]},[1/0,-1/0]);var l={};return o.reduce(function(c,d){for(var u=0,h=d.length;u<h;u++)l[d[u]]||(l[d[u]]=!0,c.push(d[u]));return c},[])},Bae=function(e,n){return e==="horizontal"&&n==="xAxis"||e==="vertical"&&n==="yAxis"||e==="centric"&&n==="angleAxis"||e==="radial"&&n==="radiusAxis"},zae=function(e,n,r,i){if(i)return e.map(function(c){return c.coordinate});var a,o,l=e.map(function(c){return c.coordinate===n&&(a=!0),c.coordinate===r&&(o=!0),c.coordinate});return a||l.push(n),o||l.push(r),l},Wu=function(e,n,r){if(!e)return null;var i=e.scale,a=e.duplicateDomain,o=e.type,l=e.range,c=e.realScaleType==="scaleBand"?i.bandwidth()/2:2,d=(n||r)&&o==="category"&&i.bandwidth?i.bandwidth()/c:0;if(d=e.axisType==="angleAxis"&&(l==null?void 0:l.length)>=2?ha(l[0]-l[1])*2*d:d,n&&(e.ticks||e.niceTicks)){var u=(e.ticks||e.niceTicks).map(function(h){var f=a?a.indexOf(h):h;return{coordinate:i(f)+d,value:h,offset:d}});return u.filter(function(h){return!s1(h.coordinate)})}return e.isCategorical&&e.categoricalDomain?e.categoricalDomain.map(function(h,f){return{coordinate:i(h)+d,value:h,index:f,offset:d}}):i.ticks&&!r?i.ticks(e.tickCount).map(function(h){return{coordinate:i(h)+d,value:h,offset:d}}):i.domain().map(function(h,f){return{coordinate:i(h)+d,value:a?a[h]:h,index:f,offset:d}})},NO=new WeakMap,DC=function(e,n){if(typeof n!="function")return e;NO.has(e)||NO.set(e,new WeakMap);var r=NO.get(e);if(r.has(n))return r.get(n);var i=function(){e.apply(void 0,arguments),n.apply(void 0,arguments)};return r.set(n,i),i},Uae=function(e,n,r){var i=e.scale,a=e.type,o=e.layout,l=e.axisType;if(i==="auto")return o==="radial"&&l==="radiusAxis"?{scale:u2(),realScaleType:"band"}:o==="radial"&&l==="angleAxis"?{scale:n4(),realScaleType:"linear"}:a==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?{scale:hj(),realScaleType:"point"}:a==="category"?{scale:u2(),realScaleType:"band"}:{scale:n4(),realScaleType:"linear"};if(mv(i)){var c="scale".concat(rD(i));return{scale:(iW[c]||hj)(),realScaleType:iW[c]?c:"point"}}return Wt(i)?{scale:i}:{scale:hj(),realScaleType:"point"}},mW=1e-4,Vae=function(e){var n=e.domain();if(!(!n||n.length<=2)){var r=n.length,i=e.range(),a=Math.min(i[0],i[1])-mW,o=Math.max(i[0],i[1])+mW,l=e(n[0]),c=e(n[r-1]);(l<a||l>o||c<a||c>o)&&e.domain([n[0],n[r-1]])}},F9e=function(e,n){if(!e)return null;for(var r=0,i=e.length;r<i;r++)if(e[r].item===n)return e[r].position;return null},$9e=function(e,n){if(!n||n.length!==2||!ct(n[0])||!ct(n[1]))return e;var r=Math.min(n[0],n[1]),i=Math.max(n[0],n[1]),a=[e[0],e[1]];return(!ct(e[0])||e[0]<r)&&(a[0]=r),(!ct(e[1])||e[1]>i)&&(a[1]=i),a[0]>i&&(a[0]=i),a[1]<r&&(a[1]=r),a},B9e=function(e){var n=e.length;if(!(n<=0))for(var r=0,i=e[0].length;r<i;++r)for(var a=0,o=0,l=0;l<n;++l){var c=s1(e[l][r][1])?e[l][r][0]:e[l][r][1];c>=0?(e[l][r][0]=a,e[l][r][1]=a+c,a=e[l][r][1]):(e[l][r][0]=o,e[l][r][1]=o+c,o=e[l][r][1])}},z9e=function(e){var n=e.length;if(!(n<=0))for(var r=0,i=e[0].length;r<i;++r)for(var a=0,o=0;o<n;++o){var l=s1(e[o][r][1])?e[o][r][0]:e[o][r][1];l>=0?(e[o][r][0]=a,e[o][r][1]=a+l,a=e[o][r][1]):(e[o][r][0]=0,e[o][r][1]=0)}},U9e={sign:B9e,expand:uDe,none:hb,silhouette:hDe,wiggle:fDe,positive:z9e},V9e=function(e,n,r){var i=n.map(function(l){return l.props.dataKey}),a=U9e[r],o=dDe().keys(i).value(function(l,c){return+xs(l,c,0)}).order(XM).offset(a);return o(e)},q9e=function(e,n,r,i,a,o){if(!e)return null;var l=o?n.reverse():n,c={},d=l.reduce(function(h,f){var m,v=(m=f.type)!==null&&m!==void 0&&m.defaultProps?rs(rs({},f.type.defaultProps),f.props):f.props,p=v.stackId,g=v.hide;if(g)return h;var x=v[r],y=h[x]||{hasStack:!1,stackGroups:{}};if(Vs(p)){var b=y.stackGroups[p]||{numericAxisId:r,cateAxisId:i,items:[]};b.items.push(f),y.hasStack=!0,y.stackGroups[p]=b}else y.stackGroups[kv("_stackId_")]={numericAxisId:r,cateAxisId:i,items:[f]};return rs(rs({},h),{},g0({},x,y))},c),u={};return Object.keys(d).reduce(function(h,f){var m=d[f];if(m.hasStack){var v={};m.stackGroups=Object.keys(m.stackGroups).reduce(function(p,g){var x=m.stackGroups[g];return rs(rs({},p),{},g0({},g,{numericAxisId:r,cateAxisId:i,items:x.items,stackedData:V9e(e,x.items,a)}))},v)}return rs(rs({},h),{},g0({},f,m))},u)},qae=function(e,n){var r=n.realScaleType,i=n.type,a=n.tickCount,o=n.originalDomain,l=n.allowDecimals,c=r||n.scale;if(c!=="auto"&&c!=="linear")return null;if(a&&i==="number"&&o&&(o[0]==="auto"||o[1]==="auto")){var d=e.domain();if(!d.length)return null;var u=a9e(d,a,l);return e.domain([xD(u),qf(u)]),{niceTicks:u}}if(a&&i==="number"){var h=e.domain(),f=o9e(h,a,l);return{niceTicks:f}}return null};function c4(t){var e=t.axis,n=t.ticks,r=t.bandSize,i=t.entry,a=t.index,o=t.dataKey;if(e.type==="category"){if(!e.allowDuplicatedCategory&&e.dataKey&&!Qt(i[e.dataKey])){var l=LP(n,"value",i[e.dataKey]);if(l)return l.coordinate+r/2}return n[a]?n[a].coordinate+r/2:null}var c=xs(i,Qt(o)?e.dataKey:o);return Qt(c)?null:e.scale(c)}var pW=function(e){var n=e.axis,r=e.ticks,i=e.offset,a=e.bandSize,o=e.entry,l=e.index;if(n.type==="category")return r[l]?r[l].coordinate+i:null;var c=xs(o,n.dataKey,n.domain[l]);return Qt(c)?null:n.scale(c)-a/2+i},H9e=function(e){var n=e.numericAxis,r=n.scale.domain();if(n.type==="number"){var i=Math.min(r[0],r[1]),a=Math.max(r[0],r[1]);return i<=0&&a>=0?0:a<0?a:i}return r[0]},W9e=function(e,n){var r,i=(r=e.type)!==null&&r!==void 0&&r.defaultProps?rs(rs({},e.type.defaultProps),e.props):e.props,a=i.stackId;if(Vs(a)){var o=n[a];if(o){var l=o.items.indexOf(e);return l>=0?o.stackedData[l]:null}}return null},G9e=function(e){return e.reduce(function(n,r){return[xD(r.concat([n[0]]).filter(ct)),qf(r.concat([n[1]]).filter(ct))]},[1/0,-1/0])},Hae=function(e,n,r){return Object.keys(e).reduce(function(i,a){var o=e[a],l=o.stackedData,c=l.reduce(function(d,u){var h=G9e(u.slice(n,r+1));return[Math.min(d[0],h[0]),Math.max(d[1],h[1])]},[1/0,-1/0]);return[Math.min(c[0],i[0]),Math.max(c[1],i[1])]},[1/0,-1/0]).map(function(i){return i===1/0||i===-1/0?0:i})},gW=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,vW=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,CF=function(e,n,r){if(Wt(e))return e(n,r);if(!Array.isArray(e))return n;var i=[];if(ct(e[0]))i[0]=r?e[0]:Math.min(e[0],n[0]);else if(gW.test(e[0])){var a=+gW.exec(e[0])[1];i[0]=n[0]-a}else Wt(e[0])?i[0]=e[0](n[0]):i[0]=n[0];if(ct(e[1]))i[1]=r?e[1]:Math.max(e[1],n[1]);else if(vW.test(e[1])){var o=+vW.exec(e[1])[1];i[1]=n[1]+o}else Wt(e[1])?i[1]=e[1](n[1]):i[1]=n[1];return i},d4=function(e,n,r){if(e&&e.scale&&e.scale.bandwidth){var i=e.scale.bandwidth();if(!r||i>0)return i}if(e&&n&&n.length>=2){for(var a=l7(n,function(h){return h.coordinate}),o=1/0,l=1,c=a.length;l<c;l++){var d=a[l],u=a[l-1];o=Math.min((d.coordinate||0)-(u.coordinate||0),o)}return o===1/0?0:o}return r?void 0:0},xW=function(e,n,r){return!e||!e.length||vv(e,Ro(r,"type.defaultProps.domain"))?n:e},Wae=function(e,n){var r=e.type.defaultProps?rs(rs({},e.type.defaultProps),e.props):e.props,i=r.dataKey,a=r.name,o=r.unit,l=r.formatter,c=r.tooltipType,d=r.chartType,u=r.hide;return rs(rs({},_t(e,!1)),{},{dataKey:i,unit:o,formatter:l,name:a||i,color:O7(e),value:xs(n,i),type:c,payload:n,chartType:d,hide:u})};function b2(t){"@babel/helpers - typeof";return b2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},b2(t)}function yW(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function eu(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?yW(Object(n),!0).forEach(function(r){Gae(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):yW(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Gae(t,e,n){return e=K9e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function K9e(t){var e=Y9e(t,"string");return b2(e)=="symbol"?e:e+""}function Y9e(t,e){if(b2(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(b2(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function X9e(t,e){return eze(t)||J9e(t,e)||Q9e(t,e)||Z9e()}function Z9e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Q9e(t,e){if(t){if(typeof t=="string")return bW(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return bW(t,e)}}function bW(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function J9e(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,o,l=[],c=!0,d=!1;try{if(a=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==e);c=!0);}catch(u){d=!0,i=u}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw i}}return l}}function eze(t){if(Array.isArray(t))return t}var u4=Math.PI/180,tze=function(e){return e*180/Math.PI},jr=function(e,n,r,i){return{x:e+Math.cos(-u4*i)*r,y:n+Math.sin(-u4*i)*r}},Kae=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(e-(r.left||0)-(r.right||0)),Math.abs(n-(r.top||0)-(r.bottom||0)))/2},nze=function(e,n,r,i,a){var o=e.width,l=e.height,c=e.startAngle,d=e.endAngle,u=fa(e.cx,o,o/2),h=fa(e.cy,l,l/2),f=Kae(o,l,r),m=fa(e.innerRadius,f,0),v=fa(e.outerRadius,f,f*.8),p=Object.keys(n);return p.reduce(function(g,x){var y=n[x],b=y.domain,w=y.reversed,N;if(Qt(y.range))i==="angleAxis"?N=[c,d]:i==="radiusAxis"&&(N=[m,v]),w&&(N=[N[1],N[0]]);else{N=y.range;var E=N,C=X9e(E,2);c=C[0],d=C[1]}var j=Uae(y,a),I=j.realScaleType,k=j.scale;k.domain(b).range(N),Vae(k);var D=qae(k,eu(eu({},y),{},{realScaleType:I})),P=eu(eu(eu({},y),D),{},{range:N,radius:v,realScaleType:I,scale:k,cx:u,cy:h,innerRadius:m,outerRadius:v,startAngle:c,endAngle:d});return eu(eu({},g),{},Gae({},x,P))},{})},rze=function(e,n){var r=e.x,i=e.y,a=n.x,o=n.y;return Math.sqrt(Math.pow(r-a,2)+Math.pow(i-o,2))},sze=function(e,n){var r=e.x,i=e.y,a=n.cx,o=n.cy,l=rze({x:r,y:i},{x:a,y:o});if(l<=0)return{radius:l};var c=(r-a)/l,d=Math.acos(c);return i>o&&(d=2*Math.PI-d),{radius:l,angle:tze(d),angleInRadian:d}},ize=function(e){var n=e.startAngle,r=e.endAngle,i=Math.floor(n/360),a=Math.floor(r/360),o=Math.min(i,a);return{startAngle:n-o*360,endAngle:r-o*360}},aze=function(e,n){var r=n.startAngle,i=n.endAngle,a=Math.floor(r/360),o=Math.floor(i/360),l=Math.min(a,o);return e+l*360},wW=function(e,n){var r=e.x,i=e.y,a=sze({x:r,y:i},n),o=a.radius,l=a.angle,c=n.innerRadius,d=n.outerRadius;if(o<c||o>d)return!1;if(o===0)return!0;var u=ize(n),h=u.startAngle,f=u.endAngle,m=l,v;if(h<=f){for(;m>f;)m-=360;for(;m<h;)m+=360;v=m>=h&&m<=f}else{for(;m>h;)m-=360;for(;m<f;)m+=360;v=m>=f&&m<=h}return v?eu(eu({},n),{},{radius:o,angle:aze(m,n)}):null},Yae=function(e){return!A.isValidElement(e)&&!Wt(e)&&typeof e!="boolean"?e.className:""};function w2(t){"@babel/helpers - typeof";return w2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},w2(t)}var oze=["offset"];function lze(t){return hze(t)||uze(t)||dze(t)||cze()}function cze(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function dze(t,e){if(t){if(typeof t=="string")return EF(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return EF(t,e)}}function uze(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function hze(t){if(Array.isArray(t))return EF(t)}function EF(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function fze(t,e){if(t==null)return{};var n=mze(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function mze(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function jW(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ls(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?jW(Object(n),!0).forEach(function(r){pze(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):jW(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function pze(t,e,n){return e=gze(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function gze(t){var e=vze(t,"string");return w2(e)=="symbol"?e:e+""}function vze(t,e){if(w2(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(w2(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function j2(){return j2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},j2.apply(this,arguments)}var xze=function(e){var n=e.value,r=e.formatter,i=Qt(e.children)?n:e.children;return Wt(r)?r(i):i},yze=function(e,n){var r=ha(n-e),i=Math.min(Math.abs(n-e),360);return r*i},bze=function(e,n,r){var i=e.position,a=e.viewBox,o=e.offset,l=e.className,c=a,d=c.cx,u=c.cy,h=c.innerRadius,f=c.outerRadius,m=c.startAngle,v=c.endAngle,p=c.clockWise,g=(h+f)/2,x=yze(m,v),y=x>=0?1:-1,b,w;i==="insideStart"?(b=m+y*o,w=p):i==="insideEnd"?(b=v-y*o,w=!p):i==="end"&&(b=v+y*o,w=p),w=x<=0?w:!w;var N=jr(d,u,g,b),E=jr(d,u,g,b+(w?1:-1)*359),C="M".concat(N.x,",").concat(N.y,`
    A`).concat(g,",").concat(g,",0,1,").concat(w?0:1,`,
    `).concat(E.x,",").concat(E.y),j=Qt(e.id)?kv("recharts-radial-line-"):e.id;return ge.createElement("text",j2({},r,{dominantBaseline:"central",className:dn("recharts-radial-bar-label",l)}),ge.createElement("defs",null,ge.createElement("path",{id:j,d:C})),ge.createElement("textPath",{xlinkHref:"#".concat(j)},n))},wze=function(e){var n=e.viewBox,r=e.offset,i=e.position,a=n,o=a.cx,l=a.cy,c=a.innerRadius,d=a.outerRadius,u=a.startAngle,h=a.endAngle,f=(u+h)/2;if(i==="outside"){var m=jr(o,l,d+r,f),v=m.x,p=m.y;return{x:v,y:p,textAnchor:v>=o?"start":"end",verticalAnchor:"middle"}}if(i==="center")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"middle"};if(i==="centerTop")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"start"};if(i==="centerBottom")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"end"};var g=(c+d)/2,x=jr(o,l,g,f),y=x.x,b=x.y;return{x:y,y:b,textAnchor:"middle",verticalAnchor:"middle"}},jze=function(e){var n=e.viewBox,r=e.parentViewBox,i=e.offset,a=e.position,o=n,l=o.x,c=o.y,d=o.width,u=o.height,h=u>=0?1:-1,f=h*i,m=h>0?"end":"start",v=h>0?"start":"end",p=d>=0?1:-1,g=p*i,x=p>0?"end":"start",y=p>0?"start":"end";if(a==="top"){var b={x:l+d/2,y:c-h*i,textAnchor:"middle",verticalAnchor:m};return Ls(Ls({},b),r?{height:Math.max(c-r.y,0),width:d}:{})}if(a==="bottom"){var w={x:l+d/2,y:c+u+f,textAnchor:"middle",verticalAnchor:v};return Ls(Ls({},w),r?{height:Math.max(r.y+r.height-(c+u),0),width:d}:{})}if(a==="left"){var N={x:l-g,y:c+u/2,textAnchor:x,verticalAnchor:"middle"};return Ls(Ls({},N),r?{width:Math.max(N.x-r.x,0),height:u}:{})}if(a==="right"){var E={x:l+d+g,y:c+u/2,textAnchor:y,verticalAnchor:"middle"};return Ls(Ls({},E),r?{width:Math.max(r.x+r.width-E.x,0),height:u}:{})}var C=r?{width:d,height:u}:{};return a==="insideLeft"?Ls({x:l+g,y:c+u/2,textAnchor:y,verticalAnchor:"middle"},C):a==="insideRight"?Ls({x:l+d-g,y:c+u/2,textAnchor:x,verticalAnchor:"middle"},C):a==="insideTop"?Ls({x:l+d/2,y:c+f,textAnchor:"middle",verticalAnchor:v},C):a==="insideBottom"?Ls({x:l+d/2,y:c+u-f,textAnchor:"middle",verticalAnchor:m},C):a==="insideTopLeft"?Ls({x:l+g,y:c+f,textAnchor:y,verticalAnchor:v},C):a==="insideTopRight"?Ls({x:l+d-g,y:c+f,textAnchor:x,verticalAnchor:v},C):a==="insideBottomLeft"?Ls({x:l+g,y:c+u-f,textAnchor:y,verticalAnchor:m},C):a==="insideBottomRight"?Ls({x:l+d-g,y:c+u-f,textAnchor:x,verticalAnchor:m},C):e1(a)&&(ct(a.x)||yp(a.x))&&(ct(a.y)||yp(a.y))?Ls({x:l+fa(a.x,d),y:c+fa(a.y,u),textAnchor:"end",verticalAnchor:"end"},C):Ls({x:l+d/2,y:c+u/2,textAnchor:"middle",verticalAnchor:"middle"},C)},Nze=function(e){return"cx"in e&&ct(e.cx)};function si(t){var e=t.offset,n=e===void 0?5:e,r=fze(t,oze),i=Ls({offset:n},r),a=i.viewBox,o=i.position,l=i.value,c=i.children,d=i.content,u=i.className,h=u===void 0?"":u,f=i.textBreakAll;if(!a||Qt(l)&&Qt(c)&&!A.isValidElement(d)&&!Wt(d))return null;if(A.isValidElement(d))return A.cloneElement(d,i);var m;if(Wt(d)){if(m=A.createElement(d,i),A.isValidElement(m))return m}else m=xze(i);var v=Nze(a),p=_t(i,!0);if(v&&(o==="insideStart"||o==="insideEnd"||o==="end"))return bze(i,m,p);var g=v?wze(i):jze(i);return ge.createElement(gv,j2({className:dn("recharts-label",h)},p,g,{breakAll:f}),m)}si.displayName="Label";var Xae=function(e){var n=e.cx,r=e.cy,i=e.angle,a=e.startAngle,o=e.endAngle,l=e.r,c=e.radius,d=e.innerRadius,u=e.outerRadius,h=e.x,f=e.y,m=e.top,v=e.left,p=e.width,g=e.height,x=e.clockWise,y=e.labelViewBox;if(y)return y;if(ct(p)&&ct(g)){if(ct(h)&&ct(f))return{x:h,y:f,width:p,height:g};if(ct(m)&&ct(v))return{x:m,y:v,width:p,height:g}}return ct(h)&&ct(f)?{x:h,y:f,width:0,height:0}:ct(n)&&ct(r)?{cx:n,cy:r,startAngle:a||i||0,endAngle:o||i||0,innerRadius:d||0,outerRadius:u||c||l||0,clockWise:x}:e.viewBox?e.viewBox:{}},Sze=function(e,n){return e?e===!0?ge.createElement(si,{key:"label-implicit",viewBox:n}):Vs(e)?ge.createElement(si,{key:"label-implicit",viewBox:n,value:e}):A.isValidElement(e)?e.type===si?A.cloneElement(e,{key:"label-implicit",viewBox:n}):ge.createElement(si,{key:"label-implicit",content:e,viewBox:n}):Wt(e)?ge.createElement(si,{key:"label-implicit",content:e,viewBox:n}):e1(e)?ge.createElement(si,j2({viewBox:n},e,{key:"label-implicit"})):null:null},Aze=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&r&&!e.label)return null;var i=e.children,a=Xae(e),o=Mo(i,si).map(function(c,d){return A.cloneElement(c,{viewBox:n||a,key:"label-".concat(d)})});if(!r)return o;var l=Sze(e.label,n||a);return[l].concat(lze(o))};si.parseViewBox=Xae;si.renderCallByParent=Aze;function Cze(t){var e=t==null?0:t.length;return e?t[e-1]:void 0}var Eze=Cze;const Pze=$n(Eze);function N2(t){"@babel/helpers - typeof";return N2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},N2(t)}var Tze=["valueAccessor"],Ize=["data","dataKey","clockWise","id","textBreakAll"];function Dze(t){return Lze(t)||Oze(t)||_ze(t)||kze()}function kze(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _ze(t,e){if(t){if(typeof t=="string")return PF(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return PF(t,e)}}function Oze(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Lze(t){if(Array.isArray(t))return PF(t)}function PF(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function h4(){return h4=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},h4.apply(this,arguments)}function NW(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function SW(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?NW(Object(n),!0).forEach(function(r){Rze(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):NW(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Rze(t,e,n){return e=Mze(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Mze(t){var e=Fze(t,"string");return N2(e)=="symbol"?e:e+""}function Fze(t,e){if(N2(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(N2(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function AW(t,e){if(t==null)return{};var n=$ze(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function $ze(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var Bze=function(e){return Array.isArray(e.value)?Pze(e.value):e.value};function jd(t){var e=t.valueAccessor,n=e===void 0?Bze:e,r=AW(t,Tze),i=r.data,a=r.dataKey,o=r.clockWise,l=r.id,c=r.textBreakAll,d=AW(r,Ize);return!i||!i.length?null:ge.createElement(yn,{className:"recharts-label-list"},i.map(function(u,h){var f=Qt(a)?n(u,h):xs(u&&u.payload,a),m=Qt(l)?{}:{id:"".concat(l,"-").concat(h)};return ge.createElement(si,h4({},_t(u,!0),d,m,{parentViewBox:u.parentViewBox,value:f,textBreakAll:c,viewBox:si.parseViewBox(Qt(o)?u:SW(SW({},u),{},{clockWise:o})),key:"label-".concat(h),index:h}))}))}jd.displayName="LabelList";function zze(t,e){return t?t===!0?ge.createElement(jd,{key:"labelList-implicit",data:e}):ge.isValidElement(t)||Wt(t)?ge.createElement(jd,{key:"labelList-implicit",data:e,content:t}):e1(t)?ge.createElement(jd,h4({data:e},t,{key:"labelList-implicit"})):null:null}function Uze(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&n&&!t.label)return null;var r=t.children,i=Mo(r,jd).map(function(o,l){return A.cloneElement(o,{data:e,key:"labelList-".concat(l)})});if(!n)return i;var a=zze(t.label,e);return[a].concat(Dze(i))}jd.renderCallByParent=Uze;function S2(t){"@babel/helpers - typeof";return S2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},S2(t)}function TF(){return TF=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},TF.apply(this,arguments)}function CW(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function EW(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?CW(Object(n),!0).forEach(function(r){Vze(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):CW(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Vze(t,e,n){return e=qze(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function qze(t){var e=Hze(t,"string");return S2(e)=="symbol"?e:e+""}function Hze(t,e){if(S2(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(S2(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Wze=function(e,n){var r=ha(n-e),i=Math.min(Math.abs(n-e),359.999);return r*i},kC=function(e){var n=e.cx,r=e.cy,i=e.radius,a=e.angle,o=e.sign,l=e.isExternal,c=e.cornerRadius,d=e.cornerIsExternal,u=c*(l?1:-1)+i,h=Math.asin(c/u)/u4,f=d?a:a+o*h,m=jr(n,r,u,f),v=jr(n,r,i,f),p=d?a-o*h:a,g=jr(n,r,u*Math.cos(h*u4),p);return{center:m,circleTangency:v,lineTangency:g,theta:h}},Zae=function(e){var n=e.cx,r=e.cy,i=e.innerRadius,a=e.outerRadius,o=e.startAngle,l=e.endAngle,c=Wze(o,l),d=o+c,u=jr(n,r,a,o),h=jr(n,r,a,d),f="M ".concat(u.x,",").concat(u.y,`
    A `).concat(a,",").concat(a,`,0,
    `).concat(+(Math.abs(c)>180),",").concat(+(o>d),`,
    `).concat(h.x,",").concat(h.y,`
  `);if(i>0){var m=jr(n,r,i,o),v=jr(n,r,i,d);f+="L ".concat(v.x,",").concat(v.y,`
            A `).concat(i,",").concat(i,`,0,
            `).concat(+(Math.abs(c)>180),",").concat(+(o<=d),`,
            `).concat(m.x,",").concat(m.y," Z")}else f+="L ".concat(n,",").concat(r," Z");return f},Gze=function(e){var n=e.cx,r=e.cy,i=e.innerRadius,a=e.outerRadius,o=e.cornerRadius,l=e.forceCornerRadius,c=e.cornerIsExternal,d=e.startAngle,u=e.endAngle,h=ha(u-d),f=kC({cx:n,cy:r,radius:a,angle:d,sign:h,cornerRadius:o,cornerIsExternal:c}),m=f.circleTangency,v=f.lineTangency,p=f.theta,g=kC({cx:n,cy:r,radius:a,angle:u,sign:-h,cornerRadius:o,cornerIsExternal:c}),x=g.circleTangency,y=g.lineTangency,b=g.theta,w=c?Math.abs(d-u):Math.abs(d-u)-p-b;if(w<0)return l?"M ".concat(v.x,",").concat(v.y,`
        a`).concat(o,",").concat(o,",0,0,1,").concat(o*2,`,0
        a`).concat(o,",").concat(o,",0,0,1,").concat(-o*2,`,0
      `):Zae({cx:n,cy:r,innerRadius:i,outerRadius:a,startAngle:d,endAngle:u});var N="M ".concat(v.x,",").concat(v.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(h<0),",").concat(m.x,",").concat(m.y,`
    A`).concat(a,",").concat(a,",0,").concat(+(w>180),",").concat(+(h<0),",").concat(x.x,",").concat(x.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(h<0),",").concat(y.x,",").concat(y.y,`
  `);if(i>0){var E=kC({cx:n,cy:r,radius:i,angle:d,sign:h,isExternal:!0,cornerRadius:o,cornerIsExternal:c}),C=E.circleTangency,j=E.lineTangency,I=E.theta,k=kC({cx:n,cy:r,radius:i,angle:u,sign:-h,isExternal:!0,cornerRadius:o,cornerIsExternal:c}),D=k.circleTangency,P=k.lineTangency,R=k.theta,_=c?Math.abs(d-u):Math.abs(d-u)-I-R;if(_<0&&o===0)return"".concat(N,"L").concat(n,",").concat(r,"Z");N+="L".concat(P.x,",").concat(P.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(h<0),",").concat(D.x,",").concat(D.y,`
      A`).concat(i,",").concat(i,",0,").concat(+(_>180),",").concat(+(h>0),",").concat(C.x,",").concat(C.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(h<0),",").concat(j.x,",").concat(j.y,"Z")}else N+="L".concat(n,",").concat(r,"Z");return N},Kze={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},Qae=function(e){var n=EW(EW({},Kze),e),r=n.cx,i=n.cy,a=n.innerRadius,o=n.outerRadius,l=n.cornerRadius,c=n.forceCornerRadius,d=n.cornerIsExternal,u=n.startAngle,h=n.endAngle,f=n.className;if(o<a||u===h)return null;var m=dn("recharts-sector",f),v=o-a,p=fa(l,v,0,!0),g;return p>0&&Math.abs(u-h)<360?g=Gze({cx:r,cy:i,innerRadius:a,outerRadius:o,cornerRadius:Math.min(p,v/2),forceCornerRadius:c,cornerIsExternal:d,startAngle:u,endAngle:h}):g=Zae({cx:r,cy:i,innerRadius:a,outerRadius:o,startAngle:u,endAngle:h}),ge.createElement("path",TF({},_t(n,!0),{className:m,d:g,role:"img"}))};function A2(t){"@babel/helpers - typeof";return A2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},A2(t)}function IF(){return IF=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},IF.apply(this,arguments)}function PW(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function TW(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?PW(Object(n),!0).forEach(function(r){Yze(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):PW(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Yze(t,e,n){return e=Xze(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Xze(t){var e=Zze(t,"string");return A2(e)=="symbol"?e:e+""}function Zze(t,e){if(A2(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(A2(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var IW={curveBasisClosed:J3e,curveBasisOpen:eDe,curveBasis:Q3e,curveBumpX:F3e,curveBumpY:$3e,curveLinearClosed:tDe,curveLinear:iD,curveMonotoneX:nDe,curveMonotoneY:rDe,curveNatural:sDe,curveStep:iDe,curveStepAfter:oDe,curveStepBefore:aDe},_C=function(e){return e.x===+e.x&&e.y===+e.y},mw=function(e){return e.x},pw=function(e){return e.y},Qze=function(e,n){if(Wt(e))return e;var r="curve".concat(rD(e));return(r==="curveMonotone"||r==="curveBump")&&n?IW["".concat(r).concat(n==="vertical"?"Y":"X")]:IW[r]||iD},Jze=function(e){var n=e.type,r=n===void 0?"linear":n,i=e.points,a=i===void 0?[]:i,o=e.baseLine,l=e.layout,c=e.connectNulls,d=c===void 0?!1:c,u=Qze(r,l),h=d?a.filter(function(p){return _C(p)}):a,f;if(Array.isArray(o)){var m=d?o.filter(function(p){return _C(p)}):o,v=h.map(function(p,g){return TW(TW({},p),{},{base:m[g]})});return l==="vertical"?f=jC().y(pw).x1(mw).x0(function(p){return p.base.x}):f=jC().x(mw).y1(pw).y0(function(p){return p.base.y}),f.defined(_C).curve(u),f(v)}return l==="vertical"&&ct(o)?f=jC().y(pw).x1(mw).x0(o):ct(o)?f=jC().x(mw).y1(pw).y0(o):f=Wse().x(mw).y(pw),f.defined(_C).curve(u),f(h)},tv=function(e){var n=e.className,r=e.points,i=e.path,a=e.pathRef;if((!r||!r.length)&&!i)return null;var o=r&&r.length?Jze(e):i;return A.createElement("path",IF({},_t(e,!1),RP(e),{className:dn("recharts-curve",n),d:o,ref:a}))},eUe=Object.getOwnPropertyNames,tUe=Object.getOwnPropertySymbols,nUe=Object.prototype.hasOwnProperty;function DW(t,e){return function(r,i,a){return t(r,i,a)&&e(r,i,a)}}function OC(t){return function(n,r,i){if(!n||!r||typeof n!="object"||typeof r!="object")return t(n,r,i);var a=i.cache,o=a.get(n),l=a.get(r);if(o&&l)return o===r&&l===n;a.set(n,r),a.set(r,n);var c=t(n,r,i);return a.delete(n),a.delete(r),c}}function kW(t){return eUe(t).concat(tUe(t))}var rUe=Object.hasOwn||function(t,e){return nUe.call(t,e)};function Lv(t,e){return t===e||!t&&!e&&t!==t&&e!==e}var sUe="__v",iUe="__o",aUe="_owner",_W=Object.getOwnPropertyDescriptor,OW=Object.keys;function oUe(t,e,n){var r=t.length;if(e.length!==r)return!1;for(;r-- >0;)if(!n.equals(t[r],e[r],r,r,t,e,n))return!1;return!0}function lUe(t,e){return Lv(t.getTime(),e.getTime())}function cUe(t,e){return t.name===e.name&&t.message===e.message&&t.cause===e.cause&&t.stack===e.stack}function dUe(t,e){return t===e}function LW(t,e,n){var r=t.size;if(r!==e.size)return!1;if(!r)return!0;for(var i=new Array(r),a=t.entries(),o,l,c=0;(o=a.next())&&!o.done;){for(var d=e.entries(),u=!1,h=0;(l=d.next())&&!l.done;){if(i[h]){h++;continue}var f=o.value,m=l.value;if(n.equals(f[0],m[0],c,h,t,e,n)&&n.equals(f[1],m[1],f[0],m[0],t,e,n)){u=i[h]=!0;break}h++}if(!u)return!1;c++}return!0}var uUe=Lv;function hUe(t,e,n){var r=OW(t),i=r.length;if(OW(e).length!==i)return!1;for(;i-- >0;)if(!Jae(t,e,n,r[i]))return!1;return!0}function gw(t,e,n){var r=kW(t),i=r.length;if(kW(e).length!==i)return!1;for(var a,o,l;i-- >0;)if(a=r[i],!Jae(t,e,n,a)||(o=_W(t,a),l=_W(e,a),(o||l)&&(!o||!l||o.configurable!==l.configurable||o.enumerable!==l.enumerable||o.writable!==l.writable)))return!1;return!0}function fUe(t,e){return Lv(t.valueOf(),e.valueOf())}function mUe(t,e){return t.source===e.source&&t.flags===e.flags}function RW(t,e,n){var r=t.size;if(r!==e.size)return!1;if(!r)return!0;for(var i=new Array(r),a=t.values(),o,l;(o=a.next())&&!o.done;){for(var c=e.values(),d=!1,u=0;(l=c.next())&&!l.done;){if(!i[u]&&n.equals(o.value,l.value,o.value,l.value,t,e,n)){d=i[u]=!0;break}u++}if(!d)return!1}return!0}function pUe(t,e){var n=t.length;if(e.length!==n)return!1;for(;n-- >0;)if(t[n]!==e[n])return!1;return!0}function gUe(t,e){return t.hostname===e.hostname&&t.pathname===e.pathname&&t.protocol===e.protocol&&t.port===e.port&&t.hash===e.hash&&t.username===e.username&&t.password===e.password}function Jae(t,e,n,r){return(r===aUe||r===iUe||r===sUe)&&(t.$$typeof||e.$$typeof)?!0:rUe(e,r)&&n.equals(t[r],e[r],r,r,t,e,n)}var vUe="[object Arguments]",xUe="[object Boolean]",yUe="[object Date]",bUe="[object Error]",wUe="[object Map]",jUe="[object Number]",NUe="[object Object]",SUe="[object RegExp]",AUe="[object Set]",CUe="[object String]",EUe="[object URL]",PUe=Array.isArray,MW=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,FW=Object.assign,TUe=Object.prototype.toString.call.bind(Object.prototype.toString);function IUe(t){var e=t.areArraysEqual,n=t.areDatesEqual,r=t.areErrorsEqual,i=t.areFunctionsEqual,a=t.areMapsEqual,o=t.areNumbersEqual,l=t.areObjectsEqual,c=t.arePrimitiveWrappersEqual,d=t.areRegExpsEqual,u=t.areSetsEqual,h=t.areTypedArraysEqual,f=t.areUrlsEqual;return function(v,p,g){if(v===p)return!0;if(v==null||p==null)return!1;var x=typeof v;if(x!==typeof p)return!1;if(x!=="object")return x==="number"?o(v,p,g):x==="function"?i(v,p,g):!1;var y=v.constructor;if(y!==p.constructor)return!1;if(y===Object)return l(v,p,g);if(PUe(v))return e(v,p,g);if(MW!=null&&MW(v))return h(v,p,g);if(y===Date)return n(v,p,g);if(y===RegExp)return d(v,p,g);if(y===Map)return a(v,p,g);if(y===Set)return u(v,p,g);var b=TUe(v);return b===yUe?n(v,p,g):b===SUe?d(v,p,g):b===wUe?a(v,p,g):b===AUe?u(v,p,g):b===NUe?typeof v.then!="function"&&typeof p.then!="function"&&l(v,p,g):b===EUe?f(v,p,g):b===bUe?r(v,p,g):b===vUe?l(v,p,g):b===xUe||b===jUe||b===CUe?c(v,p,g):!1}}function DUe(t){var e=t.circular,n=t.createCustomConfig,r=t.strict,i={areArraysEqual:r?gw:oUe,areDatesEqual:lUe,areErrorsEqual:cUe,areFunctionsEqual:dUe,areMapsEqual:r?DW(LW,gw):LW,areNumbersEqual:uUe,areObjectsEqual:r?gw:hUe,arePrimitiveWrappersEqual:fUe,areRegExpsEqual:mUe,areSetsEqual:r?DW(RW,gw):RW,areTypedArraysEqual:r?gw:pUe,areUrlsEqual:gUe};if(n&&(i=FW({},i,n(i))),e){var a=OC(i.areArraysEqual),o=OC(i.areMapsEqual),l=OC(i.areObjectsEqual),c=OC(i.areSetsEqual);i=FW({},i,{areArraysEqual:a,areMapsEqual:o,areObjectsEqual:l,areSetsEqual:c})}return i}function kUe(t){return function(e,n,r,i,a,o,l){return t(e,n,l)}}function _Ue(t){var e=t.circular,n=t.comparator,r=t.createState,i=t.equals,a=t.strict;if(r)return function(c,d){var u=r(),h=u.cache,f=h===void 0?e?new WeakMap:void 0:h,m=u.meta;return n(c,d,{cache:f,equals:i,meta:m,strict:a})};if(e)return function(c,d){return n(c,d,{cache:new WeakMap,equals:i,meta:void 0,strict:a})};var o={cache:void 0,equals:i,meta:void 0,strict:a};return function(c,d){return n(c,d,o)}}var OUe=Lm();Lm({strict:!0});Lm({circular:!0});Lm({circular:!0,strict:!0});Lm({createInternalComparator:function(){return Lv}});Lm({strict:!0,createInternalComparator:function(){return Lv}});Lm({circular:!0,createInternalComparator:function(){return Lv}});Lm({circular:!0,createInternalComparator:function(){return Lv},strict:!0});function Lm(t){t===void 0&&(t={});var e=t.circular,n=e===void 0?!1:e,r=t.createInternalComparator,i=t.createState,a=t.strict,o=a===void 0?!1:a,l=DUe(t),c=IUe(l),d=r?r(c):kUe(c);return _Ue({circular:n,comparator:c,createState:i,equals:d,strict:o})}function LUe(t){typeof requestAnimationFrame<"u"&&requestAnimationFrame(t)}function $W(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=-1,r=function i(a){n<0&&(n=a),a-n>e?(t(a),n=-1):LUe(i)};requestAnimationFrame(r)}function DF(t){"@babel/helpers - typeof";return DF=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},DF(t)}function RUe(t){return BUe(t)||$Ue(t)||FUe(t)||MUe()}function MUe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function FUe(t,e){if(t){if(typeof t=="string")return BW(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return BW(t,e)}}function BW(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function $Ue(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function BUe(t){if(Array.isArray(t))return t}function zUe(){var t={},e=function(){return null},n=!1,r=function i(a){if(!n){if(Array.isArray(a)){if(!a.length)return;var o=a,l=RUe(o),c=l[0],d=l.slice(1);if(typeof c=="number"){$W(i.bind(null,d),c);return}i(c),$W(i.bind(null,d));return}DF(a)==="object"&&(t=a,e(t)),typeof a=="function"&&a()}};return{stop:function(){n=!0},start:function(a){n=!1,r(a)},subscribe:function(a){return e=a,function(){e=function(){return null}}}}}function C2(t){"@babel/helpers - typeof";return C2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},C2(t)}function zW(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function UW(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?zW(Object(n),!0).forEach(function(r){eoe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):zW(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function eoe(t,e,n){return e=UUe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function UUe(t){var e=VUe(t,"string");return C2(e)==="symbol"?e:String(e)}function VUe(t,e){if(C2(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(C2(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var qUe=function(e,n){return[Object.keys(e),Object.keys(n)].reduce(function(r,i){return r.filter(function(a){return i.includes(a)})})},HUe=function(e){return e},WUe=function(e){return e.replace(/([A-Z])/g,function(n){return"-".concat(n.toLowerCase())})},mj=function(e,n){return Object.keys(n).reduce(function(r,i){return UW(UW({},r),{},eoe({},i,e(i,n[i])))},{})},VW=function(e,n,r){return e.map(function(i){return"".concat(WUe(i)," ").concat(n,"ms ").concat(r)}).join(",")};function GUe(t,e){return XUe(t)||YUe(t,e)||toe(t,e)||KUe()}function KUe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function YUe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,o,l=[],c=!0,d=!1;try{if(a=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==e);c=!0);}catch(u){d=!0,i=u}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw i}}return l}}function XUe(t){if(Array.isArray(t))return t}function ZUe(t){return eVe(t)||JUe(t)||toe(t)||QUe()}function QUe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function toe(t,e){if(t){if(typeof t=="string")return kF(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return kF(t,e)}}function JUe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function eVe(t){if(Array.isArray(t))return kF(t)}function kF(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var f4=1e-4,noe=function(e,n){return[0,3*e,3*n-6*e,3*e-3*n+1]},roe=function(e,n){return e.map(function(r,i){return r*Math.pow(n,i)}).reduce(function(r,i){return r+i})},qW=function(e,n){return function(r){var i=noe(e,n);return roe(i,r)}},tVe=function(e,n){return function(r){var i=noe(e,n),a=[].concat(ZUe(i.map(function(o,l){return o*l}).slice(1)),[0]);return roe(a,r)}},HW=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=n[0],a=n[1],o=n[2],l=n[3];if(n.length===1)switch(n[0]){case"linear":i=0,a=0,o=1,l=1;break;case"ease":i=.25,a=.1,o=.25,l=1;break;case"ease-in":i=.42,a=0,o=1,l=1;break;case"ease-out":i=.42,a=0,o=.58,l=1;break;case"ease-in-out":i=0,a=0,o=.58,l=1;break;default:{var c=n[0].split("(");if(c[0]==="cubic-bezier"&&c[1].split(")")[0].split(",").length===4){var d=c[1].split(")")[0].split(",").map(function(g){return parseFloat(g)}),u=GUe(d,4);i=u[0],a=u[1],o=u[2],l=u[3]}}}var h=qW(i,o),f=qW(a,l),m=tVe(i,o),v=function(x){return x>1?1:x<0?0:x},p=function(x){for(var y=x>1?1:x,b=y,w=0;w<8;++w){var N=h(b)-y,E=m(b);if(Math.abs(N-y)<f4||E<f4)return f(b);b=v(b-N/E)}return f(b)};return p.isStepper=!1,p},nVe=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=e.stiff,r=n===void 0?100:n,i=e.damping,a=i===void 0?8:i,o=e.dt,l=o===void 0?17:o,c=function(u,h,f){var m=-(u-h)*r,v=f*a,p=f+(m-v)*l/1e3,g=f*l/1e3+u;return Math.abs(g-h)<f4&&Math.abs(p)<f4?[h,0]:[g,p]};return c.isStepper=!0,c.dt=l,c},rVe=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=n[0];if(typeof i=="string")switch(i){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return HW(i);case"spring":return nVe();default:if(i.split("(")[0]==="cubic-bezier")return HW(i)}return typeof i=="function"?i:null};function E2(t){"@babel/helpers - typeof";return E2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},E2(t)}function WW(t){return aVe(t)||iVe(t)||soe(t)||sVe()}function sVe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function iVe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function aVe(t){if(Array.isArray(t))return OF(t)}function GW(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ni(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?GW(Object(n),!0).forEach(function(r){_F(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):GW(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function _F(t,e,n){return e=oVe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function oVe(t){var e=lVe(t,"string");return E2(e)==="symbol"?e:String(e)}function lVe(t,e){if(E2(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(E2(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function cVe(t,e){return hVe(t)||uVe(t,e)||soe(t,e)||dVe()}function dVe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function soe(t,e){if(t){if(typeof t=="string")return OF(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return OF(t,e)}}function OF(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function uVe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,o,l=[],c=!0,d=!1;try{if(a=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==e);c=!0);}catch(u){d=!0,i=u}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw i}}return l}}function hVe(t){if(Array.isArray(t))return t}var m4=function(e,n,r){return e+(n-e)*r},LF=function(e){var n=e.from,r=e.to;return n!==r},fVe=function t(e,n,r){var i=mj(function(a,o){if(LF(o)){var l=e(o.from,o.to,o.velocity),c=cVe(l,2),d=c[0],u=c[1];return Ni(Ni({},o),{},{from:d,velocity:u})}return o},n);return r<1?mj(function(a,o){return LF(o)?Ni(Ni({},o),{},{velocity:m4(o.velocity,i[a].velocity,r),from:m4(o.from,i[a].from,r)}):o},n):t(e,i,r-1)};const mVe=function(t,e,n,r,i){var a=qUe(t,e),o=a.reduce(function(g,x){return Ni(Ni({},g),{},_F({},x,[t[x],e[x]]))},{}),l=a.reduce(function(g,x){return Ni(Ni({},g),{},_F({},x,{from:t[x],velocity:0,to:e[x]}))},{}),c=-1,d,u,h=function(){return null},f=function(){return mj(function(x,y){return y.from},l)},m=function(){return!Object.values(l).filter(LF).length},v=function(x){d||(d=x);var y=x-d,b=y/n.dt;l=fVe(n,l,b),i(Ni(Ni(Ni({},t),e),f())),d=x,m()||(c=requestAnimationFrame(h))},p=function(x){u||(u=x);var y=(x-u)/r,b=mj(function(N,E){return m4.apply(void 0,WW(E).concat([n(y)]))},o);if(i(Ni(Ni(Ni({},t),e),b)),y<1)c=requestAnimationFrame(h);else{var w=mj(function(N,E){return m4.apply(void 0,WW(E).concat([n(1)]))},o);i(Ni(Ni(Ni({},t),e),w))}};return h=n.isStepper?v:p,function(){return requestAnimationFrame(h),function(){cancelAnimationFrame(c)}}};function wb(t){"@babel/helpers - typeof";return wb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wb(t)}var pVe=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function gVe(t,e){if(t==null)return{};var n=vVe(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function vVe(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,a;for(a=0;a<r.length;a++)i=r[a],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function SO(t){return wVe(t)||bVe(t)||yVe(t)||xVe()}function xVe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function yVe(t,e){if(t){if(typeof t=="string")return RF(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return RF(t,e)}}function bVe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function wVe(t){if(Array.isArray(t))return RF(t)}function RF(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function KW(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Bl(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?KW(Object(n),!0).forEach(function(r){zw(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):KW(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function zw(t,e,n){return e=ioe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function jVe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function YW(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,ioe(r.key),r)}}function NVe(t,e,n){return e&&YW(t.prototype,e),n&&YW(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function ioe(t){var e=SVe(t,"string");return wb(e)==="symbol"?e:String(e)}function SVe(t,e){if(wb(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(wb(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function AVe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&MF(t,e)}function MF(t,e){return MF=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},MF(t,e)}function CVe(t){var e=EVe();return function(){var r=p4(t),i;if(e){var a=p4(this).constructor;i=Reflect.construct(r,arguments,a)}else i=r.apply(this,arguments);return FF(this,i)}}function FF(t,e){if(e&&(wb(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return $F(t)}function $F(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function EVe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function p4(t){return p4=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},p4(t)}var wD=function(t){AVe(n,t);var e=CVe(n);function n(r,i){var a;jVe(this,n),a=e.call(this,r,i);var o=a.props,l=o.isActive,c=o.attributeName,d=o.from,u=o.to,h=o.steps,f=o.children,m=o.duration;if(a.handleStyleChange=a.handleStyleChange.bind($F(a)),a.changeStyle=a.changeStyle.bind($F(a)),!l||m<=0)return a.state={style:{}},typeof f=="function"&&(a.state={style:u}),FF(a);if(h&&h.length)a.state={style:h[0].style};else if(d){if(typeof f=="function")return a.state={style:d},FF(a);a.state={style:c?zw({},c,d):d}}else a.state={style:{}};return a}return NVe(n,[{key:"componentDidMount",value:function(){var i=this.props,a=i.isActive,o=i.canBegin;this.mounted=!0,!(!a||!o)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(i){var a=this.props,o=a.isActive,l=a.canBegin,c=a.attributeName,d=a.shouldReAnimate,u=a.to,h=a.from,f=this.state.style;if(l){if(!o){var m={style:c?zw({},c,u):u};this.state&&f&&(c&&f[c]!==u||!c&&f!==u)&&this.setState(m);return}if(!(OUe(i.to,u)&&i.canBegin&&i.isActive)){var v=!i.canBegin||!i.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var p=v||d?h:i.to;if(this.state&&f){var g={style:c?zw({},c,p):p};(c&&f[c]!==p||!c&&f!==p)&&this.setState(g)}this.runAnimation(Bl(Bl({},this.props),{},{from:p,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var i=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),i&&i()}},{key:"handleStyleChange",value:function(i){this.changeStyle(i)}},{key:"changeStyle",value:function(i){this.mounted&&this.setState({style:i})}},{key:"runJSAnimation",value:function(i){var a=this,o=i.from,l=i.to,c=i.duration,d=i.easing,u=i.begin,h=i.onAnimationEnd,f=i.onAnimationStart,m=mVe(o,l,rVe(d),c,this.changeStyle),v=function(){a.stopJSAnimation=m()};this.manager.start([f,u,v,c,h])}},{key:"runStepAnimation",value:function(i){var a=this,o=i.steps,l=i.begin,c=i.onAnimationStart,d=o[0],u=d.style,h=d.duration,f=h===void 0?0:h,m=function(p,g,x){if(x===0)return p;var y=g.duration,b=g.easing,w=b===void 0?"ease":b,N=g.style,E=g.properties,C=g.onAnimationEnd,j=x>0?o[x-1]:g,I=E||Object.keys(N);if(typeof w=="function"||w==="spring")return[].concat(SO(p),[a.runJSAnimation.bind(a,{from:j.style,to:N,duration:y,easing:w}),y]);var k=VW(I,y,w),D=Bl(Bl(Bl({},j.style),N),{},{transition:k});return[].concat(SO(p),[D,y,C]).filter(HUe)};return this.manager.start([c].concat(SO(o.reduce(m,[u,Math.max(f,l)])),[i.onAnimationEnd]))}},{key:"runAnimation",value:function(i){this.manager||(this.manager=zUe());var a=i.begin,o=i.duration,l=i.attributeName,c=i.to,d=i.easing,u=i.onAnimationStart,h=i.onAnimationEnd,f=i.steps,m=i.children,v=this.manager;if(this.unSubscribe=v.subscribe(this.handleStyleChange),typeof d=="function"||typeof m=="function"||d==="spring"){this.runJSAnimation(i);return}if(f.length>1){this.runStepAnimation(i);return}var p=l?zw({},l,c):c,g=VW(Object.keys(p),o,d);v.start([u,a,Bl(Bl({},p),{},{transition:g}),o,h])}},{key:"render",value:function(){var i=this.props,a=i.children;i.begin;var o=i.duration;i.attributeName,i.easing;var l=i.isActive;i.steps,i.from,i.to,i.canBegin,i.onAnimationEnd,i.shouldReAnimate,i.onAnimationReStart;var c=gVe(i,pVe),d=A.Children.count(a),u=this.state.style;if(typeof a=="function")return a(u);if(!l||d===0||o<=0)return a;var h=function(m){var v=m.props,p=v.style,g=p===void 0?{}:p,x=v.className,y=A.cloneElement(m,Bl(Bl({},c),{},{style:Bl(Bl({},g),u),className:x}));return y};return d===1?h(A.Children.only(a)):ge.createElement("div",null,A.Children.map(a,function(f){return h(f)}))}}]),n}(A.PureComponent);wD.displayName="Animate";wD.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};wD.propTypes={from:Rt.oneOfType([Rt.object,Rt.string]),to:Rt.oneOfType([Rt.object,Rt.string]),attributeName:Rt.string,duration:Rt.number,begin:Rt.number,easing:Rt.oneOfType([Rt.string,Rt.func]),steps:Rt.arrayOf(Rt.shape({duration:Rt.number.isRequired,style:Rt.object.isRequired,easing:Rt.oneOfType([Rt.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),Rt.func]),properties:Rt.arrayOf("string"),onAnimationEnd:Rt.func})),children:Rt.oneOfType([Rt.node,Rt.func]),isActive:Rt.bool,canBegin:Rt.bool,onAnimationEnd:Rt.func,shouldReAnimate:Rt.bool,onAnimationStart:Rt.func,onAnimationReStart:Rt.func};const jm=wD;function P2(t){"@babel/helpers - typeof";return P2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},P2(t)}function g4(){return g4=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},g4.apply(this,arguments)}function PVe(t,e){return kVe(t)||DVe(t,e)||IVe(t,e)||TVe()}function TVe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function IVe(t,e){if(t){if(typeof t=="string")return XW(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return XW(t,e)}}function XW(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function DVe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,o,l=[],c=!0,d=!1;try{if(a=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==e);c=!0);}catch(u){d=!0,i=u}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw i}}return l}}function kVe(t){if(Array.isArray(t))return t}function ZW(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function QW(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ZW(Object(n),!0).forEach(function(r){_Ve(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ZW(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function _Ve(t,e,n){return e=OVe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function OVe(t){var e=LVe(t,"string");return P2(e)=="symbol"?e:e+""}function LVe(t,e){if(P2(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(P2(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var JW=function(e,n,r,i,a){var o=Math.min(Math.abs(r)/2,Math.abs(i)/2),l=i>=0?1:-1,c=r>=0?1:-1,d=i>=0&&r>=0||i<0&&r<0?1:0,u;if(o>0&&a instanceof Array){for(var h=[0,0,0,0],f=0,m=4;f<m;f++)h[f]=a[f]>o?o:a[f];u="M".concat(e,",").concat(n+l*h[0]),h[0]>0&&(u+="A ".concat(h[0],",").concat(h[0],",0,0,").concat(d,",").concat(e+c*h[0],",").concat(n)),u+="L ".concat(e+r-c*h[1],",").concat(n),h[1]>0&&(u+="A ".concat(h[1],",").concat(h[1],",0,0,").concat(d,`,
        `).concat(e+r,",").concat(n+l*h[1])),u+="L ".concat(e+r,",").concat(n+i-l*h[2]),h[2]>0&&(u+="A ".concat(h[2],",").concat(h[2],",0,0,").concat(d,`,
        `).concat(e+r-c*h[2],",").concat(n+i)),u+="L ".concat(e+c*h[3],",").concat(n+i),h[3]>0&&(u+="A ".concat(h[3],",").concat(h[3],",0,0,").concat(d,`,
        `).concat(e,",").concat(n+i-l*h[3])),u+="Z"}else if(o>0&&a===+a&&a>0){var v=Math.min(o,a);u="M ".concat(e,",").concat(n+l*v,`
            A `).concat(v,",").concat(v,",0,0,").concat(d,",").concat(e+c*v,",").concat(n,`
            L `).concat(e+r-c*v,",").concat(n,`
            A `).concat(v,",").concat(v,",0,0,").concat(d,",").concat(e+r,",").concat(n+l*v,`
            L `).concat(e+r,",").concat(n+i-l*v,`
            A `).concat(v,",").concat(v,",0,0,").concat(d,",").concat(e+r-c*v,",").concat(n+i,`
            L `).concat(e+c*v,",").concat(n+i,`
            A `).concat(v,",").concat(v,",0,0,").concat(d,",").concat(e,",").concat(n+i-l*v," Z")}else u="M ".concat(e,",").concat(n," h ").concat(r," v ").concat(i," h ").concat(-r," Z");return u},RVe=function(e,n){if(!e||!n)return!1;var r=e.x,i=e.y,a=n.x,o=n.y,l=n.width,c=n.height;if(Math.abs(l)>0&&Math.abs(c)>0){var d=Math.min(a,a+l),u=Math.max(a,a+l),h=Math.min(o,o+c),f=Math.max(o,o+c);return r>=d&&r<=u&&i>=h&&i<=f}return!1},MVe={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},L7=function(e){var n=QW(QW({},MVe),e),r=A.useRef(),i=A.useState(-1),a=PVe(i,2),o=a[0],l=a[1];A.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var w=r.current.getTotalLength();w&&l(w)}catch{}},[]);var c=n.x,d=n.y,u=n.width,h=n.height,f=n.radius,m=n.className,v=n.animationEasing,p=n.animationDuration,g=n.animationBegin,x=n.isAnimationActive,y=n.isUpdateAnimationActive;if(c!==+c||d!==+d||u!==+u||h!==+h||u===0||h===0)return null;var b=dn("recharts-rectangle",m);return y?ge.createElement(jm,{canBegin:o>0,from:{width:u,height:h,x:c,y:d},to:{width:u,height:h,x:c,y:d},duration:p,animationEasing:v,isActive:y},function(w){var N=w.width,E=w.height,C=w.x,j=w.y;return ge.createElement(jm,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:g,duration:p,isActive:x,easing:v},ge.createElement("path",g4({},_t(n,!0),{className:b,d:JW(C,j,N,E,f),ref:r})))}):ge.createElement("path",g4({},_t(n,!0),{className:b,d:JW(c,d,u,h,f)}))},FVe=["points","className","baseLinePoints","connectNulls"];function Qx(){return Qx=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Qx.apply(this,arguments)}function $Ve(t,e){if(t==null)return{};var n=BVe(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function BVe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function eG(t){return qVe(t)||VVe(t)||UVe(t)||zVe()}function zVe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function UVe(t,e){if(t){if(typeof t=="string")return BF(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return BF(t,e)}}function VVe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function qVe(t){if(Array.isArray(t))return BF(t)}function BF(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var tG=function(e){return e&&e.x===+e.x&&e.y===+e.y},HVe=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],n=[[]];return e.forEach(function(r){tG(r)?n[n.length-1].push(r):n[n.length-1].length>0&&n.push([])}),tG(e[0])&&n[n.length-1].push(e[0]),n[n.length-1].length<=0&&(n=n.slice(0,-1)),n},pj=function(e,n){var r=HVe(e);n&&(r=[r.reduce(function(a,o){return[].concat(eG(a),eG(o))},[])]);var i=r.map(function(a){return a.reduce(function(o,l,c){return"".concat(o).concat(c===0?"M":"L").concat(l.x,",").concat(l.y)},"")}).join("");return r.length===1?"".concat(i,"Z"):i},WVe=function(e,n,r){var i=pj(e,r);return"".concat(i.slice(-1)==="Z"?i.slice(0,-1):i,"L").concat(pj(n.reverse(),r).slice(1))},GVe=function(e){var n=e.points,r=e.className,i=e.baseLinePoints,a=e.connectNulls,o=$Ve(e,FVe);if(!n||!n.length)return null;var l=dn("recharts-polygon",r);if(i&&i.length){var c=o.stroke&&o.stroke!=="none",d=WVe(n,i,a);return ge.createElement("g",{className:l},ge.createElement("path",Qx({},_t(o,!0),{fill:d.slice(-1)==="Z"?o.fill:"none",stroke:"none",d})),c?ge.createElement("path",Qx({},_t(o,!0),{fill:"none",d:pj(n,a)})):null,c?ge.createElement("path",Qx({},_t(o,!0),{fill:"none",d:pj(i,a)})):null)}var u=pj(n,a);return ge.createElement("path",Qx({},_t(o,!0),{fill:u.slice(-1)==="Z"?o.fill:"none",className:l,d:u}))};function zF(){return zF=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},zF.apply(this,arguments)}var $A=function(e){var n=e.cx,r=e.cy,i=e.r,a=e.className,o=dn("recharts-dot",a);return n===+n&&r===+r&&i===+i?A.createElement("circle",zF({},_t(e,!1),RP(e),{className:o,cx:n,cy:r,r:i})):null};function T2(t){"@babel/helpers - typeof";return T2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},T2(t)}var KVe=["x","y","top","left","width","height","className"];function UF(){return UF=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},UF.apply(this,arguments)}function nG(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function YVe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?nG(Object(n),!0).forEach(function(r){XVe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):nG(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function XVe(t,e,n){return e=ZVe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ZVe(t){var e=QVe(t,"string");return T2(e)=="symbol"?e:e+""}function QVe(t,e){if(T2(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(T2(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function JVe(t,e){if(t==null)return{};var n=eqe(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function eqe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var tqe=function(e,n,r,i,a,o){return"M".concat(e,",").concat(a,"v").concat(i,"M").concat(o,",").concat(n,"h").concat(r)},nqe=function(e){var n=e.x,r=n===void 0?0:n,i=e.y,a=i===void 0?0:i,o=e.top,l=o===void 0?0:o,c=e.left,d=c===void 0?0:c,u=e.width,h=u===void 0?0:u,f=e.height,m=f===void 0?0:f,v=e.className,p=JVe(e,KVe),g=YVe({x:r,y:a,top:l,left:d,width:h,height:m},p);return!ct(r)||!ct(a)||!ct(h)||!ct(m)||!ct(l)||!ct(d)?null:ge.createElement("path",UF({},_t(g,!0),{className:dn("recharts-cross",v),d:tqe(r,a,h,m,l,d)}))},rqe=vD,sqe=bae,iqe=Od;function aqe(t,e){return t&&t.length?rqe(t,iqe(e),sqe):void 0}var oqe=aqe;const lqe=$n(oqe);var cqe=vD,dqe=Od,uqe=wae;function hqe(t,e){return t&&t.length?cqe(t,dqe(e),uqe):void 0}var fqe=hqe;const mqe=$n(fqe);var pqe=["cx","cy","angle","ticks","axisLine"],gqe=["ticks","tick","angle","tickFormatter","stroke"];function jb(t){"@babel/helpers - typeof";return jb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jb(t)}function gj(){return gj=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},gj.apply(this,arguments)}function rG(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Qm(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?rG(Object(n),!0).forEach(function(r){jD(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):rG(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function sG(t,e){if(t==null)return{};var n=vqe(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function vqe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function xqe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function iG(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,ooe(r.key),r)}}function yqe(t,e,n){return e&&iG(t.prototype,e),n&&iG(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function bqe(t,e,n){return e=v4(e),wqe(t,aoe()?Reflect.construct(e,n||[],v4(t).constructor):e.apply(t,n))}function wqe(t,e){if(e&&(jb(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return jqe(t)}function jqe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function aoe(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(aoe=function(){return!!t})()}function v4(t){return v4=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},v4(t)}function Nqe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&VF(t,e)}function VF(t,e){return VF=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},VF(t,e)}function jD(t,e,n){return e=ooe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ooe(t){var e=Sqe(t,"string");return jb(e)=="symbol"?e:e+""}function Sqe(t,e){if(jb(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(jb(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var ND=function(t){function e(){return xqe(this,e),bqe(this,e,arguments)}return Nqe(e,t),yqe(e,[{key:"getTickValueCoord",value:function(r){var i=r.coordinate,a=this.props,o=a.angle,l=a.cx,c=a.cy;return jr(l,c,i,o)}},{key:"getTickTextAnchor",value:function(){var r=this.props.orientation,i;switch(r){case"left":i="end";break;case"right":i="start";break;default:i="middle";break}return i}},{key:"getViewBox",value:function(){var r=this.props,i=r.cx,a=r.cy,o=r.angle,l=r.ticks,c=lqe(l,function(u){return u.coordinate||0}),d=mqe(l,function(u){return u.coordinate||0});return{cx:i,cy:a,startAngle:o,endAngle:o,innerRadius:d.coordinate||0,outerRadius:c.coordinate||0}}},{key:"renderAxisLine",value:function(){var r=this.props,i=r.cx,a=r.cy,o=r.angle,l=r.ticks,c=r.axisLine,d=sG(r,pqe),u=l.reduce(function(v,p){return[Math.min(v[0],p.coordinate),Math.max(v[1],p.coordinate)]},[1/0,-1/0]),h=jr(i,a,u[0],o),f=jr(i,a,u[1],o),m=Qm(Qm(Qm({},_t(d,!1)),{},{fill:"none"},_t(c,!1)),{},{x1:h.x,y1:h.y,x2:f.x,y2:f.y});return ge.createElement("line",gj({className:"recharts-polar-radius-axis-line"},m))}},{key:"renderTicks",value:function(){var r=this,i=this.props,a=i.ticks,o=i.tick,l=i.angle,c=i.tickFormatter,d=i.stroke,u=sG(i,gqe),h=this.getTickTextAnchor(),f=_t(u,!1),m=_t(o,!1),v=a.map(function(p,g){var x=r.getTickValueCoord(p),y=Qm(Qm(Qm(Qm({textAnchor:h,transform:"rotate(".concat(90-l,", ").concat(x.x,", ").concat(x.y,")")},f),{},{stroke:"none",fill:d},m),{},{index:g},x),{},{payload:p});return ge.createElement(yn,gj({className:dn("recharts-polar-radius-axis-tick",Yae(o)),key:"tick-".concat(p.coordinate)},pv(r.props,p,g)),e.renderTickItem(o,y,c?c(p.value,g):p.value))});return ge.createElement(yn,{className:"recharts-polar-radius-axis-ticks"},v)}},{key:"render",value:function(){var r=this.props,i=r.ticks,a=r.axisLine,o=r.tick;return!i||!i.length?null:ge.createElement(yn,{className:dn("recharts-polar-radius-axis",this.props.className)},a&&this.renderAxisLine(),o&&this.renderTicks(),si.renderCallByParent(this.props,this.getViewBox()))}}],[{key:"renderTickItem",value:function(r,i,a){var o;return ge.isValidElement(r)?o=ge.cloneElement(r,i):Wt(r)?o=r(i):o=ge.createElement(gv,gj({},i,{className:"recharts-polar-radius-axis-tick-value"}),a),o}}])}(A.PureComponent);jD(ND,"displayName","PolarRadiusAxis");jD(ND,"axisType","radiusAxis");jD(ND,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});function Nb(t){"@babel/helpers - typeof";return Nb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Nb(t)}function up(){return up=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},up.apply(this,arguments)}function aG(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Jm(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?aG(Object(n),!0).forEach(function(r){SD(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):aG(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Aqe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function oG(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,coe(r.key),r)}}function Cqe(t,e,n){return e&&oG(t.prototype,e),n&&oG(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Eqe(t,e,n){return e=x4(e),Pqe(t,loe()?Reflect.construct(e,n||[],x4(t).constructor):e.apply(t,n))}function Pqe(t,e){if(e&&(Nb(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Tqe(t)}function Tqe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function loe(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(loe=function(){return!!t})()}function x4(t){return x4=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},x4(t)}function Iqe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&qF(t,e)}function qF(t,e){return qF=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},qF(t,e)}function SD(t,e,n){return e=coe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function coe(t){var e=Dqe(t,"string");return Nb(e)=="symbol"?e:e+""}function Dqe(t,e){if(Nb(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Nb(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var kqe=Math.PI/180,lG=1e-5,AD=function(t){function e(){return Aqe(this,e),Eqe(this,e,arguments)}return Iqe(e,t),Cqe(e,[{key:"getTickLineCoord",value:function(r){var i=this.props,a=i.cx,o=i.cy,l=i.radius,c=i.orientation,d=i.tickSize,u=d||8,h=jr(a,o,l,r.coordinate),f=jr(a,o,l+(c==="inner"?-1:1)*u,r.coordinate);return{x1:h.x,y1:h.y,x2:f.x,y2:f.y}}},{key:"getTickTextAnchor",value:function(r){var i=this.props.orientation,a=Math.cos(-r.coordinate*kqe),o;return a>lG?o=i==="outer"?"start":"end":a<-lG?o=i==="outer"?"end":"start":o="middle",o}},{key:"renderAxisLine",value:function(){var r=this.props,i=r.cx,a=r.cy,o=r.radius,l=r.axisLine,c=r.axisLineType,d=Jm(Jm({},_t(this.props,!1)),{},{fill:"none"},_t(l,!1));if(c==="circle")return ge.createElement($A,up({className:"recharts-polar-angle-axis-line"},d,{cx:i,cy:a,r:o}));var u=this.props.ticks,h=u.map(function(f){return jr(i,a,o,f.coordinate)});return ge.createElement(GVe,up({className:"recharts-polar-angle-axis-line"},d,{points:h}))}},{key:"renderTicks",value:function(){var r=this,i=this.props,a=i.ticks,o=i.tick,l=i.tickLine,c=i.tickFormatter,d=i.stroke,u=_t(this.props,!1),h=_t(o,!1),f=Jm(Jm({},u),{},{fill:"none"},_t(l,!1)),m=a.map(function(v,p){var g=r.getTickLineCoord(v),x=r.getTickTextAnchor(v),y=Jm(Jm(Jm({textAnchor:x},u),{},{stroke:"none",fill:d},h),{},{index:p,payload:v,x:g.x2,y:g.y2});return ge.createElement(yn,up({className:dn("recharts-polar-angle-axis-tick",Yae(o)),key:"tick-".concat(v.coordinate)},pv(r.props,v,p)),l&&ge.createElement("line",up({className:"recharts-polar-angle-axis-tick-line"},f,g)),o&&e.renderTickItem(o,y,c?c(v.value,p):v.value))});return ge.createElement(yn,{className:"recharts-polar-angle-axis-ticks"},m)}},{key:"render",value:function(){var r=this.props,i=r.ticks,a=r.radius,o=r.axisLine;return a<=0||!i||!i.length?null:ge.createElement(yn,{className:dn("recharts-polar-angle-axis",this.props.className)},o&&this.renderAxisLine(),this.renderTicks())}}],[{key:"renderTickItem",value:function(r,i,a){var o;return ge.isValidElement(r)?o=ge.cloneElement(r,i):Wt(r)?o=r(i):o=ge.createElement(gv,up({},i,{className:"recharts-polar-angle-axis-tick-value"}),a),o}}])}(A.PureComponent);SD(AD,"displayName","PolarAngleAxis");SD(AD,"axisType","angleAxis");SD(AD,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var _qe=gie,Oqe=_qe(Object.getPrototypeOf,Object),Lqe=Oqe,Rqe=hh,Mqe=Lqe,Fqe=fh,$qe="[object Object]",Bqe=Function.prototype,zqe=Object.prototype,doe=Bqe.toString,Uqe=zqe.hasOwnProperty,Vqe=doe.call(Object);function qqe(t){if(!Fqe(t)||Rqe(t)!=$qe)return!1;var e=Mqe(t);if(e===null)return!0;var n=Uqe.call(e,"constructor")&&e.constructor;return typeof n=="function"&&n instanceof n&&doe.call(n)==Vqe}var Hqe=qqe;const Wqe=$n(Hqe);var Gqe=hh,Kqe=fh,Yqe="[object Boolean]";function Xqe(t){return t===!0||t===!1||Kqe(t)&&Gqe(t)==Yqe}var Zqe=Xqe;const Qqe=$n(Zqe);function I2(t){"@babel/helpers - typeof";return I2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},I2(t)}function y4(){return y4=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},y4.apply(this,arguments)}function Jqe(t,e){return rHe(t)||nHe(t,e)||tHe(t,e)||eHe()}function eHe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function tHe(t,e){if(t){if(typeof t=="string")return cG(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return cG(t,e)}}function cG(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function nHe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,o,l=[],c=!0,d=!1;try{if(a=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==e);c=!0);}catch(u){d=!0,i=u}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw i}}return l}}function rHe(t){if(Array.isArray(t))return t}function dG(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function uG(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?dG(Object(n),!0).forEach(function(r){sHe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):dG(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function sHe(t,e,n){return e=iHe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function iHe(t){var e=aHe(t,"string");return I2(e)=="symbol"?e:e+""}function aHe(t,e){if(I2(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(I2(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var hG=function(e,n,r,i,a){var o=r-i,l;return l="M ".concat(e,",").concat(n),l+="L ".concat(e+r,",").concat(n),l+="L ".concat(e+r-o/2,",").concat(n+a),l+="L ".concat(e+r-o/2-i,",").concat(n+a),l+="L ".concat(e,",").concat(n," Z"),l},oHe={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},lHe=function(e){var n=uG(uG({},oHe),e),r=A.useRef(),i=A.useState(-1),a=Jqe(i,2),o=a[0],l=a[1];A.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var b=r.current.getTotalLength();b&&l(b)}catch{}},[]);var c=n.x,d=n.y,u=n.upperWidth,h=n.lowerWidth,f=n.height,m=n.className,v=n.animationEasing,p=n.animationDuration,g=n.animationBegin,x=n.isUpdateAnimationActive;if(c!==+c||d!==+d||u!==+u||h!==+h||f!==+f||u===0&&h===0||f===0)return null;var y=dn("recharts-trapezoid",m);return x?ge.createElement(jm,{canBegin:o>0,from:{upperWidth:0,lowerWidth:0,height:f,x:c,y:d},to:{upperWidth:u,lowerWidth:h,height:f,x:c,y:d},duration:p,animationEasing:v,isActive:x},function(b){var w=b.upperWidth,N=b.lowerWidth,E=b.height,C=b.x,j=b.y;return ge.createElement(jm,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:g,duration:p,easing:v},ge.createElement("path",y4({},_t(n,!0),{className:y,d:hG(C,j,w,N,E),ref:r})))}):ge.createElement("g",null,ge.createElement("path",y4({},_t(n,!0),{className:y,d:hG(c,d,u,h,f)})))},cHe=["option","shapeType","propTransformer","activeClassName","isActive"];function D2(t){"@babel/helpers - typeof";return D2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},D2(t)}function dHe(t,e){if(t==null)return{};var n=uHe(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function uHe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function fG(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function b4(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?fG(Object(n),!0).forEach(function(r){hHe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):fG(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function hHe(t,e,n){return e=fHe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function fHe(t){var e=mHe(t,"string");return D2(e)=="symbol"?e:e+""}function mHe(t,e){if(D2(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(D2(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function pHe(t,e){return b4(b4({},e),t)}function gHe(t,e){return t==="symbols"}function mG(t){var e=t.shapeType,n=t.elementProps;switch(e){case"rectangle":return ge.createElement(L7,n);case"trapezoid":return ge.createElement(lHe,n);case"sector":return ge.createElement(Qae,n);case"symbols":if(gHe(e))return ge.createElement(e7,n);break;default:return null}}function vHe(t){return A.isValidElement(t)?t.props:t}function uoe(t){var e=t.option,n=t.shapeType,r=t.propTransformer,i=r===void 0?pHe:r,a=t.activeClassName,o=a===void 0?"recharts-active-shape":a,l=t.isActive,c=dHe(t,cHe),d;if(A.isValidElement(e))d=A.cloneElement(e,b4(b4({},c),vHe(e)));else if(Wt(e))d=e(c);else if(Wqe(e)&&!Qqe(e)){var u=i(e,c);d=ge.createElement(mG,{shapeType:n,elementProps:u})}else{var h=c;d=ge.createElement(mG,{shapeType:n,elementProps:h})}return l?ge.createElement(yn,{className:o},d):d}function CD(t,e){return e!=null&&"trapezoids"in t.props}function ED(t,e){return e!=null&&"sectors"in t.props}function k2(t,e){return e!=null&&"points"in t.props}function xHe(t,e){var n,r,i=t.x===(e==null||(n=e.labelViewBox)===null||n===void 0?void 0:n.x)||t.x===e.x,a=t.y===(e==null||(r=e.labelViewBox)===null||r===void 0?void 0:r.y)||t.y===e.y;return i&&a}function yHe(t,e){var n=t.endAngle===e.endAngle,r=t.startAngle===e.startAngle;return n&&r}function bHe(t,e){var n=t.x===e.x,r=t.y===e.y,i=t.z===e.z;return n&&r&&i}function wHe(t,e){var n;return CD(t,e)?n=xHe:ED(t,e)?n=yHe:k2(t,e)&&(n=bHe),n}function jHe(t,e){var n;return CD(t,e)?n="trapezoids":ED(t,e)?n="sectors":k2(t,e)&&(n="points"),n}function NHe(t,e){if(CD(t,e)){var n;return(n=e.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}if(ED(t,e)){var r;return(r=e.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}return k2(t,e)?e.payload:{}}function SHe(t){var e=t.activeTooltipItem,n=t.graphicalItem,r=t.itemData,i=jHe(n,e),a=NHe(n,e),o=r.filter(function(c,d){var u=vv(a,c),h=n.props[i].filter(function(v){var p=wHe(n,e);return p(v,e)}),f=n.props[i].indexOf(h[h.length-1]),m=d===f;return u&&m}),l=r.indexOf(o[o.length-1]);return l}var _E;function Sb(t){"@babel/helpers - typeof";return Sb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Sb(t)}function Jx(){return Jx=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Jx.apply(this,arguments)}function pG(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function gr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?pG(Object(n),!0).forEach(function(r){fl(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):pG(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function AHe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function gG(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,foe(r.key),r)}}function CHe(t,e,n){return e&&gG(t.prototype,e),n&&gG(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function EHe(t,e,n){return e=w4(e),PHe(t,hoe()?Reflect.construct(e,n||[],w4(t).constructor):e.apply(t,n))}function PHe(t,e){if(e&&(Sb(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return THe(t)}function THe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function hoe(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(hoe=function(){return!!t})()}function w4(t){return w4=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},w4(t)}function IHe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&HF(t,e)}function HF(t,e){return HF=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},HF(t,e)}function fl(t,e,n){return e=foe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function foe(t){var e=DHe(t,"string");return Sb(e)=="symbol"?e:e+""}function DHe(t,e){if(Sb(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Sb(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var ph=function(t){function e(n){var r;return AHe(this,e),r=EHe(this,e,[n]),fl(r,"pieRef",null),fl(r,"sectorRefs",[]),fl(r,"id",kv("recharts-pie-")),fl(r,"handleAnimationEnd",function(){var i=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),Wt(i)&&i()}),fl(r,"handleAnimationStart",function(){var i=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),Wt(i)&&i()}),r.state={isAnimationFinished:!n.isAnimationActive,prevIsAnimationActive:n.isAnimationActive,prevAnimationId:n.animationId,sectorToFocus:0},r}return IHe(e,t),CHe(e,[{key:"isActiveIndex",value:function(r){var i=this.props.activeIndex;return Array.isArray(i)?i.indexOf(r)!==-1:r===i}},{key:"hasActiveIndex",value:function(){var r=this.props.activeIndex;return Array.isArray(r)?r.length!==0:r||r===0}},{key:"renderLabels",value:function(r){var i=this.props.isAnimationActive;if(i&&!this.state.isAnimationFinished)return null;var a=this.props,o=a.label,l=a.labelLine,c=a.dataKey,d=a.valueKey,u=_t(this.props,!1),h=_t(o,!1),f=_t(l,!1),m=o&&o.offsetRadius||20,v=r.map(function(p,g){var x=(p.startAngle+p.endAngle)/2,y=jr(p.cx,p.cy,p.outerRadius+m,x),b=gr(gr(gr(gr({},u),p),{},{stroke:"none"},h),{},{index:g,textAnchor:e.getTextAnchor(y.x,p.cx)},y),w=gr(gr(gr(gr({},u),p),{},{fill:"none",stroke:p.fill},f),{},{index:g,points:[jr(p.cx,p.cy,p.outerRadius,x),y]}),N=c;return Qt(c)&&Qt(d)?N="value":Qt(c)&&(N=d),ge.createElement(yn,{key:"label-".concat(p.startAngle,"-").concat(p.endAngle,"-").concat(p.midAngle,"-").concat(g)},l&&e.renderLabelLineItem(l,w,"line"),e.renderLabelItem(o,b,xs(p,N)))});return ge.createElement(yn,{className:"recharts-pie-labels"},v)}},{key:"renderSectorsStatically",value:function(r){var i=this,a=this.props,o=a.activeShape,l=a.blendStroke,c=a.inactiveShape;return r.map(function(d,u){if((d==null?void 0:d.startAngle)===0&&(d==null?void 0:d.endAngle)===0&&r.length!==1)return null;var h=i.isActiveIndex(u),f=c&&i.hasActiveIndex()?c:null,m=h?o:f,v=gr(gr({},d),{},{stroke:l?d.fill:d.stroke,tabIndex:-1});return ge.createElement(yn,Jx({ref:function(g){g&&!i.sectorRefs.includes(g)&&i.sectorRefs.push(g)},tabIndex:-1,className:"recharts-pie-sector"},pv(i.props,d,u),{key:"sector-".concat(d==null?void 0:d.startAngle,"-").concat(d==null?void 0:d.endAngle,"-").concat(d.midAngle,"-").concat(u)}),ge.createElement(uoe,Jx({option:m,isActive:h,shapeType:"sector"},v)))})}},{key:"renderSectorsWithAnimation",value:function(){var r=this,i=this.props,a=i.sectors,o=i.isAnimationActive,l=i.animationBegin,c=i.animationDuration,d=i.animationEasing,u=i.animationId,h=this.state,f=h.prevSectors,m=h.prevIsAnimationActive;return ge.createElement(jm,{begin:l,duration:c,isActive:o,easing:d,from:{t:0},to:{t:1},key:"pie-".concat(u,"-").concat(m),onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},function(v){var p=v.t,g=[],x=a&&a[0],y=x.startAngle;return a.forEach(function(b,w){var N=f&&f[w],E=w>0?Ro(b,"paddingAngle",0):0;if(N){var C=zs(N.endAngle-N.startAngle,b.endAngle-b.startAngle),j=gr(gr({},b),{},{startAngle:y+E,endAngle:y+C(p)+E});g.push(j),y=j.endAngle}else{var I=b.endAngle,k=b.startAngle,D=zs(0,I-k),P=D(p),R=gr(gr({},b),{},{startAngle:y+E,endAngle:y+P+E});g.push(R),y=R.endAngle}}),ge.createElement(yn,null,r.renderSectorsStatically(g))})}},{key:"attachKeyboardHandlers",value:function(r){var i=this;r.onkeydown=function(a){if(!a.altKey)switch(a.key){case"ArrowLeft":{var o=++i.state.sectorToFocus%i.sectorRefs.length;i.sectorRefs[o].focus(),i.setState({sectorToFocus:o});break}case"ArrowRight":{var l=--i.state.sectorToFocus<0?i.sectorRefs.length-1:i.state.sectorToFocus%i.sectorRefs.length;i.sectorRefs[l].focus(),i.setState({sectorToFocus:l});break}case"Escape":{i.sectorRefs[i.state.sectorToFocus].blur(),i.setState({sectorToFocus:0});break}}}}},{key:"renderSectors",value:function(){var r=this.props,i=r.sectors,a=r.isAnimationActive,o=this.state.prevSectors;return a&&i&&i.length&&(!o||!vv(o,i))?this.renderSectorsWithAnimation():this.renderSectorsStatically(i)}},{key:"componentDidMount",value:function(){this.pieRef&&this.attachKeyboardHandlers(this.pieRef)}},{key:"render",value:function(){var r=this,i=this.props,a=i.hide,o=i.sectors,l=i.className,c=i.label,d=i.cx,u=i.cy,h=i.innerRadius,f=i.outerRadius,m=i.isAnimationActive,v=this.state.isAnimationFinished;if(a||!o||!o.length||!ct(d)||!ct(u)||!ct(h)||!ct(f))return null;var p=dn("recharts-pie",l);return ge.createElement(yn,{tabIndex:this.props.rootTabIndex,className:p,ref:function(x){r.pieRef=x}},this.renderSectors(),c&&this.renderLabels(o),si.renderCallByParent(this.props,null,!1),(!m||v)&&jd.renderCallByParent(this.props,o,!1))}}],[{key:"getDerivedStateFromProps",value:function(r,i){return i.prevIsAnimationActive!==r.isAnimationActive?{prevIsAnimationActive:r.isAnimationActive,prevAnimationId:r.animationId,curSectors:r.sectors,prevSectors:[],isAnimationFinished:!0}:r.isAnimationActive&&r.animationId!==i.prevAnimationId?{prevAnimationId:r.animationId,curSectors:r.sectors,prevSectors:i.curSectors,isAnimationFinished:!0}:r.sectors!==i.curSectors?{curSectors:r.sectors,isAnimationFinished:!0}:null}},{key:"getTextAnchor",value:function(r,i){return r>i?"start":r<i?"end":"middle"}},{key:"renderLabelLineItem",value:function(r,i,a){if(ge.isValidElement(r))return ge.cloneElement(r,i);if(Wt(r))return r(i);var o=dn("recharts-pie-label-line",typeof r!="boolean"?r.className:"");return ge.createElement(tv,Jx({},i,{key:a,type:"linear",className:o}))}},{key:"renderLabelItem",value:function(r,i,a){if(ge.isValidElement(r))return ge.cloneElement(r,i);var o=a;if(Wt(r)&&(o=r(i),ge.isValidElement(o)))return o;var l=dn("recharts-pie-label-text",typeof r!="boolean"&&!Wt(r)?r.className:"");return ge.createElement(gv,Jx({},i,{alignmentBaseline:"middle",className:l}),o)}}])}(A.PureComponent);_E=ph;fl(ph,"displayName","Pie");fl(ph,"defaultProps",{stroke:"#fff",fill:"#808080",legendType:"rect",cx:"50%",cy:"50%",startAngle:0,endAngle:360,innerRadius:0,outerRadius:"80%",paddingAngle:0,labelLine:!0,hide:!1,minAngle:0,isAnimationActive:!pc.isSsr,animationBegin:400,animationDuration:1500,animationEasing:"ease",nameKey:"name",blendStroke:!1,rootTabIndex:0});fl(ph,"parseDeltaAngle",function(t,e){var n=ha(e-t),r=Math.min(Math.abs(e-t),360);return n*r});fl(ph,"getRealPieData",function(t){var e=t.data,n=t.children,r=_t(t,!1),i=Mo(n,dD);return e&&e.length?e.map(function(a,o){return gr(gr(gr({payload:a},r),a),i&&i[o]&&i[o].props)}):i&&i.length?i.map(function(a){return gr(gr({},r),a.props)}):[]});fl(ph,"parseCoordinateOfPie",function(t,e){var n=e.top,r=e.left,i=e.width,a=e.height,o=Kae(i,a),l=r+fa(t.cx,i,i/2),c=n+fa(t.cy,a,a/2),d=fa(t.innerRadius,o,0),u=fa(t.outerRadius,o,o*.8),h=t.maxRadius||Math.sqrt(i*i+a*a)/2;return{cx:l,cy:c,innerRadius:d,outerRadius:u,maxRadius:h}});fl(ph,"getComposedData",function(t){var e=t.item,n=t.offset,r=e.type.defaultProps!==void 0?gr(gr({},e.type.defaultProps),e.props):e.props,i=_E.getRealPieData(r);if(!i||!i.length)return null;var a=r.cornerRadius,o=r.startAngle,l=r.endAngle,c=r.paddingAngle,d=r.dataKey,u=r.nameKey,h=r.valueKey,f=r.tooltipType,m=Math.abs(r.minAngle),v=_E.parseCoordinateOfPie(r,n),p=_E.parseDeltaAngle(o,l),g=Math.abs(p),x=d;Qt(d)&&Qt(h)?(mc(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),x="value"):Qt(d)&&(mc(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),x=h);var y=i.filter(function(j){return xs(j,x,0)!==0}).length,b=(g>=360?y:y-1)*c,w=g-y*m-b,N=i.reduce(function(j,I){var k=xs(I,x,0);return j+(ct(k)?k:0)},0),E;if(N>0){var C;E=i.map(function(j,I){var k=xs(j,x,0),D=xs(j,u,I),P=(ct(k)?k:0)/N,R;I?R=C.endAngle+ha(p)*c*(k!==0?1:0):R=o;var _=R+ha(p)*((k!==0?m:0)+P*w),M=(R+_)/2,U=(v.innerRadius+v.outerRadius)/2,F=[{name:D,value:k,payload:j,dataKey:x,type:f}],z=jr(v.cx,v.cy,U,M);return C=gr(gr(gr({percent:P,cornerRadius:a,name:D,tooltipPayload:F,midAngle:M,middleRadius:U,tooltipPosition:z},j),v),{},{value:xs(j,x),startAngle:R,endAngle:_,payload:j,paddingAngle:ha(p)*c}),C})}return gr(gr({},v),{},{sectors:E,data:i})});var kHe=Math.ceil,_He=Math.max;function OHe(t,e,n,r){for(var i=-1,a=_He(kHe((e-t)/(n||1)),0),o=Array(a);a--;)o[r?a:++i]=t,t+=n;return o}var LHe=OHe,RHe=Lie,vG=1/0,MHe=17976931348623157e292;function FHe(t){if(!t)return t===0?t:0;if(t=RHe(t),t===vG||t===-vG){var e=t<0?-1:1;return e*MHe}return t===t?t:0}var moe=FHe,$He=LHe,BHe=cD,AO=moe;function zHe(t){return function(e,n,r){return r&&typeof r!="number"&&BHe(e,n,r)&&(n=r=void 0),e=AO(e),n===void 0?(n=e,e=0):n=AO(n),r=r===void 0?e<n?1:-1:AO(r),$He(e,n,r,t)}}var UHe=zHe,VHe=UHe,qHe=VHe(),HHe=qHe;const j4=$n(HHe);function _2(t){"@babel/helpers - typeof";return _2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_2(t)}function xG(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function yG(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?xG(Object(n),!0).forEach(function(r){poe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):xG(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function poe(t,e,n){return e=WHe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function WHe(t){var e=GHe(t,"string");return _2(e)=="symbol"?e:e+""}function GHe(t,e){if(_2(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(_2(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var KHe=["Webkit","Moz","O","ms"],YHe=function(e,n){if(!e)return null;var r=e.replace(/(\w)/,function(a){return a.toUpperCase()}),i=KHe.reduce(function(a,o){return yG(yG({},a),{},poe({},o+r,n))},{});return i[e]=n,i};function Ab(t){"@babel/helpers - typeof";return Ab=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ab(t)}function N4(){return N4=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},N4.apply(this,arguments)}function bG(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function CO(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?bG(Object(n),!0).forEach(function(r){ro(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):bG(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function XHe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function wG(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,voe(r.key),r)}}function ZHe(t,e,n){return e&&wG(t.prototype,e),n&&wG(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function QHe(t,e,n){return e=S4(e),JHe(t,goe()?Reflect.construct(e,n||[],S4(t).constructor):e.apply(t,n))}function JHe(t,e){if(e&&(Ab(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return eWe(t)}function eWe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function goe(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(goe=function(){return!!t})()}function S4(t){return S4=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},S4(t)}function tWe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&WF(t,e)}function WF(t,e){return WF=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},WF(t,e)}function ro(t,e,n){return e=voe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function voe(t){var e=nWe(t,"string");return Ab(e)=="symbol"?e:e+""}function nWe(t,e){if(Ab(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Ab(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var rWe=function(e){var n=e.data,r=e.startIndex,i=e.endIndex,a=e.x,o=e.width,l=e.travellerWidth;if(!n||!n.length)return{};var c=n.length,d=hj().domain(j4(0,c)).range([a,a+o-l]),u=d.domain().map(function(h){return d(h)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:d(r),endX:d(i),scale:d,scaleValues:u}},jG=function(e){return e.changedTouches&&!!e.changedTouches.length},Cb=function(t){function e(n){var r;return XHe(this,e),r=QHe(this,e,[n]),ro(r,"handleDrag",function(i){r.leaveTimer&&(clearTimeout(r.leaveTimer),r.leaveTimer=null),r.state.isTravellerMoving?r.handleTravellerMove(i):r.state.isSlideMoving&&r.handleSlideDrag(i)}),ro(r,"handleTouchMove",function(i){i.changedTouches!=null&&i.changedTouches.length>0&&r.handleDrag(i.changedTouches[0])}),ro(r,"handleDragEnd",function(){r.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var i=r.props,a=i.endIndex,o=i.onDragEnd,l=i.startIndex;o==null||o({endIndex:a,startIndex:l})}),r.detachDragEndListener()}),ro(r,"handleLeaveWrapper",function(){(r.state.isTravellerMoving||r.state.isSlideMoving)&&(r.leaveTimer=window.setTimeout(r.handleDragEnd,r.props.leaveTimeOut))}),ro(r,"handleEnterSlideOrTraveller",function(){r.setState({isTextActive:!0})}),ro(r,"handleLeaveSlideOrTraveller",function(){r.setState({isTextActive:!1})}),ro(r,"handleSlideDragStart",function(i){var a=jG(i)?i.changedTouches[0]:i;r.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:a.pageX}),r.attachDragEndListener()}),r.travellerDragStartHandlers={startX:r.handleTravellerDragStart.bind(r,"startX"),endX:r.handleTravellerDragStart.bind(r,"endX")},r.state={},r}return tWe(e,t),ZHe(e,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(r){var i=r.startX,a=r.endX,o=this.state.scaleValues,l=this.props,c=l.gap,d=l.data,u=d.length-1,h=Math.min(i,a),f=Math.max(i,a),m=e.getIndexInRange(o,h),v=e.getIndexInRange(o,f);return{startIndex:m-m%c,endIndex:v===u?u:v-v%c}}},{key:"getTextOfTick",value:function(r){var i=this.props,a=i.data,o=i.tickFormatter,l=i.dataKey,c=xs(a[r],l,r);return Wt(o)?o(c,r):c}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(r){var i=this.state,a=i.slideMoveStartX,o=i.startX,l=i.endX,c=this.props,d=c.x,u=c.width,h=c.travellerWidth,f=c.startIndex,m=c.endIndex,v=c.onChange,p=r.pageX-a;p>0?p=Math.min(p,d+u-h-l,d+u-h-o):p<0&&(p=Math.max(p,d-o,d-l));var g=this.getIndex({startX:o+p,endX:l+p});(g.startIndex!==f||g.endIndex!==m)&&v&&v(g),this.setState({startX:o+p,endX:l+p,slideMoveStartX:r.pageX})}},{key:"handleTravellerDragStart",value:function(r,i){var a=jG(i)?i.changedTouches[0]:i;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:r,brushMoveStartX:a.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(r){var i=this.state,a=i.brushMoveStartX,o=i.movingTravellerId,l=i.endX,c=i.startX,d=this.state[o],u=this.props,h=u.x,f=u.width,m=u.travellerWidth,v=u.onChange,p=u.gap,g=u.data,x={startX:this.state.startX,endX:this.state.endX},y=r.pageX-a;y>0?y=Math.min(y,h+f-m-d):y<0&&(y=Math.max(y,h-d)),x[o]=d+y;var b=this.getIndex(x),w=b.startIndex,N=b.endIndex,E=function(){var j=g.length-1;return o==="startX"&&(l>c?w%p===0:N%p===0)||l<c&&N===j||o==="endX"&&(l>c?N%p===0:w%p===0)||l>c&&N===j};this.setState(ro(ro({},o,d+y),"brushMoveStartX",r.pageX),function(){v&&E()&&v(b)})}},{key:"handleTravellerMoveKeyboard",value:function(r,i){var a=this,o=this.state,l=o.scaleValues,c=o.startX,d=o.endX,u=this.state[i],h=l.indexOf(u);if(h!==-1){var f=h+r;if(!(f===-1||f>=l.length)){var m=l[f];i==="startX"&&m>=d||i==="endX"&&m<=c||this.setState(ro({},i,m),function(){a.props.onChange(a.getIndex({startX:a.state.startX,endX:a.state.endX}))})}}}},{key:"renderBackground",value:function(){var r=this.props,i=r.x,a=r.y,o=r.width,l=r.height,c=r.fill,d=r.stroke;return ge.createElement("rect",{stroke:d,fill:c,x:i,y:a,width:o,height:l})}},{key:"renderPanorama",value:function(){var r=this.props,i=r.x,a=r.y,o=r.width,l=r.height,c=r.data,d=r.children,u=r.padding,h=A.Children.only(d);return h?ge.cloneElement(h,{x:i,y:a,width:o,height:l,margin:u,compact:!0,data:c}):null}},{key:"renderTravellerLayer",value:function(r,i){var a,o,l=this,c=this.props,d=c.y,u=c.travellerWidth,h=c.height,f=c.traveller,m=c.ariaLabel,v=c.data,p=c.startIndex,g=c.endIndex,x=Math.max(r,this.props.x),y=CO(CO({},_t(this.props,!1)),{},{x,y:d,width:u,height:h}),b=m||"Min value: ".concat((a=v[p])===null||a===void 0?void 0:a.name,", Max value: ").concat((o=v[g])===null||o===void 0?void 0:o.name);return ge.createElement(yn,{tabIndex:0,role:"slider","aria-label":b,"aria-valuenow":r,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[i],onTouchStart:this.travellerDragStartHandlers[i],onKeyDown:function(N){["ArrowLeft","ArrowRight"].includes(N.key)&&(N.preventDefault(),N.stopPropagation(),l.handleTravellerMoveKeyboard(N.key==="ArrowRight"?1:-1,i))},onFocus:function(){l.setState({isTravellerFocused:!0})},onBlur:function(){l.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},e.renderTraveller(f,y))}},{key:"renderSlide",value:function(r,i){var a=this.props,o=a.y,l=a.height,c=a.stroke,d=a.travellerWidth,u=Math.min(r,i)+d,h=Math.max(Math.abs(i-r)-d,0);return ge.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:c,fillOpacity:.2,x:u,y:o,width:h,height:l})}},{key:"renderText",value:function(){var r=this.props,i=r.startIndex,a=r.endIndex,o=r.y,l=r.height,c=r.travellerWidth,d=r.stroke,u=this.state,h=u.startX,f=u.endX,m=5,v={pointerEvents:"none",fill:d};return ge.createElement(yn,{className:"recharts-brush-texts"},ge.createElement(gv,N4({textAnchor:"end",verticalAnchor:"middle",x:Math.min(h,f)-m,y:o+l/2},v),this.getTextOfTick(i)),ge.createElement(gv,N4({textAnchor:"start",verticalAnchor:"middle",x:Math.max(h,f)+c+m,y:o+l/2},v),this.getTextOfTick(a)))}},{key:"render",value:function(){var r=this.props,i=r.data,a=r.className,o=r.children,l=r.x,c=r.y,d=r.width,u=r.height,h=r.alwaysShowText,f=this.state,m=f.startX,v=f.endX,p=f.isTextActive,g=f.isSlideMoving,x=f.isTravellerMoving,y=f.isTravellerFocused;if(!i||!i.length||!ct(l)||!ct(c)||!ct(d)||!ct(u)||d<=0||u<=0)return null;var b=dn("recharts-brush",a),w=ge.Children.count(o)===1,N=YHe("userSelect","none");return ge.createElement(yn,{className:b,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:N},this.renderBackground(),w&&this.renderPanorama(),this.renderSlide(m,v),this.renderTravellerLayer(m,"startX"),this.renderTravellerLayer(v,"endX"),(p||g||x||y||h)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(r){var i=r.x,a=r.y,o=r.width,l=r.height,c=r.stroke,d=Math.floor(a+l/2)-1;return ge.createElement(ge.Fragment,null,ge.createElement("rect",{x:i,y:a,width:o,height:l,fill:c,stroke:"none"}),ge.createElement("line",{x1:i+1,y1:d,x2:i+o-1,y2:d,fill:"none",stroke:"#fff"}),ge.createElement("line",{x1:i+1,y1:d+2,x2:i+o-1,y2:d+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(r,i){var a;return ge.isValidElement(r)?a=ge.cloneElement(r,i):Wt(r)?a=r(i):a=e.renderDefaultTraveller(i),a}},{key:"getDerivedStateFromProps",value:function(r,i){var a=r.data,o=r.width,l=r.x,c=r.travellerWidth,d=r.updateId,u=r.startIndex,h=r.endIndex;if(a!==i.prevData||d!==i.prevUpdateId)return CO({prevData:a,prevTravellerWidth:c,prevUpdateId:d,prevX:l,prevWidth:o},a&&a.length?rWe({data:a,width:o,x:l,travellerWidth:c,startIndex:u,endIndex:h}):{scale:null,scaleValues:null});if(i.scale&&(o!==i.prevWidth||l!==i.prevX||c!==i.prevTravellerWidth)){i.scale.range([l,l+o-c]);var f=i.scale.domain().map(function(m){return i.scale(m)});return{prevData:a,prevTravellerWidth:c,prevUpdateId:d,prevX:l,prevWidth:o,startX:i.scale(r.startIndex),endX:i.scale(r.endIndex),scaleValues:f}}return null}},{key:"getIndexInRange",value:function(r,i){for(var a=r.length,o=0,l=a-1;l-o>1;){var c=Math.floor((o+l)/2);r[c]>i?l=c:o=c}return i>=r[l]?l:o}}])}(A.PureComponent);ro(Cb,"displayName","Brush");ro(Cb,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var sWe=o7;function iWe(t,e){var n;return sWe(t,function(r,i,a){return n=e(r,i,a),!n}),!!n}var aWe=iWe,oWe=lie,lWe=Od,cWe=aWe,dWe=Ka,uWe=cD;function hWe(t,e,n){var r=dWe(t)?oWe:cWe;return n&&uWe(t,e,n)&&(e=void 0),r(t,lWe(e))}var fWe=hWe;const mWe=$n(fWe);var Nd=function(e,n){var r=e.alwaysShow,i=e.ifOverflow;return r&&(i="extendDomain"),i===n},NG=Iie;function pWe(t,e,n){e=="__proto__"&&NG?NG(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}var gWe=pWe,vWe=gWe,xWe=Pie,yWe=Od;function bWe(t,e){var n={};return e=yWe(e),xWe(t,function(r,i,a){vWe(n,i,e(r,i,a))}),n}var wWe=bWe;const jWe=$n(wWe);function NWe(t,e){for(var n=-1,r=t==null?0:t.length;++n<r;)if(!e(t[n],n,t))return!1;return!0}var SWe=NWe,AWe=o7;function CWe(t,e){var n=!0;return AWe(t,function(r,i,a){return n=!!e(r,i,a),n}),n}var EWe=CWe,PWe=SWe,TWe=EWe,IWe=Od,DWe=Ka,kWe=cD;function _We(t,e,n){var r=DWe(t)?PWe:TWe;return n&&kWe(t,e,n)&&(e=void 0),r(t,IWe(e))}var OWe=_We;const xoe=$n(OWe);var LWe=["x","y"];function O2(t){"@babel/helpers - typeof";return O2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},O2(t)}function GF(){return GF=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},GF.apply(this,arguments)}function SG(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function vw(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?SG(Object(n),!0).forEach(function(r){RWe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):SG(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function RWe(t,e,n){return e=MWe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function MWe(t){var e=FWe(t,"string");return O2(e)=="symbol"?e:e+""}function FWe(t,e){if(O2(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(O2(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function $We(t,e){if(t==null)return{};var n=BWe(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function BWe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function zWe(t,e){var n=t.x,r=t.y,i=$We(t,LWe),a="".concat(n),o=parseInt(a,10),l="".concat(r),c=parseInt(l,10),d="".concat(e.height||i.height),u=parseInt(d,10),h="".concat(e.width||i.width),f=parseInt(h,10);return vw(vw(vw(vw(vw({},e),i),o?{x:o}:{}),c?{y:c}:{}),{},{height:u,width:f,name:e.name,radius:e.radius})}function AG(t){return ge.createElement(uoe,GF({shapeType:"rectangle",propTransformer:zWe,activeClassName:"recharts-active-bar"},t))}var UWe=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(r,i){if(typeof e=="number")return e;var a=ct(r)||SIe(r);return a?e(r,i):(a||xm(!1),n)}},VWe=["value","background"],yoe;function Eb(t){"@babel/helpers - typeof";return Eb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Eb(t)}function qWe(t,e){if(t==null)return{};var n=HWe(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function HWe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function A4(){return A4=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},A4.apply(this,arguments)}function CG(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Cs(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?CG(Object(n),!0).forEach(function(r){Hf(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):CG(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function WWe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function EG(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,woe(r.key),r)}}function GWe(t,e,n){return e&&EG(t.prototype,e),n&&EG(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function KWe(t,e,n){return e=C4(e),YWe(t,boe()?Reflect.construct(e,n||[],C4(t).constructor):e.apply(t,n))}function YWe(t,e){if(e&&(Eb(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return XWe(t)}function XWe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function boe(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(boe=function(){return!!t})()}function C4(t){return C4=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},C4(t)}function ZWe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&KF(t,e)}function KF(t,e){return KF=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},KF(t,e)}function Hf(t,e,n){return e=woe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function woe(t){var e=QWe(t,"string");return Eb(e)=="symbol"?e:e+""}function QWe(t,e){if(Eb(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Eb(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Rv=function(t){function e(){var n;WWe(this,e);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return n=KWe(this,e,[].concat(i)),Hf(n,"state",{isAnimationFinished:!1}),Hf(n,"id",kv("recharts-bar-")),Hf(n,"handleAnimationEnd",function(){var o=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),o&&o()}),Hf(n,"handleAnimationStart",function(){var o=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),o&&o()}),n}return ZWe(e,t),GWe(e,[{key:"renderRectanglesStatically",value:function(r){var i=this,a=this.props,o=a.shape,l=a.dataKey,c=a.activeIndex,d=a.activeBar,u=_t(this.props,!1);return r&&r.map(function(h,f){var m=f===c,v=m?d:o,p=Cs(Cs(Cs({},u),h),{},{isActive:m,option:v,index:f,dataKey:l,onAnimationStart:i.handleAnimationStart,onAnimationEnd:i.handleAnimationEnd});return ge.createElement(yn,A4({className:"recharts-bar-rectangle"},pv(i.props,h,f),{key:"rectangle-".concat(h==null?void 0:h.x,"-").concat(h==null?void 0:h.y,"-").concat(h==null?void 0:h.value,"-").concat(f)}),ge.createElement(AG,p))})}},{key:"renderRectanglesWithAnimation",value:function(){var r=this,i=this.props,a=i.data,o=i.layout,l=i.isAnimationActive,c=i.animationBegin,d=i.animationDuration,u=i.animationEasing,h=i.animationId,f=this.state.prevData;return ge.createElement(jm,{begin:c,duration:d,isActive:l,easing:u,from:{t:0},to:{t:1},key:"bar-".concat(h),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(m){var v=m.t,p=a.map(function(g,x){var y=f&&f[x];if(y){var b=zs(y.x,g.x),w=zs(y.y,g.y),N=zs(y.width,g.width),E=zs(y.height,g.height);return Cs(Cs({},g),{},{x:b(v),y:w(v),width:N(v),height:E(v)})}if(o==="horizontal"){var C=zs(0,g.height),j=C(v);return Cs(Cs({},g),{},{y:g.y+g.height-j,height:j})}var I=zs(0,g.width),k=I(v);return Cs(Cs({},g),{},{width:k})});return ge.createElement(yn,null,r.renderRectanglesStatically(p))})}},{key:"renderRectangles",value:function(){var r=this.props,i=r.data,a=r.isAnimationActive,o=this.state.prevData;return a&&i&&i.length&&(!o||!vv(o,i))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(i)}},{key:"renderBackground",value:function(){var r=this,i=this.props,a=i.data,o=i.dataKey,l=i.activeIndex,c=_t(this.props.background,!1);return a.map(function(d,u){d.value;var h=d.background,f=qWe(d,VWe);if(!h)return null;var m=Cs(Cs(Cs(Cs(Cs({},f),{},{fill:"#eee"},h),c),pv(r.props,d,u)),{},{onAnimationStart:r.handleAnimationStart,onAnimationEnd:r.handleAnimationEnd,dataKey:o,index:u,className:"recharts-bar-background-rectangle"});return ge.createElement(AG,A4({key:"background-bar-".concat(u),option:r.props.background,isActive:u===l},m))})}},{key:"renderErrorBar",value:function(r,i){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var a=this.props,o=a.data,l=a.xAxis,c=a.yAxis,d=a.layout,u=a.children,h=Mo(u,FA);if(!h)return null;var f=d==="vertical"?o[0].height/2:o[0].width/2,m=function(g,x){var y=Array.isArray(g.value)?g.value[1]:g.value;return{x:g.x,y:g.y,value:y,errorVal:xs(g,x)}},v={clipPath:r?"url(#clipPath-".concat(i,")"):null};return ge.createElement(yn,v,h.map(function(p){return ge.cloneElement(p,{key:"error-bar-".concat(i,"-").concat(p.props.dataKey),data:o,xAxis:l,yAxis:c,layout:d,offset:f,dataPointFormatter:m})}))}},{key:"render",value:function(){var r=this.props,i=r.hide,a=r.data,o=r.className,l=r.xAxis,c=r.yAxis,d=r.left,u=r.top,h=r.width,f=r.height,m=r.isAnimationActive,v=r.background,p=r.id;if(i||!a||!a.length)return null;var g=this.state.isAnimationFinished,x=dn("recharts-bar",o),y=l&&l.allowDataOverflow,b=c&&c.allowDataOverflow,w=y||b,N=Qt(p)?this.id:p;return ge.createElement(yn,{className:x},y||b?ge.createElement("defs",null,ge.createElement("clipPath",{id:"clipPath-".concat(N)},ge.createElement("rect",{x:y?d:d-h/2,y:b?u:u-f/2,width:y?h:h*2,height:b?f:f*2}))):null,ge.createElement(yn,{className:"recharts-bar-rectangles",clipPath:w?"url(#clipPath-".concat(N,")"):null},v?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(w,N),(!m||g)&&jd.renderCallByParent(this.props,a))}}],[{key:"getDerivedStateFromProps",value:function(r,i){return r.animationId!==i.prevAnimationId?{prevAnimationId:r.animationId,curData:r.data,prevData:i.curData}:r.data!==i.curData?{curData:r.data}:null}}])}(A.PureComponent);yoe=Rv;Hf(Rv,"displayName","Bar");Hf(Rv,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!pc.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});Hf(Rv,"getComposedData",function(t){var e=t.props,n=t.item,r=t.barPosition,i=t.bandSize,a=t.xAxis,o=t.yAxis,l=t.xAxisTicks,c=t.yAxisTicks,d=t.stackedData,u=t.dataStartIndex,h=t.displayedData,f=t.offset,m=F9e(r,n);if(!m)return null;var v=e.layout,p=n.type.defaultProps,g=p!==void 0?Cs(Cs({},p),n.props):n.props,x=g.dataKey,y=g.children,b=g.minPointSize,w=v==="horizontal"?o:a,N=d?w.scale.domain():null,E=H9e({numericAxis:w}),C=Mo(y,dD),j=h.map(function(I,k){var D,P,R,_,M,U;d?D=$9e(d[u+k],N):(D=xs(I,x),Array.isArray(D)||(D=[E,D]));var F=UWe(b,yoe.defaultProps.minPointSize)(D[1],k);if(v==="horizontal"){var z,H=[o.scale(D[0]),o.scale(D[1])],W=H[0],$=H[1];P=pW({axis:a,ticks:l,bandSize:i,offset:m.offset,entry:I,index:k}),R=(z=$??W)!==null&&z!==void 0?z:void 0,_=m.size;var L=W-$;if(M=Number.isNaN(L)?0:L,U={x:P,y:o.y,width:_,height:o.height},Math.abs(F)>0&&Math.abs(M)<Math.abs(F)){var q=ha(M||F)*(Math.abs(F)-Math.abs(M));R-=q,M+=q}}else{var Y=[a.scale(D[0]),a.scale(D[1])],J=Y[0],ne=Y[1];if(P=J,R=pW({axis:o,ticks:c,bandSize:i,offset:m.offset,entry:I,index:k}),_=ne-J,M=m.size,U={x:a.x,y:R,width:a.width,height:M},Math.abs(F)>0&&Math.abs(_)<Math.abs(F)){var re=ha(_||F)*(Math.abs(F)-Math.abs(_));_+=re}}return Cs(Cs(Cs({},I),{},{x:P,y:R,width:_,height:M,value:d?D:D[1],payload:I,background:U},C&&C[k]&&C[k].props),{},{tooltipPayload:[Wae(n,I)],tooltipPosition:{x:P+_/2,y:R+M/2}})});return Cs({data:j,layout:v},f)});function L2(t){"@babel/helpers - typeof";return L2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},L2(t)}function JWe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function PG(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,joe(r.key),r)}}function eGe(t,e,n){return e&&PG(t.prototype,e),n&&PG(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function TG(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ic(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?TG(Object(n),!0).forEach(function(r){PD(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):TG(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function PD(t,e,n){return e=joe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function joe(t){var e=tGe(t,"string");return L2(e)=="symbol"?e:e+""}function tGe(t,e){if(L2(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(L2(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var R7=function(e,n,r,i,a){var o=e.width,l=e.height,c=e.layout,d=e.children,u=Object.keys(n),h={left:r.left,leftMirror:r.left,right:o-r.right,rightMirror:o-r.right,top:r.top,topMirror:r.top,bottom:l-r.bottom,bottomMirror:l-r.bottom},f=!!wo(d,Rv);return u.reduce(function(m,v){var p=n[v],g=p.orientation,x=p.domain,y=p.padding,b=y===void 0?{}:y,w=p.mirror,N=p.reversed,E="".concat(g).concat(w?"Mirror":""),C,j,I,k,D;if(p.type==="number"&&(p.padding==="gap"||p.padding==="no-gap")){var P=x[1]-x[0],R=1/0,_=p.categoricalDomain.sort(EIe);if(_.forEach(function(Y,J){J>0&&(R=Math.min((Y||0)-(_[J-1]||0),R))}),Number.isFinite(R)){var M=R/P,U=p.layout==="vertical"?r.height:r.width;if(p.padding==="gap"&&(C=M*U/2),p.padding==="no-gap"){var F=fa(e.barCategoryGap,M*U),z=M*U/2;C=z-F-(z-F)/U*F}}}i==="xAxis"?j=[r.left+(b.left||0)+(C||0),r.left+r.width-(b.right||0)-(C||0)]:i==="yAxis"?j=c==="horizontal"?[r.top+r.height-(b.bottom||0),r.top+(b.top||0)]:[r.top+(b.top||0)+(C||0),r.top+r.height-(b.bottom||0)-(C||0)]:j=p.range,N&&(j=[j[1],j[0]]);var H=Uae(p,a,f),W=H.scale,$=H.realScaleType;W.domain(x).range(j),Vae(W);var L=qae(W,ic(ic({},p),{},{realScaleType:$}));i==="xAxis"?(D=g==="top"&&!w||g==="bottom"&&w,I=r.left,k=h[E]-D*p.height):i==="yAxis"&&(D=g==="left"&&!w||g==="right"&&w,I=h[E]-D*p.width,k=r.top);var q=ic(ic(ic({},p),L),{},{realScaleType:$,x:I,y:k,scale:W,width:i==="xAxis"?r.width:p.width,height:i==="yAxis"?r.height:p.height});return q.bandSize=d4(q,L),!p.hide&&i==="xAxis"?h[E]+=(D?-1:1)*q.height:p.hide||(h[E]+=(D?-1:1)*q.width),ic(ic({},m),{},PD({},v,q))},{})},Noe=function(e,n){var r=e.x,i=e.y,a=n.x,o=n.y;return{x:Math.min(r,a),y:Math.min(i,o),width:Math.abs(a-r),height:Math.abs(o-i)}},nGe=function(e){var n=e.x1,r=e.y1,i=e.x2,a=e.y2;return Noe({x:n,y:r},{x:i,y:a})},Soe=function(){function t(e){JWe(this,t),this.scale=e}return eGe(t,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=r.bandAware,a=r.position;if(n!==void 0){if(a)switch(a){case"start":return this.scale(n);case"middle":{var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+o}case"end":{var l=this.bandwidth?this.bandwidth():0;return this.scale(n)+l}default:return this.scale(n)}if(i){var c=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+c}return this.scale(n)}}},{key:"isInRange",value:function(n){var r=this.range(),i=r[0],a=r[r.length-1];return i<=a?n>=i&&n<=a:n>=a&&n<=i}}],[{key:"create",value:function(n){return new t(n)}}])}();PD(Soe,"EPS",1e-4);var M7=function(e){var n=Object.keys(e).reduce(function(r,i){return ic(ic({},r),{},PD({},i,Soe.create(e[i])))},{});return ic(ic({},n),{},{apply:function(i){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=a.bandAware,l=a.position;return jWe(i,function(c,d){return n[d].apply(c,{bandAware:o,position:l})})},isInRange:function(i){return xoe(i,function(a,o){return n[o].isInRange(a)})}})};function rGe(t){return(t%180+180)%180}var sGe=function(e){var n=e.width,r=e.height,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=rGe(i),o=a*Math.PI/180,l=Math.atan(r/n),c=o>l&&o<Math.PI-l?r/Math.sin(o):n/Math.cos(o);return Math.abs(c)},iGe=Od,aGe=_A,oGe=oD;function lGe(t){return function(e,n,r){var i=Object(e);if(!aGe(e)){var a=iGe(n);e=oGe(e),n=function(l){return a(i[l],l,i)}}var o=t(e,n,r);return o>-1?i[a?e[o]:o]:void 0}}var cGe=lGe,dGe=moe;function uGe(t){var e=dGe(t),n=e%1;return e===e?n?e-n:e:0}var hGe=uGe,fGe=jie,mGe=Od,pGe=hGe,gGe=Math.max;function vGe(t,e,n){var r=t==null?0:t.length;if(!r)return-1;var i=n==null?0:pGe(n);return i<0&&(i=gGe(r+i,0)),fGe(t,mGe(e),i)}var xGe=vGe,yGe=cGe,bGe=xGe,wGe=yGe(bGe),jGe=wGe;const NGe=$n(jGe);var SGe=PTe(function(t){return{x:t.left,y:t.top,width:t.width,height:t.height}},function(t){return["l",t.left,"t",t.top,"w",t.width,"h",t.height].join("")}),F7=A.createContext(void 0),$7=A.createContext(void 0),Aoe=A.createContext(void 0),Coe=A.createContext({}),Eoe=A.createContext(void 0),Poe=A.createContext(0),Toe=A.createContext(0),IG=function(e){var n=e.state,r=n.xAxisMap,i=n.yAxisMap,a=n.offset,o=e.clipPathId,l=e.children,c=e.width,d=e.height,u=SGe(a);return ge.createElement(F7.Provider,{value:r},ge.createElement($7.Provider,{value:i},ge.createElement(Coe.Provider,{value:a},ge.createElement(Aoe.Provider,{value:u},ge.createElement(Eoe.Provider,{value:o},ge.createElement(Poe.Provider,{value:d},ge.createElement(Toe.Provider,{value:c},l)))))))},AGe=function(){return A.useContext(Eoe)},Ioe=function(e){var n=A.useContext(F7);n==null&&xm(!1);var r=n[e];return r==null&&xm(!1),r},CGe=function(){var e=A.useContext(F7);return Yh(e)},EGe=function(){var e=A.useContext($7),n=NGe(e,function(r){return xoe(r.domain,Number.isFinite)});return n||Yh(e)},Doe=function(e){var n=A.useContext($7);n==null&&xm(!1);var r=n[e];return r==null&&xm(!1),r},PGe=function(){var e=A.useContext(Aoe);return e},TGe=function(){return A.useContext(Coe)},B7=function(){return A.useContext(Toe)},z7=function(){return A.useContext(Poe)};function Pb(t){"@babel/helpers - typeof";return Pb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Pb(t)}function IGe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function DG(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,_oe(r.key),r)}}function DGe(t,e,n){return e&&DG(t.prototype,e),n&&DG(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function kGe(t,e,n){return e=E4(e),_Ge(t,koe()?Reflect.construct(e,n||[],E4(t).constructor):e.apply(t,n))}function _Ge(t,e){if(e&&(Pb(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return OGe(t)}function OGe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function koe(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(koe=function(){return!!t})()}function E4(t){return E4=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},E4(t)}function LGe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&YF(t,e)}function YF(t,e){return YF=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},YF(t,e)}function kG(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function _G(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?kG(Object(n),!0).forEach(function(r){U7(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):kG(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function U7(t,e,n){return e=_oe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _oe(t){var e=RGe(t,"string");return Pb(e)=="symbol"?e:e+""}function RGe(t,e){if(Pb(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Pb(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function MGe(t,e){return zGe(t)||BGe(t,e)||$Ge(t,e)||FGe()}function FGe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $Ge(t,e){if(t){if(typeof t=="string")return OG(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return OG(t,e)}}function OG(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function BGe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,o,l=[],c=!0,d=!1;try{if(a=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==e);c=!0);}catch(u){d=!0,i=u}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw i}}return l}}function zGe(t){if(Array.isArray(t))return t}function XF(){return XF=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},XF.apply(this,arguments)}var UGe=function(e,n){var r;return ge.isValidElement(e)?r=ge.cloneElement(e,n):Wt(e)?r=e(n):r=ge.createElement("line",XF({},n,{className:"recharts-reference-line-line"})),r},VGe=function(e,n,r,i,a,o,l,c,d){var u=a.x,h=a.y,f=a.width,m=a.height;if(r){var v=d.y,p=e.y.apply(v,{position:o});if(Nd(d,"discard")&&!e.y.isInRange(p))return null;var g=[{x:u+f,y:p},{x:u,y:p}];return c==="left"?g.reverse():g}if(n){var x=d.x,y=e.x.apply(x,{position:o});if(Nd(d,"discard")&&!e.x.isInRange(y))return null;var b=[{x:y,y:h+m},{x:y,y:h}];return l==="top"?b.reverse():b}if(i){var w=d.segment,N=w.map(function(E){return e.apply(E,{position:o})});return Nd(d,"discard")&&mWe(N,function(E){return!e.isInRange(E)})?null:N}return null};function qGe(t){var e=t.x,n=t.y,r=t.segment,i=t.xAxisId,a=t.yAxisId,o=t.shape,l=t.className,c=t.alwaysShow,d=AGe(),u=Ioe(i),h=Doe(a),f=PGe();if(!d||!f)return null;mc(c===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var m=M7({x:u.scale,y:h.scale}),v=Vs(e),p=Vs(n),g=r&&r.length===2,x=VGe(m,v,p,g,f,t.position,u.orientation,h.orientation,t);if(!x)return null;var y=MGe(x,2),b=y[0],w=b.x,N=b.y,E=y[1],C=E.x,j=E.y,I=Nd(t,"hidden")?"url(#".concat(d,")"):void 0,k=_G(_G({clipPath:I},_t(t,!0)),{},{x1:w,y1:N,x2:C,y2:j});return ge.createElement(yn,{className:dn("recharts-reference-line",l)},UGe(o,k),si.renderCallByParent(t,nGe({x1:w,y1:N,x2:C,y2:j})))}var V7=function(t){function e(){return IGe(this,e),kGe(this,e,arguments)}return LGe(e,t),DGe(e,[{key:"render",value:function(){return ge.createElement(qGe,this.props)}}])}(ge.Component);U7(V7,"displayName","ReferenceLine");U7(V7,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function ZF(){return ZF=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ZF.apply(this,arguments)}function Tb(t){"@babel/helpers - typeof";return Tb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Tb(t)}function LG(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function RG(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?LG(Object(n),!0).forEach(function(r){TD(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):LG(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function HGe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function MG(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Loe(r.key),r)}}function WGe(t,e,n){return e&&MG(t.prototype,e),n&&MG(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function GGe(t,e,n){return e=P4(e),KGe(t,Ooe()?Reflect.construct(e,n||[],P4(t).constructor):e.apply(t,n))}function KGe(t,e){if(e&&(Tb(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return YGe(t)}function YGe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ooe(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Ooe=function(){return!!t})()}function P4(t){return P4=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},P4(t)}function XGe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&QF(t,e)}function QF(t,e){return QF=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},QF(t,e)}function TD(t,e,n){return e=Loe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Loe(t){var e=ZGe(t,"string");return Tb(e)=="symbol"?e:e+""}function ZGe(t,e){if(Tb(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Tb(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var QGe=function(e){var n=e.x,r=e.y,i=e.xAxis,a=e.yAxis,o=M7({x:i.scale,y:a.scale}),l=o.apply({x:n,y:r},{bandAware:!0});return Nd(e,"discard")&&!o.isInRange(l)?null:l},ID=function(t){function e(){return HGe(this,e),GGe(this,e,arguments)}return XGe(e,t),WGe(e,[{key:"render",value:function(){var r=this.props,i=r.x,a=r.y,o=r.r,l=r.alwaysShow,c=r.clipPathId,d=Vs(i),u=Vs(a);if(mc(l===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!d||!u)return null;var h=QGe(this.props);if(!h)return null;var f=h.x,m=h.y,v=this.props,p=v.shape,g=v.className,x=Nd(this.props,"hidden")?"url(#".concat(c,")"):void 0,y=RG(RG({clipPath:x},_t(this.props,!0)),{},{cx:f,cy:m});return ge.createElement(yn,{className:dn("recharts-reference-dot",g)},e.renderDot(p,y),si.renderCallByParent(this.props,{x:f-o,y:m-o,width:2*o,height:2*o}))}}])}(ge.Component);TD(ID,"displayName","ReferenceDot");TD(ID,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});TD(ID,"renderDot",function(t,e){var n;return ge.isValidElement(t)?n=ge.cloneElement(t,e):Wt(t)?n=t(e):n=ge.createElement($A,ZF({},e,{cx:e.cx,cy:e.cy,className:"recharts-reference-dot-dot"})),n});function JF(){return JF=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},JF.apply(this,arguments)}function Ib(t){"@babel/helpers - typeof";return Ib=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ib(t)}function FG(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function $G(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?FG(Object(n),!0).forEach(function(r){DD(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):FG(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function JGe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function BG(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Moe(r.key),r)}}function eKe(t,e,n){return e&&BG(t.prototype,e),n&&BG(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function tKe(t,e,n){return e=T4(e),nKe(t,Roe()?Reflect.construct(e,n||[],T4(t).constructor):e.apply(t,n))}function nKe(t,e){if(e&&(Ib(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return rKe(t)}function rKe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Roe(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Roe=function(){return!!t})()}function T4(t){return T4=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},T4(t)}function sKe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&e6(t,e)}function e6(t,e){return e6=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},e6(t,e)}function DD(t,e,n){return e=Moe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Moe(t){var e=iKe(t,"string");return Ib(e)=="symbol"?e:e+""}function iKe(t,e){if(Ib(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Ib(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var aKe=function(e,n,r,i,a){var o=a.x1,l=a.x2,c=a.y1,d=a.y2,u=a.xAxis,h=a.yAxis;if(!u||!h)return null;var f=M7({x:u.scale,y:h.scale}),m={x:e?f.x.apply(o,{position:"start"}):f.x.rangeMin,y:r?f.y.apply(c,{position:"start"}):f.y.rangeMin},v={x:n?f.x.apply(l,{position:"end"}):f.x.rangeMax,y:i?f.y.apply(d,{position:"end"}):f.y.rangeMax};return Nd(a,"discard")&&(!f.isInRange(m)||!f.isInRange(v))?null:Noe(m,v)},kD=function(t){function e(){return JGe(this,e),tKe(this,e,arguments)}return sKe(e,t),eKe(e,[{key:"render",value:function(){var r=this.props,i=r.x1,a=r.x2,o=r.y1,l=r.y2,c=r.className,d=r.alwaysShow,u=r.clipPathId;mc(d===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var h=Vs(i),f=Vs(a),m=Vs(o),v=Vs(l),p=this.props.shape;if(!h&&!f&&!m&&!v&&!p)return null;var g=aKe(h,f,m,v,this.props);if(!g&&!p)return null;var x=Nd(this.props,"hidden")?"url(#".concat(u,")"):void 0;return ge.createElement(yn,{className:dn("recharts-reference-area",c)},e.renderRect(p,$G($G({clipPath:x},_t(this.props,!0)),g)),si.renderCallByParent(this.props,g))}}])}(ge.Component);DD(kD,"displayName","ReferenceArea");DD(kD,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});DD(kD,"renderRect",function(t,e){var n;return ge.isValidElement(t)?n=ge.cloneElement(t,e):Wt(t)?n=t(e):n=ge.createElement(L7,JF({},e,{className:"recharts-reference-area-rect"})),n});function Foe(t,e,n){if(e<1)return[];if(e===1&&n===void 0)return t;for(var r=[],i=0;i<t.length;i+=e)if(n===void 0||n(t[i])===!0)r.push(t[i]);else return;return r}function oKe(t,e,n){var r={width:t.width+e.width,height:t.height+e.height};return sGe(r,n)}function lKe(t,e,n){var r=n==="width",i=t.x,a=t.y,o=t.width,l=t.height;return e===1?{start:r?i:a,end:r?i+o:a+l}:{start:r?i+o:a+l,end:r?i:a}}function I4(t,e,n,r,i){if(t*e<t*r||t*e>t*i)return!1;var a=n();return t*(e-t*a/2-r)>=0&&t*(e+t*a/2-i)<=0}function cKe(t,e){return Foe(t,e+1)}function dKe(t,e,n,r,i){for(var a=(r||[]).slice(),o=e.start,l=e.end,c=0,d=1,u=o,h=function(){var v=r==null?void 0:r[c];if(v===void 0)return{v:Foe(r,d)};var p=c,g,x=function(){return g===void 0&&(g=n(v,p)),g},y=v.coordinate,b=c===0||I4(t,y,x,u,l);b||(c=0,u=o,d+=1),b&&(u=y+t*(x()/2+i),c+=d)},f;d<=a.length;)if(f=h(),f)return f.v;return[]}function R2(t){"@babel/helpers - typeof";return R2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},R2(t)}function zG(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Gi(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?zG(Object(n),!0).forEach(function(r){uKe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):zG(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function uKe(t,e,n){return e=hKe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function hKe(t){var e=fKe(t,"string");return R2(e)=="symbol"?e:e+""}function fKe(t,e){if(R2(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(R2(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function mKe(t,e,n,r,i){for(var a=(r||[]).slice(),o=a.length,l=e.start,c=e.end,d=function(f){var m=a[f],v,p=function(){return v===void 0&&(v=n(m,f)),v};if(f===o-1){var g=t*(m.coordinate+t*p()/2-c);a[f]=m=Gi(Gi({},m),{},{tickCoord:g>0?m.coordinate-g*t:m.coordinate})}else a[f]=m=Gi(Gi({},m),{},{tickCoord:m.coordinate});var x=I4(t,m.tickCoord,p,l,c);x&&(c=m.tickCoord-t*(p()/2+i),a[f]=Gi(Gi({},m),{},{isShow:!0}))},u=o-1;u>=0;u--)d(u);return a}function pKe(t,e,n,r,i,a){var o=(r||[]).slice(),l=o.length,c=e.start,d=e.end;if(a){var u=r[l-1],h=n(u,l-1),f=t*(u.coordinate+t*h/2-d);o[l-1]=u=Gi(Gi({},u),{},{tickCoord:f>0?u.coordinate-f*t:u.coordinate});var m=I4(t,u.tickCoord,function(){return h},c,d);m&&(d=u.tickCoord-t*(h/2+i),o[l-1]=Gi(Gi({},u),{},{isShow:!0}))}for(var v=a?l-1:l,p=function(y){var b=o[y],w,N=function(){return w===void 0&&(w=n(b,y)),w};if(y===0){var E=t*(b.coordinate-t*N()/2-c);o[y]=b=Gi(Gi({},b),{},{tickCoord:E<0?b.coordinate-E*t:b.coordinate})}else o[y]=b=Gi(Gi({},b),{},{tickCoord:b.coordinate});var C=I4(t,b.tickCoord,N,c,d);C&&(c=b.tickCoord+t*(N()/2+i),o[y]=Gi(Gi({},b),{},{isShow:!0}))},g=0;g<v;g++)p(g);return o}function q7(t,e,n){var r=t.tick,i=t.ticks,a=t.viewBox,o=t.minTickGap,l=t.orientation,c=t.interval,d=t.tickFormatter,u=t.unit,h=t.angle;if(!i||!i.length||!r)return[];if(ct(c)||pc.isSsr)return cKe(i,typeof c=="number"&&ct(c)?c:0);var f=[],m=l==="top"||l==="bottom"?"width":"height",v=u&&m==="width"?uj(u,{fontSize:e,letterSpacing:n}):{width:0,height:0},p=function(b,w){var N=Wt(d)?d(b.value,w):b.value;return m==="width"?oKe(uj(N,{fontSize:e,letterSpacing:n}),v,h):uj(N,{fontSize:e,letterSpacing:n})[m]},g=i.length>=2?ha(i[1].coordinate-i[0].coordinate):1,x=lKe(a,g,m);return c==="equidistantPreserveStart"?dKe(g,x,p,i,o):(c==="preserveStart"||c==="preserveStartEnd"?f=pKe(g,x,p,i,o,c==="preserveStartEnd"):f=mKe(g,x,p,i,o),f.filter(function(y){return y.isShow}))}var gKe=["viewBox"],vKe=["viewBox"],xKe=["ticks"];function Db(t){"@babel/helpers - typeof";return Db=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Db(t)}function e0(){return e0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},e0.apply(this,arguments)}function UG(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Os(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?UG(Object(n),!0).forEach(function(r){H7(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):UG(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function EO(t,e){if(t==null)return{};var n=yKe(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function yKe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function bKe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function VG(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Boe(r.key),r)}}function wKe(t,e,n){return e&&VG(t.prototype,e),n&&VG(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function jKe(t,e,n){return e=D4(e),NKe(t,$oe()?Reflect.construct(e,n||[],D4(t).constructor):e.apply(t,n))}function NKe(t,e){if(e&&(Db(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return SKe(t)}function SKe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function $oe(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return($oe=function(){return!!t})()}function D4(t){return D4=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},D4(t)}function AKe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&t6(t,e)}function t6(t,e){return t6=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},t6(t,e)}function H7(t,e,n){return e=Boe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Boe(t){var e=CKe(t,"string");return Db(e)=="symbol"?e:e+""}function CKe(t,e){if(Db(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Db(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var u1=function(t){function e(n){var r;return bKe(this,e),r=jKe(this,e,[n]),r.state={fontSize:"",letterSpacing:""},r}return AKe(e,t),wKe(e,[{key:"shouldComponentUpdate",value:function(r,i){var a=r.viewBox,o=EO(r,gKe),l=this.props,c=l.viewBox,d=EO(l,vKe);return!f0(a,c)||!f0(o,d)||!f0(i,this.state)}},{key:"componentDidMount",value:function(){var r=this.layerReference;if(r){var i=r.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];i&&this.setState({fontSize:window.getComputedStyle(i).fontSize,letterSpacing:window.getComputedStyle(i).letterSpacing})}}},{key:"getTickLineCoord",value:function(r){var i=this.props,a=i.x,o=i.y,l=i.width,c=i.height,d=i.orientation,u=i.tickSize,h=i.mirror,f=i.tickMargin,m,v,p,g,x,y,b=h?-1:1,w=r.tickSize||u,N=ct(r.tickCoord)?r.tickCoord:r.coordinate;switch(d){case"top":m=v=r.coordinate,g=o+ +!h*c,p=g-b*w,y=p-b*f,x=N;break;case"left":p=g=r.coordinate,v=a+ +!h*l,m=v-b*w,x=m-b*f,y=N;break;case"right":p=g=r.coordinate,v=a+ +h*l,m=v+b*w,x=m+b*f,y=N;break;default:m=v=r.coordinate,g=o+ +h*c,p=g+b*w,y=p+b*f,x=N;break}return{line:{x1:m,y1:p,x2:v,y2:g},tick:{x,y}}}},{key:"getTickTextAnchor",value:function(){var r=this.props,i=r.orientation,a=r.mirror,o;switch(i){case"left":o=a?"start":"end";break;case"right":o=a?"end":"start";break;default:o="middle";break}return o}},{key:"getTickVerticalAnchor",value:function(){var r=this.props,i=r.orientation,a=r.mirror,o="end";switch(i){case"left":case"right":o="middle";break;case"top":o=a?"start":"end";break;default:o=a?"end":"start";break}return o}},{key:"renderAxisLine",value:function(){var r=this.props,i=r.x,a=r.y,o=r.width,l=r.height,c=r.orientation,d=r.mirror,u=r.axisLine,h=Os(Os(Os({},_t(this.props,!1)),_t(u,!1)),{},{fill:"none"});if(c==="top"||c==="bottom"){var f=+(c==="top"&&!d||c==="bottom"&&d);h=Os(Os({},h),{},{x1:i,y1:a+f*l,x2:i+o,y2:a+f*l})}else{var m=+(c==="left"&&!d||c==="right"&&d);h=Os(Os({},h),{},{x1:i+m*o,y1:a,x2:i+m*o,y2:a+l})}return ge.createElement("line",e0({},h,{className:dn("recharts-cartesian-axis-line",Ro(u,"className"))}))}},{key:"renderTicks",value:function(r,i,a){var o=this,l=this.props,c=l.tickLine,d=l.stroke,u=l.tick,h=l.tickFormatter,f=l.unit,m=q7(Os(Os({},this.props),{},{ticks:r}),i,a),v=this.getTickTextAnchor(),p=this.getTickVerticalAnchor(),g=_t(this.props,!1),x=_t(u,!1),y=Os(Os({},g),{},{fill:"none"},_t(c,!1)),b=m.map(function(w,N){var E=o.getTickLineCoord(w),C=E.line,j=E.tick,I=Os(Os(Os(Os({textAnchor:v,verticalAnchor:p},g),{},{stroke:"none",fill:d},x),j),{},{index:N,payload:w,visibleTicksCount:m.length,tickFormatter:h});return ge.createElement(yn,e0({className:"recharts-cartesian-axis-tick",key:"tick-".concat(w.value,"-").concat(w.coordinate,"-").concat(w.tickCoord)},pv(o.props,w,N)),c&&ge.createElement("line",e0({},y,C,{className:dn("recharts-cartesian-axis-tick-line",Ro(c,"className"))})),u&&e.renderTickItem(u,I,"".concat(Wt(h)?h(w.value,N):w.value).concat(f||"")))});return ge.createElement("g",{className:"recharts-cartesian-axis-ticks"},b)}},{key:"render",value:function(){var r=this,i=this.props,a=i.axisLine,o=i.width,l=i.height,c=i.ticksGenerator,d=i.className,u=i.hide;if(u)return null;var h=this.props,f=h.ticks,m=EO(h,xKe),v=f;return Wt(c)&&(v=f&&f.length>0?c(this.props):c(m)),o<=0||l<=0||!v||!v.length?null:ge.createElement(yn,{className:dn("recharts-cartesian-axis",d),ref:function(g){r.layerReference=g}},a&&this.renderAxisLine(),this.renderTicks(v,this.state.fontSize,this.state.letterSpacing),si.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(r,i,a){var o,l=dn(i.className,"recharts-cartesian-axis-tick-value");return ge.isValidElement(r)?o=ge.cloneElement(r,Os(Os({},i),{},{className:l})):Wt(r)?o=r(Os(Os({},i),{},{className:l})):o=ge.createElement(gv,e0({},i,{className:"recharts-cartesian-axis-tick-value"}),a),o}}])}(A.Component);H7(u1,"displayName","CartesianAxis");H7(u1,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var EKe=["x1","y1","x2","y2","key"],PKe=["offset"];function yv(t){"@babel/helpers - typeof";return yv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yv(t)}function qG(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Yi(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?qG(Object(n),!0).forEach(function(r){TKe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):qG(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function TKe(t,e,n){return e=IKe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function IKe(t){var e=DKe(t,"string");return yv(e)=="symbol"?e:e+""}function DKe(t,e){if(yv(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(yv(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function jp(){return jp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},jp.apply(this,arguments)}function HG(t,e){if(t==null)return{};var n=kKe(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function kKe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var _Ke=function(e){var n=e.fill;if(!n||n==="none")return null;var r=e.fillOpacity,i=e.x,a=e.y,o=e.width,l=e.height,c=e.ry;return ge.createElement("rect",{x:i,y:a,ry:c,width:o,height:l,stroke:"none",fill:n,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function zoe(t,e){var n;if(ge.isValidElement(t))n=ge.cloneElement(t,e);else if(Wt(t))n=t(e);else{var r=e.x1,i=e.y1,a=e.x2,o=e.y2,l=e.key,c=HG(e,EKe),d=_t(c,!1);d.offset;var u=HG(d,PKe);n=ge.createElement("line",jp({},u,{x1:r,y1:i,x2:a,y2:o,fill:"none",key:l}))}return n}function OKe(t){var e=t.x,n=t.width,r=t.horizontal,i=r===void 0?!0:r,a=t.horizontalPoints;if(!i||!a||!a.length)return null;var o=a.map(function(l,c){var d=Yi(Yi({},t),{},{x1:e,y1:l,x2:e+n,y2:l,key:"line-".concat(c),index:c});return zoe(i,d)});return ge.createElement("g",{className:"recharts-cartesian-grid-horizontal"},o)}function LKe(t){var e=t.y,n=t.height,r=t.vertical,i=r===void 0?!0:r,a=t.verticalPoints;if(!i||!a||!a.length)return null;var o=a.map(function(l,c){var d=Yi(Yi({},t),{},{x1:l,y1:e,x2:l,y2:e+n,key:"line-".concat(c),index:c});return zoe(i,d)});return ge.createElement("g",{className:"recharts-cartesian-grid-vertical"},o)}function RKe(t){var e=t.horizontalFill,n=t.fillOpacity,r=t.x,i=t.y,a=t.width,o=t.height,l=t.horizontalPoints,c=t.horizontal,d=c===void 0?!0:c;if(!d||!e||!e.length)return null;var u=l.map(function(f){return Math.round(f+i-i)}).sort(function(f,m){return f-m});i!==u[0]&&u.unshift(0);var h=u.map(function(f,m){var v=!u[m+1],p=v?i+o-f:u[m+1]-f;if(p<=0)return null;var g=m%e.length;return ge.createElement("rect",{key:"react-".concat(m),y:f,x:r,height:p,width:a,stroke:"none",fill:e[g],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return ge.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},h)}function MKe(t){var e=t.vertical,n=e===void 0?!0:e,r=t.verticalFill,i=t.fillOpacity,a=t.x,o=t.y,l=t.width,c=t.height,d=t.verticalPoints;if(!n||!r||!r.length)return null;var u=d.map(function(f){return Math.round(f+a-a)}).sort(function(f,m){return f-m});a!==u[0]&&u.unshift(0);var h=u.map(function(f,m){var v=!u[m+1],p=v?a+l-f:u[m+1]-f;if(p<=0)return null;var g=m%r.length;return ge.createElement("rect",{key:"react-".concat(m),x:f,y:o,width:p,height:c,stroke:"none",fill:r[g],fillOpacity:i,className:"recharts-cartesian-grid-bg"})});return ge.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},h)}var FKe=function(e,n){var r=e.xAxis,i=e.width,a=e.height,o=e.offset;return zae(q7(Yi(Yi(Yi({},u1.defaultProps),r),{},{ticks:Wu(r,!0),viewBox:{x:0,y:0,width:i,height:a}})),o.left,o.left+o.width,n)},$Ke=function(e,n){var r=e.yAxis,i=e.width,a=e.height,o=e.offset;return zae(q7(Yi(Yi(Yi({},u1.defaultProps),r),{},{ticks:Wu(r,!0),viewBox:{x:0,y:0,width:i,height:a}})),o.top,o.top+o.height,n)},Sx={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function OE(t){var e,n,r,i,a,o,l=B7(),c=z7(),d=TGe(),u=Yi(Yi({},t),{},{stroke:(e=t.stroke)!==null&&e!==void 0?e:Sx.stroke,fill:(n=t.fill)!==null&&n!==void 0?n:Sx.fill,horizontal:(r=t.horizontal)!==null&&r!==void 0?r:Sx.horizontal,horizontalFill:(i=t.horizontalFill)!==null&&i!==void 0?i:Sx.horizontalFill,vertical:(a=t.vertical)!==null&&a!==void 0?a:Sx.vertical,verticalFill:(o=t.verticalFill)!==null&&o!==void 0?o:Sx.verticalFill,x:ct(t.x)?t.x:d.left,y:ct(t.y)?t.y:d.top,width:ct(t.width)?t.width:d.width,height:ct(t.height)?t.height:d.height}),h=u.x,f=u.y,m=u.width,v=u.height,p=u.syncWithTicks,g=u.horizontalValues,x=u.verticalValues,y=CGe(),b=EGe();if(!ct(m)||m<=0||!ct(v)||v<=0||!ct(h)||h!==+h||!ct(f)||f!==+f)return null;var w=u.verticalCoordinatesGenerator||FKe,N=u.horizontalCoordinatesGenerator||$Ke,E=u.horizontalPoints,C=u.verticalPoints;if((!E||!E.length)&&Wt(N)){var j=g&&g.length,I=N({yAxis:b?Yi(Yi({},b),{},{ticks:j?g:b.ticks}):void 0,width:l,height:c,offset:d},j?!0:p);mc(Array.isArray(I),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(yv(I),"]")),Array.isArray(I)&&(E=I)}if((!C||!C.length)&&Wt(w)){var k=x&&x.length,D=w({xAxis:y?Yi(Yi({},y),{},{ticks:k?x:y.ticks}):void 0,width:l,height:c,offset:d},k?!0:p);mc(Array.isArray(D),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(yv(D),"]")),Array.isArray(D)&&(C=D)}return ge.createElement("g",{className:"recharts-cartesian-grid"},ge.createElement(_Ke,{fill:u.fill,fillOpacity:u.fillOpacity,x:u.x,y:u.y,width:u.width,height:u.height,ry:u.ry}),ge.createElement(OKe,jp({},u,{offset:d,horizontalPoints:E,xAxis:y,yAxis:b})),ge.createElement(LKe,jp({},u,{offset:d,verticalPoints:C,xAxis:y,yAxis:b})),ge.createElement(RKe,jp({},u,{horizontalPoints:E})),ge.createElement(MKe,jp({},u,{verticalPoints:C})))}OE.displayName="CartesianGrid";var BKe=["type","layout","connectNulls","ref"],zKe=["key"];function kb(t){"@babel/helpers - typeof";return kb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},kb(t)}function WG(t,e){if(t==null)return{};var n=UKe(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function UKe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function vj(){return vj=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},vj.apply(this,arguments)}function GG(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function eo(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?GG(Object(n),!0).forEach(function(r){ac(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):GG(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Ax(t){return WKe(t)||HKe(t)||qKe(t)||VKe()}function VKe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function qKe(t,e){if(t){if(typeof t=="string")return n6(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return n6(t,e)}}function HKe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function WKe(t){if(Array.isArray(t))return n6(t)}function n6(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function GKe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function KG(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Voe(r.key),r)}}function KKe(t,e,n){return e&&KG(t.prototype,e),n&&KG(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function YKe(t,e,n){return e=k4(e),XKe(t,Uoe()?Reflect.construct(e,n||[],k4(t).constructor):e.apply(t,n))}function XKe(t,e){if(e&&(kb(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ZKe(t)}function ZKe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Uoe(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Uoe=function(){return!!t})()}function k4(t){return k4=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},k4(t)}function QKe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&r6(t,e)}function r6(t,e){return r6=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},r6(t,e)}function ac(t,e,n){return e=Voe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Voe(t){var e=JKe(t,"string");return kb(e)=="symbol"?e:e+""}function JKe(t,e){if(kb(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(kb(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var BA=function(t){function e(){var n;GKe(this,e);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return n=YKe(this,e,[].concat(i)),ac(n,"state",{isAnimationFinished:!0,totalLength:0}),ac(n,"generateSimpleStrokeDasharray",function(o,l){return"".concat(l,"px ").concat(o-l,"px")}),ac(n,"getStrokeDasharray",function(o,l,c){var d=c.reduce(function(x,y){return x+y});if(!d)return n.generateSimpleStrokeDasharray(l,o);for(var u=Math.floor(o/d),h=o%d,f=l-o,m=[],v=0,p=0;v<c.length;p+=c[v],++v)if(p+c[v]>h){m=[].concat(Ax(c.slice(0,v)),[h-p]);break}var g=m.length%2===0?[0,f]:[f];return[].concat(Ax(e.repeat(c,u)),Ax(m),g).map(function(x){return"".concat(x,"px")}).join(", ")}),ac(n,"id",kv("recharts-line-")),ac(n,"pathRef",function(o){n.mainCurve=o}),ac(n,"handleAnimationEnd",function(){n.setState({isAnimationFinished:!0}),n.props.onAnimationEnd&&n.props.onAnimationEnd()}),ac(n,"handleAnimationStart",function(){n.setState({isAnimationFinished:!1}),n.props.onAnimationStart&&n.props.onAnimationStart()}),n}return QKe(e,t),KKe(e,[{key:"componentDidMount",value:function(){if(this.props.isAnimationActive){var r=this.getTotalLength();this.setState({totalLength:r})}}},{key:"componentDidUpdate",value:function(){if(this.props.isAnimationActive){var r=this.getTotalLength();r!==this.state.totalLength&&this.setState({totalLength:r})}}},{key:"getTotalLength",value:function(){var r=this.mainCurve;try{return r&&r.getTotalLength&&r.getTotalLength()||0}catch{return 0}}},{key:"renderErrorBar",value:function(r,i){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var a=this.props,o=a.points,l=a.xAxis,c=a.yAxis,d=a.layout,u=a.children,h=Mo(u,FA);if(!h)return null;var f=function(p,g){return{x:p.x,y:p.y,value:p.value,errorVal:xs(p.payload,g)}},m={clipPath:r?"url(#clipPath-".concat(i,")"):null};return ge.createElement(yn,m,h.map(function(v){return ge.cloneElement(v,{key:"bar-".concat(v.props.dataKey),data:o,xAxis:l,yAxis:c,layout:d,dataPointFormatter:f})}))}},{key:"renderDots",value:function(r,i,a){var o=this.props.isAnimationActive;if(o&&!this.state.isAnimationFinished)return null;var l=this.props,c=l.dot,d=l.points,u=l.dataKey,h=_t(this.props,!1),f=_t(c,!0),m=d.map(function(p,g){var x=eo(eo(eo({key:"dot-".concat(g),r:3},h),f),{},{index:g,cx:p.x,cy:p.y,value:p.value,dataKey:u,payload:p.payload,points:d});return e.renderDotItem(c,x)}),v={clipPath:r?"url(#clipPath-".concat(i?"":"dots-").concat(a,")"):null};return ge.createElement(yn,vj({className:"recharts-line-dots",key:"dots"},v),m)}},{key:"renderCurveStatically",value:function(r,i,a,o){var l=this.props,c=l.type,d=l.layout,u=l.connectNulls;l.ref;var h=WG(l,BKe),f=eo(eo(eo({},_t(h,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:i?"url(#clipPath-".concat(a,")"):null,points:r},o),{},{type:c,layout:d,connectNulls:u});return ge.createElement(tv,vj({},f,{pathRef:this.pathRef}))}},{key:"renderCurveWithAnimation",value:function(r,i){var a=this,o=this.props,l=o.points,c=o.strokeDasharray,d=o.isAnimationActive,u=o.animationBegin,h=o.animationDuration,f=o.animationEasing,m=o.animationId,v=o.animateNewValues,p=o.width,g=o.height,x=this.state,y=x.prevPoints,b=x.totalLength;return ge.createElement(jm,{begin:u,duration:h,isActive:d,easing:f,from:{t:0},to:{t:1},key:"line-".concat(m),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(w){var N=w.t;if(y){var E=y.length/l.length,C=l.map(function(P,R){var _=Math.floor(R*E);if(y[_]){var M=y[_],U=zs(M.x,P.x),F=zs(M.y,P.y);return eo(eo({},P),{},{x:U(N),y:F(N)})}if(v){var z=zs(p*2,P.x),H=zs(g/2,P.y);return eo(eo({},P),{},{x:z(N),y:H(N)})}return eo(eo({},P),{},{x:P.x,y:P.y})});return a.renderCurveStatically(C,r,i)}var j=zs(0,b),I=j(N),k;if(c){var D="".concat(c).split(/[,\s]+/gim).map(function(P){return parseFloat(P)});k=a.getStrokeDasharray(I,b,D)}else k=a.generateSimpleStrokeDasharray(b,I);return a.renderCurveStatically(l,r,i,{strokeDasharray:k})})}},{key:"renderCurve",value:function(r,i){var a=this.props,o=a.points,l=a.isAnimationActive,c=this.state,d=c.prevPoints,u=c.totalLength;return l&&o&&o.length&&(!d&&u>0||!vv(d,o))?this.renderCurveWithAnimation(r,i):this.renderCurveStatically(o,r,i)}},{key:"render",value:function(){var r,i=this.props,a=i.hide,o=i.dot,l=i.points,c=i.className,d=i.xAxis,u=i.yAxis,h=i.top,f=i.left,m=i.width,v=i.height,p=i.isAnimationActive,g=i.id;if(a||!l||!l.length)return null;var x=this.state.isAnimationFinished,y=l.length===1,b=dn("recharts-line",c),w=d&&d.allowDataOverflow,N=u&&u.allowDataOverflow,E=w||N,C=Qt(g)?this.id:g,j=(r=_t(o,!1))!==null&&r!==void 0?r:{r:3,strokeWidth:2},I=j.r,k=I===void 0?3:I,D=j.strokeWidth,P=D===void 0?2:D,R=_se(o)?o:{},_=R.clipDot,M=_===void 0?!0:_,U=k*2+P;return ge.createElement(yn,{className:b},w||N?ge.createElement("defs",null,ge.createElement("clipPath",{id:"clipPath-".concat(C)},ge.createElement("rect",{x:w?f:f-m/2,y:N?h:h-v/2,width:w?m:m*2,height:N?v:v*2})),!M&&ge.createElement("clipPath",{id:"clipPath-dots-".concat(C)},ge.createElement("rect",{x:f-U/2,y:h-U/2,width:m+U,height:v+U}))):null,!y&&this.renderCurve(E,C),this.renderErrorBar(E,C),(y||o)&&this.renderDots(E,M,C),(!p||x)&&jd.renderCallByParent(this.props,l))}}],[{key:"getDerivedStateFromProps",value:function(r,i){return r.animationId!==i.prevAnimationId?{prevAnimationId:r.animationId,curPoints:r.points,prevPoints:i.curPoints}:r.points!==i.curPoints?{curPoints:r.points}:null}},{key:"repeat",value:function(r,i){for(var a=r.length%2!==0?[].concat(Ax(r),[0]):r,o=[],l=0;l<i;++l)o=[].concat(Ax(o),Ax(a));return o}},{key:"renderDotItem",value:function(r,i){var a;if(ge.isValidElement(r))a=ge.cloneElement(r,i);else if(Wt(r))a=r(i);else{var o=i.key,l=WG(i,zKe),c=dn("recharts-line-dot",typeof r!="boolean"?r.className:"");a=ge.createElement($A,vj({key:o},l,{className:c}))}return a}}])}(A.PureComponent);ac(BA,"displayName","Line");ac(BA,"defaultProps",{xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!pc.isSsr,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1,label:!1});ac(BA,"getComposedData",function(t){var e=t.props,n=t.xAxis,r=t.yAxis,i=t.xAxisTicks,a=t.yAxisTicks,o=t.dataKey,l=t.bandSize,c=t.displayedData,d=t.offset,u=e.layout,h=c.map(function(f,m){var v=xs(f,o);return u==="horizontal"?{x:c4({axis:n,ticks:i,bandSize:l,entry:f,index:m}),y:Qt(v)?null:r.scale(v),value:v,payload:f}:{x:Qt(v)?null:n.scale(v),y:c4({axis:r,ticks:a,bandSize:l,entry:f,index:m}),value:v,payload:f}});return eo({points:h,layout:u},d)});var eYe=["layout","type","stroke","connectNulls","isRange","ref"],tYe=["key"],qoe;function _b(t){"@babel/helpers - typeof";return _b=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_b(t)}function Hoe(t,e){if(t==null)return{};var n=nYe(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function nYe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Np(){return Np=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Np.apply(this,arguments)}function YG(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Fh(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?YG(Object(n),!0).forEach(function(r){pd(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):YG(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function rYe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function XG(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Goe(r.key),r)}}function sYe(t,e,n){return e&&XG(t.prototype,e),n&&XG(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function iYe(t,e,n){return e=_4(e),aYe(t,Woe()?Reflect.construct(e,n||[],_4(t).constructor):e.apply(t,n))}function aYe(t,e){if(e&&(_b(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return oYe(t)}function oYe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Woe(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Woe=function(){return!!t})()}function _4(t){return _4=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},_4(t)}function lYe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&s6(t,e)}function s6(t,e){return s6=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},s6(t,e)}function pd(t,e,n){return e=Goe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Goe(t){var e=cYe(t,"string");return _b(e)=="symbol"?e:e+""}function cYe(t,e){if(_b(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(_b(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Rm=function(t){function e(){var n;rYe(this,e);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return n=iYe(this,e,[].concat(i)),pd(n,"state",{isAnimationFinished:!0}),pd(n,"id",kv("recharts-area-")),pd(n,"handleAnimationEnd",function(){var o=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),Wt(o)&&o()}),pd(n,"handleAnimationStart",function(){var o=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),Wt(o)&&o()}),n}return lYe(e,t),sYe(e,[{key:"renderDots",value:function(r,i,a){var o=this.props.isAnimationActive,l=this.state.isAnimationFinished;if(o&&!l)return null;var c=this.props,d=c.dot,u=c.points,h=c.dataKey,f=_t(this.props,!1),m=_t(d,!0),v=u.map(function(g,x){var y=Fh(Fh(Fh({key:"dot-".concat(x),r:3},f),m),{},{index:x,cx:g.x,cy:g.y,dataKey:h,value:g.value,payload:g.payload,points:u});return e.renderDotItem(d,y)}),p={clipPath:r?"url(#clipPath-".concat(i?"":"dots-").concat(a,")"):null};return ge.createElement(yn,Np({className:"recharts-area-dots"},p),v)}},{key:"renderHorizontalRect",value:function(r){var i=this.props,a=i.baseLine,o=i.points,l=i.strokeWidth,c=o[0].x,d=o[o.length-1].x,u=r*Math.abs(c-d),h=qf(o.map(function(f){return f.y||0}));return ct(a)&&typeof a=="number"?h=Math.max(a,h):a&&Array.isArray(a)&&a.length&&(h=Math.max(qf(a.map(function(f){return f.y||0})),h)),ct(h)?ge.createElement("rect",{x:c<d?c:c-u,y:0,width:u,height:Math.floor(h+(l?parseInt("".concat(l),10):1))}):null}},{key:"renderVerticalRect",value:function(r){var i=this.props,a=i.baseLine,o=i.points,l=i.strokeWidth,c=o[0].y,d=o[o.length-1].y,u=r*Math.abs(c-d),h=qf(o.map(function(f){return f.x||0}));return ct(a)&&typeof a=="number"?h=Math.max(a,h):a&&Array.isArray(a)&&a.length&&(h=Math.max(qf(a.map(function(f){return f.x||0})),h)),ct(h)?ge.createElement("rect",{x:0,y:c<d?c:c-u,width:h+(l?parseInt("".concat(l),10):1),height:Math.floor(u)}):null}},{key:"renderClipRect",value:function(r){var i=this.props.layout;return i==="vertical"?this.renderVerticalRect(r):this.renderHorizontalRect(r)}},{key:"renderAreaStatically",value:function(r,i,a,o){var l=this.props,c=l.layout,d=l.type,u=l.stroke,h=l.connectNulls,f=l.isRange;l.ref;var m=Hoe(l,eYe);return ge.createElement(yn,{clipPath:a?"url(#clipPath-".concat(o,")"):null},ge.createElement(tv,Np({},_t(m,!0),{points:r,connectNulls:h,type:d,baseLine:i,layout:c,stroke:"none",className:"recharts-area-area"})),u!=="none"&&ge.createElement(tv,Np({},_t(this.props,!1),{className:"recharts-area-curve",layout:c,type:d,connectNulls:h,fill:"none",points:r})),u!=="none"&&f&&ge.createElement(tv,Np({},_t(this.props,!1),{className:"recharts-area-curve",layout:c,type:d,connectNulls:h,fill:"none",points:i})))}},{key:"renderAreaWithAnimation",value:function(r,i){var a=this,o=this.props,l=o.points,c=o.baseLine,d=o.isAnimationActive,u=o.animationBegin,h=o.animationDuration,f=o.animationEasing,m=o.animationId,v=this.state,p=v.prevPoints,g=v.prevBaseLine;return ge.createElement(jm,{begin:u,duration:h,isActive:d,easing:f,from:{t:0},to:{t:1},key:"area-".concat(m),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(x){var y=x.t;if(p){var b=p.length/l.length,w=l.map(function(j,I){var k=Math.floor(I*b);if(p[k]){var D=p[k],P=zs(D.x,j.x),R=zs(D.y,j.y);return Fh(Fh({},j),{},{x:P(y),y:R(y)})}return j}),N;if(ct(c)&&typeof c=="number"){var E=zs(g,c);N=E(y)}else if(Qt(c)||s1(c)){var C=zs(g,0);N=C(y)}else N=c.map(function(j,I){var k=Math.floor(I*b);if(g[k]){var D=g[k],P=zs(D.x,j.x),R=zs(D.y,j.y);return Fh(Fh({},j),{},{x:P(y),y:R(y)})}return j});return a.renderAreaStatically(w,N,r,i)}return ge.createElement(yn,null,ge.createElement("defs",null,ge.createElement("clipPath",{id:"animationClipPath-".concat(i)},a.renderClipRect(y))),ge.createElement(yn,{clipPath:"url(#animationClipPath-".concat(i,")")},a.renderAreaStatically(l,c,r,i)))})}},{key:"renderArea",value:function(r,i){var a=this.props,o=a.points,l=a.baseLine,c=a.isAnimationActive,d=this.state,u=d.prevPoints,h=d.prevBaseLine,f=d.totalLength;return c&&o&&o.length&&(!u&&f>0||!vv(u,o)||!vv(h,l))?this.renderAreaWithAnimation(r,i):this.renderAreaStatically(o,l,r,i)}},{key:"render",value:function(){var r,i=this.props,a=i.hide,o=i.dot,l=i.points,c=i.className,d=i.top,u=i.left,h=i.xAxis,f=i.yAxis,m=i.width,v=i.height,p=i.isAnimationActive,g=i.id;if(a||!l||!l.length)return null;var x=this.state.isAnimationFinished,y=l.length===1,b=dn("recharts-area",c),w=h&&h.allowDataOverflow,N=f&&f.allowDataOverflow,E=w||N,C=Qt(g)?this.id:g,j=(r=_t(o,!1))!==null&&r!==void 0?r:{r:3,strokeWidth:2},I=j.r,k=I===void 0?3:I,D=j.strokeWidth,P=D===void 0?2:D,R=_se(o)?o:{},_=R.clipDot,M=_===void 0?!0:_,U=k*2+P;return ge.createElement(yn,{className:b},w||N?ge.createElement("defs",null,ge.createElement("clipPath",{id:"clipPath-".concat(C)},ge.createElement("rect",{x:w?u:u-m/2,y:N?d:d-v/2,width:w?m:m*2,height:N?v:v*2})),!M&&ge.createElement("clipPath",{id:"clipPath-dots-".concat(C)},ge.createElement("rect",{x:u-U/2,y:d-U/2,width:m+U,height:v+U}))):null,y?null:this.renderArea(E,C),(o||y)&&this.renderDots(E,M,C),(!p||x)&&jd.renderCallByParent(this.props,l))}}],[{key:"getDerivedStateFromProps",value:function(r,i){return r.animationId!==i.prevAnimationId?{prevAnimationId:r.animationId,curPoints:r.points,curBaseLine:r.baseLine,prevPoints:i.curPoints,prevBaseLine:i.curBaseLine}:r.points!==i.curPoints||r.baseLine!==i.curBaseLine?{curPoints:r.points,curBaseLine:r.baseLine}:null}}])}(A.PureComponent);qoe=Rm;pd(Rm,"displayName","Area");pd(Rm,"defaultProps",{stroke:"#3182bd",fill:"#3182bd",fillOpacity:.6,xAxisId:0,yAxisId:0,legendType:"line",connectNulls:!1,points:[],dot:!1,activeDot:!0,hide:!1,isAnimationActive:!pc.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"});pd(Rm,"getBaseValue",function(t,e,n,r){var i=t.layout,a=t.baseValue,o=e.props.baseValue,l=o??a;if(ct(l)&&typeof l=="number")return l;var c=i==="horizontal"?r:n,d=c.scale.domain();if(c.type==="number"){var u=Math.max(d[0],d[1]),h=Math.min(d[0],d[1]);return l==="dataMin"?h:l==="dataMax"||u<0?u:Math.max(Math.min(d[0],d[1]),0)}return l==="dataMin"?d[0]:l==="dataMax"?d[1]:d[0]});pd(Rm,"getComposedData",function(t){var e=t.props,n=t.item,r=t.xAxis,i=t.yAxis,a=t.xAxisTicks,o=t.yAxisTicks,l=t.bandSize,c=t.dataKey,d=t.stackedData,u=t.dataStartIndex,h=t.displayedData,f=t.offset,m=e.layout,v=d&&d.length,p=qoe.getBaseValue(e,n,r,i),g=m==="horizontal",x=!1,y=h.map(function(w,N){var E;v?E=d[u+N]:(E=xs(w,c),Array.isArray(E)?x=!0:E=[p,E]);var C=E[1]==null||v&&xs(w,c)==null;return g?{x:c4({axis:r,ticks:a,bandSize:l,entry:w,index:N}),y:C?null:i.scale(E[1]),value:E,payload:w}:{x:C?null:r.scale(E[1]),y:c4({axis:i,ticks:o,bandSize:l,entry:w,index:N}),value:E,payload:w}}),b;return v||x?b=y.map(function(w){var N=Array.isArray(w.value)?w.value[0]:null;return g?{x:w.x,y:N!=null&&w.y!=null?i.scale(N):null}:{x:N!=null?r.scale(N):null,y:w.y}}):b=g?i.scale(p):r.scale(p),Fh({points:y,baseLine:b,layout:m,isRange:x},f)});pd(Rm,"renderDotItem",function(t,e){var n;if(ge.isValidElement(t))n=ge.cloneElement(t,e);else if(Wt(t))n=t(e);else{var r=dn("recharts-area-dot",typeof t!="boolean"?t.className:""),i=e.key,a=Hoe(e,tYe);n=ge.createElement($A,Np({},a,{key:i,className:r}))}return n});function Ob(t){"@babel/helpers - typeof";return Ob=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ob(t)}function dYe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ZG(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Xoe(r.key),r)}}function uYe(t,e,n){return e&&ZG(t.prototype,e),n&&ZG(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function hYe(t,e,n){return e=O4(e),fYe(t,Koe()?Reflect.construct(e,n||[],O4(t).constructor):e.apply(t,n))}function fYe(t,e){if(e&&(Ob(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return mYe(t)}function mYe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Koe(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Koe=function(){return!!t})()}function O4(t){return O4=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},O4(t)}function pYe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&i6(t,e)}function i6(t,e){return i6=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},i6(t,e)}function Yoe(t,e,n){return e=Xoe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Xoe(t){var e=gYe(t,"string");return Ob(e)=="symbol"?e:e+""}function gYe(t,e){if(Ob(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Ob(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function a6(){return a6=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},a6.apply(this,arguments)}function vYe(t){var e=t.xAxisId,n=B7(),r=z7(),i=Ioe(e);return i==null?null:A.createElement(u1,a6({},i,{className:dn("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:n,height:r},ticksGenerator:function(o){return Wu(o,!0)}}))}var lm=function(t){function e(){return dYe(this,e),hYe(this,e,arguments)}return pYe(e,t),uYe(e,[{key:"render",value:function(){return A.createElement(vYe,this.props)}}])}(A.Component);Yoe(lm,"displayName","XAxis");Yoe(lm,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function Lb(t){"@babel/helpers - typeof";return Lb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Lb(t)}function xYe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function QG(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Joe(r.key),r)}}function yYe(t,e,n){return e&&QG(t.prototype,e),n&&QG(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function bYe(t,e,n){return e=L4(e),wYe(t,Zoe()?Reflect.construct(e,n||[],L4(t).constructor):e.apply(t,n))}function wYe(t,e){if(e&&(Lb(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return jYe(t)}function jYe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Zoe(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Zoe=function(){return!!t})()}function L4(t){return L4=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},L4(t)}function NYe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&o6(t,e)}function o6(t,e){return o6=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},o6(t,e)}function Qoe(t,e,n){return e=Joe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Joe(t){var e=SYe(t,"string");return Lb(e)=="symbol"?e:e+""}function SYe(t,e){if(Lb(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Lb(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function l6(){return l6=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},l6.apply(this,arguments)}var AYe=function(e){var n=e.yAxisId,r=B7(),i=z7(),a=Doe(n);return a==null?null:A.createElement(u1,l6({},a,{className:dn("recharts-".concat(a.axisType," ").concat(a.axisType),a.className),viewBox:{x:0,y:0,width:r,height:i},ticksGenerator:function(l){return Wu(l,!0)}}))},cm=function(t){function e(){return xYe(this,e),bYe(this,e,arguments)}return NYe(e,t),yYe(e,[{key:"render",value:function(){return A.createElement(AYe,this.props)}}])}(A.Component);Qoe(cm,"displayName","YAxis");Qoe(cm,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function JG(t){return TYe(t)||PYe(t)||EYe(t)||CYe()}function CYe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function EYe(t,e){if(t){if(typeof t=="string")return c6(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c6(t,e)}}function PYe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function TYe(t){if(Array.isArray(t))return c6(t)}function c6(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var d6=function(e,n,r,i,a){var o=Mo(e,V7),l=Mo(e,ID),c=[].concat(JG(o),JG(l)),d=Mo(e,kD),u="".concat(i,"Id"),h=i[0],f=n;if(c.length&&(f=c.reduce(function(p,g){if(g.props[u]===r&&Nd(g.props,"extendDomain")&&ct(g.props[h])){var x=g.props[h];return[Math.min(p[0],x),Math.max(p[1],x)]}return p},f)),d.length){var m="".concat(h,"1"),v="".concat(h,"2");f=d.reduce(function(p,g){if(g.props[u]===r&&Nd(g.props,"extendDomain")&&ct(g.props[m])&&ct(g.props[v])){var x=g.props[m],y=g.props[v];return[Math.min(p[0],x,y),Math.max(p[1],x,y)]}return p},f)}return a&&a.length&&(f=a.reduce(function(p,g){return ct(g)?[Math.min(p[0],g),Math.max(p[1],g)]:p},f)),f},ele={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function i(c,d,u){this.fn=c,this.context=d,this.once=u||!1}function a(c,d,u,h,f){if(typeof u!="function")throw new TypeError("The listener must be a function");var m=new i(u,h||c,f),v=n?n+d:d;return c._events[v]?c._events[v].fn?c._events[v]=[c._events[v],m]:c._events[v].push(m):(c._events[v]=m,c._eventsCount++),c}function o(c,d){--c._eventsCount===0?c._events=new r:delete c._events[d]}function l(){this._events=new r,this._eventsCount=0}l.prototype.eventNames=function(){var d=[],u,h;if(this._eventsCount===0)return d;for(h in u=this._events)e.call(u,h)&&d.push(n?h.slice(1):h);return Object.getOwnPropertySymbols?d.concat(Object.getOwnPropertySymbols(u)):d},l.prototype.listeners=function(d){var u=n?n+d:d,h=this._events[u];if(!h)return[];if(h.fn)return[h.fn];for(var f=0,m=h.length,v=new Array(m);f<m;f++)v[f]=h[f].fn;return v},l.prototype.listenerCount=function(d){var u=n?n+d:d,h=this._events[u];return h?h.fn?1:h.length:0},l.prototype.emit=function(d,u,h,f,m,v){var p=n?n+d:d;if(!this._events[p])return!1;var g=this._events[p],x=arguments.length,y,b;if(g.fn){switch(g.once&&this.removeListener(d,g.fn,void 0,!0),x){case 1:return g.fn.call(g.context),!0;case 2:return g.fn.call(g.context,u),!0;case 3:return g.fn.call(g.context,u,h),!0;case 4:return g.fn.call(g.context,u,h,f),!0;case 5:return g.fn.call(g.context,u,h,f,m),!0;case 6:return g.fn.call(g.context,u,h,f,m,v),!0}for(b=1,y=new Array(x-1);b<x;b++)y[b-1]=arguments[b];g.fn.apply(g.context,y)}else{var w=g.length,N;for(b=0;b<w;b++)switch(g[b].once&&this.removeListener(d,g[b].fn,void 0,!0),x){case 1:g[b].fn.call(g[b].context);break;case 2:g[b].fn.call(g[b].context,u);break;case 3:g[b].fn.call(g[b].context,u,h);break;case 4:g[b].fn.call(g[b].context,u,h,f);break;default:if(!y)for(N=1,y=new Array(x-1);N<x;N++)y[N-1]=arguments[N];g[b].fn.apply(g[b].context,y)}}return!0},l.prototype.on=function(d,u,h){return a(this,d,u,h,!1)},l.prototype.once=function(d,u,h){return a(this,d,u,h,!0)},l.prototype.removeListener=function(d,u,h,f){var m=n?n+d:d;if(!this._events[m])return this;if(!u)return o(this,m),this;var v=this._events[m];if(v.fn)v.fn===u&&(!f||v.once)&&(!h||v.context===h)&&o(this,m);else{for(var p=0,g=[],x=v.length;p<x;p++)(v[p].fn!==u||f&&!v[p].once||h&&v[p].context!==h)&&g.push(v[p]);g.length?this._events[m]=g.length===1?g[0]:g:o(this,m)}return this},l.prototype.removeAllListeners=function(d){var u;return d?(u=n?n+d:d,this._events[u]&&o(this,u)):(this._events=new r,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=n,l.EventEmitter=l,t.exports=l})(ele);var IYe=ele.exports;const DYe=$n(IYe);var PO=new DYe,TO="recharts.syncMouseEvents";function M2(t){"@babel/helpers - typeof";return M2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},M2(t)}function kYe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function eK(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,tle(r.key),r)}}function _Ye(t,e,n){return e&&eK(t.prototype,e),n&&eK(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function IO(t,e,n){return e=tle(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function tle(t){var e=OYe(t,"string");return M2(e)=="symbol"?e:e+""}function OYe(t,e){if(M2(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(M2(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var LYe=function(){function t(){kYe(this,t),IO(this,"activeIndex",0),IO(this,"coordinateList",[]),IO(this,"layout","horizontal")}return _Ye(t,[{key:"setDetails",value:function(n){var r,i=n.coordinateList,a=i===void 0?null:i,o=n.container,l=o===void 0?null:o,c=n.layout,d=c===void 0?null:c,u=n.offset,h=u===void 0?null:u,f=n.mouseHandlerCallback,m=f===void 0?null:f;this.coordinateList=(r=a??this.coordinateList)!==null&&r!==void 0?r:[],this.container=l??this.container,this.layout=d??this.layout,this.offset=h??this.offset,this.mouseHandlerCallback=m??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(n){if(this.coordinateList.length!==0)switch(n.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(n){this.activeIndex=n}},{key:"spoofMouse",value:function(){var n,r;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var i=this.container.getBoundingClientRect(),a=i.x,o=i.y,l=i.height,c=this.coordinateList[this.activeIndex].coordinate,d=((n=window)===null||n===void 0?void 0:n.scrollX)||0,u=((r=window)===null||r===void 0?void 0:r.scrollY)||0,h=a+c+d,f=o+this.offset.top+l/2+u;this.mouseHandlerCallback({pageX:h,pageY:f})}}}])}();function RYe(t,e,n){if(n==="number"&&e===!0&&Array.isArray(t)){var r=t==null?void 0:t[0],i=t==null?void 0:t[1];if(r&&i&&ct(r)&&ct(i))return!0}return!1}function MYe(t,e,n,r){var i=r/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?e.x-i:n.left+.5,y:t==="horizontal"?n.top+.5:e.y-i,width:t==="horizontal"?r:n.width-1,height:t==="horizontal"?n.height-1:r}}function nle(t){var e=t.cx,n=t.cy,r=t.radius,i=t.startAngle,a=t.endAngle,o=jr(e,n,r,i),l=jr(e,n,r,a);return{points:[o,l],cx:e,cy:n,radius:r,startAngle:i,endAngle:a}}function FYe(t,e,n){var r,i,a,o;if(t==="horizontal")r=e.x,a=r,i=n.top,o=n.top+n.height;else if(t==="vertical")i=e.y,o=i,r=n.left,a=n.left+n.width;else if(e.cx!=null&&e.cy!=null)if(t==="centric"){var l=e.cx,c=e.cy,d=e.innerRadius,u=e.outerRadius,h=e.angle,f=jr(l,c,d,h),m=jr(l,c,u,h);r=f.x,i=f.y,a=m.x,o=m.y}else return nle(e);return[{x:r,y:i},{x:a,y:o}]}function F2(t){"@babel/helpers - typeof";return F2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},F2(t)}function tK(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function LC(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?tK(Object(n),!0).forEach(function(r){$Ye(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):tK(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function $Ye(t,e,n){return e=BYe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function BYe(t){var e=zYe(t,"string");return F2(e)=="symbol"?e:e+""}function zYe(t,e){if(F2(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(F2(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function UYe(t){var e,n,r=t.element,i=t.tooltipEventType,a=t.isActive,o=t.activeCoordinate,l=t.activePayload,c=t.offset,d=t.activeTooltipIndex,u=t.tooltipAxisBandSize,h=t.layout,f=t.chartName,m=(e=r.props.cursor)!==null&&e!==void 0?e:(n=r.type.defaultProps)===null||n===void 0?void 0:n.cursor;if(!r||!m||!a||!o||f!=="ScatterChart"&&i!=="axis")return null;var v,p=tv;if(f==="ScatterChart")v=o,p=nqe;else if(f==="BarChart")v=MYe(h,o,c,u),p=L7;else if(h==="radial"){var g=nle(o),x=g.cx,y=g.cy,b=g.radius,w=g.startAngle,N=g.endAngle;v={cx:x,cy:y,startAngle:w,endAngle:N,innerRadius:b,outerRadius:b},p=Qae}else v={points:FYe(h,o,c)},p=tv;var E=LC(LC(LC(LC({stroke:"#ccc",pointerEvents:"none"},c),v),_t(m,!1)),{},{payload:l,payloadIndex:d,className:dn("recharts-tooltip-cursor",m.className)});return A.isValidElement(m)?A.cloneElement(m,E):A.createElement(p,E)}var VYe=["item"],qYe=["children","className","width","height","style","compact","title","desc"];function Rb(t){"@babel/helpers - typeof";return Rb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Rb(t)}function t0(){return t0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},t0.apply(this,arguments)}function nK(t,e){return GYe(t)||WYe(t,e)||sle(t,e)||HYe()}function HYe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function WYe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,o,l=[],c=!0,d=!1;try{if(a=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==e);c=!0);}catch(u){d=!0,i=u}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw i}}return l}}function GYe(t){if(Array.isArray(t))return t}function rK(t,e){if(t==null)return{};var n=KYe(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function KYe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function YYe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function sK(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,ile(r.key),r)}}function XYe(t,e,n){return e&&sK(t.prototype,e),n&&sK(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function ZYe(t,e,n){return e=R4(e),QYe(t,rle()?Reflect.construct(e,n||[],R4(t).constructor):e.apply(t,n))}function QYe(t,e){if(e&&(Rb(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return JYe(t)}function JYe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function rle(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(rle=function(){return!!t})()}function R4(t){return R4=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},R4(t)}function eXe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&u6(t,e)}function u6(t,e){return u6=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},u6(t,e)}function Mb(t){return rXe(t)||nXe(t)||sle(t)||tXe()}function tXe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function sle(t,e){if(t){if(typeof t=="string")return h6(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return h6(t,e)}}function nXe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function rXe(t){if(Array.isArray(t))return h6(t)}function h6(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function iK(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Xe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?iK(Object(n),!0).forEach(function(r){Ht(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):iK(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Ht(t,e,n){return e=ile(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ile(t){var e=sXe(t,"string");return Rb(e)=="symbol"?e:e+""}function sXe(t,e){if(Rb(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Rb(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var iXe={xAxis:["bottom","top"],yAxis:["left","right"]},aXe={width:"100%",height:"100%"},ale={x:0,y:0};function RC(t){return t}var oXe=function(e,n){return n==="horizontal"?e.x:n==="vertical"?e.y:n==="centric"?e.angle:e.radius},lXe=function(e,n,r,i){var a=n.find(function(u){return u&&u.index===r});if(a){if(e==="horizontal")return{x:a.coordinate,y:i.y};if(e==="vertical")return{x:i.x,y:a.coordinate};if(e==="centric"){var o=a.coordinate,l=i.radius;return Xe(Xe(Xe({},i),jr(i.cx,i.cy,l,o)),{},{angle:o,radius:l})}var c=a.coordinate,d=i.angle;return Xe(Xe(Xe({},i),jr(i.cx,i.cy,c,d)),{},{angle:d,radius:c})}return ale},_D=function(e,n){var r=n.graphicalItems,i=n.dataStartIndex,a=n.dataEndIndex,o=(r??[]).reduce(function(l,c){var d=c.props.data;return d&&d.length?[].concat(Mb(l),Mb(d)):l},[]);return o.length>0?o:e&&e.length&&ct(i)&&ct(a)?e.slice(i,a+1):[]};function ole(t){return t==="number"?[0,"auto"]:void 0}var f6=function(e,n,r,i){var a=e.graphicalItems,o=e.tooltipAxis,l=_D(n,e);return r<0||!a||!a.length||r>=l.length?null:a.reduce(function(c,d){var u,h=(u=d.props.data)!==null&&u!==void 0?u:n;h&&e.dataStartIndex+e.dataEndIndex!==0&&e.dataEndIndex-e.dataStartIndex>=r&&(h=h.slice(e.dataStartIndex,e.dataEndIndex+1));var f;if(o.dataKey&&!o.allowDuplicatedCategory){var m=h===void 0?l:h;f=LP(m,o.dataKey,i)}else f=h&&h[r]||l[r];return f?[].concat(Mb(c),[Wae(d,f)]):c},[])},aK=function(e,n,r,i){var a=i||{x:e.chartX,y:e.chartY},o=oXe(a,r),l=e.orderedTooltipTicks,c=e.tooltipAxis,d=e.tooltipTicks,u=k9e(o,l,d,c);if(u>=0&&d){var h=d[u]&&d[u].value,f=f6(e,n,u,h),m=lXe(r,l,u,a);return{activeTooltipIndex:u,activeLabel:h,activePayload:f,activeCoordinate:m}}return null},cXe=function(e,n){var r=n.axes,i=n.graphicalItems,a=n.axisType,o=n.axisIdKey,l=n.stackGroups,c=n.dataStartIndex,d=n.dataEndIndex,u=e.layout,h=e.children,f=e.stackOffset,m=Bae(u,a);return r.reduce(function(v,p){var g,x=p.type.defaultProps!==void 0?Xe(Xe({},p.type.defaultProps),p.props):p.props,y=x.type,b=x.dataKey,w=x.allowDataOverflow,N=x.allowDuplicatedCategory,E=x.scale,C=x.ticks,j=x.includeHidden,I=x[o];if(v[I])return v;var k=_D(e.data,{graphicalItems:i.filter(function(L){var q,Y=o in L.props?L.props[o]:(q=L.type.defaultProps)===null||q===void 0?void 0:q[o];return Y===I}),dataStartIndex:c,dataEndIndex:d}),D=k.length,P,R,_;RYe(x.domain,w,y)&&(P=CF(x.domain,null,w),m&&(y==="number"||E!=="auto")&&(_=fj(k,b,"category")));var M=ole(y);if(!P||P.length===0){var U,F=(U=x.domain)!==null&&U!==void 0?U:M;if(b){if(P=fj(k,b,y),y==="category"&&m){var z=CIe(P);N&&z?(R=P,P=j4(0,D)):N||(P=xW(F,P,p).reduce(function(L,q){return L.indexOf(q)>=0?L:[].concat(Mb(L),[q])},[]))}else if(y==="category")N?P=P.filter(function(L){return L!==""&&!Qt(L)}):P=xW(F,P,p).reduce(function(L,q){return L.indexOf(q)>=0||q===""||Qt(q)?L:[].concat(Mb(L),[q])},[]);else if(y==="number"){var H=M9e(k,i.filter(function(L){var q,Y,J=o in L.props?L.props[o]:(q=L.type.defaultProps)===null||q===void 0?void 0:q[o],ne="hide"in L.props?L.props.hide:(Y=L.type.defaultProps)===null||Y===void 0?void 0:Y.hide;return J===I&&(j||!ne)}),b,a,u);H&&(P=H)}m&&(y==="number"||E!=="auto")&&(_=fj(k,b,"category"))}else m?P=j4(0,D):l&&l[I]&&l[I].hasStack&&y==="number"?P=f==="expand"?[0,1]:Hae(l[I].stackGroups,c,d):P=$ae(k,i.filter(function(L){var q=o in L.props?L.props[o]:L.type.defaultProps[o],Y="hide"in L.props?L.props.hide:L.type.defaultProps.hide;return q===I&&(j||!Y)}),y,u,!0);if(y==="number")P=d6(h,P,I,a,C),F&&(P=CF(F,P,w));else if(y==="category"&&F){var W=F,$=P.every(function(L){return W.indexOf(L)>=0});$&&(P=W)}}return Xe(Xe({},v),{},Ht({},I,Xe(Xe({},x),{},{axisType:a,domain:P,categoricalDomain:_,duplicateDomain:R,originalDomain:(g=x.domain)!==null&&g!==void 0?g:M,isCategorical:m,layout:u})))},{})},dXe=function(e,n){var r=n.graphicalItems,i=n.Axis,a=n.axisType,o=n.axisIdKey,l=n.stackGroups,c=n.dataStartIndex,d=n.dataEndIndex,u=e.layout,h=e.children,f=_D(e.data,{graphicalItems:r,dataStartIndex:c,dataEndIndex:d}),m=f.length,v=Bae(u,a),p=-1;return r.reduce(function(g,x){var y=x.type.defaultProps!==void 0?Xe(Xe({},x.type.defaultProps),x.props):x.props,b=y[o],w=ole("number");if(!g[b]){p++;var N;return v?N=j4(0,m):l&&l[b]&&l[b].hasStack?(N=Hae(l[b].stackGroups,c,d),N=d6(h,N,b,a)):(N=CF(w,$ae(f,r.filter(function(E){var C,j,I=o in E.props?E.props[o]:(C=E.type.defaultProps)===null||C===void 0?void 0:C[o],k="hide"in E.props?E.props.hide:(j=E.type.defaultProps)===null||j===void 0?void 0:j.hide;return I===b&&!k}),"number",u),i.defaultProps.allowDataOverflow),N=d6(h,N,b,a)),Xe(Xe({},g),{},Ht({},b,Xe(Xe({axisType:a},i.defaultProps),{},{hide:!0,orientation:Ro(iXe,"".concat(a,".").concat(p%2),null),domain:N,originalDomain:w,isCategorical:v,layout:u})))}return g},{})},uXe=function(e,n){var r=n.axisType,i=r===void 0?"xAxis":r,a=n.AxisComp,o=n.graphicalItems,l=n.stackGroups,c=n.dataStartIndex,d=n.dataEndIndex,u=e.children,h="".concat(i,"Id"),f=Mo(u,a),m={};return f&&f.length?m=cXe(e,{axes:f,graphicalItems:o,axisType:i,axisIdKey:h,stackGroups:l,dataStartIndex:c,dataEndIndex:d}):o&&o.length&&(m=dXe(e,{Axis:a,graphicalItems:o,axisType:i,axisIdKey:h,stackGroups:l,dataStartIndex:c,dataEndIndex:d})),m},hXe=function(e){var n=Yh(e),r=Wu(n,!1,!0);return{tooltipTicks:r,orderedTooltipTicks:l7(r,function(i){return i.coordinate}),tooltipAxis:n,tooltipAxisBandSize:d4(n,r)}},oK=function(e){var n=e.children,r=e.defaultShowTooltip,i=wo(n,Cb),a=0,o=0;return e.data&&e.data.length!==0&&(o=e.data.length-1),i&&i.props&&(i.props.startIndex>=0&&(a=i.props.startIndex),i.props.endIndex>=0&&(o=i.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:a,dataEndIndex:o,activeTooltipIndex:-1,isTooltipActive:!!r}},fXe=function(e){return!e||!e.length?!1:e.some(function(n){var r=Ku(n&&n.type);return r&&r.indexOf("Bar")>=0})},lK=function(e){return e==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:e==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:e==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},mXe=function(e,n){var r=e.props,i=e.graphicalItems,a=e.xAxisMap,o=a===void 0?{}:a,l=e.yAxisMap,c=l===void 0?{}:l,d=r.width,u=r.height,h=r.children,f=r.margin||{},m=wo(h,Cb),v=wo(h,m0),p=Object.keys(c).reduce(function(N,E){var C=c[E],j=C.orientation;return!C.mirror&&!C.hide?Xe(Xe({},N),{},Ht({},j,N[j]+C.width)):N},{left:f.left||0,right:f.right||0}),g=Object.keys(o).reduce(function(N,E){var C=o[E],j=C.orientation;return!C.mirror&&!C.hide?Xe(Xe({},N),{},Ht({},j,Ro(N,"".concat(j))+C.height)):N},{top:f.top||0,bottom:f.bottom||0}),x=Xe(Xe({},g),p),y=x.bottom;m&&(x.bottom+=m.props.height||Cb.defaultProps.height),v&&n&&(x=L9e(x,i,r,n));var b=d-x.left-x.right,w=u-x.top-x.bottom;return Xe(Xe({brushBottom:y},x),{},{width:Math.max(b,0),height:Math.max(w,0)})},pXe=function(e,n){if(n==="xAxis")return e[n].width;if(n==="yAxis")return e[n].height},OD=function(e){var n=e.chartName,r=e.GraphicalChild,i=e.defaultTooltipEventType,a=i===void 0?"axis":i,o=e.validateTooltipEventTypes,l=o===void 0?["axis"]:o,c=e.axisComponents,d=e.legendContent,u=e.formatAxisMap,h=e.defaultProps,f=function(x,y){var b=y.graphicalItems,w=y.stackGroups,N=y.offset,E=y.updateId,C=y.dataStartIndex,j=y.dataEndIndex,I=x.barSize,k=x.layout,D=x.barGap,P=x.barCategoryGap,R=x.maxBarSize,_=lK(k),M=_.numericAxisName,U=_.cateAxisName,F=fXe(b),z=[];return b.forEach(function(H,W){var $=_D(x.data,{graphicalItems:[H],dataStartIndex:C,dataEndIndex:j}),L=H.type.defaultProps!==void 0?Xe(Xe({},H.type.defaultProps),H.props):H.props,q=L.dataKey,Y=L.maxBarSize,J=L["".concat(M,"Id")],ne=L["".concat(U,"Id")],re={},pe=c.reduce(function(ot,at){var jt=y["".concat(at.axisType,"Map")],Ve=L["".concat(at.axisType,"Id")];jt&&jt[Ve]||at.axisType==="zAxis"||xm(!1);var nt=jt[Ve];return Xe(Xe({},ot),{},Ht(Ht({},at.axisType,nt),"".concat(at.axisType,"Ticks"),Wu(nt)))},re),ue=pe[U],xe=pe["".concat(U,"Ticks")],Ne=w&&w[J]&&w[J].hasStack&&W9e(H,w[J].stackGroups),je=Ku(H.type).indexOf("Bar")>=0,$e=d4(ue,xe),ze=[],De=F&&_9e({barSize:I,stackGroups:w,totalSize:pXe(pe,U)});if(je){var ce,Te,Ce=Qt(Y)?R:Y,Se=(ce=(Te=d4(ue,xe,!0))!==null&&Te!==void 0?Te:Ce)!==null&&ce!==void 0?ce:0;ze=O9e({barGap:D,barCategoryGap:P,bandSize:Se!==$e?Se:$e,sizeList:De[ne],maxBarSize:Ce}),Se!==$e&&(ze=ze.map(function(ot){return Xe(Xe({},ot),{},{position:Xe(Xe({},ot.position),{},{offset:ot.position.offset-Se/2})})}))}var Ue=H&&H.type&&H.type.getComposedData;Ue&&z.push({props:Xe(Xe({},Ue(Xe(Xe({},pe),{},{displayedData:$,props:x,dataKey:q,item:H,bandSize:$e,barPosition:ze,offset:N,stackedData:Ne,layout:k,dataStartIndex:C,dataEndIndex:j}))),{},Ht(Ht(Ht({key:H.key||"item-".concat(W)},M,pe[M]),U,pe[U]),"animationId",E)),childIndex:FIe(H,x.children),item:H})}),z},m=function(x,y){var b=x.props,w=x.dataStartIndex,N=x.dataEndIndex,E=x.updateId;if(!lq({props:b}))return null;var C=b.children,j=b.layout,I=b.stackOffset,k=b.data,D=b.reverseStackOrder,P=lK(j),R=P.numericAxisName,_=P.cateAxisName,M=Mo(C,r),U=q9e(k,M,"".concat(R,"Id"),"".concat(_,"Id"),I,D),F=c.reduce(function(L,q){var Y="".concat(q.axisType,"Map");return Xe(Xe({},L),{},Ht({},Y,uXe(b,Xe(Xe({},q),{},{graphicalItems:M,stackGroups:q.axisType===R&&U,dataStartIndex:w,dataEndIndex:N}))))},{}),z=mXe(Xe(Xe({},F),{},{props:b,graphicalItems:M}),y==null?void 0:y.legendBBox);Object.keys(F).forEach(function(L){F[L]=u(b,F[L],z,L.replace("Map",""),n)});var H=F["".concat(_,"Map")],W=hXe(H),$=f(b,Xe(Xe({},F),{},{dataStartIndex:w,dataEndIndex:N,updateId:E,graphicalItems:M,stackGroups:U,offset:z}));return Xe(Xe({formattedGraphicalItems:$,graphicalItems:M,offset:z,stackGroups:U},W),F)},v=function(g){function x(y){var b,w,N;return YYe(this,x),N=ZYe(this,x,[y]),Ht(N,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),Ht(N,"accessibilityManager",new LYe),Ht(N,"handleLegendBBoxUpdate",function(E){if(E){var C=N.state,j=C.dataStartIndex,I=C.dataEndIndex,k=C.updateId;N.setState(Xe({legendBBox:E},m({props:N.props,dataStartIndex:j,dataEndIndex:I,updateId:k},Xe(Xe({},N.state),{},{legendBBox:E}))))}}),Ht(N,"handleReceiveSyncEvent",function(E,C,j){if(N.props.syncId===E){if(j===N.eventEmitterSymbol&&typeof N.props.syncMethod!="function")return;N.applySyncEvent(C)}}),Ht(N,"handleBrushChange",function(E){var C=E.startIndex,j=E.endIndex;if(C!==N.state.dataStartIndex||j!==N.state.dataEndIndex){var I=N.state.updateId;N.setState(function(){return Xe({dataStartIndex:C,dataEndIndex:j},m({props:N.props,dataStartIndex:C,dataEndIndex:j,updateId:I},N.state))}),N.triggerSyncEvent({dataStartIndex:C,dataEndIndex:j})}}),Ht(N,"handleMouseEnter",function(E){var C=N.getMouseInfo(E);if(C){var j=Xe(Xe({},C),{},{isTooltipActive:!0});N.setState(j),N.triggerSyncEvent(j);var I=N.props.onMouseEnter;Wt(I)&&I(j,E)}}),Ht(N,"triggeredAfterMouseMove",function(E){var C=N.getMouseInfo(E),j=C?Xe(Xe({},C),{},{isTooltipActive:!0}):{isTooltipActive:!1};N.setState(j),N.triggerSyncEvent(j);var I=N.props.onMouseMove;Wt(I)&&I(j,E)}),Ht(N,"handleItemMouseEnter",function(E){N.setState(function(){return{isTooltipActive:!0,activeItem:E,activePayload:E.tooltipPayload,activeCoordinate:E.tooltipPosition||{x:E.cx,y:E.cy}}})}),Ht(N,"handleItemMouseLeave",function(){N.setState(function(){return{isTooltipActive:!1}})}),Ht(N,"handleMouseMove",function(E){E.persist(),N.throttleTriggeredAfterMouseMove(E)}),Ht(N,"handleMouseLeave",function(E){N.throttleTriggeredAfterMouseMove.cancel();var C={isTooltipActive:!1};N.setState(C),N.triggerSyncEvent(C);var j=N.props.onMouseLeave;Wt(j)&&j(C,E)}),Ht(N,"handleOuterEvent",function(E){var C=MIe(E),j=Ro(N.props,"".concat(C));if(C&&Wt(j)){var I,k;/.*touch.*/i.test(C)?k=N.getMouseInfo(E.changedTouches[0]):k=N.getMouseInfo(E),j((I=k)!==null&&I!==void 0?I:{},E)}}),Ht(N,"handleClick",function(E){var C=N.getMouseInfo(E);if(C){var j=Xe(Xe({},C),{},{isTooltipActive:!0});N.setState(j),N.triggerSyncEvent(j);var I=N.props.onClick;Wt(I)&&I(j,E)}}),Ht(N,"handleMouseDown",function(E){var C=N.props.onMouseDown;if(Wt(C)){var j=N.getMouseInfo(E);C(j,E)}}),Ht(N,"handleMouseUp",function(E){var C=N.props.onMouseUp;if(Wt(C)){var j=N.getMouseInfo(E);C(j,E)}}),Ht(N,"handleTouchMove",function(E){E.changedTouches!=null&&E.changedTouches.length>0&&N.throttleTriggeredAfterMouseMove(E.changedTouches[0])}),Ht(N,"handleTouchStart",function(E){E.changedTouches!=null&&E.changedTouches.length>0&&N.handleMouseDown(E.changedTouches[0])}),Ht(N,"handleTouchEnd",function(E){E.changedTouches!=null&&E.changedTouches.length>0&&N.handleMouseUp(E.changedTouches[0])}),Ht(N,"handleDoubleClick",function(E){var C=N.props.onDoubleClick;if(Wt(C)){var j=N.getMouseInfo(E);C(j,E)}}),Ht(N,"handleContextMenu",function(E){var C=N.props.onContextMenu;if(Wt(C)){var j=N.getMouseInfo(E);C(j,E)}}),Ht(N,"triggerSyncEvent",function(E){N.props.syncId!==void 0&&PO.emit(TO,N.props.syncId,E,N.eventEmitterSymbol)}),Ht(N,"applySyncEvent",function(E){var C=N.props,j=C.layout,I=C.syncMethod,k=N.state.updateId,D=E.dataStartIndex,P=E.dataEndIndex;if(E.dataStartIndex!==void 0||E.dataEndIndex!==void 0)N.setState(Xe({dataStartIndex:D,dataEndIndex:P},m({props:N.props,dataStartIndex:D,dataEndIndex:P,updateId:k},N.state)));else if(E.activeTooltipIndex!==void 0){var R=E.chartX,_=E.chartY,M=E.activeTooltipIndex,U=N.state,F=U.offset,z=U.tooltipTicks;if(!F)return;if(typeof I=="function")M=I(z,E);else if(I==="value"){M=-1;for(var H=0;H<z.length;H++)if(z[H].value===E.activeLabel){M=H;break}}var W=Xe(Xe({},F),{},{x:F.left,y:F.top}),$=Math.min(R,W.x+W.width),L=Math.min(_,W.y+W.height),q=z[M]&&z[M].value,Y=f6(N.state,N.props.data,M),J=z[M]?{x:j==="horizontal"?z[M].coordinate:$,y:j==="horizontal"?L:z[M].coordinate}:ale;N.setState(Xe(Xe({},E),{},{activeLabel:q,activeCoordinate:J,activePayload:Y,activeTooltipIndex:M}))}else N.setState(E)}),Ht(N,"renderCursor",function(E){var C,j=N.state,I=j.isTooltipActive,k=j.activeCoordinate,D=j.activePayload,P=j.offset,R=j.activeTooltipIndex,_=j.tooltipAxisBandSize,M=N.getTooltipEventType(),U=(C=E.props.active)!==null&&C!==void 0?C:I,F=N.props.layout,z=E.key||"_recharts-cursor";return ge.createElement(UYe,{key:z,activeCoordinate:k,activePayload:D,activeTooltipIndex:R,chartName:n,element:E,isActive:U,layout:F,offset:P,tooltipAxisBandSize:_,tooltipEventType:M})}),Ht(N,"renderPolarAxis",function(E,C,j){var I=Ro(E,"type.axisType"),k=Ro(N.state,"".concat(I,"Map")),D=E.type.defaultProps,P=D!==void 0?Xe(Xe({},D),E.props):E.props,R=k&&k[P["".concat(I,"Id")]];return A.cloneElement(E,Xe(Xe({},R),{},{className:dn(I,R.className),key:E.key||"".concat(C,"-").concat(j),ticks:Wu(R,!0)}))}),Ht(N,"renderPolarGrid",function(E){var C=E.props,j=C.radialLines,I=C.polarAngles,k=C.polarRadius,D=N.state,P=D.radiusAxisMap,R=D.angleAxisMap,_=Yh(P),M=Yh(R),U=M.cx,F=M.cy,z=M.innerRadius,H=M.outerRadius;return A.cloneElement(E,{polarAngles:Array.isArray(I)?I:Wu(M,!0).map(function(W){return W.coordinate}),polarRadius:Array.isArray(k)?k:Wu(_,!0).map(function(W){return W.coordinate}),cx:U,cy:F,innerRadius:z,outerRadius:H,key:E.key||"polar-grid",radialLines:j})}),Ht(N,"renderLegend",function(){var E=N.state.formattedGraphicalItems,C=N.props,j=C.children,I=C.width,k=C.height,D=N.props.margin||{},P=I-(D.left||0)-(D.right||0),R=Mae({children:j,formattedGraphicalItems:E,legendWidth:P,legendContent:d});if(!R)return null;var _=R.item,M=rK(R,VYe);return A.cloneElement(_,Xe(Xe({},M),{},{chartWidth:I,chartHeight:k,margin:D,onBBoxUpdate:N.handleLegendBBoxUpdate}))}),Ht(N,"renderTooltip",function(){var E,C=N.props,j=C.children,I=C.accessibilityLayer,k=wo(j,So);if(!k)return null;var D=N.state,P=D.isTooltipActive,R=D.activeCoordinate,_=D.activePayload,M=D.activeLabel,U=D.offset,F=(E=k.props.active)!==null&&E!==void 0?E:P;return A.cloneElement(k,{viewBox:Xe(Xe({},U),{},{x:U.left,y:U.top}),active:F,label:M,payload:F?_:[],coordinate:R,accessibilityLayer:I})}),Ht(N,"renderBrush",function(E){var C=N.props,j=C.margin,I=C.data,k=N.state,D=k.offset,P=k.dataStartIndex,R=k.dataEndIndex,_=k.updateId;return A.cloneElement(E,{key:E.key||"_recharts-brush",onChange:DC(N.handleBrushChange,E.props.onChange),data:I,x:ct(E.props.x)?E.props.x:D.left,y:ct(E.props.y)?E.props.y:D.top+D.height+D.brushBottom-(j.bottom||0),width:ct(E.props.width)?E.props.width:D.width,startIndex:P,endIndex:R,updateId:"brush-".concat(_)})}),Ht(N,"renderReferenceElement",function(E,C,j){if(!E)return null;var I=N,k=I.clipPathId,D=N.state,P=D.xAxisMap,R=D.yAxisMap,_=D.offset,M=E.type.defaultProps||{},U=E.props,F=U.xAxisId,z=F===void 0?M.xAxisId:F,H=U.yAxisId,W=H===void 0?M.yAxisId:H;return A.cloneElement(E,{key:E.key||"".concat(C,"-").concat(j),xAxis:P[z],yAxis:R[W],viewBox:{x:_.left,y:_.top,width:_.width,height:_.height},clipPathId:k})}),Ht(N,"renderActivePoints",function(E){var C=E.item,j=E.activePoint,I=E.basePoint,k=E.childIndex,D=E.isRange,P=[],R=C.props.key,_=C.item.type.defaultProps!==void 0?Xe(Xe({},C.item.type.defaultProps),C.item.props):C.item.props,M=_.activeDot,U=_.dataKey,F=Xe(Xe({index:k,dataKey:U,cx:j.x,cy:j.y,r:4,fill:O7(C.item),strokeWidth:2,stroke:"#fff",payload:j.payload,value:j.value},_t(M,!1)),RP(M));return P.push(x.renderActiveDot(M,F,"".concat(R,"-activePoint-").concat(k))),I?P.push(x.renderActiveDot(M,Xe(Xe({},F),{},{cx:I.x,cy:I.y}),"".concat(R,"-basePoint-").concat(k))):D&&P.push(null),P}),Ht(N,"renderGraphicChild",function(E,C,j){var I=N.filterFormatItem(E,C,j);if(!I)return null;var k=N.getTooltipEventType(),D=N.state,P=D.isTooltipActive,R=D.tooltipAxis,_=D.activeTooltipIndex,M=D.activeLabel,U=N.props.children,F=wo(U,So),z=I.props,H=z.points,W=z.isRange,$=z.baseLine,L=I.item.type.defaultProps!==void 0?Xe(Xe({},I.item.type.defaultProps),I.item.props):I.item.props,q=L.activeDot,Y=L.hide,J=L.activeBar,ne=L.activeShape,re=!!(!Y&&P&&F&&(q||J||ne)),pe={};k!=="axis"&&F&&F.props.trigger==="click"?pe={onClick:DC(N.handleItemMouseEnter,E.props.onClick)}:k!=="axis"&&(pe={onMouseLeave:DC(N.handleItemMouseLeave,E.props.onMouseLeave),onMouseEnter:DC(N.handleItemMouseEnter,E.props.onMouseEnter)});var ue=A.cloneElement(E,Xe(Xe({},I.props),pe));function xe(at){return typeof R.dataKey=="function"?R.dataKey(at.payload):null}if(re)if(_>=0){var Ne,je;if(R.dataKey&&!R.allowDuplicatedCategory){var $e=typeof R.dataKey=="function"?xe:"payload.".concat(R.dataKey.toString());Ne=LP(H,$e,M),je=W&&$&&LP($,$e,M)}else Ne=H==null?void 0:H[_],je=W&&$&&$[_];if(ne||J){var ze=E.props.activeIndex!==void 0?E.props.activeIndex:_;return[A.cloneElement(E,Xe(Xe(Xe({},I.props),pe),{},{activeIndex:ze})),null,null]}if(!Qt(Ne))return[ue].concat(Mb(N.renderActivePoints({item:I,activePoint:Ne,basePoint:je,childIndex:_,isRange:W})))}else{var De,ce=(De=N.getItemByXY(N.state.activeCoordinate))!==null&&De!==void 0?De:{graphicalItem:ue},Te=ce.graphicalItem,Ce=Te.item,Se=Ce===void 0?E:Ce,Ue=Te.childIndex,ot=Xe(Xe(Xe({},I.props),pe),{},{activeIndex:Ue});return[A.cloneElement(Se,ot),null,null]}return W?[ue,null,null]:[ue,null]}),Ht(N,"renderCustomized",function(E,C,j){return A.cloneElement(E,Xe(Xe({key:"recharts-customized-".concat(j)},N.props),N.state))}),Ht(N,"renderMap",{CartesianGrid:{handler:RC,once:!0},ReferenceArea:{handler:N.renderReferenceElement},ReferenceLine:{handler:RC},ReferenceDot:{handler:N.renderReferenceElement},XAxis:{handler:RC},YAxis:{handler:RC},Brush:{handler:N.renderBrush,once:!0},Bar:{handler:N.renderGraphicChild},Line:{handler:N.renderGraphicChild},Area:{handler:N.renderGraphicChild},Radar:{handler:N.renderGraphicChild},RadialBar:{handler:N.renderGraphicChild},Scatter:{handler:N.renderGraphicChild},Pie:{handler:N.renderGraphicChild},Funnel:{handler:N.renderGraphicChild},Tooltip:{handler:N.renderCursor,once:!0},PolarGrid:{handler:N.renderPolarGrid,once:!0},PolarAngleAxis:{handler:N.renderPolarAxis},PolarRadiusAxis:{handler:N.renderPolarAxis},Customized:{handler:N.renderCustomized}}),N.clipPathId="".concat((b=y.id)!==null&&b!==void 0?b:kv("recharts"),"-clip"),N.throttleTriggeredAfterMouseMove=Rie(N.triggeredAfterMouseMove,(w=y.throttleDelay)!==null&&w!==void 0?w:1e3/60),N.state={},N}return eXe(x,g),XYe(x,[{key:"componentDidMount",value:function(){var b,w;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(b=this.props.margin.left)!==null&&b!==void 0?b:0,top:(w=this.props.margin.top)!==null&&w!==void 0?w:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var b=this.props,w=b.children,N=b.data,E=b.height,C=b.layout,j=wo(w,So);if(j){var I=j.props.defaultIndex;if(!(typeof I!="number"||I<0||I>this.state.tooltipTicks.length-1)){var k=this.state.tooltipTicks[I]&&this.state.tooltipTicks[I].value,D=f6(this.state,N,I,k),P=this.state.tooltipTicks[I].coordinate,R=(this.state.offset.top+E)/2,_=C==="horizontal",M=_?{x:P,y:R}:{y:P,x:R},U=this.state.formattedGraphicalItems.find(function(z){var H=z.item;return H.type.name==="Scatter"});U&&(M=Xe(Xe({},M),U.props.points[I].tooltipPosition),D=U.props.points[I].tooltipPayload);var F={activeTooltipIndex:I,isTooltipActive:!0,activeLabel:k,activePayload:D,activeCoordinate:M};this.setState(F),this.renderCursor(j),this.accessibilityManager.setIndex(I)}}}},{key:"getSnapshotBeforeUpdate",value:function(b,w){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==w.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==b.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==b.margin){var N,E;this.accessibilityManager.setDetails({offset:{left:(N=this.props.margin.left)!==null&&N!==void 0?N:0,top:(E=this.props.margin.top)!==null&&E!==void 0?E:0}})}return null}},{key:"componentDidUpdate",value:function(b){zM([wo(b.children,So)],[wo(this.props.children,So)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var b=wo(this.props.children,So);if(b&&typeof b.props.shared=="boolean"){var w=b.props.shared?"axis":"item";return l.indexOf(w)>=0?w:a}return a}},{key:"getMouseInfo",value:function(b){if(!this.container)return null;var w=this.container,N=w.getBoundingClientRect(),E=o$e(N),C={chartX:Math.round(b.pageX-E.left),chartY:Math.round(b.pageY-E.top)},j=N.width/w.offsetWidth||1,I=this.inRange(C.chartX,C.chartY,j);if(!I)return null;var k=this.state,D=k.xAxisMap,P=k.yAxisMap,R=this.getTooltipEventType(),_=aK(this.state,this.props.data,this.props.layout,I);if(R!=="axis"&&D&&P){var M=Yh(D).scale,U=Yh(P).scale,F=M&&M.invert?M.invert(C.chartX):null,z=U&&U.invert?U.invert(C.chartY):null;return Xe(Xe({},C),{},{xValue:F,yValue:z},_)}return _?Xe(Xe({},C),_):null}},{key:"inRange",value:function(b,w){var N=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,E=this.props.layout,C=b/N,j=w/N;if(E==="horizontal"||E==="vertical"){var I=this.state.offset,k=C>=I.left&&C<=I.left+I.width&&j>=I.top&&j<=I.top+I.height;return k?{x:C,y:j}:null}var D=this.state,P=D.angleAxisMap,R=D.radiusAxisMap;if(P&&R){var _=Yh(P);return wW({x:C,y:j},_)}return null}},{key:"parseEventsOfWrapper",value:function(){var b=this.props.children,w=this.getTooltipEventType(),N=wo(b,So),E={};N&&w==="axis"&&(N.props.trigger==="click"?E={onClick:this.handleClick}:E={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var C=RP(this.props,this.handleOuterEvent);return Xe(Xe({},C),E)}},{key:"addListener",value:function(){PO.on(TO,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){PO.removeListener(TO,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(b,w,N){for(var E=this.state.formattedGraphicalItems,C=0,j=E.length;C<j;C++){var I=E[C];if(I.item===b||I.props.key===b.key||w===Ku(I.item.type)&&N===I.childIndex)return I}return null}},{key:"renderClipPath",value:function(){var b=this.clipPathId,w=this.state.offset,N=w.left,E=w.top,C=w.height,j=w.width;return ge.createElement("defs",null,ge.createElement("clipPath",{id:b},ge.createElement("rect",{x:N,y:E,height:C,width:j})))}},{key:"getXScales",value:function(){var b=this.state.xAxisMap;return b?Object.entries(b).reduce(function(w,N){var E=nK(N,2),C=E[0],j=E[1];return Xe(Xe({},w),{},Ht({},C,j.scale))},{}):null}},{key:"getYScales",value:function(){var b=this.state.yAxisMap;return b?Object.entries(b).reduce(function(w,N){var E=nK(N,2),C=E[0],j=E[1];return Xe(Xe({},w),{},Ht({},C,j.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(b){var w;return(w=this.state.xAxisMap)===null||w===void 0||(w=w[b])===null||w===void 0?void 0:w.scale}},{key:"getYScaleByAxisId",value:function(b){var w;return(w=this.state.yAxisMap)===null||w===void 0||(w=w[b])===null||w===void 0?void 0:w.scale}},{key:"getItemByXY",value:function(b){var w=this.state,N=w.formattedGraphicalItems,E=w.activeItem;if(N&&N.length)for(var C=0,j=N.length;C<j;C++){var I=N[C],k=I.props,D=I.item,P=D.type.defaultProps!==void 0?Xe(Xe({},D.type.defaultProps),D.props):D.props,R=Ku(D.type);if(R==="Bar"){var _=(k.data||[]).find(function(z){return RVe(b,z)});if(_)return{graphicalItem:I,payload:_}}else if(R==="RadialBar"){var M=(k.data||[]).find(function(z){return wW(b,z)});if(M)return{graphicalItem:I,payload:M}}else if(CD(I,E)||ED(I,E)||k2(I,E)){var U=SHe({graphicalItem:I,activeTooltipItem:E,itemData:P.data}),F=P.activeIndex===void 0?U:P.activeIndex;return{graphicalItem:Xe(Xe({},I),{},{childIndex:F}),payload:k2(I,E)?P.data[U]:I.props.data[U]}}}return null}},{key:"render",value:function(){var b=this;if(!lq(this))return null;var w=this.props,N=w.children,E=w.className,C=w.width,j=w.height,I=w.style,k=w.compact,D=w.title,P=w.desc,R=rK(w,qYe),_=_t(R,!1);if(k)return ge.createElement(IG,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},ge.createElement(VM,t0({},_,{width:C,height:j,title:D,desc:P}),this.renderClipPath(),dq(N,this.renderMap)));if(this.props.accessibilityLayer){var M,U;_.tabIndex=(M=this.props.tabIndex)!==null&&M!==void 0?M:0,_.role=(U=this.props.role)!==null&&U!==void 0?U:"application",_.onKeyDown=function(z){b.accessibilityManager.keyboardEvent(z)},_.onFocus=function(){b.accessibilityManager.focus()}}var F=this.parseEventsOfWrapper();return ge.createElement(IG,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},ge.createElement("div",t0({className:dn("recharts-wrapper",E),style:Xe({position:"relative",cursor:"default",width:C,height:j},I)},F,{ref:function(H){b.container=H}}),ge.createElement(VM,t0({},_,{width:C,height:j,title:D,desc:P,style:aXe}),this.renderClipPath(),dq(N,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])}(A.Component);Ht(v,"displayName",n),Ht(v,"defaultProps",Xe({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},h)),Ht(v,"getDerivedStateFromProps",function(g,x){var y=g.dataKey,b=g.data,w=g.children,N=g.width,E=g.height,C=g.layout,j=g.stackOffset,I=g.margin,k=x.dataStartIndex,D=x.dataEndIndex;if(x.updateId===void 0){var P=oK(g);return Xe(Xe(Xe({},P),{},{updateId:0},m(Xe(Xe({props:g},P),{},{updateId:0}),x)),{},{prevDataKey:y,prevData:b,prevWidth:N,prevHeight:E,prevLayout:C,prevStackOffset:j,prevMargin:I,prevChildren:w})}if(y!==x.prevDataKey||b!==x.prevData||N!==x.prevWidth||E!==x.prevHeight||C!==x.prevLayout||j!==x.prevStackOffset||!f0(I,x.prevMargin)){var R=oK(g),_={chartX:x.chartX,chartY:x.chartY,isTooltipActive:x.isTooltipActive},M=Xe(Xe({},aK(x,b,C)),{},{updateId:x.updateId+1}),U=Xe(Xe(Xe({},R),_),M);return Xe(Xe(Xe({},U),m(Xe({props:g},U),x)),{},{prevDataKey:y,prevData:b,prevWidth:N,prevHeight:E,prevLayout:C,prevStackOffset:j,prevMargin:I,prevChildren:w})}if(!zM(w,x.prevChildren)){var F,z,H,W,$=wo(w,Cb),L=$&&(F=(z=$.props)===null||z===void 0?void 0:z.startIndex)!==null&&F!==void 0?F:k,q=$&&(H=(W=$.props)===null||W===void 0?void 0:W.endIndex)!==null&&H!==void 0?H:D,Y=L!==k||q!==D,J=!Qt(b),ne=J&&!Y?x.updateId:x.updateId+1;return Xe(Xe({updateId:ne},m(Xe(Xe({props:g},x),{},{updateId:ne,dataStartIndex:L,dataEndIndex:q}),x)),{},{prevChildren:w,dataStartIndex:L,dataEndIndex:q})}return null}),Ht(v,"renderActiveDot",function(g,x,y){var b;return A.isValidElement(g)?b=A.cloneElement(g,x):Wt(g)?b=g(x):b=ge.createElement($A,x),ge.createElement(yn,{className:"recharts-active-dot",key:y},b)});var p=A.forwardRef(function(x,y){return ge.createElement(v,t0({},x,{ref:y}))});return p.displayName=v.displayName,p},gXe=OD({chartName:"LineChart",GraphicalChild:BA,axisComponents:[{axisType:"xAxis",AxisComp:lm},{axisType:"yAxis",AxisComp:cm}],formatAxisMap:R7}),vXe=OD({chartName:"BarChart",GraphicalChild:Rv,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:lm},{axisType:"yAxis",AxisComp:cm}],formatAxisMap:R7}),xXe=OD({chartName:"PieChart",GraphicalChild:ph,validateTooltipEventTypes:["item"],defaultTooltipEventType:"item",legendContent:"children",axisComponents:[{axisType:"angleAxis",AxisComp:AD},{axisType:"radiusAxis",AxisComp:ND}],formatAxisMap:nze,defaultProps:{layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}}),yXe=OD({chartName:"AreaChart",GraphicalChild:Rm,axisComponents:[{axisType:"xAxis",AxisComp:lm},{axisType:"yAxis",AxisComp:cm}],formatAxisMap:R7});const cK=["#0088FE","#00C49F","#FFBB28","#FF8042","#8884D8"];function bXe(){const[t,e]=A.useState("30d"),[n,r]=A.useState("All"),[i,a]=A.useState(null),[o,l]=A.useState(!0);A.useEffect(()=>{(async()=>{l(!0);try{const v={widgets:Xx.dashboardWidgets||[],reports:Xx.sampleReportResults||{},categories:Xx.reportCategories||[],timeRanges:Xx.timeRangeOptions||[]};a(v)}catch(v){console.error("Error loading dashboard data:",v),a({widgets:[],reports:{},categories:["All"],timeRanges:[{value:"30d",label:"30 Days"}]})}finally{l(!1)}})()},[t,n]);const c=(m,v)=>{if(!v||!v.data)return s.jsx("div",{className:"flex items-center justify-center h-64 text-muted-foreground",children:"No data available"});const{chartType:p,data:g}=v;switch(p){case"bar":return s.jsx(CC,{width:"100%",height:"100%",children:s.jsxs(vXe,{data:g,children:[s.jsx(OE,{strokeDasharray:"3 3"}),s.jsx(lm,{dataKey:"label"}),s.jsx(cm,{}),s.jsx(So,{}),s.jsx(Rv,{dataKey:"value",fill:"#3b82f6"})]})});case"line":return s.jsx(CC,{width:"100%",height:"100%",children:s.jsxs(gXe,{data:g,children:[s.jsx(OE,{strokeDasharray:"3 3"}),s.jsx(lm,{dataKey:"label"}),s.jsx(cm,{}),s.jsx(So,{}),s.jsx(BA,{type:"monotone",dataKey:"value",stroke:"#3b82f6",strokeWidth:2})]})});case"area":return s.jsx(CC,{width:"100%",height:"100%",children:s.jsxs(yXe,{data:g,children:[s.jsx(OE,{strokeDasharray:"3 3"}),s.jsx(lm,{dataKey:"label"}),s.jsx(cm,{}),s.jsx(So,{}),s.jsx(Rm,{type:"monotone",dataKey:"value",stroke:"#3b82f6",fill:"#3b82f6",fillOpacity:.6})]})});case"pie":return s.jsx(CC,{width:"100%",height:"100%",children:s.jsxs(xXe,{children:[s.jsx(ph,{data:g,cx:"50%",cy:"50%",labelLine:!1,label:({name:x,percent:y})=>`${x} ${(y*100).toFixed(0)}%`,outerRadius:80,fill:"#8884d8",dataKey:"value",children:g.map((x,y)=>s.jsx(dD,{fill:cK[y%cK.length]},`cell-${y}`))}),s.jsx(So,{})]})});case"numberCard":return s.jsx("div",{className:"grid grid-cols-2 gap-4 h-full",children:g.map((x,y)=>s.jsxs("div",{className:"flex flex-col justify-center items-center p-4 bg-muted/30 rounded-lg",children:[s.jsx("div",{className:"text-2xl font-bold",children:x.value}),s.jsx("div",{className:"text-sm text-muted-foreground text-center",children:x.label}),x.trend&&s.jsx("div",{className:`text-xs mt-1 ${x.color==="green"?"text-green-600":"text-blue-600"}`,children:x.trend})]},y))});default:return s.jsx("div",{className:"flex items-center justify-center h-64 text-muted-foreground",children:"Chart type not supported"})}};if(o)return s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"flex items-center justify-between",children:s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Dashboard Reports"}),s.jsx("p",{className:"text-muted-foreground",children:"Loading dashboard data..."})]})}),s.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:[1,2,3,4,5,6].map(m=>s.jsxs(he,{className:"animate-pulse",children:[s.jsxs(ye,{children:[s.jsx("div",{className:"h-4 bg-muted rounded w-3/4"}),s.jsx("div",{className:"h-3 bg-muted rounded w-1/2"})]}),s.jsx(fe,{children:s.jsx("div",{className:"h-64 bg-muted rounded"})})]},m))})]});if(!i)return s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"flex items-center justify-between",children:s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Dashboard Reports"}),s.jsx("p",{className:"text-muted-foreground",children:"Error loading dashboard data"})]})}),s.jsx(he,{children:s.jsx(fe,{className:"flex items-center justify-center h-64",children:s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-muted-foreground",children:"Failed to load dashboard data"}),s.jsx(Q,{onClick:()=>window.location.reload(),className:"mt-4",children:"Retry"})]})})})]});const{widgets:d,reports:u,categories:h,timeRanges:f}=i;return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Dashboard Reports"}),s.jsx("p",{className:"text-muted-foreground",children:"Real-time insights and analytics for your business"})]}),s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsxs(Ke,{value:n,onValueChange:r,children:[s.jsx(He,{className:"w-[180px]",children:s.jsx(Ye,{placeholder:"Select category"})}),s.jsx(We,{children:h.map(m=>s.jsx(le,{value:m,children:m},m))})]}),s.jsxs(Ke,{value:t,onValueChange:e,children:[s.jsx(He,{className:"w-[180px]",children:s.jsx(Ye,{placeholder:"Select time range"})}),s.jsx(We,{children:f.map(m=>s.jsx(le,{value:m.value,children:m.label},m.value))})]})]})]}),s.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[s.jsxs(he,{children:[s.jsxs(ye,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(be,{className:"text-sm font-medium",children:"Total Revenue"}),s.jsx(Vt,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsxs(fe,{children:[s.jsx("div",{className:"text-2xl font-bold",children:"$1,083,000"}),s.jsx("p",{className:"text-xs text-green-600",children:"+12.5% from last month"})]})]}),s.jsxs(he,{children:[s.jsxs(ye,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(be,{className:"text-sm font-medium",children:"Active Deals"}),s.jsx(Lr,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsxs(fe,{children:[s.jsx("div",{className:"text-2xl font-bold",children:"156"}),s.jsx("p",{className:"text-xs text-green-600",children:"+8.2% from last month"})]})]}),s.jsxs(he,{children:[s.jsxs(ye,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(be,{className:"text-sm font-medium",children:"Inventory Units"}),s.jsx(Ii,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsxs(fe,{children:[s.jsx("div",{className:"text-2xl font-bold",children:"93"}),s.jsx("p",{className:"text-xs text-blue-600",children:"51.6% utilization"})]})]}),s.jsxs(he,{children:[s.jsxs(ye,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(be,{className:"text-sm font-medium",children:"Conversion Rate"}),s.jsx(tn,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsxs(fe,{children:[s.jsx("div",{className:"text-2xl font-bold",children:"66.7%"}),s.jsx("p",{className:"text-xs text-green-600",children:"+2.1% from last month"})]})]})]}),s.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:d.map(m=>{const v=u[m.reportId];return s.jsxs(he,{className:m.size==="large"?"md:col-span-2":"",children:[s.jsxs(ye,{children:[s.jsxs(be,{className:"flex items-center justify-between",children:[m.title,s.jsx(Re,{variant:"outline",children:m.type})]}),s.jsx(Be,{children:(v==null?void 0:v.title)||"Report data"})]}),s.jsx(fe,{children:s.jsx("div",{className:"h-64",children:c(m,v)})})]},m.id)})}),s.jsxs(he,{children:[s.jsxs(ye,{children:[s.jsx(be,{children:"Detailed Reports"}),s.jsx(Be,{children:"Explore detailed analytics across different business areas"})]}),s.jsx(fe,{children:s.jsxs(Vn,{defaultValue:"sales",className:"space-y-4",children:[s.jsxs(Mn,{children:[s.jsx(tt,{value:"sales",children:"Sales"}),s.jsx(tt,{value:"inventory",children:"Inventory"}),s.jsx(tt,{value:"service",children:"Service"}),s.jsx(tt,{value:"finance",children:"Finance"})]}),s.jsx(rt,{value:"sales",className:"space-y-4",children:s.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[s.jsxs(he,{children:[s.jsx(ye,{children:s.jsx(be,{children:"Sales Pipeline"})}),s.jsx(fe,{children:s.jsx("div",{className:"h-64",children:c({type:"bar"},u["crm-pipeline"])})})]}),s.jsxs(he,{children:[s.jsx(ye,{children:s.jsx(be,{children:"Quote Performance"})}),s.jsx(fe,{children:s.jsx("div",{className:"h-64",children:c({type:"numberCard"},u["quote-conversions"])})})]})]})}),s.jsx(rt,{value:"inventory",className:"space-y-4",children:s.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[s.jsxs(he,{children:[s.jsx(ye,{children:s.jsx(be,{children:"Inventory Status"})}),s.jsx(fe,{children:s.jsx("div",{className:"h-64",children:c({type:"pie"},u["inventory-status"])})})]}),s.jsxs(he,{children:[s.jsx(ye,{children:s.jsx(be,{children:"Inventory Metrics"})}),s.jsx(fe,{children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Total Units"}),s.jsx("span",{className:"font-semibold",children:"93"})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Available"}),s.jsx("span",{className:"font-semibold text-green-600",children:"45"})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Utilization Rate"}),s.jsx("span",{className:"font-semibold",children:"51.6%"})]})]})})]})]})}),s.jsx(rt,{value:"service",className:"space-y-4",children:s.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[s.jsxs(he,{children:[s.jsx(ye,{children:s.jsx(be,{children:"Service Performance"})}),s.jsx(fe,{children:s.jsx("div",{className:"h-64",children:c({type:"line"},u["service-performance"])})})]}),s.jsxs(he,{children:[s.jsx(ye,{children:s.jsx(be,{children:"Service Metrics"})}),s.jsx(fe,{children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Total Tickets"}),s.jsx("span",{className:"font-semibold",children:"118"})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Avg Resolution Time"}),s.jsx("span",{className:"font-semibold",children:"2.3 days"})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Customer Satisfaction"}),s.jsx("span",{className:"font-semibold text-green-600",children:"4.6/5"})]})]})})]})]})}),s.jsx(rt,{value:"finance",className:"space-y-4",children:s.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[s.jsxs(he,{children:[s.jsx(ye,{children:s.jsx(be,{children:"Monthly Revenue"})}),s.jsx(fe,{children:s.jsx("div",{className:"h-64",children:c({type:"bar"},u["finance-summary"])})})]}),s.jsxs(he,{children:[s.jsx(ye,{children:s.jsx(be,{children:"Financial Metrics"})}),s.jsx(fe,{children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Total Revenue"}),s.jsx("span",{className:"font-semibold",children:"$1,083,000"})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Average Monthly"}),s.jsx("span",{className:"font-semibold",children:"$180,500"})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Growth Rate"}),s.jsx("span",{className:"font-semibold text-green-600",children:"+12.5%"})]})]})})]})]})})]})})]})]})}const wXe=[{id:"1",name:"Monthly Sales Report",type:dr.SALES,module:"sales",filters:[],columns:[],data:[],generatedAt:new Date("2024-01-20"),generatedBy:"admin"},{id:"2",name:"Inventory Valuation",type:dr.INVENTORY,module:"inventory",filters:[],columns:[],data:[],generatedAt:new Date("2024-01-19"),generatedBy:"manager"},{id:"3",name:"Service Revenue Analysis",type:dr.SERVICE,module:"service",filters:[],columns:[],data:[],generatedAt:new Date("2024-01-18"),generatedBy:"admin"}],dK=[{id:"sales-summary",name:"Sales Summary",description:"Overview of sales performance and metrics",type:dr.SALES,icon:Vt,color:"from-green-50 to-green-100/50"},{id:"inventory-report",name:"Inventory Report",description:"Current inventory levels and valuation",type:dr.INVENTORY,icon:Ii,color:"from-blue-50 to-blue-100/50"},{id:"customer-analysis",name:"Customer Analysis",description:"Customer demographics and behavior insights",type:dr.CUSTOM,icon:Lr,color:"from-purple-50 to-purple-100/50"},{id:"financial-overview",name:"Financial Overview",description:"Revenue, expenses, and profitability analysis",type:dr.FINANCIAL,icon:tn,color:"from-orange-50 to-orange-100/50"}];function uK(){const[t,e]=A.useState(wXe),{reportData:n,reportColumns:r,loading:i,currentReportConfig:a,generateReport:o,exportToCSV:l}=HEe(),[c,d]=A.useState("dashboard"),[u,h]=A.useState(null),f=A.useRef(null),[m,v]=A.useState(!1),p=w=>{switch(w){case dr.SALES:return"bg-green-50 text-green-700 border-green-200";case dr.INVENTORY:return"bg-blue-50 text-blue-700 border-blue-200";case dr.SERVICE:return"bg-purple-50 text-purple-700 border-purple-200";case dr.FINANCIAL:return"bg-orange-50 text-orange-700 border-orange-200";case dr.CUSTOM:return"bg-gray-50 text-gray-700 border-gray-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},g=w=>{o(w)},x=()=>{l()},y=w=>{const N={type:w.type,name:w.name,dateRange:{startDate:new Date(new Date().setDate(new Date().getDate()-30)).toISOString().split("T")[0],endDate:new Date().toISOString().split("T")[0]},filters:{}};console.log("handleGenerateTemplateReport called with config:",N),h(N),d("generator"),o(N)},b=()=>{d("generator"),h(null),v(!0),console.log("Create Report button clicked!")};return A.useEffect(()=>{m&&f.current&&(f.current.scrollIntoView({behavior:"smooth",block:"start"}),v(!1))},[m,f]),s.jsxs("div",{className:"space-y-8",children:[s.jsx("div",{className:"ri-page-header",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"ri-page-title",children:"Reporting Suite"}),s.jsx("p",{className:"ri-page-description",children:"Generate insights and analytics for your dealership"})]}),s.jsxs(Q,{className:"shadow-sm",onClick:b,children:[s.jsx(yt,{className:"h-4 w-4 mr-2"}),"Create Report"]})]})}),s.jsxs("div",{className:"ri-stats-grid",children:[s.jsxs(he,{className:"shadow-sm border-0 bg-gradient-to-br from-blue-50 to-blue-100/50",children:[s.jsxs(ye,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(be,{className:"text-sm font-medium text-blue-900",children:"Total Reports"}),s.jsx(ms,{className:"h-4 w-4 text-blue-600"})]}),s.jsxs(fe,{children:[s.jsx("div",{className:"text-2xl font-bold text-blue-900",children:t.length}),s.jsxs("p",{className:"text-xs text-blue-600 flex items-center mt-1",children:[s.jsx(tn,{className:"h-3 w-3 mr-1"}),"All reports"]})]})]}),s.jsxs(he,{className:"shadow-sm border-0 bg-gradient-to-br from-green-50 to-green-100/50",children:[s.jsxs(ye,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(be,{className:"text-sm font-medium text-green-900",children:"This Month"}),s.jsx(ms,{className:"h-4 w-4 text-green-600"})]}),s.jsxs(fe,{children:[s.jsx("div",{className:"text-2xl font-bold text-green-900",children:t.filter(w=>w.generatedAt.getMonth()===new Date().getMonth()).length}),s.jsxs("p",{className:"text-xs text-green-600 flex items-center mt-1",children:[s.jsx(tn,{className:"h-3 w-3 mr-1"}),"Generated this month"]})]})]}),s.jsxs(he,{className:"shadow-sm border-0 bg-gradient-to-br from-yellow-50 to-yellow-100/50",children:[s.jsxs(ye,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(be,{className:"text-sm font-medium text-yellow-900",children:"Scheduled"}),s.jsx(ms,{className:"h-4 w-4 text-yellow-600"})]}),s.jsxs(fe,{children:[s.jsx("div",{className:"text-2xl font-bold text-yellow-900",children:"5"}),s.jsxs("p",{className:"text-xs text-yellow-600 flex items-center mt-1",children:[s.jsx(ms,{className:"h-3 w-3 mr-1"}),"Automated reports"]})]})]}),s.jsxs(he,{className:"shadow-sm border-0 bg-gradient-to-br from-orange-50 to-orange-100/50",children:[s.jsxs(ye,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(be,{className:"text-sm font-medium text-orange-900",children:"Templates"}),s.jsx(ms,{className:"h-4 w-4 text-orange-600"})]}),s.jsxs(fe,{children:[s.jsx("div",{className:"text-2xl font-bold text-orange-900",children:dK.length}),s.jsxs("p",{className:"text-xs text-orange-600 flex items-center mt-1",children:[s.jsx(ms,{className:"h-3 w-3 mr-1"}),"Available templates"]})]})]})]}),s.jsxs(Vn,{value:c,onValueChange:d,className:"space-y-6",children:[s.jsxs(Mn,{className:"grid w-full grid-cols-3",children:[s.jsx(tt,{value:"dashboard",children:"Dashboard"}),s.jsx(tt,{value:"generator",children:"Report Generator"}),s.jsx(tt,{value:"saved",children:"Saved Reports"})]}),s.jsx(rt,{value:"dashboard",children:s.jsx(bXe,{})}),s.jsxs(rt,{value:"generator",children:[s.jsxs(he,{className:"shadow-sm",children:[s.jsxs(ye,{children:[s.jsx(be,{className:"text-xl",children:"Report Templates"}),s.jsx(Be,{children:"Quick start templates for common reports"})]}),s.jsx(fe,{children:s.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:dK.map(w=>s.jsx(he,{className:st("overflow-hidden shadow-sm hover:shadow-md transition-shadow cursor-pointer border-0 bg-gradient-to-br",w.color),children:s.jsxs(fe,{className:"p-6",children:[s.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[s.jsx(w.icon,{className:"h-8 w-8 text-primary"}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-foreground",children:w.name}),s.jsx(Re,{className:st("ri-badge-status mt-1",p(w.type)),children:w.type.toUpperCase()})]})]}),s.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:w.description}),s.jsx(Q,{size:"sm",className:"w-full shadow-sm",onClick:()=>y(w),children:"Generate Report"})]})},w.id))})})]}),s.jsxs("div",{ref:f,children:[" ",s.jsx(VEe,{onGenerate:g,onExportCSV:x,isGenerating:i,hasData:n.length>0,initialReportConfig:u})]}),n.length>0&&a&&s.jsx(qEe,{reportType:a.type,reportName:a.name,data:n,columns:r,onExportCSV:x})]}),s.jsx(rt,{value:"saved",children:t.length>0&&s.jsxs(he,{className:"shadow-sm",children:[s.jsxs(ye,{children:[s.jsx(be,{className:"text-xl",children:"Saved Reports"}),s.jsx(Be,{children:"Previously generated reports"})]}),s.jsx(fe,{children:s.jsx("div",{className:"text-center py-8 text-muted-foreground",children:s.jsx("p",{children:"Select a report template above to generate a new report"})})})]})})]})]})}function jXe(){return s.jsxs(ki,{children:[s.jsx(It,{path:"/",element:s.jsx(uK,{})}),s.jsx(It,{path:"/*",element:s.jsx(uK,{})})]})}function NXe({templates:t,onCreateTemplate:e,onUpdateTemplate:n,onDeleteTemplate:r}){var D;const{toast:i}=Ot(),[a,o]=A.useState(null),[l,c]=A.useState(null),[d,u]=A.useState(null),[h,f]=A.useState(null),[m,v]=A.useState(!1),[p,g]=A.useState(""),x=Bu.fieldTypes,y=P=>{var M;let R={name:P?`Copy of ${(M=t.find(U=>U.id===P))==null?void 0:M.name}`:"New Template",description:"",sections:[],isActive:!0};if(P){const U=t.find(F=>F.id===P);if(U){const F=U.sections.map(z=>({...z,id:`section-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,fields:z.fields.map(H=>({...H,id:`field-${Date.now()}-${Math.random().toString(36).substr(2,9)}`}))}));R={...R,description:U.description,sections:F}}}const _=e(R);o(_),c(_),v(!1),g("")},b=()=>{!l||!a||(n(a.id,l),c(null),i({title:"Template Saved",description:"Application template has been saved successfully"}))},w=P=>{window.confirm("Are you sure you want to delete this template?")&&(r(P),(a==null?void 0:a.id)===P&&(o(null),c(null)),i({title:"Template Deleted",description:"Application template has been deleted"}))},N=()=>{var M;if(!a)return;const P={id:`section-${Date.now()}`,title:"New Section",description:"",order:(((M=a.sections)==null?void 0:M.length)||0)+1,fields:[]},R=[...a.sections||[],P],_={...a,sections:R};o(_),c(_),u(P)},E=P=>{var M;if(!a||!l)return;const R=((M=l.sections)==null?void 0:M.map(U=>U.id===P.id?P:U))||[],_={...l,sections:R};c(_),o(_),u(null)},C=P=>{var M;if(!a||!l)return;const R=((M=l.sections)==null?void 0:M.filter(U=>U.id!==P))||[],_={...l,sections:R};c(_),o(_)},j=P=>{var U;if(!a||!l)return;const R={id:`field-${Date.now()}`,type:"text",label:"New Field",placeholder:"",required:!1,order:1},_=((U=l.sections)==null?void 0:U.map(F=>F.id===P?{...F,fields:[...F.fields,{...R,order:F.fields.length+1}]}:F))||[],M={...l,sections:_};c(M),o(M),f(R)},I=(P,R)=>{var U;if(!l)return;const _=((U=l.sections)==null?void 0:U.map(F=>F.id===P?{...F,fields:F.fields.map(z=>z.id===R.id?R:z)}:F))||[],M={...l,sections:_};c(M),o(M),f(null)},k=(P,R)=>{var U;if(!l)return;const _=((U=l.sections)==null?void 0:U.map(F=>F.id===P?{...F,fields:F.fields.filter(z=>z.id!==R)}:F))||[],M={...l,sections:_};c(M),o(M)};return a?s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx(Q,{variant:"ghost",onClick:()=>{o(null),c(null)},children:" Back to Templates"}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-semibold",children:a.name}),s.jsx("p",{className:"text-muted-foreground",children:"Template Builder"})]})]}),s.jsxs("div",{className:"flex space-x-2",children:[l&&s.jsxs(s.Fragment,{children:[s.jsx(Q,{variant:"outline",onClick:()=>c(null),children:"Cancel"}),s.jsxs(Q,{onClick:b,children:[s.jsx(Wn,{className:"h-4 w-4 mr-2"}),"Save Template"]})]}),!l&&s.jsxs(Q,{onClick:()=>c(a),children:[s.jsx(ar,{className:"h-4 w-4 mr-2"}),"Edit Template"]})]})]}),l&&s.jsxs(he,{children:[s.jsx(ye,{children:s.jsx(be,{children:"Template Settings"})}),s.jsxs(fe,{className:"space-y-4",children:[s.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"templateName",children:"Template Name"}),s.jsx(Ae,{id:"templateName",value:l.name,onChange:P=>c({...l,name:P.target.value})})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx($t,{id:"isActive",checked:l.isActive,onCheckedChange:P=>c({...l,isActive:!!P})}),s.jsx(ae,{htmlFor:"isActive",children:"Active Template"})]})]}),s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"templateDescription",children:"Description"}),s.jsx(un,{id:"templateDescription",value:l.description,onChange:P=>c({...l,description:P.target.value}),rows:3})]})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h3",{className:"text-lg font-semibold",children:"Sections"}),l&&s.jsxs(Q,{onClick:N,children:[s.jsx(yt,{className:"h-4 w-4 mr-2"}),"Add Section"]})]}),(D=a.sections)==null?void 0:D.map(P=>s.jsx(SXe,{section:P,isEditing:!!l,editingSection:d,editingField:h,onEditSection:u,onSaveSection:E,onDeleteSection:C,onAddField:j,onEditField:f,onSaveField:I,onDeleteField:k,fieldTypes:x},P.id)),(!a.sections||a.sections.length===0)&&s.jsx(he,{children:s.jsxs(fe,{className:"py-12 text-center",children:[s.jsx("p",{className:"text-muted-foreground",children:"No sections added yet"}),l&&s.jsxs(Q,{onClick:N,className:"mt-4",children:[s.jsx(yt,{className:"h-4 w-4 mr-2"}),"Add First Section"]})]})})]})]}):s.jsxs(he,{children:[s.jsx(ye,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx(be,{children:"Application Templates"}),s.jsx(Be,{children:"Create and manage finance application templates"})]}),s.jsxs(Q,{onClick:()=>v(!0),children:[s.jsx(yt,{className:"h-4 w-4 mr-2"}),"New Template"]})]})}),s.jsxs(fe,{children:[m&&s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:s.jsxs(he,{className:"w-full max-w-md",children:[s.jsx(ye,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx(be,{children:"Create New Template"}),s.jsx(Be,{children:"Choose how to create your new template"})]}),s.jsx(Q,{variant:"ghost",size:"sm",onClick:()=>{v(!1),g("")},children:s.jsx(on,{className:"h-4 w-4"})})]})}),s.jsxs(fe,{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-3",children:[s.jsx(Q,{variant:"outline",className:"w-full justify-start h-auto p-4",onClick:()=>y(),children:s.jsxs("div",{className:"text-left",children:[s.jsx("div",{className:"font-medium",children:"Create Blank Template"}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"Start with an empty template"})]})}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("div",{className:"font-medium text-sm",children:"Or clone from existing:"}),s.jsxs(Ke,{value:p,onValueChange:g,children:[s.jsx(He,{children:s.jsx(Ye,{placeholder:"Select template to clone"})}),s.jsx(We,{children:t.map(P=>s.jsx(le,{value:P.id,children:P.name},P.id))})]}),s.jsxs(Q,{className:"w-full",disabled:!p,onClick:()=>y(p),children:[s.jsx(yt,{className:"h-4 w-4 mr-2"}),"Create from Selected Template"]})]})]}),s.jsx("div",{className:"flex justify-end",children:s.jsx(Q,{variant:"outline",onClick:()=>{v(!1),g("")},children:"Cancel"})})]})]})}),s.jsxs("div",{className:"space-y-4",children:[t.map(P=>{var R,_;return s.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-accent/50 transition-colors",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("h4",{className:"font-semibold",children:P.name}),s.jsx(Re,{variant:P.isActive?"default":"secondary",children:P.isActive?"Active":"Inactive"})]}),s.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:P.description||"No description"}),s.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[((R=P.sections)==null?void 0:R.length)||0," sections ",((_=P.sections)==null?void 0:_.reduce((M,U)=>M+U.fields.length,0))||0," fields"]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsxs(Q,{variant:"outline",size:"sm",onClick:()=>o(P),children:[s.jsx(ar,{className:"h-4 w-4 mr-2"}),"Edit"]}),s.jsx(Q,{variant:"outline",size:"sm",onClick:()=>w(P.id),children:s.jsx(Tr,{className:"h-4 w-4"})})]})]},P.id)}),t.length===0&&s.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[s.jsx("p",{children:"No templates created yet"}),s.jsx("p",{className:"text-sm",children:"Create your first template to get started"})]})]})]})]})}function SXe({section:t,isEditing:e,editingSection:n,editingField:r,onEditSection:i,onSaveSection:a,onDeleteSection:o,onAddField:l,onEditField:c,onSaveField:d,onDeleteField:u,fieldTypes:h}){const[f,m]=A.useState(t),v=(n==null?void 0:n.id)===t.id,p=()=>{a(f)},g=()=>{m(t),i(null)};return s.jsxs(he,{children:[s.jsx(ye,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[e&&s.jsx(jJ,{className:"h-4 w-4 text-muted-foreground"}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold",children:t.title}),t.description&&s.jsx("p",{className:"text-sm text-muted-foreground",children:t.description})]})]}),e&&s.jsxs("div",{className:"flex items-center space-x-2",children:[!v&&s.jsxs(s.Fragment,{children:[s.jsx(Q,{variant:"outline",size:"sm",onClick:()=>i(t),children:s.jsx(ar,{className:"h-4 w-4"})}),s.jsx(Q,{variant:"outline",size:"sm",onClick:()=>o(t.id),children:s.jsx(Tr,{className:"h-4 w-4"})})]}),v&&s.jsxs(s.Fragment,{children:[s.jsx(Q,{variant:"outline",size:"sm",onClick:g,children:s.jsx(on,{className:"h-4 w-4"})}),s.jsx(Q,{size:"sm",onClick:p,children:s.jsx(Wn,{className:"h-4 w-4"})})]})]})]})}),s.jsxs(fe,{children:[v?s.jsxs("div",{className:"space-y-4 mb-6",children:[s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"sectionTitle",children:"Section Title"}),s.jsx(Ae,{id:"sectionTitle",value:f.title,onChange:x=>m({...f,title:x.target.value})})]}),s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"sectionDescription",children:"Description"}),s.jsx(un,{id:"sectionDescription",value:f.description,onChange:x=>m({...f,description:x.target.value}),rows:2})]})]}):null,s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("h5",{className:"font-medium",children:["Fields (",t.fields.length,")"]}),e&&s.jsxs(Q,{variant:"outline",size:"sm",onClick:()=>l(t.id),children:[s.jsx(yt,{className:"h-4 w-4 mr-2"}),"Add Field"]})]}),t.fields.map(x=>s.jsx(AXe,{field:x,sectionId:t.id,isEditing:e,editingField:r,onEditField:c,onSaveField:d,onDeleteField:u,fieldTypes:h},x.id)),t.fields.length===0&&s.jsx("div",{className:"text-center py-6 text-muted-foreground border-2 border-dashed rounded-lg",children:s.jsx("p",{className:"text-sm",children:"No fields added yet"})})]})]})]})}function AXe({field:t,sectionId:e,isEditing:n,editingField:r,onEditField:i,onSaveField:a,onDeleteField:o,fieldTypes:l}){var x,y;const[c,d]=A.useState(t),[u,h]=A.useState(""),f=(r==null?void 0:r.id)===t.id,m=()=>{a(e,c)},v=()=>{d(t),i(null)},p=()=>{u.trim()&&(d({...c,options:[...c.options||[],u.trim()]}),h(""))},g=b=>{var w;d({...c,options:(w=c.options)==null?void 0:w.filter((N,E)=>E!==b)})};return f?s.jsx(he,{className:"border-primary",children:s.jsx(fe,{className:"pt-6",children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"fieldLabel",children:"Field Label"}),s.jsx(Ae,{id:"fieldLabel",value:c.label,onChange:b=>d({...c,label:b.target.value})})]}),s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"fieldType",children:"Field Type"}),s.jsxs(Ke,{value:c.type,onValueChange:b=>d({...c,type:b,options:["select","radio","checkbox"].includes(b)?c.options:void 0}),children:[s.jsx(He,{children:s.jsx(Ye,{})}),s.jsx(We,{children:l.map(b=>s.jsx(le,{value:b.value,children:b.label},b.value))})]})]})]}),s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"fieldPlaceholder",children:"Placeholder Text"}),s.jsx(Ae,{id:"fieldPlaceholder",value:c.placeholder,onChange:b=>d({...c,placeholder:b.target.value})})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx($t,{id:"fieldRequired",checked:c.required,onCheckedChange:b=>d({...c,required:!!b})}),s.jsx(ae,{htmlFor:"fieldRequired",children:"Required Field"})]}),["select","radio"].includes(c.type)&&s.jsxs("div",{children:[s.jsx(ae,{children:"Options"}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex space-x-2",children:[s.jsx(Ae,{value:u,onChange:b=>h(b.target.value),placeholder:"Add option",onKeyDown:b=>{b.key==="Enter"&&(b.preventDefault(),p())}}),s.jsx(Q,{type:"button",onClick:p,children:s.jsx(yt,{className:"h-4 w-4"})})]}),s.jsx("div",{className:"flex flex-wrap gap-2",children:(x=c.options)==null?void 0:x.map((b,w)=>s.jsxs("div",{className:"flex items-center bg-muted px-2 py-1 rounded",children:[s.jsx("span",{className:"text-sm mr-2",children:b}),s.jsx(Q,{type:"button",variant:"ghost",size:"sm",className:"h-4 w-4 p-0",onClick:()=>g(w),children:s.jsx(on,{className:"h-3 w-3"})})]},w))})]})]}),s.jsxs("div",{className:"flex justify-end space-x-2",children:[s.jsx(Q,{variant:"outline",onClick:v,children:"Cancel"}),s.jsx(Q,{onClick:m,children:"Save Field"})]})]})})}):s.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[n&&s.jsx(jJ,{className:"h-4 w-4 text-muted-foreground"}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("span",{className:"font-medium",children:t.label}),t.required&&s.jsx(Re,{variant:"secondary",className:"text-xs",children:"Required"}),s.jsx(Re,{variant:"outline",className:"text-xs",children:(y=l.find(b=>b.value===t.type))==null?void 0:y.label})]}),t.placeholder&&s.jsxs("p",{className:"text-sm text-muted-foreground",children:["Placeholder: ",t.placeholder]})]})]}),n&&s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Q,{variant:"ghost",size:"sm",onClick:()=>i(t),children:s.jsx(ar,{className:"h-4 w-4"})}),s.jsx(Q,{variant:"ghost",size:"sm",onClick:()=>o(e,t.id),children:s.jsx(Tr,{className:"h-4 w-4"})})]})]})}function CXe({onClose:t,onSelectType:e}){return s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:s.jsxs(he,{className:"w-full max-w-md",children:[s.jsx(ye,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx(be,{children:"Create New Application"}),s.jsx(Be,{children:"Choose how you'd like to create the application"})]}),s.jsx(Q,{variant:"ghost",size:"sm",onClick:t,children:s.jsx(on,{className:"h-4 w-4"})})]})}),s.jsxs(fe,{className:"space-y-4",children:[s.jsx(Q,{variant:"outline",className:"w-full justify-start h-auto p-6",onClick:()=>e("completeNow"),children:s.jsxs("div",{className:"flex items-start space-x-4",children:[s.jsx(Zt,{className:"h-8 w-8 text-primary mt-1"}),s.jsxs("div",{className:"text-left",children:[s.jsx("div",{className:"font-semibold text-base",children:"Complete Now"}),s.jsx("div",{className:"text-sm text-muted-foreground mt-1",children:"Fill out the application immediately in the system"})]})]})}),s.jsx(Q,{variant:"outline",className:"w-full justify-start h-auto p-6",onClick:()=>e("inviteCustomer"),children:s.jsxs("div",{className:"flex items-start space-x-4",children:[s.jsx(Lr,{className:"h-8 w-8 text-primary mt-1"}),s.jsxs("div",{className:"text-left",children:[s.jsx("div",{className:"font-semibold text-base",children:"Invite Customer"}),s.jsx("div",{className:"text-sm text-muted-foreground mt-1",children:"Send an invitation for the customer to complete online"})]})]})}),s.jsx("div",{className:"flex justify-end pt-4",children:s.jsx(Q,{variant:"outline",onClick:t,children:"Cancel"})})]})]})})}function EXe({onClose:t,onInvite:e}){var E,C;const{toast:n}=Ot(),{templates:r}=bA(),[i,a]=A.useState("existing"),[o,l]=A.useState(""),[c,d]=A.useState(null),[u,h]=A.useState(((E=r.find(j=>j.isActive))==null?void 0:E.id)||((C=r[0])==null?void 0:C.id)||""),[f,m]=A.useState({name:"",email:"",phone:"",source:"manual"}),[v,p]=A.useState(""),[g,x]=A.useState(!1),b=Q$.sampleUsers.map(j=>({id:j.id,name:j.name,email:j.email,phone:j.phone,source:"website"})).filter(j=>j.name.toLowerCase().includes(o.toLowerCase())||j.email.toLowerCase().includes(o.toLowerCase())),w=async()=>{if(!c){n({title:"Selection Required",description:"Please select a customer to invite",variant:"destructive"});return}if(!u){n({title:"Template Required",description:"Please select an application template",variant:"destructive"});return}x(!0),await new Promise(j=>setTimeout(j,1e3)),e(c,u),x(!1)},N=async()=>{if(!f.name||!f.email){n({title:"Required Fields",description:"Please fill in name and email address",variant:"destructive"});return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(f.email)){n({title:"Invalid Email",description:"Please enter a valid email address",variant:"destructive"});return}if(!u){n({title:"Template Required",description:"Please select an application template",variant:"destructive"});return}x(!0),await new Promise(j=>setTimeout(j,1e3)),e({...f,id:`cust-${Date.now()}`},u),x(!1)};return s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:s.jsx(he,{className:"w-full max-w-2xl max-h-[90vh] overflow-hidden",children:s.jsxs("div",{className:"flex flex-col h-full",children:[s.jsx("div",{className:"shrink-0 border-b p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx(be,{children:"Invite Customer to Complete Application"}),s.jsx(Be,{children:"Send a finance application invitation to a customer"})]}),s.jsx(Q,{variant:"ghost",size:"sm",onClick:t,children:s.jsx(on,{className:"h-4 w-4"})})]})}),s.jsxs("div",{className:"overflow-y-auto flex-1 px-4 py-2 space-y-4",children:[s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"template",children:"Application Template *"}),s.jsxs(Ke,{value:u,onValueChange:h,children:[s.jsx(He,{children:s.jsx(Ye,{placeholder:"Select application template"})}),s.jsx(We,{children:r.map(j=>s.jsx(le,{value:j.id,children:j.name},j.id))})]}),s.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Choose which application template the customer will complete"})]}),s.jsxs("div",{className:"flex space-x-1 bg-muted p-1 rounded-lg",children:[s.jsx("button",{onClick:()=>a("existing"),className:`flex-1 py-2 px-4 rounded-md text-sm font-medium transition-colors ${i==="existing"?"bg-background text-foreground shadow-sm":"text-muted-foreground hover:text-foreground"}`,children:"Existing Customer"}),s.jsx("button",{onClick:()=>a("new"),className:`flex-1 py-2 px-4 rounded-md text-sm font-medium transition-colors ${i==="new"?"bg-background text-foreground shadow-sm":"text-muted-foreground hover:text-foreground"}`,children:"New Customer"})]}),i==="existing"&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"search",children:"Search Customers"}),s.jsxs("div",{className:"relative mt-1",children:[s.jsx(Rr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),s.jsx(Ae,{id:"search",value:o,onChange:j=>l(j.target.value),placeholder:"Search by name or email...",className:"pl-10"})]})]}),s.jsxs("div",{className:"space-y-2 max-h-36 overflow-y-auto",children:[b.slice(0,3).map(j=>{var I;return s.jsx("div",{onClick:()=>d(j),className:`p-3 border rounded-lg cursor-pointer transition-colors ${(c==null?void 0:c.id)===j.id?"border-primary bg-primary/5":"hover:bg-accent"}`,children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium",children:j.name}),s.jsx("p",{className:"text-sm text-muted-foreground",children:j.email}),j.phone&&s.jsx("p",{className:"text-sm text-muted-foreground",children:j.phone})]}),s.jsx("div",{className:"text-xs text-muted-foreground capitalize",children:(I=j.source)==null?void 0:I.replace("_"," ")})]})},j.id)}),b.slice(0,3).length===0&&s.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[s.jsx("p",{children:"No customers found"}),s.jsx("p",{className:"text-sm",children:"Try adjusting your search or add a new customer"})]}),b.length>3&&s.jsx("div",{className:"text-center py-2 text-sm text-muted-foreground",children:"Showing top 3 results. Use search to find specific customers."})]})]}),i==="new"&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"name",children:"Full Name *"}),s.jsx(Ae,{id:"name",value:f.name,onChange:j=>m({...f,name:j.target.value}),placeholder:"Enter customer name"})]}),s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"email",children:"Email Address *"}),s.jsx(Ae,{id:"email",type:"email",value:f.email,onChange:j=>m({...f,email:j.target.value}),placeholder:"Enter email address"})]})]}),s.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"phone",children:"Phone Number"}),s.jsx(Ae,{id:"phone",type:"tel",value:f.phone,onChange:j=>m({...f,phone:j.target.value}),placeholder:"(555) 123-4567"})]}),s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"source",children:"Lead Source"}),s.jsxs(Ke,{value:f.source,onValueChange:j=>m({...f,source:j}),children:[s.jsx(He,{children:s.jsx(Ye,{})}),s.jsxs(We,{children:[s.jsx(le,{value:"manual",children:"Manual Entry"}),s.jsx(le,{value:"website",children:"Website"}),s.jsx(le,{value:"referral",children:"Referral"}),s.jsx(le,{value:"trade_show",children:"Trade Show"}),s.jsx(le,{value:"phone",children:"Phone Call"}),s.jsx(le,{value:"walk_in",children:"Walk-in"})]})]})]})]})]}),s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"message",children:"Custom Message (Optional)"}),s.jsx(un,{id:"message",value:v,onChange:j=>p(j.target.value),placeholder:"Add a personal message to the invitation email...",rows:3})]}),i==="existing"&&c&&s.jsxs("div",{className:"space-y-4 mt-6 p-4 border rounded-lg bg-muted/20",children:[s.jsx("h4",{className:"font-medium",children:"Edit Customer Information"}),s.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"editName",children:"Full Name *"}),s.jsx(Ae,{id:"editName",value:c.name,onChange:j=>d({...c,name:j.target.value}),placeholder:"Enter customer name"})]}),s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"editEmail",children:"Email Address *"}),s.jsx(Ae,{id:"editEmail",type:"email",value:c.email,onChange:j=>d({...c,email:j.target.value}),placeholder:"Enter email address"})]})]}),s.jsxs("div",{children:[s.jsx(ae,{htmlFor:"editPhone",children:"Phone Number"}),s.jsx(Ae,{id:"editPhone",type:"tel",value:c.phone||"",onChange:j=>d({...c,phone:j.target.value}),placeholder:"(555) 123-4567"})]})]},c.id)]}),s.jsx("div",{className:"shrink-0 border-t bg-white p-4 sticky bottom-0 z-10",children:s.jsxs("div",{className:"flex justify-end space-x-3",children:[s.jsx(Q,{variant:"outline",onClick:t,children:"Cancel"}),s.jsx(Q,{onClick:i==="existing"?w:N,disabled:g||i==="existing"&&!c||!u,children:g?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Sending..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Do,{className:"h-4 w-4 mr-2"}),"Send Invitation"]})})]})})]})})})}function hK(){var J,ne;ya();const{toast:t}=Ot(),[e,n]=A.useState("applications"),[r,i]=A.useState(!1),[a,o]=A.useState("none"),[l,c]=A.useState(null),[d,u]=A.useState(""),[h,f]=A.useState("all"),[m,v]=A.useState(""),[p,g]=A.useState(""),[x,y]=A.useState(""),[b,w]=A.useState(null),N=A.useRef(null),{applications:E,templates:C,createApplication:j,updateApplication:I,deleteApplication:k,createTemplate:D,updateTemplate:P,deleteTemplate:R}=bA(),_=ge.useMemo(()=>{let re=E;if(d){const pe=d.toLowerCase();re=re.filter(ue=>ue.customerName&&ue.customerName.toLowerCase().includes(pe)||ue.customerEmail&&ue.customerEmail.toLowerCase().includes(pe)||ue.customerPhone&&ue.customerPhone.toLowerCase().includes(pe))}if(h!=="all"&&(re=re.filter(pe=>pe.status===h)),m){const pe=new Date(m);re=re.filter(ue=>new Date(ue.createdAt).setHours(0,0,0,0)>=pe.setHours(0,0,0,0))}return re},[E,d,h,m]),M=ge.useMemo(()=>{let re=C;if(p){const pe=p.toLowerCase();re=re.filter(ue=>ue.name.toLowerCase().includes(pe)||ue.description.toLowerCase().includes(pe))}return re},[C,p]),U=()=>"Applications",F=()=>{i(!0)},z=re=>{if(i(!1),o(re),re==="completeNow"){const pe=C.find(xe=>xe.isActive)||C[0];if(!pe){t({title:"No Templates Available",description:"Please create an application template first.",variant:"destructive"}),o("none");return}const ue=j({customerId:"",customerName:"",customerEmail:"",templateId:pe.id,status:"draft"});c(ue)}},H=re=>{var ue,xe;if(!l)return;if(l.status==="denied"&&re!=="denied"&&!x.trim()){w(re),(ue=N.current)==null||ue.scrollIntoView({behavior:"smooth",block:"center"}),t({title:"Internal Note Required",description:"Please add an internal note explaining the reason for changing from denied status.",variant:"destructive"});return}if(re!==l.status){const Ne={status:re,reviewedBy:"Admin User",reviewedAt:new Date().toISOString(),adminNotes:x};I(l.id,Ne);const je={...l,...Ne,updatedAt:new Date().toISOString()};c(je),w(null),t({title:"Status Updated",description:`Application status changed to ${((xe=Bu.statusOptions.find($e=>$e.value===re))==null?void 0:xe.label)||re}.`})}},W=()=>{c(null),y(""),w(null),o("none")},$=()=>{o("none")},L=re=>{c(re),y(re.adminNotes||""),w(null),o("none")},q=re=>{switch(re){case"draft":return"bg-gray-100 text-gray-800";case"submitted":return"bg-blue-100 text-blue-800";case"under_review":return"bg-yellow-100 text-yellow-800";case"approved":return"bg-green-100 text-green-800";case"conditionally_approved":return"bg-orange-100 text-orange-800";case"denied":return"bg-red-100 text-red-800";case"completed":return"bg-emerald-100 text-emerald-800";default:return"bg-gray-100 text-gray-800"}},Y=()=>{var re,pe;if(l){const ue=b||l.status,xe=ue!==l.status;if(xe&&l.status==="denied"&&ue!=="denied"&&!x.trim()){(re=N.current)==null||re.scrollIntoView({behavior:"smooth",block:"center"}),t({title:"Internal Note Required",description:"Please add an internal note explaining the reason for changing from denied status.",variant:"destructive"});return}const Ne={adminNotes:x};xe&&(Ne.status=ue,Ne.reviewedBy="Admin User",Ne.reviewedAt=new Date().toISOString()),I(l.id,Ne);const je={...l,...Ne,updatedAt:new Date().toISOString()};c(je),w(null),t({title:xe?"Status and Notes Updated":"Admin Notes Saved",description:xe?`Application status changed to ${((pe=Bu.statusOptions.find($e=>$e.value===ue))==null?void 0:pe.label)||ue} and notes saved.`:"Internal notes have been saved successfully."})}};return l&&a==="completeNow"?s.jsx(one,{application:l,onSave:re=>{I(l.id,re),t({title:"Application Updated",description:"Finance application has been saved successfully."})},onCancel:W,onSubmit:re=>{I(l.id,{...re,status:"submitted"}),W(),t({title:"Application Submitted",description:"Finance application has been submitted for review."})}}):a==="inviteCustomer"?s.jsx("div",{className:"space-y-6",children:s.jsx(EXe,{onClose:$,onInvite:(re,pe)=>{j({customerId:re.id||"",customerName:re.name,customerEmail:re.email,templateId:pe,status:"draft"}),$(),t({title:"Invitation Sent",description:`Finance application invitation sent to ${re.name}`})}})}):l&&a==="none"?s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"flex items-center justify-between",children:s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx(Q,{variant:"ghost",onClick:W,children:" Back to Applications"}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold",children:"Application Details"}),s.jsx("p",{className:"text-muted-foreground",children:l.customerName||"Unnamed Application"})]})]})}),s.jsxs(he,{children:[s.jsx(ye,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsxs(be,{children:["Application #",l.id.slice(-6).toUpperCase()]}),s.jsxs(Be,{children:["Created ",new Date(l.createdAt).toLocaleDateString(),l.submittedAt&&s.jsxs("span",{children:["  Submitted ",new Date(l.submittedAt).toLocaleDateString()]})]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(ae,{className:"text-sm font-medium",children:"Status:"}),s.jsxs(Ke,{value:b||l.status,onValueChange:H,children:[s.jsx(He,{className:"w-[200px]",children:s.jsx(Ye,{})}),s.jsx(We,{children:Bu.statusOptions.map(re=>s.jsx(le,{value:re.value,children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:`w-2 h-2 rounded-full ${re.color.split(" ")[0]}`}),s.jsx("span",{children:re.label})]})},re.value))})]})]}),l.fraudCheckStatus&&s.jsxs(Re,{variant:"outline",children:["IDV: ",l.fraudCheckStatus.charAt(0).toUpperCase()+l.fraudCheckStatus.slice(1)]})]})]})}),s.jsxs(fe,{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Customer Information"}),s.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[s.jsxs("div",{children:[s.jsx(ae,{children:"Name"}),s.jsx("p",{className:"text-sm",children:l.customerName||"Not provided"})]}),s.jsxs("div",{children:[s.jsx(ae,{children:"Email"}),s.jsx("p",{className:"text-sm",children:l.customerEmail||"Not provided"})]}),s.jsxs("div",{children:[s.jsx(ae,{children:"Phone"}),s.jsx("p",{className:"text-sm",children:l.customerPhone||"Not provided"})]}),s.jsxs("div",{children:[s.jsx(ae,{children:"Customer ID"}),s.jsx("p",{className:"text-sm",children:l.customerId||"Not assigned"})]})]})]}),Object.keys(l.data).length>0&&s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Application Data"}),s.jsx("div",{className:"space-y-4",children:Object.entries(l.data).map(([re,pe])=>s.jsxs("div",{className:"border rounded-lg p-4",children:[s.jsx("h4",{className:"font-medium mb-2 capitalize",children:re.replace("-"," ")}),s.jsx("div",{className:"grid gap-2 md:grid-cols-2",children:Object.entries(pe).map(([ue,xe])=>s.jsxs("div",{children:[s.jsx(ae,{className:"text-xs text-muted-foreground capitalize",children:ue.replace("-"," ")}),s.jsx("p",{className:"text-sm",children:xe||"Not provided"})]},ue))})]},re))})]}),l.uploadedFiles.length>0&&s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Uploaded Documents"}),s.jsx("div",{className:"space-y-2",children:l.uploadedFiles.map(re=>s.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(Zt,{className:"h-4 w-4"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium",children:re.name}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:[(re.size/1024/1024).toFixed(2)," MB  Uploaded ",new Date(re.uploadedAt).toLocaleDateString()]})]})]}),s.jsxs(Q,{variant:"outline",size:"sm",children:[s.jsx(Wr,{className:"h-4 w-4 mr-2"}),"View"]})]},re.id))})]}),l.notes&&s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Notes"}),s.jsx("div",{className:"bg-muted/50 p-4 rounded-lg",children:s.jsx("p",{className:"text-sm",children:l.notes})})]}),l.reviewedAt&&s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Review Information"}),s.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[s.jsxs("div",{children:[s.jsx(ae,{children:"Reviewed Date"}),s.jsx("p",{className:"text-sm",children:new Date(l.reviewedAt).toLocaleDateString()})]}),s.jsxs("div",{children:[s.jsx(ae,{children:"Reviewed By"}),s.jsx("p",{className:"text-sm",children:l.reviewedBy||"Not specified"})]})]})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsx("h3",{className:"text-lg font-semibold",children:"Admin Notes (Internal Only)"}),s.jsxs(Q,{variant:"outline",size:"sm",onClick:Y,children:[s.jsx(Wn,{className:"h-4 w-4 mr-2"}),b&&b!==l.status?"Save Status & Notes":"Save Notes"]})]}),s.jsx(un,{ref:N,value:x,onChange:re=>y(re.target.value),placeholder:"Add internal notes about this application (not visible to customer)...",rows:4,className:"mb-4"}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:["These notes are for internal use only and will not be visible to the customer.",b&&b!==l.status&&s.jsxs("span",{className:"block mt-1 text-orange-600 font-medium",children:['Status will be changed to "',(J=Bu.statusOptions.find(re=>re.value===b))==null?void 0:J.label,'" when saved.']})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Application History"}),s.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:((ne=l.history)==null?void 0:ne.length)>0?l.history.sort((re,pe)=>new Date(pe.timestamp).getTime()-new Date(re.timestamp).getTime()).map(re=>s.jsxs("div",{className:"flex items-start space-x-3 p-3 border rounded-lg bg-muted/20",children:[s.jsx("div",{className:"flex-shrink-0 mt-1",children:re.action.includes("Status")?s.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:s.jsx(Wa,{className:"h-4 w-4 text-blue-600"})}):re.action.includes("Document")?s.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center",children:s.jsx(Zt,{className:"h-4 w-4 text-green-600"})}):re.action.includes("Notes")?s.jsx("div",{className:"w-8 h-8 bg-purple-100 rounded-full flex items-center justify-center",children:s.jsx(Zt,{className:"h-4 w-4 text-purple-600"})}):s.jsx("div",{className:"w-8 h-8 bg-gray-100 rounded-full flex items-center justify-center",children:s.jsx(gn,{className:"h-4 w-4 text-gray-600"})})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h4",{className:"text-sm font-medium",children:re.action}),s.jsxs("span",{className:"text-xs text-muted-foreground",children:[new Date(re.timestamp).toLocaleDateString()," ",new Date(re.timestamp).toLocaleTimeString()]})]}),s.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:re.details}),(re.oldValue||re.newValue)&&s.jsxs("div",{className:"text-xs text-muted-foreground mt-2 space-y-1",children:[re.oldValue&&s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"From:"})," ",re.oldValue]}),re.newValue&&s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"To:"})," ",re.newValue]})]}),s.jsxs("div",{className:"flex items-center space-x-1 mt-2",children:[s.jsx(Gr,{className:"h-3 w-3 text-muted-foreground"}),s.jsx("span",{className:"text-xs text-muted-foreground",children:re.userName})]})]})]},re.id)):s.jsxs("div",{className:"text-center py-6 text-muted-foreground",children:[s.jsx(gn,{className:"h-8 w-8 mx-auto mb-2 text-muted-foreground/50"}),s.jsx("p",{className:"text-sm",children:"No history available"})]})})]})]})]})]}):s.jsxs("div",{className:"space-y-6",children:[r&&s.jsx(CXe,{onClose:()=>i(!1),onSelectType:z}),s.jsx("div",{className:"ri-page-header",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"ri-page-title",children:U()}),s.jsx("p",{className:"ri-page-description",children:"Manage finance applications and approval workflows"})]}),s.jsx("div",{children:s.jsxs(Q,{onClick:F,children:[s.jsx(yt,{className:"h-4 w-4 mr-2"}),"New Application"]})})]})}),s.jsxs("div",{className:"ri-stats-grid",children:[s.jsxs(he,{children:[s.jsxs(ye,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(be,{className:"text-sm font-medium",children:"Total Applications"}),s.jsx(Zt,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsxs(fe,{children:[s.jsx("div",{className:"text-2xl font-bold",children:E.length}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"+12% from last month"})]})]}),s.jsxs(he,{children:[s.jsxs(ye,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(be,{className:"text-sm font-medium",children:"Pending Review"}),s.jsx(ga,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsxs(fe,{children:[s.jsx("div",{className:"text-2xl font-bold",children:E.filter(re=>re.status==="under_review").length}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Awaiting approval"})]})]}),s.jsxs(he,{children:[s.jsxs(ye,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(be,{className:"text-sm font-medium",children:"Approval Rate"}),s.jsx(Lr,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsxs(fe,{children:[s.jsx("div",{className:"text-2xl font-bold",children:"78%"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"+5% from last month"})]})]}),s.jsxs(he,{children:[s.jsxs(ye,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(be,{className:"text-sm font-medium",children:"Avg Processing Time"}),s.jsx(Wa,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsxs(fe,{children:[s.jsx("div",{className:"text-2xl font-bold",children:"2.3 days"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"-0.5 days from last month"})]})]})]}),s.jsxs(Vn,{value:e,onValueChange:n,children:[s.jsxs(Mn,{children:[s.jsx(tt,{value:"applications",children:"Applications"}),s.jsx(tt,{value:"templates",children:"Templates"})]}),s.jsx(rt,{value:"applications",className:"space-y-4",children:s.jsxs(he,{children:[s.jsxs(ye,{children:[s.jsx(be,{children:"Finance Applications"}),s.jsx(Be,{children:"Manage and review customer finance applications"})]}),s.jsxs(fe,{children:[s.jsxs("div",{className:"flex flex-wrap gap-4 mb-6",children:[s.jsxs("div",{className:"relative flex-1 min-w-[200px]",children:[s.jsx(Rr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),s.jsx(Ae,{placeholder:"Search by name, email, or phone",value:d,onChange:re=>u(re.target.value),className:"pl-10"})]}),s.jsxs(Ke,{value:h,onValueChange:f,children:[s.jsx(He,{className:"w-[180px]",children:s.jsx(Ye,{placeholder:"Filter by Status"})}),s.jsxs(We,{children:[s.jsx(le,{value:"all",children:"All Statuses"}),Bu.statusOptions.map(re=>s.jsx(le,{value:re.value,children:re.label},re.value))]})]}),s.jsx(Ae,{type:"date",value:m,onChange:re=>v(re.target.value),className:"w-[180px]",title:"Filter by creation date (on or after)"})]}),s.jsxs("div",{className:"space-y-4",children:[_.map(re=>s.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-accent/50 transition-colors",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("h4",{className:"font-semibold",children:re.customerName||"Unnamed Application"}),s.jsx(Re,{className:q(re.status),children:re.status.replace("_"," ").toUpperCase()}),re.fraudCheckStatus&&s.jsxs(Re,{variant:"outline",children:["IDV: ",re.fraudCheckStatus.charAt(0).toUpperCase()+re.fraudCheckStatus.slice(1)]})]}),s.jsxs("div",{className:"text-sm text-muted-foreground mt-1",children:[re.customerEmail&&s.jsxs("span",{children:[re.customerEmail,"  "]}),"Created: ",new Date(re.createdAt).toLocaleDateString(),re.submittedAt&&s.jsxs("span",{children:["  Submitted: ",new Date(re.submittedAt).toLocaleDateString()]})]})]}),s.jsx("div",{className:"flex items-center space-x-2",children:s.jsxs(Q,{variant:"outline",size:"sm",onClick:()=>L(re),children:[s.jsx(Wr,{className:"h-4 w-4 mr-2"}),"View"]})})]},re.id)),_.length===0&&s.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[s.jsx(Zt,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),E.length===0?s.jsxs(s.Fragment,{children:[s.jsx("p",{children:"No finance applications yet"}),s.jsx("p",{className:"text-sm",children:"Create your first application to get started"})]}):s.jsxs(s.Fragment,{children:[s.jsx("p",{children:"No applications found matching your criteria"}),s.jsx("p",{className:"text-sm",children:"Try adjusting your search or filters"})]})]})]})]})]})}),s.jsxs(rt,{value:"templates",className:"space-y-4",children:[s.jsxs("div",{className:"relative",children:[s.jsx(Rr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),s.jsx(Ae,{placeholder:"Search templates by name or description",value:p,onChange:re=>g(re.target.value),className:"pl-10"})]}),s.jsx(NXe,{templates:M,onCreateTemplate:D,onUpdateTemplate:P,onDeleteTemplate:R})]})]})]})}function PXe(){return s.jsxs(ki,{children:[s.jsx(It,{path:"/",element:s.jsx(hK,{})}),s.jsx(It,{path:"/portal",element:s.jsx(lne,{})}),s.jsx(It,{path:"/*",element:s.jsx(hK,{})})]})}function TXe(){return s.jsx(sge,{defaultTheme:"light",storageKey:"renter-insight-theme",children:s.jsx(ege,{children:s.jsx(tme,{children:s.jsx(tge,{children:s.jsxs("div",{className:"min-h-screen bg-background",children:[s.jsxs(ki,{children:[s.jsx(It,{path:"/login",element:s.jsx(Sye,{})}),s.jsx(It,{path:"/portalclient/*",element:s.jsx(P1e,{})}),s.jsx(It,{path:"/*",element:s.jsx(Aye,{children:s.jsx(cge,{children:s.jsxs(ki,{children:[s.jsx(It,{path:"/",element:s.jsx(Nye,{})}),s.jsx(It,{path:"/crm/*",element:s.jsx(B1e,{})}),s.jsx(It,{path:"/inventory/*",element:s.jsx(Y1e,{})}),s.jsx(It,{path:"/deals/*",element:s.jsx(t5e,{})}),s.jsx(It,{path:"/finance/*",element:s.jsx(iwe,{})}),s.jsx(It,{path:"/quotes/*",element:s.jsx(Q1e,{})}),s.jsx(It,{path:"/agreements/*",element:s.jsx(a5e,{})}),s.jsx(It,{path:"/service/*",element:s.jsx(u5e,{})}),s.jsx(It,{path:"/pdi/*",element:s.jsx(wEe,{})}),s.jsx(It,{path:"/delivery/*",element:s.jsx(fEe,{})}),s.jsx(It,{path:"/commissions/*",element:s.jsx(CEe,{})}),s.jsx(It,{path:"/portal/*",element:s.jsx(EEe,{})}),s.jsx(It,{path:"/invoices/*",element:s.jsx(kEe,{})}),s.jsx(It,{path:"/settings/*",element:s.jsx(FEe,{})}),s.jsx(It,{path:"/admin/*",element:s.jsx(UEe,{})}),s.jsx(It,{path:"/admin/settings/*",element:s.jsx(ube,{})}),s.jsx(It,{path:"/reports/*",element:s.jsx(jXe,{})}),s.jsx(It,{path:"/client-applications/*",element:s.jsx(PXe,{})})]})})})})]}),s.jsx(Jpe,{})]})})})})})}lc.workerSrc=new URL("pdfjs-dist/build/pdf.worker.min.js",self.location).toString();DO.createRoot(document.getElementById("root")).render(s.jsx(TXe,{}));export{cwe as _,$f as c,$n as g};
